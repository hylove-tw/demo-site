/*! For license information please see main.41c74bee.js.LICENSE.txt */
(()=>{var e={0:e=>{"use strict";var t=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;var i=[0,2,4,5,7,9,11];function n(e,n,r){if("string"!==typeof e)return null;var o=t.exec(e);if(!o||!n&&o[4])return null;var a={letter:o[1].toUpperCase(),acc:o[2].replace(/x/g,"##")};return a.pc=a.letter+a.acc,a.step=(a.letter.charCodeAt(0)+3)%7,a.alt="b"===a.acc[0]?-a.acc.length:a.acc.length,a.chroma=i[a.step]+a.alt,o[3]&&(a.oct=+o[3],a.midi=a.chroma+12*(a.oct+1),a.freq=s(a.midi,r)),n&&(a.tonicOf=o[4]),a}function s(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var r={parse:n,regex:function(){return t},midiToFreq:s};["letter","acc","pc","step","alt","chroma","oct","midi","freq"].forEach((function(e){r[e]=function(t){var i=n(t);return i&&"undefined"!==typeof i[e]?i[e]:null}})),e.exports=r},4:(e,t,i)=>{"use strict";var n=i(853),s=i(43),r=i(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.consumer"),g=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var E=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var w=Symbol.for("react.memo_cache_sentinel"),T=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case u:return"Fragment";case h:return"Portal";case f:return"Profiler";case d:return"StrictMode";case v:return"Suspense";case y:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case g:return(e.displayName||"Context")+".Provider";case m:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case x:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return P(e(t))}catch(i){}}return null}var C,A,N=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=Object.assign;function k(e){if(void 0===C)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);C=t&&t[1]||"",A=-1<i.stack.indexOf("\n    at")?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+C+e+A}var I=!1;function R(e,t){if(!e||I)return"";I=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(s){var n=s}Reflect.construct(e,[],i)}else{try{i.call()}catch(r){n=r}e.call(i.prototype)}}else{try{throw Error()}catch(o){n=o}(i=e())&&"function"===typeof i.catch&&i.catch((function(){}))}}catch(a){if(a&&n&&"string"===typeof a.stack)return[a.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=n.DetermineComponentFrameRoot(),o=r[0],a=r[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(s=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(n===l.length||s===c.length)for(n=l.length-1,s=c.length-1;1<=n&&0<=s&&l[n]!==c[s];)s--;for(;1<=n&&0<=s;n--,s--)if(l[n]!==c[s]){if(1!==n||1!==s)do{if(n--,0>--s||l[n]!==c[s]){var h="\n"+l[n].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}}while(1<=n&&0<=s);break}}}finally{I=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?k(i):""}function O(e){switch(e.tag){case 26:case 27:case 5:return k(e.type);case 16:return k("Lazy");case 13:return k("Suspense");case 19:return k("SuspenseList");case 0:case 15:return e=R(e.type,!1);case 11:return e=R(e.type.render,!1);case 1:return e=R(e.type,!0);default:return""}}function D(e){try{var t="";do{t+=O(e),e=e.return}while(e);return t}catch(i){return"\nError generating stack: "+i.message+"\n"+i.stack}}function B(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function F(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function V(e){if(B(e)!==e)throw Error(o(188))}function j(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=j(e)))return t;e=e.sibling}return null}var G=Array.isArray,W=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},U=[],H=-1;function X(e){return{current:e}}function Y(e){0>H||(e.current=U[H],U[H]=null,H--)}function K(e,t){H++,U[H]=e.current,e.current=t}var q=X(null),$=X(null),Z=X(null),Q=X(null);function J(e,t){switch(K(Z,t),K($,e),K(q,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?$h(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Zh(e=$h(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(q),K(q,t)}function ee(){Y(q),Y($),Y(Z)}function te(e){null!==e.memoizedState&&K(Q,e);var t=q.current,i=Zh(t,e.type);t!==i&&(K($,e),K(q,i))}function ie(e){$.current===e&&(Y(q),Y($)),Q.current===e&&(Y(Q),Du._currentValue=z)}var ne=Object.prototype.hasOwnProperty,se=n.unstable_scheduleCallback,re=n.unstable_cancelCallback,oe=n.unstable_shouldYield,ae=n.unstable_requestPaint,le=n.unstable_now,ce=n.unstable_getCurrentPriorityLevel,he=n.unstable_ImmediatePriority,ue=n.unstable_UserBlockingPriority,de=n.unstable_NormalPriority,fe=n.unstable_LowPriority,pe=n.unstable_IdlePriority,me=n.log,ge=n.unstable_setDisableYieldValue,be=null,ve=null;function ye(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(be,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Se(e)/Ee|0)|0},Se=Math.log,Ee=Math.LN2;var we=128,Te=4194304;function _e(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Me(e,t){var i=e.pendingLanes;if(0===i)return 0;var n=0,s=e.suspendedLanes,r=e.pingedLanes,o=e.warmLanes;e=0!==e.finishedLanes;var a=134217727&i;return 0!==a?0!==(i=a&~s)?n=_e(i):0!==(r&=a)?n=_e(r):e||0!==(o=a&~o)&&(n=_e(o)):0!==(a=i&~s)?n=_e(a):0!==r?n=_e(r):e||0!==(o=i&~o)&&(n=_e(o)),0===n?0:0!==t&&t!==n&&0===(t&s)&&((s=n&-n)>=(o=t&-t)||32===s&&0!==(4194176&o))?t:n}function Pe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ce(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ae(){var e=we;return 0===(4194176&(we<<=1))&&(we=128),e}function Ne(){var e=Te;return 0===(62914560&(Te<<=1))&&(Te=4194304),e}function Le(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-xe(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194218&i}function Re(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-xe(i),s=1<<n;s&t|e[n]&t&&(e[n]|=t),i&=~s}}function Oe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function De(){var e=W.p;return 0!==e?e:void 0===(e=window.event)?32:Zu(e.type)}var Be=Math.random().toString(36).slice(2),Fe="__reactFiber$"+Be,Ve="__reactProps$"+Be,je="__reactContainer$"+Be,Ge="__reactEvents$"+Be,We="__reactListeners$"+Be,ze="__reactHandles$"+Be,Ue="__reactResources$"+Be,He="__reactMarker$"+Be;function Xe(e){delete e[Fe],delete e[Ve],delete e[Ge],delete e[We],delete e[ze]}function Ye(e){var t=e[Fe];if(t)return t;for(var i=e.parentNode;i;){if(t=i[je]||i[Fe]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=lu(e);null!==e;){if(i=e[Fe])return i;e=lu(e)}return t}i=(e=i).parentNode}return null}function Ke(e){if(e=e[Fe]||e[je]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function $e(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ze(e){e[He]=!0}var Qe=new Set,Je={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Je[e]=t,e=0;e<t.length;e++)Qe.add(t[e])}var it=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},rt={};function ot(e,t,i){if(s=t,ne.call(rt,s)||!ne.call(st,s)&&(nt.test(s)?rt[s]=!0:(st[s]=!0,0)))if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+i)}var s}function at(e,t,i){if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+i)}}function lt(e,t,i,n){if(null===n)e.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(i)}e.setAttributeNS(t,i,""+n)}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=ht(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var s=i.get,r=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=ht(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,i,n,s,r,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?vt(e,o,ct(t)):null!=i?vt(e,o,ct(i)):null!=n&&e.removeAttribute("value"),null==s&&null!=r&&(e.defaultChecked=!!r),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function bt(e,t,i,n,s,r,o,a){if(null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.type=r),null!=t||null!=i){if(!("submit"!==r&&"reset"!==r||void 0!==t&&null!==t))return;i=null!=i?""+ct(i):"",t=null!=t?""+ct(t):i,a||t===e.value||(e.value=t),e.defaultValue=t}n="function"!==typeof(n=null!=n?n:s)&&"symbol"!==typeof n&&!!n,e.checked=a?e.checked:!!n,e.defaultChecked=!!n,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function vt(e,t,i){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function yt(e,t,i,n){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&n&&(e[i].defaultSelected=!0)}else{for(i=""+ct(i),t=null,s=0;s<e.length;s++){if(e[s].value===i)return e[s].selected=!0,void(n&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function xt(e,t,i){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=i)?e.defaultValue=null!=i?""+ct(i):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,i,n){if(null==t){if(null!=n){if(null!=i)throw Error(o(92));if(G(n)){if(1<n.length)throw Error(o(93));n=n[0]}i=n}null==i&&(i=""),t=i}i=ct(t),e.defaultValue=i,(n=e.textContent)===i&&""!==n&&null!==n&&(e.value=n)}function Et(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var wt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Tt(e,t,i){var n=0===t.indexOf("--");null==i||"boolean"===typeof i||""===i?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,i):"number"!==typeof i||0===i||wt.has(t)?"float"===t?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function _t(e,t,i){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=i){for(var n in i)!i.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&i[s]!==n&&Tt(e,s,n)}else for(var r in t)t.hasOwnProperty(r)&&Tt(e,r,t[r])}function Mt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ct=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Ct.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Nt=null;function Lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var kt=null,It=null;function Rt(e){var t=Ke(e);if(t&&(e=t.stateNode)){var i=e[Ve]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var s=n[Ve]||null;if(!s)throw Error(o(90));gt(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<i.length;t++)(n=i[t]).form===e.form&&dt(n)}break e;case"textarea":xt(e,i.value,i.defaultValue);break e;case"select":null!=(t=i.value)&&yt(e,!!i.multiple,t,!1)}}}var Ot=!1;function Dt(e,t,i){if(Ot)return e(t,i);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==kt||null!==It)&&(Fc(),kt&&(t=kt,e=It,It=kt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Bt(e,t){var i=e.stateNode;if(null===i)return null;var n=i[Ve]||null;if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(o(231,t,typeof i));return i}var Ft=!1;if(it)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Sd){Ft=!1}var jt=null,Gt=null,Wt=null;function zt(){if(Wt)return Wt;var e,t,i=Gt,n=i.length,s="value"in jt?jt.value:jt.textContent,r=s.length;for(e=0;e<n&&i[e]===s[e];e++);var o=n-e;for(t=1;t<=o&&i[n-t]===s[r-t];t++);return Wt=s.slice(e,1<t?1-t:void 0)}function Ut(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Ht(){return!0}function Xt(){return!1}function Yt(e){function t(t,i,n,s,r){for(var o in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Ht:Xt,this.isPropagationStopped=Xt,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ht)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ht)},persist:function(){},isPersistent:Ht}),t}var Kt,qt,$t,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qt=Yt(Zt),Jt=L({},Zt,{view:0,detail:0}),ei=Yt(Jt),ti=L({},Jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:di,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Kt=e.screenX-$t.screenX,qt=e.screenY-$t.screenY):qt=Kt=0,$t=e),Kt)},movementY:function(e){return"movementY"in e?e.movementY:qt}}),ii=Yt(ti),ni=Yt(L({},ti,{dataTransfer:0})),si=Yt(L({},Jt,{relatedTarget:0})),ri=Yt(L({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),oi=Yt(L({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ai=Yt(L({},Zt,{data:0})),li={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ci={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ui(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hi[e])&&!!t[e]}function di(){return ui}var fi=Yt(L({},Jt,{key:function(e){if(e.key){var t=li[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ut(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ci[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:di,charCode:function(e){return"keypress"===e.type?Ut(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ut(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),pi=Yt(L({},ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),mi=Yt(L({},Jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:di})),gi=Yt(L({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bi=Yt(L({},ti,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),vi=Yt(L({},Zt,{newState:0,oldState:0})),yi=[9,13,27,32],xi=it&&"CompositionEvent"in window,Si=null;it&&"documentMode"in document&&(Si=document.documentMode);var Ei=it&&"TextEvent"in window&&!Si,wi=it&&(!xi||Si&&8<Si&&11>=Si),Ti=String.fromCharCode(32),_i=!1;function Mi(e,t){switch(e){case"keyup":return-1!==yi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pi(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ci=!1;var Ai={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ni(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ai[e.type]:"textarea"===t}function Li(e,t,i,n){kt?It?It.push(n):It=[n]:kt=n,0<(t=Dh(t,"onChange")).length&&(i=new Qt("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var ki=null,Ii=null;function Ri(e){Ch(e,0)}function Oi(e){if(dt(qe(e)))return e}function Di(e,t){if("change"===e)return t}var Bi=!1;if(it){var Fi;if(it){var Vi="oninput"in document;if(!Vi){var ji=document.createElement("div");ji.setAttribute("oninput","return;"),Vi="function"===typeof ji.oninput}Fi=Vi}else Fi=!1;Bi=Fi&&(!document.documentMode||9<document.documentMode)}function Gi(){ki&&(ki.detachEvent("onpropertychange",Wi),Ii=ki=null)}function Wi(e){if("value"===e.propertyName&&Oi(Ii)){var t=[];Li(t,Ii,e,Lt(e)),Dt(Ri,t)}}function zi(e,t,i){"focusin"===e?(Gi(),Ii=i,(ki=t).attachEvent("onpropertychange",Wi)):"focusout"===e&&Gi()}function Ui(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Oi(Ii)}function Hi(e,t){if("click"===e)return Oi(t)}function Xi(e,t){if("input"===e||"change"===e)return Oi(t)}var Yi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Ki(e,t){if(Yi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var s=i[n];if(!ne.call(t,s)||!Yi(e[s],t[s]))return!1}return!0}function qi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $i(e,t){var i,n=qi(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qi(n)}}function Zi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Qi(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(n){i=!1}if(!i)break;t=ft((e=t.contentWindow).document)}return t}function Ji(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function en(e,t){var i=Qi(t);t=e.focusedElem;var n=e.selectionRange;if(i!==t&&t&&t.ownerDocument&&Zi(t.ownerDocument.documentElement,t)){if(null!==n&&Ji(t))if(e=n.start,void 0===(i=n.end)&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if((i=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){i=i.getSelection();var s=t.textContent.length,r=Math.min(n.start,s);n=void 0===n.end?r:Math.min(n.end,s),!i.extend&&r>n&&(s=n,n=r,r=s),s=$i(t,r);var o=$i(t,n);s&&o&&(1!==i.rangeCount||i.anchorNode!==s.node||i.anchorOffset!==s.offset||i.focusNode!==o.node||i.focusOffset!==o.offset)&&((e=e.createRange()).setStart(s.node,s.offset),i.removeAllRanges(),r>n?(i.addRange(e),i.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),i.addRange(e)))}for(e=[],i=t;i=i.parentNode;)1===i.nodeType&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(i=e[t]).element.scrollLeft=i.left,i.element.scrollTop=i.top}}var tn=it&&"documentMode"in document&&11>=document.documentMode,nn=null,sn=null,rn=null,on=!1;function an(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;on||null==nn||nn!==ft(n)||("selectionStart"in(n=nn)&&Ji(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},rn&&Ki(rn,n)||(rn=n,0<(n=Dh(sn,"onSelect")).length&&(t=new Qt("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=nn)))}function ln(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var cn={animationend:ln("Animation","AnimationEnd"),animationiteration:ln("Animation","AnimationIteration"),animationstart:ln("Animation","AnimationStart"),transitionrun:ln("Transition","TransitionRun"),transitionstart:ln("Transition","TransitionStart"),transitioncancel:ln("Transition","TransitionCancel"),transitionend:ln("Transition","TransitionEnd")},hn={},un={};function dn(e){if(hn[e])return hn[e];if(!cn[e])return e;var t,i=cn[e];for(t in i)if(i.hasOwnProperty(t)&&t in un)return hn[e]=i[t];return e}it&&(un=document.createElement("div").style,"AnimationEvent"in window||(delete cn.animationend.animation,delete cn.animationiteration.animation,delete cn.animationstart.animation),"TransitionEvent"in window||delete cn.transitionend.transition);var fn=dn("animationend"),pn=dn("animationiteration"),mn=dn("animationstart"),gn=dn("transitionrun"),bn=dn("transitionstart"),vn=dn("transitioncancel"),yn=dn("transitionend"),xn=new Map,Sn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function En(e,t){xn.set(e,t),et(t,[e])}var wn=[],Tn=0,_n=0;function Mn(){for(var e=Tn,t=_n=Tn=0;t<e;){var i=wn[t];wn[t++]=null;var n=wn[t];wn[t++]=null;var s=wn[t];wn[t++]=null;var r=wn[t];if(wn[t++]=null,null!==n&&null!==s){var o=n.pending;null===o?s.next=s:(s.next=o.next,o.next=s),n.pending=s}0!==r&&Nn(i,s,r)}}function Pn(e,t,i,n){wn[Tn++]=e,wn[Tn++]=t,wn[Tn++]=i,wn[Tn++]=n,_n|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function Cn(e,t,i,n){return Pn(e,t,i,n),Ln(e)}function An(e,t){return Pn(e,null,null,t),Ln(e)}function Nn(e,t,i){e.lanes|=i;var n=e.alternate;null!==n&&(n.lanes|=i);for(var s=!1,r=e.return;null!==r;)r.childLanes|=i,null!==(n=r.alternate)&&(n.childLanes|=i),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(s=!0)),e=r,r=r.return;s&&null!==t&&3===e.tag&&(r=e.stateNode,s=31-xe(i),null===(e=(r=r.hiddenUpdates)[s])?r[s]=[t]:e.push(t),t.lane=536870912|i)}function Ln(e){if(50<Cc)throw Cc=0,Ac=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var kn={},In=new WeakMap;function Rn(e,t){if("object"===typeof e&&null!==e){var i=In.get(e);return void 0!==i?i:(t={value:e,source:t,stack:D(t)},In.set(e,t),t)}return{value:e,source:t,stack:D(t)}}var On=[],Dn=0,Bn=null,Fn=0,Vn=[],jn=0,Gn=null,Wn=1,zn="";function Un(e,t){On[Dn++]=Fn,On[Dn++]=Bn,Bn=e,Fn=t}function Hn(e,t,i){Vn[jn++]=Wn,Vn[jn++]=zn,Vn[jn++]=Gn,Gn=e;var n=Wn;e=zn;var s=32-xe(n)-1;n&=~(1<<s),i+=1;var r=32-xe(t)+s;if(30<r){var o=s-s%5;r=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Wn=1<<32-xe(t)+s|i<<s|n,zn=r+e}else Wn=1<<r|i<<s|n,zn=e}function Xn(e){null!==e.return&&(Un(e,1),Hn(e,1,0))}function Yn(e){for(;e===Bn;)Bn=On[--Dn],On[Dn]=null,Fn=On[--Dn],On[Dn]=null;for(;e===Gn;)Gn=Vn[--jn],Vn[jn]=null,zn=Vn[--jn],Vn[jn]=null,Wn=Vn[--jn],Vn[jn]=null}var Kn=null,qn=null,$n=!1,Zn=null,Qn=!1,Jn=Error(o(519));function es(e){throw rs(Rn(Error(o(418,"")),e)),Jn}function ts(e){var t=e.stateNode,i=e.type,n=e.memoizedProps;switch(t[Fe]=e,t[Ve]=n,i){case"dialog":Ah("cancel",t),Ah("close",t);break;case"iframe":case"object":case"embed":Ah("load",t);break;case"video":case"audio":for(i=0;i<Mh.length;i++)Ah(Mh[i],t);break;case"source":Ah("error",t);break;case"img":case"image":case"link":Ah("error",t),Ah("load",t);break;case"details":Ah("toggle",t);break;case"input":Ah("invalid",t),bt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),ut(t);break;case"select":Ah("invalid",t);break;case"textarea":Ah("invalid",t),St(t,n.value,n.defaultValue,n.children),ut(t)}"string"!==typeof(i=n.children)&&"number"!==typeof i&&"bigint"!==typeof i||t.textContent===""+i||!0===n.suppressHydrationWarning||Wh(t.textContent,i)?(null!=n.popover&&(Ah("beforetoggle",t),Ah("toggle",t)),null!=n.onScroll&&Ah("scroll",t),null!=n.onScrollEnd&&Ah("scrollend",t),null!=n.onClick&&(t.onclick=zh),t=!0):t=!1,t||es(e)}function is(e){for(Kn=e.return;Kn;)switch(Kn.tag){case 3:case 27:return void(Qn=!0);case 5:case 13:return void(Qn=!1);default:Kn=Kn.return}}function ns(e){if(e!==Kn)return!1;if(!$n)return is(e),$n=!0,!1;var t,i=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Qh(e.type,e.memoizedProps)),t=!t),t&&(i=!0),i&&qn&&es(e),is(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,i=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===i){qn=au(e.nextSibling);break e}i--}else"$"!==t&&"$!"!==t&&"$?"!==t||i++;e=e.nextSibling}qn=null}}else qn=Kn?au(e.stateNode.nextSibling):null;return!0}function ss(){qn=Kn=null,$n=!1}function rs(e){null===Zn?Zn=[e]:Zn.push(e)}var os=Error(o(460)),as=Error(o(474)),ls={then:function(){}};function cs(e){return"fulfilled"===(e=e.status)||"rejected"===e}function hs(){}function us(e,t,i){switch(void 0===(i=e[i])?e.push(t):i!==t&&(t.then(hs,hs),t=i),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===os)throw Error(o(483));throw e;default:if("string"===typeof t.status)t.then(hs,hs);else{if(null!==(e=tc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var i=t;i.status="fulfilled",i.value=e}}),(function(e){if("pending"===t.status){var i=t;i.status="rejected",i.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===os)throw Error(o(483));throw e}throw ds=t,os}}var ds=null;function fs(){if(null===ds)throw Error(o(459));var e=ds;return ds=null,e}var ps=null,ms=0;function gs(e){var t=ms;return ms+=1,null===ps&&(ps=[]),us(ps,e,t)}function bs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function vs(e,t){if(t.$$typeof===l)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function xs(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Bl(e,t)).index=0,e.sibling=null,e}function r(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=33554434,i):n:(t.flags|=33554434,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Wl(i,e.mode,n)).return=e,t):((t=s(t,i)).return=e,t)}function d(e,t,i,n){var r=i.type;return r===u?p(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===S&&ys(r)===t.type)?(bs(t=s(t,i.props),i),t.return=e,t):(bs(t=Vl(i.type,i.key,i.props,null,e.mode,n),i),t.return=e,t)}function f(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=zl(i,e.mode,n)).return=e,t):((t=s(t,i.children||[])).return=e,t)}function p(e,t,i,n,r){return null===t||7!==t.tag?((t=jl(i,e.mode,n,r)).return=e,t):((t=s(t,i)).return=e,t)}function m(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Wl(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case c:return bs(i=Vl(t.type,t.key,t.props,null,e.mode,i),t),i.return=e,i;case h:return(t=zl(t,e.mode,i)).return=e,t;case S:return m(e,t=(0,t._init)(t._payload),i)}if(G(t)||_(t))return(t=jl(t,e.mode,i,null)).return=e,t;if("function"===typeof t.then)return m(e,gs(t),i);if(t.$$typeof===g)return m(e,Ma(e,t),i);vs(e,t)}return null}function b(e,t,i,n){var s=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return null!==s?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case c:return i.key===s?d(e,t,i,n):null;case h:return i.key===s?f(e,t,i,n):null;case S:return b(e,t,i=(s=i._init)(i._payload),n)}if(G(i)||_(i))return null!==s?null:p(e,t,i,n,null);if("function"===typeof i.then)return b(e,t,gs(i),n);if(i.$$typeof===g)return b(e,t,Ma(e,i),n);vs(e,i)}return null}function v(e,t,i,n,s){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return l(t,e=e.get(i)||null,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case c:return d(t,e=e.get(null===n.key?i:n.key)||null,n,s);case h:return f(t,e=e.get(null===n.key?i:n.key)||null,n,s);case S:return v(e,t,i,n=(0,n._init)(n._payload),s)}if(G(n)||_(n))return p(t,e=e.get(i)||null,n,s,null);if("function"===typeof n.then)return v(e,t,i,gs(n),s);if(n.$$typeof===g)return v(e,t,i,Ma(t,n),s);vs(t,n)}return null}function y(l,d,f,p){if("object"===typeof f&&null!==f&&f.type===u&&null===f.key&&(f=f.props.children),"object"===typeof f&&null!==f){switch(f.$$typeof){case c:e:{for(var x=f.key;null!==d;){if(d.key===x){if((x=f.type)===u){if(7===d.tag){i(l,d.sibling),(p=s(d,f.props.children)).return=l,l=p;break e}}else if(d.elementType===x||"object"===typeof x&&null!==x&&x.$$typeof===S&&ys(x)===d.type){i(l,d.sibling),bs(p=s(d,f.props),f),p.return=l,l=p;break e}i(l,d);break}t(l,d),d=d.sibling}f.type===u?((p=jl(f.props.children,l.mode,p,f.key)).return=l,l=p):(bs(p=Vl(f.type,f.key,f.props,null,l.mode,p),f),p.return=l,l=p)}return a(l);case h:e:{for(x=f.key;null!==d;){if(d.key===x){if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){i(l,d.sibling),(p=s(d,f.children||[])).return=l,l=p;break e}i(l,d);break}t(l,d),d=d.sibling}(p=zl(f,l.mode,p)).return=l,l=p}return a(l);case S:return y(l,d,f=(x=f._init)(f._payload),p)}if(G(f))return function(s,o,a,l){for(var c=null,h=null,u=o,d=o=0,f=null;null!==u&&d<a.length;d++){u.index>d?(f=u,u=null):f=u.sibling;var p=b(s,u,a[d],l);if(null===p){null===u&&(u=f);break}e&&u&&null===p.alternate&&t(s,u),o=r(p,o,d),null===h?c=p:h.sibling=p,h=p,u=f}if(d===a.length)return i(s,u),$n&&Un(s,d),c;if(null===u){for(;d<a.length;d++)null!==(u=m(s,a[d],l))&&(o=r(u,o,d),null===h?c=u:h.sibling=u,h=u);return $n&&Un(s,d),c}for(u=n(u);d<a.length;d++)null!==(f=v(u,s,d,a[d],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?d:f.key),o=r(f,o,d),null===h?c=f:h.sibling=f,h=f);return e&&u.forEach((function(e){return t(s,e)})),$n&&Un(s,d),c}(l,d,f,p);if(_(f)){if("function"!==typeof(x=_(f)))throw Error(o(150));return function(s,a,l,c){if(null==l)throw Error(o(151));for(var h=null,u=null,d=a,f=a=0,p=null,g=l.next();null!==d&&!g.done;f++,g=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var y=b(s,d,g.value,c);if(null===y){null===d&&(d=p);break}e&&d&&null===y.alternate&&t(s,d),a=r(y,a,f),null===u?h=y:u.sibling=y,u=y,d=p}if(g.done)return i(s,d),$n&&Un(s,f),h;if(null===d){for(;!g.done;f++,g=l.next())null!==(g=m(s,g.value,c))&&(a=r(g,a,f),null===u?h=g:u.sibling=g,u=g);return $n&&Un(s,f),h}for(d=n(d);!g.done;f++,g=l.next())null!==(g=v(d,s,f,g.value,c))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),a=r(g,a,f),null===u?h=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(s,e)})),$n&&Un(s,f),h}(l,d,f=x.call(f),p)}if("function"===typeof f.then)return y(l,d,gs(f),p);if(f.$$typeof===g)return y(l,d,Ma(l,f),p);vs(l,f)}return"string"===typeof f&&""!==f||"number"===typeof f||"bigint"===typeof f?(f=""+f,null!==d&&6===d.tag?(i(l,d.sibling),(p=s(d,f)).return=l,l=p):(i(l,d),(p=Wl(f,l.mode,p)).return=l,l=p),a(l)):i(l,d)}return function(e,t,i,n){try{ms=0;var s=y(e,t,i,n);return ps=null,s}catch(o){if(o===os)throw o;var r=Ol(29,o,null,e.mode);return r.lanes=n,r.return=e,r}}}var Ss=xs(!0),Es=xs(!1),ws=X(null),Ts=X(0);function _s(e,t){K(Ts,e=cc),K(ws,t),cc=e|t.baseLanes}function Ms(){K(Ts,cc),K(ws,ws.current)}function Ps(){cc=Ts.current,Y(ws),Y(Ts)}var Cs=X(null),As=null;function Ns(e){var t=e.alternate;K(Rs,1&Rs.current),K(Cs,e),null===As&&(null===t||null!==ws.current||null!==t.memoizedState)&&(As=e)}function Ls(e){if(22===e.tag){if(K(Rs,Rs.current),K(Cs,e),null===As){var t=e.alternate;null!==t&&null!==t.memoizedState&&(As=e)}}else ks()}function ks(){K(Rs,Rs.current),K(Cs,Cs.current)}function Is(e){Y(Cs),As===e&&(As=null),Y(Rs)}var Rs=X(0);function Os(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ds="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Bs=n.unstable_scheduleCallback,Fs=n.unstable_NormalPriority,Vs={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function js(){return{controller:new Ds,data:new Map,refCount:0}}function Gs(e){e.refCount--,0===e.refCount&&Bs(Fs,(function(){e.controller.abort()}))}var Ws=null,zs=0,Us=0,Hs=null;function Xs(){if(0===--zs&&null!==Ws){null!==Hs&&(Hs.status="fulfilled");var e=Ws;Ws=null,Us=0,Hs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ys=N.S;N.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ws){var i=Ws=[];zs=0,Us=Sh(),Hs={status:"pending",value:void 0,then:function(e){i.push(e)}}}zs++,t.then(Xs,Xs)}(0,t),null!==Ys&&Ys(e,t)};var Ks=X(null);function qs(){var e=Ks.current;return null!==e?e:tc.pooledCache}function $s(e,t){K(Ks,null===t?Ks.current:t.pool)}function Zs(){var e=qs();return null===e?null:{parent:Vs._currentValue,pool:e}}var Qs=0,Js=null,er=null,tr=null,ir=!1,nr=!1,sr=!1,rr=0,or=0,ar=null,lr=0;function cr(){throw Error(o(321))}function hr(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Yi(e[i],t[i]))return!1;return!0}function ur(e,t,i,n,s,r){return Qs=r,Js=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=null===e||null===e.memoizedState?Mo:Po,sr=!1,r=i(n,s),sr=!1,nr&&(r=fr(t,i,n,s)),dr(e),r}function dr(e){N.H=_o;var t=null!==er&&null!==er.next;if(Qs=0,tr=er=Js=null,ir=!1,or=0,ar=null,t)throw Error(o(300));null===e||Uo||null!==(e=e.dependencies)&&wa(e)&&(Uo=!0)}function fr(e,t,i,n){Js=e;var s=0;do{if(nr&&(ar=null),or=0,nr=!1,25<=s)throw Error(o(301));if(s+=1,tr=er=null,null!=e.updateQueue){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,null!=r.memoCache&&(r.memoCache.index=0)}N.H=Co,r=t(i,n)}while(nr);return r}function pr(){var e=N.H,t=e.useState()[0];return t="function"===typeof t.then?xr(t):t,e=e.useState()[0],(null!==er?er.memoizedState:null)!==e&&(Js.flags|=1024),t}function mr(){var e=0!==rr;return rr=0,e}function gr(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function br(e){if(ir){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ir=!1}Qs=0,tr=er=Js=null,nr=!1,or=rr=0,ar=null}function vr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===tr?Js.memoizedState=tr=e:tr=tr.next=e,tr}function yr(){if(null===er){var e=Js.alternate;e=null!==e?e.memoizedState:null}else e=er.next;var t=null===tr?Js.memoizedState:tr.next;if(null!==t)tr=t,er=e;else{if(null===e){if(null===Js.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(er=e).memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},null===tr?Js.memoizedState=tr=e:tr=tr.next=e}return tr}function xr(e){var t=or;return or+=1,null===ar&&(ar=[]),e=us(ar,e,t),t=Js,null===(null===tr?t.memoizedState:tr.next)&&(t=t.alternate,N.H=null===t||null===t.memoizedState?Mo:Po),e}function Sr(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return xr(e);if(e.$$typeof===g)return _a(e)}throw Error(o(438,String(e)))}function Er(e){var t=null,i=Js.updateQueue;if(null!==i&&(t=i.memoCache),null==t){var n=Js.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===i&&(i={lastEffect:null,events:null,stores:null,memoCache:null},Js.updateQueue=i),i.memoCache=t,void 0===(i=t.data[t.index]))for(i=t.data[t.index]=Array(e),n=0;n<e;n++)i[n]=w;return t.index++,i}function wr(e,t){return"function"===typeof t?t(e):t}function Tr(e){return _r(yr(),er,e)}function _r(e,t,i){var n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=i;var s=e.baseQueue,r=n.pending;if(null!==r){if(null!==s){var a=s.next;s.next=r.next,r.next=a}t.baseQueue=s=r,n.pending=null}if(r=e.baseState,null===s)e.memoizedState=r;else{var l=a=null,c=null,h=t=s.next,u=!1;do{var d=-536870913&h.lane;if(d!==h.lane?(nc&d)===d:(Qs&d)===d){var f=h.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),d===Us&&(u=!0);else{if((Qs&f)===f){h=h.next,f===Us&&(u=!0);continue}d={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},null===c?(l=c=d,a=r):c=c.next=d,Js.lanes|=f,uc|=f}d=h.action,sr&&i(r,d),r=h.hasEagerState?h.eagerState:i(r,d)}else f={lane:d,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},null===c?(l=c=f,a=r):c=c.next=f,Js.lanes|=d,uc|=d;h=h.next}while(null!==h&&h!==t);if(null===c?a=r:c.next=l,!Yi(r,e.memoizedState)&&(Uo=!0,u&&null!==(i=Hs)))throw i;e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}return null===s&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Mr(e){var t=yr(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var n=i.dispatch,s=i.pending,r=t.memoizedState;if(null!==s){i.pending=null;var a=s=s.next;do{r=e(r,a.action),a=a.next}while(a!==s);Yi(r,t.memoizedState)||(Uo=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),i.lastRenderedState=r}return[r,n]}function Pr(e,t,i){var n=Js,s=yr(),r=$n;if(r){if(void 0===i)throw Error(o(407));i=i()}else i=t();var a=!Yi((er||s).memoizedState,i);if(a&&(s.memoizedState=i,Uo=!0),s=s.queue,Qr(Nr.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||null!==tr&&1&tr.memoizedState.tag){if(n.flags|=2048,Yr(9,Ar.bind(null,n,s,i,t),{destroy:void 0},null),null===tc)throw Error(o(349));r||0!==(60&Qs)||Cr(n,t,i)}return i}function Cr(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=Js.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Js.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Ar(e,t,i,n){t.value=i,t.getSnapshot=n,Lr(t)&&kr(e)}function Nr(e,t,i){return i((function(){Lr(t)&&kr(e)}))}function Lr(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Yi(e,i)}catch(n){return!0}}function kr(e){var t=An(e,2);null!==t&&kc(t,e,2)}function Ir(e){var t=vr();if("function"===typeof e){var i=e;if(e=i(),sr){ye(!0);try{i()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:e},t}function Rr(e,t,i,n){return e.baseState=i,_r(e,er,"function"===typeof n?n:wr)}function Or(e,t,i,n,s){if(Eo(e))throw Error(o(485));if(null!==(e=t.action)){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){r.listeners.push(e)}};null!==N.T?i(!0):r.isTransition=!1,n(r),null===(i=t.pending)?(r.next=t.pending=r,Dr(t,r)):(r.next=i.next,t.pending=i.next=r)}}function Dr(e,t){var i=t.action,n=t.payload,s=e.state;if(t.isTransition){var r=N.T,o={};N.T=o;try{var a=i(s,n),l=N.S;null!==l&&l(o,a),Br(e,t,a)}catch(c){Vr(e,t,c)}finally{N.T=r}}else try{Br(e,t,r=i(s,n))}catch(h){Vr(e,t,h)}}function Br(e,t,i){null!==i&&"object"===typeof i&&"function"===typeof i.then?i.then((function(i){Fr(e,t,i)}),(function(i){return Vr(e,t,i)})):Fr(e,t,i)}function Fr(e,t,i){t.status="fulfilled",t.value=i,jr(t),e.state=i,null!==(t=e.pending)&&((i=t.next)===t?e.pending=null:(i=i.next,t.next=i,Dr(e,i)))}function Vr(e,t,i){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=i,jr(t),t=t.next}while(t!==n)}e.action=null}function jr(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Gr(e,t){return t}function Wr(e,t){if($n){var i=tc.formState;if(null!==i){e:{var n=Js;if($n){if(qn){t:{for(var s=qn,r=Qn;8!==s.nodeType;){if(!r){s=null;break t}if(null===(s=au(s.nextSibling))){s=null;break t}}s="F!"===(r=s.data)||"F"===r?s:null}if(s){qn=au(s.nextSibling),n="F!"===s.data;break e}}es(n)}n=!1}n&&(t=i[0])}}return(i=vr()).memoizedState=i.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:t},i.queue=n,i=yo.bind(null,Js,n),n.dispatch=i,n=Ir(!1),r=So.bind(null,Js,!1,n.queue),s={state:t,dispatch:null,action:e,pending:null},(n=vr()).queue=s,i=Or.bind(null,Js,s,r,i),s.dispatch=i,n.memoizedState=e,[t,i,!1]}function zr(e){return Ur(yr(),er,e)}function Ur(e,t,i){t=_r(e,t,Gr)[0],e=Tr(wr)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?xr(t):t;var n=yr(),s=n.queue,r=s.dispatch;return i!==n.memoizedState&&(Js.flags|=2048,Yr(9,Hr.bind(null,s,i),{destroy:void 0},null)),[t,r,e]}function Hr(e,t){e.action=t}function Xr(e){var t=yr(),i=er;if(null!==i)return Ur(t,i,e);yr(),t=t.memoizedState;var n=(i=yr()).queue.dispatch;return i.memoizedState=e,[t,n,!1]}function Yr(e,t,i,n){return e={tag:e,create:t,inst:i,deps:n,next:null},null===(t=Js.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Js.updateQueue=t),null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Kr(){return yr().memoizedState}function qr(e,t,i,n){var s=vr();Js.flags|=e,s.memoizedState=Yr(1|t,i,{destroy:void 0},void 0===n?null:n)}function $r(e,t,i,n){var s=yr();n=void 0===n?null:n;var r=s.memoizedState.inst;null!==er&&null!==n&&hr(n,er.memoizedState.deps)?s.memoizedState=Yr(t,i,r,n):(Js.flags|=e,s.memoizedState=Yr(1|t,i,r,n))}function Zr(e,t){qr(8390656,8,e,t)}function Qr(e,t){$r(2048,8,e,t)}function Jr(e,t){return $r(4,2,e,t)}function eo(e,t){return $r(4,4,e,t)}function to(e,t){if("function"===typeof t){e=e();var i=t(e);return function(){"function"===typeof i?i():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function io(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,$r(4,4,to.bind(null,t,e),i)}function no(){}function so(e,t){var i=yr();t=void 0===t?null:t;var n=i.memoizedState;return null!==t&&hr(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function ro(e,t){var i=yr();t=void 0===t?null:t;var n=i.memoizedState;if(null!==t&&hr(t,n[1]))return n[0];if(n=e(),sr){ye(!0);try{e()}finally{ye(!1)}}return i.memoizedState=[n,t],n}function oo(e,t,i){return void 0===i||0!==(1073741824&Qs)?e.memoizedState=t:(e.memoizedState=i,e=Lc(),Js.lanes|=e,uc|=e,i)}function ao(e,t,i,n){return Yi(i,t)?i:null!==ws.current?(e=oo(e,i,n),Yi(e,t)||(Uo=!0),e):0===(42&Qs)?(Uo=!0,e.memoizedState=i):(e=Lc(),Js.lanes|=e,uc|=e,t)}function lo(e,t,i,n,s){var r=W.p;W.p=0!==r&&8>r?r:8;var o=N.T,a={};N.T=a,So(e,!1,t,i);try{var l=s(),c=N.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)xo(e,t,function(e,t){var i=[],n={status:"pending",value:null,reason:null,then:function(e){i.push(e)}};return e.then((function(){n.status="fulfilled",n.value=t;for(var e=0;e<i.length;e++)(0,i[e])(t)}),(function(e){for(n.status="rejected",n.reason=e,e=0;e<i.length;e++)(0,i[e])(void 0)})),n}(l,n),Nc());else xo(e,t,n,Nc())}catch(h){xo(e,t,{then:function(){},status:"rejected",reason:h},Nc())}finally{W.p=r,N.T=o}}function co(){}function ho(e,t,i,n){if(5!==e.tag)throw Error(o(476));var s=uo(e).queue;lo(e,s,t,z,null===i?co:function(){return fo(e),i(n)})}function uo(e){var t=e.memoizedState;if(null!==t)return t;var i={};return(t={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:z},next:null}).next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:i},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function fo(e){xo(e,uo(e).next.queue,{},Nc())}function po(){return _a(Du)}function mo(){return yr().memoizedState}function go(){return yr().memoizedState}function bo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var i=Nc(),n=ka(t,e=La(i),i);return null!==n&&(kc(n,t,i),Ia(n,t,i)),t={cache:js()},void(e.payload=t)}t=t.return}}function vo(e,t,i){var n=Nc();i={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Eo(e)?wo(t,i):null!==(i=Cn(e,t,i,n))&&(kc(i,e,n),To(i,t,n))}function yo(e,t,i){xo(e,t,i,Nc())}function xo(e,t,i,n){var s={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Eo(e))wo(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=r(o,i);if(s.hasEagerState=!0,s.eagerState=a,Yi(a,o))return Pn(e,t,s,0),null===tc&&Mn(),!1}catch(l){}if(null!==(i=Cn(e,t,s,n)))return kc(i,e,n),To(i,t,n),!0}return!1}function So(e,t,i,n){if(n={lane:2,revertLane:Sh(),action:n,hasEagerState:!1,eagerState:null,next:null},Eo(e)){if(t)throw Error(o(479))}else null!==(t=Cn(e,i,n,2))&&kc(t,e,2)}function Eo(e){var t=e.alternate;return e===Js||null!==t&&t===Js}function wo(e,t){nr=ir=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function To(e,t,i){if(0!==(4194176&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,Re(e,i)}}var _o={readContext:_a,use:Sr,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useLayoutEffect:cr,useInsertionEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useSyncExternalStore:cr,useId:cr};_o.useCacheRefresh=cr,_o.useMemoCache=cr,_o.useHostTransitionStatus=cr,_o.useFormState=cr,_o.useActionState=cr,_o.useOptimistic=cr;var Mo={readContext:_a,use:Sr,useCallback:function(e,t){return vr().memoizedState=[e,void 0===t?null:t],e},useContext:_a,useEffect:Zr,useImperativeHandle:function(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,qr(4194308,4,to.bind(null,t,e),i)},useLayoutEffect:function(e,t){return qr(4194308,4,e,t)},useInsertionEffect:function(e,t){qr(4,2,e,t)},useMemo:function(e,t){var i=vr();t=void 0===t?null:t;var n=e();if(sr){ye(!0);try{e()}finally{ye(!1)}}return i.memoizedState=[n,t],n},useReducer:function(e,t,i){var n=vr();if(void 0!==i){var s=i(t);if(sr){ye(!0);try{i(t)}finally{ye(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=vo.bind(null,Js,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},vr().memoizedState=e},useState:function(e){var t=(e=Ir(e)).queue,i=yo.bind(null,Js,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:no,useDeferredValue:function(e,t){return oo(vr(),e,t)},useTransition:function(){var e=Ir(!1);return e=lo.bind(null,Js,e.queue,!0,!1),vr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var n=Js,s=vr();if($n){if(void 0===i)throw Error(o(407));i=i()}else{if(i=t(),null===tc)throw Error(o(349));0!==(60&nc)||Cr(n,t,i)}s.memoizedState=i;var r={value:i,getSnapshot:t};return s.queue=r,Zr(Nr.bind(null,n,r,e),[e]),n.flags|=2048,Yr(9,Ar.bind(null,n,r,i,t),{destroy:void 0},null),i},useId:function(){var e=vr(),t=tc.identifierPrefix;if($n){var i=zn;t=":"+t+"R"+(i=(Wn&~(1<<32-xe(Wn)-1)).toString(32)+i),0<(i=rr++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=lr++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return vr().memoizedState=bo.bind(null,Js)}};Mo.useMemoCache=Er,Mo.useHostTransitionStatus=po,Mo.useFormState=Wr,Mo.useActionState=Wr,Mo.useOptimistic=function(e){var t=vr();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=So.bind(null,Js,!0,i),i.dispatch=t,[e,t]};var Po={readContext:_a,use:Sr,useCallback:so,useContext:_a,useEffect:Qr,useImperativeHandle:io,useInsertionEffect:Jr,useLayoutEffect:eo,useMemo:ro,useReducer:Tr,useRef:Kr,useState:function(){return Tr(wr)},useDebugValue:no,useDeferredValue:function(e,t){return ao(yr(),er.memoizedState,e,t)},useTransition:function(){var e=Tr(wr)[0],t=yr().memoizedState;return["boolean"===typeof e?e:xr(e),t]},useSyncExternalStore:Pr,useId:mo};Po.useCacheRefresh=go,Po.useMemoCache=Er,Po.useHostTransitionStatus=po,Po.useFormState=zr,Po.useActionState=zr,Po.useOptimistic=function(e,t){return Rr(yr(),0,e,t)};var Co={readContext:_a,use:Sr,useCallback:so,useContext:_a,useEffect:Qr,useImperativeHandle:io,useInsertionEffect:Jr,useLayoutEffect:eo,useMemo:ro,useReducer:Mr,useRef:Kr,useState:function(){return Mr(wr)},useDebugValue:no,useDeferredValue:function(e,t){var i=yr();return null===er?oo(i,e,t):ao(i,er.memoizedState,e,t)},useTransition:function(){var e=Mr(wr)[0],t=yr().memoizedState;return["boolean"===typeof e?e:xr(e),t]},useSyncExternalStore:Pr,useId:mo};function Ao(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:L({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}Co.useCacheRefresh=go,Co.useMemoCache=Er,Co.useHostTransitionStatus=po,Co.useFormState=Xr,Co.useActionState=Xr,Co.useOptimistic=function(e,t){var i=yr();return null!==er?Rr(i,0,e,t):(i.baseState=e,[e,i.queue.dispatch])};var No={isMounted:function(e){return!!(e=e._reactInternals)&&B(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=Nc(),s=La(n);s.payload=t,void 0!==i&&null!==i&&(s.callback=i),null!==(t=ka(e,s,n))&&(kc(t,e,n),Ia(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=Nc(),s=La(n);s.tag=1,s.payload=t,void 0!==i&&null!==i&&(s.callback=i),null!==(t=ka(e,s,n))&&(kc(t,e,n),Ia(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Nc(),n=La(i);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=ka(e,n,i))&&(kc(t,e,i),Ia(t,e,i))}};function Lo(e,t,i,n,s,r,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,r,o):!t.prototype||!t.prototype.isPureReactComponent||(!Ki(i,n)||!Ki(s,r))}function ko(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&No.enqueueReplaceState(t,t.state,null)}function Io(e,t){var i=t;if("ref"in t)for(var n in i={},t)"ref"!==n&&(i[n]=t[n]);if(e=e.defaultProps)for(var s in i===t&&(i=L({},i)),e)void 0===i[s]&&(i[s]=e[s]);return i}var Ro="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Oo(e){Ro(e)}function Do(e){console.error(e)}function Bo(e){Ro(e)}function Fo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(i){setTimeout((function(){throw i}))}}function Vo(e,t,i){try{(0,e.onCaughtError)(i.value,{componentStack:i.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout((function(){throw n}))}}function jo(e,t,i){return(i=La(i)).tag=3,i.payload={element:null},i.callback=function(){Fo(e,t)},i}function Go(e){return(e=La(e)).tag=3,e}function Wo(e,t,i,n){var s=i.type.getDerivedStateFromError;if("function"===typeof s){var r=n.value;e.payload=function(){return s(r)},e.callback=function(){Vo(t,i,n)}}var o=i.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Vo(t,i,n),"function"!==typeof s&&(null===Ec?Ec=new Set([this]):Ec.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var zo=Error(o(461)),Uo=!1;function Ho(e,t,i,n){t.child=null===e?Es(t,null,i,n):Ss(t,e.child,i,n)}function Xo(e,t,i,n,s){i=i.render;var r=t.ref;if("ref"in n){var o={};for(var a in n)"ref"!==a&&(o[a]=n[a])}else o=n;return Ta(t),n=ur(e,t,i,o,r,s),a=mr(),null===e||Uo?($n&&a&&Xn(t),t.flags|=1,Ho(e,t,n,s),t.child):(gr(e,t,s),da(e,t,s))}function Yo(e,t,i,n,s){if(null===e){var r=i.type;return"function"!==typeof r||Dl(r)||void 0!==r.defaultProps||null!==i.compare?((e=Vl(i.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Ko(e,t,r,n,s))}if(r=e.child,!fa(e,s)){var o=r.memoizedProps;if((i=null!==(i=i.compare)?i:Ki)(o,n)&&e.ref===t.ref)return da(e,t,s)}return t.flags|=1,(e=Bl(r,n)).ref=t.ref,e.return=t,t.child=e}function Ko(e,t,i,n,s){if(null!==e){var r=e.memoizedProps;if(Ki(r,n)&&e.ref===t.ref){if(Uo=!1,t.pendingProps=n=r,!fa(e,s))return t.lanes=e.lanes,da(e,t,s);0!==(131072&e.flags)&&(Uo=!0)}}return Qo(e,t,i,n,s)}function qo(e,t,i){var n=t.pendingProps,s=n.children,r=0!==(2&t.stateNode._pendingVisibility),o=null!==e?e.memoizedState:null;if(Zo(e,t),"hidden"===n.mode||r){if(0!==(128&t.flags)){if(n=null!==o?o.baseLanes|i:i,null!==e){for(s=t.child=e.child,r=0;null!==s;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~n}else t.childLanes=0,t.child=null;return $o(e,t,n,i)}if(0===(536870912&i))return t.lanes=t.childLanes=536870912,$o(e,t,null!==o?o.baseLanes|i:i,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&$s(0,null!==o?o.cachePool:null),null!==o?_s(t,o):Ms(),Ls(t)}else null!==o?($s(0,o.cachePool),_s(t,o),ks(),t.memoizedState=null):(null!==e&&$s(0,null),Ms(),ks());return Ho(e,t,s,i),t.child}function $o(e,t,i,n){var s=qs();return s=null===s?null:{parent:Vs._currentValue,pool:s},t.memoizedState={baseLanes:i,cachePool:s},null!==e&&$s(0,null),Ms(),Ls(t),null!==e&&Ea(e,t,n,!0),null}function Zo(e,t){var i=t.ref;if(null===i)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof i&&"object"!==typeof i)throw Error(o(284));null!==e&&e.ref===i||(t.flags|=2097664)}}function Qo(e,t,i,n,s){return Ta(t),i=ur(e,t,i,n,void 0,s),n=mr(),null===e||Uo?($n&&n&&Xn(t),t.flags|=1,Ho(e,t,i,s),t.child):(gr(e,t,s),da(e,t,s))}function Jo(e,t,i,n,s,r){return Ta(t),t.updateQueue=null,i=fr(t,n,i,s),dr(e),n=mr(),null===e||Uo?($n&&n&&Xn(t),t.flags|=1,Ho(e,t,i,r),t.child):(gr(e,t,r),da(e,t,r))}function ea(e,t,i,n,s){if(Ta(t),null===t.stateNode){var r=kn,o=i.contextType;"object"===typeof o&&null!==o&&(r=_a(o)),r=new i(n,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=No,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=n,r.state=t.memoizedState,r.refs={},Aa(t),o=i.contextType,r.context="object"===typeof o&&null!==o?_a(o):kn,r.state=t.memoizedState,"function"===typeof(o=i.getDerivedStateFromProps)&&(Ao(t,i,o,n),r.state=t.memoizedState),"function"===typeof i.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(o=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),o!==r.state&&No.enqueueReplaceState(r,r.state,null),Ba(t,n,r,s),Da(),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){r=t.stateNode;var a=t.memoizedProps,l=Io(i,a);r.props=l;var c=r.context,h=i.contextType;o=kn,"object"===typeof h&&null!==h&&(o=_a(h));var u=i.getDerivedStateFromProps;h="function"===typeof u||"function"===typeof r.getSnapshotBeforeUpdate,a=t.pendingProps!==a,h||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a||c!==o)&&ko(t,r,n,o),Ca=!1;var d=t.memoizedState;r.state=d,Ba(t,n,r,s),Da(),c=t.memoizedState,a||d!==c||Ca?("function"===typeof u&&(Ao(t,i,u,n),c=t.memoizedState),(l=Ca||Lo(t,i,l,n,d,c,o))?(h||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),r.props=n,r.state=c,r.context=o,n=l):("function"===typeof r.componentDidMount&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,Na(e,t),h=Io(i,o=t.memoizedProps),r.props=h,u=t.pendingProps,d=r.context,c=i.contextType,l=kn,"object"===typeof c&&null!==c&&(l=_a(c)),(c="function"===typeof(a=i.getDerivedStateFromProps)||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==u||d!==l)&&ko(t,r,n,l),Ca=!1,d=t.memoizedState,r.state=d,Ba(t,n,r,s),Da();var f=t.memoizedState;o!==u||d!==f||Ca||null!==e&&null!==e.dependencies&&wa(e.dependencies)?("function"===typeof a&&(Ao(t,i,a,n),f=t.memoizedState),(h=Ca||Lo(t,i,h,n,d,f,l)||null!==e&&null!==e.dependencies&&wa(e.dependencies))?(c||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(n,f,l),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(n,f,l)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=f),r.props=n,r.state=f,r.context=l,n=h):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return r=n,Zo(e,t),n=0!==(128&t.flags),r||n?(r=t.stateNode,i=n&&"function"!==typeof i.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&n?(t.child=Ss(t,e.child,null,s),t.child=Ss(t,null,i,s)):Ho(e,t,i,s),t.memoizedState=r.state,e=t.child):e=da(e,t,s),e}function ta(e,t,i,n){return ss(),t.flags|=256,Ho(e,t,i,n),t.child}var ia={dehydrated:null,treeContext:null,retryLane:0};function na(e){return{baseLanes:e,cachePool:Zs()}}function sa(e,t,i){return e=null!==e?e.childLanes&~i:0,t&&(e|=pc),e}function ra(e,t,i){var n,s=t.pendingProps,r=!1,a=0!==(128&t.flags);if((n=a)||(n=(null===e||null!==e.memoizedState)&&0!==(2&Rs.current)),n&&(r=!0,t.flags&=-129),n=0!==(32&t.flags),t.flags&=-33,null===e){if($n){if(r?Ns(t):ks(),$n){var l,c=qn;if(l=c){e:{for(l=c,c=Qn;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=au(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Gn?{id:Wn,overflow:zn}:null,retryLane:536870912},(l=Ol(18,null,null,0)).stateNode=c,l.return=t,t.child=l,Kn=t,qn=null,l=!0):l=!1}l||es(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return"$!"===c.data?t.lanes=16:t.lanes=536870912,null;Is(t)}return c=s.children,s=s.fallback,r?(ks(),c=aa({mode:"hidden",children:c},r=t.mode),s=jl(s,r,i,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(r=t.child).memoizedState=na(i),r.childLanes=sa(e,n,i),t.memoizedState=ia,s):(Ns(t),oa(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(Ns(t),t.flags&=-257,t=la(e,t,i)):null!==t.memoizedState?(ks(),t.child=e.child,t.flags|=128,t=null):(ks(),r=s.fallback,c=t.mode,s=aa({mode:"visible",children:s.children},c),(r=jl(r,c,i,null)).flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,Ss(t,e.child,null,i),(s=t.child).memoizedState=na(i),s.childLanes=sa(e,n,i),t.memoizedState=ia,t=r);else if(Ns(t),"$!"===c.data){if(n=c.nextSibling&&c.nextSibling.dataset)var h=n.dgst;n=h,(s=Error(o(419))).stack="",s.digest=n,rs({value:s,source:null,stack:null}),t=la(e,t,i)}else if(Uo||Ea(e,t,i,!1),n=0!==(i&e.childLanes),Uo||n){if(null!==(n=tc)){if(0!==(42&(s=i&-i)))s=1;else switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=64;break;case 268435456:s=134217728;break;default:s=0}if(0!==(s=0!==(s&(n.suspendedLanes|i))?0:s)&&s!==l.retryLane)throw l.retryLane=s,An(e,s),kc(n,e,s),zo}"$?"===c.data||Uc(),t=la(e,t,i)}else"$?"===c.data?(t.flags|=128,t.child=e.child,t=ah.bind(null,e),c._reactRetry=t,t=null):(e=l.treeContext,qn=au(c.nextSibling),Kn=t,$n=!0,Zn=null,Qn=!1,null!==e&&(Vn[jn++]=Wn,Vn[jn++]=zn,Vn[jn++]=Gn,Wn=e.id,zn=e.overflow,Gn=t),(t=oa(t,s.children)).flags|=4096);return t}return r?(ks(),r=s.fallback,c=t.mode,h=(l=e.child).sibling,(s=Bl(l,{mode:"hidden",children:s.children})).subtreeFlags=31457280&l.subtreeFlags,null!==h?r=Bl(h,r):(r=jl(r,c,i,null)).flags|=2,r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,null===(c=e.child.memoizedState)?c=na(i):(null!==(l=c.cachePool)?(h=Vs._currentValue,l=l.parent!==h?{parent:h,pool:h}:l):l=Zs(),c={baseLanes:c.baseLanes|i,cachePool:l}),r.memoizedState=c,r.childLanes=sa(e,n,i),t.memoizedState=ia,s):(Ns(t),e=(i=e.child).sibling,(i=Bl(i,{mode:"visible",children:s.children})).return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i)}function oa(e,t){return(t=aa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function aa(e,t){return Gl(e,t,0,null)}function la(e,t,i){return Ss(t,e.child,null,i),(e=oa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ca(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),xa(e.return,t,i)}function ha(e,t,i,n,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=i,r.tailMode=s)}function ua(e,t,i){var n=t.pendingProps,s=n.revealOrder,r=n.tail;if(Ho(e,t,n.children,i),0!==(2&(n=Rs.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ca(e,i,t);else if(19===e.tag)ca(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(K(Rs,n),s){case"forwards":for(i=t.child,s=null;null!==i;)null!==(e=i.alternate)&&null===Os(e)&&(s=i),i=i.sibling;null===(i=s)?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),ha(t,!1,s,i,r);break;case"backwards":for(i=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Os(e)){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}ha(t,!0,i,null,r);break;case"together":ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function da(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),uc|=t.lanes,0===(i&t.childLanes)){if(null===e)return null;if(Ea(e,t,i,!1),0===(i&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(i=Bl(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Bl(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function fa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!wa(e))}function pa(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps)Uo=!0;else{if(!fa(e,i)&&0===(128&t.flags))return Uo=!1,function(e,t,i){switch(t.tag){case 3:J(t,t.stateNode.containerInfo),va(t,Vs,e.memoizedState.cache),ss();break;case 27:case 5:te(t);break;case 4:J(t,t.stateNode.containerInfo);break;case 10:va(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(Ns(t),t.flags|=128,null):0!==(i&t.child.childLanes)?ra(e,t,i):(Ns(t),null!==(e=da(e,t,i))?e.sibling:null);Ns(t);break;case 19:var s=0!==(128&e.flags);if((n=0!==(i&t.childLanes))||(Ea(e,t,i,!1),n=0!==(i&t.childLanes)),s){if(n)return ua(e,t,i);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),K(Rs,Rs.current),n)break;return null;case 22:case 23:return t.lanes=0,qo(e,t,i);case 24:va(t,Vs,e.memoizedState.cache)}return da(e,t,i)}(e,t,i);Uo=0!==(131072&e.flags)}else Uo=!1,$n&&0!==(1048576&t.flags)&&Hn(t,Fn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,s=n._init;if(n=s(n._payload),t.type=n,"function"!==typeof n){if(void 0!==n&&null!==n){if((s=n.$$typeof)===b){t.tag=11,t=Xo(null,t,n,e,i);break e}if(s===x){t.tag=14,t=Yo(null,t,n,e,i);break e}}throw t=P(n)||n,Error(o(306,t,""))}Dl(n)?(e=Io(n,e),t.tag=1,t=ea(null,t,n,e,i)):(t.tag=0,t=Qo(null,t,n,e,i))}return t;case 0:return Qo(e,t,t.type,t.pendingProps,i);case 1:return ea(e,t,n=t.type,s=Io(n,t.pendingProps),i);case 3:e:{if(J(t,t.stateNode.containerInfo),null===e)throw Error(o(387));var r=t.pendingProps;n=(s=t.memoizedState).element,Na(e,t),Ba(t,r,null,i);var a=t.memoizedState;if(r=a.cache,va(t,Vs,r),r!==s.cache&&Sa(t,[Vs],i,!0),Da(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=ta(e,t,r,i);break e}if(r!==n){rs(n=Rn(Error(o(424)),t)),t=ta(e,t,r,i);break e}for(qn=au(t.stateNode.containerInfo.firstChild),Kn=t,$n=!0,Zn=null,Qn=!0,i=Es(t,null,r,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(ss(),r===n){t=da(e,t,i);break e}Ho(e,t,r,i)}t=t.child}return t;case 26:return Zo(e,t),null===e?(i=gu(t.type,null,t.pendingProps,null))?t.memoizedState=i:$n||(i=t.type,e=t.pendingProps,(n=qh(Z.current).createElement(i))[Fe]=t,n[Ve]=e,Xh(n,i,e),Ze(n),t.stateNode=n):t.memoizedState=gu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&$n&&(n=t.stateNode=cu(t.type,t.pendingProps,Z.current),Kn=t,Qn=!0,qn=au(n.firstChild)),n=t.pendingProps.children,null!==e||$n?Ho(e,t,n,i):t.child=Ss(t,null,n,i),Zo(e,t),t.child;case 5:return null===e&&$n&&((s=n=qn)&&(null!==(n=function(e,t,i,n){for(;1===e.nodeType;){var s=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[He])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(null==s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===r)return e}if(null===(e=au(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,Qn))?(t.stateNode=n,Kn=t,qn=au(n.firstChild),Qn=!1,s=!0):s=!1),s||es(t)),te(t),s=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,n=r.children,Qh(s,r)?n=null:null!==a&&Qh(s,a)&&(t.flags|=32),null!==t.memoizedState&&(s=ur(e,t,pr,null,null,i),Du._currentValue=s),Zo(e,t),Ho(e,t,n,i),t.child;case 6:return null===e&&$n&&((e=i=qn)&&(null!==(i=function(e,t,i){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!i)return null;if(null===(e=au(e.nextSibling)))return null}return e}(i,t.pendingProps,Qn))?(t.stateNode=i,Kn=t,qn=null,e=!0):e=!1),e||es(t)),null;case 13:return ra(e,t,i);case 4:return J(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ss(t,null,n,i):Ho(e,t,n,i),t.child;case 11:return Xo(e,t,t.type,t.pendingProps,i);case 7:return Ho(e,t,t.pendingProps,i),t.child;case 8:case 12:return Ho(e,t,t.pendingProps.children,i),t.child;case 10:return n=t.pendingProps,va(t,t.type,n.value),Ho(e,t,n.children,i),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,Ta(t),n=n(s=_a(s)),t.flags|=1,Ho(e,t,n,i),t.child;case 14:return Yo(e,t,t.type,t.pendingProps,i);case 15:return Ko(e,t,t.type,t.pendingProps,i);case 19:return ua(e,t,i);case 22:return qo(e,t,i);case 24:return Ta(t),n=_a(Vs),null===e?(null===(s=qs())&&(s=tc,r=js(),s.pooledCache=r,r.refCount++,null!==r&&(s.pooledCacheLanes|=i),s=r),t.memoizedState={parent:n,cache:s},Aa(t),va(t,Vs,s)):(0!==(e.lanes&i)&&(Na(e,t),Ba(t,null,null,i),Da()),s=e.memoizedState,r=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),va(t,Vs,n)):(n=r.cache,va(t,Vs,n),n!==s.cache&&Sa(t,[Vs],i,!0))),Ho(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}var ma=X(null),ga=null,ba=null;function va(e,t,i){K(ma,t._currentValue),t._currentValue=i}function ya(e){e._currentValue=ma.current,Y(ma)}function xa(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Sa(e,t,i,n){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var r=s.dependencies;if(null!==r){var a=s.child;r=r.firstContext;e:for(;null!==r;){var l=r;r=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){r.lanes|=i,null!==(l=r.alternate)&&(l.lanes|=i),xa(r.return,i,e),n||(a=null);break e}r=l.next}}else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=i,null!==(r=a.alternate)&&(r.lanes|=i),xa(a,i,e),a=null}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}}function Ea(e,t,i,n){e=null;for(var s=t,r=!1;null!==s;){if(!r)if(0!==(524288&s.flags))r=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var a=s.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=s.type;Yi(s.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(s===Q.current){if(null===(a=s.alternate))throw Error(o(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Du):e=[Du])}s=s.return}null!==e&&Sa(t,e,i,n),t.flags|=262144}function wa(e){for(e=e.firstContext;null!==e;){if(!Yi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ta(e){ga=e,ba=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function _a(e){return Pa(ga,e)}function Ma(e,t){return null===ga&&Ta(e),Pa(e,t)}function Pa(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},null===ba){if(null===e)throw Error(o(308));ba=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ba=ba.next=t;return i}var Ca=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Na(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function La(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ka(e,t,i){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&ec)){var s=n.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=Ln(e),Nn(e,null,i),t}return Pn(e,n,t,i),Ln(e)}function Ia(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&i))){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,Re(e,i)}}function Ra(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var s=null,r=null;if(null!==(i=i.firstBaseUpdate)){do{var o={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};null===r?s=r=o:r=r.next=o,i=i.next}while(null!==i);null===r?s=r=t:r=r.next=t}else s=r=t;return i={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Oa=!1;function Da(){if(Oa){if(null!==Hs)throw Hs}}function Ba(e,t,i,n){Oa=!1;var s=e.updateQueue;Ca=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?r=c:o.next=c,o=l;var h=e.alternate;null!==h&&((a=(h=h.updateQueue).lastBaseUpdate)!==o&&(null===a?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(null!==r){var u=s.baseState;for(o=0,h=c=l=null,a=r;;){var d=-536870913&a.lane,f=d!==a.lane;if(f?(nc&d)===d:(n&d)===d){0!==d&&d===Us&&(Oa=!0),null!==h&&(h=h.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var p=e,m=a;d=t;var g=i;switch(m.tag){case 1:if("function"===typeof(p=m.payload)){u=p.call(g,u,d);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(g,u,d):p)||void 0===d)break e;u=L({},u,d);break e;case 2:Ca=!0}}null!==(d=a.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=s.callbacks)?s.callbacks=[d]:f.push(d))}else f={lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=f,l=u):h=h.next=f,o|=d;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(f=a).next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}null===h&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,null===r&&(s.shared.lanes=0),uc|=o,e.lanes=o,e.memoizedState=u}}function Fa(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Va(e,t){var i=e.callbacks;if(null!==i)for(e.callbacks=null,e=0;e<i.length;e++)Fa(i[e],t)}function ja(e,t){try{var i=t.updateQueue,n=null!==i?i.lastEffect:null;if(null!==n){var s=n.next;i=s;do{if((i.tag&e)===e){n=void 0;var r=i.create,o=i.inst;n=r(),o.destroy=n}i=i.next}while(i!==s)}}catch(a){nh(t,t.return,a)}}function Ga(e,t,i){try{var n=t.updateQueue,s=null!==n?n.lastEffect:null;if(null!==s){var r=s.next;n=r;do{if((n.tag&e)===e){var o=n.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,s=t;var l=i;try{a()}catch(c){nh(s,l,c)}}}n=n.next}while(n!==r)}}catch(c){nh(t,t.return,c)}}function Wa(e){var t=e.updateQueue;if(null!==t){var i=e.stateNode;try{Va(t,i)}catch(n){nh(e,e.return,n)}}}function za(e,t,i){i.props=Io(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(n){nh(e,t,n)}}function Ua(e,t){try{var i=e.ref;if(null!==i){var n=e.stateNode;switch(e.tag){case 26:case 27:case 5:var s=n;break;default:s=n}"function"===typeof i?e.refCleanup=i(s):i.current=s}}catch(r){nh(e,t,r)}}function Ha(e,t){var i=e.ref,n=e.refCleanup;if(null!==i)if("function"===typeof n)try{n()}catch(s){nh(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof i)try{i(null)}catch(r){nh(e,t,r)}else i.current=null}function Xa(e){var t=e.type,i=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break e;case"img":i.src?n.src=i.src:i.srcSet&&(n.srcset=i.srcSet)}}catch(s){nh(e,e.return,s)}}function Ya(e,t,i){try{var n=e.stateNode;!function(e,t,i,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,c=null,h=null,u=null;for(p in i){var d=i[p];if(i.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:n.hasOwnProperty(p)||Uh(e,t,p,null,n,d)}}for(var f in n){var p=n[f];if(d=i[f],n.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":r=p;break;case"name":s=p;break;case"checked":h=p;break;case"defaultChecked":u=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==d&&Uh(e,t,f,p,n,d)}}return void gt(e,a,l,c,h,u,r,s);case"select":for(r in p=a=l=f=null,i)if(c=i[r],i.hasOwnProperty(r)&&null!=c)switch(r){case"value":break;case"multiple":p=c;default:n.hasOwnProperty(r)||Uh(e,t,r,null,n,c)}for(s in n)if(r=n[s],c=i[s],n.hasOwnProperty(s)&&(null!=r||null!=c))switch(s){case"value":f=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==c&&Uh(e,t,s,r,n,c)}return t=l,i=a,n=p,void(null!=f?yt(e,!!i,f,!1):!!n!==!!i&&(null!=t?yt(e,!!i,t,!0):yt(e,!!i,i?[]:"",!1)));case"textarea":for(l in p=f=null,i)if(s=i[l],i.hasOwnProperty(l)&&null!=s&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Uh(e,t,l,null,n,s)}for(a in n)if(s=n[a],r=i[a],n.hasOwnProperty(a)&&(null!=s||null!=r))switch(a){case"value":f=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(o(91));break;default:s!==r&&Uh(e,t,a,s,n,r)}return void xt(e,f,p);case"option":for(var m in i)if(f=i[m],i.hasOwnProperty(m)&&null!=f&&!n.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Uh(e,t,m,null,n,f);for(c in n)if(f=n[c],p=i[c],n.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Uh(e,t,c,f,n,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in i)f=i[g],i.hasOwnProperty(g)&&null!=f&&!n.hasOwnProperty(g)&&Uh(e,t,g,null,n,f);for(h in n)if(f=n[h],p=i[h],n.hasOwnProperty(h)&&f!==p&&(null!=f||null!=p))switch(h){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Uh(e,t,h,f,n,p)}return;default:if(Mt(t)){for(var b in i)f=i[b],i.hasOwnProperty(b)&&void 0!==f&&!n.hasOwnProperty(b)&&Hh(e,t,b,void 0,n,f);for(u in n)f=n[u],p=i[u],!n.hasOwnProperty(u)||f===p||void 0===f&&void 0===p||Hh(e,t,u,f,n,p);return}}for(var v in i)f=i[v],i.hasOwnProperty(v)&&null!=f&&!n.hasOwnProperty(v)&&Uh(e,t,v,null,n,f);for(d in n)f=n[d],p=i[d],!n.hasOwnProperty(d)||f===p||null==f&&null==p||Uh(e,t,d,f,n,p)}(n,e.type,i,t),n[Ve]=t}catch(s){nh(e,e.return,s)}}function Ka(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function qa(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Ka(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function $a(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=zh));else if(4!==n&&27!==n&&null!==(e=e.child))for($a(e,t,i),e=e.sibling;null!==e;)$a(e,t,i),e=e.sibling}function Za(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&27!==n&&null!==(e=e.child))for(Za(e,t,i),e=e.sibling;null!==e;)Za(e,t,i),e=e.sibling}var Qa=!1,Ja=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,il=null,nl=!1;function sl(e,t,i){var n=i.flags;switch(i.tag){case 0:case 11:case 15:bl(e,i),4&n&&ja(5,i);break;case 1:if(bl(e,i),4&n)if(e=i.stateNode,null===t)try{e.componentDidMount()}catch(a){nh(i,i.return,a)}else{var s=Io(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){nh(i,i.return,l)}}64&n&&Wa(i),512&n&&Ua(i,i.return);break;case 3:if(bl(e,i),64&n&&null!==(n=i.updateQueue)){if(e=null,null!==i.child)switch(i.child.tag){case 27:case 5:case 1:e=i.child.stateNode}try{Va(n,e)}catch(a){nh(i,i.return,a)}}break;case 26:bl(e,i),512&n&&Ua(i,i.return);break;case 27:case 5:bl(e,i),null===t&&4&n&&Xa(i),512&n&&Ua(i,i.return);break;case 12:default:bl(e,i);break;case 13:bl(e,i),4&n&&hl(e,i);break;case 22:if(!(s=null!==i.memoizedState||Qa)){t=null!==t&&null!==t.memoizedState||Ja;var r=Qa,o=Ja;Qa=s,(Ja=t)&&!o?yl(e,i,0!==(8772&i.subtreeFlags)):bl(e,i),Qa=r,Ja=o}512&n&&("manual"===i.memoizedProps.mode?Ua(i,i.return):Ha(i,i.return))}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Xe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ol=null,al=!1;function ll(e,t,i){for(i=i.child;null!==i;)cl(e,t,i),i=i.sibling}function cl(e,t,i){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(be,i)}catch(o){}switch(i.tag){case 26:Ja||Ha(i,t),ll(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode).parentNode.removeChild(i);break;case 27:Ja||Ha(i,t);var n=ol,s=al;for(ol=i.stateNode,ll(e,t,i),t=(i=i.stateNode).attributes;t.length;)i.removeAttributeNode(t[0]);Xe(i),ol=n,al=s;break;case 5:Ja||Ha(i,t);case 6:s=ol;var r=al;if(ol=null,ll(e,t,i),al=r,null!==(ol=s))if(al)try{e=ol,n=i.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)}catch(a){nh(i,t,a)}else try{ol.removeChild(i.stateNode)}catch(a){nh(i,t,a)}break;case 18:null!==ol&&(al?(t=ol,i=i.stateNode,8===t.nodeType?ru(t.parentNode,i):1===t.nodeType&&ru(t,i),md(t)):ru(ol,i.stateNode));break;case 4:n=ol,s=al,ol=i.stateNode.containerInfo,al=!0,ll(e,t,i),ol=n,al=s;break;case 0:case 11:case 14:case 15:Ja||Ga(2,i,t),Ja||Ga(4,i,t),ll(e,t,i);break;case 1:Ja||(Ha(i,t),"function"===typeof(n=i.stateNode).componentWillUnmount&&za(i,t,n)),ll(e,t,i);break;case 21:ll(e,t,i);break;case 22:Ja||Ha(i,t),Ja=(n=Ja)||null!==i.memoizedState,ll(e,t,i),Ja=n;break;default:ll(e,t,i)}}function hl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{md(e)}catch(i){nh(t,t.return,i)}}function ul(e,t){var i=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new tl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach((function(t){var n=lh.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}function dl(e,t){var i=t.deletions;if(null!==i)for(var n=0;n<i.length;n++){var s=i[n],r=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:case 5:ol=l.stateNode,al=!1;break e;case 3:case 4:ol=l.stateNode.containerInfo,al=!0;break e}l=l.return}if(null===ol)throw Error(o(160));cl(r,a,s),ol=null,al=!1,null!==(r=s.alternate)&&(r.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)pl(t,e),t=t.sibling}var fl=null;function pl(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dl(t,e),ml(e),4&n&&(Ga(3,e,e.return),ja(3,e),Ga(5,e,e.return));break;case 1:dl(t,e),ml(e),512&n&&(Ja||null===i||Ha(i,i.return)),64&n&&Qa&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===i?n:i.concat(n))));break;case 26:var s=fl;if(dl(t,e),ml(e),512&n&&(Ja||null===i||Ha(i,i.return)),4&n){var r=null!==i?i.memoizedState:null;if(n=e.memoizedState,null===i)if(null===n)if(null===e.stateNode){e:{n=e.type,i=e.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":(!(r=s.getElementsByTagName("title")[0])||r[He]||r[Fe]||"http://www.w3.org/2000/svg"===r.namespaceURI||r.hasAttribute("itemprop"))&&(r=s.createElement(n),s.head.insertBefore(r,s.querySelector("head > title"))),Xh(r,n,i),r[Fe]=e,Ze(r),n=r;break e;case"link":var a=Pu("link","href",s).get(n+(i.href||""));if(a)for(var l=0;l<a.length;l++)if((r=a[l]).getAttribute("href")===(null==i.href?null:i.href)&&r.getAttribute("rel")===(null==i.rel?null:i.rel)&&r.getAttribute("title")===(null==i.title?null:i.title)&&r.getAttribute("crossorigin")===(null==i.crossOrigin?null:i.crossOrigin)){a.splice(l,1);break t}Xh(r=s.createElement(n),n,i),s.head.appendChild(r);break;case"meta":if(a=Pu("meta","content",s).get(n+(i.content||"")))for(l=0;l<a.length;l++)if((r=a[l]).getAttribute("content")===(null==i.content?null:""+i.content)&&r.getAttribute("name")===(null==i.name?null:i.name)&&r.getAttribute("property")===(null==i.property?null:i.property)&&r.getAttribute("http-equiv")===(null==i.httpEquiv?null:i.httpEquiv)&&r.getAttribute("charset")===(null==i.charSet?null:i.charSet)){a.splice(l,1);break t}Xh(r=s.createElement(n),n,i),s.head.appendChild(r);break;default:throw Error(o(468,n))}r[Fe]=e,Ze(r),n=r}e.stateNode=n}else Cu(s,e.type,e.stateNode);else e.stateNode=Eu(s,n,e.memoizedProps);else r!==n?(null===r?null!==i.stateNode&&(i=i.stateNode).parentNode.removeChild(i):r.count--,null===n?Cu(s,e.type,e.stateNode):Eu(s,n,e.memoizedProps)):null===n&&null!==e.stateNode&&Ya(e,e.memoizedProps,i.memoizedProps)}break;case 27:if(4&n&&null===e.alternate){s=e.stateNode,r=e.memoizedProps;try{for(var c=s.firstChild;c;){var h=c.nextSibling,u=c.nodeName;c[He]||"HEAD"===u||"BODY"===u||"SCRIPT"===u||"STYLE"===u||"LINK"===u&&"stylesheet"===c.rel.toLowerCase()||s.removeChild(c),c=h}for(var d=e.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Xh(s,d,r),s[Fe]=e,s[Ve]=r}catch(m){nh(e,e.return,m)}}case 5:if(dl(t,e),ml(e),512&n&&(Ja||null===i||Ha(i,i.return)),32&e.flags){s=e.stateNode;try{Et(s,"")}catch(m){nh(e,e.return,m)}}4&n&&null!=e.stateNode&&Ya(e,s=e.memoizedProps,null!==i?i.memoizedProps:s),1024&n&&(el=!0);break;case 6:if(dl(t,e),ml(e),4&n){if(null===e.stateNode)throw Error(o(162));n=e.memoizedProps,i=e.stateNode;try{i.nodeValue=n}catch(m){nh(e,e.return,m)}}break;case 3:if(Mu=null,s=fl,fl=du(t.containerInfo),dl(t,e),fl=s,ml(e),4&n&&null!==i&&i.memoizedState.isDehydrated)try{md(t.containerInfo)}catch(m){nh(e,e.return,m)}el&&(el=!1,gl(e));break;case 4:n=fl,fl=du(e.stateNode.containerInfo),dl(t,e),ml(e),fl=n;break;case 12:dl(t,e),ml(e);break;case 13:dl(t,e),ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==i&&null!==i.memoizedState)&&(yc=le()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,ul(e,n)));break;case 22:if(512&n&&(Ja||null===i||Ha(i,i.return)),c=null!==e.memoizedState,h=null!==i&&null!==i.memoizedState,Qa=(u=Qa)||c,Ja=(d=Ja)||h,dl(t,e),Ja=d,Qa=u,ml(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&n&&(t._visibility=c?-2&t._visibility:1|t._visibility,c&&(t=Qa||Ja,null===i||h||t||vl(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(i=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===i){h=i=t;try{if(s=h.stateNode,c)"function"===typeof(r=s.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{a=h.stateNode;var p=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null;a.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){nh(h,h.return,m)}}}else if(6===t.tag){if(null===i){h=t;try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){nh(h,h.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(i=n.retryQueue)&&(n.retryQueue=null,ul(e,i))));break;case 19:dl(t,e),ml(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,ul(e,n)));break;case 21:break;default:dl(t,e),ml(e)}}function ml(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var i=e.return;null!==i;){if(Ka(i)){var n=i;break e}i=i.return}throw Error(o(160))}switch(n.tag){case 27:var s=n.stateNode;Za(e,qa(e),s);break;case 5:var r=n.stateNode;32&n.flags&&(Et(r,""),n.flags&=-33),Za(e,qa(e),r);break;case 3:case 4:var a=n.stateNode.containerInfo;$a(e,qa(e),a);break;default:throw Error(o(161))}}}catch(l){nh(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;gl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function bl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)sl(e,t.alternate,t),t=t.sibling}function vl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ga(4,t,t.return),vl(t);break;case 1:Ha(t,t.return);var i=t.stateNode;"function"===typeof i.componentWillUnmount&&za(t,t.return,i),vl(t);break;case 26:case 27:case 5:Ha(t,t.return),vl(t);break;case 22:Ha(t,t.return),null===t.memoizedState&&vl(t);break;default:vl(t)}e=e.sibling}}function yl(e,t,i){for(i=i&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,s=e,r=t,o=r.flags;switch(r.tag){case 0:case 11:case 15:yl(s,r,i),ja(4,r);break;case 1:if(yl(s,r,i),"function"===typeof(s=(n=r).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){nh(n,n.return,c)}if(null!==(s=(n=r).updateQueue)){var a=n.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)Fa(l[s],a)}catch(c){nh(n,n.return,c)}}i&&64&o&&Wa(r),Ua(r,r.return);break;case 26:case 27:case 5:yl(s,r,i),i&&null===n&&4&o&&Xa(r),Ua(r,r.return);break;case 12:default:yl(s,r,i);break;case 13:yl(s,r,i),i&&4&o&&hl(s,r);break;case 22:null===r.memoizedState&&yl(s,r,i),Ua(r,r.return)}t=t.sibling}}function xl(e,t){var i=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==i&&(null!=e&&e.refCount++,null!=i&&Gs(i))}function Sl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Gs(e))}function El(e,t,i,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)wl(e,t,i,n),t=t.sibling}function wl(e,t,i,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:El(e,t,i,n),2048&s&&ja(9,t);break;case 3:El(e,t,i,n),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Gs(e)));break;case 12:if(2048&s){El(e,t,i,n),e=t.stateNode;try{var r=t.memoizedProps,o=r.id,a=r.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){nh(t,t.return,l)}}else El(e,t,i,n);break;case 23:break;case 22:r=t.stateNode,null!==t.memoizedState?4&r._visibility?El(e,t,i,n):_l(e,t):4&r._visibility?El(e,t,i,n):(r._visibility|=4,Tl(e,t,i,n,0!==(10256&t.subtreeFlags))),2048&s&&xl(t.alternate,t);break;case 24:El(e,t,i,n),2048&s&&Sl(t.alternate,t);break;default:El(e,t,i,n)}}function Tl(e,t,i,n,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var r=e,o=t,a=i,l=n,c=o.flags;switch(o.tag){case 0:case 11:case 15:Tl(r,o,a,l,s),ja(8,o);break;case 23:break;case 22:var h=o.stateNode;null!==o.memoizedState?4&h._visibility?Tl(r,o,a,l,s):_l(r,o):(h._visibility|=4,Tl(r,o,a,l,s)),s&&2048&c&&xl(o.alternate,o);break;case 24:Tl(r,o,a,l,s),s&&2048&c&&Sl(o.alternate,o);break;default:Tl(r,o,a,l,s)}t=t.sibling}}function _l(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var i=e,n=t,s=n.flags;switch(n.tag){case 22:_l(i,n),2048&s&&xl(n.alternate,n);break;case 24:_l(i,n),2048&s&&Sl(n.alternate,n);break;default:_l(i,n)}t=t.sibling}}var Ml=8192;function Pl(e){if(e.subtreeFlags&Ml)for(e=e.child;null!==e;)Cl(e),e=e.sibling}function Cl(e){switch(e.tag){case 26:Pl(e),e.flags&Ml&&null!==e.memoizedState&&function(e,t,i){if(null===Nu)throw Error(o(475));var n=Nu;if("stylesheet"===t.type&&("string"!==typeof i.media||!1!==matchMedia(i.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=bu(i.href),r=e.querySelector(vu(s));if(r)return null!==(e=r._p)&&"object"===typeof e&&"function"===typeof e.then&&(n.count++,n=ku.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=r,void Ze(r);r=e.ownerDocument||e,i=yu(i),(s=hu.get(s))&&Tu(i,s),Ze(r=r.createElement("link"));var a=r;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Xh(r,"link",i),t.instance=r}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(n.count++,t=ku.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(fl,e.memoizedState,e.memoizedProps);break;case 5:default:Pl(e);break;case 3:case 4:var t=fl;fl=du(e.stateNode.containerInfo),Pl(e),fl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Ml,Ml=16777216,Pl(e),Ml=t):Pl(e))}}function Al(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Nl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var n=t[i];il=n,Il(n,e)}Al(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Ll(e),e=e.sibling}function Ll(e){switch(e.tag){case 0:case 11:case 15:Nl(e),2048&e.flags&&Ga(9,e,e.return);break;case 3:case 12:default:Nl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,kl(e)):Nl(e)}}function kl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var n=t[i];il=n,Il(n,e)}Al(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:Ga(8,t,t.return),kl(t);break;case 22:4&(i=t.stateNode)._visibility&&(i._visibility&=-5,kl(t));break;default:kl(t)}e=e.sibling}}function Il(e,t){for(;null!==il;){var i=il;switch(i.tag){case 0:case 11:case 15:Ga(8,i,t);break;case 23:case 22:if(null!==i.memoizedState&&null!==i.memoizedState.cachePool){var n=i.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:Gs(i.memoizedState.cache)}if(null!==(n=i.child))n.return=i,il=n;else e:for(i=e;null!==il;){var s=(n=il).sibling,r=n.return;if(rl(n),n===i){il=null;break e}if(null!==s){s.return=r,il=s;break e}il=r}}}function Rl(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,i,n){return new Rl(e,t,i,n)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bl(e,t){var i=e.alternate;return null===i?((i=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=31457280&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Fl(e,t){e.flags&=31457282;var i=e.alternate;return null===i?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vl(e,t,i,n,s,r){var a=0;if(n=e,"function"===typeof e)Dl(e)&&(a=1);else if("string"===typeof e)a=function(e,t,i){if(1===i||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,i,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case u:return jl(i.children,s,r,t);case d:a=8,s|=24;break;case f:return(e=Ol(12,i,t,2|s)).elementType=f,e.lanes=r,e;case v:return(e=Ol(13,i,t,s)).elementType=v,e.lanes=r,e;case y:return(e=Ol(19,i,t,s)).elementType=y,e.lanes=r,e;case E:return Gl(i,s,r,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:case g:a=10;break e;case m:a=9;break e;case b:a=11;break e;case x:a=14;break e;case S:a=16,n=null;break e}a=29,i=Error(o(130,null===e?"null":typeof e,"")),n=null}return(t=Ol(a,i,t,s)).elementType=e,t.type=n,t.lanes=r,t}function jl(e,t,i,n){return(e=Ol(7,e,n,t)).lanes=i,e}function Gl(e,t,i,n){(e=Ol(22,e,n,t)).elementType=E,e.lanes=i;var s={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=s._current;if(null===e)throw Error(o(456));if(0===(2&s._pendingVisibility)){var t=An(e,2);null!==t&&(s._pendingVisibility|=2,kc(t,e,2))}},attach:function(){var e=s._current;if(null===e)throw Error(o(456));if(0!==(2&s._pendingVisibility)){var t=An(e,2);null!==t&&(s._pendingVisibility&=-3,kc(t,e,2))}}};return e.stateNode=s,e}function Wl(e,t,i){return(e=Ol(6,e,null,t)).lanes=i,e}function zl(e,t,i){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e){e.flags|=4}function Hl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Au(t)){if(null!==(t=Cs.current)&&((4194176&nc)===nc?null!==As:(62914560&nc)!==nc&&0===(536870912&nc)||t!==As))throw ds=ls,as;e.flags|=8192}}function Xl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,mc|=t)}function Yl(e,t){if(!$n)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Kl(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var s=e.child;null!==s;)i|=s.lanes|s.childLanes,n|=31457280&s.subtreeFlags,n|=31457280&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function ql(e,t,i){var n=t.pendingProps;switch(Yn(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Kl(t),null;case 3:return i=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ya(Vs),ee(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ns(t)?Ul(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Zn&&(Rc(Zn),Zn=null))),Kl(t),null;case 26:return i=t.memoizedState,null===e?(Ul(t),null!==i?(Kl(t),Hl(t,i)):(Kl(t),t.flags&=-16777217)):i?i!==e.memoizedState?(Ul(t),Kl(t),Hl(t,i)):(Kl(t),t.flags&=-16777217):(e.memoizedProps!==n&&Ul(t),Kl(t),t.flags&=-16777217),null;case 27:ie(t),i=Z.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Ul(t);else{if(!n){if(null===t.stateNode)throw Error(o(166));return Kl(t),null}e=q.current,ns(t)?ts(t):(e=cu(s,n,i),t.stateNode=e,Ul(t))}return Kl(t),null;case 5:if(ie(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&Ul(t);else{if(!n){if(null===t.stateNode)throw Error(o(166));return Kl(t),null}if(e=q.current,ns(t))ts(t);else{switch(s=qh(Z.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof n.is?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"===typeof n.is?s.createElement(i,{is:n.is}):s.createElement(i)}}e[Fe]=t,e[Ve]=n;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(Xh(e,i,n),i){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ul(t)}}return Kl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&Ul(t);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));if(e=Z.current,ns(t)){if(e=t.stateNode,i=t.memoizedProps,n=null,null!==(s=Kn))switch(s.tag){case 27:case 5:n=s.memoizedProps}e[Fe]=t,(e=!!(e.nodeValue===i||null!==n&&!0===n.suppressHydrationWarning||Wh(e.nodeValue,i)))||es(t)}else(e=qh(e).createTextNode(n))[Fe]=t,t.stateNode=e}return Kl(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=ns(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[Fe]=t}else ss(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Kl(t),s=!1}else null!==Zn&&(Rc(Zn),Zn=null),s=!0;if(!s)return 256&t.flags?(Is(t),t):(Is(t),null)}if(Is(t),0!==(128&t.flags))return t.lanes=i,t;if(i=null!==n,e=null!==e&&null!==e.memoizedState,i){s=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(s=n.alternate.memoizedState.cachePool.pool);var r=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(r=n.memoizedState.cachePool.pool),r!==s&&(n.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),Xl(t,t.updateQueue),Kl(t),null;case 4:return ee(),null===e&&kh(t.stateNode.containerInfo),Kl(t),null;case 10:return ya(t.type),Kl(t),null;case 19:if(Y(Rs),null===(s=t.memoizedState))return Kl(t),null;if(n=0!==(128&t.flags),null===(r=s.rendering))if(n)Yl(s,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(r=Os(e))){for(t.flags|=128,Yl(s,!1),e=r.updateQueue,t.updateQueue=e,Xl(t,e),t.subtreeFlags=0,e=i,i=t.child;null!==i;)Fl(i,e),i=i.sibling;return K(Rs,1&Rs.current|2),t.child}e=e.sibling}null!==s.tail&&le()>xc&&(t.flags|=128,n=!0,Yl(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=Os(r))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Xl(t,e),Yl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!r.alternate&&!$n)return Kl(t),null}else 2*le()-s.renderingStartTime>xc&&536870912!==i&&(t.flags|=128,n=!0,Yl(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(null!==(e=s.last)?e.sibling=r:t.child=r,s.last=r)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=le(),t.sibling=null,e=Rs.current,K(Rs,n?1&e|2:1&e),t):(Kl(t),null);case 22:case 23:return Is(t),Ps(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!==(536870912&i)&&0===(128&t.flags)&&(Kl(t),6&t.subtreeFlags&&(t.flags|=8192)):Kl(t),null!==(i=t.updateQueue)&&Xl(t,i.retryQueue),i=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==i&&(t.flags|=2048),null!==e&&Y(Ks),null;case 24:return i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ya(Vs),Kl(t),null;case 25:return null}throw Error(o(156,t.tag))}function $l(e,t){switch(Yn(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ya(Vs),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ie(t),null;case 13:if(Is(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ss()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Y(Rs),null;case 4:return ee(),null;case 10:return ya(t.type),null;case 22:case 23:return Is(t),Ps(),null!==e&&Y(Ks),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ya(Vs),null;default:return null}}function Zl(e,t){switch(Yn(t),t.tag){case 3:ya(Vs),ee();break;case 26:case 27:case 5:ie(t);break;case 4:ee();break;case 13:Is(t);break;case 19:Y(Rs);break;case 10:ya(t.type);break;case 22:case 23:Is(t),Ps(),null!==e&&Y(Ks);break;case 24:ya(Vs)}}var Ql={getCacheForType:function(e){var t=_a(Vs),i=t.data.get(e);return void 0===i&&(i=e(),t.data.set(e,i)),i}},Jl="function"===typeof WeakMap?WeakMap:Map,ec=0,tc=null,ic=null,nc=0,sc=0,rc=null,oc=!1,ac=!1,lc=!1,cc=0,hc=0,uc=0,dc=0,fc=0,pc=0,mc=0,gc=null,bc=null,vc=!1,yc=0,xc=1/0,Sc=null,Ec=null,wc=!1,Tc=null,_c=0,Mc=0,Pc=null,Cc=0,Ac=null;function Nc(){if(0!==(2&ec)&&0!==nc)return nc&-nc;if(null!==N.T){return 0!==Us?Us:Sh()}return De()}function Lc(){0===pc&&(pc=0===(536870912&nc)||$n?Ae():536870912);var e=Cs.current;return null!==e&&(e.flags|=32),pc}function kc(e,t,i){(e===tc&&2===sc||null!==e.cancelPendingCommit)&&(jc(e,0),Bc(e,nc,pc,!1)),ke(e,i),0!==(2&ec)&&e===tc||(e===tc&&(0===(2&ec)&&(dc|=i),4===hc&&Bc(e,nc,pc,!1)),mh(e))}function Ic(e,t,i){if(0!==(6&ec))throw Error(o(327));for(var n=!i&&0===(60&t)&&0===(t&e.expiredLanes)||Pe(e,t),s=n?function(e,t){var i=ec;ec|=2;var n=Wc(),s=zc();tc!==e||nc!==t?(Sc=null,xc=le()+500,jc(e,t)):ac=Pe(e,t);e:for(;;)try{if(0!==sc&&null!==ic){t=ic;var r=rc;t:switch(sc){case 1:sc=0,rc=null,$c(e,t,r,1);break;case 2:if(cs(r)){sc=0,rc=null,qc(t);break}t=function(){2===sc&&tc===e&&(sc=7),mh(e)},r.then(t,t);break e;case 3:sc=7;break e;case 4:sc=5;break e;case 7:cs(r)?(sc=0,rc=null,qc(t)):(sc=0,rc=null,$c(e,t,r,7));break;case 5:var a=null;switch(ic.tag){case 26:a=ic.memoizedState;case 5:case 27:var l=ic;if(!a||Au(a)){sc=0,rc=null;var c=l.sibling;if(null!==c)ic=c;else{var h=l.return;null!==h?(ic=h,Zc(h)):ic=null}break t}}sc=0,rc=null,$c(e,t,r,5);break;case 6:sc=0,rc=null,$c(e,t,r,6);break;case 8:Vc(),hc=6;break e;default:throw Error(o(462))}}Yc();break}catch(u){Gc(e,u)}return ba=ga=null,N.H=n,N.A=s,ec=i,null!==ic?0:(tc=null,nc=0,Mn(),hc)}(e,t):Hc(e,t,!0),r=n;;){if(0===s){ac&&!n&&Bc(e,t,0,!1);break}if(6===s)Bc(e,t,0,!oc);else{if(i=e.current.alternate,r&&!Dc(i)){s=Hc(e,t,!1),r=!1;continue}if(2===s){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;s=gc;var c=l.current.memoizedState.isDehydrated;if(c&&(jc(l,a).flags|=256),2!==(a=Hc(l,a,!1))){if(lc&&!c){l.errorRecoveryDisabledLanes|=r,dc|=r,s=4;break e}r=bc,bc=s,null!==r&&Rc(r)}s=a}if(r=!1,2!==s)continue}}if(1===s){jc(e,0),Bc(e,t,0,!0);break}e:{switch(n=e,s){case 0:case 1:throw Error(o(345));case 4:if((4194176&t)===t){Bc(n,t,pc,!oc);break e}break;case 2:bc=null;break;case 3:case 5:break;default:throw Error(o(329))}if(n.finishedWork=i,n.finishedLanes=t,(62914560&t)===t&&10<(r=yc+300-le())){if(Bc(n,t,pc,!oc),0!==Me(n,0))break e;n.timeoutHandle=eu(Oc.bind(null,n,i,bc,Sc,vc,t,pc,dc,mc,oc,2,-0,0),r)}else Oc(n,i,bc,Sc,vc,t,pc,dc,mc,oc,0,-0,0)}}break}mh(e)}function Rc(e){null===bc?bc=e:bc.push.apply(bc,e)}function Oc(e,t,i,n,s,r,a,l,c,h,u,d,f){var p=t.subtreeFlags;if((8192&p||16785408===(16785408&p))&&(Nu={stylesheets:null,count:0,unsuspend:Lu},Cl(t),null!==(t=function(){if(null===Nu)throw Error(o(475));var e=Nu;return e.stylesheets&&0===e.count&&Ru(e,e.stylesheets),0<e.count?function(t){var i=setTimeout((function(){if(e.stylesheets&&Ru(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}())))return e.cancelPendingCommit=t(Jc.bind(null,e,i,n,s,a,l,c,1,d,f)),void Bc(e,r,a,!h);Jc(e,i,n,s,a,l,c,u,d,f)}function Dc(e){for(var t=e;;){var i=t.tag;if((0===i||11===i||15===i)&&16384&t.flags&&(null!==(i=t.updateQueue)&&null!==(i=i.stores)))for(var n=0;n<i.length;n++){var s=i[n],r=s.getSnapshot;s=s.value;try{if(!Yi(r(),s))return!1}catch(o){return!1}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bc(e,t,i,n){t&=~fc,t&=~dc,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var r=31-xe(s),o=1<<r;n[r]=-1,s&=~o}0!==i&&Ie(e,i,t)}function Fc(){return 0!==(6&ec)||(gh(0,!1),!1)}function Vc(){if(null!==ic){if(0===sc)var e=ic.return;else ba=ga=null,br(e=ic),ps=null,ms=0,e=ic;for(;null!==e;)Zl(e.alternate,e),e=e.return;ic=null}}function jc(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;-1!==i&&(e.timeoutHandle=-1,tu(i)),null!==(i=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,i()),Vc(),tc=e,ic=i=Bl(e.current,null),nc=t,sc=0,rc=null,oc=!1,ac=Pe(e,t),lc=!1,mc=pc=fc=dc=uc=hc=0,bc=gc=null,vc=!1,0!==(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var s=31-xe(n),r=1<<s;t|=e[s],n&=~r}return cc=t,Mn(),i}function Gc(e,t){Js=null,N.H=_o,t===os?(t=fs(),sc=3):t===as?(t=fs(),sc=4):sc=t===zo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,rc=t,null===ic&&(hc=1,Fo(e,Rn(t,e.current)))}function Wc(){var e=N.H;return N.H=_o,null===e?_o:e}function zc(){var e=N.A;return N.A=Ql,e}function Uc(){hc=4,oc||(4194176&nc)!==nc&&null!==Cs.current||(ac=!0),0===(134217727&uc)&&0===(134217727&dc)||null===tc||Bc(tc,nc,pc,!1)}function Hc(e,t,i){var n=ec;ec|=2;var s=Wc(),r=zc();tc===e&&nc===t||(Sc=null,jc(e,t)),t=!1;var o=hc;e:for(;;)try{if(0!==sc&&null!==ic){var a=ic,l=rc;switch(sc){case 8:Vc(),o=6;break e;case 3:case 2:case 6:null===Cs.current&&(t=!0);var c=sc;if(sc=0,rc=null,$c(e,a,l,c),i&&ac){o=0;break e}break;default:c=sc,sc=0,rc=null,$c(e,a,l,c)}}Xc(),o=hc;break}catch(h){Gc(e,h)}return t&&e.shellSuspendCounter++,ba=ga=null,ec=n,N.H=s,N.A=r,null===ic&&(tc=null,nc=0,Mn()),o}function Xc(){for(;null!==ic;)Kc(ic)}function Yc(){for(;null!==ic&&!oe();)Kc(ic)}function Kc(e){var t=pa(e.alternate,e,cc);e.memoizedProps=e.pendingProps,null===t?Zc(e):ic=t}function qc(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Jo(i,t,t.pendingProps,t.type,void 0,nc);break;case 11:t=Jo(i,t,t.pendingProps,t.type.render,t.ref,nc);break;case 5:br(t);default:Zl(i,t),t=pa(i,t=ic=Fl(t,cc),cc)}e.memoizedProps=e.pendingProps,null===t?Zc(e):ic=t}function $c(e,t,i,n){ba=ga=null,br(t),ps=null,ms=0;var s=t.return;try{if(function(e,t,i,n,s){if(i.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(t=i.alternate)&&Ea(t,i,s,!0),null!==(i=Cs.current)){switch(i.tag){case 13:return null===As?Uc():null===i.alternate&&0===hc&&(hc=3),i.flags&=-257,i.flags|=65536,i.lanes=s,n===ls?i.flags|=16384:(null===(t=i.updateQueue)?i.updateQueue=new Set([n]):t.add(n),sh(e,n,s)),!1;case 22:return i.flags|=65536,n===ls?i.flags|=16384:(null===(t=i.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},i.updateQueue=t):null===(i=t.retryQueue)?t.retryQueue=new Set([n]):i.add(n),sh(e,n,s)),!1}throw Error(o(435,i.tag))}return sh(e,n,s),Uc(),!1}if($n)return null!==(t=Cs.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==Jn&&rs(Rn(e=Error(o(422),{cause:n}),i))):(n!==Jn&&rs(Rn(t=Error(o(423),{cause:n}),i)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,n=Rn(n,i),Ra(e,s=jo(e.stateNode,n,s)),4!==hc&&(hc=2)),!1;var r=Error(o(520),{cause:n});if(r=Rn(r,i),null===gc?gc=[r]:gc.push(r),4!==hc&&(hc=2),null===t)return!0;n=Rn(n,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=s&-s,i.lanes|=e,Ra(i,e=jo(i.stateNode,n,e)),!1;case 1:if(t=i.type,r=i.stateNode,0===(128&i.flags)&&("function"===typeof t.getDerivedStateFromError||null!==r&&"function"===typeof r.componentDidCatch&&(null===Ec||!Ec.has(r))))return i.flags|=65536,s&=-s,i.lanes|=s,Wo(s=Go(s),e,i,n),Ra(i,s),!1}i=i.return}while(null!==i);return!1}(e,s,t,i,nc))return hc=1,Fo(e,Rn(i,e.current)),void(ic=null)}catch(r){if(null!==s)throw ic=s,r;return hc=1,Fo(e,Rn(i,e.current)),void(ic=null)}32768&t.flags?($n||1===n?e=!0:ac||0!==(536870912&nc)?e=!1:(oc=e=!0,(2===n||3===n||6===n)&&(null!==(n=Cs.current)&&13===n.tag&&(n.flags|=16384))),Qc(t,e)):Zc(t)}function Zc(e){var t=e;do{if(0!==(32768&t.flags))return void Qc(t,oc);e=t.return;var i=ql(t.alternate,t,cc);if(null!==i)return void(ic=i);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===hc&&(hc=5)}function Qc(e,t){do{var i=$l(e.alternate,e);if(null!==i)return i.flags&=32767,void(ic=i);if(null!==(i=e.return)&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=i}while(null!==e);hc=6,ic=null}function Jc(e,t,i,n,s,r,a,l,c,h){var u=N.T,d=W.p;try{W.p=2,N.T=null,function(e,t,i,n,s,r,a,l){do{th()}while(null!==Tc);if(0!==(6&ec))throw Error(o(327));var c=e.finishedWork;if(n=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var h=c.lanes|c.childLanes;if(function(e,t,i,n,s,r){var o=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(i=o&~i;0<i;){var h=31-xe(i),u=1<<h;a[h]=0,l[h]=-1;var d=c[h];if(null!==d)for(c[h]=null,h=0;h<d.length;h++){var f=d[h];null!==f&&(f.lane&=-536870913)}i&=~u}0!==n&&Ie(e,n,0),0!==r&&0===s&&0!==e.tag&&(e.suspendedLanes|=r&~(o&~t))}(e,n,h|=_n,r,a,l),e===tc&&(ic=tc=null,nc=0),0===(10256&c.subtreeFlags)&&0===(10256&c.flags)||wc||(wc=!0,Mc=h,Pc=i,function(e,t){se(e,t)}(de,(function(){return th(),null}))),i=0!==(15990&c.flags),0!==(15990&c.subtreeFlags)||i?(i=N.T,N.T=null,r=W.p,W.p=2,a=ec,ec|=4,function(e,t){if(e=e.containerInfo,Yh=Uu,Ji(e=Qi(e))){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var s=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{i.nodeType,r.nodeType}catch(g){i=null;break e}var a=0,l=-1,c=-1,h=0,u=0,d=e,f=null;t:for(;;){for(var p;d!==i||0!==s&&3!==d.nodeType||(l=a+s),d!==r||0!==n&&3!==d.nodeType||(c=a+n),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===i&&++h===s&&(l=a),f===r&&++u===n&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}i=-1===l||-1===c?null:{start:l,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(Kh={focusedElem:e,selectionRange:i},Uu=!1,il=t;null!==il;)if(e=(t=il).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,il=e;else for(;null!==il;){switch(r=(t=il).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==r){e=void 0,i=t,s=r.memoizedProps,r=r.memoizedState,n=i.stateNode;try{var m=Io(i.type,s,(i.elementType,i.type));e=n.getSnapshotBeforeUpdate(m,r),n.__reactInternalSnapshotBeforeUpdate=e}catch(b){nh(i,i.return,b)}}break;case 3:if(0!==(1024&e))if(9===(i=(e=t.stateNode.containerInfo).nodeType))ou(e);else if(1===i)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ou(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,il=e;break}il=t.return}m=nl,nl=!1}(e,c),pl(c,e),en(Kh,e.containerInfo),Uu=!!Yh,Kh=Yh=null,e.current=c,sl(e,c.alternate,c),ae(),ec=a,W.p=r,N.T=i):e.current=c,wc?(wc=!1,Tc=e,_c=n):eh(e,h),h=e.pendingLanes,0===h&&(Ec=null),function(e){if(ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(be,e,void 0,128===(128&e.current.flags))}catch(t){}}(c.stateNode),mh(e),null!==t)for(s=e.onRecoverableError,c=0;c<t.length;c++)h=t[c],s(h.value,{componentStack:h.stack});0!==(3&_c)&&th(),h=e.pendingLanes,0!==(4194218&n)&&0!==(42&h)?e===Ac?Cc++:(Cc=0,Ac=e):Cc=0,gh(0,!1)}(e,t,i,n,d,s,r,a)}finally{N.T=u,W.p=d}}function eh(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Gs(t)))}function th(){if(null!==Tc){var e=Tc,t=Mc;Mc=0;var i=Oe(_c),n=N.T,s=W.p;try{if(W.p=32>i?32:i,N.T=null,null===Tc)var r=!1;else{i=Pc,Pc=null;var a=Tc,l=_c;if(Tc=null,_c=0,0!==(6&ec))throw Error(o(331));var c=ec;if(ec|=4,Ll(a.current),wl(a,a.current,l,i),ec=c,gh(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(be,a)}catch(h){}r=!0}return r}finally{W.p=s,N.T=n,eh(e,t)}}return!1}function ih(e,t,i){t=Rn(i,t),null!==(e=ka(e,t=jo(e.stateNode,t,2),2))&&(ke(e,2),mh(e))}function nh(e,t,i){if(3===e.tag)ih(e,e,i);else for(;null!==t;){if(3===t.tag){ih(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Ec||!Ec.has(n))){e=Rn(i,e),null!==(n=ka(t,i=Go(2),2))&&(Wo(i,n,t,e),ke(n,2),mh(n));break}}t=t.return}}function sh(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new Jl;var s=new Set;n.set(t,s)}else void 0===(s=n.get(t))&&(s=new Set,n.set(t,s));s.has(i)||(lc=!0,s.add(i),e=rh.bind(null,e,t,i),t.then(e,e))}function rh(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,tc===e&&(nc&i)===i&&(4===hc||3===hc&&(62914560&nc)===nc&&300>le()-yc?0===(2&ec)&&jc(e,0):fc|=i,mc===nc&&(mc=0)),mh(e)}function oh(e,t){0===t&&(t=Ne()),null!==(e=An(e,t))&&(ke(e,t),mh(e))}function ah(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),oh(e,i)}function lh(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;null!==s&&(i=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==n&&n.delete(t),oh(e,i)}var ch=null,hh=null,uh=!1,dh=!1,fh=!1,ph=0;function mh(e){var t;e!==hh&&null===e.next&&(null===hh?ch=hh=e:hh=hh.next=e),dh=!0,uh||(uh=!0,t=bh,nu((function(){0!==(6&ec)?se(he,t):t()})))}function gh(e,t){if(!fh&&dh){fh=!0;do{for(var i=!1,n=ch;null!==n;){if(!t)if(0!==e){var s=n.pendingLanes;if(0===s)var r=0;else{var o=n.suspendedLanes,a=n.pingedLanes;r=(1<<31-xe(42|e)+1)-1,r=201326677&(r&=s&~(o&~a))?201326677&r|1:r?2|r:0}0!==r&&(i=!0,xh(n,r))}else r=nc,0===(3&(r=Me(n,n===tc?r:0)))||Pe(n,r)||(i=!0,xh(n,r));n=n.next}}while(i);fh=!1}}function bh(){dh=uh=!1;var e=0;0!==ph&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Jh&&(Jh=e,!0);return Jh=null,!1}()&&(e=ph),ph=0);for(var t=le(),i=null,n=ch;null!==n;){var s=n.next,r=vh(n,t);0===r?(n.next=null,null===i?ch=s:i.next=s,null===s&&(hh=i)):(i=n,(0!==e||0!==(3&r))&&(dh=!0)),n=s}gh(e,!1)}function vh(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var o=31-xe(r),a=1<<o,l=s[o];-1===l?0!==(a&i)&&0===(a&n)||(s[o]=Ce(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}if(i=nc,i=Me(e,e===(t=tc)?i:0),n=e.callbackNode,0===i||e===t&&2===sc||null!==e.cancelPendingCommit)return null!==n&&null!==n&&re(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&i)||Pe(e,i)){if((t=i&-i)===e.callbackPriority)return t;switch(null!==n&&re(n),Oe(i)){case 2:case 8:i=ue;break;case 32:default:i=de;break;case 268435456:i=pe}return n=yh.bind(null,e),i=se(i,n),e.callbackPriority=t,e.callbackNode=i,t}return null!==n&&null!==n&&re(n),e.callbackPriority=2,e.callbackNode=null,2}function yh(e,t){var i=e.callbackNode;if(th()&&e.callbackNode!==i)return null;var n=nc;return 0===(n=Me(e,e===tc?n:0))?null:(Ic(e,n,t),vh(e,le()),null!=e.callbackNode&&e.callbackNode===i?yh.bind(null,e):null)}function xh(e,t){if(th())return null;Ic(e,t,!0)}function Sh(){return 0===ph&&(ph=Ae()),ph}function Eh(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:At(""+e)}function wh(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}for(var Th=0;Th<Sn.length;Th++){var _h=Sn[Th];En(_h.toLowerCase(),"on"+(_h[0].toUpperCase()+_h.slice(1)))}En(fn,"onAnimationEnd"),En(pn,"onAnimationIteration"),En(mn,"onAnimationStart"),En("dblclick","onDoubleClick"),En("focusin","onFocus"),En("focusout","onBlur"),En(gn,"onTransitionRun"),En(bn,"onTransitionStart"),En(vn,"onTransitionCancel"),En(yn,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ph=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mh));function Ch(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],s=n.event;n=n.listeners;e:{var r=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;r=a,s.currentTarget=c;try{r(s)}catch(h){Ro(h)}s.currentTarget=null,r=l}else for(o=0;o<n.length;o++){if(l=(a=n[o]).instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;r=a,s.currentTarget=c;try{r(s)}catch(h){Ro(h)}s.currentTarget=null,r=l}}}}function Ah(e,t){var i=t[Ge];void 0===i&&(i=t[Ge]=new Set);var n=e+"__bubble";i.has(n)||(Ih(t,e,2,!1),i.add(n))}function Nh(e,t,i){var n=0;t&&(n|=4),Ih(i,e,n,t)}var Lh="_reactListening"+Math.random().toString(36).slice(2);function kh(e){if(!e[Lh]){e[Lh]=!0,Qe.forEach((function(t){"selectionchange"!==t&&(Ph.has(t)||Nh(t,!1,e),Nh(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Lh]||(t[Lh]=!0,Nh("selectionchange",!1,t))}}function Ih(e,t,i,n){switch(Zu(t)){case 2:var s=Hu;break;case 8:s=Xu;break;default:s=Yu}i=s.bind(null,t,i,e),s=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),n?void 0!==s?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):void 0!==s?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function Rh(e,t,i,n,s){var r=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var a=n.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=Ye(a)))return;if(5===(l=o.tag)||6===l||26===l||27===l){n=r=o;continue e}a=a.parentNode}}n=n.return}Dt((function(){var n=r,s=Lt(i),o=[];e:{var a=xn.get(e);if(void 0!==a){var l=Qt,c=e;switch(e){case"keypress":if(0===Ut(i))break e;case"keydown":case"keyup":l=fi;break;case"focusin":c="focus",l=si;break;case"focusout":c="blur",l=si;break;case"beforeblur":case"afterblur":l=si;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ii;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=ni;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=mi;break;case fn:case pn:case mn:l=ri;break;case yn:l=gi;break;case"scroll":case"scrollend":l=ei;break;case"wheel":l=bi;break;case"copy":case"cut":case"paste":l=oi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=pi;break;case"toggle":case"beforetoggle":l=vi}var h=0!==(4&t),u=!h&&("scroll"===e||"scrollend"===e),d=h?null!==a?a+"Capture":null:a;h=[];for(var f,p=n;null!==p;){var m=p;if(f=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===f||null===d||null!=(m=Bt(p,d))&&h.push(Oh(p,m,f)),u)break;p=p.return}0<h.length&&(a=new l(a,c,null,i,s),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||i===Nt||!(c=i.relatedTarget||i.fromElement)||!Ye(c)&&!c[je])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(c=(c=i.relatedTarget||i.toElement)?Ye(c):null)&&(u=B(c),h=c.tag,c!==u||5!==h&&27!==h&&6!==h)&&(c=null)):(l=null,c=n),l!==c)){if(h=ii,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(h=pi,m="onPointerLeave",d="onPointerEnter",p="pointer"),u=null==l?a:qe(l),f=null==c?a:qe(c),(a=new h(m,p+"leave",l,i,s)).target=u,a.relatedTarget=f,m=null,Ye(s)===n&&((h=new h(d,p+"enter",c,i,s)).target=f,h.relatedTarget=u,m=h),u=m,l&&c)e:{for(d=c,p=0,f=h=l;f;f=Bh(f))p++;for(f=0,m=d;m;m=Bh(m))f++;for(;0<p-f;)h=Bh(h),p--;for(;0<f-p;)d=Bh(d),f--;for(;p--;){if(h===d||null!==d&&h===d.alternate)break e;h=Bh(h),d=Bh(d)}h=null}else h=null;null!==l&&Fh(o,a,l,h,!1),null!==c&&null!==u&&Fh(o,u,c,h,!0)}if("select"===(l=(a=n?qe(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Di;else if(Ni(a))if(Bi)g=Xi;else{g=Ui;var b=zi}else!(l=a.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?n&&Mt(n.elementType)&&(g=Di):g=Hi;switch(g&&(g=g(e,n))?Li(o,g,i,s):(b&&b(e,a,n),"focusout"===e&&n&&"number"===a.type&&null!=n.memoizedProps.value&&vt(a,"number",a.value)),b=n?qe(n):window,e){case"focusin":(Ni(b)||"true"===b.contentEditable)&&(nn=b,sn=n,rn=null);break;case"focusout":rn=sn=nn=null;break;case"mousedown":on=!0;break;case"contextmenu":case"mouseup":case"dragend":on=!1,an(o,i,s);break;case"selectionchange":if(tn)break;case"keydown":case"keyup":an(o,i,s)}var v;if(xi)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ci?Mi(e,i)&&(y="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(y="onCompositionStart");y&&(wi&&"ko"!==i.locale&&(Ci||"onCompositionStart"!==y?"onCompositionEnd"===y&&Ci&&(v=zt()):(Gt="value"in(jt=s)?jt.value:jt.textContent,Ci=!0)),0<(b=Dh(n,y)).length&&(y=new ai(y,e,null,i,s),o.push({event:y,listeners:b}),v?y.data=v:null!==(v=Pi(i))&&(y.data=v))),(v=Ei?function(e,t){switch(e){case"compositionend":return Pi(t);case"keypress":return 32!==t.which?null:(_i=!0,Ti);case"textInput":return(e=t.data)===Ti&&_i?null:e;default:return null}}(e,i):function(e,t){if(Ci)return"compositionend"===e||!xi&&Mi(e,t)?(e=zt(),Wt=Gt=jt=null,Ci=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wi&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(y=Dh(n,"onBeforeInput")).length&&(b=new ai("onBeforeInput","beforeinput",null,i,s),o.push({event:b,listeners:y}),b.data=v)),function(e,t,i,n,s){if("submit"===t&&i&&i.stateNode===s){var r=Eh((s[Ve]||null).action),o=n.submitter;o&&null!==(t=(t=o[Ve]||null)?Eh(t.formAction):o.getAttribute("formAction"))&&(r=t,o=null);var a=new Qt("action","action",null,n,s);e.push({event:a,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==ph){var e=o?wh(s,o):new FormData(s);ho(i,{pending:!0,data:e,method:s.method,action:r},null,e)}}else"function"===typeof r&&(a.preventDefault(),e=o?wh(s,o):new FormData(s),ho(i,{pending:!0,data:e,method:s.method,action:r},r,e))},currentTarget:s}]})}}(o,e,n,i,s)}Ch(o,t)}))}function Oh(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Dh(e,t){for(var i=t+"Capture",n=[];null!==e;){var s=e,r=s.stateNode;5!==(s=s.tag)&&26!==s&&27!==s||null===r||(null!=(s=Bt(e,i))&&n.unshift(Oh(e,s,r)),null!=(s=Bt(e,t))&&n.push(Oh(e,s,r))),e=e.return}return n}function Bh(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Fh(e,t,i,n,s){for(var r=t._reactName,o=[];null!==i&&i!==n;){var a=i,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===n)break;5!==a&&26!==a&&27!==a||null===c||(l=c,s?null!=(c=Bt(i,r))&&o.unshift(Oh(i,c,l)):s||null!=(c=Bt(i,r))&&o.push(Oh(i,c,l))),i=i.return}0!==o.length&&e.push({event:t,listeners:o})}var Vh=/\r\n?/g,jh=/\u0000|\uFFFD/g;function Gh(e){return("string"===typeof e?e:""+e).replace(Vh,"\n").replace(jh,"")}function Wh(e,t){return t=Gh(t),Gh(e)===t}function zh(){}function Uh(e,t,i,n,s,r){switch(i){case"children":"string"===typeof n?"body"===t||"textarea"===t&&""===n||Et(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==t&&Et(e,""+n);break;case"className":at(e,"class",n);break;case"tabIndex":at(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":at(e,i,n);break;case"style":_t(e,n,r);break;case"data":if("object"!==t){at(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==i)){e.removeAttribute(i);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(i);break}n=At(""+n),e.setAttribute(i,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof r&&("formAction"===i?("input"!==t&&Uh(e,t,"name",s.name,s,null),Uh(e,t,"formEncType",s.formEncType,s,null),Uh(e,t,"formMethod",s.formMethod,s,null),Uh(e,t,"formTarget",s.formTarget,s,null)):(Uh(e,t,"encType",s.encType,s,null),Uh(e,t,"method",s.method,s,null),Uh(e,t,"target",s.target,s,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(i);break}n=At(""+n),e.setAttribute(i,n);break;case"onClick":null!=n&&(e.onclick=zh);break;case"onScroll":null!=n&&Ah("scroll",e);break;case"onScrollEnd":null!=n&&Ah("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(o(61));if(null!=(i=n.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}i=At(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(i,""+n):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":!0===n?e.setAttribute(i,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(i,n):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(i,n):e.removeAttribute(i);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(i):e.setAttribute(i,n);break;case"popover":Ah("beforetoggle",e),Ah("toggle",e),ot(e,"popover",n);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":ot(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])&&ot(e,i=Pt.get(i)||i,n)}}function Hh(e,t,i,n,s,r){switch(i){case"style":_t(e,n,r);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(o(61));if(null!=(i=n.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=i}}break;case"children":"string"===typeof n?Et(e,n):("number"===typeof n||"bigint"===typeof n)&&Et(e,""+n);break;case"onScroll":null!=n&&Ah("scroll",e);break;case"onScrollEnd":null!=n&&Ah("scrollend",e);break;case"onClick":null!=n&&(e.onclick=zh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Je.hasOwnProperty(i)||("o"!==i[0]||"n"!==i[1]||(s=i.endsWith("Capture"),t=i.slice(2,s?i.length-7:void 0),"function"===typeof(r=null!=(r=e[Ve]||null)?r[i]:null)&&e.removeEventListener(t,r,s),"function"!==typeof n)?i in e?e[i]=n:!0===n?e.setAttribute(i,""):ot(e,i,n):("function"!==typeof r&&null!==r&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,n,s)))}}function Xh(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ah("error",e),Ah("load",e);var n,s=!1,r=!1;for(n in i)if(i.hasOwnProperty(n)){var a=i[n];if(null!=a)switch(n){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Uh(e,t,n,a,i,null)}}return r&&Uh(e,t,"srcSet",i.srcSet,i,null),void(s&&Uh(e,t,"src",i.src,i,null));case"input":Ah("invalid",e);var l=n=a=r=null,c=null,h=null;for(s in i)if(i.hasOwnProperty(s)){var u=i[s];if(null!=u)switch(s){case"name":r=u;break;case"type":a=u;break;case"checked":c=u;break;case"defaultChecked":h=u;break;case"value":n=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(o(137,t));break;default:Uh(e,t,s,u,i,null)}}return bt(e,n,l,c,h,a,r,!1),void ut(e);case"select":for(r in Ah("invalid",e),s=a=n=null,i)if(i.hasOwnProperty(r)&&null!=(l=i[r]))switch(r){case"value":n=l;break;case"defaultValue":a=l;break;case"multiple":s=l;default:Uh(e,t,r,l,i,null)}return t=n,i=a,e.multiple=!!s,void(null!=t?yt(e,!!s,t,!1):null!=i&&yt(e,!!s,i,!0));case"textarea":for(a in Ah("invalid",e),n=r=s=null,i)if(i.hasOwnProperty(a)&&null!=(l=i[a]))switch(a){case"value":s=l;break;case"defaultValue":r=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Uh(e,t,a,l,i,null)}return St(e,s,r,n),void ut(e);case"option":for(c in i)if(i.hasOwnProperty(c)&&null!=(s=i[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Uh(e,t,c,s,i,null);return;case"dialog":Ah("cancel",e),Ah("close",e);break;case"iframe":case"object":Ah("load",e);break;case"video":case"audio":for(s=0;s<Mh.length;s++)Ah(Mh[s],e);break;case"image":Ah("error",e),Ah("load",e);break;case"details":Ah("toggle",e);break;case"embed":case"source":case"link":Ah("error",e),Ah("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in i)if(i.hasOwnProperty(h)&&null!=(s=i[h]))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Uh(e,t,h,s,i,null)}return;default:if(Mt(t)){for(u in i)i.hasOwnProperty(u)&&(void 0!==(s=i[u])&&Hh(e,t,u,s,i,void 0));return}}for(l in i)i.hasOwnProperty(l)&&(null!=(s=i[l])&&Uh(e,t,l,s,i,null))}var Yh=null,Kh=null;function qh(e){return 9===e.nodeType?e:e.ownerDocument}function $h(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Qh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Jh=null;var eu="function"===typeof setTimeout?setTimeout:void 0,tu="function"===typeof clearTimeout?clearTimeout:void 0,iu="function"===typeof Promise?Promise:void 0,nu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof iu?function(e){return iu.resolve(null).then(e).catch(su)}:eu;function su(e){setTimeout((function(){throw e}))}function ru(e,t){var i=t,n=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&8===s.nodeType)if("/$"===(i=s.data)){if(0===n)return e.removeChild(s),void md(t);n--}else"$"!==i&&"$?"!==i&&"$!"!==i||n++;i=s}while(i);md(t)}function ou(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":ou(i),Xe(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===i.rel.toLowerCase())continue}e.removeChild(i)}}function au(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function lu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}function cu(e,t,i){switch(t=qh(i),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}var hu=new Map,uu=new Set;function du(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var fu=W.d;W.d={f:function(){var e=fu.f(),t=Fc();return e||t},r:function(e){var t=Ke(e);null!==t&&5===t.tag&&"form"===t.type?fo(t):fu.r(e)},D:function(e){fu.D(e),mu("dns-prefetch",e,null)},C:function(e,t){fu.C(e,t),mu("preconnect",e,t)},L:function(e,t,i){fu.L(e,t,i);var n=pu;if(n&&e&&t){var s='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&i&&i.imageSrcSet?(s+='[imagesrcset="'+mt(i.imageSrcSet)+'"]',"string"===typeof i.imageSizes&&(s+='[imagesizes="'+mt(i.imageSizes)+'"]')):s+='[href="'+mt(e)+'"]';var r=s;switch(t){case"style":r=bu(e);break;case"script":r=xu(e)}hu.has(r)||(e=L({rel:"preload",href:"image"===t&&i&&i.imageSrcSet?void 0:e,as:t},i),hu.set(r,e),null!==n.querySelector(s)||"style"===t&&n.querySelector(vu(r))||"script"===t&&n.querySelector(Su(r))||(Xh(t=n.createElement("link"),"link",e),Ze(t),n.head.appendChild(t)))}},m:function(e,t){fu.m(e,t);var i=pu;if(i&&e){var n=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+mt(n)+'"][href="'+mt(e)+'"]',r=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=xu(e)}if(!hu.has(r)&&(e=L({rel:"modulepreload",href:e},t),hu.set(r,e),null===i.querySelector(s))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Su(r)))return}Xh(n=i.createElement("link"),"link",e),Ze(n),i.head.appendChild(n)}}},X:function(e,t){fu.X(e,t);var i=pu;if(i&&e){var n=$e(i).hoistableScripts,s=xu(e),r=n.get(s);r||((r=i.querySelector(Su(s)))||(e=L({src:e,async:!0},t),(t=hu.get(s))&&_u(e,t),Ze(r=i.createElement("script")),Xh(r,"link",e),i.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(s,r))}},S:function(e,t,i){fu.S(e,t,i);var n=pu;if(n&&e){var s=$e(n).hoistableStyles,r=bu(e);t=t||"default";var o=s.get(r);if(!o){var a={loading:0,preload:null};if(o=n.querySelector(vu(r)))a.loading=5;else{e=L({rel:"stylesheet",href:e,"data-precedence":t},i),(i=hu.get(r))&&Tu(e,i);var l=o=n.createElement("link");Ze(l),Xh(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,wu(o,t,n)}o={type:"stylesheet",instance:o,count:1,state:a},s.set(r,o)}}},M:function(e,t){fu.M(e,t);var i=pu;if(i&&e){var n=$e(i).hoistableScripts,s=xu(e),r=n.get(s);r||((r=i.querySelector(Su(s)))||(e=L({src:e,async:!0,type:"module"},t),(t=hu.get(s))&&_u(e,t),Ze(r=i.createElement("script")),Xh(r,"link",e),i.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(s,r))}}};var pu="undefined"===typeof document?null:document;function mu(e,t,i){var n=pu;if(n&&"string"===typeof t&&t){var s=mt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof i&&(s+='[crossorigin="'+i+'"]'),uu.has(s)||(uu.add(s),e={rel:e,crossOrigin:i,href:t},null===n.querySelector(s)&&(Xh(t=n.createElement("link"),"link",e),Ze(t),n.head.appendChild(t)))}}function gu(e,t,i,n){var s,r,a,l,c=(c=Z.current)?du(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof i.precedence&&"string"===typeof i.href?(t=bu(i.href),(n=(i=$e(c).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===i.rel&&"string"===typeof i.href&&"string"===typeof i.precedence){e=bu(i.href);var h=$e(c).hoistableStyles,u=h.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,u),(h=c.querySelector(vu(e)))&&!h._p&&(u.instance=h,u.state.loading=5),hu.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},hu.set(e,i),h||(s=c,r=e,a=i,l=u.state,s.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=s.createElement("link"),l.preload=r,r.addEventListener("load",(function(){return l.loading|=1})),r.addEventListener("error",(function(){return l.loading|=2})),Xh(r,"link",a),Ze(r),s.head.appendChild(r))))),t&&null===n)throw Error(o(528,""));return u}if(t&&null!==n)throw Error(o(529,""));return null;case"script":return t=i.async,"string"===typeof(i=i.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=xu(i),(n=(i=$e(c).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function bu(e){return'href="'+mt(e)+'"'}function vu(e){return'link[rel="stylesheet"]['+e+"]"}function yu(e){return L({},e,{"data-precedence":e.precedence,precedence:null})}function xu(e){return'[src="'+mt(e)+'"]'}function Su(e){return"script[async]"+e}function Eu(e,t,i){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+mt(i.href)+'"]');if(n)return t.instance=n,Ze(n),n;var s=L({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return Ze(n=(e.ownerDocument||e).createElement("style")),Xh(n,"style",s),wu(n,i.precedence,e),t.instance=n;case"stylesheet":s=bu(i.href);var r=e.querySelector(vu(s));if(r)return t.state.loading|=4,t.instance=r,Ze(r),r;n=yu(i),(s=hu.get(s))&&Tu(n,s),Ze(r=(e.ownerDocument||e).createElement("link"));var a=r;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Xh(r,"link",n),t.state.loading|=4,wu(r,i.precedence,e),t.instance=r;case"script":return r=xu(i.src),(s=e.querySelector(Su(r)))?(t.instance=s,Ze(s),s):(n=i,(s=hu.get(r))&&_u(n=L({},i),s),Ze(s=(e=e.ownerDocument||e).createElement("script")),Xh(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,wu(n,i.precedence,e));return t.instance}function wu(e,t,i){for(var n=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,r=s,o=0;o<n.length;o++){var a=n[o];if(a.dataset.precedence===t)r=a;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===i.nodeType?i.head:i).insertBefore(e,t.firstChild)}function Tu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function _u(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Mu=null;function Pu(e,t,i){if(null===Mu){var n=new Map,s=Mu=new Map;s.set(i,n)}else(n=(s=Mu).get(i))||(n=new Map,s.set(i,n));if(n.has(e))return n;for(n.set(e,null),i=i.getElementsByTagName(e),s=0;s<i.length;s++){var r=i[s];if(!(r[He]||r[Fe]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var o=r.getAttribute(t)||"";o=e+o;var a=n.get(o);a?a.push(r):n.set(o,[r])}}return n}function Cu(e,t,i){(e=e.ownerDocument||e).head.insertBefore(i,"title"===t?e.querySelector("head > title"):null)}function Au(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Nu=null;function Lu(){}function ku(){if(this.count--,0===this.count)if(this.stylesheets)Ru(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Iu=null;function Ru(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Iu=new Map,t.forEach(Ou,e),Iu=null,ku.call(e))}function Ou(e,t){if(!(4&t.state.loading)){var i=Iu.get(e);if(i)var n=i.get(null);else{i=new Map,Iu.set(e,i);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var o=s[r];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(i.set(o.dataset.precedence,o),n=o)}n&&i.set(null,n)}o=(s=t.instance).getAttribute("data-precedence"),(r=i.get(o)||n)===n&&i.set(null,s),i.set(o,s),this.count++,n=ku.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),r?r.parentNode.insertBefore(s,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Du={$$typeof:g,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Bu(e,t,i,n,s,r,o,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Le(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Le(0),this.hiddenUpdates=Le(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Fu(e,t,i,n,s,r,o,a,l,c,h,u){return e=new Bu(e,t,i,o,a,l,c,u),t=1,!0===r&&(t|=24),r=Ol(3,null,null,t),e.current=r,r.stateNode=e,(t=js()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:n,isDehydrated:i,cache:t},Aa(r),e}function Vu(e){return e?e=kn:kn}function ju(e,t,i,n,s,r){s=Vu(s),null===n.context?n.context=s:n.pendingContext=s,(n=La(t)).payload={element:i},null!==(r=void 0===r?null:r)&&(n.callback=r),null!==(i=ka(e,n,t))&&(kc(i,0,t),Ia(i,e,t))}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Wu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}function zu(e){if(13===e.tag){var t=An(e,67108864);null!==t&&kc(t,0,67108864),Wu(e,67108864)}}var Uu=!0;function Hu(e,t,i,n){var s=N.T;N.T=null;var r=W.p;try{W.p=2,Yu(e,t,i,n)}finally{W.p=r,N.T=s}}function Xu(e,t,i,n){var s=N.T;N.T=null;var r=W.p;try{W.p=8,Yu(e,t,i,n)}finally{W.p=r,N.T=s}}function Yu(e,t,i,n){if(Uu){var s=Ku(n);if(null===s)Rh(e,t,n,qu,i),od(e,n);else if(function(e,t,i,n,s){switch(t){case"focusin":return Ju=ad(Ju,e,t,i,n,s),!0;case"dragenter":return ed=ad(ed,e,t,i,n,s),!0;case"mouseover":return td=ad(td,e,t,i,n,s),!0;case"pointerover":var r=s.pointerId;return id.set(r,ad(id.get(r)||null,e,t,i,n,s)),!0;case"gotpointercapture":return r=s.pointerId,nd.set(r,ad(nd.get(r)||null,e,t,i,n,s)),!0}return!1}(s,e,t,i,n))n.stopPropagation();else if(od(e,n),4&t&&-1<rd.indexOf(e)){for(;null!==s;){var r=Ke(s);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var o=_e(r.pendingLanes);if(0!==o){var a=r;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-xe(o);a.entanglements[1]|=l,o&=~l}mh(r),0===(6&ec)&&(xc=le()+500,gh(0,!1))}}break;case 13:null!==(a=An(r,2))&&kc(a,0,2),Fc(),Wu(r,2)}if(null===(r=Ku(n))&&Rh(e,t,n,qu,i),r===s)break;s=r}null!==s&&n.stopPropagation()}else Rh(e,t,n,null,i)}}function Ku(e){return $u(e=Lt(e))}var qu=null;function $u(e){if(qu=null,null!==(e=Ye(e))){var t=B(e);if(null===t)e=null;else{var i=t.tag;if(13===i){if(null!==(e=F(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return qu=e,null}function Zu(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case he:return 2;case ue:return 8;case de:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Qu=!1,Ju=null,ed=null,td=null,id=new Map,nd=new Map,sd=[],rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function od(e,t){switch(e){case"focusin":case"focusout":Ju=null;break;case"dragenter":case"dragleave":ed=null;break;case"mouseover":case"mouseout":td=null;break;case"pointerover":case"pointerout":id.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nd.delete(t.pointerId)}}function ad(e,t,i,n,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=Ke(t))&&zu(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function ld(e){var t=Ye(e.target);if(null!==t){var i=B(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=F(i)))return e.blockedOn=t,void function(e,t){var i=W.p;try{return W.p=e,t()}finally{W.p=i}}(e.priority,(function(){if(13===i.tag){var e=Nc(),t=An(i,e);null!==t&&kc(t,0,e),Wu(i,e)}}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function cd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Ku(e.nativeEvent);if(null!==i)return null!==(t=Ke(i))&&zu(t),e.blockedOn=i,!1;var n=new(i=e.nativeEvent).constructor(i.type,i);Nt=n,i.target.dispatchEvent(n),Nt=null,t.shift()}return!0}function hd(e,t,i){cd(e)&&i.delete(t)}function ud(){Qu=!1,null!==Ju&&cd(Ju)&&(Ju=null),null!==ed&&cd(ed)&&(ed=null),null!==td&&cd(td)&&(td=null),id.forEach(hd),nd.forEach(hd)}function dd(e,t){e.blockedOn===t&&(e.blockedOn=null,Qu||(Qu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ud)))}var fd=null;function pd(e){fd!==e&&(fd=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,(function(){fd===e&&(fd=null);for(var t=0;t<e.length;t+=3){var i=e[t],n=e[t+1],s=e[t+2];if("function"!==typeof n){if(null===$u(n||i))continue;break}var r=Ke(i);null!==r&&(e.splice(t,3),t-=3,ho(r,{pending:!0,data:s,method:i.method,action:n},n,s))}})))}function md(e){function t(t){return dd(t,e)}null!==Ju&&dd(Ju,e),null!==ed&&dd(ed,e),null!==td&&dd(td,e),id.forEach(t),nd.forEach(t);for(var i=0;i<sd.length;i++){var n=sd[i];n.blockedOn===e&&(n.blockedOn=null)}for(;0<sd.length&&null===(i=sd[0]).blockedOn;)ld(i),null===i.blockedOn&&sd.shift();if(null!=(i=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<i.length;n+=3){var s=i[n],r=i[n+1],o=s[Ve]||null;if("function"===typeof r)o||pd(i);else if(o){var a=null;if(r&&r.hasAttribute("formAction")){if(s=r,o=r[Ve]||null)a=o.formAction;else if(null!==$u(s))continue}else a=o.action;"function"===typeof a?i[n+1]=a:(i.splice(n,3),n-=3),pd(i)}}}function gd(e){this._internalRoot=e}function bd(e){this._internalRoot=e}bd.prototype.render=gd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));ju(t.current,Nc(),e,t,null,null)},bd.prototype.unmount=gd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&th(),ju(e.current,2,null,e,null,null),Fc(),t[je]=null}},bd.prototype.unstable_scheduleHydration=function(e){if(e){var t=De();e={blockedOn:null,target:e,priority:t};for(var i=0;i<sd.length&&0!==t&&t<sd[i].priority;i++);sd.splice(i,0,e),0===i&&ld(e)}};var vd=s.version;if("19.0.0"!==vd)throw Error(o(527,vd,"19.0.0"));W.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=B(e)))throw Error(o(188));return t!==e?null:e}for(var i=e,n=t;;){var s=i.return;if(null===s)break;var r=s.alternate;if(null===r){if(null!==(n=s.return)){i=n;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===i)return V(s),e;if(r===n)return V(s),t;r=r.sibling}throw Error(o(188))}if(i.return!==n.return)i=s,n=r;else{for(var a=!1,l=s.child;l;){if(l===i){a=!0,i=s,n=r;break}if(l===n){a=!0,n=s,i=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===i){a=!0,i=r,n=s;break}if(l===n){a=!0,n=r,i=s;break}l=l.sibling}if(!a)throw Error(o(189))}}if(i.alternate!==n)throw Error(o(190))}if(3!==i.tag)throw Error(o(188));return i.stateNode.current===i?e:t}(t),e=null===(e=null!==e?j(e):null)?null:e.stateNode};var yd={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:N,findFiberByHostInstance:Ye,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{be=xd.inject(yd),ve=xd}catch(Ed){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var i=!1,n="",s=Oo,r=Do,l=Bo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(r=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Fu(e,1,!1,null,0,i,n,s,r,l,0,null),e[je]=t.current,kh(8===e.nodeType?e.parentNode:e),new gd(t)},t.hydrateRoot=function(e,t,i){if(!a(e))throw Error(o(299));var n=!1,s="",r=Oo,l=Do,c=Bo,h=null;return null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(n=!0),void 0!==i.identifierPrefix&&(s=i.identifierPrefix),void 0!==i.onUncaughtError&&(r=i.onUncaughtError),void 0!==i.onCaughtError&&(l=i.onCaughtError),void 0!==i.onRecoverableError&&(c=i.onRecoverableError),void 0!==i.unstable_transitionCallbacks&&i.unstable_transitionCallbacks,void 0!==i.formState&&(h=i.formState)),(t=Fu(e,1,!0,t,0,n,s,r,l,c,0,h)).context=Vu(null),i=t.current,(s=La(n=Nc())).callback=null,ka(i,s,n),t.current.lanes=n,ke(t,n),mh(t),e[je]=t.current,kh(e),new bd(t)},t.version="19.0.0"},43:(e,t,i)=>{"use strict";e.exports=i(288)},45:(e,t,i)=>{var n=i(738).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=n(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},59:(e,t,i)=>{"use strict";var n=i(520),s={},r={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function o(e){return"number"===typeof e}var a=["attack","decay","sustain","release"];e.exports=function(e,t,i){var l=!1,c=0,h={},u=e.createGain();u.gain.value=1;var d=Object.assign({},r,i),f={context:e,out:u,opts:d};return t instanceof AudioBuffer?f.buffer=t:f.buffers=t,f.start=function(t,i,n){if(f.buffer&&null!==t)return f.start(null,t,i);var r=t?f.buffers[t]:f.buffer;if(r){if(l){var o=n||s;i=Math.max(e.currentTime,i||0),f.emit("start",i,t,o);var a=p(t,r,o);return a.id=function(t,i){return i.id=c++,h[i.id]=i,i.source.onended=function(){var t=e.currentTime;i.source.disconnect(),i.env.disconnect(),i.disconnect(),f.emit("ended",t,i.id,i)},i.id}(0,a),a.env.start(i),a.source.start(i),f.emit("started",i,a.id,a),o.duration&&a.stop(i+o.duration),a}console.warn("SamplePlayer not connected to any node.")}else console.warn("Buffer "+t+" not found.")},f.play=function(e,t,i){return f.start(e,t,i)},f.stop=function(e,t){var i;return(t=t||Object.keys(h)).map((function(t){return(i=h[t])?(i.stop(e),i.id):null}))},f.connect=function(e){return l=!0,u.connect(e),f},f.emit=function(e,t,i,n){f.onevent&&f.onevent(e,t,i,n);var s=f["on"+e];s&&s(t,i,n)},f;function p(t,i,s){var r,l=e.createGain();return l.gain.value=0,l.connect(u),l.env=function(e,t,i){var s=n(e),r=t.adsr||i.adsr;return a.forEach((function(e,n){s[e]=r?r[n]:t[e]||i[e]})),s.value.value=o(t.gain)?t.gain:o(i.gain)?i.gain:1,s}(e,s,d),l.env.connect(l.gain),l.source=e.createBufferSource(),l.source.buffer=i,l.source.connect(l),l.source.loop=s.loop||d.loop,l.source.playbackRate.value=(r=s.cents||d.cents)?Math.pow(2,r/1200):1,l.source.loopStart=s.loopStart||d.loopStart,l.source.loopEnd=s.loopEnd||d.loopEnd,l.stop=function(i){var n=i||e.currentTime;f.emit("stop",n,t);var s=l.env.stop(n);l.source.stop(s)},l}}},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,i)=>{var n=i(79);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,s,r,o,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,s=e}finally{try{if(!l&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(c)throw s}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},167:(e,t,i)=>{var n=i(411);e.exports=function(e){return e.listenToMidi=function(t,i){var s={},r=i||{},o=r.gain||function(e){return e/127};return t.onmidimessage=function(t){var i=t.messageType?t:n(t);if("noteon"===i.messageType&&0===i.velocity&&(i.messageType="noteoff"),!r.channel||i.channel===r.channel)switch(i.messageType){case"noteon":s[i.key]=e.play(i.key,0,{gain:o(i.velocity)});break;case"noteoff":s[i.key]&&(s[i.key].stop(),delete s[i.key])}},e},e}},200:(e,t,i)=>{"use strict";var n=i(578),s=i(612);function r(e){return/\.js(\?.*)?$/i.test(e)}function o(e,t,i){return"https://gleitz.github.io/midi-js-soundfonts/"+(t="FluidR3_GM"===t?t:"MusyngKite")+"/"+e+"-"+(i="ogg"===i?i:"mp3")+".js"}var a=i(249);a.instrument=function e(t,i,a){if(1===arguments.length)return function(i,n){return e(t,i,n)};var l=a||{},c=l.isSoundfontURL||r,h=l.nameToUrl||o,u=c(i)?i:h(i,l.soundfont,l.format);return n(t,u,{only:l.only||l.notes}).then((function(e){var n=s(t,e,l).connect(l.destination?l.destination:t.destination);return n.url=u,n.name=i,n}))},a.nameToUrl=o,e.exports&&(e.exports=a),"undefined"!==typeof window&&(window.Soundfont=a)},249:(e,t,i)=>{"use strict";var n=i(988);function s(e,t){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof s))return new s(e);this.nameToUrl=t||s.nameToUrl,this.ctx=e,this.instruments={},this.promises=[]}function r(e,t){return t=t||{},function(i,s,r,o){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var a=i>0&&i<129?+i:n.midi(i),l=a?n.midiToFreq(a,440):null;if(l){r=r||.2;var c=(o=o||{}).destination||t.destination||e.destination,h=o.vcoType||t.vcoType||"sine",u=o.gain||t.gain||.4,d=e.createOscillator();d.type=h,d.frequency.value=l;var f=e.createGain();return f.gain.value=u,d.connect(f),f.connect(c),d.start(s),r>0&&d.stop(s+r),d}}}s.prototype.onready=function(e){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(e)},s.prototype.instrument=function(e,t){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var i=this.ctx;if((e=e||"default")in this.instruments)return this.instruments[e];var n={name:e,play:r(i,t)};if(this.instruments[e]=n,"default"!==e){var o=s.instrument(i,e,t).then((function(e){return n.play=e.play,n}));this.promises.push(o),n.onready=function(e){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),o.then(e)}}else n.onready=function(e){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),e()};return n},s.loadBuffers=function(e,t,i){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),s.instrument(e,t,i).then((function(e){return e.buffers}))},s.noteToMidi=n.midi,e.exports=s},288:(e,t)=>{"use strict";var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function b(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||p}function v(){}function y(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||p}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=b.prototype;var x=y.prototype=new v;x.constructor=y,m(x,b.prototype),x.isPureReactComponent=!0;var S=Array.isArray,E={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function T(e,t,n,s,r,o){return n=o.ref,{$$typeof:i,type:e,key:t,ref:void 0!==n?n:null,props:o}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var M=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(){}function A(e,t,s,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,h=!1;if(null===e)h=!0;else switch(a){case"bigint":case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case i:case n:h=!0;break;case d:return A((h=e._init)(e._payload),t,s,r,o)}}if(h)return o=o(e),h=""===r?"."+P(e,0):r,S(o)?(s="",null!=h&&(s=h.replace(M,"$&/")+"/"),A(o,t,s,"",(function(e){return e}))):null!=o&&(_(o)&&(l=o,c=s+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(M,"$&/")+"/")+h,o=T(l.type,c,void 0,0,0,l.props)),t.push(o)),1;h=0;var u,p=""===r?".":r+":";if(S(e))for(var m=0;m<e.length;m++)h+=A(r=e[m],t,s,a=p+P(r,m),o);else if("function"===typeof(m=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=f&&u[f]||u["@@iterator"])?u:null))for(e=m.call(e),m=0;!(r=e.next()).done;)h+=A(r=r.value,t,s,a=p+P(r,m++),o);else if("object"===a){if("function"===typeof e.then)return A(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(C,C):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,r,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return h}function N(e,t,i){if(null==e)return e;var n=[],s=0;return A(e,n,"","",(function(e){return t.call(i,e,s++)})),n}function L(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var k="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function I(){}t.Children={map:N,forEach:function(e,t,i){N(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=s,t.Profiler=o,t.PureComponent=y,t.StrictMode=r,t.Suspense=h,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=m({},e.props),s=e.key;if(null!=t)for(r in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!w.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(n[r]=t[r]);var r=arguments.length-2;if(1===r)n.children=i;else if(1<r){for(var o=Array(r),a=0;a<r;a++)o[a]=arguments[a+2];n.children=o}return T(e.type,s,void 0,0,0,n)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,i){var n,s={},r=null;if(null!=t)for(n in void 0!==t.key&&(r=""+t.key),t)w.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(s[n]=t[n]);var o=arguments.length-2;if(1===o)s.children=i;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];s.children=a}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===s[n]&&(s[n]=o[n]);return T(e,r,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.T,i={};E.T=i;try{var n=e(),s=E.S;null!==s&&s(i,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(I,k)}catch(r){k(r)}finally{E.T=t}},t.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},t.use=function(e){return E.H.use(e)},t.useActionState=function(e,t,i){return E.H.useActionState(e,t,i)},t.useCallback=function(e,t){return E.H.useCallback(e,t)},t.useContext=function(e){return E.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return E.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return E.H.useEffect(e,t)},t.useId=function(){return E.H.useId()},t.useImperativeHandle=function(e,t,i){return E.H.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return E.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return E.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return E.H.useMemo(e,t)},t.useOptimistic=function(e,t){return E.H.useOptimistic(e,t)},t.useReducer=function(e,t,i){return E.H.useReducer(e,t,i)},t.useRef=function(e){return E.H.useRef(e)},t.useState=function(e){return E.H.useState(e)},t.useSyncExternalStore=function(e,t,i){return E.H.useSyncExternalStore(e,t,i)},t.useTransition=function(){return E.H.useTransition()},t.version="19.0.0"},383:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},391:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(4)},411:e=>{e.exports=function e(t,i,n){function s(o,a){if(!i[o]){if(!t[o]){if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}};t[o][0].call(c.exports,(function(e){var i=t[o][1][e];return s(i||e)}),c,c.exports,e,t,i,n)}return i[o].exports}for(var r=void 0,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e){function t(e){if(this._event=e,this._data=e.data,this.receivedTime=e.receivedTime,this._data&&this._data.length<2)console.warn("Illegal MIDI message of length",this._data.length);else switch(this._messageCode=240&e.data[0],this.channel=15&e.data[0],this._messageCode){case 128:this.messageType="noteoff",this.key=127&e.data[1],this.velocity=127&e.data[2];break;case 144:this.messageType="noteon",this.key=127&e.data[1],this.velocity=127&e.data[2];break;case 160:this.messageType="keypressure",this.key=127&e.data[1],this.pressure=127&e.data[2];break;case 176:this.messageType="controlchange",this.controllerNumber=127&e.data[1],this.controllerValue=127&e.data[2],120===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allsoundoff":121===this.controllerNumber?this.channelModeMessage="resetallcontrollers":122===this.controllerNumber?0===this.controllerValue?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":123===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allnotesoff":124===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeoff":125===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeon":126===this.controllerNumber?this.channelModeMessage="monomodeon":127===this.controllerNumber&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=e.data[1];break;case 208:this.messageType="channelpressure",this.pressure=127&e.data[1];break;case 224:this.messageType="pitchbendchange";var t=127&e.data[2],i=127&e.data[1];this.pitchBend=(t<<8)+i}}return new t(e)},t.exports=i.default},{}]},{},[1])(1)},417:e=>{"use strict";var t=Array.isArray,i={};e.exports=function(e){return e.schedule=function(n,s){var r,o,a,l,c=e.context.currentTime,h=n<c?c:n;return e.emit("schedule",h,s),s.map((function(n){return n?(t(n)?(r=n[0],o=n[1]):(r=n.time,o=n),!function(e){return e&&"object"===typeof e}(o)?(a=o,l=i):(a=o.name||o.key||o.note||o.midi||null,l=o),e.start(a,h+(r||0),l)):null}))},e}},488:function(e,t,i){var n,s,r=i(897).default;n="undefined"==typeof window?this:window,s=()=>(e=>{"use strict";let t,i;var n,s,o,a,l,c,h,u,d,f,p,m,g,b,v,y,x,S,E={d:(e,t)=>{for(var i in t)E.o(t,i)&&!E.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},w={};E.d(w,{default:()=>mu}),function(e,t,i,n,s){e.SVG_NS="http://www.w3.org/2000/svg",e.product="Highcharts",e.version="12.4.0",e.win="undefined"!=typeof window?window:{},e.doc=e.win.document,e.svg=!(null===(t=e.doc)||void 0===t||null===(i=t.createElementNS)||void 0===i||null===(i=i.call(t,e.SVG_NS,"svg"))||void 0===i||!i.createSVGRect),e.pageLang=null===(n=e.doc)||void 0===n||null===(n=n.documentElement)||void 0===n||null===(n=n.closest("[lang]"))||void 0===n?void 0:n.lang,e.userAgent=(null===(s=e.win.navigator)||void 0===s?void 0:s.userAgent)||"",e.isChrome=e.win.chrome,e.isFirefox=-1!==e.userAgent.indexOf("Firefox"),e.isMS=/(edge|msie|trident)/i.test(e.userAgent)&&!e.win.opera,e.isSafari=!e.isChrome&&-1!==e.userAgent.indexOf("Safari"),e.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(e.userAgent),e.isWebKit=-1!==e.userAgent.indexOf("AppleWebKit"),e.deg2rad=2*Math.PI/360,e.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],e.noop=function(){},e.supportsPassiveEvents=function(){let t=!1;if(!e.isMS){let i=Object.defineProperty({},"passive",{get:function(){t=!0}});e.win.addEventListener&&e.win.removeEventListener&&(e.win.addEventListener("testPassive",e.noop,i),e.win.removeEventListener("testPassive",e.noop,i))}return t}(),e.charts=[],e.composed=[],e.dateFormats={},e.seriesTypes={},e.symbolSizes={},e.chartCount=0}(n||(n={}));let T=n,{charts:_,doc:M,win:P}=T;function C(e,t,i,n){let s=t?"Highcharts error":"Highcharts warning";32===e&&(e="".concat(s,": Deprecated member"));let r=O(e),o=r?"".concat(s," #").concat(e,": www.highcharts.com/errors/").concat(e,"/"):e.toString();if(void 0!==n){let e="";r&&(o+="?"),H(n,(function(t,i){e+="\n - ".concat(i,": ").concat(t),r&&(o+=encodeURI(i)+"="+encodeURI(t))})),o+=e}Y(T,"displayError",{chart:i,code:e,message:o,params:n},(function(){if(t)throw Error(o);P.console&&-1===C.messages.indexOf(o)&&console.warn(o)})),C.messages.push(o)}function A(e,t){return parseInt(e,t||10)}function N(e){return"string"==typeof e}function L(e){let t=Object.prototype.toString.call(e);return"[object Array]"===t||"[object Array Iterator]"===t}function k(e,t){return!!e&&"object"==typeof e&&(!t||!L(e))}function I(e){return k(e)&&"number"==typeof e.nodeType}function R(e){let t=null===e||void 0===e?void 0:e.constructor;return!(!k(e,!0)||I(e)||null===t||void 0===t||!t.name||"Object"===t.name)}function O(e){return"number"==typeof e&&!isNaN(e)&&e<1/0&&e>-1/0}function D(e){return null!=e}function B(e,t,i){let n,s=N(t)&&!D(i),r=(t,i)=>{D(t)?e.setAttribute(i,t):s?(n=e.getAttribute(i))||"class"!==i||(n=e.getAttribute(i+"Name")):e.removeAttribute(i)};return N(t)?r(i,t):H(t,r),n}function F(e){return L(e)?e:[e]}function V(e,t){let i;for(i in e||(e={}),t)e[i]=t[i];return e}function j(){let e=arguments,t=e.length;for(let i=0;i<t;i++){let t=e[i];if(null!=t)return t}}function G(e,t){V(e.style,t)}function W(e){return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function z(e,t){return e>1e14?e:parseFloat(e.toPrecision(t||14))}(C||(C={})).messages=[],Math.easeInOutSine=function(e){return-.5*(Math.cos(Math.PI*e)-1)};let U=Array.prototype.find?function(e,t){return e.find(t)}:function(e,t){let i,n=e.length;for(i=0;i<n;i++)if(t(e[i],i))return e[i]};function H(e,t,i){for(let n in e)Object.hasOwnProperty.call(e,n)&&t.call(i||e[n],e[n],n,e)}function X(e,t,i){function n(t,i){let n=e.removeEventListener;n&&n.call(e,t,i,!1)}function s(i){let s,r;e.nodeName&&(t?(s={})[t]=!0:s=i,H(s,(function(e,t){if(i[t])for(r=i[t].length;r--;)n(t,i[t][r].fn)})))}let r="function"==typeof e&&e.prototype||e;if(Object.hasOwnProperty.call(r,"hcEvents")){let e=r.hcEvents;if(t){let r=e[t]||[];i?(e[t]=r.filter((function(e){return i!==e.fn})),n(t,i)):(s(e),e[t]=[])}else s(e),delete r.hcEvents}}function Y(e,t,i,n){if(i=i||{},null!==M&&void 0!==M&&M.createEvent&&(e.dispatchEvent||e.fireEvent&&e!==T)){let n=M.createEvent("Events");n.initEvent(t,!0,!0),i=V(n,i),e.dispatchEvent?e.dispatchEvent(i):e.fireEvent(t,i)}else if(e.hcEvents){i.target||V(i,{preventDefault:function(){i.defaultPrevented=!0},target:e,type:t});let n=[],s=e,r=!1;for(;s.hcEvents;)Object.hasOwnProperty.call(s,"hcEvents")&&s.hcEvents[t]&&(n.length&&(r=!0),n.unshift.apply(n,s.hcEvents[t])),s=Object.getPrototypeOf(s);r&&n.sort(((e,t)=>e.order-t.order)),n.forEach((t=>{!1===t.fn.call(e,i)&&i.preventDefault()}))}n&&!i.defaultPrevented&&n.call(e,i)}let K=function(){let e=Math.random().toString(36).substring(2,9)+"-",i=0;return function(){return"highcharts-"+(t?"":e)+i++}}();P.jQuery&&(P.jQuery.fn.highcharts=function(){let e=[].slice.call(arguments);if(this[0])return e[0]?(new(T[N(e[0])?e.shift():"Chart"])(this[0],e[0],e[1]),this):_[B(this[0],"data-highcharts-chart")]});let q={addEvent:function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s="function"==typeof e&&e.prototype||e;Object.hasOwnProperty.call(s,"hcEvents")||(s.hcEvents={});let r=s.hcEvents;T.Point&&e instanceof T.Point&&e.series&&e.series.chart&&(e.series.chart.runTrackerClick=!0);let o=e.addEventListener;o&&o.call(e,t,i,!!T.supportsPassiveEvents&&{passive:void 0===n.passive?-1!==t.indexOf("touch"):n.passive,capture:!1}),r[t]||(r[t]=[]);let a={fn:i,order:"number"==typeof n.order?n.order:1/0};return r[t].push(a),r[t].sort(((e,t)=>e.order-t.order)),function(){X(e,t,i)}},arrayMax:function(e){let t=e.length,i=e[0];for(;t--;)e[t]>i&&(i=e[t]);return i},arrayMin:function(e){let t=e.length,i=e[0];for(;t--;)e[t]<i&&(i=e[t]);return i},attr:B,clamp:function(e,t,i){return e>t?e<i?e:i:t},clearTimeout:function(e){D(e)&&clearTimeout(e)},correctFloat:z,createElement:function(e,t,i,n,s){let r=M.createElement(e);return t&&V(r,t),s&&G(r,{padding:"0",border:"none",margin:"0"}),i&&G(r,i),n&&n.appendChild(r),r},crisp:function(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)%2/2,i=(arguments.length>2?arguments[2]:void 0)?-1:1;return(Math.round(e*i-t)+t)*i},css:G,defined:D,destroyObjectProperties:function(e,t,i){H(e,(function(n,s){n!==t&&null!==n&&void 0!==n&&n.destroy&&n.destroy(),((null===n||void 0===n?void 0:n.destroy)||!i)&&delete e[s]}))},diffObjects:function(e,t,i,n){let s={};return function e(t,s,r,o){let a=i?s:t;H(t,(function(i,l){if(!o&&n&&n.indexOf(l)>-1&&s[l]){i=F(i),r[l]=[];for(let t=0;t<Math.max(i.length,s[l].length);t++)s[l][t]&&(void 0===i[t]?r[l][t]=s[l][t]:(r[l][t]={},e(i[t],s[l][t],r[l][t],o+1)))}else k(i,!0)&&!i.nodeType?(r[l]=L(i)?[]:{},e(i,s[l]||{},r[l],o+1),0===Object.keys(r[l]).length&&("colorAxis"!==l||0!==o)&&delete r[l]):(t[l]!==s[l]||l in t&&!(l in s))&&"__proto__"!==l&&"constructor"!==l&&(r[l]=a[l])}))}(e,t,s,0),s},discardElement:function(e){var t;null===e||void 0===e||null===(t=e.parentElement)||void 0===t||t.removeChild(e)},erase:function(e,t){let i=e.length;for(;i--;)if(e[i]===t){e.splice(i,1);break}},error:C,extend:V,extendClass:function(e,t){let i=function(){};return V(i.prototype=new e,t),i},find:U,fireEvent:Y,getAlignFactor:function(){return{center:.5,right:1,middle:.5,bottom:1}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""]||0},getClosestDistance:function(e,t){let i,n,s,r,o=!t;return e.forEach((e=>{if(e.length>1)for(r=n=e.length-1;r>0;r--){var a;(s=e[r]-e[r-1])<0&&!o?(null!==(a=t)&&void 0!==a&&a(),t=void 0):s&&(void 0===i||s<i)&&(i=s)}})),i},getMagnitude:W,getNestedProperty:function(e,t){let i=e.split(".");for(;i.length&&D(t);){let e=i.shift();if(void 0===e||"__proto__"===e)return;if("this"===e){let e;return k(t)&&(e=t["@this"]),null!==e&&void 0!==e?e:t}let n=t[e.replace(/[\\'"]/g,"")];if(!D(n)||"function"==typeof n||"number"==typeof n.nodeType||n===P)return;t=n}return t},getStyle:function e(t,i,n){let s;if("width"===i){var r;let i=Math.min(t.offsetWidth,t.scrollWidth),n=null===(r=t.getBoundingClientRect)||void 0===r?void 0:r.call(t).width;return n<i&&n>=i-1&&(i=Math.floor(n)),Math.max(0,i-(e(t,"padding-left",!0)||0)-(e(t,"padding-right",!0)||0))}if("height"===i)return Math.max(0,Math.min(t.offsetHeight,t.scrollHeight)-(e(t,"padding-top",!0)||0)-(e(t,"padding-bottom",!0)||0));let o=P.getComputedStyle(t,void 0);return o&&(s=o.getPropertyValue(i),j(n,"opacity"!==i)&&(s=A(s))),s},insertItem:function(e,t){let i,n=e.options.index,s=t.length;for(i=e.options.isInternal?s:0;i<s+1;i++)if(!t[i]||O(n)&&n<j(t[i].options.index,t[i]._i)||t[i].options.isInternal){t.splice(i,0,e);break}return i},isArray:L,isClass:R,isDOMElement:I,isFunction:function(e){return"function"==typeof e},isNumber:O,isObject:k,isString:N,merge:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];let s,r=[e,...i],o={},a=function(e,t){return"object"!=typeof e&&(e={}),H(t,(function(i,n){"__proto__"!==n&&"constructor"!==n&&(!k(i,!0)||R(i)||I(i)?e[n]=t[n]:e[n]=a(e[n]||{},i))})),e};!0===e&&(o=r[1],r=Array.prototype.slice.call(r,2));let l=r.length;for(s=0;s<l;s++)o=a(o,r[s]);return o},normalizeTickInterval:function(e,t,i,n,s){let r,o=e,a=e/(i=j(i,W(e)));for(!t&&(t=s?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===n&&(1===i?t=t.filter((function(e){return e%1==0})):i<=.1&&(t=[1/i]))),r=0;r<t.length&&(o=t[r],(!s||!(o*i>=e))&&(s||!(a<=(t[r]+(t[r+1]||t[r]))/2)));r++);return z(o*i,-Math.round(Math.log(.001)/Math.LN10))},objectEach:H,offset:function(e){let t=M.documentElement,i=e.parentElement||e.parentNode?e.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:i.top+(P.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(P.pageXOffset||t.scrollLeft)-(t.clientLeft||0),width:i.width,height:i.height}},pad:function(e,t,i){return Array((t||2)+1-String(e).replace("-","").length).join(i||"0")+e},pick:j,pInt:A,pushUnique:function(e,t){return 0>e.indexOf(t)&&!!e.push(t)},relativeLength:function(e,t,i){return/%$/.test(e)?t*parseFloat(e)/100+(i||0):parseFloat(e)},removeEvent:X,replaceNested:function(e){let t,i;for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];do{for(i of(t=e,s))e=e.replace(i[0],i[1])}while(e!==t);return e},splat:F,stableSort:function(e,t){let i,n,s=e.length;for(n=0;n<s;n++)e[n].safeI=n;for(e.sort((function(e,n){return 0===(i=t(e,n))?e.safeI-n.safeI:i})),n=0;n<s;n++)delete e[n].safeI},syncTimeout:function(e,t,i){return t>0?setTimeout(e,t,i):(e.call(0,i),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},ucfirst:function(e){return N(e)?e.substring(0,1).toUpperCase()+e.substring(1):String(e)},uniqueKey:K,useSerialIds:function(e){return t=j(e,t)},wrap:function(e,t,i){let n=e[t];e[t]=function(){let e=arguments,t=this;return i.apply(this,[function(){return n.apply(t,arguments.length?arguments:e)}].concat([].slice.call(arguments)))}}},{pageLang:$,win:Z}=T,{defined:Q,error:J,extend:ee,isNumber:te,isObject:ie,isString:ne,merge:se,objectEach:re,pad:oe,splat:ae,timeUnits:le,ucfirst:ce}=q,he=T.isSafari&&Z.Intl&&!Z.Intl.DateTimeFormat.prototype.formatRange,ue=class{constructor(e,t){this.options={timezone:"UTC"},this.variableTimezone=!1,this.Date=Z.Date,this.update(e),this.lang=t}update(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dTLCache={},this.options=t=se(!0,this.options,t);let{timezoneOffset:i,useUTC:n,locale:s}=t;this.Date=t.Date||Z.Date||Date;let r=t.timezone;Q(n)&&(r=n?"UTC":void 0),i&&i%60==0&&(r="Etc/GMT"+(i>0?"+":"")+i/60),this.variableTimezone="UTC"!==r&&0!==(null===(e=r)||void 0===e?void 0:e.indexOf("Etc/GMT")),this.timezone=r,this.lang&&s&&(this.lang.locale=s),["months","shortMonths","weekdays","shortWeekdays"].forEach((e=>{let t=/months/i.test(e),i=/short/.test(e),n={timeZone:"UTC"};n[t?"month":"weekday"]=i?"short":"long",this[e]=(t?[0,1,2,3,4,5,6,7,8,9,10,11]:[3,4,5,6,7,8,9]).map((e=>this.dateFormat(n,24*(t?31:1)*36e5*e)))}))}toParts(e){let[t,i,n,s,r,o,a]=this.dateTimeFormat({weekday:"narrow",day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},e,"es").split(/(?:, | |\/|:)/g);return[s,n-1,i,r,o,a,Math.floor(Number(e)||0)%1e3,"DLMXJVS".indexOf(t)].map(Number)}dateTimeFormat(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.locale||$,s=JSON.stringify(e)+n;ne(e)&&(e=this.str2dtf(e));let r=this.dTLCache[s];if(!r){var o;null!==(o=e.timeZone)&&void 0!==o||(e.timeZone=this.timezone);try{r=new Intl.DateTimeFormat(n,e)}catch(t){/Invalid time zone/i.test(t.message)?(J(34),e.timeZone="UTC",r=new Intl.DateTimeFormat(n,e)):J(t.message,!1)}}return this.dTLCache[s]=r,(null===(i=r)||void 0===i?void 0:i.format(t))||""}str2dtf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={L:{fractionalSecondDigits:3},S:{second:"2-digit"},M:{minute:"numeric"},H:{hour:"2-digit"},k:{hour:"numeric"},E:{weekday:"narrow"},a:{weekday:"short"},A:{weekday:"long"},d:{day:"2-digit"},e:{day:"numeric"},b:{month:"short"},B:{month:"long"},m:{month:"2-digit"},o:{month:"numeric"},y:{year:"2-digit"},Y:{year:"numeric"}};return Object.keys(i).forEach((n=>{-1!==e.indexOf(n)&&ee(t,i[n])})),t}makeTime(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,a=this.Date.UTC(e,t,i,n,s||0,r||0,o||0);if("UTC"!==this.timezone){let e=this.getTimezoneOffset(a);if(a+=e,-1!==[2,3,8,9,10,11].indexOf(t)&&(n<5||n>20)){let t=this.getTimezoneOffset(a);e!==t?a+=t-e:e-36e5!==this.getTimezoneOffset(a-36e5)||he||(a-=36e5)}}return a}parse(e){if(!ne(e))return null!==e&&void 0!==e?e:void 0;let t=(e=e.replace(/\//g,"-").replace(/(GMT|UTC)/,"")).indexOf("Z")>-1||/([+-][0-9]{2}):?[0-9]{2}$/.test(e),i=/^[0-9]{4}-[0-9]{2}(-[0-9]{2}|)$/.test(e);t||i||(e+="Z");let n=Date.parse(e);return te(n)?n+(!t||i?this.getTimezoneOffset(n):0):void 0}getTimezoneOffset(e){if("UTC"!==this.timezone){let[t,i,n,s,r=0]=this.dateTimeFormat({timeZoneName:"shortOffset"},e,"en").split(/(GMT|:)/).map(Number),o=-60*(n+r/60)*6e4;if(te(o))return o}return 0}dateFormat(e,t,i){let n=this.lang;if(!Q(t)||isNaN(t))return(null===n||void 0===n?void 0:n.invalidDate)||"";if(ne(e=null!==e&&void 0!==e?e:"%Y-%m-%d %H:%M:%S")){let i,s=/%\[([a-zA-Z]+)\]/g;for(;i=s.exec(e);)e=e.replace(i[0],this.dateTimeFormat(i[1],t,null===n||void 0===n?void 0:n.locale))}if(ne(e)&&-1!==e.indexOf("%")){var s;let i=this,[r,o,a,l,c,h,u,d]=this.toParts(t),f=(null===n||void 0===n?void 0:n.weekdays)||this.weekdays,p=(null===n||void 0===n?void 0:n.shortWeekdays)||this.shortWeekdays,m=(null===n||void 0===n?void 0:n.months)||this.months,g=(null===n||void 0===n?void 0:n.shortMonths)||this.shortMonths;re(ee({a:p?p[d]:f[d].substr(0,3),A:f[d],d:oe(a),e:oe(a,2," "),w:d,v:null!==(s=null===n||void 0===n?void 0:n.weekFrom)&&void 0!==s?s:"",b:g[o],B:m[o],m:oe(o+1),o:o+1,y:r.toString().substr(2,2),Y:r,H:oe(l),k:l,I:oe(l%12||12),l:l%12||12,M:oe(c),p:l<12?"AM":"PM",P:l<12?"am":"pm",S:oe(h),L:oe(u,3)},T.dateFormats),(function(n,s){if(ne(e))for(;-1!==e.indexOf("%"+s);)e=e.replace("%"+s,"function"==typeof n?n.call(i,t):n)}))}else if(ie(e)){let i=(this.getTimezoneOffset(t)||0)/36e5,n=this.timezone||"Etc/GMT"+(i>=0?"+":"")+i,{prefix:s="",suffix:r=""}=e;e=s+this.dateTimeFormat(ee({timeZone:n},e),t)+r}return i?ce(e):e}resolveDTLFormat(e){return ie(e,!0)?ie(e,!0)&&(e=>void 0===e.main)(e)?{main:e}:e:{main:(e=ae(e))[0],from:e[1],to:e[2]}}getDateFormat(e,t,i,n){let s=this.dateFormat("%m-%d %H:%M:%S.%L",t),r="01-01 00:00:00.000",o={millisecond:15,second:12,minute:9,hour:6,day:3},a="millisecond",l=a;for(a in le){if(e&&e===le.week&&+this.dateFormat("%w",t)===i&&s.substr(6)===r.substr(6)){a="week";break}if(e&&le[a]>e){a=l;break}if(o[a]&&s.substr(o[a])!==r.substr(o[a]))break;"week"!==a&&(l=a)}return this.resolveDTLFormat(n[a]).main}},{defined:de,extend:fe,timeUnits:pe}=q,me=class extends ue{getTimeTicks(e,t,i,n){let s,r=this,o=[],a={},{count:l=1,unitRange:c}=e,[h,u,d,f,p,m]=r.toParts(t),g=(t||0)%1e3;if(null!==n&&void 0!==n||(n=1),de(t)){if(g=c>=pe.second?0:l*Math.floor(g/l),c>=pe.second&&(m=c>=pe.minute?0:l*Math.floor(m/l)),c>=pe.minute&&(p=c>=pe.hour?0:l*Math.floor(p/l)),c>=pe.hour&&(f=c>=pe.day?0:l*Math.floor(f/l)),c>=pe.day&&(d=c>=pe.month?1:Math.max(1,l*Math.floor(d/l))),c>=pe.month&&(u=c>=pe.year?0:l*Math.floor(u/l)),c>=pe.year&&(h-=h%l),c===pe.week){l&&(t=r.makeTime(h,u,d,f,p,m,g));let e=this.dateTimeFormat({timeZone:this.timezone,weekday:"narrow"},t,"es"),i="DLMXJVS".indexOf(e);d+=-i+n+(i<n?-7:0)}t=r.makeTime(h,u,d,f,p,m,g),r.variableTimezone&&de(i)&&(s=i-t>4*pe.month||r.getTimezoneOffset(t)!==r.getTimezoneOffset(i));let e=t,b=1;for(;e<i;)o.push(e),c===pe.year?e=r.makeTime(h+b*l,0):c===pe.month?e=r.makeTime(h,u+b*l):!s||c!==pe.day&&c!==pe.week?s&&c===pe.hour&&l>1?e=r.makeTime(h,u,d,f+b*l):e+=c*l:e=r.makeTime(h,u,d+b*l*(c===pe.day?1:7)),b++;o.push(e),c<=pe.hour&&o.length<1e4&&o.forEach((e=>{e%18e5==0&&"000000000"===r.dateFormat("%H%M%S%L",e)&&(a[e]="day")}))}return o.info=fe(e,{higherRanks:a,totalRange:c*l}),o}},{isTouchDevice:ge}=T,{fireEvent:be,merge:ve}=q,ye={colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{weekFrom:"week from",chartTitle:"Chart title",locale:void 0,loading:"Loading...",months:void 0,seriesName:"Series {add index 1}",shortMonths:void 0,weekdays:void 0,numericSymbols:["k","M","G","T","P","E"],pieSliceName:"Slice",resetZoom:"Reset zoom",yAxisTitle:"Values",resetZoomTitle:"Reset zoom level 1:1"},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,timezone:"UTC",timezoneOffset:0,useUTC:void 0},chart:{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",margin:15,minScale:.67},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:""},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{color:"#333333",fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:e=>Math.sqrt(1-Math.pow(e-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%[AebHMSL]",second:"%[AebHMS]",minute:"%[AebHM]",hour:"%[AebHM]",day:"%[AebY]",week:"%v %[AebY]",month:"%[BY]",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,position:{x:0,y:3},shared:!1,snap:ge?25:10,headerFormat:'<span style="font-size: 0.8em">{ucfirst point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}},xe=new me(ye.time,ye.lang),Se={defaultOptions:ye,defaultTime:xe,getOptions:function(){return ye},setOptions:function(e){var t;return be(T,"setOptions",{options:e}),ve(!0,ye,e),e.time&&xe.update(ye.time),e.lang&&"locale"in e.lang&&xe.update({locale:e.lang.locale}),null!==(t=e.lang)&&void 0!==t&&t.chartTitle&&(ye.title=r(r({},ye.title),{},{text:e.lang.chartTitle})),ye}},{win:Ee}=T,{isNumber:we,isString:Te,merge:_e,pInt:Me,defined:Pe}=q,Ce=(e,t,i)=>"color-mix(in srgb,".concat(e,",").concat(t," ").concat(100*i,"%)"),Ae=e=>Te(e)&&!!e&&"none"!==e;class Ne{static parse(e){return e?new Ne(e):Ne.None}constructor(e){let t,i,n,s;this.rgba=[NaN,NaN,NaN,NaN],this.input=e;let r=T.Color;if(r&&r!==Ne)return new r(e);if("object"==typeof e&&void 0!==e.stops)this.stops=e.stops.map((e=>new Ne(e[1])));else if("string"==typeof e)for(this.input=e=Ne.names[e.toLowerCase()]||e,n=Ne.parsers.length;n--&&!i;)(t=(s=Ne.parsers[n]).regex.exec(e))&&(i=s.parse(t));i&&(this.rgba=i)}get(e){let t=this.input,i=this.rgba;if(this.output)return this.output;if("object"==typeof t&&void 0!==this.stops){let i=_e(t);return i.stops=[].slice.call(i.stops),this.stops.forEach(((t,n)=>{i.stops[n]=[i.stops[n][0],t.get(e)]})),i}return i&&we(i[0])?"rgb"===e||!e&&1===i[3]?"rgb("+i[0]+","+i[1]+","+i[2]+")":"a"===e?"".concat(i[3]):"rgba("+i.join(",")+")":t}brighten(e){let t=this.rgba;if(this.stops)this.stops.forEach((function(t){t.brighten(e)}));else if(we(e)&&0!==e)if(we(t[0]))for(let i=0;i<3;i++)t[i]+=Me(255*e),t[i]<0&&(t[i]=0),t[i]>255&&(t[i]=255);else Ne.useColorMix&&Ae(this.input)&&(this.output=Ce(this.input,e>0?"white":"black",Math.abs(e)));return this}setOpacity(e){return this.rgba[3]=e,this}tweenTo(e,t){let i=this.rgba,n=e.rgba;if(!we(i[0])||!we(n[0]))return Ne.useColorMix&&Ae(this.input)&&Ae(e.input)&&t<.99?Ce(this.input,e.input,t):e.input||"none";let s=1!==n[3]||1!==i[3],r=(e,n)=>e+(i[n]-e)*(1-t),o=n.slice(0,3).map(r).map(Math.round);return s&&o.push(r(n[3],3)),(s?"rgba(":"rgb(")+o.join(",")+")"}}Ne.names={white:"#ffffff",black:"#000000"},Ne.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(e){return[Me(e[1]),Me(e[2]),Me(e[3]),parseFloat(e[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(e){return[Me(e[1]),Me(e[2]),Me(e[3]),1]}},{regex:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?$/i,parse:function(e){return[Me(e[1]+e[1],16),Me(e[2]+e[2],16),Me(e[3]+e[3],16),Pe(e[4])?Me(e[4]+e[4],16)/255:1]}},{regex:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?$/i,parse:function(e){return[Me(e[1],16),Me(e[2],16),Me(e[3],16),Pe(e[4])?Me(e[4],16)/255:1]}}],Ne.useColorMix=null===(e=Ee.CSS)||void 0===e?void 0:e.supports("color","color-mix(in srgb,red,blue 9%)"),Ne.None=new Ne("");let{parse:Le}=Ne,{win:ke}=T,{isNumber:Ie,objectEach:Re}=q;class Oe{constructor(e,t,i){this.pos=NaN,this.options=t,this.elem=e,this.prop=i}dSetter(){let e=this.paths,t=null===e||void 0===e?void 0:e[0],i=null===e||void 0===e?void 0:e[1],n=this.now||0,s=[];if(1!==n&&t&&i)if(t.length===i.length&&n<1)for(let r=0;r<i.length;r++){let e=t[r],o=i[r],a=[];for(let t=0;t<o.length;t++){let i=e[t],s=o[t];Ie(i)&&Ie(s)&&("A"!==o[0]||4!==t&&5!==t)?a[t]=i+n*(s-i):a[t]=s}s.push(a)}else s=i;else s=this.toD||[];this.elem.attr("d",s,void 0,!0)}update(){let e=this.elem,t=this.prop,i=this.now,n=this.options.step;this[t+"Setter"]?this[t+"Setter"]():e.attr?e.element&&e.attr(t,i,null,!0):e.style[t]=i+this.unit,n&&n.call(e,i,this)}run(e,t,i){let n=this,s=n.options,r=function(e){return!r.stopped&&n.step(e)},o=ke.requestAnimationFrame||function(e){setTimeout(e,13)},a=function(){for(let e=0;e<Oe.timers.length;e++)Oe.timers[e]()||Oe.timers.splice(e--,1);Oe.timers.length&&o(a)};e!==t||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=e,this.end=t,this.unit=i,this.now=this.start,this.pos=0,r.elem=this.elem,r.prop=this.prop,r()&&1===Oe.timers.push(r)&&o(a)):(delete s.curAnim[this.prop],s.complete&&0===Object.keys(s.curAnim).length&&s.complete.call(this.elem))}step(e){let t,i,n=+new Date,s=this.options,r=this.elem,o=s.complete,a=s.duration,l=s.curAnim;return r.attr&&!r.element?t=!1:e||n>=a+this.startTime?(this.now=this.end,this.pos=1,this.update(),l[this.prop]=!0,i=!0,Re(l,(function(e){!0!==e&&(i=!1)})),i&&o&&o.call(r),t=!1):(this.pos=s.easing((n-this.startTime)/a),this.now=this.start+(this.end-this.start)*this.pos,this.update(),t=!0),t}initPath(e,t,i){let n,s,r,o,a=e.startX,l=e.endX,c=i.slice(),h=e.isArea,u=h?2:1,d=t&&i.length>t.length&&i.hasStackedCliffs,f=null===t||void 0===t?void 0:t.slice();if(!f||d)return[c,c];function p(e,t){for(;e.length<s;){let i=e[0],n=t[s-e.length];if(n&&"M"===i[0]&&("C"===n[0]?e[0]=["C",i[1],i[2],i[1],i[2],i[1],i[2]]:e[0]=["L",i[1],i[2]]),e.unshift(i),h){let t=e.pop();e.push(e[e.length-1],t)}}}function m(e){for(;e.length<s;){let t=e[Math.floor(e.length/u)-1].slice();if("C"===t[0]&&(t[1]=t[5],t[2]=t[6]),h){let i=e[Math.floor(e.length/u)].slice();e.splice(e.length/2,0,t,i)}else e.push(t)}}if(a&&l&&l.length){for(r=0;r<a.length;r++){if(a[r]===l[0]){n=r;break}if(a[0]===l[l.length-a.length+r]){n=r,o=!0;break}if(a[a.length-1]===l[l.length-a.length+r]){n=a.length-r;break}}void 0===n&&(f=[])}return f.length&&Ie(n)&&(s=c.length+n*u,o?(p(f,c),m(c)):(p(c,f),m(f))),[f,c]}fillSetter(){Oe.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,Le(this.start).tweenTo(Le(this.end),this.pos),void 0,!0)}}Oe.timers=[];let{defined:De,getStyle:Be,isArray:Fe,isNumber:Ve,isObject:je,merge:Ge,objectEach:We,pick:ze}=q;function Ue(e){return je(e)?Ge({duration:500,defer:0},e):{duration:500*!!e,defer:0}}function He(e,t){let i=Oe.timers.length;for(;i--;)Oe.timers[i].elem!==e||t&&t!==Oe.timers[i].prop||(Oe.timers[i].stopped=!0)}let Xe={animate:function(e,t,i){let n,s,r,o,a="";je(i)||(o=arguments,i={duration:o[2],easing:o[3],complete:o[4]}),Ve(i.duration)||(i.duration=400),i.easing="function"==typeof i.easing?i.easing:Math[i.easing]||Math.easeInOutSine,i.curAnim=Ge(t),We(t,(function(o,l){He(e,l),r=new Oe(e,i,l),s=void 0,"d"===l&&Fe(t.d)?(r.paths=r.initPath(e,e.pathArray,t.d),r.toD=t.d,n=0,s=1):e.attr?n=e.attr(l):(n=parseFloat(Be(e,l))||0,"opacity"!==l&&(a="px")),s||(s=o),"string"==typeof s&&s.match("px")&&(s=s.replace(/px/g,"")),r.run(n,s,a)}))},animObject:Ue,getDeferredAnimation:function(e,t,i){let n=Ue(t),s=i?[i]:e.series,r=0,o=0;return s.forEach((e=>{let i=Ue(e.options.animation);r=je(t)&&De(t.defer)?n.defer:Math.max(r,i.duration+i.defer),o=Math.min(n.duration,i.duration)})),e.renderer.forExport&&(r=0),{defer:Math.max(0,r-o),duration:Math.min(r,o)}},setAnimation:function(e,t){t.renderer.globalAnimation=ze(e,t.options.chart.animation,!0)},stop:He},{SVG_NS:Ye,win:Ke}=T,{attr:qe,createElement:$e,css:Ze,error:Qe,isFunction:Je,isString:et,objectEach:tt,splat:it}=q,{trustedTypes:nt}=Ke,st=nt&&Je(nt.createPolicy)&&nt.createPolicy("highcharts",{createHTML:e=>e}),rt=st?st.createHTML(""):"";class ot{static filterUserAttributes(e){return tt(e,((t,i)=>{let n=!0;-1===ot.allowedAttributes.indexOf(i)&&(n=!1),-1!==["background","dynsrc","href","lowsrc","src"].indexOf(i)&&(n=et(t)&&ot.allowedReferences.some((e=>0===t.indexOf(e)))),n||(Qe(33,!1,void 0,{"Invalid attribute in config":"".concat(i)}),delete e[i]),et(t)&&e[i]&&(e[i]=t.replace(/</g,"&lt;"))})),e}static parseStyle(e){return e.split(";").reduce(((e,t)=>{let i=t.split(":").map((e=>e.trim())),n=i.shift();return n&&i.length&&(e[n.replace(/-([a-z])/g,(e=>e[1].toUpperCase()))]=i.join(":")),e}),{})}static setElementHTML(e,t){e.innerHTML=ot.emptyHTML,t&&new ot(t).addToDOM(e)}constructor(e){this.nodes="string"==typeof e?this.parseMarkup(e):e}addToDOM(e){return function e(t,i){let n;return it(t).forEach((function(t){let s,r=t.tagName,o=t.textContent?T.doc.createTextNode(t.textContent):void 0,a=ot.bypassHTMLFiltering;if(r)if("#text"===r)s=o;else if(-1!==ot.allowedTags.indexOf(r)||a){let n="svg"===r?Ye:i.namespaceURI||Ye,l=T.doc.createElementNS(n,r),c=t.attributes||{};tt(t,(function(e,t){"tagName"!==t&&"attributes"!==t&&"children"!==t&&"style"!==t&&"textContent"!==t&&(c[t]=e)})),qe(l,a?c:ot.filterUserAttributes(c)),t.style&&Ze(l,t.style),o&&l.appendChild(o),e(t.children||[],l),s=l}else Qe(33,!1,void 0,{"Invalid tagName in config":r});s&&i.appendChild(s),n=s})),n}(this.nodes,e)}parseMarkup(e){let t,i=[];e=e.trim().replace(/ style=(["'])/g," data-style=$1");try{t=(new DOMParser).parseFromString(st?st.createHTML(e):e,"text/html")}catch(s){}if(!t){let i=$e("div");i.innerHTML=e,t={body:i}}let n=(e,t)=>{let i=e.nodeName.toLowerCase(),s={tagName:i};"#text"===i&&(s.textContent=e.textContent||"");let r=e.attributes;if(r){let e={};[].forEach.call(r,(t=>{"data-style"===t.name?s.style=ot.parseStyle(t.value):e[t.name]=t.value})),s.attributes=e}if(e.childNodes.length){let t=[];[].forEach.call(e.childNodes,(e=>{n(e,t)})),t.length&&(s.children=t)}t.push(s)};return[].forEach.call(t.body.childNodes,(e=>n(e,i))),i}}ot.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","disabled","dx","dy","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","result","role","rowspan","scope","slope","src","startOffset","stdDeviation","stroke-linecap","stroke-width","stroke","style","summary","tabindex","tableValues","target","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],ot.allowedReferences=["https://","http://","mailto:","/","../","./","#"],ot.allowedTags=["#text","a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","tbody","td","text","textPath","th","thead","title","tr","tspan","u","ul"],ot.emptyHTML=rt,ot.bypassHTMLFiltering=!1;let{defaultOptions:at,defaultTime:lt}=Se,{pageLang:ct}=T,{extend:ht,getNestedProperty:ut,isArray:dt,isNumber:ft,isObject:pt,isString:mt,pick:gt,ucfirst:bt}=q,vt={add:(e,t)=>e+t,divide:(e,t)=>0!==t?e/t:"",eq:(e,t)=>e==t,each:function(e){let t=arguments[arguments.length-1];return!!dt(e)&&e.map(((i,n)=>St(t.body,ht(pt(i)?i:{"@this":i},{"@index":n,"@first":0===n,"@last":n===e.length-1})))).join("")},ge:(e,t)=>e>=t,gt:(e,t)=>e>t,if:e=>!!e,le:(e,t)=>e<=t,lt:(e,t)=>e<t,multiply:(e,t)=>e*t,ne:(e,t)=>e!=t,subtract:(e,t)=>e-t,ucfirst:bt,unless:e=>!e},yt={},xt=e=>/^["'].+["']$/.test(e);function St(){var e;let t,i,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,a=/\{([a-zA-Z\u00C0-\u017F\d:\.,;\-\/<>\[\]%_@+"'\u2019= #\(\)]+)\}/g,l=/\(([a-zA-Z\u00C0-\u017F\d:\.,;\-\/<>\[\]%_@+"'= ]+)\)/g,c=[],h=/f$/,u=/\.(\d)/,d=(null===o||void 0===o||null===(e=o.options)||void 0===e?void 0:e.lang)||at.lang,f=(null===o||void 0===o?void 0:o.time)||lt,p=(null===o||void 0===o?void 0:o.numberFormatter)||Et.bind(o),m=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"true"===t||"false"!==t&&((e=Number(t)).toString()===t?e:xt(t)?t.slice(1,-1):ut(t,r))},g=0;for(;null!==(t=a.exec(s));){var b,v;let e=t,o=l.exec(t[1]);o&&(t=o,n=!0),(null===(b=i)||void 0===b?void 0:b.isBlock)||(i={ctx:r,expression:t[1],find:t[0],isBlock:"#"===t[1].charAt(0),start:t.index,startInner:t.index+t[0].length,length:t[0].length});let a=(i.isBlock?e:t)[1].split(" ")[0].replace("#","");vt[a]&&(i.isBlock&&a===i.fn&&g++,i.fn||(i.fn=a));let h="else"===t[1];if(i.isBlock&&i.fn&&(t[1]==="/".concat(i.fn)||h))if(g)!h&&g--;else{let e=i.startInner,n=s.substr(e,t.index-e);void 0===i.body?(i.body=n,i.startInner=t.index+t[0].length):i.elseBody=n,i.find+=n+t[0],h||(c.push(i),i=void 0)}else i.isBlock||c.push(i);if(o&&(null===(v=i)||void 0===v||!v.isBlock))break}return c.forEach((e=>{let t,i,{body:n,elseBody:a,expression:c,fn:g}=e;if(g){let s,l=[e],h=[],u=c.length,d=0;for(i=0;i<=u;i++){let e=c.charAt(i);s||'"'!==e&&"'"!==e?s===e&&(s=""):s=e,s||" "!==e&&i!==u||(h.push(c.substr(d,i-d)),d=i+1)}for(i=vt[g].length;i--;)l.unshift(m(h[i+1]));t=vt[g].apply(r,l),e.isBlock&&"boolean"==typeof t&&(t=St(t?n:a,r,o))}else{let i=xt(c)?[c]:c.split(":"),n=(t=m(i.shift()||""))%1!=0;if("number"==typeof t&&(i.length||n)){let e=i.join(":");if(h.test(e)||n){let i=parseInt((e.match(u)||["","-1"])[1],10);null!==t&&(t=p(t,i,d.decimalPoint,e.indexOf(",")>-1?d.thousandsSep:""))}else t=f.dateFormat(e,t)}l.lastIndex=0,l.test(e.find)&&mt(t)&&(t='"'.concat(t,'"'))}s=s.replace(e.find,gt(t,""))})),n?St(s,r,o):s}function Et(e,t,i,n){var s,r;t*=1;let o,a,[l,c]=(e=+e||0).toString().split("e").map(Number),h=(null===this||void 0===this||null===(s=this.options)||void 0===s?void 0:s.lang)||at.lang,u=(e.toString().split(".")[1]||"").split("e")[0].length,d=t,f={};null!==i&&void 0!==i||(i=h.decimalPoint),null!==n&&void 0!==n||(n=h.thousandsSep),-1===t?t=Math.min(u,20):ft(t)?t&&c<0&&((a=t+c)>=0?(l=+l.toExponential(a).split("e")[0],t=a):(l=Math.floor(l),e=t<20?+(l*Math.pow(10,c)).toFixed(t):0,c=0)):t=2,c&&(null!==t&&void 0!==t||(t=2),e=l),ft(t)&&t>=0&&(f.minimumFractionDigits=t,f.maximumFractionDigits=t),""===n&&(f.useGrouping=!1);let p=n||i,m=p?"en":(null===this||void 0===this?void 0:this.locale)||h.locale||ct,g=JSON.stringify(f)+m;return o=(null!==(r=yt[g])&&void 0!==r?r:yt[g]=new Intl.NumberFormat(m,f)).format(e),p&&(o=o.replace(/([,\.])/g,"_$1").replace(/_\,/g,null!==n&&void 0!==n?n:",").replace("_.",null!==i&&void 0!==i?i:".")),(t||0!=+o)&&(!(c<0)||d)||(o="0"),c&&0!=+o&&(o+="e"+(c<0?"":"+")+c),o}let wt={dateFormat:function(e,t,i){return lt.dateFormat(e,t,i)},format:St,helpers:vt,numberFormat:Et};!function(e){let t;e.rendererTypes={},e.getRendererType=function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return e.rendererTypes[i]||e.rendererTypes[t]},e.registerRendererType=function(i,n,s){e.rendererTypes[i]=n,(!t||s)&&(t=i,T.Renderer=n)}}(s||(s={}));let Tt=s,{clamp:_t,pick:Mt,pushUnique:Pt,stableSort:Ct}=q;(o||(o={})).distribute=function e(t,i,n){let s,r,o,a,l,c,h=t,u=h.reducedLen||i,d=(e,t)=>e.target-t.target,f=[],p=t.length,m=[],g=f.push,b=!0,v=0;for(s=p;s--;)v+=t[s].size;if(v>u){for(Ct(t,((e,t)=>(t.rank||0)-(e.rank||0))),o=(c=t[0].rank===t[t.length-1].rank)?p/2:-1,r=c?o:p-1;o&&v>u;)a=t[s=Math.floor(r)],Pt(m,s)&&(v-=a.size),r+=o,c&&r>=t.length&&(o/=2,r=o);m.sort(((e,t)=>t-e)).forEach((e=>g.apply(f,t.splice(e,1))))}for(Ct(t,d),t=t.map((e=>({size:e.size,targets:[e.target],align:Mt(e.align,.5)})));b;){for(s=t.length;s--;)a=t[s],l=(Math.min.apply(0,a.targets)+Math.max.apply(0,a.targets))/2,a.pos=_t(l-a.size*a.align,0,i-a.size);for(s=t.length,b=!1;s--;)s>0&&t[s-1].pos+t[s-1].size>t[s].pos&&(t[s-1].size+=t[s].size,t[s-1].targets=t[s-1].targets.concat(t[s].targets),t[s-1].align=.5,t[s-1].pos+t[s-1].size>i&&(t[s-1].pos=i-t[s-1].size),t.splice(s,1),b=!0)}return g.apply(h,f),s=0,t.some((t=>{let r=0;return(t.targets||[]).some((()=>(h[s].pos=t.pos+r,void 0!==n&&Math.abs(h[s].pos-h[s].target)>n?(h.slice(0,s+1).forEach((e=>delete e.pos)),h.reducedLen=(h.reducedLen||i)-.1*i,h.reducedLen>.1*i&&e(h,i,n),!0):(r+=h[s].size,s++,!1))))})),Ct(h,d),h};let At=o,{animate:Nt,animObject:Lt,stop:kt}=Xe,{deg2rad:It,doc:Rt,svg:Ot,SVG_NS:Dt,win:Bt,isFirefox:Ft}=T,{addEvent:Vt,attr:jt,createElement:Gt,crisp:Wt,css:zt,defined:Ut,erase:Ht,extend:Xt,fireEvent:Yt,getAlignFactor:Kt,isArray:qt,isFunction:$t,isNumber:Zt,isObject:Qt,isString:Jt,merge:ei,objectEach:ti,pick:ii,pInt:ni,pushUnique:si,replaceNested:ri,syncTimeout:oi,uniqueKey:ai}=q;class li{_defaultGetter(e){let t=ii(this[e+"Value"],this[e],this.element?this.element.getAttribute(e):null,0);return/^-?[\d\.]+$/.test(t)&&(t=parseFloat(t)),t}_defaultSetter(e,t,i){i.setAttribute(t,e)}add(e){let t,i=this.renderer,n=this.element;return e&&(this.parentGroup=e),void 0!==this.textStr&&"text"===this.element.nodeName&&i.buildText(this),this.added=!0,(!e||e.handleZ||this.zIndex)&&(t=this.zIndexSetter()),t||(e?e.element:i.box).appendChild(n),this.onAdd&&this.onAdd(),this}addClass(e,t){let i=t?"":this.attr("class")||"";return(e=(e||"").split(/ /g).reduce((function(e,t){return-1===i.indexOf(t)&&e.push(t),e}),i?[i]:[]).join(" "))!==i&&this.attr("class",e),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(e,t,i){var n;let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=this.renderer,o=r.alignedObjects,a=!!e;e?(this.alignOptions=e,this.alignByTranslate=t,this.alignTo=i):(e=this.alignOptions||{},t=this.alignByTranslate,i=this.alignTo);let l=!i||Jt(i)?i||"renderer":void 0;l&&(a&&si(o,this),i=void 0);let c=ii(i,r[l],r),h=(c.x||0)+(e.x||0)+((c.width||0)-(e.width||0))*Kt(e.align),u=(c.y||0)+(e.y||0)+((c.height||0)-(e.height||0))*Kt(e.verticalAlign),d={"text-align":null===(n=e)||void 0===n?void 0:n.align};return d[t?"translateX":"x"]=Math.round(h),d[t?"translateY":"y"]=Math.round(u),s&&(this[this.placed?"animate":"attr"](d),this.placed=!0),this.alignAttr=d,this}alignSetter(e){let t={left:"start",center:"middle",right:"end"};t[e]&&(this.alignValue=e,this.element.setAttribute("text-anchor",t[e]))}animate(e,t,i){let n=Lt(ii(t,this.renderer.globalAnimation,!0)),s=n.defer;return Rt.hidden&&(n.duration=0),0!==n.duration?(i&&(n.complete=i),oi((()=>{this.element&&Nt(this,e,n)}),s)):(this.attr(e,void 0,i||n.complete),ti(e,(function(e,t){n.step&&n.step.call(this,e,{prop:t,pos:1,elem:this})}),this)),this}applyTextOutline(e){let t=this.element;-1!==e.indexOf("contrast")&&(e=e.replace(/contrast/g,this.renderer.getContrast(t.style.fill)));let i=e.indexOf(" "),n=e.substring(i+1),s=e.substring(0,i);if(s&&"none"!==s&&T.svg){this.fakeTS=!0,s=s.replace(/(^[\d\.]+)(.*?)$/g,(function(e,t,i){return 2*Number(t)+i})),this.removeTextOutline();let e=Rt.createElementNS(Dt,"tspan");jt(e,{class:"highcharts-text-outline",fill:n,stroke:n,"stroke-width":s,"stroke-linejoin":"round"});let i=t.querySelector("textPath")||t;[].forEach.call(i.childNodes,(t=>{let i=t.cloneNode(!0);i.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach((e=>i.removeAttribute(e))),e.appendChild(i)}));let r=0;[].forEach.call(i.querySelectorAll("text tspan"),(e=>{r+=Number(e.getAttribute("dy"))}));let o=Rt.createElementNS(Dt,"tspan");o.textContent="\u200b",jt(o,{x:Number(t.getAttribute("x")),dy:-r}),e.appendChild(o),i.insertBefore(e,i.firstChild)}}attr(e,t,i,n){let s,r,o,{element:a}=this,l=li.symbolCustomAttribs,c=this;return"string"==typeof e&&void 0!==t&&(s=e,(e={})[s]=t),"string"==typeof e?c=(this[e+"Getter"]||this._defaultGetter).call(this,e,a):(ti(e,(function(t,i){o=!1,n||kt(this,i),this.symbolName&&-1!==l.indexOf(i)&&(r||(this.symbolAttr(e),r=!0),o=!0),this.rotation&&("x"===i||"y"===i)&&(this.doTransform=!0),o||(this[i+"Setter"]||this._defaultSetter).call(this,t,i,a)}),this),this.afterSetters()),i&&i.call(this),c}clip(e){if(e&&!e.clipPath){let t=ai()+"-",i=this.renderer.createElement("clipPath").attr({id:t}).add(this.renderer.defs);Xt(e,{clipPath:i,id:t,count:0}),e.add(i)}return this.attr("clip-path",e?"url(".concat(this.renderer.url,"#").concat(e.id,")"):"none")}crisp(e,t){t=Math.round(t||e.strokeWidth||0);let i=e.x||this.x||0,n=e.y||this.y||0,s=(e.width||this.width||0)+i,r=(e.height||this.height||0)+n,o=Wt(i,t),a=Wt(n,t);return Xt(e,{x:o,y:a,width:Wt(s,t)-o,height:Wt(r,t)-a}),Ut(e.strokeWidth)&&(e.strokeWidth=t),e}complexColor(e,t,i){let n,s,r,o,a,l,c,h,u,d,f,p=this.renderer,m=[];Yt(this.renderer,"complexColor",{args:arguments},(function(){if(e.radialGradient?s="radialGradient":e.linearGradient&&(s="linearGradient"),s){if(r=e[s],a=p.gradients,l=e.stops,u=i.radialReference,qt(r)&&(e[s]=r={x1:r[0],y1:r[1],x2:r[2],y2:r[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===s&&u&&!Ut(r.gradientUnits)&&(o=r,r=ei(r,p.getRadialAttr(u,o),{gradientUnits:"userSpaceOnUse"})),ti(r,(function(e,t){"id"!==t&&m.push(t,e)})),ti(l,(function(e){m.push(e)})),a[m=m.join(",")])d=a[m].attr("id");else{r.id=d=ai();let e=a[m]=p.createElement(s).attr(r).add(p.defs);e.radAttr=o,e.stops=[],l.forEach((function(t){0===t[1].indexOf("rgba")?(c=(n=Ne.parse(t[1])).get("rgb"),h=n.get("a")):(c=t[1],h=1);let i=p.createElement("stop").attr({offset:t[0],"stop-color":c,"stop-opacity":h}).add(e);e.stops.push(i)}))}f="url("+p.url+"#"+d+")",i.setAttribute(t,f),i.gradient=m,e.toString=function(){return f}}}))}css(e){let t,i=this.styles,n={},s=this.element,r=!i;if(i&&ti(e,(function(e,t){i&&i[t]!==e&&(n[t]=e,r=!0)})),r){i&&(e=Xt(i,n)),null===e.width||"auto"===e.width?delete this.textWidth:"text"===s.nodeName.toLowerCase()&&e.width&&(t=this.textWidth=ni(e.width)),Xt(this.styles,e),t&&!Ot&&this.renderer.forExport&&delete e.width;let r=Ft&&e.fontSize||null;r&&(Zt(r)||/^\d+$/.test(r))&&(e.fontSize+="px");let o=ei(e);s.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","whiteSpace","width"].forEach((e=>o&&delete o[e])),o.color&&(o.fill=o.color,delete o.color)),zt(s,o)}return this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),e.textOutline&&this.applyTextOutline(e.textOutline)),this}dashstyleSetter(e){let t,i=this["stroke-width"];if("inherit"===i&&(i=1),e){let n=(e=e.toLowerCase()).replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(t=n.length;t--;)n[t]=""+ni(n[t])*ii(i,NaN);e=n.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",e)}}destroy(){let e,t,i=this,n=i.element||{},s=i.renderer,r=n.ownerSVGElement,o="SPAN"===n.nodeName&&i.parentGroup||void 0;if(n.onclick=n.onmouseout=n.onmouseover=n.onmousemove=n.point=null,kt(i),i.clipPath&&r){let e=i.clipPath;[].forEach.call(r.querySelectorAll("[clip-path],[CLIP-PATH]"),(function(t){t.getAttribute("clip-path").indexOf(e.element.id)>-1&&t.removeAttribute("clip-path")})),i.clipPath=e.destroy()}if(i.stops){for(t=0;t<i.stops.length;t++)i.stops[t].destroy();i.stops.length=0,i.stops=void 0}for(i.safeRemoveChild(n);null!==(a=o)&&void 0!==a&&a.div&&0===o.div.childNodes.length;){var a;e=o.parentGroup,i.safeRemoveChild(o.div),delete o.div,o=e}i.alignOptions&&Ht(s.alignedObjects,i),ti(i,((e,t)=>{var n,s,r;((null===(n=i[t])||void 0===n?void 0:n.parentGroup)===i||-1!==["connector","foreignObject"].indexOf(t))&&null!==(s=i[t])&&void 0!==s&&null!==(r=s.destroy)&&void 0!==r&&r.call(s),delete i[t]}))}dSetter(e,t,i){qt(e)&&("string"==typeof e[0]&&(e=this.renderer.pathToSegments(e)),this.pathArray=e,e=e.reduce(((e,t,i)=>null!==t&&void 0!==t&&t.join?(i?e+" ":"")+t.join(" "):(t||"").toString()),"")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),this[t]!==e&&(i.setAttribute(t,e),this[t]=e)}fillSetter(e,t,i){"string"==typeof e?i.setAttribute(t,e):e&&this.complexColor(e,t,i)}hrefSetter(e,t,i){i.setAttributeNS("http://www.w3.org/1999/xlink",t,e)}getBBox(e,t){let i,n,s,r,{alignValue:o,element:a,renderer:l,styles:c,textStr:h}=this,{cache:u,cacheKeys:d}=l,f=a.namespaceURI===this.SVG_NS,p=ii(t,this.rotation,0),m=l.styledMode?a&&li.prototype.getStyle.call(a,"font-size"):c.fontSize;if(Ut(h)&&(-1===(r=h.toString()).indexOf("<")&&(r=r.replace(/\d/g,"0")),r+=["",l.rootFontSize,m,p,this.textWidth,o,c.lineClamp,c.textOverflow,c.fontWeight].join(",")),r&&!e&&(i=u[r]),!i||i.polygon){if(f||l.forExport){try{s=this.fakeTS&&function(e){let t=a.querySelector(".highcharts-text-outline");t&&zt(t,{display:e})},$t(s)&&s("none"),i=a.getBBox?Xt({},a.getBBox()):{width:a.offsetWidth,height:a.offsetHeight,x:0,y:0},$t(s)&&s("")}catch(g){}(!i||i.width<0)&&(i={x:0,y:0,width:0,height:0})}else i=this.htmlGetBBox();n=i.height,f&&(i.height=n={"11px,17":14,"13px,20":16}["".concat(m||"",",").concat(Math.round(n))]||n),p&&(i=this.getRotatedBox(i,p));let e={bBox:i};Yt(this,"afterGetBBox",e),i=e.bBox}if(r&&(""===h||i.height>0)){for(;d.length>250;)delete u[d.shift()];u[r]||d.push(r),u[r]=i}return i}getRotatedBox(e,t){let{x:i,y:n,width:s,height:r}=e,{alignValue:o,translateY:a,rotationOriginX:l=0,rotationOriginY:c=0}=this,h=Kt(o),u=Number(this.element.getAttribute("y")||0)-(a?0:n),d=t*It,f=(t-90)*It,p=Math.cos(d),m=Math.sin(d),g=s*p,b=s*m,v=Math.cos(f),y=Math.sin(f),[[x,S],[E,w]]=[l,c].map((e=>[e-e*p,e*m])),T=i+h*(s-g)+x+w+u*v,_=T+g,M=_-r*v,P=M-g,C=n+u-h*b-S+E+u*y,A=C+b,N=A-r*y,L=N-b,k=Math.min(T,_,M,P),I=Math.min(C,A,N,L);return{x:k,y:I,width:Math.max(T,_,M,P)-k,height:Math.max(C,A,N,L)-I,polygon:[[T,C],[_,A],[M,N],[P,L]]}}getStyle(e){return Bt.getComputedStyle(this.element||this,"").getPropertyValue(e)}hasClass(e){return-1!==(""+this.attr("class")).split(" ").indexOf(e)}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(e,t){this.onEvents={},this.opacity=1,this.SVG_NS=Dt,this.element="span"===t||"body"===t?Gt(t):Rt.createElementNS(this.SVG_NS,t),this.renderer=e,this.styles={},Yt(this,"afterInit")}on(e,t){let{onEvents:i}=this;return i[e]&&i[e](),i[e]=Vt(this.element,e,t),this}opacitySetter(e,t,i){let n=Number(Number(e).toFixed(3));this.opacity=n,i.setAttribute(t,n)}reAlign(){var e;(null===(e=this.alignOptions)||void 0===e?void 0:e.width)&&"left"!==this.alignOptions.align&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(e){return this.attr("class",(""+this.attr("class")).replace(Jt(e)?RegExp("(^| )".concat(e,"( |$)")):e," ").replace(/ +/g," ").trim())}removeTextOutline(){let e=this.element.querySelector("tspan.highcharts-text-outline");e&&this.safeRemoveChild(e)}safeRemoveChild(e){let t=e.parentNode;t&&t.removeChild(e)}setRadialReference(e){let t=this.element.gradient&&this.renderer.gradients[this.element.gradient]||void 0;return this.element.radialReference=e,null!==t&&void 0!==t&&t.radAttr&&t.animate(this.renderer.getRadialAttr(e,t.radAttr)),this}shadow(e){var t;let{renderer:i}=this,n=ei(90===(null===(t=this.parentGroup)||void 0===t?void 0:t.rotation)?{offsetX:-1,offsetY:-1}:{},Qt(e)?e:{}),s=i.shadowDefinition(n);return this.attr({filter:e?"url(".concat(i.url,"#").concat(s,")"):"none"})}show(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.attr({visibility:e?"inherit":"visible"})}"stroke-widthSetter"(e,t,i){this[t]=e,i.setAttribute(t,e)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let e,t=this.getStyle("stroke-width"),i=0;return/px$/.test(t)?i=ni(t):""!==t&&(jt(e=Rt.createElementNS(Dt,"rect"),{width:t,"stroke-width":0}),this.element.parentNode.appendChild(e),i=e.getBBox().width,e.parentNode.removeChild(e)),i}symbolAttr(e){let t=this;li.symbolCustomAttribs.forEach((function(i){t[i]=ii(e[i],t[i])})),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})}textSetter(e){e!==this.textStr&&(delete this.textPxLength,this.textStr=e,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(e){let t=this.element,i=t.getElementsByTagName("title")[0]||Rt.createElementNS(this.SVG_NS,"title");t.insertBefore?t.insertBefore(i,t.firstChild):t.appendChild(i),i.textContent=ri(ii(e,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let e=this.element;return e.parentNode.appendChild(e),this}translate(e,t){return this.attr({translateX:e,translateY:t})}updateTransform(){var e,t,i,n;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform",{element:r,foreignObject:o,matrix:a,padding:l,rotation:c=0,rotationOriginX:h,rotationOriginY:u,scaleX:d,scaleY:f,text:p,translateX:m=0,translateY:g=0}=this,b=["translate("+m+","+g+")"];Ut(a)&&b.push("matrix("+a.join(",")+")"),c&&(b.push("rotate("+c+" "+(null!==(e=null!==(t=null!==h&&void 0!==h?h:r.getAttribute("x"))&&void 0!==t?t:this.x)&&void 0!==e?e:0)+" "+(null!==(i=null!==(n=null!==u&&void 0!==u?u:r.getAttribute("y"))&&void 0!==n?n:this.y)&&void 0!==i?i:0)+")"),"SPAN"!==(null===p||void 0===p?void 0:p.element.tagName)||null!==p&&void 0!==p&&p.foreignObject||p.attr({rotation:c,rotationOriginX:(h||0)-l,rotationOriginY:(u||0)-l})),(Ut(d)||Ut(f))&&b.push("scale("+ii(d,1)+" "+ii(f,1)+")"),b.length&&!(p||this).textPath&&((null===o||void 0===o?void 0:o.element)||r).setAttribute(s,b.join(" "))}visibilitySetter(e,t,i){"inherit"===e?i.removeAttribute(t):this[t]!==e&&i.setAttribute(t,e),this[t]=e}xGetter(e){return"circle"===this.element.nodeName&&("x"===e?e="cx":"y"===e&&(e="cy")),this._defaultGetter(e)}zIndexSetter(e,t){let i,n,s,r,o,a=this.renderer,l=this.parentGroup,c=(l||a).element||a.box,h=this.element,u=c===a.box,d=!1,f=this.added;if(Ut(e)?(h.setAttribute("data-z-index",e),e*=1,this[t]===e&&(f=!1)):Ut(this[t])&&h.removeAttribute("data-z-index"),this[t]=e,f){for((e=this.zIndex)&&l&&(l.handleZ=!0),o=(i=c.childNodes).length-1;o>=0&&!d;o--)r=!Ut(s=(n=i[o]).getAttribute("data-z-index")),n!==h&&(e<0&&r&&!u&&!o?(c.insertBefore(h,i[o]),d=!0):(ni(s)<=e||r&&(!Ut(e)||e>=0))&&(c.insertBefore(h,i[o+1]),d=!0));d||(c.insertBefore(h,i[3*!!u]),d=!0)}return d}}li.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],li.prototype.strokeSetter=li.prototype.fillSetter,li.prototype.yGetter=li.prototype.xGetter,li.prototype.matrixSetter=li.prototype.rotationOriginXSetter=li.prototype.rotationOriginYSetter=li.prototype.rotationSetter=li.prototype.scaleXSetter=li.prototype.scaleYSetter=li.prototype.translateXSetter=li.prototype.translateYSetter=li.prototype.verticalAlignSetter=function(e,t){this[t]=e,this.doTransform=!0};let ci=li,{defined:hi,extend:ui,getAlignFactor:di,isNumber:fi,merge:pi,pick:mi,removeEvent:gi}=q;class bi extends ci{constructor(e,t,i,n,s,r,o,a,l,c){let h;super(e,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=t,this.x=i,this.y=n,this.anchorX=r,this.anchorY=o,this.baseline=l,this.className=c,this.addClass("button"===c?"highcharts-no-tooltip":"highcharts-label"),c&&this.addClass("highcharts-"+c),this.text=e.text(void 0,0,0,a).attr({zIndex:1}),"string"==typeof s&&((h=/^url\((.*?)\)$/.test(s))||this.renderer.symbols[s])&&(this.symbolKey=s),this.bBox=bi.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=e.styledMode||h,this.deferredAttr={},this.alignFactor=0}alignSetter(e){let t=di(e);this.textAlign=e,t!==this.alignFactor&&(this.alignFactor=t,this.bBox&&fi(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(e,t){this.anchorX=e,this.boxAttr(t,Math.round(e)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(e,t){this.anchorY=e,this.boxAttr(t,e-this.ySetting)}boxAttr(e,t){this.box?this.box.attr(e,t):this.deferredAttr[e]=t}css(e){if(e){let t={};e=pi(e),bi.textProps.forEach((i=>{void 0!==e[i]&&(t[i]=e[i],delete e[i])})),this.text.css(t),"fontSize"in t||"fontWeight"in t?this.updateTextPadding():("width"in t||"textOverflow"in t)&&this.updateBoxSize()}return ci.prototype.css.call(this,e)}destroy(){gi(this.element,"mouseenter"),gi(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),ci.prototype.destroy.call(this)}fillSetter(e,t){e&&(this.needsBox=!0),this.fill=e,this.boxAttr(t,e)}getBBox(e,t){this.textStr&&0===this.bBox.width&&0===this.bBox.height&&this.updateBoxSize();let{padding:i,height:n=0,translateX:s=0,translateY:r=0,width:o=0}=this,a=mi(this.paddingLeft,i),l=null!==t&&void 0!==t?t:this.rotation||0,c={width:o,height:n,x:s+this.bBox.x-a,y:r+this.bBox.y-i+this.baselineOffset};return l&&(c=this.getRotatedBox(c,l)),c}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(e){this.heightSetting=e,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:mi(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&hi(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(e,t){fi(e)?e!==this[t]&&(this[t]=e,this.updateTextPadding()):this[t]=void 0}rSetter(e,t){this.boxAttr(t,e)}strokeSetter(e,t){this.stroke=e,this.boxAttr(t,e)}"stroke-widthSetter"(e,t){e&&(this.needsBox=!0),this["stroke-width"]=e,this.boxAttr(t,e)}"text-alignSetter"(e){this.textAlign=this["text-align"]=e,this.updateTextPadding()}textSetter(e){void 0!==e&&this.text.attr({text:e}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let e,t=this.text,i={},n=this.padding,s=this.bBox=fi(this.widthSetting)&&fi(this.heightSetting)&&!this.textAlign||!hi(t.textStr)?bi.emptyBBox:t.getBBox(void 0,0);this.width=this.getPaddedWidth(),this.height=(this.heightSetting||s.height||0)+2*n;let r=this.renderer.fontMetrics(t);if(this.baselineOffset=n+Math.min((this.text.firstLineMetrics||r).b,s.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-r.h)/2),this.needsBox&&!t.textPath){if(!this.box){let e=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();e.addClass(("button"===this.className?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),e.add(this)}i.x=e=this.getCrispAdjust(),i.y=(this.baseline?-this.baselineOffset:0)+e,i.width=Math.round(this.width),i.height=Math.round(this.height),this.box.attr(ui(i,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let e=this.text,t=e.styles.textAlign||this.textAlign;if(!e.textPath){var i,n;this.updateBoxSize();let s=this.baseline?0:this.baselineOffset,r=(null!==(i=this.paddingLeft)&&void 0!==i?i:this.padding)+di(t)*(null!==(n=this.widthSetting)&&void 0!==n?n:this.bBox.width);(r!==e.x||s!==e.y)&&(e.attr({align:t,x:r}),void 0!==s&&e.attr("y",s)),e.x=r,e.y=s}}widthSetter(e){this.widthSetting=fi(e)?e:void 0,this.doUpdate=!0}getPaddedWidth(){let e=this.padding,t=mi(this.paddingLeft,e),i=mi(this.paddingRight,e);return(this.widthSetting||this.bBox.width||0)+t+i}xSetter(e){this.x=e,this.alignFactor&&(e-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.anchorX&&(this["forceAnimate:anchorX"]=!0),this.xSetting=Math.round(e),this.attr("translateX",this.xSetting)}ySetter(e){this.anchorY&&(this["forceAnimate:anchorY"]=!0),this.ySetting=this.y=Math.round(e),this.attr("translateY",this.ySetting)}}bi.emptyBBox={width:0,height:0,x:0,y:0},bi.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineClamp","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"];let{defined:vi,isNumber:yi,pick:xi}=q;function Si(e,t,i,n,s){let r=[];if(s){let o=s.start||0,a=s.end||0,l=xi(s.r,i),c=xi(s.r,n||i),h=2e-4/(s.borderRadius?1:Math.max(l,1)),u=Math.abs(a-o-2*Math.PI)<h;u&&(o=Math.PI/2,a=2.5*Math.PI-h);let d=s.innerR,f=xi(s.open,u),p=Math.cos(o),m=Math.sin(o),g=Math.cos(a),b=Math.sin(a),v=xi(s.longArc,a-o-Math.PI<h?0:1),y=["A",l,c,0,v,xi(s.clockwise,1),e+l*g,t+c*b];y.params={start:o,end:a,cx:e,cy:t},r.push(["M",e+l*p,t+c*m],y),vi(d)&&((y=["A",d,d,0,v,vi(s.clockwise)?1-s.clockwise:0,e+d*p,t+d*m]).params={start:a,end:o,cx:e,cy:t},r.push(f?["M",e+d*g,t+d*b]:["L",e+d*g,t+d*b],y)),f||r.push(["Z"])}return r}function Ei(e,t,i,n,s){return null!==s&&void 0!==s&&s.r?wi(e,t,i,n,s):[["M",e,t],["L",e+i,t],["L",e+i,t+n],["L",e,t+n],["Z"]]}function wi(e,t,i,n,s){let r=(null===s||void 0===s?void 0:s.r)||0;return[["M",e+r,t],["L",e+i-r,t],["A",r,r,0,0,1,e+i,t+r],["L",e+i,t+n-r],["A",r,r,0,0,1,e+i-r,t+n],["L",e+r,t+n],["A",r,r,0,0,1,e,t+n-r],["L",e,t+r],["A",r,r,0,0,1,e+r,t],["Z"]]}let Ti={arc:Si,callout:function(e,t,i,n,s){let r=Math.min((null===s||void 0===s?void 0:s.r)||0,i,n),o=r+6,a=null===s||void 0===s?void 0:s.anchorX,l=(null===s||void 0===s?void 0:s.anchorY)||0,c=wi(e,t,i,n,{r:r});if(!yi(a)||a<i&&a>0&&l<n&&l>0)return c;if(e+a>i-o)if(l>t+o&&l<t+n-o)c.splice(3,1,["L",e+i,l-6],["L",e+i+6,l],["L",e+i,l+6],["L",e+i,t+n-r]);else if(a<i){let s=l<t+o,h=s?t:t+n;c.splice(s?2:5,0,["L",a,l],["L",e+i-r,h])}else c.splice(3,1,["L",e+i,n/2],["L",a,l],["L",e+i,n/2],["L",e+i,t+n-r]);else if(e+a<o)if(l>t+o&&l<t+n-o)c.splice(7,1,["L",e,l+6],["L",e-6,l],["L",e,l-6],["L",e,t+r]);else if(a>0){let i=l<t+o,s=i?t:t+n;c.splice(i?1:6,0,["L",a,l],["L",e+r,s])}else c.splice(7,1,["L",e,n/2],["L",a,l],["L",e,n/2],["L",e,t+r]);else l>n&&a<i-o?c.splice(5,1,["L",a+6,t+n],["L",a,t+n+6],["L",a-6,t+n],["L",e+r,t+n]):l<0&&a>o&&c.splice(1,1,["L",a-6,t],["L",a,t-6],["L",a+6,t],["L",i-r,t]);return c},circle:function(e,t,i,n){return Si(e+i/2,t+n/2,i/2,n/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(e,t,i,n){return[["M",e+i/2,t],["L",e+i,t+n/2],["L",e+i/2,t+n],["L",e,t+n/2],["Z"]]},rect:Ei,roundedRect:wi,square:Ei,triangle:function(e,t,i,n){return[["M",e+i/2,t],["L",e+i,t+n],["L",e,t+n],["Z"]]},"triangle-down":function(e,t,i,n){return[["M",e,t],["L",e+i,t],["L",e+i/2,t+n],["Z"]]}},{doc:_i,SVG_NS:Mi,win:Pi}=T,{attr:Ci,extend:Ai,fireEvent:Ni,isString:Li,objectEach:ki,pick:Ii}=q,Ri=(e,t)=>e.substring(0,t)+"\u2026",Oi=class{constructor(e){let t=e.styles;this.renderer=e.renderer,this.svgElement=e,this.width=e.textWidth,this.textLineHeight=null===t||void 0===t?void 0:t.lineHeight,this.textOutline=null===t||void 0===t?void 0:t.textOutline,this.ellipsis="ellipsis"===(null===t||void 0===t?void 0:t.textOverflow),this.lineClamp=null===t||void 0===t?void 0:t.lineClamp,this.noWrap="nowrap"===(null===t||void 0===t?void 0:t.whiteSpace)}buildSVG(){let e=this.svgElement,t=e.element,i=e.renderer,n=Ii(e.textStr,"").toString(),s=-1!==n.indexOf("<"),r=t.childNodes,o=!e.added&&i.box,a=[n,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,e.getStyle("font-size"),e.styles.lineClamp,this.width].join(",");if(a!==e.textCache){e.textCache=a,delete e.actualWidth;for(let e=r.length;e--;)t.removeChild(r[e]);if(s||this.ellipsis||this.width||e.textPath||-1!==n.indexOf(" ")&&(!this.noWrap||/<br.*?>/g.test(n))){if(""!==n){o&&o.appendChild(t);let i=new ot(n);this.modifyTree(i.nodes),i.addToDOM(t),this.modifyDOM(),this.ellipsis&&-1!==(t.textContent||"").indexOf("\u2026")&&e.attr("title",this.unescapeEntities(e.textStr||"",["&lt;","&gt;"])),o&&o.removeChild(t)}}else t.appendChild(_i.createTextNode(this.unescapeEntities(n)));Li(this.textOutline)&&e.applyTextOutline&&e.applyTextOutline(this.textOutline)}}modifyDOM(){let e,t=this.svgElement,i=Ci(t.element,"x");for(t.firstLineMetrics=void 0;(e=t.element.firstChild)&&/^[\s\u200B]*$/.test(e.textContent||" ");)t.element.removeChild(e);[].forEach.call(t.element.querySelectorAll("tspan.highcharts-br"),((e,n)=>{e.nextSibling&&e.previousSibling&&(0===n&&1===e.previousSibling.nodeType&&(t.firstLineMetrics=t.renderer.fontMetrics(e.previousSibling)),Ci(e,{dy:this.getLineHeight(e.nextSibling),x:i}))}));let n=this.width||0;if(!n)return;let s=(e,s)=>{let r=e.textContent||"",o=r.replace(/([^\^])-/g,"$1- ").split(" "),a=!this.noWrap&&(o.length>1||t.element.childNodes.length>1),l=this.getLineHeight(s),c=Math.max(0,n-.8*l),h=0,u=t.actualWidth;if(a){let r=[],a=[];for(;s.firstChild&&s.firstChild!==e;)a.push(s.firstChild),s.removeChild(s.firstChild);for(;o.length;)if(o.length&&!this.noWrap&&h>0&&(r.push(e.textContent||""),e.textContent=o.join(" ").replace(/- /g,"-")),this.truncate(e,void 0,o,0===h&&u||0,n,c,((e,t)=>o.slice(0,t).join(" ").replace(/- /g,"-"))),u=t.actualWidth,h++,this.lineClamp&&h>=this.lineClamp){var d;o.length&&(this.truncate(e,e.textContent||"",void 0,0,n,c,Ri),e.textContent=(null===(d=e.textContent)||void 0===d?void 0:d.replace("\u2026",""))+"\u2026");break}a.forEach((t=>{s.insertBefore(t,e)})),r.forEach((t=>{s.insertBefore(_i.createTextNode(t),e);let n=_i.createElementNS(Mi,"tspan");n.textContent="\u200b",Ci(n,{dy:l,x:i}),s.insertBefore(n,e)}))}else this.ellipsis&&r&&this.truncate(e,r,void 0,0,n,c,Ri)},r=e=>{[].slice.call(e.childNodes).forEach((i=>{i.nodeType===Pi.Node.TEXT_NODE?s(i,e):(-1!==i.className.baseVal.indexOf("highcharts-br")&&(t.actualWidth=0),r(i))}))};r(t.element)}getLineHeight(e){let t=e.nodeType===Pi.Node.TEXT_NODE?e.parentElement:e;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(t||this.svgElement.element).h}modifyTree(e){let t=(i,n)=>{let{attributes:s={},children:r,style:o={},tagName:a}=i,l=this.renderer.styledMode;if("b"===a||"strong"===a?l?s.class="highcharts-strong":o.fontWeight="bold":("i"===a||"em"===a)&&(l?s.class="highcharts-emphasized":o.fontStyle="italic"),null!==o&&void 0!==o&&o.color&&(o.fill=o.color),"br"===a){s.class="highcharts-br",i.textContent="\u200b";let t=e[n+1];(null===t||void 0===t?void 0:t.textContent)&&(t.textContent=t.textContent.replace(/^ +/gm,""))}else"a"===a&&r&&r.some((e=>"#text"===e.tagName))&&(i.children=[{children:r,tagName:"tspan"}]);"#text"!==a&&"a"!==a&&(i.tagName="tspan"),Ai(i,{attributes:s,style:o}),r&&r.filter((e=>"#text"!==e.tagName)).forEach(t)};e.forEach(t),Ni(this.svgElement,"afterModifyTree",{nodes:e})}truncate(e,t,i,n,s,r,o){let a,l,c=this.svgElement,{rotation:h}=c,u=[],d=i&&!n?1:0,f=(t||i||"").length,p=f;i||(s=r);let m=function(t,s){let r=s||t,o=e.parentNode;if(o&&void 0===u[r]&&o.getSubStringLength)try{u[r]=n+o.getSubStringLength(0,i?r+1:r)}catch(a){}return u[r]};if(c.rotation=0,n+(l=m(e.textContent.length))>s){for(;d<=f;)p=Math.ceil((d+f)/2),i&&(a=o(i,p)),l=m(p,a&&a.length-1),d===f?d=f+1:l>s?f=p-1:d=p;0===f?e.textContent="":t&&f===t.length-1||(e.textContent=a||o(t||i,p)),this.ellipsis&&l>s&&this.truncate(e,e.textContent||"",void 0,0,s,r,Ri)}i&&i.splice(0,p),c.actualWidth=l,c.rotation=h}unescapeEntities(e,t){return ki(this.renderer.escapes,(function(i,n){t&&-1!==t.indexOf(i)||(e=e.toString().replace(RegExp(i,"g"),n))})),e}},{defaultOptions:Di}=Se,{charts:Bi,deg2rad:Fi,doc:Vi,isFirefox:ji,isMS:Gi,isWebKit:Wi,noop:zi,SVG_NS:Ui,symbolSizes:Hi,win:Xi}=T,{addEvent:Yi,attr:Ki,createElement:qi,crisp:$i,css:Zi,defined:Qi,destroyObjectProperties:Ji,extend:en,isArray:tn,isNumber:nn,isObject:sn,isString:rn,merge:on,pick:an,pInt:ln,replaceNested:cn,uniqueKey:hn}=q;class un{constructor(e,t,i,n,s,r,o){let a,l;this.x=0,this.y=0;let c=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),h=c.element;o||c.css(this.getStyle(n||{})),e.appendChild(h),Ki(e,"dir","ltr"),-1===e.innerHTML.indexOf("xmlns")&&Ki(h,"xmlns",this.SVG_NS),this.box=h,this.boxWrapper=c,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(Vi.createTextNode("Created with Highcharts 12.4.0")),this.defs=this.createElement("defs").add(),this.allowHTML=r,this.forExport=s,this.styledMode=o,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=c.getStyle("font-size"),this.setSize(t,i,!1),ji&&e.getBoundingClientRect&&((a=function(){Zi(e,{left:0,top:0}),l=e.getBoundingClientRect(),Zi(e,{left:Math.ceil(l.left)-l.left+"px",top:Math.ceil(l.top)-l.top+"px"})})(),this.unSubPixelFix=Yi(Xi,"resize",a))}definition(e){return new ot([e]).addToDOM(this.defs.element)}getReferenceURL(){if((ji||Wi)&&Vi.getElementsByTagName("base").length){if(!Qi(i)){let e=hn(),t=new ot([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:e},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":"url(#".concat(e,")"),fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(Vi.body);Zi(t,{position:"fixed",top:0,left:0,zIndex:9e5});let n=Vi.elementFromPoint(6,6);i="hitme"===(null===n||void 0===n?void 0:n.id),Vi.body.removeChild(t)}if(i)return cn(Xi.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(e){return this.style=en({fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif',fontSize:"1rem"},e),this.style}setStyle(e){this.boxWrapper.css(this.getStyle(e))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let e=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),Ji(this.gradients||{}),this.gradients=null,this.defs=e.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(e){return new this.Element(this,e)}getRadialAttr(e,t){return{cx:e[0]-e[2]/2+(t.cx||0)*e[2],cy:e[1]-e[2]/2+(t.cy||0)*e[2],r:(t.r||0)*e[2]}}shadowDefinition(e){let t=["highcharts-drop-shadow-".concat(this.chartIndex),...Object.keys(e).map((t=>"".concat(t,"-").concat(e[t])))].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),i=on({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},e);return this.defs.element.querySelector("#".concat(t))||this.definition({tagName:"filter",attributes:{id:t,filterUnits:i.filterUnits},children:this.getShadowFilterContent(i)}),t}getShadowFilterContent(e){return[{tagName:"feDropShadow",attributes:{dx:e.offsetX,dy:e.offsetY,"flood-color":e.color,"flood-opacity":Math.min(5*e.opacity,1),stdDeviation:e.width/2}}]}buildText(e){new Oi(e).buildSVG()}getContrast(e){if("transparent"===e)return"#000000";let t=Ne.parse(e).rgba,i=" clamp(0,calc(9e9*(0.5 - (0.2126*r + 0.7152*g + 0.0722*b))),1)";if(nn(t[0])||!Ne.useColorMix){let e=t.map((e=>{let t=e/255;return t<=.04?t/12.92:Math.pow((t+.055)/1.055,2.4)})),i=.2126*e[0]+.7152*e[1]+.0722*e[2];return 1.05/(i+.05)>(i+.05)/.05?"#FFFFFF":"#000000"}return"color(from "+e+" srgb"+i+i+i+")"}button(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>8?arguments[8]:void 0,o=arguments.length>9?arguments[9]:void 0,a=this.label(e,t,i,r,void 0,void 0,o,void 0,"button"),l=this.styledMode,c=arguments,h=0;s=on(Di.global.buttonTheme,s),l&&(delete s.fill,delete s.stroke,delete s["stroke-width"]);let u=s.states||{},d=s.style||{};delete s.states,delete s.style;let f=[ot.filterUserAttributes(s)],p=[d];return l||["hover","select","disabled"].forEach(((e,t)=>{f.push(on(f[0],ot.filterUserAttributes(c[t+5]||u[e]||{}))),p.push(f[t+1].style),delete f[t+1].style})),Yi(a.element,Gi?"mouseover":"mouseenter",(function(){3!==h&&a.setState(1)})),Yi(a.element,Gi?"mouseout":"mouseleave",(function(){3!==h&&a.setState(h)})),a.setState=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(1!==e&&(a.state=h=e),a.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][e]),!l){a.attr(f[e]);let t=p[e];sn(t)&&a.css(t)}},a.attr(f[0]),!l&&(a.css(en({cursor:"default"},d)),o&&a.text.css({pointerEvents:"none"})),a.on("touchstart",(e=>e.stopPropagation())).on("click",(function(e){3!==h&&(null===n||void 0===n||n.call(a,e))}))}crispLine(e,t){let[i,n]=e;return Qi(i[1])&&i[1]===n[1]&&(i[1]=n[1]=$i(i[1],t)),Qi(i[2])&&i[2]===n[2]&&(i[2]=n[2]=$i(i[2],t)),e}path(e){let t=this.styledMode?{}:{fill:"none"};return tn(e)?t.d=e:sn(e)&&en(t,e),this.createElement("path").attr(t)}circle(e,t,i){let n=sn(e)?e:void 0===e?{}:{x:e,y:t,r:i},s=this.createElement("circle");return s.xSetter=s.ySetter=function(e,t,i){i.setAttribute("c"+t,e)},s.attr(n)}arc(e,t,i,n,s,r){let o;sn(e)?(t=(o=e).y,i=o.r,n=o.innerR,s=o.start,r=o.end,e=o.x):o={innerR:n,start:s,end:r};let a=this.symbol("arc",e,t,i,i,o);return a.r=i,a}rect(e,t,i,n,s,r){let o=sn(e)?e:void 0===e?{}:{x:e,y:t,r:s,width:Math.max(i||0,0),height:Math.max(n||0,0)},a=this.createElement("rect");return this.styledMode||(void 0!==r&&(o["stroke-width"]=r,en(o,a.crisp(o))),o.fill="none"),a.rSetter=function(e,t,i){a.r=e,Ki(i,{rx:e,ry:e})},a.rGetter=function(){return a.r||0},a.attr(o)}roundedRect(e){return this.symbol("roundedRect").attr(e)}setSize(e,t,i){this.width=e,this.height=t,this.boxWrapper.animate({width:e,height:t},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:an(i,!0)?void 0:0}),this.alignElements()}g(e){let t=this.createElement("g");return e?t.attr({class:"highcharts-"+e}):t}image(e,t,i,n,s,r){let o={preserveAspectRatio:"none"};nn(t)&&(o.x=t),nn(i)&&(o.y=i),nn(n)&&(o.width=n),nn(s)&&(o.height=s);let a=this.createElement("image").attr(o),l=function(t){a.attr({href:e}),r.call(a,t)};if(r){a.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let t=new Xi.Image;Yi(t,"load",l),t.src=e,t.complete&&l({})}else a.attr({href:e});return a}symbol(e,t,i,n,s,r){let o,a,l,c,h=this,u=/^url\((.*?)\)$/,d=u.test(e),f=!d&&(this.symbols[e]?e:"circle"),p=f&&this.symbols[f];if(p)"number"==typeof t&&(a=p.call(this.symbols,t||0,i||0,n||0,s||0,r)),o=this.path(a),h.styledMode||o.attr("fill","none"),en(o,{symbolName:f||void 0,x:t,y:i,width:n,height:s}),r&&en(o,r);else if(d){var m,g;l=e.match(u)[1];let n=o=this.image(l);n.imgwidth=an(null===r||void 0===r?void 0:r.width,null===(m=Hi[l])||void 0===m?void 0:m.width),n.imgheight=an(null===r||void 0===r?void 0:r.height,null===(g=Hi[l])||void 0===g?void 0:g.height),c=e=>e.attr({width:e.width,height:e.height}),["width","height"].forEach((e=>{n["".concat(e,"Setter")]=function(e,t){this[t]=e;let{alignByTranslate:i,element:n,width:s,height:o,imgwidth:a,imgheight:l}=this,c="width"===t?a:l,h=1;r&&"within"===r.backgroundSize&&s&&o&&a&&l?(h=Math.min(s/a,o/l),Ki(n,{width:Math.round(a*h),height:Math.round(l*h)})):n&&c&&n.setAttribute(t,c),!i&&a&&l&&this.translate(((s||0)-a*h)/2,((o||0)-l*h)/2)}})),Qi(t)&&n.attr({x:t,y:i}),n.isImg=!0,n.symbolUrl=e,Qi(n.imgwidth)&&Qi(n.imgheight)?c(n):(n.attr({width:0,height:0}),qi("img",{onload:function(){let e=Bi[h.chartIndex];0===this.width&&(Zi(this,{position:"absolute",top:"-999em"}),Vi.body.appendChild(this)),Hi[l]={width:this.width,height:this.height},n.imgwidth=this.width,n.imgheight=this.height,n.element&&c(n),this.parentNode&&this.parentNode.removeChild(this),h.imgCount--,h.imgCount||!e||e.hasLoaded||e.onload()},src:l}),this.imgCount++)}return o}clipRect(e,t,i,n){return this.rect(e,t,i,n,0)}text(e,t,i,n){let s={};if(n&&(this.allowHTML||!this.forExport))return this.html(e,t,i);s.x=Math.round(t||0),i&&(s.y=Math.round(i)),Qi(e)&&(s.text=e);let r=this.createElement("text").attr(s);return n&&(!this.forExport||this.allowHTML)||(r.xSetter=function(e,t,i){let n=i.getElementsByTagName("tspan"),s=i.getAttribute(t);for(let r,o=0;o<n.length;o++)(r=n[o]).getAttribute(t)===s&&r.setAttribute(t,e);i.setAttribute(t,e)}),r}fontMetrics(e){let t=nn(e)?e:ln(ci.prototype.getStyle.call(e,"font-size")||0),i=t<24?t+3:Math.round(1.2*t);return{h:i,b:Math.round(.8*i),f:t}}rotCorr(e,t,i){let n=e;return t&&i&&(n=Math.max(n*Math.cos(t*Fi),4)),{x:-e/3*Math.sin(t*Fi),y:n}}pathToSegments(e){let t=[],i=[],n={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let s=0;s<e.length;s++)rn(i[0])&&nn(e[s])&&i.length===n[i[0].toUpperCase()]&&e.splice(s,0,i[0].replace("M","L").replace("m","l")),"string"==typeof e[s]&&(i.length&&t.push(i.slice(0)),i.length=0),i.push(e[s]);return t.push(i.slice(0)),t}label(e,t,i,n,s,r,o,a,l){return new bi(this,e,t,i,n,s,r,o,a,l)}alignElements(){this.alignedObjects.forEach((e=>e.align()))}}en(un.prototype,{Element:ci,SVG_NS:Ui,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:Ti,draw:zi}),Tt.registerRendererType("svg",un,!0);let{composed:dn,isFirefox:fn}=T,{attr:pn,css:mn,createElement:gn,defined:bn,extend:vn,getAlignFactor:yn,isNumber:xn,pInt:Sn,pushUnique:En}=q;function wn(e,t,i){var n;let s=null===(n=this.div)||void 0===n?void 0:n.style;ci.prototype["".concat(t,"Setter")].call(this,e,t,i),s&&(i.style[t]=s[t]=e)}let Tn=(e,t)=>{if(!e.div){var i;let n=pn(e.element,"class"),s=e.css,o=gn("div",n?{className:n}:void 0,r(r({position:"absolute",left:"".concat(e.translateX||0,"px"),top:"".concat(e.translateY||0,"px")},e.styles),{},{display:e.display,opacity:e.opacity,visibility:e.visibility}),(null===(i=e.parentGroup)||void 0===i?void 0:i.div)||t);e.classSetter=(e,t,i)=>{i.setAttribute("class",e),o.className=e},e.translateXSetter=e.translateYSetter=(t,i)=>{e[i]=t,o.style["translateX"===i?"left":"top"]="".concat(t,"px"),e.doTransform=!0},e.scaleXSetter=e.scaleYSetter=(t,i)=>{e[i]=t,e.doTransform=!0},e.opacitySetter=e.visibilitySetter=wn,e.css=t=>(s.call(e,t),t.cursor&&(o.style.cursor=t.cursor),t.pointerEvents&&(o.style.pointerEvents=t.pointerEvents),e),e.on=function(){return ci.prototype.on.apply({element:o,onEvents:e.onEvents},arguments),e},e.div=o}return e.div};class _n extends ci{static compose(e){En(dn,this.compose)&&(e.prototype.html=function(e,t,i){return new _n(this,"span").attr({text:e,x:Math.round(t),y:Math.round(i)})})}constructor(e,t){super(e,t),_n.useForeignObject?this.foreignObject=e.createElement("foreignObject").attr({zIndex:2}):this.css(r({position:"absolute"},e.styledMode?{}:{fontFamily:e.style.fontFamily,fontSize:e.style.fontSize})),this.element.style.whiteSpace="nowrap"}getSpanCorrection(e,t,i){this.xCorr=-e*i,this.yCorr=-t}css(e){let t,{element:i}=this,n="SPAN"===i.tagName&&e&&"width"in e,s=n&&e.width;return n&&(delete e.width,this.textWidth=Sn(s)||void 0,t=!0),"ellipsis"===(null===e||void 0===e?void 0:e.textOverflow)&&(e.overflow="hidden",e.whiteSpace="nowrap"),null!==e&&void 0!==e&&e.lineClamp&&(e.display="-webkit-box",e.WebkitLineClamp=e.lineClamp,e.WebkitBoxOrient="vertical",e.overflow="hidden"),xn(Number(null===e||void 0===e?void 0:e.fontSize))&&(e.fontSize+="px"),vn(this.styles,e),mn(i,e),t&&this.updateTransform(),this}htmlGetBBox(){let{element:e}=this;return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}updateTransform(){if(!this.added)return void(this.alignOnAdd=!0);let{element:e,foreignObject:t,oldTextWidth:i,renderer:n,rotation:s,rotationOriginX:r,rotationOriginY:o,scaleX:a,scaleY:l,styles:{display:c="inline-block",whiteSpace:h},textAlign:u="left",textWidth:d,translateX:f=0,translateY:p=0,x:m=0,y:g=0}=this;if(t||mn(e,{marginLeft:"".concat(f,"px"),marginTop:"".concat(p,"px")}),"SPAN"===e.tagName){var b;let f,p=[s,u,e.innerHTML,d,this.textAlign].join(","),v=-1*(null===(b=this.parentGroup)||void 0===b?void 0:b.padding)||0;if(d!==i){let t=this.textPxLength?this.textPxLength:(mn(e,{width:"",whiteSpace:h||"nowrap"}),e.offsetWidth),r=d||0,o=!n.styledMode&&""===e.style.textOverflow&&e.style.webkitLineClamp;(r>i||t>r||o)&&(/[\-\s\u00AD]/.test(e.textContent||e.innerText)||"ellipsis"===e.style.textOverflow)&&(mn(e,{width:(s||a||t>r||o)&&xn(d)?d+"px":"auto",display:c,whiteSpace:h||"normal"}),this.oldTextWidth=d)}t&&(mn(e,{display:"inline-block",verticalAlign:"top"}),t.attr({width:n.width,height:n.height})),p!==this.cTT&&(f=n.fontMetrics(e).b,bn(s)&&!t&&(s!==(this.oldRotation||0)||u!==this.oldAlign)&&mn(e,{transform:"rotate(".concat(s,"deg)"),transformOrigin:"".concat(v,"% ").concat(v,"px")}),this.getSpanCorrection(!bn(s)&&!this.textWidth&&this.textPxLength||e.offsetWidth,f,yn(u)));let{xCorr:y=0,yCorr:x=0}=this,S={left:"".concat(m+y,"px"),top:"".concat(g+x,"px"),textAlign:u,transformOrigin:"".concat((null!==r&&void 0!==r?r:m)-y-m-v,"px ").concat((null!==o&&void 0!==o?o:g)-x-g-v,"px")};(a||l)&&(S.transform="scale(".concat(null!==a&&void 0!==a?a:1,",").concat(null!==l&&void 0!==l?l:1,")")),t?(super.updateTransform(),xn(m)&&xn(g)?(t.attr({x:m+y,y:g+x,width:e.offsetWidth+3,height:e.offsetHeight,"transform-origin":e.getAttribute("transform-origin")||"0 0"}),mn(e,{display:c,textAlign:u})):fn&&t.attr({width:0,height:0})):mn(e,S),this.cTT=p,this.oldRotation=s,this.oldAlign=u}}add(e){let{foreignObject:t,renderer:i}=this,n=i.box.parentNode,s=[];if(t)t.add(e),super.add(i.createElement("body").attr({xmlns:"http://www.w3.org/1999/xhtml"}).css({background:"transparent",margin:"0 3px 0 0"}).add(t));else{let t;if(this.parentGroup=e,e&&!(t=e.div)){let i=e;for(;i;)s.push(i),i=i.parentGroup;for(let e of s.reverse())t=Tn(e,n)}(t||n).appendChild(this.element)}return this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(e){e!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,ot.setElementHTML(this.element,null!==e&&void 0!==e?e:""),this.textStr=e,this.doTransform=!0)}alignSetter(e){this.alignValue=this.textAlign=e,this.doTransform=!0}xSetter(e,t){this[t]=e,this.doTransform=!0}}let Mn=_n.prototype;Mn.visibilitySetter=Mn.opacitySetter=wn,Mn.ySetter=Mn.rotationSetter=Mn.rotationOriginXSetter=Mn.rotationOriginYSetter=Mn.xSetter,function(e){e.xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%[HMSL]",range:!1},second:{main:"%[HMS]",range:!1},minute:{main:"%[HM]",range:!1},hour:{main:"%[HM]",range:!1},day:{main:"%[eb]"},week:{main:"%[eb]"},month:{main:"%[bY]"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em",textOverflow:"ellipsis"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},e.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:e}=this.axis.chart;return e(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0}}(a||(a={}));let Pn=a,{addEvent:Cn,isFunction:An,objectEach:Nn,removeEvent:Ln}=q;(l||(l={})).registerEventOptions=function(e,t){e.eventOptions=e.eventOptions||{},Nn(t.events,(function(t,i){e.eventOptions[i]!==t&&(e.eventOptions[i]&&(Ln(e,i,e.eventOptions[i]),delete e.eventOptions[i]),An(t)&&(e.eventOptions[i]=t,Cn(e,i,t,{order:0})))}))};let kn=l,{deg2rad:In}=T,{clamp:Rn,correctFloat:On,defined:Dn,destroyObjectProperties:Bn,extend:Fn,fireEvent:Vn,getAlignFactor:jn,isNumber:Gn,merge:Wn,objectEach:zn,pick:Un}=q,Hn=class{constructor(e,t,i,n,s){this.isNew=!0,this.isNewLabel=!0,this.axis=e,this.pos=t,this.type=i||"",this.parameters=s||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,Vn(this,"init"),i||n||this.addLabel()}addLabel(){var e,t,i;let n,s,r,o=this,a=o.axis,l=a.options,c=a.chart,h=a.categories,u=a.logarithmic,d=a.names,f=o.pos,p=Un(null===(e=o.options)||void 0===e?void 0:e.labels,l.labels),m=a.tickPositions,g=f===m[0],b=f===m[m.length-1],v=(!p.step||1===p.step)&&1===a.tickInterval,y=m.info,x=o.label,S=this.parameters.category||(h?Un(h[f],d[f],f):f);u&&Gn(S)&&(S=On(u.lin2log(S))),a.dateTime&&(y?n=(s=c.time.resolveDTLFormat(l.dateTimeLabelFormats[!(null!==(t=l.grid)&&void 0!==t&&t.enabled)&&y.higherRanks[f]||y.unitName])).main:Gn(S)&&(n=a.dateTime.getXDateFormat(S,l.dateTimeLabelFormats||{}))),o.isFirst=g,o.isLast=b;let E={axis:a,chart:c,dateTimeLabelFormat:n,isFirst:g,isLast:b,pos:f,tick:o,tickPositionInfo:y,value:S};Vn(this,"labelFormat",E);let w=e=>p.formatter?p.formatter.call(e,e):p.format?(e.text=a.defaultLabelFormatter.call(e),wt.format(p.format,e,c)):a.defaultLabelFormatter.call(e),T=w.call(E,E),_=null===(i=s)||void 0===i?void 0:i.list;o.shortenLabel=_?function(){for(r=0;r<_.length;r++)if(Fn(E,{dateTimeLabelFormat:_[r]}),x.attr({text:w.call(E,E)}),x.getBBox().width<a.getSlotWidth(o)-2*(p.padding||0))return;x.attr({text:""})}:void 0,v&&a._addedPlotLB&&o.moveLabel(T,p),Dn(x)||o.movedLabel?x&&x.textStr!==T&&!v&&(!x.textWidth||p.style.width||x.styles.width||x.css({width:null}),x.attr({text:T}),x.textPxLength=x.getBBox().width):(o.label=x=o.createLabel(T,p),o.rotation=0)}createLabel(e,t,i){let n=this.axis,{renderer:s,styledMode:r}=n.chart,o=t.style.whiteSpace,a=Dn(e)&&t.enabled?s.text(e,null===i||void 0===i?void 0:i.x,null===i||void 0===i?void 0:i.y,t.useHTML).add(n.labelGroup):void 0;return a&&(r||a.css(Wn(t.style)),a.textPxLength=a.getBBox().width,!r&&o&&a.css({whiteSpace:o})),a}destroy(){Bn(this,this.axis)}getPosition(e,t,i,n){let s=this.axis,r=s.chart,o=n&&r.oldChartHeight||r.chartHeight,a={x:e?On(s.translate(t+i,void 0,void 0,n)+s.transB):s.left+s.offset+(s.opposite?(n&&r.oldChartWidth||r.chartWidth)-s.right-s.left:0),y:e?o-s.bottom+s.offset-(s.opposite?s.height:0):On(o-s.translate(t+i,void 0,void 0,n)-s.transB)};return a.y=Rn(a.y,-1e9,1e9),Vn(this,"afterGetPosition",{pos:a}),a}getLabelPosition(e,t,i,n,s,r,o,a){let l,c,h=this.axis,u=h.transA,d=h.isLinked&&h.linkedParent?h.linkedParent.reversed:h.reversed,f=h.staggerLines,p=h.tickRotCorr||{x:0,y:0},m=n||h.reserveSpaceDefault?0:-h.labelOffset*("center"===h.labelAlign?.5:1),g=s.distance,b={};return l=0===h.side?i.rotation?-g:-i.getBBox().height:2===h.side?p.y+g:Math.cos(i.rotation*In)*(p.y-i.getBBox(!1,0).height/2),Dn(s.y)&&(l=0===h.side&&h.horiz?s.y+l:s.y),e=e+Un(s.x,[0,1,0,-1][h.side]*g)+m+p.x-(r&&n?r*u*(d?-1:1):0),t=t+l-(r&&!n?r*u*(d?1:-1):0),f&&(c=o/(a||1)%f,h.opposite&&(c=f-c-1),t+=c*(h.labelOffset/f)),b.x=e,b.y=Math.round(t),Vn(this,"afterGetLabelPosition",{pos:b,tickmarkOffset:r,index:o}),b}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(arguments.length>5?arguments[5]:void 0).crispLine([["M",e,t],["L",e+(s?0:-i),t+(s?i:0)]],n)}handleOverflow(e){var t;let i,n=this.axis,s=n.options.labels,r=e.x,o=n.chart.chartWidth,a=n.chart.spacing,l=Un(n.labelLeft,Math.min(n.pos,a[3])),c=Un(n.labelRight,Math.max(n.isRadial?0:n.pos+n.len,o-a[1])),h=this.label,u=this.rotation,d=jn(n.labelAlign||h.attr("align")),f=h.getBBox().width,p=n.getSlotWidth(this),m=p,g=1;u||"justify"!==s.overflow?u<0&&r-d*f<l?i=Math.round(r/Math.cos(u*In)-l):u>0&&r+d*f>c&&(i=Math.round((o-r)/Math.cos(u*In))):(r-d*f<l?m=e.x+m*(1-d)-l:r+(1-d)*f>c&&(m=c-e.x+m*d,g=-1),(m=Math.min(p,m))<p&&"center"===n.labelAlign&&(e.x+=g*(p-m-d*(p-Math.min(f,m)))),(f>m||n.autoRotation&&(null===h||void 0===h||null===(t=h.styles)||void 0===t?void 0:t.width))&&(i=m)),i&&h&&(this.shortenLabel?this.shortenLabel():h.css(Fn({},{width:Math.floor(i)+"px",lineClamp:+!n.isRadial})))}moveLabel(e,t){let i,n=this,s=n.label,r=n.axis,o=!1;s&&s.textStr===e?(n.movedLabel=s,o=!0,delete n.label):zn(r.ticks,(function(t){o||t.isNew||t===n||!t.label||t.label.textStr!==e||(n.movedLabel=t.label,o=!0,t.labelPos=n.movedLabel.xy,delete t.label)})),!o&&(n.labelPos||s)&&(i=n.labelPos||s.xy,n.movedLabel=n.createLabel(e,t,i),n.movedLabel&&n.movedLabel.attr({opacity:0}))}render(e,t,i){var n;let s=this.axis,r=s.horiz,o=this.pos,a=Un(this.tickmarkOffset,s.tickmarkOffset),l=this.getPosition(r,o,a,t),c=l.x,h=l.y,u=s.pos,d=u+s.len,f=r?c:h,p=Un(i,null===(n=this.label)||void 0===n?void 0:n.newOpacity,1);!s.chart.polar&&(On(f)<u||f>d)&&(i=0),null!==i&&void 0!==i||(i=1),this.isActive=!0,this.renderGridLine(t,i),this.renderMark(l,i),this.renderLabel(l,t,p,e),this.isNew=!1,Vn(this,"afterRender")}renderGridLine(e,t){let i,n=this.axis,s=n.options,r={},o=this.pos,a=this.type,l=Un(this.tickmarkOffset,n.tickmarkOffset),c=n.chart.renderer,h=this.gridLine,u=s.gridLineWidth,d=s.gridLineColor,f=s.gridLineDashStyle;"minor"===this.type&&(u=s.minorGridLineWidth,d=s.minorGridLineColor,f=s.minorGridLineDashStyle),h||(n.chart.styledMode||(r.stroke=d,r["stroke-width"]=u||0,r.dashstyle=f),a||(r.zIndex=1),e&&(t=0),this.gridLine=h=c.path().attr(r).addClass("highcharts-"+(a?a+"-":"")+"grid-line").add(n.gridGroup)),h&&(i=n.getPlotLinePath({value:o+l,lineWidth:h.strokeWidth(),force:"pass",old:e,acrossPanes:!1}))&&h[e||this.isNew?"attr":"animate"]({d:i,opacity:t})}renderMark(e,t){let i=this.axis,n=i.options,s=i.chart.renderer,r=this.type,o=i.tickSize(r?r+"Tick":"tick"),a=e.x,l=e.y,c=Un(n["minor"!==r?"tickWidth":"minorTickWidth"],!r&&i.isXAxis?1:0),h=n["minor"!==r?"tickColor":"minorTickColor"],u=this.mark,d=!u;o&&(i.opposite&&(o[0]=-o[0]),!u&&(this.mark=u=s.path().addClass("highcharts-"+(r?r+"-":"")+"tick").add(i.axisGroup),i.chart.styledMode||u.attr({stroke:h,"stroke-width":c})),u[d?"attr":"animate"]({d:this.getMarkPath(a,l,o[0],u.strokeWidth(),i.horiz,s),opacity:t}))}renderLabel(e,t,i,n){let s=this.axis,r=s.horiz,o=s.options,a=this.label,l=o.labels,c=l.step,h=Un(this.tickmarkOffset,s.tickmarkOffset),u=e.x,d=e.y,f=!0;a&&Gn(u)&&(a.xy=e=this.getLabelPosition(u,d,a,r,l,h,n,c),this.isFirst&&!this.isLast&&!o.showFirstLabel||this.isLast&&!this.isFirst&&!o.showLastLabel?f=!1:!r||l.step||l.rotation||t||0===i||this.handleOverflow(e),c&&n%c&&(f=!1),f&&Gn(e.y)?(e.opacity=i,a[this.isNewLabel?"attr":"animate"](e).show(!0),this.isNewLabel=!1):(a.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let e=this.label,t=this.axis;e&&!this.isNew&&(e.animate({opacity:0},void 0,e.destroy),delete this.label),t.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}},{animObject:Xn}=Xe,{xAxis:Yn,yAxis:Kn}=Pn,{defaultOptions:qn}=Se,{registerEventOptions:$n}=kn,{deg2rad:Zn}=T,{arrayMax:Qn,arrayMin:Jn,clamp:es,correctFloat:ts,defined:is,destroyObjectProperties:ns,erase:ss,error:rs,extend:os,fireEvent:as,getClosestDistance:ls,insertItem:cs,isArray:hs,isNumber:us,isString:ds,merge:fs,normalizeTickInterval:ps,objectEach:ms,pick:gs,relativeLength:bs,removeEvent:vs,splat:ys,syncTimeout:xs}=q,Ss=(e,t)=>ps(t,void 0,void 0,gs(e.options.allowDecimals,t<.5||void 0!==e.tickAmount),!!e.tickAmount);os(qn,{xAxis:Yn,yAxis:fs(Yn,Kn)});class Es{constructor(e,t,i){this.init(e,t,i)}init(e,t){var i,n,s,r;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.coll,a="xAxis"===o,l=this.isZAxis||(e.inverted?!a:a);this.chart=e,this.horiz=l,this.isXAxis=a,this.coll=o,as(this,"init",{userOptions:t}),this.opposite=gs(t.opposite,this.opposite),this.side=gs(t.side,this.side,l?2*!this.opposite:this.opposite?1:3),this.setOptions(t);let c=this.options,h=c.labels;null!==(i=this.type)&&void 0!==i||(this.type=c.type||"linear"),null!==(n=this.uniqueNames)&&void 0!==n||(this.uniqueNames=null===(s=c.uniqueNames)||void 0===s||s),as(this,"afterSetType"),this.userOptions=t,this.minPixelPadding=0,this.reversed=gs(c.reversed,this.reversed),this.visible=c.visible,this.zoomEnabled=c.zoomEnabled,this.hasNames="category"===this.type||!0===c.categories,this.categories=hs(c.categories)&&c.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=is(c.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},null!==(r=this.len)&&void 0!==r||(this.len=0),this.minRange=this.userMinRange=c.minRange||c.maxZoom,this.range=c.range,this.offset=c.offset||0,this.max=void 0,this.min=void 0;let u=gs(c.crosshair,ys(e.options.tooltip.crosshairs)[+!a]);this.crosshair=!0===u?{}:u,-1===e.axes.indexOf(this)&&(a?e.axes.splice(e.xAxis.length,0,this):e.axes.push(this),cs(this,e[this.coll])),e.orderItems(this.coll),this.series=this.series||[],e.inverted&&!this.isZAxis&&a&&!is(this.reversed)&&(this.reversed=!0),this.labelRotation=us(h.rotation)?h.rotation:void 0,$n(this,c),as(this,"afterInit")}setOptions(e){let t=this.horiz?{labels:{autoRotation:[-45],padding:3},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=fs(t,"yAxis"===this.coll?{title:{text:this.chart.options.lang.yAxisTitle}}:{},qn[this.coll],e),as(this,"afterSetOptions",{userOptions:e})}defaultLabelFormatter(){let e,t,i=this.axis,{numberFormatter:n}=this.chart,s=us(this.value)?this.value:NaN,r=i.chart.time,o=i.categories,a=this.dateTimeLabelFormat,l=qn.lang,c=l.numericSymbols,h=l.numericSymbolMagnitude||1e3,u=i.logarithmic?Math.abs(s):i.tickInterval,d=null===c||void 0===c?void 0:c.length;if(o)t="".concat(this.value);else if(a)t=r.dateFormat(a,s,!0);else if(d&&c&&u>=1e3)for(;d--&&void 0===t;)u>=(e=Math.pow(h,d+1))&&10*s%e==0&&null!==c[d]&&0!==s&&(t=n(s/e,-1)+c[d]);return void 0===t&&(t=Math.abs(s)>=1e4?n(s,-1):n(s,-1,void 0,"")),t}getSeriesExtremes(){let e,t=this;as(this,"getSeriesExtremes",null,(function(){t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.threshold=void 0,t.softThreshold=!t.isXAxis,t.series.forEach((i=>{if(i.reserveSpace()){let n,s,r,o=i.options,a=o.threshold;if(t.hasVisibleSeries=!0,t.positiveValuesOnly&&0>=(a||0)&&(a=void 0),t.isXAxis)(n=i.getColumn("x")).length&&(n=t.logarithmic?n.filter((e=>e>0)):n,s=(e=i.getXExtremes(n)).min,r=e.max,us(s)||s instanceof Date||(n=n.filter(us),s=(e=i.getXExtremes(n)).min,r=e.max),n.length&&(t.dataMin=Math.min(gs(t.dataMin,s),s),t.dataMax=Math.max(gs(t.dataMax,r),r)));else{let e=i.applyExtremes();us(e.dataMin)&&(s=e.dataMin,t.dataMin=Math.min(gs(t.dataMin,s),s)),us(e.dataMax)&&(r=e.dataMax,t.dataMax=Math.max(gs(t.dataMax,r),r)),is(a)&&(t.threshold=a),(!o.softThreshold||t.positiveValuesOnly)&&(t.softThreshold=!1)}}}))})),as(this,"afterGetSeriesExtremes")}translate(e,t,i,n,s,r){var o;let a=this.linkedParent||this,l=n&&a.old?a.old.min:a.min;if(!us(l))return NaN;let c=a.minPixelPadding,h=(a.isOrdinal||(null===(o=a.brokenAxis)||void 0===o?void 0:o.hasBreaks)||a.logarithmic&&s)&&!!a.lin2val,u=1,d=0,f=n&&a.old?a.old.transA:a.transA,p=0;return f||(f=a.transA),i&&(u*=-1,d=a.len),a.reversed&&(u*=-1,d-=u*(a.sector||a.len)),t?(p=(e=e*u+d-c)/f+l,h&&(p=a.lin2val(p))):(h&&(e=a.val2lin(e)),p=u*(e-l)*f+d+u*c+(us(r)?f*r:0),a.isRadial||(p=ts(p))),p}toPixels(e,t){var i,n;return this.translate(null!==(i=null===(n=this.chart)||void 0===n?void 0:n.time.parse(e))&&void 0!==i?i:NaN,!1,!this.horiz,void 0,!0)+(t?0:this.pos)}toValue(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(e){let t,i,n,s,r,o=this,a=o.chart,l=o.left,c=o.top,h=e.old,u=e.value,d=e.lineWidth,f=h&&a.oldChartHeight||a.chartHeight,p=h&&a.oldChartWidth||a.chartWidth,m=o.transB,g=e.translatedValue,b=e.force;function v(e,t,i){return"pass"!==b&&(e<t||e>i)&&(b?e=es(e,t,i):r=!0),e}let y={value:u,lineWidth:d,old:h,force:b,acrossPanes:e.acrossPanes,translatedValue:g};return as(this,"getPlotLinePath",y,(function(e){t=n=(g=es(g=gs(g,o.translate(u,void 0,void 0,h)),-1e9,1e9))+m,i=s=f-g-m,us(g)?o.horiz?(i=c,s=f-o.bottom+(o.options.isInternal?0:a.scrollablePixelsY||0),t=n=v(t,l,l+o.width)):(t=l,n=p-o.right+(a.scrollablePixelsX||0),i=s=v(i,c,c+o.height)):(r=!0,b=!1),e.path=r&&!b?void 0:a.renderer.crispLine([["M",t,i],["L",n,s]],d||1)})),y.path}getLinearTickPositions(e,t,i){let n,s,r,o=ts(Math.floor(t/e)*e),a=ts(Math.ceil(i/e)*e),l=[];if(ts(o+e)===o&&(r=20),this.single)return[t];for(n=o;n<=a&&(l.push(n),(n=ts(n+e,r))!==s);)s=n;return l}getMinorTickInterval(){let{minorTicks:e,minorTickInterval:t}=this.options;return!0===e?gs(t,"auto"):!1!==e?t:void 0}getMinorTickPositions(){var e;let t,i=this.options,n=this.tickPositions,s=this.minorTickInterval,r=this.pointRangePadding||0,o=(this.min||0)-r,a=(this.max||0)+r,l=null!==(e=this.brokenAxis)&&void 0!==e&&e.hasBreaks?this.brokenAxis.unitLength:a-o,c=[];if(l&&l/s<this.len/3){let e=this.logarithmic;if(e)this.paddedTicks.forEach((function(t,i,n){i&&c.push.apply(c,e.getLogTickPositions(s,n[i-1],n[i],!0))}));else if(this.dateTime&&"auto"===this.getMinorTickInterval())c=c.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(s),o,a,i.startOfWeek));else for(t=o+(n[0]-o)%s;t<=a&&t!==c[0];t+=s)c.push(t)}return 0!==c.length&&this.trimTicks(c),c}adjustForMinRange(){var e,t,i;let n,s,r,o,a=this.options,l=this.logarithmic,c=this.chart.time,{max:h,min:u,minRange:d}=this;this.isXAxis&&void 0===d&&!l&&(d=is(a.min)||is(a.max)||is(a.floor)||is(a.ceiling)?null:Math.min(5*(ls(this.series.map((e=>{let t=e.getColumn("x");return e.xIncrement?t.slice(0,2):t})))||0),this.dataMax-this.dataMin)),us(h)&&us(u)&&us(d)&&h-u<d&&(s=this.dataMax-this.dataMin>=d,n=(d-h+u)/2,r=[u-n,null!==(e=c.parse(a.min))&&void 0!==e?e:u-n],s&&(r[2]=l?l.log2lin(this.dataMin):this.dataMin),o=[(u=Qn(r))+d,null!==(t=c.parse(a.max))&&void 0!==t?t:u+d],s&&(o[2]=l?l.log2lin(this.dataMax):this.dataMax),(h=Jn(o))-u<d&&(r[0]=h-d,r[1]=null!==(i=c.parse(a.min))&&void 0!==i?i:h-d,u=Qn(r))),this.minRange=d,this.min=u,this.max=h}getClosest(){let e,t;if(this.categories)t=1;else{let i=[];this.series.forEach((function(e){let n=e.closestPointRange,s=e.getColumn("x");1===s.length?i.push(s[0]):e.sorted&&is(n)&&e.reserveSpace()&&(t=is(t)?Math.min(t,n):n)})),i.length&&(i.sort(((e,t)=>e-t)),e=ls([i]))}return e&&t?Math.min(e,t):e||t}nameToX(e){let t,i=hs(this.options.categories),n=i?this.categories:this.names,s=e.options.x;return e.series.requireSorting=!1,is(s)||(s=this.uniqueNames&&n?i?n.indexOf(e.name):gs(n.keys[e.name],-1):e.series.autoIncrement()),-1===s?!i&&n&&(t=n.length):us(s)&&(t=s),void 0!==t?(this.names[t]=e.name,this.names.keys[e.name]=t):e.x&&(t=e.x),t}updateNames(){let e=this,t=this.names;t.length>0&&(Object.keys(t.keys).forEach((function(e){delete t.keys[e]})),t.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach((t=>{t.xIncrement=null,(!t.points||t.isDirtyData)&&(e.max=Math.max(e.max||0,t.dataTable.rowCount-1),t.processData(),t.generatePoints());let i=t.getColumn("x").slice();t.data.forEach(((t,n)=>{let s=i[n];(null===t||void 0===t?void 0:t.options)&&void 0!==t.name&&void 0!==(s=e.nameToX(t))&&s!==t.x&&(i[n]=t.x=s)})),t.dataTable.setColumn("x",i)})))}setAxisTranslation(){var e;let t,i,n=this,s=n.max-n.min,r=n.linkedParent,o=!!n.categories,a=n.isXAxis,l=n.axisPointRange||0,c=0,h=0,u=n.transA;(a||o||l)&&(t=n.getClosest(),r?(c=r.minPointOffset,h=r.pointRangePadding):n.series.forEach((function(e){let i=o?1:a?gs(e.options.pointRange,t,0):n.axisPointRange||0,s=e.options.pointPlacement;if(l=Math.max(l,i),!n.single||o){let t=e.is("xrange")?!a:a;c=Math.max(c,t&&ds(s)?0:i/2),h=Math.max(h,t&&"on"===s?0:i)}})),i=null!==(e=n.ordinal)&&void 0!==e&&e.slope&&t?n.ordinal.slope/t:1,n.minPointOffset=c*=i,n.pointRangePadding=h*=i,n.pointRange=Math.min(l,n.single&&o?1:s),a&&(n.closestPointRange=t)),n.translationSlope=n.transA=u=n.staticScale||n.len/(s+h||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=u*c,as(this,"afterSetAxisTranslation")}minFromRange(){let{max:e,min:t}=this;return us(e)&&us(t)&&e-t||void 0}setTickInterval(e){var t;let i,n,s,r,o,{categories:a,chart:l,dataMax:c,dataMin:h,dateTime:u,isXAxis:d,logarithmic:f,options:p,softThreshold:m}=this,g=l.time,b=us(this.threshold)?this.threshold:void 0,v=this.minRange||0,{ceiling:y,floor:x,linkedTo:S,softMax:E,softMin:w}=p,T=us(S)&&(null===(t=l[this.coll])||void 0===t?void 0:t[S]),_=p.tickPixelInterval,M=p.maxPadding,P=p.minPadding,C=0,A=us(p.tickInterval)&&p.tickInterval>=0?p.tickInterval:void 0;if(u||a||T||this.getTickAmount(),r=gs(this.userMin,g.parse(p.min)),o=gs(this.userMax,g.parse(p.max)),T?(this.linkedParent=T,i=T.getExtremes(),this.min=gs(i.min,i.dataMin),this.max=gs(i.max,i.dataMax),this.type!==T.type&&rs(11,!0,l)):(m&&is(b)&&us(c)&&us(h)&&(h>=b?(n=b,P=0):c<=b&&(s=b,M=0)),this.min=gs(r,n,h),this.max=gs(o,s,c)),us(this.max)&&us(this.min)&&(f&&(this.positiveValuesOnly&&!e&&0>=Math.min(this.min,gs(h,this.min))&&rs(10,!0,l),this.min=ts(f.log2lin(this.min),16),this.max=ts(f.log2lin(this.max),16)),this.range&&us(h)&&(this.userMin=this.min=r=Math.max(h,this.minFromRange()||0),this.userMax=o=this.max,this.range=void 0)),as(this,"foundExtremes"),this.adjustForMinRange(),us(this.min)&&us(this.max)){var N;if(!us(this.userMin)&&us(w)&&w<this.min&&(this.min=r=w),!us(this.userMax)&&us(E)&&E>this.max&&(this.max=o=E),a||this.axisPointRange||null!==(N=this.stacking)&&void 0!==N&&N.usePercentage||T||(C=this.max-this.min)&&(!is(r)&&P&&(this.min-=C*P),!is(o)&&M&&(this.max+=C*M)),!us(this.userMin)&&us(x)&&(this.min=Math.max(this.min,x)),!us(this.userMax)&&us(y)&&(this.max=Math.min(this.max,y)),m&&us(h)&&us(c)){let e=b||0;!is(r)&&this.min<e&&h>=e?this.min=p.minRange?Math.min(e,this.max-v):e:!is(o)&&this.max>e&&c<=e&&(this.max=p.minRange?Math.max(e,this.min+v):e)}!l.polar&&this.min>this.max&&(is(p.min)?this.max=this.min:is(p.max)&&(this.min=this.max)),C=this.max-this.min}if(this.min!==this.max&&us(this.min)&&us(this.max)?T&&!A&&_===T.options.tickPixelInterval?this.tickInterval=A=T.tickInterval:this.tickInterval=gs(A,this.tickAmount?C/Math.max(this.tickAmount-1,1):void 0,a?1:C*_/Math.max(this.len,_)):this.tickInterval=1,d&&!e){var L,k;let e=this.min!==(null===(L=this.old)||void 0===L?void 0:L.min)||this.max!==(null===(k=this.old)||void 0===k?void 0:k.max);this.series.forEach((function(t){var i;t.forceCrop=null===(i=t.forceCropping)||void 0===i?void 0:i.call(t),t.processData(e)})),as(this,"postProcessData",{hasExtremesChanged:e})}this.setAxisTranslation(),as(this,"initialAxisTranslation"),this.pointRange&&!A&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let I=gs(p.minTickInterval,u&&!this.series.some((e=>!e.sorted))?this.closestPointRange:0);!A&&I&&this.tickInterval<I&&(this.tickInterval=I),u||f||A||(this.tickInterval=Ss(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){let e,t=this.options,i=t.tickPositions,n=t.tickPositioner,s=this.getMinorTickInterval(),r=!this.isPanning,o=r&&t.startOnTick,a=r&&t.endOnTick,l=[];if(this.tickmarkOffset=this.categories&&"between"===t.tickmarkPlacement&&1===this.tickInterval?.5:0,this.single=this.min===this.max&&is(this.min)&&!this.tickAmount&&(this.min%1==0||!1!==t.allowDecimals),i)l=i.slice();else if(us(this.min)&&us(this.max)){var c,h;if((null===(c=this.ordinal)||void 0===c||!c.positions)&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))l=[this.min,this.max],rs(19,!1,this.chart);else if(this.dateTime)l=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,t.units),this.min,this.max,t.startOfWeek,null===(h=this.ordinal)||void 0===h?void 0:h.positions,this.closestPointRange,!0);else if(this.logarithmic)l=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let e=this.tickInterval,t=e;for(;t<=2*e&&(l=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&l.length>this.tickAmount);)this.tickInterval=Ss(this,t*=1.1)}l.length>this.len&&(l=[l[0],l[l.length-1]])[0]===l[1]&&(l.length=1),n&&(this.tickPositions=l,(e=n.apply(this,[this.min,this.max]))&&(l=e))}this.tickPositions=l,this.minorTickInterval="auto"===s&&this.tickInterval?this.tickInterval/t.minorTicksPerMajor:s,this.paddedTicks=l.slice(0),this.trimTicks(l,o,a),!this.isLinked&&us(this.min)&&us(this.max)&&(this.single&&l.length<2&&!this.categories&&!this.series.some((e=>e.is("heatmap")&&"between"===e.options.pointPlacement))&&(this.min-=.5,this.max+=.5),i||e||this.adjustTickAmount()),as(this,"afterSetTickPositions")}trimTicks(e,t,i){let n=e[0],s=e[e.length-1],r=!this.isOrdinal&&this.minPointOffset||0;if(as(this,"trimTicks"),!this.isLinked||!this.grid){if(t&&n!==-1/0)this.min=n;else for(;this.min-r>e[0];)e.shift();if(i)this.max=s;else for(;this.max+r<e[e.length-1];)e.pop();0===e.length&&is(n)&&!this.options.tickPositions&&e.push((s+n)/2)}}alignToOthers(){let e,t=this,i=t.chart,n=[this],s=t.options,r=i.options.chart,o="yAxis"===this.coll&&r.alignThresholds,a=[];if(t.thresholdAlignment=void 0,(!1!==r.alignTicks&&s.alignTicks||o)&&!1!==s.startOnTick&&!1!==s.endOnTick&&!t.logarithmic){let s=e=>{let{horiz:t,options:i}=e;return[t?i.left:i.top,i.width,i.height,i.pane].join(",")},r=s(this);i[this.coll].forEach((function(i){let{series:o}=i;o.length&&o.some((e=>e.visible))&&i!==t&&s(i)===r&&(e=!0,n.push(i))}))}if(e&&o){n.forEach((e=>{let i=e.getThresholdAlignment(t);us(i)&&a.push(i)}));let e=a.length>1?a.reduce(((e,t)=>e+t),0)/a.length:void 0;n.forEach((t=>{t.thresholdAlignment=e}))}return e}getThresholdAlignment(e){if((!us(this.dataMin)||this!==e&&this.series.some((e=>e.isDirty||e.isDirtyData)))&&this.getSeriesExtremes(),us(this.threshold)){let e=es((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(e=1-e),e}}getTickAmount(){let e=this.options,t=e.tickPixelInterval,i=e.tickAmount;is(e.tickInterval)||i||!(this.len<t)||this.isRadial||this.logarithmic||!e.startOnTick||!e.endOnTick||(i=2),!i&&this.alignToOthers()&&(i=Math.ceil(this.len/t)+1),i<4&&(this.finalTickAmt=i,i=5),this.tickAmount=i}adjustTickAmount(){let e,t,i,n=this,{finalTickAmt:s,max:r,min:o,options:a,tickPositions:l,tickAmount:c,thresholdAlignment:h}=n,u=null===l||void 0===l?void 0:l.length,d=gs(n.threshold,n.softThreshold?0:null),f=n.tickInterval,p=()=>l.push(ts(l[l.length-1]+f)),m=()=>l.unshift(ts(l[0]-f));if(us(h)&&(i=h<.5?Math.ceil(h*(c-1)):Math.floor(h*(c-1)),a.reversed&&(i=c-1-i)),n.hasData()&&us(o)&&us(r)){let h=()=>{n.transA*=(u-1)/(c-1),n.min=a.startOnTick?l[0]:Math.min(o,l[0]),n.max=a.endOnTick?l[l.length-1]:Math.max(r,l[l.length-1])};if(us(i)&&us(n.threshold)){for(;l[i]!==d||l.length!==c||l[0]>o||l[l.length-1]<r;){for(l.length=0,l.push(n.threshold);l.length<c;)void 0===l[i]||l[i]>n.threshold?m():p();if(f>8*n.tickInterval)break;f*=2}h()}else if(u<c){for(;l.length<c;)l.length%2||o===d?p():m();h()}if(is(s)){for(t=e=l.length;t--;)(3===s&&t%2==1||s<=2&&t>0&&t<e-1)&&l.splice(t,1);n.finalTickAmt=void 0}}}setScale(){var e,t,i,n,s;let{coll:r,stacking:o}=this,a=!1,l=!1;this.series.forEach((e=>{var t;a=a||e.isDirtyData||e.isDirty,l=l||(null===(t=e.xAxis)||void 0===t?void 0:t.isDirty)||!1})),this.setAxisSize();let c=this.len!==(null===(e=this.old)||void 0===e?void 0:e.len);c||a||l||this.isLinked||this.forceRedraw||this.userMin!==(null===(t=this.old)||void 0===t?void 0:t.userMin)||this.userMax!==(null===(i=this.old)||void 0===i?void 0:i.userMax)||this.alignToOthers()?(o&&"yAxis"===r&&o.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),o&&"xAxis"===r&&o.buildStacks(),this.isDirty||(this.isDirty=c||this.min!==(null===(n=this.old)||void 0===n?void 0:n.min)||this.max!==(null===(s=this.old)||void 0===s?void 0:s.max))):o&&o.cleanStacks(),a&&delete this.allExtremes,as(this,"afterSetScale")}setExtremes(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,r=this.chart;this.series.forEach((e=>{delete e.kdTree})),e=r.time.parse(e),t=r.time.parse(t),as(this,"setExtremes",s=os(s,{min:e,max:t}),(e=>{this.userMin=e.min,this.userMax=e.max,this.eventArgs=e,i&&r.redraw(n)}))}setAxisSize(){let e=this.chart,t=this.options,i=t.offsets||[0,0,0,0],n=this.horiz,s=this.width=Math.round(bs(gs(t.width,e.plotWidth-i[3]+i[1]),e.plotWidth)),r=this.height=Math.round(bs(gs(t.height,e.plotHeight-i[0]+i[2]),e.plotHeight)),o=this.top=Math.round(bs(gs(t.top,e.plotTop+i[0]),e.plotHeight,e.plotTop)),a=this.left=Math.round(bs(gs(t.left,e.plotLeft+i[3]),e.plotWidth,e.plotLeft));this.bottom=e.chartHeight-r-o,this.right=e.chartWidth-s-a,this.len=Math.max(n?s:r,0),this.pos=n?a:o}getExtremes(){let e=this.logarithmic;return{min:e?ts(e.lin2log(this.min)):this.min,max:e?ts(e.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(e){let t=this.logarithmic,i=t?t.lin2log(this.min):this.min,n=t?t.lin2log(this.max):this.max;return null===e||e===-1/0?e=i:e===1/0?e=n:i>e?e=i:n<e&&(e=n),this.translate(e,0,1,0,1)}autoLabelAlign(e){let t=(gs(e,0)-90*this.side+720)%360,i={align:"center"};return as(this,"autoLabelAlign",i,(function(e){t>15&&t<165?e.align="right":t>195&&t<345&&(e.align="left")})),i.align}tickSize(e){let t,i=this.options,n=gs(i["tick"===e?"tickWidth":"minorTickWidth"],"tick"===e&&this.isXAxis&&!this.categories?1:0),s=i["tick"===e?"tickLength":"minorTickLength"];n&&s&&("inside"===i[e+"Position"]&&(s=-s),t=[s,n]);let r={tickSize:t};return as(this,"afterTickSize",r),r.tickSize}labelMetrics(){let e=this.chart.renderer,t=this.ticks,i=t[Object.keys(t)[0]]||{};return this.chart.renderer.fontMetrics(i.label||i.movedLabel||e.box)}unsquish(){let e,t,i=this.options.labels,n=i.padding||0,s=this.horiz,r=this.tickInterval,o=this.len/((+!!this.categories+this.max-this.min)/r),a=i.rotation,l=ts(.8*this.labelMetrics().h),c=Math.max(this.max-this.min,0),h=function(e){let t=(e+2*n)/(o||1);return(t=t>1?Math.ceil(t):1)*r>c&&e!==1/0&&o!==1/0&&c&&(t=Math.ceil(c/r)),ts(t*r)},u=r,d=Number.MAX_VALUE;if(s){if(!i.staggerLines&&(us(a)?t=[a]:o<i.autoRotationLimit&&(t=i.autoRotation)),t){let i,n;for(let s of t)(s===a||s&&s>=-90&&s<=90)&&(n=(i=h(Math.abs(l/Math.sin(Zn*s))))+Math.abs(s/360))<d&&(d=n,e=s,u=i)}}else u=h(.75*l);return this.autoRotation=t,this.labelRotation=gs(e,us(a)?a:0),i.step?r:u}getSlotWidth(e){let t=this.chart,i=this.horiz,n=this.options.labels,s=Math.max(this.tickPositions.length-!this.categories,1),r=t.margin[3];if(e&&us(e.slotWidth))return e.slotWidth;if(i&&n.step<2&&!this.isRadial)return n.rotation?0:(this.staggerLines||1)*this.len/s;if(!i){let e=n.style.width;if(void 0!==e)return parseInt(String(e),10);if(!this.opposite&&r)return r-t.spacing[3]}return.33*t.chartWidth}renderUnsquish(){let e,t=this.chart,i=t.renderer,n=this.tickPositions,s=this.ticks,r=this.options.labels,o=r.style,a=this.horiz,l=this.getSlotWidth(),c=Math.max(1,Math.round(l-(a?2*(r.padding||0):r.distance||0))),h={},u=this.labelMetrics(),d=o.lineClamp,f=null!==d&&void 0!==d?d:Math.floor(this.len/(n.length*u.h))||1,p=0;ds(r.rotation)||(h.rotation=r.rotation||0),n.forEach((function(e){var t;let i=s[e];i.movedLabel&&i.replaceMovedLabel();let n=(null===(t=i.label)||void 0===t?void 0:t.textPxLength)||0;n>p&&(p=n)})),this.maxLabelLength=p,this.autoRotation?p>c&&p>u.h?h.rotation=this.labelRotation:this.labelRotation=0:l&&(e=c),h.rotation&&(e=p>.5*t.chartHeight?.33*t.chartHeight:p,d||(f=1)),this.labelAlign=r.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(h.align=this.labelAlign),n.forEach((function(t){let i=s[t],n=null===i||void 0===i?void 0:i.label,r=o.width,a={};n&&(n.attr(h),i.shortenLabel?i.shortenLabel():e&&!r&&"nowrap"!==o.whiteSpace&&(e<(n.textPxLength||0)||"SPAN"===n.element.tagName)?n.css(os(a,{width:"".concat(e,"px"),lineClamp:f})):!n.styles.width||a.width||r||n.css({width:"auto"}),i.rotation=h.rotation)}),this),this.tickRotCorr=i.rotCorr(u.b,this.labelRotation||0,0!==this.side)}hasData(){return this.series.some((function(e){return e.hasData()}))||this.options.showEmpty&&is(this.min)&&is(this.max)}addTitle(e){let t,i=this.chart.renderer,n=this.horiz,s=this.opposite,r=this.options.title,o=this.chart.styledMode;this.axisTitle||((t=r.textAlign)||(t=(n?{low:"left",middle:"center",high:"right"}:{low:s?"right":"left",middle:"center",high:s?"left":"right"})[r.align]),this.axisTitle=i.text(r.text||"",0,0,r.useHTML).attr({zIndex:7,rotation:r.rotation||0,align:t}).addClass("highcharts-axis-title"),o||this.axisTitle.css(fs(r.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),o||r.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[e?"show":"hide"](e)}generateTick(e){let t=this.ticks;t[e]?t[e].addLabel():t[e]=new Hn(this,e)}createGroups(){let{axisParent:e,chart:t,coll:i,options:n}=this,s=t.renderer,r=(t,r,o)=>s.g(t).attr({zIndex:o}).addClass("highcharts-".concat(i.toLowerCase()).concat(r," ")+(this.isRadial?"highcharts-radial-axis".concat(r," "):"")+(n.className||"")).add(e);this.axisGroup||(this.gridGroup=r("grid","-grid",n.gridZIndex),this.axisGroup=r("axis","",n.zIndex),this.labelGroup=r("axis-labels","-labels",n.labels.zIndex))}getOffset(){let e,t,i,n,s=this,{chart:r,horiz:o,options:a,side:l,ticks:c,tickPositions:h,coll:u}=s,d=r.inverted&&!s.isZAxis?[1,0,3,2][l]:l,f=s.hasData(),p=a.title,m=a.labels,g=us(a.crossing),b=r.axisOffset,v=r.clipOffset,y=[-1,1,1,-1][l],x=0,S=0,E=0;if(s.showAxis=e=f||a.showEmpty,s.staggerLines=s.horiz&&m.staggerLines||void 0,s.createGroups(),f||s.isLinked?(h.forEach((function(e){s.generateTick(e)})),s.renderUnsquish(),s.reserveSpaceDefault=0===l||2===l||{1:"left",3:"right"}[l]===s.labelAlign,gs(m.reserveSpace,!g&&null,"center"===s.labelAlign||null,s.reserveSpaceDefault)&&h.forEach((function(e){E=Math.max(c[e].getLabelSize(),E)})),s.staggerLines&&(E*=s.staggerLines),s.labelOffset=E*(s.opposite?-1:1)):ms(c,(function(e,t){e.destroy(),delete c[t]})),null!==p&&void 0!==p&&p.text&&!1!==p.enabled&&(s.addTitle(e),e&&!g&&!1!==p.reserveSpace&&(s.titleOffset=x=s.axisTitle.getBBox()[o?"height":"width"],S=is(t=p.offset)?0:gs(p.margin,o?5:10))),s.renderLine(),s.offset=y*gs(a.offset,b[l]?b[l]+(a.margin||0):0),s.tickRotCorr=s.tickRotCorr||{x:0,y:0},n=0===l?-s.labelMetrics().h:2===l?s.tickRotCorr.y:0,i=Math.abs(E)+S,E&&(i-=n,i+=y*(o?gs(m.y,s.tickRotCorr.y+y*m.distance):gs(m.x,y*m.distance))),s.axisTitleMargin=gs(t,i),s.getMaxLabelDimensions&&(s.maxLabelDimensions=s.getMaxLabelDimensions(c,h)),"colorAxis"!==u&&v){let e=this.tickSize("tick");b[l]=Math.max(b[l],(s.axisTitleMargin||0)+x+y*s.offset,i,null!==h&&void 0!==h&&h.length&&e?e[0]+y*s.offset:0);let t=!s.axisLine||a.offset?0:s.axisLine.strokeWidth()/2;v[d]=Math.max(v[d],t)}as(this,"afterGetOffset")}getLinePath(e){let t=this.chart,i=this.opposite,n=this.offset,s=this.horiz,r=this.left+(i?this.width:0)+n,o=t.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(e*=-1),t.renderer.crispLine([["M",s?this.left:r,s?o:this.top],["L",s?t.chartWidth-this.right:r,s?o:t.chartHeight-this.bottom]],e)}renderLine(){!this.axisLine&&(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(e){let t=this.horiz,i=this.left,n=this.top,s=this.len,r=this.options.title,o=t?i:n,a=this.opposite,l=this.offset,c=r.x,h=r.y,u=this.chart.renderer.fontMetrics(e),d=e?Math.max(e.getBBox(!1,0).height-u.h-1,0):0,f={low:o+(t?0:s),middle:o+s/2,high:o+(t?s:0)}[r.align],p=(t?n+this.height:i)+(t?1:-1)*(a?-1:1)*(this.axisTitleMargin||0)+[-d,d,u.f,-d][this.side],m={x:t?f+c:p+(a?this.width:0)+l+c,y:t?p+h-(a?this.height:0)+l:f+h};return as(this,"afterGetTitlePosition",{titlePosition:m}),m}renderMinorTick(e,t){let i=this.minorTicks;i[e]||(i[e]=new Hn(this,e,"minor")),t&&i[e].isNew&&i[e].render(null,!0),i[e].render(null,!1,1)}renderTick(e,t,i){var n;let s=this.isLinked,r=this.ticks;(!s||e>=this.min&&e<=this.max||(null===(n=this.grid)||void 0===n?void 0:n.isColumn))&&(r[e]||(r[e]=new Hn(this,e)),i&&r[e].isNew&&r[e].render(t,!0,-1),r[e].render(t))}render(){let e,t,i=this,n=i.chart,s=i.logarithmic,r=n.renderer,o=i.options,a=i.isLinked,l=i.tickPositions,c=i.axisTitle,h=i.ticks,u=i.minorTicks,d=i.alternateBands,f=o.stackLabels,p=o.alternateGridColor,m=o.crossing,g=i.tickmarkOffset,b=i.axisLine,v=i.showAxis,y=Xn(r.globalAnimation);if(i.labelEdge.length=0,i.overlap=!1,[h,u,d].forEach((function(e){ms(e,(function(e){e.isActive=!1}))})),us(m)){let e=this.isXAxis?n.yAxis[0]:n.xAxis[0],t=[1,-1,-1,1][this.side];if(e){let n=e.toPixels(m,!0);i.horiz&&(n=e.len-n),i.offset=t*n}}if(i.hasData()||a){let r=i.chart.hasRendered&&i.old&&us(i.old.min);i.minorTickInterval&&!i.categories&&i.getMinorTickPositions().forEach((function(e){i.renderMinorTick(e,r)})),l.length&&(l.forEach((function(e,t){i.renderTick(e,t,r)})),g&&(0===i.min||i.single)&&(h[-1]||(h[-1]=new Hn(i,-1,null,!0)),h[-1].render(-1))),p&&l.forEach((function(r,o){t=void 0!==l[o+1]?l[o+1]+g:i.max-g,o%2==0&&r<i.max&&t<=i.max+(n.polar?-g:g)&&(d[r]||(d[r]=new T.PlotLineOrBand(i,{})),e=r+g,d[r].options={from:s?s.lin2log(e):e,to:s?s.lin2log(t):t,color:p,className:"highcharts-alternate-grid"},d[r].render(),d[r].isActive=!0)})),i._addedPlotLB||(i._addedPlotLB=!0,(o.plotLines||[]).concat(o.plotBands||[]).forEach((function(e){i.addPlotBandOrLine(e)})))}[h,u,d].forEach((function(e){let t=[],i=y.duration;ms(e,(function(e,i){e.isActive||(e.render(i,!1,0),e.isActive=!1,t.push(i))})),xs((function(){let i=t.length;for(;i--;)e[t[i]]&&!e[t[i]].isActive&&(e[t[i]].destroy(),delete e[t[i]])}),e!==d&&n.hasRendered&&i?i:0)})),b&&(b[b.isPlaced?"animate":"attr"]({d:this.getLinePath(b.strokeWidth())}),b.isPlaced=!0,b[v?"show":"hide"](v)),c&&v&&(c[c.isNew?"attr":"animate"](i.getTitlePosition(c)),c.isNew=!1),null!==f&&void 0!==f&&f.enabled&&i.stacking&&i.stacking.renderStackTotals(),i.old={len:i.len,max:i.max,min:i.min,transA:i.transA,userMax:i.userMax,userMin:i.userMin},i.isDirty=!1,as(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach((function(e){e.render()}))),this.series.forEach((function(e){e.isDirty=!0}))}getKeepProps(){return this.keepProps||Es.keepProps}destroy(e){let t=this,i=t.plotLinesAndBands,n=this.eventOptions;if(as(this,"destroy",{keepEvents:e}),e||vs(t),[t.ticks,t.minorTicks,t.alternateBands].forEach((function(e){ns(e)})),i){let e=i.length;for(;e--;)i[e].destroy()}for(let s in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach((function(e){t[e]&&(t[e]=t[e].destroy())})),t.plotLinesAndBandsGroups)t.plotLinesAndBandsGroups[s]=t.plotLinesAndBandsGroups[s].destroy();ms(t,(function(e,i){-1===t.getKeepProps().indexOf(i)&&delete t[i]})),this.eventOptions=n}drawCrosshair(e,t){var i,n;let s,r,o,a,l=this.crosshair,c=null===(i=null===l||void 0===l?void 0:l.snap)||void 0===i||i,h=this.chart,u=this.cross;if(as(this,"drawCrosshair",{e:e,point:t}),e||(e=null===(n=this.cross)||void 0===n?void 0:n.e),l&&!1!==(is(t)||!c)){var d,f;if(c?is(t)&&(r=gs("colorAxis"!==this.coll?t.crosshairPos:null,this.isXAxis?t.plotX:this.len-t.plotY)):r=e&&(this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos),is(r)&&(a={value:t&&(this.isXAxis?t.x:gs(t.stackY,t.y)),translatedValue:r},h.polar&&os(a,{isCrosshair:!0,chartX:null===(d=e)||void 0===d?void 0:d.chartX,chartY:null===(f=e)||void 0===f?void 0:f.chartY,point:t}),s=this.getPlotLinePath(a)||null),!is(s))return void this.hideCrosshair();o=this.categories&&!this.isRadial,u||(this.cross=u=h.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(o?"category ":"thin ")+(l.className||"")).attr({zIndex:gs(l.zIndex,2)}).add(),!h.styledMode&&(u.attr({stroke:l.color||(o?Ne.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":gs(l.width,1)}).css({"pointer-events":"none"}),l.dashStyle&&u.attr({dashstyle:l.dashStyle}))),u.show().attr({d:s}),o&&!l.width&&u.attr({"stroke-width":this.transA}),this.cross.e=e}else this.hideCrosshair();as(this,"afterDrawCrosshair",{e:e,point:t})}hideCrosshair(){this.cross&&this.cross.hide(),as(this,"afterHideCrosshair")}update(e,t){let i=this.chart;e=fs(this.userOptions,e),this.destroy(!0),this.init(i,e),i.isDirtyBox=!0,gs(t,!0)&&i.redraw()}remove(e){let t=this.chart,i=this.coll,n=this.series,s=n.length;for(;s--;)n[s]&&n[s].remove(!1);ss(t.axes,this),ss(t[i]||[],this),t.orderItems(i),this.destroy(),t.isDirtyBox=!0,gs(e,!0)&&t.redraw()}setTitle(e,t){this.update({title:e},t)}setCategories(e,t){this.update({categories:e},t)}}Es.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"];let{addEvent:ws,getMagnitude:Ts,normalizeTickInterval:_s,timeUnits:Ms}=q;!function(e){function t(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function i(){"datetime"===this.type?this.dateTime||(this.dateTime=new n(this)):this.dateTime=void 0}e.compose=function(e){return e.keepProps.includes("dateTime")||(e.keepProps.push("dateTime"),e.prototype.getTimeTicks=t,ws(e,"afterSetType",i)),e};class n{constructor(e){this.axis=e}normalizeTimeTickInterval(e,t){let i,n=t||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],s=n[n.length-1],r=Ms[s[0]],o=s[1];for(i=0;i<n.length&&(r=Ms[(s=n[i])[0]],o=s[1],!n[i+1]||!(e<=(r*o[o.length-1]+Ms[n[i+1][0]])/2));i++);return r===Ms.year&&e<5*r&&(o=[1,2,5]),{unitRange:r,count:_s(e/r,o,"year"===s[0]?Math.max(Ts(e/r),1):1),unitName:s[0]}}getXDateFormat(e,t){let{axis:i}=this,n=i.chart.time;return i.closestPointRange?n.getDateFormat(i.closestPointRange,e,i.options.startOfWeek,t)||n.resolveDTLFormat(t.year).main:n.resolveDTLFormat(t.day).main}}e.Additions=n}(c||(c={}));let Ps=c,{addEvent:Cs,normalizeTickInterval:As,pick:Ns}=q;!function(e){function t(){var e;"logarithmic"!==this.type?this.logarithmic=void 0:null!==(e=this.logarithmic)&&void 0!==e||(this.logarithmic=new n(this))}function i(){let e=this.logarithmic;e&&(this.lin2val=function(t){return e.lin2log(t)},this.val2lin=function(t){return e.log2lin(t)})}e.compose=function(e){return e.keepProps.includes("logarithmic")||(e.keepProps.push("logarithmic"),Cs(e,"afterSetType",t),Cs(e,"afterInit",i)),e};class n{constructor(e){this.axis=e}getLogTickPositions(e,t,i,n){let s=this.axis,r=s.len,o=s.options,a=[];if(n||(this.minorAutoInterval=void 0),e>=.5)e=Math.round(e),a=s.getLinearTickPositions(e,t,i);else if(e>=.08){let s,r,o,l,c,h,u;for(s=e>.3?[1,2,4]:e>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],r=Math.floor(t);r<i+1&&!u;r++)for(o=0,l=s.length;o<l&&!u;o++)(c=this.log2lin(this.lin2log(r)*s[o]))>t&&(!n||h<=i)&&void 0!==h&&a.push(h),h>i&&(u=!0),h=c}else{let l=this.lin2log(t),c=this.lin2log(i),h=n?s.getMinorTickInterval():o.tickInterval,u=o.tickPixelInterval/(n?5:1),d=n?r/s.tickPositions.length:r;e=As(e=Ns("auto"===h?null:h,this.minorAutoInterval,(c-l)*u/(d||1))),a=s.getLinearTickPositions(e,l,c).map(this.log2lin),n||(this.minorAutoInterval=e/5)}return n||(s.tickInterval=e),a}lin2log(e){return Math.pow(10,e)}log2lin(e){return Math.log(e)/Math.LN10}}e.Additions=n}(h||(h={}));let Ls=h,{erase:ks,extend:Is,isNumber:Rs}=q;!function(e){let t;function i(e){return this.addPlotBandOrLine(e,"plotBands")}function n(e,i){let n=this.userOptions,s=new t(this,e);if(this.visible&&(s=s.render()),s){if(this._addedPlotLB||(this._addedPlotLB=!0,(n.plotLines||[]).concat(n.plotBands||[]).forEach((e=>{this.addPlotBandOrLine(e)}))),i){let t=n[i]||[];t.push(e),n[i]=t}this.plotLinesAndBands.push(s)}return s}function s(e){return this.addPlotBandOrLine(e,"plotLines")}function r(e,t,i){i=i||this.options;let n,s,r=this.getPlotLinePath({value:t,force:!0,acrossPanes:i.acrossPanes}),o=[],a=this.horiz,l=!Rs(this.min)||!Rs(this.max)||e<this.min&&t<this.min||e>this.max&&t>this.max,c=this.getPlotLinePath({value:e,force:!0,acrossPanes:i.acrossPanes}),h=1;if(c&&r)for(l&&(s=c.toString()===r.toString(),h=0),n=0;n<c.length;n+=2){let e=c[n],t=c[n+1],i=r[n],l=r[n+1];("M"===e[0]||"L"===e[0])&&("M"===t[0]||"L"===t[0])&&("M"===i[0]||"L"===i[0])&&("M"===l[0]||"L"===l[0])&&(a&&i[1]===e[1]?(i[1]+=h,l[1]+=h):a||i[2]!==e[2]||(i[2]+=h,l[2]+=h),o.push(["M",e[1],e[2]],["L",t[1],t[2]],["L",l[1],l[2]],["L",i[1],i[2]],["Z"])),o.isFlat=s}return o}function o(e){this.removePlotBandOrLine(e)}function a(e){let t=this.plotLinesAndBands,i=this.options,n=this.userOptions;if(t){let s=t.length;for(;s--;)t[s].id===e&&t[s].destroy();[i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]].forEach((function(t){for(s=t.length;s--;){var i;(null===(i=t[s])||void 0===i?void 0:i.id)===e&&ks(t,t[s])}}))}}function l(e){this.removePlotBandOrLine(e)}e.compose=function(e,c){let h=c.prototype;return h.addPlotBand||(t=e,Is(h,{addPlotBand:i,addPlotLine:s,addPlotBandOrLine:n,getPlotBandPath:r,removePlotBand:o,removePlotLine:l,removePlotBandOrLine:a})),c}}(u||(u={}));let Os=u,{addEvent:Ds,arrayMax:Bs,arrayMin:Fs,defined:Vs,destroyObjectProperties:js,erase:Gs,fireEvent:Ws,merge:zs,objectEach:Us,pick:Hs}=q;class Xs{static compose(e,t){return Ds(e,"afterInit",(function(){this.labelCollectors.push((()=>{let e=[];for(let i of this.axes)for(let{label:n,options:s}of i.plotLinesAndBands){var t;n&&(null===s||void 0===s||null===(t=s.label)||void 0===t||!t.allowOverlap)&&e.push(n)}return e}))})),Os.compose(Xs,t)}constructor(e,t){this.axis=e,this.options=t,this.id=t.id}render(){var e,t,i;Ws(this,"render");let n,{axis:s,options:o}=this,{horiz:a,logarithmic:l}=s,{color:c,events:h,zIndex:u=0}=o,{renderer:d,time:f}=s.chart,p={},m=f.parse(o.to),g=f.parse(o.from),b=f.parse(o.value),v=o.borderWidth,y=o.label,{label:x,svgElem:S}=this,E=[],w=Vs(g)&&Vs(m),T=Vs(b),_=!S,M={class:"highcharts-plot-"+(w?"band ":"line ")+(o.className||"")},P=w?"bands":"lines";if(!s.chart.styledMode&&(T?(M.stroke=c||"#999999",M["stroke-width"]=Hs(o.width,1),o.dashStyle&&(M.dashstyle=o.dashStyle)):w&&(M.fill=c||"#e6e9ff",v&&(M.stroke=o.borderColor,M["stroke-width"]=v))),p.zIndex=u,P+="-"+u,(n=s.plotLinesAndBandsGroups[P])||(s.plotLinesAndBandsGroups[P]=n=d.g("plot-"+P).attr(p).add()),S||(this.svgElem=S=d.path().attr(M).add(n)),Vs(b))E=s.getPlotLinePath({value:null!==(e=null===l||void 0===l?void 0:l.log2lin(b))&&void 0!==e?e:b,lineWidth:S.strokeWidth(),acrossPanes:o.acrossPanes});else{var C,A;if(!Vs(g)||!Vs(m))return;E=s.getPlotBandPath(null!==(C=null===l||void 0===l?void 0:l.log2lin(g))&&void 0!==C?C:g,null!==(A=null===l||void 0===l?void 0:l.log2lin(m))&&void 0!==A?A:m,o)}return!this.eventsAdded&&h&&(Us(h,((e,t)=>{var i;null===(i=S)||void 0===i||i.on(t,(e=>{h[t].apply(this,[e])}))})),this.eventsAdded=!0),!_&&S.d||null===(t=E)||void 0===t||!t.length?S&&(E?(S.show(),S.animate({d:E})):S.d&&(S.hide(),x&&(this.label=x=x.destroy()))):S.attr({d:E}),y&&(Vs(y.text)||Vs(y.formatter))&&null!==(i=E)&&void 0!==i&&i.length&&s.width>0&&s.height>0&&!E.isFlat?(y=zs(r({align:a&&w?"center":void 0,x:a?!w&&4:10,verticalAlign:!a&&w?"middle":void 0,y:a?w?16:10:w?6:-4,rotation:a&&!w?90:0},w?{inside:!0}:{}),y),this.renderLabel(y,E,w,u)):x&&x.hide(),this}renderLabel(e,t,i,n){var s,r;let o=this.axis,a=o.chart.renderer,l=e.inside,c=this.label;c||(this.label=c=a.text(this.getLabelText(e),0,0,e.useHTML).attr({align:e.textAlign||e.align,rotation:e.rotation,class:"highcharts-plot-"+(i?"band":"line")+"-label "+(e.className||""),zIndex:n}),o.chart.styledMode||c.css(zs({color:null===(s=o.chart.options.title)||void 0===s||null===(s=s.style)||void 0===s?void 0:s.color,fontSize:"0.8em",textOverflow:i&&!l?"":"ellipsis"},e.style)),c.add());let h=t.xBounds||[t[0][1],t[1][1],i?t[2][1]:t[0][1]],u=t.yBounds||[t[0][2],t[1][2],i?t[2][2]:t[0][2]],d=Fs(h),f=Fs(u),p=Bs(h)-d;c.align(e,!1,{x:d,y:f,width:p,height:Bs(u)-f}),c.alignAttr.y-=a.fontMetrics(c).b,(!c.alignValue||"left"===c.alignValue||Vs(l))&&c.css({width:((null===(r=e.style)||void 0===r?void 0:r.width)||(i&&l?p:90===c.rotation?o.height-(c.alignAttr.y-o.top):(e.clip?o.width:o.chart.chartWidth)-(c.alignAttr.x-o.left)))+"px"}),c.show(!0)}getLabelText(e){return Vs(e.formatter)?e.formatter.call(this):e.text}destroy(){Gs(this.axis.plotLinesAndBands,this),delete this.axis,js(this)}}let{animObject:Ys}=Xe,{format:Ks}=wt,{composed:qs,dateFormats:$s,doc:Zs,isSafari:Qs}=T,{distribute:Js}=At,{addEvent:er,clamp:tr,css:ir,discardElement:nr,extend:sr,fireEvent:rr,getAlignFactor:or,isArray:ar,isNumber:lr,isObject:cr,isString:hr,merge:ur,pick:dr,pushUnique:fr,splat:pr,syncTimeout:mr}=q;class gr{constructor(e,t,i){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=e,this.init(e,t),this.pointer=i}bodyFormatter(e){return e.map((e=>{let t=e.series.tooltipOptions,i=e.formatPrefix||"point";return(t[i+"Formatter"]||e.tooltipFormatter).call(e,t[i+"Format"]||"")}))}cleanSplit(e){this.chart.series.forEach((function(t){let i=null===t||void 0===t?void 0:t.tt;i&&(!i.isActive||e?t.tt=i.destroy():i.isActive=!1)}))}defaultFormatter(e){let t,i=this.points||pr(this);return(t=(t=[e.headerFooterFormatter(i[0])]).concat(e.bodyFormatter(i))).push(e.headerFooterFormatter(i[0],!0)),t}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),nr(this.container)),q.clearTimeout(this.hideTimer)}getAnchor(e,t){var i;let n,{chart:s,pointer:r}=this,o=s.inverted,a=s.plotTop,l=s.plotLeft;if(null!==(i=(e=pr(e))[0].series)&&void 0!==i&&i.yAxis&&!e[0].series.yAxis.options.reversedStacks&&(e=e.slice().reverse()),this.followPointer&&t)void 0===t.chartX&&(t=r.normalize(t)),n=[t.chartX-l,t.chartY-a];else if(e[0].tooltipPos)n=e[0].tooltipPos;else{let i=0,s=0;e.forEach((function(e){let t=e.pos(!0);t&&(i+=t[0],s+=t[1])})),i/=e.length,s/=e.length,this.shared&&e.length>1&&t&&(o?i=t.chartX:s=t.chartY),n=[i-l,s-a]}let c={point:e[0],ret:n};return rr(this,"getAnchor",c),c.ret.map(Math.round)}getClassName(e,t,i){let n=this.options,s=e.series,r=s.options;return[n.className,"highcharts-label",i&&"highcharts-tooltip-header",t?"highcharts-tooltip-box":"highcharts-tooltip",!i&&"highcharts-color-"+dr(e.colorIndex,s.colorIndex),null===r||void 0===r?void 0:r.className].filter(hr).join(" ")}getLabel(){let{anchorX:e,anchorY:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{anchorX:0,anchorY:0},i=this,n=this.chart.styledMode,s=this.options,r=this.split&&this.allowShared,o=this.container,a=this.chart.renderer;if(this.label){let e=!this.label.hasClass("highcharts-label");(!r&&e||r&&!e)&&this.destroy()}if(!this.label){var l;if(this.outside){let e=this.chart,t=e.options.chart.style,i=Tt.getRendererType();this.container=o=T.doc.createElement("div"),o.className="highcharts-tooltip-container "+(e.renderTo.className.match(/(highcharts[a-zA-Z0-9-]+)\s?/gm)||""),ir(o,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,((null===t||void 0===t?void 0:t.zIndex)||0)+3)}),this.renderer=a=new i(o,0,0,t,void 0,void 0,a.styledMode)}if(r?this.label=a.g("tooltip"):(this.label=a.label("",e,t,s.shape||"callout",void 0,void 0,s.useHTML,void 0,"tooltip").attr({padding:s.padding,r:s.borderRadius}),n||this.label.attr({fill:s.backgroundColor,"stroke-width":s.borderWidth||0}).css(s.style).css({pointerEvents:s.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),i.outside){let e=this.label;[e.xSetter,e.ySetter].forEach(((t,n)=>{e[n?"ySetter":"xSetter"]=s=>{t.call(e,i.distance),e[n?"y":"x"]=s,o&&(o.style[n?"top":"left"]="".concat(s,"px"))}}))}this.label.attr({zIndex:8}).shadow(null!==(l=s.shadow)&&void 0!==l?l:!s.fixed).add()}return o&&!o.parentElement&&T.doc.body.appendChild(o),this.label}getPlayingField(){let{body:e,documentElement:t}=Zs,{chart:i,distance:n,outside:s}=this;return{width:s?Math.max(e.scrollWidth,t.scrollWidth,e.offsetWidth,t.offsetWidth,t.clientWidth)-2*n-2:i.chartWidth,height:s?Math.max(e.scrollHeight,t.scrollHeight,e.offsetHeight,t.offsetHeight,t.clientHeight):i.chartHeight}}getPosition(e,t,i){var n;let s,{distance:r,chart:o,outside:a,pointer:l}=this,{inverted:c,plotLeft:h,plotTop:u,polar:d}=o,{plotX:f=0,plotY:p=0}=i,m={},g=c&&i.h||0,{height:b,width:v}=this.getPlayingField(),y=l.getChartPosition(),x=e=>e*y.scaleX,S=e=>e*y.scaleY,E=i=>{let n="x"===i;return[i,n?v:b,n?e:t].concat(a?[n?x(e):S(t),n?y.left-r+x(f+h):y.top-r+S(p+u),0,n?v:b]:[n?e:t,n?f+h:p+u,n?h:u,n?h+o.plotWidth:u+o.plotHeight])},w=E("y"),T=E("x"),_=!!i.negative;!d&&(null===(n=o.hoverSeries)||void 0===n||null===(n=n.yAxis)||void 0===n?void 0:n.reversed)&&(_=!_);let M=!this.followPointer&&dr(i.ttBelow,!d&&!c===_),P=function(e,t,i,n,s,o,l){let c=a?"y"===e?S(r):x(r):r,h=(i-n)/2,u=n<s-r,d=s+r+n<t,f=s-c-i+h,p=s+c-h;if(M&&d)m[e]=p;else if(!M&&u)m[e]=f;else if(u)m[e]=Math.min(l-n,f-g<0?f:f-g);else{if(!d)return m[e]=0,!1;m[e]=Math.max(o,p+g+i>t?p:p+g)}},C=function(e,t,i,n,s){if(s<r||s>t-r)return!1;m[e]=s<i/2?1:s>t-n/2?t-n-2:s-i/2},A=function(e){[w,T]=[T,w],s=e},N=()=>{!1!==P.apply(0,w)?!1!==C.apply(0,T)||s||(A(!0),N()):s?m.x=m.y=0:(A(!0),N())};return(c&&!d||this.len>1)&&A(),N(),m}getFixedPosition(e,t,i){var n;let s=i.series,{chart:r,options:o,split:a}=this,l=o.position,c=l.relativeTo,h=o.shared||null!==s&&void 0!==s&&null!==(n=s.yAxis)&&void 0!==n&&n.isRadial&&("pane"===c||!c)?"plotBox":c,u="chart"===h?r.renderer:r[h]||r.getClipBox(s,!0);return{x:u.x+(u.width-e)*or(l.align)+l.x,y:u.y+(u.height-t)*or(l.verticalAlign)+(!a&&l.y||0)}}hide(e){let t=this;q.clearTimeout(this.hideTimer),e=dr(e,this.options.hideDelay),this.isHidden||(this.hideTimer=mr((function(){let i=t.getLabel();t.getLabel().animate({opacity:0},{duration:e?150:e,complete:()=>{i.hide(),t.container&&t.container.remove()}}),t.isHidden=!0}),e))}init(e,t){this.chart=e,this.options=t,this.crosshairs=[],this.isHidden=!0,this.split=t.split&&!e.inverted&&!e.polar,this.shared=t.shared||this.split,this.outside=dr(t.outside,!(!e.scrollablePixelsX&&!e.scrollablePixelsY))}shouldStickOnContact(e){return!(this.followPointer||!this.options.stickOnContact||e&&!this.pointer.inClass(e.target,"highcharts-tooltip"))}move(e,t,i,n){let{followPointer:s,options:r}=this,o=Ys(!s&&!this.isHidden&&!r.fixed&&r.animation),a={x:e,y:t};s||(this.len||0)>1?a.anchorX=a.anchorY=NaN:(a.anchorX=i,a.anchorY=n),o.step=()=>this.drawTracker(),this.getLabel().animate(a,o)}refresh(e,t){let{chart:i,options:n,pointer:s,shared:r}=this,o=pr(e),a=o[0],l=n.format,c=n.formatter||this.defaultFormatter,h=i.styledMode,u=this.allowShared;if(!n.enabled||!a.series)return;q.clearTimeout(this.hideTimer),this.allowShared=!(!ar(e)&&e.series&&e.series.noSharedTooltip),u=u&&!this.allowShared,this.followPointer=!this.split&&a.series.tooltipOptions.followPointer;let d=this.getAnchor(e,t),f=d[0],p=d[1];r&&this.allowShared&&(s.applyInactiveState(o),o.forEach((e=>e.setState("hover"))),a.points=o),this.len=o.length;let m=hr(l)?Ks(l,a,i):c.call(a,this);a.points=void 0;let g=a.series;if(this.distance=dr(g.tooltipOptions.distance,16),!1===m)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(m,o);else{let e=f,r=p;if(t&&s.isDirectTouch&&(e=t.chartX-i.plotLeft,r=t.chartY-i.plotTop),!i.polar&&!1!==g.options.clip&&!o.some((t=>s.isDirectTouch||t.series.shouldShowTooltip(e,r))))return void this.hide();{let e=this.getLabel(u&&this.tt||{});(!n.style.width||h)&&e.css({width:(this.outside?this.getPlayingField():i.spacingBox).width+"px"}),e.attr({class:this.getClassName(a),text:m&&m.join?m.join(""):m}),this.outside&&e.attr({x:tr(e.x||0,0,this.getPlayingField().width-(e.width||0)-1)}),h||e.attr({stroke:n.borderColor||a.color||g.color||"#666666"}),this.updatePosition({plotX:f,plotY:p,negative:a.negative,ttBelow:a.ttBelow,series:g,h:d[2]||0})}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}rr(this,"refresh")}renderSplit(e,t){var i,n;let s=this,{chart:r,chart:{chartWidth:o,chartHeight:a,plotHeight:l,plotLeft:c,plotTop:h,scrollablePixelsY:u=0,scrollablePixelsX:d,styledMode:f},distance:p,options:m,options:{fixed:g,position:b,positioner:v},pointer:y}=s,{scrollLeft:x=0,scrollTop:S=0}=(null===(i=r.scrollablePlotArea)||void 0===i?void 0:i.scrollingContainer)||{},E=s.outside&&"number"!=typeof d?Zs.documentElement.getBoundingClientRect():{left:x,right:x+o,top:S,bottom:S+a},w=s.getLabel(),T=this.renderer||r.renderer,_=!(null===(n=r.xAxis[0])||void 0===n||!n.opposite),{left:M,top:P}=y.getChartPosition(),C=v||g,A=h+S,N=0,L=l-u,k=function(e,t,i){let n,r,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(i.isHeader)r=_?0:L,n=tr(o[0]-e/2,E.left,E.right-e-(s.outside?M:0));else if(g&&i){let o=s.getFixedPosition(e,t,i);n=o.x,r=o.y-A}else r=o[1]-A,n=tr(n=a?o[0]-e-p:o[0]+p,a?n:E.left,E.right);return{x:n,y:r}};hr(e)&&(e=[!1,e]);let I=e.slice(0,t.length+1).reduce((function(e,i,n){if(!1!==i&&""!==i){let r=t[n-1]||{isHeader:!0,plotX:t[0].plotX,plotY:l,series:{}},o=r.isHeader,a=o?s:r.series,u=a.tt=function(e,t,i){let n=e,{isHeader:r,series:o}=t,a=o.tooltipOptions||m;if(!n){var l;let e={padding:a.padding,r:a.borderRadius};f||(e.fill=a.backgroundColor,e["stroke-width"]=null!==(l=a.borderWidth)&&void 0!==l?l:g&&!r?0:1),n=T.label("",0,0,a[r?"headerShape":"shape"]||(g&&!r?"rect":"callout"),void 0,void 0,a.useHTML).addClass(s.getClassName(t,!0,r)).attr(e).add(w)}return n.isActive=!0,n.attr({text:i}),f||n.css(a.style).attr({stroke:a.borderColor||t.color||o.color||"#333333"}),n}(a.tt,r,i.toString()),d=u.getBBox(),b=d.width+u.strokeWidth();o&&(N=d.height,L+=N,_&&(A-=N));let{anchorX:y,anchorY:x}=function(e){let t,i,{isHeader:n,plotX:s=0,plotY:r=0,series:o}=e;if(n)t=Math.max(c+s,c),i=h+l/2;else{let{xAxis:e,yAxis:n}=o;t=e.pos+tr(s,-p,e.len+p),o.shouldShowTooltip(0,n.pos-h+r,{ignoreX:!0})&&(i=n.pos+r)}return{anchorX:t=tr(t,E.left-p,E.right+p),anchorY:i}}(r);if("number"==typeof x){let t=d.height+1,i=(v||k).call(s,b,t,r,[y,x]);e.push({align:C?0:void 0,anchorX:y,anchorY:x,boxWidth:b,point:r,rank:dr(i.rank,+!!o),size:t,target:i.y,tt:u,x:i.x})}else u.isActive=!1}return e}),[]);!C&&I.some((e=>{let{outside:t}=s,i=(t?M:0)+e.anchorX;return i<E.left&&i+e.boxWidth<E.right||i<M-E.left+e.boxWidth&&E.right-i>i}))&&(I=I.map((e=>{let{x:t,y:i}=k.call(this,e.boxWidth,e.size,e.point,[e.anchorX,e.anchorY],!1);return sr(e,{target:i,x:t})}))),s.cleanSplit(),Js(I,L);let R={left:M,right:M};I.forEach((function(e){let{x:t,boxWidth:i,isHeader:n}=e;!n&&(s.outside&&M+t<R.left&&(R.left=M+t),!n&&s.outside&&R.left+i>R.right&&(R.right=M+t))})),I.forEach((function(e){let{x:t,anchorX:i,anchorY:n,pos:r,point:{isHeader:o}}=e,a={visibility:void 0===r?"hidden":"inherit",x:t,y:(r||0)+A+(g&&b.y||0),anchorX:i,anchorY:n};if(s.outside&&t<i){let e=M-R.left;e>0&&(o||(a.x=t+e,a.anchorX=i+e),o&&(a.x=(R.right-R.left)/2,a.anchorX=i+e))}e.tt.attr(a)}));let{container:O,outside:D,renderer:B}=s;if(D&&O&&B){let{width:e,height:t,x:i,y:n}=w.getBBox();B.setSize(e+i,t+n,!1),O.style.left=R.left+"px",O.style.top=P+"px"}Qs&&w.attr({opacity:1===w.opacity?.999:1})}drawTracker(){if(!this.shouldStickOnContact())return void(this.tracker&&(this.tracker=this.tracker.destroy()));let e=this.chart,t=this.label,i=this.shared?e.hoverPoints:e.hoverPoint;if(!t||!i)return;let n={x:0,y:0,width:0,height:0},s=this.getAnchor(i),r=t.getBBox();s[0]+=e.plotLeft-(t.translateX||0),s[1]+=e.plotTop-(t.translateY||0),n.x=Math.min(0,s[0]),n.y=Math.min(0,s[1]),n.width=s[0]<0?Math.max(Math.abs(s[0]),r.width-s[0]):Math.max(Math.abs(s[0]),r.width),n.height=s[1]<0?Math.max(Math.abs(s[1]),r.height-Math.abs(s[1])):Math.max(Math.abs(s[1]),r.height),this.tracker?this.tracker.attr(n):(this.tracker=t.renderer.rect(n).addClass("highcharts-tracker").add(t),e.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(e){return e.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}headerFooterFormatter(e,t){let i=e.series,n=i.tooltipOptions,s=i.xAxis,r=null===s||void 0===s?void 0:s.dateTime,o={isFooter:t,point:e},a=n.xDateFormat||"",l=n[t?"footerFormat":"headerFormat"];return rr(this,"headerFormatter",o,(function(t){if(r&&!a&&lr(e.key)&&(a=r.getXDateFormat(e.key,n.dateTimeLabelFormats)),r&&a){if(cr(a)){let e=a;$s[0]=t=>i.chart.time.dateFormat(e,t),a="%0"}(e.tooltipDateKeys||["key"]).forEach((e=>{l=l.replace(RegExp("point\\."+e+"([ \\)}])"),"(point.".concat(e,":").concat(a,")$1"))}))}i.chart.styledMode&&(l=this.styledModeFormat(l)),t.text=Ks(l,e,this.chart)})),o.text||""}update(e){this.destroy(),this.init(this.chart,ur(!0,this.options,e))}updatePosition(e){let t,{chart:i,container:n,distance:s,options:r,pointer:o,renderer:a}=this,{height:l=0,width:c=0}=this.getLabel(),{fixed:h,positioner:u}=r,{left:d,top:f,scaleX:p,scaleY:m}=o.getChartPosition(),g=(u||h&&this.getFixedPosition||this.getPosition).call(this,c,l,e),b=T.doc,v=(e.plotX||0)+i.plotLeft,y=(e.plotY||0)+i.plotTop;if(a&&n){if(u||h){var x;let{scrollLeft:e=0,scrollTop:t=0}=(null===(x=i.scrollablePlotArea)||void 0===x?void 0:x.scrollingContainer)||{};g.x+=e+d-s,g.y+=t+f-s}t=(r.borderWidth||0)+2*s+2,a.setSize(tr(c+t,0,b.documentElement.clientWidth)-1,l+t,!1),(1!==p||1!==m)&&(ir(n,{transform:"scale(".concat(p,", ").concat(m,")")}),v*=p,y*=m),v+=d-g.x,y+=f-g.y}this.move(Math.round(g.x),Math.round(g.y||0),v,y)}}!function(e){e.compose=function(t){fr(qs,"Core.Tooltip")&&er(t,"afterInit",(function(){let t=this.chart;t.options.tooltip&&(t.tooltip=new e(t,t.options.tooltip,this))}))}}(gr||(gr={}));let br=gr,{animObject:vr}=Xe,{defaultOptions:yr}=Se,{format:xr}=wt,{addEvent:Sr,crisp:Er,erase:wr,extend:Tr,fireEvent:_r,getNestedProperty:Mr,isArray:Pr,isFunction:Cr,isNumber:Ar,isObject:Nr,merge:Lr,pick:kr,syncTimeout:Ir,removeEvent:Rr,uniqueKey:Or}=q;class Dr{animateBeforeDestroy(){let e=this,t={x:e.startXPos,opacity:0},i=e.getGraphicalProps();i.singular.forEach((function(i){e[i]=e[i].animate("dataLabel"===i?{x:e[i].startXPos,y:e[i].startYPos,opacity:0}:t)})),i.plural.forEach((function(t){e[t].forEach((function(t){t.element&&t.animate(Tr({x:e.startXPos},t.startYPos?{x:t.startXPos,y:t.startYPos}:{}))}))}))}applyOptions(e,t){let i=this.series,n=i.options.pointValKey||i.pointValKey;return Tr(this,e=Dr.prototype.optionsToObject.call(this,e)),this.options=this.options?Tr(this.options,e):e,e.group&&delete this.group,e.dataLabels&&delete this.dataLabels,n&&(this.y=Dr.prototype.getNestedProperty.call(this,n)),this.selected&&(this.state="select"),"name"in this&&void 0===t&&i.xAxis&&i.xAxis.hasNames&&(this.x=i.xAxis.nameToX(this)),void 0===this.x&&i?this.x=null!==t&&void 0!==t?t:i.autoIncrement():Ar(e.x)&&i.options.relativeXValue?this.x=i.autoIncrement(e.x):"string"==typeof this.x&&(null!==t&&void 0!==t||(t=i.chart.time.parse(this.x)),Ar(t)&&(this.x=t)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let e=this,t=e.series,i=t.chart,n=t.options.dataSorting,s=i.hoverPoints,r=vr(e.series.chart.renderer.globalAnimation),o=()=>{for(let t in(e.graphic||e.graphics||e.dataLabel||e.dataLabels)&&(Rr(e),e.destroyElements()),e)delete e[t]};e.legendItem&&i.legend.destroyItem(e),s&&(e.setState(),wr(s,e),s.length||(i.hoverPoints=null)),e===i.hoverPoint&&e.onMouseOut(),null!==n&&void 0!==n&&n.enabled?(this.animateBeforeDestroy(),Ir(o,r.duration)):o(),i.pointCount--}this.destroyed=!0}destroyElements(e){let t=this,i=t.getGraphicalProps(e);i.singular.forEach((function(e){t[e]=t[e].destroy()})),i.plural.forEach((function(e){t[e].forEach((function(e){(null===e||void 0===e?void 0:e.element)&&e.destroy()})),delete t[e]}))}firePointEvent(e,t,i){let n=this,s=this.series.options;n.manageEvent(e),"click"===e&&s.allowPointSelect&&(i=function(e){!n.destroyed&&n.select&&n.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),_r(n,e,t,i)}getClassName(){var e;return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(null!==(e=this.zone)&&void 0!==e&&e.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(e){let t,i,n=this,s=[],r={singular:[],plural:[]};for((e=e||{graphic:1,dataLabel:1}).graphic&&s.push("graphic","connector"),e.dataLabel&&s.push("dataLabel","dataLabelPath","dataLabelUpper"),i=s.length;i--;)n[t=s[i]]&&r.singular.push(t);return["graphic","dataLabel"].forEach((function(t){let i=t+"s";e[t]&&n[i]&&r.plural.push(i)})),r}getNestedProperty(e){if(e)return 0===e.indexOf("custom.")?Mr(e,this.options):this[e]}getZone(){var e;let t,i=this.series,n=i.zones,s=i.zoneAxis||"y",r=0;for(t=n[0];this[s]>=t.value;)t=n[++r];return this.nonZonedColor||(this.nonZonedColor=this.color),null!==(e=t)&&void 0!==e&&e.color&&!this.options.color?this.color=t.color:this.color=this.nonZonedColor,t}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor(e,t,i){var n,s;this.formatPrefix="point",this.visible=!0,this.point=this,this.series=e,this.applyOptions(t,i),null!==(n=this.id)&&void 0!==n||(this.id=Or()),this.resolveColor(),null!==(s=this.dataLabelOnNull)&&void 0!==s||(this.dataLabelOnNull=e.options.nullInteraction),e.chart.pointCount++,_r(this,"afterInit")}isValid(){return(Ar(this.x)||this.x instanceof Date)&&Ar(this.y)}optionsToObject(e){let t,i=this.series,n=i.options.keys,s=n||i.pointArrayMap||["y"],r=s.length,o={},a=0,l=0;if(Ar(e)||null===e)o[s[0]]=e;else if(Pr(e))for(!n&&e.length>r&&("string"==(t=typeof e[0])?null!==(c=i.xAxis)&&void 0!==c&&c.dateTime?o.x=i.chart.time.parse(e[0]):o.name=e[0]:"number"===t&&(o.x=e[0]),a++);l<r;){var c;n&&void 0===e[a]||(s[l].indexOf(".")>0?Dr.prototype.setNestedProperty(o,e[a],s[l]):o[s[l]]=e[a]),a++,l++}else"object"==typeof e&&(o=e,e.dataLabels&&(i.hasDataLabels=()=>!0),e.marker&&(i._hasPointMarkers=!0));return o}pos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.plotY;if(!this.destroyed){let{plotX:i,series:n}=this,{chart:s,xAxis:r,yAxis:o}=n,a=0,l=0;if(Ar(i)&&Ar(t))return e&&(a=r?r.pos:s.plotLeft,l=o?o.pos:s.plotTop),s.inverted&&r&&o?[o.len-t+l,r.len-i+a]:[i+a,t+l]}}resolveColor(){let e,t,i,n=this.series,s=n.chart.options.chart,r=n.chart.styledMode,o=s.colorCount;delete this.nonZonedColor,n.options.colorByPoint?(r||(e=(t=n.options.colors||n.chart.options.colors)[n.colorCounter],o=t.length),i=n.colorCounter,n.colorCounter++,n.colorCounter===o&&(n.colorCounter=0)):(r||(e=n.color),i=n.colorIndex),this.colorIndex=kr(this.options.colorIndex,i),this.color=kr(this.options.color,e)}setNestedProperty(e,t,i){return i.split(".").reduce((function(e,i,n,s){let r=s.length-1===n;return e[i]=r?t:Nr(e[i],!0)?e[i]:{},e[i]}),e),e}shouldDraw(){return!this.isNull}tooltipFormatter(e){var t;let{chart:i,pointArrayMap:n=["y"],tooltipOptions:s}=this.series,{valueDecimals:r="",valuePrefix:o="",valueSuffix:a=""}=s;return i.styledMode&&(e=(null===(t=i.tooltip)||void 0===t?void 0:t.styledModeFormat(e))||e),n.forEach((t=>{t="{point."+t,(o||a)&&(e=e.replace(RegExp(t+"}","g"),o+t+"}"+a)),e=e.replace(RegExp(t+"}","g"),t+":,."+r+"f}")})),xr(e,this,i)}update(e,t,i,n){let s,r=this,o=r.series,a=r.graphic,l=o.chart,c=o.options;function h(){r.applyOptions(e);let n=a&&r.hasMockGraphic,h=null===r.y?!n:n;a&&h&&(r.graphic=a.destroy(),delete r.hasMockGraphic),Nr(e,!0)&&(null!==a&&void 0!==a&&a.element&&e&&e.marker&&void 0!==e.marker.symbol&&(r.graphic=a.destroy()),null!==e&&void 0!==e&&e.dataLabels&&r.dataLabel&&(r.dataLabel=r.dataLabel.destroy())),s=r.index;let u={};for(let e of o.dataColumnKeys())u[e]=r[e];o.dataTable.setRow(u,s),c.data[s]=Nr(c.data[s],!0)||Nr(e,!0)?r.options:kr(e,c.data[s]),o.isDirty=o.isDirtyData=!0,!o.fixedBox&&o.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===c.legendType&&(l.isDirtyLegend=!0),t&&l.redraw(i)}t=kr(t,!0),!1===n?h():r.firePointEvent("update",{options:e},h)}remove(e,t){this.series.removePoint(this.series.data.indexOf(this),e,t)}select(e,t){let i=this,n=i.series,s=n.chart;e=kr(e,!i.selected),this.selectedStaging=e,i.firePointEvent(e?"select":"unselect",{accumulate:t},(function(){i.selected=i.options.selected=e,n.options.data[n.data.indexOf(i)]=i.options,i.setState(e&&"select"),t||s.getSelectedPoints().forEach((function(e){let t=e.series;e.selected&&e!==i&&(e.selected=e.options.selected=!1,t.options.data[t.data.indexOf(e)]=e.options,e.setState(s.hoverPoints&&t.options.inactiveOtherPoints?"inactive":""),e.firePointEvent("unselect"))}))})),delete this.selectedStaging}onMouseOver(e){let{inverted:t,pointer:i}=this.series.chart;i&&(e=e?i.normalize(e):i.getChartCoordinatesFromPoint(this,t),i.runPointActions(e,this))}onMouseOut(){let e=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(e.hoverPoints||[]).forEach((function(e){e.setState()})),e.hoverPoints=e.hoverPoint=null}manageEvent(e){var t,i,n,s,r,o;let a=null===(t=Lr(this.series.options.point,this.options).events)||void 0===t?void 0:t[e];!Cr(a)||null!==(i=this.hcEvents)&&void 0!==i&&i[e]&&-1!==(null===(n=this.hcEvents)||void 0===n||null===(n=n[e])||void 0===n?void 0:n.map((e=>e.fn)).indexOf(a))?this.importedUserEvent&&!a&&(null===(r=this.hcEvents)||void 0===r?void 0:r[e])&&(null===(o=this.hcEvents)||void 0===o?void 0:o[e].userEvent)&&(Rr(this,e),delete this.hcEvents[e],Object.keys(this.hcEvents)||delete this.importedUserEvent):(null!==(s=this.importedUserEvent)&&void 0!==s&&s.call(this),this.importedUserEvent=Sr(this,e,a),this.hcEvents&&(this.hcEvents[e].userEvent=!0))}setState(e,t){var i,n;let s,r,o,a,l=this.series,c=this.state,h=l.options.states[e||"normal"]||{},u=yr.plotOptions[l.type].marker&&l.options.marker,d=u&&!1===u.enabled,f=(null===u||void 0===u||null===(i=u.states)||void 0===i?void 0:i[e||"normal"])||{},p=!1===f.enabled,m=this.marker||{},g=l.chart,b=u&&l.markerAttribs,v=l.halo,y=l.stateMarkerGraphic;if((e=e||"")===this.state&&!t||this.selected&&"select"!==e||!1===h.enabled||e&&(p||d&&!1===f.enabled)||e&&m.states&&m.states[e]&&!1===m.states[e].enabled)return;if(this.state=e,b&&(s=l.markerAttribs(this,e)),this.graphic&&!this.hasMockGraphic){if(c&&this.graphic.removeClass("highcharts-point-"+c),e&&this.graphic.addClass("highcharts-point-"+e),!g.styledMode){r=l.pointAttribs(this,e),o=kr(g.options.chart.animation,h.animation);let t=r.opacity;l.options.inactiveOtherPoints&&Ar(t)&&(this.dataLabels||[]).forEach((function(e){e&&!e.hasClass("highcharts-data-label-hidden")&&(e.animate({opacity:t},o),e.connector&&e.connector.animate({opacity:t},o))})),this.graphic.animate(r,o)}s&&this.graphic.animate(s,kr(g.options.chart.animation,f.animation,u.animation)),y&&y.hide()}else e&&f&&(a=m.symbol||l.symbol,y&&y.currentSymbol!==a&&(y=y.destroy()),s&&(y?y[t?"animate":"attr"]({x:s.x,y:s.y}):a&&(l.stateMarkerGraphic=y=g.renderer.symbol(a,s.x,s.y,s.width,s.height,Lr(u,f)).add(l.markerGroup),y.currentSymbol=a)),!g.styledMode&&y&&"inactive"!==this.state&&y.attr(l.pointAttribs(this,e))),y&&(y[e&&this.isInside?"show":"hide"](),y.element.point=this,y.addClass(this.getClassName(),!0));let x=h.halo,S=this.graphic||y,E=(null===S||void 0===S?void 0:S.visibility)||"inherit";null!==x&&void 0!==x&&x.size&&S&&"hidden"!==E&&!this.isCluster?(v||(l.halo=v=g.renderer.path().add(S.parentGroup)),v.show()[t?"animate":"attr"]({d:this.haloPath(x.size)}),v.attr({class:"highcharts-halo highcharts-color-"+kr(this.colorIndex,l.colorIndex)+(this.className?" "+this.className:""),visibility:E,zIndex:-1}),v.point=this,g.styledMode||v.attr(Tr({fill:this.color||l.color,"fill-opacity":x.opacity},ot.filterUserAttributes(x.attributes||{})))):(null===(n=v)||void 0===n||null===(n=n.point)||void 0===n?void 0:n.haloPath)&&!v.point.destroyed&&v.animate({d:v.point.haloPath(0)},null,v.hide),_r(this,"afterSetState",{state:e})}haloPath(e){let t=this.pos();return t?this.series.chart.renderer.symbols.circle(Er(t[0],1)-e,t[1]-e,2*e,2*e):[]}}let Br=Dr,{parse:Fr}=Ne,{charts:Vr,composed:jr,isTouchDevice:Gr}=T,{addEvent:Wr,attr:zr,css:Ur,extend:Hr,find:Xr,fireEvent:Yr,isNumber:Kr,isObject:qr,objectEach:$r,offset:Zr,pick:Qr,pushUnique:Jr,splat:eo}=q;class to{applyInactiveState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];for(let n of(e.forEach((e=>{let i=e.series;t.push(i),i.linkedParent&&t.push(i.linkedParent),i.linkedSeries&&t.push.apply(t,i.linkedSeries),i.navigatorSeries&&t.push(i.navigatorSeries),i.boosted&&i.markerGroup&&t.push.apply(t,this.chart.series.filter((e=>e.markerGroup===i.markerGroup)))})),this.chart.series)){var i;let e=n.options;!1!==(null===(i=e.states)||void 0===i||null===(i=i.inactive)||void 0===i?void 0:i.enabled)&&(-1===t.indexOf(n)?n.setState("inactive",!0):e.inactiveOtherPoints&&n.setAllPointsToState("inactive"))}}destroy(){let e=this;this.eventsToUnbind.forEach((e=>e())),this.eventsToUnbind=[],!T.chartCount&&(to.unbindDocumentMouseUp.forEach((e=>e.unbind())),to.unbindDocumentMouseUp.length=0,to.unbindDocumentTouchEnd&&(to.unbindDocumentTouchEnd=to.unbindDocumentTouchEnd())),clearInterval(e.tooltipTimeout),$r(e,(function(t,i){e[i]=void 0}))}getSelectionMarkerAttrs(e,t){let i={args:{chartX:e,chartY:t},attrs:{},shapeType:"rect"};return Yr(this,"getSelectionMarkerAttrs",i,(i=>{let n,{chart:s,zoomHor:r,zoomVert:o}=this,{mouseDownX:a=0,mouseDownY:l=0}=s,c=i.attrs;c.x=s.plotLeft,c.y=s.plotTop,c.width=r?1:s.plotWidth,c.height=o?1:s.plotHeight,r&&(c.width=Math.max(1,Math.abs(n=e-a)),c.x=(n>0?0:n)+a),o&&(c.height=Math.max(1,Math.abs(n=t-l)),c.y=(n>0?0:n)+l)})),i}drag(e){let t,{chart:i}=this,{mouseDownX:n=0,mouseDownY:s=0}=i,{panning:r,panKey:o,selectionMarkerFill:a}=i.options.chart,l=i.plotLeft,c=i.plotTop,h=i.plotWidth,u=i.plotHeight,d=qr(r)?r.enabled:r,f=o&&e["".concat(o,"Key")],p=e.chartX,m=e.chartY,g=this.selectionMarker;if((!g||!g.touch)&&(p<l?p=l:p>l+h&&(p=l+h),m<c?m=c:m>c+u&&(m=c+u),this.hasDragged=Math.sqrt(Math.pow(n-p,2)+Math.pow(s-m,2)),this.hasDragged>10)){t=i.isInsidePlot(n-l,s-c,{visiblePlotOnly:!0});let{shapeType:o,attrs:h}=this.getSelectionMarkerAttrs(p,m);this.hasZoom&&t&&!f&&!g&&(this.selectionMarker=g=i.renderer[o](),g.attr({class:"highcharts-selection-marker",zIndex:7}).add(),i.styledMode||g.attr({fill:a||Fr("#334eff").setOpacity(.25).get()})),g&&g.attr(h),t&&!g&&d&&i.pan(e,r)}}dragStart(e){let t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=e.chartX,t.mouseDownY=e.chartY}getSelectionBox(e){let t={args:{marker:e},result:e.getBBox()};return Yr(this,"getSelectionBox",t),t.result}drop(e){let t,{chart:i,selectionMarker:n}=this;for(let s of i.axes)s.isPanning&&(s.isPanning=!1,(s.options.startOnTick||s.options.endOnTick||s.series.some((e=>e.boosted)))&&(s.forceRedraw=!0,s.setExtremes(s.userMin,s.userMax,!1),t=!0));if(t&&i.redraw(),n&&e){if(this.hasDragged){let t=this.getSelectionBox(n);i.transform({axes:i.axes.filter((e=>e.zoomEnabled&&("xAxis"===e.coll&&this.zoomX||"yAxis"===e.coll&&this.zoomY))),selection:r({originalEvent:e,xAxis:[],yAxis:[]},t),from:t})}Kr(i.index)&&(this.selectionMarker=n.destroy())}i&&Kr(i.index)&&(Ur(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[],this.hasPinchMoved=!1)}findNearestKDPoint(e,t,i){let n;return e.forEach((function(e){let s=!(e.noSharedTooltip&&t)&&0>e.options.findNearestPointBy.indexOf("y"),r=e.searchPoint(i,s);qr(r,!0)&&r.series&&(!qr(n,!0)||function(e,i,n,s){let r=e.distX-i.distX,o=e.dist-i.dist,a=(null===(n=i.series.group)||void 0===n?void 0:n.zIndex)-(null===(s=e.series.group)||void 0===s?void 0:s.zIndex);return 0!==r&&t?r:0!==o?o:0!==a?a:e.series.index>i.series.index?-1:1}(n,r)>0)&&(n=r)})),n}getChartCoordinatesFromPoint(e,t){let{xAxis:i,yAxis:n}=e.series,s=e.shapeArgs;if(i&&n){var r,o;let a=null!==(r=null!==(o=e.clientX)&&void 0!==o?o:e.plotX)&&void 0!==r?r:0,l=e.plotY||0;return e.isNode&&s&&Kr(s.x)&&Kr(s.y)&&(a=s.x,l=s.y),t?{chartX:n.len+n.pos-l,chartY:i.len+i.pos-a}:{chartX:a+i.pos,chartY:l+n.pos}}if(null!==s&&void 0!==s&&s.x&&s.y)return{chartX:s.x,chartY:s.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:e}=this.chart,t=Zr(e);this.chartPosition={left:t.left,top:t.top,scaleX:1,scaleY:1};let{offsetHeight:i,offsetWidth:n}=e;return n>2&&i>2&&(this.chartPosition.scaleX=t.width/n,this.chartPosition.scaleY=t.height/i),this.chartPosition}getCoordinates(e){let t={xAxis:[],yAxis:[]};for(let i of this.chart.axes)t[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(e[i.horiz?"chartX":"chartY"])});return t}getHoverData(e,t,i,n,s,r){let o,a=[],l=function(e){return e.visible&&!(!s&&e.directTouch)&&Qr(e.options.enableMouseTracking,!0)},c=t,h={chartX:r?r.chartX:void 0,chartY:r?r.chartY:void 0,shared:s};Yr(this,"beforeGetHoverData",h),o=c&&!c.stickyTracking?[c]:i.filter((e=>e.stickyTracking&&(h.filter||l)(e)));let u=n&&e||!r?e:this.findNearestKDPoint(o,s,r);return c=null===u||void 0===u?void 0:u.series,u&&(s&&!c.noSharedTooltip?(o=i.filter((function(e){return h.filter?h.filter(e):l(e)&&!e.noSharedTooltip}))).forEach((function(e){var t;let i=null===(t=e.options)||void 0===t?void 0:t.nullInteraction,n=Xr(e.points,(function(e){return e.x===u.x&&(!e.isNull||!!i)}));qr(n)&&(e.boosted&&e.boost&&(n=e.boost.getPoint(n)),a.push(n))})):a.push(u)),Yr(this,"afterGetHoverData",h={hoverPoint:u}),{hoverPoint:h.hoverPoint,hoverSeries:c,hoverPoints:a}}getPointFromEvent(e){let t,i=e.target;for(;i&&!t;)t=i.point,i=i.parentNode;return t}onTrackerMouseOut(e){let t=this.chart,i=e.relatedTarget,n=t.hoverSeries;this.isDirectTouch=!1,!n||!i||n.stickyTracking||this.inClass(i,"highcharts-tooltip")||this.inClass(i,"highcharts-series-"+n.index)&&this.inClass(i,"highcharts-tracker")||n.onMouseOut()}inClass(e,t){let i,n=e;for(;n;){if(i=zr(n,"class")){if(-1!==i.indexOf(t))return!0;if(-1!==i.indexOf("highcharts-container"))return!1}n=n.parentElement}}constructor(e,t){var i;this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=t,this.chart=e,this.runChartClick=!(null===(i=t.chart.events)||void 0===i||!i.click),this.pinchDown=[],this.setDOMEvents(),Yr(this,"afterInit")}normalize(e,t){let i=e.touches,n=i?i.length?i.item(0):Qr(i.changedTouches,e.changedTouches)[0]:e;t||(t=this.getChartPosition());let s=n.pageX-t.left,r=n.pageY-t.top;return Hr(e,{chartX:Math.round(s/=t.scaleX),chartY:Math.round(r/=t.scaleY)})}onContainerClick(e){let t=this.chart,i=t.hoverPoint,n=this.normalize(e),s=t.plotLeft,r=t.plotTop;!t.cancelClick&&(i&&this.inClass(n.target,"highcharts-tracker")?(Yr(i.series,"click",Hr(n,{point:i})),t.hoverPoint&&i.firePointEvent("click",n)):(Hr(n,this.getCoordinates(n)),t.isInsidePlot(n.chartX-s,n.chartY-r,{visiblePlotOnly:!0})&&Yr(t,"click",n)))}onContainerMouseDown(e){var t,i;let n=1==(1&(e.buttons||e.button));e=this.normalize(e),T.isFirefox&&0!==e.button&&this.onContainerMouseMove(e),(void 0===e.button||n)&&(this.zoomOption(e),n&&null!==(t=(i=e).preventDefault)&&void 0!==t&&t.call(i),this.dragStart(e))}onContainerMouseLeave(e){let{pointer:t}=Vr[Qr(to.hoverChartIndex,-1)]||{};e=this.normalize(e),this.onContainerMouseMove(e),t&&!this.inClass(e.relatedTarget,"highcharts-tooltip")&&(t.reset(),t.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(e){var t;let i=this.chart,n=i.tooltip,s=this.normalize(e);this.setHoverChartIndex(e),("mousedown"===i.mouseIsDown||this.touchSelect(s))&&this.drag(s),(null===(t=i.exporting)||void 0===t||!t.openMenu)&&(this.inClass(s.target,"highcharts-tracker")||i.isInsidePlot(s.chartX-i.plotLeft,s.chartY-i.plotTop,{visiblePlotOnly:!0}))&&(null===n||void 0===n||!n.shouldStickOnContact(s))&&(this.inClass(s.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(s))}onDocumentTouchEnd(e){this.onDocumentMouseUp(e)}onContainerTouchMove(e){this.touchSelect(e)?this.onContainerMouseMove(e):this.touch(e)}onContainerTouchStart(e){this.touchSelect(e)?this.onContainerMouseDown(e):(this.zoomOption(e),this.touch(e,!0))}onDocumentMouseMove(e){let t=this.chart,i=t.tooltip,n=this.chartPosition,s=this.normalize(e,n);!n||t.isInsidePlot(s.chartX-t.plotLeft,s.chartY-t.plotTop,{visiblePlotOnly:!0})||(null===i||void 0===i?void 0:i.shouldStickOnContact(s))||s.target!==t.container.ownerDocument&&this.inClass(s.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(e){var t,i;null!==e&&void 0!==e&&e.touches&&this.hasPinchMoved&&null!==e&&void 0!==e&&null!==(t=e.preventDefault)&&void 0!==t&&t.call(e),null===(i=Vr[Qr(to.hoverChartIndex,-1)])||void 0===i||null===(i=i.pointer)||void 0===i||i.drop(e)}pinch(e){let t=this,{chart:i,hasZoom:n,lastTouches:s}=t,r=[].map.call(e.touches||[],(e=>t.normalize(e))),o=r.length,a=1===o&&(t.inClass(e.target,"highcharts-tracker")&&i.runTrackerClick||t.runChartClick),l=i.tooltip,c=1===o&&Qr(null===l||void 0===l?void 0:l.options.followTouchMove,!0);o>1?t.initiated=!0:c&&(t.initiated=!1),n&&t.initiated&&!a&&!1!==e.cancelable&&e.preventDefault(),"touchstart"===e.type?(t.pinchDown=r,t.res=!0,i.mouseDownX=e.chartX):c?this.runPointActions(t.normalize(e)):s&&(Yr(i,"touchpan",{originalEvent:e,touches:r},(()=>{let t=e=>{let t=e[0],i=e[1]||t;return{x:t.chartX,y:t.chartY,width:i.chartX-t.chartX,height:i.chartY-t.chartY}};i.transform({axes:i.axes.filter((e=>e.zoomEnabled&&(this.zoomHor&&e.horiz||this.zoomVert&&!e.horiz))),to:t(r),from:t(s),trigger:e.type})})),t.res&&(t.res=!1,this.reset(!1,0))),t.lastTouches=r}reset(e,t){let i=this.chart,n=i.hoverSeries,s=i.hoverPoint,r=i.hoverPoints,o=i.tooltip,a=null!==o&&void 0!==o&&o.shared?r:s;e&&a&&eo(a).forEach((function(t){t.series.isCartesian&&void 0===t.plotX&&(e=!1)})),e?o&&a&&eo(a).length&&(o.refresh(a),o.shared&&r?r.forEach((function(e){e.setState(e.state,!0),e.series.isCartesian&&(e.series.xAxis.crosshair&&e.series.xAxis.drawCrosshair(null,e),e.series.yAxis.crosshair&&e.series.yAxis.drawCrosshair(null,e))})):s&&(s.setState(s.state,!0),i.axes.forEach((function(e){e.crosshair&&s.series[e.coll]===e&&e.drawCrosshair(null,s)})))):(s&&s.onMouseOut(),r&&r.forEach((function(e){e.setState()})),n&&n.onMouseOut(),o&&o.hide(t),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),i.axes.forEach((function(e){e.hideCrosshair()})),i.hoverPoints=i.hoverPoint=void 0)}runPointActions(e,t,i){var n,s,r,o;let a=this.chart,l=a.series,c=null!==(n=a.tooltip)&&void 0!==n&&n.options.enabled?a.tooltip:void 0,h=!!c&&c.shared,u=t||a.hoverPoint,d=(null===(s=u)||void 0===s?void 0:s.series)||a.hoverSeries,f=(!e||"touchmove"!==e.type)&&(!!t||(null===(r=d)||void 0===r?void 0:r.directTouch)&&this.isDirectTouch),p=this.getHoverData(u,d,l,f,h,e);u=p.hoverPoint,d=p.hoverSeries;let m=p.hoverPoints,g=(null===(o=d)||void 0===o?void 0:o.tooltipOptions.followPointer)&&!d.tooltipOptions.split,b=h&&d&&!d.noSharedTooltip;if(u&&(i||u!==a.hoverPoint||null!==c&&void 0!==c&&c.isHidden)){if((a.hoverPoints||[]).forEach((function(e){-1===m.indexOf(e)&&e.setState()})),a.hoverSeries!==d&&d.onMouseOver(),this.applyInactiveState(m),(m||[]).forEach((function(e){e.setState("hover")})),a.hoverPoint&&a.hoverPoint.firePointEvent("mouseOut"),!u.series)return;a.hoverPoints=m,a.hoverPoint=u,u.firePointEvent("mouseOver",void 0,(()=>{c&&u&&c.refresh(b?m:u,e)}))}else if(g&&c&&!c.isHidden){let t=c.getAnchor([{}],e);a.isInsidePlot(t[0],t[1],{visiblePlotOnly:!0})&&c.updatePosition({plotX:t[0],plotY:t[1]})}this.unDocMouseMove||(this.unDocMouseMove=Wr(a.container.ownerDocument,"mousemove",(e=>{var t,i;return null===(t=Vr[null!==(i=to.hoverChartIndex)&&void 0!==i?i:-1])||void 0===t||null===(t=t.pointer)||void 0===t?void 0:t.onDocumentMouseMove(e)})),this.eventsToUnbind.push(this.unDocMouseMove)),a.axes.forEach((function(t){var i,n;let s,r=null===(i=null===(n=t.crosshair)||void 0===n?void 0:n.snap)||void 0===i||i;r&&((s=a.hoverPoint)&&s.series[t.coll]===t||(s=Xr(m,(e=>{var i;return(null===(i=e.series)||void 0===i?void 0:i[t.coll])===t})))),s||!r?t.drawCrosshair(e,s):t.hideCrosshair()}))}setDOMEvents(){let e=this.chart.container,t=e.ownerDocument;e.onmousedown=this.onContainerMouseDown.bind(this),e.onmousemove=this.onContainerMouseMove.bind(this),e.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(Wr(e,"mouseenter",this.onContainerMouseEnter.bind(this)),Wr(e,"mouseleave",this.onContainerMouseLeave.bind(this))),to.unbindDocumentMouseUp.some((e=>e.doc===t))||to.unbindDocumentMouseUp.push({doc:t,unbind:Wr(t,"mouseup",this.onDocumentMouseUp.bind(this))});let i=this.chart.renderTo.parentElement;for(;i&&"BODY"!==i.tagName;)this.eventsToUnbind.push(Wr(i,"scroll",(()=>{delete this.chartPosition}))),i=i.parentElement;this.eventsToUnbind.push(Wr(e,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),Wr(e,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),to.unbindDocumentTouchEnd||(to.unbindDocumentTouchEnd=Wr(t,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),Wr(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){var e,t;if(!Gr)return;let i=this.pointerCaptureEventsToUnbind,n=this.chart,s=n.container,r=Qr(null===(e=n.options.tooltip)||void 0===e?void 0:e.followTouchMove,!0)&&n.series.some((e=>e.options.findNearestPointBy.indexOf("y")>-1));!this.hasPointerCapture&&r?(i.push(Wr(s,"pointerdown",(e=>{var t,i;(null===(t=e.target)||void 0===t?void 0:t.hasPointerCapture(e.pointerId))&&(null===(i=e.target)||void 0===i||i.releasePointerCapture(e.pointerId))})),Wr(s,"pointermove",(e=>{var t;null===(t=n.pointer)||void 0===t||null===(t=t.getPointFromEvent(e))||void 0===t||t.onMouseOver(e)}))),n.styledMode||Ur(s,{"touch-action":"none"}),s.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!r&&(i.forEach((e=>e())),i.length=0,n.styledMode||Ur(s,{"touch-action":Qr(null===(t=n.options.chart.style)||void 0===t?void 0:t["touch-action"],"manipulation")}),s.className=s.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(e){let t=this.chart,i=T.charts[Qr(to.hoverChartIndex,-1)];if(i&&i!==t){var n;let s={relatedTarget:t.container};e&&!(null!==e&&void 0!==e&&e.relatedTarget)&&Object.assign({},e,s),null===(n=i.pointer)||void 0===n||n.onContainerMouseLeave(e||s)}(null===i||void 0===i?void 0:i.mouseIsDown)||(to.hoverChartIndex=t.index)}touch(e,t){var i;let n,{chart:s,pinchDown:r=[]}=this;this.setHoverChartIndex(),1===(e=this.normalize(e)).touches.length?!s.isInsidePlot(e.chartX-s.plotLeft,e.chartY-s.plotTop,{visiblePlotOnly:!0})||null!==(i=s.exporting)&&void 0!==i&&i.openMenu?t&&this.reset():(t&&this.runPointActions(e),"touchmove"===e.type&&(this.hasPinchMoved=n=!!r[0]&&Math.pow(r[0].chartX-e.chartX,2)+Math.pow(r[0].chartY-e.chartY,2)>=16),Qr(n,!0)&&this.pinch(e)):2===e.touches.length&&this.pinch(e)}touchSelect(e){return!(!this.chart.zooming.singleTouch||!e.touches||1!==e.touches.length)}zoomOption(e){let t,i,n=this.chart,s=n.inverted,r=n.zooming.type||"";/touch/.test(e.type)&&(r=Qr(n.zooming.pinchType,r)),this.zoomX=t=/x/.test(r),this.zoomY=i=/y/.test(r),this.zoomHor=t&&!s||i&&s,this.zoomVert=i&&!s||t&&s,this.hasZoom=t||i}}to.unbindDocumentMouseUp=[],function(e){e.compose=function(t){Jr(jr,"Core.Pointer")&&Wr(t,"beforeRender",(function(){this.pointer=new e(this,this.options)}))}}(to||(to={}));let io=to;!function(e){e.setLength=function(e,t,i){return Array.isArray(e)?(e.length=t,e):e[i?"subarray":"slice"](0,t)},e.splice=function(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(Array.isArray(e))return Array.isArray(s)||(s=Array.from(s)),{removed:e.splice(t,i,...s),array:e};let r=Object.getPrototypeOf(e).constructor,o=e[n?"subarray":"slice"](t,t+i),a=new r(e.length-i+s.length);return a.set(e.subarray(0,t),0),a.set(s,t),a.set(e.subarray(t+i),t+s.length),{removed:o,array:a}}}(d||(d={}));let{setLength:no,splice:so}=d,{fireEvent:ro,objectEach:oo,uniqueKey:ao}=q,lo=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.autoId=!e.id,this.columns={},this.id=e.id||ao(),this.modified=this,this.rowCount=0,this.versionTag=ao();let t=0;oo(e.columns||{},((e,i)=>{this.columns[i]=e.slice(),t=Math.max(t,e.length)})),this.applyRowCount(t)}applyRowCount(e){this.rowCount=e,oo(this.columns,((t,i)=>{t.length!==e&&(this.columns[i]=no(t,e))}))}deleteRows(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t>0&&e<this.rowCount){let i=0;oo(this.columns,((n,s)=>{this.columns[s]=so(n,e,t).array,i=n.length})),this.rowCount=i}ro(this,"afterDeleteRows",{rowIndex:e,rowCount:t}),this.versionTag=ao()}getColumn(e,t){return this.columns[e]}getColumns(e,t){return(e||Object.keys(this.columns)).reduce(((e,t)=>(e[t]=this.columns[t],e)),{})}getRow(e,t){return(t||Object.keys(this.columns)).map((t=>{var i;return null===(i=this.columns[t])||void 0===i?void 0:i[e]}))}setColumn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;this.setColumns({[e]:t},i,n)}setColumns(e,t,i){let n=this.rowCount;oo(e,((e,t)=>{this.columns[t]=e.slice(),n=e.length})),this.applyRowCount(n),(null===i||void 0===i?void 0:i.silent)||(ro(this,"afterSetColumns"),this.versionTag=ao())}setRow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rowCount,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,{columns:s}=this,r=i?this.rowCount+1:t+1;oo(e,((e,o)=>{let a=s[o]||!1!==(null===n||void 0===n?void 0:n.addColumns)&&Array(r);a&&(i?a=so(a,t,0,!0,[e]).array:a[t]=e,s[o]=a)})),r>this.rowCount&&this.applyRowCount(r),(null===n||void 0===n?void 0:n.silent)||(ro(this,"afterSetRows"),this.versionTag=ao())}},{extend:co,merge:ho,pick:uo}=q;!function(e){function t(e,t,i){var n;let s,r=this.legendItem=this.legendItem||{},{chart:o,options:a}=this,{baseline:l=0,symbolWidth:c,symbolHeight:h}=e,u=this.symbol||"circle",d=h/2,f=o.renderer,p=r.group,m=l-Math.round(((null===(n=e.fontMetrics)||void 0===n?void 0:n.b)||h)*(i?.4:.3)),g={},b=a.marker,v=0;if(o.styledMode||(g["stroke-width"]=Math.min(a.lineWidth||0,24),a.dashStyle?g.dashstyle=a.dashStyle:"square"!==a.linecap&&(g["stroke-linecap"]="round")),r.line=f.path().addClass("highcharts-graph").attr(g).add(p),i&&(r.area=f.path().addClass("highcharts-area").add(p)),g["stroke-linecap"]&&(v=Math.min(r.line.strokeWidth(),c)/2),c){var y;let e=[["M",v,m],["L",c-v,m]];r.line.attr({d:e}),null===(y=r.area)||void 0===y||y.attr({d:[...e,["L",c-v,l],["L",v,l]]})}if(b&&!1!==b.enabled&&c){let e=Math.min(uo(b.radius,d),d);0===u.indexOf("url")&&(b=ho(b,{width:h,height:h}),e=0),r.symbol=s=f.symbol(u,c/2-e,m-e,2*e,2*e,co({context:"legend"},b)).addClass("highcharts-point").add(p),s.isMarker=!0}}e.areaMarker=function(e,i){t.call(this,e,i,!0)},e.lineMarker=t,e.rectangle=function(e,t){let i=t.legendItem||{},n=e.options,s=e.symbolHeight,r=n.squareSymbol,o=r?s:e.symbolWidth;i.symbol=this.chart.renderer.rect(r?(e.symbolWidth-s)/2:0,e.baseline-s+1,o,s,uo(e.options.symbolRadius,s/2)).addClass("highcharts-point").attr({zIndex:3}).add(i.group)}}(f||(f={}));let fo=f,{defaultOptions:po}=Se,{extend:mo,extendClass:go,merge:bo}=q;!function(e){function t(t,i){let n=po.plotOptions||{},s=i.defaultOptions,r=i.prototype;return r.type=t,r.pointClass||(r.pointClass=Br),!e.seriesTypes[t]&&(s&&(n[t]=s),e.seriesTypes[t]=i,!0)}e.seriesTypes=T.seriesTypes,e.registerSeriesType=t,e.seriesType=function(i,n,s,r,o){let a=po.plotOptions||{};if(n=n||"",a[i]=bo(a[n],s),delete e.seriesTypes[i],t(i,go(e.seriesTypes[n]||Qo,r)),e.seriesTypes[i].prototype.type=i,o){class t extends Br{}mo(t.prototype,o),e.seriesTypes[i].prototype.pointClass=t}return e.seriesTypes[i]}}(p||(p={}));let vo=p,{animObject:yo,setAnimation:xo}=Xe,{defaultOptions:So}=Se,{registerEventOptions:Eo}=kn,{svg:wo,win:To}=T,{seriesTypes:_o}=vo,{format:Mo}=wt,{arrayMax:Po,arrayMin:Co,clamp:Ao,correctFloat:No,crisp:Lo,defined:ko,destroyObjectProperties:Io,diffObjects:Ro,erase:Oo,error:Do,extend:Bo,find:Fo,fireEvent:Vo,getClosestDistance:jo,getNestedProperty:Go,insertItem:Wo,isArray:zo,isNumber:Uo,isString:Ho,merge:Xo,objectEach:Yo,pick:Ko,removeEvent:qo,syncTimeout:$o}=q;class Zo{constructor(){this.zoneAxis="y"}init(e,t){var i,n,s,r;let o;Vo(this,"init",{options:t}),null!==(i=this.dataTable)&&void 0!==i||(this.dataTable=new lo);let a=e.series;this.eventsToUnbind=[],this.chart=e,this.options=this.setOptions(t);let l=this.options,c=!1!==l.visible;this.linkedSeries=[],this.bindAxes(),Bo(this,{name:l.name,state:"",visible:c,selected:!0===l.selected}),Eo(this,l);let h=l.events;(null!==h&&void 0!==h&&h.click||null!==(n=l.point)&&void 0!==n&&null!==(n=n.events)&&void 0!==n&&n.click||l.allowPointSelect)&&(e.runTrackerClick=!0),this.getColor(),this.getSymbol(),this.isCartesian&&(e.hasCartesianSeries=!0),a.length&&(o=a[a.length-1]),this._i=Ko(null===(s=o)||void 0===s?void 0:s._i,-1)+1,this.opacity=this.options.opacity,e.orderItems("series",Wo(this,a)),null!==(r=l.dataSorting)&&void 0!==r&&r.enabled?this.setDataSortingOptions():this.points||this.data||this.setData(l.data,!1),Vo(this,"afterInit")}is(e){return _o[e]&&this instanceof _o[e]}bindAxes(){let e,t=this,i=t.options,n=t.chart;Vo(this,"bindAxes",null,(function(){(t.axisTypes||[]).forEach((function(s){(n[s]||[]).forEach((function(n){e=n.options,(Ko(i[s],0)===n.index||void 0!==i[s]&&i[s]===e.id)&&(Wo(t,n.series),t[s]=n,n.isDirty=!0)})),t[s]||t.optionalAxis===s||Do(18,!0,n)}))})),Vo(this,"afterBindAxes")}hasData(){return this.visible&&void 0!==this.dataMax&&void 0!==this.dataMin||this.visible&&this.dataTable.rowCount>0}hasMarkerChanged(e,t){let i=e.marker,n=t.marker||{};return i&&(n.enabled&&!i.enabled||n.symbol!==i.symbol||n.height!==i.height||n.width!==i.width)}autoIncrement(e){var t,i;let n,s=this.options,{pointIntervalUnit:r,relativeXValue:o}=this.options,a=this.chart.time,l=null!==(t=null!==(i=this.xIncrement)&&void 0!==i?i:a.parse(s.pointStart))&&void 0!==t?t:0;if(this.pointInterval=n=Ko(this.pointInterval,s.pointInterval,1),o&&Uo(e)&&(n*=e),r){let e=a.toParts(l);"day"===r?e[2]+=n:"month"===r?e[1]+=n:"year"===r&&(e[0]+=n),n=a.makeTime.apply(a,e)-l}return o&&Uo(e)?l+n:(this.xIncrement=l+n,l)}setDataSortingOptions(){let e=this.options;Bo(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),ko(e.pointRange)||(e.pointRange=1)}setOptions(e){var t,i;let n,s=this.chart,o=s.options.plotOptions,a=s.userOptions||{},l=Xo(e),c=s.styledMode,h={plotOptions:o,userOptions:l};Vo(this,"setOptions",h);let u=h.plotOptions[this.type],d=a.plotOptions||{},f=d.series||{},p=So.plotOptions[this.type]||{},m=d[this.type]||{};u.dataLabels=this.mergeArrays(p.dataLabels,u.dataLabels),this.userOptions=h.userOptions;let g=Xo(u,o.series,m,l);this.tooltipOptions=Xo(So.tooltip,null===(t=So.plotOptions.series)||void 0===t?void 0:t.tooltip,null===p||void 0===p?void 0:p.tooltip,s.userOptions.tooltip,null===(i=d.series)||void 0===i?void 0:i.tooltip,m.tooltip,l.tooltip),this.stickyTracking=Ko(l.stickyTracking,m.stickyTracking,f.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||g.stickyTracking),null===u.marker&&delete g.marker,this.zoneAxis=g.zoneAxis||"y";let b=this.zones=(g.zones||[]).map((e=>r({},e)));return(g.negativeColor||g.negativeFillColor)&&!g.zones&&(n={value:g[this.zoneAxis+"Threshold"]||g.threshold||0,className:"highcharts-negative"},c||(n.color=g.negativeColor,n.fillColor=g.negativeFillColor),b.push(n)),b.length&&ko(b[b.length-1].value)&&b.push(c?{}:{color:this.color,fillColor:this.fillColor}),Vo(this,"afterSetOptions",{options:g}),g}getName(){var e;return null!==(e=this.options.name)&&void 0!==e?e:Mo(this.chart.options.lang.seriesName,this,this.chart)}getCyclic(e,t,i){let n,s,r=this.chart,o="".concat(e,"Index"),a="".concat(e,"Counter"),l=(null===i||void 0===i?void 0:i.length)||r.options.chart.colorCount;!t&&(ko(s=Ko("color"===e?this.options.colorIndex:void 0,this[o]))?n=s:(r.series.length||(r[a]=0),n=r[a]%l,r[a]+=1),i&&(t=i[n])),void 0!==n&&(this[o]=n),this[e]=t}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||So.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let e=this.options.marker;this.getCyclic("symbol",e.symbol,this.chart.options.symbols)}getColumn(e,t){return(t?this.dataTable.modified:this.dataTable).getColumn(e,!0)||[]}findPointIndex(e,t){var i,n;let s,r,o,{id:a,x:l}=e,c=this.points,h=this.options.dataSorting,u=this.cropStart||0;if(a){let e=this.chart.get(a);e instanceof Br&&(s=e)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let t=t=>!t.touched&&t.index===e.index;if(null!==h&&void 0!==h&&h.matchByName?t=t=>!t.touched&&t.name===e.name:this.options.relativeXValue&&(t=t=>!t.touched&&t.options.x===e.x),!(s=Fo(c,t)))return}return s&&void 0!==(o=null===(i=s)||void 0===i?void 0:i.index)&&(r=!0),void 0===o&&Uo(l)&&(o=this.getColumn("x").indexOf(l,t)),-1!==o&&void 0!==o&&this.cropped&&(o=o>=u?o-u:o),!r&&Uo(o)&&null!==(n=c[o])&&void 0!==n&&n.touched&&(o=void 0),o}updateData(e,t){let i,n,s,r,{options:o,requireSorting:a}=this,l=o.dataSorting,c=this.points,h=[],u=e.length===c.length,d=!0;if(this.xIncrement=null,e.forEach(((e,t)=>{var n;let s,d=ko(e)&&this.pointClass.prototype.optionsToObject.call({series:this},e)||{},{id:f,x:p}=d;f||Uo(p)?(-1===(s=this.findPointIndex(d,r))||void 0===s?h.push(e):c[s]&&e!==(null===(n=o.data)||void 0===n?void 0:n[s])?(c[s].update(e,!1,void 0,!1),c[s].touched=!0,a&&(r=s+1)):c[s]&&(c[s].touched=!0),(!u||t!==s||(null===l||void 0===l?void 0:l.enabled)||this.hasDerivedData)&&(i=!0)):h.push(e)}),this),i)for(n=c.length;n--;){var f,p;(s=c[n])&&!s.touched&&(null===(f=(p=s).remove)||void 0===f||f.call(p,!1,t))}else!u||null!==l&&void 0!==l&&l.enabled?d=!1:(e.forEach(((e,t)=>{e===c[t].y||c[t].destroyed||c[t].update(e,!1,void 0,!1)})),h.length=0);if(c.forEach((e=>{e&&(e.touched=!1)})),!d)return!1;h.forEach((e=>{this.addPoint(e,!1,void 0,void 0,!1)}),this);let m=this.getColumn("x");return null===this.xIncrement&&m.length&&(this.xIncrement=Po(m),this.autoIncrement()),!0}dataColumnKeys(){return["x",...this.pointArrayMap||["y"]]}setData(e){let t,i,n,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,a=this.points,l=(null===a||void 0===a?void 0:a.length)||0,c=this.options,h=this.chart,u=c.dataSorting,d=this.xAxis,f=c.turboThreshold,p=this.dataTable,m=this.dataColumnKeys(),g=this.pointValKey||"y",b=(this.pointArrayMap||[]).length,v=c.keys,y=0,x=1;h.options.chart.allowMutatingData||(c.data&&delete this.options.data,this.userOptions.data&&delete this.userOptions.data,n=Xo(!0,e));let S=(e=n||e||[]).length;if(null!==u&&void 0!==u&&u.enabled&&(e=this.sortData(e)),h.options.chart.allowMutatingData&&!1!==o&&S&&l&&!this.cropped&&!this.hasGroupedData&&this.visible&&!this.boosted&&(i=this.updateData(e,r)),!i){this.xIncrement=null,this.colorCounter=0;let i=f&&!c.relativeXValue&&S>f;if(i){let t=this.getFirstValidPoint(e),n=this.getFirstValidPoint(e,S-1,-1),s=e=>!(!zo(e)||!v&&!Uo(e[0]));if(Uo(t)&&Uo(n)){let t=[],i=[];for(let n of e)t.push(this.autoIncrement()),i.push(n);p.setColumns({x:t,[g]:i})}else if(s(t)&&s(n))if(b){let i=+(t.length===b),n=Array(m.length).fill(0).map((()=>[]));for(let t of e){i&&n[0].push(this.autoIncrement());for(let e=i;e<=b;e++){var E;null===(E=n[e])||void 0===E||E.push(t[e-i])}}p.setColumns(m.reduce(((e,t,i)=>(e[t]=n[i],e)),{}))}else{v&&(y=v.indexOf("x"),x=v.indexOf("y"),y=y>=0?y:0,x=x>=0?x:1),1===t.length&&(x=0);let i=[],n=[];if(y===x)for(let t of e)i.push(this.autoIncrement()),n.push(t[x]);else for(let t of e)i.push(t[y]),n.push(t[x]);p.setColumns({x:i,[g]:n})}else i=!1}if(!i){let i=m.reduce(((e,t)=>(e[t]=[],e)),{});for(t=0;t<S;t++){let n=this.pointClass.prototype.applyOptions.apply({series:this},[e[t]]);for(let e of m)i[e][t]=n[e]}p.setColumns(i)}for(Ho(this.getColumn("y")[0])&&Do(14,!0,h),this.data=[],this.options.data=this.userOptions.data=e,t=l;t--;){var w;null===(w=a[t])||void 0===w||w.destroy()}d&&(d.minRange=d.userMinRange),this.isDirty=h.isDirtyBox=!0,this.isDirtyData=!!a,r=!1}"point"===c.legendType&&(this.processData(),this.generatePoints()),s&&h.redraw(r)}sortData(e){let t=this,i=t.options.dataSorting.sortKey||"y",n=function(e,t){return ko(t)&&e.pointClass.prototype.optionsToObject.call({series:e},t)||{}};return e.forEach((function(i,s){e[s]=n(t,i),e[s].index=s}),this),e.concat().sort(((e,t)=>{let n=Go(i,e),s=Go(i,t);return s<n?-1:+(s>n)})).forEach((function(e,t){e.x=t}),this),t.linkedSeries&&t.linkedSeries.forEach((function(t){var i;let s=t.options,r=s.data;(null===(i=s.dataSorting)||void 0===i||!i.enabled)&&r&&(r.forEach((function(i,s){r[s]=n(t,i),e[s]&&(r[s].x=e[s].x,r[s].index=s)})),t.setData(r,!1))})),e}getProcessedData(e){let t,i,n,s,r,o=this,{dataTable:a,isCartesian:l,options:c,xAxis:h}=o,u=c.cropThreshold,d=e||o.getExtremesFromAll,f=null===h||void 0===h?void 0:h.logarithmic,p=a.rowCount,m=0,g=o.getColumn("x"),b=a,v=!1;return h&&(s=(n=h.getExtremes()).min,r=n.max,v=!(!h.categories||h.names.length),l&&o.sorted&&!d&&(!u||p>u||o.forceCrop)&&(g[p-1]<s||g[0]>r?b=new lo:o.getColumn(o.pointValKey||"y").length&&(g[0]<s||g[p-1]>r)&&(b=(t=this.cropData(a,s,r)).modified,m=t.start,i=!0))),g=b.getColumn("x")||[],{modified:b,cropped:i,cropStart:m,closestPointRange:jo([f?g.map(f.log2lin):g],(()=>o.requireSorting&&!v&&Do(15,!1,o.chart)))}}processData(e){let t=this.xAxis,i=this.dataTable;if(this.isCartesian&&!this.isDirty&&!t.isDirty&&!this.yAxis.isDirty&&!e)return!1;let n=this.getProcessedData();i.modified=n.modified,this.cropped=n.cropped,this.cropStart=n.cropStart,this.closestPointRange=this.basePointRange=n.closestPointRange,Vo(this,"afterProcessData")}cropData(e,t,i){let n,s,r=e.getColumn("x",!0)||[],o=r.length,a={},l=0,c=o;for(n=0;n<o;n++)if(r[n]>=t){l=Math.max(0,n-1);break}for(s=n;s<o;s++)if(r[s]>i){c=s+1;break}for(let h of this.dataColumnKeys()){let t=e.getColumn(h,!0);t&&(a[h]=t.slice(l,c))}return{modified:new lo({columns:a}),start:l,end:c}}generatePoints(){var e,t;let i,n,s,r,o,a=this.options,l=this.processedData||a.data,c=this.dataTable.modified,h=this.getColumn("x",!0),u=this.pointClass,d=c.rowCount,f=this.cropStart||0,p=this.hasGroupedData,m=a.keys,g=[],b=null!==(e=a.dataGrouping)&&void 0!==e&&e.groupAll?f:0,v=null===(t=this.xAxis)||void 0===t?void 0:t.categories,y=this.pointArrayMap||["y"],x=this.dataColumnKeys(),S=this.data;if(!S&&!p){let e=[];e.length=(null===l||void 0===l?void 0:l.length)||0,S=this.data=e}for(m&&p&&(this.options.keys=!1),r=0;r<d;r++){var E,w,T;n=f+r,p?((s=new u(this,c.getRow(r,x)||[])).dataGroup=this.groupMap[b+r],(null===(E=s.dataGroup)||void 0===E?void 0:E.options)&&(s.options=s.dataGroup.options,Bo(s,s.dataGroup.options),delete s.dataLabels)):(s=S[n],o=l?l[n]:c.getRow(r,y),s||void 0===o||(S[n]=s=new u(this,o,h[r]))),s&&(s.index=p?b+r:n,g[r]=s,s.category=null!==(w=null===v||void 0===v?void 0:v[s.x])&&void 0!==w?w:s.x,s.key=null!==(T=s.name)&&void 0!==T?T:s.category)}if(this.options.keys=m,S&&(d!==(i=S.length)||p))for(r=0;r<i;r++)r!==f||p||(r+=d),S[r]&&(S[r].destroyElements(),S[r].plotX=void 0);this.data=S,this.points=g,Vo(this,"afterGeneratePoints")}getXExtremes(e){return{min:Co(e),max:Po(e)}}getExtremes(e,t){var i;let n,s,r,{xAxis:o,yAxis:a}=this,l=t||this.getExtremesFromAll||this.options.getExtremesFromAll,c=l&&this.cropped?this.dataTable:this.dataTable.modified,h=c.rowCount,u=e||this.stackedYData,d=u?[u]:(null===(i=this.keysAffectYAxis||this.pointArrayMap||["y"])||void 0===i?void 0:i.map((e=>c.getColumn(e,!0)||[])))||[],f=this.getColumn("x",!0),p=[],m=this.requireSorting&&!this.is("column")?1:0,g=!!a&&a.positiveValuesOnly,b=l||this.cropped||!o,v=0,y=0;for(o&&(v=(n=o.getExtremes()).min,y=n.max),r=0;r<h;r++)if(s=f[r],b||(f[r+m]||s)>=v&&(f[r-m]||s)<=y)for(let e of d){let t=e[r];Uo(t)&&(t>0||!g)&&p.push(t)}let x={activeYData:p,dataMin:Co(p),dataMax:Po(p)};return Vo(this,"afterGetExtremes",{dataExtremes:x}),x}applyExtremes(){let e=this.getExtremes();return this.dataMin=e.dataMin,this.dataMax=e.dataMax,e}getFirstValidPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e.length,s=t;for(;s>=0&&s<n;){if(ko(e[s]))return e[s];s+=i}}translate(){this.generatePoints();let e,t,i,n,s=this.options,r=s.stacking,o=this.xAxis,a=this.enabledDataSorting,l=this.yAxis,c=this.points,h=c.length,u=this.pointPlacementToXValue(),d=!!u,f=s.threshold,p=s.startFromThreshold?f:0,m=(null===s||void 0===s?void 0:s.nullInteraction)&&l.len,g=Number.MAX_VALUE;function b(e){return Ao(e,-1e9,1e9)}for(e=0;e<h;e++){var v;let s,h,y,x=c[e],S=x.x,E=x.y,w=x.low,T=r&&(null===(v=l.stacking)||void 0===v?void 0:v.stacks[(this.negStacks&&E<(p?0:f)?"-":"")+this.stackKey]);x.plotX=Uo(t=o.translate(S,!1,!1,!1,!0,u))?No(b(t)):void 0,r&&this.visible&&T&&T[S]&&(n=this.getStackIndicator(n,S,this.index),!x.isNull&&n.key&&(y=(h=T[S]).points[n.key]),h&&zo(y)&&(w=y[0],E=y[1],w===p&&n.key===T[S].base&&(w=Ko(Uo(f)?f:l.min)),l.positiveValuesOnly&&ko(w)&&w<=0&&(w=void 0),x.total=x.stackTotal=Ko(h.total),x.percentage=ko(x.y)&&h.total?x.y/h.total*100:void 0,x.stackY=E,this.irregularWidths||h.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),x.yBottom=ko(w)?b(l.translate(w,!1,!0,!1,!0)):void 0,this.dataModify&&(E=this.dataModify.modifyValue(E,e)),Uo(E)&&void 0!==x.plotX?s=Uo(s=l.translate(E,!1,!0,!1,!0))?b(s):void 0:!Uo(E)&&m&&(s=m),x.plotY=s,x.isInside=this.isPointInside(x),x.clientX=d?No(o.translate(S,!1,!1,!1,!0,u)):t,x.negative=(x.y||0)<(f||0),x.isNull||!1===x.visible||(void 0!==i&&(g=Math.min(g,Math.abs(t-i))),i=t),x.zone=this.zones.length?x.getZone():void 0,!x.graphic&&this.group&&a&&(x.isNew=!0)}this.closestPointRangePx=g,Vo(this,"afterTranslate")}getValidPoints(e,t,i){let n=this.chart;return(e||this.points||[]).filter((function(e){let{plotX:s,plotY:r}=e;return(!!i||!e.isNull&&!!Uo(r))&&(!t||!!n.isInsidePlot(s,r,{inverted:n.inverted}))&&!1!==e.visible}))}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:e,group:t,markerGroup:i}=this,n=e.sharedClips,s=e.renderer,r=e.getClipBox(this),o=this.getSharedClipKey(),a=n[o];a?a.animate(r):n[o]=a=s.clipRect(r),t&&t.clip(!1===this.options.clip?void 0:a),i&&i.clip()}animate(e){let{chart:t,group:i,markerGroup:n}=this,s=t.inverted,r=yo(this.options.animation),o=[this.getSharedClipKey(),r.duration,r.easing,r.defer].join(","),a=t.sharedClips[o],l=t.sharedClips[o+"m"];if(e&&i){let e=t.getClipBox(this);if(a)a.attr("height",e.height);else{e.width=0,s&&(e.x=t.plotHeight),a=t.renderer.clipRect(e),t.sharedClips[o]=a;let i={x:-99,y:-99,width:s?t.plotWidth+199:99,height:s?99:t.plotHeight+199};l=t.renderer.clipRect(i),t.sharedClips[o+"m"]=l}i.clip(a),null===n||void 0===n||n.clip(l)}else if(a&&!a.hasClass("highcharts-animating")){let e=t.getClipBox(this),i=r.step;(null!==n&&void 0!==n&&n.element.childNodes.length||t.series.length>1)&&(r.step=function(e,t){var n;i&&i.apply(t,arguments),"width"===t.prop&&(null===(n=l)||void 0===n?void 0:n.element)&&l.attr(s?"height":"width",e+99)}),a.addClass("highcharts-animating").animate(e,r)}}afterAnimate(){this.setClip(),Yo(this.chart.sharedClips,((e,t,i)=>{e&&!this.chart.container.querySelector('[clip-path="url(#'.concat(e.id,')"]'))&&(e.destroy(),delete i[t])})),this.finishedAnimating=!0,Vo(this,"afterAnimate")}drawPoints(){let e,t,i,n,s,r,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.points,l=this.chart,c=l.styledMode,{colorAxis:h,options:u}=this,d=u.marker,f=u.nullInteraction,p=this[this.specialGroup||"markerGroup"],m=this.xAxis,g=Ko(d.enabled,!m||!!m.isRadial||null,this.closestPointRangePx>=d.enabledThreshold*d.radius);if(!1!==d.enabled||this._hasPointMarkers)for(e=0;e<a.length;e++){n=(i=(t=a[e]).graphic)?"animate":"attr",s=t.marker||{},r=!!t.marker;let u=t.isNull;if(!(g&&!ko(s.enabled)||s.enabled)||u&&!f||!1===t.visible)i&&(t.graphic=i.destroy());else{let e=Ko(s.symbol,this.symbol,"rect");o=this.markerAttribs(t,t.selected&&"select"),this.enabledDataSorting&&(t.startXPos=m.reversed?-(o.width||0):m.width);let a=!1!==t.isInside;if(!i&&a&&((o.width||0)>0||t.hasImage)&&(t.graphic=i=l.renderer.symbol(e,o.x,o.y,o.width,o.height,r?s:d).add(p),this.enabledDataSorting&&l.hasRendered&&(i.attr({x:t.startXPos}),n="animate")),i&&"animate"===n&&i[a?"show":"hide"](a).animate(o),i){let e=this.pointAttribs(t,c||!t.selected?void 0:"select");c?h&&i.css({fill:e.fill}):i[n](e)}i&&i.addClass(t.getClassName(),!0)}}}markerAttribs(e,t){var i,n,s;let r,o,a=this.options,l=a.marker,c=e.marker||{},h=c.symbol||l.symbol,u={},d=Ko(c.radius,null===l||void 0===l?void 0:l.radius);t&&(r=l.states[t],o=c.states&&c.states[t],d=Ko(null===(i=o)||void 0===i?void 0:i.radius,null===(n=r)||void 0===n?void 0:n.radius,d&&d+((null===(s=r)||void 0===s?void 0:s.radiusPlus)||0))),e.hasImage=h&&0===h.indexOf("url"),e.hasImage&&(d=0);let f=e.pos();return Uo(d)&&f&&(a.crisp&&(f[0]=Lo(f[0],e.hasImage?0:"rect"===h?(null===l||void 0===l?void 0:l.lineWidth)||0:1)),u.x=f[0]-d,u.y=f[1]-d),d&&(u.width=u.height=2*d),u}pointAttribs(e,t){var i;let n,s,r,o,a=this.options,l=a.marker,c=null===e||void 0===e?void 0:e.options,h=(null===c||void 0===c?void 0:c.marker)||{},u=null===c||void 0===c?void 0:c.color,d=null===e||void 0===e?void 0:e.color,f=null===e||void 0===e||null===(i=e.zone)||void 0===i?void 0:i.color,p=this.color,m=Ko(h.lineWidth,l.lineWidth),g=null!==e&&void 0!==e&&e.isNull&&a.nullInteraction?0:1;return p=u||f||d||p,r=h.fillColor||l.fillColor||p,o=h.lineColor||l.lineColor||p,t=t||"normal",n=l.states[t]||{},m=Ko((s=h.states&&h.states[t]||{}).lineWidth,n.lineWidth,m+Ko(s.lineWidthPlus,n.lineWidthPlus,0)),r=s.fillColor||n.fillColor||r,o=s.lineColor||n.lineColor||o,{stroke:o,"stroke-width":m,fill:r,opacity:g=Ko(s.opacity,n.opacity,g)}}destroy(e){let t,i,n=this,s=n.chart,r=/AppleWebKit\/533/.test(To.navigator.userAgent),o=n.data||[];for(Vo(n,"destroy",{keepEventsForUpdate:e}),this.removeEvents(e),(n.axisTypes||[]).forEach((function(e){var t;i=n[e],(null===(t=i)||void 0===t?void 0:t.series)&&(Oo(i.series,n),i.isDirty=i.forceRedraw=!0)})),n.legendItem&&n.chart.legend.destroyItem(n),t=o.length;t--;){var a,l;null===(a=o[t])||void 0===a||null===(l=a.destroy)||void 0===l||l.call(a)}for(let c of n.zones)Io(c,void 0,!0);q.clearTimeout(n.animationTimeout),Yo(n,(function(e,t){e instanceof ci&&!e.survive&&e[r&&"group"===t?"hide":"destroy"]()})),s.hoverSeries===n&&(s.hoverSeries=void 0),Oo(s.series,n),s.orderItems("series"),Yo(n,(function(t,i){e&&"hcEvents"===i||delete n[i]}))}applyZones(){let{area:e,chart:t,graph:i,zones:n,points:s,xAxis:r,yAxis:o,zoneAxis:a}=this,{inverted:l,renderer:c}=t,h=this["".concat(a,"Axis")],{isXAxis:u,len:d=0,minPointOffset:f=0}=h||{},p=((null===i||void 0===i?void 0:i.strokeWidth())||0)/2+1,m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;l&&(i=d-i);let{translated:n=0,lineClip:s}=e,r=i-n;null===s||void 0===s||s.push(["L",t,Math.abs(r)<p?i-p*(r<=0?-1:1):n])};if(n.length&&(i||e)&&h&&Uo(h.min)){let t=h.getExtremes().max+f,p=e=>{e.forEach(((t,i)=>{("M"===t[0]||"L"===t[0])&&(e[i]=[t[0],u?d-t[1]:t[1],u?t[2]:d-t[2]])}))};if(n.forEach((e=>{e.lineClip=[],e.translated=Ao(h.toPixels(Ko(e.value,t),!0)||0,0,d)})),i&&!this.showLine&&i.hide(),e&&e.hide(),"y"===a&&s.length<r.len)for(let e of s){let{plotX:t,plotY:i,zone:s}=e,r=s&&n[n.indexOf(s)-1];s&&m(s,t,i),r&&m(r,t,i)}let g=[],b=h.toPixels(h.getExtremes().min-f,!0);n.forEach((t=>{var n,s,a;let h=t.lineClip||[],d=Math.round(t.translated||0);r.reversed&&h.reverse();let{clip:f,simpleClip:m}=t,v=0,y=0,x=r.len,S=o.len;u?(v=d,x=b):(y=d,S=b);let E=[["M",v,y],["L",x,y],["L",x,S],["L",v,S],["Z"]],w=[E[0],...h,E[1],E[2],...g,E[3],E[4]];g=h.reverse(),b=d,l&&(p(w),e&&p(E)),f?(f.animate({d:w}),null===(n=m)||void 0===n||n.animate({d:E})):(f=t.clip=c.path(w),e&&(m=t.simpleClip=c.path(E))),i&&null!==(s=t.graph)&&void 0!==s&&s.clip(f),e&&(null===(a=t.area)||void 0===a||a.clip(m))}))}else this.visible&&(i&&i.show(),e&&e.show())}plotGroup(e,t,i,n,s){let r=this[e],o=!r,a={visibility:i,zIndex:n||.1};return ko(this.opacity)&&!this.chart.styledMode&&"inactive"!==this.state&&(a.opacity=this.opacity),r||(this[e]=r=this.chart.renderer.g().add(s)),r.addClass("highcharts-"+t+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(ko(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(r.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),r.attr(a)[o?"attr":"animate"](this.getPlotBox(t)),r}getPlotBox(e){let t=this.xAxis,i=this.yAxis,n=this.chart,s=n.inverted&&!n.polar&&t&&this.invertible&&"series"===e;n.inverted&&(t=i,i=this.xAxis);let r={scale:1,translateX:t?t.left:n.plotLeft,translateY:i?i.top:n.plotTop,name:e};Vo(this,"getPlotBox",r);let{scale:o,translateX:a,translateY:l}=r;return{translateX:a,translateY:l,rotation:90*!!s,rotationOriginX:s?o*(t.len-i.len)/2:0,rotationOriginY:s?o*(t.len+i.len)/2:0,scaleX:s?-o:o,scaleY:o}}removeEvents(e){let{eventsToUnbind:t}=this;e||qo(this),t.length&&(t.forEach((e=>{e()})),t.length=0)}render(){var e,t,i,n,s;let r=this,{chart:o,options:a,hasRendered:l}=r,c=yo(a.animation),h=r.visible?"inherit":"hidden",u=a.zIndex,d=o.seriesGroup,f=r.finishedAnimating?0:c.duration;Vo(this,"render"),r.plotGroup("group","series",h,u,d),r.markerGroup=r.plotGroup("markerGroup","markers",h,u,d),!1!==a.clip&&r.setClip(),f&&null!==(e=r.animate)&&void 0!==e&&e.call(r,!0),r.drawGraph&&(r.drawGraph(),r.applyZones()),r.visible&&r.drawPoints(),null!==(t=r.drawDataLabels)&&void 0!==t&&t.call(r),null!==(i=r.redrawPoints)&&void 0!==i&&i.call(r),a.enableMouseTracking&&null!==(n=r.drawTracker)&&void 0!==n&&n.call(r),f&&null!==(s=r.animate)&&void 0!==s&&s.call(r),l||(f&&c.defer&&(f+=c.defer),r.animationTimeout=$o((()=>{r.afterAnimate()}),f||0)),r.isDirty=!1,r.hasRendered=!0,Vo(r,"afterRender")}redraw(){let e=this.isDirty||this.isDirtyData;this.translate(),this.render(),e&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(e,t){let{xAxis:i,yAxis:n}=this,s=this.chart.inverted;return this.searchKDTree({clientX:s?i.len-e.chartY+i.pos:e.chartX-i.pos,plotY:s?n.len-e.chartX+n.pos:e.chartY-n.pos},t,e)}buildKDTree(e){this.buildingKdTree=!0;let t=this,i=t.options,n=i.findNearestPointBy.indexOf("y")>-1?2:1;delete t.kdTree,$o((function(){t.kdTree=function e(i,n,s){let r,o,a=null===i||void 0===i?void 0:i.length;if(a)return r=t.kdAxisArray[n%s],i.sort(((e,t)=>(e[r]||0)-(t[r]||0))),{point:i[o=Math.floor(a/2)],left:e(i.slice(0,o),n+1,s),right:e(i.slice(o+1),n+1,s)}}(t.getValidPoints(void 0,!t.directTouch,null===i||void 0===i?void 0:i.nullInteraction),n,n),t.buildingKdTree=!1}),i.kdNow||"touchstart"===(null===e||void 0===e?void 0:e.type)?0:1)}searchKDTree(e,t,i,n,s){let r=this,[o,a]=this.kdAxisArray,l=t?"distX":"dist",c=(r.options.findNearestPointBy||"").indexOf("y")>-1?2:1,h=!!r.isBubble,u=n||((e,t,i)=>{let n=e[i]||0,s=t[i]||0;return[n===s&&e.index>t.index||n<s?e:t,!1]}),d=s||((e,t)=>e<t);if(this.kdTree||this.buildingKdTree||this.buildKDTree(i),this.kdTree)return function e(t,i,n,s,c){let f=i.point,p=r.kdAxisArray[n%s],m=f,g=!1;!function(e,t,i){let n=e[o],s=t[o],r=ko(n)&&ko(s)?n-s:null,l=e[a],c=t[a],u=ko(l)&&ko(c)?l-c:0,d=h&&(null===(i=t.marker)||void 0===i?void 0:i.radius)||0;t.dist=Math.sqrt((r&&r*r||0)+u*u)-d,t.distX=ko(r)?Math.abs(r)-d:Number.MAX_VALUE}(t,f);let b=(t[p]||0)-(f[p]||0)+(h&&(null===(c=f.marker)||void 0===c?void 0:c.radius)||0),v=b<0?"left":"right",y=b<0?"right":"left";return i[v]&&([m,g]=u(f,e(t,i[v],n+1,s),l)),i[y]&&d(Math.sqrt(b*b),m[l],g)&&(m=u(m,e(t,i[y],n+1,s),l)[0]),m}(e,this.kdTree,c,c)}pointPlacementToXValue(){let{options:e,xAxis:t}=this,i=e.pointPlacement;return"between"===i&&(i=t.reversed?-.5:.5),Uo(i)?i*(e.pointRange||t.pointRange):0}isPointInside(e){let{chart:t,xAxis:i,yAxis:n}=this,{plotX:s=-1,plotY:r=-1}=e;return r>=0&&r<=(n?n.len:t.plotHeight)&&s>=0&&s<=(i?i.len:t.plotWidth)}drawTracker(){var e;let t=this,i=t.options,n=i.trackByArea,s=[].concat((n?t.areaPath:t.graphPath)||[]),r=t.chart,o=r.pointer,a=r.renderer,l=(null===(e=r.options.tooltip)||void 0===e?void 0:e.snap)||0,c=()=>{i.enableMouseTracking&&r.hoverSeries!==t&&t.onMouseOver()},h="rgba(192,192,192,"+(wo?1e-4:.002)+")",u=t.tracker;u?u.attr({d:s}):t.graph&&(t.tracker=u=a.path(s).attr({visibility:t.visible?"inherit":"hidden",zIndex:2}).addClass(n?"highcharts-tracker-area":"highcharts-tracker-line").add(t.group),r.styledMode||u.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:h,fill:n?h:"none","stroke-width":t.graph.strokeWidth()+(n?0:2*l)}),[t.tracker,t.markerGroup,t.dataLabelsGroup].forEach((e=>{e&&(e.addClass("highcharts-tracker").on("mouseover",c).on("mouseout",(e=>{null===o||void 0===o||o.onTrackerMouseOut(e)})),i.cursor&&!r.styledMode&&e.css({cursor:i.cursor}),e.on("touchstart",c))}))),Vo(this,"afterDrawTracker")}addPoint(e,t,i,n,s){let r,o,a=this.options,{chart:l,data:c,dataTable:h,xAxis:u}=this,d=(null===u||void 0===u?void 0:u.hasNames)&&u.names,f=a.data,p=this.getColumn("x");t=Ko(t,!0);let m={series:this};this.pointClass.prototype.applyOptions.apply(m,[e]);let g=m.x;if(o=p.length,this.requireSorting&&g<p[o-1])for(r=!0;o&&p[o-1]>g;)o--;h.setRow(m,o,!0,{addColumns:!1}),d&&m.name&&(d[g]=m.name),null!==f&&void 0!==f&&f.splice(o,0,e),(r||this.processedData)&&(this.data.splice(o,0,null),this.processData()),"point"===a.legendType&&this.generatePoints(),i&&(c[0]&&c[0].remove?c[0].remove(!1):([c,f].filter(ko).forEach((e=>{e.shift()})),h.deleteRows(0))),!1!==s&&Vo(this,"addPoint",{point:m}),this.isDirty=!0,this.isDirtyData=!0,t&&l.redraw(n)}removePoint(e,t,i){let n=this,{chart:s,data:r,points:o,dataTable:a}=n,l=r[e],c=function(){[(null===o||void 0===o?void 0:o.length)===r.length?o:void 0,r,n.options.data].filter(ko).forEach((t=>{t.splice(e,1)})),a.deleteRows(e),null!==l&&void 0!==l&&l.destroy(),n.isDirty=!0,n.isDirtyData=!0,t&&s.redraw()};xo(i,s),t=Ko(t,!0),l?l.firePointEvent("remove",null,c):c()}remove(e,t,i,n){let s=this,r=s.chart;function o(){s.destroy(n),r.isDirtyLegend=r.isDirtyBox=!0,r.linkSeries(n),Ko(e,!0)&&r.redraw(t)}!1!==i?Vo(s,"remove",null,o):o()}update(e,t){var i,n,s;Vo(this,"update",{options:e=Ro(e,this.userOptions)});let r,o,a=this,l=a.chart,c=a.userOptions,h=a.initialType||a.type,u=l.options.plotOptions,d=_o[h].prototype,f=a.finishedAnimating&&{animation:!1},p={},m=Zo.keepProps.slice(),g=e.type||c.type||l.options.chart.type,b=!(this.hasDerivedData||g&&g!==this.type||void 0!==e.keys||void 0!==e.pointStart||void 0!==e.pointInterval||void 0!==e.relativeXValue||e.joinBy||e.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some((e=>a.hasOptionChanged(e))));g=g||h,b?(m.push.apply(m,Zo.keepPropsForPoints),!1!==e.visible&&m.push("area","graph"),a.parallelArrays.forEach((function(e){m.push(e+"Data")})),e.data&&(e.dataSorting&&Bo(a.options.dataSorting,e.dataSorting),this.setData(e.data,!1))):this.dataTable.modified=this.dataTable,e=Xo(c,{index:void 0===c.index?a.index:c.index,pointStart:null!==(i=null!==(n=null===u||void 0===u||null===(s=u.series)||void 0===s?void 0:s.pointStart)&&void 0!==n?n:c.pointStart)&&void 0!==i?i:a.getColumn("x")[0]},!b&&{data:a.options.data},e,f),b&&e.data&&(e.data=a.options.data),(m=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(m)).forEach((function(e){m[e]=a[e],delete a[e]}));let v=!1;if(_o[g]){if(v=g!==a.type,a.remove(!1,!1,!1,!0),v)if(l.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(a,_o[g].prototype);else{let e=Object.hasOwnProperty.call(a,"hcEvents")&&a.hcEvents;for(o in d)a[o]=void 0;Bo(a,_o[g].prototype),e?a.hcEvents=e:delete a.hcEvents}}else Do(17,!0,l,{missingModuleFor:g});if(m.forEach((function(e){a[e]=m[e]})),a.init(l,e),b&&this.points)for(let x of(!1===(r=a.options).visible?(p.graphic=1,p.dataLabel=1):(this.hasMarkerChanged(r,c)&&(p.graphic=1),(null===(y=a.hasDataLabels)||void 0===y?void 0:y.call(a))||(p.dataLabel=1)),this.points)){var y;(null===x||void 0===x?void 0:x.series)&&(x.resolveColor(),Object.keys(p).length&&x.destroyElements(p),!1===r.showInLegend&&x.legendItem&&l.legend.destroyItem(x))}a.initialType=h,l.linkSeries(),l.setSortedData(),v&&a.linkedSeries.length&&(a.isDirtyData=!0),Vo(this,"afterUpdate"),Ko(t,!0)&&l.redraw(!!b&&void 0)}setName(e){this.name=this.options.name=this.userOptions.name=e,this.chart.isDirtyLegend=!0}hasOptionChanged(e){var t,i;let n=this.chart,s=this.options[e],r=n.options.plotOptions,o=this.userOptions[e],a=Ko(null===r||void 0===r||null===(t=r[this.type])||void 0===t?void 0:t[e],null===r||void 0===r||null===(i=r.series)||void 0===i?void 0:i[e]);return o&&!ko(a)?s!==o:s!==Ko(a,s)}onMouseOver(){let e=this.chart,t=e.hoverSeries,i=e.pointer;null!==i&&void 0!==i&&i.setHoverChartIndex(),t&&t!==this&&t.onMouseOut(),this.options.events.mouseOver&&Vo(this,"mouseOver"),this.setState("hover"),e.hoverSeries=this}onMouseOut(){let e=this.options,t=this.chart,i=t.tooltip,n=t.hoverPoint;t.hoverSeries=null,n&&n.onMouseOut(),this&&e.events.mouseOut&&Vo(this,"mouseOut"),i&&!this.stickyTracking&&(!i.shared||this.noSharedTooltip)&&i.hide(),t.series.forEach((function(e){e.setState("",!0)}))}setState(e,t){let i=this,n=i.options,s=i.graph,r=n.inactiveOtherPoints,o=n.states,a=Ko(o[e||"normal"]&&o[e||"normal"].animation,i.chart.options.chart.animation),l=n.lineWidth,c=n.opacity;if(e=e||"",i.state!==e&&([i.group,i.markerGroup,i.dataLabelsGroup].forEach((function(t){t&&(i.state&&t.removeClass("highcharts-series-"+i.state),e&&t.addClass("highcharts-series-"+e))})),i.state=e,!i.chart.styledMode)){if(o[e]&&!1===o[e].enabled)return;if(e&&(l=o[e].lineWidth||l+(o[e].lineWidthPlus||0),c=Ko(o[e].opacity,c)),s&&!s.dashstyle&&Uo(l))for(let e of[s,...this.zones.map((e=>e.graph))])null===e||void 0===e||e.animate({"stroke-width":l},a);r||[i.group,i.markerGroup,i.dataLabelsGroup,i.labelBySeries].forEach((function(e){e&&e.animate({opacity:c},a)}))}t&&r&&i.points&&i.setAllPointsToState(e||void 0)}setAllPointsToState(e){this.points.forEach((function(t){t.setState&&t.setState(e)}))}setVisible(e,t){var i;let n=this,s=n.chart,r=s.options.chart.ignoreHiddenSeries,o=n.visible;n.visible=e=n.options.visible=n.userOptions.visible=void 0===e?!o:e;let a=e?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach((e=>{var t;null===(t=n[e])||void 0===t||t[a]()})),(s.hoverSeries===n||(null===(i=s.hoverPoint)||void 0===i?void 0:i.series)===n)&&n.onMouseOut(),n.legendItem&&s.legend.colorizeItem(n,e),n.isDirty=!0,n.options.stacking&&s.series.forEach((e=>{e.options.stacking&&e.visible&&(e.isDirty=!0)})),n.linkedSeries.forEach((t=>{t.setVisible(e,!1)})),r&&(s.isDirtyBox=!0),Vo(n,a),!1!==t&&s.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(e){this.selected=e=this.options.selected=void 0===e?!this.selected:e,this.checkbox&&(this.checkbox.checked=e),Vo(this,e?"select":"unselect")}shouldShowTooltip(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.series=this,i.visiblePlotOnly=!0,this.chart.isInsidePlot(e,t,i)}drawLegendSymbol(e,t){var i;null===(i=fo[this.options.legendSymbol||"rectangle"])||void 0===i||i.call(this,e,t)}}Zo.defaultOptions={lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:e}=this.series.chart;return"number"!=typeof this.y?"":e(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},Zo.types=vo.seriesTypes,Zo.registerType=vo.registerSeriesType,Zo.keepProps=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],Zo.keepPropsForPoints=["data","isDirtyData","isDirtyCanvas","points","dataTable","processedData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"],Bo(Zo.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:Br,requireSorting:!0,sorted:!0}),vo.series=Zo;let Qo=Zo,{animObject:Jo,setAnimation:ea}=Xe,{registerEventOptions:ta}=kn,{composed:ia,marginNames:na}=T,{distribute:sa}=At,{format:ra}=wt,{addEvent:oa,createElement:aa,css:la,defined:ca,discardElement:ha,find:ua,fireEvent:da,isNumber:fa,merge:pa,pick:ma,pushUnique:ga,relativeLength:ba,stableSort:va,syncTimeout:ya}=q;class xa{constructor(e,t){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=e,this.setOptions(t),t.enabled&&(this.render(),ta(this,t),oa(this.chart,"endResize",(function(){this.legend.positionCheckboxes()}))),oa(this.chart,"render",(()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())}))}setOptions(e){let t=ma(e.padding,8);this.options=e,this.chart.styledMode||(this.itemStyle=e.itemStyle,this.itemHiddenStyle=pa(this.itemStyle,e.itemHiddenStyle)),this.itemMarginTop=e.itemMarginTop,this.itemMarginBottom=e.itemMarginBottom,this.padding=t,this.initialItemY=t-5,this.symbolWidth=ma(e.symbolWidth,16),this.pages=[],this.proximate="proximate"===e.layout&&!this.chart.inverted,this.baseline=void 0}update(e,t){let i=this.chart;this.setOptions(pa(!0,this.options,e)),"events"in this.options&&ta(this,this.options),this.destroy(),i.isDirtyLegend=i.isDirtyBox=!0,ma(t,!0)&&i.redraw(),da(this,"afterUpdate",{redraw:t})}colorizeItem(e,t){var i;let n=e.color,{area:s,group:r,label:o,line:a,symbol:l}=e.legendItem||{};if((e instanceof Qo||e instanceof Br)&&(e.color=(null===(i=e.options)||void 0===i?void 0:i.legendSymbolColor)||n),null!==r&&void 0!==r&&r[t?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:i={}}=this,n=i.color,{fillColor:r,fillOpacity:c,lineColor:h,marker:u}=e.options,d=e=>(!t&&(e.fill&&(e.fill=n),e.stroke&&(e.stroke=n)),e);null!==o&&void 0!==o&&o.css(pa(t?this.itemStyle:i)),null!==a&&void 0!==a&&a.attr(d({stroke:h||e.color})),l&&l.attr(d(u&&l.isMarker?e.pointAttribs():{fill:e.color})),null===s||void 0===s||s.attr(d({fill:r||e.color,"fill-opacity":r?1:null!==c&&void 0!==c?c:.75}))}e.color=n,da(this,"afterColorizeItem",{item:e,visible:t})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(e){let{group:t,x:i=0,y:n=0}=e.legendItem||{},s=this.options,r=s.symbolPadding,o=!s.rtl,a=e.checkbox;if(null!==t&&void 0!==t&&t.element){let s={translateX:o?i:this.legendWidth-i-2*r-4,translateY:n};t[ca(t.translateY)?"animate":"attr"](s,void 0,(()=>{da(this,"afterPositionItem",{item:e})}))}a&&(a.x=i,a.y=n)}destroyItem(e){let t=e.legendItem||{};for(let i of["group","label","line","symbol"])t[i]&&(t[i]=t[i].destroy());e.checkbox=ha(e.checkbox),e.legendItem=void 0}destroy(){for(let e of this.getAllItems())this.destroyItem(e);for(let e of["clipRect","up","down","pager","nav","box","title","group"])this[e]&&(this[e]=this[e].destroy());this.display=null}positionCheckboxes(){var e;let t,i=null===(e=this.group)||void 0===e?void 0:e.alignAttr,n=this.clipHeight||this.legendHeight,s=this.titleHeight;i&&(t=i.translateY,this.allItems.forEach((function(e){let r,o=e.checkbox;o&&(r=t+s+o.y+(this.scrollOffset||0)+3,la(o,{left:i.translateX+e.checkboxOffset+o.x-20+"px",top:r+"px",display:this.proximate||r>t-6&&r<t+n-6?"":"none"}))}),this))}renderTitle(){let e,t=this.options,i=this.padding,n=t.title,s=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,i-3,i-4,void 0,void 0,void 0,t.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(n.style),this.title.add(this.group)),n.width||this.title.css({width:this.maxLegendWidth+"px"}),s=(e=this.title.getBBox()).height,this.offsetWidth=e.width,this.contentGroup.attr({translateY:s})),this.titleHeight=s}setText(e){let t=this.options;e.legendItem.label.attr({text:t.labelFormat?ra(t.labelFormat,e,this.chart):t.labelFormatter.call(e)})}renderItem(e){var t;let i=e.legendItem=e.legendItem||{},n=this.chart,s=n.renderer,r=this.options,o="horizontal"===r.layout,a=this.symbolWidth,l=r.symbolPadding||0,c=this.itemStyle,h=this.itemHiddenStyle,u=o?ma(r.itemDistance,20):0,d=!r.rtl,f=!e.series,p=!f&&e.series.drawLegendSymbol?e.series:e,m=p.options,g=!!this.createCheckboxForItem&&m&&m.showCheckbox,b=r.useHTML,v=e.options.className,y=i.label,x=a+l+u+20*!!g;!y&&(i.group=s.g("legend-item").addClass("highcharts-"+p.type+"-series highcharts-color-"+e.colorIndex+(v?" "+v:"")+(f?" highcharts-series-"+e.index:"")).attr({zIndex:1}).add(this.scrollGroup),i.label=y=s.text("",d?a+l:-l,this.baseline||0,b),n.styledMode||y.css(pa(e.visible?c:h)),y.attr({align:d?"left":"right",zIndex:2}).add(i.group),!this.baseline&&(this.fontMetrics=s.fontMetrics(y),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,y.attr("y",this.baseline),this.symbolHeight=ma(r.symbolHeight,this.fontMetrics.f),r.squareSymbol&&(this.symbolWidth=ma(r.symbolWidth,Math.max(this.symbolHeight,16)),x=this.symbolWidth+l+u+20*!!g,d&&y.attr("x",this.symbolWidth+l))),p.drawLegendSymbol(this,e),this.setItemEvents&&this.setItemEvents(e,y,b)),g&&!e.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(e),this.colorizeItem(e,e.visible),(n.styledMode||!c.width)&&y.css({width:(r.itemWidth||this.widthOption||n.spacingBox.width)-x+"px"}),this.setText(e);let S=y.getBBox(),E=(null===(t=this.fontMetrics)||void 0===t?void 0:t.h)||0;e.itemWidth=e.checkboxOffset=r.itemWidth||i.labelWidth||S.width+x,this.maxItemWidth=Math.max(this.maxItemWidth,e.itemWidth),this.totalItemWidth+=e.itemWidth,this.itemHeight=e.itemHeight=Math.round(i.labelHeight||(S.height>1.5*E?S.height:E))}layoutItem(e){let t=this.options,i=this.padding,n="horizontal"===t.layout,s=e.itemHeight,r=this.itemMarginBottom,o=this.itemMarginTop,a=n?ma(t.itemDistance,20):0,l=this.maxLegendWidth,c=t.alignColumns&&this.totalItemWidth>l?this.maxItemWidth:e.itemWidth,h=e.legendItem||{};n&&this.itemX-i+c>l&&(this.itemX=i,this.lastLineHeight&&(this.itemY+=o+this.lastLineHeight+r),this.lastLineHeight=0),this.lastItemY=o+this.itemY+r,this.lastLineHeight=Math.max(s,this.lastLineHeight),h.x=this.itemX,h.y=this.itemY,n?this.itemX+=c:(this.itemY+=o+s+r,this.lastLineHeight=s),this.offsetWidth=this.widthOption||Math.max((n?this.itemX-i-(e.checkbox?0:a):c)+i,this.offsetWidth)}getAllItems(){let e=[];return this.chart.series.forEach((function(t){var i;let n=null===t||void 0===t?void 0:t.options;t&&ma(n.showInLegend,!ca(n.linkedTo)&&void 0,!0)&&(e=e.concat((null===(i=t.legendItem)||void 0===i?void 0:i.labels)||("point"===n.legendType?t.data:t)))})),da(this,"afterGetAllItems",{allItems:e}),e}getAlignment(){let e=this.options;return this.proximate?e.align.charAt(0)+"tv":e.floating?"":e.align.charAt(0)+e.verticalAlign.charAt(0)+e.layout.charAt(0)}adjustMargins(e,t){let i=this.chart,n=this.options,s=this.getAlignment();s&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(((r,o)=>{var a;r.test(s)&&!ca(e[o])&&(i[na[o]]=Math.max(i[na[o]],i.legend[(o+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][o]*n[o%2?"x":"y"]+(null!==(a=n.margin)&&void 0!==a?a:12)+t[o]+(i.titleOffset[o]||0)))}))}proximatePositions(){let e,t=this.chart,i=[],n="left"===this.options.align;for(let s of(this.allItems.forEach((function(e){let s,r,o,a,l=n;e.yAxis&&(e.xAxis.options.reversed&&(l=!l),e.points&&(s=ua(l?e.points:e.points.slice(0).reverse(),(function(e){return fa(e.plotY)}))),r=this.itemMarginTop+e.legendItem.label.getBBox().height+this.itemMarginBottom,a=e.yAxis.top-t.plotTop,o=e.visible?(s?s.plotY:e.yAxis.height)+(a-.3*r):a+e.yAxis.height,i.push({target:o,size:r,item:e}))}),this),sa(i,t.plotHeight)))e=s.item.legendItem||{},fa(s.pos)&&(e.y=t.plotTop-t.spacing[0]+s.pos)}render(){let e,t,i,n,s=this.chart,r=s.renderer,o=this.options,a=this.padding,l=this.getAllItems(),c=this.group,h=this.box;this.itemX=a,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=ba(o.width,s.spacingBox.width-a),n=s.spacingBox.width-2*a-o.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(n/=2),this.maxLegendWidth=this.widthOption||n,c||(this.group=c=r.g("legend").addClass(o.className||"").attr({zIndex:7}).add(),this.contentGroup=r.g().attr({zIndex:1}).add(c),this.scrollGroup=r.g().add(this.contentGroup)),this.renderTitle(),va(l,((e,t)=>{var i,n;return((null===(i=e.options)||void 0===i?void 0:i.legendIndex)||0)-((null===(n=t.options)||void 0===n?void 0:n.legendIndex)||0)})),o.reversed&&l.reverse(),this.allItems=l,this.display=e=!!l.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,l.forEach(this.renderItem,this),l.forEach(this.layoutItem,this),t=(this.widthOption||this.offsetWidth)+a,i=this.lastItemY+this.lastLineHeight+this.titleHeight,i=this.handleOverflow(i)+a,h||(this.box=h=r.rect().addClass("highcharts-legend-box").attr({r:o.borderRadius}).add(c)),s.styledMode||h.attr({stroke:o.borderColor,"stroke-width":o.borderWidth||0,fill:o.backgroundColor||"none"}).shadow(o.shadow),t>0&&i>0&&h[h.placed?"animate":"attr"](h.crisp.call({},{x:0,y:0,width:t,height:i},h.strokeWidth())),c[e?"show":"hide"](),s.styledMode&&"none"===c.getStyle("display")&&(t=i=0),this.legendWidth=t,this.legendHeight=i,e&&this.align(),this.proximate||this.positionItems(),da(this,"afterRender")}align(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.spacingBox,t=this.chart,i=this.options,n=e.y;/(lth|ct|rth)/.test(this.getAlignment())&&t.titleOffset[0]>0?n+=t.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&t.titleOffset[2]>0&&(n-=t.titleOffset[2]),n!==e.y&&(e=pa(e,{y:n})),t.hasRendered||(this.group.placed=!1),this.group.align(pa(i,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":i.verticalAlign}),!0,e)}handleOverflow(e){let t,i,n,s,r=this,o=this.chart,a=o.renderer,l=this.options,c=l.y,h="top"===l.verticalAlign,u=this.padding,d=l.maxHeight,f=l.navigation,p=ma(f.animation,!0),m=f.arrowSize||12,g=this.pages,b=this.allItems,v=function(e){"number"==typeof e?E.attr({height:e}):E&&(r.clipRect=E.destroy(),r.contentGroup.clip()),r.contentGroup.div&&(r.contentGroup.div.style.clip=e?"rect("+u+"px,9999px,"+(u+e)+"px,0)":"auto")},y=function(e){return r[e]=a.circle(0,0,1.3*m).translate(m/2,m/2).add(S),o.styledMode||r[e].attr("fill","rgba(0,0,0,0.0001)"),r[e]},x=o.spacingBox.height+(h?-c:c)-u,S=this.nav,E=this.clipRect;return"horizontal"!==l.layout||"middle"===l.verticalAlign||l.floating||(x/=2),d&&(x=Math.min(x,d)),g.length=0,e&&x>0&&e>x&&!1!==f.enabled?(this.clipHeight=t=Math.max(x-20-this.titleHeight-u,0),this.currentPage=ma(this.currentPage,1),this.fullHeight=e,b.forEach(((e,r)=>{let o=(n=e.legendItem||{}).y||0,a=Math.round(n.label.getBBox().height),l=g.length;(!l||o-g[l-1]>t&&(i||o)!==g[l-1])&&(g.push(i||o),l++),n.pageIx=l-1,i&&s&&(s.pageIx=l-1),r===b.length-1&&o+a-g[l-1]>t&&o>g[l-1]&&(g.push(o),n.pageIx=l),o!==i&&(i=o),s=n})),E||(E=r.clipRect=a.clipRect(0,u-2,9999,0),r.contentGroup.clip(E)),v(t),S||(this.nav=S=a.g().attr({zIndex:1}).add(this.group),this.up=a.symbol("triangle",0,0,m,m).add(S),y("upTracker").on("click",(function(){r.scroll(-1,p)})),this.pager=a.text("",15,10).addClass("highcharts-legend-navigation"),!o.styledMode&&f.style&&this.pager.css(f.style),this.pager.add(S),this.down=a.symbol("triangle-down",0,0,m,m).add(S),y("downTracker").on("click",(function(){r.scroll(1,p)}))),r.scroll(0),e=x):S&&(v(),this.nav=S.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e}scroll(e,t){let i=this.chart,n=this.pages,s=n.length,r=this.clipHeight,o=this.options.navigation,a=this.pager,l=this.padding,c=this.currentPage+e;c>s&&(c=s),c>0&&(void 0!==t&&ea(t,i),this.nav.attr({translateX:l,translateY:r+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach((function(e){e.attr({class:1===c?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})})),a.attr({text:c+"/"+s}),[this.down,this.downTracker].forEach((function(e){e.attr({x:18+this.pager.getBBox().width,class:c===s?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),this),i.styledMode||(this.up.attr({fill:1===c?o.inactiveColor:o.activeColor}),this.upTracker.css({cursor:1===c?"default":"pointer"}),this.down.attr({fill:c===s?o.inactiveColor:o.activeColor}),this.downTracker.css({cursor:c===s?"default":"pointer"})),this.scrollOffset=-n[c-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=c,this.positionCheckboxes(),ya((()=>{da(this,"afterScroll",{currentPage:c})}),Jo(ma(t,i.renderer.globalAnimation,!0)).duration))}setItemEvents(e,t,i){let n=this,s=e.legendItem||{},r=n.chart.renderer.boxWrapper,o=e instanceof Br,a=e instanceof Qo,l="highcharts-legend-"+(o?"point":"series")+"-active",c=n.chart.styledMode,h=i?[t,s.symbol]:[s.group],u=t=>{n.allItems.forEach((i=>{e!==i&&[i].concat(i.linkedSeries||[]).forEach((e=>{e.setState(t,!o)}))}))};for(let d of h)d&&d.on("mouseover",(function(){e.visible&&u("inactive"),e.setState("hover"),e.visible&&r.addClass(l),c||t.css(n.options.itemHoverStyle)})).on("mouseout",(function(){n.chart.styledMode||t.css(pa(e.visible?n.itemStyle:n.itemHiddenStyle)),u(""),r.removeClass(l),e.setState()})).on("click",(function(t){r.removeClass(l),da(n,"itemClick",{browserEvent:t,legendItem:e},(function(){e.setVisible&&e.setVisible(),u(e.visible?"inactive":"")})),o?e.firePointEvent("legendItemClick",{browserEvent:t}):a&&da(e,"legendItemClick",{browserEvent:t})}))}createCheckboxForItem(e){e.checkbox=aa("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:e.selected,defaultChecked:e.selected},this.options.itemCheckboxStyle,this.chart.container),oa(e.checkbox,"click",(function(t){let i=t.target;da(e.series||e,"checkboxClick",{checked:i.checked,item:e},(function(){e.select()}))}))}}!function(e){e.compose=function(t){ga(ia,"Core.Legend")&&oa(t,"beforeMargins",(function(){this.legend=new e(this,this.options.legend)}))}}(xa||(xa={}));let Sa=xa,{animate:Ea,animObject:wa,setAnimation:Ta}=Xe,{defaultOptions:_a}=Se,{numberFormat:Ma}=wt,{registerEventOptions:Pa}=kn,{charts:Ca,doc:Aa,marginNames:Na,svg:La,win:ka}=T,{seriesTypes:Ia}=vo,{addEvent:Ra,attr:Oa,createElement:Da,css:Ba,defined:Fa,diffObjects:Va,discardElement:ja,erase:Ga,error:Wa,extend:za,find:Ua,fireEvent:Ha,getAlignFactor:Xa,getStyle:Ya,isArray:Ka,isNumber:qa,isObject:$a,isString:Za,merge:Qa,objectEach:Ja,pick:el,pInt:tl,relativeLength:il,removeEvent:nl,splat:sl,syncTimeout:rl,uniqueKey:ol}=q;class al{static chart(e,t,i){return new al(e,t,i)}constructor(e,t,i){this.sharedClips={};let n=[...arguments];(Za(e)||e.nodeName)&&(this.renderTo=n.shift()),this.init(n[0],n[1])}setZoomOptions(){let e=this.options.chart,t=e.zooming;this.zooming=r(r({},t),{},{type:el(e.zoomType,t.type),key:el(e.zoomKey,t.key),pinchType:el(e.pinchType,t.pinchType),singleTouch:el(e.zoomBySingleTouch,t.singleTouch,!1),resetButton:Qa(t.resetButton,e.resetZoomButton)})}init(e,t){Ha(this,"init",{args:arguments},(function(){var i,n;let s=Qa(_a,e),r=s.chart,o=this.renderTo||r.renderTo;this.userOptions=za({},e),(this.renderTo=Za(o)?Aa.getElementById(o):o)||Wa(13,!0,this),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=t,this.isResizing=0,this.options=s,this.axes=[],this.series=[],this.locale=null!==(i=s.lang.locale)&&void 0!==i?i:null===(n=this.renderTo.closest("[lang]"))||void 0===n?void 0:n.lang,this.time=new me(za(s.time||{},{locale:this.locale}),s.lang),s.time=this.time.options,this.numberFormatter=(r.numberFormatter||Ma).bind(this),this.styledMode=r.styledMode,this.hasCartesianSeries=r.showAxes,this.index=Ca.length,Ca.push(this),T.chartCount++,Pa(this,r),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),Ha(this,"afterInit"),this.firstRender()}))}initSeries(e){let t=this.options.chart,i=e.type||t.type,n=Ia[i];n||Wa(17,!0,this,{missingModuleFor:i});let s=new n;return"function"==typeof s.init&&s.init(this,e),s}setSortedData(){this.getSeriesOrderByLinks().forEach((function(e){e.points||e.data||!e.enabledDataSorting||e.setData(e.options.data,!1)}))}getSeriesOrderByLinks(){return this.series.concat().sort((function(e,t){return e.linkedSeries.length||t.linkedSeries.length?t.linkedSeries.length-e.linkedSeries.length:0}))}orderItems(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this[e],n=this.options[e]=sl(this.options[e]).slice(),s=this.userOptions[e]=this.userOptions[e]?sl(this.userOptions[e]).slice():[];if(this.hasRendered&&(n.splice(t),s.splice(t)),i)for(let r=t,o=i.length;r<o;++r){let e=i[r];e&&(e.index=r,e instanceof Qo&&(e.name=e.getName()),e.options.isInternal||(n[r]=e.options,s[r]=e.userOptions))}}getClipBox(e,t){var i,n,s,r;let o=this.inverted,{xAxis:a,yAxis:l}=e||{},{x:c,y:h,width:u,height:d}=Qa(this.clipBox);return e&&(a&&a.len!==this.plotSizeX&&(u=a.len),l&&l.len!==this.plotSizeY&&(d=l.len),o&&!e.invertible&&([u,d]=[d,u])),t&&(c+=null!==(i=null===(n=o?l:a)||void 0===n?void 0:n.pos)&&void 0!==i?i:this.plotLeft,h+=null!==(s=null===(r=o?a:l)||void 0===r?void 0:r.pos)&&void 0!==s?s:this.plotTop),{x:c,y:h,width:u,height:d}}isInsidePlot(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{inverted:s,plotBox:r,plotLeft:o,plotTop:a,scrollablePlotBox:l}=this,{scrollLeft:c=0,scrollTop:h=0}=n.visiblePlotOnly&&(null===(i=this.scrollablePlotArea)||void 0===i?void 0:i.scrollingContainer)||{},u=n.series,d=n.visiblePlotOnly&&l||r,f=n.inverted?t:e,p=n.inverted?e:t,m={x:f,y:p,isInsidePlot:!0,options:n};if(!n.ignoreX){let e=u&&(s&&!this.polar?u.yAxis:u.xAxis)||{pos:o,len:1/0},t=n.paneCoordinates?e.pos+f:o+f;t>=Math.max(c+o,e.pos)&&t<=Math.min(c+o+d.width,e.pos+e.len)||(m.isInsidePlot=!1)}if(!n.ignoreY&&m.isInsidePlot){let e=!s&&n.axis&&!n.axis.isXAxis&&n.axis||u&&(s?u.xAxis:u.yAxis)||{pos:a,len:1/0},t=n.paneCoordinates?e.pos+p:a+p;t>=Math.max(h+a,e.pos)&&t<=Math.min(h+a+d.height,e.pos+e.len)||(m.isInsidePlot=!1)}return Ha(this,"afterIsInsidePlot",m),m.isInsidePlot}redraw(e){Ha(this,"beforeRedraw");let t,i,n,s,r=this.hasCartesianSeries?this.axes:this.colorAxis||[],o=this.series,a=this.pointer,l=this.legend,c=this.userOptions.legend,h=this.renderer,u=h.isHidden(),d=[],f=this.isDirtyBox,p=this.isDirtyLegend;for(h.rootFontSize=h.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),Ta(!!this.hasRendered&&e,this),u&&this.temporaryDisplay(),this.layOutTitles(!1),n=o.length;n--;)if(((s=o[n]).options.stacking||s.options.centerInCategory)&&(i=!0,s.isDirty)){t=!0;break}if(t)for(n=o.length;n--;)(s=o[n]).options.stacking&&(s.isDirty=!0);o.forEach((function(e){e.isDirty&&("point"===e.options.legendType?("function"==typeof e.updateTotals&&e.updateTotals(),p=!0):c&&(c.labelFormatter||c.labelFormat)&&(p=!0)),e.isDirtyData&&Ha(e,"updatedData")})),p&&l&&l.options.enabled&&(l.render(),this.isDirtyLegend=!1),i&&this.getStacks(),r.forEach((function(e){e.updateNames(),e.setScale()})),this.getMargins(),r.forEach((function(e){e.isDirty&&(f=!0)})),r.forEach((function(e){let t=e.min+","+e.max;e.extKey!==t&&(e.extKey=t,d.push((function(){Ha(e,"afterSetExtremes",za(e.eventArgs,e.getExtremes())),delete e.eventArgs}))),(f||i)&&e.redraw()})),f&&this.drawChartBox(),Ha(this,"predraw"),o.forEach((function(e){(f||e.isDirty)&&e.visible&&e.redraw(),e.isDirtyData=!1})),a&&a.reset(!0),h.draw(),Ha(this,"redraw"),Ha(this,"render"),u&&this.temporaryDisplay(!0),d.forEach((function(e){e.call()}))}get(e){let t=this.series;function i(t){return t.id===e||t.options&&t.options.id===e}let n=Ua(this.axes,i)||Ua(this.series,i);for(let s=0;!n&&s<t.length;s++)n=Ua(t[s].points||[],i);return n}createAxes(){let e=this.userOptions;for(let t of(Ha(this,"createAxes"),["xAxis","yAxis"]))for(let i of e[t]=sl(e[t]||{}))new Es(this,i,t);Ha(this,"afterCreateAxes")}getSelectedPoints(){return this.series.reduce(((e,t)=>(t.getPointsCollection().forEach((t=>{el(t.selectedStaging,t.selected)&&e.push(t)})),e)),[])}getSelectedSeries(){return this.series.filter((e=>e.selected))}setTitle(e,t,i){this.applyDescription("title",e),this.applyDescription("subtitle",t),this.applyDescription("caption",void 0),this.layOutTitles(i)}applyDescription(e,t){var i;let n=this,s=this.options[e]=Qa(this.options[e],t),r=this[e];r&&t&&(this[e]=r=r.destroy()),s&&!r&&((r=this.renderer.text(s.text,0,0,s.useHTML).attr({align:s.align,class:"highcharts-"+e,zIndex:s.zIndex||4}).css({textOverflow:"ellipsis",whiteSpace:"nowrap"}).add()).update=function(t,i){n.applyDescription(e,t),n.layOutTitles(i)},this.styledMode||r.css(za("title"===e?{fontSize:this.options.isStock?"1em":"1.2em"}:{},s.style)),r.textPxLength=r.getBBox().width,r.css({whiteSpace:null===(i=s.style)||void 0===i?void 0:i.whiteSpace}),this[e]=r)}layOutTitles(){var e,t,i,n;let s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=[0,0,0],{options:o,renderer:a,spacingBox:l}=this;["title","subtitle","caption"].forEach((e=>{let t=this[e],i=this.options[e],n=Qa(l),s=(null===t||void 0===t?void 0:t.textPxLength)||0;if(t&&i){var o;Ha(this,"layOutTitle",{alignTo:n,key:e,textPxLength:s});let l=a.fontMetrics(t),c=l.b,h=l.h,u=i.verticalAlign||"top",d="top"===u,f=d&&i.minScale||1,p="title"===e?d?-3:0:d?r[0]+2:0,m=Math.min(n.width/s,1),g=Math.max(f,m),b=Qa({y:"bottom"===u?c:p+c},{align:"title"===e?m<f?"left":"center":null===(o=this.title)||void 0===o?void 0:o.alignValue},i),v=(i.width||(m>f?this.chartWidth:n.width)/g)+"px";t.alignValue!==b.align&&(t.placed=!1);let y=Math.round(t.css({width:v}).getBBox(i.useHTML).height);if(b.height=y,t.align(b,!1,n).attr({align:b.align,scaleX:g,scaleY:g,"transform-origin":"".concat(n.x+s*g*Xa(b.align)," ").concat(h)}),!i.floating){let e=y*(y<1.2*h?1:g);"top"===u?r[0]=Math.ceil(r[0]+e):"bottom"===u&&(r[2]=Math.ceil(r[2]+e))}}}),this),r[0]&&"top"===((null===(e=o.title)||void 0===e?void 0:e.verticalAlign)||"top")&&(r[0]+=(null===(t=o.title)||void 0===t?void 0:t.margin)||0),r[2]&&"bottom"===(null===(i=o.caption)||void 0===i?void 0:i.verticalAlign)&&(r[2]+=(null===(n=o.caption)||void 0===n?void 0:n.margin)||0);let c=!this.titleOffset||this.titleOffset.join(",")!==r.join(",");this.titleOffset=r,Ha(this,"afterLayOutTitles"),!this.isDirtyBox&&c&&(this.isDirtyBox=this.isDirtyLegend=c,this.hasRendered&&s&&this.isDirtyBox&&this.redraw())}getContainerBox(){let e=[].map.call(this.renderTo.children,(e=>{if(e!==this.container){let t=e.style.display;return e.style.display="none",[e,t]}})),t={width:Ya(this.renderTo,"width",!0)||0,height:Ya(this.renderTo,"height",!0)||0};return e.filter(Boolean).forEach((e=>{let[t,i]=e;t.style.display=i})),t}getChartSize(){var e;let t=this.options.chart,i=t.width,n=t.height,s=this.getContainerBox(),r=s.height<=1||!(null!==(e=this.renderTo.parentElement)&&void 0!==e&&e.style.height)&&"100%"===this.renderTo.style.height;this.chartWidth=Math.max(0,i||s.width||600),this.chartHeight=Math.max(0,il(n,this.chartWidth)||(r?400:s.height)),this.containerBox=s}temporaryDisplay(e){let t,i=this.renderTo;if(e)for(;null!==(n=i)&&void 0!==n&&n.style;){var n;i.hcOrigStyle&&(Ba(i,i.hcOrigStyle),delete i.hcOrigStyle),i.hcOrigDetached&&(Aa.body.removeChild(i),i.hcOrigDetached=!1),i=i.parentNode}else for(;null!==(s=i)&&void 0!==s&&s.style&&(Aa.body.contains(i)||i.parentNode||(i.hcOrigDetached=!0,Aa.body.appendChild(i)),("none"===Ya(i,"display",!1)||i.hcOricDetached)&&(i.hcOrigStyle={display:i.style.display,height:i.style.height,overflow:i.style.overflow},t={display:"block",overflow:"hidden"},i!==this.renderTo&&(t.height=0),Ba(i,t),i.offsetWidth||i.style.setProperty("display","block","important")),(i=i.parentNode)!==Aa.body);)var s}setClassName(e){this.container.className="highcharts-container "+(e||"")}getContainer(){var e,t;let i,n=this.options,s=n.chart,r="data-highcharts-chart",o=ol(),a=this.renderTo,l=tl(Oa(a,r));qa(l)&&Ca[l]&&Ca[l].hasRendered&&Ca[l].destroy(),Oa(a,r,this.index),a.innerHTML=ot.emptyHTML,s.skipClone||a.offsetWidth||this.temporaryDisplay(),this.getChartSize();let c=this.chartHeight,h=this.chartWidth;Ba(a,{overflow:"hidden"}),this.styledMode||(i=za({position:"relative",overflow:"hidden",width:h+"px",height:c+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},s.style||{}));let u=Da("div",{id:o},i,a);this.container=u,this.getChartSize(),h!==this.chartWidth&&(h=this.chartWidth,this.styledMode||Ba(u,{width:el(null===(e=s.style)||void 0===e?void 0:e.width,h+"px")})),this.containerBox=this.getContainerBox(),this._cursor=u.style.cursor;let d=s.renderer||!La?Tt.getRendererType(s.renderer):un;if(this.renderer=new d(u,h,c,void 0,s.forExport,null===(t=n.exporting)||void 0===t?void 0:t.allowHTML,this.styledMode),Ta(void 0,this),this.setClassName(s.className),this.styledMode)for(let f in n.defs)this.renderer.definition(n.defs[f]);else this.renderer.setStyle(s.style);this.renderer.chartIndex=this.index,Ha(this,"afterGetContainer")}getMargins(e){var t;let{spacing:i,margin:n,titleOffset:s}=this;this.resetMargins(),s[0]&&!Fa(n[0])&&(this.plotTop=Math.max(this.plotTop,s[0]+i[0])),s[2]&&!Fa(n[2])&&(this.marginBottom=Math.max(this.marginBottom,s[2]+i[2])),null!==(t=this.legend)&&void 0!==t&&t.display&&this.legend.adjustMargins(n,i),Ha(this,"getMargins"),e||this.getAxisMargins()}getAxisMargins(){let e=this,t=e.axisOffset=[0,0,0,0],i=e.colorAxis,n=e.margin,s=e=>{e.forEach((e=>{e.visible&&e.getOffset()}))};e.hasCartesianSeries?s(e.axes):(null===i||void 0===i?void 0:i.length)&&s(i),Na.forEach(((i,s)=>{Fa(n[s])||(e[i]+=t[s])})),e.setChartSize()}getOptions(){return Va(this.userOptions,_a)}reflow(e){var t,i;let n=this,s=n.containerBox,r=n.getContainerBox();null===(t=n.pointer)||void 0===t||delete t.chartPosition,(null===(i=n.exporting)||void 0===i||!i.isPrinting)&&!n.isResizing&&s&&r.width&&((r.width!==s.width||r.height!==s.height)&&(q.clearTimeout(n.reflowTimeout),n.reflowTimeout=rl((function(){n.container&&n.setSize(void 0,void 0,!1)}),100*!!e)),n.containerBox=r)}setReflow(){let e=this,t=t=>{var i;(null===(i=e.options)||void 0===i?void 0:i.chart.reflow)&&e.hasLoaded&&e.reflow(t)};if("function"==typeof ResizeObserver)new ResizeObserver(t).observe(e.renderTo);else{let e=Ra(ka,"resize",t);Ra(this,"destroy",e)}}setSize(e,t,i){let n=this,s=n.renderer;n.isResizing+=1,Ta(i,n);let r=s.globalAnimation;n.oldChartHeight=n.chartHeight,n.oldChartWidth=n.chartWidth,void 0!==e&&(n.options.chart.width=e),void 0!==t&&(n.options.chart.height=t),n.getChartSize();let{chartWidth:o,chartHeight:a,scrollablePixelsX:l=0,scrollablePixelsY:c=0}=n;(n.isDirtyBox||o!==n.oldChartWidth||a!==n.oldChartHeight)&&(n.styledMode||(r?Ea:Ba)(n.container,{width:"".concat(o+l,"px"),height:"".concat(a+c,"px")},r),n.setChartSize(!0),s.setSize(o,a,r),n.axes.forEach((function(e){e.isDirty=!0,e.setScale()})),n.isDirtyLegend=!0,n.isDirtyBox=!0,n.layOutTitles(),n.getMargins(),n.redraw(r),n.oldChartHeight=void 0,Ha(n,"resize"),setTimeout((()=>{n&&Ha(n,"endResize")}),wa(r).duration)),n.isResizing-=1}setChartSize(e){var t,i;let n,s,r,o,{chartHeight:a,chartWidth:l,inverted:c,spacing:h,renderer:u}=this,d=this.clipOffset,f=Math[c?"floor":"round"];this.plotLeft=n=Math.round(this.plotLeft),this.plotTop=s=Math.round(this.plotTop),this.plotWidth=r=Math.max(0,Math.round(l-n-(null!==(t=this.marginRight)&&void 0!==t?t:0))),this.plotHeight=o=Math.max(0,Math.round(a-s-(null!==(i=this.marginBottom)&&void 0!==i?i:0))),this.plotSizeX=c?o:r,this.plotSizeY=c?r:o,this.spacingBox=u.spacingBox={x:h[3],y:h[0],width:l-h[3]-h[1],height:a-h[0]-h[2]},this.plotBox=u.plotBox={x:n,y:s,width:r,height:o},d&&(this.clipBox={x:f(d[3]),y:f(d[0]),width:f(this.plotSizeX-d[1]-d[3]),height:f(this.plotSizeY-d[0]-d[2])}),e||(this.axes.forEach((function(e){e.setAxisSize(),e.setAxisTranslation()})),u.alignElements()),Ha(this,"afterSetChartSize",{skipAxes:e})}resetMargins(){Ha(this,"resetMargins");let e=this,t=e.options.chart,i=t.plotBorderWidth||0,n=Math.round(i)/2;["margin","spacing"].forEach((i=>{let n=t[i],s=$a(n)?n:[n,n,n,n];["Top","Right","Bottom","Left"].forEach(((n,r)=>{var o;e[i][r]=null!==(o=t["".concat(i).concat(n)])&&void 0!==o?o:s[r]}))})),Na.forEach(((t,i)=>{var n;e[t]=null!==(n=e.margin[i])&&void 0!==n?n:e.spacing[i]})),e.axisOffset=[0,0,0,0],e.clipOffset=[n,n,n,n],e.plotBorderWidth=i}drawChartBox(){let e,t,i,n=this.options.chart,s=this.renderer,r=this.chartWidth,o=this.chartHeight,a=this.styledMode,l=this.plotBGImage,c=n.backgroundColor,h=n.plotBackgroundColor,u=n.plotBackgroundImage,d=this.plotLeft,f=this.plotTop,p=this.plotWidth,m=this.plotHeight,g=this.plotBox,b=this.clipRect,v=this.clipBox,y=this.chartBackground,x=this.plotBackground,S=this.plotBorder,E="animate";y||(this.chartBackground=y=s.rect().addClass("highcharts-background").add(),E="attr"),a?e=t=y.strokeWidth():(t=(e=n.borderWidth||0)+8*!!n.shadow,i={fill:c||"none"},(e||y["stroke-width"])&&(i.stroke=n.borderColor,i["stroke-width"]=e),y.attr(i).shadow(n.shadow)),y[E]({x:t/2,y:t/2,width:r-t-e%2,height:o-t-e%2,r:n.borderRadius}),E="animate",x||(E="attr",this.plotBackground=x=s.rect().addClass("highcharts-plot-background").add()),x[E](g),!a&&(x.attr({fill:h||"none"}).shadow(n.plotShadow),u&&(l?(u!==l.attr("href")&&l.attr("href",u),l.animate(g)):this.plotBGImage=s.image(u,d,f,p,m).add())),b?b.animate({width:v.width,height:v.height}):this.clipRect=s.clipRect(v),E="animate",S||(E="attr",this.plotBorder=S=s.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),a||S.attr({stroke:n.plotBorderColor,"stroke-width":n.plotBorderWidth||0,fill:"none"}),S[E](S.crisp(g,-S.strokeWidth())),this.isDirtyBox=!1,Ha(this,"afterDrawChartBox")}propFromSeries(){let e,t,i,n=this,s=n.options.chart,r=n.options.series;["inverted","angular","polar"].forEach((function(o){for(t=Ia[s.type],i=s[o]||t&&t.prototype[o],e=null===r||void 0===r?void 0:r.length;!i&&e--;)(t=Ia[r[e].type])&&t.prototype[o]&&(i=!0);n[o]=i}))}linkSeries(e){let t=this,i=t.series;i.forEach((function(e){e.linkedSeries.length=0})),i.forEach((function(e){let{linkedTo:i}=e.options;if(Za(i)){let n;(n=":previous"===i?t.series[e.index-1]:t.get(i))&&n.linkedParent!==e&&(n.linkedSeries.push(e),e.linkedParent=n,n.enabledDataSorting&&e.setDataSortingOptions(),e.visible=el(e.options.visible,n.options.visible,e.visible))}})),Ha(this,"afterLinkSeries",{isUpdating:e})}renderSeries(){this.series.forEach((function(e){e.translate(),e.render()}))}render(){let e,t=this.axes,i=this.colorAxis,n=this.renderer,s=this.options.chart.axisLayoutRuns||2,r=e=>{e.forEach((e=>{e.visible&&e.render()}))},o=0,a=!0,l=0;for(let h of(this.setTitle(),Ha(this,"beforeMargins"),null!==(c=this.getStacks)&&void 0!==c&&c.call(this),this.getMargins(!0),this.setChartSize(),t)){var c;let{options:e}=h,{labels:t}=e;if(this.hasCartesianSeries&&h.horiz&&h.visible&&t.enabled&&h.series.length&&"colorAxis"!==h.coll&&!this.polar){o=e.tickLength,h.createGroups();let i=new Hn(h,0,"",!0),n=i.createLabel("x",t);if(i.destroy(),n&&el(t.reserveSpace,!qa(e.crossing))&&(o=n.getBBox().height+t.distance+Math.max(e.offset||0,0)),o){null===n||void 0===n||n.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-o,0);(a||e||s>1)&&l<s;){let i=this.plotWidth,n=this.plotHeight;for(let s of t)0===l?s.setScale():(s.horiz&&a||!s.horiz&&e)&&s.setTickInterval(!0);0===l?this.getAxisMargins():this.getMargins(),a=i/this.plotWidth>(l?1:1.1),e=n/this.plotHeight>(l?1:1.05),l++}this.drawChartBox(),this.hasCartesianSeries?r(t):(null===i||void 0===i?void 0:i.length)&&r(i),this.seriesGroup||(this.seriesGroup=n.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.dataLabelsGroup||(this.dataLabelsGroup=n.g("datalabels-group").attr({zIndex:6}).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(e){let t=this,i=Qa(!0,this.options.credits,e);i.enabled&&!this.credits&&(this.credits=this.renderer.text(i.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",(function(){i.href&&(ka.location.href=i.href)})).attr({align:i.position.align,zIndex:8}),t.styledMode||this.credits.css(i.style),this.credits.add().align(i.position),this.credits.update=function(e){t.credits=t.credits.destroy(),t.addCredits(e)})}destroy(){let e,t=this,i=t.axes,n=t.series,s=t.container,r=null===s||void 0===s?void 0:s.parentNode;for(Ha(t,"destroy"),t.renderer.forExport?Ga(Ca,t):Ca[t.index]=void 0,T.chartCount--,t.renderTo.removeAttribute("data-highcharts-chart"),nl(t),e=i.length;e--;)i[e]=i[e].destroy();for(null!==(o=this.scroller)&&void 0!==o&&null!==(a=o.destroy)&&void 0!==a&&a.call(o),e=n.length;e--;){var o,a;n[e]=n[e].destroy()}["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach((e=>{var i,n;t[e]=null===(i=t[e])||void 0===i||null===(n=i.destroy)||void 0===n?void 0:n.call(i)})),s&&(s.innerHTML=ot.emptyHTML,nl(s),r&&ja(s)),Ja(t,(function(e,i){delete t[i]}))}firstRender(){var e;let t=this,i=t.options;t.getContainer(),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.createAxes();let n=Ka(i.series)?i.series:[];i.series=[],n.forEach((function(e){t.initSeries(e)})),t.linkSeries(),t.setSortedData(),Ha(t,"beforeRender"),t.render(),null!==(e=t.pointer)&&void 0!==e&&e.getChartPosition(),t.renderer.imgCount||t.hasLoaded||t.onload(),t.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach((function(e){e&&void 0!==this.index&&e.apply(this,[this])}),this),Ha(this,"load"),Ha(this,"render"),Fa(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:e,title:t}=this;e&&!this.accessibility&&(this.renderer.boxWrapper.attr({role:"img","aria-label":((null===t||void 0===t?void 0:t.element.textContent)||"").replace(/</g,"&lt;")}),e.accessibility&&!1===e.accessibility.enabled||Wa('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(e,t,i){let n,s=this;return e&&(t=el(t,!0),Ha(s,"addSeries",{options:e},(function(){n=s.initSeries(e),s.isDirtyLegend=!0,s.linkSeries(),n.enabledDataSorting&&n.setData(e.data,!1),Ha(s,"afterAddSeries",{series:n}),t&&s.redraw(i)}))),n}addAxis(e,t,i,n){return this.createAxis(t?"xAxis":"yAxis",{axis:e,redraw:i,animation:n})}addColorAxis(e,t,i){return this.createAxis("colorAxis",{axis:e,redraw:t,animation:i})}createAxis(e,t){let i=new Es(this,t.axis,e);return el(t.redraw,!0)&&this.redraw(t.animation),i}showLoading(e){let t=this,i=t.options,n=i.loading,s=function(){r&&Ba(r,{left:t.plotLeft+"px",top:t.plotTop+"px",width:t.plotWidth+"px",height:t.plotHeight+"px"})},r=t.loadingDiv,o=t.loadingSpan;r||(t.loadingDiv=r=Da("div",{className:"highcharts-loading highcharts-loading-hidden"},null,t.container)),o||(t.loadingSpan=o=Da("span",{className:"highcharts-loading-inner"},null,r),Ra(t,"redraw",s)),r.className="highcharts-loading",ot.setElementHTML(o,el(e,i.lang.loading,"")),!t.styledMode&&(Ba(r,za(n.style,{zIndex:10})),Ba(o,n.labelStyle),t.loadingShown||(Ba(r,{opacity:0,display:""}),Ea(r,{opacity:n.style.opacity||.5},{duration:n.showDuration||0}))),t.loadingShown=!0,s()}hideLoading(){let e=this.options,t=this.loadingDiv;t&&(t.className="highcharts-loading highcharts-loading-hidden",this.styledMode||Ea(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){Ba(t,{display:"none"})}})),this.loadingShown=!1}update(e,t,i,n){let s,r,o,a=this,l={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},c=e.isResponsiveOptions,h=[];Ha(a,"update",{options:e}),c||a.setResponsive(!1,!0),e=Va(e,a.options),a.userOptions=Qa(a.userOptions,e);let u=e.chart;u&&(Qa(!0,a.options.chart,u),this.setZoomOptions(),"className"in u&&a.setClassName(u.className),("inverted"in u||"polar"in u||"type"in u)&&(a.propFromSeries(),s=!0),"alignTicks"in u&&(s=!0),"events"in u&&Pa(this,u),Ja(u,(function(e,t){-1!==a.propsRequireUpdateSeries.indexOf("chart."+t)&&(r=!0),-1!==a.propsRequireDirtyBox.indexOf(t)&&(a.isDirtyBox=!0),-1!==a.propsRequireReflow.indexOf(t)&&(a.isDirtyBox=!0,c||(o=!0))})),!a.styledMode&&u.style&&a.renderer.setStyle(a.options.chart.style||{})),!a.styledMode&&e.colors&&(this.options.colors=e.colors),Ja(e,(function(t,i){a[i]&&"function"==typeof a[i].update?a[i].update(t,!1):"function"==typeof a[l[i]]?a[l[i]](t):"colors"!==i&&-1===a.collectionsWithUpdate.indexOf(i)&&Qa(!0,a.options[i],e[i]),"chart"!==i&&-1!==a.propsRequireUpdateSeries.indexOf(i)&&(r=!0)})),this.collectionsWithUpdate.forEach((function(t){e[t]&&(sl(e[t]).forEach((function(e,n){let s,r=Fa(e.id);r&&(s=a.get(e.id)),!s&&a[t]&&(s=a[t][el(e.index,n)])&&(r&&Fa(s.options.id)||s.options.isInternal)&&(s=void 0),s&&s.coll===t&&(s.update(e,!1),i&&(s.touched=!0)),!s&&i&&a.collectionsWithInit[t]&&(a.collectionsWithInit[t][0].apply(a,[e].concat(a.collectionsWithInit[t][1]||[]).concat([!1])).touched=!0)})),i&&a[t].forEach((function(e){e.touched||e.options.isInternal?delete e.touched:h.push(e)})))})),h.forEach((function(e){e.chart&&e.remove&&e.remove(!1)})),s&&a.axes.forEach((function(e){e.update({},!1)})),r&&a.getSeriesOrderByLinks().forEach((function(e){e.chart&&e.update({},!1)}),this);let d=null===u||void 0===u?void 0:u.width,f=u&&(Za(u.height)?il(u.height,d||a.chartWidth):u.height);o||qa(d)&&d!==a.chartWidth||qa(f)&&f!==a.chartHeight?a.setSize(d,f,n):el(t,!0)&&a.redraw(n),Ha(a,"afterUpdate",{options:e,redraw:t,animation:n})}setSubtitle(e,t){this.applyDescription("subtitle",e),this.layOutTitles(t)}setCaption(e,t){this.applyDescription("caption",e),this.layOutTitles(t)}showResetZoom(){let e=this,t=_a.lang,i=e.zooming.resetButton,n=i.theme,s="chart"===i.relativeTo||"spacingBox"===i.relativeTo?null:"plotBox";function r(){e.zoomOut()}Ha(this,"beforeShowResetZoom",null,(function(){e.resetZoomButton=e.renderer.button(t.resetZoom,null,null,r,n).attr({align:i.position.align,title:t.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(i.position,!1,s)})),Ha(this,"afterShowResetZoom")}zoomOut(){Ha(this,"selection",{resetSelection:!0},(()=>this.transform({reset:!0,trigger:"zoom"})))}pan(e,t){let i=this,n="object"==typeof t?t:{enabled:t,type:"x"},s=n.type,r=s&&i[{x:"xAxis",xy:"axes",y:"yAxis"}[s]].filter((e=>e.options.panningEnabled&&!e.options.isInternal)),o=i.options.chart;null!==o&&void 0!==o&&o.panning&&(o.panning=n),Ha(this,"pan",{originalEvent:e},(()=>{i.transform({axes:r,event:e,to:{x:e.chartX-(i.mouseDownX||0),y:e.chartY-(i.mouseDownY||0)},trigger:"pan"}),Ba(i.container,{cursor:"move"})}))}transform(e){var t,i;let{axes:n=this.axes,event:s,from:r={},reset:o,selection:a,to:l={},trigger:c}=e,{inverted:h,time:u}=this;null!==(t=this.hoverPoints)&&void 0!==t&&t.forEach((e=>e.setState())),Ha(this,"transform",e);let d,f,p=e.hasZoomed||!1;for(let g of n){var m;let{horiz:e,len:t,minPointOffset:i=0,options:n,reversed:b}=g,v=e?"width":"height",y=e?"x":"y",x=el(l[v],g.len),S=el(r[v],g.len),E=10>Math.abs(x)?1:x/S,w=(r[y]||0)+S/2-g.pos,T=w-((null!==(m=l[y])&&void 0!==m?m:g.pos)+x/2-g.pos)/E,_=b&&!h||!b&&h?-1:1;if(!o&&(w<0||w>g.len))continue;let M=g.chart.polar||g.isOrdinal?0:i*_||0,P=g.toValue(T,!0),C=g.toValue(T+t/E,!0),A=P+M,N=C-M,L=g.allExtremes;if(a&&a[g.coll].push({axis:g,min:Math.min(P,C),max:Math.max(P,C)}),A>N&&([A,N]=[N,A]),1===E&&!o&&"yAxis"===g.coll&&!L){for(let e of g.series){let t=e.getExtremes(e.getProcessedData(!0).modified.getColumn("y")||[],!0);null!==L&&void 0!==L||(L={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),qa(t.dataMin)&&qa(t.dataMax)&&(L.dataMin=Math.min(t.dataMin,L.dataMin),L.dataMax=Math.max(t.dataMax,L.dataMax))}g.allExtremes=L}let{dataMin:k,dataMax:I,min:R,max:O}=za(g.getExtremes(),L||{}),D=u.parse(n.min),B=u.parse(n.max),F=null!==k&&void 0!==k?k:D,V=null!==I&&void 0!==I?I:B,j=N-A,G=g.categories?0:Math.min(j,V-F),W=F-G*(Fa(D)?0:n.minPadding),z=V+G*(Fa(B)?0:n.maxPadding),U=g.allowZoomOutside||1===E||"zoom"!==c&&E>1,H=Math.min(null!==D&&void 0!==D?D:W,W,U?R:W),X=Math.max(null!==B&&void 0!==B?B:z,z,U?O:z);(!g.isOrdinal||1!==E||o)&&(A<H&&(A=H,E>=1&&(N=A+j)),N>X&&(N=X,E>=1&&(A=N-j)),(o||g.series.length&&(A!==R||N!==O)&&A>=H&&N<=X)&&(a?a[g.coll].push({axis:g,min:A,max:N}):(g.isPanning="zoom"!==c,g.isPanning&&(f=!0),g.setExtremes(o?void 0:A,o?void 0:N,!1,!1,{move:T,trigger:c,scale:E}),!o&&(A>H||N<X)&&"mousewheel"!==c&&(d=!0)),p=!0),this.hasCartesianSeries||o||"mousewheel"===c||(d=!0),s&&(this[e?"mouseDownX":"mouseDownY"]=s[e?"chartX":"chartY"]))}return p&&(a?Ha(this,"selection",a,(()=>{delete e.selection,e.trigger="zoom",this.transform(e)})):(!d||f||this.resetZoomButton?!d&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw("zoom"===c&&(null!==(i=this.options.chart.animation)&&void 0!==i?i:this.pointCount<100)))),p}}za(al.prototype,{callbacks:[],collectionsWithInit:{xAxis:[al.prototype.addAxis,[!0]],yAxis:[al.prototype.addAxis,[!1]],series:[al.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]});let{stop:ll}=Xe,{composed:cl}=T,{addEvent:hl,createElement:ul,css:dl,defined:fl,erase:pl,merge:ml,pushUnique:gl}=q;function bl(){var e;let t=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!t&&(this.scrollablePlotArea=t=new yl(this)),null===(e=t)||void 0===e||e.applyFixed()}function vl(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class yl{static compose(e,t,i){gl(cl,this.compose)&&(hl(e,"afterInit",vl),hl(t,"afterSetChartSize",(e=>this.afterSetSize(e.target,e))),hl(t,"render",bl),hl(i,"show",vl))}static afterSetSize(e,t){let i,n,s,{minWidth:r,minHeight:o}=e.options.chart.scrollablePlotArea||{},{clipBox:a,plotBox:l,inverted:c,renderer:h}=e;if(!h.forExport)if(r?(e.scrollablePixelsX=i=Math.max(0,r-e.chartWidth),i&&(e.scrollablePlotBox=ml(e.plotBox),l.width=e.plotWidth+=i,a[c?"height":"width"]+=i,s=!0)):o&&(e.scrollablePixelsY=n=Math.max(0,o-e.chartHeight),fl(n)&&(e.scrollablePlotBox=ml(e.plotBox),l.height=e.plotHeight+=n,a[c?"width":"height"]+=n,s=!1)),fl(s)){if(!t.skipAxes)for(let u of e.axes)(u.horiz===s||e.hasParallelCoordinates&&"yAxis"===u.coll)&&(u.setAxisSize(),u.setAxisTranslation())}else delete e.scrollablePlotBox}constructor(e){var t,i;let n,s=e.options.chart,r=Tt.getRendererType(),o=s.scrollablePlotArea||{},a=this.moveFixedElements.bind(this),l={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};e.scrollablePixelsX&&(l.overflowX="auto"),e.scrollablePixelsY&&(l.overflowY="auto"),this.chart=e;let c=this.parentDiv=ul("div",{className:"highcharts-scrolling-parent"},{position:"relative"},e.renderTo),h=this.scrollingContainer=ul("div",{className:"highcharts-scrolling"},l,c),u=this.innerContainer=ul("div",{className:"highcharts-inner-container"},void 0,h),d=this.fixedDiv=ul("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:((null===(t=s.style)||void 0===t?void 0:t.zIndex)||0)+2,top:0},void 0,!0),f=this.fixedRenderer=new r(d,e.chartWidth,e.chartHeight,s.style);this.mask=f.path().attr({fill:s.backgroundColor||"#fff","fill-opacity":null!==(i=o.opacity)&&void 0!==i?i:.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),h.parentNode.insertBefore(d,h),dl(e.renderTo,{overflow:"visible"}),hl(e,"afterShowResetZoom",a),hl(e,"afterApplyDrilldown",a),hl(e,"afterLayOutTitles",a),hl(h,"scroll",(()=>{let{pointer:t,hoverPoint:i}=e;t&&(delete t.chartPosition,i&&(n=i),t.runPointActions(void 0,n,!0))})),u.appendChild(e.container)}applyFixed(){var e;let{chart:t,fixedRenderer:i,isDirty:n,scrollingContainer:s}=this,{axisOffset:r,chartWidth:o,chartHeight:a,container:l,plotHeight:c,plotLeft:h,plotTop:u,plotWidth:d,scrollablePixelsX:f=0,scrollablePixelsY:p=0}=t,{scrollPositionX:m=0,scrollPositionY:g=0}=t.options.chart.scrollablePlotArea||{},b=o+f,v=a+p;i.setSize(o,a),(null===n||void 0===n||n)&&(this.isDirty=!1,this.moveFixedElements()),ll(t.container),dl(l,{width:"".concat(b,"px"),height:"".concat(v,"px")}),t.renderer.boxWrapper.attr({width:b,height:v,viewBox:[0,0,b,v].join(" ")}),null!==(e=t.chartBackground)&&void 0!==e&&e.attr({width:b,height:v}),dl(s,{width:"".concat(o,"px"),height:"".concat(a,"px")}),fl(n)||(s.scrollLeft=f*m,s.scrollTop=p*g);let y=u-r[0]-1,x=h-r[3]-1,S=u+c+r[2]+1,E=h+d+r[1]+1,w=h+d-f,T=u+c-p,_=[["M",0,0]];f?_=[["M",0,y],["L",h-1,y],["L",h-1,S],["L",0,S],["Z"],["M",w,y],["L",o,y],["L",o,S],["L",w,S],["Z"]]:p&&(_=[["M",x,0],["L",x,u-1],["L",E,u-1],["L",E,0],["Z"],["M",x,T],["L",x,a],["L",E,a],["L",E,T],["Z"]]),"adjustHeight"!==t.redrawTrigger&&this.mask.attr({d:_})}moveFixedElements(){let e,{container:t,inverted:i,scrollablePixelsX:n,scrollablePixelsY:s}=this.chart,r=this.fixedRenderer,o=yl.fixedSelectors;if(n&&!i?e=".highcharts-yaxis":n&&i||s&&!i?e=".highcharts-xaxis":s&&i&&(e=".highcharts-yaxis"),!e||this.chart.hasParallelCoordinates&&".highcharts-yaxis"===e)for(let a of[".highcharts-xaxis",".highcharts-yaxis"])for(let e of["".concat(a,":not(.highcharts-radial-axis)"),"".concat(a,"-labels:not(.highcharts-radial-axis-labels)")])pl(o,e);else for(let a of["".concat(e,":not(.highcharts-radial-axis)"),"".concat(e,"-labels:not(.highcharts-radial-axis-labels)")])gl(o,a);for(let a of o)[].forEach.call(t.querySelectorAll(a),(e=>{(e.namespaceURI===r.SVG_NS?r.box:r.box.parentNode).appendChild(e),e.style.pointerEvents="auto"}))}}yl.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"];let{format:xl}=wt,{series:Sl}=vo,{destroyObjectProperties:El,fireEvent:wl,getAlignFactor:Tl,isNumber:_l,pick:Ml}=q,Pl=class{constructor(e,t,i,n,s){let r=e.chart.inverted,o=e.reversed;this.axis=e;let a=this.isNegative=!!i!=!!o;this.options=t=t||{},this.x=n,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=s,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:t.align||(r?a?"left":"right":"center"),verticalAlign:t.verticalAlign||(r?"middle":a?"bottom":"top"),y:t.y,x:t.x},this.textAlign=t.textAlign||(r?a?"right":"left":"center")}destroy(){El(this,this.axis)}render(e){let t=this.axis.chart,i=this.options,n=i.format,s=n?xl(n,this,t):i.formatter.call(this);if(this.label)this.label.attr({text:s,visibility:"hidden"});else{this.label=t.renderer.label(s,null,void 0,i.shape,void 0,void 0,i.useHTML,!1,"stack-labels");let n={r:i.borderRadius||0,text:s,padding:Ml(i.padding,5),visibility:"hidden"};t.styledMode||(n.fill=i.backgroundColor,n.stroke=i.borderColor,n["stroke-width"]=i.borderWidth,this.label.css(i.style||{})),this.label.attr(n),this.label.added||this.label.add(e)}this.label.labelrank=t.plotSizeY,wl(this,"afterRender")}setOffset(e,t,i,n,s,r){let{alignOptions:o,axis:a,label:l,options:c,textAlign:h}=this,u=a.chart,d=this.getStackBox({xOffset:e,width:t,boxBottom:i,boxTop:n,defaultX:s,xAxis:r}),{verticalAlign:f}=o;if(l&&d){let e,t=l.getBBox(void 0,0),i=l.padding,n="justify"===Ml(c.overflow,"justify");o.x=c.x||0,o.y=c.y||0;let{x:s,y:r}=this.adjustStackPosition({labelBox:t,verticalAlign:f,textAlign:h});d.x-=s,d.y-=r,l.align(o,!1,d),(e=u.isInsidePlot(l.alignAttr.x+o.x+s,l.alignAttr.y+o.y+r))||(n=!1),n&&Sl.prototype.justifyDataLabel.call(a,l,o,l.alignAttr,t,d),l.attr({x:l.alignAttr.x,y:l.alignAttr.y,rotation:c.rotation,rotationOriginX:t.width*Tl(c.textAlign||"center"),rotationOriginY:t.height/2}),Ml(!n&&c.crop,!0)&&(e=_l(l.x)&&_l(l.y)&&u.isInsidePlot(l.x-i+(l.width||0),l.y)&&u.isInsidePlot(l.x+i,l.y)),l[e?"show":"hide"]()}wl(this,"afterSetOffset",{xOffset:e,width:t})}adjustStackPosition(e){let{labelBox:t,verticalAlign:i,textAlign:n}=e;return{x:t.width/2+t.width/2*(2*Tl(n)-1),y:t.height/2*2*(1-Tl(i))}}getStackBox(e){let t=this.axis,i=t.chart,{boxTop:n,defaultX:s,xOffset:r,width:o,boxBottom:a}=e,l=t.stacking.usePercentage?100:Ml(n,this.total,0),c=t.toPixels(l),h=e.xAxis||i.xAxis[0],u=Ml(s,h.translate(this.x))+r,d=Math.abs(c-t.toPixels(a||_l(t.min)&&t.logarithmic&&t.logarithmic.lin2log(t.min)||0)),f=i.inverted,p=this.isNegative;return f?{x:(p?c:c-d)-i.plotLeft,y:h.height-u-o+h.top-i.plotTop,width:d,height:o}:{x:u+h.transB-i.plotLeft,y:(p?c-d:c)-i.plotTop,width:o,height:d}}},{getDeferredAnimation:Cl}=Xe,{series:{prototype:Al}}=vo,{addEvent:Nl,correctFloat:Ll,defined:kl,destroyObjectProperties:Il,fireEvent:Rl,isNumber:Ol,objectEach:Dl,pick:Bl}=q;function Fl(){let e=this.inverted;this.axes.forEach((e=>{var t;(null===(t=e.stacking)||void 0===t?void 0:t.stacks)&&e.hasVisibleSeries&&(e.stacking.oldStacks=e.stacking.stacks)})),this.series.forEach((t=>{var i;let n=(null===(i=t.xAxis)||void 0===i?void 0:i.options)||{};t.options.stacking&&t.reserveSpace()&&(t.stackKey=[t.type,Bl(t.options.stack,""),e?n.top:n.left,e?n.height:n.width].join(","))}))}function Vl(){let e=this.stacking;if(e){var t;let i=e.stacks;Dl(i,((e,t)=>{Il(e),delete i[t]})),null===(t=e.stackTotalGroup)||void 0===t||t.destroy()}}function jl(){this.stacking||(this.stacking=new Xl(this))}function Gl(e,t,i,n){return!kl(e)||e.x!==t||n&&e.stackKey!==n?e={x:t,index:0,key:n,stackKey:n}:e.index++,e.key=[i,t,e.index].join(","),e}function Wl(){let e,t=this,i=t.yAxis,n=t.stackKey||"",s=i.stacking.stacks,r=t.getColumn("x",!0),o=t.options.stacking,a=t[o+"Stacker"];a&&[n,"-"+n].forEach((i=>{let n,o,l,c=r.length;for(;c--;){var h,u;n=r[c],e=t.getStackIndicator(e,n,t.index,i),o=null===(h=s[i])||void 0===h?void 0:h[n],(l=null===(u=o)||void 0===u?void 0:u.points[e.key||""])&&a.call(t,l,o,c)}}))}function zl(e,t,i){let n=t.total?100/t.total:0;e[0]=Ll(e[0]*n),e[1]=Ll(e[1]*n),this.stackedYData[i]=e[1]}function Ul(e){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&this.chart.series.length>1?Al.setStackedPoints.call(this,e,"group"):e.stacking.resetStacks())}function Hl(e,t){let i,n,s,r,o,a,l,c=t||this.options.stacking;if(!c||!this.reserveSpace()||({group:"xAxis"}[c]||"yAxis")!==e.coll)return;let h=this.getColumn("x",!0),u=this.getColumn(this.pointValKey||"y",!0),d=[],f=u.length,p=this.options,m=p.threshold||0,g=p.startFromThreshold?m:0,b=p.stack,v=t?"".concat(this.type,",").concat(c):this.stackKey||"",y="-"+v,x=this.negStacks,S=e.stacking,E=S.stacks,w=S.oldStacks;for(S.stacksTouched+=1,l=0;l<f;l++){var T,_;let t=h[l]||0,f=u[l],p=Ol(f)&&f||0;a=(i=this.getStackIndicator(i,t,this.index)).key||"",E[o=(n=x&&p<(g?0:m))?y:v]||(E[o]={}),E[o][t]||(null!==(T=w[o])&&void 0!==T&&T[t]?(E[o][t]=w[o][t],E[o][t].total=null):E[o][t]=new Pl(e,e.options.stackLabels,!!n,t,b)),s=E[o][t],null!==f?(s.points[a]=s.points[this.index]=[Bl(s.cumulative,g)],kl(s.cumulative)||(s.base=a),s.touched=S.stacksTouched,i.index>0&&!1===this.singleStacks&&(s.points[a][0]=s.points[this.index+","+t+",0"][0])):(delete s.points[a],delete s.points[this.index]);let M=s.total||0;"percent"===c?(r=n?v:y,M=x&&null!==(_=E[r])&&void 0!==_&&_[t]?(r=E[r][t]).total=Math.max(r.total||0,M)+Math.abs(p):Ll(M+Math.abs(p))):"group"===c?Ol(f)&&M++:M=Ll(M+p),s.cumulative="group"===c?(M||1)-1:Ll(Bl(s.cumulative,g)+p),s.total=M,null!==f&&(s.points[a].push(s.cumulative),d[l]=s.cumulative,s.hasValidPoints=!0)}"percent"===c&&(S.usePercentage=!0),"group"!==c&&(this.stackedYData=d),S.oldStacks={}}class Xl{constructor(e){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=e}buildStacks(){let e,t,i=this.axis,n=i.series,s="xAxis"===i.coll,r=i.options.reversedStacks,o=n.length;for(this.resetStacks(),this.usePercentage=!1,t=o;t--;)e=n[r?t:o-t-1],s&&e.setGroupedPoints(i),e.setStackedPoints(i);if(!s)for(t=0;t<o;t++)n[t].modifyStacks();Rl(i,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,Dl(this.stacks,(e=>{Dl(e,(e=>{e.cumulative=e.total}))})))}resetStacks(){Dl(this.stacks,(e=>{Dl(e,((t,i)=>{Ol(t.touched)&&t.touched<this.stacksTouched?(t.destroy(),delete e[i]):(t.total=null,t.cumulative=null)}))}))}renderStackTotals(){var e;let t=this.axis,i=t.chart,n=i.renderer,s=this.stacks,r=Cl(i,(null===(e=t.options.stackLabels)||void 0===e?void 0:e.animation)||!1),o=this.stackTotalGroup=this.stackTotalGroup||n.g("stack-labels").attr({zIndex:6,opacity:0}).add();o.translate(i.plotLeft,i.plotTop),Dl(s,(e=>{Dl(e,(e=>{e.render(o)}))})),o.animate({opacity:1},r)}}(m||(m={})).compose=function(e,t,i){let n=t.prototype,s=i.prototype;n.getStacks||(Nl(e,"init",jl),Nl(e,"destroy",Vl),n.getStacks=Fl,s.getStackIndicator=Gl,s.modifyStacks=Wl,s.percentStacker=zl,s.setGroupedPoints=Ul,s.setStackedPoints=Hl)};let Yl=m,{defined:Kl,merge:ql,isObject:$l}=q;class Zl extends Qo{drawGraph(){let e=this.options,t=(this.gappedPath||this.getGraphPath).call(this),i=this.chart.styledMode;[this,...this.zones].forEach(((n,s)=>{let r,o=n.graph,a=o?"animate":"attr",l=n.dashStyle||e.dashStyle;o?(o.endX=this.preventGraphAnimation?null:t.xMap,o.animate({d:t})):t.length&&(n.graph=o=this.chart.renderer.path(t).addClass("highcharts-graph"+(s?" highcharts-zone-graph-".concat(s-1," "):" ")+(s&&n.className||"")).attr({zIndex:1}).add(this.group)),o&&!i&&(r={stroke:!s&&e.lineColor||n.color||this.color||"#cccccc","stroke-width":e.lineWidth||0,fill:this.fillGraph&&this.color||"none"},l?r.dashstyle=l:"square"!==e.linecap&&(r["stroke-linecap"]=r["stroke-linejoin"]="round"),o[a](r).shadow(e.shadow&&ql({filterUnits:"userSpaceOnUse"},$l(e.shadow)?e.shadow:{}))),o&&(o.startX=t.xMap,o.isArea=t.isArea)}))}getGraphPath(e,t,i){let n,s=this,r=s.options,o=[],a=[],l=r.step,c=(e=e||s.points).reversed;return c&&e.reverse(),(l={right:1,center:2}[l]||l&&3)&&c&&(l=4-l),(e=this.getValidPoints(e,!1,r.nullInteraction||!(r.connectNulls&&!t&&!i))).forEach((function(c,h){let u,d=c.plotX,f=c.plotY,p=e[h-1],m=c.isNull||"number"!=typeof f;(c.leftCliff||null!==p&&void 0!==p&&p.rightCliff)&&!i&&(n=!0),m&&!Kl(t)&&h>0?n=!r.connectNulls:m&&!t?n=!0:(0===h||n?u=[["M",c.plotX,c.plotY]]:s.getPointSpline?u=[s.getPointSpline(e,c,h)]:l?(u=1===l?[["L",p.plotX,f]]:2===l?[["L",(p.plotX+d)/2,p.plotY],["L",(p.plotX+d)/2,f]]:[["L",d,p.plotY]]).push(["L",d,f]):u=[["L",d,f]],a.push(c.x),l&&(a.push(c.x),2===l&&a.push(c.x)),o.push.apply(o,u),n=!1)})),o.xMap=a,s.graphPath=o,o}}Zl.defaultOptions=ql(Qo.defaultOptions,{legendSymbol:"lineMarker"}),vo.registerSeriesType("line",Zl);let{seriesTypes:{line:Ql}}=vo,{extend:Jl,merge:ec,objectEach:tc,pick:ic}=q;class nc extends Ql{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:e,options:t}=this;[this,...this.zones].forEach(((i,n)=>{var s;let r={},o=i.fillColor||t.fillColor,a=i.area,l=a?"animate":"attr";a?(a.endX=this.preventGraphAnimation?null:e.xMap,a.animate({d:e})):(r.zIndex=0,(a=i.area=this.chart.renderer.path(e).addClass("highcharts-area"+(n?" highcharts-zone-area-".concat(n-1," "):" ")+(n&&i.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(r.fill=o||i.color||this.color,r["fill-opacity"]=o?1:null!==(s=t.fillOpacity)&&void 0!==s?s:.75,a.css({pointerEvents:this.stickyTracking?"none":"auto"})),a[l](r),a.startX=e.xMap,a.shiftUnit=t.step?2:1}))}getGraphPath(e){let t,i,n,s=Ql.prototype.getGraphPath,r=this.options,o=r.stacking,a=this.yAxis,l=[],c=[],h=this.index,u=a.stacking.stacks[this.stackKey],d=r.threshold,f=Math.round(a.getThreshold(r.threshold)),p=ic(r.connectNulls,"percent"===o),m=function(i,n,s){let r,p,m=e[i],g=o&&u[m.x].points[h],b=m[s+"Null"]||0,v=m[s+"Cliff"]||0,y=!0;v||b?(r=(b?g[0]:g[1])+v,p=g[0]+v,y=!!b):!o&&e[n]&&e[n].isNull&&(r=p=d),void 0!==r&&(c.push({plotX:t,plotY:null===r?f:a.getThreshold(r),isNull:y,isCliff:!0}),l.push({plotX:t,plotY:null===p?f:a.getThreshold(p),doCurve:!1}))};e=e||this.points,o&&(e=this.getStackPoints(e));for(let S=0,E=e.length;S<E;++S)o||(e[S].leftCliff=e[S].rightCliff=e[S].leftNull=e[S].rightNull=void 0),i=e[S].isNull,t=ic(e[S].rectPlotX,e[S].plotX),n=o?ic(e[S].yBottom,f):f,(!i||p)&&(p||m(S,S-1,"left"),i&&!o&&p||(c.push(e[S]),l.push({x:S,plotX:t,plotY:n})),p||m(S,S+1,"right"));let g=s.call(this,c,!0,!0);l.reversed=!0;let b=s.call(this,l,!0,!0),v=b[0];v&&"M"===v[0]&&(b[0]=["L",v[1],v[2]]);let y=g.concat(b);y.length&&y.push(["Z"]);let x=s.call(this,c,!1,p);return this.chart.series.length>1&&o&&c.some((e=>e.isCliff))&&(y.hasStackedCliffs=x.hasStackedCliffs=!0),y.xMap=g.xMap,this.areaPath=y,x}getStackPoints(e){let t=this,i=[],n=[],s=this.xAxis,r=this.yAxis,o=r.stacking.stacks[this.stackKey],a={},l=r.series,c=l.length,h=r.options.reversedStacks?1:-1,u=l.indexOf(t);if(e=e||this.points,this.options.stacking){for(let t=0;t<e.length;t++)e[t].leftNull=e[t].rightNull=void 0,a[e[t].x]=e[t];tc(o,(function(e,t){null!==e.total&&n.push(t)})),n.sort((function(e,t){return e-t}));let d=l.map((e=>e.visible));n.forEach((function(e,f){let p,m,g=0;if(a[e]&&!a[e].isNull)i.push(a[e]),[-1,1].forEach((function(i){let s=1===i?"rightNull":"leftNull",r=o[n[f+i]],g=0;if(r){let i=u;for(;i>=0&&i<c;){let n=l[i].index;!(p=r.points[n])&&(n===t.index?a[e][s]=!0:d[i]&&(m=o[e].points[n])&&(g-=m[1]-m[0])),i+=h}}a[e][1===i?"rightCliff":"leftCliff"]=g}));else{let t=u;for(;t>=0&&t<c;){let i=l[t].index;if(p=o[e].points[i]){g=p[1];break}t+=h}g=ic(g,0),g=r.translate(g,0,1,0,1),i.push({isNull:!0,plotX:s.translate(e,0,0,0,1),x:e,plotY:g,yBottom:g})}}))}return i}}nc.defaultOptions=ec(Ql.defaultOptions,{threshold:0,legendSymbol:"areaMarker"}),Jl(nc.prototype,{singleStacks:!1}),vo.registerSeriesType("area",nc);let{line:sc}=vo.seriesTypes,{merge:rc,pick:oc}=q;class ac extends sc{getPointSpline(e,t,i){let n,s,r,o,a=t.plotX||0,l=t.plotY||0,c=e[i-1],h=e[i+1];function u(e){return e&&!e.isNull&&!1!==e.doCurve&&!t.isCliff}if(u(c)&&u(h)){let e=c.plotX||0,i=c.plotY||0,u=h.plotX||0,d=h.plotY||0,f=0;n=(1.5*a+e)/2.5,s=(1.5*l+i)/2.5,r=(1.5*a+u)/2.5,o=(1.5*l+d)/2.5,r!==n&&(f=(o-s)*(r-a)/(r-n)+l-o),s+=f,o+=f,s>i&&s>l?(s=Math.max(i,l),o=2*l-s):s<i&&s<l&&(s=Math.min(i,l),o=2*l-s),o>d&&o>l?(o=Math.max(d,l),s=2*l-o):o<d&&o<l&&(o=Math.min(d,l),s=2*l-o),t.rightContX=r,t.rightContY=o,t.controlPoints={low:[n,s],high:[r,o]}}let d=["C",oc(c.rightContX,c.plotX,0),oc(c.rightContY,c.plotY,0),oc(n,a,0),oc(s,l,0),a,l];return c.rightContX=c.rightContY=void 0,d}}ac.defaultOptions=rc(sc.defaultOptions),vo.registerSeriesType("spline",ac);let lc=ac,{area:cc,area:{prototype:hc}}=vo.seriesTypes,{extend:uc,merge:dc}=q;class fc extends lc{}fc.defaultOptions=dc(lc.defaultOptions,cc.defaultOptions),uc(fc.prototype,{getGraphPath:hc.getGraphPath,getStackPoints:hc.getStackPoints,drawGraph:hc.drawGraph}),vo.registerSeriesType("areaspline",fc);let{animObject:pc}=Xe,{parse:mc}=Ne,{noop:gc}=T,{clamp:bc,crisp:vc,defined:yc,extend:xc,fireEvent:Sc,isArray:Ec,isNumber:wc,merge:Tc,pick:_c,objectEach:Mc}=q;class Pc extends Qo{animate(e){let t,i,n=this,s=this.yAxis,r=s.pos,o=s.reversed,a=n.options,{clipOffset:l,inverted:c}=this.chart,h={},u=c?"translateX":"translateY";e&&l?(h.scaleY=.001,i=bc(s.toPixels(a.threshold||0),r,r+s.len),c?h.translateX=(i+=o?-Math.floor(l[0]):Math.ceil(l[2]))-s.len:h.translateY=i+=o?Math.ceil(l[0]):-Math.floor(l[2]),n.clipBox&&n.setClip(),n.group.attr(h)):(t=Number(n.group.attr(u)),n.group.animate({scaleY:1},xc(pc(n.options.animation),{step:function(e,i){n.group&&(h[u]=t+i.pos*(r-t),n.group.attr(h))}})))}init(e,t){super.init.apply(this,arguments);let i=this;(e=i.chart).hasRendered&&e.series.forEach((function(e){e.type===i.type&&(e.isDirty=!0)}))}getColumnMetrics(){var e,t;let i,n=this,s=n.options,r=n.xAxis,o=n.yAxis,a=r.options.reversedStacks,l=r.reversed&&!a||!r.reversed&&a,c={},h=0;!1===s.grouping?h=1:n.chart.series.forEach((function(e){let t,s=e.yAxis,r=e.options;e.type===n.type&&e.reserveSpace()&&o.len===s.len&&o.pos===s.pos&&(r.stacking&&"group"!==r.stacking?(void 0===c[i=e.stackKey]&&(c[i]=h++),t=c[i]):!1!==r.grouping&&(t=h++),e.columnIndex=t)}));let u=Math.min(Math.abs(r.transA)*(!(null!==(e=r.brokenAxis)&&void 0!==e&&e.hasBreaks)&&(null===(t=r.ordinal)||void 0===t?void 0:t.slope)||s.pointRange||r.closestPointRange||r.tickInterval||1),r.len),d=u*s.groupPadding,f=(u-2*d)/(h||1),p=Math.min(s.maxPointWidth||r.len,_c(s.pointWidth,f*(1-2*s.pointPadding))),m=(n.columnIndex||0)+ +!!l;return n.columnMetrics={width:p,offset:(f-p)/2+(d+m*f-u/2)*(l?-1:1),paddedWidth:f,columnCount:h},n.columnMetrics}crispCol(e,t,i,n){let s=this.borderWidth,r=this.chart.inverted;return n=vc(t+n,s,r)-(t=vc(t,s,r)),this.options.crisp&&(i=vc(e+i,s)-(e=vc(e,s))),{x:e,y:t,width:i,height:n}}adjustForMissingColumns(e,t,i,n){if(!i.isNull&&n.columnCount>1){var s;let r=this.xAxis.series.filter((e=>e.visible)).map((e=>e.index)),o=0,a=0;Mc(null===(s=this.xAxis.stacking)||void 0===s?void 0:s.stacks,(e=>{var t;let n="number"==typeof i.x?null===(t=e[i.x.toString()])||void 0===t?void 0:t.points:void 0,s=null===n||void 0===n?void 0:n[this.index],l={};if(n&&Ec(s)){let e=this.index,t=Object.keys(n).filter((e=>!e.match(",")&&n[e]&&n[e].length>1)).map(parseFloat).filter((e=>-1!==r.indexOf(e))).filter((t=>{let i=this.chart.series[t].options,n=i.stacking&&i.stack;if(yc(n)){if(wc(l[n]))return e===t&&(e=l[n]),!1;l[n]=t}return!0})).sort(((e,t)=>t-e));o=t.indexOf(e),a=t.length}})),o=this.xAxis.reversed?a-1-o:o;let l=(a-1)*n.paddedWidth+t;e=(i.plotX||0)+l/2-t-o*n.paddedWidth}return e}translate(){let e=this,t=e.chart,i=e.options,n=e.dense=e.closestPointRange*e.xAxis.transA<2,s=e.borderWidth=_c(i.borderWidth,+!n),r=e.xAxis,o=e.yAxis,a=i.threshold,l=_c(i.minPointLength,5),c=e.getColumnMetrics(),h=c.width,u=e.pointXOffset=c.offset,d=e.dataMin,f=e.dataMax,p=e.translatedThreshold=o.getThreshold(a),m=e.barW=Math.max(h,1+2*s);i.pointPadding&&i.crisp&&(m=Math.ceil(m)),Qo.prototype.translate.apply(e),e.points.forEach((function(n){let s,g=_c(n.yBottom,p),b=999+Math.abs(g),v=n.plotX||0,y=bc(n.plotY,-b,o.len+b),x=Math.min(y,g),S=Math.max(y,g)-x,E=h,w=v+u,T=m;l&&Math.abs(S)<l&&(S=l,s=!o.reversed&&!n.negative||o.reversed&&n.negative,wc(a)&&wc(f)&&n.y===a&&f<=a&&(o.min||0)<a&&(d!==f||(o.max||0)<=a)&&(s=!s,n.negative=!n.negative),x=Math.abs(x-p)>l?g-l:p-(s?l:0)),yc(n.options.pointWidth)&&(w-=Math.round(((E=T=Math.ceil(n.options.pointWidth))-h)/2)),i.centerInCategory&&(w=e.adjustForMissingColumns(w,E,n,c)),n.barX=w,n.pointWidth=E,n.tooltipPos=t.inverted?[bc(o.len+o.pos-t.plotLeft-y,o.pos-t.plotLeft,o.len+o.pos-t.plotLeft),r.len+r.pos-t.plotTop-w-T/2,S]:[r.left-t.plotLeft+w+T/2,bc(y+o.pos-t.plotTop,o.pos-t.plotTop,o.len+o.pos-t.plotTop),S],n.shapeType=e.pointClass.prototype.shapeType||"roundedRect",n.shapeArgs=e.crispCol(w,x,T,n.isNull?0:S)})),Sc(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(e,t){var i,n;let s,r,o,a=this.options,l=this.pointAttrToOptions||{},c=l.stroke||"borderColor",h=l["stroke-width"]||"borderWidth",u=e&&e.color||this.color,d=e&&e[c]||a[c]||u,f=e&&e.options.dashStyle||a.dashStyle,p=e&&e[h]||a[h]||this[h]||0,m=null!==e&&void 0!==e&&e.isNull&&a.nullInteraction?0:null!==(i=null!==(n=null===e||void 0===e?void 0:e.opacity)&&void 0!==n?n:a.opacity)&&void 0!==i?i:1;e&&this.zones.length&&(r=e.getZone(),u=e.options.color||r&&(r.color||e.nonZonedColor)||this.color,r&&(d=r.borderColor||d,f=r.dashStyle||f,p=r.borderWidth||p)),t&&e&&(o=(s=Tc(a.states[t],e.options.states&&e.options.states[t]||{})).brightness,u=s.color||void 0!==o&&mc(u).brighten(s.brightness).get()||u,d=s[c]||d,p=s[h]||p,f=s.dashStyle||f,m=_c(s.opacity,m));let g={fill:u,stroke:d,"stroke-width":p,opacity:m};return f&&(g.dashstyle=f),g}drawPoints(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.points,i=this,n=this.chart,s=i.options,r=s.nullInteraction,o=n.renderer,a=s.animationLimit||250;t.forEach((function(t){let l=t.plotY,c=t.graphic,h=!!c,u=c&&n.pointCount<a?"animate":"attr";wc(l)&&(null!==t.y||r)?(e=t.shapeArgs,c&&t.hasNewShapeType()&&(c=c.destroy()),i.enabledDataSorting&&(t.startXPos=i.xAxis.reversed?-(e&&e.width||0):i.xAxis.width),!c&&(t.graphic=c=o[t.shapeType](e).add(t.group||i.group),c&&i.enabledDataSorting&&n.hasRendered&&n.pointCount<a&&(c.attr({x:t.startXPos}),h=!0,u="animate")),c&&h&&c[u](Tc(e)),n.styledMode||c[u](i.pointAttribs(t,t.selected&&"select")).shadow(!1!==t.allowShadow&&s.shadow),c&&(c.addClass(t.getClassName(),!0),c.attr({visibility:t.visible?"inherit":"hidden"}))):c&&(t.graphic=c.destroy())}))}drawTracker(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.points,i=this,n=i.chart,s=n.pointer,r=function(e){null===s||void 0===s||s.normalize(e);let t=null===s||void 0===s?void 0:s.getPointFromEvent(e);s&&t&&i.options.enableMouseTracking&&(n.isInsidePlot(e.chartX-n.plotLeft,e.chartY-n.plotTop,{visiblePlotOnly:!0})||(null===s||void 0===s?void 0:s.inClass(e.target,"highcharts-data-label")))&&(s.isDirectTouch=!0,t.onMouseOver(e))};t.forEach((function(t){e=Ec(t.dataLabels)?t.dataLabels:t.dataLabel?[t.dataLabel]:[],t.graphic&&(t.graphic.element.point=t),e.forEach((function(e){(e.div||e.element).point=t}))})),i._hasTracking||(i.trackerGroups.forEach((function(e){i[e]&&(i[e].addClass("highcharts-tracker").on("mouseover",r).on("mouseout",(function(e){null===s||void 0===s||s.onTrackerMouseOut(e)})).on("touchstart",r),!n.styledMode&&i.options.cursor&&i[e].css({cursor:i.options.cursor}))})),i._hasTracking=!0),Sc(this,"afterDrawTracker")}remove(){let e=this,t=e.chart;t.hasRendered&&t.series.forEach((function(t){t.type===e.type&&(t.isDirty=!0)})),Qo.prototype.remove.apply(e,arguments)}}Pc.defaultOptions=Tc(Qo.defaultOptions,{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}),xc(Pc.prototype,{directTouch:!0,getSymbol:gc,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),vo.registerSeriesType("column",Pc);let Cc=Pc,{getDeferredAnimation:Ac}=Xe,{format:Nc}=wt,{defined:Lc,extend:kc,fireEvent:Ic,getAlignFactor:Rc,isArray:Oc,isString:Dc,merge:Bc,objectEach:Fc,pick:Vc,pInt:jc,splat:Gc}=q;!function(e){function t(){return l(this).some((e=>null===e||void 0===e?void 0:e.enabled))}function i(e,t,i,n,s){let{chart:r,enabledDataSorting:o}=this,a=this.isCartesian&&r.inverted,l=e.plotX,c=e.plotY,h=i.rotation||0,u=Lc(l)&&Lc(c)&&r.isInsidePlot(l,Math.round(c),{inverted:a,paneCoordinates:!0,series:this}),d=0===h&&"justify"===Vc(i.overflow,o?"none":"justify"),f=this.visible&&!1!==e.visible&&Lc(l)&&(e.series.forceDL||o&&!d||u||Vc(i.inside,!!this.options.stacking)&&n&&r.isInsidePlot(l,a?n.x+1:n.y+n.height-1,{inverted:a,paneCoordinates:!0,series:this})),p=e.pos();if(f&&p){var m,g;let l=t.getBBox(),c=t.getBBox(void 0,0);if(n=kc({x:p[0],y:Math.round(p[1]),width:0,height:0},n||{}),"plotEdges"===i.alignTo&&this.isCartesian&&(n[a?"x":"y"]=0,n[a?"width":"height"]=(null===(m=this.yAxis)||void 0===m?void 0:m.len)||0),kc(i,{width:l.width,height:l.height}),g=n,o&&this.xAxis&&!d&&this.setDataLabelStartPos(e,t,s,u,g),t.align(Bc(i,{width:c.width,height:c.height}),!1,n,!1),t.alignAttr.x+=Rc(i.align)*(c.width-l.width),t.alignAttr.y+=Rc(i.verticalAlign)*(c.height-l.height),t[t.placed?"animate":"attr"]({"text-align":t.alignAttr["text-align"]||"center",x:t.alignAttr.x+(l.width-c.width)/2,y:t.alignAttr.y+(l.height-c.height)/2,rotationOriginX:(t.width||0)/2,rotationOriginY:(t.height||0)/2}),d&&n.height>=0)this.justifyDataLabel(t,i,t.alignAttr,l,n,s);else if(Vc(i.crop,!0)){let{x:e,y:i}=t.alignAttr;f=r.isInsidePlot(e,i,{paneCoordinates:!0,series:this})&&r.isInsidePlot(e+l.width-1,i+l.height-1,{paneCoordinates:!0,series:this})}i.shape&&!h&&t[s?"attr":"animate"]({anchorX:p[0],anchorY:p[1]})}s&&o&&(t.placed=!1),f||o&&!d?(t.show(),t.placed=!0):(t.hide(),t.placed=!1)}function n(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6,this.chart.dataLabelsGroup)}function s(e){let t=this.hasRendered||0,i=this.initDataLabelsGroup().attr({opacity:+t});return!t&&i&&(this.visible&&i.show(),this.options.animation?i.animate({opacity:1},e):i.attr({opacity:1})),i}function r(e){var t;let i;e=e||this.points;let n=this,s=n.chart,r=n.options,o=s.renderer,{backgroundColor:c,plotBackgroundColor:h}=s.options.chart,u=o.getContrast(Dc(h)&&h||Dc(c)&&c||"#000000"),d=l(n),{animation:f,defer:p}=d[0],m=p?Ac(s,f,n):{defer:0,duration:0};Ic(this,"drawDataLabels"),null!==(t=n.hasDataLabels)&&void 0!==t&&t.call(n)&&(i=this.initDataLabels(m),e.forEach((e=>{var t;let l=e.dataLabels||[],c=e.color||n.color;Gc(a(d,e.dlOptions||(null===(t=e.options)||void 0===t?void 0:t.dataLabels))).forEach(((t,a)=>{var h;let d,f,p,m,g=t.enabled&&(e.visible||e.dataLabelOnHidden)&&(!e.isNull||e.dataLabelOnNull)&&function(e,t){let i=t.filter;if(i){let t=i.operator,n=e[i.property],s=i.value;return">"===t&&n>s||"<"===t&&n<s||">="===t&&n>=s||"<="===t&&n<=s||"=="===t&&n==s||"==="===t&&n===s||"!="===t&&n!=s||"!=="===t&&n!==s||!1}return!0}(e,t),{backgroundColor:b,borderColor:v,distance:y,style:x={}}=t,S={},E=l[a],w=!E;g&&(f=Lc(d=Vc(t[e.formatPrefix+"Format"],t.format))?Nc(d,e,s):(t[e.formatPrefix+"Formatter"]||t.formatter).call(e,t),p=t.rotation,!s.styledMode&&(x.color=Vc(t.color,x.color,Dc(n.color)?n.color:void 0,"#000000"),"contrast"===x.color?("none"!==b&&(m=b),e.contrastColor=o.getContrast("auto"!==m&&Dc(m)&&m||(Dc(c)?c:"")),x.color=m||!Lc(y)&&t.inside||0>jc(y||0)||r.stacking?e.contrastColor:u):delete e.contrastColor,r.cursor&&(x.cursor=r.cursor)),S={r:t.borderRadius||0,rotation:p,padding:t.padding,zIndex:1},s.styledMode||(S.fill="auto"===b?e.color:b,S.stroke="auto"===v?e.color:v,S["stroke-width"]=t.borderWidth),Fc(S,((e,t)=>{void 0===e&&delete S[t]}))),!E||g&&Lc(f)&&!!(E.div||null!==(h=E.text)&&void 0!==h&&h.foreignObject)==!!t.useHTML&&(E.rotation&&t.rotation||E.rotation===t.rotation)||(E=void 0,w=!0),g&&Lc(f)&&""!==f&&(E?S.text=f:(E=o.label(f,0,0,t.shape,void 0,void 0,t.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+e.colorIndex+" "+(t.className||"")+(t.useHTML?" highcharts-tracker":"")),E&&(E.options=t,E.attr(S),s.styledMode?x.width&&E.css({width:x.width,textOverflow:x.textOverflow,whiteSpace:x.whiteSpace}):E.css(x).shadow(t.shadow),Ic(E,"beforeAddingDataLabel",{labelOptions:t,point:e}),E.added||E.add(i),n.alignDataLabel(e,E,t,void 0,w),E.isActive=!0,l[a]&&l[a]!==E&&l[a].destroy(),l[a]=E))}));let h=l.length;for(;h--;){var f,p;null!==(f=l[h])&&void 0!==f&&f.isActive?l[h].isActive=!1:(null!==(p=l[h])&&void 0!==p&&p.destroy(),l.splice(h,1))}e.dataLabel=l[0],e.dataLabels=l}))),Ic(this,"afterDrawDataLabels")}function o(e,t,i,n,s,r){let o,a,l=this.chart,c=t.align,h=t.verticalAlign,u=e.box?0:e.padding||0,d=l.inverted?this.yAxis:this.xAxis,f=d?d.left-l.plotLeft:0,p=l.inverted?this.xAxis:this.yAxis,m=p?p.top-l.plotTop:0,{x:g=0,y:b=0}=t;return(o=(i.x||0)+u+f)<0&&("right"===c&&g>=0?(t.align="left",t.inside=!0):g-=o,a=!0),(o=(i.x||0)+n.width-u+f)>l.plotWidth&&("left"===c&&g<=0?(t.align="right",t.inside=!0):g+=l.plotWidth-o,a=!0),(o=i.y+u+m)<0&&("bottom"===h&&b>=0?(t.verticalAlign="top",t.inside=!0):b-=o,a=!0),(o=(i.y||0)+n.height-u+m)>l.plotHeight&&("top"===h&&b<=0?(t.verticalAlign="bottom",t.inside=!0):b+=l.plotHeight-o,a=!0),a&&(t.x=g,t.y=b,e.placed=!r,e.align(t,void 0,s)),a}function a(e,t){let i,n=[];if(Oc(e)&&!Oc(t))n=e.map((function(e){return Bc(e,t)}));else if(Oc(t)&&!Oc(e))n=t.map((function(t){return Bc(e,t)}));else if(Oc(e)||Oc(t)){if(Oc(e)&&Oc(t))for(i=Math.max(e.length,t.length);i--;)n[i]=Bc(e[i],t[i])}else n=Bc(e,t);return n}function l(e){var t,i;let n=e.chart.options.plotOptions;return Gc(a(a(null===n||void 0===n||null===(t=n.series)||void 0===t?void 0:t.dataLabels,null===n||void 0===n||null===(i=n[e.type])||void 0===i?void 0:i.dataLabels),e.options.dataLabels))}function c(e,t,i,n,s){let r=this.chart,o=r.inverted,a=this.xAxis,l=a.reversed,c=((o?t.height:t.width)||0)/2,h=e.pointWidth,u=h?h/2:0;t.startXPos=o?s.x:l?-c-u:a.width-c+u,t.startYPos=o?l?this.yAxis.height-c+u:-c-u:s.y,n?"hidden"===t.visibility&&(t.show(),t.attr({opacity:0}).animate({opacity:1})):t.attr({opacity:1}).animate({opacity:0},void 0,t.hide),r.hasRendered&&(i&&t.attr({x:t.startXPos,y:t.startYPos}),t.placed=!0)}e.compose=function(e){let l=e.prototype;l.initDataLabels||(l.initDataLabels=s,l.initDataLabelsGroup=n,l.alignDataLabel=i,l.drawDataLabels=r,l.justifyDataLabel=o,l.mergeArrays=a,l.setDataLabelStartPos=c,l.hasDataLabels=t)}}(g||(g={}));let Wc=g,{composed:zc}=T,{series:Uc}=vo,{merge:Hc,pushUnique:Xc}=q;!function(e){function t(e,t,i,n,s){var r,o,a,l,c,h,u;let{chart:d,options:f}=this,p=d.inverted,m=(null===(r=this.xAxis)||void 0===r?void 0:r.len)||d.plotSizeX||0,g=(null===(o=this.yAxis)||void 0===o?void 0:o.len)||d.plotSizeY||0,b=e.dlBox||e.shapeArgs,v=null!==(a=e.below)&&void 0!==a?a:(e.plotY||0)>(null!==(l=this.translatedThreshold)&&void 0!==l?l:g),y=null!==(c=i.inside)&&void 0!==c?c:!!f.stacking;if(b){if(n=Hc(b),"allow"!==i.overflow||!1!==i.crop||!1!==f.clip){n.y<0&&(n.height+=n.y,n.y=0);let e=n.y+n.height-g;e>0&&e<n.height-1&&(n.height-=e)}p&&(n={x:g-n.y-n.height,y:m-n.x-n.width,width:n.height,height:n.width}),y||(p?(n.x+=v?0:n.width,n.width=0):(n.y+=v?n.height:0,n.height=0))}null!==(h=i.align)&&void 0!==h||(i.align=!p||y?"center":v?"right":"left"),null!==(u=i.verticalAlign)&&void 0!==u||(i.verticalAlign=p||y?"middle":v?"top":"bottom"),Uc.prototype.alignDataLabel.call(this,e,t,i,n,s),i.inside&&e.contrastColor&&t.css({color:e.contrastColor})}e.compose=function(e){Wc.compose(Uc),Xc(zc,"ColumnDataLabel")&&(e.prototype.alignDataLabel=t)}}(b||(b={}));let Yc=b,{extend:Kc,merge:qc}=q;class $c extends Cc{}$c.defaultOptions=qc(Cc.defaultOptions,{}),Kc($c.prototype,{inverted:!0}),vo.registerSeriesType("bar",$c);let{column:Zc,line:Qc}=vo.seriesTypes,{addEvent:Jc,extend:eh,merge:th}=q;class ih extends Qc{applyJitter(){let e=this,t=this.options.jitter,i=this.points.length;t&&this.points.forEach((function(n,s){["x","y"].forEach((function(r,o){if(t[r]&&!n.isNull){let a="plot".concat(r.toUpperCase()),l=e["".concat(r,"Axis")],c=t[r]*l.transA;if(l&&!l.logarithmic){let e=Math.max(0,(n[a]||0)-c),t=Math.min(l.len,(n[a]||0)+c);n[a]=e+(t-e)*function(e){let t=1e4*Math.sin(e);return t-Math.floor(t)}(s+o*i),"x"===r&&(n.clientX=n.plotX)}}}))}))}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}ih.defaultOptions=th(Qc.defaultOptions,{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),eh(ih.prototype,{drawTracker:Zc.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),Jc(ih,"afterTranslate",(function(){this.applyJitter()})),vo.registerSeriesType("scatter",ih);let{deg2rad:nh}=T,{fireEvent:sh,isNumber:rh,pick:oh,relativeLength:ah}=q;!function(e){e.getCenter=function(){let e,t,i,n=this.options,s=this.chart,r=2*(n.slicedOffset||0),o=s.plotWidth-2*r,a=s.plotHeight-2*r,l=n.center,c=Math.min(o,a),h=n.thickness,u=n.size,d=n.innerSize||0;"string"==typeof u&&(u=parseFloat(u)),"string"==typeof d&&(d=parseFloat(d));let f=[oh(null===l||void 0===l?void 0:l[0],"50%"),oh(null===l||void 0===l?void 0:l[1],"50%"),oh(u&&u<0?void 0:n.size,"100%"),oh(d&&d<0?void 0:n.innerSize||0,"0%")];for(!s.angular||this instanceof Qo||(f[3]=0),t=0;t<4;++t)i=f[t],e=t<2||2===t&&/%$/.test(i),f[t]=ah(i,[o,a,c,f[2]][t])+(e?r:0);return f[3]>f[2]&&(f[3]=f[2]),rh(h)&&2*h<f[2]&&h>0&&(f[3]=f[2]-2*h),sh(this,"afterGetCenter",{positions:f}),f},e.getStartAndEndRadians=function(e,t){let i=rh(e)?e:0,n=rh(t)&&t>i&&t-i<360?t:i+360;return{start:nh*(i+-90),end:nh*(n+-90)}}}(v||(v={}));let lh=v,{setAnimation:ch}=Xe,{addEvent:hh,defined:uh,extend:dh,isNumber:fh,pick:ph,relativeLength:mh}=q;class gh extends Br{getConnectorPath(e){let t=e.dataLabelPosition,i=e.options||{},n=i.connectorShape,s=this.connectorShapes[n]||n;return t&&s.call(this,r(r({},t.computed),{},{alignment:t.alignment}),t.connectorPosition,i)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(e){let t=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(t.x,t.y,t.r+e,t.r+e,{innerR:t.r-1,start:t.start,end:t.end,borderRadius:t.borderRadius})}constructor(e,t,i){var n;super(e,t,i),this.half=0,null!==(n=this.name)&&void 0!==n||(this.name=e.chart.options.lang.pieSliceName);let s=e=>{this.slice("select"===e.type)};hh(this,"select",s),hh(this,"unselect",s)}isValid(){return fh(this.y)&&this.y>=0}setVisible(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e!==this.visible&&this.update({visible:null!==e&&void 0!==e?e:!this.visible},t,void 0,!1)}slice(e,t,i){let n=this.series;ch(i,n.chart),t=ph(t,!0),this.sliced=this.options.sliced=e=uh(e)?e:!this.sliced,n.options.data[n.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}dh(gh.prototype,{connectorShapes:{fixedOffset:function(e,t,i){let n=t.breakAt,s=t.touchingSliceAt,r=i.softConnector?["C",e.x+("left"===e.alignment?-5:5),e.y,2*n.x-s.x,2*n.y-s.y,n.x,n.y]:["L",n.x,n.y];return[["M",e.x,e.y],r,["L",s.x,s.y]]},straight:function(e,t){let i=t.touchingSliceAt;return[["M",e.x,e.y],["L",i.x,i.y]]},crookedLine:function(e,t,i){let{angle:n=this.angle||0,breakAt:s,touchingSliceAt:r}=t,{series:o}=this,[a,l,c]=o.center,h=c/2,{plotLeft:u,plotWidth:d}=o.chart,f="left"===e.alignment,{x:p,y:m}=e,g=s.x;if(i.crookDistance){let e=mh(i.crookDistance,1);g=f?a+h+(d+u-a-h)*(1-e):u+(a-h)*e}else g=a+(l-m)*Math.tan(n-Math.PI/2);let b=[["M",p,m]];return(f?g<=p&&g>=s.x:g>=p&&g<=s.x)&&b.push(["L",g,m]),b.push(["L",s.x,s.y],["L",r.x,r.y]),b}}});let{getStartAndEndRadians:bh}=lh,{noop:vh}=T,{clamp:yh,extend:xh,fireEvent:Sh,merge:Eh,pick:wh}=q;class Th extends Qo{animate(e){let t=this,i=t.points,n=t.startAngleRad;e||i.forEach((function(e){let i=e.graphic,s=e.shapeArgs;i&&s&&(i.attr({r:wh(e.startR,t.center&&t.center[3]/2),start:n,end:n}),i.animate({r:s.r,start:s.start,end:s.end},t.options.animation))}))}drawEmpty(){let e,t,i=this.startAngleRad,n=this.endAngleRad,s=this.options;0===this.total&&this.center?(e=this.center[0],t=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(e,t,this.center[1]/2,0,i,n).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:Ti.arc(e,t,this.center[2]/2,0,{start:i,end:n,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":s.borderWidth,fill:s.fillColor||"none",stroke:s.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let e=this.chart.renderer;this.points.forEach((function(t){t.graphic&&t.hasNewShapeType()&&(t.graphic=t.graphic.destroy()),t.graphic||(t.graphic=e[t.shapeType](t.shapeArgs).add(t.series.group),t.delayedRendering=!0)}))}generatePoints(){super.generatePoints(),this.updateTotals()}getX(e,t,i,n){let s=this.center,r=this.radii?this.radii[i.index]||0:s[2]/2,o=n.dataLabelPosition,a=(null===o||void 0===o?void 0:o.distance)||0,l=Math.asin(yh((e-s[1])/(r+a),-1,1));return s[0]+Math.cos(l)*(r+a)*(t?-1:1)+(a>0?(t?-1:1)*(n.padding||0):0)}hasData(){return this.points.some((e=>e.visible))}redrawPoints(){let e,t,i,n,s=this,r=s.chart;this.drawEmpty(),s.group&&!r.styledMode&&s.group.shadow(s.options.shadow),s.points.forEach((function(o){let a={};t=o.graphic,!o.isNull&&t?(n=o.shapeArgs,e=o.getTranslate(),r.styledMode||(i=s.pointAttribs(o,o.selected&&"select")),o.delayedRendering?(t.setRadialReference(s.center).attr(n).attr(e),r.styledMode||t.attr(i).attr({"stroke-linejoin":"round"}),o.delayedRendering=!1):(t.setRadialReference(s.center),r.styledMode||Eh(!0,a,i),Eh(!0,a,n,e),t.animate(a)),t.attr({visibility:o.visible?"inherit":"hidden"}),t.addClass(o.getClassName(),!0)):t&&(o.graphic=t.destroy())}))}sortByAngle(e,t){e.sort((function(e,i){return void 0!==e.angle&&(i.angle-e.angle)*t}))}translate(e){Sh(this,"translate"),this.generatePoints();let t,i,n,s,r,o,a,l=this.options,c=l.slicedOffset,h=bh(l.startAngle,l.endAngle),u=this.startAngleRad=h.start,d=(this.endAngleRad=h.end)-u,f=this.points,p=l.ignoreHiddenPoint,m=f.length,g=0;for(e||(this.center=e=this.getCenter()),o=0;o<m;o++){a=f[o],t=u+g*d,a.isValid()&&(!p||a.visible)&&(g+=a.percentage/100),i=u+g*d;let l={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:Math.round(1e3*t)/1e3,end:Math.round(1e3*i)/1e3};a.shapeType="arc",a.shapeArgs=l,(n=(i+t)/2)>1.5*Math.PI?n-=2*Math.PI:n<-Math.PI/2&&(n+=2*Math.PI),a.slicedTranslation={translateX:Math.round(Math.cos(n)*c),translateY:Math.round(Math.sin(n)*c)},s=Math.cos(n)*e[2]/2,r=Math.sin(n)*e[2]/2,a.tooltipPos=[e[0]+.7*s,e[1]+.7*r],a.half=+(n<-Math.PI/2||n>Math.PI/2),a.angle=n}Sh(this,"afterTranslate")}updateTotals(){let e,t,i=this.points,n=i.length,s=this.options.ignoreHiddenPoint,r=0;for(e=0;e<n;e++)(t=i[e]).isValid()&&(!s||t.visible)&&(r+=t.y);for(e=0,this.total=r;e<n;e++)(t=i[e]).percentage=r>0&&(t.visible||!s)?t.y/r*100:0,t.total=r}}Th.defaultOptions=Eh(Qo.defaultOptions,{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.isNull?void 0:this.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}),xh(Th.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:Cc.prototype.drawTracker,getCenter:lh.getCenter,getSymbol:vh,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:Cc.prototype.pointAttribs,pointClass:gh,requireSorting:!1,searchPoint:vh,trackerGroups:["group","dataLabelsGroup"]}),vo.registerSeriesType("pie",Th);let{composed:_h,noop:Mh}=T,{distribute:Ph}=At,{series:Ch}=vo,{arrayMax:Ah,clamp:Nh,defined:Lh,isNumber:kh,pick:Ih,pushUnique:Rh,relativeLength:Oh}=q;!function(e){let t={radialDistributionY:function(e,t){var i;return((null===(i=t.dataLabelPosition)||void 0===i?void 0:i.top)||0)+e.distributeBox.pos},radialDistributionX:function(e,t,i,n,s){let r=s.dataLabelPosition;return e.getX(i<((null===r||void 0===r?void 0:r.top)||0)+2||i>((null===r||void 0===r?void 0:r.bottom)||0)-2?n:i,t.half,t,s)},justify:function(e,t,i,n){var s;return n[0]+(e.half?-1:1)*(i+((null===(s=t.dataLabelPosition)||void 0===s?void 0:s.distance)||0))},alignToPlotEdges:function(e,t,i,n){let s=e.getBBox().width;return t?s+n:i-s-n},alignToConnectors:function(e,t,i,n){let s,r=0;return e.forEach((function(e){(s=e.dataLabel.getBBox().width)>r&&(r=s)})),t?r+n:i-r-n}};function i(e,t){let i=Math.PI/2,{start:n=0,end:s=0}=e.shapeArgs||{},r=e.angle||0;t>0&&n<i&&s>i&&r>i/2&&r<1.5*i&&(r=r<=i?Math.max(i/2,(n+i)/2):Math.min(1.5*i,(i+s)/2));let{center:o,options:a}=this,l=o[2]/2,c=Math.cos(r),h=Math.sin(r),u=o[0]+c*l,d=o[1]+h*l,f=Math.min((a.slicedOffset||0)+(a.borderWidth||0),t/5);return{natural:{x:u+c*t,y:d+h*t},computed:{},alignment:t<0?"center":e.half?"right":"left",connectorPosition:{angle:r,breakAt:{x:u+c*f,y:d+h*f},touchingSliceAt:{x:u,y:d}},distance:t}}function n(){var e;let t,i,n,s=this,r=s.points,o=s.chart,a=o.plotWidth,l=o.plotHeight,c=o.plotLeft,h=Math.round(o.chartWidth/3),u=s.center,d=u[2]/2,f=u[1],p=[[],[]],m=[0,0,0,0],g=s.dataLabelPositioners,b=0;s.visible&&(null===(e=s.hasDataLabels)||void 0===e?void 0:e.call(s))&&(r.forEach((e=>{(e.dataLabels||[]).forEach((e=>{e.shortened&&(e.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),e.shortened=!1)}))})),Ch.prototype.drawDataLabels.apply(s),r.forEach((e=>{(e.dataLabels||[]).forEach(((t,i)=>{var n;let s=u[2]/2,r=t.options,o=Oh((null===r||void 0===r?void 0:r.distance)||0,s);0===i&&p[e.half].push(e),!Lh(null===r||void 0===r||null===(n=r.style)||void 0===n?void 0:n.width)&&t.getBBox().width>h&&(t.css({width:Math.round(.7*h)+"px"}),t.shortened=!0),t.dataLabelPosition=this.getDataLabelPosition(e,o),b=Math.max(b,o)}))})),p.forEach(((e,t)=>{let r,h,p,v=e.length,y=[],x=0;v&&(s.sortByAngle(e,t-.5),b>0&&(r=Math.max(0,f-d-b),h=Math.min(f+d+b,o.plotHeight),e.forEach((e=>{(e.dataLabels||[]).forEach((t=>{var i;let n=t.dataLabelPosition;n&&n.distance>0&&(n.top=Math.max(0,f-d-n.distance),n.bottom=Math.min(f+d+n.distance,o.plotHeight),x=t.getBBox().height||21,t.lineHeight=o.renderer.fontMetrics(t.text||t).h+2*t.padding,e.distributeBox={target:((null===(i=t.dataLabelPosition)||void 0===i?void 0:i.natural.y)||0)-n.top+t.lineHeight/2,size:x,rank:e.y},y.push(e.distributeBox))}))})),Ph(y,p=h+x-r,p/5)),e.forEach((r=>{(r.dataLabels||[]).forEach((o=>{let h=o.options||{},f=r.distributeBox,p=o.dataLabelPosition,b=(null===p||void 0===p?void 0:p.natural.y)||0,v=h.connectorPadding||0,x=o.lineHeight||21,S=(x-o.getBBox().height)/2,E=0,w=b,T="inherit";if(p){if(y&&Lh(f)&&p.distance>0&&(void 0===f.pos?T="hidden":(n=f.size,w=g.radialDistributionY(r,o))),h.justify)E=g.justify(r,o,d,u);else switch(h.alignTo){case"connectors":E=g.alignToConnectors(e,t,a,c);break;case"plotEdges":E=g.alignToPlotEdges(o,t,a,c);break;default:E=g.radialDistributionX(s,r,w-S,b,o)}if(p.attribs={visibility:T,align:p.alignment},p.posAttribs={x:E+(h.x||0)+({left:v,right:-v}[p.alignment]||0),y:w+(h.y||0)-x/2},p.computed.x=E,p.computed.y=w-S,Ih(h.crop,!0)){let e;E-(i=o.getBBox().width)<v&&1===t?(e=Math.round(i-E+v),m[3]=Math.max(e,m[3])):E+i>a-v&&0===t&&(e=Math.round(E+i-a+v),m[1]=Math.max(e,m[1])),w-n/2<0?m[0]=Math.max(Math.round(n/2-w),m[0]):w+n/2>l&&(m[2]=Math.max(Math.round(w+n/2-l),m[2])),p.sideOverflow=e}}}))})))})),(0===Ah(m)||this.verifyDataLabelOverflow(m))&&(this.placeDataLabels(),this.points.forEach((e=>{(e.dataLabels||[]).forEach((i=>{let{connectorColor:n,connectorWidth:r=1}=i.options||{},a=i.dataLabelPosition;if(kh(r)){var l;let c;t=i.connector,a&&a.distance>0?(c=!t,t||(i.connector=t=o.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+e.colorIndex+(e.className?" "+e.className:"")).add(s.dataLabelsGroup)),o.styledMode||t.attr({"stroke-width":r,stroke:n||e.color||"#666666"}),t[c?"attr":"animate"]({d:e.getConnectorPath(i)}),t.attr({visibility:null===(l=a.attribs)||void 0===l?void 0:l.visibility})):t&&(i.connector=t.destroy())}}))}))))}function s(){this.points.forEach((e=>{(e.dataLabels||[]).forEach((e=>{var t;let i=e.dataLabelPosition;i?(i.sideOverflow&&(e.css({width:Math.max(e.getBBox().width-i.sideOverflow,0)+"px",textOverflow:(null===(t=e.options)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.textOverflow)||"ellipsis"}),e.shortened=!0),e.attr(i.attribs),e[e.moved?"animate":"attr"](i.posAttribs),e.moved=!0):e&&e.attr({y:-9999})})),delete e.distributeBox}),this)}function r(e){let t=this.center,i=this.options,n=i.center,s=i.minSize||80,r=s,o=null!==i.size;return!o&&(null!==n[0]?r=Math.max(t[2]-Math.max(e[1],e[3]),s):(r=Math.max(t[2]-e[1]-e[3],s),t[0]+=(e[3]-e[1])/2),null!==n[1]?r=Nh(r,s,t[2]-Math.max(e[0],e[2])):(r=Nh(r,s,t[2]-e[0]-e[2]),t[1]+=(e[0]-e[2])/2),r<t[2]?(t[2]=r,t[3]=Math.min(i.thickness?Math.max(0,r-2*i.thickness):Math.max(0,Oh(i.innerSize||0,r)),r),this.translate(t),this.drawDataLabels&&this.drawDataLabels()):o=!0),o}e.compose=function(e){if(Wc.compose(Ch),Rh(_h,"PieDataLabel")){let o=e.prototype;o.dataLabelPositioners=t,o.alignDataLabel=Mh,o.drawDataLabels=n,o.getDataLabelPosition=i,o.placeDataLabels=s,o.verifyDataLabelOverflow=r}}}(y||(y={}));let Dh=y;!function(e){e.getCenterOfPoints=function(e){let t=e.reduce(((e,t)=>(e.x+=t.x,e.y+=t.y,e)),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}},e.getDistanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.getAngleBetweenPoints=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)},e.pointInPolygon=function(e,t){let i,n,{x:s,y:r}=e,o=t.length,a=!1;for(i=0,n=o-1;i<o;n=i++){let[e,o]=t[i],[l,c]=t[n];o>r!=c>r&&s<(l-e)*(r-o)/(c-o)+e&&(a=!a)}return a}}(x||(x={}));let{pointInPolygon:Bh}=x,{addEvent:Fh,getAlignFactor:Vh,fireEvent:jh,objectEach:Gh,pick:Wh}=q;function zh(e){let t,i,n,s,r,o=e.length,a=(e,t)=>!(t.x>=e.x+e.width||t.x+t.width<=e.x||t.y>=e.y+e.height||t.y+t.height<=e.y),l=(e,t)=>{for(let i of e)if(Bh({x:i[0],y:i[1]},t))return!0;return!1},c=!1;for(let u=0;u<o;u++)(t=e[u])&&(t.oldOpacity=t.opacity,t.newOpacity=1,t.absoluteBox=function(e){if(e&&(!e.alignAttr||e.placed)){var t,i;let n=e.box?0:e.padding||0,s=e.alignAttr||{x:e.attr("x"),y:e.attr("y")},{height:r,polygon:o,width:a}=e.getBBox(),l=Vh(e.alignValue)*a;return e.width=a,e.height=r,{x:s.x+((null===(t=e.parentGroup)||void 0===t?void 0:t.translateX)||0)+n-l,y:s.y+((null===(i=e.parentGroup)||void 0===i?void 0:i.translateY)||0)+n,width:a-2*n,height:r-2*n,polygon:o}}}(t));e.sort(((e,t)=>(t.labelrank||0)-(e.labelrank||0)));for(let u=0;u<o;++u){var h;s=(i=e[u])&&i.absoluteBox;let t=null===(h=s)||void 0===h?void 0:h.polygon;for(let c=u+1;c<o;++c){r=(n=e[c])&&n.absoluteBox;let o=!1;if(s&&r&&i!==n&&0!==i.newOpacity&&0!==n.newOpacity&&"hidden"!==i.visibility&&"hidden"!==n.visibility){let e=r.polygon;if(t&&e&&t!==e?l(t,e)&&(o=!0):a(s,r)&&(o=!0),o){let e=i.labelrank<n.labelrank?i:n,t=e.text;e.newOpacity=0,(null===t||void 0===t?void 0:t.element.querySelector("textPath"))&&t.hide()}}}}for(let u of e)Uh(u,this)&&(c=!0);c&&jh(this,"afterHideAllOverlappingLabels")}function Uh(e,t){let i,n=!1;return e&&(i=e.newOpacity,e.oldOpacity!==i&&(e.hasClass("highcharts-data-label")?(e[i?"removeClass":"addClass"]("highcharts-data-label-hidden"),n=!0,e[e.isOld?"animate":"attr"]({opacity:i},void 0,(function(){t.styledMode||e.css({pointerEvents:i?"auto":"none"})})),jh(t,"afterHideOverlappingLabel")):e.attr({opacity:i})),e.isOld=!0),n}function Hh(){let e=this,t=[];for(let n of e.labelCollectors||[])t=t.concat(n());for(let n of e.yAxis||[])n.stacking&&n.options.stackLabels&&!n.options.stackLabels.allowOverlap&&Gh(n.stacking.stacks,(e=>{Gh(e,(e=>{e.label&&t.push(e.label)}))}));for(let n of e.series||[]){var i;if(n.visible&&null!==(i=n.hasDataLabels)&&void 0!==i&&i.call(n)){let i=i=>{for(let n of i)n.visible&&(n.dataLabels||[]).forEach((i=>{var s,r;let o=i.options||{};i.labelrank=Wh(o.labelrank,n.labelrank,null===(s=n.shapeArgs)||void 0===s?void 0:s.height),(null!==(r=o.allowOverlap)&&void 0!==r?r:Number(o.distance)>0)?(i.oldOpacity=i.opacity,i.newOpacity=1,Uh(i,e)):t.push(i)}))};i(n.nodes||[]),i(n.points)}}this.hideOverlappingLabels(t)}let Xh={compose:function(e){let t=e.prototype;t.hideOverlappingLabels||(t.hideOverlappingLabels=zh,Fh(e,"render",Hh))}},{defaultOptions:Yh}=Se,{noop:Kh}=T,{addEvent:qh,extend:$h,isObject:Zh,merge:Qh,relativeLength:Jh}=q,eu={radius:0,scope:"stack",where:void 0},tu=Kh,iu=Kh;function nu(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=tu(e,t,i,n,s),{brStart:o=!0,brEnd:a=!0,innerR:l=0,r:c=i,start:h=0,end:u=0}=s;if(s.open||!s.borderRadius)return r;let d=u-h,f=Math.sin(d/2),p=Math.max(Math.min(Jh(s.borderRadius||0,c-l),(c-l)/2,c*f/(1+f)),0),m=Math.min(p,d/Math.PI*2*l),g=r.length-1;for(;g--;)(o||0!==g&&3!==g)&&(a||1!==g&&2!==g)&&function(e,t,i){let n,s,r,o=e[t],a=e[t+1];if("Z"===a[0]&&(a=e[0]),"M"!==o[0]&&"L"!==o[0]||"A"!==a[0]?"A"===o[0]&&("M"===a[0]||"L"===a[0])&&(n=a,s=o):(n=o,s=a,r=!0),n&&s&&s.params){let o=s[1],a=s[5],l=s.params,{start:c,end:h,cx:u,cy:d}=l,f=a?o-i:o+i,p=f?Math.asin(i/f):0,m=a?p:-p,g=Math.cos(p)*f;r?(l.start=c+m,n[1]=u+g*Math.cos(c),n[2]=d+g*Math.sin(c),e.splice(t+1,0,["A",i,i,0,0,1,u+o*Math.cos(l.start),d+o*Math.sin(l.start)])):(l.end=h-m,s[6]=u+o*Math.cos(l.end),s[7]=d+o*Math.sin(l.end),e.splice(t+1,0,["A",i,i,0,0,1,u+g*Math.cos(h),d+g*Math.sin(h)])),s[4]=Math.abs(l.end-l.start)<Math.PI?0:1}}(r,g,g>1?m:p);return r}function su(){if(this.options.borderRadius&&(!this.chart.is3d||!this.chart.is3d())){var e;let{options:t,yAxis:i}=this,n="percent"===t.stacking,s=null===(e=Yh.plotOptions)||void 0===e||null===(e=e[this.type])||void 0===e?void 0:e.borderRadius,r=ru(t.borderRadius,Zh(s)?s:{}),o=i.options.reversed;for(let e of this.points){let{shapeArgs:s}=e;if("roundedRect"===e.shapeType&&s){let{width:a=0,height:l=0,y:c=0}=s,h=c,u=l;if("stack"===r.scope&&e.stackTotal){let s=i.translate(n?100:e.stackTotal,!1,!0,!1,!0),r=i.translate(t.threshold||0,!1,!0,!1,!0),o=this.crispCol(0,Math.min(s,r),0,Math.abs(s-r));h=o.y,u=o.height}let d=(e.negative?-1:1)*(o?-1:1)==-1,f=r.where;!f&&this.is("waterfall")&&Math.abs((e.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(f="all"),f||(f="end");let p=Math.min(Jh(r.radius,a),a/2,"all"===f?l/2:1/0)||0;"end"===f&&(d&&(h-=p),u+=p),$h(s,{brBoxHeight:u,brBoxY:h,r:p})}}}}function ru(e,t){return Zh(e)||(e={radius:e||0}),Qh(eu,t,e)}function ou(){let e=ru(this.options.borderRadius);for(let t of this.points){let i=t.shapeArgs;i&&(i.borderRadius=Jh(e.radius,(i.r||0)-(i.innerR||0)))}}function au(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=iu(e,t,i,n,s),{r:o=0,brBoxHeight:a=n,brBoxY:l=t}=s,c=t-l,h=l+a-(t+n),u=c-o>-.1?0:o,d=h-o>-.1?0:o,f=Math.max(u&&c,0),p=Math.max(d&&h,0),m=[e+u,t],g=[e+i-u,t],b=[e+i,t+u],v=[e+i,t+n-d],y=[e+i-d,t+n],x=[e+d,t+n],S=[e,t+n-d],E=[e,t+u],w=(e,t)=>Math.sqrt(Math.pow(e,2)-Math.pow(t,2));if(f){let e=w(u,u-f);m[0]-=e,g[0]+=e,b[1]=E[1]=t+u-f}if(n<u-f){let s=w(u,u-f-n);b[0]=v[0]=e+i-u+s,y[0]=Math.min(b[0],y[0]),x[0]=Math.max(v[0],x[0]),S[0]=E[0]=e+u-s,b[1]=E[1]=t+n}if(p){let e=w(d,d-p);y[0]+=e,x[0]-=e,v[1]=S[1]=t+n-d+p}if(n<d-p){let s=w(d,d-p-n);b[0]=v[0]=e+i-d+s,g[0]=Math.min(b[0],g[0]),m[0]=Math.max(v[0],m[0]),S[0]=E[0]=e+d-s,v[1]=S[1]=t}return r.length=0,r.push(["M",...m],["L",...g],["A",u,u,0,0,1,...b],["L",...v],["A",d,d,0,0,1,...y],["L",...x],["A",d,d,0,0,1,...S],["L",...E],["A",u,u,0,0,1,...m],["Z"]),r}let{diffObjects:lu,extend:cu,find:hu,merge:uu,pick:du,uniqueKey:fu}=q;!function(e){function t(e,t){let i=e.condition;(i.callback||function(){return this.chartWidth<=du(i.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=du(i.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=du(i.minWidth,0)&&this.chartHeight>=du(i.minHeight,0)}).call(this)&&t.push(e._id)}function i(e,t){let i,n=this.options.responsive,s=this.currentResponsive,r=[];!t&&n&&n.rules&&n.rules.forEach((e=>{void 0===e._id&&(e._id=fu()),this.matchResponsiveRule(e,r)}),this);let o=uu(...r.map((e=>hu((null===n||void 0===n?void 0:n.rules)||[],(t=>t._id===e)))).map((e=>null===e||void 0===e?void 0:e.chartOptions)));o.isResponsiveOptions=!0,r=r.toString()||void 0;let a=null===s||void 0===s?void 0:s.ruleIds;r!==a&&(s&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(s.undoOptions,e,!0),this.updatingResponsive=!1),r?((i=lu(o,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:r,mergedOptions:o,undoOptions:i},this.updatingResponsive||this.update(o,e,!0)):this.currentResponsive=void 0)}e.compose=function(e){let n=e.prototype;return n.matchResponsiveRule||cu(n,{matchResponsiveRule:t,setResponsive:i}),e}}(S||(S={}));let pu=S;T.AST=ot,T.Axis=Es,T.Chart=al,T.Color=Ne,T.DataLabel=Wc,T.DataTableCore=lo,T.Fx=Oe,T.HTMLElement=_n,T.Legend=Sa,T.LegendSymbol=fo,T.OverlappingDataLabels=T.OverlappingDataLabels||Xh,T.PlotLineOrBand=Xs,T.Point=Br,T.Pointer=io,T.RendererRegistry=Tt,T.Series=Qo,T.SeriesRegistry=vo,T.StackItem=Pl,T.SVGElement=ci,T.SVGRenderer=un,T.Templating=wt,T.Tick=Hn,T.Time=me,T.Tooltip=br,T.animate=Xe.animate,T.animObject=Xe.animObject,T.chart=al.chart,T.color=Ne.parse,T.dateFormat=wt.dateFormat,T.defaultOptions=Se.defaultOptions,T.distribute=At.distribute,T.format=wt.format,T.getDeferredAnimation=Xe.getDeferredAnimation,T.getOptions=Se.getOptions,T.numberFormat=wt.numberFormat,T.seriesType=vo.seriesType,T.setAnimation=Xe.setAnimation,T.setOptions=Se.setOptions,T.stop=Xe.stop,T.time=Se.defaultTime,T.timers=Oe.timers,function(e,t,i){let n=e.types.pie;if(!t.symbolCustomAttribs.includes("borderRadius")){let s=i.prototype.symbols;qh(e,"afterColumnTranslate",su,{order:9}),qh(n,"afterTranslate",ou),t.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY","brEnd","brStart"),tu=s.arc,iu=s.roundedRect,s.arc=nu,s.roundedRect=au}}(T.Series,T.SVGElement,T.SVGRenderer),Yc.compose(T.Series.types.column),Wc.compose(T.Series),Ps.compose(T.Axis),_n.compose(T.SVGRenderer),Sa.compose(T.Chart),Ls.compose(T.Axis),Xh.compose(T.Chart),Dh.compose(T.Series.types.pie),Xs.compose(T.Chart,T.Axis),io.compose(T.Chart),pu.compose(T.Chart),yl.compose(T.Axis,T.Chart,T.Series),Yl.compose(T.Axis,T.Chart,T.Series),br.compose(T.Pointer),q.extend(T,q);let mu=T;return w.default})(),n._Highcharts=s(),e.exports=n._Highcharts},494:e=>{"use strict";e.exports=function(e,t){return new Promise((function(i,n){var s=new XMLHttpRequest;t&&(s.responseType=t),s.open("GET",e),s.onload=function(){200===s.status?i(s.response):n(Error(s.statusText))},s.onerror=function(){n(Error("Network Error"))},s.send()}))}},520:e=>{e.exports=function(e){var s=e.createGain(),r=s._voltage=function(e){var t=e.createBufferSource(),n=e.createBuffer(1,2,e.sampleRate);return n.getChannelData(0).set(i),t.buffer=n,t.loop=!0,t}(e),o=n(r),a=n(r),l=n(r);return s._startAmount=n(a),s._endAmount=n(l),s._multiplier=n(o),s._multiplier.connect(s),s._startAmount.connect(s),s._endAmount.connect(s),s.value=o.gain,s.startValue=a.gain,s.endValue=l.gain,s.startValue.value=0,s.endValue.value=0,Object.defineProperties(s,t),s};var t={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(e){var t=this._multiplier.gain,i=this._startAmount.gain,n=this._endAmount.gain;this._voltage.start(e),this._decayFrom=this._decayFrom=e+this.attack,this._startedAt=e;var r=this.sustain;t.cancelScheduledValues(e),i.cancelScheduledValues(e),n.cancelScheduledValues(e),n.setValueAtTime(0,e),this.attack?(t.setValueAtTime(0,e),t.linearRampToValueAtTime(1,e+this.attack),i.setValueAtTime(1,e),i.linearRampToValueAtTime(0,e+this.attack)):(t.setValueAtTime(1,e),i.setValueAtTime(0,e)),this.decay&&t.setTargetAtTime(r,this._decayFrom,s(this.decay))}},stop:{value:function(e,t){t&&(e-=this.release);var i=e+this.release;if(this.release){var n=this._multiplier.gain,r=this._startAmount.gain,o=this._endAmount.gain;n.cancelScheduledValues(e),r.cancelScheduledValues(e),o.cancelScheduledValues(e);var a=s(this.release);if(this.attack&&e<this._decayFrom){var l=function(e,t,i,n,s){var r=s-i,o=e+r/(n-i)*(t-e);o<=e&&(o=e);o>=t&&(o=t);return o}(0,1,this._startedAt,this._decayFrom,e);n.linearRampToValueAtTime(l,e),r.linearRampToValueAtTime(1-l,e),r.setTargetAtTime(0,e,a)}o.setTargetAtTime(1,e,a),n.setTargetAtTime(0,e,a)}return this._voltage.stop(i),i}},onended:{get:function(){return this._voltage.onended},set:function(e){this._voltage.onended=e}}},i=new Float32Array([1,1]);function n(e){var t=e.context.createGain();return e.connect(t),t}function s(e){return Math.log(e+1)/Math.log(100)}},578:(e,t,i)=>{"use strict";var n=i(843),s=i(494);function r(e){return function(t){return"string"===typeof t&&e.test(t)}}function o(e,t){return"string"===typeof e?e+t:"function"===typeof e?e(t):t}function a(e,t,i,n){var s=t instanceof ArrayBuffer?l:c(t)?h:function(e){return e&&"function"===typeof e.then}(t)?u:d(t)?f:function(e){return e&&"object"===typeof e}(t)?p:m(t)?g:b(t)?v:y(t)?x:null;return s?s(e,t,i||{}):n?Promise.resolve(n):Promise.reject("Source not valid ("+t+")")}function l(e,t,i){return new Promise((function(i,n){e.decodeAudioData(t,(function(e){i(e)}),(function(){n("Can't decode audio data ("+t.slice(0,30)+"...)")}))}))}a.fetch=s;var c=r(/\.(mp3|wav|ogg)(\?.*)?$/i);function h(e,t,i){var n=o(i.from,t);return a(e,a.fetch(n,"arraybuffer"),i)}function u(e,t,i){return t.then((function(t){return a(e,t,i)}))}var d=Array.isArray;function f(e,t,i){return Promise.all(t.map((function(t){return a(e,t,i,t)})))}function p(e,t,i){var n={},s=Object.keys(t).map((function(s){if(i.only&&-1===i.only.indexOf(s))return null;var r=t[s];return a(e,r,i,r).then((function(e){n[s]=e}))}));return Promise.all(s).then((function(){return n}))}var m=r(/\.json(\?.*)?$/i);function g(e,t,i){var n=o(i.from,t);return a(e,a.fetch(n,"text").then(JSON.parse),i)}var b=r(/^data:audio/);function v(e,t,i){var s=t.indexOf(",");return a(e,n.decode(t.slice(s+1)).buffer,i)}var y=r(/\.js(\?.*)?$/i);function x(e,t,i){var n=o(i.from,t);return a(e,a.fetch(n,"text").then(S),i)}function S(e){var t=e.indexOf("MIDI.Soundfont.");if(t<0)throw Error("Invalid MIDI.js Soundfont format");t=e.indexOf("=",t)+2;var i=e.lastIndexOf(",");return JSON.parse(e.slice(t,i)+"}")}e.exports&&(e.exports=a),"undefined"!==typeof window&&(window.loadAudio=a)},579:(e,t,i)=>{"use strict";e.exports=i(799)},612:(e,t,i)=>{"use strict";var n=i(59),s=i(831),r=i(817),o=i(417),a=i(167);function l(e,t,i){return a(o(r(s(n(e,t,i)))))}e.exports&&(e.exports=l),"undefined"!==typeof window&&(window.SamplePlayer=l)},613:function(e,t,i){var n,s=i(897).default;n=()=>(()=>{var e={67:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SystemLinePosition=void 0,function(e){e[e.MeasureBegin=0]="MeasureBegin",e[e.MeasureEnd=1]="MeasureEnd"}(i||(t.SystemLinePosition=i={}))},98:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalGlissando=void 0;const n=i(9409),s=i(6438),r=i(6452);t.GraphicalGlissando=class{constructor(e){this.Glissando=e,this.staffEntries=[]}calculateLine(e){const t=this.staffEntries[0],i=this.staffEntries[this.staffEntries.length-1],o=t.findGraphicalNoteFromNote(this.Glissando.StartNote),a=i.findGraphicalNoteFromNote(this.Glissando.EndNote);if(!o&&!a)return;const l=t.parentMeasure.ParentStaffLine;let c,h,u,d;if(o&&t.parentMeasure.ParentStaffLine===this.StaffLine)c=o.PositionAndShape.RelativePosition.x+o.parentVoiceEntry.parentStaffEntry.PositionAndShape.RelativePosition.x+o.parentVoiceEntry.parentStaffEntry.parentMeasure.PositionAndShape.RelativePosition.x+e.GlissandoNoteOffset,u=o.PositionAndShape.AbsolutePosition.y;else{c=i.parentMeasure.beginInstructionsWidth-.4;const t=this.Glissando.Direction===s.ColDirEnum.Down?-1:1;u=a.PositionAndShape.AbsolutePosition.y+t*e.GlissandoStafflineStartYDistanceToNote}if(a&&i.parentMeasure.ParentStaffLine===this.StaffLine)h=a.PositionAndShape.RelativePosition.x+a.parentVoiceEntry.parentStaffEntry.PositionAndShape.RelativePosition.x+a.parentVoiceEntry.parentStaffEntry.parentMeasure.PositionAndShape.RelativePosition.x-.5-e.GlissandoNoteOffset,c>h&&(c=h-e.GlissandoStafflineStartMinimumWidth),d=a.PositionAndShape.AbsolutePosition.y;else{if(l.Measures.last().parentSourceMeasure.HasEndLine)return;h=l.PositionAndShape.Size.width,h-c>e.GlissandoStafflineEndOffset&&(c=h-e.GlissandoStafflineEndOffset);const t=this.Glissando.Direction===s.ColDirEnum.Down?1:-1;d=o.PositionAndShape.AbsolutePosition.y+t*e.GlissandoStafflineStartYDistanceToNote}const f=new n.PointF2D(c,u),p=new n.PointF2D(h,d);void 0===this.Width&&(this.Width=e.GlissandoDefaultWidth),this.Line=new r.GraphicalLine(f,p,this.Width)}}},164:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MidiInstrument=t.ClefEnum=t.ClefInstruction=void 0;const n=i(8233),s=i(5364),r=i(8233),o=i(8233),a=i(7307);class l extends s.AbstractNotationInstruction{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.G,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;super(void 0),this.clefType=c.G,this.line=2,this.octaveOffset=0,this.line=i,this.clefType=e,this.octaveOffset=t,this.calcParameters()}static getDefaultClefFromMidiInstrument(e){switch(e){case h.Acoustic_Grand_Piano:case h.Electric_Bass_finger:case h.Electric_Bass_pick:case h.Fretless_Bass:case h.Slap_Bass_1:case h.Slap_Bass_2:case h.Synth_Bass_1:case h.Synth_Bass_2:case h.Contrabass:return new l(c.F,0,4);default:return new l(c.G,0,2)}}static getAllPossibleClefs(){const e=[];for(let t=0;t<=2;t++){const i=new l(c.G,t,2);e.push(i)}for(let t=-2;t<=0;t++){const i=new l(c.F,t,4);e.push(i)}return e}static isSupportedClef(e){switch(e){case c.G:case c.F:case c.C:case c.percussion:case c.TAB:return!0;default:return!1}}get ClefType(){return this.clefType}set ClefType(e){this.clefType=e}get Line(){return this.line}set Line(e){this.line=e}get OctaveOffset(){return this.octaveOffset}set OctaveOffset(e){this.octaveOffset=e}get ClefPitch(){return this.clefPitch}set ClefPitch(e){this.clefPitch=e}get ReferenceCyPosition(){return this.referenceCyPosition}set ReferenceCyPosition(e){this.referenceCyPosition=e}Equals(e){return this===e||!(!this||!e)&&this.clefPitch===e.clefPitch&&this.Line===e.Line}NotEqual(e){return!this.Equals(e)}ToString(){return"ClefType: "+this.clefType}calcParameters(){switch(this.clefType){case c.G:this.clefPitch=new n.Pitch(r.NoteEnum.G,1+this.octaveOffset,o.AccidentalEnum.NONE),this.referenceCyPosition=5-this.line+2;break;case c.F:this.clefPitch=new n.Pitch(r.NoteEnum.F,0+this.octaveOffset,o.AccidentalEnum.NONE),this.referenceCyPosition=5-this.line+1.5;break;case c.C:this.clefPitch=new n.Pitch(r.NoteEnum.C,1+this.octaveOffset,o.AccidentalEnum.NONE),this.referenceCyPosition=5-this.line;break;case c.percussion:this.clefPitch=new n.Pitch(r.NoteEnum.C,2,o.AccidentalEnum.NONE),this.referenceCyPosition=2;break;case c.TAB:this.clefPitch=new n.Pitch(r.NoteEnum.G,0,o.AccidentalEnum.NONE),this.referenceCyPosition=0;break;default:throw new a.ArgumentOutOfRangeException("clefType")}}}var c,h;t.ClefInstruction=l,function(e){e[e.G=0]="G",e[e.F=1]="F",e[e.C=2]="C",e[e.percussion=3]="percussion",e[e.TAB=4]="TAB"}(c||(t.ClefEnum=c={})),function(e){e[e.None=-1]="None",e[e.Acoustic_Grand_Piano=0]="Acoustic_Grand_Piano",e[e.Bright_Acoustic_Piano=1]="Bright_Acoustic_Piano",e[e.Electric_Grand_Piano=2]="Electric_Grand_Piano",e[e.Honky_tonk_Piano=3]="Honky_tonk_Piano",e[e.Electric_Piano_1=4]="Electric_Piano_1",e[e.Electric_Piano_2=5]="Electric_Piano_2",e[e.Harpsichord=6]="Harpsichord",e[e.Clavinet=7]="Clavinet",e[e.Celesta=8]="Celesta",e[e.Glockenspiel=9]="Glockenspiel",e[e.Music_Box=10]="Music_Box",e[e.Vibraphone=11]="Vibraphone",e[e.Marimba=12]="Marimba",e[e.Xylophone=13]="Xylophone",e[e.Tubular_Bells=14]="Tubular_Bells",e[e.Dulcimer=15]="Dulcimer",e[e.Drawbar_Organ=16]="Drawbar_Organ",e[e.Percussive_Organ=17]="Percussive_Organ",e[e.Rock_Organ=18]="Rock_Organ",e[e.Church_Organ=19]="Church_Organ",e[e.Reed_Organ=20]="Reed_Organ",e[e.Accordion=21]="Accordion",e[e.Harmonica=22]="Harmonica",e[e.Tango_Accordion=23]="Tango_Accordion",e[e.Acoustic_Guitar_nylon=24]="Acoustic_Guitar_nylon",e[e.Acoustic_Guitar_steel=25]="Acoustic_Guitar_steel",e[e.Electric_Guitar_jazz=26]="Electric_Guitar_jazz",e[e.Electric_Guitar_clean=27]="Electric_Guitar_clean",e[e.Electric_Guitar_muted=28]="Electric_Guitar_muted",e[e.Overdriven_Guitar=29]="Overdriven_Guitar",e[e.Distortion_Guitar=30]="Distortion_Guitar",e[e.Guitar_harmonics=31]="Guitar_harmonics",e[e.Acoustic_Bass=32]="Acoustic_Bass",e[e.Electric_Bass_finger=33]="Electric_Bass_finger",e[e.Electric_Bass_pick=34]="Electric_Bass_pick",e[e.Fretless_Bass=35]="Fretless_Bass",e[e.Slap_Bass_1=36]="Slap_Bass_1",e[e.Slap_Bass_2=37]="Slap_Bass_2",e[e.Synth_Bass_1=38]="Synth_Bass_1",e[e.Synth_Bass_2=39]="Synth_Bass_2",e[e.Violin=40]="Violin",e[e.Viola=41]="Viola",e[e.Cello=42]="Cello",e[e.Contrabass=43]="Contrabass",e[e.Tremolo_Strings=44]="Tremolo_Strings",e[e.Pizzicato_Strings=45]="Pizzicato_Strings",e[e.Orchestral_Harp=46]="Orchestral_Harp",e[e.Timpani=47]="Timpani",e[e.String_Ensemble_1=48]="String_Ensemble_1",e[e.String_Ensemble_2=49]="String_Ensemble_2",e[e.Synth_Strings_1=50]="Synth_Strings_1",e[e.Synth_Strings_2=51]="Synth_Strings_2",e[e.Choir_Aahs=52]="Choir_Aahs",e[e.Voice_Oohs=53]="Voice_Oohs",e[e.Synth_Voice=54]="Synth_Voice",e[e.Orchestra_Hit=55]="Orchestra_Hit",e[e.Trumpet=56]="Trumpet",e[e.Trombone=57]="Trombone",e[e.Tuba=58]="Tuba",e[e.Muted_Trumpet=59]="Muted_Trumpet",e[e.French_Horn=60]="French_Horn",e[e.Brass_Section=61]="Brass_Section",e[e.Synth_Brass_1=62]="Synth_Brass_1",e[e.Synth_Brass_2=63]="Synth_Brass_2",e[e.Soprano_Sax=64]="Soprano_Sax",e[e.Alto_Sax=65]="Alto_Sax",e[e.Tenor_Sax=66]="Tenor_Sax",e[e.Baritone_Sax=67]="Baritone_Sax",e[e.Oboe=68]="Oboe",e[e.English_Horn=69]="English_Horn",e[e.Bassoon=70]="Bassoon",e[e.Clarinet=71]="Clarinet",e[e.Piccolo=72]="Piccolo",e[e.Flute=73]="Flute",e[e.Recorder=74]="Recorder",e[e.Pan_Flute=75]="Pan_Flute",e[e.Blown_Bottle=76]="Blown_Bottle",e[e.Shakuhachi=77]="Shakuhachi",e[e.Whistle=78]="Whistle",e[e.Ocarina=79]="Ocarina",e[e.Lead_1_square=80]="Lead_1_square",e[e.Lead_2_sawtooth=81]="Lead_2_sawtooth",e[e.Lead_3_calliope=82]="Lead_3_calliope",e[e.Lead_4_chiff=83]="Lead_4_chiff",e[e.Lead_5_charang=84]="Lead_5_charang",e[e.Lead_6_voice=85]="Lead_6_voice",e[e.Lead_7_fifths=86]="Lead_7_fifths",e[e.Lead_8_bass_lead=87]="Lead_8_bass_lead",e[e.Pad_1_new_age=88]="Pad_1_new_age",e[e.Pad_2_warm=89]="Pad_2_warm",e[e.Pad_3_polysynth=90]="Pad_3_polysynth",e[e.Pad_4_choir=91]="Pad_4_choir",e[e.Pad_5_bowed=92]="Pad_5_bowed",e[e.Pad_6_metallic=93]="Pad_6_metallic",e[e.Pad_7_halo=94]="Pad_7_halo",e[e.Pad_8_sweep=95]="Pad_8_sweep",e[e.FX_1_rain=96]="FX_1_rain",e[e.FX_2_soundtrack=97]="FX_2_soundtrack",e[e.FX_3_crystal=98]="FX_3_crystal",e[e.FX_4_atmosphere=99]="FX_4_atmosphere",e[e.FX_5_brightness=100]="FX_5_brightness",e[e.FX_6_goblins=101]="FX_6_goblins",e[e.FX_7_echoes=102]="FX_7_echoes",e[e.FX_8_scifi=103]="FX_8_scifi",e[e.Sitar=104]="Sitar",e[e.Banjo=105]="Banjo",e[e.Shamisen=106]="Shamisen",e[e.Koto=107]="Koto",e[e.Kalimba=108]="Kalimba",e[e.Bag_pipe=109]="Bag_pipe",e[e.Fiddle=110]="Fiddle",e[e.Shanai=111]="Shanai",e[e.Tinkle_Bell=112]="Tinkle_Bell",e[e.Agogo=113]="Agogo",e[e.Steel_Drums=114]="Steel_Drums",e[e.Woodblock=115]="Woodblock",e[e.Taiko_Drum=116]="Taiko_Drum",e[e.Melodic_Tom=117]="Melodic_Tom",e[e.Synth_Drum=118]="Synth_Drum",e[e.Reverse_Cymbal=119]="Reverse_Cymbal",e[e.Guitar_Fret_Noise=120]="Guitar_Fret_Noise",e[e.Breath_Noise=121]="Breath_Noise",e[e.Seashore=122]="Seashore",e[e.Bird_Tweet=123]="Bird_Tweet",e[e.Telephone_Ring=124]="Telephone_Ring",e[e.Helicopter=125]="Helicopter",e[e.Applause=126]="Applause",e[e.Gunshot=127]="Gunshot",e[e.Percussion=128]="Percussion"}(h||(t.MidiInstrument=h={}))},200:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RectangleF2D=void 0;const n=i(6864),s=i(9409);class r{constructor(e,t,i,n){this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=t,this.width=i,this.height=n}static createFromLocationAndSize(e,t){return new r(e.x,e.y,t.width,t.height)}get Location(){return new s.PointF2D(this.x,this.y)}get Size(){return new n.SizeF2D(this.width,this.height)}}t.RectangleF2D=r},242:(e,t)=>{"use strict";var i,n,s;Object.defineProperty(t,"__esModule",{value:!0}),t.PhonicScoreModes=t.MusicSymbolDrawingStyle=t.DrawingMode=void 0,function(e){e[e.All=0]="All",e[e.NoOverlays=1]="NoOverlays",e[e.Leadsheet=2]="Leadsheet"}(i||(t.DrawingMode=i={})),function(e){e[e.Normal=0]="Normal",e[e.Disabled=1]="Disabled",e[e.Selected=2]="Selected",e[e.Clickable=3]="Clickable",e[e.PlaybackSymbols=4]="PlaybackSymbols",e[e.FollowSymbols=5]="FollowSymbols",e[e.QFeedbackNotFound=6]="QFeedbackNotFound",e[e.QFeedbackOk=7]="QFeedbackOk",e[e.QFeedbackPerfect=8]="QFeedbackPerfect",e[e.Debug1=9]="Debug1",e[e.Debug2=10]="Debug2",e[e.Debug3=11]="Debug3"}(n||(t.MusicSymbolDrawingStyle=n={})),function(e){e[e.Following=0]="Following",e[e.Midi=1]="Midi",e[e.Manual=2]="Manual"}(s||(t.PhonicScoreModes=s={}))},298:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StaffLineActivitySymbol=void 0;const n=i(7741),s=i(6438);class r extends n.GraphicalObject{constructor(e){super(),this.parentStaffLine=e;const t=e.PositionAndShape;this.boundingBox=new s.BoundingBox(this,t),this.boundingBox.BorderRight=6,this.boundingBox.BorderBottom=4.5,this.boundingBox.BorderLeft=-1.5,this.boundingBox.BorderTop=-1.5}}t.StaffLineActivitySymbol=r},302:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(4127),t),s(i(9536),t),s(i(5984),t),s(i(6030),t),s(i(6302),t),s(i(7631),t),s(i(3186),t),s(i(1538),t)},348:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalStaffEntry=void 0;const n=i(6438),s=i(2561),r=i(7741),o=i(813),a=i(7921);class l extends r.GraphicalObject{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(),this.graphicalChordContainers=[],this.tabStaffEntry=void 0,this.MaxAccidentals=0,this.graphicalInstructions=[],this.ties=[],this.graphicalTies=[],this.lyricsEntries=[],this.parentMeasure=e,this.graphicalVoiceEntries=[],this.sourceStaffEntry=t,i?(this.staffEntryParent=i,this.parentVerticalContainer=i.parentVerticalContainer,this.PositionAndShape=new n.BoundingBox(this,i.PositionAndShape)):this.PositionAndShape=new n.BoundingBox(this,e.PositionAndShape),t&&(this.relInMeasureTimestamp=t.Timestamp),this.FingeringEntries=[]}get GraphicalInstructions(){return this.graphicalInstructions}get GraphicalTies(){return this.graphicalTies}get LyricsEntries(){return this.lyricsEntries}set LyricsEntries(e){this.lyricsEntries=e}getAbsoluteTimestamp(){const e=this.parentMeasure.parentSourceMeasure.AbsoluteTimestamp.clone();return this.relInMeasureTimestamp&&e.Add(this.relInMeasureTimestamp),e}findTieGraphicalNoteFromNote(e){for(const t of this.graphicalVoiceEntries)for(const i of t.notes){const t=i.sourceNote;if(!t.isRest()&&t.Pitch.FundamentalNote===e.Pitch.FundamentalNote&&t.Pitch.Octave===e.Pitch.Octave&&t.getAbsoluteTimestamp().Equals(e.getAbsoluteTimestamp()))return i}}findEndTieGraphicalNoteFromNoteWithStartingSlur(e,t){if(e)for(const i of this.graphicalVoiceEntries)if(i.parentVoiceEntry===e.ParentVoiceEntry)for(const e of i.notes){const i=e.sourceNote;if(i.NoteTie&&-1!==i.NoteSlurs.indexOf(t))return e}}findGraphicalNoteFromGraceNote(e){if(e)for(const t of this.graphicalVoiceEntries)if(t.parentVoiceEntry===e.ParentVoiceEntry)for(const i of t.notes)if(i.sourceNote===e)return i}findGraphicalNoteFromNote(e){if(e)for(const t of this.graphicalVoiceEntries)if(t.parentVoiceEntry===e.ParentVoiceEntry)for(const i of t.notes)if(i.sourceNote===e&&this.getAbsoluteTimestamp().Equals(e.getAbsoluteTimestamp()))return i}getGraphicalNoteDurationFromVoice(e){for(const t of this.graphicalVoiceEntries)if(t.parentVoiceEntry.ParentVoice===e)return t.notes[0].graphicalNoteLength;return new s.Fraction(0,1)}findVoiceEntryGraphicalNotes(e){for(const t of this.graphicalVoiceEntries)if(t.parentVoiceEntry===e)return t.notes}isVoiceEntryPartOfLinkedVoiceEntry(e){if(this.sourceStaffEntry.Link)for(let t=0,i=this.sourceStaffEntry.Link.LinkStaffEntries.length;t<i;++t){const i=this.sourceStaffEntry.Link.LinkStaffEntries[t];if(-1!==i.VoiceEntries.indexOf(e)&&i!==this.sourceStaffEntry)return!0}return!1}findStaffEntryMinNoteLength(){let e=new s.Fraction(Number.MAX_VALUE,1);for(const t of this.graphicalVoiceEntries)for(const i of t.notes){const t=i.graphicalNoteLength;t.lt(e)&&t.GetExpandedNumerator()>0&&(e=t)}return e}findStaffEntryMaxNoteLength(){let e=new s.Fraction(0,1);for(const t of this.graphicalVoiceEntries)for(const i of t.notes){const t=i.graphicalNoteLength;e.lt(t)&&t.GetExpandedNumerator()>0&&(e=t)}return e}findOrCreateGraphicalVoiceEntry(e){for(const i of this.graphicalVoiceEntries)if(i.parentVoiceEntry===e)return i;const t=a.MusicSheetCalculator.symbolFactory.createVoiceEntry(e,this);return this.graphicalVoiceEntries.push(t),t}findOrCreateGraphicalVoiceEntryFromGraphicalNote(e){for(const i of this.graphicalVoiceEntries)if(i===e.parentVoiceEntry)return i;const t=a.MusicSheetCalculator.symbolFactory.createVoiceEntry(e.sourceNote.ParentVoiceEntry,this);return this.graphicalVoiceEntries.push(t),t}addGraphicalNoteToListAtCorrectYPosition(e,t){const i=e.notes;if(0===i.length||t.PositionAndShape.RelativePosition.y<o.CollectionUtil.last(i).PositionAndShape.RelativePosition.y)i.push(t);else for(let n=i.length-1;n>=0;n--){if(i[n].PositionAndShape.RelativePosition.y>t.PositionAndShape.RelativePosition.y){i.splice(n+1,0,t);break}if(0===n){i.splice(0,0,t);break}}}hasOnlyRests(){return this.sourceStaffEntry.hasOnlyRests}getSkylineMin(){var e;const t=null===(e=this.parentMeasure)||void 0===e?void 0:e.ParentStaffLine.SkyBottomLineCalculator;if(!t)return;const[i,n]=this.getAbsoluteStartAndEnd();return t.getSkyLineMinInRange(i,n)}getHighestYAtEntry(){return this.parentMeasure.ParentStaffLine.PositionAndShape.AbsolutePosition.y+this.getSkylineMin()}getLowestYAtEntry(){return this.parentMeasure.ParentStaffLine.PositionAndShape.AbsolutePosition.y+this.getBottomlineMax()}getBottomlineMax(){var e;const t=null===(e=this.parentMeasure)||void 0===e?void 0:e.ParentStaffLine.SkyBottomLineCalculator;if(!t)return;const[i,n]=this.getAbsoluteStartAndEnd();return t.getBottomLineMaxInRange(i,n)}getAbsoluteStartAndEnd(){let e=this.PositionAndShape.AbsolutePosition.x;return e-=this.parentMeasure.ParentStaffLine.PositionAndShape.AbsolutePosition.x,[e,e+this.PositionAndShape.Size.width]}}t.GraphicalStaffEntry=l},363:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(8659),t)},427:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSheet=t.PlaybackSettings=void 0;const s=i(2561),r=i(9024),o=i(6001),a=i(7435),l=i(5534),c=i(8786),h=i(9713),u=i(2683),d=n(i(3065)),f=i(7533);class p{}t.PlaybackSettings=p;class m{constructor(){this.idString="uninitialized",this.sourceMeasures=[],this.repetitions=[],this.dynListStaves=[],this.timestampSortedDynamicExpressionsList=[],this.timestampSortedTempoExpressionsList=[],this.instrumentalGroups=[],this.instruments=[],this.musicPartManager=void 0,this.musicSheetErrors=new c.MusicSheetErrors,this.staves=[],this.transpose=0,this.defaultStartTempoInBpm=0,this.drawErroneousMeasures=!1,this.hasBeenOpenedForTheFirstTime=!1,this.currentEnrolledPosition=new s.Fraction(0,1),this.MeasureWidthFactor=1,this.IgnoreTempoInstructions=!1,this.playbackSettings=new p,this.playbackSettings.rhythm=new s.Fraction(4,4,0,!1),this.userStartTempoInBPM=100,this.pageWidth=120,this.MusicPartManager=new r.MusicPartManager(this),this.hasBPMInfo=!1}static getIndexFromStaff(e){return e.idInMusicSheet}get SourceMeasures(){return this.sourceMeasures}set SourceMeasures(e){this.sourceMeasures=e}get Repetitions(){return this.repetitions}set Repetitions(e){this.repetitions=e}get DynListStaves(){return this.dynListStaves}set TimestampSortedTempoExpressionsList(e){this.timestampSortedTempoExpressionsList=e}get TimestampSortedTempoExpressionsList(){return this.timestampSortedTempoExpressionsList}get TimestampSortedDynamicExpressionsList(){return this.timestampSortedDynamicExpressionsList}get InstrumentalGroups(){return this.instrumentalGroups}get Parts(){return this.instruments}get Instruments(){return this.instruments}get SheetPlaybackSetting(){return this.playbackSettings}set SheetPlaybackSetting(e){this.playbackSettings=e}get DrawErroneousMeasures(){return this.drawErroneousMeasures}set DrawErroneousMeasures(e){this.drawErroneousMeasures=e}get HasBeenOpenedForTheFirstTime(){return this.hasBeenOpenedForTheFirstTime}set HasBeenOpenedForTheFirstTime(e){this.hasBeenOpenedForTheFirstTime=e}InitializeStartTempoInBPM(e){this.userStartTempoInBPM=e}get DefaultStartTempoInBpm(){return this.defaultStartTempoInBpm}set DefaultStartTempoInBpm(e){this.defaultStartTempoInBpm=e,this.InitializeStartTempoInBPM(e)}get Path(){return this.path}set Path(e){this.path=e}get Staves(){return this.staves}get TitleString(){return this.title?this.title.text:""}set TitleString(e){this.Title=new a.Label(e)}get SubtitleString(){return this.subtitle?this.subtitle.text:""}set SubtitleString(e){this.Subtitle=new a.Label(e)}get ComposerString(){return this.composer?this.composer.text:""}set ComposerString(e){this.Composer=new a.Label(e)}get LyricistString(){return this.lyricist?this.lyricist.text:""}set LyricistString(e){this.Lyricist=new a.Label(e)}get CopyrightString(){return this.copyright?this.copyright.text:""}set CopyrightString(e){this.Copyright=new a.Label(e,f.TextAlignmentEnum.CenterBottom,void 0,!0)}get Title(){return this.title}set Title(e){this.title=e}get Subtitle(){return this.subtitle}set Subtitle(e){this.subtitle=e}get Composer(){return this.composer}set Composer(e){this.composer=e}get Lyricist(){return this.lyricist}set Lyricist(e){this.lyricist=e}get Copyright(){return this.copyright}set Copyright(e){this.copyright=e}get Rules(){return this.rules||(d.default.debug("warning: sheet.Rules was undefined. Creating new EngravingRules."),this.rules=new h.EngravingRules),this.rules}set Rules(e){this.rules=e}get SheetErrors(){return this.musicSheetErrors}get SelectionStart(){return this.selectionStart}set SelectionStart(e){this.selectionStart=e.clone(),this.currentEnrolledPosition=e.clone()}get SelectionEnd(){return this.selectionEnd}set SelectionEnd(e){this.selectionEnd=e}set HasBPMInfo(e){this.hasBPMInfo=e}get HasBPMInfo(){return this.hasBPMInfo}addMeasure(e){this.sourceMeasures.push(e),e.measureListIndex=this.sourceMeasures.length-1}checkForInstrumentWithNoVoice(){for(let e=0,t=this.instruments.length;e<t;++e){const t=this.instruments[e];if(0===t.Voices.length){const e=new l.Voice(t,1);t.Voices.push(e)}}}getStaffFromIndex(e){return this.staves[e]}fillStaffList(){let e=0;for(let t=0,i=this.instruments.length;t<i;++t){const i=this.instruments[t];for(let t=0,n=i.Staves.length;t<n;++t){const n=i.Staves[t];n.idInMusicSheet=e,this.staves.push(n),e++}}}get MusicPartManager(){return this.musicPartManager}set MusicPartManager(e){this.musicPartManager=e}getCompleteNumberOfStaves(){let e=0;for(let t=0,i=this.instruments.length;t<i;++t)e+=this.instruments[t].Staves.length;return e}getListOfMeasuresFromIndeces(e,t){const i=[];for(let n=e;n<=t;n++)i.push(this.sourceMeasures[n]);return i}getNextSourceMeasure(e){const t=this.sourceMeasures.indexOf(e);return t===this.sourceMeasures.length-1?e:this.sourceMeasures[t+1]}getFirstSourceMeasure(){return this.sourceMeasures[0]}getLastSourceMeasure(){return this.sourceMeasures[this.sourceMeasures.length-1]}resetAllNoteStates(){const e=this.MusicPartManager.getIterator();for(;!e.EndReached&&e.CurrentVoiceEntries;){for(let t=0,i=e.CurrentVoiceEntries.length;t<i;++t){const i=e.CurrentVoiceEntries[t];for(let e=0,t=i.Notes.length;e<t;++e)i.Notes[e].state=u.NoteState.Normal}e.moveToNext()}}getMusicSheetInstrumentIndex(e){return this.Instruments.indexOf(e)}getGlobalStaffIndexOfFirstStaff(e){const t=this.getMusicSheetInstrumentIndex(e);let i=0;for(let n=0;n<t;n++)i+=this.Instruments[n].Staves.length;return i}setRepetitionNewUserNumberOfRepetitions(e,t){let i=0;for(let n=0;n<this.repetitions.length;n++)if(this.repetitions[n]instanceof o.Repetition){if(e===i){this.repetitions[n].UserNumberOfRepetitions=t;break}i++}}getRepetitionByIndex(e){let t=0;for(let i=0;i<this.repetitions.length;i++)if(this.repetitions[i]instanceof o.Repetition){if(e===t)return this.repetitions[i];t++}}CompareTo(e){return this.Title.text.localeCompare(e.Title.text)}getExpressionsStartTempoInBPM(){if(this.TimestampSortedTempoExpressionsList.length>0){const e=this.TimestampSortedTempoExpressionsList[0];if(e.InstantaneousTempo)return e.InstantaneousTempo.TempoInBpm;if(e.ContinuousTempo)return e.ContinuousTempo.StartTempo}return this.userStartTempoInBPM}get Errors(){return this.musicSheetErrors.measureErrors}get FirstMeasureNumber(){try{return this.getFirstSourceMeasure().MeasureNumber}catch(e){return d.default.info("MusicSheet.FirstMeasureNumber: ",e),0}}get LastMeasureNumber(){try{return this.getLastSourceMeasure().MeasureNumber}catch(e){return d.default.info("MusicSheet.LastMeasureNumber: ",e),0}}get CurrentEnrolledPosition(){return this.currentEnrolledPosition.clone()}set CurrentEnrolledPosition(e){this.currentEnrolledPosition=e.clone()}get Transpose(){return this.transpose}set Transpose(e){this.transpose=e}get FullNameString(){return this.ComposerString+" "+this.TitleString}get IdString(){return this.idString}set IdString(e){this.idString=e}getEnrolledSelectionStartTimeStampWorkaround(){const e=this.MusicPartManager.getIterator(this.SelectionStart);return s.Fraction.createFromFraction(e.CurrentEnrolledTimestamp)}get SheetEndTimestamp(){const e=this.getLastSourceMeasure();return s.Fraction.plus(e.AbsoluteTimestamp,e.Duration)}getSourceMeasureFromTimeStamp(e){for(let t=0,i=this.sourceMeasures.length;t<i;++t){const i=this.sourceMeasures[t];for(let t=0,n=i.VerticalSourceStaffEntryContainers.length;t<n;++t){const n=i.VerticalSourceStaffEntryContainers[t];if(e.Equals(n.getAbsoluteTimestamp()))return i}}return this.findSourceMeasureFromTimeStamp(e)}findSourceMeasureFromTimeStamp(e){for(const t of this.sourceMeasures)if(t.AbsoluteTimestamp.lte(e)&&e.lt(s.Fraction.plus(t.AbsoluteTimestamp,t.Duration)))return t}getVisibleInstruments(){const e=[];for(let t=0,i=this.Instruments.length;t<i;++t){const i=this.Instruments[t];i.Voices.length>0&&i.Voices[0].Visible&&e.push(i)}return e}}t.MusicSheet=m,m.defaultTitle="defaultTitle"},437:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OctaveEnum=t.OctaveShift=void 0;const n=i(8233);var s;t.OctaveShift=class{constructor(e,t){this.numberXml=1,this.setOctaveShiftValue(e,t)}get Type(){return this.octaveValue}set Type(e){this.octaveValue=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get ParentStartMultiExpression(){return this.startMultiExpression}set ParentStartMultiExpression(e){this.startMultiExpression=e}get ParentEndMultiExpression(){return this.endMultiExpression}set ParentEndMultiExpression(e){this.endMultiExpression=e}setOctaveShiftValue(e,t){this.octaveValue=1===t&&"down"===e?s.VA8:1===t&&"up"===e?s.VB8:2===t&&"down"===e?s.MA15:2===t&&"up"===e?s.MB15:s.NONE}static getPitchFromOctaveShift(e,t){if(!e)return;if(e.OctaveShiftApplied)return e;let i=e.Octave;switch(t){case s.VA8:i-=1;break;case s.VB8:i+=1;break;case s.MA15:i-=2;break;case s.MB15:i+=2;break;case s.NONE:default:i+=0}const r=new n.Pitch(e.FundamentalNote,i,e.Accidental);return r.OctaveShiftApplied=!0,r}},function(e){e[e.VA8=0]="VA8",e[e.VB8=1]="VB8",e[e.MA15=2]="MA15",e[e.MB15=3]="MB15",e[e.NONE=4]="NONE"}(s||(t.OctaveEnum=s={}))},469:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceGenerator=void 0;const s=i(4249),r=i(5534),o=i(1336),a=i(1850),l=i(2369),c=i(8365),h=i(5274),u=i(2257),d=i(4268),f=i(2561),p=i(9767),m=i(6030),g=i(7307),b=i(8233),v=i(8233),y=i(6644),x=n(i(3065)),S=i(8233),E=i(813),w=i(4127),T=i(4064),_=i(4236),M=i(5282),P=i(9647),C=i(6362);t.VoiceGenerator=class{constructor(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.openBeams=[],this.beamNumberOffset=0,this.currentOctaveShift=0,this.tupletDict={},this.openTupletNumber=0,this.staff=t,this.instrument=t.ParentInstrument,this.musicSheet=this.instrument.GetMusicSheet,this.slurReader=n,this.pluginManager=e,this.voice=o?new s.LinkedVoice(this.instrument,i,o):new r.Voice(this.instrument,i),this.instrument.Voices.push(this.voice),this.staff.Voices.push(this.voice),this.lyricsReader=new m.LyricsReader(this.musicSheet),this.articulationReader=new w.ArticulationReader(this.musicSheet.Rules)}get openTieDict(){return this.staff.openTieDict}get GetVoice(){return this.voice}get OctaveShift(){return this.currentOctaveShift}set OctaveShift(e){this.currentOctaveShift=e}createVoiceEntry(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.currentVoiceEntry=new o.VoiceEntry(e.clone(),this.voice,t,n,s,r),i&&this.voice.VoiceEntries.push(this.currentVoiceEntry)}read(e,t,i,n,s,r,o,a,l,c,h,d,f,m,g,b,v,y,S,E,w){this.currentStaffEntry=o,this.currentMeasure=a;try{this.currentNote=r?this.addRestNote(e.element("rest"),t,n,i,s,f,m,S):this.addSingleNote(e,t,n,i,s,h,d,f,m,g,b,v,y,S,E),this.currentNote.DotsXml=w;const o=e.elements("lyric");void 0!==this.lyricsReader&&o&&(this.lyricsReader.addLyricEntry(o,this.currentVoiceEntry),this.voice.Parent.HasLyrics=!0);let a=!1;const p=e.element("notations");if(p){this.articulationReader&&this.readArticulations(p,this.currentVoiceEntry,this.currentNote);const t=p.elements("slur"),i=p.elements("slide"),n=p.elements("glissando");void 0!==this.slurReader&&(t.length>0||i.length>0)&&!this.currentNote.ParentVoiceEntry.IsGrace&&(this.slurReader.addSlur(t,this.currentNote),i.length>0&&this.slurReader.addSlur(i,this.currentNote),n.length>0&&this.slurReader.addSlur(n,this.currentNote));const s=p.elements("tuplet");s.length>0&&(this.openTupletNumber=this.addTuplet(e,s),a=!0);const r=p.element("arpeggiate");if(void 0!==r){let e;if(this.currentVoiceEntry.Arpeggio)e=this.currentVoiceEntry.Arpeggio;else{let t=!1;for(const i of this.currentStaffEntry.VoiceEntries)if(i.Arpeggio){t=!0,e=i.Arpeggio;break}if(!t){let t=_.ArpeggioType.ARPEGGIO_DIRECTIONLESS;const i=r.attribute("direction");if(i)switch(i.value){case"up":t=_.ArpeggioType.ROLL_UP;break;case"down":t=_.ArpeggioType.ROLL_DOWN;break;default:t=_.ArpeggioType.ARPEGGIO_DIRECTIONLESS}e=new _.Arpeggio(this.currentVoiceEntry,t),this.currentVoiceEntry.Arpeggio=e}}e.addNote(this.currentNote)}const o=p.elements("tied");o.length>0&&this.addTie(o,l,c,u.TieTypes.SIMPLE);const h=p.element("technical");if(h){const e=h.elements("hammer-on");e.length>0&&this.addTie(e,l,c,u.TieTypes.HAMMERON);const t=h.elements("pull-off");t.length>0&&this.addTie(t,l,c,u.TieTypes.PULLOFF)}}void 0===e.element("time-modification")||a||this.handleTimeModificationNode(e)}catch(e){x.default.warn(e);const t=p.ITextTranslation.translateText("ReaderErrorMessages/NoteError","Ignored erroneous Note.");this.musicSheet.SheetErrors.pushMeasureError(t),this.musicSheet.SheetErrors.pushMeasureError(e)}return this.currentNote}checkForStaffEntryLink(e,t,i,n){const s=new y.StaffEntryLink(this.currentVoiceEntry);s.LinkStaffEntries.push(i),i.Link=s;const r=this.currentVoiceEntry.Timestamp.clone(),o=n.getVerticalContainerByTimestamp(r);return(i=o.StaffEntries[e])||(i=new l.SourceStaffEntry(o,t),o.StaffEntries[e]=i),i.VoiceEntries.push(this.currentVoiceEntry),s.LinkStaffEntries.push(i),i.Link=s,i}checkForOpenBeam(){this.openBeams.length>0&&this.currentNote&&this.handleOpenBeam()}checkOpenTies(){const e=this.openTieDict;for(const t in e)if(e.hasOwnProperty(t)){const i=e[t];f.Fraction.plus(i.StartNote.ParentStaffEntry.Timestamp,i.Duration).lt(i.StartNote.SourceMeasure.Duration)&&delete e[t]}}hasVoiceEntry(){return void 0!==this.currentVoiceEntry}readArticulations(e,t,i){const n=e.element("articulations");n&&this.articulationReader.addArticulationExpression(n,t);const s=e.element("fermata");s&&this.articulationReader.addFermata(s,t);const r=e.element("technical");r&&this.articulationReader.addTechnicalArticulations(r,t,i);const o=e.element("ornaments");o&&this.articulationReader.addOrnament(o,t)}addSingleNote(e,t,i,n,s,r,l,c,h,u,d,m,y,E,w){let _,M,C,A,N=0,L=b.AccidentalEnum.NONE,k=v.NoteEnum.C,I=v.NoteEnum.C,R=0,O=0;const D=e.elements();for(let o=0,a=D.length;o<a;++o){const t=D[o];try{if("pitch"===t.name){const i=t.elements();for(let t=0,n=i.length;t<n;++t){const n=i[t];C=void 0,A=void 0;try{if("step"===n.name){if(k=v.NoteEnum[n.value],void 0===k){const e=p.ITextTranslation.translateText("ReaderErrorMessages/NotePitchError","Invalid pitch while reading note.");throw this.musicSheet.SheetErrors.pushMeasureError(e),new g.MusicSheetReadingException(e,void 0)}}else if("alter"===n.name){if(N=parseFloat(n.value),isNaN(N)){const e=p.ITextTranslation.translateText("ReaderErrorMessages/NoteAlterationError","Invalid alteration while reading note.");throw this.musicSheet.SheetErrors.pushMeasureError(e),new g.MusicSheetReadingException(e,void 0)}L=S.Pitch.AccidentalFromHalfTones(N)}else if("octave"===n.name&&(R=parseInt(n.value,10),isNaN(R))){const e=p.ITextTranslation.translateText("ReaderErrorMessages/NoteOctaveError","Invalid octave value while reading note.");throw this.musicSheet.SheetErrors.pushMeasureError(e),new g.MusicSheetReadingException(e,void 0)}}catch(e){x.default.info("VoiceGenerator.addSingleNote read Step: ",e.message)}}}else if("accidental"===t.name)_=t.value,"natural"===_?L=b.AccidentalEnum.NATURAL:"slash-flat"===_?L=b.AccidentalEnum.SLASHFLAT:"slash-quarter-sharp"===_?L=b.AccidentalEnum.SLASHQUARTERSHARP:"slash-sharp"===_?L=b.AccidentalEnum.SLASHSHARP:"double-slash-flat"===_?L=b.AccidentalEnum.DOUBLESLASHFLAT:"sori"===_?L=b.AccidentalEnum.SORI:"koron"===_&&(L=b.AccidentalEnum.KORON);else if("unpitched"===t.name){const e=t.element("display-step"),i=t.element("display-octave");if(i&&(R=parseInt(i.value,10),O=R-3,l&&(R+=1),1===this.instrument.Staves[0].StafflineCount&&(O+=1)),e){k=v.NoteEnum[e.value.toUpperCase()];let t=0,i=this.musicSheet.Rules.PercussionXMLDisplayStepNoteValueShift;1===this.instrument.Staves[0].StafflineCount&&(i-=3),[I,t]=S.Pitch.lineShiftFromNoteEnum(k,i),O+=t}}else"instrument"===t.name?t.firstAttribute&&(M=t.firstAttribute.value):"notehead"===t.name&&(C=t.value,t.attribute("filled")&&(A="yes"===t.attribute("filled").value))}catch(e){x.default.info("VoiceGenerator.addSingleNote: ",e)}}R-=S.Pitch.OctaveXmlDifference;const B=new S.Pitch(k,R,L,_),F=f.Fraction.createFromFraction(t);let V,j=-1,G=-1;const W=[],z=e.element("notations");if(z){const e=z.element("technical");if(e){const t=e.element("string");t&&(j=parseInt(t.value,10));const i=e.element("fret");i&&(G=parseInt(i.value,10)),e.elements("bend").forEach((function(e){const t=e.element("bend-alter");void 0!==e.element("release")?W.push({bendalter:parseInt(t.value,10),direction:"down"}):W.push({bendalter:parseInt(t.value,10),direction:"up"})}))}}return V=j<0||G<0?new a.Note(this.currentVoiceEntry,this.currentStaffEntry,F,B,this.currentMeasure):new P.TabNote(this.currentVoiceEntry,this.currentStaffEntry,F,B,this.currentMeasure,j,G,W,w),this.addNoteInfo(V,i,c,h,s,I,O,E,E),V.TypeLength=n,V.IsGraceNote=u,V.StemDirectionXml=d,V.TremoloInfo=m,V.PlaybackInstrumentId=M,(void 0!==C&&"normal"!==C||void 0!==A)&&(V.Notehead=new T.Notehead(V,C,A)),d===o.StemDirectionType.None&&(y="#00000000"),this.currentVoiceEntry.Notes.push(V),this.currentVoiceEntry.StemDirectionXml=d,y&&(this.currentVoiceEntry.StemColorXml=y,this.currentVoiceEntry.StemColor=y,V.StemColorXml=y),e.elements("beam")&&!r&&this.createBeam(e,V),V}addRestNote(e,t,i,n,s,r,o,l){const c=f.Fraction.createFromFraction(t),h=e.element("display-step"),u=e.element("display-octave");let d,p,m;h&&u&&(d=v.NoteEnum[h.value.toUpperCase()],p=parseInt(u.value,10),m=new S.Pitch(d,p,b.AccidentalEnum.NONE,void 0,!0));const g=new a.Note(this.currentVoiceEntry,this.currentStaffEntry,c,m,this.currentMeasure,!0);return this.addNoteInfo(g,i,r,o,s,d,p,l,l),g.TypeLength=n,this.currentVoiceEntry.Notes.push(g),this.openBeams.length>0&&this.openBeams.last().ExtendedNoteList.push(g),g}addNoteInfo(e,t,i,n,s,r,o,a,l){e.NoteTypeXml=t,e.PrintObject=i,e.IsCueNote=n,e.NormalNotes=s,e.displayStepUnpitched=r,e.displayOctaveUnpitched=o,e.NoteheadColorXml=a,e.NoteheadColor=a}createBeam(e,t){try{const n=e.element("beam");let s;if(void 0!==n&&n.hasAttributes&&(s=n.attribute("number")),s){var i;let n=parseInt(s.value,10);const r=e.elements("beam"),o=r[0].value;r&&("begin"===o?(n===(null===(i=this.openBeams.last())||void 0===i?void 0:i.BeamNumber)?(this.beamNumberOffset++,n+=this.beamNumberOffset):this.openBeams.last()&&this.handleOpenBeam(),this.openBeams.push(new c.Beam(n,this.beamNumberOffset))):n+=this.beamNumberOffset);let a=!1;if(!(n>0&&n<=this.openBeams.length&&this.openBeams[n-1]))return void x.default.debug("[OSMD] invalid beamnumber");for(let e=0,t=this.openBeams[n-1].Notes.length;e<t;++e){const t=this.openBeams[n-1].Notes[e];this.currentVoiceEntry===t.ParentVoiceEntry&&(a=!0)}a||(this.openBeams[n-1].addNoteToBeam(t),"end"===o&&this.endBeam())}}catch(e){const t=p.ITextTranslation.translateText("ReaderErrorMessages/BeamError","Error while reading beam.");throw this.musicSheet.SheetErrors.pushMeasureError(t),new g.MusicSheetReadingException("",e)}}endBeam(){this.openBeams.pop(),this.beamNumberOffset=Math.max(0,this.beamNumberOffset-1)}handleOpenBeam(){const e=this.openBeams.last();if(0!==e.Notes.length){if(1===e.Notes.length)return e.Notes[0].NoteBeam=void 0,void this.endBeam();if(this.currentNote===E.CollectionUtil.last(e.Notes))this.endBeam();else{const t=E.CollectionUtil.last(e.Notes).ParentStaffEntry,i=this.currentMeasure.getVerticalContainerIndexByTimestamp(t.Timestamp),n=t.VerticalContainerParent.StaffEntries.indexOf(t);if(i<this.currentMeasure.VerticalSourceStaffEntryContainers.length-1){const e=this.currentMeasure.VerticalSourceStaffEntryContainers[i+1].StaffEntries[n];if(e)for(let t=0,i=e.VoiceEntries.length;t<i;++t){const i=e.VoiceEntries[t];if(i.ParentVoice===this.voice){const e=i.Notes[0];e.Length.lte(new f.Fraction(1,8))?(this.openBeams.last().addNoteToBeam(e),this.endBeam()):this.endBeam()}}}else this.endBeam()}}else this.endBeam()}addTuplet(e,t){let i,n=!1;if(void 0!==t&&t.length>1){let s=e.element("time-modification");s&&(s=s.element("actual-notes"));const r=t;for(let t=0,a=r.length;t<a;++t){const a=r[t];if(void 0!==a&&a.attributes()){const t=a.attribute("bracket");t&&"yes"===t.value?(n=!0,i=!0):t&&"no"===t.value&&(i=!1);let r=this.musicSheet.Rules.TupletsRatioed;const l=a.attribute("show-number");l&&"both"===l.value&&this.musicSheet.Rules.TupletsRatioedUseXMLValue&&(r=!0);const c=this.readShowNumberNoneGiven(a),h=a.attribute("type");if(h&&"start"===h.value){let t=1;a.attribute("number")&&(t=parseInt(a.attribute("number").value,10));let o=0;if(s&&(o=parseInt(s.value,10),isNaN(o))){const e=p.ITextTranslation.translateText("ReaderErrorMessages/TupletNoteDurationError","Invalid tuplet note duration.");throw this.musicSheet.SheetErrors.pushMeasureError(e),new g.MusicSheetReadingException(e,void 0)}const l=new d.Tuplet(o,n);l.Ratioed=r,l.BracketedXmlValue=i,l.ShowNumberNoneGivenInXml=c,l.tupletLabelNumberPlacement=C.PlacementEnum.Above;const h=a.attribute("placement");h&&("below"===h.value&&(l.tupletLabelNumberPlacement=C.PlacementEnum.Below),l.PlacementFromXml=!0),this.tupletDict[t]&&(delete this.tupletDict[t],0===Object.keys(this.tupletDict).length?this.openTupletNumber=0:Object.keys(this.tupletDict).length>1&&this.openTupletNumber--),this.tupletDict[t]=l;const u=[];u.push(this.currentNote),l.Notes.push(u),l.Fractions.push(this.getTupletNoteDurationFromType(e)),this.currentNote.NoteTuplet=l,this.openTupletNumber=t}else if("stop"===h.value){let t=1;a.attribute("number")&&(t=parseInt(a.attribute("number").value,10));const i=this.tupletDict[t];if(i){const n=a.attribute("placement");n&&("below"===n.value?i.tupletLabelNumberPlacement=C.PlacementEnum.Below:i.tupletLabelNumberPlacement=C.PlacementEnum.Above,i.PlacementFromXml=!0);const s=[];if(s.push(this.currentNote),i.Notes.push(s),!i.PlacementFromXml){let e=!1;for(const t of i.Notes){for(const n of t)if(!n.isRest()){n.StemDirectionXml===o.StemDirectionType.Down?i.tupletLabelNumberPlacement=C.PlacementEnum.Below:i.tupletLabelNumberPlacement=C.PlacementEnum.Above,e=!0;break}if(e)break}}i.Fractions.push(this.getTupletNoteDurationFromType(e)),this.currentNote.NoteTuplet=i,delete this.tupletDict[t],0===Object.keys(this.tupletDict).length?this.openTupletNumber=0:Object.keys(this.tupletDict).length>1&&this.openTupletNumber--}}}}}else if(t[0]){const s=t[0];if(s.hasAttributes){const t=s.attribute("type").value;let r=1;s.attribute("number")&&(r=parseInt(s.attribute("number").value,10));const a=isNaN(r),l=this.readShowNumberNoneGiven(s),c=s.attribute("bracket");c&&"yes"===c.value?(n=!0,i=!0):c&&"no"===c.value&&(i=!1);let h=this.musicSheet.Rules.TupletsRatioed;const u=s.attribute("show-number");if(u&&"both"===u.value&&this.musicSheet.Rules.TupletsRatioedUseXMLValue&&(h=!0),"start"===t){let t=0,o=e.element("time-modification");if(o&&(o=o.element("actual-notes")),o&&(t=parseInt(o.value,10),isNaN(t))){const e=p.ITextTranslation.translateText("ReaderErrorMessages/TupletNoteDurationError","Invalid tuplet note duration.");throw this.musicSheet.SheetErrors.pushMeasureError(e),new g.MusicSheetReadingException(e)}a&&(this.openTupletNumber++,r=this.openTupletNumber);let c=this.tupletDict[r];c||(c=this.tupletDict[r]=new d.Tuplet(t,n),c.Ratioed=h,c.BracketedXmlValue=i,c.ShowNumberNoneGivenInXml=l,c.tupletLabelNumberPlacement=C.PlacementEnum.Above);const u=s.attribute("placement");u&&("below"===u.value?c.tupletLabelNumberPlacement=C.PlacementEnum.Below:c.tupletLabelNumberPlacement=C.PlacementEnum.Above,c.PlacementFromXml=!0);const f=[];f.push(this.currentNote),c.Notes.push(f),c.Fractions.push(this.getTupletNoteDurationFromType(e)),this.currentNote.NoteTuplet=c,this.openTupletNumber=r}else if("stop"===t){a&&(r=this.openTupletNumber);const t=this.tupletDict[this.openTupletNumber];if(t){const i=s.attribute("placement");i&&("below"===i.value?t.tupletLabelNumberPlacement=C.PlacementEnum.Below:t.tupletLabelNumberPlacement=C.PlacementEnum.Above,t.PlacementFromXml=!0);const n=[];if(n.push(this.currentNote),t.Notes.push(n),!t.PlacementFromXml){let e=!1;for(const i of t.Notes){for(const n of i)if(!n.isRest()){n.StemDirectionXml===o.StemDirectionType.Down?t.tupletLabelNumberPlacement=C.PlacementEnum.Below:t.tupletLabelNumberPlacement=C.PlacementEnum.Above,e=!0;break}if(e)break}}t.Fractions.push(this.getTupletNoteDurationFromType(e)),this.currentNote.NoteTuplet=t,0===Object.keys(this.tupletDict).length?this.openTupletNumber=0:Object.keys(this.tupletDict).length>1&&this.openTupletNumber--,delete this.tupletDict[r]}}}}return this.openTupletNumber}readShowNumberNoneGiven(e){const t=e.attribute("show-number");return!(null===t||void 0===t||!t.value||"none"!==t.value)}handleTimeModificationNode(e){if(this.tupletDict[this.openTupletNumber])try{const t=this.tupletDict[this.openTupletNumber],i=E.CollectionUtil.last(t.Notes);let n;i[0].ParentVoiceEntry.Timestamp.Equals(this.currentVoiceEntry.Timestamp)?n=i:(n=[],t.Notes.push(n),t.Fractions.push(this.getTupletNoteDurationFromType(e))),n.push(this.currentNote),this.currentNote.NoteTuplet=t}catch(e){const t=p.ITextTranslation.translateText("ReaderErrorMessages/TupletNumberError","Invalid tuplet number.");throw this.musicSheet.SheetErrors.pushMeasureError(t),e}else if(this.currentVoiceEntry.Notes.length>0){const e=this.currentVoiceEntry.Notes[0];if(e.NoteTuplet){const t=e.NoteTuplet;E.CollectionUtil.last(t.Notes).push(this.currentNote),this.currentNote.NoteTuplet=t}}}addTie(e,t,i,n){if(e)if(1===e.length){const t=e[0];if(void 0!==t&&t.attributes()){const i=this.getTieDirection(t),s=t.attribute("type").value;try{if("start"===s){const e=this.findCurrentNoteInTieDict(this.currentNote);e<0&&delete this.openTieDict[e];const t=this.getNextAvailableNumberForTie(),s=new h.Tie(this.currentNote,n);this.openTieDict[t]=s,s.TieNumber=t,s.TieDirection=i}else if("stop"===s){const e=this.findCurrentNoteInTieDict(this.currentNote),t=this.openTieDict[e];t&&(t.AddNote(this.currentNote),delete this.openTieDict[e])}}catch(e){const t=p.ITextTranslation.translateText("ReaderErrorMessages/TieError","Error while reading tie.");this.musicSheet.SheetErrors.pushMeasureError(t)}}}else if(2===e.length){const t=this.findCurrentNoteInTieDict(this.currentNote);if(t>=0){const i=this.openTieDict[t];i.AddNote(this.currentNote);for(const t of e)if("start"===t.attribute("type").value){const e=this.getTieDirection(t);i.NoteIndexToTieDirection[i.Notes.length-1]=e}}}}getTieDirection(e){let t=C.PlacementEnum.NotYetDefined;const i=e.attribute("placement");i&&("above"===i.value?t=C.PlacementEnum.Above:"below"===i.value&&(t=C.PlacementEnum.Below));const n=e.attribute("orientation");return n&&("over"===n.value?t=C.PlacementEnum.Above:"under"===n.value&&(t=C.PlacementEnum.Below)),t}getNextAvailableNumberForTie(){const e=Object.keys(this.openTieDict);if(0===e.length)return 1;e.sort(((e,t)=>+e-+t));for(let t=0;t<e.length;t++)if(""+(t+1)!==e[t])return t+1;return+e[e.length-1]+1}findCurrentNoteInTieDict(e){const t=this.openTieDict;for(const i in t)if(t.hasOwnProperty(i)){const n=t[i],s=n.Notes[0],r=e;if(n.Pitch.FundamentalNote===e.Pitch.FundamentalNote&&n.Pitch.Octave===e.Pitch.Octave)return parseInt(i,10);if(void 0!==s.StringNumberTab&&s.StringNumberTab===r.StringNumberTab)return parseInt(i,10)}return-1}getTupletNoteDurationFromType(e){if(e.element("type")){const t=e.element("type");if(t){const i=t.value;try{return M.NoteTypeHandler.getNoteDurationFromType(i)}catch(e){const t=p.ITextTranslation.translateText("ReaderErrorMessages/NoteDurationError","Invalid note duration.");throw this.musicSheet.SheetErrors.pushMeasureError(t),new g.MusicSheetReadingException("",e)}}}}}},474:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MusicPartManagerIterator=void 0;const s=i(2561),r=i(1110),o=i(9288),a=i(5875),l=n(i(3065));class c{constructor(e,t,i){this.currentMeasureIndex=0,this.currentPartIndex=0,this.currentVoiceEntryIndex=-1,this.currentDynamicEntryIndex=0,this.currentTempoEntryIndex=0,this.currentDynamicChangingExpressions=[],this.currentRepetition=void 0,this.endReached=!1,this.frontReached=!1,this.currentTimeStamp=new s.Fraction(0,1),this.currentEnrolledMeasureTimestamp=new s.Fraction(0,1),this.currentRelativeInMeasureTimestamp=new s.Fraction(0,1),this.currentVerticalContainerInMeasureTimestamp=new s.Fraction(0,1),this.jumpResponsibleRepetition=void 0,this.activeDynamicExpressions=[],this.SkipInvisibleNotes=!0;try{this.frontReached=!0,this.musicSheet=e,this.currentBpm=e.userStartTempoInBPM,this.currentVoiceEntries=void 0,this.frontReached=!1;for(const e of this.musicSheet.Repetitions)this.setRepetitionIterationCount(e,1);if(this.activeDynamicExpressions=new Array(this.musicSheet.getCompleteNumberOfStaves()),this.currentMeasure=this.musicSheet.SourceMeasures[0],!t)return;do{this.moveToNext()}while((!this.currentVoiceEntries||this.currentTimeStamp.lt(t))&&!this.endReached);for(let e=0;e<this.activeDynamicExpressions.length;e++)if(this.activeDynamicExpressions[e])if(this.activeDynamicExpressions[e]instanceof a.ContinuousDynamicExpression){const t=this.activeDynamicExpressions[e];this.currentDynamicChangingExpressions.push(new r.DynamicsContainer(t,e))}else{const t=this.activeDynamicExpressions[e];this.currentDynamicChangingExpressions.push(new r.DynamicsContainer(t,e))}this.currentTempoChangingExpression=this.activeTempoExpression}catch(e){l.default.info("MusicPartManagerIterator: "+e)}}get EndReached(){return this.endReached}get FrontReached(){return this.frontReached}get CurrentMeasure(){return this.currentMeasure}get CurrentRepetition(){return this.currentRepetition}get CurrentRepetitionIteration(){return this.CurrentRepetition?this.getRepetitionIterationCount(this.CurrentRepetition):0}get CurrentJumpResponsibleRepetitionIterationBeforeJump(){return this.jumpResponsibleRepetition?this.getRepetitionIterationCount(this.jumpResponsibleRepetition)-1:0}get CurrentBpm(){return this.currentBpm}get CurrentVoiceEntries(){return this.currentVoiceEntries}get CurrentMeasureIndex(){return this.currentMeasureIndex}get CurrentEnrolledTimestamp(){return s.Fraction.plus(this.currentEnrolledMeasureTimestamp,this.currentVerticalContainerInMeasureTimestamp)}get CurrentSourceTimestamp(){return this.currentTimeStamp}get CurrentRelativeInMeasureTimestamp(){return this.currentRelativeInMeasureTimestamp}get JumpOccurred(){return this.backJumpOccurred||this.forwardJumpOccurred}get ActiveTempoExpression(){return this.activeTempoExpression}get ActiveDynamicExpressions(){return this.activeDynamicExpressions}get CurrentTempoChangingExpression(){return this.currentTempoChangingExpression}get JumpResponsibleRepetition(){return this.jumpResponsibleRepetition}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const i=new c(this.musicSheet,null!==e&&void 0!==e?e:this.currentTimeStamp,t);return i.currentVoiceEntryIndex=this.currentVoiceEntryIndex,i.currentMappingPart=this.currentMappingPart,i.currentPartIndex=this.currentPartIndex,i.currentVoiceEntries=this.currentVoiceEntries,i.endReached=this.endReached,i.frontReached=this.frontReached,i}CurrentVisibleVoiceEntries(e){const t=[];if(!this.currentVoiceEntries)return t;if(e){for(const i of this.currentVoiceEntries)i.ParentVoice.Parent.IdString===e.IdString&&this.getVisibleEntries(i,t);return t}for(const i of this.currentVoiceEntries)this.getVisibleEntries(i,t);return t}CurrentAudibleVoiceEntries(e){const t=[];if(!this.currentVoiceEntries)return t;if(e){for(const i of this.currentVoiceEntries)if(i.ParentVoice.Parent.IdString===e.IdString)return this.getAudibleEntries(i,t),t}else for(const i of this.currentVoiceEntries)this.getAudibleEntries(i,t);return t}getCurrentDynamicChangingExpressions(){return this.currentDynamicChangingExpressions}CurrentScoreFollowingVoiceEntries(e){const t=[];if(!this.currentVoiceEntries)return t;if(e){for(const i of this.currentVoiceEntries)if(i.ParentVoice.Parent.IdString===e.IdString)return this.getScoreFollowingEntries(i,t),t}else for(const i of this.currentVoiceEntries)this.getScoreFollowingEntries(i,t);return t}moveToPrevious(){this.frontReached||(this.currentVoiceEntries&&(this.currentVoiceEntries=[]),this.recursiveMoveBack())}moveToPreviousVisibleVoiceEntry(e){for(;!this.frontReached;)if(this.moveToPrevious(),this.checkEntries(e))return}moveToNext(){if(this.forwardJumpOccurred=this.backJumpOccurred=!1,!this.endReached&&(this.frontReached&&(this.frontReached=!1,this.currentVoiceEntryIndex=-1),this.currentVoiceEntries&&(this.currentVoiceEntries=[]),this.recursiveMove(),this.currentMeasure||(this.currentTimeStamp=new s.Fraction(99999,1),this.currentMeasure=this.musicSheet.SourceMeasures.last()),void 0!==this.CurrentTempoChangingExpression&&!this.musicSheet.IgnoreTempoInstructions&&void 0!==this.CurrentTempoChangingExpression.InstantaneousTempo&&!this.musicSheet.IgnoreTempoInstructions)){const e=this.CurrentTempoChangingExpression.InstantaneousTempo.TempoInBpm;e>0&&(this.currentBpm=e)}}moveToNextVisibleVoiceEntry(e){for(;!this.endReached;)if(this.moveToNext(),this.checkEntries(e))return}resetRepetitionIterationCount(e){return this.setRepetitionIterationCount(e,1),1}incrementRepetitionIterationCount(e){return-1===this.repetitionIterationCountDictKeys.indexOf(e)?this.setRepetitionIterationCount(e,1):this.setRepetitionIterationCount(e,this.getRepetitionIterationCount(e)+1)}setRepetitionIterationCount(e,t){const i=this.repetitionIterationCountDictKeys.indexOf(e);return-1===i?(this.repetitionIterationCountDictKeys.push(e),this.repetitionIterationCountDictValues.push(t)):this.repetitionIterationCountDictValues[i]=t,t}getRepetitionIterationCount(e){const t=this.repetitionIterationCountDictKeys.indexOf(e);if(-1!==t)return this.repetitionIterationCountDictValues[t]}handleRepetitionsAtMeasureBegin(){for(let e=0,t=this.currentMeasure.FirstRepetitionInstructions.length;e<t;++e){const t=this.currentMeasure.FirstRepetitionInstructions[e];if(!t.parentRepetition)continue;const i=t.parentRepetition;this.currentRepetition=i,i.StartIndex===this.currentMeasureIndex&&void 0!==this.JumpResponsibleRepetition&&i!==this.JumpResponsibleRepetition&&i.StartIndex>=this.JumpResponsibleRepetition.StartIndex&&i.EndIndex<=this.JumpResponsibleRepetition.EndIndex&&this.resetRepetitionIterationCount(i)}}handleRepetitionsAtMeasureEnd(){for(let e=0,t=this.currentMeasure.LastRepetitionInstructions.length;e<t;++e){const t=this.currentMeasure.LastRepetitionInstructions[e],i=t.parentRepetition;if(i){if(i.BackwardJumpInstructions.indexOf(t)>-1&&this.getRepetitionIterationCount(i)<i.UserNumberOfRepetitions)return this.doBackJump(i),void(this.backJumpOccurred=!0);if(t===i.forwardJumpInstruction){void 0!==this.JumpResponsibleRepetition&&i!==this.JumpResponsibleRepetition&&i.StartIndex>=this.JumpResponsibleRepetition.StartIndex&&i.EndIndex<=this.JumpResponsibleRepetition.EndIndex&&this.resetRepetitionIterationCount(i);const e=i.getForwardJumpTargetForIteration(this.getRepetitionIterationCount(i));if(e>=0)return this.currentMeasureIndex=e,this.currentMeasure=this.musicSheet.SourceMeasures[this.currentMeasureIndex],this.currentVoiceEntryIndex=-1,this.jumpResponsibleRepetition=i,void(this.forwardJumpOccurred=!0);-2===e&&(this.endReached=!0)}}}this.currentMeasureIndex++,void 0!==this.JumpResponsibleRepetition&&this.currentMeasureIndex>this.JumpResponsibleRepetition.EndIndex&&(this.jumpResponsibleRepetition=void 0)}doBackJump(e){this.currentMeasureIndex=e.getBackwardJumpTarget(),this.currentMeasure=this.musicSheet.SourceMeasures[this.currentMeasureIndex],this.currentVoiceEntryIndex=-1,this.incrementRepetitionIterationCount(e),this.jumpResponsibleRepetition=e}activateCurrentRhythmInstructions(){if(void 0!==this.currentMeasure&&this.currentMeasure.FirstInstructionsStaffEntries.length>0&&void 0!==this.currentMeasure.FirstInstructionsStaffEntries[0]){const e=this.currentMeasure.FirstInstructionsStaffEntries[0].Instructions;for(let t=0,i=e.length;t<i;++t){const i=e[t];i instanceof o.RhythmInstruction&&(this.musicSheet.SheetPlaybackSetting.rhythm=i.Rhythm)}}}activateCurrentDynamicOrTempoInstructions(){const e=this.musicSheet.TimestampSortedDynamicExpressionsList;for(;this.currentDynamicEntryIndex>0&&(this.currentDynamicEntryIndex>=e.length||e[this.currentDynamicEntryIndex].parMultiExpression().AbsoluteTimestamp.gte(this.CurrentSourceTimestamp));)this.currentDynamicEntryIndex--;for(;this.currentDynamicEntryIndex<e.length&&e[this.currentDynamicEntryIndex].parMultiExpression().AbsoluteTimestamp.lt(this.CurrentSourceTimestamp);)this.currentDynamicEntryIndex++;for(;this.currentDynamicEntryIndex<e.length&&e[this.currentDynamicEntryIndex].parMultiExpression().AbsoluteTimestamp.Equals(this.CurrentSourceTimestamp);){const t=e[this.currentDynamicEntryIndex],i=t.staffNumber;this.CurrentSourceTimestamp.Equals(t.parMultiExpression().AbsoluteTimestamp)&&(t.continuousDynamicExpression?this.activeDynamicExpressions[i]=t.continuousDynamicExpression:t.instantaneousDynamicExpression&&(this.activeDynamicExpressions[i]=t.instantaneousDynamicExpression)),this.currentDynamicEntryIndex++}this.currentDynamicChangingExpressions.length=0;for(let i=0;i<this.activeDynamicExpressions.length;i++)if(this.activeDynamicExpressions[i]){let e,t;if(this.activeDynamicExpressions[i]instanceof a.ContinuousDynamicExpression){const n=this.activeDynamicExpressions[i];e=n.StartMultiExpression.AbsoluteTimestamp,t=n.EndMultiExpression.AbsoluteTimestamp,this.CurrentSourceTimestamp.gte(e)&&this.CurrentSourceTimestamp.lte(t)&&this.currentDynamicChangingExpressions.push(new r.DynamicsContainer(n,i))}else{const e=this.activeDynamicExpressions[i];this.CurrentSourceTimestamp.Equals(e.ParentMultiExpression.AbsoluteTimestamp)&&this.currentDynamicChangingExpressions.push(new r.DynamicsContainer(e,i))}}const t=this.musicSheet.TimestampSortedTempoExpressionsList;for(;this.currentTempoEntryIndex>0&&(this.currentTempoEntryIndex>=t.length||t[this.currentTempoEntryIndex].AbsoluteTimestamp.gte(this.CurrentSourceTimestamp));)this.currentTempoEntryIndex--;for(;this.currentTempoEntryIndex<t.length&&t[this.currentTempoEntryIndex].AbsoluteTimestamp.lt(this.CurrentSourceTimestamp);)this.currentTempoEntryIndex++;for(;this.currentTempoEntryIndex<t.length&&t[this.currentTempoEntryIndex].AbsoluteTimestamp.Equals(this.CurrentSourceTimestamp);)this.activeTempoExpression=t[this.currentTempoEntryIndex],this.currentTempoEntryIndex++;if(this.currentTempoChangingExpression=void 0,this.activeTempoExpression){let e=this.activeTempoExpression.AbsoluteTimestamp;this.activeTempoExpression.ContinuousTempo&&(e=this.activeTempoExpression.ContinuousTempo.AbsoluteEndTimestamp),(this.CurrentSourceTimestamp.gte(this.activeTempoExpression.AbsoluteTimestamp)||this.CurrentSourceTimestamp.lte(e))&&(this.currentTempoChangingExpression=this.activeTempoExpression)}}recursiveMoveBack(){if(this.currentVoiceEntryIndex>0){this.currentVoiceEntryIndex--;const e=this.currentMeasure.VerticalSourceStaffEntryContainers[this.currentVoiceEntryIndex];this.currentVoiceEntries=this.getVoiceEntries(e),this.currentVerticalContainerInMeasureTimestamp=e.Timestamp,this.currentRelativeInMeasureTimestamp=this.currentVerticalContainerInMeasureTimestamp,this.currentTimeStamp=s.Fraction.plus(this.currentMeasure.AbsoluteTimestamp,this.currentVerticalContainerInMeasureTimestamp),this.activateCurrentDynamicOrTempoInstructions();const t=this.musicSheet.SelectionEnd;return t&&this.currentTimeStamp.lt(t)&&(this.endReached=!1),void(this.currentMeasureIndex=this.musicSheet.SourceMeasures.indexOf(this.CurrentMeasure))}if(0!==this.currentVoiceEntryIndex||0===this.currentMeasureIndex)this.frontReached=!0,this.currentTimeStamp=new s.Fraction(-1,1);else{const e=this.musicSheet.SourceMeasures[this.currentMeasureIndex-1];this.currentMeasureIndex--,this.currentMeasure=this.musicSheet.SourceMeasures[this.currentMeasureIndex];const t=e.VerticalSourceStaffEntryContainers[e.VerticalSourceStaffEntryContainers.length-1];this.currentVoiceEntries=this.getVoiceEntries(t),this.currentVerticalContainerInMeasureTimestamp=t.Timestamp,this.currentVoiceEntryIndex=e.VerticalSourceStaffEntryContainers.length-1,this.currentRelativeInMeasureTimestamp=this.currentVerticalContainerInMeasureTimestamp,this.currentTimeStamp=s.Fraction.plus(this.currentMeasure.AbsoluteTimestamp,t.Timestamp),this.activateCurrentDynamicOrTempoInstructions();const i=this.musicSheet.SelectionEnd;i&&this.currentTimeStamp.lt(i)&&(this.endReached=!1)}}recursiveMove(){if(this.currentVoiceEntryIndex++,0===this.currentVoiceEntryIndex&&(this.handleRepetitionsAtMeasureBegin(),this.activateCurrentRhythmInstructions()),this.currentVoiceEntryIndex>=0&&this.currentVoiceEntryIndex<this.currentMeasure.VerticalSourceStaffEntryContainers.length){const e=this.currentMeasure.VerticalSourceStaffEntryContainers[this.currentVoiceEntryIndex];this.currentVoiceEntries=this.getVoiceEntries(e),this.currentVerticalContainerInMeasureTimestamp=e.Timestamp,this.currentRelativeInMeasureTimestamp=this.currentVerticalContainerInMeasureTimestamp,this.currentTimeStamp=s.Fraction.plus(this.currentMeasure.AbsoluteTimestamp,this.currentVerticalContainerInMeasureTimestamp);const t=this.musicSheet.SelectionEnd;return t&&this.currentTimeStamp.gte(t)&&(this.endReached=!0),void this.activateCurrentDynamicOrTempoInstructions()}if(this.currentEnrolledMeasureTimestamp.Add(this.currentMeasure.Duration),this.handleRepetitionsAtMeasureEnd(),this.currentMeasureIndex>=0&&this.currentMeasureIndex<this.musicSheet.SourceMeasures.length)return this.currentMeasure=this.musicSheet.SourceMeasures[this.currentMeasureIndex],this.currentTimeStamp=s.Fraction.plus(this.currentMeasure.AbsoluteTimestamp,this.currentVerticalContainerInMeasureTimestamp),this.currentVoiceEntryIndex=-1,void this.recursiveMove();this.currentVerticalContainerInMeasureTimestamp=new s.Fraction,this.currentMeasure=void 0,this.currentVoiceEntries=void 0,this.endReached=!0}checkEntries(e){const t=this.CurrentVisibleVoiceEntries();if(t.length>0){if(!e)return!0;for(let e=0,i=t.length;e<i;++e)if(t[e].Notes[0].Pitch)return!0}return!1}getVisibleEntries(e,t){if(e.ParentVoice.Visible){let i=!1;for(const t of e.Notes)if(t.PrintObject){i=!0;break}if(!i&&this.SkipInvisibleNotes)return;t.push(e)}}getAudibleEntries(e,t){e.ParentVoice.Audible&&t.push(e)}getScoreFollowingEntries(e,t){e.ParentVoice.Following&&e.ParentVoice.Parent.Following&&t.push(e)}getVoiceEntries(e){const t=[];for(const i of e.StaffEntries)if(i)for(const e of i.VoiceEntries)t.push(e);return t}}t.MusicPartManagerIterator=c},512:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSymbol=void 0,function(e){e[e.Unused_first_Symbol=0]="Unused_first_Symbol",e[e.BLACK_HEAD=1]="BLACK_HEAD",e[e.UPWARDS_TAIL=2]="UPWARDS_TAIL",e[e.DOWNWARDS_TAIL=3]="DOWNWARDS_TAIL",e[e.UPWARDS_DOUBLE_TAIL=4]="UPWARDS_DOUBLE_TAIL",e[e.DOWNWARDS_DOUBLE_TAIL=5]="DOWNWARDS_DOUBLE_TAIL",e[e.UPWARDS_TRIPLE_TAIL=6]="UPWARDS_TRIPLE_TAIL",e[e.DOWNWARDS_TRIPLE_TAIL=7]="DOWNWARDS_TRIPLE_TAIL",e[e.UPWARDS_QUAD_TAIL=8]="UPWARDS_QUAD_TAIL",e[e.DOWNWARDS_QUAD_TAIL=9]="DOWNWARDS_QUAD_TAIL",e[e.ROUND_HEAD=10]="ROUND_HEAD",e[e.WHITE_HEAD=11]="WHITE_HEAD",e[e.G_CLEF=12]="G_CLEF",e[e.F_CLEF=13]="F_CLEF",e[e.C_CLEF=14]="C_CLEF",e[e.BREVE=15]="BREVE",e[e.BREVE_REST=16]="BREVE_REST",e[e.COMMON_TIME=17]="COMMON_TIME",e[e.CUT_TIME=18]="CUT_TIME",e[e.WHOLE_REST=19]="WHOLE_REST",e[e.HALF_REST=20]="HALF_REST",e[e.QUARTER_REST=21]="QUARTER_REST",e[e.EIGHTH_REST=22]="EIGHTH_REST",e[e.SIXTEENTH_REST=23]="SIXTEENTH_REST",e[e.THIRTYSECOND_REST=24]="THIRTYSECOND_REST",e[e.SIXTYFOURTH_REST=25]="SIXTYFOURTH_REST",e[e.FLAT=26]="FLAT",e[e.SHARP=27]="SHARP",e[e.NATURAL=28]="NATURAL",e[e.DOUBLE_FLAT=29]="DOUBLE_FLAT",e[e.DOUBLE_SHARP=30]="DOUBLE_SHARP",e[e.ZERO=31]="ZERO",e[e.ONE=32]="ONE",e[e.TWO=33]="TWO",e[e.THREE=34]="THREE",e[e.FOUR=35]="FOUR",e[e.FIVE=36]="FIVE",e[e.SIX=37]="SIX",e[e.SEVEN=38]="SEVEN",e[e.EIGHT=39]="EIGHT",e[e.NINE=40]="NINE",e[e.DOT=41]="DOT",e[e.FERMATA=42]="FERMATA",e[e.INVERTED_FERMATA=43]="INVERTED_FERMATA",e[e.SPICCATO=44]="SPICCATO",e[e.TENUTO=45]="TENUTO",e[e.MARCATO=46]="MARCATO",e[e.MARCATISSIMO=47]="MARCATISSIMO",e[e.INVERTED_MARCATISSIMO=48]="INVERTED_MARCATISSIMO",e[e.P=49]="P",e[e.F=50]="F",e[e.S=51]="S",e[e.Z=52]="Z",e[e.M=53]="M",e[e.R=54]="R",e[e.SEGNO=55]="SEGNO",e[e.CODA=56]="CODA",e[e.DRUM_CLEF=57]="DRUM_CLEF",e[e.G_CLEF_SUB8=58]="G_CLEF_SUB8",e[e.G_CLEF_SUPER8=59]="G_CLEF_SUPER8",e[e.G_CLEF_SUB15=60]="G_CLEF_SUB15",e[e.G_CLEF_SUPER15=61]="G_CLEF_SUPER15",e[e.F_CLEF_SUB8=62]="F_CLEF_SUB8",e[e.F_CLEF_SUPER8=63]="F_CLEF_SUPER8",e[e.F_CLEF_SUB15=64]="F_CLEF_SUB15",e[e.F_CLEF_SUPER15=65]="F_CLEF_SUPER15",e[e.DOWN_BOW=66]="DOWN_BOW",e[e.MORDENT=67]="MORDENT",e[e.INVERTED_MORDENT=68]="INVERTED_MORDENT",e[e.TURN=69]="TURN",e[e.INVERTED_TURN=70]="INVERTED_TURN",e[e.LEFTHAND_PIZZICATO=71]="LEFTHAND_PIZZICATO",e[e.RELEASE_PED=72]="RELEASE_PED",e[e.ENGAGE_PED=73]="ENGAGE_PED",e[e.VA8=74]="VA8",e[e.VB8=75]="VB8",e[e.TRILL=76]="TRILL",e[e.MA15=77]="MA15",e[e.MB15=78]="MB15",e[e.HIGH=79]="HIGH",e[e.PLAY=80]="PLAY",e[e.MIC=81]="MIC",e[e.SNAP_PIZZICATO=82]="SNAP_PIZZICATO",e[e.NATURAL_HARMONIC=83]="NATURAL_HARMONIC",e[e.EditPen=84]="EditPen",e[e.PEDAL_BRACKET=85]="PEDAL_BRACKET",e[e.PEDAL_MIXED=86]="PEDAL_MIXED",e[e.PEDAL_SYMBOL=87]="PEDAL_SYMBOL"}(i||(t.MusicSymbol=i={}))},599:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(6888),t),s(i(3902),t)},624:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OSMDOptions=t.SkyBottomLineBatchCalculatorBackendType=t.BackendType=t.FillEmptyMeasuresWithWholeRests=t.AlignRestOption=t.CursorType=void 0;const n=i(4146);var s,r,o,a,l;!function(e){e[e.Standard=0]="Standard",e[e.ThinLeft=1]="ThinLeft",e[e.ShortThinTopLeft=2]="ShortThinTopLeft",e[e.CurrentArea=3]="CurrentArea",e[e.CurrentAreaLeft=4]="CurrentAreaLeft"}(s||(t.CursorType=s={})),function(e){e[e.Never=0]="Never",e[e.Always=1]="Always",e[e.Auto=2]="Auto"}(r||(t.AlignRestOption=r={})),function(e){e[e.No=0]="No",e[e.YesVisible=1]="YesVisible",e[e.YesInvisible=2]="YesInvisible"}(o||(t.FillEmptyMeasuresWithWholeRests=o={})),function(e){e[e.SVG=0]="SVG",e[e.Canvas=1]="Canvas"}(a||(t.BackendType=a={})),function(e){e[e.Plain=0]="Plain",e[e.WebGL=1]="WebGL"}(l||(t.SkyBottomLineBatchCalculatorBackendType=l={})),t.OSMDOptions=class{static OSMDOptionsStandard(){return{autoResize:!0,backend:"svg",drawingParameters:n.DrawingParametersEnum.default}}static BackendTypeFromString(e){return e&&"canvas"===e.toLowerCase()?a.Canvas:a.SVG}}},649:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LyricWord=void 0,t.LyricWord=class{constructor(){this.syllables=[]}get Syllables(){return this.syllables}containsVoiceEntry(e){for(let t=0,i=this.Syllables.length;t<i;++t)if(this.Syllables[t].Parent===e)return!0;return!1}findLyricEntryInVoiceEntry(e){for(let t=0,i=this.Syllables.length;t<i;++t){const i=this.Syllables[t];if(i.Parent===e)return i}}}},735:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlainSkyBottomLineBatchCalculatorBackend=void 0;const n=i(5479),s=i(3667);class r extends s.SkyBottomLineBatchCalculatorBackend{constructor(e,t){super(e,t)}getPreferredRenderingConfiguration(e,t){return{elementWidth:Math.ceil(e),numColumns:6,numRows:6}}onInitialize(e){}calculateFromCanvas(e,t,i,s,r){const o=e.width,a=t.getImageData(0,0,e.width,e.height),{elementWidth:l,elementHeight:c,numColumns:h}=r,u=[];for(let d=0;d<i.length;++d){const e=i[d],t=Math.floor(e.getVFStave().getWidth()),r=Math.max(Math.ceil(e.PositionAndShape.Size.width*s),1),f=d%h*l,p=f+t,m=Math.floor(d/h)*c,g=m+c,b=new Array(Math.max(r,t)).fill(0),v=new Array(Math.max(r,t)).fill(0);for(let i=f;i<p;++i){b[i-f]=0;for(let e=m;e<g;++e){const t=e*o*4+4*i;if(a.data[t+3]>0){b[i-f]=e-m;break}}v[i-f]=c;for(let e=g-1;e>=m;e--){const t=e*o*4+4*i;if(a.data[t+3]>0){v[i-f]=e-m;break}}}const y=Math.max(...b),x=Math.min(...v);for(let i=0;i<t;++i)b[i]=0===b[i]?y:b[i],v[i]=v[i]===c?x:v[i];u.push(new n.SkyBottomLineCalculationResult(b,v))}return u}}t.PlainSkyBottomLineBatchCalculatorBackend=r},806:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowMusicSheetCalculator=void 0;const s=i(7921),r=i(3753),o=i(5748),a=i(1327),l=i(5054),c=i(7785),h=n(i(3206));var u=h.default.Flow;const d=n(i(3065)),f=i(9479),p=i(2395),m=i(7751),g=i(9310),b=i(7809),v=i(7533),y=i(4022),x=i(2400),S=i(9161),E=i(624),w=i(7506),T=i(5282),_=i(6014),M=i(4980),P=i(6659),C=i(6954),A=i(7109),N=i(512),L=i(813),k=i(1216);class I extends s.MusicSheetCalculator{constructor(e){var t,i,n,o,a,l,u,d;super(),this.beamsNeedUpdate=!1,this.rules=e,s.MusicSheetCalculator.symbolFactory=new r.VexFlowGraphicalSymbolFactory,s.MusicSheetCalculator.TextMeasurer=new c.VexFlowTextMeasurer(this.rules),s.MusicSheetCalculator.stafflineNoteCalculator=new w.VexflowStafflineNoteCalculator(this.rules),"gonville"===(null===(t=this.rules.DefaultVexFlowNoteFont)||void 0===t?void 0:t.toLowerCase())?h.default.Flow.DEFAULT_FONT_STACK=[null===(i=h.default.Flow.Fonts)||void 0===i?void 0:i.Gonville,null===(n=h.default.Flow.Fonts)||void 0===n?void 0:n.Bravura,null===(o=h.default.Flow.Fonts)||void 0===o?void 0:o.Custom]:"petaluma"===(null===(a=this.rules.DefaultVexFlowNoteFont)||void 0===a?void 0:a.toLowerCase())&&(h.default.Flow.DEFAULT_FONT_STACK=[null===(l=h.default.Flow.Fonts)||void 0===l?void 0:l.Petaluma,null===(u=h.default.Flow.Fonts)||void 0===u?void 0:u.Gonville,null===(d=h.default.Flow.Fonts)||void 0===d?void 0:d.Bravura])}clearRecreatedObjects(){super.clearRecreatedObjects(),s.MusicSheetCalculator.stafflineNoteCalculator=new w.VexflowStafflineNoteCalculator(this.rules);for(const e of this.graphicalMusicSheet.MeasureList)for(const t of e)null===t||void 0===t||t.clean()}formatMeasures(){for(const e of this.graphicalMusicSheet.MeasureList)if(e&&e[0]){e.find((e=>null===e||void 0===e?void 0:e.isVisible())).format();for(const t of e){for(const e of t.staffEntries)e.calculateXPosition();t.finalizeBeams()}}this.beamsNeedUpdate=!1}calculateMeasureXLayout(e){const t=[];for(const s of e)(null===s||void 0===s?void 0:s.isVisible())&&t.push(s);if(0===t.length)return 0;e=t;const i=[],n=new u.Formatter({softmaxFactor:this.rules.SoftmaxFactorVexFlow});let r=e[0].staffEntries.length,o=1;for(const s of e){if(!s)continue;let e=0;for(const i of s.staffEntries)e+=i.setMaxAccidentals();s.parentSourceMeasure.ImplicitMeasure&&(r=Math.max(s.staffEntries.length,r),o=Math.max(s.staffEntries.length+e,o));const t=s.vfVoices,a=[];for(const n in t)if(t.hasOwnProperty(n)){const e=t[n];s.hasOnlyRests&&!e.ticksUsed.equals(e.totalTicks)&&(e.ticksUsed=e.totalTicks),a.push(e),i.push(e)}0!==a.length?n.joinVoices(a):d.default.debug("Found a measure with no voices. Continuing anyway.",t)}let a=12;const l=e[0].parentSourceMeasure;if(i.length>0){if(a=n.preCalculateMinTotalWidth(i)/f.unitInPixels*this.rules.VoiceSpacingMultiplierVexflow+this.rules.VoiceSpacingAddendVexflow+.3*r,null!==l&&void 0!==l&&l.ImplicitMeasure){a=l.Duration.RealValue/l.ActiveTimeSignature.RealValue*a;let e=0;const t=l.measureListIndex;if(t>1)for(const i of this.graphicalMusicSheet.MeasureList[t-1]){const t=null===i||void 0===i?void 0:i.parentSourceMeasure.endingBarStyleEnum;if(t===C.SystemLinesEnum.ThinBold||t===C.SystemLinesEnum.DotsThinBold){e=this.rules.PickupMeasureRepetitionSpacing;break}}a+=e,r>1?a+=.3*o*1.5:t>1&&1===r&&(a+=this.rules.PickupMeasureSpacingSingleNoteAddend),a*=this.rules.PickupMeasureWidthMultiplier}s.MusicSheetCalculator.setMeasuresMinStaffEntriesWidth(e,a);const t=(e,t)=>{n.formatToStave(i,t.getVFStave())},c=(e,t)=>{n.formatToStave(i,t.getVFStave(),{align_rests:!0,context:void 0})};for(const i of e){if(this.rules.AlignRests===E.AlignRestOption.Never)i.formatVoices=t;else if(this.rules.AlignRests===E.AlignRestOption.Always)i.formatVoices=c;else if(this.rules.AlignRests===E.AlignRestOption.Auto){let e=!1;for(const t of i.staffEntries){let i=0,n=0;for(const s of t.graphicalVoiceEntries)if(s.parentVoiceEntry.IsGrace||s&&s.notes&&s.notes[0]&&s.notes[0].sourceNote&&s.notes[0].sourceNote.PrintObject&&i++,s&&s.notes&&s.notes[0]&&s.notes[0].sourceNote&&s.notes[0].sourceNote.isRest()&&s.notes[0].sourceNote.PrintObject&&n++,i>1&&n>=1){e=!0;break}if(e)break}i.formatVoices=e?c:t}if(i===e[0]){const e=i;e.formatVoices(a*f.unitInPixels,e)}}}for(const s of e)if(s)for(const e of s.staffEntries)e.calculateXPosition();for(const s of e){if(!s)continue;const e=s.vfVoices,t=[];for(const i in e)e.hasOwnProperty(i)&&t.push(e[i]);0!==t.length?n.joinVoices(t):d.default.debug("Found a measure with no voices. Continuing anyway.",e)}return a}calculateElongationFactor(e,t,i,n,s,r,a,l){let c=s,h=0;for(const u of e){const e=u.GraphicalLabel.Label.textAlignment;let d=a,f=l;if(u instanceof p.GraphicalLyricEntry&&u.ParentLyricWord){u.LyricsEntry.SyllableIndex>0&&(d=this.rules.BetweenSyllableMinimumDistance,v.TextAlignment.IsCenterAligned(e)&&(d+=1));const t=u.ParentLyricWord.GetLyricWord.Syllables;t.length>1&&u.LyricsEntry.SyllableIndex<t.length-1&&(void 0===this.dashSpace&&(this.dashSpace=1.5),f-=this.dashSpace)}const m=u instanceof p.GraphicalLyricEntry?u.GraphicalLabel.PositionAndShape:u.PositionAndShape,g=m.Size.width;let b,y,x,S,E=t.PositionAndShape.RelativePosition.x+m.BorderLeft;u instanceof P.GraphicalChordSymbolContainer&&u.PositionAndShape.Parent.DataObject instanceof o.GraphicalMeasure&&(E=this.rules.ChordSymbolWholeMeasureRestXOffset+m.BorderMarginLeft+u.PositionAndShape.Parent.DataObject.beginInstructionsWidth),void 0!==i[h]&&i[h].extend,i[h]&&(y=E-i[h].xPosition);const w=n*s;v.TextAlignment.IsCenterAligned(e)?(f/=4,x=w-E,S=g/2-f,i[h]&&(b=i[h].labelWidth/2+g/2+d)):v.TextAlignment.IsLeft(e)&&(x=w-E,S=g-f,i[h]&&(b=i[h].labelWidth+d));let T=1;const _=S/x;let M=1;u instanceof p.GraphicalLyricEntry&&u.LyricsEntry?i[h]&&(M=b/y,i[h].sourceNoteDuration.Denominator>4&&(M*=1.1)):i[h]&&(M=b/y),T=Math.max(_,M),c=Math.max(c,T);let C=Math.max(b-y||0,0);i[h]&&(C+=i[h].cumulativeOverlap),i[h]={cumulativeOverlap:C,extend:u instanceof p.GraphicalLyricEntry&&u.LyricsEntry.extend,labelWidth:g,measureNumber:r,sourceNoteDuration:u instanceof p.GraphicalLyricEntry&&u.LyricsEntry&&u.LyricsEntry.Parent.Notes[0].Length,text:u instanceof p.GraphicalLyricEntry?u.LyricsEntry.Text:u.GraphicalLabel.Label.text,xPosition:E},h++}return c}calculateElongationFactorFromStaffEntries(e,t,i,n){let s=i;const r={},o={};for(const a of e)a.LyricsEntries.length>0&&this.rules.RenderLyrics&&(s=this.calculateElongationFactor(a.LyricsEntries,a,r,t,s,n,this.rules.HorizontalBetweenLyricsDistance,this.rules.LyricOverlapAllowedIntoNextMeasure)),a.graphicalChordContainers.length>0&&this.rules.RenderChordSymbols&&(s=this.calculateElongationFactor(a.graphicalChordContainers,a,o,t,s,n,this.rules.ChordSymbolXSpacing,this.rules.ChordOverlapAllowedIntoNextMeasure));return s}calculateMeasureWidthFromStaffEntries(e,t){let i=1;for(const n of e)n&&0!==n.staffEntries.length&&n.isVisible()&&(i=this.calculateElongationFactorFromStaffEntries(n.staffEntries,t,i,n.MeasureNumber));return i=Math.min(i,this.rules.MaximumLyricsElongationFactor),t*i}createGraphicalTie(e,t,i,n,s){return new l.GraphicalTie(e,n,s)}updateStaffLineBorders(e){e.SkyBottomLineCalculator.updateStaffLineBorders()}graphicalMeasureCreatedCalculations(e){e.rules=this.rules,e.graphicalMeasureCreatedCalculations()}layoutVoiceEntry(e,t,i,n){for(let r=0;r<t.length;r++)t[r]=s.MusicSheetCalculator.stafflineNoteCalculator.positionNote(t[r])}layoutStaffEntry(e){e.parentMeasure.layoutStaffEntry(e)}initGraphicalMeasuresCreation(){}layoutArticulationMarks(e,t,i){}layoutGraphicalTie(e,t,i){const n=e.StartNote,s=e.EndNote;let r,o,a=0;n&&n.vfnote&&n.vfnote.length>=2&&(r=n.vfnote[0],a=n.vfnote[1]);let l=0;if(s&&s.vfnote&&s.vfnote.length>=2&&(o=s.vfnote[0],l=s.vfnote[1]),t){if(r){const t=new u.StaveTie({first_indices:[a],first_note:r});n.parentVoiceEntry.parentStaffEntry.parentMeasure.addStaveTie(t,e)}if(o){const t=new u.StaveTie({last_indices:[l],last_note:o});s.parentVoiceEntry.parentStaffEntry.parentMeasure.addStaveTie(t,e)}}else if(r||o){let t;if(i)if("S"===e.Tie.Type){const i=e.StartNote.sourceNote,n=e.EndNote.sourceNote;let s=1;i.FretNumber>n.FretNumber&&(s=-1),t=new u.TabSlide({first_indices:[a],first_note:r,last_indices:[l],last_note:o},s)}else t=new u.TabTie({first_indices:[a],first_note:r,last_indices:[l],last_note:o},e.Tie.Type);else{t=new u.StaveTie({first_indices:[a],first_note:r,last_indices:[l],last_note:o});const i=e.Tie.getTieDirection(n.sourceNote);i===M.PlacementEnum.Below?t.setDirection(1):i===M.PlacementEnum.Above&&t.setDirection(-1)}s.parentVoiceEntry.parentStaffEntry.parentMeasure.addStaveTie(t,e)}}calculateDynamicExpressionsForMultiExpression(e,t,i){if(t<this.rules.MinMeasureToDrawIndex||t>this.rules.MaxMeasureToDrawIndex)return;const n=e.AbsoluteTimestamp,s=this.graphicalMusicSheet.MeasureList[t],r=s[i].ParentStaffLine,o=s[i],a=e.StartingContinuousDynamic,l=void 0!==a&&!a.IsStartOfSoftAccent,c=this.getRelativePositionInStaffLineFromTimestamp(n,i,r,null===r||void 0===r?void 0:r.isPartOfMultiStaffInstrument(),void 0,l);if(c.x<=0&&(c.x=o.beginInstructionsWidth+this.rules.RhythmRightMargin),e.InstantaneousDynamic){const t=new b.VexFlowInstantaneousDynamicExpression(e.InstantaneousDynamic,r,o);this.calculateGraphicalInstantaneousDynamicExpression(t,c,n),this.dynamicExpressionMap.set(n.RealValue,t.PositionAndShape)}if(a){const t=new x.VexFlowContinuousDynamicExpression(a,r,o.parentSourceMeasure);if(t.StartMeasure=o,t.IsSoftAccent=e.StartingContinuousDynamic.IsStartOfSoftAccent,!t.IsVerbal&&a.EndMultiExpression)try{this.calculateGraphicalContinuousDynamic(t,c),t.updateSkyBottomLine()}catch(e){}else t.IsVerbal?this.calculateGraphicalVerbalContinuousDynamic(t,c):d.default.warn("This continuous dynamic is not covered. measure"+e.SourceMeasureParent.MeasureNumber)}}createMetronomeMark(e){var t;const i=e.ParentMultiTempoExpression.SourceMeasureParent.MeasureNumber,n=Math.max(e.StaffNumber-1,0),s=this.graphicalMusicSheet.findGraphicalMeasureByMeasureNumber(i,n),r=s===this.graphicalMusicSheet.MeasureList[0][0];if(s.hasMetronomeMark)return;const o=s.getVFStave();let a="q";if(e.beatUnit){const t=T.NoteTypeHandler.getNoteDurationFromType(e.beatUnit);a=_.VexFlowConverter.durations(t,!1)[0]}let l=this.rules.MetronomeMarkYShift,c=!1;for(const f of e.parentMeasure.TempoExpressions){var h;const e=(null===(h=f.InstantaneousTempo)||void 0===h?void 0:h.TempoType)===S.TempoType.metronomeMark;if(f.getPlacementOfFirstEntry()===M.PlacementEnum.Above&&!e){c=!0;break}}c&&(l-=1.4);const u=null===(t=this.graphicalMusicSheet.MeasureList[0][0].ParentStaffLine)||void 0===t?void 0:t.SkyLine;o.setTempo({bpm:e.TempoInBpm,dots:e.dotted,duration:a},l*f.unitInPixels);const d=r?this.rules.MetronomeMarkXShift*f.unitInPixels:0;o.getModifiers()[o.getModifiers().length-1].setShiftX(d),s.hasMetronomeMark=!0,u&&(u[0]=Math.min(u[0],-4.5+l))}calculateRehearsalMark(e){const t=e.rehearsalExpression;if(!t)return;const i=this.graphicalMusicSheet.MeasureList[0][0].MeasureNumber,n=Math.max(e.MeasureNumber-i,0);for(const s of this.graphicalMusicSheet.MeasureList[n]){const i=null===s||void 0===s?void 0:s.getVFStave();if(!i||!s.isVisible())continue;let n=-this.rules.RehearsalMarkYOffsetDefault-this.rules.RehearsalMarkYOffset;s.parentSourceMeasure.isReducedToMultiRest&&(n+=this.rules.RehearsalMarkYOffsetAddedForRehearsalMarks);let r=this.rules.RehearsalMarkXOffsetDefault+this.rules.RehearsalMarkXOffset;e.IsSystemStartMeasure&&(r+=this.rules.RehearsalMarkXOffsetSystemStartMeasure);const o=this.rules.RehearsalMarkFontSize;return void i.setSection(t.label,n,r,o)}}calculateSingleOctaveShift(e,t,i,n){var s;const r=t.OctaveShiftStart,o=r.ParentStartMultiExpression.Timestamp,a=null===(s=r.ParentEndMultiExpression)||void 0===s?void 0:s.Timestamp,l=this.rules.MinMeasureToDrawIndex,c=this.rules.MaxMeasureToDrawIndex;let h,u,f=this.graphicalMusicSheet.MeasureList[i][n].ParentStaffLine;if(f||(f=this.graphicalMusicSheet.MeasureList[l][n].ParentStaffLine),h=r.ParentEndMultiExpression?this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentEndMultiExpression.SourceMeasureParent,n):this.graphicalMusicSheet.getLastGraphicalMeasureFromIndex(n,!0),h.MeasureNumber>c+1&&(h=this.graphicalMusicSheet.getLastGraphicalMeasureFromIndex(n,!0)),u=r.ParentEndMultiExpression?this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentStartMultiExpression.SourceMeasureParent,n):this.graphicalMusicSheet.MeasureList[l][n],u.MeasureNumber<l+1&&(u=this.graphicalMusicSheet.MeasureList[l][n]),u.MeasureNumber<l+1||u.MeasureNumber>c+1||h.MeasureNumber<l+1||h.MeasureNumber>c+1)return;let p=h.ParentStaffLine;if(p||(p=f),h&&f&&p){const e=new g.VexFlowOctaveShift(r,f.PositionAndShape);if(!e.startNote){let t;for(const e of u.staffEntries)if(e){t=e;break}if(!t)return;if(e.setStartNote(t),!e.startNote)return}if(!e.endNote){let t;for(let e=h.staffEntries.length-1;e>=0;e++)if(h.staffEntries[e]){t=h.staffEntries[e];break}if(!t)return void(e.graphicalEndAtMeasureEnd=!0);if(e.setEndNote(t),!e.endNote)return}let t=u.findGraphicalStaffEntryFromTimestamp(o);t||(t=u.staffEntries[0]);let i=h.findGraphicalStaffEntryFromTimestamp(a);if(i||(i=h.staffEntries[h.staffEntries.length-1]),e.setStartNote(t),p!==f){e.endsOnDifferentStaffLine=!0;let s=this.findLastStafflineMeasure(f);void 0===s&&(s=h);const o=s.staffEntries[s.staffEntries.length-1];e.setEndNote(o),e.graphicalEndAtMeasureEnd=!0,e.endMeasure=s;const a=p.ParentMusicSystem.Id-f.ParentMusicSystem.Id;if(a>0)for(let e=f.ParentMusicSystem.Id;e<p.ParentMusicSystem.Id;e++){const t=e+1,s=this.musicSystems[t];let o;for(const e of s.StaffLines)if(e.ParentStaff.idInMusicSheet===n){o=e;break}if(!o)continue;const l=o.Measures[0],c=new g.VexFlowOctaveShift(r,l.PositionAndShape);let u=this.findLastStafflineMeasure(o);e<a-1&&(c.endsOnDifferentStaffLine=!0,c.graphicalEndAtMeasureEnd=!0,c.endMeasure=u);const f=l.staffEntries[0];let p=u.staffEntries[u.staffEntries.length-1];h.ParentStaffLine===o&&(u=h,p=i),1===p.graphicalVoiceEntries.length&&1===p.graphicalVoiceEntries[0].notes.length&&p.graphicalVoiceEntries[0].notes[0].sourceNote.isWholeMeasureNote()&&(c.graphicalEndAtMeasureEnd=!0,c.endMeasure=u);const m="VexFlowMusicSheetCalculator.calculateSingleOctaveShift: ";f||d.default.warn(m+"no firstNote found"),p||d.default.warn(m+"no lastNote found"),c.setStartNote(f),c.setEndNote(p),o.OctaveShifts.push(c),this.calculateOctaveShiftSkyBottomLine(f,p,c,o)}this.calculateOctaveShiftSkyBottomLine(t,o,e,f)}else e.setEndNote(i),this.calculateOctaveShiftSkyBottomLine(t,i,e,f);f.OctaveShifts.push(e)}else d.default.warn("End measure or staffLines for octave shift are undefined! This should not happen!")}findLastStafflineMeasure(e){for(let t=e.Measures.length-1;t>=0;t--){const i=e.Measures[t];if(i.staffEntries.length>0)return i}}calculateSinglePedal(e,t,i,n){var s;const r=t.PedalStart,o=r.ParentStartMultiExpression.Timestamp,a=null===(s=r.ParentEndMultiExpression)||void 0===s?void 0:s.Timestamp,l=this.rules.MinMeasureToDrawIndex,c=this.rules.MaxMeasureToDrawIndex;let h,u,f=this.graphicalMusicSheet.MeasureList[i][n].ParentStaffLine;if(f||(f=this.graphicalMusicSheet.MeasureList[l][n].ParentStaffLine),h=r.ParentEndMultiExpression?this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentEndMultiExpression.SourceMeasureParent,n):this.graphicalMusicSheet.getLastGraphicalMeasureFromIndex(n,!0),h.MeasureNumber>c+1&&(h=this.graphicalMusicSheet.getLastGraphicalMeasureFromIndex(n,!0)),r.ParentEndMultiExpression?u=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentStartMultiExpression.SourceMeasureParent,n):(u=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentStartMultiExpression.SourceMeasureParent,n),u||(u=this.graphicalMusicSheet.MeasureList[l][n])),u.MeasureNumber<l+1&&(u=this.graphicalMusicSheet.MeasureList[l][n]),u.parentSourceMeasure.measureListIndex<l||u.parentSourceMeasure.measureListIndex>c||h.parentSourceMeasure.measureListIndex<l||h.parentSourceMeasure.measureListIndex>c)return;let p=h.ParentStaffLine;if(p||(p=f),h&&f&&p){let e=!1;f!==p&&(e=!0);const t=new A.VexFlowPedal(r,f.PositionAndShape,!1,e);t.setEndsStave(h,a);let i=u.findGraphicalStaffEntryFromTimestamp(o);i||(i=u.staffEntries[0]);let s=h.findGraphicalStaffEntryFromTimestamp(a);if(s||(s=h.staffEntries[h.staffEntries.length-1]),!t.setStartNote(i))return;if(t.setBeginsStave(t.startNote.isRest(),o),p!==f)if(t.pedalSymbol===N.MusicSymbol.PEDAL_SYMBOL){t.setEndNote(s),t.setEndMeasure(h),t.ReleaseText=" ",t.CalculateBoundingBox(),this.calculatePedalSkyBottomLine(t.startVfVoiceEntry,t.endVfVoiceEntry,t,f);const e=p.Measures[0],i=new A.VexFlowPedal(r,e.PositionAndShape);t.setEndsStave(h,a);const n=e.staffEntries[0];if(!i.setStartNote(n))return;i.setEndNote(s),i.setEndMeasure(h),t.setEndMeasure(h),p.Pedals.push(i),i.CalculateBoundingBox(),i.DepressText=" ",this.calculatePedalSkyBottomLine(i.startVfVoiceEntry,i.endVfVoiceEntry,i,p)}else{let e=this.findLastStafflineMeasure(f);void 0===e&&(e=h);const i=e.staffEntries[e.staffEntries.length-1];t.setEndNote(i),t.setEndMeasure(h),t.ChangeEnd=!1;const o=p.ParentMusicSystem.Id-f.ParentMusicSystem.Id;if(o>0){let e=1;for(let i=f.ParentMusicSystem.Id;i<p.ParentMusicSystem.Id;i++){const l=this.musicSystems[i+1].StaffLines[n],c=l.Measures[0];let u=!1,d=!1;e<o?u=!0:d=!0,e++;const f=new A.VexFlowPedal(r,c.PositionAndShape,!0,u);t.setEndsStave(h,a),f.ChangeBegin=!1,f.ChangeEnd=!!d&&r.ChangeEnd;let p=this.findLastStafflineMeasure(l);const m=c.staffEntries[0];let g=p.staffEntries[p.staffEntries.length-1];if(h.ParentStaffLine===l?(p=h,f.setEndMeasure(h),g=s):f.setEndMeasure(l.Measures.last()),!f.setStartNote(m))break;f.setEndNote(g),t.setEndMeasure(h),l.Pedals.push(f),f.CalculateBoundingBox(),this.calculatePedalSkyBottomLine(f.startVfVoiceEntry,f.endVfVoiceEntry,f,l)}}t.CalculateBoundingBox(),this.calculatePedalSkyBottomLine(t.startVfVoiceEntry,t.endVfVoiceEntry,t,f)}else t.setEndNote(s),t.setEndMeasure(h),t.CalculateBoundingBox(),this.calculatePedalSkyBottomLine(t.startVfVoiceEntry,t.endVfVoiceEntry,t,f);f.Pedals.push(t)}else d.default.warn("End measure or staffLines for pedal are undefined! This should not happen!")}calculatePedalSkyBottomLine(e,t,i,n){let s=null===t||void 0===t?void 0:t.PositionAndShape;s||(s=i.endMeasure.PositionAndShape);const r=h.default.Flow.PedalMarking.Styles,o=i.getPedalMarking(),a=o.line+3+(n.StaffLines.length-1),l=o.render_options.text_margin_right/10;let c,u=e.PositionAndShape.AbsolutePosition.x-l;o.style!==r.MIXED&&o.style!==r.MIXED_OPEN_END&&o.style!==r.TEXT||(u-=1);let d=n.StaffLines.length-1;for(const h of n.Pedals){const e=h.getPedalMarking().line+3+(n.StaffLines.length-1);d=Math.max(e,d)}if(i.EndSymbolPositionAndShape){const e=o.render_options.glyph_point_size/20;c=u+3.4;const t=s.AbsolutePosition.x-l,r=t+1.5;d=Math.max(n.SkyBottomLineCalculator.getBottomLineMaxInRange(u,c),d),d=Math.max(a+2*e,d);const h=n.SkyBottomLineCalculator.getBottomLineMaxInRange(t,r);i.DepressText||(d=Math.max(d,h)),i.setLine(d-3-(n.StaffLines.length-1)),n.SkyBottomLineCalculator.updateBottomLineInRange(u,c,d+e),n.SkyBottomLineCalculator.updateBottomLineInRange(t,r,d+e)}else{var f;const e=o.render_options.bracket_height/10;if(o.EndsStave)c=t?t.parentStaffEntry.parentMeasure.PositionAndShape.AbsolutePosition.x+t.parentStaffEntry.parentMeasure.PositionAndShape.Size.width-l:s.AbsolutePosition.x+s.Size.width;else switch(o.style){case r.BRACKET_OPEN_END:case r.BRACKET_OPEN_BOTH:case r.MIXED_OPEN_END:c=s.AbsolutePosition.x+s.BorderRight-l;break;default:c=s.AbsolutePosition.x+s.BorderLeft-l}const h=null===t||void 0===t||null===(f=t.parentStaffEntry)||void 0===f?void 0:f.vfClefBefore;if(h&&(c+=h.getWidth()/10),d=Math.max(n.SkyBottomLineCalculator.getBottomLineMaxInRange(u,c),d),d===1/0)return;if(d=Math.max(d,a+e),i.setLine(d-3-(n.StaffLines.length-1)),u>c){const e=c;c=u,u=e}n.SkyBottomLineCalculator.updateBottomLineInRange(u,c,d+e)}for(const h of n.Pedals){const e=h,t=e.getPedalMarking();if(d>t.line+3+(n.StaffLines.length-1)){var p;const i=t.render_options.text_margin_right/10;let s,a=e.startVfVoiceEntry.PositionAndShape.AbsolutePosition.x-i;e.setLine(d-3-(n.StaffLines.length-1));let l=null===(p=e.endVfVoiceEntry)||void 0===p?void 0:p.PositionAndShape;if(l||(l=e.endMeasure.PositionAndShape),e.EndSymbolPositionAndShape){const e=o.render_options.glyph_point_size/20;s=a+3.4;const t=l.AbsolutePosition.x-i,r=t+1.5;n.SkyBottomLineCalculator.updateBottomLineInRange(a,s,d+e),n.SkyBottomLineCalculator.updateBottomLineInRange(t,r,d+e)}else{var m;const c=t.render_options.bracket_height/10;if(t.EndsStave)s=l.AbsolutePosition.x+l.Size.width-i;else switch(o.style){case r.BRACKET_OPEN_END:case r.BRACKET_OPEN_BOTH:case r.MIXED_OPEN_END:s=l.AbsolutePosition.x+l.BorderRight-i;break;default:s=l.AbsolutePosition.x+l.BorderLeft-i}const h=null===(m=e.endVfVoiceEntry)||void 0===m||null===(m=m.parentStaffEntry)||void 0===m?void 0:m.vfClefBefore;if(h&&(s+=h.getWidth()/10),a>s){const e=a;a=s,s=e}n.SkyBottomLineCalculator.updateBottomLineInRange(a,s,d+c)}}}}calculateOctaveShiftSkyBottomLine(e,t,i,n){if(!t)return void d.default.warn("octaveshift: no endStaffEntry");let s=t.PositionAndShape;i.graphicalEndAtMeasureEnd&&(s=t.parentMeasure.PositionAndShape);let r=e.PositionAndShape.Size.width,o=s.Size.width;e.hasOnlyRests()?r=-r:r/=2,i.graphicalEndAtMeasureEnd||(t.hasOnlyRests()?o*=2:o/=2,e===t&&(o*=2));let a=e.PositionAndShape.AbsolutePosition.x-r,l=s.AbsolutePosition.x+o;if(a>l){const e=a;a=l,l=e}i.PositionAndShape.Size.width=l-a;const c=i.getTextBracket(),h=c.font.size/10;if(c.position===u.TextBracket.Positions.TOP){const e=Math.ceil(n.SkyBottomLineCalculator.getSkyLineMinInRange(a,l));if(e===1/0)return;c.start.getStave().options.top_text_position=Math.abs(e),n.SkyBottomLineCalculator.updateSkyLineInRange(a,l,e-2*h)}else{const e=n.SkyBottomLineCalculator.getBottomLineMaxInRange(a,l);if(e===1/0)return;c.start.getStave().options.bottom_text_position=e,n.SkyBottomLineCalculator.updateBottomLineInRange(a,l,e+1.5*h)}}calculateWordRepetitionInstruction(e,t){let i;const n=this.graphicalMusicSheet.MeasureList[t];for(let s=0,r=n.length;s<r;++s){const e=n[s];if(e&&e.ParentStaffLine&&e.ParentStaff.isVisible()){i=e;break}}i&&i.addWordRepetition(e)}calculateSkyBottomLines(){const e=L.CollectionUtil.flat(this.musicSystems.map((e=>e.StaffLines)));let t=0;for(const i of e)for(const e of i.Measures)e&&t++;if(this.rules.AlwaysSetPreferredSkyBottomLineBackendAutomatically&&this.rules.setPreferredSkyBottomLineBackendAutomatically(t),t>=this.rules.SkyBottomLineBatchMinMeasures)new a.SkyBottomLineBatchCalculator(e,this.rules.PreferredSkyBottomLineBatchCalculatorBackend).calculateLines();else for(const i of e)i.SkyBottomLineCalculator.calculateLines()}calculateExpressionAlignements(){for(const t of this.musicSystems)for(const i of t.StaffLines)try{i.AlignmentManager.alignDynamicExpressions(),i.AbstractExpressions.forEach((e=>{e.updateSkyBottomLine()}))}catch(e){}}handleTiedGraphicalNote(e,t,i,n,s,r,o,a){}handleBeam(e,t,i){e.parentVoiceEntry.parentStaffEntry.parentMeasure.handleBeam(e,t)}handleVoiceEntryLyrics(e,t,i){e.LyricsEntries.forEach(((e,n)=>{const s=new p.GraphicalLyricEntry(n,t,this.rules.LyricsHeight,this.rules.StaffHeight);if(t.LyricsEntries.push(s),s.GraphicalLabel.setLabelPositionAndShapeBorders(),n.Word){const e=n.Word.Syllables.indexOf(n);let t=i.indexOf(n.Word);if(-1===t&&(i.push(n.Word),t=i.indexOf(n.Word)),0===this.graphicalLyricWords.length||t>this.graphicalLyricWords.length-1){const t=new m.GraphicalLyricWord(n.Word);s.ParentLyricWord=t,t.GraphicalLyricsEntries[e]=s,this.graphicalLyricWords.push(t)}else{const n=this.graphicalLyricWords[t];s.ParentLyricWord=n,n.GraphicalLyricsEntries[e]=s,n.isFilled()&&(i.splice(t,1),this.graphicalLyricWords.splice(this.graphicalLyricWords.indexOf(n),1))}}}))}handleVoiceEntryOrnaments(e,t,i){}handleVoiceEntryArticulations(e,t,i){}handleVoiceEntryTechnicalInstructions(e,t,i){}handleTuplet(e,t,i){e.parentVoiceEntry.parentStaffEntry.parentMeasure.handleTuplet(e,t)}findIndexGraphicalSlurFromSlur(e,t){for(let i=0;i<e.length;i++)if(e[i].slur===t)return i;return-1}indexOfGraphicalGlissFromGliss(e,t){for(let i=0;i<e.length;i++)if(e[i].Glissando===t)return i;return-1}calculateSlurs(){const e={};for(const t of this.graphicalMusicSheet.MeasureList[0])e[t.ParentStaff.idInMusicSheet]=[];for(const t of this.musicSystems)for(const i of t.StaffLines){const t=e[i.ParentStaff.idInMusicSheet];for(let e=0;e<t.length;e++){const n=t[e],s=new y.GraphicalSlur(n.slur,this.rules);i.addSlurToStaffline(s),t[e]=s}for(const e of i.Measures)for(const n of e.staffEntries){for(const e of n.graphicalVoiceEntries)for(const s of e.notes)for(const e of s.sourceNote.NoteSlurs)if(e.EndNote&&e.StartNote){if(e.StartNote===s.sourceNote){const n=new y.GraphicalSlur(e,this.rules);t.push(n),i.addSlurToStaffline(n)}if(e.EndNote===s.sourceNote){const i=this.findIndexGraphicalSlurFromSlur(t,e);if(i>=0){const e=t[i];-1===e.staffEntries.indexOf(n)&&e.staffEntries.push(n),t.splice(i,1)}}}for(const e of t)-1===e.staffEntries.indexOf(n)&&e.staffEntries.push(n)}}for(const t of this.musicSystems)for(const e of t.StaffLines){const t=e.GraphicalSlurs.sort(y.GraphicalSlur.Compare);for(const e of t)e.slur.isCrossed()||e.calculateCurve(this.rules)}}calculateGlissandi(){const e={};for(const t of this.graphicalMusicSheet.MeasureList[0])e[t.ParentStaff.idInMusicSheet]=[];for(const t of this.musicSystems)for(const i of t.StaffLines){const t=e[i.ParentStaff.idInMusicSheet];for(let e=0;e<t.length;e++){const n=t[e],s=new k.VexFlowGlissando(n.Glissando);i.addGlissandoToStaffline(s),t[e]=s}for(const e of i.Measures)for(const n of e.staffEntries){for(const e of n.graphicalVoiceEntries)for(const s of e.notes){const e=s.sourceNote.NoteGlissando;if(null!==e&&void 0!==e&&e.EndNote&&null!==e&&void 0!==e&&e.StartNote){if(e.StartNote===s.sourceNote){const n=new k.VexFlowGlissando(e);t.push(n),i.addGlissandoToStaffline(n)}if(e.EndNote===s.sourceNote){const i=this.indexOfGraphicalGlissFromGliss(t,e);if(i>=0){const e=t[i];-1===e.staffEntries.indexOf(n)&&e.staffEntries.push(n),t.splice(i,1)}}}}for(const e of t)-1===e.staffEntries.indexOf(n)&&e.staffEntries.push(n)}}for(const t of this.musicSystems)for(const e of t.StaffLines)for(const t of e.GraphicalGlissandi)if(e.ParentStaff.isTab){const e=t.Glissando.StartNote,i=t.Glissando.EndNote,n=t.staffEntries[0].findGraphicalNoteFromNote(e),s=t.staffEntries.last().findGraphicalNoteFromNote(i);if(!n&&!s)return;let r,o,a,l,c=1;e.FretNumber>i.FretNumber&&(c=-1),n&&n.vfnote&&n.vfnote.length>=2&&(a=n.vfnote[0],r=[0]),s&&s.vfnote&&s.vfnote.length>=2&&(l=s.vfnote[0],o=[0]);const h=new u.TabSlide({first_indices:r,first_note:a,last_indices:o,last_note:l},c),d=null===n||void 0===n?void 0:n.parentVoiceEntry.parentStaffEntry.parentMeasure;d&&(d.vfTies.push(h),t.vfTie=h);const f=null===s||void 0===s?void 0:s.parentVoiceEntry.parentStaffEntry.parentMeasure;f&&(f.vfTies.push(h),t.vfTie=h)}}}t.VexFlowMusicSheetCalculator=I},813:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionUtil=void 0,Array.prototype.last||Object.defineProperty(Array.prototype,"last",{enumerable:!1,writable:!0,value:function(){return this[this.length-1]}}),Array.prototype.clear||Object.defineProperty(Array.prototype,"clear",{enumerable:!1,writable:!0,value:function(){this.length=0}}),Array.prototype.contains||Object.defineProperty(Array.prototype,"contains",{enumerable:!1,writable:!0,value:function(e){return-1!==this.indexOf(e)}}),t.CollectionUtil=class{static contains2(e,t){for(let i=0;i<e.length;i++)if(e[i]===t)return!0;return!1}static last(e){return e[e.length-1]}static flat(e){return[].concat(...e)}static removeDictElementIfTrue(e,t,i){const n=[];t.forEach((function(t,s){i(e,t,s)&&n.push(t)}));for(let s=0;s<n.length;s++)t.remove(n[s])}static getLastElement(e){return e[e.length-1]}static binarySearch(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length-1,r=1,o=-1;for(;n<=s&&(r=Math.floor((n+s)/2),r!==o);){const a=i(e[r],t);if(0===a)return r;a<0&&(n=r+1),0<a&&(s=r),o=r}return-r}}},899:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(9490),t),s(i(1974),t),s(i(8927),t),s(i(1083),t),s(i(6438),t),s(i(995),t),s(i(2683),t),s(i(242),t),s(i(3661),t),s(i(9713),t),s(i(6659),t),s(i(953),t),s(i(1066),t),s(i(6711),t),s(i(98),t),s(i(5023),t),s(i(3361),t),s(i(8254),t),s(i(6452),t),s(i(2395),t),s(i(7751),t),s(i(1519),t),s(i(5748),t),s(i(1888),t),s(i(8724),t),s(i(3430),t),s(i(7741),t),s(i(2768),t),s(i(973),t),s(i(4022),t),s(i(348),t),s(i(9760),t),s(i(5054),t),s(i(4548),t),s(i(7225),t),s(i(7921),t),s(i(1932),t),s(i(512),t),s(i(5221),t),s(i(7066),t),s(i(8033),t),s(i(7624),t),s(i(8713),t),s(i(2779),t),s(i(2919),t),s(i(298),t),s(i(4284),t),s(i(67),t),s(i(6954),t),s(i(6723),t),s(i(7499),t)},953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalComment=void 0,t.GraphicalComment=class{constructor(e,t){this.label=e,this.settings=t}}},973:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalRectangle=void 0;const n=i(6438),s=i(7741);class r extends s.GraphicalObject{constructor(e,t,i,s){super(),this.boundingBox=new n.BoundingBox(this,i),this.boundingBox.RelativePosition=e,this.boundingBox.BorderRight=t.x-e.x,this.boundingBox.BorderBottom=t.y-e.y,this.style=s}}t.GraphicalRectangle=r},995:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Clickable=void 0;const n=i(7741);class s extends n.GraphicalObject{}t.Clickable=s},1066:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalContinuousDynamicExpression=void 0;const s=i(6452),r=i(5875),o=i(9409),a=i(9490),l=i(6362),c=n(i(3065));class h extends a.AbstractGraphicalExpression{constructor(e,t,i){super(t,e,i),this.lines=[],this.isSplittedPart=!1,this.notToBeRemoved=!1}get StartMeasure(){return this.startMeasure}set StartMeasure(e){this.startMeasure=e}get EndMeasure(){return this.endMeasure}set EndMeasure(e){this.endMeasure=e}get EndStaffLine(){return this.endMeasure?this.endMeasure.ParentStaffLine:void 0}get IsSplittedPart(){return this.isSplittedPart}set IsSplittedPart(e){this.isSplittedPart=e}get IsVerbal(){return this.ContinuousDynamic.Label&&this.ContinuousDynamic.Label.length>0}get NotToBeRemoved(){return this.notToBeRemoved}set NotToBeRemoved(e){this.notToBeRemoved=e}get Lines(){return this.lines}get ContinuousDynamic(){return this.SourceExpression}updateSkyBottomLine(){var e;const t=this.parentStaffLine.SkyBottomLineCalculator,i=this.IsVerbal?this.label.PositionAndShape.RelativePosition.x+this.label.PositionAndShape.BorderMarginLeft:0,n=this.IsVerbal?this.label.PositionAndShape.RelativePosition.x+this.label.PositionAndShape.BorderMarginRight:0;switch(!this.IsSoftAccent&&!this.IsVerbal&&this.lines.length<2&&c.default.warn("Not enough lines for SkyBottomLine calculation"),this.IsVerbal||this.ContinuousDynamic.DynamicType!==r.ContDynamicEnum.crescendo&&this.ContinuousDynamic.DynamicType!==r.ContDynamicEnum.diminuendo&&c.default.warn("GraphicalContinuousDynamicExpression.updateSkyBottomLine(): unhandled continuous dynamic type. start measure: "+(null===(e=this.startMeasure)||void 0===e?void 0:e.MeasureNumber)),this.Placement){case l.PlacementEnum.Above:if(this.IsSoftAccent)t.updateSkyLineWithWedge(this.lines[0].Start,this.lines[0].End),t.updateSkyLineWithWedge(this.lines[2].End,this.lines[2].Start),t.updateSkyLineWithLine(this.lines[0].End,this.lines[2].End,this.lines[0].End.y);else if(this.IsVerbal){const e=this.label.PositionAndShape.BorderMarginTop+this.label.PositionAndShape.RelativePosition.y;t.updateSkyLineInRange(i,n,e)}else this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?t.updateSkyLineWithWedge(this.lines[0].Start,this.lines[0].End):this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.diminuendo&&t.updateSkyLineWithWedge(this.lines[0].End,this.lines[0].Start);break;case l.PlacementEnum.Below:if(this.IsVerbal){const e=this.label.PositionAndShape.BorderMarginBottom+this.label.PositionAndShape.RelativePosition.y;t.updateBottomLineInRange(i,n,e)}else this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?t.updateBottomLineWithWedge(this.lines[1].Start,this.lines[1].End):this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.diminuendo&&t.updateBottomLineWithWedge(this.lines[1].End,this.lines[1].Start);break;default:c.default.error("Placement for GraphicalContinuousDynamicExpression is unknown")}}createCrescendoLines(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth;const r=new o.PointF2D(e,i),a=new o.PointF2D(t,i-n/2),l=new o.PointF2D(t,i+n/2);this.addWedgeLines(r,a,l,s)}createFirstHalfCrescendoLines(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeMeasureEndOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth;const r=new o.PointF2D(e,i),a=new o.PointF2D(t,i-n/2),l=new o.PointF2D(t,i+n/2);this.addWedgeLines(r,a,l,s)}createSecondHalfCrescendoLines(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeMeasureBeginOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeOpeningLength,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.rules.WedgeLineWidth;const a=new o.PointF2D(e,i-n/2),l=new o.PointF2D(e,i+n/2),c=new o.PointF2D(t,i-s/2),h=new o.PointF2D(t,i+s/2);this.addDoubleLines(a,c,l,h,r)}recalculateCrescendoLines(e,t,i){const n=Math.abs(this.lines[0].Start.y-this.lines[1].Start.y)>1e-4;this.lines.clear(),n?this.createSecondHalfCrescendoLines(e,t,i):this.isSplittedPart?this.createFirstHalfCrescendoLines(e,t,i):this.createCrescendoLines(e,t,i)}createDiminuendoLines(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth;const r=new o.PointF2D(e,i-n/2),a=new o.PointF2D(e,i+n/2),l=new o.PointF2D(t,i);this.addWedgeLines(l,r,a,s)}createFirstHalfDiminuendoLines(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeMeasureEndOpeningLength,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.rules.WedgeLineWidth;const a=new o.PointF2D(e,i-n/2),l=new o.PointF2D(e,i+n/2),c=new o.PointF2D(t,i-s/2),h=new o.PointF2D(t,i+s/2);this.addDoubleLines(a,c,l,h,r)}createSecondHalfDiminuendoLines(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeMeasureBeginOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth;const r=new o.PointF2D(e,i-n/2),a=new o.PointF2D(e,i+n/2),l=new o.PointF2D(t,i);this.addWedgeLines(l,r,a,s)}recalculateDiminuendoLines(e,t,i){const n=Math.abs(this.lines[0].End.y-this.lines[1].End.y)>1e-4;this.lines.clear(),n?this.createFirstHalfDiminuendoLines(e,t,i):this.isSplittedPart?this.createSecondHalfDiminuendoLines(e,t,i):this.createDiminuendoLines(e,t,i)}createFirstHalfLines(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeMeasureEndOpeningLength,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.rules.WedgeLineWidth;this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?this.createFirstHalfCrescendoLines(e,t,i,s,o):this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.diminuendo&&this.createFirstHalfDiminuendoLines(e,t,i,n,s,o)}createSecondHalfLines(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeMeasureBeginOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeOpeningLength,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.rules.WedgeLineWidth;this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?this.createSecondHalfCrescendoLines(e,t,i,n,s,o):this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.diminuendo&&this.createSecondHalfDiminuendoLines(e,t,i,n,o)}createLines(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth;this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?this.createCrescendoLines(e,t,i,n,s):this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.diminuendo&&this.createDiminuendoLines(e,t,i,n,s)}calcPsi(){this.IsVerbal?this.PositionAndShape.calculateBoundingBox():(this.PositionAndShape.RelativePosition=this.lines[0].Start,this.PositionAndShape.BorderMarginTop=this.lines[0].End.y-this.lines[0].Start.y,this.PositionAndShape.BorderMarginBottom=this.lines[1].End.y-this.lines[1].Start.y,this.PositionAndShape.Center.y=(this.PositionAndShape.BorderMarginTop+this.PositionAndShape.BorderMarginBottom)/2,this.IsSoftAccent?(this.PositionAndShape.BorderMarginLeft=0,this.PositionAndShape.BorderMarginRight=this.lines[3].Start.x-this.lines[0].Start.x):this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?(this.PositionAndShape.BorderMarginLeft=0,this.PositionAndShape.BorderMarginRight=this.lines[0].End.x-this.lines[0].Start.x):(this.PositionAndShape.BorderMarginLeft=this.lines[0].End.x-this.lines[0].Start.x,this.PositionAndShape.BorderMarginRight=0))}cleanUp(){this.lines.clear()}shiftYPosition(e){this.IsVerbal?(this.PositionAndShape.RelativePosition.y+=e,this.PositionAndShape.calculateBoundingBox()):(this.lines[0].Start.y+=e,this.lines[0].End.y+=e,this.lines[1].End.y+=e)}squeeze(e){this.IsVerbal||Math.abs(this.lines[0].End.x-this.lines[0].Start.x)<Math.abs(e)||(this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?e>0?this.lines[0].Start.x+=e:(this.lines[0].End.x+=e,this.lines[1].End.x+=e):e<0?this.lines[0].Start.x+=e:(this.lines[0].End.x+=e,this.lines[1].End.x+=e),this.calcPsi())}addWedgeLines(e,t,i,n){const r=new s.GraphicalLine(e,t,n),o=new s.GraphicalLine(e,i,n);this.rules.DefaultColorMusic&&(r.colorHex=this.rules.DefaultColorMusic,o.colorHex=this.rules.DefaultColorMusic),this.lines.push(r),this.lines.push(o)}addDoubleLines(e,t,i,n,r){const o=new s.GraphicalLine(e,t,r),a=new s.GraphicalLine(i,n,r);this.rules.DefaultColorMusic&&(o.colorHex=this.rules.DefaultColorMusic,a.colorHex=this.rules.DefaultColorMusic),this.lines.push(o),this.lines.push(a)}}t.GraphicalContinuousDynamicExpression=h},1083:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignmentManager=void 0;const n=i(2400),s=i(9409);t.AlignmentManager=class{constructor(e){this.parentStaffline=e,this.rules=this.parentStaffline.ParentMusicSystem.rules}alignDynamicExpressions(){const e=[];let t=new Array;for(let n=0;n<this.parentStaffline.AbstractExpressions.length-1;n++){var i,s;const r=this.parentStaffline.AbstractExpressions[n],o=this.parentStaffline.AbstractExpressions[n+1];if((null===r||void 0===r||null===(i=r.SourceExpression)||void 0===i?void 0:i.Placement)===(null===o||void 0===o||null===(s=o.SourceExpression)||void 0===s?void 0:s.Placement)){const i=this.getDistance(r.PositionAndShape,o.PositionAndShape);Math.abs(i.x)<this.rules.DynamicExpressionMaxDistance?(-1===t.indexOf(r)&&t.push(r),t.push(o)):(e.push(t),t=new Array)}}e.push(t);for(const r of e)if(r.length>0){const e=r.map((e=>e.PositionAndShape.Center.y)),t=Math.max(...e);for(let i=0;i<r.length;i++){const s=r[i],o=e[i]-t;if(s instanceof n.VexFlowContinuousDynamicExpression?(s.shiftYPosition(-o),s.calcPsi()):(s.PositionAndShape.RelativePosition.y-=.8*o,s.PositionAndShape.calculateBoundingBox()),s.squeeze){const e=i<r.length-1?r[i+1]:void 0,t=i>0?r[i-1]:void 0;if(e){const t=this.getOverlap(s.PositionAndShape,e.PositionAndShape);s.squeeze(-(t.x+this.rules.DynamicExpressionSpacer))}if(t){const e=this.getOverlap(t.PositionAndShape,s.PositionAndShape);s.squeeze(e.x+this.rules.DynamicExpressionSpacer)}}}}}getDistance(e,t){const i=e.RelativePosition.x+e.BorderMarginRight,n=t.RelativePosition.x+t.BorderMarginLeft,r=e.RelativePosition.y+e.BorderMarginBottom,o=t.RelativePosition.y+t.BorderMarginTop;return new s.PointF2D(n-i,o-r)}getOverlap(e,t){return new s.PointF2D(e.RelativePosition.x+e.BorderMarginRight-(t.RelativePosition.x+t.BorderMarginLeft),e.RelativePosition.y+e.BorderMarginBottom-(t.RelativePosition.y+t.BorderMarginTop))}}},1110:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicsContainer=void 0;const n=i(5875),s=i(2148);t.DynamicsContainer=class{constructor(e,t){e instanceof n.ContinuousDynamicExpression?this.continuousDynamicExpression=e:e instanceof s.InstantaneousDynamicExpression&&(this.instantaneousDynamicExpression=e),this.staffNumber=t}static Compare(e,t){return e.parMultiExpression().AbsoluteTimestamp.CompareTo(t.parMultiExpression().AbsoluteTimestamp)}parMultiExpression(){return this.continuousDynamicExpression?this.continuousDynamicExpression.StartMultiExpression:this.instantaneousDynamicExpression?this.instantaneousDynamicExpression.ParentMultiExpression:void 0}}},1112:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownExpression=void 0;const n=i(6362),s=i(7533);class r extends n.AbstractExpression{constructor(e,t,i,n){super(t),this.label=e,this.staffNumber=n,void 0===i&&(i=s.TextAlignmentEnum.LeftBottom),this.textAlignment=i}get Label(){return this.label}get Placement(){return this.placement}set Placement(e){this.placement=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get TextAlignment(){return this.textAlignment}}t.UnknownExpression=r},1121:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(9024),t),s(i(474),t)},1216:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowGlissando=void 0;const n=i(98);class s extends n.GraphicalGlissando{}t.VexFlowGlissando=s},1272:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstrumentReader=void 0;const s=i(469),r=i(2369),o=i(164),a=i(4543),l=i(9288),c=i(2561),h=i(9767),u=i(7307),d=i(164),f=i(9288),p=i(4543),m=n(i(3065)),g=i(164),b=i(9536),v=i(5984),y=i(3186),x=i(1336),S=i(5282),E=i(6954);t.InstrumentReader=class{constructor(e,t,i,n){this.voiceGeneratorsDict={},this.staffMainVoiceGeneratorDict={},this.divisions=0,this.currentClefNumber=1,this.currentXmlMeasureIndex=0,this.activeKeyHasBeenInitialized=!1,this.abstractInstructions=[],this.repetitionInstructionReader=t,this.xmlMeasureList=i,this.musicSheet=n.GetMusicSheet,this.instrument=n,this.activeClefs=new Array(n.Staves.length),this.activeClefsHaveBeenInitialized=new Array(n.Staves.length);for(let s=0;s<n.Staves.length;s++)this.activeClefsHaveBeenInitialized[s]=!1;this.createExpressionGenerators(n.Staves.length),this.slurReader=new y.SlurReader(this.musicSheet),this.pluginManager=e}get ActiveKey(){return this.activeKey}get MaxTieNoteFraction(){return this.maxTieNoteFraction}get ActiveRhythm(){return this.activeRhythm}set ActiveRhythm(e){this.activeRhythm=e}readNextXmlMeasure(e,t,i){if(this.currentXmlMeasureIndex>=this.xmlMeasureList.length)return!1;this.currentMeasure=e,this.followingMultirestMeasures=Math.max(this.followingMultirestMeasures-1,0),this.inSourceMeasureInstrumentIndex=this.musicSheet.getGlobalStaffIndexOfFirstStaff(this.instrument),this.repetitionInstructionReader&&this.repetitionInstructionReader.prepareReadingMeasure(e,this.currentXmlMeasureIndex);let n=new c.Fraction(0,1),s=new c.Fraction(0,1),r=!1;this.maxTieNoteFraction=new c.Fraction(0,1);let o=!1;try{var a;const g=this.xmlMeasureList[this.currentXmlMeasureIndex],v=g.elements();let y;e.Rules.UseXMLMeasureNumbers&&!Number.isInteger(e.MeasureNumberXML)&&(y=parseInt(null===(a=g.attribute("number"))||void 0===a?void 0:a.value,10),Number.isInteger(y)&&(e.MeasureNumberXML=y));const x=g.attribute("osmdWidthFactor");if(x){const t=Number.parseFloat(x.value);"number"!=typeof t||isNaN(t)?m.default.info("xml parse: osmdWidthFactor invalid for measure ".concat(y)):e.WidthFactor=t}let S;for(let a=0;a<v.length;a++){const g=v[a];if(a>0&&(S=v[a-1]),"print"===g.name){const t=g.attribute("new-system");"yes"===(null===t||void 0===t?void 0:t.value)&&(e.printNewSystemXml=!0);const i=g.attribute("new-page");"yes"===(null===i||void 0===i?void 0:i.value)&&(e.printNewPageXml=!0)}else if("attributes"===g.name){const t=g.element("divisions");if(t&&(this.divisions=parseInt(t.value,10),isNaN(this.divisions))){const e=h.ITextTranslation.translateText("ReaderErrorMessages/DivisionError","Invalid divisions value at Instrument: ");if(m.default.debug("InstrumentReader.readNextXmlMeasure",e),this.divisions=this.readDivisionsFromNotes(),!(this.divisions>0))throw r=!0,new u.MusicSheetReadingException(e+this.instrument.Name);this.musicSheet.SheetErrors.push(e+this.instrument.Name)}if(!g.element("divisions")&&0===this.divisions&&0===this.currentXmlMeasureIndex){const e=h.ITextTranslation.translateText("ReaderErrorMessages/DivisionError","Invalid divisions value at Instrument: ");if(this.divisions=this.readDivisionsFromNotes(),!(this.divisions>0))throw r=!0,new u.MusicSheetReadingException(e+this.instrument.Name);this.musicSheet.SheetErrors.push(e+this.instrument.Name)}this.addAbstractInstruction(g,i,S,n.clone()),n.Equals(new c.Fraction(0,1))&&this.isAttributesNodeAtBeginOfMeasure(this.xmlMeasureList[this.currentXmlMeasureIndex],g)&&this.saveAbstractInstructionList(this.instrument.Staves.length,!0),this.isAttributesNodeAtEndOfMeasure(this.xmlMeasureList[this.currentXmlMeasureIndex],g,n)&&this.saveClefInstructionAtEndOfMeasure();const s=g.elements("staff-details");for(const e of s){const t=e.element("staff-lines");if(t){let i=1;const n=e.attribute("number");n&&(i=parseInt(n.value,10)),this.instrument.Staves[i-1].StafflineCount=parseInt(t.value,10)}}const o=g.element("measure-style");if(o){const t=o.element("multiple-rest");if(t){const i=t.value;let n=0;try{n=Number.parseInt(i,10),void 0!==e.multipleRestMeasures&&n!==e.multipleRestMeasures?e.multipleRestMeasures=0:(e.multipleRestMeasures=n,this.currentMultirestStartMeasure=e,this.followingMultirestMeasures=n+1)}catch(e){console.log("multirest parse error: "+e)}}}}else if("note"===g.name){var l;let e=!0;"no"===(null===(l=g.attribute("print-object"))||void 0===l?void 0:l.value)&&(e=!1);const r=this.getNoteStaff(g);this.currentStaff=this.instrument.Staves[r-1];const a=void 0!==g.element("chord");if(g.element("voice")){const e=parseInt(g.element("voice").value,10);this.currentVoiceGenerator=this.getOrCreateVoiceGenerator(e,r-1)}else a&&this.currentVoiceGenerator||(this.currentVoiceGenerator=this.getOrCreateVoiceGenerator(1,r-1));let u,f=0,p=new c.Fraction(0,1),b=2;const v=void 0!==g.element("rest");if(g.element("duration")){var d;if(f=parseInt(g.element("duration").value,10),isNaN(f)){const e=h.ITextTranslation.translateText("ReaderErrorMessages/NoteDurationError","Invalid Note Duration.");this.musicSheet.SheetErrors.pushMeasureError(e),m.default.debug("InstrumentReader.readNextXmlMeasure",e);continue}if(p=new c.Fraction(f,4*this.divisions),v&&p.RealValue>(null===(d=this.ActiveRhythm)||void 0===d?void 0:d.Rhythm.RealValue)&&(p=this.ActiveRhythm.Rhythm.clone()),0===f?p=this.getNoteDurationFromTypeNode(g):u=this.getNoteDurationFromTypeNode(g),g.element("time-modification")){p=this.getNoteDurationForTuplet(g);const e=g.element("time-modification");(null===e||void 0===e?void 0:e.element("normal-notes"))&&(b=parseInt(e.element("normal-notes").value,10))}}const y=g.combinedElement("notations"),x=void 0!==g.element("grace")||0===f||a&&o;let S=!1,E=!1;if(x){const e=g.element("grace");e&&e.attributes()&&e.attribute("slash")&&"yes"===e.attribute("slash").value&&(S=!0),p=this.getNoteDurationFromTypeNode(g),y&&y.element("slur")&&(E=!0)}const[w,T]=this.getCueNoteAndNoteTypeXml(g),[_,M,P]=this.getStemDirectionAndColors(g);let C,A=!1;if(y){const e=y.element("ornaments");e&&(C=this.getTremoloInfo(e),A=this.getVibratoStrokes(e))}const N=a?s.clone():n.clone();this.currentStaffEntry=this.currentMeasure.findOrCreateStaffEntry(N,this.inSourceMeasureInstrumentIndex+r-1,this.currentStaff).staffEntry,(!this.currentVoiceGenerator.hasVoiceEntry()||!a&&!x&&!o||x&&!o||x&&!a||!x&&o)&&this.currentVoiceGenerator.createVoiceEntry(N,this.currentStaffEntry,!x,x,S,E),x||a||(s=n.clone(),n.Add(p)),a&&void 0!==this.currentStaffEntry&&this.currentStaffEntry.ParentStaff!==this.currentStaff&&(this.currentStaffEntry=this.currentVoiceGenerator.checkForStaffEntryLink(this.inSourceMeasureInstrumentIndex+r-1,this.currentStaff,this.currentStaffEntry,this.currentMeasure));const L=void 0!==this.currentStaffEntry&&void 0!==this.currentStaffEntry.Timestamp&&this.currentStaffEntry.Timestamp.Equals(new c.Fraction(0,1))&&!this.currentStaffEntry.hasNotes();this.saveAbstractInstructionList(this.instrument.Staves.length,L),this.activeRhythm;const k=g.elements("dot").length;if(this.currentVoiceGenerator.read(g,p,u,T,b,v,this.currentStaffEntry,this.currentMeasure,t,this.maxTieNoteFraction,a,i,e,w,x,_,C,M,P,A,k),void 0!==y&&y.element("dynamics")){const e=this.expressionReaders[this.readExpressionStaffNumber(g)-1];e&&(e.readExpressionParameters(g,this.instrument,this.divisions,n,s,this.currentMeasure.MeasureNumber,!1),e.read(g,this.currentMeasure,s))}o=x}else if("forward"===g.name){const e=parseInt(g.element("duration").value,10);n.Add(new c.Fraction(e,4*this.divisions))}else if("backup"===g.name){const e=parseInt(g.element("duration").value,10);n.Sub(new c.Fraction(e,4*this.divisions)),n.IsNegative()&&(n=new c.Fraction(0,1)),s.Sub(new c.Fraction(e,4*this.divisions)),s.IsNegative()&&(s=new c.Fraction(0,1))}else if("direction"===g.name){const e=g.element("direction-type");let t=Math.min(1,n.RealValue);void 0!==this.activeRhythm&&this.activeRhythm.Rhythm&&(t/=this.activeRhythm.Rhythm.RealValue);let i=!1;if(this.repetitionInstructionReader&&(i=this.repetitionInstructionReader.handleRepetitionInstructionsFromWordsOrSymbols(e,t)),!i){let t=this.expressionReaders[0];const i=this.readExpressionStaffNumber(g)-1;i<this.expressionReaders.length&&(t=this.expressionReaders[i]),t&&(e.element("octave-shift")&&(t.readExpressionParameters(g,this.instrument,this.divisions,n,s,this.currentMeasure.MeasureNumber,!0),t.addOctaveShift(g,this.currentMeasure,s.clone())),e.element("pedal")&&(t.readExpressionParameters(g,this.instrument,this.divisions,n,s,this.currentMeasure.MeasureNumber,!0),t.addPedalMarking(g,this.currentMeasure,n.clone())),t.readExpressionParameters(g,this.instrument,this.divisions,n,s,this.currentMeasure.MeasureNumber,!1),t.read(g,this.currentMeasure,n,s.clone()))}}else if("barline"===g.name){var f;this.repetitionInstructionReader&&this.repetitionInstructionReader.handleLineRepetitionInstructions(g)&&(this.currentMeasure.HasEndLine=!0);const e=g.attribute("location"),t=null!==(f=null===e||void 0===e?void 0:e.value)&&void 0!==f?f:"right";if(a===v.length-1||"right"===t){var p;const e=null===(p=g.element("bar-style"))||void 0===p?void 0:p.value;e&&(this.currentMeasure.endingBarStyleXml=e,this.currentMeasure.endingBarStyleEnum=E.SystemLinesEnumHelper.xmlBarlineStyleToSystemLinesEnum(e))}}else if("sound"===g.name)try{if(g.attribute("tempo")){const e=parseFloat(g.attribute("tempo").value);0===this.currentXmlMeasureIndex&&(this.musicSheet.DefaultStartTempoInBpm=e,this.musicSheet.HasBPMInfo=!0)}}catch(e){m.default.debug("InstrumentReader.readTempoInstruction",e)}else if("harmony"===g.name){const e=this.getNoteStaff(g);this.currentStaff=this.instrument.Staves[e-1];const t=n.clone();this.currentStaffEntry=this.currentMeasure.findOrCreateStaffEntry(t,this.inSourceMeasureInstrumentIndex+e-1,this.currentStaff).staffEntry,this.currentStaffEntry.ChordContainers.push(b.ChordSymbolReader.readChordSymbol(g,this.musicSheet,this.activeKey))}}for(const e in this.voiceGeneratorsDict)this.voiceGeneratorsDict.hasOwnProperty(e)&&this.voiceGeneratorsDict[e].checkForOpenBeam();if(this.currentXmlMeasureIndex===this.xmlMeasureList.length-1){for(let e=0;e<this.instrument.Staves.length;e++)this.activeClefsHaveBeenInitialized[e]||this.createDefaultClefInstruction(this.musicSheet.getGlobalStaffIndexOfFirstStaff(this.instrument)+e);this.activeKeyHasBeenInitialized||this.createDefaultKeyInstruction();for(let e=0;e<this.expressionReaders.length;e++){const t=this.expressionReaders[e];t&&t.closeOpenExpressions(this.currentMeasure,n)}}this.musicSheet.HasBPMInfo?0===e.TempoInBPM&&this.previousMeasure&&(this.currentMeasure.TempoInBPM=this.previousMeasure.TempoInBPM):this.currentMeasure.TempoInBPM=120}catch(e){if(r)throw new u.MusicSheetReadingException(e.Message);const t=h.ITextTranslation.translateText("ReaderErrorMessages/MeasureError","Error while reading Measure.");this.musicSheet.SheetErrors.pushMeasureError(t),m.default.debug("InstrumentReader.readNextXmlMeasure",t,e)}return this.previousMeasure=this.currentMeasure,this.currentXmlMeasureIndex+=1,!0}getStemDirectionAndColors(e){let t,i=x.StemDirectionType.Undefined;const n=e.element("stem");if(n){i=this.getStemDirectionType(n);const e=n.attribute("color");e&&(t=this.parseXmlColor(e.value))}let s=this.getNoteHeadColorXml(e);const r=this.getNoteColorXml(e);return r&&!s&&(s=r),r&&!t&&(t=r),[i,t,s]}parseXmlColor(e){return e}doCalculationsAfterDurationHasBeenSet(){for(const e in this.voiceGeneratorsDict)this.voiceGeneratorsDict.hasOwnProperty(e)&&this.voiceGeneratorsDict[e].checkOpenTies()}getOrCreateVoiceGenerator(e,t){const i=this.instrument.Staves[t];let n=this.voiceGeneratorsDict[e];if(n)-1===i.Voices.indexOf(n.GetVoice)&&i.Voices.push(n.GetVoice);else{const r=this.staffMainVoiceGeneratorDict[t];r?(n=new s.VoiceGenerator(this.pluginManager,i,e,this.slurReader,r.GetVoice),i.Voices.push(n.GetVoice),this.voiceGeneratorsDict[e]=n):(n=new s.VoiceGenerator(this.pluginManager,i,e,this.slurReader),i.Voices.push(n.GetVoice),this.voiceGeneratorsDict[e]=n,this.staffMainVoiceGeneratorDict[t]=n)}return n}createExpressionGenerators(e){this.expressionReaders=new Array(e);for(let t=0;t<e;t++)this.expressionReaders[t]=new v.ExpressionReader(this.musicSheet,this.instrument,t+1)}createDefaultClefInstruction(e){let t;t=this.musicSheet.SourceMeasures.length>0?this.musicSheet.SourceMeasures[0]:this.currentMeasure;const i=new o.ClefInstruction(d.ClefEnum.G,0,2);let n;t.FirstInstructionsStaffEntries[e]?(n=t.FirstInstructionsStaffEntries[e],n.removeFirstInstructionOfTypeClefInstruction()):(n=new r.SourceStaffEntry(void 0,void 0),t.FirstInstructionsStaffEntries[e]=n),i.Parent=n,n.Instructions.splice(0,0,i)}createDefaultKeyInstruction(){let e;e=this.musicSheet.SourceMeasures.length>0?this.musicSheet.SourceMeasures[0]:this.currentMeasure;const t=new a.KeyInstruction(void 0,0,p.KeyEnum.major);for(let i=this.inSourceMeasureInstrumentIndex;i<this.inSourceMeasureInstrumentIndex+this.instrument.Staves.length;i++)if(e.FirstInstructionsStaffEntries[i]){const n=e.FirstInstructionsStaffEntries[i];t.Parent=n,n.removeFirstInstructionOfTypeKeyInstruction(),n.Instructions[0]instanceof o.ClefInstruction?n.Instructions.splice(1,0,t):n.Instructions.splice(0,0,t)}else{const n=new r.SourceStaffEntry(void 0,void 0);e.FirstInstructionsStaffEntries[i]=n,t.Parent=n,n.Instructions.push(t)}}isAttributesNodeAtBeginOfMeasure(e,t){const i=e.elements(),n=i.indexOf(t);if(n>0&&"backup"===i[n-1].name)return!0;let s=-1;for(let r=0;r<i.length;r++)if("note"===i[r].name){s=r;break}return n<s&&s>0||s<0}isAttributesNodeAtEndOfMeasure(e,t,i){var n;if(i.Equals(null===(n=this.ActiveRhythm)||void 0===n?void 0:n.Rhythm))return!0;const s=e.elements().slice();let r=0;for(let a=0;a<s.length;a++)if(s[a]===t){r=a;break}let o=0;for(let a=r;a<s.length;a++)if("note"===s[a].name){o=a;break}return r>o}getNoteDurationFromTypeNode(e){const t=e.element("type");if(t){const e=t.value;return S.NoteTypeHandler.getNoteDurationFromType(e)}return new c.Fraction(0,4*this.divisions)}addAbstractInstruction(e,t,i,n){if(e.element("divisions")&&1===e.elements().length)return;const s=e.element("transpose");if(s){const e=s.element("chromatic");e&&(this.instrument.PlaybackTranspose=parseInt(e.value,10))}const r=e.elements("clef");let u;if(r.length>0)for(let a=0,l=r.length;a<l;++a){const t=r[a];let i=d.ClefEnum.G,s=2,l=1,c=0;const f=t.element("line");if(f)try{s=parseInt(f.value,10)}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/ClefLineError","Invalid clef line. Using default."),this.musicSheet.SheetErrors.pushMeasureError(u),s=2,m.default.debug("InstrumentReader.addAbstractInstruction",u,e)}const p=t.element("sign");if(p)try{i=d.ClefEnum[p.value],o.ClefInstruction.isSupportedClef(i)||(u=h.ITextTranslation.translateText("ReaderErrorMessages/ClefError","Unsupported clef. Using default."),this.musicSheet.SheetErrors.pushMeasureError(u),i=d.ClefEnum.G,s=2),i===d.ClefEnum.TAB&&(c=-1)}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/ClefError","Invalid clef. Using default."),this.musicSheet.SheetErrors.pushMeasureError(u),i=d.ClefEnum.G,s=2,m.default.debug("InstrumentReader.addAbstractInstruction",u,e)}const g=t.element("clef-octave-change");if(g)try{c=parseInt(g.value,10)}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/ClefOctaveError","Invalid clef octave. Using default."),this.musicSheet.SheetErrors.pushMeasureError(u),c=0}if(t.hasAttributes&&t.attribute("number"))try{l=parseInt(t.attribute("number").value,10),l>this.currentClefNumber&&(l=this.currentClefNumber),this.currentClefNumber=l+1}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/ClefError","Invalid clef. Using default."),this.musicSheet.SheetErrors.pushMeasureError(u),l=1,this.currentClefNumber=l+1}const b=new o.ClefInstruction(i,c,s);this.abstractInstructions.push([l,b,n])}if(void 0!==e.element("key")&&this.instrument.MidiInstrumentId!==g.MidiInstrument.Percussion){let t=0;const i=e.element("key").element("fifths");if(i)try{t=parseInt(i.value,10)}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/KeyError","Invalid key. Set to default."),this.musicSheet.SheetErrors.pushMeasureError(u),t=0,m.default.debug("InstrumentReader.addAbstractInstruction",u,e)}let s=p.KeyEnum.none,r=e.element("key");if(r&&(r=r.element("mode")),r)try{s=p.KeyEnum[r.value]}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/KeyError","Invalid key/mode. Set to default."),this.musicSheet.SheetErrors.pushMeasureError(u),s=p.KeyEnum.major,m.default.debug("InstrumentReader.addAbstractInstruction",u,e)}const o=new a.KeyInstruction(void 0,t,s);this.abstractInstructions.push([1,o,n])}if(e.element("time")){const t=e.element("time");let i=f.RhythmSymbolEnum.NONE,s=!0;if(void 0!==t&&t.hasAttributes){const e=t.attribute("symbol");e&&("common"===e.value?i=f.RhythmSymbolEnum.COMMON:"cut"===e.value&&(i=f.RhythmSymbolEnum.CUT));const n=t.attribute("print-object");n&&"no"===n.value&&(s=!1)}let r=0,o=0;const a=t&&void 0!==t.element("senza-misura"),d=e.elements("time"),p=[],g=[];for(let e=0,n=d.length;e<n;++e){const t=d[e];p.push.apply(p,t.elements("beats")),g.push.apply(g,t.elements("beat-type"))}if(a)this.abstractInstructions.push([1,new l.RhythmInstruction(new c.Fraction(4,4,0,!1),f.RhythmSymbolEnum.NONE),n]);else{try{if(void 0!==p&&p.length>0&&void 0!==g&&p.length===g.length){const e=p.length,t=new Array(e);let i=0;for(let n=0;n<e;n++){const e=p[n].value;let s=0,r=0;if(-1!==e.indexOf("+")){const t=e.split("+");for(let e=0,i=t.length;e<i;++e)s+=parseInt(t[e],10)}else s=parseInt(e,10);r=parseInt(g[n].value,10),i=Math.max(i,r),t[n]=new c.Fraction(s,r,0,!1)}for(let n=0;n<e;n++)t[n].Denominator===i?r+=t[n].Numerator:r+=i/t[n].Denominator*t[n].Numerator;o=i}else r=parseInt(e.element("time").element("beats").value,10),o=parseInt(e.element("time").element("beat-type").value,10)}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/RhythmError","Invalid rhythm. Set to default."),this.musicSheet.SheetErrors.pushMeasureError(u),r=4,o=4,m.default.debug("InstrumentReader.addAbstractInstruction",u,e)}const t=new l.RhythmInstruction(new c.Fraction(r,o,0,!1),i);t.PrintObject=s,this.abstractInstructions.push([1,t,n])}}}saveAbstractInstructionList(e,t){for(let i=this.abstractInstructions.length-1;i>=0;i--){const n=this.abstractInstructions[i],s=n[0],c=n[1],h=n[2];if(c instanceof o.ClefInstruction){const e=c;if(0===this.currentXmlMeasureIndex||s<=this.activeClefs.length&&e!==this.activeClefs[s-1])if(t||void 0===this.currentStaffEntry||this.currentStaffEntry.hasNotes()||s-1!==this.instrument.Staves.indexOf(this.currentStaffEntry.ParentStaff))if(t){if(0!==h.RealValue)continue;let t;if(this.currentMeasure){const n=e,a=this.inSourceMeasureInstrumentIndex+s-1,l=this.currentMeasure.FirstInstructionsStaffEntries[a];if(0===this.currentXmlMeasureIndex)if(l)if(void 0===this.currentMeasure.FirstInstructionsStaffEntries[a]||l.Instructions[0]instanceof o.ClefInstruction){const e=new r.SourceStaffEntry(void 0,void 0);this.currentMeasure.LastInstructionsStaffEntries[a]=e,n.Parent=e,e.Instructions.push(n)}else t=l,n.Parent=t,t.removeFirstInstructionOfTypeClefInstruction(),t.Instructions.splice(0,0,n),this.activeClefsHaveBeenInitialized[s-1]=!0;else t=new r.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[a]=t,n.Parent=t,t.Instructions.push(n),this.activeClefsHaveBeenInitialized[s-1]=!0;else if(this.activeClefsHaveBeenInitialized[s-1]){let e=this.previousMeasure;this.followingMultirestMeasures>0&&this.currentMeasure.Rules.RenderMultipleRestMeasures&&(e=this.currentMultirestStartMeasure);const t=new r.SourceStaffEntry(void 0,void 0);e.LastInstructionsStaffEntries[a]=t,n.Parent=t,t.Instructions.push(n)}else{const e=this.musicSheet.SourceMeasures[0];e.FirstInstructionsStaffEntries[a]?(t=e.FirstInstructionsStaffEntries[a],t.removeFirstInstructionOfTypeClefInstruction()):t=new r.SourceStaffEntry(void 0,void 0),n.Parent=t,t.Instructions.splice(0,0,n),this.activeClefsHaveBeenInitialized[s-1]=!0}this.activeClefs[s-1]=e,this.abstractInstructions.splice(i,1)}}else{let t;const n=this.activeRhythm.Rhythm;n.RealValue>0&&h.RealValue/n.RealValue>.9&&n.RealValue!==h.RealValue&&(this.currentMeasure.LastInstructionsStaffEntries[s-1]||(this.currentMeasure.LastInstructionsStaffEntries[s-1]=new r.SourceStaffEntry(void 0,this.instrument.Staves[s-1])),t=this.currentMeasure.LastInstructionsStaffEntries[s-1]),t&&(e.Parent=t,t.Instructions.push(e),this.activeClefs[s-1]=e,this.abstractInstructions.splice(i,1))}else{const t=e,n=this.currentStaffEntry;if(h&&Math.abs(h.RealValue-n.Timestamp.RealValue)>.01)continue;t.Parent=n,n.removeFirstInstructionOfTypeClefInstruction(),n.Instructions.push(t),this.activeClefs[s-1]=e,this.abstractInstructions.splice(i,1)}else s<=this.activeClefs.length&&e===this.activeClefs[s-1]&&this.abstractInstructions.splice(i,1)}if(c instanceof a.KeyInstruction){const t=c;if(this.activeKey&&this.activeKey.Key===t.Key)this.abstractInstructions.splice(i,1);else{let n;if(this.activeKey=t,this.abstractInstructions.splice(i,1),this.activeKeyHasBeenInitialized?n=this.currentMeasure:(this.activeKeyHasBeenInitialized=!0,n=this.currentXmlMeasureIndex>0?this.musicSheet.SourceMeasures[0]:this.currentMeasure),n)for(let i=this.inSourceMeasureInstrumentIndex;i<this.inSourceMeasureInstrumentIndex+e;i++){const e=t;if(n.FirstInstructionsStaffEntries[i]){const t=n.FirstInstructionsStaffEntries[i];e.Parent=t,t.removeFirstInstructionOfTypeKeyInstruction(),0===t.Instructions.length?t.Instructions.push(e):t.Instructions[0]instanceof o.ClefInstruction?t.Instructions.splice(1,0,e):t.Instructions.splice(0,0,e)}else{const t=new r.SourceStaffEntry(void 0,void 0);n.FirstInstructionsStaffEntries[i]=t,e.Parent=t,t.Instructions.push(e)}}}}if(c instanceof l.RhythmInstruction){const t=c;if(this.activeRhythm&&this.activeRhythm===t)this.abstractInstructions.splice(i,1);else if(this.activeRhythm=t,this.abstractInstructions.splice(i,1),this.currentMeasure)for(let i=this.inSourceMeasureInstrumentIndex;i<this.inSourceMeasureInstrumentIndex+e;i++){const e=t;let n;this.currentMeasure.FirstInstructionsStaffEntries[i]?(n=this.currentMeasure.FirstInstructionsStaffEntries[i],n.removeFirstInstructionOfTypeRhythmInstruction()):(n=new r.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[i]=n),e.Parent=n,n.Instructions.push(e)}}}}saveClefInstructionAtEndOfMeasure(){for(let e=this.abstractInstructions.length-1;e>=0;e--){const t=this.abstractInstructions[e][0],i=this.abstractInstructions[e][1];if(i instanceof o.ClefInstruction){const n=i;if(!this.activeClefs[t-1]||n.ClefType!==this.activeClefs[t-1].ClefType||n.ClefType===this.activeClefs[t-1].ClefType&&n.Line!==this.activeClefs[t-1].Line){const i=new r.SourceStaffEntry(void 0,void 0);this.currentMeasure.LastInstructionsStaffEntries[this.inSourceMeasureInstrumentIndex+t-1]=i;const s=n;s.Parent=i,i.Instructions.push(s),this.activeClefs[t-1]=n,this.abstractInstructions.splice(e,1)}}}}getNoteDurationForTuplet(e){const t=e.element("duration"),i=Number.parseInt(t.value,10);return new c.Fraction(i,4*this.divisions)}readExpressionStaffNumber(e){let t=1;if(e.element("staff")){const i=e.element("staff");if(i)try{t=parseInt(i.value,10)}catch(e){const i=h.ITextTranslation.translateText("ReaderErrorMessages/ExpressionStaffError","Invalid Expression staff number. Set to default.");this.musicSheet.SheetErrors.pushMeasureError(i),t=1,m.default.debug("InstrumentReader.readExpressionStaffNumber",i,e)}}return t}readDivisionsFromNotes(){let e=0,t=this.currentXmlMeasureIndex,i=!1;for(;!i;){const n=this.xmlMeasureList[t].elements();for(let t=0,s=n.length;t<s;++t){const s=n[t];if("note"===s.name&&!s.element("time-modification")){const t=s.element("duration"),i=s.element("type");if(void 0!==t&&i){const n=i.value;let s=0;try{s=parseInt(t.value,10)}catch(e){m.default.debug("InstrumentReader.readDivisionsFromNotes",e);continue}switch(n){case"1024th":e=s/4*1024;break;case"512th":e=s/4*512;break;case"256th":e=s/4*256;break;case"128th":e=s/4*128;break;case"64th":e=s/4*64;break;case"32nd":e=s/4*32;break;case"16th":e=s/4*16;break;case"eighth":e=s/4*8;break;case"quarter":e=s/4*4;break;case"half":e=s/4*2;break;case"whole":e=s/4;break;case"breve":e=s/4/2;break;case"long":e=s/4/4;break;case"maxima":e=s/4/8}}}if(e>0){i=!0;break}}if(0===e&&(t++,t===this.xmlMeasureList.length)){const e=h.ITextTranslation.translateText("ReaderErrorMEssages/DivisionsError","Invalid divisions value at Instrument: ");throw new u.MusicSheetReadingException(e+this.instrument.Name)}}return e}getCueNoteAndNoteTypeXml(e){let t=!1;e.element("cue")&&(t=!0);const i=e.element("type");let n=S.NoteType.UNDEFINED;if(i){const e=i.attribute("size");"cue"===(null===e||void 0===e?void 0:e.value)&&(t=!0),n=S.NoteTypeHandler.StringToNoteType(i.value)}return[t,n]}getStemDirectionType(e){switch(e.value){case"down":return x.StemDirectionType.Down;case"up":return x.StemDirectionType.Up;case"double":return x.StemDirectionType.Double;case"none":return x.StemDirectionType.None;default:return x.StemDirectionType.Undefined}}getNoteHeadColorXml(e){const t=e.element("notehead");if(t){const e=t.attribute("color");if(e)return this.parseXmlColor(e.value)}return null}getNoteColorXml(e){const t=e.attribute("color");return t?this.parseXmlColor(t.value):null}getTremoloInfo(e){let t,i;const n=e.element("tremolo");if(n){const e=n.attribute("type");if(e){if("single"===e.value){const e=parseInt(n.value,10);e>0&&(t=e)}else t=0;"unmeasured"===e.value&&(i=!0)}}return{tremoloStrokes:t,tremoloUnmeasured:i}}getVibratoStrokes(e){const t=e.element("wavy-line");if(void 0!==t){const e=t.attribute("type");if(e&&"start"===e.value)return!0}return!1}getNoteStaff(e){let t=1;return this.instrument.Staves.length>1&&e.element("staff")&&(t=parseInt(e.element("staff").value,10),isNaN(t)&&(m.default.debug("InstrumentReader.readNextXmlMeasure.get staff number"),t=1)),t}}},1325:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MappingSourceMusicPart=void 0,t.MappingSourceMusicPart=class{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.repetitionRun=-1,this.sourceMusicPart=e,this.parentPartListEntry=i,this.startTimestamp=t.clone(),this.repetitionRun=n,this.parentRepetition=i,this.isEnding=s}get IsRepetition(){return void 0!==this.parentRepetition}get IsEnding(){return this.isEnding}get IsLastRepetitionRun(){return this.IsRepetition&&this.repetitionRun+1===this.parentRepetition.UserNumberOfRepetitions}get RepetitionRun(){return this.repetitionRun}get ParentPartListEntry(){return this.parentPartListEntry}get SourceMusicPart(){return this.sourceMusicPart}get StartTimestamp(){return this.startTimestamp}CompareTo(e){return e?this.startTimestamp.CompareTo(e.startTimestamp):1}}},1327:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SkyBottomLineBatchCalculator=void 0;const s=i(5955),r=i(735),o=i(3508),a=n(i(3065)),l=i(813);t.SkyBottomLineBatchCalculator=class{constructor(e,t){const i=new Map;for(const n of e){const e=n.ParentMusicSystem.rules;(()=>{if(i.has(e))return i.get(e);{const t=[];return i.set(e,t),t}})().push({skyBottomLineCalculator:n.SkyBottomLineCalculator,measures:n.Measures})}this.batches=new Map;for(const[n,c]of i.entries()){const e=l.CollectionUtil.flat(c.map((e=>e.measures))),i=(()=>{if(t===s.SkyBottomLineBatchCalculatorBackendType.Plain)return new r.PlainSkyBottomLineBatchCalculatorBackend(n,e).initialize();try{return new o.WebGLSkyBottomLineBatchCalculatorBackend(n,e).initialize()}catch(i){return a.default.info("Couldn't create WebGLBackend for Skyline. Using fallback."),new r.PlainSkyBottomLineBatchCalculatorBackend(n,e).initialize()}})();i.initialize(),this.batches.set(n,{backend:i,entries:c})}}calculateLines(){for(const[,{backend:e,entries:t}]of this.batches){const i=e.calculateLines();let n=0;for(const{skyBottomLineCalculator:e,measures:s}of t){const t=n+s.length;e.updateLines(i.slice(n,t)),n=t}}}}},1336:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StemDirectionType=t.ArticulationEnum=t.VoiceEntry=void 0;const n=i(2561),s=i(1850),r=i(8233),o=i(8215),a=i(8233),l=i(3263);class c{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(this.notes=[],this.articulations=[],this.technicalInstructions=[],this.lyricsEntries=new l.Dictionary,this.wantedStemDirection=u.Undefined,this.stemDirectionXml=u.Undefined,this.stemDirection=u.Undefined,this.timestamp=e,this.parentVoice=t,this.parentSourceStaffEntry=i,this.isGrace=n,this.graceAfterMainNote=!1,this.graceNoteSlash=s,this.graceSlur=r,void 0!==i){const e=i.VoiceEntries;-1===e.indexOf(this)&&e.push(this)}}get ParentSourceStaffEntry(){return this.parentSourceStaffEntry}get ParentVoice(){return this.parentVoice}get Timestamp(){return this.timestamp}set Timestamp(e){this.timestamp=e}get Notes(){return this.notes}get IsGrace(){return this.isGrace}set IsGrace(e){this.isGrace=e}get GraceAfterMainNote(){return this.graceAfterMainNote}set GraceAfterMainNote(e){this.graceAfterMainNote=e}get GraceNoteSlash(){return this.graceNoteSlash}set GraceNoteSlash(e){this.graceNoteSlash=e}get GraceSlur(){return this.graceSlur}set GraceSlur(e){this.graceSlur=e}get Articulations(){return this.articulations}set Articulations(e){this.articulations=e}get TechnicalInstructions(){return this.technicalInstructions}get LyricsEntries(){return this.lyricsEntries}get Arpeggio(){return this.arpeggio}set Arpeggio(e){this.arpeggio=e}get OrnamentContainer(){return this.ornamentContainer}set OrnamentContainer(e){this.ornamentContainer=e}set WantedStemDirection(e){this.wantedStemDirection=e}get WantedStemDirection(){return this.wantedStemDirection}set StemDirectionXml(e){this.stemDirectionXml=e}get StemDirectionXml(){return this.stemDirectionXml}set StemDirection(e){this.stemDirection=e}get StemDirection(){return this.stemDirection}get StemColorXml(){return this.stemColorXml}set StemColorXml(e){this.stemColorXml=e}get StemColor(){return this.stemColor}set StemColor(e){this.stemColor=e}hasArticulation(e){for(const t of this.articulations)if(t.Equals(e))return!0;return!1}static isSupportedArticulation(e){switch(e){case h.accent:case h.strongaccent:case h.softaccent:case h.invertedstrongaccent:case h.staccato:case h.staccatissimo:case h.spiccato:case h.tenuto:case h.fermata:case h.invertedfermata:case h.breathmark:case h.caesura:case h.lefthandpizzicato:case h.naturalharmonic:case h.snappizzicato:case h.upbow:case h.downbow:case h.bend:return!0;default:return!1}}hasTie(){for(let e=0,t=this.Notes.length;e<t;++e)if(this.Notes[e].NoteTie)return!0;return!1}hasSlur(){for(let e=0,t=this.Notes.length;e<t;++e)if(this.Notes[e].NoteSlurs.length>0)return!0;return!1}isStaccato(){for(const e of this.Articulations)if(e.articulationEnum===h.staccato)return!0;return!1}isAccent(){for(const e of this.Articulations)if(e.articulationEnum===h.accent||e.articulationEnum===h.strongaccent)return!0;return!1}getVerseNumberForLyricEntry(e){let t="1";return this.lyricsEntries.forEach(((i,n)=>{e===n&&(t=i)})),t}createVoiceEntriesForOrnament(e,t){e||(e=this);const i=[];if(!e.ornamentContainer)return;const s=this.notes[0],r=s.Length,l=e.ParentVoice,c=e.Timestamp;let h=n.Fraction.createFromFraction(c);switch(e.ornamentContainer.GetOrnament){case o.OrnamentEnum.Trill:{const o=new n.Fraction(r.Numerator,8*r.Denominator),u=s.Pitch.getTransposedPitch(1);let d=t.getAlterationForPitch(u);e.OrnamentContainer.AccidentalAbove!==a.AccidentalEnum.NONE&&(d=e.ornamentContainer.AccidentalAbove);for(let e=0;e<8;e++)h=n.Fraction.plus(c,new n.Fraction(e*o.Numerator,o.Denominator)),e%2==0?this.createBaseVoiceEntry(h,o,l,s,i):this.createAlteratedVoiceEntry(h,o,l,s.SourceMeasure,u,d,i);break}case o.OrnamentEnum.Turn:{const e=new n.Fraction(r.Numerator,4*r.Denominator),o=s.Pitch.getTransposedPitch(-1),a=t.getAlterationForPitch(o),c=s.Pitch.getTransposedPitch(1),u=t.getAlterationForPitch(c);this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,c,u,i),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,i),h.Add(e),this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,o,a,i),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,i);break}case o.OrnamentEnum.InvertedTurn:{const e=new n.Fraction(r.Numerator,4*r.Denominator),o=s.Pitch.getTransposedPitch(-1),a=t.getAlterationForPitch(o),c=s.Pitch.getTransposedPitch(1),u=t.getAlterationForPitch(c);this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,o,a,i),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,i),h.Add(e),this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,c,u,i),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,i);break}case o.OrnamentEnum.DelayedTurn:{const e=new n.Fraction(r.Numerator,2*r.Denominator),o=s.Pitch.getTransposedPitch(-1),a=t.getAlterationForPitch(o),u=s.Pitch.getTransposedPitch(1),d=t.getAlterationForPitch(u);this.createBaseVoiceEntry(h,e,l,s,i),h=n.Fraction.plus(c,e),e.Denominator=8*r.Denominator,this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,u,d,i),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,i),h.Add(e),this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,o,a,i),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,i);break}case o.OrnamentEnum.DelayedInvertedTurn:{const e=new n.Fraction(r.Numerator,2*r.Denominator),o=s.Pitch.getTransposedPitch(-1),a=t.getAlterationForPitch(o),u=s.Pitch.getTransposedPitch(1),d=t.getAlterationForPitch(u);this.createBaseVoiceEntry(h,e,l,s,i),h=n.Fraction.plus(c,e),e.Denominator=8*r.Denominator,this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,o,a,i),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,i),h.Add(e),this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,u,d,i),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,i);break}case o.OrnamentEnum.Mordent:{const e=new n.Fraction(r.Numerator,4*r.Denominator),o=s.Pitch.getTransposedPitch(1),a=t.getAlterationForPitch(o);this.createBaseVoiceEntry(h,e,l,s,i),h.Add(e),this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,o,a,i),e.Denominator=2*r.Denominator,h=n.Fraction.plus(c,e),this.createBaseVoiceEntry(h,e,l,s,i);break}case o.OrnamentEnum.InvertedMordent:{const e=new n.Fraction(r.Numerator,4*r.Denominator),o=s.Pitch.getTransposedPitch(-1),a=t.getAlterationForPitch(o);this.createBaseVoiceEntry(h,e,l,s,i),h.Add(e),this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,o,a,i),e.Denominator=2*r.Denominator,h=n.Fraction.plus(c,e),this.createBaseVoiceEntry(h,e,l,s,i);break}default:throw new RangeError}return i}createBaseVoiceEntry(e,t,i,n,o){const a=new c(e,i,n.ParentStaffEntry),l=new r.Pitch(n.Pitch.FundamentalNote,n.Pitch.Octave,n.Pitch.Accidental),h=new s.Note(a,void 0,t,l,n.SourceMeasure);a.Notes.push(h),o.push(a)}createAlteratedVoiceEntry(e,t,i,n,o,a,l){const h=new c(e,i,void 0),u=new r.Pitch(o.FundamentalNote,o.Octave,a),d=new s.Note(h,void 0,t,u,n);h.Notes.push(d),l.push(h)}}var h,u;t.VoiceEntry=c,function(e){e[e.accent=0]="accent",e[e.strongaccent=1]="strongaccent",e[e.softaccent=2]="softaccent",e[e.marcatoup=3]="marcatoup",e[e.marcatodown=4]="marcatodown",e[e.invertedstrongaccent=5]="invertedstrongaccent",e[e.staccato=6]="staccato",e[e.staccatissimo=7]="staccatissimo",e[e.spiccato=8]="spiccato",e[e.tenuto=9]="tenuto",e[e.fermata=10]="fermata",e[e.invertedfermata=11]="invertedfermata",e[e.breathmark=12]="breathmark",e[e.caesura=13]="caesura",e[e.lefthandpizzicato=14]="lefthandpizzicato",e[e.naturalharmonic=15]="naturalharmonic",e[e.snappizzicato=16]="snappizzicato",e[e.upbow=17]="upbow",e[e.downbow=18]="downbow",e[e.scoop=19]="scoop",e[e.plop=20]="plop",e[e.doit=21]="doit",e[e.falloff=22]="falloff",e[e.stress=23]="stress",e[e.unstress=24]="unstress",e[e.detachedlegato=25]="detachedlegato",e[e.otherarticulation=26]="otherarticulation",e[e.bend=27]="bend"}(h||(t.ArticulationEnum=h={})),function(e){e[e.Undefined=-1]="Undefined",e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.None=2]="None",e[e.Double=3]="Double"}(u||(t.StemDirectionType=u={}))},1519:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalMarkedArea=void 0,t.GraphicalMarkedArea=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.systemRectangle=e,this.labelRectangle=t,this.label=i,this.settings=n}}},1538:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TempoSorter=t.TemposCalculator=void 0;const n=i(2561),s=i(899),r=i(6362),o=i(9161),a=i(5332);class l{calculate(e){l.processTempoExpressions(e)}static processTempoExpressions(e){const t=[];for(let n=0,s=e.SourceMeasures;n<s.length;n++){const e=s[n];e.TempoExpressions.sort(c.Compare);for(let i=0,n=e.TempoExpressions;i<n.length;i++){const e=n[i];null!=e.InstantaneousTempo&&e.InstantaneousTempo.TempoType===o.TempoType.none&&(e.InstantaneousTempo.TempoType=o.TempoType.inst),t.push(e)}}t.sort(c.Compare);const i=l.cleanExpListStartingEntry(e,t),r=[];let a=null,h=i;for(let n=0,s=t;n<s.length;n++){const e=s[n];if(null===a||e.AbsoluteTimestamp!==a.AbsoluteTimestamp){if(null!=e.InstantaneousTempo&&0===e.InstantaneousTempo.TempoInBpm){const t=e.InstantaneousTempo;if(t.isMetronomeMark&&(t.TempoInBpm=h),t instanceof o.InstantaneousTempoExpression&&t.TempoType!==o.TempoType.change&&(t.TempoInBpm=o.InstantaneousTempoExpression.getDefaultValueForInstTempo(t.InstTempo)),t.TempoType===o.TempoType.change)switch(t.ChangeSubType){case o.ChangeSubType.atempo:t.TempoInBpm=h;break;case o.ChangeSubType.doppioMovimento:t.TempoInBpm=2*h;break;case o.ChangeSubType.tempoprimo:t.TempoInBpm=i}h=t.TempoInBpm}}else null==a&&e.AbsoluteTimestamp!==a.AbsoluteTimestamp||(null!=a.InstantaneousTempo&&null!=e.InstantaneousTempo&&e.clearInstantaneousTempo(),null!=e.ContinuousTempo&&(null===a.ContinuousTempo&&a.addExpression(e.ContinuousTempo,""),e.clearContinuousTempo()));if(null===e.InstantaneousTempo&&null===e.ContinuousTempo){const t=e.SourceMeasureParent.TempoExpressions.indexOf(e);t>=0&&e.SourceMeasureParent.TempoExpressions.splice(t,1)}else r.push(e),a=e}h=i;for(let o=0;o<r.length;o++){const t=r[o];if(null!=t.InstantaneousTempo&&(h=t.InstantaneousTempo.TempoInBpm),null!=t.ContinuousTempo){const i=t.ContinuousTempo;i.StartTempo=h;const a=t.SourceMeasureParent.measureListIndex;let l=a;const c=Math.min(a+e.Rules.TempoChangeMeasureValidity,e.SourceMeasures.length-1);for(;l<=c;){const t=e.SourceMeasures[l],i=t.endingBarStyleEnum===s.SystemLinesEnum.ThinBold;if(t.endsWithLineRepetition()||i||l===e.SourceMeasures.length-1)break;if(l>a&&t.beginsWithRepetition()){l--;break}l++}const u=e.SourceMeasures[l];let d,f=n.Fraction.plus(u.AbsoluteTimestamp,n.Fraction.minus(u.Duration,new n.Fraction(1,64)));o<r.length-1&&(d=r[o+1].AbsoluteTimestamp,d.RealValue<f.RealValue&&(f=d)),i.AbsoluteEndTimestamp=f;let p=i.StartTempo*(1-e.Rules.TempoContinousFactor)*i.getTempoFactor();p*=Math.pow(Math.max(.6,Math.min(i.AbsoluteTimeSpan,2)/2),1/4),i.EndTempo=i.StartTempo+p}}e.TimestampSortedTempoExpressionsList=r,r[0]&&(e.DefaultStartTempoInBpm=r[0].InstantaneousTempo.TempoInBpm)}static cleanExpListStartingEntry(e,t){if(0!==t.length&&t[0].AbsoluteTimestamp.Equals(new n.Fraction(0,1))||(t=[new a.MultiTempoExpression(e.SourceMeasures[0],new n.Fraction(0,1))].concat(t)),!t[0].InstantaneousTempo){const e=new o.InstantaneousTempoExpression("*generated",r.PlacementEnum.Above,1,0,t[0],!0);t[0].addExpression(e,"")}const i=t[0].InstantaneousTempo;return 0!==i.TempoInBpm||(0===i.TempoInBpm&&e.DefaultStartTempoInBpm>0&&(i.TempoInBpm=e.DefaultStartTempoInBpm),0===i.TempoInBpm&&(i.TempoInBpm=o.InstantaneousTempoExpression.getDefaultValueForInstTempo[o.InstTempo.moderato])),i.TempoInBpm}}t.TemposCalculator=l;class c{static Compare(e,t){let i=0;if(i=c.CompareNumber(e.AbsoluteTimestamp.RealValue,t.AbsoluteTimestamp.RealValue),0!==i)return i;const n=c.calcSortPriority(e),s=c.calcSortPriority(t);return i=c.CompareNumber(n,s),i}static calcSortPriority(e){if(null!=e.InstantaneousTempo){switch(e.InstantaneousTempo.TempoType){case o.TempoType.metronomeMark:return 1;case o.TempoType.inst:return 2;case o.TempoType.change:switch(e.InstantaneousTempo.ChangeSubType){case o.ChangeSubType.atempo:case o.ChangeSubType.doppioMovimento:return 3;case o.ChangeSubType.tempoprimo:return 4}}return 5}return 9}static CompareNumber(e,t){return e<t?-1:e===t?0:1}}t.TempoSorter=c},1645:(e,t)=>{"use strict";var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.AlignmentType=t.RepetitionInstructionEnum=t.RepetitionInstruction=t.RepetitionInstructionComparer=void 0,t.RepetitionInstructionComparer=class{static Compare(e,t){if(void 0!==e.parentRepetition&&t.parentRepetition){if(e.alignment===n.End&&t.alignment===n.End){if(e.parentRepetition.StartIndex<t.parentRepetition.StartIndex)return 1;if(e.parentRepetition.StartIndex>t.parentRepetition.StartIndex)return-1}if(e.alignment===n.Begin&&t.alignment===n.Begin){if(e.parentRepetition.EndIndex<t.parentRepetition.EndIndex)return 1;if(e.parentRepetition.EndIndex>t.parentRepetition.EndIndex)return-1}}return 0}},t.RepetitionInstruction=class{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.End,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.endingIndices=void 0,this.measureIndex=e,r&&(this.endingIndices=r.slice()),this.type=t,this.alignment=i,this.parentRepetition=s}CompareTo(e){const t=e;if(this.measureIndex>t.measureIndex)return 1;if(this.measureIndex<t.measureIndex)return-1;if(this.alignment===n.Begin){if(t.alignment===n.End)return-1;switch(this.type){case i.Ending:return 1;case i.StartLine:return t.type===i.Ending?-1:1;case i.Coda:case i.Segno:return t.type===i.Coda?1:-1}}else{if(t.alignment===n.Begin)return 1;switch(this.type){case i.Ending:return-1;case i.Fine:case i.ToCoda:return t.type===i.Ending?1:-1;case i.ForwardJump:switch(t.type){case i.Ending:case i.Fine:case i.ToCoda:return 1}return-1;case i.DalSegnoAlFine:case i.DaCapoAlFine:case i.DalSegnoAlCoda:case i.DaCapoAlCoda:case i.DaCapo:case i.DalSegno:case i.BackJumpLine:return 1}}return 0}equals(e){if(this.measureIndex!==e.measureIndex||this.type!==e.type||this.alignment!==e.alignment)return!1;if(this.endingIndices===e.endingIndices)return!0;if(!this.endingIndices||!e.endingIndices||this.endingIndices.length!==e.endingIndices.length)return!1;for(let t=0;t<this.endingIndices.length;t++)if(this.endingIndices[t]!==e.endingIndices[t])return!1;return!0}},function(e){e[e.StartLine=0]="StartLine",e[e.ForwardJump=1]="ForwardJump",e[e.BackJumpLine=2]="BackJumpLine",e[e.Ending=3]="Ending",e[e.DaCapo=4]="DaCapo",e[e.DalSegno=5]="DalSegno",e[e.Fine=6]="Fine",e[e.ToCoda=7]="ToCoda",e[e.DalSegnoAlFine=8]="DalSegnoAlFine",e[e.DaCapoAlFine=9]="DaCapoAlFine",e[e.DalSegnoAlCoda=10]="DalSegnoAlCoda",e[e.DaCapoAlCoda=11]="DaCapoAlCoda",e[e.Coda=12]="Coda",e[e.Segno=13]="Segno",e[e.None=14]="None"}(i||(t.RepetitionInstructionEnum=i={})),function(e){e[e.Begin=0]="Begin",e[e.End=1]="End"}(n||(t.AlignmentType=n={}))},1710:(e,t,i)=>{e.exports=function e(t,i,n){function s(o,a){if(!i[o]){if(!t[o]){if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=i[o]={exports:{}};t[o][0].call(c.exports,(function(e){return s(t[o][1][e]||e)}),c,c.exports,e,t,i,n)}return i[o].exports}for(var r=void 0,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(e,t,i){"use strict";var n=e("./utils"),s=e("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(e){for(var t,i,s,o,a,l,c,h=[],u=0,d=e.length,f=d,p="string"!==n.getTypeOf(e);u<e.length;)f=d-u,s=p?(t=e[u++],i=u<d?e[u++]:0,u<d?e[u++]:0):(t=e.charCodeAt(u++),i=u<d?e.charCodeAt(u++):0,u<d?e.charCodeAt(u++):0),o=t>>2,a=(3&t)<<4|i>>4,l=1<f?(15&i)<<2|s>>6:64,c=2<f?63&s:64,h.push(r.charAt(o)+r.charAt(a)+r.charAt(l)+r.charAt(c));return h.join("")},i.decode=function(e){var t,i,n,o,a,l,c=0,h=0;if("data:"===e.substr(0,5))throw new Error("Invalid base64 input, it looks like a data url.");var u,d=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===r.charAt(64)&&d--,e.charAt(e.length-2)===r.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=s.uint8array?new Uint8Array(0|d):new Array(0|d);c<e.length;)t=r.indexOf(e.charAt(c++))<<2|(o=r.indexOf(e.charAt(c++)))>>4,i=(15&o)<<4|(a=r.indexOf(e.charAt(c++)))>>2,n=(3&a)<<6|(l=r.indexOf(e.charAt(c++))),u[h++]=t,64!==a&&(u[h++]=i),64!==l&&(u[h++]=n);return u}},{"./support":30,"./utils":32}],2:[function(e,t,i){"use strict";var n=e("./external"),s=e("./stream/DataWorker"),r=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function a(e,t,i,n,s){this.compressedSize=e,this.uncompressedSize=t,this.crc32=i,this.compression=n,this.compressedContent=s}a.prototype={getContentWorker:function(){var e=new s(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new s(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,i){return e.pipe(new r).pipe(new o("uncompressedSize")).pipe(t.compressWorker(i)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,i){"use strict";var n=e("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},i.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,i){"use strict";var n=e("./utils"),s=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==n.getTypeOf(e)?function(e,t,i){var n=s,r=0+i;e^=-1;for(var o=0;o<r;o++)e=e>>>8^n[255&(e^t[o])];return~e}(0|t,e,e.length):function(e,t,i){var n=s,r=0+i;e^=-1;for(var o=0;o<r;o++)e=e>>>8^n[255&(e^t.charCodeAt(o))];return~e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,i){"use strict";i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(e,t,i){"use strict";var n;n="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:n}},{lie:37}],7:[function(e,t,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,s=e("pako"),r=e("./utils"),o=e("./stream/GenericWorker"),a=n?"uint8array":"array";function l(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}i.magic="\b\0",r.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(r.transformTo(a,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},i.compressWorker=function(e){return new l("Deflate",e)},i.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,i){"use strict";function n(e,t){var i,n="";for(i=0;i<t;i++)n+=String.fromCharCode(255&e),e>>>=8;return n}function s(e,t,i,s,o,h){var u,d,f=e.file,p=e.compression,m=h!==a.utf8encode,g=r.transformTo("string",h(f.name)),b=r.transformTo("string",a.utf8encode(f.name)),v=f.comment,y=r.transformTo("string",h(v)),x=r.transformTo("string",a.utf8encode(v)),S=b.length!==f.name.length,E=x.length!==v.length,w="",T="",_="",M=f.dir,P=f.date,C={crc32:0,compressedSize:0,uncompressedSize:0};t&&!i||(C.crc32=e.crc32,C.compressedSize=e.compressedSize,C.uncompressedSize=e.uncompressedSize);var A=0;t&&(A|=8),m||!S&&!E||(A|=2048);var N=0,L=0;M&&(N|=16),"UNIX"===o?(L=798,N|=function(e,t){var i=e;return e||(i=t?16893:33204),(65535&i)<<16}(f.unixPermissions,M)):(L=20,N|=function(e){return 63&(e||0)}(f.dosPermissions)),u=P.getUTCHours(),u<<=6,u|=P.getUTCMinutes(),u<<=5,u|=P.getUTCSeconds()/2,d=P.getUTCFullYear()-1980,d<<=4,d|=P.getUTCMonth()+1,d<<=5,d|=P.getUTCDate(),S&&(T=n(1,1)+n(l(g),4)+b,w+="up"+n(T.length,2)+T),E&&(_=n(1,1)+n(l(y),4)+x,w+="uc"+n(_.length,2)+_);var k="";return k+="\n\0",k+=n(A,2),k+=p.magic,k+=n(u,2),k+=n(d,2),k+=n(C.crc32,4),k+=n(C.compressedSize,4),k+=n(C.uncompressedSize,4),k+=n(g.length,2),k+=n(w.length,2),{fileRecord:c.LOCAL_FILE_HEADER+k+g+w,dirRecord:c.CENTRAL_FILE_HEADER+n(L,2)+k+n(y.length,2)+"\0\0\0\0"+n(N,4)+n(s,4)+g+w+y}}var r=e("../utils"),o=e("../stream/GenericWorker"),a=e("../utf8"),l=e("../crc32"),c=e("../signature");function h(e,t,i,n){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=i,this.encodeFileName=n,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(h,o),h.prototype.push=function(e){var t=e.meta.percent||0,i=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:i?(t+100*(i-n-1))/i:100}}))},h.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var i=s(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:i.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,i=s(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(i.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+n(e.crc32,4)+n(e.compressedSize,4)+n(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:i.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var i=this.bytesWritten-e,s=function(e,t,i,s,o){var a=r.transformTo("string",o(s));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(e,2)+n(e,2)+n(t,4)+n(i,4)+n(a.length,2)+a}(this.dirRecords.length,i,e,this.zipComment,this.encodeFileName);this.push({data:s,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},h.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var i=0;i<t.length;i++)try{t[i].error(e)}catch(e){}return!0},h.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,i){"use strict";var n=e("../compressions"),s=e("./ZipFileWorker");i.generateWorker=function(e,t,i){var r=new s(t.streamFiles,i,t.platform,t.encodeFileName),o=0;try{e.forEach((function(e,i){o++;var s=function(e,t){var i=e||t,s=n[i];if(!s)throw new Error(i+" is not a valid compression method !");return s}(i.options.compression,t.compression),a=i.options.compressionOptions||t.compressionOptions||{},l=i.dir,c=i.date;i._compressWorker(s,a).withStreamInfo("file",{name:e,dir:l,date:c,comment:i.comment||"",unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions}).pipe(r)})),r.entriesCount=o}catch(e){r.error(e)}return r}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,i){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(n.prototype=e("./object")).loadAsync=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.version="3.10.1",n.loadAsync=function(e,t){return(new n).loadAsync(e,t)},n.external=e("./external"),t.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,i){"use strict";var n=e("./utils"),s=e("./external"),r=e("./utf8"),o=e("./zipEntries"),a=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new s.Promise((function(t,i){var n=e.decompressed.getContentWorker().pipe(new a);n.on("error",(function(e){i(e)})).on("end",(function(){n.streamInfo.crc32!==e.decompressed.crc32?i(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var i=this;return t=n.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),l.isNode&&l.isStream(e)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var i=new o(t);return i.load(e),i})).then((function(e){var i=[s.Promise.resolve(e)],n=e.files;if(t.checkCRC32)for(var r=0;r<n.length;r++)i.push(c(n[r]));return s.Promise.all(i)})).then((function(e){for(var s=e.shift(),r=s.files,o=0;o<r.length;o++){var a=r[o],l=a.fileNameStr,c=n.resolve(a.fileNameStr);i.file(c,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders}),a.dir||(i.file(c).unsafeOriginalName=l)}return s.zipComment.length&&(i.comment=s.zipComment),i}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,i){"use strict";var n=e("../utils"),s=e("../stream/GenericWorker");function r(e,t){s.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}n.inherits(r,s),r.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},r.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,i){"use strict";var n=e("readable-stream").Readable;function s(e,t,i){n.call(this,t),this._helper=e;var s=this;e.on("data",(function(e,t){s.push(e)||s._helper.pause(),i&&i(t)})).on("error",(function(e){s.emit("error",e)})).on("end",(function(){s.push(null)}))}e("../utils").inherits(s,n),s.prototype._read=function(){this._helper.resume()},t.exports=s},{"../utils":32,"readable-stream":16}],14:[function(e,t,i){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,i){"use strict";function n(e,t,i){var n,s=r.getTypeOf(t),a=r.extend(i||{},l);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=m(e)),a.createFolders&&(n=p(e))&&g.call(this,n,!0);var u,b="string"===s&&!1===a.binary&&!1===a.base64;i&&void 0!==i.binary||(a.binary=!b),(t instanceof c&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",s="string"),u=t instanceof c||t instanceof o?t:d.isNode&&d.isStream(t)?new f(e,t):r.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var v=new h(e,u,a);this.files[e]=v}var s=e("./utf8"),r=e("./utils"),o=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),h=e("./zipObject"),u=e("./generate"),d=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||n.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function b(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,i,n;for(t in this.files)n=this.files[t],(i=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(i,n)},filter:function(e){var t=[];return this.forEach((function(i,n){e(i,n)&&t.push(n)})),t},file:function(e,t,i){if(1!==arguments.length)return e=this.root+e,n.call(this,e,t,i),this;if(b(e)){var s=e;return this.filter((function(e,t){return!t.dir&&s.test(e)}))}var r=this.files[this.root+e];return r&&!r.dir?r:null},folder:function(e){if(!e)return this;if(b(e))return this.filter((function(t,i){return i.dir&&e.test(t)}));var t=this.root+e,i=g.call(this,t),n=this.clone();return n.root=i.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var i=this.filter((function(t,i){return i.name.slice(0,e.length)===e})),n=0;n<i.length;n++)delete this.files[i[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,i={};try{if((i=r.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=i.type.toLowerCase(),i.compression=i.compression.toUpperCase(),"binarystring"===i.type&&(i.type="string"),!i.type)throw new Error("No output type specified.");r.checkSupport(i.type),"darwin"!==i.platform&&"freebsd"!==i.platform&&"linux"!==i.platform&&"sunos"!==i.platform||(i.platform="UNIX"),"win32"===i.platform&&(i.platform="DOS");var n=i.comment||this.comment||"";t=u.generateWorker(this,i,n)}catch(e){(t=new o("error")).error(e)}return new a(t,i.type||"string",i.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,i){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,i){"use strict";var n=e("./DataReader");function s(e){n.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(s,n),s.prototype.byteAt=function(e){return this.data[this.zero+e]},s.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),i=e.charCodeAt(1),n=e.charCodeAt(2),s=e.charCodeAt(3),r=this.length-4;0<=r;--r)if(this.data[r]===t&&this.data[r+1]===i&&this.data[r+2]===n&&this.data[r+3]===s)return r-this.zero;return-1},s.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1),n=e.charCodeAt(2),s=e.charCodeAt(3),r=this.readData(4);return t===r[0]&&i===r[1]&&n===r[2]&&s===r[3]},s.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=s},{"../utils":32,"./DataReader":18}],18:[function(e,t,i){"use strict";var n=e("../utils");function s(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,i=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)i=(i<<8)+this.byteAt(t);return this.index+=e,i},readString:function(e){return n.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=s},{"../utils":32}],19:[function(e,t,i){"use strict";var n=e("./Uint8ArrayReader");function s(e){n.call(this,e)}e("../utils").inherits(s,n),s.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,i){"use strict";var n=e("./DataReader");function s(e){n.call(this,e)}e("../utils").inherits(s,n),s.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},s.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},s.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},s.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=s},{"../utils":32,"./DataReader":18}],21:[function(e,t,i){"use strict";var n=e("./ArrayReader");function s(e){n.call(this,e)}e("../utils").inherits(s,n),s.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,i){"use strict";var n=e("../utils"),s=e("../support"),r=e("./ArrayReader"),o=e("./StringReader"),a=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=n.getTypeOf(e);return n.checkSupport(t),"string"!==t||s.uint8array?"nodebuffer"===t?new a(e):s.uint8array?new l(n.transformTo("uint8array",e)):new r(n.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,i){"use strict";i.LOCAL_FILE_HEADER="PK\x03\x04",i.CENTRAL_FILE_HEADER="PK\x01\x02",i.CENTRAL_DIRECTORY_END="PK\x05\x06",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,i){"use strict";var n=e("./GenericWorker"),s=e("../utils");function r(e){n.call(this,"ConvertWorker to "+e),this.destType=e}s.inherits(r,n),r.prototype.processChunk=function(e){this.push({data:s.transformTo(this.destType,e.data),meta:e.meta})},t.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,i){"use strict";var n=e("./GenericWorker"),s=e("../crc32");function r(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(r,n),r.prototype.processChunk=function(e){this.streamInfo.crc32=s(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,i){"use strict";var n=e("../utils"),s=e("./GenericWorker");function r(e){s.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}n.inherits(r,s),r.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}s.prototype.processChunk.call(this,e)},t.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,i){"use strict";var n=e("../utils"),s=e("./GenericWorker");function r(e){s.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=n.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}n.inherits(r,s),r.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,i){"use strict";function n(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var i=0;i<this._listeners[e].length;i++)this._listeners[e][i].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=n},{}],29:[function(e,t,i){"use strict";var n=e("../utils"),s=e("./ConvertWorker"),r=e("./GenericWorker"),o=e("../base64"),a=e("../support"),l=e("../external"),c=null;if(a.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function h(e,t,i){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=i,n.checkSupport(o),this._worker=e.pipe(new s(o)),e.lock()}catch(e){this._worker=new r("error"),this._worker.error(e)}}h.prototype={accumulate:function(e){return function(e,t){return new l.Promise((function(i,s){var r=[],a=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,i){r.push(e),t&&t(i)})).on("error",(function(e){r=[],s(e)})).on("end",(function(){try{var e=function(e,t,i){switch(e){case"blob":return n.newBlob(n.transformTo("arraybuffer",t),i);case"base64":return o.encode(t);default:return n.transformTo(e,t)}}(l,function(e,t){var i,n=0,s=null,r=0;for(i=0;i<t.length;i++)r+=t[i].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(s=new Uint8Array(r),i=0;i<t.length;i++)s.set(t[i],n),n+=t[i].length;return s;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,r),c);i(e)}catch(e){s(e)}r=[]})).resume()}))}(this,e)},on:function(e,t){var i=this;return"data"===e?this._worker.on(e,(function(e){t.call(i,e.data,e.meta)})):this._worker.on(e,(function(){n.delay(t,arguments,i)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,i){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer="undefined"!=typeof Buffer,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var n=new ArrayBuffer(0);try{i.blob=0===new Blob([n],{type:"application/zip"}).size}catch(e){try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(n),i.blob=0===s.getBlob("application/zip").size}catch(e){i.blob=!1}}}try{i.nodestream=!!e("readable-stream").Readable}catch(e){i.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,i){"use strict";for(var n=e("./utils"),s=e("./support"),r=e("./nodejsUtils"),o=e("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){o.call(this,"utf-8 decode"),this.leftOver=null}function h(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,i.utf8encode=function(e){return s.nodebuffer?r.newBufferFrom(e,"utf-8"):function(e){var t,i,n,r,o,a=e.length,l=0;for(r=0;r<a;r++)55296==(64512&(i=e.charCodeAt(r)))&&r+1<a&&56320==(64512&(n=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(n-56320),r++),l+=i<128?1:i<2048?2:i<65536?3:4;for(t=s.uint8array?new Uint8Array(l):new Array(l),r=o=0;o<l;r++)55296==(64512&(i=e.charCodeAt(r)))&&r+1<a&&56320==(64512&(n=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(n-56320),r++),i<128?t[o++]=i:(i<2048?t[o++]=192|i>>>6:(i<65536?t[o++]=224|i>>>12:(t[o++]=240|i>>>18,t[o++]=128|i>>>12&63),t[o++]=128|i>>>6&63),t[o++]=128|63&i);return t}(e)},i.utf8decode=function(e){return s.nodebuffer?n.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,i,s,r,o=e.length,l=new Array(2*o);for(t=i=0;t<o;)if((s=e[t++])<128)l[i++]=s;else if(4<(r=a[s]))l[i++]=65533,t+=r-1;else{for(s&=2===r?31:3===r?15:7;1<r&&t<o;)s=s<<6|63&e[t++],r--;1<r?l[i++]=65533:s<65536?l[i++]=s:(s-=65536,l[i++]=55296|s>>10&1023,l[i++]=56320|1023&s)}return l.length!==i&&(l.subarray?l=l.subarray(0,i):l.length=i),n.applyFromCharCode(l)}(e=n.transformTo(s.uint8array?"uint8array":"array",e))},n.inherits(c,o),c.prototype.processChunk=function(e){var t=n.transformTo(s.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var r=t;(t=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),t.set(r,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return i<0||0===i?t:i+a[e[i]]>t?i:t}(t),l=t;o!==t.length&&(s.uint8array?(l=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(l=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:i.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=c,n.inherits(h,o),h.prototype.processChunk=function(e){this.push({data:i.utf8encode(e.data),meta:e.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,i){"use strict";var n=e("./support"),s=e("./base64"),r=e("./nodejsUtils"),o=e("./external");function a(e){return e}function l(e,t){for(var i=0;i<e.length;++i)t[i]=255&e.charCodeAt(i);return t}e("setimmediate"),i.newBlob=function(e,t){i.checkSupport("blob");try{return new Blob([e],{type:t})}catch(i){try{var n=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return n.append(e),n.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,i){var n=[],s=0,r=e.length;if(r<=i)return String.fromCharCode.apply(null,e);for(;s<r;)"array"===t||"nodebuffer"===t?n.push(String.fromCharCode.apply(null,e.slice(s,Math.min(s+i,r)))):n.push(String.fromCharCode.apply(null,e.subarray(s,Math.min(s+i,r)))),s+=i;return n.join("")},stringifyByChar:function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(e){return!1}}()}};function h(e){var t=65536,n=i.getTypeOf(e),s=!0;if("uint8array"===n?s=c.applyCanBeUsed.uint8array:"nodebuffer"===n&&(s=c.applyCanBeUsed.nodebuffer),s)for(;1<t;)try{return c.stringifyByChunk(e,n,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function u(e,t){for(var i=0;i<e.length;i++)t[i]=e[i];return t}i.applyFromCharCode=h;var d={};d.string={string:a,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,r.allocBuffer(e.length))}},d.array={string:h,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(e)}},d.arraybuffer={string:function(e){return h(new Uint8Array(e))},array:function(e){return u(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:h,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return r.newBufferFrom(e)}},d.nodebuffer={string:h,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:a},i.transformTo=function(e,t){if(t=t||"",!e)return t;i.checkSupport(e);var n=i.getTypeOf(t);return d[n][e](t)},i.resolve=function(e){for(var t=e.split("/"),i=[],n=0;n<t.length;n++){var s=t[n];"."===s||""===s&&0!==n&&n!==t.length-1||(".."===s?i.pop():i.push(s))}return i.join("/")},i.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":n.nodebuffer&&r.isBuffer(e)?"nodebuffer":n.uint8array&&e instanceof Uint8Array?"uint8array":n.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(e){if(!n[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(e){var t,i,n="";for(i=0;i<(e||"").length;i++)n+="\\x"+((t=e.charCodeAt(i))<16?"0":"")+t.toString(16).toUpperCase();return n},i.delay=function(e,t,i){setImmediate((function(){e.apply(i||null,t||[])}))},i.inherits=function(e,t){function i(){}i.prototype=t.prototype,e.prototype=new i},i.extend=function(){var e,t,i={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===i[t]&&(i[t]=arguments[e][t]);return i},i.prepareContent=function(e,t,r,a,c){return o.Promise.resolve(t).then((function(e){return n.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(t,i){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.onerror=function(e){i(e.target.error)},n.readAsArrayBuffer(e)})):e})).then((function(t){var h=i.getTypeOf(t);return h?("arraybuffer"===h?t=i.transformTo("uint8array",t):"string"===h&&(c?t=s.decode(t):r&&!0!==a&&(t=function(e){return l(e,n.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,i){"use strict";var n=e("./reader/readerFor"),s=e("./utils"),r=e("./signature"),o=e("./zipEntry"),a=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(t)+", expected "+s.pretty(e)+")")}},isSignature:function(e,t){var i=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(i),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",i=s.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(i)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,i,n=this.zip64EndOfCentralSize-44;0<n;)e=this.reader.readInt(2),t=this.reader.readInt(4),i=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var n=t-i;if(0<n)this.isSignature(t,r.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){this.reader=n(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,i){"use strict";var n=e("./reader/readerFor"),s=e("./utils"),r=e("./compressedObject"),o=e("./crc32"),a=e("./utf8"),l=e("./compressions"),c=e("./support");function h(e,t){this.options=e,this.loadOptions=t}h.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,i;if(e.skip(22),this.fileNameLength=e.readInt(2),i=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(i),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,i,n,s=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<s;)t=e.readInt(2),i=e.readInt(2),n=e.readData(i),this.extraFields[t]={id:t,length:i,value:n};e.setIndex(s)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var i=s.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(i)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var r=s.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(r)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=n(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=n(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,i){"use strict";function n(e,t,i){this.name=e,this.dir=i.dir,this.date=i.date,this.comment=i.comment,this.unixPermissions=i.unixPermissions,this.dosPermissions=i.dosPermissions,this._data=t,this._dataBinary=i.binary,this.options={compression:i.compression,compressionOptions:i.compressionOptions}}var s=e("./stream/StreamHelper"),r=e("./stream/DataWorker"),o=e("./utf8"),a=e("./compressedObject"),l=e("./stream/GenericWorker");n.prototype={internalStream:function(e){var t=null,i="string";try{if(!e)throw new Error("No output type specified.");var n="string"===(i=e.toLowerCase())||"text"===i;"binarystring"!==i&&"text"!==i||(i="string"),t=this._decompressWorker();var r=!this._dataBinary;r&&!n&&(t=t.pipe(new o.Utf8EncodeWorker)),!r&&n&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new s(t,i,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var i=this._decompressWorker();return this._dataBinary||(i=i.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(i,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new r(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<c.length;u++)n.prototype[c[u]]=h;t.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){"use strict";var i,n,s=e.MutationObserver||e.WebKitMutationObserver;if(s){var r=0,o=new s(h),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),i=function(){a.data=r=++r%2}}else if(e.setImmediate||void 0===e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){h(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(h,0)};else{var l=new e.MessageChannel;l.port1.onmessage=h,i=function(){l.port2.postMessage(0)}}var c=[];function h(){var e,t;n=!0;for(var i=c.length;i;){for(t=c,c=[],e=-1;++e<i;)t[e]();i=c.length}n=!1}t.exports=function(e){1!==c.push(e)||n||i()}}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,i){"use strict";var n=e("immediate");function s(){}var r={},o=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==s&&f(this,e)}function h(e,t,i){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof i&&(this.onRejected=i,this.callRejected=this.otherCallRejected)}function u(e,t,i){n((function(){var n;try{n=t(i)}catch(n){return r.reject(e,n)}n===e?r.reject(e,new TypeError("Cannot resolve promise with itself")):r.resolve(e,n)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var i=!1;function n(t){i||(i=!0,r.reject(e,t))}function s(t){i||(i=!0,r.resolve(e,t))}var o=p((function(){t(s,n)}));"error"===o.status&&n(o.value)}function p(e,t){var i={};try{i.value=e(t),i.status="success"}catch(e){i.status="error",i.value=e}return i}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(i){return t.resolve(e()).then((function(){return i}))}),(function(i){return t.resolve(e()).then((function(){throw i}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var i=new this.constructor(s);return this.state!==l?u(i,this.state===a?e:t,this.outcome):this.queue.push(new h(i,e,t)),i},h.prototype.callFulfilled=function(e){r.resolve(this.promise,e)},h.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},h.prototype.callRejected=function(e){r.reject(this.promise,e)},h.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},r.resolve=function(e,t){var i=p(d,t);if("error"===i.status)return r.reject(e,i.value);var n=i.value;if(n)f(e,n);else{e.state=a,e.outcome=t;for(var s=-1,o=e.queue.length;++s<o;)e.queue[s].callFulfilled(t)}return e},r.reject=function(e,t){e.state=o,e.outcome=t;for(var i=-1,n=e.queue.length;++i<n;)e.queue[i].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:r.resolve(new this(s),e)},c.reject=function(e){var t=new this(s);return r.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,n=!1;if(!i)return this.resolve([]);for(var o=new Array(i),a=0,l=-1,c=new this(s);++l<i;)h(e[l],l);return c;function h(e,s){t.resolve(e).then((function(e){o[s]=e,++a!==i||n||(n=!0,r.resolve(c,o))}),(function(e){n||(n=!0,r.reject(c,e))}))}},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,i=!1;if(!t)return this.resolve([]);for(var n,o=-1,a=new this(s);++o<t;)n=e[o],this.resolve(n).then((function(e){i||(i=!0,r.resolve(a,e))}),(function(e){i||(i=!0,r.reject(a,e))}));return a}},{immediate:36}],38:[function(e,t,i){"use strict";var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,i){"use strict";var n=e("./zlib/deflate"),s=e("./utils/common"),r=e("./utils/strings"),o=e("./zlib/messages"),a=e("./zlib/zstream"),l=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=s.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var i=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==i)throw new Error(o[i]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){var h;if(h="string"==typeof t.dictionary?r.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(i=n.deflateSetDictionary(this.strm,h)))throw new Error(o[i]);this._dict_set=!0}}function h(e,t){var i=new c(t);if(i.push(e,!0),i.err)throw i.msg||o[i.err];return i.result}c.prototype.push=function(e,t){var i,o,a=this.strm,c=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=r.string2buf(e):"[object ArrayBuffer]"===l.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new s.Buf8(c),a.next_out=0,a.avail_out=c),1!==(i=n.deflate(a,o))&&0!==i)return this.onEnd(i),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(r.buf2binstring(s.shrinkBuf(a.output,a.next_out))):this.onData(s.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==i);return 4===o?(i=n.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i):2!==o||(this.onEnd(0),!(a.avail_out=0))},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Deflate=c,i.deflate=h,i.deflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},i.gzip=function(e,t){return(t=t||{}).gzip=!0,h(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,i){"use strict";var n=e("./zlib/inflate"),s=e("./utils/common"),r=e("./utils/strings"),o=e("./zlib/constants"),a=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),h=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var i=n.inflateInit2(this.strm,t.windowBits);if(i!==o.Z_OK)throw new Error(a[i]);this.header=new c,n.inflateGetHeader(this.strm,this.header)}function d(e,t){var i=new u(t);if(i.push(e,!0),i.err)throw i.msg||a[i.err];return i.result}u.prototype.push=function(e,t){var i,a,l,c,u,d,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?f.input=r.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(p),f.next_out=0,f.avail_out=p),(i=n.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&m&&(d="string"==typeof m?r.string2buf(m):"[object ArrayBuffer]"===h.call(m)?new Uint8Array(m):m,i=n.inflateSetDictionary(this.strm,d)),i===o.Z_BUF_ERROR&&!0===g&&(i=o.Z_OK,g=!1),i!==o.Z_STREAM_END&&i!==o.Z_OK)return this.onEnd(i),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&i!==o.Z_STREAM_END&&(0!==f.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=r.utf8border(f.output,f.next_out),c=f.next_out-l,u=r.buf2string(f.output,l),f.next_out=c,f.avail_out=p-c,c&&s.arraySet(f.output,f.output,l,c,0),this.onData(u)):this.onData(s.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((0<f.avail_in||0===f.avail_out)&&i!==o.Z_STREAM_END);return i===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(i=n.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(f.avail_out=0))},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},i.Inflate=u,i.inflate=d,i.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},i.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var i=t.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}}return e},i.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var s={arraySet:function(e,t,i,n,s){if(t.subarray&&e.subarray)e.set(t.subarray(i,i+n),s);else for(var r=0;r<n;r++)e[s+r]=t[i+r]},flattenChunks:function(e){var t,i,n,s,r,o;for(t=n=0,i=e.length;t<i;t++)n+=e[t].length;for(o=new Uint8Array(n),t=s=0,i=e.length;t<i;t++)r=e[t],o.set(r,s),s+=r.length;return o}},r={arraySet:function(e,t,i,n,s){for(var r=0;r<n;r++)e[s+r]=t[i+r]},flattenChunks:function(e){return[].concat.apply([],e)}};i.setTyped=function(e){e?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,r))},i.setTyped(n)},{}],42:[function(e,t,i){"use strict";var n=e("./common"),s=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(e){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){r=!1}for(var o=new n.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(e,t){if(t<65537&&(e.subarray&&r||!e.subarray&&s))return String.fromCharCode.apply(null,n.shrinkBuf(e,t));for(var i="",o=0;o<t;o++)i+=String.fromCharCode(e[o]);return i}o[254]=o[254]=1,i.string2buf=function(e){var t,i,s,r,o,a=e.length,l=0;for(r=0;r<a;r++)55296==(64512&(i=e.charCodeAt(r)))&&r+1<a&&56320==(64512&(s=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(s-56320),r++),l+=i<128?1:i<2048?2:i<65536?3:4;for(t=new n.Buf8(l),r=o=0;o<l;r++)55296==(64512&(i=e.charCodeAt(r)))&&r+1<a&&56320==(64512&(s=e.charCodeAt(r+1)))&&(i=65536+(i-55296<<10)+(s-56320),r++),i<128?t[o++]=i:(i<2048?t[o++]=192|i>>>6:(i<65536?t[o++]=224|i>>>12:(t[o++]=240|i>>>18,t[o++]=128|i>>>12&63),t[o++]=128|i>>>6&63),t[o++]=128|63&i);return t},i.buf2binstring=function(e){return l(e,e.length)},i.binstring2buf=function(e){for(var t=new n.Buf8(e.length),i=0,s=t.length;i<s;i++)t[i]=e.charCodeAt(i);return t},i.buf2string=function(e,t){var i,n,s,r,a=t||e.length,c=new Array(2*a);for(i=n=0;i<a;)if((s=e[i++])<128)c[n++]=s;else if(4<(r=o[s]))c[n++]=65533,i+=r-1;else{for(s&=2===r?31:3===r?15:7;1<r&&i<a;)s=s<<6|63&e[i++],r--;1<r?c[n++]=65533:s<65536?c[n++]=s:(s-=65536,c[n++]=55296|s>>10&1023,c[n++]=56320|1023&s)}return l(c,n)},i.utf8border=function(e,t){var i;for((t=t||e.length)>e.length&&(t=e.length),i=t-1;0<=i&&128==(192&e[i]);)i--;return i<0||0===i?t:i+o[e[i]]>t?i:t}},{"./common":41}],43:[function(e,t,i){"use strict";t.exports=function(e,t,i,n){for(var s=65535&e,r=e>>>16&65535,o=0;0!==i;){for(i-=o=2e3<i?2e3:i;r=r+(s=s+t[n++]|0)|0,--o;);s%=65521,r%=65521}return s|r<<16}},{}],44:[function(e,t,i){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,i){"use strict";var n=function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t}();t.exports=function(e,t,i,s){var r=n,o=s+i;e^=-1;for(var a=s;a<o;a++)e=e>>>8^r[255&(e^t[a])];return~e}},{}],46:[function(e,t,i){"use strict";var n,s=e("../utils/common"),r=e("./trees"),o=e("./adler32"),a=e("./crc32"),l=e("./messages"),c=-2,h=258,u=262,d=113;function f(e,t){return e.msg=l[t],t}function p(e){return(e<<1)-(4<e?9:0)}function m(e){for(var t=e.length;0<=--t;)e[t]=0}function g(e){var t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(s.arraySet(e.output,t.pending_buf,t.pending_out,i,e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))}function b(e,t){r._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,g(e.strm)}function v(e,t){e.pending_buf[e.pending++]=t}function y(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function x(e,t){var i,n,s=e.max_chain_length,r=e.strstart,o=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-u?e.strstart-(e.w_size-u):0,c=e.window,d=e.w_mask,f=e.prev,p=e.strstart+h,m=c[r+o-1],g=c[r+o];e.prev_length>=e.good_match&&(s>>=2),a>e.lookahead&&(a=e.lookahead);do{if(c[(i=t)+o]===g&&c[i+o-1]===m&&c[i]===c[r]&&c[++i]===c[r+1]){r+=2,i++;do{}while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<p);if(n=h-(p-r),r=p-h,o<n){if(e.match_start=t,a<=(o=n))break;m=c[r+o-1],g=c[r+o]}}}while((t=f[t&d])>l&&0!=--s);return o<=e.lookahead?o:e.lookahead}function S(e){var t,i,n,r,l,c,h,d,f,p,m=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-u)){for(s.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=i=e.hash_size;n=e.head[--t],e.head[t]=m<=n?n-m:0,--i;);for(t=i=m;n=e.prev[--t],e.prev[t]=m<=n?n-m:0,--i;);r+=m}if(0===e.strm.avail_in)break;if(c=e.strm,h=e.window,d=e.strstart+e.lookahead,p=void 0,(f=r)<(p=c.avail_in)&&(p=f),i=0===p?0:(c.avail_in-=p,s.arraySet(h,c.input,c.next_in,p,d),1===c.state.wrap?c.adler=o(c.adler,h,p,d):2===c.state.wrap&&(c.adler=a(c.adler,h,p,d)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=i,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<u&&0!==e.strm.avail_in)}function E(e,t){for(var i,n;;){if(e.lookahead<u){if(S(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-u&&(e.match_length=x(e,i)),e.match_length>=3)if(n=r._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function w(e,t){for(var i,n,s;;){if(e.lookahead<u){if(S(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-u&&(e.match_length=x(e,i),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(s=e.strstart+e.lookahead-3,n=r._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=s&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,n&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=r._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=r._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function T(e,t,i,n,s){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=n,this.func=s}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(1146),this.dyn_dtree=new s.Buf16(122),this.bl_tree=new s.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(16),this.heap=new s.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function M(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:d,e.adler=2===t.wrap?0:1,t.last_flush=0,r._tr_init(t),0):f(e,c)}function P(e){var t=M(e);return 0===t&&function(e){e.window_size=2*e.w_size,m(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function C(e,t,i,n,r,o){if(!e)return c;var a=1;if(-1===t&&(t=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),r<1||9<r||8!==i||n<8||15<n||t<0||9<t||o<0||4<o)return f(e,c);8===n&&(n=9);var l=new _;return(e.state=l).strm=e,l.wrap=a,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new s.Buf8(2*l.w_size),l.head=new s.Buf16(l.hash_size),l.prev=new s.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new s.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=i,P(e)}n=[new T(0,0,0,0,(function(e,t){var i=65535;for(i>e.pending_buf_size-5&&(i=e.pending_buf_size-5);;){if(e.lookahead<=1){if(S(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+i;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-u&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(b(e,!1),e.strm.avail_out),1)})),new T(4,4,8,4,E),new T(4,5,16,8,E),new T(4,6,32,32,E),new T(4,4,16,16,w),new T(8,16,32,32,w),new T(8,16,128,128,w),new T(8,32,128,256,w),new T(32,128,258,1024,w),new T(32,258,258,4096,w)],i.deflateInit=function(e,t){return C(e,t,8,15,8,0)},i.deflateInit2=C,i.deflateReset=P,i.deflateResetKeep=M,i.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},i.deflate=function(e,t){var i,s,o,l;if(!e||!e.state||5<t||t<0)return e?f(e,c):c;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||666===s.status&&4!==t)return f(e,0===e.avail_out?-5:c);if(s.strm=e,i=s.last_flush,s.last_flush=t,42===s.status)if(2===s.wrap)e.adler=0,v(s,31),v(s,139),v(s,8),s.gzhead?(v(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),v(s,255&s.gzhead.time),v(s,s.gzhead.time>>8&255),v(s,s.gzhead.time>>16&255),v(s,s.gzhead.time>>24&255),v(s,9===s.level?2:2<=s.strategy||s.level<2?4:0),v(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(v(s,255&s.gzhead.extra.length),v(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=a(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(v(s,0),v(s,0),v(s,0),v(s,0),v(s,0),v(s,9===s.level?2:2<=s.strategy||s.level<2?4:0),v(s,3),s.status=d);else{var u=8+(s.w_bits-8<<4)<<8;u|=(2<=s.strategy||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(u|=32),u+=31-u%31,s.status=d,y(s,u),0!==s.strstart&&(y(s,e.adler>>>16),y(s,65535&e.adler)),e.adler=1}if(69===s.status)if(s.gzhead.extra){for(o=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>o&&(e.adler=a(e.adler,s.pending_buf,s.pending-o,o)),g(e),o=s.pending,s.pending!==s.pending_buf_size));)v(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>o&&(e.adler=a(e.adler,s.pending_buf,s.pending-o,o)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){o=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>o&&(e.adler=a(e.adler,s.pending_buf,s.pending-o,o)),g(e),o=s.pending,s.pending===s.pending_buf_size)){l=1;break}l=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,v(s,l)}while(0!==l);s.gzhead.hcrc&&s.pending>o&&(e.adler=a(e.adler,s.pending_buf,s.pending-o,o)),0===l&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){o=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>o&&(e.adler=a(e.adler,s.pending_buf,s.pending-o,o)),g(e),o=s.pending,s.pending===s.pending_buf_size)){l=1;break}l=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,v(s,l)}while(0!==l);s.gzhead.hcrc&&s.pending>o&&(e.adler=a(e.adler,s.pending_buf,s.pending-o,o)),0===l&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&g(e),s.pending+2<=s.pending_buf_size&&(v(s,255&e.adler),v(s,e.adler>>8&255),e.adler=0,s.status=d)):s.status=d),0!==s.pending){if(g(e),0===e.avail_out)return s.last_flush=-1,0}else if(0===e.avail_in&&p(t)<=p(i)&&4!==t)return f(e,-5);if(666===s.status&&0!==e.avail_in)return f(e,-5);if(0!==e.avail_in||0!==s.lookahead||0!==t&&666!==s.status){var x=2===s.strategy?function(e,t){for(var i;;){if(0===e.lookahead&&(S(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,i=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(s,t):3===s.strategy?function(e,t){for(var i,n,s,o,a=e.window;;){if(e.lookahead<=h){if(S(e),e.lookahead<=h&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(n=a[s=e.strstart-1])===a[++s]&&n===a[++s]&&n===a[++s]){o=e.strstart+h;do{}while(n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&n===a[++s]&&s<o);e.match_length=h-(o-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=r._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(s,t):n[s.level].func(s,t);if(3!==x&&4!==x||(s.status=666),1===x||3===x)return 0===e.avail_out&&(s.last_flush=-1),0;if(2===x&&(1===t?r._tr_align(s):5!==t&&(r._tr_stored_block(s,0,0,!1),3===t&&(m(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),g(e),0===e.avail_out))return s.last_flush=-1,0}return 4!==t?0:s.wrap<=0?1:(2===s.wrap?(v(s,255&e.adler),v(s,e.adler>>8&255),v(s,e.adler>>16&255),v(s,e.adler>>24&255),v(s,255&e.total_in),v(s,e.total_in>>8&255),v(s,e.total_in>>16&255),v(s,e.total_in>>24&255)):(y(s,e.adler>>>16),y(s,65535&e.adler)),g(e),0<s.wrap&&(s.wrap=-s.wrap),0!==s.pending?0:1)},i.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==d&&666!==t?f(e,c):(e.state=null,t===d?f(e,-3):0):c},i.deflateSetDictionary=function(e,t){var i,n,r,a,l,h,u,d,f=t.length;if(!e||!e.state)return c;if(2===(a=(i=e.state).wrap)||1===a&&42!==i.status||i.lookahead)return c;for(1===a&&(e.adler=o(e.adler,t,f,0)),i.wrap=0,f>=i.w_size&&(0===a&&(m(i.head),i.strstart=0,i.block_start=0,i.insert=0),d=new s.Buf8(i.w_size),s.arraySet(d,t,f-i.w_size,i.w_size,0),t=d,f=i.w_size),l=e.avail_in,h=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,S(i);i.lookahead>=3;){for(n=i.strstart,r=i.lookahead-2;i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+3-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++,--r;);i.strstart=n,i.lookahead=2,S(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=h,e.input=u,e.avail_in=l,i.wrap=a,0},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,i){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,i){"use strict";t.exports=function(e,t){var i,n,s,r,o,a,l,c,h,u,d,f,p,m,g,b,v,y,x,S,E,w,T,_,M;i=e.state,n=e.next_in,_=e.input,s=n+(e.avail_in-5),r=e.next_out,M=e.output,o=r-(t-e.avail_out),a=r+(e.avail_out-257),l=i.dmax,c=i.wsize,h=i.whave,u=i.wnext,d=i.window,f=i.hold,p=i.bits,m=i.lencode,g=i.distcode,b=(1<<i.lenbits)-1,v=(1<<i.distbits)-1;e:do{p<15&&(f+=_[n++]<<p,p+=8,f+=_[n++]<<p,p+=8),y=m[f&b];t:for(;;){if(f>>>=x=y>>>24,p-=x,0==(x=y>>>16&255))M[r++]=65535&y;else{if(!(16&x)){if(!(64&x)){y=m[(65535&y)+(f&(1<<x)-1)];continue t}if(32&x){i.mode=12;break e}e.msg="invalid literal/length code",i.mode=30;break e}S=65535&y,(x&=15)&&(p<x&&(f+=_[n++]<<p,p+=8),S+=f&(1<<x)-1,f>>>=x,p-=x),p<15&&(f+=_[n++]<<p,p+=8,f+=_[n++]<<p,p+=8),y=g[f&v];i:for(;;){if(f>>>=x=y>>>24,p-=x,!(16&(x=y>>>16&255))){if(!(64&x)){y=g[(65535&y)+(f&(1<<x)-1)];continue i}e.msg="invalid distance code",i.mode=30;break e}if(E=65535&y,p<(x&=15)&&(f+=_[n++]<<p,(p+=8)<x&&(f+=_[n++]<<p,p+=8)),l<(E+=f&(1<<x)-1)){e.msg="invalid distance too far back",i.mode=30;break e}if(f>>>=x,p-=x,(x=r-o)<E){if(h<(x=E-x)&&i.sane){e.msg="invalid distance too far back",i.mode=30;break e}if(T=d,(w=0)===u){if(w+=c-x,x<S){for(S-=x;M[r++]=d[w++],--x;);w=r-E,T=M}}else if(u<x){if(w+=c+u-x,(x-=u)<S){for(S-=x;M[r++]=d[w++],--x;);if(w=0,u<S){for(S-=x=u;M[r++]=d[w++],--x;);w=r-E,T=M}}}else if(w+=u-x,x<S){for(S-=x;M[r++]=d[w++],--x;);w=r-E,T=M}for(;2<S;)M[r++]=T[w++],M[r++]=T[w++],M[r++]=T[w++],S-=3;S&&(M[r++]=T[w++],1<S&&(M[r++]=T[w++]))}else{for(w=r-E;M[r++]=M[w++],M[r++]=M[w++],M[r++]=M[w++],2<(S-=3););S&&(M[r++]=M[w++],1<S&&(M[r++]=M[w++]))}break}}break}}while(n<s&&r<a);n-=S=p>>3,f&=(1<<(p-=S<<3))-1,e.next_in=n,e.next_out=r,e.avail_in=n<s?s-n+5:5-(n-s),e.avail_out=r<a?a-r+257:257-(r-a),i.hold=f,i.bits=p}},{}],49:[function(e,t,i){"use strict";var n=e("../utils/common"),s=e("./adler32"),r=e("./crc32"),o=e("./inffast"),a=e("./inftrees"),l=-2;function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function u(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new n.Buf32(852),t.distcode=t.distdyn=new n.Buf32(592),t.sane=1,t.back=-1,0):l}function d(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,u(e)):l}function f(e,t){var i,n;return e&&e.state?(n=e.state,t<0?(i=0,t=-t):(i=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?l:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=i,n.wbits=t,d(e))):l}function p(e,t){var i,n;return e?(n=new h,(e.state=n).window=null,0!==(i=f(e,t))&&(e.state=null),i):l}var m,g,b=!0;function v(e){if(b){var t;for(m=new n.Buf32(512),g=new n.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(2,e.lens,0,32,g,0,e.work,{bits:5}),b=!1}e.lencode=m,e.lenbits=9,e.distcode=g,e.distbits=5}function y(e,t,i,s){var r,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new n.Buf8(o.wsize)),s>=o.wsize?(n.arraySet(o.window,t,i-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(s<(r=o.wsize-o.wnext)&&(r=s),n.arraySet(o.window,t,i-s,r,o.wnext),(s-=r)?(n.arraySet(o.window,t,i-s,s,0),o.wnext=s,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}i.inflateReset=d,i.inflateReset2=f,i.inflateResetKeep=u,i.inflateInit=function(e){return p(e,15)},i.inflateInit2=p,i.inflate=function(e,t){var i,h,u,d,f,p,m,g,b,x,S,E,w,T,_,M,P,C,A,N,L,k,I,R,O=0,D=new n.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;12===(i=e.state).mode&&(i.mode=13),f=e.next_out,u=e.output,m=e.avail_out,d=e.next_in,h=e.input,p=e.avail_in,g=i.hold,b=i.bits,x=p,S=m,k=0;e:for(;;)switch(i.mode){case 1:if(0===i.wrap){i.mode=13;break}for(;b<16;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(2&i.wrap&&35615===g){D[i.check=0]=255&g,D[1]=g>>>8&255,i.check=r(i.check,D,2,0),b=g=0,i.mode=2;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&g)<<8)+(g>>8))%31){e.msg="incorrect header check",i.mode=30;break}if(8!=(15&g)){e.msg="unknown compression method",i.mode=30;break}if(b-=4,L=8+(15&(g>>>=4)),0===i.wbits)i.wbits=L;else if(L>i.wbits){e.msg="invalid window size",i.mode=30;break}i.dmax=1<<L,e.adler=i.check=1,i.mode=512&g?10:12,b=g=0;break;case 2:for(;b<16;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(i.flags=g,8!=(255&i.flags)){e.msg="unknown compression method",i.mode=30;break}if(57344&i.flags){e.msg="unknown header flags set",i.mode=30;break}i.head&&(i.head.text=g>>8&1),512&i.flags&&(D[0]=255&g,D[1]=g>>>8&255,i.check=r(i.check,D,2,0)),b=g=0,i.mode=3;case 3:for(;b<32;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}i.head&&(i.head.time=g),512&i.flags&&(D[0]=255&g,D[1]=g>>>8&255,D[2]=g>>>16&255,D[3]=g>>>24&255,i.check=r(i.check,D,4,0)),b=g=0,i.mode=4;case 4:for(;b<16;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}i.head&&(i.head.xflags=255&g,i.head.os=g>>8),512&i.flags&&(D[0]=255&g,D[1]=g>>>8&255,i.check=r(i.check,D,2,0)),b=g=0,i.mode=5;case 5:if(1024&i.flags){for(;b<16;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}i.length=g,i.head&&(i.head.extra_len=g),512&i.flags&&(D[0]=255&g,D[1]=g>>>8&255,i.check=r(i.check,D,2,0)),b=g=0}else i.head&&(i.head.extra=null);i.mode=6;case 6:if(1024&i.flags&&(p<(E=i.length)&&(E=p),E&&(i.head&&(L=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),n.arraySet(i.head.extra,h,d,E,L)),512&i.flags&&(i.check=r(i.check,h,E,d)),p-=E,d+=E,i.length-=E),i.length))break e;i.length=0,i.mode=7;case 7:if(2048&i.flags){if(0===p)break e;for(E=0;L=h[d+E++],i.head&&L&&i.length<65536&&(i.head.name+=String.fromCharCode(L)),L&&E<p;);if(512&i.flags&&(i.check=r(i.check,h,E,d)),p-=E,d+=E,L)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=8;case 8:if(4096&i.flags){if(0===p)break e;for(E=0;L=h[d+E++],i.head&&L&&i.length<65536&&(i.head.comment+=String.fromCharCode(L)),L&&E<p;);if(512&i.flags&&(i.check=r(i.check,h,E,d)),p-=E,d+=E,L)break e}else i.head&&(i.head.comment=null);i.mode=9;case 9:if(512&i.flags){for(;b<16;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(g!==(65535&i.check)){e.msg="header crc mismatch",i.mode=30;break}b=g=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=12;break;case 10:for(;b<32;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}e.adler=i.check=c(g),b=g=0,i.mode=11;case 11:if(0===i.havedict)return e.next_out=f,e.avail_out=m,e.next_in=d,e.avail_in=p,i.hold=g,i.bits=b,2;e.adler=i.check=1,i.mode=12;case 12:if(5===t||6===t)break e;case 13:if(i.last){g>>>=7&b,b-=7&b,i.mode=27;break}for(;b<3;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}switch(i.last=1&g,b-=1,3&(g>>>=1)){case 0:i.mode=14;break;case 1:if(v(i),i.mode=20,6!==t)break;g>>>=2,b-=2;break e;case 2:i.mode=17;break;case 3:e.msg="invalid block type",i.mode=30}g>>>=2,b-=2;break;case 14:for(g>>>=7&b,b-=7&b;b<32;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if((65535&g)!=(g>>>16^65535)){e.msg="invalid stored block lengths",i.mode=30;break}if(i.length=65535&g,b=g=0,i.mode=15,6===t)break e;case 15:i.mode=16;case 16:if(E=i.length){if(p<E&&(E=p),m<E&&(E=m),0===E)break e;n.arraySet(u,h,d,E,f),p-=E,d+=E,m-=E,f+=E,i.length-=E;break}i.mode=12;break;case 17:for(;b<14;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(i.nlen=257+(31&g),g>>>=5,b-=5,i.ndist=1+(31&g),g>>>=5,b-=5,i.ncode=4+(15&g),g>>>=4,b-=4,286<i.nlen||30<i.ndist){e.msg="too many length or distance symbols",i.mode=30;break}i.have=0,i.mode=18;case 18:for(;i.have<i.ncode;){for(;b<3;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}i.lens[B[i.have++]]=7&g,g>>>=3,b-=3}for(;i.have<19;)i.lens[B[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,I={bits:i.lenbits},k=a(0,i.lens,0,19,i.lencode,0,i.work,I),i.lenbits=I.bits,k){e.msg="invalid code lengths set",i.mode=30;break}i.have=0,i.mode=19;case 19:for(;i.have<i.nlen+i.ndist;){for(;M=(O=i.lencode[g&(1<<i.lenbits)-1])>>>16&255,P=65535&O,!((_=O>>>24)<=b);){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(P<16)g>>>=_,b-=_,i.lens[i.have++]=P;else{if(16===P){for(R=_+2;b<R;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(g>>>=_,b-=_,0===i.have){e.msg="invalid bit length repeat",i.mode=30;break}L=i.lens[i.have-1],E=3+(3&g),g>>>=2,b-=2}else if(17===P){for(R=_+3;b<R;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}b-=_,L=0,E=3+(7&(g>>>=_)),g>>>=3,b-=3}else{for(R=_+7;b<R;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}b-=_,L=0,E=11+(127&(g>>>=_)),g>>>=7,b-=7}if(i.have+E>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=30;break}for(;E--;)i.lens[i.have++]=L}}if(30===i.mode)break;if(0===i.lens[256]){e.msg="invalid code -- missing end-of-block",i.mode=30;break}if(i.lenbits=9,I={bits:i.lenbits},k=a(1,i.lens,0,i.nlen,i.lencode,0,i.work,I),i.lenbits=I.bits,k){e.msg="invalid literal/lengths set",i.mode=30;break}if(i.distbits=6,i.distcode=i.distdyn,I={bits:i.distbits},k=a(2,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,I),i.distbits=I.bits,k){e.msg="invalid distances set",i.mode=30;break}if(i.mode=20,6===t)break e;case 20:i.mode=21;case 21:if(6<=p&&258<=m){e.next_out=f,e.avail_out=m,e.next_in=d,e.avail_in=p,i.hold=g,i.bits=b,o(e,S),f=e.next_out,u=e.output,m=e.avail_out,d=e.next_in,h=e.input,p=e.avail_in,g=i.hold,b=i.bits,12===i.mode&&(i.back=-1);break}for(i.back=0;M=(O=i.lencode[g&(1<<i.lenbits)-1])>>>16&255,P=65535&O,!((_=O>>>24)<=b);){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(M&&!(240&M)){for(C=_,A=M,N=P;M=(O=i.lencode[N+((g&(1<<C+A)-1)>>C)])>>>16&255,P=65535&O,!(C+(_=O>>>24)<=b);){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}g>>>=C,b-=C,i.back+=C}if(g>>>=_,b-=_,i.back+=_,i.length=P,0===M){i.mode=26;break}if(32&M){i.back=-1,i.mode=12;break}if(64&M){e.msg="invalid literal/length code",i.mode=30;break}i.extra=15&M,i.mode=22;case 22:if(i.extra){for(R=i.extra;b<R;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}i.length+=g&(1<<i.extra)-1,g>>>=i.extra,b-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=23;case 23:for(;M=(O=i.distcode[g&(1<<i.distbits)-1])>>>16&255,P=65535&O,!((_=O>>>24)<=b);){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(!(240&M)){for(C=_,A=M,N=P;M=(O=i.distcode[N+((g&(1<<C+A)-1)>>C)])>>>16&255,P=65535&O,!(C+(_=O>>>24)<=b);){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}g>>>=C,b-=C,i.back+=C}if(g>>>=_,b-=_,i.back+=_,64&M){e.msg="invalid distance code",i.mode=30;break}i.offset=P,i.extra=15&M,i.mode=24;case 24:if(i.extra){for(R=i.extra;b<R;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}i.offset+=g&(1<<i.extra)-1,g>>>=i.extra,b-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=30;break}i.mode=25;case 25:if(0===m)break e;if(E=S-m,i.offset>E){if((E=i.offset-E)>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=30;break}w=E>i.wnext?(E-=i.wnext,i.wsize-E):i.wnext-E,E>i.length&&(E=i.length),T=i.window}else T=u,w=f-i.offset,E=i.length;for(m<E&&(E=m),m-=E,i.length-=E;u[f++]=T[w++],--E;);0===i.length&&(i.mode=21);break;case 26:if(0===m)break e;u[f++]=i.length,m--,i.mode=21;break;case 27:if(i.wrap){for(;b<32;){if(0===p)break e;p--,g|=h[d++]<<b,b+=8}if(S-=m,e.total_out+=S,i.total+=S,S&&(e.adler=i.check=i.flags?r(i.check,u,S,f-S):s(i.check,u,S,f-S)),S=m,(i.flags?g:c(g))!==i.check){e.msg="incorrect data check",i.mode=30;break}b=g=0}i.mode=28;case 28:if(i.wrap&&i.flags){for(;b<32;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(g!==(4294967295&i.total)){e.msg="incorrect length check",i.mode=30;break}b=g=0}i.mode=29;case 29:k=1;break e;case 30:k=-3;break e;case 31:return-4;default:return l}return e.next_out=f,e.avail_out=m,e.next_in=d,e.avail_in=p,i.hold=g,i.bits=b,(i.wsize||S!==e.avail_out&&i.mode<30&&(i.mode<27||4!==t))&&y(e,e.output,e.next_out,S-e.avail_out)?(i.mode=31,-4):(x-=e.avail_in,S-=e.avail_out,e.total_in+=x,e.total_out+=S,i.total+=S,i.wrap&&S&&(e.adler=i.check=i.flags?r(i.check,u,S,e.next_out-S):s(i.check,u,S,e.next_out-S)),e.data_type=i.bits+(i.last?64:0)+(12===i.mode?128:0)+(20===i.mode||15===i.mode?256:0),(0==x&&0===S||4===t)&&0===k&&(k=-5),k)},i.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},i.inflateGetHeader=function(e,t){var i;return e&&e.state&&2&(i=e.state).wrap?((i.head=t).done=!1,0):l},i.inflateSetDictionary=function(e,t){var i,n=t.length;return e&&e.state?0!==(i=e.state).wrap&&11!==i.mode?l:11===i.mode&&s(1,t,n,0)!==i.check?-3:y(e,t,n,n)?(i.mode=31,-4):(i.havedict=1,0):l},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,i){"use strict";var n=e("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,i,l,c,h,u,d){var f,p,m,g,b,v,y,x,S,E=d.bits,w=0,T=0,_=0,M=0,P=0,C=0,A=0,N=0,L=0,k=0,I=null,R=0,O=new n.Buf16(16),D=new n.Buf16(16),B=null,F=0;for(w=0;w<=15;w++)O[w]=0;for(T=0;T<l;T++)O[t[i+T]]++;for(P=E,M=15;1<=M&&0===O[M];M--);if(M<P&&(P=M),0===M)return c[h++]=20971520,c[h++]=20971520,d.bits=1,0;for(_=1;_<M&&0===O[_];_++);for(P<_&&(P=_),w=N=1;w<=15;w++)if(N<<=1,(N-=O[w])<0)return-1;if(0<N&&(0===e||1!==M))return-1;for(D[1]=0,w=1;w<15;w++)D[w+1]=D[w]+O[w];for(T=0;T<l;T++)0!==t[i+T]&&(u[D[t[i+T]]++]=T);if(v=0===e?(I=B=u,19):1===e?(I=s,R-=257,B=r,F-=257,256):(I=o,B=a,-1),w=_,b=h,A=T=k=0,m=-1,g=(L=1<<(C=P))-1,1===e&&852<L||2===e&&592<L)return 1;for(;;){for(y=w-A,S=u[T]<v?(x=0,u[T]):u[T]>v?(x=B[F+u[T]],I[R+u[T]]):(x=96,0),f=1<<w-A,_=p=1<<C;c[b+(k>>A)+(p-=f)]=y<<24|x<<16|S,0!==p;);for(f=1<<w-1;k&f;)f>>=1;if(0!==f?(k&=f-1,k+=f):k=0,T++,0==--O[w]){if(w===M)break;w=t[i+u[T]]}if(P<w&&(k&g)!==m){for(0===A&&(A=P),b+=_,N=1<<(C=w-A);C+A<M&&!((N-=O[C+A])<=0);)C++,N<<=1;if(L+=1<<C,1===e&&852<L||2===e&&592<L)return 1;c[m=k&g]=P<<24|C<<16|b-h}}return 0!==k&&(c[b+k]=w-A<<24|64<<16),d.bits=P,0}},{"../utils/common":41}],51:[function(e,t,i){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,i){"use strict";var n=e("../utils/common");function s(e){for(var t=e.length;0<=--t;)e[t]=0}var r=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],o=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576);s(c);var h=new Array(60);s(h);var u=new Array(512);s(u);var d=new Array(256);s(d);var f=new Array(29);s(f);var p,m,g,b=new Array(30);function v(e,t,i,n,s){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=n,this.max_length=s,this.has_stree=e&&e.length}function y(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function x(e){return e<256?u[e]:u[256+(e>>>7)]}function S(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function E(e,t,i){e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,S(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)}function w(e,t,i){E(e,i[2*t],i[2*t+1])}function T(e,t){for(var i=0;i|=1&e,e>>>=1,i<<=1,0<--t;);return i>>>1}function _(e,t,i){var n,s,r=new Array(16),o=0;for(n=1;n<=15;n++)r[n]=o=o+i[n-1]<<1;for(s=0;s<=t;s++){var a=e[2*s+1];0!==a&&(e[2*s]=T(r[a]++,a))}}function M(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function P(e){8<e.bi_valid?S(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function C(e,t,i,n){var s=2*t,r=2*i;return e[s]<e[r]||e[s]===e[r]&&n[t]<=n[i]}function A(e,t,i){for(var n=e.heap[i],s=i<<1;s<=e.heap_len&&(s<e.heap_len&&C(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!C(t,n,e.heap[s],e.depth));)e.heap[i]=e.heap[s],i=s,s<<=1;e.heap[i]=n}function N(e,t,i){var n,s,a,l,c=0;if(0!==e.last_lit)for(;n=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],s=e.pending_buf[e.l_buf+c],c++,0===n?w(e,s,t):(w(e,(a=d[s])+256+1,t),0!==(l=r[a])&&E(e,s-=f[a],l),w(e,a=x(--n),i),0!==(l=o[a])&&E(e,n-=b[a],l)),c<e.last_lit;);w(e,256,t)}function L(e,t){var i,n,s,r=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,i=0;i<l;i++)0!==r[2*i]?(e.heap[++e.heap_len]=c=i,e.depth[i]=0):r[2*i+1]=0;for(;e.heap_len<2;)r[2*(s=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[s]=0,e.opt_len--,a&&(e.static_len-=o[2*s+1]);for(t.max_code=c,i=e.heap_len>>1;1<=i;i--)A(e,r,i);for(s=l;i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],A(e,r,1),n=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=n,r[2*s]=r[2*i]+r[2*n],e.depth[s]=(e.depth[i]>=e.depth[n]?e.depth[i]:e.depth[n])+1,r[2*i+1]=r[2*n+1]=s,e.heap[1]=s++,A(e,r,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var i,n,s,r,o,a,l=t.dyn_tree,c=t.max_code,h=t.stat_desc.static_tree,u=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(r=0;r<=15;r++)e.bl_count[r]=0;for(l[2*e.heap[e.heap_max]+1]=0,i=e.heap_max+1;i<573;i++)p<(r=l[2*l[2*(n=e.heap[i])+1]+1]+1)&&(r=p,m++),l[2*n+1]=r,c<n||(e.bl_count[r]++,o=0,f<=n&&(o=d[n-f]),a=l[2*n],e.opt_len+=a*(r+o),u&&(e.static_len+=a*(h[2*n+1]+o)));if(0!==m){do{for(r=p-1;0===e.bl_count[r];)r--;e.bl_count[r]--,e.bl_count[r+1]+=2,e.bl_count[p]--,m-=2}while(0<m);for(r=p;0!==r;r--)for(n=e.bl_count[r];0!==n;)c<(s=e.heap[--i])||(l[2*s+1]!==r&&(e.opt_len+=(r-l[2*s+1])*l[2*s],l[2*s+1]=r),n--)}}(e,t),_(r,c,e.bl_count)}function k(e,t,i){var n,s,r=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),t[2*(i+1)+1]=65535,n=0;n<=i;n++)s=o,o=t[2*(n+1)+1],++a<l&&s===o||(a<c?e.bl_tree[2*s]+=a:0!==s?(s!==r&&e.bl_tree[2*s]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,r=s,c=(a=0)===o?(l=138,3):s===o?(l=6,3):(l=7,4))}function I(e,t,i){var n,s,r=-1,o=t[1],a=0,l=7,c=4;for(0===o&&(l=138,c=3),n=0;n<=i;n++)if(s=o,o=t[2*(n+1)+1],!(++a<l&&s===o)){if(a<c)for(;w(e,s,e.bl_tree),0!=--a;);else 0!==s?(s!==r&&(w(e,s,e.bl_tree),a--),w(e,16,e.bl_tree),E(e,a-3,2)):a<=10?(w(e,17,e.bl_tree),E(e,a-3,3)):(w(e,18,e.bl_tree),E(e,a-11,7));r=s,c=(a=0)===o?(l=138,3):s===o?(l=6,3):(l=7,4)}}s(b);var R=!1;function O(e,t,i,s){E(e,0+(s?1:0),3),function(e,t,i){P(e),S(e,i),S(e,~i),n.arraySet(e.pending_buf,e.window,t,i,e.pending),e.pending+=i}(e,t,i)}i._tr_init=function(e){R||(function(){var e,t,i,n,s,l=new Array(16);for(n=i=0;n<28;n++)for(f[n]=i,e=0;e<1<<r[n];e++)d[i++]=n;for(d[i-1]=n,n=s=0;n<16;n++)for(b[n]=s,e=0;e<1<<o[n];e++)u[s++]=n;for(s>>=7;n<30;n++)for(b[n]=s<<7,e=0;e<1<<o[n]-7;e++)u[256+s++]=n;for(t=0;t<=15;t++)l[t]=0;for(e=0;e<=143;)c[2*e+1]=8,e++,l[8]++;for(;e<=255;)c[2*e+1]=9,e++,l[9]++;for(;e<=279;)c[2*e+1]=7,e++,l[7]++;for(;e<=287;)c[2*e+1]=8,e++,l[8]++;for(_(c,287,l),e=0;e<30;e++)h[2*e+1]=5,h[2*e]=T(e,5);p=new v(c,r,257,286,15),m=new v(h,o,0,30,15),g=new v(new Array(0),a,0,19,7)}(),R=!0),e.l_desc=new y(e.dyn_ltree,p),e.d_desc=new y(e.dyn_dtree,m),e.bl_desc=new y(e.bl_tree,g),e.bi_buf=0,e.bi_valid=0,M(e)},i._tr_stored_block=O,i._tr_flush_block=function(e,t,i,n){var s,r,o=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),L(e,e.l_desc),L(e,e.d_desc),o=function(e){var t;for(k(e,e.dyn_ltree,e.l_desc.max_code),k(e,e.dyn_dtree,e.d_desc.max_code),L(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),s=e.opt_len+3+7>>>3,(r=e.static_len+3+7>>>3)<=s&&(s=r)):s=r=i+5,i+4<=s&&-1!==t?O(e,t,i,n):4===e.strategy||r===s?(E(e,2+(n?1:0),3),N(e,c,h)):(E(e,4+(n?1:0),3),function(e,t,i,n){var s;for(E(e,t-257,5),E(e,i-1,5),E(e,n-4,4),s=0;s<n;s++)E(e,e.bl_tree[2*l[s]+1],3);I(e,e.dyn_ltree,t-1),I(e,e.dyn_dtree,i-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),N(e,e.dyn_ltree,e.dyn_dtree)),M(e),n&&P(e)},i._tr_tally=function(e,t,i){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(d[i]+256+1)]++,e.dyn_dtree[2*x(t)]++),e.last_lit===e.lit_bufsize-1},i._tr_align=function(e){E(e,2,3),w(e,256,c),function(e){16===e.bi_valid?(S(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,i){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(e){!function(e){"use strict";if(!e.setImmediate){var t,i,n,s,r=1,o={},a=!1,l=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,t="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){u(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?(s="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",d,!1):e.attachEvent("onmessage",d),function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((n=new MessageChannel).port1.onmessage=function(e){u(e.data)},function(e){n.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,function(e){var t=l.createElement("script");t.onreadystatechange=function(){u(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):function(e){setTimeout(u,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var i=new Array(arguments.length-1),n=0;n<i.length;n++)i[n]=arguments[n+1];var s={callback:e,args:i};return o[r]=s,t(r),r++},c.clearImmediate=h}function h(e){delete o[e]}function u(e){if(a)setTimeout(u,0,e);else{var t=o[e];if(t){a=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(void 0,i)}}(t)}finally{h(e),a=!1}}}}function d(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&u(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==i.g?i.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},1745:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(7307),t),s(i(9252),t),s(i(7586),t),s(i(7435),t),s(i(427),t),s(i(5294),t),s(i(7456),t),s(i(4076),t),s(i(1121),t),s(i(6352),t),s(i(899),t),s(i(2870),t)},1846:function(e,t,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=i(6119),o=i(4831),a=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},e}(),l=function(){function e(){this.key=null,this.value=null}return e.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},e}(),c=function(e){function t(t){var i=e.call(this,t)||this;return i.head=new l,i.tail=new l,i.head.next=i.tail,i.tail.prev=i.head,i}return s(t,e),t.prototype.appendToTail=function(e){var t=this.tail.prev;t.next=e,e.prev=t,e.next=this.tail,this.tail.prev=e},t.prototype.getLinkedDictionaryPair=function(e){if(!o.isUndefined(e)){var t="$"+this.toStr(e);return this.table[t]}},t.prototype.getValue=function(e){var t=this.getLinkedDictionaryPair(e);if(!o.isUndefined(t))return t.value},t.prototype.remove=function(t){var i=this.getLinkedDictionaryPair(t);if(!o.isUndefined(i))return e.prototype.remove.call(this,t),i.unlink(),i.value},t.prototype.clear=function(){e.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},t.prototype.replace=function(e,t){var i="$"+this.toStr(t.key);t.next=e.next,t.prev=e.prev,this.remove(e.key),t.prev.next=t,t.next.prev=t,this.table[i]=t,++this.nElements},t.prototype.setValue=function(e,t){if(!o.isUndefined(e)&&!o.isUndefined(t)){var i=this.getLinkedDictionaryPair(e),n=new a(e,t),s="$"+this.toStr(e);return o.isUndefined(i)?(this.appendToTail(n),this.table[s]=n,void++this.nElements):(this.replace(i,n),i.value)}},t.prototype.keys=function(){var e=[];return this.forEach((function(t,i){e.push(t)})),e},t.prototype.values=function(){var e=[];return this.forEach((function(t,i){e.push(i)})),e},t.prototype.forEach=function(e){for(var t=this.head.next;t.next;){if(!1===e(t.key,t.value))return;t=t.next}},t}(r.default);t.default=c},1850:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Appearance=t.Note=void 0;const n=i(2561);var s;t.Note=class{constructor(e,t,i,n,s,r){this.slurs=[],this.playbackInstrumentId=void 0,this.notehead=void 0,this.printObject=!0,this.voiceEntry=e,this.parentStaffEntry=t,this.length=i,this.pitch=n,this.sourceMeasure=s,this.isRestFlag=null!==r&&void 0!==r&&r,this.halfTone=n?n.getHalfTone():0}get NoteAsString(){return this.pitch.toString()}ToStringShort(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return!this.Pitch||this.isRest()?"rest":null===(e=this.Pitch)||void 0===e?void 0:e.ToStringShort(t)}get ToStringShortGet(){return this.ToStringShort(0)}get ParentVoiceEntry(){return this.voiceEntry}set ParentVoiceEntry(e){this.voiceEntry=e}get ParentStaffEntry(){return this.parentStaffEntry}get ParentStaff(){return this.parentStaffEntry.ParentStaff}get Length(){return this.length}set Length(e){this.length=e}get SourceMeasure(){return this.sourceMeasure}get TypeLength(){return this.typeLength}set TypeLength(e){this.typeLength=e}get NoteTypeXml(){return this.noteTypeXml}set NoteTypeXml(e){this.noteTypeXml=e}get NormalNotes(){return this.normalNotes}set NormalNotes(e){this.normalNotes=e}get Pitch(){return this.pitch}get NoteBeam(){return this.beam}set NoteBeam(e){this.beam=e}set Notehead(e){this.notehead=e}get Notehead(){return this.notehead}get NoteTuplet(){return this.tuplet}set NoteTuplet(e){this.tuplet=e}get NoteGlissando(){return this.glissando}set NoteGlissando(e){this.glissando=e}get NoteTie(){return this.tie}set NoteTie(e){this.tie=e}get NoteSlurs(){return this.slurs}set NoteSlurs(e){this.slurs=e}get PlaybackInstrumentId(){return this.playbackInstrumentId}set PlaybackInstrumentId(e){this.playbackInstrumentId=e}get PrintObject(){return this.printObject}set PrintObject(e){this.printObject=e}get Arpeggio(){return this.arpeggio}set Arpeggio(e){this.arpeggio=e}get IsCueNote(){return this.isCueNote}set IsCueNote(e){this.isCueNote=e}get StemDirectionXml(){return this.stemDirectionXml}set StemDirectionXml(e){this.stemDirectionXml=e}get TremoloStrokes(){var e;return null===(e=this.TremoloInfo)||void 0===e?void 0:e.tremoloStrokes}get StemColorXml(){return this.stemColorXml}set StemColorXml(e){this.stemColorXml=e}get NoteheadColorXml(){return this.noteheadColorXml}set NoteheadColorXml(e){this.noteheadColorXml=e}get NoteheadColor(){return this.noteheadColor}set NoteheadColor(e){this.noteheadColor=e}get NoteheadColorCurrentlyRendered(){return this.noteheadColorCurrentlyRendered}set NoteheadColorCurrentlyRendered(e){this.noteheadColorCurrentlyRendered=e}isRest(){return this.isRestFlag}isWholeRest(){return this.isRest()&&this.Length.RealValue===this.sourceMeasure.ActiveTimeSignature.RealValue}isWholeMeasureNote(){return this.Length.RealValue===this.sourceMeasure.ActiveTimeSignature.RealValue}ToString(){return this.pitch?this.Pitch.ToString()+", length: "+this.length.toString():"rest note, length: "+this.length.toString()}getAbsoluteTimestamp(){return n.Fraction.plus(this.voiceEntry.Timestamp,this.sourceMeasure.AbsoluteTimestamp)}isDuplicateSlur(e){for(let t=0,i=this.slurs.length;t<i;++t){const i=this.slurs[t];if(void 0!==i.StartNote&&void 0!==i.EndNote&&void 0!==e.StartNote&&e.StartNote===i.StartNote&&i.EndNote===this&&e.PlacementXml===i.PlacementXml)return!0}return!1}hasTabEffects(){return!1}},function(e){e[e.Normal=0]="Normal",e[e.Grace=1]="Grace",e[e.Cue=2]="Cue"}(s||(t.Appearance=s={}))},1888:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PagePlacementEnum=t.GraphicalMusicPage=void 0;const n=i(6438),s=i(7741),r=i(9409);class o extends s.GraphicalObject{constructor(e){super(),this.musicSystems=[],this.labels=[],this.parent=e,this.boundingBox=new n.BoundingBox(this,void 0)}get MusicSystems(){return this.musicSystems}set MusicSystems(e){this.musicSystems=e}get Labels(){return this.labels}set Labels(e){this.labels=e}get Parent(){return this.parent}set Parent(e){this.parent=e}get PageNumber(){return this.pageNumber}set PageNumber(e){this.pageNumber=e}setMusicPageAbsolutePosition(e,t){return new r.PointF2D(0,0)}}var a;t.GraphicalMusicPage=o,function(e){e[e.Down=0]="Down",e[e.Right=1]="Right",e[e.RightDown=2]="RightDown"}(a||(t.PagePlacementEnum=a={}))},1902:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowBackend=t.VexFlowBackends=void 0;var s=n(i(3206)).default.Flow;t.VexFlowBackends=class{},t.VexFlowBackend=class{getInnerElement(){return this.inner}getCanvas(){return this.canvas}getRenderElement(){let e=this.canvas;return this.getVexflowBackendType()===s.Renderer.Backends.CANVAS&&(e=this.inner),e}getRenderer(){return this.renderer}removeAllChildrenFromContainer(e){for(;0!==e.children.length;)e.removeChild(e.children.item(0))}removeFromContainer(e){const t=this.getRenderElement();for(let i=0;i<e.children.length;i++)if(e.children.item(i)===t){e.removeChild(t);break}}resize(e,t){this.renderer.resize(e,t),this.width=e,this.height=t}}},1910:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Staff=void 0,t.Staff=class{constructor(e,t){this.isTab=!1,this.voices=[],this.volume=1,this.stafflineCount=5,this.hasLyrics=!1,this.openTieDict={},this.parentInstrument=e,this.id=t,this.audible=!0,this.Visible=!0,this.following=!0}get ParentInstrument(){return this.parentInstrument}set ParentInstrument(e){this.parentInstrument=e}get Voices(){return this.voices}get Id(){return this.id}get Volume(){return this.volume}set Volume(e){this.volume=e}get StafflineCount(){return this.stafflineCount}set StafflineCount(e){this.stafflineCount=e}isVisible(){return this.Visible&&this.ParentInstrument.Visible}}},1932:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSheetDrawer=void 0;const n=i(6438),s=i(2683),r=i(6452),o=i(200),a=i(9409),l=i(8254),c=i(7435),h=i(7533),u=i(7307),d=i(4284),f=i(512),p=i(242),m=i(7499),g=i(298);t.MusicSheetDrawer=class{constructor(e,t){this.drawableBoundingBoxElement="None",this.skyLineVisible=!1,this.bottomLineVisible=!1,this.phonicScoreMode=p.PhonicScoreModes.Manual,this.textMeasurer=e,this.splitScreenLineColor=-1,this.drawingParameters=t,this.rules=t.Rules}set Mode(e){this.phonicScoreMode=e}drawSheet(e){if(this.graphicalMusicSheet=e,this.rules=e.ParentMusicSheet.Rules,this.drawSplitScreenLine(),this.drawingParameters.drawCursors)for(const i of e.Cursors){if(!i)continue;const e=new n.BoundingBox(i);e.AbsolutePosition=i.Start,e.BorderBottom=i.End.y-i.Start.y,e.BorderRight=i.Width/2,e.BorderLeft=-i.Width/2,this.isVisible(e)&&this.drawLineAsVerticalRectangle(i,s.GraphicalLayers.Cursor)}this.drawingParameters.drawScrollIndicator&&this.drawScrollIndicator();const t=Math.min(this.graphicalMusicSheet.MusicPages.length,this.rules.MaxPageToDrawNumber);for(let i=0;i<t;i++){const e=this.graphicalMusicSheet.MusicPages[i];this.drawPage(e)}}drawLineAsHorizontalRectangle(e,t){let i=new o.RectangleF2D(e.Start.x,e.End.y-e.Width/2,e.End.x-e.Start.x,e.Width);i=this.applyScreenTransformationForRect(i),this.renderRectangle(i,t,e.styleId,e.colorHex)}drawLineAsVerticalRectangle(e,t){const i=e.Start,n=e.Width;let s=new o.RectangleF2D(i.x-n/2,i.y,n,e.End.y-i.y);s=this.applyScreenTransformationForRect(s),this.renderRectangle(s,t,e.styleId)}drawLineAsHorizontalRectangleWithOffset(e,t,i){const n=new a.PointF2D(e.Start.x+t.x,e.Start.y+t.y),s=new a.PointF2D(e.End.x+t.x,e.End.y+t.y),r=e.Width;let l=new o.RectangleF2D(n.x,s.y-r/2,s.x-n.x,r);l=this.applyScreenTransformationForRect(l),this.renderRectangle(l,i,e.styleId)}drawLineAsVerticalRectangleWithOffset(e,t,i){const n=new a.PointF2D(e.Start.x+t.x,e.Start.y+t.y),s=new a.PointF2D(e.End.x+t.x,e.End.y+t.y),r=e.Width;let l=new o.RectangleF2D(n.x,n.y,r,s.y-n.y);l=this.applyScreenTransformationForRect(l),this.renderRectangle(l,i,e.styleId)}drawRectangle(e,t){const i=e.PositionAndShape;let n=new o.RectangleF2D(i.AbsolutePosition.x,i.AbsolutePosition.y,i.BorderRight,i.BorderBottom);n=this.applyScreenTransformationForRect(n),this.renderRectangle(n,t,e.style)}calculatePixelDistance(e){throw new Error("not implemented")}drawLabel(e,t){if(!this.isVisible(e.PositionAndShape))return;const i=e.Label;if(""===i.text.trim())return;const n=this.applyScreenTransformation(e.PositionAndShape.AbsolutePosition),s=this.calculatePixelDistance(i.fontHeight),r=this.calculatePixelDistance(e.PositionAndShape.Size.width),o=Math.ceil(r),a=Math.ceil(s*(.2+e.TextLines.length));switch(i.textAlignment){case h.TextAlignmentEnum.LeftTop:break;case h.TextAlignmentEnum.LeftCenter:n.y-=a/2;break;case h.TextAlignmentEnum.LeftBottom:n.y-=a;break;case h.TextAlignmentEnum.CenterTop:n.x-=o/2;break;case h.TextAlignmentEnum.CenterCenter:n.x-=o/2,n.y-=a/2;break;case h.TextAlignmentEnum.CenterBottom:n.x-=o/2,n.y-=a;break;case h.TextAlignmentEnum.RightTop:n.x-=o;break;case h.TextAlignmentEnum.RightCenter:n.x-=o,n.y-=a/2;break;case h.TextAlignmentEnum.RightBottom:n.x-=o,n.y-=a;break;default:throw new u.ArgumentOutOfRangeException("")}return this.renderLabel(e,t,o,a,s,n)}applyScreenTransformation(e){throw new Error("not implemented")}applyScreenTransformations(e){const t=[];for(const i of e)t.push(this.applyScreenTransformation(i));return t}applyScreenTransformationForRect(e){throw new Error("not implemented")}drawSplitScreenLine(){}renderRectangle(e,t,i){throw new Error("not implemented")}drawScrollIndicator(){}drawSelectionStartSymbol(e){}drawSelectionEndSymbol(e){}renderLabel(e,t,i,n,s,r){throw new Error("not implemented")}renderSystemToScreen(e,t,i){}drawMeasure(e){throw new Error("not implemented")}drawSkyLine(e){}drawBottomLine(e){}drawInstrumentBrace(e,t){}drawGroupBracket(e,t){}isVisible(e){return!0}drawMusicSystem(e){const t=this.getSystemAbsBoundingRect(e),i=this.getSytemBoundingBoxInPixels(t);this.drawMusicSystemComponents(e,i,t)}getSytemBoundingBoxInPixels(e){const t=this.applyScreenTransformationForRect(e);return t.x=Math.round(t.x),t.y=Math.round(t.y),t}getSystemAbsBoundingRect(e){const t=e.PositionAndShape.BoundingRectangle;return new o.RectangleF2D(e.PositionAndShape.AbsolutePosition.x+e.PositionAndShape.BorderLeft-1,e.PositionAndShape.AbsolutePosition.y+e.PositionAndShape.BorderTop-1,t.width+6,t.height+2)}drawMusicSystemComponents(e,t,i){const n=this.graphicalMusicSheet.SelectionStartSymbol,r=this.graphicalMusicSheet.SelectionEndSymbol;this.drawingParameters.drawSelectionStartSymbol&&void 0!==n&&this.isVisible(n.PositionAndShape)&&this.drawSelectionStartSymbol(n),this.drawingParameters.drawSelectionEndSymbol&&void 0!==r&&this.isVisible(r.PositionAndShape)&&this.drawSelectionEndSymbol(r);for(const s of e.StaffLines)this.drawStaffLine(s),this.rules.RenderLyrics&&(s.LyricsDashes.length>0&&this.drawDashes(s.LyricsDashes),s.LyricLines.length>0&&this.drawLyricLines(s.LyricLines,s));for(const s of e.SystemLines)this.drawSystemLineObject(s);if(this.rules.RenderSystemLabelsAfterFirstPage||e.Parent===e.Parent.Parent.MusicPages[0])for(const l of e.Labels)l.SVGNode=this.drawLabel(l,s.GraphicalLayers.Notes);const o=this.graphicalMusicSheet.ParentMusicSheet.Instruments,a=o.filter((e=>e.isVisible())).length;for(const s of e.InstrumentBrackets)this.drawInstrumentBrace(s,e);if(o.length>0)if(a>1)for(const s of e.GroupBrackets)this.drawGroupBracket(s,e);else for(const s of e.GroupBrackets)s.Visible=!1;if(!this.leadSheet)for(const l of e.MeasureNumberLabels)l.SVGNode=this.drawLabel(l,s.GraphicalLayers.Notes);for(const s of e.StaffLines)this.drawStaffLineSymbols(s);this.drawingParameters.drawMarkedAreas&&this.drawMarkedAreas(e),this.drawingParameters.drawComments&&this.drawComment(e)}activateSystemRendering(e,t,i,n){return!0}drawSystemLineObject(e){}drawStaffLine(e){for(const t of e.Measures)this.drawMeasure(t);this.rules.RenderLyrics&&e.LyricsDashes.length>0&&this.drawDashes(e.LyricsDashes),this.drawOctaveShifts(e),this.drawPedals(e),this.drawExpressions(e),this.skyLineVisible&&this.drawSkyLine(e),this.bottomLineVisible&&this.drawBottomLine(e)}drawLyricLines(e,t){t.LyricLines.forEach((e=>{e.Start.y+=t.PositionAndShape.AbsolutePosition.y,e.End.y+=t.PositionAndShape.AbsolutePosition.y,e.Start.x+=t.PositionAndShape.AbsolutePosition.x,e.End.x+=t.PositionAndShape.AbsolutePosition.x,this.drawGraphicalLine(e,this.rules.LyricUnderscoreLineWidth,e.colorHex)}))}drawExpressions(e){}drawGraphicalLine(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black";return this.drawLine(e.Start,e.End,i,t)}drawLine(e,t){}drawDashes(e){e.forEach((e=>{var t;e.SVGNode=this.drawLabel(e,s.GraphicalLayers.Notes),null===(t=e.SVGNode)||void 0===t||t.classList.add("dash")}))}drawOctaveShifts(e){}drawStaffLines(e){if(e.StaffLines){const t=e.PositionAndShape.AbsolutePosition;for(let i=0;i<5;i++)this.drawLineAsHorizontalRectangleWithOffset(e.StaffLines[i],t,s.GraphicalLayers.Notes)}}drawInstantaneousDynamic(e){throw new Error("not implemented")}drawContinuousDynamic(e){throw new Error("not implemented")}drawSymbol(e,t,i){arguments.length>4&&void 0!==arguments[4]||s.GraphicalLayers.Notes}get leadSheet(){return this.graphicalMusicSheet.LeadSheet}set leadSheet(e){this.graphicalMusicSheet.LeadSheet=e}drawPage(e){if(this.isVisible(e.PositionAndShape)){for(const t of e.MusicSystems)this.isVisible(t.PositionAndShape)&&this.drawMusicSystem(t);if(e===e.Parent.MusicPages[0])for(const t of e.Labels)t.SVGNode=this.drawLabel(t,s.GraphicalLayers.Notes);this.drawableBoundingBoxElement&&this.drawBoundingBoxes(e.PositionAndShape,0,this.drawableBoundingBoxElement)}}drawBoundingBoxes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=e.DataObject.constructor.name;let r=!1;if("all"===i?r=!0:"VexFlowStaffEntry"===i?r=e.DataObject instanceof m.VexFlowStaffEntry:"VexFlowMeasure"===i?r=e.DataObject instanceof m.VexFlowMeasure:"VexFlowGraphicalNote"===i?r=e.DataObject instanceof m.VexFlowGraphicalNote:"VexFlowVoiceEntry"===i?r=e.DataObject instanceof m.VexFlowVoiceEntry:"GraphicalLabel"===i?r=e.DataObject instanceof l.GraphicalLabel:"VexFlowStaffLine"===i?r=e.DataObject instanceof m.VexFlowStaffLine:"SystemLine"===i?r=e.DataObject instanceof d.SystemLine:"StaffLineActivitySymbol"===i?r=e.DataObject instanceof g.StaffLineActivitySymbol:"VexFlowContinuousDynamicExpression"===i&&(r=e.DataObject instanceof m.VexFlowContinuousDynamicExpression),r||s===i){let i;n&&(i=s),this.drawBoundingBox(e,void 0,!0,i,t)}t++,e.ChildElements.forEach((e=>this.drawBoundingBoxes(e,t,i)))}drawBoundingBox(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=new o.RectangleF2D(e.AbsolutePosition.x+e.BorderMarginLeft,e.AbsolutePosition.y+e.BorderMarginTop,e.BorderMarginRight-e.BorderMarginLeft,e.BorderMarginBottom-e.BorderMarginTop);i&&(this.drawLineAsHorizontalRectangle(new r.GraphicalLine(new a.PointF2D(e.AbsolutePosition.x-1,e.AbsolutePosition.y),new a.PointF2D(e.AbsolutePosition.x+1,e.AbsolutePosition.y),.1,s.OutlineAndFillStyleEnum.BaseWritingColor,t),u-1),this.drawLineAsVerticalRectangle(new r.GraphicalLine(new a.PointF2D(e.AbsolutePosition.x,e.AbsolutePosition.y-1),new a.PointF2D(e.AbsolutePosition.x,e.AbsolutePosition.y+1),.1,s.OutlineAndFillStyleEnum.BaseWritingColor,t),u-1)),d=this.applyScreenTransformationForRect(d);const f=this.renderRectangle(d,s.GraphicalLayers.Background,u,t,.5);if(n){const e=new c.Label(n),t=new l.GraphicalLabel(e,.8,h.TextAlignmentEnum.CenterCenter,this.rules);t.setLabelPositionAndShapeBorders(),this.renderLabel(t,u,d.width,d.height,d.height,new a.PointF2D(d.x,d.y+12))}return f}drawMarkedAreas(e){for(const t of e.GraphicalMarkedAreas)t&&(t.systemRectangle&&this.drawRectangle(t.systemRectangle,s.GraphicalLayers.Background),t.settings&&(t.settings.SVGNode=this.drawLabel(t.settings,s.GraphicalLayers.Comment)),t.labelRectangle&&this.drawRectangle(t.labelRectangle,s.GraphicalLayers.Background),t.label&&(t.label.SVGNode=this.drawLabel(t.label,s.GraphicalLayers.Comment)))}drawComment(e){for(const t of e.GraphicalComments)t&&(t.settings&&(t.settings.SVGNode=this.drawLabel(t.settings,s.GraphicalLayers.Comment)),t.label&&(t.label.SVGNode=this.drawLabel(t.label,s.GraphicalLayers.Comment)))}drawStaffLineSymbols(e){const t=e.ParentStaff.ParentInstrument,i=e.PositionAndShape.AbsolutePosition.x,n=e.PositionAndShape.AbsolutePosition.y+2,o=e.PositionAndShape.BorderRight;t.highlight&&this.drawingParameters.drawHighlights&&this.drawLineAsHorizontalRectangle(new r.GraphicalLine(new a.PointF2D(i,n),new a.PointF2D(i+o,n),4,s.OutlineAndFillStyleEnum.Highlighted),s.GraphicalLayers.Highlight);let l=p.MusicSymbolDrawingStyle.Disabled,c=f.MusicSymbol.PLAY,h=this.drawingParameters.drawActivitySymbols;switch(this.phonicScoreMode){case p.PhonicScoreModes.Midi:c=f.MusicSymbol.PLAY,this.midiPlaybackAvailable&&e.ParentStaff.audible&&(l=p.MusicSymbolDrawingStyle.PlaybackSymbols);break;case p.PhonicScoreModes.Following:c=f.MusicSymbol.MIC,e.ParentStaff.following&&(l=p.MusicSymbolDrawingStyle.FollowSymbols);break;default:h=!1}if(h){const e=new a.PointF2D(i+o+2,n);this.drawSymbol(c,l,e)}if(this.drawingParameters.drawErrors)for(const u of e.Measures){const e=u.PositionAndShape,t=e.AbsolutePosition.x,i=e.AbsolutePosition.y+2;u.hasError&&this.graphicalMusicSheet.ParentMusicSheet.DrawErroneousMeasures&&this.drawLineAsHorizontalRectangle(new r.GraphicalLine(new a.PointF2D(t,i),new a.PointF2D(t+e.BorderRight,i),4,s.OutlineAndFillStyleEnum.ErrorUnderlay),s.GraphicalLayers.MeasureError)}}}},1974:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractGraphicalInstruction=void 0;const n=i(7741);class s extends n.GraphicalObject{constructor(e){super(),this.parent=e}get Parent(){return this.parent}set Parent(e){this.parent=e}}t.AbstractGraphicalInstruction=s},2002:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER",e[e.INSIDE_AT_END=2]="INSIDE_AT_END",e[e.INSIDE_AT_START=3]="INSIDE_AT_START"}(i||(i={}));var n=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.rootIds=e,this.nodes=t,this.initRootIds(),this.initNodes()}return e.prototype.initRootIds=function(){for(var e=0,t=this.rootIds;e<t.length;e++){var i=t[e];this.createEmptyNodeIfNotExist(i)}},e.prototype.initNodes=function(){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var t=0,i=this.nodes[e];t<i.length;t++){var n=i[t];this.createEmptyNodeIfNotExist(n)}},e.prototype.createEmptyNodeIfNotExist=function(e){this.nodes[e]||(this.nodes[e]=[])},e.prototype.getRootIds=function(){return this.rootIds.slice()},e.prototype.getNodes=function(){var e={};for(var t in this.nodes)this.nodes.hasOwnProperty(t)&&(e[t]=this.nodes[t].slice());return e},e.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},e.prototype.toObject=function(){return this.getObject()},e.prototype.flatten=function(){for(var e=[],t=0;t<this.rootIds.length;t++){var i=this.rootIds[t];e.push({id:i,level:0,hasParent:!1,childrenCount:0}),a(i,this.nodes,e,0)}for(var n=0,s=e;n<s.length;n++){var r=s[n];r.childrenCount=(o=r.id,this.nodes[o]?this.nodes[o].length:0)}var o;return e;function a(e,t,i,n){if(void 0===n&&(n=0),e&&t&&i&&t[e]){n++;for(var s=t[e],r=0;r<s.length;r++){var o=s[r];i.push({id:o,level:n,hasParent:!0}),a(o,t,i,n)}n--}}},e.prototype.moveIdBeforeId=function(e,t){return this.moveId(e,t,i.BEFORE)},e.prototype.moveIdAfterId=function(e,t){return this.moveId(e,t,i.AFTER)},e.prototype.moveIdIntoId=function(e,t,n){return void 0===n&&(n=!0),n?this.moveId(e,t,i.INSIDE_AT_START):this.moveId(e,t,i.INSIDE_AT_END)},e.prototype.swapRootIdWithRootId=function(e,t){var i=this.findRootId(e),n=this.findRootId(t);this.swapRootPositionWithRootPosition(i,n)},e.prototype.swapRootPositionWithRootPosition=function(e,t){var i=this.rootIds[t];this.rootIds[t]=this.rootIds[e],this.rootIds[e]=i},e.prototype.deleteId=function(e){this.rootDeleteId(e),this.nodeAndSubNodesDelete(e),this.nodeRefrencesDelete(e)},e.prototype.insertIdBeforeId=function(e,t){var i=this.findRootId(e);for(var n in i>-1&&this.insertIdIntoRoot(t,i),this.nodes)if(this.nodes.hasOwnProperty(n)){var s=this.findNodeId(n,e);s>-1&&this.insertIdIntoNode(n,t,s)}},e.prototype.insertIdAfterId=function(e,t){var i=this.findRootId(e);for(var n in i>-1&&this.insertIdIntoRoot(t,i+1),this.nodes)if(this.nodes.hasOwnProperty(n)){var s=this.findNodeId(n,e);s>-1&&this.insertIdIntoNode(n,t,s+1)}},e.prototype.insertIdIntoId=function(e,t){this.nodeInsertAtEnd(e,t),this.nodes[t]=[]},e.prototype.insertIdIntoRoot=function(e,t){if(void 0===t)this.rootInsertAtEnd(e);else if(t<0){var i=this.rootIds.length;this.rootIds.splice(t+i+1,0,e)}else this.rootIds.splice(t,0,e);this.nodes[e]=this.nodes[e]||[]},e.prototype.insertIdIntoNode=function(e,t,i){if(this.nodes[e]=this.nodes[e]||[],this.nodes[t]=this.nodes[t]||[],void 0===i)this.nodeInsertAtEnd(e,t);else if(i<0){var n=this.nodes[e].length;this.nodes[e].splice(i+n+1,0,t)}else this.nodes[e].splice(i,0,t)},e.prototype.moveId=function(e,t,n){var s=e,r=this.findRootId(s);for(var o in this.nodes[t],this.nodes)if(this.nodes.hasOwnProperty(o)){this.findNodeId(o,t);break}var a=t,l=this.findRootId(a);for(var o in this.nodes[t],this.nodes)if(this.nodes.hasOwnProperty(o)){this.findNodeId(o,t);break}if(r>-1){if(l>-1)switch(this.rootDelete(r),l>r&&l--,n){case i.BEFORE:this.insertIdIntoRoot(s,l);break;case i.AFTER:this.insertIdIntoRoot(s,l+1);break;case i.INSIDE_AT_START:this.nodeInsertAtStart(a,s);break;case i.INSIDE_AT_END:this.nodeInsertAtEnd(a,s)}else for(var o in this.rootDelete(r),this.nodes)if(this.nodes.hasOwnProperty(o)&&(c=this.findNodeId(o,a))>-1){switch(n){case i.BEFORE:this.insertIdIntoNode(o,s,c);break;case i.AFTER:this.insertIdIntoNode(o,s,c+1);break;case i.INSIDE_AT_START:this.nodeInsertAtStart(a,s);break;case i.INSIDE_AT_END:this.nodeInsertAtEnd(a,s)}break}}else if(l>-1){for(var o in this.nodes)if(this.nodes.hasOwnProperty(o)&&(c=this.findNodeId(o,s))>-1){this.nodeDeleteAtIndex(o,c);break}switch(n){case i.BEFORE:this.insertIdIntoRoot(s,l);break;case i.AFTER:this.insertIdIntoRoot(s,l+1);break;case i.INSIDE_AT_START:this.nodeInsertAtStart(a,s);break;case i.INSIDE_AT_END:this.nodeInsertAtEnd(a,s)}}else{for(var o in this.nodes)if(this.nodes.hasOwnProperty(o)&&(c=this.findNodeId(o,s))>-1){this.nodeDeleteAtIndex(o,c);break}for(var o in this.nodes){var c;if(this.nodes.hasOwnProperty(o)&&(c=this.findNodeId(o,a))>-1){switch(n){case i.BEFORE:this.insertIdIntoNode(o,s,c);break;case i.AFTER:this.insertIdIntoNode(o,s,c+1);break;case i.INSIDE_AT_START:this.nodeInsertAtStart(a,s);break;case i.INSIDE_AT_END:this.nodeInsertAtEnd(a,s)}break}}}},e.prototype.swapArrayElements=function(e,t,i){var n=e[t];return e[t]=e[i],e[i]=n,e},e.prototype.rootDeleteId=function(e){var t=this.findRootId(e);t>-1&&this.rootDelete(t)},e.prototype.nodeAndSubNodesDelete=function(e){for(var t=[],i=0;i<this.nodes[e].length;i++){var n=this.nodes[e][i];this.nodeAndSubNodesDelete(n),t.push(e)}for(this.nodeDelete(e),i=0;i<t.length;i++)this.nodeDelete(t[i])},e.prototype.nodeRefrencesDelete=function(e){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var i=0;i<this.nodes[t].length;i++)this.nodes[t][i]===e&&this.nodeDeleteAtIndex(t,i)},e.prototype.nodeDelete=function(e){delete this.nodes[e]},e.prototype.findRootId=function(e){return this.rootIds.indexOf(e)},e.prototype.findNodeId=function(e,t){return this.nodes[e].indexOf(t)},e.prototype.findNode=function(e){return this.nodes[e]},e.prototype.nodeInsertAtStart=function(e,t){this.nodes[e].unshift(t)},e.prototype.nodeInsertAtEnd=function(e,t){this.nodes[e].push(t)},e.prototype.rootDelete=function(e){this.rootIds.splice(e,1)},e.prototype.nodeDeleteAtIndex=function(e,t){this.nodes[e].splice(t,1)},e.prototype.rootInsertAtStart=function(e){this.rootIds.unshift(e)},e.prototype.rootInsertAtEnd=function(e){this.rootIds.push(e)},e}();t.default=n},2083:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4538),s=function(){function e(){this.list=new n.default}return e.prototype.push=function(e){return this.list.add(e,0)},e.prototype.add=function(e){return this.list.add(e,0)},e.prototype.pop=function(){return this.list.removeElementAtIndex(0)},e.prototype.peek=function(){return this.list.first()},e.prototype.size=function(){return this.list.size()},e.prototype.contains=function(e,t){return this.list.contains(e,t)},e.prototype.isEmpty=function(){return this.list.isEmpty()},e.prototype.clear=function(){this.list.clear()},e.prototype.forEach=function(e){this.list.forEach(e)},e}();t.default=s},2091:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4831),s=i(4713),r=i(6119),o=function(){function e(e){this.dictionary=new r.default(e)}return e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.add=function(e){return!this.contains(e)&&!n.isUndefined(e)&&(this.dictionary.setValue(e,e),!0)},e.prototype.intersection=function(e){var t=this;this.forEach((function(i){return e.contains(i)||t.remove(i),!0}))},e.prototype.union=function(e){var t=this;e.forEach((function(e){return t.add(e),!0}))},e.prototype.difference=function(e){var t=this;e.forEach((function(e){return t.remove(e),!0}))},e.prototype.isSubsetOf=function(e){if(this.size()>e.size())return!1;var t=!0;return this.forEach((function(i){return!!e.contains(i)||(t=!1,!1)})),t},e.prototype.remove=function(e){return!!this.contains(e)&&(this.dictionary.remove(e),!0)},e.prototype.forEach=function(e){this.dictionary.forEach((function(t,i){return e(i)}))},e.prototype.toArray=function(){return this.dictionary.values()},e.prototype.isEmpty=function(){return this.dictionary.isEmpty()},e.prototype.size=function(){return this.dictionary.size()},e.prototype.clear=function(){this.dictionary.clear()},e.prototype.toString=function(){return s.toString(this.toArray())},e}();t.default=o},2148:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicEnum=t.InstantaneousDynamicExpression=void 0;const s=i(6362),r=i(6990),o=i(7307),a=n(i(3065)),l=i(3263);class c extends s.AbstractExpression{static staticConstructor(){c.dynamicToRelativeVolumeDict.setValue(h.ffffff,1),c.dynamicToRelativeVolumeDict.setValue(h.fffff,126/127),c.dynamicToRelativeVolumeDict.setValue(h.ffff,125/127),c.dynamicToRelativeVolumeDict.setValue(h.fff,124/127),c.dynamicToRelativeVolumeDict.setValue(h.ff,122/127),c.dynamicToRelativeVolumeDict.setValue(h.f,108/127),c.dynamicToRelativeVolumeDict.setValue(h.mf,76/127),c.dynamicToRelativeVolumeDict.setValue(h.sf,.5),c.dynamicToRelativeVolumeDict.setValue(h.sfp,.5),c.dynamicToRelativeVolumeDict.setValue(h.sfpp,.5),c.dynamicToRelativeVolumeDict.setValue(h.fp,.5),c.dynamicToRelativeVolumeDict.setValue(h.rf,.5),c.dynamicToRelativeVolumeDict.setValue(h.rfz,.5),c.dynamicToRelativeVolumeDict.setValue(h.sfz,.5),c.dynamicToRelativeVolumeDict.setValue(h.sffz,.5),c.dynamicToRelativeVolumeDict.setValue(h.fz,.5),c.dynamicToRelativeVolumeDict.setValue(h.mp,60/127),c.dynamicToRelativeVolumeDict.setValue(h.p,28/127),c.dynamicToRelativeVolumeDict.setValue(h.pp,12/127),c.dynamicToRelativeVolumeDict.setValue(h.ppp,10/127),c.dynamicToRelativeVolumeDict.setValue(h.pppp,7/127),c.dynamicToRelativeVolumeDict.setValue(h.ppppp,5/127),c.dynamicToRelativeVolumeDict.setValue(h.pppppp,4/127)}constructor(e,t,i,n,s){super(i),this.parentMeasure=s,this.dynamicEnum=h[e.toLowerCase()],this.soundDynamic=t,this.staffNumber=n}get ParentMultiExpression(){return this.multiExpression}set ParentMultiExpression(e){this.multiExpression=e}get DynEnum(){return this.dynamicEnum}set DynEnum(e){this.dynamicEnum=e}get SoundDynamic(){return this.soundDynamic}set SoundDynamic(e){this.soundDynamic=e}get Placement(){return this.placement}set Placement(e){this.placement=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get Length(){return Math.abs(this.length)<1e-4&&(this.length=this.calculateLength()),this.length}get MidiVolume(){return 127*this.Volume}get Volume(){return c.dynamicToRelativeVolumeDict.getValue(this.dynamicEnum)}static isInputStringInstantaneousDynamic(e){return!!e&&c.isStringInStringList(c.listInstantaneousDynamics,e)}getDynamicExpressionSymbol(e){switch(e){case"p":return r.DynamicExpressionSymbolEnum.p;case"f":return r.DynamicExpressionSymbolEnum.f;case"s":return r.DynamicExpressionSymbolEnum.s;case"z":return r.DynamicExpressionSymbolEnum.z;case"m":return r.DynamicExpressionSymbolEnum.m;case"r":return r.DynamicExpressionSymbolEnum.r;default:throw new o.InvalidEnumArgumentException("unknown DynamicExpressionSymbolEnum: "+e)}}calculateLength(){return a.default.debug("[Andrea] instantaneousDynamicExpression: not implemented: calculateLength!"),0}}var h;t.InstantaneousDynamicExpression=c,c.dynamicToRelativeVolumeDict=new l.Dictionary,c.listInstantaneousDynamics=["pppppp","ppppp","pppp","ppp","pp","p","ffffff","fffff","ffff","fff","ff","f","mf","mp","sf","sff","sp","spp","fp","rf","rfz","sfz","sffz","fz"],function(e){e[e.pppppp=0]="pppppp",e[e.ppppp=1]="ppppp",e[e.pppp=2]="pppp",e[e.ppp=3]="ppp",e[e.pp=4]="pp",e[e.p=5]="p",e[e.mp=6]="mp",e[e.mf=7]="mf",e[e.f=8]="f",e[e.ff=9]="ff",e[e.fff=10]="fff",e[e.ffff=11]="ffff",e[e.fffff=12]="fffff",e[e.ffffff=13]="ffffff",e[e.sf=14]="sf",e[e.sff=15]="sff",e[e.sfp=16]="sfp",e[e.sfpp=17]="sfpp",e[e.fp=18]="fp",e[e.rf=19]="rf",e[e.rfz=20]="rfz",e[e.sfz=21]="sfz",e[e.sffz=22]="sffz",e[e.fz=23]="fz",e[e.other=24]="other"}(h||(t.DynamicEnum=h={})),c.staticConstructor()},2221:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContinuousTempoType=t.ContinuousTempoExpression=void 0;const n=i(2561),s=i(9147);class r extends s.AbstractTempoExpression{constructor(e,t,i,n){super(e,t,i,n),this.setTempoType()}static isInputStringContinuousTempo(e){return!!e&&(e.endsWith(".")&&(e=e.substring(0,e.length-1)),r.isStringInStringList(r.listContinuousTempoFaster,e)||r.isStringInStringList(r.listContinuousTempoSlower,e))}static isIncreasingTempo(e){return e<=o.piuMosso}static isDecreasingTempo(e){return e>=o.allargando&&e<=o.ritenuto}get TempoType(){return this.tempoType}set TempoType(e){this.tempoType=e}get StartTempo(){return this.startTempo}set StartTempo(e){this.startTempo=e}get EndTempo(){return this.endTempo}set EndTempo(e){this.endTempo=e}get AbsoluteStartTimestamp(){return n.Fraction.plus(this.parentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.parentMultiTempoExpression.Timestamp)}get AbsoluteEndTimestamp(){return this.absoluteEndTimestamp}set AbsoluteEndTimestamp(e){this.absoluteEndTimestamp=e,this.AbsoluteTimeSpan=n.Fraction.minus(this.AbsoluteEndTimestamp,this.AbsoluteStartTimestamp).RealValue}get AbsoluteTimestamp(){return this.ParentMultiTempoExpression.AbsoluteTimestamp}getAbsoluteFloatTimestamp(){return this.ParentMultiTempoExpression.AbsoluteTimestamp.RealValue}getInterpolatedTempo(e){const t=n.Fraction.plus(this.parentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.parentMultiTempoExpression.Timestamp);if(e.lt(t))return-1;if(this.absoluteEndTimestamp.lt(e))return-2;const i=n.Fraction.minus(e,t).RealValue/n.Fraction.minus(this.absoluteEndTimestamp,t).RealValue;return Math.max(0,Math.min(250,this.startTempo+(this.endTempo-this.startTempo)*i))}setTempoType(){r.isStringInStringList(r.listContinuousTempoFaster,this.label)?this.tempoType=o.accelerando:r.isStringInStringList(r.listContinuousTempoSlower,this.label)&&(this.tempoType=o.ritardando)}getTempoFactor(){return arguments.length>0&&void 0!==arguments[0]||this.Label,1}}var o;t.ContinuousTempoExpression=r,r.listContinuousTempoFaster=["accelerando","accel","piu mosso","poco piu","stretto"],r.listContinuousTempoSlower=["poco meno","meno mosso","piu lento","calando","allargando","rallentando","ritardando","ritenuto","ritard.","ritard","rit.","rit","riten.","riten"],function(e){e[e.accelerando=0]="accelerando",e[e.stretto=1]="stretto",e[e.stringendo=2]="stringendo",e[e.mosso=3]="mosso",e[e.piuMosso=4]="piuMosso",e[e.allargando=5]="allargando",e[e.calando=6]="calando",e[e.menoMosso=7]="menoMosso",e[e.rallentando=8]="rallentando",e[e.ritardando=9]="ritardando",e[e.ritard=10]="ritard",e[e.rit=11]="rit",e[e.ritenuto=12]="ritenuto",e[e.rubato=13]="rubato",e[e.precipitando=14]="precipitando"}(o||(t.ContinuousTempoType=o={}))},2257:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(4434),t),s(i(4146),t),s(i(2570),t),s(i(5951),t),s(i(7533),t),s(i(2514),t)},2317:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LyricsEntry=void 0;const n=i(2570);t.LyricsEntry=class{constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;this.text=e,this.word=i,this.parent=n,this.verseNumber=t,s>=0&&(this.syllableIndex=s)}get Text(){return this.text}set Text(e){this.text=e}get Word(){return this.word}get Parent(){return this.parent}set Parent(e){this.parent=e}get VerseNumber(){return this.verseNumber}get SyllableIndex(){return this.syllableIndex}get IsTranslation(){return this.VerseNumber.endsWith("translation")}get IsChorus(){return this.VerseNumber.startsWith("chorus")}get FontStyle(){return this.IsChorus||this.IsTranslation?n.FontStyles.Italic:n.FontStyles.Regular}}},2338:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4831),s=i(6119),r=i(4713),o=function(){function e(e,t,i){void 0===i&&(i=!1),this.dict=new s.default(e),this.equalsF=t||n.defaultEquals,this.allowDuplicate=i}return e.prototype.getValue=function(e){var t=this.dict.getValue(e);return n.isUndefined(t)?[]:r.copy(t)},e.prototype.setValue=function(e,t){if(n.isUndefined(e)||n.isUndefined(t))return!1;var i=this.dict.getValue(e);return n.isUndefined(i)?(this.dict.setValue(e,[t]),!0):!(!this.allowDuplicate&&r.contains(i,t,this.equalsF)||(i.push(t),0))},e.prototype.remove=function(e,t){if(n.isUndefined(t)){var i=this.dict.remove(e);return!n.isUndefined(i)}var s=this.dict.getValue(e);return!(n.isUndefined(s)||!r.remove(s,t,this.equalsF)||(0===s.length&&this.dict.remove(e),0))},e.prototype.keys=function(){return this.dict.keys()},e.prototype.values=function(){for(var e=[],t=0,i=this.dict.values();t<i.length;t++)for(var n=0,s=i[t];n<s.length;n++){var r=s[n];e.push(r)}return e},e.prototype.containsKey=function(e){return this.dict.containsKey(e)},e.prototype.clear=function(){this.dict.clear()},e.prototype.size=function(){return this.dict.size()},e.prototype.isEmpty=function(){return this.dict.isEmpty()},e}();t.default=o},2369:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceStaffEntry=void 0;const n=i(2561),s=i(164),r=i(4543),o=i(9288);t.SourceStaffEntry=class{constructor(e,t){this.voiceEntries=[],this.instructions=[],this.chordSymbolContainers=[],this.verticalContainerParent=e,this.parentStaff=t}get ParentStaff(){return this.parentStaff}get VerticalContainerParent(){return this.verticalContainerParent}get Timestamp(){if(this.VerticalContainerParent)return this.VerticalContainerParent.Timestamp}get AbsoluteTimestamp(){if(this.VerticalContainerParent)return n.Fraction.plus(this.VerticalContainerParent.ParentMeasure.AbsoluteTimestamp,this.VerticalContainerParent.Timestamp)}get VoiceEntries(){return this.voiceEntries}set VoiceEntries(e){this.voiceEntries=e}get Link(){return this.staffEntryLink}set Link(e){this.staffEntryLink=e}get Instructions(){return this.instructions}set Instructions(e){this.instructions=e}get ChordContainers(){return this.chordSymbolContainers}set ChordContainers(e){this.chordSymbolContainers=e}removeAllInstructionsOfTypeClefInstruction(){let e=0,t=0;for(;e<this.instructions.length;)this.instructions[e]instanceof s.ClefInstruction?(this.instructions.splice(e,1),t++):e++;return t}removeFirstInstructionOfTypeClefInstruction(){for(let e=0;e<this.instructions.length;e++)if(this.instructions[e]instanceof s.ClefInstruction)return this.instructions.splice(e,1),!0;return!1}removeAllInstructionsOfTypeKeyInstruction(){let e=0,t=0;for(;e<this.instructions.length;)this.instructions[e]instanceof r.KeyInstruction?(this.instructions.splice(e,1),t++):e++;return t}removeFirstInstructionOfTypeKeyInstruction(){for(let e=0;e<this.instructions.length;e++)if(this.instructions[e]instanceof r.KeyInstruction)return this.instructions.splice(e,1),!0;return!1}removeAllInstructionsOfTypeRhythmInstruction(){let e=0,t=0;for(;e<this.instructions.length;)this.instructions[e]instanceof o.RhythmInstruction?(this.instructions.splice(e,1),t++):e++;return t}removeFirstInstructionOfTypeRhythmInstruction(){for(let e=0;e<this.instructions.length;e++)if(this.instructions[e]instanceof o.RhythmInstruction)return this.instructions.splice(e,1),!0;return!1}calculateMinNoteLength(){let e=new n.Fraction(Number.MAX_VALUE,1);for(let t=0,i=this.VoiceEntries.length;t<i;++t){const i=this.VoiceEntries[t];for(let t=0,n=i.Notes.length;t<n;++t){const n=i.Notes[t];n.Length.lt(e)&&(e=n.Length)}}return e}calculateMaxNoteLength(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new n.Fraction(0,1);for(let i=0,s=this.VoiceEntries.length;i<s;++i){const s=this.VoiceEntries[i];for(let i=0,r=s.Notes.length;i<r;++i){const r=s.Notes[i];if(e&&r.NoteTie){const e=n.Fraction.createFromFraction(r.Length);let i=!1;for(const t of r.NoteTie.Notes)t!==r?i&&e.Add(t.Length):i=!0;t.lt(e)&&(t=e)}else t.lt(r.Length)&&(t=r.Length)}}return t}hasNotes(){for(let e=0,t=this.VoiceEntries.length;e<t;++e)if(this.VoiceEntries[e].Notes.length>0)return!0;return!1}hasTie(){for(let e=0,t=this.VoiceEntries.length;e<t;++e)if(this.VoiceEntries[e].hasTie())return!0;return!1}findLinkedNotes(e){for(let t=0,i=this.voiceEntries.length;t<i;++t){const i=this.voiceEntries[t];for(let t=0,n=i.Notes.length;t<n;++t){const n=i.Notes[t];n.ParentStaffEntry===this&&e.push(n)}}}get hasOnlyRests(){for(const e of this.voiceEntries)for(const t of e.Notes)if(!t.isRest())return!1;return!0}}},2395:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalLyricEntry=void 0;const n=i(8254),s=i(7435),r=i(9409),o=i(7533);t.GraphicalLyricEntry=class{constructor(e,t,i,a){this.lyricsEntry=e,this.graphicalStaffEntry=t;const l=t.parentMeasure.parentSourceMeasure.Rules.LyricsAlignmentStandard;e.Text.length>=4&&e.Parent.Notes[0].Length.Denominator>4&&o.TextAlignmentEnum.LeftBottom;const c=new s.Label(e.Text),h=this.graphicalStaffEntry.parentMeasure.parentSourceMeasure.Rules;this.graphicalLabel=new n.GraphicalLabel(c,i,l,h,t.PositionAndShape),this.graphicalLabel.Label.colorDefault=h.DefaultColorLyrics,this.graphicalLabel.PositionAndShape.RelativePosition=new r.PointF2D(0,a),this.graphicalLabel.setLabelPositionAndShapeBorders(),this.graphicalLabel.PositionAndShape.Size.width<h.LyricsExtraXShiftForShortLyricsWidthThreshold&&(this.graphicalLabel.PositionAndShape.RelativePosition.x+=h.LyricsExtraXShiftForShortLyrics,this.graphicalLabel.CenteringXShift=h.LyricsExtraXShiftForShortLyrics),l===o.TextAlignmentEnum.LeftBottom&&(this.graphicalLabel.PositionAndShape.RelativePosition.x-=1)}hasDashFromLyricWord(){if(!this.ParentLyricWord)return!1;const e=this.ParentLyricWord.GraphicalLyricsEntries.indexOf(this);return this.ParentLyricWord.GraphicalLyricsEntries.length>1&&e<this.ParentLyricWord.GraphicalLyricsEntries.length-1}get LyricsEntry(){return this.lyricsEntry}get ParentLyricWord(){return this.graphicalLyricWord}set ParentLyricWord(e){this.graphicalLyricWord=e}get GraphicalLabel(){return this.graphicalLabel}set GraphicalLabel(e){this.graphicalLabel=e}get StaffEntryParent(){return this.graphicalStaffEntry}set StaffEntryParent(e){this.graphicalStaffEntry=e}}},2400:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowContinuousDynamicExpression=void 0;const n=i(1066),s=i(8254),r=i(7435),o=i(7533),a=i(2570);class l extends n.GraphicalContinuousDynamicExpression{constructor(e,t,i,n){if(super(e,t,i),this.IsVerbal){const t=new r.Label(e.Label);this.label=new s.GraphicalLabel(t,n||this.rules.ContinuousDynamicTextHeight,o.TextAlignmentEnum.LeftCenter,this.rules,this.PositionAndShape),this.label.Label.fontStyle=a.FontStyles.Italic,this.label.setLabelPositionAndShapeBorders(),this.PositionAndShape.calculateBoundingBox(),e.ColorXML&&this.rules.ExpressionsUseXMLColor&&(this.label.ColorXML=e.ColorXML)}}}t.VexFlowContinuousDynamicExpression=l},2514:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TieTypes=void 0,function(e){e.SIMPLE="",e.HAMMERON="H",e.PULLOFF="P",e.SLIDE="S",e.TAPPING="T"}(i||(t.TieTypes=i={}))},2552:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(9735),t),s(i(2257),t),s(i(599),t)},2561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fraction=void 0;class i{static max(e,t){return e.RealValue>t.RealValue?e:t}static Equal(e,t){return e.wholeValue===t.wholeValue&&e.Denominator===t.Denominator&&e.Numerator===t.Numerator}static createFromFraction(e){return new i(e.numerator,e.denominator,e.wholeValue,!1)}static plus(e,t){const i=e.clone();return i.Add(t),i}static minus(e,t){const i=e.clone();return i.Sub(t),i}static multiply(e,t){return new i((e.wholeValue*e.denominator+e.numerator)*(t.wholeValue*t.denominator+t.numerator),e.denominator*t.denominator)}static greatestCommonDenominator(e,t){if(0===e)return t;if(1===t)return 1;for(;Math.abs(t)>=1&&Math.abs(e)>=1;)e>t?e-=t:t-=e;const i=Math.round(e);return Math.max(i,1)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.numerator=0,this.denominator=1,this.wholeValue=0,this.numerator=e,this.denominator=t,this.wholeValue=i,n&&this.simplify(),this.setRealValue()}toString(){let e=this.numerator+"/"+this.denominator;return 0!==this.wholeValue&&(e=this.wholeValue+" "+e),e}clone(){return new i(this.numerator,this.denominator,this.wholeValue,!1)}get Numerator(){return this.numerator}set Numerator(e){this.numerator!==e&&(this.numerator=e,this.simplify(),this.setRealValue())}get Denominator(){return this.denominator}set Denominator(e){this.denominator!==e&&(this.denominator=e,0!==this.numerator&&this.simplify(),this.setRealValue())}get WholeValue(){return this.wholeValue}set WholeValue(e){this.wholeValue!==e&&(this.wholeValue=e,this.setRealValue())}GetExpandedNumerator(){return this.wholeValue*this.denominator+this.numerator}calculateNumberOfNeededDots(){let e=1,t=2;const i=this.GetExpandedNumerator();for(;t<i;)e++,t=Math.pow(2,e);return Math.min(3,e-1)}IsNegative(){return this.realValue<0}get RealValue(){return this.realValue}expand(e){this.numerator*=e,this.denominator*=e,0!==this.wholeValue&&(this.numerator+=this.wholeValue*this.denominator,this.wholeValue=0)}Add(e){return this.numerator=(this.wholeValue*this.denominator+this.numerator)*e.denominator+(e.wholeValue*e.denominator+e.numerator)*this.denominator,this.denominator=this.denominator*e.denominator,this.wholeValue=0,this.simplify(),this.setRealValue(),this}Sub(e){return this.numerator=(this.wholeValue*this.denominator+this.numerator)*e.denominator-(e.wholeValue*e.denominator+e.numerator)*this.denominator,this.denominator=this.denominator*e.denominator,this.wholeValue=0,this.simplify(),this.setRealValue(),this}Quantize(e){if(this.denominator<=e)return this;const t=new i(this.numerator+1,this.denominator,this.wholeValue);for(;t.Denominator>e;)t.Numerator++;if(this.numerator>this.denominator){const n=new i(this.numerator-1,this.denominator,this.wholeValue);for(;n.Denominator>e;)n.Numerator--;if(n.Denominator<t.Denominator)return n}return t}Equals(e){return this.realValue===(null===e||void 0===e?void 0:e.realValue)}CompareTo(e){const t=this.realValue-e.realValue;return t?t<0?-1:1:0}lt(e){return this.realValue<e.realValue}lte(e){return this.realValue<=e.realValue}gt(e){return!this.lte(e)}gte(e){return!this.lt(e)}setRealValue(){this.realValue=this.wholeValue+this.numerator/this.denominator}simplify(){if(0===this.numerator)return void(this.denominator=1);const e=i.greatestCommonDenominator(Math.abs(this.numerator),Math.abs(this.denominator));this.numerator/=e,this.denominator/=e;const t=Math.floor(this.numerator/this.denominator);if(0!==t&&(this.wholeValue+=t,this.numerator-=t*this.denominator,0===this.numerator&&(this.denominator=1)),this.denominator>i.maximumAllowedNumber){const e=this.denominator/i.maximumAllowedNumber;this.numerator=Math.round(this.numerator/e),this.denominator=Math.round(this.denominator/e)}if(this.numerator>i.maximumAllowedNumber){const e=this.numerator/i.maximumAllowedNumber;this.numerator=Math.round(this.numerator/e),this.denominator=Math.round(this.denominator/e)}}isOnBeat(e){const t=this.distanceFromBeat(e);return Math.abs(t)<i.FloatInaccuracyTolerance}distanceFromBeat(e){const t=new i(1,e.Denominator);return this.RealValue%t.RealValue}}t.Fraction=i,i.maximumAllowedNumber=46340,i.FloatInaccuracyTolerance=1e-4},2570:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.FontStyles=void 0,function(e){e[e.Regular=0]="Regular",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic",e[e.BoldItalic=3]="BoldItalic",e[e.Underlined=4]="Underlined"}(i||(t.FontStyles=i={}))},2683:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoColorSet=t.NoteState=t.GraphicalLayers=t.StyleSets=t.OUTLINE_AND_FILL_STYLE_DICT=t.OutlineAndFillStyleEnum=void 0;const n=i(3263);var s,r,o,a,l;!function(e){e[e.BaseWritingColor=0]="BaseWritingColor",e[e.FollowingCursor=1]="FollowingCursor",e[e.AlternativeFollowingCursor=2]="AlternativeFollowingCursor",e[e.PlaybackCursor=3]="PlaybackCursor",e[e.Highlighted=4]="Highlighted",e[e.ErrorUnderlay=5]="ErrorUnderlay",e[e.Selected=6]="Selected",e[e.SelectionSymbol=7]="SelectionSymbol",e[e.DebugColor1=8]="DebugColor1",e[e.DebugColor2=9]="DebugColor2",e[e.DebugColor3=10]="DebugColor3",e[e.SplitScreenDivision=11]="SplitScreenDivision",e[e.GreyTransparentOverlay=12]="GreyTransparentOverlay",e[e.MarkedArea1=13]="MarkedArea1",e[e.MarkedArea2=14]="MarkedArea2",e[e.MarkedArea3=15]="MarkedArea3",e[e.MarkedArea4=16]="MarkedArea4",e[e.MarkedArea5=17]="MarkedArea5",e[e.MarkedArea6=18]="MarkedArea6",e[e.MarkedArea7=19]="MarkedArea7",e[e.MarkedArea8=20]="MarkedArea8",e[e.MarkedArea9=21]="MarkedArea9",e[e.MarkedArea10=22]="MarkedArea10",e[e.Comment1=23]="Comment1",e[e.Comment2=24]="Comment2",e[e.Comment3=25]="Comment3",e[e.Comment4=26]="Comment4",e[e.Comment5=27]="Comment5",e[e.Comment6=28]="Comment6",e[e.Comment7=29]="Comment7",e[e.Comment8=30]="Comment8",e[e.Comment9=31]="Comment9",e[e.Comment10=32]="Comment10"}(s||(t.OutlineAndFillStyleEnum=s={})),t.OUTLINE_AND_FILL_STYLE_DICT=new n.Dictionary,t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.BaseWritingColor,"Thistle"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.FollowingCursor,"Aqua"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.AlternativeFollowingCursor,"Azure"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.PlaybackCursor,"Bisque"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Highlighted,"CadetBlue"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.ErrorUnderlay,"DarkBlue"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Selected,"DarkGoldenRod"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.SelectionSymbol,"BlanchedAlmond"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.DebugColor1,"Chartreuse"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.DebugColor2,"DarkGreen"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.DebugColor3,"DarkOrange"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.SplitScreenDivision,"FireBrick"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.GreyTransparentOverlay,"DarkSalmon"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea1,"DarkSeaGreen"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea2,"DarkOrchid"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea3,"Aquamarine"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea4,"DarkKhaki"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea5,"ForestGreen"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea6,"AliceBlue"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea7,"DeepPink"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea8,"Coral"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea9,"DarkOliveGreen"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea10,"Chocolate"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment1,"DodgerBlue"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment2,"Blue"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment3,"Beige"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment4,"Crimson"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment5,"Fuchsia"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment6,"Brown"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment7,"BlanchedAlmond"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment8,"CornflowerBlue"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment9,"Cornsilk"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment10,"DarkGrey"),function(e){e[e.MarkedArea=0]="MarkedArea",e[e.Comment=1]="Comment"}(r||(t.StyleSets=r={})),function(e){e[e.Background=0]="Background",e[e.Highlight=1]="Highlight",e[e.MeasureError=2]="MeasureError",e[e.SelectionSymbol=3]="SelectionSymbol",e[e.Cursor=4]="Cursor",e[e.PSI_Debug=5]="PSI_Debug",e[e.Notes=6]="Notes",e[e.Comment=7]="Comment",e[e.Debug_above=8]="Debug_above"}(o||(t.GraphicalLayers=o={})),function(e){e[e.Normal=0]="Normal",e[e.Selected=1]="Selected",e[e.Follow_Confirmed=2]="Follow_Confirmed",e[e.QFeedback_NotFound=3]="QFeedback_NotFound",e[e.QFeedback_OK=4]="QFeedback_OK",e[e.QFeedback_Perfect=5]="QFeedback_Perfect",e[e.Debug1=6]="Debug1",e[e.Debug2=7]="Debug2",e[e.Debug3=8]="Debug3"}(a||(t.NoteState=a={})),function(e){e.C="#d82c6b",e.D="#F89D15",e.E="#FFE21A",e.F="#4dbd5c",e.G="#009D96",e.A="#43469d",e.B="#76429c",e.Rest="#000000"}(l||(t.AutoColorSet=l={}))},2768:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalOctaveShift=void 0;const n=i(7741),s=i(437),r=i(6438),o=i(512),a=i(7307);class l extends n.GraphicalObject{constructor(e,t){super(),this.getOctaveShift=e,this.setSymbol(),this.PositionAndShape=new r.BoundingBox(this,t)}setSymbol(){switch(this.getOctaveShift.Type){case s.OctaveEnum.VA8:this.octaveSymbol=o.MusicSymbol.VA8;break;case s.OctaveEnum.VB8:this.octaveSymbol=o.MusicSymbol.VB8;break;case s.OctaveEnum.MA15:this.octaveSymbol=o.MusicSymbol.MA15;break;case s.OctaveEnum.MB15:this.octaveSymbol=o.MusicSymbol.MB15;break;default:throw new a.ArgumentOutOfRangeException("")}}}t.GraphicalOctaveShift=l},2774:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PSMath=void 0;class i{static log(e,t){return Math.log(t)/Math.log(e)}static log10(e){return i.log(10,e)}static meanSimple(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t/e.length}static meanWeighted(e,t){if(e.length!==t.length||0===e.length)return 0;let i=0,n=0;for(let s=0;s<e.length;s++){const r=t[s];i+=e[s]*r,n+=r}return i/n}}t.PSMath=i},2779:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SkyBottomLineCalculator=void 0,i(9409);const s=i(9479),r=n(i(3065)),o=i(5479),a=i(9834);t.SkyBottomLineCalculator=class{constructor(e){this.mStaffLineParent=e,this.mRules=e.ParentMusicSystem.rules}updateLines(e){const t=this.StaffLineParent.Measures;if(e.length!==t.length)if(r.default.warn("SkyBottomLineCalculator: lengths of calculation result array and measure array do not match"),e.length<t.length)for(;e.length<t.length;)e.push(new o.SkyBottomLineCalculationResult([],[]));else e=e.slice(0,t.length);const i=Math.max(Math.ceil(this.StaffLineParent.PositionAndShape.Size.width*this.SamplingUnit),1);this.mSkyLine=[],this.mBottomLine=[];for(const{skyLine:s,bottomLine:r}of e)this.mSkyLine.push(...s),this.mBottomLine.push(...r);const n=this.mSkyLine.length/i,a=[],l=[];for(let s=0;s<this.mSkyLine.length&&a.length!==i;s+=n){const e=Math.min(this.mSkyLine.length,s+n);let t=this.mSkyLine.slice(s,e+1);a.push(Math.min(...t)),t=this.mBottomLine.slice(s,e+1),l.push(Math.max(...t))}this.mSkyLine=a,this.mBottomLine=l,this.mSkyLine.length!==i&&r.default.debug("SkyLine calculation was not correct (".concat(this.mSkyLine.length," instead of ").concat(i,")"));const c=Math.max(...this.mSkyLine);this.mSkyLine=this.mSkyLine.map((e=>(e-c)/s.unitInPixels+this.StaffLineParent.TopLineOffset));const h=Math.min(...this.mBottomLine);this.mBottomLine=this.mBottomLine.map((e=>(e-h)/s.unitInPixels+this.StaffLineParent.BottomLineOffset))}calculateLines(){const e=this.mRules.SamplingUnit,t=[],i=new a.CanvasVexFlowBackend(this.mRules);for(const n of this.StaffLineParent.Measures){n.PositionAndShape.calculateAbsolutePositionsRecursive(0,0);const s=n.getVFStave();let a=s.getWidth();a>0||n.IsExtraGraphicalMeasure||(r.default.warn("SkyBottomLineCalculator: width not > 0 in measure "+n.MeasureNumber),a=50),i.initializeHeadless(a);const l=i.getContext(),c=i.getCanvas();a=c.width;const h=c.height;s.setY(s.y+100);const u=s.getWidth();s.setWidth(a),n.format(),s.setWidth(u);try{n.draw(l)}catch(e){r.default.warn("SkyBottomLineCalculator.calculateLines.draw",e)}const d=l.getImageData(0,0,a,h),f=4,p=Math.max(Math.ceil(n.PositionAndShape.Size.width*e),1),m=new Array(p),g=new Array(p);for(let e=0;e<a;e++){for(let t=0;t<h;t++){const i=t*a*f+e*f;if(d.data[i+3]>0){m[e]=t;break}}for(let t=h;t>0;t--){const i=t*a*f+e*f;if(d.data[i+3]>0){g[e]=t;break}}}for(let e=0;e<m.length;e++)void 0===m[e]&&(m[e]=Math.max(this.findPreviousValidNumber(e,m),this.findNextValidNumber(e,m)));for(let e=0;e<g.length;e++)void 0===g[e]&&(g[e]=Math.max(this.findPreviousValidNumber(e,g),this.findNextValidNumber(e,g)));t.push(new o.SkyBottomLineCalculationResult(m,g)),i.clear()}this.updateLines(t)}updateSkyLineWithLine(e,t,i){const n=Math.floor(e.x*this.SamplingUnit),s=Math.ceil(t.x*this.SamplingUnit);for(let r=n+1;r<Math.min(s,this.SkyLine.length);r++)this.SkyLine[r]=i}updateSkyLineWithWedge(e,t){let i=Math.floor(e.x*this.SamplingUnit),n=Math.ceil(t.x*this.SamplingUnit),s=(t.y-e.y)/(t.x-e.x);n-i<=1&&(n++,s=0),i<0&&(i=0),i>=this.BottomLine.length&&(i=this.BottomLine.length-1),n<0&&(n=0),n>=this.BottomLine.length&&(n=this.BottomLine.length),this.SkyLine[i]=e.y;for(let r=i+1;r<Math.min(n,this.SkyLine.length);r++)this.SkyLine[r]=this.SkyLine[r-1]+s/this.SamplingUnit}updateBottomLineWithWedge(e,t){let i=Math.floor(e.x*this.SamplingUnit),n=Math.ceil(t.x*this.SamplingUnit),s=(t.y-e.y)/(t.x-e.x);n-i<=1&&(n++,s=0),i<0&&(i=0),i>=this.BottomLine.length&&(i=this.BottomLine.length-1),n<0&&(n=0),n>=this.BottomLine.length&&(n=this.BottomLine.length),this.BottomLine[i]=e.y;for(let r=i+1;r<n;r++)this.BottomLine[r]=this.BottomLine[r-1]+s/this.SamplingUnit}updateSkyLineInRange(e,t,i){this.updateInRange(this.mSkyLine,e,t,i)}updateBottomLineInRange(e,t,i){this.updateInRange(this.BottomLine,e,t,i)}resetSkyLineInRange(e,t){this.updateInRange(this.SkyLine,e,t)}resetBottomLineInRange(e,t){this.setInRange(this.BottomLine,e,t)}setSkyLineWithValue(e){this.SkyLine.forEach((t=>e))}setBottomLineWithValue(e){this.BottomLine.forEach((t=>e))}getLeftIndexForPointX(e,t){const i=Math.floor(e*this.SamplingUnit);return i<0?0:i>=t?t-1:i}getRightIndexForPointX(e,t){const i=Math.ceil(e*this.SamplingUnit);return i<0?0:i>=t?t-1:i}updateStaffLineBorders(){this.mStaffLineParent.PositionAndShape.BorderTop=this.getSkyLineMin(),this.mStaffLineParent.PositionAndShape.BorderMarginTop=this.getSkyLineMin(),this.mStaffLineParent.PositionAndShape.BorderBottom=this.getBottomLineMax(),this.mStaffLineParent.PositionAndShape.BorderMarginBottom=this.getBottomLineMax()}getSkyLineMin(){return Math.min(...this.SkyLine.filter((e=>!isNaN(e))))}getSkyLineMinAtPoint(e){const t=Math.round(e*this.SamplingUnit);return this.mSkyLine[t]}getSkyLineMinInRange(e,t){return this.getMinInRange(this.SkyLine,e,t)}getBottomLineMax(){return Math.max(...this.BottomLine.filter((e=>!isNaN(e))))}getBottomLineMaxAtPoint(e){const t=Math.round(e*this.SamplingUnit);return this.mBottomLine[t]}getBottomLineMaxInRange(e,t){return this.getMaxInRange(this.BottomLine,e,t)}getBottomLineMaxInBoundingBox(e){const t=Math.floor(e.AbsolutePosition.x+e.BorderLeft),i=Math.ceil(e.AbsolutePosition.x+e.BorderRight);return this.getMaxInRange(this.mBottomLine,t,i)}updateWithBoundingBoxRecursively(e){if(e.ChildElements&&e.ChildElements.length>0)this.updateWithBoundingBoxRecursively(e);else{const t=e.BorderTop+e.AbsolutePosition.y,i=e.BorderBottom+e.AbsolutePosition.y;if(t<0){const i=Math.floor(e.AbsolutePosition.x+e.BorderLeft),n=Math.ceil(e.AbsolutePosition.x+e.BorderRight);this.updateInRange(this.mSkyLine,i,n,t)}else if(i>this.StaffLineParent.StaffHeight){const t=Math.floor(e.AbsolutePosition.x+e.BorderLeft),n=Math.ceil(e.AbsolutePosition.x+e.BorderRight);this.updateInRange(this.mBottomLine,t,n,i)}}}findPreviousValidNumber(e,t){for(let i=e;i>=0;i--)if(!isNaN(t[i]))return t[i];return 0}findNextValidNumber(e,t){if(e>=t.length)return t[e-1];for(let i=e;i<t.length;i++)if(!isNaN(t[i]))return t[i];return 0}drawPixel(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF0000FF";const n=t.getContext(),s=n.fillStyle;n.fillStyle=i,n.fillRect(e.x,e.y,2,2),n.fillStyle=s}updateInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t=Math.floor(t*this.SamplingUnit),(i=Math.ceil(i*this.SamplingUnit))<t)throw new Error("start index of line is greater than the end index");t<0&&(t=0),i>e.length&&(i=e.length);for(let s=t;s<i;s++)e[s]=Math.abs(n)>Math.abs(e[s])?n:e[s]}setInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t=Math.floor(t*this.SamplingUnit),(i=Math.ceil(i*this.SamplingUnit))<t)throw new Error("start index of line is greater then the end index");t<0&&(t=0),i>e.length&&(i=e.length);for(let s=t;s<i;s++)e[s]=n}getMinInRange(e,t,i){return t=Math.floor(t*this.SamplingUnit),i=Math.ceil(i*this.SamplingUnit),e?(t<0&&(t=0),t>=e.length&&(t=e.length-1),i<0&&(i=0),i>=e.length&&(i=e.length),t>=0&&i<=e.length?Math.min(...e.slice(t,i+1)):void 0):Number.MAX_VALUE}getMaxInRange(e,t,i){return t=Math.floor(t*this.SamplingUnit),i=Math.ceil(i*this.SamplingUnit),e?(t<0&&(t=0),t>=e.length&&(t=e.length-1),i<0&&(i=0),i>=e.length&&(i=e.length),t>=0&&i<=e.length?Math.max(...e.slice(t,i+1)):void 0):Number.MIN_VALUE}get SamplingUnit(){return this.mRules.SamplingUnit}get StaffLineParent(){return this.mStaffLineParent}get SkyLine(){return this.mSkyLine}get BottomLine(){return this.mBottomLine}}},2870:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(5678),t),s(i(8900),t),s(i(6703),t),s(i(6332),t),s(i(9767),t),s(i(9990),t),s(i(4864),t),s(i(7791),t),s(i(5377),t)},2909:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4831),s=i(6119),r=i(2091),o=function(){function e(e){this.toStrF=e||n.defaultToString,this.dictionary=new s.default(this.toStrF),this.nElements=0}return e.prototype.add=function(e,t){if(void 0===t&&(t=1),n.isUndefined(e)||t<=0)return!1;if(this.contains(e))this.dictionary.getValue(e).copies+=t;else{var i={value:e,copies:t};this.dictionary.setValue(e,i)}return this.nElements+=t,!0},e.prototype.count=function(e){return this.contains(e)?this.dictionary.getValue(e).copies:0},e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.remove=function(e,t){if(void 0===t&&(t=1),n.isUndefined(e)||t<=0)return!1;if(this.contains(e)){var i=this.dictionary.getValue(e);return t>i.copies?this.nElements-=i.copies:this.nElements-=t,i.copies-=t,i.copies<=0&&this.dictionary.remove(e),!0}return!1},e.prototype.toArray=function(){for(var e=[],t=0,i=this.dictionary.values();t<i.length;t++)for(var n=i[t],s=n.value,r=n.copies,o=0;o<r;o++)e.push(s);return e},e.prototype.toSet=function(){for(var e=new r.default(this.toStrF),t=0,i=this.dictionary.values();t<i.length;t++){var n=i[t].value;e.add(n)}return e},e.prototype.forEach=function(e){this.dictionary.forEach((function(t,i){for(var n=i.value,s=i.copies,r=0;r<s;r++)if(!1===e(n))return!1;return!0}))},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},e}();t.default=o},2919:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StaffLine=void 0;const n=i(6438),s=i(7741),r=i(298),o=i(9409),a=i(2779);class l extends s.GraphicalObject{constructor(e,t){super(),this.measures=[],this.staffLines=new Array(5),this.octaveShifts=[],this.lyricLines=[],this.lyricsDashes=[],this.abstractExpressions=[],this.graphicalSlurs=[],this.graphicalGlissandi=[],this.Pedals=[],this.parentMusicSystem=e,this.parentStaff=t,this.boundingBox=new n.BoundingBox(this,e.PositionAndShape),this.skyBottomLine=new a.SkyBottomLineCalculator(this),this.staffHeight=this.parentMusicSystem.rules.StaffHeight,this.topLineOffset=0,this.bottomLineOffset=4,this.calculateStaffLineOffsets()}calculateStaffLineOffsets(){if(this.ParentStaff.isTab)5===this.ParentStaff.StafflineCount?this.staffHeight=this.bottomLineOffset=6*this.ParentStaff.ParentInstrument.GetMusicSheet.Rules.TabStaffInterlineHeight:this.staffHeight=this.bottomLineOffset=this.ParentStaff.ParentInstrument.GetMusicSheet.Rules.TabStaffInterlineHeight*this.ParentStaff.StafflineCount;else switch(this.ParentStaff.StafflineCount){case 4:this.bottomLineOffset=1;break;case 3:this.topLineOffset=1,this.bottomLineOffset=1;break;case 2:this.topLineOffset=2,this.bottomLineOffset=1;break;case 1:this.topLineOffset=2,this.bottomLineOffset=2}}get Measures(){return this.measures}set Measures(e){this.measures=e}get StaffLines(){return this.staffLines}set StaffLines(e){this.staffLines=e}get NextStaffLine(){const e=this.parentMusicSystem.StaffLines.indexOf(this);return e!==this.parentMusicSystem.StaffLines.length?this.parentMusicSystem.StaffLines[e+1]:void 0}get LyricLines(){return this.lyricLines}get AbstractExpressions(){return this.abstractExpressions}set AbstractExpressions(e){this.abstractExpressions=e}set LyricLines(e){this.lyricLines=e}get LyricsDashes(){return this.lyricsDashes}set LyricsDashes(e){this.lyricsDashes=e}get ParentMusicSystem(){return this.parentMusicSystem}set ParentMusicSystem(e){this.parentMusicSystem=e}get ParentStaff(){return this.parentStaff}set ParentStaff(e){this.parentStaff=e}get SkyBottomLineCalculator(){return this.skyBottomLine}get SkyLine(){return this.skyBottomLine.SkyLine}get BottomLine(){return this.skyBottomLine.BottomLine}get OctaveShifts(){return this.octaveShifts}set OctaveShifts(e){this.octaveShifts=e}get StaffHeight(){return this.staffHeight}get TopLineOffset(){return this.topLineOffset}get BottomLineOffset(){return this.bottomLineOffset}get GraphicalSlurs(){return this.graphicalSlurs}get GraphicalGlissandi(){return this.graphicalGlissandi}addSlurToStaffline(e){this.graphicalSlurs.push(e)}addGlissandoToStaffline(e){this.graphicalGlissandi.push(e),e.StaffLine=this}addActivitySymbolClickArea(){const e=new r.StaffLineActivitySymbol(this),t=this.PositionAndShape;e.PositionAndShape.RelativePosition=new o.PointF2D(t.RelativePosition.x+t.BorderRight+.5,t.RelativePosition.y+.5),e.PositionAndShape.Parent=this.parentMusicSystem.PositionAndShape}isPartOfMultiStaffInstrument(){return this.parentStaff.ParentInstrument.Staves.length>1}findClosestStaffEntry(e){let t;for(let i=0,n=this.Measures.length;i<n;++i){const n=this.Measures[i];for(let i=0,s=n.staffEntries.length;i<s;++i){const s=n.staffEntries[i];Math.abs(s.PositionAndShape.RelativePosition.x-e+n.PositionAndShape.RelativePosition.x)<5&&(t=s)}}return t}}t.StaffLine=l},3065:function(e,t,i){var n,s;!function(){"use strict";n=function(){var e=function(){},t="undefined",i=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],s={},r=null;function o(e,t){var i=e[t];if("function"==typeof i.bind)return i.bind(e);try{return Function.prototype.bind.call(i,e)}catch(t){return function(){return Function.prototype.apply.apply(i,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(){for(var i=this.getLevel(),s=0;s<n.length;s++){var r=n[s];this[r]=s<i?e:this.methodFactory(r,i,this.name)}if(this.log=this.debug,typeof console===t&&i<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function h(n,s,r){return function(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&i?a:void 0!==console[n]?o(console,n):void 0!==console.log?o(console,"log"):e)}(n)||c.apply(this,arguments)}function u(e,i){var o,a,c,u=this,d="loglevel";function f(){var e;if(typeof window!==t&&d){try{e=window.localStorage[d]}catch(e){}if(typeof e===t)try{var i=window.document.cookie,n=encodeURIComponent(d),s=i.indexOf(n+"=");-1!==s&&(e=/^([^;]+)/.exec(i.slice(s+n.length+1))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}function p(e){var t=e;if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=u.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?d+=":"+e:"symbol"==typeof e&&(d=void 0),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=i||h,u.getLevel=function(){return null!=c?c:null!=a?a:o},u.setLevel=function(e,i){return c=p(e),!1!==i&&function(e){var i=(n[e]||"silent").toUpperCase();if(typeof window!==t&&d){try{return void(window.localStorage[d]=i)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+i+";"}catch(e){}}}(c),l.call(u)},u.setDefaultLevel=function(e){a=p(e),f()||u.setLevel(e,!1)},u.resetLevel=function(){c=null,function(){if(typeof window!==t&&d){try{window.localStorage.removeItem(d)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),l.call(u)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)},u.rebuild=function(){if(r!==u&&(o=p(r.getLevel())),l.call(u),r===u)for(var e in s)s[e].rebuild()},o=p(r?r.getLevel():"WARN");var m=f();null!=m&&(c=p(m)),l.call(u)}(r=new u).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=s[e];return t||(t=s[e]=new u(e,r.methodFactory)),t};var d=typeof window!==t?window.log:void 0;return r.noConflict=function(){return typeof window!==t&&window.log===r&&(window.log=d),r},r.getLoggers=function(){return s},r.default=r,r},void 0===(s=n.call(t,i,t,e))||(e.exports=s)}()},3109:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowInstrumentBracket=void 0;var s=n(i(3206)).default.Flow;const r=i(7741),o=i(6438),a=i(9479);class l extends r.GraphicalObject{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(),this.Visible=!0,this.PositionAndShape=new o.BoundingBox(this,e.ParentMusicSystem.PositionAndShape);const n=e.Measures[0],r=t.Measures[0];this.addConnector(n.getVFStave(),r.getVFStave(),s.StaveConnector.type.BRACKET,i)}draw(e){this.Visible&&this.vexflowConnector.setContext(e).draw();const t=this.vexflowConnector,i=t.top_stave.getYForLine(0),n=t.bottom_stave.getYForLine(t.bottom_stave.getNumLines()-1)+t.thickness;this.PositionAndShape.AbsolutePosition.x=(t.top_stave.getX()-2+t.x_shift)/a.unitInPixels,this.PositionAndShape.AbsolutePosition.y=i/a.unitInPixels,this.PositionAndShape.Size.height=(n-i)/a.unitInPixels,this.PositionAndShape.Size.width=12/a.unitInPixels}addConnector(e,t,i,n){this.vexflowConnector=new s.StaveConnector(e,t).setType(i).setXShift(-5*n)}}t.VexFlowInstrumentBracket=l},3123:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TechnicalInstruction=t.TechnicalInstructionType=void 0,function(e){e[e.Fingering=0]="Fingering",e[e.String=1]="String"}(i||(t.TechnicalInstructionType=i={})),t.TechnicalInstruction=class{}},3173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AJAX=void 0,t.AJAX=class{static ajax(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e3;const n=e.indexOf(".mxl")>-1?"text/plain; charset=x-user-defined":"application/xml";if(XMLHttpRequest)t=new XMLHttpRequest;else{if(!ActiveXObject)return Promise.reject(new Error("XMLHttp not supported."));t=new ActiveXObject("Microsoft.XMLHTTP")}return t.timeout=i,new Promise(((i,s)=>{t.onreadystatechange=()=>{t.readyState===XMLHttpRequest.DONE&&(200===t.status||0===t.status&&t.responseText?i(t.responseText):s(new Error("Could not retrieve requested URL "+t.status)))},t.ontimeout=e=>{s(new Error("Server request Timeout"))},t.overrideMimeType(n),t.open("GET",e,!0),t.send()}))}}},3186:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SlurReader=void 0;const s=i(6229),r=n(i(3065)),o=i(9767),a=i(4980),l=i(7718);t.SlurReader=class{constructor(e){this.openSlurDict={},this.musicSheet=e}addSlur(e,t){try{if(e)for(const i of e)if(i.attributes().length>0){const n=i.attribute("type").value;let o=1;try{i.attribute("number")&&(o=parseInt(i.attribute("number").value,10))}catch(e){r.default.debug("VoiceGenerator.addSlur number: ",e)}let c=a.PlacementEnum.NotYetDefined;const h=i.attribute("placement");h&&h.value&&("above"===h.value?c=a.PlacementEnum.Above:"below"===h.value&&(c=a.PlacementEnum.Below));const u=i.attribute("orientation");if(u&&u.value&&("over"===u.value?c=a.PlacementEnum.Above:"under"===u.value&&(c=a.PlacementEnum.Below)),"start"===n){let e=this.openSlurDict[o];e||(e=new s.Slur,this.openSlurDict[o]=e),e.StartNote=t,e.PlacementXml=c}else if("stop"===n){const e=this.openSlurDict[o];if(e){const n=i.name;if("slide"===n||"glissando"===n){const i=e.StartNote,n=new l.Glissando(i);n.AddNote(t),n.EndNote=t,t.NoteGlissando=n,delete this.openSlurDict[o]}else e.EndNote=t,t.isDuplicateSlur(e)||(t.NoteSlurs.push(e),e.StartNote.NoteSlurs.push(e)),delete this.openSlurDict[o]}}}}catch(e){const t=o.ITextTranslation.translateText("ReaderErrorMessages/SlurError","Error while reading slur.");this.musicSheet.SheetErrors.pushMeasureError(t)}}}},3206:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>ut});const n=()=>{};n.L=(e,t)=>{if(!t)return;const i=Array.prototype.slice.call(t).join(" ");window.console.log(e+": "+i)},n.MakeException=e=>class extends Error{constructor(t,i){super(t),this.name=e,this.message=t,this.data=i}},n.RERR=n.RuntimeError=class{constructor(e,t){this.code=e,this.message=t}toString(){return"[RuntimeError] "+this.code+":"+this.message}},n.Merge=(e,t)=>{for(const i in t)e[i]=t[i];return e},n.Min=Math.min,n.Max=Math.max,n.forEach=(e,t)=>{for(let i=0;i<e.length;i++)t(e[i],i)},n.RoundN=(e,t)=>e%t>=t/2?parseInt(e/t,10)*t+t:parseInt(e/t,10)*t,n.MidLine=(e,t)=>{let i=t+(e-t)/2;return i%2>0&&(i=n.RoundN(10*i,5)/10),i},n.SortAndUnique=(e,t,i)=>{if(e.length>1){const n=[];let s;e.sort(t);for(let t=0;t<e.length;++t)0!==t&&i(e[t],s)||n.push(e[t]),s=e[t];return n}return e},n.Contains=(e,t)=>{let i=e.length;for(;i--;)if(e[i]===t)return!0;return!1},n.getCanvasContext=e=>{if(!e)throw new n.RERR("BadArgument","Invalid canvas selector: "+e);const t=document.getElementById(e);if(!t||!t.getContext)throw new n.RERR("UnsupportedBrowserError","This browser does not support HTML5 Canvas");return t.getContext("2d")},n.drawDot=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#55";e.save(),e.setFillStyle(n),e.beginPath(),e.arc(t,i,3,0,2*Math.PI,!0),e.closePath(),e.fill(),e.restore()},n.BM=(e,t)=>{const i=(new Date).getTime();t();const s=(new Date).getTime()-i;n.L(e+s+"ms")},n.StackTrace=()=>(new Error).stack,n.W=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const s=t.join(" ");window.console.log("Warning: ",s,n.StackTrace())},(n.Prefix=e=>n.Prefix.prefix+e).prefix="vf-";class r{static GCD(e,t){if("number"!=typeof e||"number"!=typeof t)throw new n.RERR("BadArgument","Invalid numbers: ".concat(e,", ").concat(t));let i;for(;0!==t;)i=t,t=e%t,e=i;return e}static LCM(e,t){return e*t/r.GCD(e,t)}static LCMM(e){if(0===e.length)return 0;if(1===e.length)return e[0];if(2===e.length)return r.LCM(e[0],e[1]);{const t=e[0];return e.shift(),r.LCM(t,r.LCMM(e))}}constructor(e,t){this.set(e,t)}set(e,t){return this.numerator=void 0===e?1:e,this.denominator=void 0===t?1:t,this}value(){return this.numerator/this.denominator}simplify(){let e=this.numerator,t=this.denominator;const i=r.GCD(e,t);return e/=i,t/=i,t<0&&(t=-t,e=-e),this.set(e,t)}add(e,t){let i,n;e instanceof r?(i=e.numerator,n=e.denominator):(i=void 0!==e?e:0,n=void 0!==t?t:1);const s=r.LCM(this.denominator,n),o=s/this.denominator,a=s/n,l=this.numerator*o+i*a;return this.set(l,s)}subtract(e,t){let i,n;e instanceof r?(i=e.numerator,n=e.denominator):(i=void 0!==e?e:0,n=void 0!==t?t:1);const s=r.LCM(this.denominator,n),o=s/this.denominator,a=s/n,l=this.numerator*o-i*a;return this.set(l,s)}multiply(e,t){let i,n;return e instanceof r?(i=e.numerator,n=e.denominator):(i=void 0!==e?e:1,n=void 0!==t?t:1),this.set(this.numerator*i,this.denominator*n)}divide(e,t){let i,n;return e instanceof r?(i=e.numerator,n=e.denominator):(i=void 0!==e?e:1,n=void 0!==t?t:1),this.set(this.numerator*n,this.denominator*i)}equals(e){const t=r.__compareA.copy(e).simplify(),i=r.__compareB.copy(this).simplify();return t.numerator===i.numerator&&t.denominator===i.denominator}greaterThan(e){const t=r.__compareB.copy(this);return t.subtract(e),t.numerator>0}greaterThanEquals(e){const t=r.__compareB.copy(this);return t.subtract(e),t.numerator>=0}lessThan(e){return!this.greaterThanEquals(e)}lessThanEquals(e){return!this.greaterThan(e)}clone(){return new r(this.numerator,this.denominator)}copy(e){return"number"==typeof e?this.set(e||0,1):this.set(e.numerator,e.denominator)}quotient(){return Math.floor(this.numerator/this.denominator)}fraction(){return this.numerator%this.denominator}abs(){return this.denominator=Math.abs(this.denominator),this.numerator=Math.abs(this.numerator),this}toString(){return this.numerator+"/"+this.denominator}toSimplifiedString(){return r.__tmp.copy(this).simplify().toString()}toMixedString(){let e="";const t=this.quotient(),i=r.__tmp.copy(this);return t<0?i.abs().fraction():i.fraction(),0!==t?(e+=t,0!==i.numerator&&(e+=" "+i.toSimplifiedString())):e=0===i.numerator?"0":i.toSimplifiedString(),e}parse(e){const t=e.split("/"),i=parseInt(t[0],10),n=t[1]?parseInt(t[1],10):1;return this.set(i,n)}}r.__compareA=new r,r.__compareB=new r,r.__tmp=new r;const o=n.MakeException("RegistryError");function a(e,t,i,n,s){e[t][i]||(e[t][i]={}),e[t][i][n]=s}class l{static get INDEXES(){return["type"]}constructor(){this.clear()}static enableDefaultRegistry(e){l.defaultRegistry=e}static getDefaultRegistry(){return l.defaultRegistry}static disableDefaultRegistry(){l.defaultRegistry=null}clear(){return this.index={id:{},type:{},class:{}},this}updateIndex(e){let{id:t,name:i,value:n,oldValue:s}=e;const r=this.getElementById(t);null!==s&&this.index[i][s]&&delete this.index[i][s][t],null!==n&&a(this.index,i,n,r.getAttribute("id"),r)}register(e,t){if(!(t=t||e.getAttribute("id")))throw new o("Can't add element without `id` attribute to registry",e);return e.setAttribute("id",t),a(this.index,"id",t,t,e),l.INDEXES.forEach((i=>{this.updateIndex({id:t,name:i,value:e.getAttribute(i),oldValue:null})})),e.onRegister(this),this}getElementById(e){return this.index.id[e]?this.index.id[e][e]:null}getElementsByAttribute(e,t){const i=this.index[e];return i&&i[t]?Object.keys(i[t]).map((e=>i[t][e])):[]}getElementsByType(e){return this.getElementsByAttribute("type",e)}getElementsByClass(e){return this.getElementsByAttribute("class",e)}onUpdate(e){let{id:t,name:i,value:n,oldValue:s}=e;return function(e,t){return e.filter((e=>e===t)).length>0}(l.INDEXES.concat(["id","class"]),i)?(this.updateIndex({id:t,name:i,value:n,oldValue:s}),this):this}}l.defaultRegistry=null;class c{static newID(){return"auto"+c.ID++}constructor(){let{type:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.attrs={id:c.newID(),el:null,type:e||"Base",classes:{}},this.boundingBox=null,this.context=null,this.rendered=!1,l.getDefaultRegistry()&&l.getDefaultRegistry().register(this)}setStyle(e){return this.style=e,this}getStyle(){return this.style}applyStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.context,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getStyle();return t?(e.save(),t.shadowColor&&e.setShadowColor(t.shadowColor),t.shadowBlur&&e.setShadowBlur(t.shadowBlur),t.fillStyle&&e.setFillStyle(t.fillStyle),t.strokeStyle&&e.setStrokeStyle(t.strokeStyle),t.lineWidth&&e.setLineWidth(t.lineWidth),this):this}restoreStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.context;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getStyle())?(e.restore(),this):this}drawWithStyle(){this.checkContext(),this.applyStyle(),this.draw(),this.restoreStyle()}hasClass(e){return!0===this.attrs.classes[e]}addClass(e){return this.attrs.classes[e]=!0,this.registry&&this.registry.onUpdate({id:this.getAttribute("id"),name:"class",value:e,oldValue:null}),this}removeClass(e){return delete this.attrs.classes[e],this.registry&&this.registry.onUpdate({id:this.getAttribute("id"),name:"class",value:null,oldValue:e}),this}onRegister(e){return this.registry=e,this}isRendered(){return this.rendered}setRendered(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.rendered=e,this}getAttributes(){return this.attrs}getAttribute(e){return this.attrs[e]}setAttribute(e,t){const i=this.attrs.id,n=this.attrs[e];return this.attrs[e]=t,this.registry&&this.registry.onUpdate({id:i,name:e,value:t,oldValue:n}),this}getContext(){return this.context}setContext(e){return this.context=e,this}getBoundingBox(){return this.boundingBox}checkContext(){if(!this.context)throw new n.RERR("NoContext","No rendering context attached to instance");return this.context}}c.ID=1e3;class h{constructor(e,t,i,n){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.addPoint(e,t),this.addPoint(i,n)}width(){return this.x2-this.x1}height(){return this.y2-this.y1}addPoint(e,t){null!=e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),null!=t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))}addX(e){this.addPoint(e,null)}addY(e){this.addPoint(null,e)}addQuadraticCurve(e,t,i,n,s,r){const o=e+2/3*(i-e),a=t+2/3*(n-t),l=o+1/3*(s-e),c=a+1/3*(r-t);this.addBezierCurve(e,t,o,a,l,c,s,r)}addBezierCurve(e,t,i,n,s,r,o,a){const l=[e,t],c=[i,n],h=[s,r],u=[o,a];let d;this.addPoint(l[0],l[1]),this.addPoint(u[0],u[1]);const f=(e,t)=>Math.pow(1-e,3)*l[t]+3*Math.pow(1-e,2)*e*c[t]+3*(1-e)*Math.pow(e,2)*h[t]+Math.pow(e,3)*u[t];for(d=0;d<=1;d++){const e=6*l[d]-12*c[d]+6*h[d],t=-3*l[d]+9*c[d]-9*h[d]+3*u[d],i=3*c[d]-3*l[d];if(0===t){if(0===e)continue;const t=-i/e;0<t&&t<1&&(0===d&&this.addX(f(t,d)),1===d&&this.addY(f(t,d)));continue}const n=Math.pow(e,2)-4*i*t;if(n<0)continue;const s=(-e+Math.sqrt(n))/(2*t);0<s&&s<1&&(0===d&&this.addX(f(s,d)),1===d&&this.addY(f(s,d)));const r=(-e-Math.sqrt(n))/(2*t);0<r&&r<1&&(0===d&&this.addX(f(r,d)),1===d&&this.addY(f(r,d)))}}}class u{static copy(e){return new u(e.x,e.y,e.w,e.h)}constructor(e,t,i,n){this.x=e,this.y=t,this.w=i,this.h=n}getX(){return this.x}getY(){return this.y}getW(){return this.w}getH(){return this.h}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setW(e){return this.w=e,this}setH(e){return this.h=e,this}move(e,t){this.x+=e,this.y+=t}clone(){return u.copy(this)}mergeWith(e,t){const i=e,n=this.x<i.x?this.x:i.x,s=this.y<i.y?this.y:i.y,r=Math.max(this.x+this.w,i.x+i.w)-n,o=Math.max(this.y+this.h,i.y+i.h)-s;return this.x=n,this.y=s,this.w=r,this.h=o,t&&this.draw(t),this}draw(e,t,i){t||(t=0),i||(i=0),e.rect(this.x+t,this.y+i,this.w,this.h),e.stroke()}}const d={glyphs:{v0:{x_min:0,x_max:514.5,ha:525,o:"m 236 648 b 246 648 238 648 242 648 b 288 646 261 648 283 648 b 472 513 364 634 428 587 b 514 347 502 464 514 413 b 462 163 514 272 499 217 b 257 44 409 83 333 44 b 50 163 181 44 103 83 b 0 347 14 217 0 272 b 40 513 0 413 12 464 b 236 648 87 591 155 638 m 277 614 b 253 616 273 616 261 616 b 242 616 247 616 243 616 b 170 499 193 609 181 589 b 159 348 163 446 159 398 b 166 222 159 308 161 266 b 201 91 174 138 183 106 b 257 76 215 81 235 76 b 311 91 277 76 299 81 b 347 222 330 106 338 138 b 353 348 352 266 353 308 b 344 499 353 398 351 446 b 277 614 333 587 322 606 m 257 -1 l 258 -1 l 255 -1 l 257 -1 m 257 673 l 258 673 l 255 673 l 257 673 "},v1:{x_min:-1.359375,x_max:344.359375,ha:351,o:"m 126 637 l 129 638 l 198 638 l 266 638 l 269 635 b 274 631 272 634 273 632 l 277 627 l 277 395 b 279 156 277 230 277 161 b 329 88 281 123 295 106 b 344 69 341 81 344 79 b 337 55 344 62 343 59 l 333 54 l 197 54 l 61 54 l 58 55 b 50 69 53 59 50 62 b 65 88 50 79 53 81 b 80 97 72 91 74 93 b 117 156 103 113 112 129 b 117 345 117 161 117 222 l 117 528 l 100 503 l 38 406 b 14 383 24 384 23 383 b -1 398 5 383 -1 390 b 4 415 -1 403 1 409 b 16 437 5 416 10 426 l 72 539 l 100 596 b 121 632 119 631 119 631 b 126 637 122 634 125 635 m 171 -1 l 172 -1 l 170 -1 l 171 -1 m 171 673 l 172 673 l 170 673 l 171 673 "},v2:{x_min:-1.359375,x_max:458.6875,ha:468,o:"m 197 648 b 216 648 201 648 208 648 b 258 646 232 648 253 648 b 419 546 333 637 393 599 b 432 489 428 528 432 509 b 356 342 432 440 405 384 b 235 278 322 313 288 295 b 69 170 166 256 107 217 b 69 169 69 170 69 169 b 69 169 69 169 69 169 b 74 173 69 169 72 170 b 209 222 112 204 163 222 b 310 195 247 222 274 215 b 371 179 332 184 352 179 b 396 181 379 179 387 179 b 428 202 409 184 423 194 b 442 212 431 209 436 212 b 458 197 450 212 458 206 b 441 148 458 190 449 165 b 299 44 409 84 353 44 b 288 45 295 44 292 44 b 250 61 274 45 268 49 b 122 99 212 86 164 99 b 73 91 104 99 88 97 b 28 63 53 84 34 72 b 14 54 25 56 20 54 b 1 62 9 54 4 56 l -1 65 l -1 79 b 0 99 -1 91 0 95 b 2 113 1 102 2 108 b 164 309 20 197 81 272 b 285 470 232 341 277 398 b 287 487 287 476 287 481 b 171 595 287 551 239 595 b 155 595 166 595 160 595 b 142 592 145 594 142 594 b 145 589 142 592 142 591 b 179 527 168 576 179 551 b 132 455 179 496 163 467 b 104 451 122 452 112 451 b 27 530 62 451 27 487 b 29 555 27 538 27 546 b 197 648 44 601 115 639 m 228 -1 l 230 -1 l 227 -1 l 228 -1 m 228 673 l 230 673 l 227 673 l 228 673 "},v3:{x_min:-1.359375,x_max:409.6875,ha:418,o:"m 174 648 b 191 648 176 648 183 648 b 225 648 204 648 220 648 b 402 523 317 638 389 588 b 404 503 404 517 404 510 b 402 484 404 495 404 488 b 264 373 389 437 334 394 b 257 370 259 371 257 371 b 257 370 257 370 257 370 b 264 369 258 370 261 369 b 409 202 359 334 409 267 b 318 72 409 152 381 104 b 200 43 281 52 240 43 b 23 113 134 43 69 68 b 0 169 6 129 0 149 b 77 249 0 210 29 249 l 77 249 b 152 174 125 249 152 212 b 103 102 152 145 137 116 b 103 102 103 102 103 102 b 147 94 103 101 132 95 b 153 94 149 94 151 94 b 265 206 219 94 265 141 b 264 226 265 213 265 219 b 147 355 253 299 204 353 b 126 371 133 356 126 362 b 147 388 126 383 132 388 b 254 474 196 391 238 424 b 259 502 258 484 259 494 b 182 592 259 544 228 582 b 156 595 175 595 166 595 b 115 592 142 595 129 594 l 111 591 l 115 588 b 152 524 141 574 152 549 b 92 449 152 491 130 458 b 76 448 87 448 81 448 b -1 530 32 448 -1 488 b 20 581 -1 548 5 566 b 174 648 55 619 108 641 m 204 -1 l 205 -1 l 202 -1 l 204 -1 m 204 673 l 205 673 l 202 673 l 204 673 "},v4:{x_min:0,x_max:468.21875,ha:478,o:"m 174 637 b 232 638 175 638 189 638 b 277 638 245 638 259 638 l 378 638 l 381 635 b 389 623 386 632 389 627 b 382 609 389 617 386 613 b 366 589 381 606 372 598 l 313 528 l 245 451 l 209 410 l 155 348 l 84 267 b 59 240 72 252 59 240 b 59 240 59 240 59 240 b 151 238 59 238 68 238 l 242 238 l 242 303 b 243 371 242 369 242 370 b 289 426 245 374 254 385 l 303 441 l 317 456 l 338 483 l 360 506 l 371 520 b 386 527 375 526 381 527 b 400 519 392 527 397 524 b 401 440 401 516 401 514 b 401 377 401 423 401 402 l 401 238 l 426 238 b 453 237 449 238 450 238 b 465 217 461 234 465 226 b 460 202 465 212 464 206 b 426 197 454 197 453 197 l 401 197 l 401 180 b 451 88 402 129 412 109 b 468 69 465 81 468 79 b 461 55 468 62 466 59 l 458 54 l 321 54 l 185 54 l 182 55 b 175 69 176 59 175 62 b 191 88 175 79 176 81 b 240 180 230 109 240 129 l 240 197 l 125 197 b 73 195 104 195 87 195 b 8 197 10 195 9 197 b 0 212 2 199 0 205 b 0 212 0 212 0 212 b 20 242 0 219 0 219 b 163 610 104 344 163 492 b 174 637 163 628 166 634 m 234 -1 l 235 -1 l 232 -1 l 234 -1 m 234 673 l 235 673 l 232 673 l 234 673 "},v5:{x_min:0,x_max:409.6875,ha:418,o:"m 47 637 b 53 638 49 638 50 638 b 69 634 55 638 61 637 b 210 610 114 619 161 610 b 363 634 259 610 311 619 b 382 638 372 637 378 638 b 392 634 386 638 389 637 b 397 623 396 630 397 627 b 393 610 397 620 396 616 b 298 505 368 552 338 520 b 212 494 277 498 246 494 b 65 517 163 494 106 502 b 61 517 62 517 61 517 b 61 517 61 517 61 517 b 51 408 61 517 51 412 b 51 408 51 408 51 408 b 51 408 51 408 51 408 b 61 412 53 408 55 409 b 125 434 80 421 103 430 b 185 441 145 440 166 441 b 409 244 310 441 409 353 b 401 191 409 227 406 209 b 197 43 375 105 287 43 b 159 47 183 43 171 44 b 23 123 112 56 61 86 b 0 180 6 140 0 159 b 76 260 0 220 31 260 b 92 259 81 260 87 259 b 152 183 132 251 152 216 b 100 112 152 152 134 122 b 95 111 98 112 95 111 b 95 111 95 111 95 111 b 129 98 95 109 119 101 b 148 97 136 97 141 97 b 264 235 206 97 261 158 b 265 248 265 240 265 244 b 210 398 265 312 243 373 b 179 408 201 406 194 408 b 174 408 178 408 176 408 b 53 369 130 408 88 394 b 34 359 39 359 38 359 b 17 374 24 359 17 365 b 39 628 17 384 38 625 b 47 637 40 631 43 635 m 204 -1 l 205 -1 l 202 -1 l 204 -1 m 204 673 l 205 673 l 202 673 l 204 673 "},v6:{x_min:0,x_max:475.03125,ha:485,o:"m 255 648 b 274 648 259 648 266 648 b 314 646 288 648 307 648 b 450 555 374 637 438 594 b 454 530 453 546 454 538 b 375 451 454 485 416 451 b 328 467 359 451 343 455 b 300 526 310 483 300 503 b 352 598 300 557 319 589 b 356 599 355 598 356 599 b 352 602 356 599 355 601 b 288 616 330 612 308 616 b 210 584 257 616 230 605 b 164 433 189 559 174 508 b 160 374 163 415 160 381 b 160 374 160 374 160 374 b 160 374 160 374 160 374 b 168 377 160 374 164 376 b 258 395 200 390 228 395 b 366 367 294 395 328 387 b 475 223 436 333 475 283 b 472 197 475 215 473 206 b 349 65 462 141 419 95 b 259 43 317 51 288 43 b 167 69 230 43 200 52 b 4 290 80 113 20 195 b 0 349 1 309 0 328 b 20 467 0 391 6 433 b 255 648 58 563 155 637 m 269 363 b 257 363 265 363 261 363 b 210 345 236 363 220 356 b 186 226 196 324 186 272 b 187 198 186 216 186 206 b 213 95 191 151 202 112 b 257 76 221 83 238 76 b 270 77 261 76 266 76 b 321 156 299 81 310 99 b 329 229 326 183 329 206 b 321 301 329 252 326 274 b 269 363 311 342 298 359 m 236 -1 l 238 -1 l 235 -1 l 236 -1 m 236 673 l 238 673 l 235 673 l 236 673 "},v7:{x_min:0,x_max:442.359375,ha:451,o:"m 147 648 b 166 649 153 649 160 649 b 313 598 217 649 273 630 b 340 587 323 588 328 587 l 341 587 b 412 628 367 587 390 601 b 427 638 416 635 421 638 b 439 632 431 638 435 637 b 442 623 441 630 442 628 b 430 569 442 616 439 603 b 352 369 408 492 377 410 b 300 259 325 324 313 298 b 273 84 283 205 273 140 b 265 55 273 65 272 59 l 261 54 l 181 54 l 99 54 l 96 55 b 91 61 95 56 92 59 l 89 63 l 89 77 b 147 263 89 133 111 202 b 261 401 176 313 212 355 b 378 541 315 449 349 489 l 382 548 l 375 544 b 240 495 333 512 285 495 b 129 535 198 495 160 509 b 84 560 108 552 95 560 b 76 559 81 560 78 560 b 31 487 59 555 43 530 b 14 470 27 473 24 470 b 1 477 8 470 4 471 l 0 480 l 0 553 l 0 627 l 1 630 b 16 638 4 635 9 638 b 23 635 17 638 20 637 b 49 626 36 626 39 626 b 96 638 59 626 80 630 b 104 639 99 638 102 639 b 117 644 107 641 112 642 b 147 648 125 645 137 648 m 220 -1 l 221 -1 l 219 -1 l 220 -1 m 220 673 l 221 673 l 219 673 l 220 673 "},v8:{x_min:0,x_max:488.640625,ha:499,o:"m 217 648 b 245 649 225 648 235 649 b 453 516 343 649 430 595 b 458 478 455 503 458 491 b 412 370 458 440 441 398 b 411 369 412 369 411 369 b 415 365 411 367 412 367 b 488 231 462 331 488 281 b 472 165 488 208 483 186 b 243 43 434 86 338 43 b 63 104 178 43 112 62 b 0 233 20 140 0 186 b 73 365 0 283 24 331 l 77 369 l 72 374 b 29 476 42 406 29 441 b 217 648 29 557 103 635 m 258 605 b 242 606 253 605 247 606 b 157 552 198 606 157 580 b 160 541 157 548 159 544 b 319 413 176 503 242 452 l 337 403 l 338 406 b 359 476 352 428 359 452 b 258 605 359 537 318 595 m 138 326 b 130 330 134 328 130 330 b 130 330 130 330 130 330 b 107 305 127 330 112 313 b 84 231 91 281 84 256 b 243 86 84 156 151 86 b 249 87 245 86 246 87 b 347 156 303 88 347 120 b 344 172 347 162 345 167 b 156 319 325 227 257 281 b 138 326 151 322 144 324 m 243 -1 l 245 -1 l 242 -1 l 243 -1 m 243 673 l 245 673 l 242 673 l 243 673 "},v9:{x_min:0,x_max:475.03125,ha:485,o:"m 191 646 b 212 649 198 648 205 649 b 255 644 227 649 243 646 b 458 448 348 616 428 539 b 475 342 469 415 475 378 b 460 244 475 308 469 274 b 193 44 421 124 303 44 b 91 69 157 44 122 51 b 19 161 43 97 19 126 b 21 181 19 167 20 174 b 98 241 32 220 65 241 b 170 186 129 241 160 223 b 172 166 171 179 172 173 b 121 94 172 134 152 102 b 117 93 118 94 117 93 b 121 90 117 93 118 91 b 185 76 142 80 164 76 b 270 119 220 76 251 91 b 308 259 287 145 300 194 b 313 317 310 277 313 310 b 313 317 313 317 313 317 b 313 317 313 317 313 317 b 304 315 313 317 308 316 b 216 295 273 302 245 295 b 145 308 193 295 170 299 b 19 398 88 327 42 360 b 0 469 5 420 0 444 b 24 551 0 496 8 526 b 191 646 54 596 125 637 m 227 614 b 215 616 224 616 220 616 b 202 614 210 616 206 616 b 152 535 174 610 163 592 b 144 463 147 509 144 485 b 152 391 144 440 147 417 b 216 328 163 344 179 328 b 280 391 253 328 269 344 b 288 463 285 417 288 440 b 280 535 288 485 285 509 b 227 614 269 594 258 610 m 236 -1 l 238 -1 l 235 -1 l 236 -1 m 236 673 l 238 673 l 235 673 l 236 673 "},va:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -8 -1 b -1 0 -5 -1 -4 0 b 16 -11 5 0 13 -4 b 83 -186 17 -12 47 -90 l 148 -358 l 148 -363 b 127 -385 148 -376 138 -385 b 112 -378 122 -385 118 -383 b 54 -226 110 -374 114 -385 b 0 -81 24 -147 0 -81 b -55 -226 -1 -81 -25 -147 b -114 -378 -115 -385 -111 -374 b -129 -385 -119 -383 -123 -385 b -149 -363 -140 -385 -149 -376 l -149 -358 l -84 -186 b -19 -11 -49 -90 -19 -12 b -8 -1 -17 -8 -12 -4 "},vb:{x_min:0,x_max:428.75,ha:438,o:"m 262 186 b 273 186 266 186 272 186 b 274 186 273 186 274 186 b 285 186 274 186 280 186 b 428 48 375 181 428 122 b 386 -68 428 12 416 -29 b 155 -187 329 -145 236 -187 b 12 -111 92 -187 38 -162 b 0 -51 4 -91 0 -72 b 262 186 0 58 122 179 "},vc:{x_min:0,x_max:447.8125,ha:457,o:"m 0 86 l 0 173 l 223 173 l 447 173 l 447 86 l 447 0 l 223 0 l 0 0 l 0 86 "},vf:{x_min:0,x_max:370.21875,ha:378,o:"m 0 0 l 0 277 l 61 277 l 122 277 l 122 0 l 122 -278 l 61 -278 l 0 -278 l 0 0 m 246 -1 l 246 277 l 308 277 l 370 277 l 370 -1 l 370 -278 l 308 -278 l 246 -278 l 246 -1 "},v10:{x_min:0,x_max:559.421875,ha:571,o:"m 5 127 b 14 127 6 127 9 127 b 51 126 25 127 43 127 b 175 98 93 122 138 112 l 186 94 b 279 51 210 86 255 65 b 285 47 280 51 283 48 b 319 27 291 44 311 31 l 326 22 b 359 0 332 19 352 4 l 367 -6 b 371 -9 368 -6 370 -8 l 379 -15 b 387 -22 383 -18 386 -20 l 398 -30 l 411 -40 l 417 -47 l 427 -55 l 434 -61 b 441 -66 436 -62 439 -65 l 446 -72 l 453 -77 l 462 -87 b 558 -188 490 -113 549 -176 b 559 -195 559 -191 559 -194 b 548 -205 559 -201 555 -205 b 541 -204 547 -205 544 -205 b 534 -198 539 -201 536 -199 l 525 -191 b 481 -162 518 -187 490 -167 b 472 -155 477 -159 472 -156 b 468 -152 470 -155 469 -154 b 461 -149 466 -152 464 -151 b 428 -130 454 -145 441 -137 b 371 -99 413 -122 372 -99 b 363 -95 371 -99 367 -98 b 353 -91 357 -94 353 -91 b 348 -90 353 -91 352 -91 b 332 -81 343 -87 341 -86 b 27 -12 230 -37 127 -13 b 0 -5 4 -11 2 -11 b 0 58 0 -2 0 27 b 0 122 0 88 0 120 b 5 127 1 124 4 126 "},v11:{x_min:-155.171875,x_max:153.8125,ha:157,o:"m -137 353 b -130 353 -136 353 -133 353 b -112 349 -125 353 -119 352 b -100 342 -110 347 -104 344 b 0 317 -69 326 -35 317 b 111 349 38 317 76 328 b 129 353 117 352 123 353 b 153 327 142 353 153 344 b 144 302 153 320 153 317 b 27 6 93 226 50 113 b 21 -13 24 -11 24 -11 b 0 -26 17 -22 8 -26 b -24 -12 -9 -26 -19 -22 b -28 5 -24 -9 -27 -2 b -145 302 -53 117 -95 224 b -155 327 -155 317 -155 320 b -137 353 -155 340 -148 349 "},v18:{x_min:0,x_max:323.9375,ha:331,o:"m 217 535 b 225 537 220 537 221 537 b 245 524 235 537 242 533 l 246 521 l 247 390 l 247 258 l 273 265 b 306 270 288 269 299 270 b 322 259 315 270 319 267 b 323 208 323 256 323 233 b 322 158 323 184 323 159 b 288 140 318 148 315 147 b 247 130 254 131 247 130 b 247 65 247 130 247 104 b 247 20 247 51 247 36 l 247 -88 l 273 -81 b 306 -76 289 -77 299 -76 b 318 -81 311 -76 315 -77 b 323 -123 323 -87 323 -86 l 323 -138 l 323 -154 b 318 -195 323 -191 323 -190 b 269 -210 314 -199 315 -199 b 249 -216 259 -213 250 -216 l 247 -216 l 247 -349 l 246 -483 l 245 -487 b 225 -499 242 -495 234 -499 b 206 -487 219 -499 210 -495 l 205 -483 l 205 -355 l 205 -227 l 204 -227 l 181 -233 l 138 -244 b 117 -249 127 -247 117 -249 b 115 -385 115 -249 115 -256 l 115 -523 l 114 -526 b 95 -538 110 -534 102 -538 b 74 -526 87 -538 78 -534 l 73 -523 l 73 -391 b 72 -260 73 -269 73 -260 b 72 -260 72 -260 72 -260 b 19 -273 61 -263 23 -273 b 0 -260 10 -273 4 -267 b 0 -209 0 -256 0 -256 l 0 -162 l 1 -158 b 61 -134 5 -148 5 -148 l 73 -131 l 73 -22 b 72 86 73 79 73 86 b 72 86 72 86 72 86 b 19 74 61 83 23 74 b 0 86 10 74 4 79 b 0 137 0 90 0 90 l 0 184 l 1 188 b 61 212 5 198 5 198 l 73 215 l 73 348 l 73 481 l 74 485 b 95 498 78 492 87 498 b 103 495 98 498 100 496 b 114 485 107 494 111 489 l 115 481 l 115 353 l 115 226 l 121 226 b 159 235 123 227 141 231 l 198 247 l 205 248 l 205 384 l 205 521 l 206 524 b 217 535 209 528 212 533 m 205 9 b 205 119 205 70 205 119 l 205 119 b 182 113 204 119 194 116 l 138 102 b 117 97 127 99 117 97 b 115 -12 115 97 115 91 l 115 -122 l 121 -120 b 159 -111 123 -119 141 -115 l 198 -101 l 205 -98 l 205 9 "},v1b:{x_min:0,x_max:559.421875,ha:571,o:"m 544 204 b 548 204 545 204 547 204 b 559 194 555 204 559 199 b 559 190 559 192 559 191 b 530 156 559 188 556 184 b 462 86 510 134 481 104 b 453 76 458 81 454 77 l 446 70 l 441 65 b 434 59 439 63 436 61 l 427 54 b 409 37 426 51 416 44 b 392 23 398 29 394 26 b 387 19 389 22 387 20 b 379 13 386 19 383 16 l 371 8 l 367 5 l 359 -1 l 337 -16 b 285 -48 319 -29 298 -41 l 279 -52 b 186 -95 255 -66 210 -87 l 175 -99 b 23 -129 127 -117 68 -129 b 17 -129 20 -129 19 -129 b 1 -123 2 -129 2 -129 b 0 -49 0 -122 0 -83 b 0 4 0 -22 0 1 b 27 11 2 9 4 9 b 185 31 78 12 145 20 b 198 34 186 31 193 33 b 314 73 234 44 277 58 b 349 88 328 79 340 84 b 353 90 352 90 353 90 b 363 94 353 90 357 93 b 371 98 367 97 371 98 b 428 129 372 98 413 120 b 461 148 441 136 454 144 b 468 151 464 149 466 151 b 472 154 469 152 470 154 b 481 161 473 155 477 158 b 525 190 490 166 518 186 l 534 197 b 540 201 536 198 539 199 b 544 204 541 202 544 204 "},v1d:{x_min:0,x_max:619.3125,ha:632,o:"m 274 184 b 307 186 285 186 296 186 b 616 22 465 186 597 116 b 619 -1 617 13 619 5 b 308 -187 619 -104 483 -187 b 0 -1 133 -187 0 -102 b 5 36 0 11 1 23 b 274 184 29 115 141 176 m 289 161 b 272 162 284 162 277 162 b 171 41 209 162 171 108 b 205 -73 171 5 182 -34 b 345 -163 243 -133 298 -163 b 436 -98 385 -163 420 -142 b 446 -43 443 -80 446 -62 b 289 161 446 47 377 147 "},v1e:{x_min:-402.890625,x_max:401.53125,ha:410,o:"m -219 173 b -213 174 -217 174 -215 174 b -202 173 -209 174 -205 173 b -114 86 -200 172 -179 151 b -28 0 -66 37 -28 0 b 40 84 -28 0 2 37 b 117 174 111 173 110 172 b 122 174 118 174 119 174 b 132 173 125 174 129 173 b 295 11 134 172 171 134 l 307 -1 l 336 34 b 374 76 366 72 368 74 b 381 77 375 77 378 77 b 401 56 392 77 401 68 b 400 48 401 54 401 51 b 223 -172 397 41 230 -166 b 210 -176 220 -174 215 -176 b 201 -174 206 -176 204 -176 b 112 -87 198 -173 178 -152 b 27 0 65 -38 27 0 b -42 -86 27 0 -4 -38 b -118 -174 -112 -174 -111 -173 b -123 -176 -119 -176 -121 -176 b -133 -174 -126 -176 -130 -174 b -296 -12 -136 -173 -172 -137 l -308 0 l -337 -34 b -375 -77 -367 -73 -370 -76 b -382 -79 -377 -79 -379 -79 b -402 -58 -393 -79 -402 -69 b -401 -49 -402 -55 -402 -52 b -224 172 -398 -43 -228 167 b -219 173 -223 172 -220 173 "},v1f:{x_min:-340.28125,x_max:338.921875,ha:346,o:"m -32 520 b -29 521 -31 520 -31 521 b -23 519 -27 521 -24 520 b -20 513 -21 517 -20 516 b -21 506 -20 512 -20 509 b -31 474 -23 502 -27 488 l -53 402 l -66 352 l -68 349 l -57 349 b -32 351 -51 349 -40 351 b 123 370 19 352 74 359 b 137 371 127 370 133 371 b 170 356 152 371 164 366 b 171 355 170 355 170 355 b 216 366 174 355 183 358 b 280 378 268 377 266 377 b 287 378 283 378 284 378 b 332 349 307 378 322 369 b 338 319 336 341 338 330 b 332 301 338 310 336 302 b 242 280 329 299 246 280 b 242 280 242 280 242 280 b 235 288 236 280 235 283 b 235 292 235 290 235 291 b 236 302 236 297 236 299 b 220 337 236 316 230 330 l 216 340 l 210 335 b 159 276 189 322 172 301 b 118 149 152 265 156 274 b 81 34 84 36 85 36 b -8 13 78 33 -4 13 b -8 13 -8 13 -8 13 b -14 20 -12 15 -14 15 b -8 44 -14 24 -12 31 b -2 66 -5 55 -2 65 b -2 66 -2 66 -2 66 l -2 66 b -43 41 -2 66 -21 55 b -114 4 -98 8 -98 8 b -144 0 -123 0 -134 0 b -242 99 -197 0 -242 43 b -242 109 -242 102 -242 105 b -212 219 -240 122 -242 116 b -185 312 -197 270 -185 312 l -185 312 b -189 312 -185 312 -186 312 b -259 312 -200 312 -227 312 b -321 310 -291 312 -310 310 b -334 312 -330 310 -334 312 b -340 319 -338 313 -340 316 b -336 326 -340 322 -338 324 b -291 337 -334 326 -314 331 l -247 347 l -210 348 b -172 348 -190 348 -172 348 b -168 363 -172 348 -171 355 b -145 442 -151 424 -145 441 b -133 452 -144 444 -140 446 l -77 489 b -32 520 -53 506 -32 520 m 57 334 b 53 335 55 335 54 335 b 44 334 50 335 49 335 b -70 316 8 326 -28 320 b -78 309 -78 316 -78 316 b -108 202 -80 305 -88 274 b -141 81 -136 112 -141 93 b -140 74 -141 79 -141 77 b -117 49 -137 59 -127 49 b -107 52 -114 49 -110 51 b 16 127 -106 54 14 126 b 42 217 16 127 42 215 b 49 241 42 222 44 229 b 73 320 53 251 73 317 b 57 334 73 327 65 333 "},v20:{x_min:-571.671875,x_max:570.3125,ha:582,o:"m -559 351 b -551 352 -556 352 -553 352 b -530 338 -543 352 -533 348 b -529 169 -530 337 -529 291 l -529 1 l -507 27 l -441 112 b -382 174 -394 169 -390 174 b -378 174 -381 174 -379 174 b -281 86 -370 174 -375 179 b -196 0 -234 37 -196 0 b -126 84 -196 0 -164 37 b -50 174 -55 173 -57 172 b -44 174 -49 174 -47 174 b -35 173 -42 174 -38 173 b 53 86 -32 172 -12 151 b 138 0 100 37 138 0 b 208 84 140 0 170 37 b 284 174 279 173 279 172 b 289 174 285 174 288 174 b 300 173 294 174 298 173 b 462 11 303 172 340 134 l 475 -1 l 503 34 b 541 76 534 72 536 74 b 548 77 544 77 545 77 b 570 56 560 77 570 68 b 567 48 570 54 568 51 b 392 -172 564 41 397 -166 b 378 -176 387 -174 382 -176 b 368 -174 375 -176 371 -176 b 280 -87 367 -173 347 -152 b 194 0 234 -38 194 0 b 126 -86 194 0 163 -38 b 49 -174 54 -174 55 -173 b 44 -176 47 -176 46 -176 b 34 -174 40 -176 36 -174 b -54 -87 31 -173 10 -152 b -140 0 -102 -38 -140 0 b -209 -86 -140 0 -171 -38 b -285 -174 -280 -174 -279 -173 b -291 -176 -287 -176 -288 -176 b -300 -174 -294 -176 -298 -174 b -464 -11 -303 -173 -374 -102 l -476 0 l -506 -37 b -539 -76 -528 -65 -537 -74 b -551 -80 -543 -79 -547 -80 b -570 -68 -558 -80 -566 -76 l -571 -65 l -571 136 b -570 340 -571 331 -571 337 b -559 351 -568 344 -564 348 "},v22:{x_min:0,x_max:432.828125,ha:442,o:"m 209 186 b 213 187 210 187 212 187 b 216 187 215 187 216 187 b 224 174 216 186 220 180 b 420 -1 269 105 338 43 b 432 -12 431 -8 432 -9 b 421 -23 432 -15 432 -16 b 228 -180 345 -70 264 -137 b 219 -188 221 -188 221 -188 l 219 -188 b 208 -177 215 -188 215 -188 b 10 1 163 -106 93 -44 b 0 11 0 6 0 8 b 10 22 0 13 0 15 b 202 179 87 69 167 136 b 209 186 206 183 209 186 "},v23:{x_min:0,x_max:133.390625,ha:136,o:"m 54 66 b 65 68 58 68 61 68 b 122 37 88 68 110 56 b 133 -1 130 26 133 12 b 104 -58 133 -23 123 -44 b 66 -69 92 -65 78 -69 b 10 -38 44 -69 23 -58 b 0 -1 2 -27 0 -13 b 54 66 0 30 20 61 "},v25:{x_min:0,x_max:318.5,ha:325,o:"m 20 376 b 167 377 23 377 96 377 b 296 376 231 377 294 377 b 318 347 311 371 318 359 b 296 316 318 333 311 320 b 159 315 294 315 227 315 b 21 316 91 315 24 315 b 0 345 6 320 0 333 b 20 376 0 359 6 371 "},v26:{x_min:-21.78125,x_max:483.1875,ha:493,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 383 20 616 20 616 l 20 148 l 21 151 b 140 199 59 183 102 199 b 206 179 164 199 187 192 l 210 176 l 210 396 l 210 617 l 212 621 b 231 632 216 628 223 632 b 250 620 239 632 247 628 b 251 383 251 616 251 616 l 251 148 l 254 151 b 370 199 291 183 332 199 b 415 191 385 199 400 197 b 483 84 458 176 483 134 b 461 0 483 58 476 29 b 332 -142 439 -40 411 -72 l 255 -215 b 231 -229 240 -229 239 -229 b 216 -223 224 -229 220 -227 b 210 -158 210 -217 210 -223 b 210 -120 210 -148 210 -136 l 210 -29 l 205 -34 b 100 -142 182 -65 159 -88 l 23 -215 b -1 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 201 l -21 616 l -20 620 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 m 341 131 b 328 133 337 133 332 133 b 322 133 326 133 323 133 b 257 87 296 129 273 113 l 251 80 l 251 -37 l 251 -156 l 255 -152 b 375 81 328 -72 375 20 l 375 83 b 341 131 375 113 367 126 "},v27:{x_min:0,x_max:432.828125,ha:442,o:"m 208 184 b 213 187 209 186 212 187 b 224 176 217 187 221 183 b 245 147 225 172 235 159 b 419 -1 288 90 347 38 b 431 -8 424 -4 431 -8 b 432 -12 432 -9 432 -11 b 430 -18 432 -13 432 -16 b 364 -61 424 -20 383 -47 b 225 -183 307 -102 250 -152 b 223 -187 224 -184 223 -187 b 220 -188 221 -188 220 -188 b 208 -176 216 -188 210 -184 b 187 -148 205 -173 197 -159 b 12 0 144 -90 84 -38 b 0 11 4 5 0 8 b 16 24 0 13 4 18 b 183 158 83 69 141 115 b 208 184 194 169 198 173 m 183 105 b 176 113 181 109 176 113 b 172 109 176 113 175 112 b 92 45 149 90 117 62 l 88 41 l 102 31 b 247 -105 160 -6 210 -55 l 254 -115 l 257 -112 l 269 -102 b 340 -45 287 -87 319 -61 l 344 -43 l 330 -33 b 183 105 272 6 221 54 "},v28:{x_min:-73.5,x_max:72.140625,ha:74,o:"m -72 252 l -73 254 l 0 254 l 72 254 l 70 252 b 0 -1 70 248 0 -1 b -72 252 -1 -1 -72 248 "},v29:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m 175 273 b 182 274 178 273 181 274 b 202 262 190 274 198 269 b 204 158 204 259 204 259 l 204 56 l 250 112 b 303 174 296 172 298 172 b 308 174 304 174 307 174 b 318 173 313 174 317 173 b 481 11 322 172 357 134 l 494 -1 l 522 34 b 560 76 553 72 555 74 b 567 77 563 77 564 77 b 589 56 579 77 589 68 b 586 48 589 54 588 51 b 411 -172 583 41 416 -166 b 397 -176 406 -174 401 -176 b 387 -174 393 -176 390 -176 b 299 -87 386 -173 366 -152 b 213 0 253 -38 213 0 b 208 -6 213 0 210 -2 l 204 -12 l 204 -147 b 204 -210 204 -173 204 -194 b 198 -292 204 -297 204 -287 b 183 -299 194 -297 189 -299 b 164 -287 175 -299 167 -295 b 163 -174 163 -284 163 -284 l 161 -63 l 119 -117 b 65 -176 76 -170 73 -176 b 61 -176 63 -176 62 -176 b -35 -87 51 -174 57 -180 b -121 0 -83 -38 -121 0 b -190 -86 -122 0 -152 -38 b -266 -174 -261 -174 -259 -173 b -272 -176 -268 -176 -270 -176 b -281 -174 -276 -176 -280 -174 b -371 -86 -284 -173 -304 -152 b -457 0 -417 -38 -457 0 l -457 0 b -477 -26 -457 0 -470 -16 b -548 -227 -524 -88 -548 -161 b -536 -303 -548 -254 -544 -280 b -533 -317 -534 -309 -533 -313 b -553 -338 -533 -330 -541 -338 b -577 -315 -566 -338 -571 -333 b -590 -227 -586 -287 -590 -258 b -518 -9 -590 -154 -564 -77 b -465 56 -509 2 -504 8 l -402 134 b -363 174 -374 170 -371 174 b -359 174 -362 174 -360 174 b -262 86 -351 174 -356 179 b -176 0 -216 37 -176 0 b -107 84 -176 0 -145 37 b -31 174 -36 173 -38 172 b -25 174 -29 174 -28 174 b -16 173 -23 174 -19 173 b 147 11 -13 172 35 123 l 157 -1 l 160 1 l 163 4 l 163 130 b 164 260 163 256 163 258 b 175 273 166 266 170 270 "},v2a:{x_min:-21.78125,x_max:366.140625,ha:374,o:"m 276 1378 b 284 1379 279 1379 281 1379 b 306 1360 292 1379 298 1374 b 352 1247 326 1326 343 1286 b 366 1139 362 1213 366 1175 b 347 1009 366 1093 359 1049 l 344 1002 l 347 992 b 352 971 348 986 351 977 b 366 863 362 936 366 899 b 347 732 366 818 359 773 l 344 725 l 347 716 b 352 695 348 710 351 700 b 366 588 362 659 366 623 b 223 262 366 464 314 345 b 189 233 212 252 212 252 b 35 76 126 183 73 129 b -1 16 20 56 2 27 b -19 4 -4 9 -12 4 l -21 4 l -21 137 l -21 270 l -17 270 b 186 344 59 281 134 308 b 319 606 270 399 319 499 b 317 650 319 620 319 635 l 315 659 l 314 655 b 223 537 288 607 258 570 b 189 509 212 528 212 528 b 35 352 126 459 73 405 b -1 292 20 333 2 303 b -19 280 -4 285 -12 280 l -21 280 l -21 413 l -21 546 l -17 546 b 186 620 59 557 134 584 b 319 882 270 675 319 775 b 317 925 319 896 319 911 l 315 935 l 314 931 b 223 813 288 884 258 846 b 189 785 212 805 212 805 b 35 628 126 735 73 681 b -1 569 20 609 2 580 b -19 556 -4 562 -12 556 l -21 556 l -21 689 l -21 823 l -17 823 b 202 907 68 835 152 867 b 319 1157 280 968 319 1061 b 270 1338 319 1218 303 1281 b 262 1358 264 1349 262 1353 b 262 1364 262 1360 262 1363 b 276 1378 265 1371 269 1376 "},v2c:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -413 173 b -408 174 -412 174 -409 174 b -397 173 -404 174 -400 173 b -308 86 -394 172 -374 151 b -223 0 -261 37 -223 0 b -153 84 -223 0 -191 37 b -77 174 -83 173 -84 172 b -72 174 -76 174 -74 174 b -62 173 -68 174 -63 173 b 25 86 -59 172 -39 151 b 112 0 73 37 111 0 b 181 84 112 0 144 37 b 257 174 251 173 251 172 b 262 174 258 174 261 174 b 273 173 266 174 270 173 b 436 9 276 172 347 101 l 447 -1 l 477 36 b 522 79 511 79 513 79 l 522 79 b 552 51 533 79 539 73 b 596 -112 582 6 596 -51 b 567 -262 596 -161 586 -213 b 539 -322 558 -287 544 -316 b 524 -327 534 -326 529 -327 b 504 -315 515 -327 507 -323 b 503 -308 503 -312 503 -309 b 511 -285 503 -302 504 -297 b 555 -113 540 -227 555 -169 b 544 -34 555 -86 551 -59 b 522 19 540 -16 530 8 l 521 22 l 481 -26 l 405 -122 b 353 -176 366 -172 362 -176 b 349 -176 352 -176 351 -176 b 253 -87 341 -176 347 -180 b 167 0 206 -38 167 0 b 99 -86 167 0 136 -38 b 21 -174 27 -174 28 -173 b 17 -176 20 -176 19 -176 b 6 -174 13 -176 9 -174 b -81 -87 4 -173 -14 -152 b -167 0 -129 -38 -167 0 b -236 -86 -167 0 -198 -38 b -313 -174 -307 -174 -306 -173 b -318 -176 -314 -176 -315 -176 b -328 -174 -321 -176 -325 -174 b -491 -12 -330 -173 -367 -137 l -503 0 l -530 -34 b -570 -77 -562 -73 -564 -76 b -577 -79 -571 -79 -574 -79 b -597 -58 -588 -79 -597 -69 b -596 -49 -597 -55 -597 -52 b -417 172 -593 -43 -423 167 b -413 173 -417 172 -415 173 "},v2d:{x_min:0,x_max:438.28125,ha:447,o:"m 212 190 b 219 191 213 191 216 191 b 236 176 225 191 228 190 b 419 18 277 105 341 49 b 436 5 431 13 434 11 b 438 -1 438 4 438 1 b 424 -16 438 -8 432 -13 b 356 -49 409 -20 379 -36 b 234 -180 306 -83 258 -133 b 219 -192 230 -188 224 -192 b 200 -176 213 -192 206 -187 b 9 -15 157 -102 89 -45 b 0 0 2 -12 0 -6 b 16 18 0 9 2 12 b 200 176 93 48 159 104 b 212 190 205 186 208 188 m 239 113 b 236 117 238 116 238 117 b 230 108 235 117 234 115 b 92 -15 196 58 140 8 b 88 -18 91 -16 88 -18 b 92 -20 88 -18 91 -19 b 198 -116 130 -43 166 -74 b 200 -117 200 -117 200 -117 b 201 -117 200 -117 201 -117 b 264 -43 212 -98 242 -62 b 345 15 288 -19 321 4 b 348 18 347 16 348 16 b 344 20 348 18 347 19 b 239 113 307 41 266 79 "},v2f:{x_min:-1.359375,x_max:680.5625,ha:694,o:"m 597 1042 b 604 1042 600 1042 602 1042 b 642 1002 627 1042 642 1022 b 619 966 642 988 635 974 b 439 927 574 942 503 927 l 426 927 l 426 921 b 430 838 428 893 430 866 b 345 480 430 696 398 560 b 179 391 307 423 249 391 b 156 392 171 391 164 392 b 138 394 149 394 142 394 b 103 434 115 396 103 416 b 129 471 103 451 111 466 b 141 474 133 473 137 474 b 172 459 153 474 164 469 b 181 455 175 456 176 455 b 187 456 182 455 185 455 b 253 520 212 460 234 483 b 315 836 294 605 315 714 b 311 928 315 867 314 898 b 302 945 310 943 311 942 b 245 953 283 950 262 953 b 130 891 193 953 149 931 b 84 860 119 870 102 860 b 36 905 61 860 39 877 b 36 910 36 907 36 909 b 80 970 36 931 50 949 b 249 1017 125 1000 187 1017 b 322 1009 273 1017 299 1014 l 341 1003 b 436 991 372 995 406 991 b 577 1031 495 991 545 1004 b 597 1042 583 1038 590 1041 m 416 360 b 424 360 419 360 421 360 b 481 309 454 360 479 338 b 503 145 484 280 495 199 b 585 -185 525 16 555 -106 b 630 -245 596 -213 613 -237 l 634 -247 l 638 -245 b 647 -244 641 -245 645 -244 b 680 -278 666 -244 680 -262 b 664 -308 680 -290 675 -301 b 638 -312 658 -310 650 -312 b 613 -309 631 -312 623 -310 b 477 -201 555 -303 502 -260 b 417 -2 460 -159 434 -72 b 416 5 417 1 416 5 b 416 5 416 5 416 5 b 411 -5 415 5 413 0 b 359 -97 397 -33 377 -70 b 353 -106 355 -102 353 -105 b 359 -112 353 -108 355 -109 b 409 -130 375 -123 390 -129 b 426 -134 420 -130 421 -131 b 431 -147 428 -137 431 -141 b 420 -162 431 -152 427 -159 b 382 -169 409 -166 396 -169 b 323 -155 363 -169 341 -165 l 317 -152 l 314 -155 b 62 -303 240 -240 148 -295 b 36 -305 55 -305 44 -305 b 23 -303 29 -305 24 -305 b -1 -273 6 -299 -1 -287 b 31 -240 -1 -256 10 -240 b 36 -240 32 -240 34 -240 b 42 -241 38 -241 39 -241 b 134 -204 63 -241 99 -226 b 367 288 265 -115 357 81 b 375 330 368 313 370 320 b 416 360 383 347 400 358 m 360 -359 b 379 -359 363 -359 371 -359 b 424 -360 396 -359 416 -359 b 646 -502 536 -373 624 -430 b 649 -527 649 -510 649 -519 b 530 -673 649 -578 604 -635 l 521 -677 l 529 -681 b 653 -811 592 -714 637 -762 b 660 -853 658 -827 660 -839 b 645 -911 660 -873 656 -892 b 426 -1021 608 -981 519 -1021 b 283 -989 377 -1021 328 -1011 b 235 -949 249 -972 239 -964 b 234 -936 234 -946 234 -941 b 234 -928 234 -934 234 -931 l 235 -925 l 234 -927 l 225 -934 b 87 -982 186 -966 138 -982 b 80 -982 85 -982 83 -982 b 55 -981 70 -981 58 -981 b 17 -943 32 -981 17 -964 b 54 -904 17 -921 35 -904 b 78 -914 62 -904 72 -909 l 83 -918 l 88 -918 b 190 -831 122 -918 166 -881 b 269 -506 242 -727 269 -612 b 268 -462 269 -492 269 -477 b 266 -449 266 -458 266 -452 b 265 -444 266 -445 266 -444 b 257 -446 264 -444 261 -445 b 132 -545 196 -470 152 -505 b 88 -573 122 -563 104 -573 b 39 -523 63 -573 39 -553 b 63 -476 39 -505 44 -494 b 360 -359 136 -408 235 -369 m 419 -424 b 393 -423 411 -423 406 -423 l 375 -423 l 377 -426 b 379 -439 377 -427 378 -434 b 383 -510 382 -463 383 -487 b 314 -811 383 -609 360 -710 b 266 -893 296 -850 285 -870 b 264 -898 265 -896 264 -898 l 264 -898 b 264 -898 264 -898 264 -898 b 268 -898 264 -898 266 -898 b 273 -898 270 -898 272 -898 b 300 -909 283 -898 291 -900 b 426 -957 340 -941 385 -957 b 476 -949 443 -957 460 -954 b 547 -853 522 -931 547 -893 b 485 -745 547 -816 526 -775 b 397 -707 460 -727 432 -714 b 366 -675 375 -703 366 -692 b 396 -642 366 -657 377 -645 b 530 -557 455 -637 511 -601 b 536 -527 534 -548 536 -537 b 419 -424 536 -480 490 -437 "},v30:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 276 1900 b 284 1901 279 1900 281 1901 b 306 1883 291 1901 298 1896 b 367 1686 347 1825 367 1757 b 343 1558 367 1643 359 1600 l 338 1549 l 343 1537 b 367 1411 359 1497 367 1454 b 343 1282 367 1367 359 1324 l 338 1272 l 343 1261 b 367 1135 359 1221 367 1178 b 343 1007 367 1090 359 1047 l 338 996 l 343 985 b 367 859 359 945 367 902 b 343 731 367 814 359 771 l 338 720 l 343 709 b 367 582 359 667 367 626 b 289 362 367 503 340 426 b 239 312 276 345 259 330 b 29 77 152 237 76 152 b -1 18 14 54 2 30 b -19 4 -4 11 -12 4 l -21 4 l -21 133 l -20 260 l -13 262 b 98 299 17 269 62 284 b 111 305 103 302 110 305 b 167 334 123 310 156 327 b 319 595 264 391 319 491 b 313 659 319 616 318 638 b 310 667 311 664 311 667 b 307 663 310 667 308 666 b 240 588 289 637 269 614 b 16 331 141 505 62 413 b -1 294 8 316 1 302 b -19 280 -4 287 -12 280 l -21 280 l -21 408 l -20 537 l -13 538 b 98 576 17 545 62 560 b 111 581 103 578 110 581 b 167 610 123 587 156 603 b 319 871 264 667 319 767 b 313 935 319 892 318 913 b 310 942 311 941 311 942 b 307 939 310 942 308 941 b 240 864 289 913 269 889 b 16 607 141 781 62 689 b -1 570 8 592 1 578 b -19 556 -4 563 -12 556 l -21 556 l -21 684 l -20 813 l -13 814 b 98 852 17 821 62 836 b 111 857 103 855 110 857 b 167 886 123 863 156 880 b 319 1147 264 943 319 1043 b 313 1211 319 1168 318 1189 b 310 1218 311 1217 311 1218 b 307 1215 310 1218 308 1217 b 240 1140 289 1188 269 1165 b 16 884 141 1057 62 966 b -1 846 8 868 1 855 b -19 832 -4 839 -12 832 l -21 832 l -21 960 l -20 1089 l -13 1090 b 98 1128 17 1097 62 1111 b 111 1134 103 1131 110 1134 b 167 1163 123 1139 156 1156 b 319 1424 264 1220 319 1320 b 313 1486 319 1444 318 1465 b 310 1494 311 1493 311 1494 b 307 1492 310 1494 308 1493 b 240 1417 289 1464 269 1442 b 16 1160 141 1333 62 1242 b -1 1121 8 1145 1 1131 b -19 1109 -4 1115 -12 1109 l -21 1109 l -21 1236 l -20 1365 l -13 1367 b 98 1404 17 1374 62 1388 b 111 1410 103 1407 110 1410 b 250 1508 172 1437 215 1467 b 319 1701 296 1564 319 1633 b 270 1859 319 1757 303 1814 b 262 1882 265 1868 262 1875 b 276 1900 262 1890 266 1896 "},v31:{x_min:0,x_max:386.5625,ha:394,o:"m 0 173 l 0 347 l 193 347 l 386 347 l 386 173 l 386 0 l 193 0 l 0 0 l 0 173 "},v33:{x_min:-423.3125,x_max:421.9375,ha:431,o:"m -10 276 b -2 277 -8 277 -5 277 b 17 265 5 277 13 273 b 19 163 19 260 19 260 l 19 68 l 39 45 b 277 -95 122 -34 200 -81 b 289 -97 281 -97 285 -97 b 378 0 332 -97 371 -54 b 378 11 378 4 378 6 b 302 83 378 55 345 83 b 242 66 283 83 262 77 b 208 56 231 59 219 56 b 148 120 175 56 148 81 b 200 186 148 151 164 172 b 261 198 220 194 240 198 b 420 45 341 198 411 137 b 421 22 421 37 421 29 b 257 -198 421 -86 347 -188 b 242 -198 251 -198 247 -198 b 20 -105 181 -198 95 -163 l 19 -104 l 19 -183 b 19 -216 19 -195 19 -206 b 12 -273 19 -272 17 -267 b -2 -278 8 -277 2 -278 b -21 -266 -10 -278 -19 -274 b -23 -165 -23 -263 -23 -262 l -23 -69 l -44 -47 b -250 86 -117 23 -183 66 b -295 94 -270 93 -284 94 b -315 91 -302 94 -308 94 b -381 5 -356 81 -381 43 b -355 -56 -381 -16 -372 -40 b -299 -81 -338 -73 -319 -81 b -246 -68 -283 -81 -265 -77 b -212 -58 -234 -61 -223 -58 b -168 -77 -196 -58 -179 -65 b -151 -122 -156 -90 -151 -105 b -179 -174 -151 -141 -160 -162 b -239 -195 -194 -184 -217 -192 b -257 -197 -245 -195 -250 -197 b -423 -5 -349 -197 -423 -113 b -423 0 -423 -4 -423 -1 b -277 194 -420 97 -362 173 b -247 197 -268 197 -258 197 b -24 104 -185 197 -100 162 l -23 102 l -23 181 b -21 265 -23 260 -23 260 b -10 276 -20 269 -14 274 "},v34:{x_min:0,x_max:622.03125,ha:635,o:"m 398 417 b 406 419 401 419 404 419 b 427 398 417 419 427 409 b 427 391 427 395 427 392 b 34 -274 424 385 38 -272 b 20 -280 29 -278 25 -280 b 0 -259 9 -280 0 -270 b 0 -252 0 -256 0 -254 b 393 413 2 -247 389 410 b 398 417 394 415 397 416 m 592 417 b 600 419 594 419 597 419 b 622 398 611 419 622 409 b 620 391 622 395 620 392 b 227 -274 617 385 231 -272 b 213 -280 223 -278 219 -280 b 193 -259 202 -280 193 -270 b 194 -252 193 -256 193 -254 b 586 413 196 -247 582 410 b 592 417 588 415 590 416 "},v36:{x_min:-1.359375,x_max:1064.390625,ha:1086,o:"m 296 692 b 314 694 302 694 307 694 b 386 685 337 694 366 689 b 548 498 480 660 548 580 b 548 481 548 492 548 487 b 455 395 541 426 499 395 b 370 462 420 395 383 417 b 362 496 364 477 362 488 b 377 514 362 509 367 514 b 393 501 386 514 390 510 b 432 474 397 484 413 474 b 470 487 445 474 458 478 b 491 530 484 496 491 510 b 490 544 491 534 491 539 b 333 660 479 606 411 657 l 323 662 l 315 646 b 269 524 285 591 269 556 b 321 431 269 492 287 466 b 349 395 338 413 343 408 b 363 342 359 378 363 362 b 359 312 363 333 362 322 b 285 158 348 266 318 206 b 281 152 283 155 281 152 b 281 152 281 152 281 152 b 287 154 283 152 284 152 b 318 155 298 154 308 155 b 461 98 371 155 419 136 l 464 97 l 483 112 b 503 129 494 120 503 127 b 504 130 503 129 504 129 b 503 138 504 131 503 134 b 500 180 500 152 500 166 b 553 326 500 238 518 288 b 604 366 560 331 592 358 b 649 381 617 376 632 381 b 696 362 665 381 681 374 b 724 302 714 347 724 324 b 695 238 724 278 714 255 b 660 210 691 234 662 212 b 579 148 658 209 582 151 b 579 148 579 148 579 148 b 596 106 579 144 589 119 b 622 77 604 88 609 83 b 657 69 632 72 645 69 b 748 112 688 69 721 84 b 755 123 754 117 755 120 b 755 127 755 124 755 126 b 751 165 752 137 751 151 b 758 219 751 183 754 202 b 894 387 774 290 820 347 b 896 390 896 388 896 388 b 891 398 896 391 895 392 b 622 560 827 477 730 535 b 600 580 605 564 600 569 b 617 596 600 591 607 596 b 628 595 622 596 624 596 b 1057 248 846 552 1020 412 b 1064 191 1061 229 1064 209 b 922 0 1064 94 1005 9 b 902 -1 916 -1 909 -1 b 774 76 847 -1 800 26 b 769 83 770 81 770 83 b 769 81 769 83 769 83 b 627 -1 733 29 677 -1 b 548 27 597 -1 570 8 b 515 88 537 37 525 61 l 513 95 l 510 93 l 453 45 b 390 0 396 0 396 0 b 390 0 390 0 390 0 b 374 15 381 0 377 4 b 268 105 359 69 314 105 b 250 104 262 105 257 105 l 243 102 l 234 90 b 155 1 201 49 159 2 b 147 -1 152 0 149 -1 b 130 15 138 -1 130 6 b 132 20 130 18 132 19 b 136 31 133 22 134 27 b 220 131 149 74 178 109 b 231 137 225 134 230 136 b 302 278 280 202 302 244 b 265 335 302 299 295 309 b 209 442 234 363 213 402 b 209 455 209 446 209 451 b 279 648 209 502 232 564 l 285 659 l 283 659 b 176 627 238 653 210 645 b 57 477 111 594 66 538 b 55 459 55 471 55 464 b 72 409 55 437 61 415 b 93 403 78 405 87 403 b 152 467 123 403 151 431 b 168 488 153 483 157 488 b 185 462 181 488 185 483 l 185 460 b 137 344 183 409 168 369 b 78 322 119 328 98 322 b 13 360 50 322 25 335 b -1 426 4 380 -1 402 b 89 610 -1 488 32 559 b 296 692 147 659 210 685 m 926 348 b 921 353 924 351 922 353 b 914 348 920 353 918 351 b 823 167 857 306 823 237 b 828 124 823 154 826 138 b 890 31 837 79 862 40 b 896 31 892 31 894 31 b 956 104 916 31 940 59 b 970 191 965 129 970 159 b 966 241 970 208 969 224 b 926 348 959 277 945 313 m 627 326 b 619 326 624 326 622 326 b 598 316 611 326 604 323 b 568 215 579 288 568 255 b 568 208 568 213 568 210 b 571 183 570 195 570 184 l 571 183 b 594 201 571 183 582 191 l 634 231 b 660 259 653 247 656 248 b 664 278 662 266 664 272 b 627 326 664 299 649 320 "},v38:{x_min:-1.359375,x_max:651.96875,ha:665,o:"m 389 644 b 405 645 394 645 400 645 b 504 566 450 645 492 613 b 507 541 506 557 507 549 b 480 471 507 514 498 489 l 477 467 l 483 470 b 609 591 539 485 586 531 b 613 601 611 595 613 599 b 631 609 619 607 624 609 b 651 588 641 609 651 602 b 200 -946 651 584 204 -941 b 182 -957 197 -953 190 -957 b 163 -945 174 -957 166 -953 b 161 -939 161 -942 161 -942 b 217 -743 161 -931 170 -904 b 272 -555 247 -639 272 -555 b 272 -555 272 -555 272 -555 b 264 -560 272 -555 268 -557 b 140 -603 227 -589 182 -603 b 36 -567 102 -603 65 -592 b -1 -487 12 -548 -1 -517 b 17 -427 -1 -466 5 -445 b 103 -380 38 -395 70 -380 b 191 -433 137 -380 172 -398 b 205 -484 201 -448 205 -466 b 178 -553 205 -509 196 -535 l 175 -557 l 182 -555 b 307 -435 236 -539 284 -494 b 372 -213 308 -430 372 -215 b 372 -213 372 -213 372 -213 b 364 -219 372 -213 368 -216 b 240 -262 328 -247 283 -262 b 137 -226 202 -262 166 -249 b 99 -145 112 -206 99 -176 b 118 -84 99 -124 106 -104 b 204 -38 138 -54 171 -38 b 292 -91 238 -38 273 -56 b 306 -141 302 -106 306 -124 b 279 -212 306 -167 296 -194 l 276 -215 l 281 -213 b 408 -93 336 -198 385 -151 b 473 129 409 -88 473 127 b 473 129 473 129 473 129 b 465 122 473 129 469 126 b 341 80 428 94 383 80 b 236 115 303 80 266 91 b 200 195 213 136 200 165 b 217 256 200 217 206 238 b 304 303 239 287 272 303 b 393 249 338 303 374 285 b 406 199 402 234 406 217 b 379 129 406 173 397 148 l 377 126 l 382 127 b 509 248 436 142 485 190 b 574 470 510 254 574 469 b 574 470 574 470 574 470 b 566 464 574 470 570 467 b 442 421 529 435 484 421 b 337 458 404 421 367 433 b 300 537 313 478 300 508 b 389 644 300 585 334 635 "},v39:{x_min:-171.5,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 553 20 616 20 614 b 20 491 20 503 20 491 l 20 491 b 153 535 47 501 149 535 b 174 514 167 535 174 524 b 164 496 174 508 171 501 b 92 470 164 495 132 484 l 20 445 l 20 390 b 20 363 20 378 20 370 b 20 333 20 340 20 333 l 20 333 b 153 377 47 344 149 377 b 174 356 167 377 174 367 b 164 338 174 349 171 342 b 92 312 164 338 132 326 l 20 288 l 20 219 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b -1 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 b -21 30 -21 -212 -21 -212 b -21 273 -21 163 -21 273 b -84 252 -21 273 -50 263 b -152 230 -133 234 -145 230 b -157 231 -155 230 -156 231 b -171 252 -166 234 -171 244 b -160 270 -171 259 -167 266 b -27 316 -159 270 -93 294 l -21 319 l -21 374 b -21 431 -21 406 -21 431 b -84 409 -21 431 -50 421 b -152 388 -133 392 -145 388 b -157 390 -155 388 -156 388 b -171 409 -166 392 -171 401 b -160 428 -171 417 -167 424 b -27 474 -159 428 -93 451 l -21 476 l -21 546 b -20 620 -21 614 -21 616 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},v3b:{x_min:0,x_max:484.5625,ha:494,o:"m 228 245 b 239 247 234 247 239 247 b 243 247 240 247 242 247 b 303 238 257 247 287 242 b 484 -2 417 208 484 104 b 412 -177 484 -65 461 -127 b 243 -248 363 -226 303 -248 b 6 -63 138 -248 36 -180 b 0 -1 1 -41 0 -20 b 228 245 0 127 98 240 m 255 181 b 240 183 247 183 245 183 b 232 181 238 183 235 183 b 142 152 200 180 168 170 l 138 149 l 190 97 l 242 44 l 294 97 l 345 149 l 340 152 b 255 181 315 169 284 180 m 147 -54 l 197 -1 l 147 51 l 95 104 l 91 99 b 62 -1 72 70 62 34 b 66 -43 62 -15 63 -29 b 91 -101 72 -63 80 -84 l 95 -106 l 147 -54 m 393 99 b 389 104 390 102 389 104 b 337 51 389 104 366 80 l 285 -1 l 337 -54 l 389 -106 l 393 -101 b 421 -1 412 -72 421 -36 b 393 99 421 34 412 69 m 294 -98 b 242 -45 265 -69 242 -45 b 190 -98 242 -45 219 -69 l 138 -151 l 142 -154 b 242 -184 172 -174 206 -184 b 340 -154 276 -184 311 -174 l 345 -151 l 294 -98 "},v3c:{x_min:0,x_max:450.53125,ha:460,o:"m 189 302 b 204 303 193 302 198 303 b 303 224 250 303 292 270 b 306 199 304 216 306 208 b 279 129 306 173 296 147 l 276 126 l 281 127 b 408 249 337 142 385 190 b 412 259 409 254 412 258 b 430 267 417 265 423 267 b 450 247 441 267 450 259 b 200 -605 450 242 204 -599 b 182 -616 197 -612 190 -616 b 163 -602 174 -616 166 -610 b 161 -598 161 -601 161 -601 b 217 -402 161 -589 170 -562 b 272 -213 247 -298 272 -213 b 272 -213 272 -213 272 -213 b 264 -219 272 -213 268 -216 b 140 -262 227 -247 182 -262 b 36 -226 102 -262 65 -249 b 0 -145 12 -206 0 -176 b 17 -84 0 -124 5 -104 b 103 -38 38 -54 70 -38 b 191 -91 137 -38 172 -56 b 205 -141 201 -106 205 -124 b 178 -212 205 -167 196 -194 l 175 -215 l 182 -213 b 307 -93 236 -198 284 -151 b 372 129 308 -88 372 127 b 372 129 372 129 372 129 b 364 122 372 129 368 126 b 240 80 328 94 283 80 b 137 115 202 80 166 91 b 99 194 111 136 99 165 b 189 302 99 244 133 292 "},v3e:{x_min:0,x_max:406.96875,ha:415,o:"m 21 183 b 28 183 24 183 25 183 b 42 181 34 183 39 183 b 127 108 47 179 47 179 b 202 41 168 72 202 41 b 279 108 204 41 238 72 b 357 177 321 145 356 176 b 375 183 363 181 370 183 b 406 151 392 183 406 169 b 404 137 406 147 405 141 b 322 62 401 131 398 129 b 251 0 284 27 251 0 b 322 -63 251 -1 284 -29 b 404 -138 398 -130 401 -133 b 406 -152 405 -142 406 -148 b 375 -184 406 -170 392 -184 b 357 -179 370 -184 363 -183 b 279 -109 356 -177 321 -147 b 202 -43 238 -73 204 -43 b 127 -109 202 -43 168 -73 b 49 -179 85 -147 50 -177 b 31 -184 43 -183 36 -184 b 0 -152 13 -184 0 -170 b 2 -138 0 -148 0 -142 b 83 -63 5 -133 8 -130 b 155 0 122 -29 155 -1 b 83 62 155 0 122 27 b 8 129 43 97 10 127 b 0 151 2 136 0 144 b 21 183 0 165 8 177 "},v3f:{x_min:-24.5,x_max:317.140625,ha:324,o:"m -24 -147 l -24 -5 l -20 -5 b -1 -19 -12 -5 -4 -11 b 58 -123 6 -43 31 -86 b 196 -278 93 -173 134 -219 b 317 -570 274 -356 317 -460 b 294 -713 317 -617 308 -666 l 289 -724 l 294 -735 b 317 -873 308 -780 317 -827 b 235 -1132 317 -963 288 -1054 b 209 -1165 228 -1140 224 -1146 b 189 -1177 204 -1172 196 -1177 b 171 -1164 182 -1177 175 -1172 b 168 -1154 170 -1161 168 -1159 b 181 -1132 168 -1149 172 -1142 b 269 -891 238 -1064 269 -975 b 269 -881 269 -886 269 -884 b 262 -814 269 -857 265 -827 b 258 -800 261 -811 259 -806 b 142 -628 240 -731 198 -667 b -8 -589 112 -606 47 -589 b -20 -589 -13 -589 -19 -589 l -24 -589 l -24 -449 l -24 -308 l -20 -308 b -1 -322 -12 -308 -4 -313 b 58 -424 6 -345 31 -388 b 194 -580 93 -476 136 -523 b 259 -660 221 -606 245 -635 b 261 -663 259 -662 261 -663 b 264 -656 262 -663 262 -660 b 269 -587 268 -632 269 -610 b 264 -521 269 -566 268 -544 b 262 -512 264 -517 262 -513 b 258 -498 261 -509 259 -503 b 142 -326 240 -428 198 -365 b -8 -287 112 -303 47 -288 b -20 -287 -13 -287 -19 -287 l -24 -287 l -24 -147 "},v40:{x_min:-1.359375,x_max:436.921875,ha:446,o:"m 213 205 b 217 205 215 205 216 205 b 234 194 224 205 234 199 b 236 187 234 194 235 190 l 245 167 l 261 129 l 270 106 b 355 -61 294 54 329 -13 b 420 -163 381 -105 402 -138 b 436 -188 435 -184 436 -184 b 436 -191 436 -190 436 -190 b 421 -206 436 -201 431 -206 l 421 -206 l 416 -206 l 405 -201 b 217 -158 347 -172 283 -158 b 31 -201 153 -158 88 -172 l 20 -206 l 14 -206 l 14 -206 b 0 -191 5 -206 0 -201 b -1 -188 0 -190 -1 -190 b 14 -163 -1 -186 0 -184 b 95 -34 36 -136 72 -77 b 166 106 119 8 148 68 l 175 129 l 183 148 l 200 188 b 213 205 205 199 208 202 "},v41:{x_min:-1.359375,x_max:556.6875,ha:568,o:"m 294 322 b 318 323 299 322 308 323 b 360 320 334 323 352 322 b 526 217 430 310 490 273 b 543 166 537 202 543 184 b 447 70 543 117 503 70 b 445 70 447 70 446 70 b 359 159 394 72 359 113 b 368 201 359 173 362 187 b 442 245 382 229 412 245 b 455 244 446 245 451 245 b 460 244 458 244 460 244 b 460 244 460 244 460 244 b 454 248 460 244 458 245 b 325 291 417 276 372 291 b 285 287 313 291 299 290 b 144 -2 183 269 144 190 b 281 -290 144 -208 179 -280 b 304 -291 289 -291 298 -291 b 524 -105 412 -291 506 -212 b 541 -84 526 -88 530 -84 b 556 -101 551 -84 556 -90 b 549 -138 556 -111 553 -122 b 334 -322 521 -237 435 -310 b 302 -324 323 -323 313 -324 b 13 -101 172 -324 54 -234 b -1 -1 4 -68 -1 -34 b 294 322 -1 161 121 303 "},v42:{x_min:-348.4375,x_max:24.5,ha:25,o:"m -330 155 b -322 156 -329 156 -326 156 b -315 156 -319 156 -317 156 b -298 147 -311 155 -308 154 b -19 30 -224 98 -122 55 l 2 26 b 24 -1 17 22 24 13 b 2 -27 24 -15 17 -23 l -19 -31 b -298 -148 -122 -56 -224 -99 b -322 -158 -313 -158 -315 -158 b -348 -131 -338 -158 -348 -145 b -344 -117 -348 -127 -347 -122 b -328 -104 -341 -112 -338 -111 b -127 -8 -269 -65 -202 -33 b -106 0 -115 -4 -106 -1 b -127 6 -106 0 -115 2 b -328 102 -202 31 -269 63 b -344 116 -338 109 -341 111 b -348 130 -347 120 -348 124 b -330 155 -348 141 -341 152 "},v43:{x_min:-442.359375,x_max:441,ha:450,o:"m -31 487 b -1 488 -21 488 -10 488 b 434 104 216 488 397 330 b 441 27 438 79 441 47 b 439 12 441 20 439 15 b 419 0 435 4 427 0 b 404 5 413 0 408 1 b 398 30 400 11 398 13 b 0 351 390 213 213 351 b -59 348 -20 351 -39 349 b -400 30 -251 324 -393 191 b -405 5 -400 13 -401 11 b -420 0 -409 1 -415 0 b -441 12 -428 0 -436 4 b -442 27 -441 15 -442 20 b -435 104 -442 47 -439 79 b -31 487 -401 316 -235 474 m -13 131 b -1 133 -9 133 -5 133 b 51 105 19 133 39 123 b 61 70 58 95 61 83 b 51 34 61 58 58 45 b -1 6 39 16 19 6 b -46 27 -17 6 -34 13 b -62 69 -57 38 -62 54 b -13 131 -62 98 -44 124 "},v44:{x_min:-21.78125,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 383 20 616 20 616 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b 0 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 201 l -21 616 l -20 620 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},v45:{x_min:-402.890625,x_max:401.53125,ha:410,o:"m -10 273 b -4 274 -9 273 -6 274 b 16 262 4 274 12 269 b 17 158 17 259 17 259 l 17 56 l 62 112 b 117 174 110 172 110 172 b 122 174 118 174 119 174 b 132 173 125 174 129 173 b 295 11 134 172 171 134 l 307 -1 l 336 34 b 374 76 366 72 368 74 b 381 77 375 77 378 77 b 401 56 392 77 401 68 b 400 48 401 54 401 51 b 223 -172 397 41 230 -166 b 210 -176 220 -174 215 -176 b 201 -174 206 -176 204 -176 b 112 -87 198 -173 178 -152 b 27 0 65 -38 27 0 b 21 -6 27 0 24 -2 l 17 -12 l 17 -147 b 17 -210 17 -173 17 -194 b 10 -292 17 -297 16 -287 b -2 -299 6 -297 2 -299 b -21 -287 -10 -299 -19 -295 b -24 -174 -23 -284 -23 -284 l -24 -63 l -66 -117 b -121 -176 -110 -170 -114 -176 b -125 -176 -122 -176 -123 -176 b -296 -12 -134 -174 -125 -184 l -308 0 l -337 -34 b -375 -77 -367 -73 -370 -76 b -382 -79 -377 -79 -379 -79 b -402 -58 -393 -79 -402 -69 b -401 -49 -402 -55 -402 -52 b -224 170 -398 -43 -231 165 b -212 174 -221 173 -216 174 b -202 173 -208 174 -205 174 b -39 11 -200 172 -151 122 l -28 -1 l -25 1 l -24 4 l -24 130 b -23 260 -24 256 -24 258 b -10 273 -20 266 -16 270 "},v46:{x_min:0,x_max:627.46875,ha:640,o:"m 306 190 b 314 191 308 191 311 191 b 326 184 318 191 322 190 l 336 173 b 510 52 377 127 442 80 b 515 49 513 51 515 49 b 611 16 537 40 579 24 b 627 0 624 13 627 9 b 607 -18 627 -11 624 -13 b 330 -181 490 -49 389 -109 b 314 -192 323 -190 319 -192 b 306 -191 311 -192 308 -192 b 294 -177 302 -188 302 -188 b 257 -140 287 -170 265 -148 b 19 -18 193 -84 114 -44 b 0 0 2 -13 0 -11 b 16 16 0 9 2 13 b 110 49 47 24 89 40 b 117 52 111 49 114 51 b 145 65 126 56 130 58 b 281 163 200 93 245 124 b 300 186 288 170 291 174 b 306 190 300 187 303 188 m 317 137 b 313 142 315 141 314 142 b 308 137 313 142 311 141 b 161 4 276 84 220 33 b 155 0 159 1 155 0 b 163 -4 155 0 159 -2 b 308 -138 220 -34 276 -84 b 313 -142 311 -141 313 -142 b 317 -138 314 -142 315 -141 b 464 -4 351 -84 406 -34 b 470 0 468 -2 470 0 b 464 4 470 0 468 1 b 317 137 406 33 351 84 "},v47:{x_min:-24.5,x_max:315.78125,ha:322,o:"m -24 -145 l -24 -5 l -20 -5 b 1 -26 -10 -5 -6 -9 b 175 -241 31 -86 96 -166 b 314 -548 259 -323 304 -420 b 315 -589 315 -555 315 -571 b 314 -630 315 -606 315 -623 b 298 -730 311 -664 306 -699 l 295 -742 l 296 -748 b 314 -850 304 -778 311 -813 b 315 -892 315 -857 315 -874 b 314 -932 315 -909 315 -925 b 298 -1032 311 -967 306 -1002 l 295 -1045 l 296 -1050 b 314 -1153 304 -1081 311 -1115 b 315 -1193 315 -1160 315 -1177 b 314 -1235 315 -1211 315 -1228 b 217 -1526 306 -1338 270 -1444 b 201 -1533 213 -1532 208 -1533 b 182 -1522 193 -1533 185 -1529 b 179 -1514 181 -1518 179 -1517 b 189 -1489 179 -1508 182 -1501 b 266 -1217 240 -1403 266 -1308 b 262 -1156 266 -1196 265 -1177 b 110 -907 247 -1043 190 -950 b 0 -889 87 -895 50 -889 l -1 -889 l -24 -889 l -24 -749 l -24 -610 l -20 -610 b 1 -631 -10 -610 -6 -614 b 175 -846 31 -691 96 -771 b 259 -956 213 -884 236 -914 b 265 -966 262 -961 264 -966 b 265 -966 265 -966 265 -966 b 265 -953 265 -964 265 -959 b 266 -920 266 -943 266 -932 b 262 -853 266 -898 265 -873 b 110 -605 247 -741 190 -648 b 0 -587 87 -592 50 -587 l -1 -587 l -24 -587 l -24 -448 l -24 -308 l -20 -308 b 1 -328 -10 -308 -6 -312 b 175 -544 31 -388 96 -469 b 259 -655 213 -581 236 -612 b 265 -663 262 -659 264 -663 b 265 -663 265 -663 265 -663 b 265 -650 265 -663 265 -657 b 266 -617 266 -641 266 -630 b 262 -551 266 -595 265 -570 b 110 -303 247 -438 190 -345 b 0 -284 87 -290 50 -284 l -1 -284 l -24 -284 l -24 -145 "},v49:{x_min:0,x_max:630.203125,ha:643,o:"m 308 204 b 314 205 310 205 313 205 b 326 201 319 205 323 204 b 355 154 328 199 338 180 b 401 83 362 142 392 95 l 409 72 b 431 41 412 66 424 49 b 619 -174 498 -51 570 -134 b 630 -192 626 -180 630 -186 b 626 -202 630 -195 628 -199 b 616 -206 623 -205 620 -206 b 552 -188 608 -206 592 -202 b 310 -155 488 -169 392 -155 b 268 -156 295 -155 281 -155 b 77 -188 197 -161 126 -173 b 13 -206 35 -202 20 -206 b 9 -206 12 -206 10 -206 b 0 -191 2 -202 0 -197 b 8 -176 0 -186 2 -180 b 204 49 58 -136 138 -43 l 220 72 l 227 83 b 295 188 245 108 281 166 b 308 204 299 197 304 202 m 315 147 b 314 147 315 147 314 147 b 314 147 314 147 314 147 b 306 129 314 145 310 138 l 296 105 b 281 72 292 97 284 77 l 274 56 b 181 -123 247 -4 212 -72 l 174 -134 l 176 -133 b 314 -123 215 -127 272 -123 b 451 -133 356 -123 413 -127 l 454 -134 l 449 -123 b 353 56 417 -72 381 -4 l 347 72 b 332 105 344 77 336 97 l 322 129 b 315 147 318 138 315 145 "},v4a:{x_min:70.78125,x_max:378.390625,ha:315,o:"m 246 373 b 254 373 249 373 251 373 b 372 324 303 373 360 351 b 378 302 377 317 378 309 b 338 251 378 278 362 255 b 328 249 334 249 332 249 b 283 294 303 249 283 270 b 288 315 283 301 284 308 b 289 319 289 317 289 319 b 289 319 289 319 289 319 b 283 320 289 320 287 320 b 270 322 279 322 274 322 b 206 288 242 322 215 308 b 206 283 206 287 206 285 b 257 223 206 267 230 238 b 284 206 272 213 277 210 b 351 90 328 173 351 130 b 340 47 351 74 348 59 b 205 -30 314 -2 264 -30 b 182 -29 198 -30 190 -30 b 84 15 147 -24 103 -5 b 70 48 74 24 70 36 b 108 99 70 70 85 94 b 121 102 112 101 117 102 b 167 56 147 102 167 80 b 159 31 167 48 164 40 l 156 26 l 157 26 b 190 20 167 22 178 20 b 220 26 201 20 212 22 b 258 65 243 34 258 51 b 257 70 258 66 258 69 b 204 126 249 94 234 109 b 114 258 148 158 114 209 b 125 302 114 273 118 288 b 246 373 147 342 193 370 "},v4b:{x_min:0,x_max:503.609375,ha:514,o:"m 274 430 b 277 430 276 430 277 430 b 310 394 296 430 310 415 b 308 383 310 391 308 387 b 306 367 307 381 307 374 b 236 120 298 305 272 210 b 40 -273 189 -5 125 -134 b 20 -287 35 -283 27 -287 b 5 -281 14 -287 9 -285 b 0 -267 1 -277 0 -273 b 9 -242 0 -262 2 -255 b 246 395 137 -12 232 242 b 274 430 249 416 257 427 m 468 430 b 472 430 469 430 470 430 b 503 394 490 430 503 415 b 502 383 503 391 503 387 b 499 367 502 381 500 374 b 431 120 491 305 465 210 b 234 -273 382 -5 318 -134 b 213 -287 228 -283 220 -287 b 198 -281 208 -287 202 -285 b 193 -267 194 -277 193 -273 b 202 -242 193 -262 196 -255 b 439 395 330 -12 426 242 b 468 430 442 416 451 427 "},v4d:{x_min:-311.6875,x_max:310.328125,ha:317,o:"m -9 388 b -2 390 -8 390 -5 390 b 5 388 1 390 4 390 b 19 378 10 387 16 383 b 23 333 23 371 23 371 b 24 298 23 299 24 298 b 81 276 34 298 65 285 b 213 91 145 240 190 177 b 224 24 217 76 224 36 b 257 24 224 24 235 24 b 299 19 292 24 292 24 b 310 -1 306 15 310 6 b 299 -23 310 -11 306 -19 b 257 -27 292 -27 292 -27 b 224 -29 235 -27 224 -29 b 213 -95 224 -40 217 -80 b 81 -280 190 -181 145 -244 b 24 -301 65 -290 34 -301 b 23 -335 24 -301 23 -303 l 23 -340 b 17 -381 23 -374 23 -374 b -1 -391 13 -388 5 -391 b -21 -381 -9 -391 -17 -388 b -27 -340 -27 -374 -27 -374 l -27 -335 b -28 -301 -27 -303 -27 -301 b -85 -280 -38 -301 -69 -290 b -217 -95 -149 -244 -194 -181 b -228 -29 -221 -80 -228 -40 b -259 -27 -228 -29 -238 -27 b -300 -23 -294 -27 -294 -27 b -311 -2 -307 -19 -311 -11 b -294 23 -311 8 -304 19 b -259 24 -291 23 -284 24 b -228 24 -239 24 -228 24 b -217 91 -228 36 -221 76 b -85 276 -194 177 -149 240 b -28 298 -69 285 -38 298 b -27 333 -27 298 -27 299 b -27 371 -27 362 -27 369 b -9 388 -24 378 -17 385 m -27 136 b -28 247 -27 197 -28 247 b -61 216 -31 247 -53 226 b -123 33 -95 172 -121 98 l -125 24 l -76 24 l -27 24 l -27 136 m 29 242 b 24 247 27 245 24 247 b 23 136 24 247 23 197 l 23 24 l 72 24 l 121 24 l 119 33 b 29 242 115 116 77 206 m -27 -140 l -27 -27 l -76 -27 l -125 -27 l -123 -36 b -61 -220 -121 -102 -95 -176 b -28 -251 -53 -230 -31 -251 b -27 -140 -28 -251 -27 -201 m 119 -36 l 121 -27 l 72 -27 l 23 -27 l 23 -140 b 24 -251 23 -201 24 -251 b 57 -220 27 -251 49 -230 b 119 -36 91 -176 117 -102 "},v4e:{x_min:0,x_max:239.5625,ha:244,o:"m 10 460 b 20 462 13 462 14 462 b 39 449 28 462 35 458 l 40 446 l 40 326 b 40 205 40 259 40 205 b 127 227 40 205 80 215 b 220 249 196 244 213 249 b 227 247 224 249 225 248 b 238 237 231 245 235 241 l 239 233 l 239 -106 l 239 -448 l 238 -451 b 219 -463 234 -459 225 -463 b 198 -451 210 -463 202 -459 l 197 -448 l 197 -324 b 197 -201 197 -248 197 -201 b 110 -223 196 -201 157 -210 b 17 -245 42 -240 24 -245 b 10 -242 13 -245 13 -244 b 0 -233 6 -241 2 -237 l 0 -230 l 0 108 l 0 446 l 0 449 b 10 460 2 453 6 458 m 197 22 b 197 70 197 41 197 58 b 196 116 197 113 197 116 l 196 116 b 118 97 196 116 160 106 l 40 77 l 40 -18 b 40 -112 40 -69 40 -112 l 119 -93 l 197 -73 l 197 22 "},v51:{x_min:-1.359375,x_max:455.96875,ha:465,o:"m 352 541 b 357 542 353 542 355 542 b 377 530 364 542 372 537 l 378 526 l 378 394 l 379 262 l 404 266 b 436 270 420 269 430 270 b 450 265 443 270 446 269 b 455 220 455 259 455 260 l 455 208 l 455 161 l 454 156 b 411 140 449 147 447 147 b 378 133 393 137 379 134 b 378 68 378 133 378 106 b 378 22 378 54 378 38 l 379 -87 l 404 -83 b 436 -79 420 -80 430 -79 b 450 -84 443 -79 446 -80 b 455 -129 455 -90 455 -88 l 455 -141 l 455 -188 l 454 -192 b 413 -209 449 -202 447 -202 b 382 -215 398 -212 383 -215 l 378 -215 l 378 -345 l 378 -380 b 375 -485 378 -484 378 -480 b 357 -494 371 -491 364 -494 b 340 -485 351 -494 344 -491 b 336 -383 337 -480 336 -484 l 336 -349 l 336 -223 l 334 -223 b 291 -231 334 -223 314 -227 l 247 -240 l 247 -371 l 246 -503 l 245 -506 b 225 -519 242 -514 234 -519 b 206 -506 219 -519 210 -514 l 205 -503 l 205 -376 l 205 -248 l 160 -256 l 115 -265 l 115 -396 l 115 -527 l 114 -531 b 95 -544 110 -539 102 -544 b 76 -531 87 -544 78 -539 l 73 -527 l 73 -399 b 73 -273 73 -330 73 -273 b 49 -277 73 -273 61 -274 b 17 -281 32 -280 24 -281 b 4 -276 10 -281 8 -280 b -1 -234 0 -269 -1 -272 b 0 -219 -1 -229 0 -224 l 0 -170 l 1 -167 b 10 -158 2 -163 6 -159 b 49 -149 13 -156 16 -155 l 73 -145 l 73 -34 b 73 76 73 26 73 76 b 49 72 73 76 61 74 b 17 68 32 69 24 68 b 4 73 10 68 8 69 b -1 115 0 80 -1 77 b 0 130 -1 120 0 124 l 0 179 l 1 181 b 10 191 2 186 6 190 b 49 199 13 192 16 194 l 73 204 l 73 338 b 73 374 73 352 73 365 b 77 483 73 484 73 477 b 95 492 81 489 88 492 b 111 483 100 492 107 489 b 115 378 115 477 115 483 l 115 342 b 117 212 115 223 115 212 b 204 229 117 212 200 227 l 205 229 l 205 365 l 205 502 l 206 505 b 225 517 210 513 219 517 b 245 505 234 517 242 513 l 246 502 l 247 369 l 247 237 l 249 237 b 336 254 253 238 336 254 b 337 390 336 254 337 302 l 337 526 l 338 530 b 352 541 341 535 347 539 m 336 15 b 336 126 336 102 336 126 l 336 126 b 291 117 336 126 315 122 l 247 109 l 247 -1 l 247 -112 l 249 -112 b 336 -95 253 -111 336 -95 b 336 15 336 -95 336 -56 m 205 -120 b 205 -55 205 -120 205 -93 b 205 -9 205 -41 205 -24 l 205 101 l 160 93 l 115 84 l 115 -26 b 115 -83 115 -49 115 -69 b 117 -137 115 -133 115 -137 b 205 -120 118 -137 204 -120 "},v52:{x_min:-10.890625,x_max:298.078125,ha:294,o:"m 138 473 b 142 474 140 473 141 474 b 164 459 148 474 153 470 b 191 402 183 442 191 423 b 181 353 191 388 187 371 b 178 349 179 352 178 349 b 179 348 178 348 179 348 b 185 349 181 348 182 348 b 255 376 210 355 234 363 b 272 381 264 381 266 381 b 298 355 287 381 298 370 b 288 330 298 348 298 345 b 171 34 238 254 194 141 b 166 13 168 16 168 16 b 144 1 161 5 152 1 b 121 15 134 1 125 5 b 115 33 119 18 117 24 b 0 330 91 145 49 252 b -10 355 -9 345 -10 348 b 13 381 -10 371 0 381 b 31 376 19 381 25 380 b 132 345 61 358 103 345 l 136 345 l 137 355 b 145 378 138 359 142 370 b 152 415 149 394 152 405 b 137 452 152 427 148 438 b 133 464 134 458 133 460 b 138 473 133 467 134 470 "},v53:{x_min:0,x_max:902.421875,ha:921,o:"m 17 240 b 24 241 19 241 21 241 b 32 240 28 241 31 241 b 46 229 38 238 43 234 b 50 88 50 223 50 237 b 50 -1 50 63 50 34 b 50 -90 50 -36 50 -65 b 46 -231 50 -238 50 -224 b 25 -242 42 -238 34 -242 b 0 -224 14 -242 4 -235 b 0 2 0 -222 0 -108 b 0 223 0 112 0 220 b 17 240 2 230 9 237 m 110 240 b 118 241 111 241 114 241 b 126 240 121 241 123 241 b 142 223 133 237 140 230 b 144 123 144 220 144 205 b 144 29 144 45 144 29 b 144 29 144 29 144 29 b 393 183 166 106 264 167 b 450 186 412 184 431 186 b 756 29 600 186 732 120 b 756 29 756 29 756 29 b 758 123 758 29 758 45 b 760 227 758 226 758 223 b 784 241 766 237 774 241 b 804 229 792 241 800 237 b 809 88 808 223 809 237 l 809 -1 l 809 -90 b 804 -231 809 -238 808 -224 b 784 -242 800 -238 792 -242 b 762 -231 775 -242 766 -238 b 758 -124 756 -224 758 -231 b 756 -30 758 -47 758 -30 b 756 -30 756 -30 756 -30 b 509 -184 736 -108 637 -169 b 450 -187 488 -187 469 -187 b 144 -30 300 -187 168 -122 b 144 -30 144 -30 144 -30 b 144 -124 144 -30 144 -47 b 140 -231 144 -231 144 -224 b 118 -242 134 -238 126 -242 b 92 -224 107 -242 96 -235 b 92 2 92 -222 92 -108 b 92 223 92 112 92 220 b 110 240 95 230 102 237 m 432 161 b 413 162 426 162 420 162 b 313 41 351 162 313 109 b 347 -73 313 5 323 -34 b 487 -163 385 -133 439 -163 b 578 -97 526 -163 562 -142 b 588 -43 585 -80 588 -62 b 432 161 588 47 518 147 m 868 240 b 876 241 869 241 872 241 b 884 240 879 241 882 241 b 898 229 890 238 894 234 b 902 88 902 223 902 237 l 902 -1 l 902 -90 b 898 -231 902 -238 902 -224 b 876 -242 892 -238 884 -242 b 852 -224 865 -242 854 -235 b 850 2 850 -222 850 -108 b 852 223 850 112 850 220 b 868 240 853 230 860 237 "},v54:{x_min:-24.5,x_max:317.140625,ha:324,o:"m -24 -161 l -24 -5 l -20 -5 b 0 -24 -9 -5 -2 -12 b 171 -315 21 -124 84 -233 b 317 -660 268 -406 317 -531 b 187 -1014 317 -782 274 -909 b 161 -1034 172 -1034 171 -1034 b 141 -1013 149 -1034 141 -1025 b 152 -991 141 -1004 142 -1002 b 266 -682 228 -899 266 -788 b 174 -430 266 -588 236 -498 b -23 -317 136 -388 66 -348 b -24 -161 -23 -316 -24 -285 "},v55:{x_min:0,x_max:551.25,ha:563,o:"m 289 644 b 304 645 294 645 299 645 b 404 566 349 645 392 613 b 406 541 405 557 406 549 b 379 471 406 514 397 489 l 377 467 l 382 470 b 509 591 438 485 485 531 b 513 601 510 595 513 599 b 530 609 518 607 524 609 b 551 588 540 609 551 602 b 200 -605 551 584 204 -599 b 182 -616 197 -612 190 -616 b 163 -602 174 -616 166 -610 b 161 -598 161 -601 161 -601 b 217 -402 161 -589 170 -562 b 272 -213 247 -298 272 -213 b 272 -213 272 -213 272 -213 b 264 -219 272 -213 268 -216 b 140 -262 227 -247 182 -262 b 36 -226 102 -262 65 -249 b 0 -145 12 -206 0 -176 b 17 -84 0 -124 5 -104 b 103 -38 38 -54 70 -38 b 191 -91 137 -38 172 -56 b 205 -141 201 -106 205 -124 b 178 -212 205 -167 196 -194 l 175 -215 l 182 -213 b 307 -93 236 -198 284 -151 b 372 129 308 -88 372 127 b 372 129 372 129 372 129 b 364 122 372 129 368 126 b 240 80 328 94 283 80 b 137 115 202 80 166 91 b 99 195 112 136 99 165 b 118 256 99 217 106 238 b 204 303 138 287 171 303 b 292 249 238 303 273 285 b 306 199 302 234 306 217 b 279 129 306 173 296 148 l 276 126 l 281 127 b 408 248 336 142 385 190 b 473 470 409 254 473 469 b 473 470 473 470 473 470 b 465 464 473 470 469 467 b 341 421 428 435 383 421 b 236 458 303 421 266 433 b 200 537 212 478 200 508 b 289 644 200 585 234 635 "},v58:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 259 1553 b 265 1553 261 1553 264 1553 b 288 1540 272 1553 277 1550 b 367 1351 340 1493 367 1424 b 336 1221 367 1308 357 1263 l 332 1211 l 333 1208 b 367 1077 356 1170 367 1124 b 336 945 367 1032 357 986 l 332 935 l 333 932 b 367 800 356 893 367 848 b 336 669 367 756 357 710 l 332 659 l 333 656 b 367 523 356 617 367 571 b 345 412 367 485 360 446 b 231 273 322 356 284 310 b -1 19 121 195 27 93 b -17 4 -4 11 -10 5 l -21 4 l -21 134 l -21 265 l -17 265 b 133 291 20 265 96 278 b 318 537 245 328 318 433 b 307 603 318 559 315 582 b 303 614 304 612 304 614 b 298 609 302 614 300 613 b 231 549 281 589 258 567 b -1 295 121 471 27 369 b -17 280 -4 287 -10 281 l -21 280 l -21 410 l -21 541 l -17 541 b 133 567 20 541 96 555 b 318 813 245 605 318 709 b 307 880 318 835 315 859 b 303 891 304 888 304 891 b 298 885 302 891 300 888 b 231 825 281 866 258 843 b -1 571 121 748 27 645 b -17 556 -4 563 -10 557 l -21 556 l -21 687 l -21 817 l -17 817 b 133 843 20 817 96 830 b 318 1089 245 881 318 985 b 307 1156 318 1111 315 1134 b 303 1167 304 1164 304 1167 b 298 1161 302 1167 300 1164 b 231 1102 281 1140 258 1120 b -1 848 121 1024 27 921 b -17 832 -4 839 -10 834 l -21 832 l -21 963 l -21 1093 l -17 1093 b 114 1113 12 1093 78 1103 b 313 1314 215 1142 289 1218 b 318 1364 317 1331 318 1347 b 255 1511 318 1422 295 1478 b 243 1532 247 1519 243 1525 b 259 1553 243 1540 250 1550 "},v59:{x_min:0,x_max:464.140625,ha:474,o:"m 0 0 l 0 347 l 76 347 l 153 347 l 153 0 l 153 -348 l 76 -348 l 0 -348 l 0 0 m 308 -1 l 308 347 l 386 347 l 464 347 l 464 -1 l 464 -348 l 386 -348 l 308 -348 l 308 -1 "},v5a:{x_min:-171.5,x_max:170.140625,ha:174,o:"m -6 566 b 0 567 -5 567 -2 567 b 14 556 6 567 12 563 b 92 285 14 555 50 433 b 170 13 166 33 170 19 b 168 13 170 13 170 13 b 161 1 168 8 167 4 l 159 0 l 122 0 l 84 0 l 81 1 b 21 195 76 5 78 -5 b -32 381 -8 297 -32 381 b -87 197 -32 381 -57 298 b -141 8 -115 94 -140 9 b -155 0 -142 2 -149 0 b -171 15 -163 0 -171 5 b -14 556 -171 18 -24 528 b -6 566 -14 560 -10 564 "},v5b:{x_min:-441,x_max:439.640625,ha:449,o:"m -428 -2 b -421 0 -427 -1 -424 0 b -406 -6 -416 0 -409 -2 b -400 -31 -401 -12 -400 -15 b -1 -352 -392 -215 -215 -352 b 58 -349 19 -352 38 -351 b 398 -31 250 -326 392 -192 b 404 -6 398 -15 400 -12 b 419 -1 408 -2 413 -1 b 439 -13 427 -1 435 -5 b 439 -29 439 -16 439 -22 b 434 -105 439 -48 438 -80 b 0 -489 397 -333 213 -489 b -68 -484 -23 -489 -44 -488 b -441 -36 -280 -452 -436 -263 b -441 -30 -441 -34 -441 -31 b -428 -2 -441 -11 -439 -5 m -13 -9 b -1 -8 -9 -8 -5 -8 b 50 -36 19 -8 39 -19 b 61 -72 57 -47 61 -59 b 50 -106 61 -84 57 -97 b -1 -134 39 -124 19 -134 b -46 -115 -17 -134 -34 -129 b -62 -72 -57 -102 -62 -87 b -13 -9 -62 -44 -44 -16 "},v5c:{x_min:0,x_max:447.8125,ha:457,o:"m 0 -87 l 0 0 l 223 0 l 447 0 l 447 -87 l 447 -174 l 223 -174 l 0 -174 l 0 -87 "},v5d:{x_min:-1.359375,x_max:592.078125,ha:604,o:"m 280 692 b 295 694 283 692 289 694 b 310 692 300 694 307 692 b 357 630 340 684 357 657 b 336 580 357 612 351 594 b 311 538 321 566 311 549 b 352 492 311 512 330 492 b 366 495 357 492 362 492 b 397 553 390 503 397 517 b 415 603 397 576 402 591 b 460 623 427 617 443 623 b 509 599 479 623 498 614 b 522 559 518 587 522 573 b 494 506 522 538 513 519 b 451 495 481 498 473 496 b 415 488 432 495 426 494 b 394 449 404 483 394 464 b 394 448 394 448 394 448 l 394 440 l 397 433 b 428 409 404 420 413 413 b 438 408 431 408 435 408 b 479 431 450 408 462 415 b 528 455 495 448 510 455 b 548 452 534 455 541 453 b 592 391 577 442 592 416 b 549 331 592 365 577 340 b 528 327 541 328 534 327 b 479 351 510 327 495 335 b 438 374 464 367 450 374 b 417 369 431 374 424 373 b 394 333 402 360 394 348 b 400 312 394 326 396 319 b 451 287 408 294 420 288 b 513 258 484 285 499 278 b 522 223 519 247 522 234 b 461 159 522 190 496 159 b 449 161 457 159 453 159 b 397 229 416 167 397 191 b 366 288 397 265 390 278 b 352 290 362 290 357 290 b 315 262 336 290 321 280 b 311 245 313 256 311 251 b 334 204 311 233 318 220 b 355 170 348 190 351 184 b 357 152 356 166 357 159 b 355 136 357 147 356 140 b 295 88 345 104 321 88 b 232 152 264 88 232 112 b 255 204 232 174 238 186 b 279 244 273 222 279 231 l 279 245 b 238 290 279 270 259 290 b 224 288 234 290 228 290 b 193 229 200 278 193 265 b 141 161 193 191 174 167 b 129 159 137 159 133 159 b 68 223 93 159 68 190 b 77 258 68 234 70 247 b 138 287 91 278 106 285 b 185 302 166 287 175 291 b 196 333 193 312 196 323 b 174 369 196 347 187 360 b 152 374 166 373 159 374 b 111 351 140 374 126 367 b 62 327 95 335 80 327 b 51 328 58 327 54 327 b -1 391 16 334 -1 363 b 53 455 -1 420 17 449 b 62 455 57 455 59 455 b 111 431 80 455 95 448 b 152 408 127 415 140 408 b 161 409 155 408 159 408 b 193 433 176 413 186 420 l 196 440 l 196 448 b 196 451 196 449 196 449 b 190 471 196 459 194 463 b 137 495 182 489 167 495 l 134 495 l 134 495 b 68 560 95 495 68 521 b 129 623 68 596 95 623 b 144 621 134 623 138 623 b 193 553 175 614 193 589 b 224 495 193 517 200 503 b 238 492 228 492 234 492 b 279 538 259 492 279 512 b 254 580 279 549 269 566 b 232 630 239 594 232 612 b 280 692 232 657 250 684 m 307 456 b 295 458 303 458 299 458 b 230 391 258 458 230 426 b 236 360 230 381 231 371 b 295 324 249 337 272 324 b 353 360 318 324 341 337 b 360 391 357 370 360 381 b 307 456 360 421 340 451 "},v60:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m -367 173 b -362 174 -366 174 -364 174 b -351 173 -357 174 -353 173 b -262 86 -348 172 -328 151 b -176 0 -216 37 -176 0 b -107 84 -176 0 -145 37 b -31 174 -36 173 -38 172 b -25 174 -29 174 -28 174 b -16 173 -23 174 -19 173 b 72 86 -13 172 6 151 b 157 0 119 37 157 0 b 227 84 159 0 189 37 b 303 174 298 173 296 172 b 308 174 304 174 307 174 b 318 173 313 174 317 173 b 481 11 322 172 357 134 l 494 -1 l 522 34 b 560 76 553 72 555 74 b 567 77 563 77 564 77 b 589 56 579 77 589 68 b 586 48 589 54 588 51 b 411 -172 583 41 416 -166 b 397 -176 406 -174 401 -176 b 387 -174 393 -176 390 -176 b 299 -87 386 -173 366 -152 b 213 0 253 -38 213 0 b 144 -86 213 0 182 -38 b 68 -174 73 -174 74 -173 b 62 -176 66 -176 65 -176 b 53 -174 59 -176 55 -174 b -35 -87 50 -173 29 -152 b -121 0 -83 -38 -121 0 b -190 -86 -122 0 -152 -38 b -266 -174 -261 -174 -259 -173 b -272 -176 -268 -176 -270 -176 b -281 -174 -276 -176 -280 -174 b -371 -86 -284 -173 -304 -152 b -457 0 -417 -38 -457 0 l -457 0 b -477 -26 -457 0 -470 -16 b -548 -227 -524 -88 -548 -161 b -536 -303 -548 -254 -544 -280 b -533 -317 -534 -309 -533 -313 b -553 -338 -533 -330 -541 -338 b -577 -315 -566 -338 -571 -333 b -590 -227 -586 -287 -590 -258 b -518 -9 -590 -154 -564 -77 b -465 56 -509 2 -504 8 l -402 134 b -367 173 -375 169 -372 172 "},v62:{x_min:46.28125,x_max:669.671875,ha:563,o:"m 183 376 b 189 376 185 376 187 376 b 212 374 197 376 208 376 b 265 337 234 369 253 355 b 274 317 268 331 273 320 b 274 316 274 317 274 316 b 280 323 276 316 276 319 b 311 358 288 337 299 348 b 319 366 315 360 318 365 b 356 376 326 373 340 376 b 382 371 364 376 374 374 b 428 337 400 366 417 352 b 436 317 431 331 436 320 b 438 316 436 317 436 316 b 442 323 438 316 439 319 b 475 358 451 337 462 348 b 483 366 477 360 481 365 b 518 376 488 373 503 376 b 544 373 528 376 536 376 b 604 285 579 360 604 326 b 597 249 604 273 601 258 b 543 63 596 247 544 70 b 541 54 543 61 541 55 b 540 44 540 51 540 47 b 552 23 540 33 545 23 b 552 23 552 23 552 23 b 647 126 586 29 627 72 b 658 138 651 136 653 138 b 660 138 660 138 660 138 b 669 129 666 137 669 136 b 654 88 669 122 665 109 b 562 -12 631 43 602 9 l 549 -19 b 521 -27 540 -24 530 -27 b 447 30 490 -27 458 -4 b 443 58 445 38 443 48 b 450 93 443 72 446 84 b 504 278 453 97 504 272 b 507 288 506 283 506 287 b 509 298 507 292 509 295 b 491 326 509 310 502 320 b 487 327 490 327 488 327 b 479 324 484 327 483 326 b 441 270 462 316 443 288 b 435 249 441 265 436 254 b 398 127 434 248 419 195 b 362 4 379 61 362 5 b 328 -1 359 -1 362 -1 b 314 -1 323 -1 319 -1 b 302 -1 310 -1 306 -1 b 266 4 266 -1 269 -1 b 265 6 265 5 265 5 b 303 144 265 13 272 34 b 343 278 325 216 343 276 b 344 288 343 281 344 285 b 345 298 345 291 345 295 b 330 326 345 310 340 320 b 323 327 328 327 325 327 b 317 324 322 327 321 326 b 279 270 300 316 281 288 b 273 249 279 265 274 254 b 236 127 272 248 255 195 b 200 4 216 61 200 5 b 164 -1 197 -1 198 -1 b 151 -1 161 -1 156 -1 b 140 -1 147 -1 142 -1 b 103 4 104 -1 106 -1 b 103 6 103 5 103 5 b 141 144 103 13 108 34 b 181 278 161 216 179 276 b 182 288 181 281 181 285 b 183 298 182 291 183 295 b 168 324 183 310 178 320 b 160 327 166 326 163 327 b 141 320 156 327 151 324 b 69 230 112 305 85 272 b 57 215 65 217 62 215 b 55 215 57 215 55 215 b 46 224 49 215 46 217 b 59 260 46 231 50 242 b 151 363 81 306 112 341 b 161 369 155 365 160 367 b 183 376 166 371 174 374 "},v68:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -533 324 b -525 327 -530 326 -528 327 b -504 305 -514 327 -504 317 b -504 305 -504 305 -504 305 b -513 284 -504 299 -504 299 b -556 112 -541 226 -556 167 b -545 33 -556 84 -552 58 b -524 -20 -541 15 -532 -9 l -522 -23 l -491 15 l -413 111 b -355 174 -367 169 -363 174 b -351 174 -353 174 -352 174 b -254 86 -343 174 -348 179 b -168 -1 -208 37 -168 -1 b -100 84 -168 -1 -137 37 b -23 173 -28 173 -29 172 b -19 174 -21 174 -20 174 b -8 173 -14 174 -10 173 b 155 11 -5 172 43 123 l 166 -1 l 168 1 l 170 4 l 170 130 b 171 260 170 256 170 258 b 191 274 175 269 183 274 b 205 267 196 274 201 272 b 212 158 212 262 210 273 l 212 56 l 257 112 b 311 173 304 172 304 172 b 317 174 313 174 314 174 b 326 173 319 174 323 173 b 490 11 329 172 366 134 l 502 -1 l 530 34 b 568 76 560 72 563 74 b 575 77 570 77 573 77 b 596 56 586 77 596 68 b 594 48 596 54 596 51 b 417 -172 592 41 424 -166 b 405 -176 415 -174 409 -176 b 396 -174 401 -176 398 -176 b 307 -87 393 -173 372 -152 b 221 -1 259 -38 221 -1 b 216 -6 221 -1 219 -2 l 212 -12 l 212 -147 b 212 -210 212 -173 212 -194 b 205 -292 212 -297 210 -287 b 191 -299 201 -297 196 -299 b 172 -287 183 -299 175 -295 b 170 -174 171 -284 171 -284 l 170 -63 l 127 -117 b 73 -176 84 -170 80 -176 b 68 -176 72 -176 70 -176 b -27 -87 59 -174 65 -180 b -114 0 -74 -38 -112 0 b -182 -86 -114 0 -145 -38 b -258 -174 -253 -174 -253 -173 b -264 -176 -259 -176 -262 -176 b -274 -174 -268 -176 -272 -174 b -438 -11 -277 -173 -348 -102 l -449 0 l -479 -37 b -524 -80 -513 -80 -514 -80 l -524 -80 b -553 -52 -534 -80 -540 -74 b -597 109 -583 -8 -597 48 b -560 280 -597 165 -585 224 b -533 324 -548 310 -540 322 "},v6c:{x_min:-1.359375,x_max:193.28125,ha:197,o:"m 78 233 b 87 233 81 233 84 233 b 187 140 132 233 174 195 b 193 102 190 127 193 115 b 43 -113 193 22 136 -62 b 27 -119 36 -116 31 -119 b 19 -108 21 -119 19 -115 b 29 -97 19 -102 20 -101 b 102 13 73 -72 102 -27 b 92 51 102 26 98 40 l 91 54 l 84 54 b 8 104 53 54 21 74 b -1 142 1 116 -1 130 b 78 233 -1 187 31 227 "},v6d:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m 544 335 b 553 337 548 337 551 337 b 575 313 563 337 570 330 b 589 226 583 285 589 256 b 517 8 589 152 563 76 b 464 -58 507 -4 503 -9 l 401 -136 b 362 -176 372 -172 370 -176 b 357 -176 360 -176 359 -176 b 261 -87 349 -174 355 -180 b 175 0 215 -38 175 0 b 106 -86 175 0 144 -38 b 29 -174 35 -174 36 -173 b 24 -176 28 -176 27 -176 b 14 -174 21 -176 17 -174 b -73 -87 12 -173 -8 -152 b -159 0 -121 -38 -159 0 b -228 -86 -160 0 -190 -38 b -304 -174 -299 -174 -298 -173 b -310 -176 -306 -176 -308 -176 b -319 -174 -314 -176 -318 -174 b -483 -12 -323 -173 -359 -137 l -495 0 l -524 -34 b -562 -77 -553 -73 -556 -76 b -568 -79 -564 -79 -566 -79 b -590 -58 -581 -79 -590 -69 b -588 -49 -590 -55 -589 -52 b -412 170 -585 -43 -417 165 b -398 174 -408 173 -402 174 b -389 173 -394 174 -392 174 b -300 86 -387 172 -366 151 b -215 -1 -254 37 -215 -1 b -145 84 -215 -1 -183 37 b -69 173 -74 173 -76 172 b -63 174 -68 174 -66 174 b -54 173 -61 174 -57 173 b 34 86 -51 172 -31 151 b 119 -1 81 37 119 -1 b 189 84 121 -1 151 37 b 265 173 259 173 258 172 b 270 174 266 174 269 174 b 280 173 274 174 279 173 b 370 84 283 172 303 151 b 455 -1 416 37 455 -1 l 455 -1 b 476 24 455 -1 469 15 b 547 226 522 87 547 159 b 534 302 547 252 543 278 b 532 317 533 308 532 313 b 544 335 532 326 536 333 "},v6f:{x_min:-80.3125,x_max:78.9375,ha:81,o:"m 63 191 b 69 192 65 192 66 192 b 77 188 72 192 76 191 b 78 183 78 187 78 186 b 74 158 78 179 77 172 l 66 115 b 9 -161 49 30 10 -158 b -10 -187 6 -172 -1 -181 b -34 -194 -17 -191 -25 -194 b -80 -147 -58 -194 -80 -174 b -80 -141 -80 -144 -80 -142 b 9 70 -80 -134 -73 -117 l 49 163 b 63 191 59 188 61 190 "},v70:{x_min:0,x_max:436.921875,ha:446,o:"m 213 190 b 217 191 215 191 216 191 b 231 184 223 191 228 188 b 249 154 240 167 246 159 b 419 18 292 91 348 45 b 436 -1 435 11 436 8 b 424 -16 436 -9 434 -13 b 308 -87 394 -26 340 -59 b 231 -186 276 -117 257 -142 b 219 -192 228 -191 225 -192 b 198 -174 209 -192 208 -191 b 47 -33 161 -113 110 -63 b 10 -16 34 -26 17 -19 b 0 -1 2 -13 0 -9 b 17 18 0 8 1 11 b 198 173 95 48 156 101 b 213 190 206 187 208 188 "},v72:{x_min:-423.3125,x_max:421.9375,ha:431,o:"m -262 197 b -247 197 -257 197 -253 197 b -118 162 -210 197 -163 184 b 40 45 -61 134 -13 98 b 277 -95 119 -33 200 -81 b 289 -97 281 -97 285 -97 b 378 0 332 -97 371 -55 b 378 11 378 4 378 6 b 302 83 378 55 345 83 b 242 66 283 83 262 77 b 208 56 231 59 219 56 b 148 120 175 56 148 81 b 201 186 148 151 164 172 b 261 198 220 194 240 198 b 420 45 341 198 411 136 b 421 22 421 37 421 29 b 245 -199 421 -93 338 -199 b 238 -198 243 -199 240 -199 b -44 -47 148 -194 50 -141 b -250 86 -114 22 -183 66 b -295 94 -270 91 -283 94 b -315 91 -302 94 -307 94 b -381 4 -356 81 -381 43 b -355 -56 -381 -18 -372 -40 b -298 -81 -338 -73 -319 -81 b -246 -68 -283 -81 -265 -77 b -212 -58 -234 -61 -223 -58 b -178 -69 -200 -58 -189 -62 b -151 -122 -160 -81 -151 -101 b -171 -167 -151 -138 -157 -155 b -239 -195 -185 -181 -213 -192 b -257 -197 -245 -197 -250 -197 b -423 -5 -352 -197 -423 -109 b -412 65 -423 16 -419 40 b -262 197 -389 137 -329 188 "},v74:{x_min:-206.890625,x_max:428.75,ha:438,o:"m 389 -351 b 394 -351 390 -351 393 -351 b 428 -385 413 -351 428 -367 b 428 -394 428 -388 428 -391 b 394 -428 426 -406 421 -410 l 332 -473 l 269 -516 l 205 -560 l 141 -603 l 77 -648 l 13 -692 l -50 -737 l -114 -780 l -145 -802 b -171 -813 -157 -810 -163 -813 b -175 -813 -172 -813 -174 -813 b -206 -777 -194 -811 -206 -795 b -202 -760 -206 -771 -205 -766 b -87 -675 -197 -752 -206 -757 l -34 -639 l 83 -557 l 145 -514 l 209 -470 l 272 -427 b 389 -351 375 -356 381 -352 "},v75:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -137 381 b -130 383 -134 383 -133 383 b -111 371 -122 383 -114 378 b -55 224 -110 370 -85 305 b 0 80 -25 145 -1 80 b 54 224 0 80 24 145 b 112 377 114 384 110 373 b 127 384 118 381 122 384 b 148 362 138 384 148 374 l 148 356 l 83 183 b 16 9 47 88 17 11 b -1 0 12 2 5 0 b -14 5 -5 0 -10 1 b -84 183 -19 9 -13 -6 l -149 356 l -149 362 b -137 381 -149 371 -145 378 "},v78:{x_min:0,x_max:193.28125,ha:197,o:"m 85 514 b 95 517 88 517 89 517 b 114 505 103 517 110 513 l 115 502 l 115 376 b 115 249 115 306 115 249 b 141 258 117 249 127 252 l 167 266 l 172 266 b 190 254 181 265 187 262 l 193 251 l 193 202 l 193 188 b 187 147 193 149 191 152 b 147 130 183 142 182 141 l 115 119 l 115 9 b 115 -99 115 -51 115 -99 b 141 -91 115 -99 127 -95 b 171 -81 166 -81 167 -81 l 171 -81 b 191 -94 181 -81 189 -87 b 193 -142 191 -97 193 -120 b 191 -195 193 -167 191 -194 b 125 -227 187 -205 187 -204 l 115 -230 l 115 -366 l 115 -503 l 114 -506 b 95 -519 110 -514 102 -519 b 74 -506 87 -519 78 -514 l 73 -503 l 73 -374 b 73 -245 73 -260 73 -245 b 73 -245 73 -245 73 -245 b 55 -252 72 -245 63 -249 l 32 -260 b 19 -263 27 -262 23 -263 b 4 -256 13 -263 8 -260 b 0 -215 0 -251 0 -254 b 0 -199 0 -210 0 -206 l 0 -152 l 1 -149 b 8 -140 2 -145 5 -141 b 42 -127 9 -140 24 -133 l 73 -116 l 73 -5 b 73 23 73 4 73 15 b 73 105 73 70 73 105 b 49 97 73 105 61 101 b 17 88 32 91 23 88 b 4 95 10 88 8 91 b 0 137 0 101 0 98 b 0 151 0 141 0 145 l 0 199 l 1 202 b 43 224 5 212 5 212 l 73 234 l 73 367 l 73 502 l 74 505 b 85 514 77 509 81 513 "},v79:{x_min:-1.359375,x_max:899.703125,ha:918,o:"m 307 349 b 332 351 315 351 323 351 b 443 340 367 351 408 347 b 741 47 607 306 720 195 b 744 0 743 31 744 16 b 660 -303 744 -90 713 -206 b 28 -755 534 -531 304 -695 b 14 -756 23 -755 19 -756 b -1 -741 4 -756 -1 -750 b 21 -720 -1 -731 1 -728 b 567 -56 337 -601 548 -344 b 568 -11 568 -41 568 -24 b 442 285 568 129 525 233 b 325 319 406 308 367 319 b 93 177 232 319 137 266 b 84 154 91 170 84 155 b 84 154 84 154 84 154 b 88 156 84 154 85 155 b 159 177 110 170 134 177 b 257 134 194 177 231 162 b 294 41 281 108 294 73 b 171 -97 294 -24 246 -90 b 156 -98 166 -97 161 -98 b 6 74 73 -98 6 -22 b 6 80 6 76 6 79 b 307 349 10 223 141 340 m 839 215 b 845 216 841 216 842 216 b 862 213 852 216 860 215 b 899 163 887 206 899 184 b 872 117 899 145 890 127 b 847 111 865 112 856 111 b 808 130 833 111 818 117 b 796 162 800 140 796 151 b 839 215 796 187 812 212 m 839 -112 b 845 -112 841 -112 842 -112 b 862 -115 852 -112 860 -113 b 899 -165 887 -122 899 -144 b 872 -210 899 -183 890 -201 b 847 -217 865 -215 856 -217 b 808 -198 833 -217 818 -210 b 796 -165 800 -188 796 -177 b 839 -112 796 -140 812 -116 "},v7a:{x_min:-1.359375,x_max:386.5625,ha:394,o:"m 249 535 b 257 537 251 537 253 537 b 276 524 266 537 273 533 l 277 521 l 279 419 l 279 316 l 304 323 b 337 328 319 326 330 328 b 353 316 347 328 349 324 b 355 266 355 315 355 290 b 353 215 355 241 355 217 b 319 198 349 206 347 205 b 279 187 284 190 279 188 b 279 156 279 187 279 174 b 279 136 279 151 279 144 l 279 84 l 289 87 l 330 98 b 367 105 352 102 362 105 b 378 101 372 105 375 104 b 386 61 385 95 386 94 b 386 40 386 55 386 48 l 386 -5 l 385 -8 b 374 -19 383 -12 378 -18 b 291 -40 372 -19 347 -26 b 279 -43 284 -41 279 -43 b 279 -83 279 -43 279 -59 b 279 -95 279 -87 279 -91 l 279 -145 l 304 -140 b 337 -133 321 -136 330 -133 b 349 -140 343 -133 347 -136 b 355 -181 355 -145 355 -142 l 355 -197 l 355 -210 b 349 -252 355 -249 355 -247 b 300 -269 345 -258 347 -258 b 280 -274 291 -272 281 -273 l 279 -274 l 277 -378 l 277 -483 l 276 -487 b 257 -499 273 -495 265 -499 b 238 -487 249 -499 242 -495 l 236 -483 l 236 -384 l 236 -285 l 235 -285 l 212 -291 l 170 -301 b 148 -308 159 -305 148 -306 b 147 -415 147 -308 147 -313 l 147 -523 l 145 -526 b 126 -538 141 -534 133 -538 b 106 -526 118 -538 110 -534 l 104 -523 l 104 -420 b 103 -317 104 -326 104 -317 b 103 -317 103 -317 103 -317 b 50 -330 92 -322 54 -330 b 31 -317 42 -330 35 -326 b 29 -267 29 -315 29 -315 l 29 -219 l 32 -216 b 92 -192 36 -206 36 -206 l 104 -190 l 104 -138 b 103 -87 104 -91 104 -87 b 103 -87 103 -87 103 -87 b 88 -91 103 -87 96 -88 l 49 -101 b 17 -106 32 -105 23 -106 b 6 -102 13 -106 10 -105 b -1 -62 0 -97 -1 -95 b 0 -41 -1 -56 0 -49 l 0 4 l 1 6 b 10 16 2 11 6 15 b 91 37 12 18 38 24 l 104 41 l 104 93 b 103 144 104 140 104 144 b 103 144 103 144 103 144 b 50 131 92 141 54 131 b 31 144 42 131 35 137 b 29 195 29 147 29 148 l 29 242 l 32 245 b 92 269 36 255 36 255 l 104 273 l 104 377 l 104 481 l 106 485 b 126 498 110 492 118 498 b 134 495 129 498 132 496 b 145 485 138 494 142 489 l 147 481 l 147 383 l 147 283 l 152 284 b 190 294 155 285 171 290 l 230 303 l 236 305 l 236 413 l 236 521 l 238 524 b 249 535 240 528 243 533 m 236 126 b 235 177 236 154 236 177 l 235 177 b 213 172 235 177 225 174 l 170 161 b 147 155 157 158 147 155 b 147 124 147 155 147 142 b 147 102 147 117 147 111 l 147 52 l 153 54 l 228 72 l 236 74 l 236 126 m 236 -105 b 235 -54 236 -65 236 -54 l 235 -54 b 231 -55 235 -54 234 -54 b 172 -69 227 -55 204 -62 l 149 -76 l 147 -76 l 147 -127 l 147 -179 l 152 -177 b 190 -167 155 -177 171 -173 l 230 -158 l 236 -156 l 236 -105 "},v7c:{x_min:0,x_max:300.8125,ha:307,o:"m 49 505 b 53 506 50 505 51 506 b 70 496 58 506 62 503 b 81 485 73 492 78 488 l 96 473 l 111 459 l 122 449 l 134 438 l 182 396 l 255 330 b 292 291 292 298 292 298 l 292 290 l 292 284 l 283 270 b 209 36 234 197 209 113 b 288 -170 209 -44 235 -119 b 299 -184 295 -179 299 -181 b 300 -191 300 -187 300 -188 b 285 -206 300 -199 294 -206 b 280 -206 283 -206 281 -206 b 247 -201 270 -202 259 -201 b 176 -222 223 -201 197 -208 b 114 -340 136 -249 114 -292 b 172 -471 114 -384 134 -433 b 185 -492 182 -481 185 -487 b 181 -502 185 -496 183 -499 b 171 -508 176 -505 174 -508 b 152 -498 166 -508 160 -503 b 0 -284 65 -428 12 -352 b 0 -260 0 -278 0 -270 b 1 -238 0 -252 0 -242 b 148 -140 16 -177 73 -140 b 209 -148 167 -140 189 -142 b 215 -149 212 -148 215 -149 b 215 -149 215 -149 215 -149 l 215 -149 b 201 -136 215 -148 209 -142 l 157 -97 l 96 -41 b 17 34 21 24 17 29 b 17 37 17 36 17 36 b 17 38 17 37 17 38 b 25 56 17 44 17 44 b 110 298 81 131 110 219 b 46 474 110 367 88 431 b 38 491 40 480 38 487 b 49 505 38 498 42 502 "},v7d:{x_min:-1.359375,x_max:436.921875,ha:446,o:"m 213 205 b 217 205 215 205 216 205 b 234 194 224 205 234 199 b 236 187 234 194 235 190 l 245 167 l 261 129 l 270 106 b 355 -61 294 54 329 -13 b 420 -163 381 -105 402 -138 b 436 -188 435 -184 436 -184 b 436 -191 436 -190 436 -190 b 421 -206 436 -201 431 -206 l 421 -206 l 416 -206 l 405 -201 b 217 -158 347 -172 283 -158 b 31 -201 153 -158 88 -172 l 20 -206 l 14 -206 l 14 -206 b 0 -191 5 -206 0 -201 b -1 -188 0 -190 -1 -190 b 14 -163 -1 -186 0 -184 b 95 -34 36 -136 72 -77 b 166 106 119 8 148 68 l 175 129 l 183 148 l 200 188 b 213 205 205 199 208 202 "},v7f:{x_min:0,x_max:367.5,ha:375,o:"m 0 124 l 0 187 l 61 187 l 122 187 l 122 138 l 122 91 l 153 61 l 183 30 l 213 61 l 243 91 l 243 138 l 243 187 l 306 187 l 367 187 l 367 124 l 367 61 l 321 61 l 274 61 l 243 30 l 213 0 l 243 -31 l 274 -62 l 321 -62 l 367 -62 l 367 -124 l 367 -188 l 306 -188 l 243 -188 l 243 -140 l 243 -93 l 213 -62 l 183 -31 l 153 -62 l 122 -93 l 122 -140 l 122 -188 l 61 -188 l 0 -188 l 0 -124 l 0 -62 l 46 -62 l 92 -62 l 123 -31 l 153 0 l 123 30 l 92 61 l 46 61 l 0 61 l 0 124 "},v80:{x_min:29.9375,x_max:420.578125,ha:371,o:"m 115 345 b 221 347 117 345 166 347 b 411 345 306 347 409 345 b 420 330 416 342 420 335 b 415 319 420 326 419 321 b 178 118 397 303 179 118 b 178 117 178 118 178 117 b 181 117 178 117 178 117 b 189 117 182 117 185 117 b 193 117 190 117 191 117 b 247 98 215 117 232 111 b 296 75 266 83 280 76 b 302 75 299 75 300 75 b 322 91 311 75 315 79 b 322 91 322 91 322 91 b 322 91 322 91 322 91 b 319 91 322 91 321 91 b 313 90 318 90 315 90 b 283 107 300 90 288 97 b 277 126 279 114 277 121 b 319 167 277 149 295 167 b 319 167 319 167 319 167 b 362 118 347 167 362 147 b 355 82 362 108 359 96 b 311 33 349 65 340 55 b 224 1 284 12 253 1 b 194 5 213 1 204 2 b 168 18 183 8 178 11 b 110 36 151 30 130 36 b 57 15 88 36 68 29 b 47 11 54 12 51 11 b 31 20 40 11 34 13 b 29 26 31 22 29 25 b 68 66 29 36 39 45 b 285 250 73 71 281 248 b 285 250 285 250 285 250 b 231 252 285 252 261 252 b 137 250 190 252 141 250 b 93 227 122 248 110 241 b 78 220 88 222 83 220 b 66 227 74 220 70 222 b 63 234 65 229 63 231 b 85 291 63 241 69 252 b 115 345 108 342 108 344 "},v81:{x_min:0,x_max:428.75,ha:438,o:"m 262 186 b 273 186 266 186 272 186 b 274 186 273 186 274 186 b 285 186 274 186 280 186 b 428 48 375 181 428 122 b 386 -68 428 12 416 -29 b 155 -187 329 -145 236 -187 b 12 -111 92 -187 38 -162 b 0 -51 4 -91 0 -72 b 262 186 0 58 122 179 m 366 131 b 352 134 362 133 357 134 b 219 81 321 134 269 115 b 47 -111 126 23 50 -62 b 47 -112 47 -111 47 -112 b 77 -136 47 -129 58 -136 b 264 -45 118 -136 194 -101 b 382 109 336 12 382 76 b 366 131 382 120 377 129 "},v83:{x_min:-1.359375,x_max:847.96875,ha:865,o:"m 488 1499 b 495 1500 490 1500 492 1500 b 541 1465 507 1500 521 1490 b 679 1078 622 1372 679 1210 b 677 1050 679 1068 677 1060 b 477 642 668 893 604 764 l 443 609 l 431 596 l 431 592 l 438 562 l 449 508 l 460 458 b 481 355 475 390 481 355 b 481 355 481 355 481 355 b 490 356 481 355 485 355 b 528 358 495 356 511 358 b 558 356 540 358 552 356 b 839 95 699 338 808 237 b 847 22 845 72 847 47 b 631 -303 847 -113 766 -242 b 620 -309 623 -308 620 -309 l 620 -310 b 631 -359 620 -310 626 -333 l 646 -435 l 660 -496 b 672 -588 668 -535 672 -563 b 664 -653 672 -610 669 -630 b 383 -875 630 -792 509 -875 b 201 -810 321 -875 257 -855 b 129 -680 151 -768 129 -730 b 274 -530 129 -592 200 -530 b 351 -553 300 -530 326 -538 b 412 -669 393 -582 412 -626 b 287 -805 412 -735 366 -800 l 279 -805 l 285 -809 b 383 -830 318 -823 351 -830 b 586 -718 464 -830 540 -789 b 626 -584 612 -678 626 -631 b 619 -528 626 -566 623 -548 b 612 -495 619 -526 616 -510 b 577 -324 590 -387 577 -324 b 577 -324 577 -324 577 -324 b 568 -326 575 -324 571 -324 b 528 -334 558 -328 537 -333 b 465 -338 506 -337 485 -338 b 24 -11 269 -338 87 -206 b -1 145 8 41 -1 93 b 96 442 -1 249 32 351 b 322 714 166 541 236 626 l 352 745 l 345 782 l 332 843 l 315 921 b 303 984 310 950 304 978 b 295 1082 298 1017 295 1049 b 413 1426 295 1208 336 1329 b 488 1499 436 1456 477 1496 m 549 1301 b 541 1301 547 1301 544 1301 b 411 1207 500 1301 447 1263 b 355 1004 374 1152 355 1079 b 359 942 355 984 356 963 b 371 881 362 927 363 917 l 385 818 b 392 782 389 799 392 784 l 392 782 b 434 828 393 782 424 816 b 607 1165 534 941 594 1060 b 608 1193 608 1175 608 1183 b 597 1270 608 1224 604 1254 b 549 1301 589 1286 571 1299 m 398 528 b 393 555 396 542 393 553 b 392 555 393 555 393 555 b 317 470 390 555 347 505 b 190 298 266 408 212 334 b 127 70 148 227 127 148 b 155 -77 127 19 137 -30 b 468 -303 209 -216 333 -303 b 519 -299 484 -303 502 -302 b 568 -284 541 -295 568 -287 l 568 -284 b 563 -263 568 -284 566 -274 l 534 -120 l 511 -13 l 496 61 l 480 133 b 469 187 472 176 469 187 b 468 188 469 187 469 188 b 416 162 462 188 430 172 b 337 13 364 126 337 69 b 413 -124 337 -40 363 -93 b 428 -144 424 -131 428 -137 b 428 -149 428 -145 428 -148 b 409 -166 426 -161 419 -166 b 394 -162 405 -166 400 -165 b 240 77 302 -122 240 -27 l 240 77 b 430 342 240 197 315 301 l 436 344 l 426 394 l 398 528 m 548 194 b 526 195 540 195 532 195 b 519 195 524 195 521 195 l 514 195 l 518 177 l 539 79 l 552 15 l 566 -48 l 594 -187 l 605 -240 b 612 -266 609 -254 611 -266 b 612 -266 612 -266 612 -266 b 641 -248 613 -266 630 -256 b 744 -98 692 -212 730 -156 b 751 -40 749 -79 751 -59 b 548 194 751 76 665 181 "},v84:{x_min:25.859375,x_max:164.6875,ha:168,o:"m 34 369 b 40 370 35 370 38 370 b 59 353 49 370 50 367 b 164 40 122 254 155 158 b 164 0 164 33 164 16 b 164 -40 164 -16 164 -34 b 59 -353 155 -158 122 -254 b 40 -371 53 -366 47 -371 b 34 -370 38 -371 36 -370 b 25 -358 28 -367 25 -363 b 31 -337 25 -352 27 -347 b 92 0 72 -234 92 -117 b 31 335 92 116 72 233 b 25 356 27 345 25 352 b 34 369 25 363 28 366 "},v86:{x_min:-571.671875,x_max:570.3125,ha:582,o:"m -386 173 b -381 174 -385 174 -383 174 b -370 173 -377 174 -372 173 b -281 86 -367 172 -347 151 b -196 0 -235 37 -196 0 b -126 84 -196 0 -164 37 b -50 174 -55 173 -57 172 b -44 174 -49 174 -47 174 b -35 173 -42 174 -38 173 b 53 86 -32 172 -12 151 b 138 0 100 37 138 0 b 208 84 140 0 170 37 b 284 174 279 173 277 172 b 289 174 285 174 288 174 b 299 173 294 174 298 173 b 462 11 303 172 338 134 l 475 -1 l 503 34 b 541 76 534 72 536 74 b 548 77 544 77 545 77 b 570 56 560 77 570 68 b 567 48 570 54 568 51 b 392 -172 564 41 397 -166 b 378 -176 387 -174 382 -176 b 368 -174 374 -176 371 -176 b 280 -87 367 -173 345 -152 b 194 0 234 -38 194 0 b 125 -86 194 0 163 -38 b 49 -174 54 -174 55 -173 b 43 -176 47 -176 46 -176 b 34 -174 40 -176 36 -174 b -54 -87 31 -173 10 -152 b -140 0 -102 -38 -140 0 b -209 -86 -141 0 -171 -38 b -285 -174 -280 -174 -279 -173 b -291 -176 -287 -176 -289 -176 b -300 -174 -295 -176 -299 -174 b -464 -12 -304 -173 -340 -137 l -476 0 l -504 -34 b -543 -77 -534 -73 -537 -76 b -549 -79 -545 -79 -547 -79 b -571 -58 -562 -79 -571 -69 b -568 -49 -571 -55 -570 -52 b -392 172 -566 -43 -396 167 b -386 173 -390 172 -387 173 "},v8a:{x_min:-170.140625,x_max:168.78125,ha:172,o:"m -160 567 b -122 567 -159 567 -149 567 l -87 567 l -84 566 b -74 553 -78 563 -77 560 b -20 366 -73 551 -49 466 b 31 186 8 267 31 186 b 85 371 31 186 55 269 b 140 559 114 473 138 557 b 153 567 141 564 148 567 b 168 559 159 567 166 564 b 168 555 168 557 168 557 b 92 281 168 548 159 513 b 14 13 50 134 14 13 b 0 0 14 6 6 0 b -17 15 -8 0 -17 8 b -93 283 -17 15 -51 136 b -170 552 -166 533 -170 548 b -170 553 -170 552 -170 552 b -160 567 -170 560 -167 564 "},v8b:{x_min:0,x_max:319.859375,ha:326,o:"m 149 508 b 159 509 152 509 155 509 b 186 494 170 509 181 503 b 190 440 190 487 190 488 l 190 430 l 190 377 l 242 377 l 251 377 b 303 373 298 377 296 377 b 319 345 314 367 319 356 b 304 319 319 335 314 324 b 250 315 296 315 299 315 l 242 315 l 190 315 l 190 262 l 190 252 b 186 198 190 204 190 205 b 159 183 179 188 170 183 b 132 198 148 183 138 188 b 127 252 127 205 127 204 l 127 262 l 127 315 l 76 315 l 68 315 b 14 319 20 315 21 315 b 0 347 4 324 0 335 b 14 373 0 356 4 367 b 68 377 21 377 20 377 l 76 377 l 127 377 l 127 430 l 127 440 b 132 494 127 488 127 487 b 149 508 136 501 142 505 "},v8c:{x_min:-330.75,x_max:329.390625,ha:336,o:"m -133 483 b -117 484 -127 484 -122 484 b 31 373 -51 484 9 440 b 35 348 34 365 35 356 b -25 285 35 313 10 285 b -87 331 -55 285 -76 302 b -167 402 -100 376 -133 402 b -191 398 -175 402 -183 401 b -227 341 -215 388 -227 369 b -225 320 -227 334 -227 327 b -13 74 -209 230 -125 133 b 6 65 -4 70 5 66 l 9 63 l 10 65 b 117 231 12 68 40 112 l 189 341 l 242 424 b 268 460 262 456 264 458 b 283 464 273 463 277 464 b 308 438 296 464 308 453 l 308 437 b 287 396 308 430 308 428 l 95 98 l 59 43 l 58 41 l 65 37 b 253 -156 151 -8 217 -77 b 281 -285 272 -199 281 -244 b 148 -481 281 -381 231 -463 b 115 -485 137 -484 126 -485 b -32 -376 51 -485 -9 -442 b -36 -349 -35 -366 -36 -358 b 25 -287 -36 -315 -12 -287 b 85 -333 54 -287 74 -302 b 166 -403 99 -377 133 -403 b 190 -399 174 -403 182 -402 b 225 -342 215 -390 225 -370 b 224 -322 225 -335 225 -328 b 12 -76 208 -231 125 -134 b -8 -66 2 -72 -6 -68 l -10 -65 l -12 -66 b -118 -231 -13 -68 -42 -113 l -190 -342 l -243 -426 b -269 -462 -264 -458 -265 -458 b -284 -466 -274 -464 -279 -466 b -310 -440 -298 -466 -310 -455 l -310 -438 b -288 -398 -310 -430 -308 -430 l -96 -99 l -59 -44 l -59 -43 l -66 -38 b -281 284 -198 33 -281 158 l -281 284 b -133 483 -281 392 -220 474 m 254 177 b 266 179 258 177 262 179 b 319 149 287 179 307 167 b 329 115 326 140 329 127 b 319 79 329 102 326 90 b 268 51 307 61 287 51 b 221 72 250 51 234 58 b 205 115 210 84 205 99 b 254 177 205 142 223 170 m -281 -54 b -269 -52 -277 -52 -273 -52 b -223 -73 -253 -52 -235 -59 b -206 -116 -212 -84 -206 -101 b -216 -151 -206 -129 -209 -141 b -269 -179 -228 -170 -249 -179 b -314 -159 -285 -179 -302 -173 b -330 -116 -325 -147 -330 -131 b -281 -54 -330 -88 -313 -61 "},v8d:{x_min:-1.359375,x_max:255.890625,ha:261,o:"m 118 514 b 127 517 121 517 122 517 b 147 505 136 517 142 513 l 148 502 l 148 403 b 148 306 148 351 148 306 b 174 315 149 306 160 310 l 200 324 l 205 323 b 223 312 213 323 220 319 l 225 308 l 225 260 b 225 245 225 255 225 249 b 220 204 225 208 224 209 b 179 188 216 199 215 199 l 148 177 l 148 124 l 148 70 l 189 84 b 236 98 219 94 230 98 b 247 94 240 98 243 97 b 255 52 254 88 255 87 b 255 33 255 47 255 40 l 254 -12 l 253 -15 b 249 -22 253 -18 250 -20 l 245 -24 l 196 -41 l 148 -58 l 148 -108 b 148 -158 148 -136 148 -158 b 174 -148 148 -158 160 -154 b 204 -140 198 -140 200 -140 l 204 -140 b 224 -152 213 -140 221 -145 b 225 -201 224 -155 225 -177 b 224 -254 225 -226 224 -251 b 157 -284 220 -262 220 -262 l 148 -288 l 148 -395 l 148 -503 l 147 -506 b 127 -519 142 -514 134 -519 b 107 -506 119 -519 111 -514 l 106 -503 l 106 -403 b 106 -303 106 -316 106 -303 b 104 -303 104 -303 104 -303 b 88 -310 104 -303 96 -306 l 63 -319 b 51 -322 59 -320 55 -322 b 36 -315 46 -322 40 -319 b 31 -273 32 -309 31 -312 b 31 -258 31 -269 31 -263 l 31 -210 l 34 -206 b 40 -198 35 -204 38 -199 b 74 -186 42 -197 57 -191 l 106 -173 l 106 -123 b 106 -97 106 -112 106 -104 b 106 -72 106 -76 106 -72 b 104 -72 106 -72 106 -72 b 20 -99 89 -79 23 -99 b 0 -84 10 -99 2 -93 b -1 -37 0 -81 -1 -59 b 0 11 -1 -15 0 9 b 58 40 4 22 2 22 l 106 56 l 106 109 b 106 123 106 115 106 119 b 106 162 106 147 106 162 b 81 155 106 162 93 159 b 50 147 65 149 55 147 b 36 152 43 147 40 148 b 31 194 32 158 31 156 b 31 209 31 198 31 204 l 31 256 l 34 260 b 76 281 38 269 38 269 l 106 292 l 106 396 l 106 502 l 107 505 b 118 514 110 509 114 513 "},v8f:{x_min:-21.78125,x_max:362.0625,ha:369,o:"m 302 1031 b 308 1032 304 1032 307 1032 b 330 1016 318 1032 325 1027 b 362 867 351 970 362 920 b 340 738 362 824 353 780 l 336 727 l 340 717 b 362 591 355 677 362 634 b 257 323 362 496 325 401 b 204 272 243 306 227 290 b 20 56 129 206 66 133 b -1 18 12 44 0 22 b -19 4 -4 9 -12 4 l -21 4 l -21 140 l -21 276 l -12 277 b 167 333 61 288 127 309 b 319 598 262 388 319 491 b 311 664 319 620 317 642 l 310 673 l 304 664 b 204 548 279 620 250 587 b 20 333 129 483 66 409 b -1 292 12 320 0 298 b -19 280 -4 285 -12 280 l -21 280 l -21 416 l -21 552 l -12 553 b 167 609 61 564 127 585 b 319 874 264 666 319 770 b 294 992 319 914 311 954 b 288 1011 288 1004 288 1007 b 302 1031 288 1021 294 1028 "},v90:{x_min:-171.5,x_max:483.1875,ha:493,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 495 20 616 20 616 b 20 373 20 427 20 373 b 115 410 20 373 63 390 l 210 448 l 210 531 b 212 620 210 614 210 616 b 231 632 215 628 223 632 b 246 627 236 632 242 631 b 251 541 251 620 251 628 l 251 463 l 315 489 b 387 514 368 509 381 514 b 393 513 390 514 392 514 b 406 494 402 510 406 502 b 397 476 406 487 404 480 b 323 446 396 474 363 462 l 251 417 l 251 283 l 251 148 l 254 151 b 370 199 291 183 332 199 b 415 191 385 199 400 197 b 483 84 458 176 483 134 b 461 0 483 58 476 29 b 332 -142 439 -40 411 -72 l 255 -215 b 231 -229 240 -229 239 -229 b 216 -223 224 -229 220 -227 b 210 -158 210 -217 210 -223 b 210 -120 210 -148 210 -136 l 210 -29 l 205 -34 b 100 -142 182 -65 159 -88 l 23 -215 b -1 -229 9 -229 6 -229 b -19 -217 -9 -229 -16 -224 l -20 -215 l -21 48 l -21 310 l -83 287 b -152 262 -133 266 -145 262 b -157 263 -153 262 -155 262 b -171 283 -166 266 -171 274 b -161 301 -171 290 -167 297 b -91 328 -160 302 -129 315 l -21 356 l -21 487 l -20 617 l -19 621 b -8 631 -17 626 -12 630 m 210 288 b 210 401 210 351 210 401 b 114 365 209 401 167 384 l 20 327 l 20 238 l 20 148 l 21 151 b 140 199 59 183 102 199 b 206 180 164 199 187 192 l 209 177 b 209 177 209 177 209 177 b 210 288 210 177 210 199 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 m 341 131 b 328 133 337 133 332 133 b 322 133 326 133 323 133 b 257 87 296 129 273 113 l 251 80 l 251 -37 l 251 -156 l 255 -152 b 375 81 328 -72 375 20 l 375 83 b 341 131 375 113 367 126 "},v92:{x_min:0,x_max:598.890625,ha:611,o:"m 62 181 b 77 183 66 183 72 183 b 91 181 83 183 88 183 b 202 131 100 180 106 177 l 299 87 l 394 131 b 517 183 499 181 502 183 b 519 183 517 183 518 183 b 598 104 567 183 598 144 b 577 49 598 84 592 65 b 518 15 567 38 563 37 b 484 0 499 6 484 0 b 518 -16 484 -1 499 -8 b 577 -51 563 -38 567 -40 b 598 -105 592 -66 598 -86 b 519 -184 598 -145 567 -184 b 517 -184 518 -184 517 -184 b 394 -133 502 -184 499 -183 l 299 -88 l 202 -133 b 81 -184 99 -183 95 -184 b 77 -184 80 -184 78 -184 b 0 -105 29 -184 0 -145 b 20 -51 0 -86 5 -66 b 80 -16 29 -40 34 -38 b 114 -1 98 -8 114 -1 b 80 15 114 0 98 6 b 20 49 34 37 29 38 b 0 104 6 65 0 84 b 62 181 0 140 23 174 m 88 134 b 74 136 85 134 80 136 b 68 134 72 136 69 136 b 46 104 54 130 46 117 b 55 81 46 95 49 88 b 149 34 59 76 53 80 b 224 -1 190 15 224 0 b 144 -38 224 -1 187 -18 b 54 -84 59 -79 58 -79 b 46 -105 49 -90 46 -98 b 76 -137 46 -122 58 -137 b 78 -137 77 -137 77 -137 b 194 -86 87 -137 76 -141 b 298 -36 250 -58 298 -36 b 298 -36 298 -36 298 -36 b 402 -84 299 -36 345 -58 b 518 -137 522 -141 510 -137 b 521 -137 519 -137 519 -137 b 551 -105 539 -137 551 -122 b 541 -83 551 -98 548 -90 b 447 -36 537 -77 544 -81 b 374 -1 406 -16 374 -1 b 447 34 374 0 406 15 b 541 81 544 80 537 76 b 551 104 548 88 551 97 b 521 136 551 120 539 136 b 518 136 519 136 519 136 b 517 136 518 136 517 136 l 517 136 b 402 83 511 136 511 136 b 298 34 345 56 299 34 b 298 34 298 34 298 34 b 194 84 298 34 250 56 b 88 134 137 111 89 133 "},v93:{x_min:0,x_max:438.28125,ha:447,o:"m 212 205 b 219 205 213 205 216 205 b 239 183 228 205 231 204 b 421 -163 298 40 363 -83 b 438 -191 434 -180 438 -186 b 436 -197 438 -192 438 -195 b 424 -206 434 -204 431 -206 b 406 -201 420 -206 415 -205 b 216 -156 347 -172 281 -156 b 23 -205 148 -156 80 -173 b 14 -206 20 -206 17 -206 b 0 -191 6 -206 0 -201 b 6 -176 0 -187 1 -183 b 202 192 63 -104 142 45 b 212 205 205 199 208 202 m 264 48 l 249 81 l 243 94 l 242 91 b 89 -126 208 36 137 -66 b 81 -138 85 -133 81 -138 b 81 -138 81 -138 81 -138 b 81 -138 81 -138 81 -138 b 95 -133 81 -138 87 -136 b 280 -94 156 -108 221 -94 b 334 -98 299 -94 317 -95 b 343 -99 338 -99 343 -99 b 343 -99 343 -99 343 -99 b 338 -94 343 -99 341 -97 b 264 48 318 -58 287 1 "},v94:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -9 215 b 0 217 -6 217 -4 217 b 19 205 8 217 14 213 b 20 142 20 202 20 201 l 20 84 l 23 84 b 144 -27 81 74 129 30 b 148 -66 147 -40 148 -54 b 36 -213 148 -134 103 -197 b 0 -219 24 -217 12 -219 b -145 -104 -68 -219 -129 -173 b -149 -68 -148 -91 -149 -79 b -24 84 -149 6 -98 74 l -21 84 l -21 142 b -19 205 -20 201 -20 202 b -9 215 -17 209 -13 213 m -21 -15 b -23 41 -21 37 -21 41 b -23 41 -23 41 -23 41 b -76 11 -35 40 -62 26 b -108 -65 -98 -11 -108 -38 b -1 -176 -108 -122 -65 -176 b 107 -65 63 -176 107 -122 b 74 11 107 -38 96 -11 b 20 41 61 26 32 41 b 20 -15 20 41 20 15 b 19 -74 20 -72 20 -72 b 0 -87 14 -83 6 -87 b -19 -74 -8 -87 -16 -83 b -21 -15 -20 -72 -20 -72 "},v95:{x_min:0,x_max:406.96875,ha:415,o:"m 55 181 b 70 183 61 183 66 183 b 111 170 85 183 99 179 b 160 130 115 167 137 149 l 202 95 l 245 130 b 319 181 299 176 302 179 b 334 183 325 183 330 183 b 406 109 375 183 406 148 b 401 81 406 99 405 91 b 348 24 394 65 390 59 b 318 -1 332 11 318 0 b 348 -26 318 -1 332 -12 b 401 -83 390 -61 394 -66 b 406 -111 405 -93 406 -101 b 334 -184 406 -149 375 -184 b 319 -183 330 -184 325 -184 b 245 -131 302 -180 299 -177 l 202 -97 l 160 -131 b 85 -183 107 -177 103 -180 b 70 -184 80 -184 76 -184 b 0 -111 31 -184 0 -149 b 4 -83 0 -101 1 -93 b 58 -26 10 -66 16 -61 b 88 -1 74 -12 88 -1 b 58 24 88 0 74 11 b 10 69 23 54 17 59 b 0 109 2 81 0 95 b 55 181 0 142 21 173 m 83 133 b 72 136 78 136 76 136 b 57 131 66 136 61 134 b 46 109 49 126 46 117 b 50 93 46 104 47 98 b 107 45 51 91 77 70 b 160 0 137 20 160 0 b 107 -47 160 -1 137 -22 b 50 -94 77 -72 51 -93 b 46 -111 47 -99 46 -105 b 59 -134 46 -120 50 -130 b 72 -137 62 -136 68 -137 b 83 -136 76 -137 80 -136 b 144 -84 84 -134 107 -116 b 202 -36 176 -58 202 -36 b 261 -84 202 -36 230 -58 b 323 -136 299 -116 321 -134 b 334 -137 326 -136 330 -137 b 345 -134 338 -137 343 -136 b 360 -111 355 -130 360 -120 b 355 -94 360 -105 359 -99 b 299 -47 353 -93 329 -72 b 245 0 269 -22 245 -1 b 299 45 245 0 269 20 b 355 93 329 70 353 91 b 360 109 359 98 360 104 b 345 133 360 119 355 129 b 334 136 343 134 338 136 b 323 134 330 136 326 134 b 261 83 321 133 299 115 b 202 34 230 56 202 34 b 144 83 202 34 176 56 b 83 133 106 115 84 133 "},v97:{x_min:-228.671875,x_max:227.3125,ha:232,o:"m -217 487 l -213 488 l 0 488 l 212 488 l 216 487 b 225 476 220 484 224 480 l 227 473 l 227 244 l 227 15 l 225 12 b 206 0 223 4 215 0 b 197 1 204 0 200 0 b 187 12 193 4 189 6 l 186 15 l 186 138 l 186 262 l -1 262 l -187 262 l -187 138 l -187 15 l -189 12 b -208 0 -193 4 -200 0 b -227 12 -216 0 -223 4 l -228 15 l -228 244 l -228 473 l -227 476 b -217 487 -225 480 -221 484 "},v9a:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 230 1031 b 238 1032 232 1032 235 1032 b 259 1014 245 1032 251 1027 b 367 662 330 906 367 782 b 364 602 367 641 367 621 b 232 317 352 488 304 384 b 57 120 155 245 103 187 b -1 18 31 84 6 40 b -19 4 -4 11 -12 4 l -21 4 l -21 159 l -21 315 l -16 315 b 96 335 10 315 62 324 b 315 695 227 380 315 527 b 313 738 315 709 314 724 b 224 991 304 825 273 916 b 216 1013 219 999 216 1007 b 230 1031 216 1021 220 1028 "},v9b:{x_min:-24.5,x_max:313.0625,ha:319,o:"m -24 -133 l -24 -5 l -20 -5 b -1 -19 -12 -5 -4 -11 b 142 -213 13 -61 74 -144 b 258 -376 196 -269 230 -315 b 313 -605 295 -449 313 -528 b 292 -742 313 -652 306 -699 b 288 -752 289 -748 288 -752 b 288 -752 288 -752 288 -752 b 292 -764 289 -753 291 -757 b 313 -907 306 -811 313 -860 b 292 -1045 313 -954 306 -1002 b 288 -1054 289 -1050 288 -1054 b 288 -1054 288 -1054 288 -1054 b 292 -1067 289 -1054 291 -1060 b 313 -1210 306 -1113 313 -1161 b 292 -1346 313 -1257 306 -1304 b 288 -1357 289 -1353 288 -1357 b 288 -1357 288 -1357 288 -1357 b 292 -1368 289 -1357 291 -1363 b 313 -1512 306 -1415 313 -1464 b 292 -1648 313 -1560 306 -1605 b 288 -1660 289 -1654 288 -1660 b 288 -1660 288 -1660 288 -1660 b 292 -1671 289 -1660 291 -1665 b 313 -1814 306 -1719 313 -1766 b 250 -2040 313 -1897 291 -1977 b 232 -2062 238 -2057 236 -2059 b 221 -2065 230 -2063 225 -2065 b 200 -2045 210 -2065 201 -2057 b 200 -2043 200 -2044 200 -2044 b 208 -2026 200 -2037 202 -2034 b 269 -1826 249 -1966 269 -1897 b 153 -1544 269 -1726 230 -1625 b -9 -1472 115 -1506 58 -1481 b -21 -1471 -14 -1471 -19 -1471 l -24 -1471 l -24 -1343 l -24 -1215 l -20 -1215 b -1 -1229 -12 -1215 -4 -1221 b 142 -1424 13 -1270 74 -1353 b 257 -1582 196 -1478 228 -1524 b 264 -1594 261 -1589 264 -1594 l 264 -1594 b 265 -1582 264 -1594 264 -1589 b 270 -1525 268 -1562 270 -1544 b 153 -1243 270 -1424 228 -1321 b -9 -1170 115 -1203 58 -1178 b -21 -1168 -14 -1170 -19 -1168 l -24 -1168 l -24 -1041 l -24 -913 l -20 -913 b -1 -927 -12 -913 -4 -918 b 142 -1121 13 -967 74 -1050 b 257 -1281 196 -1175 228 -1221 b 264 -1292 261 -1286 264 -1292 l 264 -1292 b 265 -1279 264 -1292 264 -1286 b 270 -1222 268 -1261 270 -1242 b 153 -941 270 -1121 228 -1018 b -9 -867 115 -900 58 -875 b -21 -866 -14 -867 -19 -866 l -24 -866 l -24 -738 l -24 -610 l -20 -610 b -1 -624 -12 -610 -4 -616 b 142 -818 13 -664 74 -749 b 257 -978 196 -873 228 -918 b 264 -989 261 -984 264 -989 l 264 -989 b 265 -977 264 -989 264 -984 b 270 -920 268 -959 270 -939 b 153 -638 270 -818 228 -716 b -9 -564 115 -598 58 -573 b -21 -563 -14 -564 -19 -563 l -24 -563 l -24 -435 l -24 -308 l -20 -308 b -1 -322 -12 -308 -4 -313 b 142 -516 13 -363 74 -446 b 257 -675 196 -571 228 -616 b 264 -687 261 -681 264 -687 l 264 -687 b 265 -674 264 -687 264 -681 b 270 -617 268 -656 270 -637 b 153 -335 270 -516 228 -413 b -9 -262 115 -295 58 -270 b -21 -260 -14 -262 -19 -260 l -24 -260 l -24 -133 "},v9c:{x_min:-166.0625,x_max:-25.859375,ha:0,o:"m -49 369 b -42 370 -46 369 -44 370 b -27 360 -36 370 -29 366 b -25 355 -27 359 -25 358 b -32 335 -25 351 -28 347 b -92 52 -66 248 -87 159 b -93 -1 -93 43 -93 20 b -92 -54 -93 -23 -93 -45 b -32 -337 -85 -162 -66 -251 b -25 -355 -27 -349 -25 -352 b -42 -371 -25 -365 -32 -371 b -61 -353 -50 -371 -51 -369 b -163 -63 -119 -262 -153 -165 b -166 -1 -166 -37 -166 -31 b -163 62 -166 30 -166 36 b -61 352 -153 163 -119 260 b -49 369 -54 365 -51 366 "},v9e:{x_min:0,x_max:607.0625,ha:619,o:"m 243 631 b 250 632 246 632 249 632 b 270 620 259 632 268 628 l 272 616 l 272 201 l 272 -212 l 270 -216 b 251 -229 268 -224 259 -229 b 227 -215 243 -229 240 -229 l 151 -142 b 32 -16 81 -80 53 -49 b 0 84 9 18 0 52 b 111 199 0 149 42 199 b 137 197 119 199 127 198 b 228 151 168 191 197 177 l 231 148 l 231 383 b 232 620 231 616 231 616 b 243 631 234 624 238 630 m 168 131 b 152 133 163 133 157 133 b 107 102 130 133 111 120 b 106 86 107 97 106 91 b 111 41 106 73 108 56 b 227 -152 125 -13 171 -90 l 231 -156 l 231 -37 l 231 80 l 225 87 b 168 131 210 111 190 126 m 347 631 b 353 632 348 632 351 632 b 374 620 363 632 371 628 b 375 383 375 616 375 616 l 375 148 l 377 151 b 492 199 415 183 454 199 b 537 191 507 199 522 197 b 607 84 582 176 607 134 b 583 0 607 58 598 29 b 455 -142 562 -40 533 -72 l 378 -215 b 355 -229 364 -229 362 -229 b 334 -216 345 -229 337 -224 l 333 -212 l 333 201 l 333 616 l 334 620 b 347 631 337 624 341 630 m 465 131 b 451 133 461 133 455 133 b 445 133 449 133 446 133 b 379 87 419 129 396 113 l 375 80 l 375 -37 l 375 -156 l 378 -152 b 499 81 451 -72 499 20 l 499 83 b 465 131 499 113 490 126 "},va3:{x_min:58.53125,x_max:228.671875,ha:294,o:"m 138 371 b 142 373 140 371 141 373 b 178 342 149 373 156 366 b 228 251 217 297 228 278 b 228 244 228 248 228 247 b 176 147 227 212 212 184 b 123 73 152 122 132 93 b 121 62 122 70 121 66 b 145 13 121 48 129 31 b 153 -2 151 6 153 1 b 149 -9 153 -5 152 -6 b 144 -11 148 -11 145 -11 b 129 -1 140 -11 136 -8 b 61 87 89 37 68 68 b 58 113 59 95 58 105 b 110 215 58 144 74 177 b 163 287 134 240 155 269 b 166 299 166 291 166 295 b 141 348 166 313 157 330 b 133 360 134 356 133 358 b 133 363 133 362 133 362 b 138 371 133 367 136 370 "},va5:{x_min:0,x_max:349.8125,ha:357,o:"m 88 302 b 103 303 93 302 98 303 b 202 224 149 303 191 270 b 205 199 204 216 205 208 b 178 129 205 173 196 147 l 175 126 l 182 127 b 307 249 236 142 284 190 b 313 259 308 254 311 258 b 329 267 317 265 323 267 b 349 247 340 267 349 259 b 201 -263 349 242 204 -258 b 182 -273 197 -270 190 -273 b 163 -260 174 -273 166 -269 b 161 -256 161 -259 161 -258 b 217 -59 161 -248 170 -220 b 272 129 247 43 272 127 b 272 129 272 129 272 129 b 264 122 272 129 268 126 b 140 80 227 94 183 80 b 36 115 102 80 65 91 b 0 194 10 136 0 165 b 88 302 0 244 32 292 "},va9:{x_min:-24.5,x_max:314.421875,ha:321,o:"m -24 -145 l -24 -5 l -20 -5 b 0 -23 -9 -5 -2 -12 b 27 -87 4 -38 14 -66 b 138 -220 53 -136 88 -177 b 235 -328 179 -255 208 -288 b 314 -592 287 -409 314 -501 b 292 -732 314 -639 307 -687 l 289 -742 l 294 -756 b 314 -896 307 -802 314 -849 b 292 -1035 314 -943 307 -991 l 289 -1045 l 294 -1057 b 314 -1197 307 -1104 314 -1152 b 292 -1338 314 -1246 307 -1292 l 289 -1347 l 294 -1360 b 314 -1500 307 -1407 314 -1454 b 273 -1689 314 -1565 300 -1628 b 250 -1712 265 -1710 261 -1712 b 228 -1691 236 -1712 228 -1704 l 228 -1685 l 234 -1675 b 270 -1507 258 -1621 270 -1564 b 98 -1193 270 -1381 209 -1261 b 40 -1174 76 -1179 58 -1174 b -10 -1189 24 -1174 8 -1178 b -20 -1192 -14 -1192 -16 -1192 l -24 -1192 l -24 -1052 l -24 -913 l -20 -913 b 0 -931 -9 -913 -2 -920 b 27 -995 4 -946 14 -974 b 138 -1128 53 -1043 88 -1085 b 257 -1275 190 -1172 228 -1220 b 262 -1283 259 -1279 262 -1283 l 262 -1283 b 269 -1249 264 -1282 268 -1260 b 270 -1206 270 -1233 270 -1220 b 98 -891 270 -1075 206 -957 b 40 -871 76 -877 58 -871 b -10 -886 24 -871 8 -875 b -20 -889 -14 -889 -16 -889 l -24 -889 l -24 -749 l -24 -610 l -20 -610 b 0 -628 -9 -610 -2 -617 b 27 -692 4 -644 14 -671 b 138 -825 53 -741 88 -782 b 257 -973 190 -870 228 -917 b 262 -981 259 -977 262 -981 l 262 -981 b 269 -946 264 -979 268 -957 b 270 -903 270 -931 270 -917 b 98 -588 270 -774 206 -655 b 40 -569 76 -574 58 -569 b -10 -584 24 -569 8 -574 b -20 -587 -14 -587 -16 -587 l -24 -587 l -24 -448 l -24 -308 l -20 -308 b 0 -326 -9 -308 -2 -315 b 27 -390 4 -341 14 -369 b 138 -523 53 -438 88 -480 b 257 -670 190 -567 228 -614 b 262 -678 259 -674 262 -678 b 262 -678 262 -678 262 -678 b 269 -644 264 -677 268 -656 b 270 -601 270 -628 270 -614 b 98 -285 270 -471 206 -352 b 40 -266 76 -273 58 -266 b -10 -281 24 -266 8 -272 b -20 -284 -14 -284 -16 -284 l -24 -284 l -24 -145 "},vaa:{x_min:-1.359375,x_max:752.703125,ha:768,o:"m 490 985 b 504 986 495 986 500 986 b 604 907 551 986 593 954 b 607 884 607 900 607 892 b 581 813 607 857 597 831 l 578 810 l 583 811 b 710 932 638 827 687 873 b 714 943 711 936 713 942 b 730 952 720 949 725 952 b 752 931 741 952 752 943 b 200 -946 752 927 204 -941 b 182 -957 197 -953 190 -957 b 163 -945 174 -957 166 -953 b 161 -939 161 -942 161 -942 b 217 -743 161 -931 170 -904 b 272 -555 247 -639 272 -555 b 272 -555 272 -555 272 -555 b 264 -560 272 -555 268 -557 b 140 -603 227 -589 182 -603 b 36 -567 102 -603 65 -592 b -1 -487 12 -548 -1 -517 b 17 -427 -1 -466 5 -445 b 103 -380 38 -395 70 -380 b 191 -433 137 -380 172 -398 b 205 -484 201 -448 205 -466 b 178 -553 205 -509 196 -535 l 175 -557 l 182 -555 b 307 -435 236 -539 284 -494 b 372 -213 308 -430 372 -215 b 372 -213 372 -213 372 -213 b 364 -219 372 -213 368 -216 b 240 -262 328 -247 283 -262 b 137 -226 202 -262 166 -249 b 99 -145 112 -206 99 -176 b 118 -84 99 -124 106 -104 b 204 -38 138 -54 171 -38 b 292 -91 238 -38 273 -56 b 306 -141 302 -106 306 -124 b 279 -212 306 -167 296 -194 l 276 -215 l 281 -213 b 408 -93 336 -198 385 -151 b 473 129 409 -88 473 127 b 473 129 473 129 473 129 b 465 122 473 129 469 126 b 341 80 428 94 383 80 b 236 115 303 80 266 91 b 200 195 213 136 200 165 b 217 256 200 217 206 238 b 304 303 239 287 272 303 b 393 249 338 303 374 285 b 406 199 402 234 406 217 b 379 129 406 173 397 148 l 377 126 l 382 127 b 509 248 436 142 485 190 b 574 470 510 254 574 469 b 574 470 574 470 574 470 b 566 464 574 470 570 467 b 442 421 529 435 484 421 b 337 458 404 421 367 433 b 300 538 314 477 300 508 b 318 598 300 559 306 580 b 404 645 340 630 372 645 b 494 592 439 645 475 627 b 507 541 502 577 507 559 b 480 471 507 516 498 489 l 477 467 l 483 470 b 608 589 537 485 586 531 b 675 811 611 595 675 810 b 675 811 675 811 675 811 b 666 806 675 811 671 809 b 543 763 628 777 585 763 b 438 799 504 763 468 775 b 401 878 412 820 401 849 b 490 985 401 928 434 977 "},vab:{x_min:0,x_max:272.21875,ha:278,o:"m 243 631 b 250 632 246 632 249 632 b 270 620 259 632 268 628 l 272 616 l 272 201 l 272 -212 l 270 -216 b 251 -229 268 -224 259 -229 b 227 -215 243 -229 240 -229 l 151 -142 b 32 -16 81 -80 53 -49 b 0 84 9 18 0 52 b 111 199 0 149 42 199 b 137 197 119 199 127 198 b 228 151 168 191 197 177 l 231 148 l 231 383 b 232 620 231 616 231 616 b 243 631 234 624 238 630 m 168 131 b 152 133 163 133 157 133 b 107 102 130 133 111 120 b 106 86 107 97 106 91 b 111 41 106 73 108 56 b 227 -152 125 -13 171 -90 l 231 -156 l 231 -37 l 231 80 l 225 87 b 168 131 210 111 190 126 "},vad:{x_min:0,x_max:873.828125,ha:892,o:"m 0 0 l 0 703 l 81 703 l 164 703 l 164 0 l 164 -705 l 81 -705 l 0 -705 l 0 0 m 225 0 l 225 703 l 246 703 l 268 703 l 268 366 l 268 30 l 274 36 b 314 79 284 44 302 63 b 413 302 357 137 392 213 b 432 327 419 324 421 327 b 449 306 443 327 447 322 b 611 115 457 195 529 115 b 651 122 624 115 638 117 b 728 316 705 140 724 188 b 729 388 728 342 729 366 b 671 635 729 533 711 602 b 581 662 649 652 616 662 b 477 637 545 662 510 653 l 475 635 l 477 634 b 503 627 488 632 495 631 b 545 556 532 612 545 584 b 491 480 545 524 526 491 b 465 474 481 476 473 474 b 379 563 417 474 379 516 b 389 602 379 576 382 588 b 541 691 409 641 479 681 b 582 694 555 692 568 694 b 865 462 714 694 834 598 b 873 392 871 440 873 416 b 865 317 873 367 871 341 b 639 84 839 194 748 101 b 612 83 630 83 620 83 b 511 116 577 83 543 94 b 504 120 509 119 506 120 b 504 120 504 120 504 120 b 469 59 504 120 488 93 l 432 -1 l 469 -61 b 504 -122 488 -94 504 -122 b 504 -122 504 -122 504 -122 b 511 -117 506 -122 509 -120 b 612 -84 543 -95 577 -84 b 665 -91 630 -84 647 -87 b 869 -338 771 -122 850 -216 b 873 -392 872 -356 873 -374 b 798 -595 873 -469 847 -539 b 581 -695 741 -662 660 -695 b 406 -626 517 -695 454 -671 b 381 -563 389 -607 381 -585 b 465 -477 381 -519 413 -477 b 545 -559 514 -477 545 -519 b 503 -628 545 -587 532 -613 b 477 -635 495 -632 488 -634 l 475 -637 l 477 -638 b 581 -663 510 -655 545 -663 b 671 -637 616 -663 649 -653 b 729 -391 711 -603 729 -534 b 728 -317 729 -367 728 -344 b 623 -117 722 -173 698 -124 b 611 -116 619 -116 615 -116 b 449 -308 528 -116 457 -198 b 432 -328 447 -323 443 -328 b 413 -303 421 -328 419 -326 b 314 -80 392 -215 357 -138 b 274 -37 302 -65 284 -45 l 268 -31 l 268 -367 l 268 -705 l 246 -705 l 225 -705 l 225 0 "},vb1:{x_min:78.9375,x_max:485.921875,ha:417,o:"m 362 378 b 378 380 367 380 372 380 b 472 348 415 380 453 367 b 485 315 481 338 485 327 b 462 273 485 298 477 281 b 439 267 454 269 446 267 b 398 290 424 267 409 274 b 344 319 385 309 364 319 b 281 269 315 319 289 301 b 279 262 280 266 279 262 b 276 256 279 260 277 258 b 274 249 276 254 274 251 b 238 127 273 248 257 192 b 201 4 217 61 201 5 b 166 -1 198 -1 200 -1 b 153 -1 163 -1 157 -1 b 141 -1 148 -1 144 -1 b 104 4 106 -1 107 -1 b 104 6 104 5 104 5 b 142 144 104 13 110 34 b 182 278 164 219 181 276 b 183 288 182 281 182 285 b 185 302 185 292 185 298 b 164 330 185 317 176 328 b 159 330 163 330 161 330 b 102 302 140 330 119 320 b 91 294 95 295 93 294 b 88 294 91 294 89 294 b 78 303 83 294 78 298 b 81 312 78 306 78 309 b 200 373 106 347 160 373 b 215 371 205 373 209 371 b 266 335 235 367 254 353 b 269 331 268 333 269 331 b 269 331 269 331 269 331 b 273 335 269 331 270 334 b 362 378 298 359 330 376 "},vb3:{x_min:0,x_max:227.3125,ha:232,o:"m 91 213 b 100 215 93 215 96 215 b 227 58 167 215 224 144 b 227 52 227 56 227 54 b 61 -201 227 -43 164 -138 b 29 -216 44 -212 36 -216 b 23 -210 27 -216 24 -213 b 21 -205 21 -208 21 -206 b 34 -192 21 -201 25 -197 b 122 -55 89 -161 122 -106 b 104 6 122 -33 117 -12 l 103 9 l 96 9 b 4 79 57 9 17 38 b 0 112 1 90 0 101 b 91 213 0 163 36 209 "},vb4:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -533 324 b -525 327 -530 326 -528 327 b -504 305 -514 327 -504 317 b -504 305 -504 305 -504 305 b -513 284 -504 299 -504 299 b -556 112 -541 226 -556 167 b -545 33 -556 84 -552 58 b -524 -20 -541 15 -532 -9 l -522 -23 l -491 15 l -413 111 b -355 174 -367 169 -363 174 b -351 174 -353 174 -352 174 b -254 86 -343 174 -348 179 b -168 -1 -208 37 -168 -1 b -100 84 -168 -1 -137 37 b -23 173 -28 173 -29 172 b -19 174 -21 174 -20 174 b -8 173 -14 174 -10 173 b 80 86 -5 172 13 151 b 166 -1 127 37 166 -1 b 235 84 166 -1 197 37 b 311 173 306 173 304 172 b 317 174 313 174 314 174 b 326 173 319 174 323 173 b 490 11 329 172 366 134 l 502 -1 l 530 34 b 568 76 560 72 563 74 b 575 77 570 77 573 77 b 596 56 586 77 596 68 b 594 48 596 54 596 51 b 417 -172 592 41 424 -166 b 405 -176 415 -174 409 -176 b 396 -174 401 -176 398 -176 b 307 -87 393 -173 372 -152 b 221 -1 259 -38 221 -1 b 152 -86 221 -1 190 -38 b 76 -176 81 -174 83 -173 b 70 -176 74 -176 73 -176 b 61 -174 66 -176 62 -174 b -27 -87 58 -173 38 -152 b -114 -1 -74 -38 -112 -1 b -182 -86 -114 -1 -145 -38 b -258 -176 -253 -174 -253 -173 b -264 -176 -259 -176 -262 -176 b -274 -174 -268 -176 -272 -174 b -438 -11 -277 -173 -348 -102 l -449 0 l -479 -37 b -524 -80 -513 -80 -514 -80 l -524 -80 b -553 -52 -534 -80 -540 -74 b -597 109 -583 -8 -597 48 b -560 280 -597 165 -585 224 b -533 324 -548 310 -540 322 "},vb6:{x_min:0,x_max:556.6875,ha:568,o:"m 289 545 b 298 546 292 545 295 546 b 318 533 306 546 315 541 b 319 428 319 530 319 528 l 319 327 l 334 327 b 526 223 412 326 485 285 b 543 172 537 206 543 190 b 447 76 543 122 503 76 b 445 76 446 76 446 76 b 359 165 394 77 359 119 b 368 205 359 179 362 192 b 441 251 382 233 412 251 b 455 249 446 251 451 251 b 460 248 458 249 460 248 b 460 248 460 248 460 248 b 454 254 460 249 458 251 b 334 295 419 280 378 294 l 319 295 l 319 4 l 319 -287 l 321 -285 b 328 -285 322 -285 325 -285 b 524 -99 424 -277 507 -198 b 541 -79 526 -84 530 -79 b 556 -97 551 -79 556 -84 b 548 -133 556 -105 553 -117 b 334 -317 521 -233 434 -306 b 322 -319 329 -317 323 -317 l 319 -319 l 319 -424 b 319 -471 319 -444 319 -459 b 313 -541 319 -544 318 -535 b 298 -548 308 -545 303 -548 b 279 -534 289 -548 281 -542 b 277 -424 277 -531 277 -530 l 277 -317 l 273 -317 b 13 -95 153 -305 51 -217 b 0 2 4 -62 0 -29 b 182 295 0 126 66 238 b 274 324 210 309 249 320 l 277 324 l 277 427 b 279 533 277 528 277 530 b 289 545 281 538 285 542 m 277 2 b 277 291 277 161 277 291 b 268 288 277 291 273 290 b 144 1 179 265 144 184 b 276 -284 144 -199 175 -267 l 277 -285 l 277 2 "},vb7:{x_min:-176.9375,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 503 20 616 20 614 b 20 391 20 442 20 391 b 84 424 20 391 49 406 l 147 456 l 152 456 b 153 456 153 456 153 456 b 175 435 166 456 175 446 b 172 427 175 433 174 430 b 92 380 170 420 172 421 l 20 342 l 20 245 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b 0 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 b -21 54 -21 -212 -21 -212 b -21 322 -21 201 -21 322 b -85 290 -21 322 -50 308 l -148 256 l -153 256 b -155 256 -155 256 -155 256 b -176 277 -167 256 -176 266 b -174 285 -176 280 -175 283 b -93 333 -171 294 -174 292 l -21 370 l -21 494 b -20 620 -21 616 -21 616 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},vb9:{x_min:-122.5,x_max:121.140625,ha:124,o:"m -16 145 b 0 147 -10 147 -5 147 b 121 -1 66 147 121 77 b 114 -49 121 -16 118 -33 b -1 -148 95 -112 47 -148 b -85 -106 -31 -148 -61 -134 b -122 -1 -110 -76 -122 -38 b -16 145 -122 68 -81 134 m 12 111 b 0 113 8 113 4 113 b -68 22 -29 113 -61 73 b -70 0 -69 15 -70 6 b -13 -113 -70 -49 -47 -98 b -1 -115 -9 -115 -5 -115 b 63 -40 24 -115 53 -83 b 68 -1 66 -27 68 -15 b 12 111 68 48 46 97 "},vba:{x_min:-118.421875,x_max:597.53125,ha:381,o:"m 460 574 b 464 574 461 574 462 574 b 488 574 470 574 481 574 b 500 573 491 574 498 574 b 594 503 543 570 588 538 b 597 488 596 498 597 494 b 528 417 597 449 564 417 b 502 423 519 417 510 419 b 465 481 477 434 465 458 b 488 528 465 499 472 516 b 490 530 490 530 490 530 b 490 530 490 530 490 530 b 468 517 488 530 475 523 b 349 340 419 485 377 420 b 347 330 348 334 347 330 b 383 328 347 328 363 328 b 428 326 423 328 424 328 b 442 302 438 320 442 312 b 430 281 442 294 438 285 b 385 276 424 277 426 276 l 377 276 l 332 276 l 330 269 b 178 -117 303 126 250 -9 b 1 -249 129 -194 69 -237 b -20 -251 -6 -251 -13 -251 b -114 -187 -65 -251 -100 -227 b -118 -156 -117 -177 -118 -166 b -51 -84 -118 -116 -91 -84 b -31 -87 -46 -84 -39 -86 b 16 -152 0 -95 16 -124 b -12 -205 16 -173 8 -194 b -16 -208 -14 -206 -16 -208 b -14 -208 -16 -208 -14 -208 b -9 -206 -14 -208 -12 -208 b 74 -124 23 -197 54 -166 b 172 224 98 -79 125 22 b 185 276 178 252 183 274 b 185 276 185 276 185 276 b 141 276 185 276 181 276 b 91 280 96 276 96 276 b 77 302 83 285 77 294 b 91 326 77 312 83 320 b 148 328 95 328 96 328 l 198 330 l 202 341 b 460 574 249 473 351 566 "},vbf:{x_min:-53.078125,x_max:513.140625,ha:485,o:"m 185 383 b 196 384 187 383 191 384 b 277 334 230 384 259 365 b 288 301 281 324 288 306 b 288 297 288 298 288 297 b 294 302 289 297 291 299 b 394 370 323 338 367 367 b 404 371 398 370 401 371 b 510 272 453 371 498 328 b 513 237 513 262 513 251 b 507 172 513 217 511 192 b 326 -34 487 59 412 -26 b 314 -36 322 -36 318 -36 b 274 -24 298 -36 283 -31 l 265 -16 b 224 44 246 -1 232 20 b 223 49 224 47 223 49 b 223 49 223 49 223 49 b 149 -197 221 48 149 -194 b 149 -198 149 -197 149 -198 b 170 -210 149 -202 155 -205 b 187 -215 174 -210 175 -212 b 204 -231 201 -219 204 -222 b 197 -245 204 -240 202 -242 l 194 -248 l 76 -248 l -42 -248 l -46 -245 b -53 -231 -51 -242 -53 -240 b -35 -215 -53 -222 -49 -217 b -13 -210 -21 -212 -20 -212 b -6 -208 -10 -209 -8 -208 b 0 -206 -6 -208 -2 -206 b 25 -188 13 -201 21 -195 b 163 280 28 -183 163 276 b 166 291 163 283 164 287 b 167 302 167 295 167 299 b 155 324 167 315 161 324 b 155 324 155 324 155 324 b 65 230 125 322 85 280 b 53 215 61 217 58 215 b 51 215 53 215 51 215 b 42 224 46 215 42 217 b 57 263 42 231 47 244 b 140 360 77 305 104 337 b 152 370 144 365 149 369 b 185 383 157 376 172 381 m 374 306 b 366 308 371 308 368 308 b 300 273 348 308 321 294 b 284 254 288 262 287 259 b 280 242 283 249 281 245 b 257 169 279 240 270 213 l 236 98 l 236 93 b 251 48 238 77 243 61 b 279 27 258 37 272 27 b 281 27 279 27 280 27 b 291 31 281 27 287 30 b 396 170 334 52 378 109 b 406 247 402 197 406 224 b 401 277 406 259 405 270 b 374 306 397 290 383 303 "},vc3:{x_min:-10.890625,x_max:299.4375,ha:294,o:"m 136 460 b 142 462 137 462 140 462 b 166 449 152 462 161 456 b 171 428 168 446 168 445 b 288 131 194 322 238 209 b 298 115 295 120 296 117 b 299 106 298 112 299 109 b 273 81 299 91 287 81 b 255 86 268 81 261 83 b 155 116 225 104 183 116 l 152 116 l 149 108 b 141 83 148 102 144 91 b 134 48 137 69 134 58 b 149 9 134 34 140 24 b 153 -1 152 5 153 1 b 149 -9 153 -5 152 -6 b 144 -11 148 -11 147 -11 b 122 2 138 -11 133 -6 b 95 61 104 20 95 38 b 107 108 95 74 99 90 b 108 113 107 111 108 112 b 107 113 108 113 108 113 b 102 113 106 113 104 113 b 31 86 76 108 53 98 b 14 80 24 81 20 80 b -10 106 0 80 -10 91 b 0 131 -10 115 -9 116 b 115 430 49 209 91 317 b 136 460 119 451 123 456 "},vd0:{x_min:-10.890625,x_max:299.4375,ha:294,o:"m 44 174 b 51 174 47 174 49 174 b 68 173 55 174 61 174 l 287 112 l 551 40 b 615 20 617 22 609 23 b 626 0 622 16 626 8 b 615 -22 626 -9 622 -18 b 613 -23 613 -23 613 -23 b 613 -23 613 -23 613 -23 b 287 -113 613 -24 597 -29 l 68 -174 b 53 -176 61 -176 57 -176 b 39 -172 47 -176 43 -174 b 27 -151 31 -167 27 -159 b 39 -129 27 -141 31 -133 b 230 -74 43 -124 20 -131 l 370 -36 l 468 -9 b 498 0 484 -4 498 -1 b 468 8 498 0 484 2 l 370 34 l 230 73 b 40 126 28 129 43 124 b 27 149 31 131 27 140 b 44 174 27 161 34 170 m 205 110 l 205 300 b 205 330 245 330 245 300 l 245 300 l 245 -300 b 245 -330 205 -330 205 -300 l 205 -300 l 205 110 l 345 90 m 345 90 l 345 330 b 345 360 385 360 385 330 l 385 330 l 385 -270 b 385 -300 345 -300 345 -270 l 345 -270 l 345 90 "},vd1:{x_min:-20,x_max:320,ha:257,o:"m -8 200 b -8 210 8 200 16 200 l 20 148 -199 l 23 -615 b 0 -629 9 -629 6 -629 l -21 -612 l -21 -201 l -21 216 l -20 200 m 16 200 l 310 0 l 240 0 l 16 140 l 16 -120 l 240 0 l 310 0 l 16 -200 "},vd2:{x_min:0,x_max:430.75,ha:386,o:"m 0 200 l 0 -200 l 430 -200 l 430 200 l 0 200 "},vd3:{x_min:0,x_max:430.75,ha:386,o:"m 0 200 l 0 -200 l 430 -200 l 430 200 l 0 200 l 50 150 l 380 150 l 380 -150 l 50 -150 l 50 150 "},vd4:{x_min:0,x_max:430.75,ha:360,o:"m 0 150 l 0 -150 l 430 -150 l 430 150 l 0 150 "},vd5:{x_min:0,x_max:430.75,ha:360,o:"m 0 150 l 0 -150 l 430 -150 l 430 150 l 0 150 l 50 100 l 380 100 l 380 -100 l 50 -100 l 50 100"},vd6:{x_min:0,x_max:430.75,ha:360,o:"m -146 537 b -138 538 -143 538 -141 538 b -118 525 -129 538 -121 533 b -117 390 -117 522 -117 521 b -115 259 -117 268 -117 259 b -115 259 -115 259 -115 259 b -59 272 -104 263 -62 272 b -39 259 -50 272 -42 267 b -37 209 -38 257 -37 233 b -39 159 -37 185 -38 162 b -85 138 -43 149 -44 149 l -117 131 l -117 21 b -115 -88 -117 -80 -117 -88 b -115 -88 -115 -88 -115 -88 b -59 -75 -104 -84 -62 -75 b -44 -81 -52 -75 -48 -77 b -38 -124 -38 -87 -38 -85 b -38 -138 -38 -124 -38 -138 b -38 -152 -38 -138 -38 -152 b -44 -195 -38 -191 -38 -190 b -85 -209 -48 -200 -48 -200 l -117 -217 l -117 -349 b -118 -486 -117 -481 -117 -482 b -138 -499 -121 -494 -129 -499 b -153 -493 -143 -499 -149 -497 b -159 -415 -158 -487 -159 -496 b -159 -355 -159 -398 -159 -379 b -159 -227 -159 -284 -159 -227 b -205 -238 -159 -227 -180 -232 b -250 -249 -230 -244 -250 -249 b -251 -386 -251 -249 -251 -311 b -252 -525 -251 -521 -251 -522 b -272 -538 -255 -534 -264 -538 b -287 -532 -277 -538 -283 -536 b -293 -452 -292 -527 -293 -536 b -293 -391 -293 -436 -293 -415 b -294 -260 -293 -269 -293 -260 b -294 -260 -294 -260 -294 -260 b -348 -272 -306 -264 -345 -272 b -368 -259 -357 -272 -365 -267 b -369 -209 -369 -257 -369 -233 b -368 -159 -369 -185 -369 -162 b -323 -139 -364 -149 -362 -148 l -293 -131 l -293 -22 b -294 87 -293 80 -293 87 b -294 87 -294 87 -294 87 b -348 75 -306 84 -345 75 b -368 88 -357 75 -365 80 b -369 138 -369 91 -369 114 b -368 188 -369 162 -369 186 b -323 209 -364 198 -362 199 l -293 216 l -293 349 b -292 486 -293 481 -293 482 b -272 499 -288 494 -280 499 b -257 493 -266 499 -261 497 b -251 414 -251 487 -251 496 b -251 354 -251 398 -251 378 b -251 226 -251 284 -251 226 b -205 238 -250 226 -230 231 b -159 249 -180 244 -159 249 b -159 385 -159 249 -159 310 b -157 525 -159 521 -159 522 b -146 537 -156 530 -151 535 z m -159 11 b -159 120 -159 98 -159 120 l -159 120 b -175 116 -160 120 -167 119 b -221 105 -184 114 -204 109 l -251 98 l -251 -12 b -251 -121 -251 -72 -251 -121 b -205 -110 -250 -121 -230 -116 b -159 -99 -180 -104 -159 -99 b -159 11 -159 -99 -159 -49 z m 89 517 b 97 519 92 518 94 519 b 117 505 106 519 114 513 b 119 376 119 502 119 501 l 119 249 l 145 258 b 176 267 169 266 172 267 b 177 267 176 267 177 267 b 196 255 186 267 192 263 l 197 252 l 197 205 b 197 181 197 195 197 187 b 193 149 197 153 197 153 b 152 131 190 144 187 143 l 119 120 l 119 10 b 119 -100 119 -62 119 -100 b 145 -91 120 -100 131 -96 b 173 -82 159 -86 171 -82 b 176 -81 174 -81 175 -81 b 196 -94 185 -81 193 -87 b 198 -151 197 -97 198 -125 b 197 -194 198 -172 197 -192 b 153 -218 193 -203 192 -204 l 119 -230 l 119 -367 l 118 -504 l 117 -507 b 97 -519 113 -514 105 -519 b 82 -512 92 -519 87 -517 b 76 -434 77 -507 76 -516 b 76 -374 76 -418 76 -398 b 76 -245 76 -303 76 -245 b 52 -254 76 -245 65 -249 b 19 -263 34 -260 25 -263 b 6 -257 13 -263 10 -261 b 0 -214 0 -251 0 -253 b 0 -200 0 -210 0 -205 b 0 -188 0 -196 0 -192 b 6 -143 0 -147 0 -149 b 46 -126 10 -139 10 -139 l 76 -115 l 76 -5 b 76 106 76 56 76 106 b 51 98 76 106 64 102 b 18 89 34 92 25 89 b 6 95 13 89 10 91 b 0 139 0 101 0 99 b 0 153 0 143 0 148 b 0 179 0 163 0 172 b 44 225 0 215 3 211 l 76 236 l 76 369 b 78 505 76 501 76 502 b 89 517 80 510 85 515 z "},vd7:{x_min:0,x_max:430.75,ha:360,o:"m 283 633 b 291 634 286 634 289 634 b 311 621 300 634 308 629 b 313 505 313 618 313 617 b 313 393 313 443 313 393 b 378 425 313 393 343 407 l 443 458 l 448 458 b 449 458 449 458 449 458 b 471 437 462 458 471 448 b 469 429 471 434 470 432 b 387 382 466 421 469 423 l 313 344 l 313 247 l 313 150 l 315 152 b 433 201 353 184 394 201 b 479 193 448 201 464 198 b 549 86 524 177 549 135 b 526 1 549 59 541 29 b 395 -143 504 -39 475 -71 b 316 -214 351 -182 341 -191 b 292 -229 302 -228 300 -229 b 272 -216 283 -229 275 -224 b 271 55 271 -212 271 -212 b 270 323 271 203 270 323 b 205 291 270 323 241 308 l 140 258 l 135 258 b 134 258 135 258 134 258 b 112 279 121 258 112 267 b 114 287 112 281 113 284 b 196 334 117 295 114 293 l 271 371 l 271 495 b 272 621 271 617 271 618 b 283 633 274 626 279 631 z m 404 133 b 391 134 400 134 395 134 b 384 134 388 134 386 134 b 318 88 358 130 335 114 l 313 81 l 313 -37 l 313 -156 l 316 -152 b 439 83 391 -71 439 22 l 439 84 b 404 133 439 115 430 128 z m -8 633 l -8 633 b 0 634 -6 634 -3 634 b 20 621 8 634 17 629 b 21 384 21 618 21 617 l 21 150 l 24 152 b 141 201 62 184 102 201 b 187 193 157 201 172 198 b 257 86 232 177 257 135 b 234 1 257 59 250 29 b 103 -143 212 -39 183 -71 b 24 -214 60 -182 49 -191 b 0 -229 10 -228 8 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 203 l -21 618 l -20 621 b -8 633 -18 626 -13 631 z m 113 133 l 113 133 b 99 134 109 134 103 134 b 93 134 97 134 94 134 b 26 88 66 130 43 114 l 21 81 l 21 -37 l 21 -156 l 25 -152 b 148 83 99 -71 148 22 l 148 84 b 113 133 148 115 138 128 z "},rwl:{x_min:0,x_max:737.71875,ha:753,o:"m 9 13 b 208 15 10 15 51 15 b 368 15 251 15 304 15 l 726 15 l 729 12 b 737 -1 735 9 737 4 b 729 -15 737 -6 735 -11 l 726 -16 l 660 -16 l 592 -16 l 592 -95 l 592 -174 l 368 -174 l 144 -174 l 144 -95 l 144 -16 l 77 -16 l 9 -16 l 6 -15 b 0 -1 1 -11 0 -6 b 9 13 0 5 2 11 "},rhl:{x_min:0,x_max:737.71875,ha:753,o:"m 144 94 l 144 173 l 368 173 l 592 173 l 592 94 l 592 15 l 660 15 l 726 15 l 729 12 b 737 -1 735 9 737 4 b 729 -15 737 -6 735 -11 l 726 -16 l 368 -16 l 9 -16 l 6 -15 b 0 -1 1 -11 0 -6 b 6 12 0 4 1 9 l 9 15 l 77 15 l 144 15 l 144 94 "}},cssFontWeight:"normal",ascender:1903,underlinePosition:-125,cssFontStyle:"normal",boundingBox:{yMin:-2065.375,xMin:-695.53125,yMax:1901.578125,xMax:1159.671875},resolution:1e3,descender:-2066,familyName:"VexFlow-18",lineHeight:4093,underlineThickness:50};function f(e,t,i,n,s,r){let o,a,l,c=0;function h(){return t+e[c++]*n}function u(){return i+e[c++]*s}for(;c<e.length;)switch(o=e[c++],o){case"m":case"l":r[o](h(),u());break;case"q":a=h(),l=u(),r.q(h(),u(),a,l);break;case"b":a=h(),l=u(),r.b(h(),u(),h(),u(),a,l)}}class p extends c{static loadMetrics(e,t,i){const s=e.glyphs[t];if(!s)throw new n.RERR("BadGlyph","Glyph ".concat(t," does not exist in font."));const r=s.x_min,o=s.x_max,a=s.ha;let l;if(s.o)return i?s.cached_outline?l=s.cached_outline:(l=s.o.split(" "),s.cached_outline=l):(s.cached_outline&&delete s.cached_outline,l=s.o.split(" ")),{x_min:r,x_max:o,ha:a,outline:l};throw new n.RERR("BadGlyph","Glyph ".concat(t," has no outline defined."))}static renderGlyph(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";const a=72*n/(100*d.resolution),l=p.loadMetrics(d,s,!r);p.renderOutline(e,l.outline,a,t,i,o)}static renderOutline(e,t,i,s,r){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";e.beginPath(),e.moveTo(s,r),f(t,s,r,i,-i,{m:e.moveTo.bind(e),l:e.lineTo.bind(e),q:e.quadraticCurveTo.bind(e),b:e.bezierCurveTo.bind(e)}),{class:n.Prefix("notehead")}.id=o,e.fill()}static getOutlineBoundingBox(e,t,i,n){const s=new h;return f(e,i,n,t,-t,{m:s.addPoint.bind(s),l:s.addPoint.bind(s),q:s.addQuadraticCurve.bind(s),b:s.addBezierCurve.bind(s)}),new u(s.x1,s.y1,s.width(),s.height())}constructor(e,t,i){super(),this.setAttribute("type","Glyph"),this.code=e,this.point=t,this.options={cache:!0,font:d},this.metrics=null,this.x_shift=0,this.y_shift=0,this.originShift={x:0,y:0},i?this.setOptions(i):this.reset()}setOptions(e){n.Merge(this.options,e),this.reset()}setPoint(e){return this.point=e,this}setStave(e){return this.stave=e,this}setXShift(e){return this.x_shift=e,this}setYShift(e){return this.y_shift=e,this}reset(){this.scale=72*this.point/(100*this.options.font.resolution),this.metrics=p.loadMetrics(this.options.font,this.code,this.options.cache),this.bbox=p.getOutlineBoundingBox(this.metrics.outline,this.scale,0,0)}getMetrics(){if(!this.metrics)throw new n.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));return{x_min:this.metrics.x_min*this.scale,x_max:this.metrics.x_max*this.scale,width:this.bbox.getW(),height:this.bbox.getH()}}setOriginX(e){const{bbox:t}=this,i=(e-Math.abs(t.getX()/t.getW()))*t.getW();this.originShift.x=-i}setOriginY(e){const{bbox:t}=this,i=(e-Math.abs(t.getY()/t.getH()))*t.getH();this.originShift.y=-i}setOrigin(e,t){this.setOriginX(e),this.setOriginY(t)}render(e,t,i){if(!this.metrics)throw new n.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));const s=this.metrics.outline,r=this.scale;this.setRendered(),this.applyStyle(e),p.renderOutline(e,s,r,t+this.originShift.x,i+this.originShift.y),this.restoreStyle(e)}renderToStave(e){if(this.checkContext(),!this.metrics)throw new n.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));if(!this.stave)throw new n.RuntimeError("GlyphError","No valid stave");const t=this.metrics.outline,i=this.scale;this.setRendered(),this.applyStyle(),p.renderOutline(this.context,t,i,e+this.x_shift,this.stave.getYForGlyphs()+this.y_shift),this.restoreStyle()}}const m={STEM_WIDTH:1.5,STEM_HEIGHT:35,STAVE_LINE_THICKNESS:1,RESOLUTION:16384,DEFAULT_NOTATION_FONT_SCALE:39,DEFAULT_TABLATURE_FONT_SCALE:39,SLASH_NOTEHEAD_WIDTH:15,TEXT_HEIGHT_OFFSET_HACK:1,IsKerned:!0,clefProperties:e=>{if(!e)throw new n.RERR("BadArgument","Invalid clef: "+e);const t=m.clefProperties.values[e];if(!t)throw new n.RERR("BadArgument","Invalid clef: "+e);return t}};m.clefProperties.values={treble:{line_shift:0},bass:{line_shift:6},tenor:{line_shift:4},alto:{line_shift:3},soprano:{line_shift:1},percussion:{line_shift:0},"mezzo-soprano":{line_shift:2},"baritone-c":{line_shift:5},"baritone-f":{line_shift:5},subbass:{line_shift:7},french:{line_shift:-1}},m.keyProperties=(e,t,i)=>{void 0===t&&(t="treble");const r={octave_shift:0};"object"==typeof i&&n.Merge(r,i);const o=e.split("/");if(o.length<2)throw new n.RERR("BadArguments","Key must have note + octave and an optional glyph: ".concat(e));const a=o[0].toUpperCase(),l=m.keyProperties.note_values[a];if(!l)throw new n.RERR("BadArguments","Invalid key name: "+a);l.octave&&(o[1]=l.octave);let c=parseInt(o[1],10);c-=r.octave_shift;let h=(7*c-28+l.index)/2;h+=m.clefProperties(t).line_shift;let u=0;h<=0&&2*h%2==0&&(u=1),h>=6&&2*h%2==0&&(u=-1);const d=void 0!==l.int_val?12*c+l.int_val:null,f=l.code,p=l.shift_right;let g={};if(o.length>2&&o[2]){const e=o[2].toUpperCase();g=m.keyProperties.customNoteHeads[e]||{}}return s({key:a,octave:c,line:h,int_value:d,accidental:l.accidental,code:f,stroke:u,shift_right:p,displaced:!1},g)},m.keyProperties.note_values={C:{index:0,int_val:0,accidental:null},CN:{index:0,int_val:0,accidental:"n"},"C#":{index:0,int_val:1,accidental:"#"},"C##":{index:0,int_val:2,accidental:"##"},CB:{index:0,int_val:-1,accidental:"b"},CBB:{index:0,int_val:-2,accidental:"bb"},D:{index:1,int_val:2,accidental:null},DN:{index:1,int_val:2,accidental:"n"},"D#":{index:1,int_val:3,accidental:"#"},"D##":{index:1,int_val:4,accidental:"##"},DB:{index:1,int_val:1,accidental:"b"},DBB:{index:1,int_val:0,accidental:"bb"},E:{index:2,int_val:4,accidental:null},EN:{index:2,int_val:4,accidental:"n"},"E#":{index:2,int_val:5,accidental:"#"},"E##":{index:2,int_val:6,accidental:"##"},EB:{index:2,int_val:3,accidental:"b"},EBB:{index:2,int_val:2,accidental:"bb"},F:{index:3,int_val:5,accidental:null},FN:{index:3,int_val:5,accidental:"n"},"F#":{index:3,int_val:6,accidental:"#"},"F##":{index:3,int_val:7,accidental:"##"},FB:{index:3,int_val:4,accidental:"b"},FBB:{index:3,int_val:3,accidental:"bb"},G:{index:4,int_val:7,accidental:null},GN:{index:4,int_val:7,accidental:"n"},"G#":{index:4,int_val:8,accidental:"#"},"G##":{index:4,int_val:9,accidental:"##"},GB:{index:4,int_val:6,accidental:"b"},GBB:{index:4,int_val:5,accidental:"bb"},A:{index:5,int_val:9,accidental:null},AN:{index:5,int_val:9,accidental:"n"},"A#":{index:5,int_val:10,accidental:"#"},"A##":{index:5,int_val:11,accidental:"##"},AB:{index:5,int_val:8,accidental:"b"},ABB:{index:5,int_val:7,accidental:"bb"},B:{index:6,int_val:11,accidental:null},BN:{index:6,int_val:11,accidental:"n"},"B#":{index:6,int_val:12,accidental:"#"},"B##":{index:6,int_val:13,accidental:"##"},BB:{index:6,int_val:10,accidental:"b"},BBB:{index:6,int_val:9,accidental:"bb"},R:{index:6,int_val:9,rest:!0},X:{index:6,accidental:"",octave:4,code:"v3e",shift_right:5.5}},m.keyProperties.customNoteHeads={D0:{code:"v27",shift_right:0,stem_up_x_offset:0,stem_down_x_offset:0,stem_up_y_offset:-1,stem_down_y_offset:0},D1:{code:"v2d",shift_right:-.5},D2:{code:"v22",shift_right:-.5},D3:{code:"v70",shift_right:-.5},T0:{code:"v49",shift_right:-2,stem_up_y_offset:-4,stem_down_y_offset:4},T1:{code:"v93",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},T2:{code:"v40",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},T3:{code:"v7d",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},TI:{code:"v11",shift_right:0,stem_up_y_shift:5,stem_down_y_shift:5,stem_up_x_offset:6,stem_down_x_offset:4},X0:{code:"v92",stem_up_x_offset:-2,stem_down_x_offset:0,stem_up_y_offset:4,stem_down_y_offset:4},X1:{code:"v95",shift_right:-.5,stem_up_y_offset:4,stem_down_y_offset:4},X2:{code:"v3e",shift_right:.5,stem_up_y_offset:4,stem_down_y_offset:4},X3:{code:"v3b",shift_right:0,stem_up_x_offset:-1.2,stem_down_x_offset:0,stem_up_y_offset:-1,stem_down_y_offset:2},S1:{code:"vd3",shift_right:0},S2:{code:"vd2",shift_right:0},R1:{code:"vd5",shift_right:0},R2:{code:"vd4",shift_right:0},rwl:{code:"rwl",shift_right:0},rhl:{code:"rhl",shift_right:0}},m.integerToNote=e=>{if(void 0===e)throw new n.RERR("BadArguments","Undefined integer for integerToNote");if(e<-2)throw new n.RERR("BadArguments","integerToNote requires integer > -2: ".concat(e));const t=m.integerToNote.table[e];if(!t)throw new n.RERR("BadArguments","Unknown note value for integer: ".concat(e));return t},m.integerToNote.table={0:"C",1:"C#",2:"D",3:"D#",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"A#",11:"B"},m.tabToGlyph=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=null,s=0,r=0;if("X"===e.toString().toUpperCase()){n="v7f",i&&(n="v3e");const e=new p(n,m.DEFAULT_TABLATURE_FONT_SCALE*t).getMetrics();s=e.width,r=-e.height/2}else s=m.textWidth(e.toString());return{text:e,code:n,getWidth:()=>s*t,shift_y:r}},m.textWidth=e=>7*e.toString().length,m.articulationCodes=e=>m.articulationCodes.articulations[e],m.articulationCodes.articulations={"a.":{code:"v23",between_lines:!0},av:{code:"v28",between_lines:!0},"a>":{code:"v42",between_lines:!0},"a-":{code:"v25",between_lines:!0},"a^":{code:"va",between_lines:!1},"a+":{code:"v8b",between_lines:!1},ao:{code:"v94",between_lines:!1},ah:{code:"vb9",between_lines:!1},"a@a":{code:"v43",between_lines:!1},"a@u":{code:"v5b",between_lines:!1},"a|":{code:"v75",between_lines:!1},am:{code:"v97",between_lines:!1},"a,":{code:"vb3",between_lines:!1}},m.accidentalCodes=e=>m.accidentalCodes.accidentals[e],m.accidentalCodes.accidentals={"#":{code:"v18",parenRightPaddingAdjustment:-1},"##":{code:"v7f",parenRightPaddingAdjustment:-1},b:{code:"v44",parenRightPaddingAdjustment:-2},bb:{code:"v26",parenRightPaddingAdjustment:-2},n:{code:"v4e",parenRightPaddingAdjustment:-1},"{":{code:"v9c",parenRightPaddingAdjustment:-1},"}":{code:"v84",parenRightPaddingAdjustment:-1},db:{code:"v9e",parenRightPaddingAdjustment:-1},d:{code:"vab",parenRightPaddingAdjustment:0},bbs:{code:"v90",parenRightPaddingAdjustment:-1},"++":{code:"v51",parenRightPaddingAdjustment:-1},"+":{code:"v78",parenRightPaddingAdjustment:-1},"+-":{code:"v8d",parenRightPaddingAdjustment:-1},"++-":{code:"v7a",parenRightPaddingAdjustment:-1},bs:{code:"vb7",parenRightPaddingAdjustment:-1},bss:{code:"v39",parenRightPaddingAdjustment:-1},o:{code:"vd0",parenRightPaddingAdjustment:-1},k:{code:"vd1",parenRightPaddingAdjustment:-1},ashs:{code:"vd6",parenRightPaddingAdjustment:-1},afhf:{code:"vd7",parenRightPaddingAdjustment:-1}},m.accidentalColumnsTable={1:{a:[1],b:[1]},2:{a:[1,2]},3:{a:[1,3,2],b:[1,2,1],second_on_bottom:[1,2,3]},4:{a:[1,3,4,2],b:[1,2,3,1],spaced_out_tetrachord:[1,2,1,2]},5:{a:[1,3,5,4,2],b:[1,2,4,3,1],spaced_out_pentachord:[1,2,3,2,1],very_spaced_out_pentachord:[1,2,1,2,1]},6:{a:[1,3,5,6,4,2],b:[1,2,4,5,3,1],spaced_out_hexachord:[1,3,2,1,3,2],very_spaced_out_hexachord:[1,2,1,2,1,2]}},m.ornamentCodes=e=>m.ornamentCodes.ornaments[e],m.ornamentCodes.ornaments={mordent:{code:"v1e"},mordent_inverted:{code:"v45"},turn:{code:"v72"},turn_inverted:{code:"v33"},tr:{code:"v1f"},upprall:{code:"v60"},downprall:{code:"vb4"},prallup:{code:"v6d"},pralldown:{code:"v2c"},upmordent:{code:"v29"},downmordent:{code:"v68"},lineprall:{code:"v20"},prallprall:{code:"v86"}},m.keySignature=e=>{const t=m.keySignature.keySpecs[e];if(!t)throw new n.RERR("BadKeySignature","Bad key signature spec: '".concat(e,"'"));if(!t.acc)return[];const i=m.keySignature.accidentalList(t.acc),s=[];for(let n=0;n<t.num;++n){const e=i[n];s.push({type:t.acc,line:e})}return s},m.keySignature.keySpecs={C:{acc:null,num:0},Am:{acc:null,num:0},F:{acc:"b",num:1},Dm:{acc:"b",num:1},Bb:{acc:"b",num:2},Gm:{acc:"b",num:2},Eb:{acc:"b",num:3},Cm:{acc:"b",num:3},Ab:{acc:"b",num:4},Fm:{acc:"b",num:4},Db:{acc:"b",num:5},Bbm:{acc:"b",num:5},Gb:{acc:"b",num:6},Ebm:{acc:"b",num:6},Cb:{acc:"b",num:7},Abm:{acc:"b",num:7},G:{acc:"#",num:1},Em:{acc:"#",num:1},D:{acc:"#",num:2},Bm:{acc:"#",num:2},A:{acc:"#",num:3},"F#m":{acc:"#",num:3},E:{acc:"#",num:4},"C#m":{acc:"#",num:4},B:{acc:"#",num:5},"G#m":{acc:"#",num:5},"F#":{acc:"#",num:6},"D#m":{acc:"#",num:6},"C#":{acc:"#",num:7},"A#m":{acc:"#",num:7}},m.unicode={sharp:String.fromCharCode(parseInt("266F",16)),flat:String.fromCharCode(parseInt("266D",16)),natural:String.fromCharCode(parseInt("266E",16)),triangle:String.fromCharCode(parseInt("25B3",16)),"o-with-slash":String.fromCharCode(parseInt("00F8",16)),degrees:String.fromCharCode(parseInt("00B0",16)),circle:String.fromCharCode(parseInt("25CB",16))},m.keySignature.accidentalList=e=>({b:[2,.5,2.5,1,3,1.5,3.5],"#":[0,1.5,-.5,1,2.5,.5,2]}[e]),m.parseNoteDurationString=e=>{if("string"!=typeof e)return null;const t=/(\d*\/?\d+|[a-z])(d*)([nrhms]|$)/.exec(e);if(!t)return null;const i=t[1],n=t[2].length;let s=t[3];return 0===s.length&&(s="n"),{duration:i,dots:n,type:s}},m.parseNoteStruct=e=>{const t=e.duration,i=m.parseNoteDurationString(t);if(!i)return null;let n=m.durationToTicks(i.duration);if(null==n)return null;let s=e.type;const r=[];if(s){if(!m.getGlyphProps.validTypes[s])return null}else s=i.type||"n",void 0!==e.keys&&e.keys.forEach(((e,t)=>{const i=e.split("/");i&&3===i.length&&(r[t]=i[2])}));const o=e.dots?e.dots:i.dots;if("number"!=typeof o)return null;let a=n;for(let l=0;l<o;l++){if(a<=1)return null;a/=2,n+=a}return{duration:i.duration,type:s,customTypes:r,dots:o,ticks:n}},m.sanitizeDuration=e=>{const t=m.durationAliases[e];if(void 0!==t&&(e=t),void 0===m.durationToTicks.durations[e])throw new n.RERR("BadArguments","The provided duration is not valid: ".concat(e));return e},m.durationToFraction=e=>(new r).parse(m.sanitizeDuration(e)),m.durationToNumber=e=>m.durationToFraction(e).value(),m.durationToTicks=e=>{e=m.sanitizeDuration(e);const t=m.durationToTicks.durations[e];return void 0===t?null:t},m.durationToTicks.durations={"1/2":2*m.RESOLUTION,1:m.RESOLUTION/1,2:m.RESOLUTION/2,4:m.RESOLUTION/4,8:m.RESOLUTION/8,16:m.RESOLUTION/16,32:m.RESOLUTION/32,64:m.RESOLUTION/64,128:m.RESOLUTION/128,256:m.RESOLUTION/256},m.durationAliases={w:"1",h:"2",q:"4",b:"256"},m.getGlyphProps=(e,t)=>{e=m.sanitizeDuration(e);const i=m.getGlyphProps.duration_codes[e];if(void 0===i)return null;t||(t="n");let n=i.type[t];if(void 0===n){const e=m.keyProperties.customNoteHeads[t.toUpperCase()];if(void 0===e)return null;n=s({code_head:e.code},e)}return s(s({},i.common),n)},m.getGlyphProps.validTypes={n:{name:"note"},r:{name:"rest"},h:{name:"harmonic"},m:{name:"muted"},s:{name:"slash"}},m.getGlyphProps.duration_codes={"1/2":{common:{getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"v53",e).getMetrics().width},stem:!1,stem_offset:0,flag:!1,stem_up_extension:-m.STEM_HEIGHT,stem_down_extension:-m.STEM_HEIGHT,tabnote_stem_up_extension:-m.STEM_HEIGHT,tabnote_stem_down_extension:-m.STEM_HEIGHT,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v53"},h:{code_head:"v59"},m:{code_head:"vf",stem_offset:0},r:{code_head:"v31",rest:!0,position:"B/5",dot_shiftY:.5},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},1:{common:{getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"v1d",e).getMetrics().width},stem:!1,stem_offset:0,flag:!1,stem_up_extension:-m.STEM_HEIGHT,stem_down_extension:-m.STEM_HEIGHT,tabnote_stem_up_extension:-m.STEM_HEIGHT,tabnote_stem_down_extension:-m.STEM_HEIGHT,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v1d"},h:{code_head:"v46"},m:{code_head:"v92",stem_offset:-3},r:{code_head:"v5c",rest:!0,position:"D/5",dot_shiftY:.5},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},2:{common:{getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"v81",e).getMetrics().width},stem:!0,stem_offset:0,flag:!1,stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v81"},h:{code_head:"v2d"},m:{code_head:"v95",stem_offset:-3},r:{code_head:"vc",stem:!1,rest:!0,position:"B/4",dot_shiftY:-.5},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},4:{common:{getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"vb",e).getMetrics().width},stem:!0,stem_offset:0,flag:!1,stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e",stem_offset:-3},r:{code_head:"v7c",stem:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1.5,line_below:1.5},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},8:{common:{getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"vb",e).getMetrics().width},stem:!0,stem_offset:0,flag:!0,beam_count:1,code_flag_upstem:"v54",code_flag_downstem:"v9a",stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"va5",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1,line_below:1},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},16:{common:{beam_count:2,getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"vb",e).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v3f",code_flag_downstem:"v8f",stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v3c",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1,line_below:2},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},32:{common:{beam_count:3,getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"vb",e).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v47",code_flag_downstem:"v2a",stem_up_extension:9,stem_down_extension:9,tabnote_stem_up_extension:8,tabnote_stem_down_extension:5,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v55",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-1.5,line_above:2,line_below:2},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},64:{common:{beam_count:4,getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"vb",e).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"va9",code_flag_downstem:"v58",stem_up_extension:13,stem_down_extension:13,tabnote_stem_up_extension:12,tabnote_stem_down_extension:9,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v38",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-1.5,line_above:2,line_below:3},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},128:{common:{beam_count:5,getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"vb",e).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v9b",code_flag_downstem:"v30",stem_up_extension:22,stem_down_extension:22,tabnote_stem_up_extension:21,tabnote_stem_down_extension:18,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"vaa",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:1.5,line_above:3,line_below:3},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}}},m.smufl={},m.smufl.to_code_points={bracketTop:"v1b",bracketBottom:"v10",barlineTick:"v6f",segno:"v8c",coda:"v4d",gClef:"v83",cClef:"vad",fClef:"v79",unpitchedPercussionClef1:"v59","6stringTabClef":"v2f",timeSig0:"v0",timeSig1:"v1",timeSig2:"v2",timeSig3:"v3",timeSig4:"v4",timeSig5:"v5",timeSig6:"v6",timeSig7:"v7",timeSig8:"v8",timeSig9:"v9",timeSigCommon:"v41",timeSigCutCommon:"vb6",noteheadDoubleWhole:"v53",noteheadWhole:"v1d",noteheadHalf:"v81",noteheadBlack:"vb",noteheadXWhole:"v92",noteheadXHalf:"v95",noteheadXBlack:"v3e",noteheadCircleX:"v3b",noteheadTriangleUpWhole:"v49",noteheadTriangleUpHalf:"v93",noteheadTriangleUpBlack:"v40",noteheadDiamondWhole:"v46",noteheadDiamondHalf:"v2d",noteheadDiamondBlack:"v22",augmentationDot:"v23",tremolo1:"v74",flag8thUp:"v54",flag8thDown:"v9a",flag16thUp:"v3f",flag16thDown:"v8f",flag32ndUp:"v47",flag32ndDown:"v2a",flag64thUp:"va9",flag64thDown:"v58",flag128thUp:"v9b",flag128thDown:"v30",accidentalFlat:"v44",accidentalNatural:"v4e",accidentalSharp:"v18",accidentalDoubleSharp:"v7f",accidentalDoubleFlat:"v26",accidentalParensLeft:"v9c",accidentalParensRight:"v84",accidentalQuarterToneFlatStein:"vab",accidentalThreeQuarterTonesFlatZimmermann:"v9e",accidentalQuarterToneSharpStein:"v78",accidentalThreeQuarterTonesSharpStein:"v51",accidentalBuyukMucennebFlat:"v39",accidentalBakiyeFlat:"vb7",accidentalKomaSharp:"v51",accidentalKucukMucennebSharp:"v8d",accidentalKoron:"vd1",accidentalSori:"vd0",articAccentAbove:"v42",articAccentBelow:"v42",articTenutoAbove:"v25",articTenutoBelow:"v25",articStaccatoAbove:"v23",articStaccatoBelow:"v23",articStaccatissimoAbove:"v28",articMarcatoAbove:"va",fermataAbove:"v43",fermataBelow:"v5b",breathMarkComma:"v6c",breathMarkUpbow:"v8a",caesura:"v34",caesuraCurved:"v4b",restMaxima:"v59",restDoubleWhole:"v31",restWhole:"v5c",restHalf:"vc",restQuarter:"v7c",rest8th:"va5",rest16th:"v3c",rest32nd:"v55",rest64th:"v38",rest128th:"vaa",dynamicPiano:"vbf",dynamicMezzo:"v62",dynamicForte:"vba",dynamicRinforzando:"vba",dynamicSforzando:"v4a",dynamicZ:"v80",ornamentTrill:"v1f",ornamentTurn:"v72",ornamentTurnSlash:"v33",ornamentMordent:"v45",ornamentMordentInverted:"v1e",ornamentTremblement:"v86",ornamentPrecompAppoggTrill:"v20",ornamentPrecompSlideTrillDAnglebert:"v60",ornamentPrecompSlideTrillBach:"v29",ornamentPrecompTrillSuffixDandrieu:"v6d",ornamentPrecompDoubleCadenceUpperPrefix:"vb4",ornamentPrecompDoubleCadenceUpperPrefixTurn:"v68",ornamentPrecompTrillLowerSuffix:"v2c",stringsDownBow:"v94",stringsUpBow:"v75",stringsHarmonic:"vb9",pluckedSnapPizzicatoAbove:"v94",pluckedLeftHandPizzicato:"v8b",keyboardPedalPed:"v36",keyboardPedalUp:"v5d",pictChokeCymbal:"vb3",wiggleArpeggiatoUp:"va3",arrowheadBlackUp:"vc3",arrowheadBlackDown:"v52"},m.TIME4_4={num_beats:4,beat_value:4,resolution:m.RESOLUTION};class g{static get WIDTH(){return 600}static get HEIGHT(){return 400}static get CANVAS_BROWSER_SIZE_LIMIT(){return 32767}static SanitizeCanvasDims(e,t){return Math.max(e,t)>this.CANVAS_BROWSER_SIZE_LIMIT&&(n.W("Canvas dimensions exceed browser limit. Cropping to "+this.CANVAS_BROWSER_SIZE_LIMIT),e>this.CANVAS_BROWSER_SIZE_LIMIT&&(e=this.CANVAS_BROWSER_SIZE_LIMIT),t>this.CANVAS_BROWSER_SIZE_LIMIT&&(t=this.CANVAS_BROWSER_SIZE_LIMIT)),[e,t]}constructor(e){this.vexFlowCanvasContext=e,e.canvas?this.canvas=e.canvas:this.canvas={width:g.WIDTH,height:g.HEIGHT}}clear(){this.vexFlowCanvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}openGroup(){}closeGroup(){}add(){}setFont(e,t,i){return this.vexFlowCanvasContext.font=(i||"")+" "+t+"pt "+e,this}setRawFont(e){return this.vexFlowCanvasContext.font=e,this}setFillStyle(e){return this.vexFlowCanvasContext.fillStyle=e,this}setBackgroundFillStyle(e){return this.background_fillStyle=e,this}setStrokeStyle(e){return this.vexFlowCanvasContext.strokeStyle=e,this}setShadowColor(e){return this.vexFlowCanvasContext.shadowColor=e,this}setShadowBlur(e){return this.vexFlowCanvasContext.shadowBlur=e,this}setLineWidth(e){return this.vexFlowCanvasContext.lineWidth=e,this}setLineCap(e){return this.vexFlowCanvasContext.lineCap=e,this}setLineDash(e){return this.vexFlowCanvasContext.lineDash=e,this}scale(e,t){return this.vexFlowCanvasContext.scale(parseFloat(e),parseFloat(t))}resize(e,t){return[e,t]=this.SanitizeCanvasDims(parseInt(e,10),parseInt(t,10)),this.vexFlowCanvasContext.resize(e,t)}rect(e,t,i,n){return this.vexFlowCanvasContext.rect(e,t,i,n)}fillRect(e,t,i,n){return this.vexFlowCanvasContext.fillRect(e,t,i,n)}clearRect(e,t,i,n){return this.vexFlowCanvasContext.clearRect(e,t,i,n)}beginPath(){return this.vexFlowCanvasContext.beginPath()}moveTo(e,t){return this.vexFlowCanvasContext.moveTo(e,t)}lineTo(e,t){return this.vexFlowCanvasContext.lineTo(e,t)}bezierCurveTo(e,t,i,n,s,r){return this.vexFlowCanvasContext.bezierCurveTo(e,t,i,n,s,r)}quadraticCurveTo(e,t,i,n){return this.vexFlowCanvasContext.quadraticCurveTo(e,t,i,n)}arc(e,t,i,n,s,r){return this.vexFlowCanvasContext.arc(e,t,i,n,s,r)}glow(){return this.vexFlowCanvasContext.glow()}fill(){return this.vexFlowCanvasContext.fill()}stroke(){return this.vexFlowCanvasContext.stroke()}closePath(){return this.vexFlowCanvasContext.closePath()}measureText(e){return this.vexFlowCanvasContext.measureText(e)}fillText(e,t,i){return this.vexFlowCanvasContext.fillText(e,t,i)}save(){return this.vexFlowCanvasContext.save()}restore(){return this.vexFlowCanvasContext.restore()}}class b{constructor(e){this.element=e,this.paper=Raphael(e),this.path="",this.pen={x:0,y:0},this.lineWidth=1,this.state={scale:{x:1,y:1},font_family:"Arial",font_size:8,font_weight:800},this.attributes={"stroke-width":.3,fill:"black",stroke:"black",font:"10pt Arial"},this.background_attributes={"stroke-width":0,fill:"white",stroke:"white",font:"10pt Arial"},this.shadow_attributes={width:0,color:"black"},this.state_stack=[]}openGroup(){}closeGroup(){}add(){}setFont(e,t,i){return this.state.font_family=e,this.state.font_size=t,this.state.font_weight=i,this.attributes.font=(this.state.font_weight||"")+" "+this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this}setRawFont(e){return this.attributes.font=e,this}setFillStyle(e){return this.attributes.fill=e,this}setBackgroundFillStyle(e){return this.background_attributes.fill=e,this.background_attributes.stroke=e,this}setStrokeStyle(e){return this.attributes.stroke=e,this}setShadowColor(e){return this.shadow_attributes.color=e,this}setShadowBlur(e){return this.shadow_attributes.width=e,this}setLineWidth(e){this.attributes["stroke-width"]=e,this.lineWidth=e}setLineDash(){return this}setLineCap(){return this}scale(e,t){return this.state.scale={x:e,y:t},this.attributes.transform="S"+e+","+t+",0,0",this.attributes.scale=e+","+t+",0,0",this.attributes.font=this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this.background_attributes.transform="S"+e+","+t+",0,0",this.background_attributes.font=this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this}clear(){this.paper.clear()}resize(e,t){return this.element.style.width=e,this.paper.setSize(e,t),this}setViewBox(e){this.paper.canvas.setAttribute("viewBox",e)}rect(e,t,i,n){return n<0&&(t+=n,n=-n),this.paper.rect(e,t,i-.5,n-.5).attr(this.attributes).attr("fill","none").attr("stroke-width",this.lineWidth),this}fillRect(e,t,i,n){return n<0&&(t+=n,n=-n),this.paper.rect(e,t,i-.5,n-.5).attr(this.attributes),this}clearRect(e,t,i,n){return n<0&&(t+=n,n=-n),this.paper.rect(e,t,i-.5,n-.5).attr(this.background_attributes),this}beginPath(){return this.path="",this.pen.x=0,this.pen.y=0,this}moveTo(e,t){return this.path+="M"+e+","+t,this.pen.x=e,this.pen.y=t,this}lineTo(e,t){return this.path+="L"+e+","+t,this.pen.x=e,this.pen.y=t,this}bezierCurveTo(e,t,i,n,s,r){return this.path+="C"+e+","+t+","+i+","+n+","+s+","+r,this.pen.x=s,this.pen.y=r,this}quadraticCurveTo(e,t,i,n){return this.path+="Q"+e+","+t+","+i+","+n,this.pen.x=i,this.pen.y=n,this}arc(e,t,i,n,s,r){function o(e){for(;e<0;)e+=2*Math.PI;for(;e>2*Math.PI;)e-=2*Math.PI;return e}if((n=o(n))>(s=o(s))){const e=n;n=s,s=e,r=!r}const a=s-n;return a>Math.PI?(this.arcHelper(e,t,i,n,n+a/2,r),this.arcHelper(e,t,i,n+a/2,s,r)):this.arcHelper(e,t,i,n,s,r),this}arcHelper(e,t,i,n,s,r){const o=e+i*Math.cos(n),a=t+i*Math.sin(n),l=e+i*Math.cos(s),c=t+i*Math.sin(s);let h=0,u=0;r?(u=1,s-n<Math.PI&&(h=1)):s-n>Math.PI&&(h=1),this.path+="M"+o+","+a+",A"+i+","+i+",0,"+h+","+u+","+l+","+c+"M"+this.pen.x+","+this.pen.y}glow(){const e=this.paper.set();if(this.shadow_attributes.width>0){const t=this.shadow_attributes,i=t.width/2;for(let n=1;n<=i;n++)e.push(this.paper.path(this.path).attr({stroke:t.color,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/i*n).toFixed(3),opacity:+((t.opacity||.3)/i).toFixed(3),transform:this.attributes.transform,scale:this.attributes.scale}))}return e}fill(){const e=this.paper.path(this.path).attr(this.attributes).attr("stroke-width",0);return this.glow(e),this}stroke(){const e=this.lineWidth*(this.state.scale.x+this.state.scale.y)/2,t=this.paper.path(this.path).attr(this.attributes).attr("fill","none").attr("stroke-width",e);return this.glow(t),this}closePath(){return this.path+="Z",this}measureText(e){const t=this.paper.text(0,0,e).attr(this.attributes).attr("fill","none").attr("stroke","none"),i=t.getBBox();return t.remove(),{width:i.width,height:i.height}}fillText(e,t,i){return this.paper.text(t+this.measureText(e).width/2,i-this.state.font_size/(2.25*this.state.scale.y),e).attr(this.attributes),this}save(){return this.state_stack.push({state:{font_family:this.state.font_family},attributes:{font:this.attributes.font,fill:this.attributes.fill,stroke:this.attributes.stroke,"stroke-width":this.attributes["stroke-width"]},shadow_attributes:{width:this.shadow_attributes.width,color:this.shadow_attributes.color}}),this}restore(){const e=this.state_stack.pop();return this.state.font_family=e.state.font_family,this.attributes.font=e.attributes.font,this.attributes.fill=e.attributes.fill,this.attributes.stroke=e.attributes.stroke,this.attributes["stroke-width"]=e.attributes["stroke-width"],this.shadow_attributes.width=e.shadow_attributes.width,this.shadow_attributes.color=e.shadow_attributes.color,this}}const v={path:{x:!0,y:!0,width:!0,height:!0},rect:{},text:{width:!0,height:!0}};{const e={"font-family":!0,"font-weight":!0,"font-style":!0,"font-size":!0};n.Merge(v.rect,e),n.Merge(v.path,e)}class y{constructor(e){this.element=e,this.svgNS="http://www.w3.org/2000/svg";const t=this.create("svg");this.element.appendChild(t),this.svg=t,this.groups=[this.svg],this.parent=this.svg,this.path="",this.pen={x:NaN,y:NaN},this.lineWidth=1,this.state={scale:{x:1,y:1},"font-family":"Arial","font-size":"8pt","font-weight":"normal"},this.attributes={"stroke-width":.3,fill:"black",stroke:"black","stroke-dasharray":"none","font-family":"Arial","font-size":"10pt","font-weight":"normal","font-style":"normal"},this.background_attributes={"stroke-width":0,fill:"white",stroke:"white","stroke-dasharray":"none","font-family":"Arial","font-size":"10pt","font-weight":"normal","font-style":"normal"},this.shadow_attributes={width:0,color:"black"},this.state_stack=[],this.iePolyfill()}create(e){return document.createElementNS(this.svgNS,e)}openGroup(e,t,i){const s=this.create("g");return this.groups.push(s),this.parent.appendChild(s),this.parent=s,e&&s.setAttribute("class",n.Prefix(e)),t&&s.setAttribute("id",n.Prefix(t)),i&&i.pointerBBox&&s.setAttribute("pointer-events","bounding-box"),s}closeGroup(){this.groups.pop(),this.parent=this.groups[this.groups.length-1]}add(e){this.parent.appendChild(e)}iePolyfill(){"undefined"!=typeof navigator&&(this.ie=/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/rv:11\.0/i.test(navigator.userAgent)||/Trident/i.test(navigator.userAgent))}setFont(e,t,i){let s=!1,r=!1,o="normal";"string"==typeof i&&(-1!==i.indexOf("italic")&&(i=i.replace(/italic/g,""),r=!0),-1!==i.indexOf("bold")&&(i=i.replace(/bold/g,""),s=!0),i=i.replace(/ /g,"")),o=r?"italic":o;const a={"font-family":e,"font-size":t+"pt","font-weight":i=void 0===(i=s?"bold":i)||""===i?"normal":i,"font-style":o};return this.fontSize=Number(t),n.Merge(this.attributes,a),n.Merge(this.state,a),this}setRawFont(e){const t=(e=e.trim()).split(" ");return this.attributes["font-family"]=t[1],this.state["font-family"]=t[1],this.attributes["font-size"]=t[0],this.state["font-size"]=t[0],this.fontSize=Number(t[0].match(/\d+/)),this}setFillStyle(e){return this.attributes.fill=e,this}setBackgroundFillStyle(e){return this.background_attributes.fill=e,this.background_attributes.stroke=e,this}setStrokeStyle(e){return this.attributes.stroke=e,this}setShadowColor(e){return this.shadow_attributes.color=e,this}setShadowBlur(e){return this.shadow_attributes.width=e,this}setLineWidth(e){this.attributes["stroke-width"]=e,this.lineWidth=e}setLineDash(e){if("[object Array]"===Object.prototype.toString.call(e))return e=e.join(", "),this.attributes["stroke-dasharray"]=e,this;throw new n.RERR("ArgumentError","lineDash must be an array of integers.")}setLineCap(e){return this.attributes["stroke-linecap"]=e,this}resize(e,t){this.width=e,this.height=t,this.element.style.width=e;const i={width:e,height:t};return this.applyAttributes(this.svg,i),this.scale(this.state.scale.x,this.state.scale.y),this}scale(e,t){this.state.scale={x:e,y:t};const i=this.width/e,n=this.height/t;return this.setViewBox(0,0,i,n),this}setViewBox(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(1===t.length){const[e]=t;this.svg.setAttribute("viewBox",e)}else{const[e,i,n,s]=t,r=e+" "+i+" "+n+" "+s;this.svg.setAttribute("viewBox",r)}}applyAttributes(e,t){const i=v[e.nodeName];return Object.keys(t).forEach((n=>{i&&i[n]||e.setAttributeNS(null,n,t[n])})),e}clear(){for(;this.svg.lastChild;)this.svg.removeChild(this.svg.lastChild);this.scale(this.state.scale.x,this.state.scale.y)}rect(e,t,i,s,r){s<0&&(t+=s,s*=-1);const o=this.create("rect");return void 0===r&&(r={fill:"none","stroke-width":this.lineWidth,stroke:this.attributes.stroke}),n.Merge(r,{x:e,y:t,width:i,height:s}),this.applyAttributes(o,r),this.add(o),this}fillRect(e,t,i,n){return n<0&&(t+=n,n*=-1),this.rect(e,t,i,n,this.attributes),this}clearRect(e,t,i,n){return this.rect(e,t,i,n,this.background_attributes),this}beginPath(){return this.path="",this.pen.x=NaN,this.pen.y=NaN,this}moveTo(e,t){return this.path+="M"+e+" "+t,this.pen.x=e,this.pen.y=t,this}lineTo(e,t){return this.path+="L"+e+" "+t,this.pen.x=e,this.pen.y=t,this}bezierCurveTo(e,t,i,n,s,r){return this.path+="C"+e+" "+t+","+i+" "+n+","+s+" "+r,this.pen.x=s,this.pen.y=r,this}quadraticCurveTo(e,t,i,n){return this.path+="Q"+e+" "+t+","+i+" "+n,this.pen.x=i,this.pen.y=n,this}arc(e,t,i,n,s,r){function o(e){for(;e<0;)e+=2*Math.PI;for(;e>2*Math.PI;)e-=2*Math.PI;return e}if((n=o(n))>(s=o(s))){const e=n;n=s,s=e,r=!r}const a=s-n;return a>Math.PI?(this.arcHelper(e,t,i,n,n+a/2,r),this.arcHelper(e,t,i,n+a/2,s,r)):this.arcHelper(e,t,i,n,s,r),this}arcHelper(e,t,i,n,s,r){const o=e+i*Math.cos(n),a=t+i*Math.sin(n),l=e+i*Math.cos(s),c=t+i*Math.sin(s);let h=0,u=0;r?(u=1,s-n<Math.PI&&(h=1)):s-n>Math.PI&&(h=1),this.path+="M"+o+" "+a+" A"+i+" "+i+" 0 "+h+" "+u+" "+l+" "+c,isNaN(this.pen.x)||isNaN(this.pen.y)||(this.peth+="M"+this.pen.x+" "+this.pen.y)}closePath(){return this.path+="Z",this}glow(){if(this.shadow_attributes.width>0){const e=this.shadow_attributes,t=e.width/2;for(let i=1;i<=t;i++){const n={stroke:e.color,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(.4*e.width/t*i).toFixed(3),opacity:+((e.opacity||.3)/t).toFixed(3)},s=this.create("path");n.d=this.path,this.applyAttributes(s,n),this.add(s)}}return this}fill(e){this.glow();const t=this.create("path");let i=e;return void 0===e?(n.Merge(e={},this.attributes),e.stroke="none",i=e):(i=e,n.Merge(i,this.attributes),e.class&&(i.class=e.class),e.id&&(i.id=e.id)),e.d=this.path,this.applyAttributes(t,e),this.add(t),this}stroke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.glow();const t=this.create("path"),i={};return n.Merge(i,this.attributes),e&&n.Merge(i,e),i.fill="none",i["stroke-width"]=this.lineWidth,i.d=this.path,this.applyAttributes(t,i),this.add(t),this}measureText(e){const t=this.create("text");if("function"!=typeof t.getBBox)return{x:0,y:0,width:0,height:0};t.textContent=e,this.applyAttributes(t,this.attributes),this.svg.appendChild(t);let i=t.getBBox();return this.ie&&""!==e&&"italic"===this.attributes["font-style"]&&(i=this.ieMeasureTextFix(i,e)),this.svg.removeChild(t),i}ieMeasureTextFix(e){const t=1.196*Number(this.fontSize)+1.9598,i=e.width-t,n=e.height-1.5;return{x:e.x,y:e.y,width:i,height:n}}fillText(e,t,i){if(!e||e.length<=0)return;const s={};n.Merge(s,this.attributes),s.stroke="none",s.x=t,s.y=i;const r=this.create("text");r.textContent=e,this.applyAttributes(r,s),this.add(r)}save(){return this.state_stack.push({state:{"font-family":this.state["font-family"],"font-weight":this.state["font-weight"],"font-style":this.state["font-style"],"font-size":this.state["font-size"],scale:this.state.scale},attributes:{"font-family":this.attributes["font-family"],"font-weight":this.attributes["font-weight"],"font-style":this.attributes["font-style"],"font-size":this.attributes["font-size"],fill:this.attributes.fill,stroke:this.attributes.stroke,"stroke-width":this.attributes["stroke-width"],"stroke-dasharray":this.attributes["stroke-dasharray"]},shadow_attributes:{width:this.shadow_attributes.width,color:this.shadow_attributes.color},lineWidth:this.lineWidth}),this}restore(){const e=this.state_stack.pop();return this.state["font-family"]=e.state["font-family"],this.state["font-weight"]=e.state["font-weight"],this.state["font-style"]=e.state["font-style"],this.state["font-size"]=e.state["font-size"],this.state.scale=e.state.scale,this.attributes["font-family"]=e.attributes["font-family"],this.attributes["font-weight"]=e.attributes["font-weight"],this.attributes["font-style"]=e.attributes["font-style"],this.attributes["font-size"]=e.attributes["font-size"],this.attributes.fill=e.attributes.fill,this.attributes.stroke=e.attributes.stroke,this.attributes["stroke-width"]=e.attributes["stroke-width"],this.attributes["stroke-dasharray"]=e.attributes["stroke-dasharray"],this.shadow_attributes.width=e.shadow_attributes.width,this.shadow_attributes.color=e.shadow_attributes.color,this.lineWidth=e.lineWidth,this}}let x=null;class S{static get Backends(){return{CANVAS:1,RAPHAEL:2,SVG:3,VML:4}}static get LineEndType(){return{NONE:1,UP:2,DOWN:3}}static get USE_CANVAS_PROXY(){return!1}static get lastContext(){return x}static set lastContext(e){x=e}static buildContext(e,t,i,n,s){const r=new S(e,t);i&&n&&r.resize(i,n),s||(s="#FFF");const o=r.getContext();return o.setBackgroundFillStyle(s),S.lastContext=o,o}static getCanvasContext(e,t,i,n){return S.buildContext(e,S.Backends.CANVAS,t,i,n)}static getRaphaelContext(e,t,i,n){return S.buildContext(e,S.Backends.RAPHAEL,t,i,n)}static getSVGContext(e,t,i,n){return S.buildContext(e,S.Backends.SVG,t,i,n)}static bolsterCanvasContext(e){return S.USE_CANVAS_PROXY?new g(e):(e.vexFlowCanvasContext=e,["clear","setFont","setRawFont","setFillStyle","setBackgroundFillStyle","setStrokeStyle","setShadowColor","setShadowBlur","setLineWidth","setLineCap","setLineDash","openGroup","closeGroup","getGroup"].forEach((t=>{e[t]=e[t]||g.prototype[t]})),e)}static drawDashedLine(e,t,i,n,s,r){e.beginPath();const o=n-t,a=s-i,l=Math.atan2(a,o);let c=t,h=i;e.moveTo(t,i);let u=0,d=!0;for(;!(o<0?c<=n:c>=n)||!(a<0?h<=s:h>=s);){const t=r[u++%r.length],i=c+Math.cos(l)*t;c=o<0?Math.max(n,i):Math.min(n,i);const f=h+Math.sin(l)*t;h=a<0?Math.max(s,f):Math.min(s,f),d?e.lineTo(c,h):e.moveTo(c,h),d=!d}e.closePath(),e.stroke()}constructor(e,t){if(this.elementId=e,!this.elementId)throw new n.RERR("BadArgument","Invalid id for renderer.");if(this.element=document.getElementById(e),this.element||(this.element=e),this.ctx=null,this.paper=null,this.backend=t,this.backend===S.Backends.CANVAS){if(!this.element.getContext)throw new n.RERR("BadElement","Can't get canvas context from element: ".concat(e));this.ctx=S.bolsterCanvasContext(this.element.getContext("2d",{willReadFrequently:!0}))}else if(this.backend===S.Backends.RAPHAEL)this.ctx=new b(this.element);else{if(this.backend!==S.Backends.SVG)throw new n.RERR("InvalidBackend","No support for backend: ".concat(this.backend));this.ctx=new y(this.element)}}resize(e,t){if(this.backend===S.Backends.CANVAS){if(!this.element.getContext)throw new n.RERR("BadElement","Can't get canvas context from element: ".concat(this.elementId));[e,t]=g.SanitizeCanvasDims(e,t);const i=window.devicePixelRatio||1;this.element.width=e*i,this.element.height=t*i,this.element.style.width=e+"px",this.element.style.height=t+"px",this.ctx=S.bolsterCanvasContext(this.element.getContext("2d",{willReadFrequently:!0})),this.ctx.scale(i,i)}else this.ctx.resize(e,t);return this}getContext(){return this.ctx}}class E extends c{static get CATEGORY(){return"stem"}static get UP(){return 1}static get DOWN(){return-1}static get WIDTH(){return m.STEM_WIDTH}static get HEIGHT(){return m.STEM_HEIGHT}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.setAttribute("type","Stem"),this.x_begin=e.x_begin||0,this.x_end=e.x_end||0,this.y_top=e.y_top||0,this.y_bottom=e.y_bottom||0,this.stem_extension=e.stem_extension||0,this.stem_direction=e.stem_direction||0,this.hide=e.hide||!1,this.isStemlet=e.isStemlet||!1,this.stemletHeight=e.stemletHeight||0,this.renderHeightAdjustment=0,this.setOptions(e)}setOptions(e){this.stem_up_y_offset=e.stem_up_y_offset||0,this.stem_down_y_offset=e.stem_down_y_offset||0}setNoteHeadXBounds(e,t){return this.x_begin=e,this.x_end=t,this}setDirection(e){this.stem_direction=e}setExtension(e){this.stem_extension=e}getExtension(){return this.stem_extension}setYBounds(e,t){this.y_top=e,this.y_bottom=t}getCategory(){return E.CATEGORY}getHeight(){const e=this.stem_direction===E.UP?this.stem_up_y_offset:this.stem_down_y_offset;return(this.y_bottom-this.y_top)*this.stem_direction+(E.HEIGHT-e+this.stem_extension)*this.stem_direction}getBoundingBox(){throw new n.RERR("NotImplemented","getBoundingBox() not implemented.")}getExtents(){const e=this.stem_direction===E.UP,t=[this.y_top,this.y_bottom],i=E.HEIGHT+this.stem_extension,n=(e?Math.min:Math.max)(...t),s=(e?Math.max:Math.min)(...t);return{topY:n+i*-this.stem_direction,baseY:s}}setVisibility(e){return this.hide=!e,this}setStemlet(e,t){return this.isStemlet=e,this.stemletHeight=t,this}draw(){if(this.setRendered(),this.hide)return;const e=this.checkContext();let t,i;const s=this.stem_direction;s===E.DOWN?(t=this.x_begin,i=this.y_top+this.stem_down_y_offset):(t=this.x_end,i=this.y_bottom-this.stem_up_y_offset);const r=this.getHeight();!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];E.DEBUG&&n.L("Vex.Flow.Stem",t)}("Rendering stem - ","Top Y: ",this.y_top,"Bottom Y: ",this.y_bottom);const o=this.isStemlet?r-this.stemletHeight*this.stem_direction:0;if(e.save(),this.applyStyle(e),e.beginPath(),e.setLineWidth(E.WIDTH),e.moveTo(t,i-o),e.lineTo(t,i-r-this.renderHeightAdjustment*s),e.svg){const t={class:n.Prefix("stem")};this.id&&(t.id=this.id),e.stroke(t)}else e.stroke();this.restoreStyle(e),e.restore()}}class w extends c{static get LOCATION_TOP(){return 1}static get LOCATION_BOTTOM(){return-1}static get NESTING_OFFSET(){return 15}constructor(e,t){if(super(),this.setAttribute("type","Tuplet"),!e||!e.length)throw new n.RuntimeError("BadArguments","No notes provided for tuplet.");this.options=n.Merge({},t),this.notes=e,this.num_notes="num_notes"in this.options?this.options.num_notes:e.length,this.options.beats_occupied&&this.beatsOccupiedDeprecationWarning(),this.notes_occupied=this.options.notes_occupied||this.options.beats_occupied||2,"bracketed"in this.options?this.bracketed=this.options.bracketed:this.bracketed=e.some((e=>null===e.beam)),this.ratioed="ratioed"in this.options?this.options.ratioed:Math.abs(this.notes_occupied-this.num_notes)>1,this.point=28,this.y_pos=16,this.x_pos=100,this.width=200,this.location=this.options.location||w.LOCATION_TOP,de.AlignRestsToNotes(e,!0,!0),this.resolveGlyphs(),this.attach()}attach(){for(let e=0;e<this.notes.length;e++)this.notes[e].setTuplet(this)}detach(){for(let e=0;e<this.notes.length;e++)this.notes[e].resetTuplet(this)}setBracketed(e){return this.bracketed=!!e,this}setRatioed(e){return this.ratioed=!!e,this}setTupletLocation(e){if(e){if(e!==w.LOCATION_TOP&&e!==w.LOCATION_BOTTOM)throw new n.RERR("BadArgument","Invalid tuplet location: "+e)}else e=w.LOCATION_TOP;return this.location=e,this}getNotes(){return this.notes}getNoteCount(){return this.num_notes}beatsOccupiedDeprecationWarning(){const e=["beats_occupied has been deprecated as an ","option for tuplets. Please use notes_occupied ","instead. Calls to getBeatsOccupied and ","setBeatsOccupied should now be routed to ","getNotesOccupied and setNotesOccupied instead"].join("");console&&console.warn?console.warn(e):console&&console.log(e)}getBeatsOccupied(){return this.beatsOccupiedDeprecationWarning(),this.getNotesOccupied()}setBeatsOccupied(e){return this.beatsOccupiedDeprecationWarning(),this.setNotesOccupied(e)}getNotesOccupied(){return this.notes_occupied}setNotesOccupied(e){this.detach(),this.notes_occupied=e,this.resolveGlyphs(),this.attach()}resolveGlyphs(){this.numerator_glyphs=[];let e=this.num_notes;for(;e>=1;)this.numerator_glyphs.unshift(new p("v"+e%10,this.point)),e=parseInt(e/10,10);for(this.denom_glyphs=[],e=this.notes_occupied;e>=1;)this.denom_glyphs.unshift(new p("v"+e%10,this.point)),e=parseInt(e/10,10)}getNestedTupletCount(){const e=this.location,t=this.notes[0];let i=s(t,e),n=s(t,e);function s(e,t){return e.tupletStack.filter((e=>e.location===t)).length}return this.notes.forEach((t=>{const r=s(t,e);i=r>i?r:i,n=r<n?r:n})),i-n}getYPosition(){const e=this.getNestedTupletCount()*w.NESTING_OFFSET*-this.location,t=this.options.y_offset||0,i=this.notes[0];let n;if(this.location===w.LOCATION_TOP){n=i.getStave().getYForLine(0)-15;for(let e=0;e<this.notes.length;++e){const t=this.notes[e].getStemDirection()===E.UP?this.notes[e].getStemExtents().topY-10:this.notes[e].getStemExtents().baseY-20;t<n&&(n=t)}}else{n=i.getStave().getYForLine(4)+20;for(let e=0;e<this.notes.length;++e){const t=this.notes[e].getStemDirection()===E.UP?this.notes[e].getStemExtents().baseY+20:this.notes[e].getStemExtents().topY+10;t>n&&(n=t)}}return n+e+t}draw(){this.checkContext(),this.setRendered();const e=this.notes[0],t=this.notes[this.notes.length-1];this.bracketed?(this.x_pos=e.getTieLeftX()-5,this.width=t.getTieRightX()-this.x_pos+5):(this.x_pos=e.getStemX(),this.width=t.getStemX()-this.x_pos),this.y_pos=this.getYPosition();const i=(e,t)=>e+t.getMetrics().width;let n=this.numerator_glyphs.reduce(i,0);this.ratioed&&(n=this.denom_glyphs.reduce(i,n),n+=.32*this.point);const s=this.x_pos+this.width/2-n/2;if(this.bracketed){const e=this.width/2-n/2-5;e>0&&(this.context.fillRect(this.x_pos,this.y_pos,e,1),this.context.fillRect(this.x_pos+this.width/2+n/2+5,this.y_pos,e,1),this.context.fillRect(this.x_pos,this.y_pos+(this.location===w.LOCATION_BOTTOM),1,10*this.location),this.context.fillRect(this.x_pos+this.width,this.y_pos+(this.location===w.LOCATION_BOTTOM),1,10*this.location))}let r=0;if(!1!==this.RenderTupletNumber&&this.numerator_glyphs.forEach((e=>{e.render(this.context,s+r,this.y_pos+this.point/3-2),r+=e.getMetrics().width})),this.ratioed){const e=s+r+.16*this.point,t=.06*this.point;this.context.beginPath(),this.context.arc(e,this.y_pos-.08*this.point,t,0,2*Math.PI,!0),this.context.closePath(),this.context.fill(),this.context.beginPath(),this.context.arc(e,this.y_pos+.12*this.point,t,0,2*Math.PI,!0),this.context.closePath(),this.context.fill(),r+=.32*this.point,this.denom_glyphs.forEach((e=>{e.render(this.context,s+r,this.y_pos+this.point/3-2),r+=e.getMetrics().width}))}}}function T(e){let t=0;return e.forEach((e=>{e.keyProps&&e.keyProps.forEach((e=>{t+=e.line-3}))})),t>=0?E.DOWN:E.UP}const _="L",M="B";class P extends c{static getDefaultBeamGroups(e){e&&"c"!==e||(e="4/4");const t={"1/2":["1/2"],"2/2":["1/2"],"3/2":["1/2"],"4/2":["1/2"],"1/4":["1/4"],"2/4":["1/4"],"3/4":["1/4"],"4/4":["1/4"],"1/8":["1/8"],"2/8":["2/8"],"3/8":["3/8"],"4/8":["2/8"],"1/16":["1/16"],"2/16":["2/16"],"3/16":["3/16"],"4/16":["2/16"]}[e];if(void 0!==t)return t.map((e=>(new r).parse(e)));{const t=parseInt(e.split("/")[0],10),i=parseInt(e.split("/")[1],10);if(t%3==0)return[new r(3,i)];if(i>4)return[new r(2,i)];if(i<=4)return[new r(1,i)]}return[new r(1,4)]}static applyAndGetBeams(e,t,i){return P.generateBeams(e.getTickables(),{groups:i,stem_direction:t})}static generateBeams(e,t){t||(t={}),t.groups&&t.groups.length||(t.groups=[new r(2,8)]);const i=t.groups.map((e=>{if(!e.multiply)throw new n.RuntimeError("InvalidBeamGroups","The beam groups must be an array of Vex.Flow.Fractions");return e.clone().multiply(m.RESOLUTION,1)})),s=e;let o=0,a=[],l=[];function c(){i.length-1>o?o+=1:o=0}!function(){let e=[];s.forEach((t=>{if(e=[],t.shouldIgnoreTicks())return a.push(l),void(l=e);l.push(t);const n=i[o].clone(),s=l.reduce(((e,t)=>t.getTicks().clone().add(e)),new r(0,1)),h=m.durationToNumber(t.duration)<8;h&&t.tuplet&&(n.numerator*=2),s.greaterThan(n)?(h||e.push(l.pop()),a.push(l),l=e,c()):s.equals(n)&&(a.push(l),l=e,c())})),l.length>0&&a.push(l)}(),function(){const e=[];a.forEach((i=>{let n=[];i.forEach(((i,s,r)=>{const o=0===s||s===r.length-1,a=r[s-1],l=!t.beam_rests&&i.isRest(),c=t.beam_rests&&t.beam_middle_only&&i.isRest()&&o;let h=!1;if(t.maintain_stem_directions&&a&&!i.isRest()&&!a.isRest()){const e=a.getStemDirection();h=i.getStemDirection()!==e}const u=parseInt(i.duration,10)<8;l||c||h||u?(n.length>0&&e.push(n),n=h?[i]:[]):n.push(i)})),n.length>0&&e.push(n)})),a=e}(),a.forEach((e=>{let i;if(t.maintain_stem_directions){const t=function(e){for(let t=0;t<e.length;t++){const i=e[t];if(!i.isRest())return i}return!1}(e);i=t?t.getStemDirection():E.UP}else i=t.stem_direction?t.stem_direction:T(e);!function(e,t){e.forEach((e=>{e.setStemDirection(t)}))}(e,i)}));const h=a.filter((e=>{if(e.length>1){let t=!0;return e.forEach((e=>{e.getIntrinsicTicks()>=m.durationToTicks("4")&&(t=!1)})),t}return!1})),u=function(){const e=[];return a.forEach((t=>{let i=null;t.forEach((t=>{t.tuplet&&i!==t.tuplet&&(i=t.tuplet,e.push(i))}))})),e}(),d=[];return h.forEach((e=>{const i=new P(e);t.show_stemlets&&(i.render_options.show_stemlets=!0),t.secondary_breaks&&(i.render_options.secondary_break_ticks=m.durationToTicks(t.secondary_breaks)),!0===t.flat_beams&&(i.render_options.flat_beams=!0,i.render_options.flat_beam_offset=t.flat_beam_offset),d.push(i)})),u.forEach((e=>{const t=e.notes[0].stem_direction===E.DOWN?w.LOCATION_BOTTOM:w.LOCATION_TOP;e.setTupletLocation(t);let i=!1;for(let n=0;n<e.notes.length;n++)if(null===e.notes[n].beam){i=!0;break}e.setBracketed(i)})),d}constructor(e,t){if(super(),this.setAttribute("type","Beam"),!e||e==[])throw new n.RuntimeError("BadArguments","No notes provided for beam.");if(1===e.length)throw new n.RuntimeError("BadArguments","Too few notes for beam.");if(this.ticks=e[0].getIntrinsicTicks(),this.ticks>=m.durationToTicks("4"))throw new n.RuntimeError("BadArguments","Beams can only be applied to notes shorter than a quarter note.");let i,s;for(this.stem_direction=E.UP,i=0;i<e.length;++i)if(s=e[i],s.hasStem()){this.stem_direction=s.getStemDirection();break}let r=this.stem_direction;for(t&&"stavenotes"===e[0].getCategory()?r=T(e):t&&"tabnotes"===e[0].getCategory()&&(r=e.reduce(((e,t)=>e+t.stem_direction),0)>-1?E.UP:E.DOWN),i=0;i<e.length;++i)s=e[i],t&&(s.setStemDirection(r),this.stem_direction=r),s.setBeam(this);this.postFormatted=!1,this.notes=e,this.beam_count=this.getBeamCount(),this.break_on_indices=[],this.render_options={beam_width:5,max_slope:.25,min_slope:-.25,slope_iterations:20,slope_cost:100,show_stemlets:!1,stemlet_extension:7,partial_beam_length:10,flat_beams:!1,min_flat_beam_offset:15}}getNotes(){return this.notes}getBeamCount(){return this.notes.map((e=>e.getGlyph().beam_count)).reduce(((e,t)=>t>e?t:e))}breakSecondaryAt(e){return this.break_on_indices=e,this}getSlopeY(e,t,i,n){return i+(e-t)*n}calculateSlope(){const{notes:e,stem_direction:t,render_options:{max_slope:i,min_slope:n,slope_iterations:s,slope_cost:r}}=this,o=e[0],a=((e,t)=>{const i=e.getStemExtents().topY,n=e.getStemX();return(t.getStemExtents().topY-i)/(t.getStemX()-n)})(o,e[e.length-1]),l=(i-n)/s;let c=Number.MAX_VALUE,h=0,u=0;for(let d=n;d<=i;d+=l){let i=0,n=0;for(let r=1;r<e.length;++r){const s=e[r],a=this.getSlopeY(s.getStemX(),o.getStemX(),o.getStemExtents().topY,d)+n,l=s.getStemExtents().topY;if(l*t<a*t){const e=Math.abs(l-a);n+=e*-t,i+=e*r}else i+=(l-a)*t}const s=a/2,l=r*Math.abs(s-d)+Math.abs(i);l<c&&(c=l,h=d,u=n)}this.slope=h,this.y_shift=u}calculateFlatSlope(){const{notes:e,stem_direction:t,render_options:{beam_width:i,min_flat_beam_offset:n,flat_beam_offset:s}}=this;let r=0,o=0,a=0,l=0;for(let d=0;d<e.length;d++){const i=e[d],n=i.getStemExtents().topY;r+=n,t===E.DOWN&&l<n?(l=n,o=Math.max(...i.getYs()),a=i.getBeamCount()):t===E.UP&&(0===l||l>n)&&(l=n,o=Math.min(...i.getYs()),a=i.getBeamCount())}let c=r/e.length;const h=n+a*(1.5*i),u=o+h*-t;t===E.DOWN&&c<u?c=o+h:t===E.UP&&c>u&&(c=o-h),s+this.render_options.flat_beam_offset_per_beam>0?(t===E.DOWN&&c>s&&!this.render_options.flat_beams||t===E.UP&&c<s&&!this.render_options.flat_beams)&&(this.render_options.flat_beam_offset=c):this.render_options.flat_beam_offset=c,this.slope=0,this.y_shift=0}getBeamYToDraw(){let e=this.notes[0].getStemExtents().topY;if(this.render_options.flat_beams&&this.render_options.flat_beam_offset+this.render_options.flat_beam_offset_per_beam>0){let t=this.render_options.flat_beam_offset;this.render_options.flat_beam_offset_per_beam&&(t+=this.render_options.flat_beam_offset_per_beam*this.getBeamCount());let i=this.notes[0].note_heads[0].y;const n=this.stem_direction>0?Math.min:Math.max;for(const e of this.notes)for(const t of e.note_heads)i=n(i,t.y);e=i+t*-this.stem_direction}return e}applyStemExtensions(){const{notes:e,slope:t,y_shift:i,stem_direction:n,beam_count:s,render_options:{show_stemlets:r,stemlet_extension:o,beam_width:a}}=this,l=e[0],c=this.getBeamYToDraw(),h=l.getStemX();for(let u=0;u<e.length;++u){const l=e[u],d=l.getStemX(),{topY:f}=l.getStemExtents(),p=this.getSlopeY(d,h,c,t)+i,m=l.getStem().getExtension(),g=n===E.UP?f-p:p-f;if(l.stem.setExtension(m+g),l.stem.renderHeightAdjustment=-E.WIDTH/2,l.isRest()&&r){const e=(s-1)*a*1.5+a;l.stem.setVisibility(!0).setStemlet(!0,e+o)}}}lookupBeamDirection(e,t,i,n){if("4"===e)return _;const s=""+m.durationToNumber(e)/2,r=t<m.durationToTicks(s),o=n<m.durationToTicks(s),a=i<m.durationToTicks(s);return r&&o&&a?M:r&&!o&&a?_:!r&&o&&a?"R":this.lookupBeamDirection(s,t,i,n)}getBeamLines(e){const t=m.durationToTicks(e),i=[];let n=!1,s=null;const r=this.render_options.partial_beam_length;let o=!1,a=0;for(let c=0;c<this.notes.length;++c){const l=this.notes[c];a+=l.ticks.value();let h=!1;parseInt(e,10)>=8&&(h=-1!==this.break_on_indices.indexOf(c),this.render_options.secondary_break_ticks&&a>=this.render_options.secondary_break_ticks&&(a=0,h=!0));const u=l.getIntrinsicTicks()<t,d=l.getStemX()-E.WIDTH/2,f=this.notes[c-1],p=this.notes[c+1],m=p&&p.getIntrinsicTicks()<t,g=f&&f.getIntrinsicTicks()<t,b=f&&p&&u&&!g&&!m;if(u)if(n)s=i[i.length-1],s.end=d,h&&(n=!1,p&&!m&&null===s.end&&(s.end=s.start-r));else{if(s={start:d,end:null,start_note:l},n=!0,b){const t=f.getIntrinsicTicks(),i=p.getIntrinsicTicks(),n=l.getIntrinsicTicks(),o=this.lookupBeamDirection(e,t,n,i);[_,M].includes(o)?s.end=s.start-r:s.end=s.start+r}else m?h&&(s.end=s.start-r,n=!1):s.end=(o||0===c)&&p?s.start+r:s.start-r;i.push(s)}else n=!1;o=h}const l=i[i.length-1];return l&&null===l.end&&(l.end=l.start-r),i}drawStems(){this.notes.forEach((e=>{e.getStem()&&(this.context.openGroup("stem",e.getAttribute("id")+"-stem"),e.getStem().setContext(this.context).draw(),this.context.closeGroup())}),this)}drawBeamLines(){this.checkContext();const e=["4","8","16","32","64"],t=this.notes[0];let i=this.getBeamYToDraw();const n=t.getStemX(),s=this.render_options.beam_width*this.stem_direction,r={};for(const o of this.notes)r[o.getAttribute("id")]=0;for(let o=0;o<e.length;++o){const t=e[o],a=this.getBeamLines(t);for(let e=0;e<a.length;++e){const t=a[e],o=t.start,l=t.start_note.getAttribute("id"),c=r[l];r[l]++;const h=this.getSlopeY(o,n,i,this.slope),u=t.end,d=this.getSlopeY(u,n,i,this.slope),f=l;this.context.openGroup("beam","".concat(f,"-beam").concat(c)),this.context.beginPath(),this.context.moveTo(o,h),this.context.lineTo(o,h+s),this.context.lineTo(u+1,d+s),this.context.lineTo(u+1,d),this.context.closePath(),this.context.fill(),this.context.closeGroup()}i+=1.5*s}}preFormat(){return this}postFormat(){this.postFormatted||("tabnotes"===this.notes[0].getCategory()||this.render_options.flat_beams?this.calculateFlatSlope():this.calculateSlope(),this.applyStemExtensions(),this.postFormatted=!0)}draw(){this.checkContext(),this.setRendered(),this.unbeamable||(this.postFormatted||this.postFormat(),this.drawStems(),this.applyStyle(),this.drawBeamLines(),this.restoreStyle())}}class C extends c{static get Mode(){return{STRICT:1,SOFT:2,FULL:3}}constructor(e){if(super(),this.setAttribute("type","Voice"),"string"==typeof e){const t=e.match(/(\d+)\/(\d+)/);t&&(e={num_beats:t[1],beat_value:t[2],resolution:m.RESOLUTION})}this.time=n.Merge({num_beats:4,beat_value:4,resolution:m.RESOLUTION},e),this.totalTicks=new r(this.time.num_beats*(this.time.resolution/this.time.beat_value),1),this.resolutionMultiplier=1,this.tickables=[],this.ticksUsed=new r(0,1),this.smallestTickCount=this.totalTicks.clone(),this.largestTickWidth=0,this.stave=null,this.mode=C.Mode.STRICT,this.voiceGroup=null}getTotalTicks(){return this.totalTicks}getTicksUsed(){return this.ticksUsed}getLargestTickWidth(){return this.largestTickWidth}getSmallestTickCount(){return this.smallestTickCount}getTickables(){return this.tickables}getMode(){return this.mode}setMode(e){return this.mode=e,this}getResolutionMultiplier(){return this.resolutionMultiplier}getActualResolution(){return this.resolutionMultiplier*this.time.resolution}setStave(e){return this.stave=e,this.boundingBox=null,this}getBoundingBox(){let e,t,i,s;if(!this.boundingBox){if(!this.stave)throw new n.RERR("NoStave","Can't get bounding box without stave.");for(e=this.stave,t=null,s=0;s<this.tickables.length;++s)this.tickables[s].setStave(e),i=this.tickables[s].getBoundingBox(),i&&(t=t?t.mergeWith(i):i);this.boundingBox=t}return this.boundingBox}getVoiceGroup(){if(!this.voiceGroup)throw new n.RERR("NoVoiceGroup","No voice group for voice.");return this.voiceGroup}setVoiceGroup(e){return this.voiceGroup=e,this}setStrict(e){return this.mode=e?C.Mode.STRICT:C.Mode.SOFT,this}isComplete(){return this.mode!==C.Mode.STRICT&&this.mode!==C.Mode.FULL||this.ticksUsed.equals(this.totalTicks)}addTickable(e){if(!e.shouldIgnoreTicks()){const t=e.getTicks();if(e.startTicks=this.ticksUsed.value(),this.ticksUsed.add(t),e.endTicks=this.ticksUsed.value(),(this.mode===C.Mode.STRICT||this.mode===C.Mode.FULL)&&this.ticksUsed.greaterThan(this.totalTicks))throw this.ticksUsed.subtract(t),new n.RERR("BadArgument","Too many ticks.");t.lessThan(this.smallestTickCount)&&(this.smallestTickCount=t.clone()),this.resolutionMultiplier=this.ticksUsed.denominator,this.totalTicks.add(0,this.ticksUsed.denominator)}return this.tickables.push(e),e.setVoice(this),this}addTickables(e){for(let t=0;t<e.length;++t)this.addTickable(e[t]);return this}preFormat(){return this.preFormatted||(this.tickables.forEach((e=>{e.getStave()||e.setStave(this.stave)})),this.preFormatted=!0),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.context,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.stave;this.setRendered();let i=null;for(let s=0;s<this.tickables.length;++s){const r=this.tickables[s];if(t&&r.setStave(t),!r.getStave())throw new n.RuntimeError("MissingStave","The voice cannot draw tickables without staves.");if(0===s&&(i=r.getBoundingBox()),s>0&&i){const e=r.getBoundingBox();e&&i.mergeWith(e)}r.setContext(e),r.drawWithStyle()}this.boundingBox=i}}function A(e,t,i,s,r){if(t!==N.type.BOLD_DOUBLE_LEFT&&t!==N.type.BOLD_DOUBLE_RIGHT)throw new n.RERR("InvalidConnector","A REPEAT_BEGIN or REPEAT_END type must be provided.");let o=3,a=3.5;t===N.type.BOLD_DOUBLE_RIGHT&&(o=-5,a=3),e.fillRect(i+o,s,1,r-s),e.fillRect(i-2,s,a,r-s)}class N extends c{static get type(){return{SINGLE_RIGHT:0,SINGLE_LEFT:1,SINGLE:1,DOUBLE:2,BRACE:3,BRACKET:4,BOLD_DOUBLE_LEFT:5,BOLD_DOUBLE_RIGHT:6,THIN_DOUBLE:7,NONE:8}}static get typeString(){return{singleRight:N.type.SINGLE_RIGHT,singleLeft:N.type.SINGLE_LEFT,single:N.type.SINGLE,double:N.type.DOUBLE,brace:N.type.BRACE,bracket:N.type.BRACKET,boldDoubleLeft:N.type.BOLD_DOUBLE_LEFT,boldDoubleRight:N.type.BOLD_DOUBLE_RIGHT,thinDouble:N.type.THIN_DOUBLE,none:N.type.NONE}}constructor(e,t){super(),this.setAttribute("type","StaveConnector"),this.thickness=m.STAVE_LINE_THICKNESS,this.width=3,this.top_stave=e,this.bottom_stave=t,this.type=N.type.DOUBLE,this.font={family:"times",size:16,weight:"normal"},this.x_shift=0,this.texts=[]}setType(e){return(e="string"==typeof e?N.typeString[e]:e)>=N.type.SINGLE_RIGHT&&e<=N.type.NONE&&(this.type=e),this}setText(e,t){return this.texts.push({content:e,options:n.Merge({shift_x:0,shift_y:0},t)}),this}setFont(e){n.Merge(this.font,e)}setXShift(e){if("number"!=typeof e)throw n.RERR("InvalidType","x_shift must be a Number");return this.x_shift=e,this}draw(){const e=this.checkContext();this.setRendered();let t=this.top_stave.getYForLine(0),i=this.bottom_stave.getYForLine(this.bottom_stave.getNumLines()-1)+this.thickness,s=this.width,r=this.top_stave.getX();(this.type===N.type.SINGLE_RIGHT||this.type===N.type.BOLD_DOUBLE_RIGHT||this.type===N.type.THIN_DOUBLE)&&(r=this.top_stave.getX()+this.top_stave.width);let o=i-t;switch(this.type){case N.type.SINGLE:case N.type.SINGLE_LEFT:case N.type.SINGLE_RIGHT:s=1;break;case N.type.DOUBLE:r-=this.width+2;break;case N.type.BRACE:{s=12;const n=this.top_stave.getX()-2+this.x_shift,r=t,a=n,l=i,c=n-s,h=r+o/2,u=c-.9*s,d=r+.2*o,f=n+1.1*s,p=h-.135*o,m=f,g=h+.135*o,b=u,v=l-.2*o,y=c-s,x=v,S=n+.4*s,E=h+.135*o,w=S,T=h-.135*o,_=y,M=d;e.beginPath(),e.moveTo(n,r),e.bezierCurveTo(u,d,f,p,c,h),e.bezierCurveTo(m,g,b,v,a,l),e.bezierCurveTo(y,x,S,E,c,h),e.bezierCurveTo(w,T,_,M,n,r),e.fill(),e.stroke();break}case N.type.BRACKET:t-=4,i+=4,o=i-t,p.renderGlyph(e,r-5,t-3,40,"v1b",!0),p.renderGlyph(e,r-5,i+3,40,"v10",!0),r-=this.width+2;break;case N.type.BOLD_DOUBLE_LEFT:A(e,this.type,r+this.x_shift,t,i);break;case N.type.BOLD_DOUBLE_RIGHT:A(e,this.type,r,t,i);break;case N.type.THIN_DOUBLE:s=1;break;case N.type.NONE:break;default:throw new n.RERR("InvalidType","The provided StaveConnector.type (".concat(this.type,") is invalid"))}this.type!==N.type.BRACE&&this.type!==N.type.BOLD_DOUBLE_LEFT&&this.type!==N.type.BOLD_DOUBLE_RIGHT&&this.type!==N.type.NONE&&e.fillRect(r,t,s,o),this.type===N.type.THIN_DOUBLE&&e.fillRect(r-3,t,s,o),e.save(),e.lineWidth=2,e.setFont(this.font.family,this.font.size,this.font.weight);for(let n=0;n<this.texts.length;n++){const t=this.texts[n],i=e.measureText(""+t.content).width,s=this.top_stave.getX()-i-24+t.options.shift_x,r=(this.top_stave.getYForLine(0)+this.bottom_stave.getBottomLineY())/2+t.options.shift_y;e.fillText(""+t.content,s,r+4)}e.restore()}}class L extends c{constructor(){super(),this.setAttribute("type","Tickable"),this.ticks=new r(0,1),this.intrinsicTicks=0,this.tickMultiplier=new r(1,1),this.width=0,this.x_shift=0,this.voice=null,this.tickContext=null,this.modifierContext=null,this.modifiers=[],this.preFormatted=!1,this.postFormatted=!1,this.tuplet=null,this.tupletStack=[],this.align_center=!1,this.center_x_shift=0,this.ignore_ticks=!1,this.formatterMetrics={freedom:{left:0,right:0},duration:"",iterations:0,space:{used:0,mean:0,deviation:0}}}reset(){return this}getTicks(){return this.ticks}shouldIgnoreTicks(){return this.ignore_ticks}getWidth(){return this.width}getFormatterMetrics(){return this.formatterMetrics}setXShift(e){this.x_shift=e}getCenterXShift(){return this.isCenterAligned()?this.center_x_shift:0}isCenterAligned(){return this.align_center}setCenterAlignment(e){return this.align_center=e,this}getVoice(){if(!this.voice)throw new n.RERR("NoVoice","Tickable has no voice.");return this.voice}setVoice(e){this.voice=e}getTuplet(){return this.tuplet}resetTuplet(e){let t,i;if(e){const n=this.tupletStack.indexOf(e);return-1!==n&&(this.tupletStack.splice(n,1),t=e.getNoteCount(),i=e.getNotesOccupied(),this.applyTickMultiplier(t,i)),this}for(;this.tupletStack.length;)t=(e=this.tupletStack.pop()).getNoteCount(),i=e.getNotesOccupied(),this.applyTickMultiplier(t,i);return this}setTuplet(e){if(e){this.tupletStack.push(e);const t=e.getNoteCount(),i=e.getNotesOccupied();this.applyTickMultiplier(i,t)}return this.tuplet=e,this}addToModifierContext(e){this.modifierContext=e,this.preFormatted=!1}addModifier(e){return this.modifiers.push(e),this.preFormatted=!1,this}getModifiers(){return this.modifiers}setTickContext(e){this.tickContext=e,this.preFormatted=!1}preFormat(){this.preFormatted||(this.width=0,this.modifierContext&&(this.modifierContext.preFormat(),this.width+=this.modifierContext.getWidth()))}postFormat(){return this.postFormatted||(this.postFormatted=!0),this}getIntrinsicTicks(){return this.intrinsicTicks}setIntrinsicTicks(e){this.intrinsicTicks=e,this.ticks=this.tickMultiplier.clone().multiply(this.intrinsicTicks)}getTickMultiplier(){return this.tickMultiplier}applyTickMultiplier(e,t){this.tickMultiplier.multiply(e,t),this.ticks=this.tickMultiplier.clone().multiply(this.intrinsicTicks)}setDuration(e){const t=e.numerator*(m.RESOLUTION/e.denominator);this.ticks=this.tickMultiplier.clone().multiply(t),this.intrinsicTicks=this.ticks.value()}}class k extends L{static get CATEGORY(){return"note"}static get STAVEPADDING(){return 12}static plotMetrics(e,t,i){const s=t.getMetrics(),r=t.getAbsoluteX()-s.modLeftPx-s.extraLeftPx,o=t.getAbsoluteX()-s.extraLeftPx,a=t.getAbsoluteX(),l=t.getAbsoluteX()+s.noteWidth,c=t.getAbsoluteX()+s.noteWidth+s.extraRightPx,h=t.getAbsoluteX()+s.noteWidth+s.extraRightPx+s.modRightPx,u=h+t.getFormatterMetrics().freedom.right,d=h-r;e.save(),e.setFont("Arial",8,""),e.fillText(Math.round(d)+"px",r+t.getXShift(),i);const f=i+7;function p(i,n,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f;e.beginPath(),e.setStrokeStyle(s),e.setFillStyle(s),e.setLineWidth(3),e.moveTo(i+t.getXShift(),r),e.lineTo(n+t.getXShift(),r),e.stroke()}p(r,o,"red"),p(o,a,"#999"),p(a,l,"green"),p(l,c,"#999"),p(c,h,"red"),p(h,u,"#DD0"),p(r-t.getXShift(),r,"#BBB"),n.drawDot(e,a+t.getXShift(),f,"blue");const m=t.getFormatterMetrics();if(m.iterations>0){const n=m.space.deviation,s=n>=0?"+":"";e.setFillStyle("red"),e.fillText(s+Math.round(n),a+t.getXShift(),i-10)}e.restore()}constructor(e){if(super(),this.setAttribute("type","Note"),!e)throw new n.RuntimeError("BadArguments","Note must have valid initialization data to identify duration and type.");const t=m.parseNoteStruct(e);if(!t)throw new n.RuntimeError("BadArguments","Invalid note initialization object: ".concat(JSON.stringify(e)));if(this.duration=t.duration,this.dots=t.dots,this.noteType=t.type,this.customTypes=t.customTypes,e.duration_override?this.setDuration(e.duration_override):this.setIntrinsicTicks(t.ticks),this.modifiers=[],this.glyph=m.getGlyphProps(this.duration,this.noteType),this.customGlyphs=this.customTypes.map((e=>m.getGlyphProps(this.duration,e))),this.positions&&("object"!=typeof this.positions||!this.positions.length))throw new n.RuntimeError("BadArguments","Note keys must be array type.");this.playNote=null,this.tickContext=null,this.modifierContext=null,this.ignore_ticks=!1,this.width=0,this.extraLeftPx=0,this.extraRightPx=0,this.x_shift=0,this.left_modPx=0,this.right_modPx=0,this.voice=null,this.preFormatted=!1,this.ys=[],e.align_center&&this.setCenterAlignment(e.align_center),this.stave=null,this.render_options={annotation_spacing:5,stave_padding:k.STAVEPADDING}}getPlayNote(){return this.playNote}setPlayNote(e){return this.playNote=e,this}isRest(){return!1}addStroke(e,t){return t.setNote(this),t.setIndex(e),this.modifiers.push(t),this.setPreFormatted(!1),this}getStave(){return this.stave}setStave(e){return this.stave=e,this.setYs([e.getYForLine(0)]),this.context=this.stave.context,this}getCategory(){return k.CATEGORY}setContext(e){return this.context=e,this}getExtraLeftPx(){return this.extraLeftPx}getExtraRightPx(){return this.extraRightPx}setExtraLeftPx(e){return this.extraLeftPx=e,this}setExtraRightPx(e){return this.extraRightPx=e,this}shouldIgnoreTicks(){return this.ignore_ticks}getLineNumber(){return 0}getLineForRest(){return 0}getGlyph(){return this.glyph}getGlyphWidth(){return this.glyph.getWidth(this.render_options.glyph_font_scale)}setYs(e){return this.ys=e,this}getYs(){if(0===this.ys.length)throw new n.RERR("NoYValues","No Y-values calculated for this note.");return this.ys}getYForTopText(e){if(!this.stave)throw new n.RERR("NoStave","No stave attached to this note.");return this.stave.getYForTopText(e)}getBoundingBox(){return null}getVoice(){if(!this.voice)throw new n.RERR("NoVoice","Note has no voice.");return this.voice}setVoice(e){return this.voice=e,this.preFormatted=!1,this}getTickContext(){return this.tickContext}setTickContext(e){return this.tickContext=e,this.preFormatted=!1,this}getDuration(){return this.duration}isDotted(){return this.dots>0}hasStem(){return!1}getDots(){return this.dots}getNoteType(){return this.noteType}setBeam(){return this}setModifierContext(e){return this.modifierContext=e,this}addModifier(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.setNote(this),e.setIndex(t),this.modifiers.push(e),this.setPreFormatted(!1),this}getModifierStartXY(){if(!this.preFormatted)throw new n.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");return{x:this.getAbsoluteX(),y:this.ys[0]}}getMetrics(){if(!this.preFormatted)throw new n.RERR("UnformattedNote","Can't call getMetrics on an unformatted note.");let e=0,t=0;null!=this.modifierContext&&(e=this.modifierContext.state.left_shift,t=this.modifierContext.state.right_shift);const i=this.getWidth();return{width:i,noteWidth:i-e-t-this.extraLeftPx-this.extraRightPx,left_shift:this.x_shift,modLeftPx:e,modRightPx:t,extraLeftPx:this.extraLeftPx,extraRightPx:this.extraRightPx}}setWidth(e){this.width=e}getWidth(){if(!this.preFormatted)throw new n.RERR("UnformattedNote","Can't call GetWidth on an unformatted note.");return this.width+(this.modifierContext?this.modifierContext.getWidth():0)}setXShift(e){return this.x_shift=e,this}getXShift(){return this.x_shift}getX(){if(!this.tickContext)throw new n.RERR("NoTickContext","Note needs a TickContext assigned for an X-Value");return this.tickContext.getX()+this.x_shift}getAbsoluteX(){if(!this.tickContext)throw new n.RERR("NoTickContext","Note needs a TickContext assigned for an X-Value");let e=this.tickContext.getX();return this.stave&&(e+=this.stave.getNoteStartX()+this.render_options.stave_padding),this.isCenterAligned()&&(e+=this.getCenterXShift()),e}setPreFormatted(e){if(this.preFormatted=e,this.preFormatted){const e=this.tickContext.getExtraPx();this.left_modPx=Math.max(this.left_modPx,e.left),this.right_modPx=Math.max(this.right_modPx,e.right)}}}class I extends k{static get CATEGORY(){return"notehead"}constructor(e){if(super(e),this.setAttribute("type","NoteHead"),this.index=e.index,this.x_shift=e.x_shift||0,this.x=(e.x||0)+this.x_shift,this.y=e.y||0,this.note_type=e.note_type,this.duration=e.duration,this.displaced=e.displaced||!1,this.stem_direction=e.stem_direction||F.STEM_UP,this.line=e.line,this.glyph=m.getGlyphProps(this.duration,this.note_type),!this.glyph)throw new n.RuntimeError("BadArguments","No glyph found for duration '".concat(this.duration,"' and type '").concat(this.note_type,"'"));this.glyph_code=this.glyph.code_head,this.x_shift_ledger_rest=0,this.y_shift_ledger_rest=0,this.x_shift=e.x_shift||0,this.glyph.rest&&(this.line>5||this.line<0)&&(this.isLedgerLinedRest=!0,"h"===this.duration?(e.custom_glyph_code="rhl",this.x_shift_ledger_rest-=4):"w"===this.duration&&(e.custom_glyph_code="rwl",this.x_shift_ledger_rest-=4,this.y_shift_ledger_rest=-5)),e.custom_glyph_code&&(this.custom_glyph=!0,this.glyph_code=e.custom_glyph_code,this.stem_up_x_offset=e.stem_up_x_offset||0,this.stem_down_x_offset=e.stem_down_x_offset||0,this.stem_up_y_shift=e.stem_up_y_shift||0,this.stem_down_y_shift=e.stem_down_y_shift||0),this.style=e.style,this.slashed=e.slashed,n.Merge(this.render_options,{glyph_font_scale:e.glyph_font_scale||m.DEFAULT_NOTATION_FONT_SCALE,stroke_px:3}),this.setWidth(this.glyph.getWidth(this.render_options.glyph_font_scale))}getCategory(){return I.CATEGORY}getWidth(){return this.width}isDisplaced(){return!0===this.displaced}getGlyph(){return this.glyph}setX(e){return this.x=e,this}getY(){return this.y}setY(e){return this.y=e,this}getLine(){return this.line}setLine(e){return this.line=e,this}getAbsoluteX(){const e=this.preFormatted?super.getAbsoluteX():this.x,t=E.WIDTH/2;return e+(this.displaced?(this.width-t)*this.stem_direction:0)}getBoundingBox(){if(!this.preFormatted)throw new n.RERR("UnformattedNote","Can't call getBoundingBox on an unformatted note.");const e=this.stave.getSpacingBetweenLines(),t=e/2,i=this.y-t;return new m.BoundingBox(this.getAbsoluteX(),i,this.width,e)}setStave(e){const t=this.getLine();return this.stave=e,this.setY(e.getYForNote(t)),this.context=this.stave.context,this}preFormat(){if(this.preFormatted)return this;const e=this.getWidth()+this.extraLeftPx+this.extraRightPx;return this.setWidth(e),this.setPreFormatted(!0),this}draw(){this.checkContext(),this.setRendered();const e=this.context;let t=this.getAbsoluteX(),i=this.y;this.custom_glyph&&(t+=this.x_shift_ledger_rest,this.stem_direction===E.UP?(t+=this.stem_up_x_offset,i+=this.stem_up_y_shift||0):this.stem_direction===E.DOWN&&(t+=this.stem_down_x_offset,i+=this.stem_down_y_shift||0),i+=this.y_shift_ledger_rest),function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];I.DEBUG&&n.L("Vex.Flow.NoteHead",t)}("Drawing note head '",this.note_type,this.duration,"' at",t,i);const s=this.stem_direction,r=this.render_options.glyph_font_scale;if(this.style&&this.applyStyle(e),"s"===this.note_type){const n=this.stave.getSpacingBetweenLines();!function(e,t,i,n,s,r){const o=m.SLASH_NOTEHEAD_WIDTH;e.save(),e.setLineWidth(m.STEM_WIDTH);let a=!1;if(m.durationToNumber(t)>2&&(a=!0),a||(i-=m.STEM_WIDTH/2*s),e.beginPath(),e.moveTo(i,n+r),e.lineTo(i,n+1),e.lineTo(i+o,n-r),e.lineTo(i+o,n),e.lineTo(i,n+r),e.closePath(),a?e.fill():e.stroke(),m.durationToFraction(t).equals(.5)){const t=[-3,-1,o+1,o+3];for(let s=0;s<t.length;s++)e.beginPath(),e.moveTo(i+t[s],n-10),e.lineTo(i+t[s],n+11),e.stroke()}e.restore()}(e,this.duration,t,i,s,n)}else p.renderGlyph(e,t,i,r,this.glyph_code,this.id);this.style&&this.restoreStyle(e)}}class R extends k{constructor(e){super(e),this.setAttribute("type","StemmableNote"),this.stem=null,this.stemExtensionOverride=null,this.beam=null,this.renderFlag=!0}getStem(){return this.stem}setStem(e){return this.stem=e,this}buildStem(){const e=new E;return this.setStem(e),this}buildFlag(){const{glyph:e,beam:t}=this,i=null===t&&this.renderFlag;if(e&&e.flag&&i){const t=this.getStemDirection()===E.DOWN?e.code_flag_downstem:e.code_flag_upstem;this.flag=new p(t,this.render_options.glyph_font_scale)}}getTopGlyph(){return this.getStemDirection()===E.DOWN?this.customGlyphs[this.customGlyphs.length-1]:this.customGlyphs[0]}getStemLength(){return E.HEIGHT+this.getStemExtension()}getBeamCount(){const e=this.getGlyph();return e?e.beam_count:0}getStemMinumumLength(){let e=m.durationToFraction(this.duration).value()<=1?0:20;switch(this.duration){case"8":null==this.beam&&(e=35);break;case"16":e=null==this.beam?35:25;break;case"32":e=null==this.beam?45:35;break;case"64":e=null==this.beam?50:40;break;case"128":e=null==this.beam?55:45}return e}getStemDirection(){return this.stem_direction}setStemDirection(e){if(e||(e=E.UP),e!==E.UP&&e!==E.DOWN)throw new n.RERR("BadArgument","Invalid stem direction: ".concat(e));if(this.stem_direction=e,this.stem){this.stem.setDirection(e),this.stem.setExtension(this.getStemExtension());const t=this.getTopGlyph()||this.getGlyph();this.stem.setOptions({stem_up_y_offset:t.stem_up_y_offset,stem_down_y_offset:t.stem_down_y_offset})}return this.reset(),this.flag&&this.renderFlag&&this.buildFlag(),this.beam=null,this.preFormatted&&this.preFormat(),this}getStemX(){const e=this.getAbsoluteX()+this.x_shift,t=this.getAbsoluteX()+this.x_shift+this.getGlyphWidth();return this.stem_direction===E.DOWN?e:t}getCenterGlyphX(){return this.getAbsoluteX()+this.x_shift+this.getGlyphWidth()/2}getStemExtension(){const e=this.getGlyph();return null!=this.stemExtensionOverride?this.stemExtensionOverride:e?1===this.getStemDirection()?e.stem_up_extension:e.stem_down_extension:0}setStemLength(e){return this.stemExtensionOverride=e-E.HEIGHT,this}getStemExtents(){return this.stem.getExtents()}setBeam(e){return this.beam=e,this}getYForTopText(e){const t=this.getStemExtents();return this.hasStem()?Math.min(this.stave.getYForTopText(e),t.topY-this.render_options.annotation_spacing*(e+1)):this.stave.getYForTopText(e)}getYForBottomText(e){const t=this.getStemExtents();return this.hasStem()?Math.max(this.stave.getYForTopText(e),t.baseY+this.render_options.annotation_spacing*e):this.stave.getYForBottomText(e)}hasFlag(){return this.renderFlag&&m.getGlyphProps(this.duration).flag&&!this.beam}postFormat(){return this.beam&&this.beam.postFormat(),this.postFormatted=!0,this}drawStem(e){this.checkContext(),this.setRendered(),this.setStem(new E(e)),this.stem.setContext(this.context).draw()}}class O extends c{static get CATEGORY(){return"none"}static get Position(){return{LEFT:1,RIGHT:2,ABOVE:3,BELOW:4}}static get PositionString(){return{above:O.Position.ABOVE,below:O.Position.BELOW,left:O.Position.LEFT,right:O.Position.RIGHT}}constructor(){super(),this.setAttribute("type","Modifier"),this.width=0,this.note=null,this.index=null,this.text_line=0,this.position=O.Position.LEFT,this.modifier_context=null,this.x_shift=0,this.y_shift=0,this.spacingFromNextModifier=0}getCategory(){return O.CATEGORY}getWidth(){return this.width}setWidth(e){return this.width=e,this}getNote(){return this.note}setNote(e){return this.note=e,this}getIndex(){return this.index}setIndex(e){return this.index=e,this}getModifierContext(){return this.modifier_context}setModifierContext(e){return this.modifier_context=e,this}getPosition(){return this.position}setPosition(e){return this.position="string"==typeof e?O.PositionString[e]:e,this}setTextLine(e){return this.text_line=e,this}setYShift(e){return this.y_shift=e,this}setSpacingFromNextModifier(e){this.spacingFromNextModifier=e}getSpacingFromNextModifier(){return this.spacingFromNextModifier}setXShift(e){this.x_shift=0,this.position===O.Position.LEFT?this.x_shift-=e:this.x_shift+=e}getXShift(){return this.x_shift}draw(){throw this.checkContext(),new n.RERR("MethodNotImplemented","draw() not implemented for this modifier.")}alignSubNotesWithNote(e,t){const i=t.getTickContext(),n=i.getExtraPx(),s=i.getX()-n.left-n.extraLeft+this.getSpacingFromNextModifier();e.forEach((e=>{const i=e.getTickContext();e.setStave(t.stave),i.setXOffset(s)}))}}class D extends O{static get CATEGORY(){return"dots"}static format(e,t){const i=t.right_shift;if(!e||0===e.length)return!1;const n=[],s={};for(let u=0;u<e.length;++u){const t=e[u],i=t.getNote();let r,o;"function"==typeof i.getKeyProps?(r=i.getKeyProps()[t.getIndex()],o=r.displaced?i.getExtraRightPx():0):(r={line:.5},o=0);const a=i.getAttribute("id");n.push({line:r.line,note:i,note_id:a,dot:t}),s[a]=Math.max(s[a]||o,o)}n.sort(((e,t)=>t.line-e.line));let r=i,o=0,a=null,l=null,c=null,h=0;for(let u=0;u<n.length;++u){const{dot:e,note:t,note_id:i,line:d}=n[u];d===a&&t===l||(r=s[i]),t.isRest()||d===a||(.5===Math.abs(d%1)?h=0:(h=.5,null==l||l.isRest()||a-d!=.5?d+h===c&&(h=-.5):h=-.5)),t.isRest()?e.dot_shiftY+=-h:e.dot_shiftY=-h,c=d+h,e.setXShift(r),r+=e.getWidth()+1,o=r>o?r:o,a=d,l=t}return t.right_shift+=o,!0}constructor(){super(),this.setAttribute("type","Dot"),this.note=null,this.index=null,this.position=O.Position.RIGHT,this.radius=2,this.setWidth(5),this.dot_shiftY=0}getCategory(){return D.CATEGORY}setNote(e){this.note=e,"gracenotes"===this.note.getCategory()&&(this.radius*=.5,this.setWidth(3))}setDotShiftY(e){return this.dot_shiftY=e,this}draw(){if(this.checkContext(),this.setRendered(),!this.note||null===this.index)throw new n.RERR("NoAttachedNote","Can't draw dot without a note and index.");const e=this.note.stave.options.spacing_between_lines_px,t=this.note.getModifierStartXY(this.position,this.index,{forceFlagRight:!0});"tabnotes"===this.note.getCategory()&&(t.y=this.note.getStemExtents().baseY);const i=t.x+this.x_shift+this.width-this.radius,s=t.y+this.y_shift+this.dot_shiftY*e,r=this.context;r.beginPath(),r.arc(i,s,this.radius,0,2*Math.PI,!1),r.fill()}}function B(e,t,i){if(e.note.shiftRestVerticalDisabled)return;const n=(t.isrest?0:1)*i;e.line+=n,e.maxLine+=n,e.minLine+=n,e.note.setKeyLine(0,e.note.getKeyLine(0)+n)}class F extends R{static get CATEGORY(){return"stavenotes"}static get STEM_UP(){return E.UP}static get STEM_DOWN(){return E.DOWN}static get DEFAULT_LEDGER_LINE_OFFSET(){return 3}static format(e,t){if(!e||e.length<2)return!1;const i=[],s=e[0].stagger_same_whole_notes;for(let n=0;n<e.length;n++){const t=e[n].getKeyProps(),s=t[0].line;let r=t[t.length-1].line;const o=e[n].getStemDirection(),a=e[n].getStemLength()/10,l=e[n].getStemMinumumLength()/10;let c;e[n].isRest()?(c=s+e[n].glyph.line_above,r=s-e[n].glyph.line_below):(c=1===o?t[t.length-1].line+a:t[t.length-1].line,r=1===o?t[0].line:t[0].line-a),i.push({line:t[0].line,maxLine:c,minLine:r,isrest:e[n].isRest(),stemDirection:o,stemMax:a,stemMin:l,voice_shift:e[n].getVoiceShiftWidth(),is_displaced:e[n].isDisplaced(),note:e[n]})}const r=i.length;let o=i[0];const a=r>2?i[1]:null;let l=r>2?i[2]:i[1];2!==r||-1!==o.stemDirection||1!==l.stemDirection||o.isrest||l.isRest||(o=i[1],l=i[0]);const c=Math.max(o.voice_shift,l.voice_shift);let h,u=0;if(2===r){const e=o.stemDirection===l.stemDirection?0:.5;if(o.stemDirection===l.stemDirection&&o.minLine<=l.maxLine&&(o.isrest||(h=Math.abs(o.line-(l.maxLine+.5)),h=Math.max(h,o.stemMin),o.minLine=o.line-h,o.note.setStemLength(10*h))),o.minLine<=l.maxLine+e)if(o.isrest)B(o,l,1),o.note.hasLedgerLinedRest&&(o.note.shiftRestVerticalDisabled=!0);else if(l.isrest)B(l,o,-1),l.note.hasLedgerLinedRest&&(l.note.shiftRestVerticalDisabled=!0);else{u=c;const e=Math.abs(o.line-l.line);let t=0,i=0;"h"===o.note.duration?t++:"w"===o.note.duration&&i++,"h"===l.note.duration?t++:"w"===l.note.duration&&i++;let n=1===t||1===i||o.note.dots!==l.note.dots;if(s&&(n=n||2===i),0===e&&n){if(l.note.setXShift(u),o.note.dots>0){let e=0;for(const t of o.note.modifiers)if(t instanceof D&&(e++,t.setYShift(-10*(l.maxLine-o.line+1)),e===o.note.dots))break}}else e<1&&e>0?l.note.setXShift(u):o.note.voice!==l.note.voice&&o.stemDirection===l.stemDirection&&(o.line>l.line?1===o.stemDirection?l.note.renderFlag=!1:o.note.renderFlag=!1:l.line>o.line?1===l.stemDirection?o.note.renderFlag=!1:l.note.renderFlag=!1:1===l.stemDirection&&(l.stemDirection=-1,l.note.setStemDirection(-1)))}return!0}return null!==a&&a.minLine<l.maxLine+.5&&(a.isrest||(h=Math.abs(a.line-(l.maxLine+.5)),h=Math.max(h,a.stemMin),a.minLine=a.line-h,a.note.setStemLength(10*h))),a.isrest&&!o.isrest&&!l.isrest&&(o.minLine<=a.maxLine||a.minLine<=l.maxLine)?(a.maxLine-a.minLine<o.minLine-l.maxLine?function(e,t,i){const s=e.line-n.MidLine(t.minLine,i.maxLine);e.note.setKeyLine(0,e.note.getKeyLine(0)-s),e.line-=s,e.maxLine-=s,e.minLine-=s}(a,o,l):(u=c+3,a.note.setXShift(u)),!0):o.isrest&&a.isrest&&l.isrest?(B(o,a,1),B(l,a,-1),!0):(a.isrest&&o.isrest&&a.minLine<=l.maxLine&&B(a,l,1),a.isrest&&l.isrest&&o.minLine<=a.maxLine&&B(a,o,-1),o.isrest&&o.minLine<=a.maxLine&&B(o,a,1),l.isrest&&a.minLine<=l.maxLine&&B(l,a,-1),(!o.isrest&&!a.isrest&&o.minLine<=a.maxLine+.5||!a.isrest&&!l.isrest&&a.minLine<=l.maxLine)&&(u=c+3,a.note.setXShift(u)),!0)}static formatByY(e,t){let i=!0;for(let n=0;n<e.length;n++)i=i&&null!=e[n].getStave();if(!i)throw new n.RERR("Stave Missing","All notes must have a stave - Vex.Flow.ModifierContext.formatMultiVoice!");let s=0;for(let n=0;n<e.length-1;n++){let t=e[n],i=e[n+1];t.maxLine<i.maxLine&&(t=e[n+1],i=e[n]);const r=t.getKeyProps(),o=i.getKeyProps(),a=.5,l=t.getStave().getYForLine(5-r[0].line+a);i.getStave().getYForLine(5-o[o.length-1].line-a)-l<0&&t.voice===i.voice&&(s=t.getVoiceShiftWidth()+2,i.setXShift(s))}t.right_shift+=s}static postFormat(e){return!!e&&(e.forEach((e=>e.postFormat())),!0)}constructor(e){if(super(e),this.setAttribute("type","StaveNote"),this.keys=e.keys,this.clef=e.clef,this.octave_shift=e.octave_shift,this.beam=null,this.glyph=m.getGlyphProps(this.duration,this.noteType),!this.glyph)throw new n.RuntimeError("BadArguments","Invalid note initialization data (No glyph found): ".concat(JSON.stringify(e)));this.displaced=!1,this.dot_shiftY=0,this.addDotsCount=0,this.keyProps=[],this.use_default_head_x=!1,this.paddingRight=0,this.note_heads=[],this.modifiers=[],n.Merge(this.render_options,{glyph_font_scale:e.glyph_font_scale||m.DEFAULT_NOTATION_FONT_SCALE,stroke_px:e.stroke_px||F.DEFAULT_LEDGER_LINE_OFFSET}),this.calculateKeyProps(),this.buildStem(),e.auto_stem?this.autoStem():this.setStemDirection(e.stem_direction),this.reset(),this.buildFlag()}reset(){super.reset();const e=this.note_heads.map((e=>e.getStyle())),t=[];this.note_heads.forEach((e=>t.push(e.note_type))),this.buildNoteHeads(),this.note_heads.forEach(((i,n)=>{i.setStyle(e[n]),t[n]&&(i.note_type=t[n])})),this.stave&&this.note_heads.forEach((e=>e.setStave(this.stave))),this.calcExtraPx()}setBeam(e){return this.beam=e,this.calcExtraPx(),this}getCategory(){return F.CATEGORY}buildStem(){this.setStem(new E({hide:!!this.isRest()})),this.stem.id=n.Prefix("".concat(this.getAttribute("id"),"-stem"))}buildNoteHeads(){this.note_heads=[];const e=this.getStemDirection(),t=this.getKeys();let i,s,r,o=null,a=null,l=!1;e===E.UP?(i=0,s=t.length,r=1):e===E.DOWN&&(i=t.length-1,s=-1,r=-1);for(let c=i;c!==s;c+=r){const t=this.keyProps[c],i=t.line;null===o?o=i:(a=Math.abs(o-i),0===a||.5===a?l=!l:(l=!1,this.use_default_head_x=!0)),o=i;const s=new I({duration:this.duration,note_type:this.noteType,displaced:l,stem_direction:e,custom_glyph_code:t.code,glyph_font_scale:this.render_options.glyph_font_scale,x_shift:t.shift_right,stem_up_x_offset:t.stem_up_x_offset,stem_down_x_offset:t.stem_down_x_offset,stem_up_y_shift:t.stem_up_y_shift,stem_down_y_shift:t.stem_down_y_shift,line:t.line});s.isLedgerLinedRest&&(this.hasLedgerLinedRest=!0),s.id=this.stem.id=n.Prefix("".concat(this.getAttribute("id"),"-stem").concat(c)),this.note_heads[c]=s}}autoStem(){this.minLine=this.keyProps[0].line,this.maxLine=this.keyProps[this.keyProps.length-1].line;const e=(this.minLine+this.maxLine)/2<3?E.UP:E.DOWN;this.setStemDirection(e)}calculateKeyProps(){let e=null;for(let t=0;t<this.keys.length;++t){const i=this.keys[t];this.glyph.rest&&(this.glyph.position=i);const s={octave_shift:this.octave_shift||0},r=m.keyProperties(i,this.clef,s);if(!r)throw new n.RuntimeError("BadArguments","Invalid key for note properties: ".concat(i));"R"===r.key&&("1"===this.duration||"w"===this.duration?r.line=4:r.line=3);const o=r.line;null===e?e=o:Math.abs(e-o)<1&&(this.displaced=!0,r.displaced=!0,this.keyProps.length>0&&(this.keyProps[t-1].displaced=!0)),e=o,this.keyProps.push(r)}e=-1/0,this.keyProps.forEach((t=>{t.line<e&&n.W("Unsorted keys in note will be sorted. See https://github.com/0xfe/vexflow/issues/104 for details."),e=t.line})),this.keyProps.sort(((e,t)=>e.line-t.line))}getBoundingBox(){if(!this.preFormatted)throw new n.RERR("UnformattedNote","Can't call getBoundingBox on an unformatted note.");const{width:e,modLeftPx:t,extraLeftPx:i}=this.getMetrics(),s=this.getAbsoluteX()-t-i-this.paddingRight;let r=0,o=0;const a=this.getStave().getSpacingBetweenLines()/2,l=2*a;if(this.isRest()){const e=this.ys[0],t=m.durationToFraction(this.duration);t.equals(1)||t.equals(2)?(r=e-a,o=e+a):(r=e-this.glyph.line_above*l,o=e+this.glyph.line_below*l)}else if(this.glyph.stem){const e=this.getStemExtents();e.baseY+=a*this.stem_direction,r=Math.min(e.topY,e.baseY),o=Math.max(e.topY,e.baseY)}else{r=null,o=null;for(let e=0;e<this.ys.length;++e){const t=this.ys[e];0===e?(r=t,o=t):(r=Math.min(t,r),o=Math.max(t,o))}r-=a,o+=a}return new u(s,r,e,o-r)}getLineNumber(e){if(!this.keyProps.length)throw new n.RERR("NoKeyProps","Can't get bottom note line, because note is not initialized properly.");let t=this.keyProps[0].line;for(let i=0;i<this.keyProps.length;i++){const n=this.keyProps[i].line;e?n>t&&(t=n):n<t&&(t=n)}return t}isRest(){return this.glyph.rest}isChord(){return!this.isRest()&&this.keys.length>1}hasStem(){return this.glyph.stem}hasFlag(){return super.hasFlag()&&!this.isRest()&&this.renderFlag}getStemX(){return"r"===this.noteType?this.getCenterGlyphX():super.getStemX()+E.WIDTH/(2*-this.getStemDirection())}getYForTopText(e){const t=this.getStemExtents();return Math.min(this.stave.getYForTopText(e),t.topY-this.render_options.annotation_spacing*(e+1))}getYForBottomText(e){const t=this.getStemExtents();return Math.max(this.stave.getYForTopText(e),t.baseY+this.render_options.annotation_spacing*e)}setStave(e){super.setStave(e);const t=this.note_heads.map((t=>(t.setStave(e),t.getY())));if(this.setYs(t),this.stem){const{y_top:e,y_bottom:t}=this.getNoteHeadBounds();this.stem.setYBounds(e,t)}return this}getKeys(){return this.keys}getKeyProps(){return this.keyProps}isDisplaced(){return this.displaced}setNoteDisplaced(e){return this.displaced=e,this}getTieRightX(){let e=this.getAbsoluteX();return e+=this.getGlyphWidth()+this.x_shift+this.extraRightPx,this.modifierContext&&(e+=this.modifierContext.getExtraRightPx()),e}getTieLeftX(){let e=this.getAbsoluteX();return e+=this.x_shift-this.extraLeftPx,e}getLineForRest(){let e=this.keyProps[0].line;if(this.keyProps.length>1){const t=this.keyProps[this.keyProps.length-1].line,i=Math.max(e,t),s=Math.min(e,t);e=n.MidLine(i,s)}return e}getModifierStartXY(e,t,i){if(i=i||{},!this.preFormatted)throw new n.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");if(0===this.ys.length)throw new n.RERR("NoYValues","No Y-Values calculated for this note.");const{ABOVE:s,BELOW:r,LEFT:o,RIGHT:a}=O.Position;let l=0;return e===o?l=-2:e===a?(l=this.getGlyphWidth()+this.x_shift+2,this.stem_direction===E.UP&&this.hasFlag()&&(i.forceFlagRight||((e,t)=>t===(e.getStemDirection()===E.UP?e.keyProps.length-1:0))(this,t))&&(l+=this.flag.getMetrics().width)):e!==r&&e!==s||(l=this.getGlyphWidth()/2),{x:this.getAbsoluteX()+l,y:this.ys[t]}}setStyle(e){super.setStyle(e),this.note_heads.forEach((t=>t.setStyle(e))),this.stem&&this.stem.setStyle(e)}setStemStyle(e){this.stem&&this.getStem().setStyle(e)}getStemStyle(){return this.stem.getStyle()}setLedgerLineStyle(e){this.ledgerLineStyle=e}getLedgerLineStyle(){return this.ledgerLineStyle}setFlagStyle(e){this.flagStyle=e}getFlagStyle(){return this.flagStyle}setKeyStyle(e,t){return this.note_heads[e].setStyle(t),this}setKeyLine(e,t){return this.keyProps[e].line=t,this.reset(),this}getKeyLine(e){return this.keyProps[e].line}addToModifierContext(e){this.setModifierContext(e);for(let t=0;t<this.modifiers.length;++t)this.modifierContext.addModifier(this.modifiers[t]);return this.modifierContext.addModifier(this),this.setPreFormatted(!1),this}addModifier(e,t){return t.setNote(this),t.setIndex(e),this.modifiers.push(t),this.setPreFormatted(!1),this}addAccidental(e,t){return this.addModifier(e,t)}addArticulation(e,t){return this.addModifier(e,t)}addAnnotation(e,t){return this.addModifier(e,t)}addDot(e){const t=new D;return t.setDotShiftY(this.glyph.dot_shiftY),this.addDotsCount++,this.addModifier(e,t)}addDotToAll(){for(let e=0;e<this.keys.length;++e)this.addDot(e);return this}getAccidentals(){return this.modifierContext.getModifiers("accidentals")}getDots(){return this.modifierContext.getModifiers("dots")}getVoiceShiftWidth(){return this.getGlyphWidth()*(this.displaced?2:1)}calcExtraPx(){this.setExtraLeftPx(this.displaced&&this.stem_direction===E.DOWN?this.getGlyphWidth():0),this.setExtraRightPx(!this.hasFlag()&&this.displaced&&this.stem_direction===E.UP?this.getGlyphWidth():0)}preFormat(){if(this.preFormatted)return;this.modifierContext&&this.modifierContext.preFormat();let e=this.getGlyphWidth()+this.extraLeftPx+this.extraRightPx+this.paddingRight;this.renderFlag&&this.glyph.flag&&null===this.beam&&this.stem_direction===E.UP&&(e+=this.getGlyphWidth()),this.setWidth(e),this.setPreFormatted(!0)}getNoteHeadBounds(){let e=null,t=null,i=null,n=null,s=this.stave.getNumLines(),r=1,o=!1,a=!1,l=s,c=r;return this.note_heads.forEach((h=>{const u=h.getLine(),d=h.getY();(null===e||d<e)&&(e=d),(null===t||d>t)&&(t=d),null===n&&h.isDisplaced()&&(n=h.getAbsoluteX()),null!==i||h.isDisplaced()||(i=h.getAbsoluteX()),s=u>s?u:s,r=u<r?u:r,h.isDisplaced()?(o=!1===o?u:Math.max(u,o),a=!1===a?u:Math.min(u,a)):(l=Math.max(u,l),c=Math.min(u,c))}),this),{y_top:e,y_bottom:t,displaced_x:n,non_displaced_x:i,highest_line:s,lowest_line:r,highest_displaced_line:o,lowest_displaced_line:a,highest_non_displaced_line:l,lowest_non_displaced_line:c}}getNoteHeadBeginX(){return this.getAbsoluteX()+this.x_shift}getNoteHeadEndX(){return this.getNoteHeadBeginX()+this.getGlyphWidth()}drawLedgerLines(){const{stave:e,glyph:t,render_options:{stroke_px:i},context:r}=this,o=t.getWidth()+2*i,a=2*(t.getWidth()+i)-E.WIDTH/2;if(this.isRest())return;if(!r)throw new n.RERR("NoCanvasContext","Can't draw without a canvas context.");const{highest_line:l,lowest_line:c,highest_displaced_line:h,highest_non_displaced_line:u,lowest_displaced_line:d,lowest_non_displaced_line:f,displaced_x:p,non_displaced_x:m}=this.getNoteHeadBounds(),g=Math.min(p,m),b=(e,t,n)=>{let s;s=n&&t?g-i:t?m-i:p-i;const l=t&&n?a:o;r.beginPath(),r.moveTo(s,e),r.lineTo(s+l,e),r.stroke()},v=s(s({},e.getStyle()||{}),this.getLedgerLineStyle()||{});this.applyStyle(r,v);const y=l>=6||c<=0;y&&r.openGroup("ledgers",this.getAttribute("id")+"ledgers");for(let n=6;n<=l;++n){const t=null!==m&&n<=u,i=null!==p&&n<=h;b(e.getYForNote(n),t,i)}for(let n=0;n>=c;--n){const t=null!==m&&n>=f,i=null!==p&&n>=d;b(e.getYForNote(n),t,i)}y&&r.closeGroup(),this.restoreStyle(r,v)}drawModifiers(){if(!this.context)throw new n.RERR("NoCanvasContext","Can't draw without a canvas context.");const e=this.context;e.openGroup("modifiers");for(let t=0;t<this.modifiers.length;t++){const i=this.modifiers[t],n=this.note_heads[i.getIndex()],s=n.getStyle();n.applyStyle(e,s),i.setContext(e),i.drawWithStyle(),n.restoreStyle(e,s)}e.closeGroup()}drawFlag(){const{stem:e,beam:t,context:i}=this;if(!i)throw new n.RERR("NoCanvasContext","Can't draw without a canvas context.");const s=null===t&&this.renderFlag;if(this.getGlyph().flag&&s){const{y_top:t,y_bottom:n}=this.getNoteHeadBounds(),s=e.getHeight(),r=this.getStemX(),o=this.getStemDirection()===E.DOWN?t-s+2:n-s-2;i.openGroup("flag",null,{pointerBBox:!0}),this.applyStyle(i,this.getFlagStyle()||!1),this.flag.render(i,r,o),this.restoreStyle(i,this.getFlagStyle()||!1),i.closeGroup()}}drawNoteHeads(){this.note_heads.forEach((e=>{this.context.openGroup("notehead",null,{pointerBBox:!0}),e.setContext(this.context).draw(),this.context.closeGroup()}))}drawStem(e){if(!this.context)throw new n.RERR("NoCanvasContext","Can't draw without a canvas context.");e&&this.setStem(new E(e)),this.stem.id=n.Prefix("".concat(this.getAttribute("id"),"-stem")),this.stem&&(this.context.openGroup("stem",null,{pointerBBox:!0}),this.stem.setContext(this.context).draw(),this.context.closeGroup())}draw(){if(!this.context)throw new n.RERR("NoCanvasContext","Can't draw without a canvas context.");if(!this.stave)throw new n.RERR("NoStave","Can't draw without a stave.");if(0===this.ys.length)throw new n.RERR("NoYValues","Can't draw note without Y values.");const e=this.getNoteHeadBeginX(),t=this.hasStem()&&!this.beam;if(this.note_heads.forEach((t=>t.setX(e))),this.stem){const e=this.getStemX();this.stem.setNoteHeadXBounds(e,e)}!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];F.DEBUG&&n.L("Vex.Flow.StaveNote",t)}("Rendering ",this.isChord()?"chord :":"note :",this.keys),this.drawLedgerLines(),this.applyStyle(),this.setAttribute("el",this.context.openGroup("stavenote",this.getAttribute("id"))),this.context.openGroup("note",null,{pointerBBox:!0}),t&&this.drawStem(),this.drawNoteHeads(),this.drawFlag(),this.context.closeGroup(),this.drawModifiers(),this.context.closeGroup(),this.restoreStyle(),this.setRendered()}}class V extends O{static get CATEGORY(){return"frethandfinger"}static format(e,t){const{left_shift:i,right_shift:n}=t;if(!e||0===e.length)return!1;const s=[];let r=null,o=0,a=0;for(let p=0;p<e.length;++p){const t=e[p],l=t.getNote(),c=t.getPosition(),h=l.getKeyProps()[t.getIndex()];if(l!==r){for(let e=0;e<l.keys.length;++e){const t=l.getKeyProps()[e];0===i&&(o=t.displaced?l.getExtraLeftPx():o),0===n&&(a=t.displaced?l.getExtraRightPx():a)}r=l}s.push({note:l,num:t,pos:c,line:h.line,shiftL:o,shiftR:a})}s.sort(((e,t)=>t.line-e.line));let l=0,c=0,h=0,u=0,d=null,f=null;for(let p=0;p<s.length;++p){let e=0;const{note:t,pos:r,num:o,line:m,shiftL:g,shiftR:b}=s[p];m===d&&t===f||(l=i+g,c=n+b);const v=o.getWidth()+1;r===O.Position.LEFT?(o.setXShift(i+l),e=i+v,h=e>h?e:h):r===O.Position.RIGHT&&(o.setXShift(c),e=a+v,u=e>u?e:u),d=m,f=t}return t.left_shift+=h,t.right_shift+=u,!0}constructor(e){super(),this.setAttribute("type","FretHandFinger"),this.note=null,this.index=null,this.finger=e,this.width=7,this.position=O.Position.LEFT,this.x_shift=0,this.y_shift=0,this.x_offset=0,this.y_offset=0,this.font={family:"sans-serif",size:9,weight:"bold"}}getCategory(){return V.CATEGORY}setFretHandFinger(e){return this.finger=e,this}setOffsetX(e){return this.x_offset=e,this}setOffsetY(e){return this.y_offset=e,this}draw(){if(this.checkContext(),!this.note||null==this.index)throw new n.RERR("NoAttachedNote","Can't draw string number without a note and index.");this.setRendered();const e=this.context,t=this.note.getModifierStartXY(this.position,this.index);let i=t.x+this.x_shift+this.x_offset,s=t.y+this.y_shift+this.y_offset+5;switch(this.position){case O.Position.ABOVE:i-=4,s-=12;break;case O.Position.BELOW:i-=2,s+=10;break;case O.Position.LEFT:i-=this.width;break;case O.Position.RIGHT:i+=1;break;default:throw new n.RERR("InvalidPostion","The position ".concat(this.position," does not exist"))}e.save(),e.setFont(this.font.family,this.font.size,this.font.weight),e.fillText(""+this.finger,i,s),e.restore()}}class j{static get NUM_TONES(){return 12}static get roots(){return["c","d","e","f","g","a","b"]}static get root_values(){return[0,2,4,5,7,9,11]}static get root_indices(){return{c:0,d:1,e:2,f:3,g:4,a:5,b:6}}static get canonical_notes(){return["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"]}static get diatonic_intervals(){return["unison","m2","M2","m3","M3","p4","dim5","p5","m6","M6","b7","M7","octave"]}static get diatonic_accidentals(){return{unison:{note:0,accidental:0},m2:{note:1,accidental:-1},M2:{note:1,accidental:0},m3:{note:2,accidental:-1},M3:{note:2,accidental:0},p4:{note:3,accidental:0},dim5:{note:4,accidental:-1},p5:{note:4,accidental:0},m6:{note:5,accidental:-1},M6:{note:5,accidental:0},b7:{note:6,accidental:-1},M7:{note:6,accidental:0},octave:{note:7,accidental:0}}}static get intervals(){return{u:0,unison:0,m2:1,b2:1,min2:1,S:1,H:1,2:2,M2:2,maj2:2,T:2,W:2,m3:3,b3:3,min3:3,M3:4,3:4,maj3:4,4:5,p4:5,"#4":6,b5:6,aug4:6,dim5:6,5:7,p5:7,"#5":8,b6:8,aug5:8,6:9,M6:9,maj6:9,b7:10,m7:10,min7:10,dom7:10,M7:11,maj7:11,8:12,octave:12}}static get scales(){return{major:[2,2,1,2,2,2,1],dorian:[2,1,2,2,2,1,2],mixolydian:[2,2,1,2,2,1,2],minor:[2,1,2,2,1,2,2]}}static get scaleTypes(){return{M:j.scales.major,m:j.scales.minor}}static get accidentals(){return["bb","b","n","#","##"]}static get noteValues(){return{c:{root_index:0,int_val:0},cn:{root_index:0,int_val:0},"c#":{root_index:0,int_val:1},"c##":{root_index:0,int_val:2},cb:{root_index:0,int_val:11},cbb:{root_index:0,int_val:10},d:{root_index:1,int_val:2},dn:{root_index:1,int_val:2},"d#":{root_index:1,int_val:3},"d##":{root_index:1,int_val:4},db:{root_index:1,int_val:1},dbb:{root_index:1,int_val:0},e:{root_index:2,int_val:4},en:{root_index:2,int_val:4},"e#":{root_index:2,int_val:5},"e##":{root_index:2,int_val:6},eb:{root_index:2,int_val:3},ebb:{root_index:2,int_val:2},f:{root_index:3,int_val:5},fn:{root_index:3,int_val:5},"f#":{root_index:3,int_val:6},"f##":{root_index:3,int_val:7},fb:{root_index:3,int_val:4},fbb:{root_index:3,int_val:3},g:{root_index:4,int_val:7},gn:{root_index:4,int_val:7},"g#":{root_index:4,int_val:8},"g##":{root_index:4,int_val:9},gb:{root_index:4,int_val:6},gbb:{root_index:4,int_val:5},a:{root_index:5,int_val:9},an:{root_index:5,int_val:9},"a#":{root_index:5,int_val:10},"a##":{root_index:5,int_val:11},ab:{root_index:5,int_val:8},abb:{root_index:5,int_val:7},b:{root_index:6,int_val:11},bn:{root_index:6,int_val:11},"b#":{root_index:6,int_val:0},"b##":{root_index:6,int_val:1},bb:{root_index:6,int_val:10},bbb:{root_index:6,int_val:9}}}isValidNoteValue(e){return!(null==e||e<0||e>=j.NUM_TONES)}isValidIntervalValue(e){return this.isValidNoteValue(e)}getNoteParts(e){if(!e||e.length<1)throw new n.RERR("BadArguments","Invalid note name: "+e);if(e.length>3)throw new n.RERR("BadArguments","Invalid note name: "+e);const t=e.toLowerCase(),i=/^([cdefgab])(b|bb|n|#|##)?$/.exec(t);if(null!=i)return{root:i[1],accidental:i[2]};throw new n.RERR("BadArguments","Invalid note name: "+e)}getKeyParts(e){if(!e||e.length<1)throw new n.RERR("BadArguments","Invalid key: "+e);const t=e.toLowerCase(),i=/^([cdefgab])(b|#)?(mel|harm|m|M)?$/.exec(t);if(null!=i){const e=i[1],t=i[2];let n=i[3];return n||(n="M"),{root:e,accidental:t,type:n}}throw new n.RERR("BadArguments","Invalid key: ".concat(e))}getNoteValue(e){const t=j.noteValues[e];if(null==t)throw new n.RERR("BadArguments","Invalid note name: ".concat(e));return t.int_val}getIntervalValue(e){const t=j.intervals[e];if(null==t)throw new n.RERR("BadArguments","Invalid interval name: ".concat(e));return t}getCanonicalNoteName(e){if(!this.isValidNoteValue(e))throw new n.RERR("BadArguments","Invalid note value: ".concat(e));return j.canonical_notes[e]}getCanonicalIntervalName(e){if(!this.isValidIntervalValue(e))throw new n.RERR("BadArguments","Invalid interval value: ".concat(e));return j.diatonic_intervals[e]}getRelativeNoteValue(e,t,i){if(null==i&&(i=1),1!==i&&-1!==i)throw new n.RERR("BadArguments","Invalid direction: ".concat(i));let s=(e+i*t)%j.NUM_TONES;return s<0&&(s+=j.NUM_TONES),s}getRelativeNoteName(e,t){const i=this.getNoteParts(e),s=this.getNoteValue(i.root);let r=t-s;if(Math.abs(r)>j.NUM_TONES-3){let i=1;r>0&&(i=-1);const o=(t+1+(s+1))%j.NUM_TONES*i;if(Math.abs(o)>2)throw new n.RERR("BadArguments","Notes not related: ".concat(e,", ").concat(t,")"));r=o}if(Math.abs(r)>2)throw new n.RERR("BadArguments","Notes not related: ".concat(e,", ").concat(t,")"));let o=i.root;if(r>0)for(let n=1;n<=r;++n)o+="#";else if(r<0)for(let n=-1;n>=r;--n)o+="b";return o}getScaleTones(e,t){const i=[e];let n=e;for(let s=0;s<t.length;s+=1)n=this.getRelativeNoteValue(n,t[s]),n!==e&&i.push(n);return i}getIntervalBetween(e,t,i){if(null==i&&(i=1),1!==i&&-1!==i)throw new n.RERR("BadArguments","Invalid direction: ".concat(i));if(!this.isValidNoteValue(e)||!this.isValidNoteValue(t))throw new n.RERR("BadArguments","Invalid notes: ".concat(e,", ").concat(t));let s=1===i?t-e:e-t;return s<0&&(s+=j.NUM_TONES),s}createScaleMap(e){const t=this.getKeyParts(e),i=j.scaleTypes[t.type];let s=t.root;if(t.accidental&&(s+=t.accidental),!i)throw new n.RERR("BadArguments","Unsupported key type: "+e);const r=this.getScaleTones(this.getNoteValue(s),i),o=j.root_indices[t.root],a={};for(let n=0;n<j.roots.length;++n){const e=(o+n)%j.roots.length,t=j.roots[e];let i=this.getRelativeNoteName(t,r[n]);1===i.length&&(i+="n"),a[t]=i}return a}}function G(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];z.DEBUG&&n.L("Vex.Flow.Accidental",t)}const W=e=>e.getMetrics().width;class z extends O{static get CATEGORY(){return"accidentals"}static format(e,t){var i=this;const n=t.left_shift+1;if(!e||0===e.length)return;const s=[];let r,o=null,a=0;for(let m=0;m<e.length;++m){const t=e[m],i=t.getNote(),n=i.getStave(),l=i.getKeyProps()[t.getIndex()];if(i!==o){for(let e=0;e<i.keys.length;++e)r=i.getKeyProps()[e],a=r.displaced?i.getExtraLeftPx():a;o=i}if(null!==n){const e=n.options.spacing_between_lines_px,i=n.getYForLine(l.line),r=Math.round(i/e*2)/2;s.push({y:i,line:r,shift:a,acc:t,lineSpace:e})}else s.push({line:l.line,shift:a,acc:t})}s.sort(((e,t)=>t.line-e.line));const l=[];let c=0,h=null;for(let m=0;m<s.length;m++){const e=s[m];null!==h&&h===e.line||l.push({line:e.line,flatLine:!0,dblSharpLine:!0,numAcc:0,width:0}),"b"!==e.acc.type&&"bb"!==e.acc.type&&(l[l.length-1].flatLine=!1),"##"!==e.acc.type&&(l[l.length-1].dblSharpLine=!1),l[l.length-1].numAcc++,l[l.length-1].width+=e.acc.getWidth()+3,c=e.shift>c?e.shift:c,h=e.line}let u=0;for(let b=0;b<l.length;b++){let e=!1;const t=b;let n=b;for(;n+1<l.length&&!e;)this.checkCollision(l[n],l[n+1])?n++:e=!0;const s=e=>l[t+e],r=e=>e.map(s),o=(e,t)=>{const[i,n]=r([e,t]).map((e=>e.line));return i-n},a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(r).every((e=>!i.checkCollision(...e)))},c=n-t+1;let h,d,f=this.checkCollision(l[t],l[n])?"a":"b";switch(c){case 3:"a"===f&&.5===o(1,2)&&.5!==o(0,1)&&(f="second_on_bottom");break;case 4:a([0,2],[1,3])&&(f="spaced_out_tetrachord");break;case 5:"b"===f&&a([1,3])&&(f="spaced_out_pentachord",a([0,2],[2,4])&&(f="very_spaced_out_pentachord"));break;case 6:a([0,3],[1,4],[2,5])&&(f="spaced_out_hexachord"),a([0,2],[2,4],[1,3],[3,5])&&(f="very_spaced_out_hexachord")}if(c>=7){let e=2,t=!0;for(;!0===t;){t=!1;for(let i=0;i+e<l.length;i++)if(this.checkCollision(l[i],l[i+e])){t=!0,e++;break}}for(h=b;h<=n;h++)d=(h-b)%e+1,l[h].column=d,u=u>d?u:d}else for(h=b;h<=n;h++)d=m.accidentalColumnsTable[c][f][h-b],l[h].column=d,u=u>d?u:d;b=n}const d=[],f=[];for(let m=0;m<=u;m++)d[m]=0,f[m]=0;d[0]=c+n,f[0]=c+n,l.forEach((e=>{e.width>d[e.column]&&(d[e.column]=e.width)}));for(let m=1;m<d.length;m++)f[m]=d[m]+f[m-1];const p=f[f.length-1];let g=0;l.forEach((e=>{let t=0;const i=g+e.numAcc;for(;g<i;g++){const i=f[e.column-1]+t;s[g].acc.setXShift(i),t+=s[g].acc.getWidth()+3,G("Line, accCount, shift: ",e.line,g,i)}})),t.left_shift+=p}static checkCollision(e,t){let i=t.line-e.line,n=3;i>0?(n=t.flatLine||t.dblSharpLine?2.5:3,e.dblSharpLine&&(i-=.5)):(n=e.flatLine||e.dblSharpLine?2.5:3,t.dblSharpLine&&(i-=.5));const s=Math.abs(i)<n;return G("Line_1, Line_2, Collision: ",e.line,t.line,s),s}static applyAccidentals(e,t){const i=[],n={};e.forEach((e=>{const t=new r(0,1);e.getTickables().forEach((e=>{if(e.shouldIgnoreTicks())return;const s=n[t.value()];s?s.push(e):(i.push(t.value()),n[t.value()]=[e]),t.add(e.getTicks())}))}));const s=new j;t||(t="C");const o=s.createScaleMap(t);i.forEach((e=>{const t=n[e],i=[],r=e=>{e.isRest()||e.shouldIgnoreTicks()||(e.keys.forEach(((t,n)=>{const r=s.getNoteParts(t.split("/")[0]),a=r.accidental||"n",l=r.root+a,c=o[r.root]===l,h=i.indexOf(l)>-1;if(!c||c&&h){o[r.root]=l;const t=new z(a);e.addAccidental(n,t),i.push(l)}})),e.getModifiers().forEach((e=>{"gracenotegroups"===e.getCategory()&&e.getGraceNotes().forEach(r)})))};t.forEach(r)}))}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.setAttribute("type","Accidental"),G("New accidental: ",e),this.note=null,this.index=null,this.type=e,this.position=O.Position.LEFT,this.render_options={font_scale:38,stroke_px:3,parenLeftPadding:2,parenRightPadding:2},this.accidental=m.accidentalCodes(this.type),!this.accidental)throw new n.RERR("ArgumentError","Unknown accidental type: ".concat(e));this.cautionary=!1,this.parenLeft=null,this.parenRight=null,this.reset()}reset(){const e=this.render_options.font_scale;this.glyph=new p(this.accidental.code,e),this.glyph.setOriginX(1),this.cautionary&&(this.parenLeft=new p(m.accidentalCodes("{").code,e),this.parenRight=new p(m.accidentalCodes("}").code,e),this.parenLeft.setOriginX(1),this.parenRight.setOriginX(1))}getCategory(){return z.CATEGORY}getWidth(){const e=this.cautionary?W(this.parenLeft)+W(this.parenRight)+this.render_options.parenLeftPadding+this.render_options.parenRightPadding:0;return W(this.glyph)+e}setNote(e){if(!e)throw new n.RERR("ArgumentError","Bad note value: ".concat(e));this.note=e,"gracenotes"===this.note.getCategory()&&(this.render_options.font_scale=25,this.reset())}setAsCautionary(){return this.cautionary=!0,this.render_options.font_scale=28,this.reset(),this}draw(){const{context:e,type:t,position:i,note:s,index:r,cautionary:o,x_shift:a,y_shift:l,glyph:c,parenLeft:h,parenRight:u,render_options:{parenLeftPadding:d,parenRightPadding:f}}=this;if(this.checkContext(),!s||null==r)throw new n.RERR("NoAttachedNote","Can't draw accidental without a note and index.");const p=s.getModifierStartXY(i,r);let m=p.x+a;const g=p.y+l;G("Rendering: ",t,m,g),o?(u.render(e,m,g),m-=W(u),m-=f,m-=this.accidental.parenRightPaddingAdjustment,c.render(e,m,g),m-=W(c),m-=d,h.render(e,m,g)):c.render(e,m,g),this.setRendered()}}class U extends O{static get CATEGORY(){return"notesubgroup"}static format(e,t){if(!e||0===e.length)return!1;let i=0;for(let n=0;n<e.length;++n){const t=e[n];t.preFormat(),i+=t.getWidth()}return t.left_shift+=i,!0}constructor(e){return super(),this.setAttribute("type","NoteSubGroup"),this.note=null,this.index=null,this.position=O.Position.LEFT,this.subNotes=e,this.subNotes.forEach((e=>{e.ignore_ticks=!1})),this.width=0,this.preFormatted=!1,this.formatter=new de,this.voice=new C({num_beats:4,beat_value:4,resolution:m.RESOLUTION}).setStrict(!1),this.voice.addTickables(this.subNotes),this}getCategory(){return U.CATEGORY}preFormat(){this.preFormatted||(this.formatter.joinVoices([this.voice]).format([this.voice],0),this.setWidth(this.formatter.getMinTotalWidth()),this.preFormatted=!0)}setNote(e){this.note=e}setWidth(e){this.width=e}getWidth(){return this.width}draw(){this.checkContext();const e=this.getNote();if(!e||null===this.index)throw new n.RuntimeError("NoAttachedNote","Can't draw notes without a parent note and parent note index.");this.setRendered(),this.alignSubNotesWithNote(this.subNotes,e),this.subNotes.forEach((e=>e.setContext(this.context).drawWithStyle()))}}class H extends c{constructor(e,t){super(),this.setAttribute("type","StaveTie"),this.notes=e,this.context=null,this.text=t,this.direction=null,this.render_options={cp1:8,cp2:12,text_shift_x:0,first_x_shift:0,last_x_shift:0,y_shift:7,tie_spacing:0,font:{family:"Arial",size:10,style:""}},this.font=this.render_options.font,this.setNotes(e)}setFont(e){return this.font=e,this}setDirection(e){return this.direction=e,this}setNotes(e){if(!e.first_note&&!e.last_note)throw new n.RuntimeError("BadArguments","Tie needs to have either first_note or last_note set.");if(e.first_indices||(e.first_indices=[0]),e.last_indices||(e.last_indices=[0]),e.first_indices.length!==e.last_indices.length)throw new n.RuntimeError("BadArguments","Tied notes must have similar index sizes");return this.first_note=e.first_note,this.first_indices=e.first_indices,this.last_note=e.last_note,this.last_indices=e.last_indices,this}isPartial(){return!this.first_note||!this.last_note}renderTie(e){if(0===e.first_ys.length||0===e.last_ys.length)throw new n.RERR("BadArguments","No Y-values to render");const t=this.context;let i=this.render_options.cp1,s=this.render_options.cp2;Math.abs(e.last_x_px-e.first_x_px)<10&&(i=2,s=8);const r=this.render_options.first_x_shift,o=this.render_options.last_x_shift,a=this.render_options.y_shift*e.direction;for(let l=0;l<this.first_indices.length;++l){const c=(e.last_x_px+o+(e.first_x_px+r))/2,h=e.first_ys[this.first_indices[l]]+a,u=e.last_ys[this.last_indices[l]]+a;if(isNaN(h)||isNaN(u))throw new n.RERR("BadArguments","Bad indices for tie rendering.");const d=(h+u)/2+i*e.direction,f=(h+u)/2+s*e.direction;let p;this.first_note&&(p=this.first_note.getAttribute("id")+"-tie"),this.setAttribute("el",t.openGroup("stavetie",p)),t.beginPath(),t.moveTo(e.first_x_px+r,h),t.quadraticCurveTo(c,d,e.last_x_px+o,u),t.quadraticCurveTo(c,f,e.first_x_px+r,h),t.closePath(),t.fill(),t.closeGroup()}}renderText(e,t){if(!this.text)return;let i=(e+t)/2;i-=this.context.measureText(this.text).width/2,this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.style),this.context.fillText(this.text,i+this.render_options.text_shift_x,(this.first_note||this.last_note).getStave().getYForTopText()-1),this.context.restore()}draw(){this.checkContext(),this.setRendered();const e=this.first_note,t=this.last_note;let i,n,s,r,o;return e?(i=e.getTieRightX()+this.render_options.tie_spacing,o=e.getStemDirection(),s=e.getYs()):(i=t.getStave().getTieStartX(),s=t.getYs(),this.first_indices=this.last_indices),t?(n=t.getTieLeftX()+this.render_options.tie_spacing,o=t.getStemDirection(),r=t.getYs()):(n=e.getStave().getTieEndX(),r=e.getYs(),this.last_indices=this.first_indices),this.direction&&(o=this.direction),this.renderTie({first_x_px:i,last_x_px:n,first_ys:s,last_ys:r,direction:o}),this.renderText(i,n),!0}}class X extends H{static createHammeron(e){return new X(e,"H")}static createPulloff(e){return new X(e,"P")}constructor(e,t){super(e,t),this.setAttribute("type","TabTie"),this.render_options.cp1=9,this.render_options.cp2=11,this.render_options.y_shift=3,this.setNotes(e)}draw(){this.checkContext(),this.setRendered();const e=this.first_note,t=this.last_note;let i,n,s,r;return e?(i=e.getTieRightX()+this.render_options.tie_spacing,s=e.getYs()):(i=t.getStave().getTieStartX(),s=t.getYs(),this.first_indices=this.last_indices),t?(n=t.getTieLeftX()+this.render_options.tie_spacing,r=t.getYs()):(n=e.getStave().getTieEndX(),r=e.getYs(),this.last_indices=this.first_indices),this.renderTie({first_x_px:i,last_x_px:n,first_ys:s,last_ys:r,direction:-1}),this.renderText(i,n),!0}}class Y extends O{static get CATEGORY(){return"gracenotegroups"}static format(e,t){if(!e||0===e.length)return!1;const i=[];let n=null,s=0;for(let a=0;a<e.length;++a){const t=e[a],r=t.getNote(),o=r.getCategory()===F.CATEGORY;let l=0;if(o&&null!==t.spacing&&void 0!==t.spacing&&(l=t.spacing),o&&r!==n){for(let e=0;e<r.keys.length;++e)s=r.getKeyProps()[e].displaced?r.getExtraLeftPx():s;n=r}i.push({shift:s,gracenote_group:t,spacing:l})}let r,o=i[0].shift;for(let a=0;a<i.length;++a){const e=i[a].gracenote_group;e.preFormat(),r=e.getWidth()+i[a].spacing,o=Math.max(r,o)}for(let a=0;a<i.length;++a){const e=i[a].gracenote_group;r=e.getWidth()+i[a].spacing,e.setSpacingFromNextModifier(o-Math.min(r,o))}return t.left_shift+=o,!0}constructor(e,t){return super(),this.setAttribute("type","GraceNoteGroup"),this.note=null,this.index=null,this.position=O.Position.LEFT,this.grace_notes=e,this.width=0,this.preFormatted=!1,this.show_slur=t,this.slur=null,this.formatter=new de,this.voice=new C({num_beats:4,beat_value:4,resolution:m.RESOLUTION}).setStrict(!1),this.render_options={slur_y_shift:0},this.beams=[],this.voice.addTickables(this.grace_notes),this}getCategory(){return Y.CATEGORY}preFormat(){this.preFormatted||(this.formatter.joinVoices([this.voice]).format([this.voice],0),this.setWidth(this.formatter.getMinTotalWidth()),this.preFormatted=!0)}beamNotes(e){if((e=e||this.grace_notes).length>1){const t=new P(e);t.render_options.beam_width=3,t.render_options.partial_beam_length=4,this.beams.push(t)}return this}setNote(e){this.note=e}setWidth(e){this.width=e}getWidth(){return this.width}getGraceNotes(){return this.grace_notes}draw(){this.checkContext();const e=this.getNote();if(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Y.DEBUG&&n.L("Vex.Flow.GraceNoteGroup",t)}("Drawing grace note group for:",e),!e||null===this.index)throw new n.RuntimeError("NoAttachedNote","Can't draw grace note without a parent note and parent note index.");if(this.setRendered(),this.alignSubNotesWithNote(this.getGraceNotes(),e),this.grace_notes.forEach((e=>{e.setContext(this.context).draw()})),this.beams.forEach((e=>{e.setContext(this.context).draw()})),this.show_slur){const t=this.getNote().getCategory()===F.CATEGORY,i=t?H:X;this.slur=new i({last_note:this.grace_notes[0],first_note:e,first_indices:[0],last_indices:[0]}),this.slur.render_options.cp2=12,this.slur.render_options.y_shift=(t?7:5)+this.render_options.slur_y_shift,this.slur.setContext(this.context).draw()}}}class K extends O{static get CATEGORY(){return"strokes"}static get Type(){return{BRUSH_DOWN:1,BRUSH_UP:2,ROLL_DOWN:3,ROLL_UP:4,RASQUEDO_DOWN:5,RASQUEDO_UP:6,ARPEGGIO_DIRECTIONLESS:7}}static format(e,t){const i=t.left_shift;if(!e||0===e.length)return this;const n=e.map((e=>{const t=e.getNote();if(t instanceof F){const{line:i,displaced:n}=t.getKeyProps()[e.getIndex()];return{line:i,shift:n?t.getExtraLeftPx():0,stroke:e}}{const{str:i}=t.getPositions()[e.getIndex()];return{line:i,shift:0,stroke:e}}})),s=i,r=n.reduce(((e,t)=>{let{stroke:i,shift:n}=t;return i.setXShift(s+n),Math.max(i.getWidth()+0,e)}),0);return t.left_shift+=r,!0}constructor(e,t){super(),this.setAttribute("type","Stroke"),this.note=null,this.options=n.Merge({},t),this.all_voices=!("all_voices"in this.options)||this.options.all_voices,this.note_end=null,this.index=null,this.type=e,this.position=O.Position.LEFT,this.render_options={font_scale:38,stroke_px:3,stroke_spacing:10},this.font={family:"serif",size:10,weight:"bold italic"},this.setXShift(0),this.setWidth(10)}getCategory(){return K.CATEGORY}getPosition(){return this.position}addEndNote(e){return this.note_end=e,this}draw(){if(this.checkContext(),this.setRendered(),!this.note||null==this.index)throw new n.RERR("NoAttachedNote","Can't draw stroke without a note and index.");const e=this.note.getModifierStartXY(this.position,this.index);let t=this.note.getYs(),i=e.y,s=e.y;const r=e.x-5,o=this.note.stave.options.spacing_between_lines_px,a=this.getModifierContext().getModifiers(this.note.getCategory());for(let f=0;f<a.length;f++){t=a[f].getYs();for(let e=0;e<t.length;e++)(this.note===a[f]||this.all_voices)&&(i=n.Min(i,t[e]),s=n.Max(s,t[e]))}let l,c,h,u,d;switch(this.type){case K.Type.BRUSH_DOWN:l="vc3",c=-3,h=i-o/2+10,s+=o/2;break;case K.Type.BRUSH_UP:l="v11",c=.5,h=s+o/2,i-=o/2;break;case K.Type.ROLL_DOWN:case K.Type.RASQUEDO_DOWN:l="vc3",c=-3,u=this.x_shift+c-2,this.note instanceof F?(i+=1.5*o,s+=(s-i)%2!=0?.5*o:o,h=i-o,d=s+o+2):(i+=1.5*o,s+=o,h=i-.75*o,d=s+.25*o);break;case K.Type.ROLL_UP:case K.Type.RASQUEDO_UP:l="v52",c=-4,u=this.x_shift+c-1,this.note instanceof F?(h=o/2,i+=.5*o,(s-i)%2==0&&(s+=o/2),h=s+.5*o,d=i-1.25*o):(i+=.25*o,s+=.5*o,h=s+.25*o,d=i-o);break;case K.Type.ARPEGGIO_DIRECTIONLESS:i+=.5*o,s+=o;break;default:throw new n.RERR("InvalidType","The stroke type ".concat(this.type," does not exist"))}if(this.type===K.Type.BRUSH_DOWN||this.type===K.Type.BRUSH_UP)this.context.fillRect(r+this.x_shift,i,1,s-i);else if(this.note instanceof F)for(let n=i;n<=s;n+=o)p.renderGlyph(this.context,r+this.x_shift-4,n,this.render_options.font_scale,"va3");else{let e;for(e=i;e<=s;e+=10)p.renderGlyph(this.context,r+this.x_shift-4,e,this.render_options.font_scale,"va3");this.type===K.Type.RASQUEDO_DOWN&&(d=e+.25*o)}this.type!==K.Type.ARPEGGIO_DIRECTIONLESS&&(p.renderGlyph(this.context,r+this.x_shift+c,h,this.render_options.font_scale,l),this.type!==K.Type.RASQUEDO_DOWN&&this.type!==K.Type.RASQUEDO_UP||(this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight),this.context.fillText("R",r+u,d),this.context.restore()))}}class q extends O{static get CATEGORY(){return"stringnumber"}static format(e,t){const i=t.left_shift,n=t.right_shift;if(!e||0===e.length)return this;const s=[];let r,o,a,l,c,h=null,u=0,d=0;for(r=0;r<e.length;++r)for(o=e[r],a=o.getNote(),r=0;r<e.length;++r){o=e[r],a=o.getNote(),l=o.getPosition();const t=a.getKeyProps()[o.getIndex()];if(a!==h){for(let e=0;e<a.keys.length;++e)c=a.getKeyProps()[e],0===i&&(u=c.displaced?a.getExtraLeftPx():u),0===n&&(d=c.displaced?a.getExtraRightPx():d);h=a}s.push({pos:l,note:a,num:o,line:t.line,shiftL:u,shiftR:d})}s.sort(((e,t)=>t.line-e.line));let f=0,p=0,m=0,g=0,b=null,v=null;for(r=0;r<s.length;++r){let e=0;a=s[r].note,l=s[r].pos,o=s[r].num;const t=s[r].line,c=s[r].shiftL,h=s[r].shiftR;t===b&&a===v||(f=i+c,p=n+h);const d=o.getWidth()+1;l===O.Position.LEFT?(o.setXShift(i),e=u+d,m=e>m?e:m):l===O.Position.RIGHT&&(o.setXShift(p),e+=d,g=e>g?e:g),b=t,v=a}return t.left_shift+=m,t.right_shift+=g,!0}constructor(e){super(),this.setAttribute("type","StringNumber"),this.note=null,this.last_note=null,this.index=null,this.string_number=e,this.setWidth(20),this.position=O.Position.ABOVE,this.x_shift=0,this.y_shift=0,this.x_offset=0,this.y_offset=0,this.dashed=!0,this.leg=S.LineEndType.NONE,this.radius=8,this.font={family:"sans-serif",size:10,weight:"bold"}}getCategory(){return q.CATEGORY}getNote(){return this.note}setNote(e){return this.note=e,this}getIndex(){return this.index}setIndex(e){return this.index=e,this}setLineEndType(e){return e>=S.LineEndType.NONE&&e<=S.LineEndType.DOWN&&(this.leg=e),this}setStringNumber(e){return this.string_number=e,this}setOffsetX(e){return this.x_offset=e,this}setOffsetY(e){return this.y_offset=e,this}setLastNote(e){return this.last_note=e,this}setDashed(e){return this.dashed=e,this}draw(){const e=this.checkContext();if(!this.note||null==this.index)throw new n.RERR("NoAttachedNote","Can't draw string number without a note and index.");this.setRendered();const t=this.note.stave.options.spacing_between_lines_px,i=this.note.getModifierStartXY(this.position,this.index);let s=i.x+this.x_shift+this.x_offset,r=i.y+this.y_shift+this.y_offset;switch(this.position){case O.Position.ABOVE:case O.Position.BELOW:{const e=this.note.getStemExtents();let n=e.topY,s=e.baseY+2;this.note.stem_direction===F.STEM_DOWN&&(n=e.baseY,s=e.topY-2),r=this.position===O.Position.ABOVE?this.note.hasStem()?n-1.75*t:i.y-1.75*t:this.note.hasStem()?s+1.5*t:i.y+1.75*t,r+=this.y_shift+this.y_offset;break}case O.Position.LEFT:s-=this.radius/2+5;break;case O.Position.RIGHT:s+=this.radius/2+6;break;default:throw new n.RERR("InvalidPosition","The position ".concat(this.position," is invalid"))}e.save(),e.beginPath(),e.arc(s,r,this.radius,0,2*Math.PI,!1),e.lineWidth=1.5,e.stroke(),e.setFont(this.font.family,this.font.size,this.font.weight);const o=s-e.measureText(this.string_number).width/2;if(e.fillText(""+this.string_number,o,r+4.5),null!=this.last_note){const t=this.last_note.getStemX()-this.note.getX()+5;let i,n;switch(e.strokeStyle="#000000",e.lineCap="round",e.lineWidth=.6,this.dashed?S.drawDashedLine(e,s+10,r,s+t,r,[3,3]):S.drawDashedLine(e,s+10,r,s+t,r,[3,0]),this.leg){case S.LineEndType.UP:i=-10,n=this.dashed?[3,3]:[3,0],S.drawDashedLine(e,s+t,r,s+t,r+i,n);break;case S.LineEndType.DOWN:i=10,n=this.dashed?[3,3]:[3,0],S.drawDashedLine(e,s+t,r,s+t,r+i,n)}}e.restore()}}class $ extends L{static getNextContext(e){const t=e.tContexts,i=t.indexOf(e);return t[i+1]}constructor(){super(),this.setAttribute("type","TickContext"),this.currentTick=new r(0,1),this.maxTicks=new r(0,1),this.minTicks=null,this.padding=3,this.x=0,this.xBase=0,this.xOffset=0,this.tickables=[],this.notePx=0,this.extraLeftPx=0,this.extraRightPx=0,this.tContexts=[]}getX(){return this.x}setX(e){return this.x=e,this.xBase=e,this.xOffset=0,this}getXBase(){return this.xBase}setXBase(e){this.xBase=e,this.x=e+this.xOffset}getXOffset(){return this.xOffset}setXOffset(e){this.xOffset=e,this.x=this.xBase+e}getWidth(){return this.width+2*this.padding}setPadding(e){return this.padding=e,this}getMaxTicks(){return this.maxTicks}getMinTicks(){return this.minTicks}getTickables(){return this.tickables}getCenterAlignedTickables(){return this.tickables.filter((e=>e.isCenterAligned()))}getMetrics(){const{width:e,notePx:t,extraLeftPx:i,extraRightPx:n}=this;return{width:e,notePx:t,extraLeftPx:i,extraRightPx:n}}getCurrentTick(){return this.currentTick}setCurrentTick(e){this.currentTick=e,this.preFormatted=!1}getExtraPx(){let e=0,t=0,i=0,n=0;for(let s=0;s<this.tickables.length;s++){i=Math.max(this.tickables[s].extraLeftPx||0,i),n=Math.max(this.tickables[s].extraRightPx||0,n);const r=this.tickables[s].modifierContext;r&&null!=r&&(e=Math.max(e,r.state.left_shift),t=Math.max(t,r.state.right_shift))}return{left:e,right:t,extraLeft:i,extraRight:n}}addTickable(e){if(!e)throw new n.RERR("BadArgument","Invalid tickable added.");if(!e.shouldIgnoreTicks()){this.ignore_ticks=!1;const t=e.getTicks();t.greaterThan(this.maxTicks)&&(this.maxTicks=t.clone()),(null==this.minTicks||t.lessThan(this.minTicks))&&(this.minTicks=t.clone())}return e.setTickContext(this),this.tickables.push(e),this.preFormatted=!1,this}preFormat(){if(this.preFormatted)return this;for(let e=0;e<this.tickables.length;++e){const t=this.tickables[e];t.preFormat();const i=t.getMetrics();this.extraLeftPx=Math.max(this.extraLeftPx,i.extraLeftPx+i.modLeftPx),this.extraRightPx=Math.max(this.extraRightPx,i.extraRightPx+i.modRightPx),this.notePx=Math.max(this.notePx,i.noteWidth),this.width=this.notePx+this.extraLeftPx+this.extraRightPx}return this}postFormat(){return this.postFormatted||(this.postFormatted=!0),this}}const{ABOVE:Z,BELOW:Q}=O.Position,J=(e,t)=>.5*e(t/.5),ee=(e,t)=>t===Z?e<=5:e>=1,te=(e,t)=>ee(e,t)?t===Z?Math.ceil:Math.floor:Math.round,ie=e=>{const t=e.getCategory();return"stavenotes"===t||"gracenotes"===t};class ne extends O{static get CATEGORY(){return"articulations"}static get INITIAL_OFFSET(){return-.5}static format(e,t){if(!e||0===e.length)return!1;const i=(e,t,i)=>J(te(t,i),e.glyph.getMetrics().height/10+.5);e.filter((e=>e.getPosition()===Z)).forEach((e=>{e.setTextLine(t.top_text_line),t.top_text_line+=i(e,t.top_text_line,Z)})),e.filter((e=>e.getPosition()===Q)).forEach((e=>{e.setTextLine(t.text_line),t.text_line+=i(e,t.text_line,Q)}));const n=e.map((e=>e.getWidth())).reduce(((e,t)=>Math.max(t,e)));return t.left_shift+=n/2,t.right_shift+=n/2,!0}static easyScoreHook(e,t,i){let{articulations:n}=e;if(!n)return;const s={staccato:"a.",tenuto:"a-"};n.split(",").map((e=>e.trim().split("."))).map((e=>{let[t,n]=e;const r={type:s[t]};return n&&(r.position=O.PositionString[n]),i.getFactory().Articulation(r)})).map((e=>t.addModifier(0,e)))}constructor(e){if(super(),this.setAttribute("type","Articulation"),this.note=null,this.index=null,this.type=e,this.position=Q,this.render_options={font_scale:38},this.breathMarkDistance=.8,this.articulation=m.articulationCodes(this.type),"abr"===this.type&&(this.articulation={code:"v6c",between_lines:!1}),!this.articulation)throw new n.RERR("ArgumentError","Articulation not found: ".concat(this.type));this.glyph=new p(this.articulation.code,this.render_options.font_scale),this.setWidth(this.glyph.getMetrics().width)}getCategory(){return ne.CATEGORY}draw(){const{note:e,index:t,position:i,glyph:s,articulation:{between_lines:r},text_line:o,context:a}=this;if(this.checkContext(),!e||null==t)throw new n.RERR("NoAttachedNote","Can't draw Articulation without a note and index.");this.setRendered();const l=e.getStave(),c=l.getSpacingBetweenLines(),h="tabnotes"===e.getCategory();let{x:u}=e.getModifierStartXY(i,t);if("abr"===this.type){let t=0;const i=e.getTickContext(),n=$.getNextContext(i),s=i.getX();if(n&&n.x>i.x)t=(n.getX()-s)*this.breathMarkDistance;else{const i=e.getStave();t=(i.getX()+i.getWidth()-s+i.start_x)*this.breathMarkDistance}if(u+=t,u>l.end_x){const e=l.start_x+s;u=e+(l.end_x-e)*this.breathMarkDistance}}const d=this.getXShift();d&&(u+=d);const f=!r||h,p=((e,t)=>{const i=t===Z&&e.getStemDirection()===E.UP||t===Q&&e.getStemDirection()===E.DOWN;return ie(e)?e.hasStem()&&i?.5:1:e.hasStem()&&i?1:0})(e,i);let m={[Z]:()=>{s.setOrigin(.5,1);const t=((e,t)=>{const i=e.getStave(),s=e.getStemDirection(),{topY:r,baseY:o}=e.getStemExtents();if(ie(e))return e.hasStem()?s===E.UP?r:o:Math.min(...e.getYs());if("tabnotes"===e.getCategory())return e.hasStem()&&s===E.UP?r:i.getYForTopText(t);throw new n.RERR("UnknownCategory","Only can get the top and bottom ys of stavenotes and tabnotes")})(e,o)-(o+p)*c;return f?Math.min(l.getYForTopText(ne.INITIAL_OFFSET),t):t},[Q]:()=>{s.setOrigin(.5,0);const t=((e,t)=>{const i=e.getStave(),s=e.getStemDirection(),{topY:r,baseY:o}=e.getStemExtents();if(ie(e))return e.hasStem()?s===E.UP?o:r:Math.max(...e.getYs());if("tabnotes"===e.getCategory())return e.hasStem()?s===E.UP?i.getYForBottomText(t):r:i.getYForBottomText(t);throw new n.RERR("UnknownCategory","Only can get the top and bottom ys of stavenotes and tabnotes")})(e,o)+(o+p)*c;return f?Math.max(l.getYForBottomText(ne.INITIAL_OFFSET),t):t}}[i]();if(this.y_shift&&(m+=this.y_shift),!h){const n=i===Z?-1:1,o=h?e.positions[t].str:e.getKeyProps()[t].line,a=(e.getYs()[t]-m)/c+o,l=((e,t,i,n)=>{const s=J(te(t,i),t);return e&&ee(s,i)&&s%1==0?s+.5*-n:s})(r,a,i,n);ee(l,i)&&s.setOrigin(.5,.5),m+=Math.abs(l-a)*c*n}!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];ne.DEBUG&&n.L("Vex.Flow.Articulation",t)}("Rendering articulation at (x: ".concat(u,", y: ").concat(m,")")),s.render(a,u,m)}}class se extends O{static get CATEGORY(){return"ornaments"}static format(e,t){if(!e||0===e.length)return!1;let i=0;for(let n=0;n<e.length;++n){const s=e[n],r=2;i=Math.max(s.getWidth(),i),s.getPosition()===O.Position.ABOVE?(s.setTextLine(t.top_text_line),t.top_text_line+=r):(s.setTextLine(t.text_line),t.text_line+=r)}return t.left_shift+=i/2,t.right_shift+=i/2,!0}constructor(e){if(super(),this.setAttribute("type","Ornament"),this.note=null,this.index=null,this.type=e,this.position=O.Position.ABOVE,this.delayed=!1,this.accidentalUpper=null,this.accidentalLower=null,this.render_options={font_scale:38,accidentalLowerPadding:3,accidentalUpperPadding:3},this.ornament=m.ornamentCodes(this.type),!this.ornament)throw new n.RERR("ArgumentError","Ornament not found: '".concat(this.type,"'"));this.glyph=new p(this.ornament.code,this.render_options.font_scale),this.glyph.setOrigin(.5,1)}getCategory(){return se.CATEGORY}setDelayed(e){return this.delayed=e,this}setUpperAccidental(e){const t=this.render_options.font_scale/1.3;return this.accidentalUpper=new p(m.accidentalCodes(e).code,t),this.accidentalUpper.setOrigin(.5,1),this}setLowerAccidental(e){const t=this.render_options.font_scale/1.3;return this.accidentalLower=new p(m.accidentalCodes(e).code,t),this.accidentalLower.setOrigin(.5,1),this}draw(){if(this.checkContext(),!this.note||null==this.index)throw new n.RERR("NoAttachedNote","Can't draw Ornament without a note and index.");this.setRendered();const e=this.context,t=this.note.getStemDirection(),i=this.note.getStave(),s=this.note.getStem().getExtents();let r=t===F.STEM_DOWN?s.baseY:s.topY;"tabnotes"===this.note.getCategory()&&(this.note.hasStem()?t===F.STEM_DOWN&&(r=i.getYForTopText(this.text_line)):r=i.getYForTopText(this.text_line));const o=t===F.STEM_DOWN,a=i.getSpacingBetweenLines();let l=1;!o&&this.note.beam&&(l+=.5);const c=r-a*(this.text_line+l);let h=this.note.getModifierStartXY(this.position,this.index).x,u=Math.min(i.getYForTopText(this.text_line),c);if(u+=this.y_shift,this.delayed){let e=0;if(void 0!==this.delayXShift)e=this.delayXShift;else{e+=this.glyph.getMetrics().width/2;const t=$.getNextContext(this.note.getTickContext());e+=t?.5*(t.getX()-h):.5*(i.x+i.width-h),this.delayXShift=e}h+=e}!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];se.DEBUG&&n.L("Vex.Flow.Ornament",t)}("Rendering ornament: ",this.ornament,h,u),this.accidentalLower&&(this.accidentalLower.render(e,h,u),u-=this.accidentalLower.getMetrics().height,u-=this.render_options.accidentalLowerPadding),this.glyph.render(e,h,u),u-=this.glyph.getMetrics().height,this.accidentalUpper&&(u-=this.render_options.accidentalUpperPadding,this.accidentalUpper.render(e,h,u))}}class re extends O{static get CATEGORY(){return"annotations"}static get Justify(){return{LEFT:1,CENTER:2,RIGHT:3,CENTER_STEM:4}}static get JustifyString(){return{left:re.Justify.LEFT,right:re.Justify.RIGHT,center:re.Justify.CENTER,centerStem:re.Justify.CENTER_STEM}}static get VerticalJustify(){return{TOP:1,CENTER:2,BOTTOM:3,CENTER_STEM:4}}static get VerticalJustifyString(){return{above:re.VerticalJustify.TOP,top:re.VerticalJustify.TOP,below:re.VerticalJustify.BOTTOM,bottom:re.VerticalJustify.BOTTOM,center:re.VerticalJustify.CENTER,centerStem:re.VerticalJustify.CENTER_STEM}}static format(e,t){if(!e||0===e.length)return!1;let i=0;for(let n=0;n<e.length;++n){const s=e[n];i=Math.max(s.getWidth(),i),s.getPosition()===O.Position.ABOVE?(s.setTextLine(t.top_text_line),t.top_text_line++):(s.setTextLine(t.text_line),t.text_line++)}return t.left_shift+=i/2,t.right_shift+=i/2,!0}constructor(e){super(),this.setAttribute("type","Annotation"),this.note=null,this.index=null,this.text=e,this.justification=re.Justify.CENTER,this.vert_justification=re.VerticalJustify.TOP,this.font={family:"Arial",size:10,weight:""},this.setWidth(m.textWidth(e))}getCategory(){return re.CATEGORY}setFont(e,t,i){return this.font={family:e,size:t,weight:i},this}setVerticalJustification(e){return this.vert_justification="string"==typeof e?re.VerticalJustifyString[e]:e,this}getJustification(){return this.justification}setJustification(e){return this.justification="string"==typeof e?re.JustifyString[e]:e,this}draw(){if(this.checkContext(),!this.note)throw new n.RERR("NoNoteForAnnotation","Can't draw text annotation without an attached note.");this.setRendered();const e=this.note.getModifierStartXY(O.Position.ABOVE,this.index);this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight);const t=this.context.measureText(this.text).width,i=this.context.measureText("m").width;let s,r,o,a;s=this.justification===re.Justify.LEFT?e.x:this.justification===re.Justify.RIGHT?e.x-t:this.justification===re.Justify.CENTER?e.x-t/2:this.note.getStemX()-t/2;const l=this.note.hasStem(),c=this.note.getStave();if(l&&(o=this.note.getStem().getExtents(),a=c.getSpacingBetweenLines()),this.vert_justification===re.VerticalJustify.BOTTOM){if(r=c.getYForBottomText(this.text_line+m.TEXT_HEIGHT_OFFSET_HACK),l){const e=1===this.note.getStemDirection()?o.baseY:o.topY;r=Math.max(r,e+a*(this.text_line+2))}}else if(this.vert_justification===re.VerticalJustify.CENTER){const e=this.note.getYForTopText(this.text_line)-1;r=e+(c.getYForBottomText(this.text_line)-e)/2+i/2}else if(this.vert_justification===re.VerticalJustify.TOP)r=Math.min(c.getYForTopText(this.text_line),this.note.getYs()[0]-10),l&&(r=Math.min(r,o.topY-5-a*this.text_line));else{const e=this.note.getStemExtents();r=e.topY+(e.baseY-e.topY)/2+i/2}!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];re.DEBUG&&n.L("Vex.Flow.Annotation",t)}("Rendering annotation: ",this.text,s,r),this.context.fillText(this.text,s,r),this.context.restore()}}class oe extends O{static get CATEGORY(){return"bends"}static get UP(){return 0}static get DOWN(){return 1}static format(e,t){if(!e||0===e.length)return!1;let i=0;const n=t.top_text_line;for(let s=0;s<e.length;++s){const t=e[s];t.setXShift(i),i=t.getWidth(),t.setTextLine(n)}return t.right_shift+=i,t.top_text_line+=1,!0}constructor(e,t,i){super(),this.setAttribute("type","Bend"),this.text=e,this.x_shift=0,this.release=t||!1,this.font="10pt Arial",this.render_options={line_width:1.5,line_style:"#777777",bend_width:8,release_width:8},i?this.phrase=i:(this.phrase=[{type:oe.UP,text:this.text}],this.release&&this.phrase.push({type:oe.DOWN,text:""})),this.updateWidth()}getCategory(){return oe.CATEGORY}setXShift(e){this.x_shift=e,this.updateWidth()}setFont(e){return this.font=e,this}getText(){return this.text}updateWidth(){const e=this;function t(t){let i;return i=e.context?e.context.measureText(t).width:m.textWidth(t),i}let i=0;for(let s=0;s<this.phrase.length;++s){const e=this.phrase[s];if("width"in e)i+=e.width;else{const s=e.type===oe.UP?this.render_options.bend_width:this.render_options.release_width;e.width=n.Max(s,t(e.text))+3,e.draw_width=e.width/2,i+=e.width}}return this.setWidth(i+this.x_shift),this}draw(){if(this.checkContext(),!this.note||null==this.index)throw new n.RERR("NoNoteForBend","Can't draw bend without a note or index.");this.setRendered();const e=this.note.getModifierStartXY(O.Position.RIGHT,this.index);e.x+=3,e.y+=.5;const t=this.x_shift,i=this.context,s=this.note.getStave().getYForTopText(this.text_line)+3,r=this.note.getStave().getYForTopText(this.text_line)-1,o=this;function a(e,t,n,s){const r=e+n,a=t;i.save(),i.beginPath(),i.setLineWidth(o.render_options.line_width),i.setStrokeStyle(o.render_options.line_style),i.setFillStyle(o.render_options.line_style),i.moveTo(e,t),i.quadraticCurveTo(r,a,e+n,s),i.stroke(),i.restore()}function l(e,t,n,s){i.save(),i.beginPath(),i.setLineWidth(o.render_options.line_width),i.setStrokeStyle(o.render_options.line_style),i.setFillStyle(o.render_options.line_style),i.moveTo(e,s),i.quadraticCurveTo(e+n,s,e+n,t),i.stroke(),i.restore()}function c(e,t,n){const s=n||1;i.beginPath(),i.moveTo(e,t),i.lineTo(e-4,t+4*s),i.lineTo(e+4,t+4*s),i.closePath(),i.fill()}function h(e,t){i.save(),i.setRawFont(o.font);const n=e-i.measureText(t).width/2;i.fillText(t,n,r),i.restore()}let u=null,d=0;for(let n=0;n<this.phrase.length;++n){const i=this.phrase[n];0===n&&(i.draw_width_unmodified=i.draw_width,i.draw_width+=t),d=i.draw_width+(u?u.draw_width:0)-(1===n?t:0),i.type===oe.UP&&(u&&u.type===oe.UP&&c(e.x,s),a(e.x,e.y,d,s)),i.type===oe.DOWN&&(u&&u.type===oe.UP&&l(e.x,e.y,d,s),u&&u.type===oe.DOWN&&(c(e.x,e.y,-1),l(e.x,e.y,d,s)),null===u&&(d=i.draw_width,l(e.x,e.y,d,s))),h(e.x+d,i.text),u=i,u.x=e.x,e.x+=d}u.type===oe.UP?c(u.x+d,s):u.type===oe.DOWN&&c(u.x+d,e.y,-1);for(let n=0;n<this.phrase.length;++n){const e=this.phrase[n];e.draw_width_unmodified&&(e.draw_width=e.draw_width_unmodified)}}}class ae extends O{static get CATEGORY(){return"vibratos"}static format(e,t,i){if(!e||0===e.length)return!1;let n=t.top_text_line,s=0,r=t.right_shift-7;const o=i.getModifiers(oe.CATEGORY);o&&o.length>0&&n--;for(let a=0;a<e.length;++a){const t=e[a];t.setXShift(r),t.setTextLine(n),s+=t.getWidth(),r+=s}return t.right_shift+=s,t.top_text_line+=1,!0}constructor(){super(),this.setAttribute("type","Vibrato"),this.position=O.Position.RIGHT,this.render_options={harsh:!1,vibrato_width:20,wave_height:6,wave_width:4,wave_girth:2},this.setVibratoWidth(this.render_options.vibrato_width)}getCategory(){return ae.CATEGORY}setHarsh(e){return this.render_options.harsh=e,this}setVibratoWidth(e){return this.render_options.vibrato_width=e,this.setWidth(e),this}draw(){const e=this.checkContext();if(!this.note)throw new n.RERR("NoNoteForVibrato","Can't draw vibrato without an attached note.");this.setRendered();const t=this.note.getModifierStartXY(O.Position.RIGHT,this.index).x+this.x_shift,i=this.note.getYForTopText(this.text_line)+2;ae.renderVibrato(e,t,i,this.render_options)}static renderVibrato(e,t,i,n){const{harsh:s,vibrato_width:r,wave_width:o,wave_girth:a,wave_height:l}=n,c=r/o;let h;if(e.beginPath(),s){for(e.moveTo(t,i+a+1),h=0;h<c/2;++h)e.lineTo(t+o,i-l/2),t+=o,e.lineTo(t+o,i+l/2),t+=o;for(h=0;h<c/2;++h)e.lineTo(t-o,i-l/2+a+1),t-=o,e.lineTo(t-o,i+l/2+a+1),t-=o;e.fill()}else{for(e.moveTo(t,i+a),h=0;h<c/2;++h)e.quadraticCurveTo(t+o/2,i-l/2,t+o,i),t+=o,e.quadraticCurveTo(t+o/2,i+l/2,t+o,i),t+=o;for(h=0;h<c/2;++h)e.quadraticCurveTo(t-o/2,i+l/2+a,t-o,i+a),t-=o,e.quadraticCurveTo(t-o/2,i-l/2+a,t-o,i+a),t-=o;e.fill()}}}function le(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];ce.DEBUG&&n.L("Vex.Flow.ModifierContext",t)}class ce{constructor(){this.modifiers={},this.preFormatted=!1,this.postFormatted=!1,this.width=0,this.spacing=0,this.state={left_shift:0,right_shift:0,text_line:0,top_text_line:0},this.PREFORMAT=[F,D,V,z,K,Y,U,q,ne,se,re,oe,ae],this.POSTFORMAT=[F]}addModifier(e){const t=e.getCategory();return this.modifiers[t]||(this.modifiers[t]=[]),this.modifiers[t].push(e),e.setModifierContext(this),this.preFormatted=!1,this}getModifiers(e){return this.modifiers[e]}getWidth(){return this.width}getExtraLeftPx(){return this.state.left_shift}getExtraRightPx(){return this.state.right_shift}getState(){return this.state}getMetrics(){if(!this.formatted)throw new n.RERR("UnformattedModifier","Unformatted modifier has no metrics.");return{width:this.state.left_shift+this.state.right_shift+this.spacing,spacing:this.spacing,extra_left_px:this.state.left_shift,extra_right_px:this.state.right_shift}}preFormat(){this.preFormatted||(this.PREFORMAT.forEach((e=>{le("Preformatting ModifierContext: ",e.CATEGORY),e.format(this.getModifiers(e.CATEGORY),this.state,this)})),this.width=this.state.left_shift+this.state.right_shift,this.preFormatted=!0)}postFormat(){this.postFormatted||this.POSTFORMAT.forEach((e=>{le("Postformatting ModifierContext: ",e.CATEGORY),e.postFormat(this.getModifiers(e.CATEGORY),this)}))}}function he(e,t,i,s){let r=t;for(i+=1;i<e.length;i+=1){const t=e[i];if(!t.isRest()&&!t.shouldIgnoreTicks()){r=t.getLineForRest();break}}if(s&&t!==r){const e=Math.max(t,r),i=Math.min(t,r);r=n.MidLine(e,i)}return r}function ue(e,t,i){if(!e||!e.length)throw new n.RERR("BadArgument","No voices to format");e[0].getTotalTicks();const s=e.reduce(((e,t)=>{if(t.getMode()===C.Mode.STRICT&&!t.isComplete())throw new n.RERR("IncompleteVoice","Voice does not have enough notes.");return Math.max(e,r.LCM(e,t.getResolutionMultiplier()))}),1),o={},a=[],l=[];return e.forEach((e=>{const n=new r(0,s);e.getTickables().forEach((e=>{const s=n.numerator;if(!o[s]){const e=new t;l.push(e),o[s]=e}i(e,o[s]),a.push(s),n.add(e.getTicks())}))})),{map:o,array:l,list:n.SortAndUnique(a,((e,t)=>e-t),((e,t)=>e===t)),resolutionMultiplier:s}}class de{static SimpleFormat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{paddingBetween:i=10}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.reduce(((e,t)=>{t.addToModifierContext(new ce);const n=(new $).addTickable(t).preFormat(),s=n.getExtraPx();return n.setX(e+s.left),e+n.getWidth()+s.right+i}),t)}static plotDebugging(e,t,i,n,s){const r=i+k.STAVEPADDING,o=t.contextGaps;e.save(),e.setFont("Arial",8,""),o.gaps.forEach((t=>{var i,o,a;i=r+t.x1,o=r+t.x2,a="#aaa",e.beginPath(),e.setStrokeStyle(a),e.setFillStyle(a),e.setLineWidth(1),e.fillRect(i,n,o-i,s-n),e.fillText(Math.round(t.x2-t.x1),r+t.x1,s+12)})),e.fillText(Math.round(o.total)+"px",r-20,s+12),e.setFillStyle("red"),e.fillText("Loss: "+t.lossHistory.map((e=>Math.round(e))),r-20,s+22),e.restore()}static FormatAndDraw(e,t,i,s){const r={auto_beam:!1,align_rests:!1};"object"==typeof s?n.Merge(r,s):"boolean"==typeof s&&(r.auto_beam=s);const o=new C(m.TIME4_4).setMode(C.Mode.SOFT).addTickables(i),a=r.auto_beam?P.applyAndGetBeams(o):[];return(new de).joinVoices([o],{align_rests:r.align_rests}).formatToStave([o],t,{align_rests:r.align_rests,stave:t}),o.setStave(t).draw(e,t),a.forEach((t=>t.setContext(e).draw())),o.getBoundingBox()}static FormatAndDrawTab(e,t,i,s,r,o,a){const l={auto_beam:o,align_rests:!1};"object"==typeof a?n.Merge(l,a):"boolean"==typeof a&&(l.auto_beam=a);const c=new C(m.TIME4_4).setMode(C.Mode.SOFT).addTickables(r),h=new C(m.TIME4_4).setMode(C.Mode.SOFT).addTickables(s),u=l.auto_beam?P.applyAndGetBeams(c):[];(new de).joinVoices([c],{align_rests:l.align_rests}).joinVoices([h]).formatToStave([c,h],i,{align_rests:l.align_rests}),c.draw(e,i),h.draw(e,t),u.forEach((t=>t.setContext(e).draw())),new N(i,t).setContext(e).draw()}static AlignRestsToNotes(e,t,i){return e.forEach(((n,s)=>{if(n instanceof F&&n.isRest()){if(n.tuplet&&!i)return;const r=n.getGlyph().position.toUpperCase();if("R/4"!==r&&"B/4"!==r)return;if(t||null!=n.beam){const t=n.getKeyProps()[0];if(0===s)t.line=he(e,t.line,s,!1),n.setKeyLine(0,t.line);else if(s>0&&s<e.length){let i;const r=e[s-1];r.isRest()&&r.getKeyProps?(i=r.getKeyProps()[0].line,t.line=i):(i=r.getLineForRest(),t.line=he(e,i,s,!0)),n.setKeyLine(0,t.line)}}}})),this}constructor(){this.minTotalWidth=0,this.hasMinTotalWidth=!1,this.totalTicks=new r(0,1),this.tickContexts=null,this.modiferContexts=null,this.contextGaps={total:0,gaps:[]},this.voices=[]}alignRests(e,t){if(!e||!e.length)throw new n.RERR("BadArgument","No voices to format rests");e.forEach((e=>de.AlignRestsToNotes(e.getTickables(),t)))}preCalculateMinTotalWidth(e){if(this.hasMinTotalWidth)return this.minTotalWidth;if(!this.tickContexts){if(!e)throw new n.RERR("BadArgument","'voices' required to run preCalculateMinTotalWidth");this.createTickContexts(e)}const{list:t,map:i}=this.tickContexts;return this.minTotalWidth=t.map((e=>{const t=i[e];return t.preFormat(),t.getWidth()})).reduce(((e,t)=>e+t),0),this.hasMinTotalWidth=!0,this.minTotalWidth}getMinTotalWidth(){if(!this.hasMinTotalWidth)throw new n.RERR("NoMinTotalWidth","Call 'preCalculateMinTotalWidth' or 'preFormat' before calling 'getMinTotalWidth'");return this.minTotalWidth}createModifierContexts(e){const t=ue(e,ce,((e,t)=>e.addToModifierContext(t)));return this.modiferContexts=t,t}createTickContexts(e){const t=ue(e,$,((e,t)=>t.addTickable(e)));return t.array.forEach((e=>{e.tContexts=t.array})),this.totalTicks=e[0].getTicksUsed().clone(),this.tickContexts=t,t}preFormat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;const s=this.tickContexts,{list:r,map:o,resolutionMultiplier:a}=s;i&&n&&i.forEach((e=>e.setStave(n).preFormat()));let l=0,c=0;const h=e/2;if(this.minTotalWidth=0,r.forEach((e=>{const i=o[e];t&&i.setContext(t),i.preFormat();const n=i.getWidth();this.minTotalWidth+=n;const s=i.getMetrics();l=l+c+s.extraLeftPx,i.setX(l),c=n-s.extraLeftPx})),this.minTotalWidth=l+c,this.hasMinTotalWidth=!0,e<=0)return;const u=e-this.minTotalWidth;let d=this.totalTicks.value();0===d&&(d=1);const f=u/(d*a);let p=0;r.forEach(((e,t)=>{const i=r[t-1]||0,n=o[e];p+=(e-i)*f,n.setX(n.getX()+p),n.getCenterAlignedTickables().forEach((e=>{e.center_x_shift=h-n.getX()}))})),1!==r.length&&(this.justifyWidth=e,this.lossHistory=[],this.evaluate())}evaluate(){const e=this.justifyWidth;this.contextGaps={total:0,gaps:[]},this.tickContexts.list.forEach(((e,t)=>{if(0===t)return;const i=this.tickContexts.list[t-1],n=this.tickContexts.map[i],s=this.tickContexts.map[e],r=n.getMetrics(),o=n.getX()+r.width,a=s.getX(),l=a-o;this.contextGaps.total+=l,this.contextGaps.gaps.push({x1:o,x2:a}),s.getFormatterMetrics().freedom.left=l,n.getFormatterMetrics().freedom.right=l}));const t=this.durationStats={};this.voices.forEach((i=>{i.getTickables().forEach(((i,n,s)=>{const r=i.getTicks().clone().simplify().toString(),o=i.getMetrics(),a=i.getFormatterMetrics(),l=i.getX()+o.noteWidth+o.modRightPx+o.extraRightPx;let c=0;if(n<s.length-1){const e=s[n+1],t=e.getMetrics();c=e.getX()-t.modLeftPx-t.extraLeftPx-l,a.space.used=e.getX()-i.getX(),e.getFormatterMetrics().freedom.left=c}else c=e-l,a.space.used=e-i.getX();a.freedom.right=c,function(e,i){const n=t[e];void 0===n?t[e]={mean:i,count:1}:(n.count+=1,n.mean=(n.mean+i)/2)}(r,a.space.used)}))}));let i=0;return this.voices.forEach((e=>{e.getTickables().forEach((e=>{const n=e.getTicks().clone().simplify().toString(),s=e.getFormatterMetrics();s.iterations+=1,s.space.deviation=s.space.used-t[n].mean,s.duration=n,s.space.mean=t[n].mean,i+=Math.pow(t[n].mean,2)}))})),this.totalCost=Math.sqrt(i),this.lossHistory.push(this.totalCost),this}tune(){let e=0;return this.tickContexts.list.forEach(((t,i,n)=>{const s=this.tickContexts.map[t],r=i>0?this.tickContexts.map[n[i-1]]:null,o=i<n.length-1?this.tickContexts.map[n[i+1]]:null;!function(e,t,i,n){e.setX(e.getX()+n),e.getFormatterMetrics().freedom.left+=n,e.getFormatterMetrics().freedom.right-=n,t&&(t.getFormatterMetrics().freedom.right+=n),i&&(i.getFormatterMetrics().freedom.left-=n)}(s,r,o,e);const a=-s.getTickables().map((e=>e.getFormatterMetrics().space.deviation)).reduce(((e,t)=>e+t));a>0?e=-Math.min(s.getFormatterMetrics().freedom.right,Math.abs(a)):a<0&&(e=o?Math.min(o.getFormatterMetrics().freedom.right,Math.abs(a)):0);const l=Math.min(5,Math.abs(e));e=e>0?l:-l})),this.evaluate()}postFormat(){const e=e=>e.list.forEach((t=>e.map[t].postFormat()));return e(this.modiferContexts),e(this.tickContexts),this}joinVoices(e){return this.createModifierContexts(e),this.hasMinTotalWidth=!1,this}format(e,t,i){const s={align_rests:!1,context:null,stave:null};return n.Merge(s,i),this.voices=e,this.alignRests(e,s.align_rests),this.createTickContexts(e),this.preFormat(t,s.context,e,s.stave),s.stave&&this.postFormat(),this}formatToStave(e,t,i){const s=t.getNoteEndX()-t.getNoteStartX()-10;!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];de.DEBUG&&n.L("Vex.Flow.Formatter",t)}("Formatting voices to width: ",s);const r={context:t.getContext()};return n.Merge(r,i),this.format(e,s,r)}}class fe extends c{static get Position(){return{LEFT:1,RIGHT:2,ABOVE:3,BELOW:4,BEGIN:5,END:6}}constructor(){super(),this.setAttribute("type","StaveModifier"),this.padding=10,this.position=fe.Position.ABOVE,this.layoutMetrics=null}getPosition(){return this.position}setPosition(e){return this.position=e,this}getStave(){return this.stave}setStave(e){return this.stave=e,this}getWidth(){return this.width}setWidth(e){return this.width=e,this}getX(){return this.x}setX(e){return this.x=e,this}getCategory(){return""}makeSpacer(e){return{getContext:()=>!0,setStave(){},renderToStave(){},getMetrics:()=>({width:e})}}placeGlyphOnLine(e,t,i){e.setYShift(t.getYForLine(i)-t.getYForGlyphs())}getPadding(e){return void 0!==e&&e<2?0:this.padding}setPadding(e){return this.padding=e,this}setLayoutMetrics(e){return this.layoutMetrics=e,this}getLayoutMetrics(){return this.layoutMetrics}}class pe extends fe{static get CATEGORY(){return"barlines"}static get type(){return{SINGLE:1,DOUBLE:2,END:3,REPEAT_BEGIN:4,REPEAT_END:5,REPEAT_BOTH:6,NONE:7,DOUBLE_HEAVY:8}}static get typeString(){return{single:pe.type.SINGLE,double:pe.type.DOUBLE,doubleheavy:pe.type.DOUBLE_HEAVY,end:pe.type.END,repeatBegin:pe.type.REPEAT_BEGIN,repeatEnd:pe.type.REPEAT_END,repeatBoth:pe.type.REPEAT_BOTH,none:pe.type.NONE}}constructor(e){super(),this.setAttribute("type","Barline"),this.thickness=m.STAVE_LINE_THICKNESS;const t=pe.type;this.widths={},this.widths[t.SINGLE]=5,this.widths[t.DOUBLE]=5,this.widths[t.DOUBLE_HEAVY]=5,this.widths[t.END]=5,this.widths[t.REPEAT_BEGIN]=5,this.widths[t.REPEAT_END]=5,this.widths[t.REPEAT_BOTH]=5,this.widths[t.NONE]=5,this.paddings={},this.paddings[t.SINGLE]=0,this.paddings[t.DOUBLE]=0,this.paddings[t.DOUBLE_HEAVY]=0,this.paddings[t.END]=0,this.paddings[t.REPEAT_BEGIN]=15,this.paddings[t.REPEAT_END]=15,this.paddings[t.REPEAT_BOTH]=15,this.paddings[t.NONE]=0,this.layoutMetricsMap={},this.layoutMetricsMap[t.SINGLE]={xMin:0,xMax:1,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.DOUBLE]={xMin:-3,xMax:1,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.DOUBLE_HEAVY]={xMin:-5,xMax:4,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.END]={xMin:-5,xMax:1,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.REPEAT_END]={xMin:-10,xMax:1,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.REPEAT_BEGIN]={xMin:-2,xMax:10,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.REPEAT_BOTH]={xMin:-10,xMax:10,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.NONE]={xMin:0,xMax:0,paddingLeft:5,paddingRight:5},this.setPosition(fe.Position.BEGIN),this.setType(e)}getCategory(){return pe.CATEGORY}getType(){return this.type}setType(e){return this.type="string"==typeof e?pe.typeString[e]:e,this.setWidth(this.widths[this.type]),this.setPadding(this.paddings[this.type]),this.setLayoutMetrics(this.layoutMetricsMap[this.type]),this}draw(e){switch(e.checkContext(),this.setRendered(),this.type){case pe.type.SINGLE:this.drawVerticalBar(e,this.x,!1);break;case pe.type.DOUBLE:this.drawVerticalBar(e,this.x,!0);break;case pe.type.DOUBLE_HEAVY:this.drawVerticalBar(e,this.x,!0,!0);break;case pe.type.END:this.drawVerticalEndBar(e,this.x);break;case pe.type.REPEAT_BEGIN:this.drawRepeatBar(e,this.x,!0),e.getX()!==this.x&&this.drawVerticalBar(e,e.getX());break;case pe.type.REPEAT_END:this.drawRepeatBar(e,this.x,!1);break;case pe.type.REPEAT_BOTH:this.drawRepeatBar(e,this.x,!1),this.drawRepeatBar(e,this.x,!0)}}drawVerticalBar(e,t,i,n){e.checkContext();const s=e.getTopLineTopY(),r=e.getBottomLineBottomY();let o=1,a=1,l=t-3,c=t;n&&(o=3,a=3,l=t-5,c=t),i&&e.context.fillRect(l,s,o,r-s),e.context.fillRect(c,s,a,r-s)}drawVerticalEndBar(e,t){e.checkContext();const i=e.getTopLineTopY(),n=e.getBottomLineBottomY();e.context.fillRect(t-5,i,1,n-i),e.context.fillRect(t-2,i,3,n-i)}drawRepeatBar(e,t,i){e.checkContext();const n=e.getTopLineTopY(),s=e.getBottomLineBottomY();let r=3;i||(r=-5),e.context.fillRect(t+r,n,1,s-n),e.context.fillRect(t-2,n,3,s-n),i?r+=4:r-=4;const o=t+r+1;let a=(e.getNumLines()-1)*e.getSpacingBetweenLines();a=a/2-e.getSpacingBetweenLines()/2;let l=n+a+1;e.context.beginPath(),e.context.arc(o,l,2,0,2*Math.PI,!1),e.context.fill(),l+=e.getSpacingBetweenLines(),e.context.beginPath(),e.context.arc(o,l,2,0,2*Math.PI,!1),e.context.fill()}}class me extends fe{static get CATEGORY(){return"repetitions"}static get type(){return{NONE:1,CODA_LEFT:2,CODA_RIGHT:3,SEGNO_LEFT:4,SEGNO_RIGHT:5,DC:6,DC_AL_CODA:7,DC_AL_FINE:8,DS:9,DS_AL_CODA:10,DS_AL_FINE:11,FINE:12,TO_CODA:13}}constructor(e,t,i){super(),this.setAttribute("type","Repetition"),this.symbol_type=e,this.x=t,this.x_shift=0,this.y_shift=i,this.font={family:"times",size:12,weight:"bold italic"}}getCategory(){return me.CATEGORY}setShiftX(e){return this.x_shift=e,this}setShiftY(e){return this.y_shift=e,this}setX(e){return this.x=e,this}draw(e,t){switch(this.setRendered(),this.symbol_type){case me.type.CODA_RIGHT:this.drawCodaFixed(e,t+e.width);break;case me.type.CODA_LEFT:this.drawSymbolText(e,t,"Coda",!0);break;case me.type.SEGNO_LEFT:this.drawSignoFixed(e,t);break;case me.type.SEGNO_RIGHT:this.drawSignoFixed(e,t+e.width);break;case me.type.DC:this.drawSymbolText(e,t,"D.C.",!1);break;case me.type.DC_AL_CODA:this.drawSymbolText(e,t,"D.C. al",!0);break;case me.type.DC_AL_FINE:this.drawSymbolText(e,t,"D.C. al Fine",!1);break;case me.type.DS:this.drawSymbolText(e,t,"D.S.",!1);break;case me.type.DS_AL_CODA:this.drawSymbolText(e,t,"D.S. al",!0);break;case me.type.DS_AL_FINE:this.drawSymbolText(e,t,"D.S. al Fine",!1);break;case me.type.FINE:this.drawSymbolText(e,t,"Fine",!1);break;case me.type.TO_CODA:this.drawSymbolText(e,t,"To",!0)}return this}drawCodaFixed(e,t){const i=e.getYForTopText(e.options.num_lines)+this.y_shift;return p.renderGlyph(e.context,this.x+t+this.x_shift,i+25,40,"v4d",!0),this}drawSignoFixed(e,t){const i=e.getYForTopText(e.options.num_lines)+this.y_shift;return p.renderGlyph(e.context,this.x+t+this.x_shift,i+25,30,"v8c",!0),this}drawSymbolText(e,t,i,n){const s=e.checkContext();s.save(),s.setFont(this.font.family,this.font.size,this.font.weight);let r=0+this.x_shift,o=t+this.x_shift;if(this.symbol_type===me.type.CODA_LEFT?(r=this.x+this.x_shift,o=r+s.measureText(i).width+12):(this.x_shift=-(r+s.measureText(i).width+12+e.options.vertical_bar_width+12),r=this.x+this.x_shift+e.options.vertical_bar_width,o=r+s.measureText(i).width+12),this.xShiftAsPercentOfStaveWidth){const t=e.width*this.xShiftAsPercentOfStaveWidth;this.symbol_type!==me.type.DC_AL_FINE&&this.symbol_type!==me.type.FINE&&this.symbol_type!==me.type.DC&&this.symbol_type!==me.type.DS_AL_FINE&&this.symbol_type!==me.type.DS&&this.symbol_type!==me.type.FINE||(r+=t)}const a=e.getYForTopText(e.options.num_lines)+this.y_shift+25;return n&&p.renderGlyph(s,o,a,40,"v4d",!0),s.fillText(i,r,a+5),s.restore(),this}}class ge extends fe{static get CATEGORY(){return"stavesection"}constructor(e,t,i){super(),this.setAttribute("type","StaveSection"),this.setWidth(16),this.section=e,this.x=t,this.shift_x=0,this.shift_y=i,this.font={family:"sans-serif",size:12,weight:"bold"}}getCategory(){return ge.CATEGORY}setStaveSection(e){return this.section=e,this}setShiftX(e){return this.shift_x=e,this}setShiftY(e){return this.shift_y=e,this}draw(e,t){const i=e.checkContext();this.setRendered(),i.save(),i.lineWidth=2,i.setFont(this.font.family,this.font.size,this.font.weight);const n=i.measureText(""+this.section),s=n.width;let r=n.height;!r&&n.emHeightAscent>=0&&(r=n.emHeightAscent+2),r||(r=n.fontBoundingBoxAscent+3);let o=s+6;o<18&&(o=18);const a=r+this.font.size/10,l=e.getYForTopText(3)+19-1.15*a+this.shift_y;let c=this.x+t;return i.beginPath(),i.lineWidth=2,i.rect(c,l+r/4,o,a),i.stroke(),c+=(o-s)/2,i.fillText(""+this.section,c,l+a),i.restore(),this}}class be extends fe{static get CATEGORY(){return"stavetempo"}constructor(e,t,i){super(),this.setAttribute("type","StaveTempo"),this.tempo=e,this.position=O.Position.ABOVE,this.x=t,this.shift_x=10,this.shift_y=i,this.font={family:"times",size:14,weight:"bold"},this.render_options={glyph_font_scale:30}}getCategory(){return be.CATEGORY}setTempo(e){return this.tempo=e,this}setShiftX(e){return this.shift_x=e,this}setShiftY(e){return this.shift_y=e,this}draw(e,t){const i=e.checkContext();this.setRendered(),i.openGroup("stavetempo");const n=this.render_options,s=n.glyph_font_scale/38,r=this.tempo.name,o=this.tempo.duration,a=this.tempo.dots,l=this.tempo.bpm,c=this.font;let h=this.x+this.shift_x+t;const u=e.getYForTopText(1)+this.shift_y;if(i.save(),r&&(i.setFont(c.family,c.size,c.weight),i.fillText(r,h,u),h+=i.measureText(r).width),o&&l){i.setFont(c.family,c.size,"normal"),r&&(h+=i.measureText(" ").width,i.fillText("(",h,u),h+=i.measureText("(").width);const e=m.getGlyphProps(o);if(h+=3*s,p.renderGlyph(i,h,u,n.glyph_font_scale,e.code_head),h+=e.getWidth()*s,e.stem){let t=30;e.beam_count&&(t+=3*(e.beam_count-1)),t*=s;const r=u-t;i.fillRect(h-s,r,s,t),e.flag&&(p.renderGlyph(i,h,r,n.glyph_font_scale,e.code_flag_upstem),a||(h+=6*s))}for(let t=0;t<a;t++)h+=6*s,i.beginPath(),i.arc(h,u+2*s,2*s,0,2*Math.PI,!1),i.fill();i.openGroup("bpm"),i.fillText(" = "+l+(r?")":""),h+3*s,u),i.closeGroup()}return i.closeGroup(),i.restore(),this}}class ve extends k{static get Justification(){return{LEFT:1,CENTER:2,RIGHT:3}}static get GLYPHS(){return{segno:{code:"v8c",point:40,x_shift:0,y_shift:-10},tr:{code:"v1f",point:40,x_shift:0,y_shift:0},mordent_upper:{code:"v1e",point:40,x_shift:0,y_shift:0},mordent_lower:{code:"v45",point:40,x_shift:0,y_shift:0},f:{code:"vba",point:40,x_shift:0,y_shift:0},p:{code:"vbf",point:40,x_shift:0,y_shift:0},m:{code:"v62",point:40,x_shift:0,y_shift:0},s:{code:"v4a",point:40,x_shift:0,y_shift:0},z:{code:"v80",point:40,x_shift:0,y_shift:0},coda:{code:"v4d",point:40,x_shift:0,y_shift:-8},pedal_open:{code:"v36",point:40,x_shift:0,y_shift:0},pedal_close:{code:"v5d",point:40,x_shift:0,y_shift:3},caesura_straight:{code:"v34",point:40,x_shift:0,y_shift:2},caesura_curved:{code:"v4b",point:40,x_shift:0,y_shift:2},breath:{code:"v6c",point:40,x_shift:0,y_shift:0},tick:{code:"v6f",point:50,x_shift:0,y_shift:0},turn:{code:"v72",point:40,x_shift:0,y_shift:0},turn_inverted:{code:"v33",point:40,x_shift:0,y_shift:0},mordent:{code:"v1e",point:40,x_shift:0,y_shift:0}}}constructor(e){if(super(e),this.setAttribute("type","TextNote"),this.text=e.text,this.superscript=e.superscript,this.subscript=e.subscript,this.glyph_type=e.glyph,this.glyph=null,this.font={family:"Arial",size:12,weight:""},e.font&&(this.font=e.font),this.glyph_type){const e=ve.GLYPHS[this.glyph_type];if(!e)throw new n.RERR("Invalid glyph type: "+this.glyph_type);this.glyph=new p(e.code,e.point,{cache:!1}),e.width?this.setWidth(e.width):this.setWidth(this.glyph.getMetrics().width),this.glyph_struct=e}else this.setWidth(m.textWidth(this.text));this.line=e.line||0,this.smooth=e.smooth||!1,this.ignore_ticks=e.ignore_ticks||!1,this.justification=ve.Justification.LEFT}setJustification(e){return this.justification=e,this}setLine(e){return this.line=e,this}preFormat(){this.checkContext(),this.preFormatted||(this.smooth?this.setWidth(0):this.glyph||this.setWidth(this.context.measureText(this.text).width),this.justification===ve.Justification.CENTER?this.extraLeftPx=this.width/2:this.justification===ve.Justification.RIGHT&&(this.extraLeftPx=this.width),this.setPreFormatted(!0))}draw(){if(this.checkContext(),!this.stave)throw new n.RERR("NoStave","Can't draw without a stave.");this.setRendered();const e=this.context;let t,i=this.getAbsoluteX();if(this.justification===ve.Justification.CENTER?i-=this.getWidth()/2:this.justification===ve.Justification.RIGHT&&(i-=this.getWidth()),this.glyph)t=this.stave.getYForLine(this.line+-3),this.glyph.render(this.context,i+this.glyph_struct.x_shift,t+this.glyph_struct.y_shift);else{t=this.stave.getYForLine(this.line+-3),this.applyStyle(e),e.setFont(this.font.family,this.font.size,this.font.weight),e.fillText(this.text,i,t);const n=e.measureText("M").width,s=e.measureText(this.text).width;this.superscript&&(e.setFont(this.font.family,this.font.size/1.3,this.font.weight),e.fillText(this.superscript,i+s+2,t-n/2.2)),this.subscript&&(e.setFont(this.font.family,this.font.size/1.3,this.font.weight),e.fillText(this.subscript,i+s+2,t+n/2.2-1)),this.restoreStyle(e)}}}class ye extends fe{static get CATEGORY(){return"stavetext"}constructor(e,t,i){super(),this.setAttribute("type","StaveText"),this.setWidth(16),this.text=e,this.position=t,this.options={shift_x:0,shift_y:0,justification:ve.Justification.CENTER},n.Merge(this.options,i),this.font={family:"times",size:16,weight:"normal"}}getCategory(){return ye.CATEGORY}setStaveText(e){return this.text=e,this}setShiftX(e){return this.shift_x=e,this}setShiftY(e){return this.shift_y=e,this}setFont(e){n.Merge(this.font,e)}setText(e){this.text=e}draw(e){const t=e.checkContext();this.setRendered(),t.save(),t.lineWidth=2,t.setFont(this.font.family,this.font.size,this.font.weight);const i=t.measureText(""+this.text).width;let s,r;const o=fe.Position,a=ve.Justification;switch(this.position){case o.LEFT:case o.RIGHT:r=(e.getYForLine(0)+e.getBottomLineY())/2+this.options.shift_y,s=this.position===o.LEFT?e.getX()-i-24+this.options.shift_x:e.getX()+e.getWidth()+24+this.options.shift_x;break;case o.ABOVE:case o.BELOW:s=e.getX()+this.options.shift_x,this.options.justification===a.CENTER?s+=e.getWidth()/2-i/2:this.options.justification===a.RIGHT&&(s+=e.getWidth()-i),r=this.position===o.ABOVE?e.getYForTopText(2)+this.options.shift_y:e.getYForBottomText(2)+this.options.shift_y;break;default:throw new n.RERR("InvalidPosition","Value Must be in Modifier.Position.")}return t.fillText(""+this.text,s,r+4),t.restore(),this}}class xe extends fe{static get CATEGORY(){return"clefs"}static get types(){return{treble:{code:"v83",line:3},bass:{code:"v79",line:1},alto:{code:"vad",line:2},tenor:{code:"vad",line:1},percussion:{code:"v59",line:2},soprano:{code:"vad",line:4},"mezzo-soprano":{code:"vad",line:3},"baritone-c":{code:"vad",line:0},"baritone-f":{code:"v79",line:2},subbass:{code:"v79",line:0},french:{code:"v83",line:4},tab:{code:"v2f"}}}static get sizes(){return{default:{point:40,width:26},small:{point:32,width:20}}}static get annotations(){return{"8va":{code:"v8",sizes:{default:{point:20,attachments:{treble:{line:-1.2,x_shift:11}}},small:{point:18,attachments:{treble:{line:-.4,x_shift:8}}}}},"8vb":{code:"v8",sizes:{default:{point:20,attachments:{treble:{line:6.3,x_shift:10},bass:{line:4,x_shift:1}}},small:{point:18,attachments:{treble:{line:5.8,x_shift:6},bass:{line:3.5,x_shift:.5}}}}}}}constructor(e,t,i){super(),this.setAttribute("type","Clef"),this.setPosition(fe.Position.BEGIN),this.setType(e,t,i),this.setWidth(xe.sizes[this.size].width),function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];xe.DEBUG&&n.L("Vex.Flow.Clef",t)}("Creating clef:",e)}getCategory(){return xe.CATEGORY}setType(e,t,i){if(this.type=e,this.clef=xe.types[e],this.size=void 0===t?"default":t,this.clef.point=xe.sizes[this.size].point,this.glyph=new p(this.clef.code,this.clef.point),void 0!==i){const e=xe.annotations[i];this.annotation={code:e.code,point:e.sizes[this.size].point,line:e.sizes[this.size].attachments[this.type].line,x_shift:e.sizes[this.size].attachments[this.type].x_shift},this.attachment=new p(this.annotation.code,this.annotation.point),this.attachment.metrics.x_max=0,this.attachment.setXShift(this.annotation.x_shift)}else this.annotation=void 0;return this}getWidth(){if("tab"===this.type&&!this.stave)throw new n.RERR("ClefError","Can't get width without stave.");return this.width}setStave(e){if(this.stave=e,"tab"!==this.type)return this;let t,i;const s=this.stave.getOptions().num_lines;switch(s){case 8:t=55,i=14;break;case 7:t=47,i=8;break;case 6:t=40,i=1;break;case 5:t=30,i=-6;break;case 4:t=23,i=-12;break;case 3:t=16,i=-18;break;default:throw new n.RERR("ClefError","Invalid number of lines: ".concat(s))}return this.glyph.setPoint(t),this.glyph.setYShift(i),this}draw(){if(!this.x)throw new n.RERR("ClefError","Can't draw clef without x.");if(!this.stave)throw new n.RERR("ClefError","Can't draw clef without stave.");this.setRendered(),this.glyph.setStave(this.stave),this.glyph.setContext(this.stave.context),void 0!==this.clef.line&&this.placeGlyphOnLine(this.glyph,this.stave,this.clef.line),this.stave.context.openGroup("clef"),this.glyph.renderToStave(this.x),void 0!==this.annotation&&(this.placeGlyphOnLine(this.attachment,this.stave,this.annotation.line),this.attachment.setStave(this.stave),this.attachment.setContext(this.stave.context),this.attachment.renderToStave(this.x)),this.stave.context.closeGroup()}}class Se extends fe{static get CATEGORY(){return"keysignatures"}static get accidentalSpacing(){return{"#":{above:6,below:4},b:{above:4,below:7},n:{above:4,below:1},"##":{above:6,below:4},bb:{above:4,below:7},db:{above:4,below:7},d:{above:4,below:7},bbs:{above:4,below:7},"++":{above:6,below:4},"+":{above:6,below:4},"+-":{above:6,below:4},"++-":{above:6,below:4},bs:{above:4,below:10},bss:{above:4,below:10}}}constructor(e,t,i){super(),this.setAttribute("type","KeySignature"),this.setKeySig(e,t,i),this.setPosition(fe.Position.BEGIN),this.glyphFontScale=38,this.glyphs=[],this.xPositions=[],this.paddingForced=!1}getCategory(){return Se.CATEGORY}convertToGlyph(e,t){const i=m.accidentalCodes(e.type),n=new p(i.code,this.glyphFontScale);let s=1;if("n"===e.type&&t){const i=Se.accidentalSpacing[t.type];i&&(s=t.line>=e.line?i.above:i.below)}this.placeGlyphOnLine(n,this.stave,e.line),this.glyphs.push(n);const r=this.xPositions[this.xPositions.length-1],o=n.getMetrics().width+s;this.xPositions.push(r+o),this.width+=o}cancelKey(e){return this.formatted=!1,this.cancelKeySpec=e,this}convertToCancelAccList(e){const t=m.keySignature(e),i=this.accList.length>0&&t.length>0&&t[0].type!==this.accList[0].type,n=i?t.length:t.length-this.accList.length;if(n<1)return;const s=[];for(let r=0;r<n;r++){let e=r;i||(e=t.length-n+r);const o=t[e];s.push({type:"n",line:o.line})}return this.accList=s.concat(this.accList),{accList:s,type:t[0].type}}addToStave(e){return this.paddingForced=!0,e.addModifier(this),this}convertAccLines(e,t){let i,n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.accList,r=0;switch(e){case"soprano":"#"===t?i=[2.5,.5,2,0,1.5,-.5,1]:r=-1;break;case"mezzo-soprano":"b"===t?i=[0,2,.5,2.5,1,3,1.5]:r=1.5;break;case"alto":r=.5;break;case"tenor":"#"===t?i=[3,1,2.5,.5,2,0,1.5]:r=-.5;break;case"baritone-f":case"baritone-c":"b"===t?i=[.5,2.5,1,3,1.5,3.5,2]:r=2;break;case"bass":case"french":r=1}if(void 0!==i)for(n=0;n<s.length;++n)s[n].line=i[n];else if(0!==r)for(n=0;n<s.length;++n)s[n].line+=r}getPadding(e){return this.formatted||this.format(),0===this.glyphs.length||!this.paddingForced&&e<2?0:this.padding}getWidth(){return this.formatted||this.format(),this.width}setKeySig(e,t,i){return this.formatted=!1,this.keySpec=e,this.cancelKeySpec=t,this.alterKeySpec=i,this}alterKey(e){return this.formatted=!1,this.alterKeySpec=e,this}convertToAlterAccList(e){const t=Math.min(e.length,this.accList.length);for(let i=0;i<t;++i)e[i]&&(this.accList[i].type=e[i])}format(){if(!this.stave)throw new n.RERR("KeySignatureError","Can't draw key signature without stave.");this.width=0,this.glyphs=[],this.xPositions=[0],this.accList=m.keySignature(this.keySpec);const e=this.accList,t=e.length>0?e[0].type:null;let i;if(this.cancelKeySpec&&(i=this.convertToCancelAccList(this.cancelKeySpec)),this.alterKeySpec&&this.convertToAlterAccList(this.alterKeySpec),this.accList.length>0){const n=(this.position===fe.Position.END?this.stave.endClef:this.stave.clef)||this.stave.clef;i&&this.convertAccLines(n,i.type,i.accList),this.convertAccLines(n,t,e);for(let e=0;e<this.accList.length;++e)this.convertToGlyph(this.accList[e],this.accList[e+1])}this.formatted=!0}draw(){if(!this.x)throw new n.RERR("KeySignatureError","Can't draw key signature without x.");if(!this.stave)throw new n.RERR("KeySignatureError","Can't draw key signature without stave.");if(this.formatted||this.format(),this.setRendered(),this.glyphs.length>0){const e=this.stave.context.openGroup("keysignature");for(let t=0;t<this.glyphs.length;t++){const e=this.glyphs[t],i=this.x+this.xPositions[t];e.setStave(this.stave),e.setContext(this.stave.context),e.renderToStave(i)}this.hidden&&e&&e.setAttribute("visibility","hidden"),this.stave.context.closeGroup()}}}class Ee extends fe{static get CATEGORY(){return"timesignatures"}static get glyphs(){return{C:{code:"v41",point:40,line:2},"C|":{code:"vb6",point:40,line:2}}}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(super(),this.setAttribute("type","TimeSignature"),this.validate_args=i,null===e)return;const n=t;this.point=40,this.topLine=2,this.bottomLine=4,this.setPosition(fe.Position.BEGIN),this.setTimeSig(e),this.setWidth(this.timeSig.glyph.getMetrics().width),this.setPadding(n)}getCategory(){return Ee.CATEGORY}parseTimeSpec(e){if("C"===e||"C|"===e){const{line:t,code:i,point:n}=Ee.glyphs[e];return{line:t,num:!1,glyph:new p(i,n)}}this.validate_args&&(e=>{const t=e.split("/").filter((e=>""!==e));if(2!==t.length)throw new n.RERR("BadTimeSignature","Invalid time spec: ".concat(e,'. Must be in the form "<numerator>/<denominator>"'));t.forEach((t=>{if(isNaN(Number(t)))throw new n.RERR("BadTimeSignature","Invalid time spec: ".concat(e,". Must contain two valid numbers."))}))})(e);const[t,i]=e.split("/").map((e=>e.split("")));return{num:!0,glyph:this.makeTimeSignatureGlyph(t,i)}}makeTimeSignatureGlyph(e,t){const i=new p("v0",this.point);i.topGlyphs=[],i.botGlyphs=[];let n=0;for(let h=0;h<e.length;++h){const t=e[h],s=new p("v"+t,this.point);i.topGlyphs.push(s),n+=s.getMetrics().width}let s=0;for(let h=0;h<t.length;++h){const e=t[h],n=new p("v"+e,this.point);i.botGlyphs.push(n),s+=n.getMetrics().width}const r=n>s?n:s,o=i.getMetrics().x_min;i.getMetrics=()=>({x_min:o,x_max:o+r,width:r});const a=(r-n)/2,l=(r-s)/2,c=this;return i.renderToStave=function(e){let t=e+a;for(let i=0;i<this.topGlyphs.length;++i){const e=this.topGlyphs[i];p.renderOutline(this.context,e.metrics.outline,e.scale,t+e.x_shift,this.stave.getYForLine(c.topLine)),t+=e.getMetrics().width}t=e+l;for(let i=0;i<this.botGlyphs.length;++i){const e=this.botGlyphs[i];c.placeGlyphOnLine(e,this.stave,e.line),p.renderOutline(this.context,e.metrics.outline,e.scale,t+e.x_shift,this.stave.getYForLine(c.bottomLine)),t+=e.getMetrics().width}},i}getTimeSig(){return this.timeSig}setTimeSig(e){return this.timeSig=this.parseTimeSpec(e),this}draw(){if(!this.x)throw new n.RERR("TimeSignatureError","Can't draw time signature without x.");if(!this.stave)throw new n.RERR("TimeSignatureError","Can't draw time signature without stave.");this.setRendered(),this.timeSig.glyph.setStave(this.stave),this.timeSig.glyph.setContext(this.stave.context),this.placeGlyphOnLine(this.timeSig.glyph,this.stave,this.timeSig.line);const e=this.stave.context.openGroup("timesignature");this.timeSig.glyph.renderToStave(this.x),this.hidden&&e&&e.setAttribute("visibility","hidden"),this.stave.context.closeGroup("timesignature")}}class we extends fe{static get CATEGORY(){return"voltas"}static get type(){return{NONE:1,BEGIN:2,MID:3,END:4,BEGIN_END:5}}constructor(e,t,i,n){super(),this.setAttribute("type","Volta"),this.volta=e,this.x=i,this.y_shift=n,this.number=t,this.font={family:"sans-serif",size:9,weight:"bold"}}getCategory(){return we.CATEGORY}setShiftY(e){return this.y_shift=e,this}draw(e,t){const i=e.checkContext();this.setRendered();let n=e.width-t;const s=e.getYForTopText(e.options.num_lines)+this.y_shift,r=1.5*e.options.spacing_between_lines_px;switch(this.volta){case we.type.BEGIN:i.fillRect(this.x+t,s,1,r);break;case we.type.END:n-=5,i.fillRect(this.x+t+n,s,1,r);break;case we.type.BEGIN_END:n-=3,i.fillRect(this.x+t,s,1,r),i.fillRect(this.x+t+n,s,1,r)}return this.volta!==we.type.BEGIN&&this.volta!==we.type.BEGIN_END||(i.save(),i.setFont(this.font.family,this.font.size,this.font.weight),i.fillText(this.number,this.x+t+5,s+15),i.restore()),i.fillRect(this.x+t,s,n,1),this}}class Te extends c{constructor(e,t,i,s){super(),this.setAttribute("type","Stave"),this.x=e,this.y=t,this.width=i,this.formatted=!1,this.setStartX(e+5),this.end_x=e+i,this.modifiers=[],this.measure=0,this.clef="treble",this.endClef=void 0,this.font={family:"sans-serif",size:8,weight:""},this.options={vertical_bar_width:10,glyph_spacing_px:10,num_lines:5,fill_style:"#999999",left_bar:!0,right_bar:!0,spacing_between_lines_px:10,space_above_staff_ln:4,space_below_staff_ln:4,top_text_position:1},this.bounds={x:this.x,y:this.y,w:this.width,h:0},n.Merge(this.options,s),this.resetLines();const r=pe.type;this.addModifier(new pe(this.options.left_bar?r.SINGLE:r.NONE)),this.addEndModifier(new pe(this.options.right_bar?r.SINGLE:r.NONE))}space(e){return this.options.spacing_between_lines_px*e}resetLines(){this.options.line_config=[];for(let e=0;e<this.options.num_lines;e++)this.options.line_config.push({visible:!0});this.height=(this.options.num_lines+this.options.space_above_staff_ln)*this.options.spacing_between_lines_px,this.options.bottom_text_position=this.options.num_lines}formatBegModifiers(e){let t=0;e.forEach((e=>{e.getNoteStartX()>t&&(t=e.getNoteStartX())})),e.forEach((e=>{e.setNoteStartX(t)})),t=0,e.forEach((e=>{e.getModifiers(fe.Position.BEGIN,pe.CATEGORY).forEach((e=>{e.getType()==pe.type.REPEAT_BEGIN&&e.getX()>t&&(t=e.getX())}))})),e.forEach((e=>{e.getModifiers(fe.Position.BEGIN,pe.CATEGORY).forEach((e=>{e.getType()==pe.type.REPEAT_BEGIN&&e.setX(t)}))})),t=0,e.forEach((e=>{e.getModifiers(fe.Position.BEGIN,Ee.CATEGORY).forEach((e=>{e.getX()>t&&(t=e.getX())}))})),e.forEach((e=>{e.getModifiers(fe.Position.BEGIN,Ee.CATEGORY).forEach((e=>{e.setX(t)}))}))}getOptions(){return this.options}setNoteStartX(e){return this.formatted||this.format(),this.setStartX(e),this}setStartX(e){this.start_x=e}getNoteStartX(){return this.formatted||this.format(),this.start_x}getNoteEndX(){return this.formatted||this.format(),this.end_x}getTieStartX(){return this.start_x}getTieEndX(){return this.x+this.width}getX(){return this.x}getNumLines(){return this.options.num_lines}setNumLines(e){return this.options.num_lines=parseInt(e,10),this.resetLines(),this}setY(e){return this.y=e,this}getTopLineTopY(){return this.getYForLine(0)-m.STAVE_LINE_THICKNESS/2}getBottomLineBottomY(){return this.getYForLine(this.getNumLines()-1)+m.STAVE_LINE_THICKNESS/2}setX(e){const t=e-this.x;this.formatted=!1,this.x=e,this.start_x+=t,this.end_x+=t;for(let i=0;i<this.modifiers.length;i++){const e=this.modifiers[i];void 0!==e.x&&(e.x+=t)}return this}setWidth(e){return this.formatted=!1,this.width=e,this.end_x=this.x+e,this}getWidth(){return this.width}getStyle(){return s({fillStyle:this.options.fill_style,strokeStyle:this.options.fill_style,lineWidth:m.STAVE_LINE_THICKNESS},this.style||{})}setMeasure(e){return this.measure=e,this}getModifierXShift(){if("number"!=typeof(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0))throw new n.RERR("InvalidIndex","Must be of number type");if(this.formatted||this.format(),1===this.getModifiers(fe.Position.BEGIN).length)return 0;let e=this.start_x-this.x;const t=this.modifiers[0];return t.getType()===pe.type.REPEAT_BEGIN&&e>t.getWidth()&&(e-=t.getWidth()),e}setRepetitionTypeLeft(e,t){return this.modifiers.push(new me(e,this.x,t)),this}setRepetitionTypeRight(e,t){return this.modifiers.push(new me(e,this.x,t)),this}setVoltaType(e,t,i){return this.modifiers.push(new we(e,t,this.x,i)),this}setSection(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12;const s=new ge(e,this.x+i,t);return s.font.size=n,this.modifiers.push(s),this}setTempo(e,t){return this.modifiers.push(new be(e,this.x,t)),this}setText(e,t,i){return this.modifiers.push(new ye(e,t,i)),this}getHeight(){return this.height}getSpacingBetweenLines(){return this.options.spacing_between_lines_px}getBoundingBox(){return new u(this.x,this.y,this.width,this.getBottomY()-this.y)}getBottomY(){const e=this.options,t=e.spacing_between_lines_px;return this.getYForLine(e.num_lines)+e.space_below_staff_ln*t}getBottomLineY(){return this.getYForLine(this.options.num_lines)}getYForLine(e){const t=this.options,i=t.spacing_between_lines_px,n=t.space_above_staff_ln;return this.y+e*i+n*i}getLineForY(e){const t=this.options,i=t.spacing_between_lines_px,n=t.space_above_staff_ln;return(e-this.y)/i-n}getYForTopText(e){const t=e||0;return this.getYForLine(-t-this.options.top_text_position)}getYForBottomText(e){const t=e||0;return this.getYForLine(this.options.bottom_text_position+t)}getYForNote(e){const t=this.options,i=t.spacing_between_lines_px,n=t.space_above_staff_ln;return this.y+n*i+5*i-e*i}getYForGlyphs(){return this.getYForLine(3)}addModifier(e,t){return void 0!==t&&e.setPosition(t),e.setStave(this),this.formatted=!1,this.modifiers.push(e),this}addEndModifier(e){return this.addModifier(e,fe.Position.END),this}setBegBarType(e){const{SINGLE:t,REPEAT_BEGIN:i,NONE:n}=pe.type;return e!==t&&e!==i&&e!==n||(this.modifiers[0].setType(e),this.formatted=!1),this}setEndBarType(e){return e!==pe.type.REPEAT_BEGIN&&(this.modifiers[1].setType(e),this.formatted=!1),this}setClef(e,t,i,n){void 0===n&&(n=fe.Position.BEGIN),n===fe.Position.END?this.endClef=e:this.clef=e;const s=this.getModifiers(n,xe.CATEGORY);return 0===s.length?this.addClef(e,t,i,n):s[0].setType(e,t,i),this}setEndClef(e,t,i){return this.setClef(e,t,i,fe.Position.END),this}setKeySignature(e,t,i){void 0===i&&(i=fe.Position.BEGIN);const n=this.getModifiers(i,Se.CATEGORY);return 0===n.length?this.addKeySignature(e,t,i):n[0].setKeySig(e,t),this}setEndKeySignature(e,t){return this.setKeySignature(e,t,fe.Position.END),this}setTimeSignature(e,t,i){void 0===i&&(i=fe.Position.BEGIN);const n=this.getModifiers(i,Ee.CATEGORY);return 0===n.length?this.addTimeSignature(e,t,i):n[0].setTimeSig(e),this}setEndTimeSignature(e,t){return this.setTimeSignature(e,t,fe.Position.END),this}addKeySignature(e,t,i){return void 0===i&&(i=fe.Position.BEGIN),this.addModifier(new Se(e,t).setPosition(i),i),this}addClef(e,t,i,n){return void 0===n||n===fe.Position.BEGIN?this.clef=e:n===fe.Position.END&&(this.endClef=e),this.addModifier(new xe(e,t,i),n),this}addEndClef(e,t,i){return this.addClef(e,t,i,fe.Position.END),this}addTimeSignature(e,t,i){return this.addModifier(new Ee(e,t),i),this}addEndTimeSignature(e,t){return this.addTimeSignature(e,t,fe.Position.END),this}addTrebleGlyph(){return this.addClef("treble"),this}getModifiers(e,t){return void 0===e&&void 0===t?this.modifiers:this.modifiers.filter((i=>!(void 0!==e&&e!==i.getPosition()||void 0!==t&&t!==i.getCategory())))}sortByCategory(e,t){for(let i=e.length-1;i>=0;i--)for(let n=0;n<i;n++)if(t[e[n].getCategory()]>t[e[n+1].getCategory()]){const t=e[n];e[n]=e[n+1],e[n+1]=t}}format(){const e=this.modifiers[0],t=this.modifiers[1],i=this.getModifiers(fe.Position.BEGIN),n=this.getModifiers(fe.Position.END);let s,r,o;this.sortByCategory(i,{barlines:0,clefs:1,keysignatures:2,timesignatures:3}),this.sortByCategory(n,{timesignatures:0,keysignatures:1,barlines:2,clefs:3}),i.length>1&&e.getType()===pe.type.REPEAT_BEGIN&&(i.push(i.splice(0,1)[0]),i.splice(0,0,new pe(pe.type.SINGLE))),n.indexOf(t)>0&&n.splice(0,0,new pe(pe.type.NONE));let a=0,l=this.x;for(let u=0;u<i.length;u++){o=i[u],r=o.getPadding(u+a),s=o.getWidth(),isNaN(s)&&(o.setWidth(10),s=10),l+=r;const e=o.getX();e>l?l=e:o.setX(l),l+=s,r+s===0&&a--}l>this.start_x&&this.setStartX(l),l=this.x+this.width;const c={left:0,right:0,paddingRight:0,paddingLeft:0};let h=0;for(let u=0;u<n.length;u++){o=n[u],h="barlines"===o.getCategory()?u:h,c.right=0,c.left=0,c.paddingRight=0,c.paddingLeft=0;const e=o.getLayoutMetrics();e?(0!==u&&(c.right=e.xMax||0,c.paddingRight=e.paddingRight||0),c.left=-e.xMin||0,c.paddingLeft=e.paddingLeft||0,u===n.length-1&&(c.paddingLeft=0)):(c.paddingRight=o.getPadding(u-h)||0,0!==u&&(c.right=o.getWidth()||0),0===u&&(c.left=o.getWidth()||0)),l-=c.paddingRight,l-=c.right,o.setX(l),l-=c.left,l-=c.paddingLeft}this.end_x=1===n.length?this.x+this.width:l,this.formatted=!0}draw(){this.checkContext(),this.setRendered(),this.formatted||this.format();const e=this.options.num_lines,t=this.width,i=this.x;let n;for(let s=0;s<e;s++)n=this.getYForLine(s),this.applyStyle(),this.options.line_config[s].visible&&(this.context.beginPath(),this.context.moveTo(i,n),this.context.lineTo(i+t,n),this.context.stroke()),this.restoreStyle();for(let s=0;s<this.modifiers.length;s++)"function"==typeof this.modifiers[s].draw&&(this.modifiers[s].applyStyle(this.context),this.modifiers[s].draw(this,this.getModifierXShift(s)),this.modifiers[s].restoreStyle(this.context));if(this.measure>0){this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight);const e=this.context.measureText(""+this.measure).width;n=this.getYForTopText(0)+3,this.context.fillText(""+this.measure,this.x-e/2,n),this.context.restore()}return this}drawVertical(e,t){this.drawVerticalFixed(this.x+e,t)}drawVerticalFixed(e,t){this.checkContext();const i=this.getYForLine(0),n=this.getYForLine(this.options.num_lines-1);t&&this.context.fillRect(e-3,i,1,n-i+1),this.context.fillRect(e,i,1,n-i+1)}drawVerticalBar(e){this.drawVerticalBarFixed(this.x+e,!1)}drawVerticalBarFixed(e){this.checkContext();const t=this.getYForLine(0),i=this.getYForLine(this.options.num_lines-1);this.context.fillRect(e,t,1,i-t+1)}getConfigForLines(){return this.options.line_config}setConfigForLine(e,t){if(e>=this.options.num_lines||e<0)throw new n.RERR("StaveConfigError","The line number must be within the range of the number of lines in the Stave.");if(void 0===t.visible)throw new n.RERR("StaveConfigError","The line configuration object is missing the 'visible' property.");if("boolean"!=typeof t.visible)throw new n.RERR("StaveConfigError","The line configuration objects 'visible' property must be true or false.");return this.options.line_config[e]=t,this}setConfigForLines(e){if(e.length!==this.options.num_lines)throw new n.RERR("StaveConfigError","The length of the lines configuration array must match the number of lines in the Stave");for(const t in e)e[t]||(e[t]=this.options.line_config[t]),n.Merge(this.options.line_config[t],e[t]);return this.options.line_config=e,this}}class _e extends Te{constructor(e,t,i,s){const r={spacing_between_lines_px:13,num_lines:6,top_text_position:1};n.Merge(r,s),super(e,t,i,r),this.setAttribute("type","TabStave")}getYForGlyphs(){return this.getYForLine(2.5)}addTabGlyph(){return this.addClef("tab"),this}}class Me extends R{static get CATEGORY(){return"tabnotes"}constructor(e,t){if(super(e),this.setAttribute("type","TabNote"),this.ghost=!1,this.positions=e.positions,n.Merge(this.render_options,{glyph_font_scale:m.DEFAULT_TABLATURE_FONT_SCALE,draw_stem:t,draw_dots:t,draw_stem_through_stave:!1,y_shift:0,scale:1,font:"10pt Arial"}),this.glyph=m.getGlyphProps(this.duration,this.noteType),!this.glyph)throw new n.RuntimeError("BadArguments","Invalid note initialization data (No glyph found): ".concat(JSON.stringify(e)));this.buildStem(),e.stem_direction?this.setStemDirection(e.stem_direction):this.setStemDirection(E.UP),this.ghost=!1,this.updateWidth()}reset(){this.stave&&this.setStave(this.stave)}getCategory(){return Me.CATEGORY}setGhost(e){return this.ghost=e,this.updateWidth(),this}hasStem(){return this.render_options.draw_stem}getStemExtension(){const e=this.getGlyph();return null!=this.stem_extension_override?this.stem_extension_override:e?1===this.getStemDirection()?e.tabnote_stem_up_extension:e.tabnote_stem_down_extension:0}addDot(){const e=new D;return this.dots+=1,this.addModifier(e,0)}updateWidth(){this.glyphs=[],this.width=0;for(let t=0;t<this.positions.length;++t){var e;let i=this.positions[t].fret;this.ghost&&(i="("+i+")");const n=null!==(e=this.render_options.fretScale)&&void 0!==e?e:this.render_options.scale,s=m.tabToGlyph(i,n,this.render_options.TabUseXNoteheadAlternativeGlyph);"x"===i&&(s.isXGlyph=!0),this.glyphs.push(s),this.width=Math.max(s.getWidth(),this.width)}this.glyph.getWidth=()=>this.width}setStave(e){let t;if(super.setStave(e),this.context=e.context,this.context){const e=this.context;for(this.width=0,t=0;t<this.glyphs.length;++t){const i=this.glyphs[t],n=""+i.text;"X"!==n.toUpperCase()&&(e.save(),e.setRawFont(this.render_options.font),i.width=e.measureText(n).width,e.restore(),i.getWidth=()=>i.width),this.width=Math.max(i.getWidth(),this.width)}this.glyph.getWidth=()=>this.width}const i=this.positions.map((t=>{let{str:i}=t;return e.getYForLine(i-1)}));return this.setYs(i),this.stem&&this.stem.setYBounds(this.getStemY(),this.getStemY()),this}getPositions(){return this.positions}addToModifierContext(e){this.setModifierContext(e);for(let t=0;t<this.modifiers.length;++t)this.modifierContext.addModifier(this.modifiers[t]);return this.modifierContext.addModifier(this),this.preFormatted=!1,this}getTieRightX(){let e=this.getAbsoluteX();return e+=this.glyph.getWidth()/2,e+=-this.width/2+this.width+2,e}getTieLeftX(){let e=this.getAbsoluteX();return e+=this.glyph.getWidth()/2,e-=this.width/2+2,e}getModifierStartXY(e,t){if(!this.preFormatted)throw new n.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");if(0===this.ys.length)throw new n.RERR("NoYValues","No Y-Values calculated for this note.");let i=0;return e===O.Position.LEFT?i=-2:e===O.Position.RIGHT?i=this.width+2:e!==O.Position.BELOW&&e!==O.Position.ABOVE||(i=this.glyph.getWidth()/2),{x:this.getAbsoluteX()+i,y:this.ys[t]}}getLineForRest(){return this.positions[0].str}preFormat(){this.preFormatted||(this.modifierContext&&this.modifierContext.preFormat(),this.setPreFormatted(!0))}getStemX(){return this.getCenterGlyphX()}getStemY(){const e=this.stave.getNumLines()-.5,t=E.UP===this.stem_direction?-.5:e;return this.stave.getYForLine(t)}getStemExtents(){return this.stem.getExtents()}drawFlag(){const{beam:e,glyph:t,context:i,stem:n,stem_direction:s,render_options:{draw_stem:r,glyph_font_scale:o}}=this,a=null==e&&r;if(t.flag&&a){const e=this.getStemX()+1,r=this.getStemY()-n.getHeight(),a=s===E.DOWN?t.code_flag_downstem:t.code_flag_upstem;p.renderGlyph(i,e,r,o,a)}}drawModifiers(){this.modifiers.forEach((e=>{("dots"!==e.getCategory()||this.render_options.draw_dots)&&(e.setContext(this.context),e.drawWithStyle())}))}drawStemThrough(){const e=this.getStemX(),t=this.getStemY(),i=this.context,n=this.render_options.draw_stem_through_stave;if(this.render_options.draw_stem&&n){const n=function(e,t){const i=[];let n=[];for(let s=1;s<=e;s++)t.indexOf(s)>-1?(i.push(n),n=[]):n.push(s);return n.length>0&&i.push(n),i}(this.stave.getNumLines(),this.positions.map((e=>e.str))),s=function(e,t,i,n){const s=1!==n,r=-1!==n,o=i.getSpacingBetweenLines(),a=i.getNumLines(),l=[];return t.forEach((t=>{const c=t.indexOf(a)>-1,h=t.indexOf(1)>-1;if(s&&h||r&&c)return;1===t.length&&t.push(t[0]);const u=[];t.forEach(((t,s,r)=>{const l=1===t,c=t===a;let h=i.getYForLine(t-1);0!==s||l?s!==r.length-1||c||(h+=o/2-1):h-=o/2-1,u.push(h),1===n&&l?u.push(e-2):-1===n&&c&&u.push(e+2)})),l.push(u.sort(((e,t)=>e-t)))})),l}(t,n,this.getStave(),this.getStemDirection());i.save(),i.setLineWidth(E.WIDTH),s.forEach((t=>{0!==t.length&&(i.beginPath(),i.moveTo(e,t[0]),i.lineTo(e,t[t.length-1]),i.stroke(),i.closePath())})),i.restore()}}drawPositions(){const e=this.context,t=this.getAbsoluteX(),i=this.ys;for(let n=0;n<this.positions.length;++n){const s=i[n]+this.render_options.y_shift,r=this.glyphs[n];let o=r.getWidth();0===o&&r.text&&r.text.toString()&&r.text.toString().length&&(o=7*r.text.toString().length);let a=this.glyph.getWidth();0===a&&(a=o);const l=t+a/2-o/2;if(this.BackgroundColor?(e.save(),e.setFillStyle(this.BackgroundColor),e.setLineWidth(0),e.fillRect(l-2,s-3,o+4,6),e.restore()):e.clearRect(l-2,s-3,o+4,6),r.code)p.renderGlyph(e,l,s,this.render_options.glyph_font_scale*this.render_options.scale,r.code);else{e.save(),e.setRawFont(this.render_options.font);const t=r.text.toString();e.fillText(t,l,s+5*this.render_options.scale),e.restore()}}}draw(){if(this.checkContext(),!this.stave)throw new n.RERR("NoStave","Can't draw without a stave.");if(0===this.ys.length)throw new n.RERR("NoYValues","Can't draw note without Y values.");this.setRendered();const e=null==this.beam&&this.render_options.draw_stem;this.context.openGroup("tabnote",this.getAttribute("id"),{pointerBBox:!0}),this.drawPositions(),this.drawStemThrough();const t=this.getStemX();this.stem.setNoteHeadXBounds(t,t),e&&(this.context.openGroup("stem",null,{pointerBBox:!0}),this.stem.setContext(this.context).draw(),this.context.closeGroup()),this.drawFlag(),this.drawModifiers(),this.context.closeGroup()}}class Pe extends c{constructor(e){super(),this.setAttribute("type","VibratoBracket"),this.start=e.start,this.stop=e.stop,this.line=1,this.render_options={harsh:!1,wave_height:6,wave_width:4,wave_girth:2}}setLine(e){return this.line=e,this}setHarsh(e){return this.render_options.harsh=e,this}draw(){const e=this.context;this.setRendered();const t=this.start?this.start.getStave().getYForTopText(this.line):this.stop.getStave().getYForTopText(this.line),i=this.start?this.start.getAbsoluteX():this.stop.getStave().getTieStartX(),s=this.stop?this.stop.getAbsoluteX()-this.stop.getWidth()-5:this.start.getStave().getTieEndX()-10;this.render_options.vibrato_width=s-i,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Pe.DEBUG&&n.L("Vex.Flow.VibratoBracket",t)}("Rendering VibratoBracket: start_x:",i,"stop_x:",s,"y:",t),ae.renderVibrato(e,i,t,this.render_options)}}let Ce;class Ae extends c{constructor(e,t){super(),this.setAttribute("type","MultiMeasureRest"),this.render_options={show_number:!0,number_line:-.5,number_glyph_point:40,padding_left:void 0,padding_right:void 0,line:2,spacing_between_lines_px:10,line_thickness:void 0,serif_thickness:2,use_symbols:!1,symbol_spacing:void 0,semibrave_rest_glyph_scale:m.DEFAULT_NOTATION_FONT_SCALE},n.Merge(this.render_options,t),this.number_of_measures=e,this.xs={left:NaN,right:NaN}}getXs(){return this.xs}setStave(e){return this.stave=e,this}getStave(){return this.stave}drawLine(e,t,i,n){const s=this.stave.getYForLine(this.render_options.line),r=.1*(i-t);t+=r,i-=r;const o=this.render_options.serif_thickness;let a=.25*n;isNaN(this.render_options.line_thickness)||(a=.5*this.render_options.line_thickness),e.save(),e.beginPath(),e.moveTo(t,s-n),e.lineTo(t+o,s-n),e.lineTo(t+o,s-a),e.lineTo(i-o,s-a),e.lineTo(i-o,s-n),e.lineTo(i,s-n),e.lineTo(i,s+n),e.lineTo(i-o,s+n),e.lineTo(i-o,s+a),e.lineTo(t+o,s+a),e.lineTo(t+o,s+n),e.lineTo(t,s+n),e.closePath(),e.fill()}drawSymbols(e,t,i,n){const s=Math.floor(this.number_of_measures/4),r=this.number_of_measures%4,o=Math.floor(r/2),a=r%2,l=function(){if(!Ce){const e=new I({duration:"w",note_type:"r"});Ce={glyph_font_scale:e.render_options.glyph_font_scale,glyph_code:e.glyph_code,width:e.getWidth()}}return Ce}(),c=l.width*(this.render_options.semibrave_rest_glyph_scale/l.glyph_font_scale),h={2:{width:.5*c,height:n},1:{width:c}};let u=1.35*c;isNaN(this.render_options.symbol_spacing)||(u=this.render_options.symbol_spacing);let d=t+.5*(i-t)-.5*(s*h[2].width+o*h[2].width+a*h[1].width+(s+o+a-1)*u);const f=this.stave.getYForLine(this.render_options.line-1),m=this.stave.getYForLine(this.render_options.line),g=this.stave.getYForLine(this.render_options.line+1);e.save(),e.setStrokeStyle("none"),e.setLineWidth(0);for(let p=0;p<s;++p)e.fillRect(d,m-h[2].height,h[2].width,h[2].height),e.fillRect(d,g-h[2].height,h[2].width,h[2].height),d+=h[2].width+u;for(let p=0;p<o;++p)e.fillRect(d,m-h[2].height,h[2].width,h[2].height),d+=h[2].width+u;for(let b=0;b<a;++b)p.renderGlyph(e,d,f,this.render_options.semibrave_rest_glyph_scale,l.glyph_code),d+=h[1].width+u;e.restore()}draw(){this.checkContext(),this.setRendered();const e=this.context,t=this.stave,i=this.render_options.spacing_between_lines_px;let n=t.getNoteStartX(),s=t.getNoteEndX();const r=t.getModifiers(fe.Position.BEGIN);if(1===r.length&&"barlines"===r[0].getCategory()&&(n-=r[0].getWidth()),isNaN(this.render_options.padding_left)||(n=t.getX()+this.render_options.padding_left),isNaN(this.render_options.padding_right)||(s=t.getX()+t.getWidth()-this.render_options.padding_right),this.xs.left=n,this.xs.right=s,this.render_options.use_symbols?this.drawSymbols(e,n,s,i):this.drawLine(e,n,s,i),this.render_options.show_number){const i="/"+this.number_of_measures,r=new Ee(null,void 0,!1);r.point=this.render_options.number_glyph_point,r.setTimeSig(i),r.setStave(t),r.x=n+.5*(s-n)-.5*r.timeSig.glyph.getMetrics().width,r.bottomLine=this.render_options.number_line,r.setContext(e).draw()}}}class Ne extends k{static get CATEGORY(){return"clefnote"}constructor(e,t,i){super({duration:"b"}),this.setAttribute("type","ClefNote"),this.setType(e,t,i),this.ignore_ticks=!0}setType(e,t,i){return this.type=e,this.clef_obj=new xe(e,t,i),this.clef=this.clef_obj.clef,this.glyph=new p(this.clef.code,this.clef.point),this.setWidth(this.glyph.getMetrics().width),this}getClef(){return this.clef}setContext(e){return this.context=e,this.glyph.setContext(this.context),this}getBoundingBox(){return super.getBoundingBox()}addToModifierContext(){return this}getCategory(){return Ne.CATEGORY}preFormat(){return this.setPreFormatted(!0),this}draw(){if(!this.stave)throw new n.RERR("NoStave","Can't draw without a stave.");this.glyph.getContext()||this.glyph.setContext(this.context),this.setRendered();const e=this.getAbsoluteX();if(this.glyph.setStave(this.stave),this.glyph.setYShift(this.stave.getYForLine(this.clef.line)-this.stave.getYForGlyphs()),this.glyph.renderToStave(e),void 0!==this.clef_obj.annotation){const t=new p(this.clef_obj.annotation.code,this.clef_obj.annotation.point);t.getContext()||t.setContext(this.context),t.setStave(this.stave),t.setYShift(this.stave.getYForLine(this.clef_obj.annotation.line)-this.stave.getYForGlyphs()),t.setXShift(this.clef_obj.annotation.x_shift),t.renderToStave(e)}}}class Le extends k{constructor(e,t,i){super({duration:"b"}),this.setAttribute("type","KeySigNote"),this.keySignature=new Se(e,t,i),this.ignore_ticks=!0}getBoundingBox(){return super.getBoundingBox()}addToModifierContext(){return this}preFormat(){return this.setPreFormatted(!0),this.keySignature.setStave(this.stave),this.keySignature.format(),this.setWidth(this.keySignature.width),this}draw(){this.stave.checkContext(),this.setRendered(),this.keySignature.x=this.getAbsoluteX(),this.keySignature.setContext(this.context),this.keySignature.draw()}}class ke extends k{constructor(e,t){super({duration:"b"}),this.setAttribute("type","TimeSigNote");const i=new Ee(e,t);this.timeSig=i.getTimeSig(),this.setWidth(this.timeSig.glyph.getMetrics().width),this.ignore_ticks=!0}getBoundingBox(){return super.getBoundingBox()}addToModifierContext(){return this}preFormat(){return this.setPreFormatted(!0),this}draw(){this.stave.checkContext(),this.setRendered(),this.timeSig.glyph.getContext()||this.timeSig.glyph.setContext(this.context),this.timeSig.glyph.setStave(this.stave),this.timeSig.glyph.setYShift(this.stave.getYForLine(this.timeSig.line)-this.stave.getYForGlyphs()),this.timeSig.glyph.renderToStave(this.getAbsoluteX())}}class Ie extends X{static get SLIDE_UP(){return 1}static get SLIDE_DOWN(){return-1}static createSlideUp(e){return new Ie(e,Ie.SLIDE_UP)}static createSlideDown(e){return new Ie(e,Ie.SLIDE_DOWN)}constructor(e,t){if(super(e,"sl."),this.setAttribute("type","TabSlide"),!t){const i=e.first_note.getPositions()[0].fret,n=e.last_note.getPositions()[0].fret;t=parseInt(i,10)>parseInt(n,10)?Ie.SLIDE_DOWN:Ie.SLIDE_UP}this.slide_direction=t,this.render_options.cp1=11,this.render_options.cp2=14,this.render_options.y_shift=.5,this.setFont({font:"Times",size:10,style:"bold italic"}),this.setNotes(e)}renderTie(e){if(0===e.first_ys.length||0===e.last_ys.length)throw new n.RERR("BadArguments","No Y-values to render");const t=this.context,i=e.first_x_px,s=e.first_ys,r=e.last_x_px,o=this.slide_direction;if(o!==Ie.SLIDE_UP&&o!==Ie.SLIDE_DOWN)throw new n.RERR("BadSlide","Invalid slide direction");for(let a=0;a<this.first_indices.length;++a){const e=s[this.first_indices[a]]+this.render_options.y_shift;if(isNaN(e))throw new n.RERR("BadArguments","Bad indices for slide rendering.");t.beginPath(),t.moveTo(i,e+3*o),t.lineTo(r,e-3*o),t.closePath(),t.stroke()}this.setRendered()}}class Re extends F{static get CATEGORY(){return"gracenotes"}static get LEDGER_LINE_OFFSET(){return 2}static get SCALE(){return.66}constructor(e){super(Object.assign(e,{glyph_font_scale:m.DEFAULT_NOTATION_FONT_SCALE*Re.SCALE,stroke_px:Re.LEDGER_LINE_OFFSET})),this.setAttribute("type","GraceNote"),this.slash=e.slash,this.slur=!0,this.buildNoteHeads(),this.width=3}getStemExtension(){if(null!=this.stem_extension_override)return this.stem_extension_override;const e=this.getGlyph();if(e){let t=super.getStemExtension();if(e.stem){const e=this.getStaveNoteScale();t=(E.HEIGHT+t)*e-E.HEIGHT}return t}return 0}getCategory(){return Re.CATEGORY}getStaveNoteScale(){return this.render_options.glyph_font_scale/m.DEFAULT_NOTATION_FONT_SCALE}draw(){super.draw(),this.setRendered();const e=this.stem;if(this.slash&&e){const t=this.getStaveNoteScale(),i=t/.66;let n;const s=this.beam;if(s)s.postFormatted||s.postFormat(),n=this.calcBeamedNotesSlashBBox(8*i,8*i,{stem:6*i,beam:5*i});else{const s=this.getStemDirection(),r=this.getNoteHeadBounds(),o=e.getHeight();let a=this.getAbsoluteX(),l=s===m.Stem.DOWN?r.y_top-o:r.y_bottom-o;const c=s===m.Stem.DOWN?this.glyph.stem_down_extension:this.glyph.stem_up_extension;let h=m.STEM_HEIGHT;h-=h/2.8,h+=c,l+=h*t*s;const u=s===m.Stem.UP?{x1:1,y1:0,x2:13,y2:-9}:{x1:-4,y1:1,x2:13,y2:9};a+=u.x1*i,l+=u.y1*i,n={x1:a,y1:l,x2:a+u.x2*i,y2:l+u.y2*i}}const r=this.context;r.save(),r.setLineWidth(1*i),r.beginPath(),r.moveTo(n.x1,n.y1),r.lineTo(n.x2,n.y2),r.closePath(),r.stroke(),r.restore()}}calcBeamedNotesSlashBBox(e,t,i){const n=this.beam,s=n.slope,r=n.notes[n.notes.length-1]===this?-1:1,o=Math.atan(s*r),a=Math.cos(o)*t,l=Math.sin(o)*t;e*=this.getStemDirection();const c=Math.atan((l-e)/a),h=Math.cos(c)*i.stem*r,u=Math.sin(c)*i.stem,d=Math.cos(c)*i.beam*r,f=Math.sin(c)*i.beam,p=this.getStemX(),m=n.notes[0].getStemX(),g=this.beam.getBeamYToDraw()+(p-m)*s;return{x1:p-h,y1:g+e-u,x2:p+a*r+d,y2:g+l+f}}}class Oe extends Me{static get CATEGORY(){return"gracetabnotes"}constructor(e){super(e,!1),this.setAttribute("type","GraceTabNote"),n.Merge(this.render_options,{y_shift:.3,scale:.6,font:"7.5pt Arial"}),this.updateWidth()}getCategory(){return Oe.CATEGORY}draw(){super.draw(),this.setRendered()}}class De{static get names(){return{standard:"E/5,B/4,G/4,D/4,A/3,E/3",dagdad:"D/5,A/4,G/4,D/4,A/3,D/3",dropd:"E/5,B/4,G/4,D/4,A/3,D/3",eb:"Eb/5,Bb/4,Gb/4,Db/4,Ab/3,Db/3",standardBanjo:"D/5,B/4,G/4,D/4,G/5"}}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"E/5,B/4,G/4,D/4,A/3,E/3,B/2,E/2";this.setTuning(e)}noteToInteger(e){return m.keyProperties(e).int_value}setTuning(e){De.names[e]&&(e=De.names[e]),this.tuningString=e,this.tuningValues=[],this.numStrings=0;const t=e.split(/\s*,\s*/);if(0===t.length)throw new n.RERR("BadArguments","Invalid tuning string: "+e);this.numStrings=t.length;for(let i=0;i<this.numStrings;++i)this.tuningValues[i]=this.noteToInteger(t[i])}getValueForString(e){const t=parseInt(e,10);if(t<1||t>this.numStrings)throw new n.RERR("BadArguments","String number must be between 1 and ".concat(this.numStrings,":").concat(e));return this.tuningValues[t-1]}getValueForFret(e,t){const i=this.getValueForString(t),s=parseInt(e,10);if(s<0)throw new n.RERR("BadArguments","Fret number must be 0 or higher: "+e);return i+s}getNoteForFret(e,t){const i=this.getValueForFret(e,t),n=Math.floor(i/12),s=i%12;return m.integerToNote(s)+"/"+n}}class Be extends c{static get type(){return{CRESC:1,DECRESC:2}}static FormatByTicksAndDraw(e,t,i,s,r,o){const a=t.pixelsPerTick;if(null==a)throw new n.RuntimeError("BadArguments","A valid Formatter must be provide to draw offsets by ticks.");const l=a*o.left_shift_ticks,c=a*o.right_shift_ticks,h={height:o.height,y_shift:o.y_shift,left_shift_px:l,right_shift_px:c};new Be({first_note:i.first_note,last_note:i.last_note},s).setContext(e).setRenderOptions(h).setPosition(r).draw()}constructor(e,t){super(),this.setAttribute("type","StaveHairpin"),this.notes=e,this.hairpin=t,this.position=O.Position.BELOW,this.render_options={height:10,y_shift:0,left_shift_px:0,right_shift_px:0},this.setNotes(e)}setPosition(e){return e!==O.Position.ABOVE&&e!==O.Position.BELOW||(this.position=e),this}setRenderOptions(e){return null!=e.height&&null!=e.y_shift&&null!=e.left_shift_px&&null!=e.right_shift_px&&(this.render_options=e),this}setNotes(e){if(!e.first_note&&!e.last_note)throw new n.RuntimeError("BadArguments","Hairpin needs to have either first_note or last_note set.");return this.first_note=e.first_note,this.last_note=e.last_note,this}renderHairpin(e){const t=this.checkContext();let i=this.render_options.y_shift+20,n=e.first_y;this.position===O.Position.ABOVE&&(i=30-i,n=e.first_y-e.staff_height);const s=this.render_options.left_shift_px,r=this.render_options.right_shift_px;switch(t.beginPath(),this.hairpin){case Be.type.CRESC:t.moveTo(e.last_x+r,n+i),t.lineTo(e.first_x+s,n+this.render_options.height/2+i),t.lineTo(e.last_x+r,n+this.render_options.height+i);break;case Be.type.DECRESC:t.moveTo(e.first_x+s,n+i),t.lineTo(e.last_x+r,n+this.render_options.height/2+i),t.lineTo(e.first_x+s,n+this.render_options.height+i)}t.stroke(),t.closePath()}draw(){this.checkContext(),this.setRendered();const e=this.first_note,t=this.last_note,i=e.getModifierStartXY(this.position,0),n=t.getModifierStartXY(this.position,0);return this.renderHairpin({first_x:i.x,last_x:n.x,first_y:e.getStave().y+e.getStave().height,last_y:t.getStave().y+t.getStave().height,staff_height:e.getStave().height}),!0}}class Fe extends c{static get Position(){return{NEAR_HEAD:1,NEAR_TOP:2}}static get PositionString(){return{nearHead:Fe.Position.NEAR_HEAD,nearTop:Fe.Position.NEAR_TOP}}constructor(e,t,i){super(),this.setAttribute("type","Curve"),this.render_options={spacing:2,thickness:2,x_shift:0,y_shift:10,position:Fe.Position.NEAR_HEAD,position_end:Fe.Position.NEAR_HEAD,invert:!1,cps:[{x:0,y:10},{x:0,y:10}]},n.Merge(this.render_options,i),this.setNotes(e,t)}setNotes(e,t){if(!e&&!t)throw new n.RuntimeError("BadArguments","Curve needs to have either first_note or last_note set.");return this.from=e,this.to=t,this}isPartial(){return!this.from||!this.to}renderCurve(e){const t=this.context,i=this.render_options.cps,n=this.render_options.x_shift,s=this.render_options.y_shift*e.direction,r=e.first_x+n,o=e.first_y+s,a=e.last_x-n,l=e.last_y+s,c=this.render_options.thickness,h=(a-r)/(i.length+2);t.beginPath(),t.moveTo(r,o),t.bezierCurveTo(r+h+i[0].x,o+i[0].y*e.direction,a-h+i[1].x,l+i[1].y*e.direction,a,l),t.bezierCurveTo(a-h+i[1].x,l+(i[1].y+c)*e.direction,r+h+i[0].x,o+(i[0].y+c)*e.direction,r,o),t.stroke(),t.closePath(),t.fill()}draw(){this.checkContext(),this.setRendered();const e=this.from,t=this.to;let i,n,s,r,o,a="baseY",l="baseY";function c(e){return"string"==typeof e?Fe.PositionString[e]:e}const h=c(this.render_options.position),u=c(this.render_options.position_end);return h===Fe.Position.NEAR_TOP&&(a="topY",l="topY"),u===Fe.Position.NEAR_HEAD?l="baseY":u===Fe.Position.NEAR_TOP&&(l="topY"),e?(i=e.getTieRightX(),o=e.getStemDirection(),s=e.getStemExtents()[a]):(i=t.getStave().getTieStartX(),s=t.getStemExtents()[a]),t?(n=t.getTieLeftX(),o=t.getStemDirection(),r=t.getStemExtents()[l]):(n=e.getStave().getTieEndX(),r=e.getStemExtents()[l]),this.renderCurve({first_x:i,last_x:n,first_y:s,last_y:r,direction:o*(!0===this.render_options.invert?-1:1)}),!0}}function Ve(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];je.DEBUG&&n.L("Vex.Flow.TextDynamics",t)}class je extends k{static get GLYPHS(){return{f:{code:"vba",width:12},p:{code:"vbf",width:14},m:{code:"v62",width:17},s:{code:"v4a",width:10},z:{code:"v80",width:12},r:{code:"vb1",width:12}}}constructor(e){super(e),this.setAttribute("type","TextDynamics"),this.sequence=e.text.toLowerCase(),this.line=e.line||0,this.glyphs=[],n.Merge(this.render_options,{glyph_font_size:40}),Ve("New Dynamics Text: ",this.sequence)}setLine(e){return this.line=e,this}preFormat(){let e=0;return this.sequence.split("").forEach((t=>{const i=je.GLYPHS[t];if(!i)throw new n.RERR("Invalid dynamics character: "+t);const s=this.render_options.glyph_font_size,r=new p(i.code,s);this.glyphs.push(r),e+=i.width})),this.setWidth(e),this.preFormatted=!0,this}draw(){this.setRendered();const e=this.getAbsoluteX(),t=this.stave.getYForLine(this.line+-3);Ve("Rendering Dynamics: ",this.sequence);let i=e;this.glyphs.forEach(((e,n)=>{const s=this.sequence[n];e.render(this.context,i,t),i+=je.GLYPHS[s].width}))}}function Ge(e,t,i,n,s,r,o){e.beginPath(),e.moveTo(t,i),e.lineTo(n,s),e.lineTo(r,o),e.lineTo(t,i),e.closePath(),e.fill()}class We extends c{static get TextVerticalPosition(){return{TOP:1,BOTTOM:2}}static get TextJustification(){return{LEFT:1,CENTER:2,RIGHT:3}}constructor(e){super(),this.setAttribute("type","StaveLine"),this.notes=e,this.text="",this.font={family:"Arial",size:10,weight:""},this.render_options={padding_left:4,padding_right:3,line_width:1,line_dash:null,rounded_end:!0,color:null,draw_start_arrow:!1,draw_end_arrow:!1,arrowhead_length:10,arrowhead_angle:Math.PI/8,text_position_vertical:We.TextVerticalPosition.TOP,text_justification:We.TextJustification.CENTER},this.setNotes(e)}setFont(e){return this.font=e,this}setText(e){return this.text=e,this}setNotes(e){if(!e.first_note&&!e.last_note)throw new n.RuntimeError("BadArguments","Notes needs to have either first_note or last_note set.");if(e.first_indices||(e.first_indices=[0]),e.last_indices||(e.last_indices=[0]),e.first_indices.length!==e.last_indices.length)throw new n.RuntimeError("BadArguments","Connected notes must have similar index sizes");return this.first_note=e.first_note,this.first_indices=e.first_indices,this.last_note=e.last_note,this.last_indices=e.last_indices,this}applyLineStyle(){const e=this.checkContext(),t=this.render_options;t.line_dash&&e.setLineDash(t.line_dash),t.line_width&&e.setLineWidth(t.line_width),t.rounded_end?e.setLineCap("round"):e.setLineCap("square")}applyFontStyle(){const e=this.checkContext();this.font&&e.setFont(this.font.family,this.font.size,this.font.weight),this.render_options.color&&(e.setStrokeStyle(this.render_options.color),e.setFillStyle(this.render_options.color))}draw(){const e=this.checkContext();this.setRendered();const t=this.first_note,i=this.last_note,n=this.render_options;let s,r;e.save(),this.applyLineStyle(),this.first_indices.forEach(((o,a)=>{const l=this.last_indices[a];s=t.getModifierStartXY(2,o),r=i.getModifierStartXY(1,l);const c=s.y>r.y;s.x+=t.getMetrics().modRightPx+n.padding_left,r.x-=i.getMetrics().modLeftPx+n.padding_right;const h=t.getGlyph().getWidth();t.getKeyProps()[o].displaced&&1===t.getStemDirection()&&(s.x+=h+n.padding_left),i.getKeyProps()[l].displaced&&-1===i.getStemDirection()&&(r.x-=h+n.padding_right),s.y+=c?-3:1,r.y+=c?2:0,function(e,t,i,n){const s=n.draw_start_arrow&&n.draw_end_arrow,r=t.x,o=t.y,a=i.x,l=i.y,c=Math.sqrt((a-r)*(a-r)+(l-o)*(l-o)),h=(c-n.arrowhead_length/3)/c;let u,d,f,p;n.draw_end_arrow||s?(u=Math.round(r+(a-r)*h),d=Math.round(o+(l-o)*h)):(u=a,d=l),n.draw_start_arrow||s?(f=r+(a-r)*(1-h),p=o+(l-o)*(1-h)):(f=r,p=o),n.color&&(e.setStrokeStyle(n.color),e.setFillStyle(n.color)),e.beginPath(),e.moveTo(f,p),e.lineTo(u,d),e.stroke(),e.closePath();const m=Math.atan2(l-o,a-r),g=Math.abs(n.arrowhead_length/Math.cos(n.arrowhead_angle));let b,v,y,x,S,E;(n.draw_end_arrow||s)&&(b=m+Math.PI+n.arrowhead_angle,y=a+Math.cos(b)*g,x=l+Math.sin(b)*g,v=m+Math.PI-n.arrowhead_angle,S=a+Math.cos(v)*g,E=l+Math.sin(v)*g,Ge(e,y,x,a,l,S,E)),(n.draw_start_arrow||s)&&(b=m+n.arrowhead_angle,y=r+Math.cos(b)*g,x=o+Math.sin(b)*g,v=m-n.arrowhead_angle,S=r+Math.cos(v)*g,E=o+Math.sin(v)*g,Ge(e,y,x,r,o,S,E))}(e,s,r,this.render_options)})),e.restore();const o=e.measureText(this.text).width,a=n.text_justification;let l,c=0;a===We.TextJustification.LEFT?c=s.x:a===We.TextJustification.CENTER?c=(r.x-s.x)/2+s.x-o/2:a===We.TextJustification.RIGHT&&(c=r.x-o);const h=n.text_position_vertical;return h===We.TextVerticalPosition.TOP?l=t.getStave().getYForTopText():h===We.TextVerticalPosition.BOTTOM&&(l=t.getStave().getYForBottomText(m.TEXT_HEIGHT_OFFSET_HACK)),e.save(),this.applyFontStyle(),e.fillText(this.text,c,l),e.restore(),this}}function ze(e,t,i,n,s){const r=Ue.GLYPHS[e];new p(r.code,s).render(t,i+r.x_shift,n+r.y_shift)}class Ue extends c{static get GLYPHS(){return{pedal_depress:{code:"v36",x_shift:-10,y_shift:0},pedal_release:{code:"v5d",x_shift:-2,y_shift:3}}}static get Styles(){return{TEXT:1,BRACKET:2,MIXED:3,MIXED_OPEN_END:4,BRACKET_OPEN_BEGIN:5,BRACKET_OPEN_END:6,BRACKET_OPEN_BOTH:7}}static get StylesString(){return{text:Ue.Styles.TEXT,bracket:Ue.Styles.BRACKET,mixed:Ue.Styles.MIXED,mixed_open_end:Ue.Styles.MIXED_OPEN_END,bracket_open_begin:Ue.Styles.BRACKET_OPEN_BEGIN,bracket_open_end:Ue.Styles.BRACKET_OPEN_END,bracket_open_both:Ue.Styles.BRACKET_OPEN_BOTH}}static createSustain(e){return new Ue(e)}static createSostenuto(e){const t=new Ue(e);return t.setStyle(Ue.Styles.MIXED),t.setCustomText("Sost. Ped."),t}static createUnaCorda(e){const t=new Ue(e);return t.setStyle(Ue.Styles.TEXT),t.setCustomText("una corda","tre corda"),t}constructor(e){super(),this.setAttribute("type","PedalMarking"),this.EndsStave=!1,this.ChangeBegin=!1,this.ChangeEnd=!1,this.notes=e,this.style=Ue.TEXT,this.line=0,this.custom_depress_text="",this.custom_release_text="",this.font={family:"Times New Roman",size:12,weight:"italic bold"},this.render_options={bracket_height:10,text_margin_right:6,bracket_line_width:1,glyph_point_size:40,color:"black"}}setEndStave(e){if(this.endStave=e,this.endStaveAddedWidth=0,this.startMargin=0,this.endMargin=0,Array.isArray(this.endStave.modifiers))for(let t=0;t<this.endStave.modifiers.length;t++){let e=this.endStave.modifiers[t];e&&e.position===fe.Position.END&&e.width&&(this.endStaveAddedWidth+=e.width)}}setCustomText(e,t){return this.custom_depress_text=e||"",this.custom_release_text=t||"",this}setStyle(e){if(e<1&&e>3)throw new n.RERR("InvalidParameter","The style must be one found in PedalMarking.Styles");return this.style=e,this}setLine(e){return this.line=e,this}drawBracketed(){const e=this.context;let t,i,n=!1;const s=this;this.notes.forEach(((r,o,a)=>{n=!n;let l=0;if(r?(l=r.getNoteHeadBeginX(),this.BeginsStave&&(l=r.getStave().getNoteStartX())):l=this.endStave.end_x+this.endStaveAddedWidth,this.EndsStave)n?this.ChangeBegin&&(l=r.getAbsoluteX()):(l=r?this.ChangeEnd?r.getAbsoluteX():r.getStave().end_x+this.endStaveAddedWidth-s.render_options.text_margin_right:this.endStave.end_x+this.endStaveAddedWidth-s.render_options.text_margin_right,this.endMargin=-s.render_options.text_margin_right);else if(r)if(n)this.ChangeBegin&&(l=r.getAbsoluteX());else switch(s.style){case Ue.Styles.BRACKET_OPEN_END:case Ue.Styles.BRACKET_OPEN_BOTH:case Ue.Styles.MIXED_OPEN_END:l=r.getNoteHeadEndX();break;default:this.ChangeEnd?l=r.getAbsoluteX():(l=r.getNoteHeadBeginX()-s.render_options.text_margin_right,this.startMargin=-s.render_options.text_margin_right)}let c=this.endStave;r&&(c=r.getStave());let h=c.getYForBottomText(s.line+3);i&&i>h&&(h=i);const u=a[o+1]===r,d=a[o-1]===r;let f=0;if(n)if(f=d?5:0,s.style!==Ue.Styles.MIXED&&s.style!==Ue.Styles.MIXED_OPEN_END||d)e.beginPath(),s.style===Ue.Styles.BRACKET_OPEN_BEGIN||s.style===Ue.Styles.BRACKET_OPEN_BOTH?e.moveTo(l+f,h):(this.ChangeBegin&&(l+=5),e.moveTo(l,h-s.render_options.bracket_height),this.ChangeBegin&&(l+=5),e.lineTo(l+f,h)),e.stroke(),e.closePath();else if(s.custom_depress_text){const t=e.measureText(s.custom_depress_text).width;e.fillText(s.custom_depress_text,l-t/2,h),f=t/2+s.render_options.text_margin_right}else ze("pedal_depress",e,l,h,s.render_options.glyph_point_size),f=20+s.render_options.text_margin_right;else f=u&&!this.EndsStave?-5:0,e.beginPath(),e.moveTo(t,i),e.lineTo(l+f,h),s.style!==Ue.Styles.BRACKET_OPEN_END&&s.style!==Ue.Styles.MIXED_OPEN_END&&s.style!==Ue.Styles.BRACKET_OPEN_BOTH&&(this.ChangeEnd&&(l+=5),e.lineTo(l,h-s.render_options.bracket_height)),e.stroke(),e.closePath();t=l+f,i=h}))}drawText(){const e=this.context;let t=!1;const i=this,n=i.render_options.glyph_point_size;this.notes.forEach((s=>{if(!s)return;t=!t;const r=s.getStave(),o=s.getAbsoluteX(),a=r.getYForBottomText(i.line+3);let l=0;t?i.custom_depress_text?(l=e.measureText(i.custom_depress_text).width,e.fillText(i.custom_depress_text,o-l/2,a)):ze("pedal_depress",e,o,a,n):i.custom_release_text?(l=e.measureText(i.custom_release_text).width,e.fillText(i.custom_release_text,o-l/2,a)):ze("pedal_release",e,o,a,n)}))}draw(){const e=this.checkContext();this.setRendered(),e.save(),e.setStrokeStyle(this.render_options.color),e.setFillStyle(this.render_options.color),e.setFont(this.font.family,this.font.size,this.font.weight),function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Ue.DEBUG&&n.L("Vex.Flow.PedalMarking",t)}("Rendering Pedal Marking"),this.style===Ue.Styles.BRACKET||this.style===Ue.Styles.MIXED||this.style===Ue.Styles.MIXED_OPEN_END||this.style===Ue.Styles.BRACKET_OPEN_BEGIN||this.style===Ue.Styles.BRACKET_OPEN_END||this.style===Ue.Styles.BRACKET_OPEN_BOTH?(e.setLineWidth(this.render_options.bracket_line_width),this.drawBracketed()):this.style===Ue.Styles.TEXT&&this.drawText(),e.restore()}}class He extends c{static get Positions(){return{TOP:1,BOTTOM:-1}}static get PositionString(){return{top:He.Positions.TOP,bottom:He.Positions.BOTTOM}}constructor(e){let{start:t,stop:i,text:n="",superscript:s="",position:r=He.Positions.TOP}=e;super(),this.setAttribute("type","TextBracket"),this.start=t,this.stop=i,this.text=n,this.superscript=s,this.position="string"==typeof r?He.PositionString[r]:r,this.line=1,this.font={family:"Serif",size:15,weight:"italic"},this.render_options={dashed:!0,dash:[5],color:"black",line_width:1,show_bracket:!0,bracket_height:8,underline_superscript:!0}}applyStyle(e){return e.setFont(this.font.family,this.font.size,this.font.weight),e.setStrokeStyle(this.render_options.color),e.setFillStyle(this.render_options.color),e.setLineWidth(this.render_options.line_width),this}setDashed(e,t){return this.render_options.dashed=e,t&&(this.render_options.dash=t),this}setFont(e){return this.font=s(s({},this.font),e),this}setLine(e){return this.line=e,this}draw(){const e=this.context;this.setRendered();let t=0;switch(this.position){case He.Positions.TOP:t=this.start.getStave().getYForTopText(this.line);break;case He.Positions.BOTTOM:t=this.start.getStave().getYForBottomText(this.line+m.TEXT_HEIGHT_OFFSET_HACK);break;default:throw new n.RERR("InvalidPosition","The position ".concat(this.position," is invalid"))}const i={x:this.start.getAbsoluteX(),y:t},s={x:this.stop.getAbsoluteX(),y:t};!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];He.DEBUG&&n.L("Vex.Flow.TextBracket",t)}("Rendering TextBracket: start:",i,"stop:",s,"y:",t);const r=this.render_options.bracket_height*this.position;e.save(),this.applyStyle(e),e.fillText(this.text,i.x,i.y);let o=e.measureText(this.text).width;o>0||(o=10*this.text.length);let a=e.measureText("M").width;a>0||(a=20);const l=i.y-a/2.5;e.setFont(this.font.family,this.font.size/1.4,this.font.weight),e.fillText(this.superscript,i.x+o+1,l);let c=e.measureText(this.superscript).width;c>0||(c=12,this.superscript.includes("m")&&(c+=5));let h=e.measureText("M").width;h>0||(h=10);let u=i.x,d=l,f=s.x+this.stop.getGlyph().getWidth();this.position===He.Positions.TOP?(u+=o+c+5,d-=h/2.7):this.position===He.Positions.BOTTOM&&(d+=h/2.7,u+=o+2,this.render_options.underline_superscript||(u+=c)),this.render_options.dashed?(f<u+5&&this.position===He.Positions.TOP?f=u+5:f<u+c&&this.position===He.Positions.BOTTOM&&(f=u+c),S.drawDashedLine(e,u,d,f,d,this.render_options.dash),this.render_options.show_bracket&&S.drawDashedLine(e,f,d+1*this.position,f,d+r,this.render_options.dash)):(e.beginPath(),e.moveTo(u,d),e.lineTo(f,d),this.render_options.show_bracket&&e.lineTo(f,d+r),e.stroke(),e.closePath()),e.restore()}}class Xe extends k{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe.type.SINGLE;super({duration:"b"}),this.setAttribute("type","BarNote"),this.metrics={widths:{}};const t=pe.type;this.metrics.widths={[t.SINGLE]:8,[t.DOUBLE]:12,[t.END]:15,[t.REPEAT_BEGIN]:14,[t.REPEAT_END]:14,[t.REPEAT_BOTH]:18,[t.NONE]:0},this.ignore_ticks=!0,this.setType(e)}getType(){return this.type}setType(e){return this.type="string"==typeof e?pe.typeString[e]:e,this.setWidth(this.metrics.widths[this.type]),this}getBoundingBox(){return super.getBoundingBox()}addToModifierContext(){return this}preFormat(){return this.setPreFormatted(!0),this}draw(){if(this.checkContext(),!this.stave)throw new n.RERR("NoStave","Can't draw without a stave.");!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Xe.DEBUG&&n.L("Vex.Flow.BarNote",t)}("Rendering bar line at: ",this.getAbsoluteX());const e=new pe(this.type);e.setX(this.getAbsoluteX()),e.draw(this.stave),this.setRendered()}}class Ye extends R{constructor(e){if(!e)throw new n.RuntimeError("BadArguments","Ghost note must have valid initialization data to identify duration.");let t;if("string"==typeof e)t={duration:e};else{if("object"!=typeof e)throw new n.RuntimeError("BadArguments","Ghost note must have valid initialization data to identify duration.");t=e}super(t),this.setAttribute("type","GhostNote"),this.setWidth(0)}isRest(){return!0}setStave(e){super.setStave(e)}addToModifierContext(){return this}preFormat(){return this.setPreFormatted(!0),this}draw(){if(!this.stave)throw new n.RERR("NoStave","Can't draw without a stave.");this.setRendered();for(let e=0;e<this.modifiers.length;++e){const t=this.modifiers[e];t.setContext(this.context),t.drawWithStyle()}}}class Ke extends O{static get CATEGORY(){return"tremolo"}static get YOFFSETSTEMUP(){return-9}static get YOFFSETSTEMDOWN(){return-21}static get XOFFSETSTEMUP(){return 6}static get XOFFSETSTEMDOWN(){return-2}constructor(e){super(),this.setAttribute("type","Tremolo"),this.num=e,this.note=null,this.index=null,this.position=O.Position.CENTER,this.code="v74",this.y_spacing_scale=1,this.extra_stroke_scale=1,this.y_offset_for_beam=5}getCategory(){return Ke.CATEGORY}draw(){if(this.checkContext(),!this.note||null==this.index)throw new n.RERR("NoAttachedNote","Can't draw Tremolo without a note and index.");this.setRendered();const e=this.note.getStemDirection();this.y_spacing=4*e*this.y_spacing_scale;let t=this.note.getModifierStartXY(this.position,this.index).x,i=this.note.stem.getExtents().topY,s="gracenotes"===this.note.getCategory()?Re.SCALE:1;s*=this.extra_stroke_scale,i+=e<0?Ke.YOFFSETSTEMDOWN*s:Ke.YOFFSETSTEMUP*s,this.note.beam&&(i+=this.y_offset_for_beam*e),this.font={family:"Arial",size:16*s,weight:""},this.render_options={font_scale:35*s,stroke_px:3,stroke_spacing:10*s},t+=e<0?Ke.XOFFSETSTEMDOWN:Ke.XOFFSETSTEMUP;for(let n=0;n<this.num;++n)p.renderGlyph(this.context,t,i,this.render_options.font_scale,this.code),i+=this.y_spacing}}class qe extends k{constructor(e){super(e),this.setAttribute("type","Crescendo"),this.decrescendo=!1,this.line=e.line||0,this.height=15,n.Merge(this.render_options,{extend_left:0,extend_right:0,y_shift:0})}setLine(e){return this.line=e,this}setHeight(e){return this.height=e,this}setDecrescendo(e){return this.decrescendo=e,this}preFormat(){return this.preFormatted=!0,this}draw(){this.checkContext(),this.setRendered();const e=this.getTickContext(),t=$.getNextContext(e),i=this.getAbsoluteX(),s=t?t.getX():this.stave.x+this.stave.width,r=this.stave.getYForLine(this.line+-3)+1;!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];qe.DEBUG&&n.L("Vex.Flow.Crescendo",t)}("Drawing ",this.decrescendo?"decrescendo ":"crescendo ",this.height,"x",i-s),function(e,t){const i=t.begin_x,n=t.end_x,s=t.y,r=t.height/2;e.beginPath(),t.reverse?(e.moveTo(i,s-r),e.lineTo(n,s),e.lineTo(i,s+r)):(e.moveTo(n,s-r),e.lineTo(i,s),e.lineTo(n,s+r)),e.stroke(),e.closePath()}(this.context,{begin_x:i-this.render_options.extend_left,end_x:s+this.render_options.extend_right,y:r+this.render_options.y_shift,height:this.height,reverse:this.decrescendo})}}const $e=n.MakeException("ParserError");function Ze(e){return void 0!==e.matchedString?e.matchedString:e.results?Ze(e.results):1===e.length?Ze(e[0]):0===e.length?null:e.map(Ze)}class Qe{constructor(e){this.grammar=e}parse(e){this.line=e,this.pos=0,this.errorPos=-1;const t=this.expect(this.grammar.begin());return t.errorPos=this.errorPos,t}matchFail(e){-1===this.errorPos&&(this.errorPos=this.pos),this.pos=e}matchSuccess(){this.errorPos=-1}matchToken(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?new RegExp("^(("+e+"))"):new RegExp("^(("+e+")\\s*)"),i=this.line.slice(this.pos).match(t);return null!==i?{success:!0,matchedString:i[2],incrementPos:i[1].length,pos:this.pos}:{success:!1,pos:this.pos}}expectOne(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=[],n=this.pos;let s=!0,r=!1;t=!0===t||!0===e.maybe;for(let l=0;l<e.expect.length;l++){const t=e.expect[l],n=this.pos,o=this.expect(t);if(o.success){if(i.push(o),r=!0,e.or)break}else if(s=!1,!e.or){this.pos=n;break}}const o=e.or&&r||s,a=o||!0===t;return t&&!o&&(this.pos=n),a?this.matchSuccess():this.matchFail(n),{success:a,results:i,numMatches:o?1:0}}expectOneOrMore(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=[],n=this.pos;let s=0,r=!0;do{const t=this.expectOne(e);t.success?(s++,i.push(t.results)):r=!1}while(r);const o=s>0||!0===t;return!t||s>0||(this.pos=n),o?this.matchSuccess():this.matchFail(n),{success:o,results:i,numMatches:s}}expectZeroOrMore(e){return this.expectOneOrMore(e,!0)}expect(e){let t;if(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Qe.DEBUG&&n.L("Vex.Flow.Parser",t)}("Evaluating rules:",e),!e)throw new $e("Invalid Rule: "+e,e);const i=e.bind(this.grammar)();if(i.token)t=this.matchToken(i.token,!0===i.noSpace),t.success&&(this.pos+=t.incrementPos);else{if(!i.expect)throw new $e("Bad grammar! No `token` or `expect` property",i);t=i.oneOrMore?this.expectOneOrMore(i):i.zeroOrMore?this.expectZeroOrMore(i):this.expectOne(i)}return t.matches=[],t.results&&t.results.forEach((e=>t.matches.push(Ze(e)))),i.run&&t.success&&i.run(t),t}}function Je(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];rt.DEBUG&&n.L("Vex.Flow.EasyScore",t)}const et=n.MakeException("EasyScoreError");class tt{constructor(e){this.builder=e}begin(){return this.LINE}LINE(){return{expect:[this.PIECE,this.PIECES,this.EOL]}}PIECE(){return{expect:[this.CHORDORNOTE,this.PARAMS],run:()=>this.builder.commitPiece()}}PIECES(){return{expect:[this.COMMA,this.PIECE],zeroOrMore:!0}}PARAMS(){return{expect:[this.DURATION,this.TYPE,this.DOTS,this.OPTS]}}CHORDORNOTE(){return{expect:[this.CHORD,this.SINGLENOTE],or:!0}}CHORD(){return{expect:[this.LPAREN,this.NOTES,this.RPAREN],run:e=>this.builder.addChord(e.matches[1])}}NOTES(){return{expect:[this.NOTE],oneOrMore:!0}}NOTE(){return{expect:[this.NOTENAME,this.ACCIDENTAL,this.OCTAVE]}}SINGLENOTE(){return{expect:[this.NOTENAME,this.ACCIDENTAL,this.OCTAVE],run:e=>this.builder.addSingleNote(e.matches[0],e.matches[1],e.matches[2])}}ACCIDENTAL(){return{expect:[this.ACCIDENTALS],maybe:!0}}DOTS(){return{expect:[this.DOT],zeroOrMore:!0,run:e=>this.builder.setNoteDots(e.matches[0])}}TYPE(){return{expect:[this.SLASH,this.MAYBESLASH,this.TYPES],maybe:!0,run:e=>this.builder.setNoteType(e.matches[2])}}DURATION(){return{expect:[this.SLASH,this.DURATIONS],maybe:!0,run:e=>this.builder.setNoteDuration(e.matches[1])}}OPTS(){return{expect:[this.LBRACKET,this.KEYVAL,this.KEYVALS,this.RBRACKET],maybe:!0}}KEYVALS(){return{expect:[this.COMMA,this.KEYVAL],zeroOrMore:!0}}KEYVAL(){return{expect:[this.KEY,this.EQUALS,this.VAL],run:e=>this.builder.addNoteOption(e.matches[0],e.matches[2].slice(1,-1))}}VAL(){return{expect:[this.SVAL,this.DVAL],or:!0}}KEY(){return{token:"[a-zA-Z][a-zA-Z0-9]*"}}DVAL(){return{token:'["][^"]*["]'}}SVAL(){return{token:"['][^']*[']"}}NOTENAME(){return{token:"[a-gA-G]"}}OCTAVE(){return{token:"[0-9]+"}}ACCIDENTALS(){return{token:"bbs|bb|bss|bs|b|db|d|##|#|n|\\+\\+-|\\+-|\\+\\+|\\+|k|o"}}DURATIONS(){return{token:"[0-9whq]+"}}TYPES(){return{token:"[rRsSxX]"}}LPAREN(){return{token:"[(]"}}RPAREN(){return{token:"[)]"}}COMMA(){return{token:"[,]"}}DOT(){return{token:"[.]"}}SLASH(){return{token:"[/]"}}MAYBESLASH(){return{token:"[/]?"}}EQUALS(){return{token:"[=]"}}LBRACKET(){return{token:"\\["}}RBRACKET(){return{token:"\\]"}}EOL(){return{token:"$"}}}class it{constructor(e){this.factory=e,this.commitHooks=[],this.reset()}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={stem:"auto",clef:"treble"},this.elements={notes:[],accidentals:[]},this.rollingDuration="8",this.resetPiece(),Object.assign(this.options,e)}getFactory(){return this.factory}getElements(){return this.elements}addCommitHook(e){this.commitHooks.push(e)}resetPiece(){Je("resetPiece"),this.piece={chord:[],duration:this.rollingDuration,dots:0,type:void 0,options:{}}}setNoteDots(e){Je("setNoteDots:",e),e&&(this.piece.dots=e.length)}setNoteDuration(e){Je("setNoteDuration:",e),this.rollingDuration=this.piece.duration=e||this.rollingDuration}setNoteType(e){Je("setNoteType:",e),e&&(this.piece.type=e)}addNoteOption(e,t){Je("addNoteOption: key:",e,"value:",t),this.piece.options[e]=t}addNote(e,t,i){Je("addNote:",e,t,i),this.piece.chord.push({key:e,accid:t,octave:i})}addSingleNote(e,t,i){Je("addSingleNote:",e,t,i),this.addNote(e,t,i)}addChord(e){Je("startChord"),"object"!=typeof e[0]?this.addSingleNote(e[0]):e.forEach((e=>{e&&this.addNote(...e)})),Je("endChord")}commitPiece(){Je("commitPiece");const{factory:e}=this;if(!e)return;const t=s(s({},this.options),this.piece.options),{stem:i,clef:n}=t,r="auto"===i.toLowerCase(),o=r||"up"!==i.toLowerCase()?F.STEM_DOWN:F.STEM_UP,{chord:a,duration:l,dots:c,type:h}=this.piece,u=a.map((e=>e.key+"/"+e.octave)),d=e.StaveNote({keys:u,duration:l,dots:c,type:h,clef:n,auto_stem:r});r||d.setStemDirection(o);const f=a.map((e=>e.accid||null));f.forEach(((t,i)=>{t&&d.addAccidental(i,e.Accidental({type:t}))}));for(let s=0;s<c;s++)d.addDotToAll();this.commitHooks.forEach((e=>e(t,d,this))),this.elements.notes.push(d),this.elements.accidentals.concat(f),this.resetPiece()}}function nt(e,t){let{id:i}=e;void 0!==i&&t.setAttribute("id",i)}function st(e,t){e.class&&e.class.split(/\s*,\s*/).forEach((e=>t.addClass(e)))}class rt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setOptions(e),this.defaults={clef:"treble",time:"4/4",stem:"auto"}}set(e){return Object.assign(this.defaults,e),this}setOptions(e){return this.options=s({factory:null,builder:null,commitHooks:[nt,st,ne.easyScoreHook],throwOnError:!1},e),this.factory=this.options.factory,this.builder=this.options.builder||new it(this.factory),this.grammar=new tt(this.builder),this.parser=new Qe(this.grammar),this.options.commitHooks.forEach((e=>this.addCommitHook(e))),this}setContext(e){return this.factory&&this.factory.setContext(e),this}parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.builder.reset(t);const i=this.parser.parse(e);if(!i.success&&this.options.throwOnError)throw new et("Error parsing line: "+e,i);return i}beam(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.factory.Beam({notes:e,options:t}),e}tuplet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.factory.Tuplet({notes:e,options:t}),e}notes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=s({clef:this.defaults.clef,stem:this.defaults.stem},t),this.parse(e,t),this.builder.getElements().notes}voice(e,t){return t=s({time:this.defaults.time},t),this.factory.Voice(t).addTickables(e)}addCommitHook(e){return this.builder.addCommitHook(e)}}const ot=n.MakeException("FactoryError");function at(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const i=t.options;return(e=Object.assign(t,e)).options=Object.assign(i,e.options),e}class lt{constructor(e){!function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];lt.DEBUG&&n.L("Vex.Flow.Factory",t)}("New factory: ",e);const t={stave:{space:10},renderer:{context:null,elementId:"",backend:S.Backends.SVG,width:500,height:200,background:"#FFF"},font:{face:"Arial",point:10,style:""}};this.options=t,this.setOptions(e)}static newFromElementId(e){return new lt({renderer:{elementId:e,width:arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,height:arguments.length>2&&void 0!==arguments[2]?arguments[2]:200}})}reset(){this.renderQ=[],this.systems=[],this.staves=[],this.voices=[],this.stave=null}getOptions(){return this.options}setOptions(e){for(const t of["stave","renderer","font"])Object.assign(this.options[t],e[t]);(null!==this.options.renderer.elementId||this.options.renderer.context)&&this.initRenderer(),this.reset()}initRenderer(){const{elementId:e,backend:t,width:i,height:n,background:s}=this.options.renderer;if(""===e)throw new ot("HTML DOM element not set in Factory");this.context=S.buildContext(e,t,i,n,s)}getContext(){return this.context}setContext(e){return this.context=e,this}getStave(){return this.stave}getVoices(){return this.voices}space(e){return this.options.stave.space*e}Stave(e){e=at(e,{x:0,y:0,width:this.options.renderer.width-this.space(1),options:{spacing_between_lines_px:this.options.stave.space}});const t=new Te(e.x,e.y,e.width,e.options);return this.staves.push(t),t.setContext(this.context),this.stave=t,t}TabStave(e){e=at(e,{x:0,y:0,width:this.options.renderer.width-this.space(1),options:{spacing_between_lines_px:1.3*this.options.stave.space}});const t=new _e(e.x,e.y,e.width,e.options);return this.staves.push(t),t.setContext(this.context),this.stave=t,t}StaveNote(e){const t=new F(e);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}GhostNote(e){const t=new Ye(e);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}TextNote(e){const t=new ve(e);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}BarNote(e){e=at(e,{type:"single",options:{}});const t=new Xe(e.type);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}ClefNote(e){e=at(e,{type:"treble",options:{size:"default"}});const t=new Ne(e.type,e.options.size,e.options.annotation);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}TimeSigNote(e){e=at(e,{time:"4/4",options:{}});const t=new ke(e.time);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}KeySigNote(e){const t=new Le(e.key,e.cancelKey,e.alterKey);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}TabNote(e){const t=new Me(e);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}GraceNote(e){const t=new Re(e);return this.stave&&t.setStave(this.stave),t.setContext(this.context),t}GraceNoteGroup(e){const t=new Y(e.notes,e.slur);return t.setContext(this.context),t}Accidental(e){e=at(e,{type:null,options:{}});const t=new z(e.type);return t.setContext(this.context),t}Annotation(e){e=at(e,{text:"p",vJustify:"below",hJustify:"center",fontFamily:"Times",fontSize:14,fontWeight:"bold italic",options:{}});const t=new re(e.text);return t.setJustification(e.hJustify),t.setVerticalJustification(e.vJustify),t.setFont(e.fontFamily,e.fontSize,e.fontWeight),t.setContext(this.context),t}Articulation(e){e=at(e,{type:"a.",position:"above",options:{}});const t=new ne(e.type);return t.setPosition(e.position),t.setContext(this.context),t}TextDynamics(e){e=at(e,{text:"p",duration:"q",dots:0,line:0,options:{}});const t=new je({text:e.text,line:e.line,duration:e.duration,dots:e.dots});return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}Fingering(e){e=at(e,{number:"0",position:"left",options:{}});const t=new V(e.number);return t.setPosition(e.position),t.setContext(this.context),t}StringNumber(e){e=at(e,{number:"0",position:"left",options:{}});const t=new q(e.number);return t.setPosition(e.position),t.setContext(this.context),t}TickContext(){return(new $).setContext(this.context)}ModifierContext(){return new ce}MultiMeasureRest(e){const t=new Ae(e.number_of_measures,e);return t.setContext(this.context),this.renderQ.push(t),t}Voice(e){e=at(e,{time:"4/4",options:{}});const t=new C(e.time);return this.voices.push(t),t}StaveConnector(e){e=at(e,{top_stave:null,bottom_stave:null,type:"double",options:{}});const t=new N(e.top_stave,e.bottom_stave);return t.setType(e.type).setContext(this.context),this.renderQ.push(t),t}Formatter(){return new de}Tuplet(e){e=at(e,{notes:[],options:{}});const t=new w(e.notes,e.options).setContext(this.context);return this.renderQ.push(t),t}Beam(e){e=at(e,{notes:[],options:{autoStem:!1,secondaryBeamBreaks:[]}});const t=new P(e.notes,e.options.autoStem).setContext(this.context);return t.breakSecondaryAt(e.options.secondaryBeamBreaks),this.renderQ.push(t),t}Curve(e){e=at(e,{from:null,to:null,options:{}});const t=new Fe(e.from,e.to,e.options).setContext(this.context);return this.renderQ.push(t),t}StaveTie(e){e=at(e,{from:null,to:null,first_indices:[0],last_indices:[0],text:null,options:{direction:void 0}});const t=new H({first_note:e.from,last_note:e.to,first_indices:e.first_indices,last_indices:e.last_indices},e.text);return e.options.direction&&t.setDirection(e.options.direction),t.setContext(this.context),this.renderQ.push(t),t}StaveLine(e){e=at(e,{from:null,to:null,first_indices:[0],last_indices:[0],options:{}});const t=new We({first_note:e.from,last_note:e.to,first_indices:e.first_indices,last_indices:e.last_indices});return e.options.text&&t.setText(e.options.text),e.options.font&&t.setFont(e.options.font),t.setContext(this.context),this.renderQ.push(t),t}VibratoBracket(e){e=at(e,{from:null,to:null,options:{harsh:!1}});const t=new Pe({start:e.from,stop:e.to});return e.options.line&&t.setLine(e.options.line),e.options.harsh&&t.setHarsh(e.options.harsh),t.setContext(this.context),this.renderQ.push(t),t}TextBracket(e){e=at(e,{from:null,to:null,text:"",options:{superscript:"",position:1}});const t=new He({start:e.from,stop:e.to,text:e.text,superscript:e.options.superscript,position:e.options.position});return e.options.line&&t.setLine(e.options.line),e.options.font&&t.setFont(e.options.font),t.setContext(this.context),this.renderQ.push(t),t}System(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.factory=this;const t=new ht(e).setContext(this.context);return this.systems.push(t),t}EasyScore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.factory=this,new rt(e)}PedalMarking(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=at(e,{notes:[],options:{style:"mixed"}});const t=new Ue(e.notes);return t.setStyle(Ue.StylesString[e.options.style]),t.setContext(this.context),this.renderQ.push(t),t}NoteSubGroup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=at(e,{notes:[],options:{}});const t=new U(e.notes);return t.setContext(this.context),t}draw(){this.systems.forEach((e=>e.setContext(this.context).format())),this.staves.forEach((e=>e.setContext(this.context).draw())),this.voices.forEach((e=>e.setContext(this.context).draw())),this.renderQ.forEach((e=>{e.isRendered()||e.setContext(this.context).draw()})),this.systems.forEach((e=>e.setContext(this.context).draw())),this.reset()}}function ct(e,t){const i=t.options;return(e=Object.assign(t,e)).options=Object.assign(i,e.options),e}class ht extends c{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.setAttribute("type","System"),this.setOptions(e),this.parts=[]}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=ct(e,{x:10,y:10,width:500,connector:null,spaceBetweenStaves:12,factory:null,debugFormatter:!1,formatIterations:0,options:{}}),this.factory=this.options.factory||new lt({renderer:{el:null}})}setContext(e){return super.setContext(e),this.factory.setContext(e),this}addConnector(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"double";return this.connector=this.factory.StaveConnector({top_stave:this.parts[0].stave,bottom_stave:this.parts[this.parts.length-1].stave,type:e}),this.connector}addStave(e){return(e=ct(e,{stave:null,voices:[],spaceAbove:0,spaceBelow:0,debugNoteMetrics:!1,options:{left_bar:!1}})).stave||(e.stave=this.factory.Stave({x:this.options.x,y:this.options.y,width:this.options.width,options:e.options})),e.voices.forEach((t=>t.setContext(this.context).setStave(e.stave).getTickables().forEach((t=>t.setStave(e.stave))))),this.parts.push(e),e.stave}format(){const e=new de;this.formatter=e;let t=this.options.y,i=0,n=[];const s=[];this.parts.forEach((r=>{t+=r.stave.space(r.spaceAbove),r.stave.setY(t),e.joinVoices(r.voices),t+=r.stave.space(r.spaceBelow),t+=r.stave.space(this.options.spaceBetweenStaves),r.debugNoteMetrics&&(s.push({y:t,voice:r.voices[0]}),t+=15),n=n.concat(r.voices),i=Math.max(i,r.stave.getNoteStartX())})),this.parts.forEach((e=>e.stave.setNoteStartX(i)));const r=this.options.width-(i-this.options.x)-k.STAVEPADDING;e.format(n,r);for(let o=0;o<this.options.formatIterations;o++)e.tune();this.startX=i,this.debugNoteMetricsYs=s,this.lastY=t}draw(){const e=this.checkContext();this.setRendered(),this.options.debugFormatter&&de.plotDebugging(e,this.formatter,this.startX,this.options.y,this.lastY),this.debugNoteMetricsYs.forEach((t=>{t.voice.getTickables().forEach((i=>k.plotMetrics(e,i,t.y)))}))}}(n.Flow=m).Element=c,n.Flow.Fraction=r,n.Flow.Renderer=S,n.Flow.Formatter=de,n.Flow.Music=j,n.Flow.Glyph=p,n.Flow.Stave=Te,n.Flow.StaveNote=F,n.Flow.StaveModifier=fe,n.Flow.StaveTempo=be,n.Flow.Voice=C,n.Flow.Accidental=z,n.Flow.Beam=P,n.Flow.StaveTie=H,n.Flow.TabStave=_e,n.Flow.TabNote=Me,n.Flow.Bend=oe,n.Flow.Vibrato=ae,n.Flow.VibratoBracket=Pe,n.Flow.Note=k,n.Flow.ModifierContext=ce,n.Flow.MultiMeasureRest=Ae,n.Flow.TickContext=$,n.Flow.Articulation=ne,n.Flow.Annotation=re,n.Flow.Barline=pe,n.Flow.NoteHead=I,n.Flow.StaveConnector=N,n.Flow.ClefNote=Ne,n.Flow.KeySignature=Se,n.Flow.KeySigNote=Le,n.Flow.TimeSignature=Ee,n.Flow.TimeSigNote=ke,n.Flow.Stem=E,n.Flow.TabTie=X,n.Flow.Clef=xe,n.Flow.Dot=D,n.Flow.Modifier=O,n.Flow.TabSlide=Ie,n.Flow.Tuplet=w,n.Flow.GraceNote=Re,n.Flow.GraceTabNote=Oe,n.Flow.Tuning=De,n.Flow.KeyManager=class{constructor(e){this.music=new j,this.setKey(e)}setKey(e){return this.key=e,this.reset(),this}getKey(){return this.key}reset(){if(this.keyParts=this.music.getKeyParts(this.key),this.keyString=this.keyParts.root,this.keyParts.accidental&&(this.keyString+=this.keyParts.accidental),!j.scaleTypes[this.keyParts.type])throw new n.RERR("BadArguments","Unsupported key type: ".concat(this.key));this.scale=this.music.getScaleTones(this.music.getNoteValue(this.keyString),j.scaleTypes[this.keyParts.type]),this.scaleMap={},this.scaleMapByValue={},this.originalScaleMapByValue={};const e=j.root_indices[this.keyParts.root];for(let t=0;t<j.roots.length;++t){const i=(e+t)%j.roots.length,n=j.roots[i],s=this.music.getRelativeNoteName(n,this.scale[t]);this.scaleMap[n]=s,this.scaleMapByValue[this.scale[t]]=s,this.originalScaleMapByValue[this.scale[t]]=s}return this}getAccidental(e){const t=this.music.getKeyParts(e).root,i=this.music.getNoteParts(this.scaleMap[t]);return{note:this.scaleMap[t],accidental:i.accidental}}selectNote(e){e=e.toLowerCase();const t=this.music.getNoteParts(e),i=this.scaleMap[t.root],n=this.music.getNoteParts(i);if(i===e)return{note:i,accidental:t.accidental,change:!1};const s=this.scaleMapByValue[this.music.getNoteValue(e)];if(null!=s)return{note:s,accidental:this.music.getNoteParts(s).accidental,change:!1};const r=this.originalScaleMapByValue[this.music.getNoteValue(e)];return null!=r?(this.scaleMap[n.root]=r,delete this.scaleMapByValue[this.music.getNoteValue(i)],this.scaleMapByValue[this.music.getNoteValue(e)]=r,{note:r,accidental:this.music.getNoteParts(r).accidental,change:!0}):n.root===e?(delete this.scaleMapByValue[this.music.getNoteValue(this.scaleMap[t.root])],this.scaleMapByValue[this.music.getNoteValue(n.root)]=n.root,this.scaleMap[n.root]=n.root,{note:n.root,accidental:null,change:!0}):(delete this.scaleMapByValue[this.music.getNoteValue(this.scaleMap[t.root])],this.scaleMapByValue[this.music.getNoteValue(e)]=e,delete this.scaleMap[n.root],this.scaleMap[n.root]=e,{note:e,accidental:t.accidental,change:!0})}},n.Flow.StaveHairpin=Be,n.Flow.BoundingBox=u,n.Flow.Stroke=K,n.Flow.TextNote=ve,n.Flow.Curve=Fe,n.Flow.TextDynamics=je,n.Flow.StaveLine=We,n.Flow.Ornament=se,n.Flow.PedalMarking=Ue,n.Flow.TextBracket=He,n.Flow.FretHandFinger=V,n.Flow.Repetition=me,n.Flow.BarNote=Xe,n.Flow.GhostNote=Ye,n.Flow.NoteSubGroup=U,n.Flow.GraceNoteGroup=Y,n.Flow.Tremolo=Ke,n.Flow.StringNumber=q,n.Flow.Crescendo=qe,n.Flow.Volta=we,n.Flow.Font=d,n.Flow.System=ht,n.Flow.Factory=lt,n.Flow.Parser=Qe,n.Flow.EasyScore=rt,n.Flow.Registry=l;const ut=n},3236:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalSourceStaffEntryContainer=void 0;const n=i(2561);t.VerticalSourceStaffEntryContainer=class{constructor(e,t,i){this.staffEntries=[],this.comments=[],this.timestamp=t,this.staffEntries=new Array(i),this.parentMeasure=e}$get$(e){return this.staffEntries[e]}$set$(e,t){this.staffEntries[e]=t}get Timestamp(){return this.timestamp}set Timestamp(e){this.timestamp=e}get StaffEntries(){return this.staffEntries}set StaffEntries(e){this.staffEntries=e}get Comments(){return this.comments}set Comments(e){this.comments=e}get ParentMeasure(){return this.parentMeasure}set ParentMeasure(e){this.parentMeasure=e}getAbsoluteTimestamp(){return n.Fraction.plus(this.timestamp,this.parentMeasure.AbsoluteTimestamp)}}},3253:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pedal=void 0,t.Pedal=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.ChangeEnd=!1,this.ChangeBegin=!1,this.EndsStave=!1,this.BeginsStave=!1,this.line=e,this.sign=t}get IsLine(){return this.line}get IsSign(){return this.sign}}},3263:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4713);t.arrays=n;var s=i(2909);t.Bag=s.default;var r=i(9924);t.BSTree=r.default;var o=i(4041);t.BSTreeKV=o.default;var a=i(6119);t.Dictionary=a.default;var l=i(4589);t.Heap=l.default;var c=i(1846);t.LinkedDictionary=c.default;var h=i(4538);t.LinkedList=h.default;var u=i(2338);t.MultiDictionary=u.default;var d=i(9281);t.FactoryDictionary=d.default;var f=i(9281);t.DefaultDictionary=f.default;var p=i(3288);t.Queue=p.default;var m=i(8464);t.PriorityQueue=m.default;var g=i(2091);t.Set=g.default;var b=i(2083);t.Stack=b.default;var v=i(2002);t.MultiRootTree=v.default;var y=i(4831);t.util=y},3288:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4538),s=function(){function e(){this.list=new n.default}return e.prototype.enqueue=function(e){return this.list.add(e)},e.prototype.add=function(e){return this.list.add(e)},e.prototype.dequeue=function(){if(0!==this.list.size()){var e=this.list.first();return this.list.removeElementAtIndex(0),e}},e.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},e.prototype.size=function(){return this.list.size()},e.prototype.contains=function(e,t){return this.list.contains(e,t)},e.prototype.isEmpty=function(){return this.list.size()<=0},e.prototype.clear=function(){this.list.clear()},e.prototype.forEach=function(e){this.list.forEach(e)},e}();t.default=s},3361:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalInstantaneousTempoExpression=void 0;const n=i(9490);class s extends n.AbstractGraphicalExpression{constructor(e,t){super(t.PositionAndShape.Parent.DataObject,e,e.parentMeasure),this.label=t}get GraphicalLabel(){return this.label}updateSkyBottomLine(){}}t.GraphicalInstantaneousTempoExpression=s},3430:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalNote=void 0;const n=i(8233),s=i(7741),r=i(7921),o=i(6438);class a extends s.GraphicalObject{constructor(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;super(),this.DrawnAccidental=n.AccidentalEnum.NONE,this.lineShift=0,this.sourceNote=e,this.parentVoiceEntry=t,this.PositionAndShape=new o.BoundingBox(this,t.PositionAndShape),this.graphicalNoteLength=s||e.Length,this.numberOfDots=this.calculateNumberOfNeededDots(this.graphicalNoteLength),this.rules=i,this.rules.addGraphicalNoteToNoteMap(e,this)}Transpose(e,t,i,n){let s=this.sourceNote.Pitch;return r.MusicSheetCalculator.transposeCalculator&&(s=r.MusicSheetCalculator.transposeCalculator.transposePitch(this.sourceNote.Pitch,e,i)),s}calculateNumberOfNeededDots(e){return this.sourceNote&&this.sourceNote.NoteTuplet?0:e.calculateNumberOfNeededDots()}get ParentMusicPage(){var e;return null===(e=this.parentVoiceEntry.parentStaffEntry.parentMeasure.ParentMusicSystem)||void 0===e?void 0:e.Parent}static FromNote(e,t){return t.NoteToGraphicalNoteMap.getValue(e.NoteToGraphicalNoteObjectId)}ToStringShort(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===(e=this.sourceNote)||void 0===e?void 0:e.ToStringShort(t)}get ToStringShortGet(){return this.ToStringShort(0)}getLyricsSVGs(){const e=[];for(const n of null===(t=this.parentVoiceEntry)||void 0===t?void 0:t.parentStaffEntry.LyricsEntries){var t,i;e.push(null===(i=n.GraphicalLabel)||void 0===i?void 0:i.SVGNode)}return e}setColor(e,t){}setVisible(e){}}t.GraphicalNote=a},3457:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceMusicPart=void 0;const n=i(7551),s=i(2561);class r extends n.PartListEntry{constructor(e,t,i){super(e),this.musicSheet=e,this.startIndex=t,this.endIndex=i}get MeasuresCount(){return this.endIndex-this.startIndex+1}get StartIndex(){return this.startIndex}get EndIndex(){return this.endIndex}get ParentRepetition(){return this.parentRepetition}set ParentRepetition(e){this.parentRepetition=e}get AbsoluteTimestamp(){return s.Fraction.createFromFraction(this.musicSheet.SourceMeasures[this.startIndex].AbsoluteTimestamp)}setStartIndex(e){this.startIndex=e}setEndIndex(e){this.endIndex=e}}t.SourceMusicPart=r},3508:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLSkyBottomLineBatchCalculatorBackend=void 0;const s=i(5479),r=i(3667),o=n(i(5340)),a=n(i(5166)),l=n(i(3065)),c=i(813);function h(e,t,i){const n=e.createShader(t);if(!n)throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: Could not create a WebGL shader"),new Error("Could not create a WebGL shader");if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw l.default.warn("Shader compilation failed\n"+e.getShaderInfoLog(n)),e.deleteShader(n),new Error("WebGL shader compilation failed");return n}class u extends r.SkyBottomLineBatchCalculatorBackend{constructor(e,t){super(e,t)}getPreferredRenderingConfiguration(e,t){const i=Math.min(4096,function(){const e=document.createElement("canvas").getContext("webgl");return e.getParameter(e.MAX_TEXTURE_SIZE)}()),n=Math.ceil(e);return{elementWidth:n,numColumns:Math.min(5,Math.floor(i/n)),numRows:Math.min(5,Math.floor(i/t))}}onInitialize(e){const{elementWidth:t,elementHeight:i,numColumns:n,numRows:s}=e,r=document.createElement("canvas");r.width=t*n,r.height=s;const u=r.getContext("webgl");if(!u)throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: No WebGL support"),new Error("No WebGL support");this.gl=u;const d=function(e,t,i){const n=e.createProgram();if(!n)throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: Could not create a WebGL program"),new Error("Could not create a WebGL program");if(e.attachShader(n,t),e.attachShader(n,i),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS))throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: WebGL program link failed\n"+e.getProgramInfoLog(n)),e.deleteProgram(n),new Error("WebGL program link failed");return n}(u,h(u,u.VERTEX_SHADER,o.default),h(u,u.FRAGMENT_SHADER,function(e,t){let i=e;for(const[n,s]of Object.entries(t)){const e=new RegExp("#define ".concat(n," .*"));i=i.replace(e,"#define ".concat(n," ").concat(s))}return i}(a.default,{NUM_ROWS:s,ELEMENT_HEIGHT:i})));!function(e,t){const i=e.createBuffer();if(!i)throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: WebGL buffer creation failed"),new Error("WebGL buffer creation failed");e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array(c.CollectionUtil.flat([[-1,-1],[1,-1],[1,1],[-1,-1],[1,1],[-1,1]])),e.STATIC_DRAW),e.useProgram(t);const n=e.getAttribLocation(t,"a_position");e.enableVertexAttribArray(n),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0)}(u,d),this.texture=function(e,t){const i=e.createTexture();if(!i)throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: WebGL texture creation failed"),new Error("WebGL texture creation failed");e.activeTexture(e.TEXTURE0+0),e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);const n=e.getUniformLocation(t,"u_image");if(!n)throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: WebGL invalid uniform name"),new Error("WebGL invalid uniform name");return e.uniform1i(n,0),i}(u,d)}calculateFromCanvas(e,t,i,n,r){const o=this.gl,{elementWidth:a,elementHeight:l,numColumns:c}=r;o.viewport(0,0,o.canvas.width,o.canvas.height),o.bindTexture(o.TEXTURE_2D,this.texture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,e),o.drawArrays(o.TRIANGLES,0,6);const h=new Uint8Array(o.canvas.width*o.canvas.height*4);o.readPixels(0,0,o.canvas.width,o.canvas.height,o.RGBA,o.UNSIGNED_BYTE,h);const u=[];for(let d=0;d<i.length;++d){const e=i[d],t=Math.floor(e.getVFStave().getWidth()),r=Math.max(Math.ceil(e.PositionAndShape.Size.width*n),1),o=d%c*a*4,f=Math.floor(d/c)*a*c*4,p=new Array(Math.max(r,t)).fill(0),m=new Array(Math.max(r,t)).fill(0);for(let i=0;i<t;++i){const e=h[4*i+o+f],t=h[4*i+o+f+1],n=h[4*i+o+f+2],s=e+256*Math.floor(n/16),r=t+n%16*256;p[i]=s,m[i]=r}const g=Math.max(...p),b=Math.min(...m);for(let i=0;i<t;++i)p[i]=0===p[i]?g:p[i],m[i]=m[i]===l?b:m[i];u.push(new s.SkyBottomLineCalculationResult(p,m))}return u}}t.WebGLSkyBottomLineBatchCalculatorBackend=u},3661:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrawingParameters=void 0;const n=i(9713),s=i(6362),r=i(4146);t.DrawingParameters=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.DrawingParametersEnum.default,t=arguments.length>1?arguments[1]:void 0;this.drawCursors=!0,this.drawTitle=!0,this.drawSubtitle=!0,this.drawLyricist=!0,this.drawComposer=!0,this.drawCopyright=!1,this.drawCredits=!0,this.drawPartNames=!0,this.fingeringPosition=s.PlacementEnum.Left,this.drawHiddenNotes=!1,this.rules=t,this.rules||(this.rules=new n.EngravingRules),this.DrawingParametersEnum=e}set DrawingParametersEnum(e){switch(this.drawingParametersEnum=e,e){case r.DrawingParametersEnum.allon:this.setForAllOn();break;case r.DrawingParametersEnum.thumbnail:this.setForThumbnail();break;case r.DrawingParametersEnum.leadsheet:this.setForLeadsheet();break;case r.DrawingParametersEnum.compact:this.setForCompactMode();break;case r.DrawingParametersEnum.compacttight:this.setForCompactTightMode();break;case r.DrawingParametersEnum.default:default:this.setForDefault()}}get DrawingParametersEnum(){return this.drawingParametersEnum}setForAllOn(){this.drawHighlights=!0,this.drawErrors=!0,this.drawSelectionStartSymbol=!0,this.drawSelectionEndSymbol=!0,this.drawCursors=!0,this.drawActivitySymbols=!0,this.drawScrollIndicator=!0,this.drawComments=!0,this.drawMarkedAreas=!0,this.DrawTitle=!0,this.DrawSubtitle=!0,this.DrawComposer=!0,this.DrawLyricist=!0,this.drawCredits=!0,this.DrawPartNames=!0,this.drawHiddenNotes=!0,this.rules.CompactMode=!1}setForDefault(){this.rules.loadDefaultValues(),this.setForAllOn(),this.drawHiddenNotes=!1}setForThumbnail(){this.drawHighlights=!1,this.drawErrors=!1,this.drawSelectionStartSymbol=!1,this.drawSelectionStartSymbol=!1,this.drawCursors=!1,this.drawActivitySymbols=!1,this.drawScrollIndicator=!1,this.drawComments=!0,this.drawMarkedAreas=!0,this.drawHiddenNotes=!1}setForCompactMode(){this.rules.CompactMode=!0,this.DrawCredits=!1,this.drawHiddenNotes=!1}setForCompactTightMode(){this.setForCompactMode(),this.DrawPartNames=!1,this.rules.VoiceSpacingMultiplierVexflow=.65,this.rules.VoiceSpacingAddendVexflow=2,this.rules.MinSkyBottomDistBetweenStaves=1,this.rules.MinSkyBottomDistBetweenSystems=1,this.rules.BetweenStaffDistance=2.5,this.rules.StaffDistance=3.5,this.rules.MinimumDistanceBetweenSystems=1,this.rules.PageBottomMargin=0,this.rules.PageLeftMargin=2,this.rules.PageRightMargin=2}setForLeadsheet(){this.drawHighlights=!1,this.drawErrors=!1,this.drawSelectionStartSymbol=!0,this.drawSelectionEndSymbol=!0,this.drawCursors=!0,this.drawActivitySymbols=!1,this.drawScrollIndicator=!0,this.drawComments=!0,this.drawMarkedAreas=!0}get DrawCredits(){return this.drawCredits}set DrawCredits(e){this.drawCredits=e,this.DrawComposer=e,this.DrawTitle=e,this.DrawSubtitle=e,this.DrawLyricist=e,this.DrawCopyright=e}get DrawTitle(){return this.drawTitle}set DrawTitle(e){this.drawTitle=e,this.rules.RenderTitle=e,e||(this.DrawSubtitle=!1)}get DrawSubtitle(){return this.drawSubtitle}set DrawSubtitle(e){this.drawSubtitle=e,this.rules.RenderSubtitle=e,e&&(this.DrawTitle=!0)}get DrawComposer(){return this.drawComposer}set DrawComposer(e){this.drawComposer=e,this.rules.RenderComposer=e}get DrawLyricist(){return this.drawLyricist}set DrawLyricist(e){this.drawLyricist=e,this.rules.RenderLyricist=e}get DrawCopyright(){return this.drawCopyright}set DrawCopyright(e){this.drawCopyright=e,this.rules.RenderCopyright=e}get DrawPartNames(){return this.drawPartNames}set DrawPartNames(e){this.drawPartNames=e,this.rules.RenderPartNames=e,this.rules.RenderPartNames||(this.rules.RenderPartAbbreviations=!1)}get FingeringPosition(){return this.fingeringPosition}set FingeringPosition(e){this.fingeringPosition=e,this.rules.FingeringPosition=e}get Rules(){return this.rules}set Rules(e){this.rules=e}}},3667:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SkyBottomLineBatchCalculatorBackend=void 0;const r=i(9834),o=n(i(3065));t.SkyBottomLineBatchCalculatorBackend=class{constructor(e,t){this.elementHeight=300,this.canvas=new r.CanvasVexFlowBackend(e),this.measures=t,this.maxWidth=Math.max(...this.measures.map((e=>{let t=e.getVFStave().getWidth();return t>0||e.IsExtraGraphicalMeasure||(o.default.warn("SkyBottomLineBatchCalculatorBackend: width not > 0 in measure "+e.MeasureNumber),t=50),t}))),this.samplingUnit=e.SamplingUnit}initialize(){if(this.tableConfiguration=s(s({},this.getPreferredRenderingConfiguration(this.maxWidth,this.elementHeight)),{},{elementHeight:this.elementHeight}),this.tableConfiguration.numRows<1||this.tableConfiguration.numColumns<1)throw o.default.warn("SkyBottomLineBatchCalculatorBackend: numRows or numColumns in tableConfiguration is 0"),new Error("numRows or numColumns in tableConfiguration is 0");this.tableConfiguration.elementWidth<this.maxWidth&&o.default.warn("SkyBottomLineBatchCalculatorBackend: elementWidth in tableConfiguration is less than the width of widest measure");const e=this.tableConfiguration.elementWidth*this.tableConfiguration.numColumns,t=this.elementHeight*this.tableConfiguration.numRows;return this.canvas.initializeHeadless(e,t),this.onInitialize(this.tableConfiguration),this}calculateLines(){const{numColumns:e,numRows:t,elementWidth:i}=this.tableConfiguration,n=this.elementHeight,s=e*t,r=this.canvas.getContext(),a=r,l=this.canvas.getCanvas(),c=[];for(let h=0;h<this.measures.length;h+=s){r.clear();const t=this.measures.slice(h,h+s);for(let s=0;s<t.length;++s){const l=t[s],c=l.getVFStave(),h=s%e,u=Math.floor(s/e);let d=c.getWidth();d>0||l.IsExtraGraphicalMeasure||(d=50),d=Math.floor(d),l.PositionAndShape.calculateAbsolutePositionsRecursive(0,0);const f=0;c.setX(f);const p=c.y+100;c.setY(p);const m=c.getWidth();c.setWidth(d),l.format(),c.setWidth(m);try{a.translate(h*i,u*n),l.draw(r),a.translate(-h*i,-u*n)}catch(e){o.default.warn("SkyBottomLineBatchCalculatorBackend.calculateLines.draw",e)}}const u=this.calculateFromCanvas(l,r,t,this.samplingUnit,this.tableConfiguration);c.push(...u)}return c}}},3753:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowGraphicalSymbolFactory=void 0;var s=n(i(3206)).default.Flow;const r=i(4332),o=i(5246),a=i(6670),l=i(437),c=i(9635),h=i(6659),u=i(4134),d=i(6014),f=i(6173),p=i(5866),m=i(3849),g=i(6362);t.VexFlowGraphicalSymbolFactory=class{createMusicSystem(e,t){return new r.VexFlowMusicSystem(e,t)}createStaffLine(e,t){return new p.VexFlowStaffLine(e,t)}createGraphicalMeasure(e,t){return new o.VexFlowMeasure(t,e,void 0)}createMultiRestMeasure(e,t,i){return new m.VexFlowMultiRestMeasure(t,e,i)}createTabStaffMeasure(e,t){return new f.VexFlowTabMeasure(t,e)}createExtraGraphicalMeasure(e){const t=new o.VexFlowMeasure(e.ParentStaff,void 0,e);return t.IsExtraGraphicalMeasure=!0,t.ExtraGraphicalMeasurePreviousMeasure=e.Measures.last(),t}createStaffEntry(e,t){return new a.VexFlowStaffEntry(t,e,void 0)}createVoiceEntry(e,t){return new u.VexFlowVoiceEntry(e,t)}createNote(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.OctaveEnum.NONE,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;return new c.VexFlowGraphicalNote(e,t,i,n,s,r)}createGraceNote(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.OctaveEnum.NONE;return new c.VexFlowGraphicalNote(e,t,i,s,n)}addGraphicalAccidental(e,t){e.setAccidental(t)}addFermataAtTiedEndNote(e,t){}createInStaffClef(e,t){const i=e,n=d.VexFlowConverter.Clef(t,"small");i.vfClefBefore=new s.ClefNote(n.type,n.size,n.annotation)}createChordSymbols(e,t,i,n){const s=t.parentMeasure.parentSourceMeasure.Rules;let r=0;const o=s.ChordSymbolXSpacing;for(const a of e.ChordContainers){if(!a)continue;let e=t.PositionAndShape;1===t.graphicalVoiceEntries.length&&1===t.graphicalVoiceEntries[0].notes.length&&t.graphicalVoiceEntries[0].notes[0].sourceNote.isWholeRest()&&(e=t.parentMeasure.PositionAndShape,r+=t.parentMeasure.beginInstructionsWidth,r+=s.ChordSymbolWholeMeasureRestXOffset);const l=new h.GraphicalChordSymbolContainer(a,e,s.ChordSymbolTextHeight,i,n,s),c=l.GetChordSymbolContainer.Placement,u=l.GraphicalLabel;c===g.PlacementEnum.Below?u.PositionAndShape.RelativePosition.y=s.StaffHeight+s.ChordSymbolYOffset:u.PositionAndShape.RelativePosition.y-=s.ChordSymbolYOffset,u.setLabelPositionAndShapeBorders();let d=0;u.PositionAndShape.Size.width<s.ChordSymbolExtraXShiftWidthThreshold&&(d=s.ChordSymbolExtraXShiftForShortChordSymbols),u.PositionAndShape.RelativePosition.x+=r+d,u.setLabelPositionAndShapeBorders(),l.PositionAndShape.calculateBoundingBox(),t.graphicalChordContainers.push(l),r+=u.PositionAndShape.Size.width+o}}createGraphicalTechnicalInstruction(e,t){}}},3849:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowMultiRestMeasure=void 0;var s=n(i(3206)).default.Flow;const r=i(5246);class o extends r.VexFlowMeasure{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(e,t,i),this.minimumStaffEntriesWidth=-1,i?this.rules=i.ParentMusicSystem.rules:t&&(this.rules=t.Rules),this.resetLayout(),this.multiRestElement=new s.MultiMeasureRest(t.multipleRestMeasures,{})}draw(e){var t,i;const n=e.openGroup();n&&(null!==(t=n.classList)&&void 0!==t&&t.add("vf-measure"),null!==(i=n.classList)&&void 0!==i&&i.add("multi"),n.id="".concat(this.MeasureNumber)),this.stave.setContext(e).draw(),this.multiRestElementSVG=e.openGroup("multirest"),this.multiRestElement.setStave(this.stave),this.multiRestElement.setContext(e),this.multiRestElement.draw(),this.multiRestElement.id="vf-multi".concat(this.MeasureNumber),e.closeGroup(),e.closeGroup();for(const s of this.connectors)s.setContext(e).draw()}format(){for(const t of this.staffEntries){var e;const i=this.PositionAndShape.Size.width-this.beginInstructionsWidth;t.PositionAndShape.RelativePosition.x=this.PositionAndShape.Size.width/2+this.beginInstructionsWidth/3,t.PositionAndShape.RelativePosition.y=0;const n=null===(e=t.graphicalVoiceEntries[0])||void 0===e||null===(e=e.notes[0])||void 0===e?void 0:e.PositionAndShape;n.BorderLeft=-i/3,n.BorderRight=i/3,n.BorderTop=1,n.BorderBottom=3,t.PositionAndShape.calculateBoundingBox()}}getVoicesWithinMeasure(){return[]}getGraphicalVoiceEntriesPerVoice(e){return[]}getRestFilledVexFlowStaveNotesPerVoice(e){return[]}handleBeam(e,t){}handleTuplet(e,t){}finalizeBeams(){}finalizeTuplets(){}layoutStaffEntry(e){}graphicalMeasureCreatedCalculations(){}createArticulations(){}createOrnaments(){}createFingerings(e){}getVFStave(){return this.stave}}t.VexFlowMultiRestMeasure=o},3902:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IXmlElement=void 0;class i{constructor(e){if(this.hasAttributes=!1,!e)throw new Error("IXmlElement: expected Element, got undefined");this.elem=e,this.name=e.nodeName.toLowerCase(),e.hasAttributes()&&(this.hasAttributes=!0,this.firstAttribute=e.attributes[0]),this.hasElements=e.hasChildNodes(),1===e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE?this.value=e.childNodes[0].nodeValue:this.value=""}attribute(e){return this.elem.attributes.getNamedItem(e)}attributes(){if(!this.attrs){const e=this.elem.attributes,t=[];for(let i=0;i<e.length;i+=1)t.push(e[i]);this.attrs=t}return this.attrs}element(e){const t=this.elem.childNodes;for(let n=0,s=t.length;n<s;n+=1){const s=t[n];if(s.nodeType===Node.ELEMENT_NODE&&s.nodeName.toLowerCase()===e)return new i(s)}}elements(e){const t=this.elem.childNodes,n=[],s=!e;s||(e=e.toLowerCase());for(let r=0;r<t.length;r+=1){const o=t[r];o.nodeType!==Node.ELEMENT_NODE||!s&&o.nodeName.toLowerCase()!==e||n.push(new i(o))}return n}combinedElement(e){const t=this.elem.childNodes;if(t.length>0){let n;for(let i=0,s=t.length;i<s;i+=1){const s=t[i];if(s.nodeType===Node.ELEMENT_NODE&&s.nodeName.toLowerCase()===e)if(n){const e=s.childNodes;for(let t=0,i=e.length;t<i;t+=1){const i=e[t];n.appendChild(i.cloneNode(!0))}}else n=s}if(n)return new i(n)}}}t.IXmlElement=i},4022:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalSlur=void 0;const s=i(9409),r=i(6711),o=i(6362),a=i(6904),l=i(4249),c=i(2561),h=i(1336);var u=n(i(3206)).default.Flow;class d extends r.GraphicalCurve{constructor(e,t){super(),this.staffEntries=[],this.slur=e,this.rules=t}static Compare(e,t){if(e.staffEntries.length<1)return-1;if(t.staffEntries.length<1)return 1;const i=c.Fraction.minus(e.staffEntries[e.staffEntries.length-1].getAbsoluteTimestamp(),e.staffEntries[0].getAbsoluteTimestamp()),n=c.Fraction.minus(t.staffEntries[t.staffEntries.length-1].getAbsoluteTimestamp(),t.staffEntries[0].getAbsoluteTimestamp());return i.RealValue>n.RealValue?1:n.RealValue>i.RealValue?-1:0}calculateCurve(e){const t=this.staffEntries[0],i=this.staffEntries[this.staffEntries.length-1];let n=t.findGraphicalNoteFromNote(this.slur.StartNote);!n&&this.graceStart&&(n=t.findGraphicalNoteFromGraceNote(this.slur.StartNote)),n||(n=t.findEndTieGraphicalNoteFromNoteWithStartingSlur(this.slur.StartNote,this.slur));let r=i.findGraphicalNoteFromNote(this.slur.EndNote);!r&&this.graceEnd&&(r=i.findGraphicalNoteFromGraceNote(this.slur.EndNote));const l=t.parentMeasure.ParentStaffLine,c=l.SkyBottomLineCalculator;this.calculatePlacement(c,l);const h=this.calculateStartAndEnd(n,r,l,e,c),u=h.startX,d=h.endX;let f=h.startY,p=h.endY;const m=e.SlurTangentMinAngle,g=e.SlurTangentMaxAngle;let b;if(this.placement===o.PlacementEnum.Above){f-=e.SlurNoteHeadYOffset,p-=e.SlurNoteHeadYOffset;const t=new s.PointF2D(this.staffEntries[0].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[0].PositionAndShape.RelativePosition.x,f);n?t.x+=this.staffEntries[0].PositionAndShape.BorderRight:t.x=this.staffEntries[0].parentMeasure.beginInstructionsWidth,this.graceStart&&(t.x+=i.PositionAndShape.RelativePosition.x);const o=new s.PointF2D(this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].PositionAndShape.RelativePosition.x,p);if(r?o.x+=this.staffEntries[this.staffEntries.length-1].PositionAndShape.BorderLeft:o.x=this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.Size.width,this.graceEnd&&(o.x+=i.staffEntryParent.PositionAndShape.RelativePosition.x),b=this.calculateTopPoints(t,o,l,c),0===b.length){const e=new s.PointF2D((o.x-t.x)/2+t.x,(o.y-t.y)/2+t.y);b.push(e)}const h=Math.atan((p-f)/(d-u)),v=new s.PointF2D(0,0);let y=new s.PointF2D(d-u,-(p-f));const x=a.Matrix2D.getRotationMatrix(h),S=x.getTransposeMatrix();y=x.vectorMultiplication(y);const E=this.calculateTranslatedAndRotatedPointListAbove(b,u,f,x),w=this.calculateMaxLeftSlope(E,v,y),T=this.calculateMaxRightSlope(E,v,y),_=v.y-v.x*w,M=y.y-y.x*T,P=new s.PointF2D;let C=!1;Math.abs(Math.abs(w)-Math.abs(T))<1e-4?(P.x=y.x/2,P.y=0,C=!0):(P.x=(M-_)/(w-T),P.y=w*P.x+_);const A=this.calculateHeightWidthRatio(y.x,E),N=0,L=0;let k=m,I=-m;if(!C){const e=this.calculateAngles(m,w,T,g);k=e.startAngle,I=e.endAngle}const R=this.calculateControlPoints(y.x,k,I,E,A,f,p);let O=R.startControlPoint,D=R.endControlPoint;O=S.vectorMultiplication(O),O.x+=u,O.y=-O.y+f,D=S.vectorMultiplication(D),D.x+=u,D.y=-D.y+f,this.bezierStartPt=new s.PointF2D(u,f-N),this.bezierStartControlPt=new s.PointF2D(O.x,O.y-N),this.bezierEndControlPt=new s.PointF2D(D.x,D.y-L),this.bezierEndPt=new s.PointF2D(d,p-L);const B=l.SkyLine.length,F=c.getLeftIndexForPointX(this.bezierStartPt.x,B),V=c.getLeftIndexForPointX(this.bezierEndPt.x,B),j=this.bezierEndPt.x-this.bezierStartPt.x,G=c.SamplingUnit;for(let e=F;e<V;e++){const t=e/G-this.bezierStartPt.x,i=this.calculateCurvePointAtIndex(Math.abs(t)/j);let n=c.getLeftIndexForPointX(i.x,B);n>=F&&(l.SkyLine[n]=Math.min(l.SkyLine[n],i.y)),n++,n<B&&(l.SkyLine[n]=Math.min(l.SkyLine[n],i.y))}}else{f+=e.SlurNoteHeadYOffset,p+=e.SlurNoteHeadYOffset;const t=new s.PointF2D(this.staffEntries[0].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[0].PositionAndShape.RelativePosition.x,f);n?t.x+=this.staffEntries[0].PositionAndShape.BorderRight:t.x=this.staffEntries[0].parentMeasure.beginInstructionsWidth,this.graceStart&&(t.x+=i.PositionAndShape.RelativePosition.x);const o=new s.PointF2D(this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].PositionAndShape.RelativePosition.x,p);if(r?o.x+=this.staffEntries[this.staffEntries.length-1].PositionAndShape.BorderLeft:o.x=this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.Size.width,this.graceEnd&&(o.x+=i.staffEntryParent.PositionAndShape.RelativePosition.x),b=this.calculateBottomPoints(t,o,l,c),0===b.length){const e=new s.PointF2D((o.x-t.x)/2+t.x,(o.y-t.y)/2+t.y);b.push(e)}const h=Math.atan((p-f)/(d-u)),v=new s.PointF2D(0,0);let y=new s.PointF2D(d-u,p-f);const x=a.Matrix2D.getRotationMatrix(-h),S=x.getTransposeMatrix();y=x.vectorMultiplication(y);const E=this.calculateTranslatedAndRotatedPointListBelow(b,u,f,x),w=this.calculateMaxLeftSlope(E,v,y),T=this.calculateMaxRightSlope(E,v,y),_=v.y-v.x*w,M=y.y-y.x*T,P=new s.PointF2D;let C=!1;Math.abs(Math.abs(w)-Math.abs(T))<1e-4?(P.x=y.x/2,P.y=0,C=!0):(P.x=(M-_)/(w-T),P.y=w*P.x+_);const A=this.calculateHeightWidthRatio(y.x,E),N=0,L=0;let k=m,I=-m;if(!C){const e=this.calculateAngles(m,w,T,g);k=e.startAngle,I=e.endAngle}const R=this.calculateControlPoints(y.x,k,I,E,A,f,p);let O=R.startControlPoint,D=R.endControlPoint;O=S.vectorMultiplication(O),O.x+=u,O.y+=f,D=S.vectorMultiplication(D),D.x+=u,D.y+=f,this.bezierStartPt=new s.PointF2D(u,f+N),this.bezierStartControlPt=new s.PointF2D(O.x,O.y+N),this.bezierEndControlPt=new s.PointF2D(D.x,D.y+L),this.bezierEndPt=new s.PointF2D(d,p+L);const B=l.BottomLine.length,F=c.getLeftIndexForPointX(this.bezierStartPt.x,B),V=c.getLeftIndexForPointX(this.bezierEndPt.x,B),j=this.bezierEndPt.x-this.bezierStartPt.x,G=c.SamplingUnit;for(let e=F;e<V;e++){const t=e/G-this.bezierStartPt.x,i=this.calculateCurvePointAtIndex(Math.abs(t)/j);let n=c.getLeftIndexForPointX(i.x,B);n>=F&&(l.BottomLine[n]=Math.max(l.BottomLine[n],i.y)),n++,n<B&&(l.BottomLine[n]=Math.max(l.BottomLine[n],i.y))}}}calculateStartAndEnd(e,t,i,n,s){let r=0,a=0,l=0,c=0;if(e){r=e.PositionAndShape.RelativePosition.x+e.parentVoiceEntry.parentStaffEntry.PositionAndShape.RelativePosition.x+e.parentVoiceEntry.parentStaffEntry.parentMeasure.PositionAndShape.RelativePosition.x,this.graceStart&&(r+=e.parentVoiceEntry.parentStaffEntry.staffEntryParent.PositionAndShape.RelativePosition.x);const t=e.parentVoiceEntry;this.placement===o.PlacementEnum.Above?(a=t.PositionAndShape.RelativePosition.y+t.PositionAndShape.BorderTop,this.rules.SlurPlacementUseSkyBottomLine&&(a=Math.min(c,t.parentStaffEntry.getSkylineMin()))):(a=t.PositionAndShape.RelativePosition.y+t.PositionAndShape.BorderBottom,this.rules.SlurPlacementUseSkyBottomLine&&(a=Math.max(c,t.parentStaffEntry.getBottomlineMax()))),t.parentVoiceEntry.StemDirection===h.StemDirectionType.Down&&this.placement===o.PlacementEnum.Below&&(r-=.5),t.parentVoiceEntry.StemDirection===h.StemDirectionType.Up&&this.placement===o.PlacementEnum.Above&&(r+=.5)}else r=0;if(t){l=t.PositionAndShape.RelativePosition.x+t.parentVoiceEntry.parentStaffEntry.PositionAndShape.RelativePosition.x+t.parentVoiceEntry.parentStaffEntry.parentMeasure.PositionAndShape.RelativePosition.x,this.graceEnd&&(l+=t.parentVoiceEntry.parentStaffEntry.staffEntryParent.PositionAndShape.RelativePosition.x);const e=t.parentVoiceEntry;let i;for(const n of e.parentVoiceEntry.Articulations)if(i=n.placement,n.placement===o.PlacementEnum.NotYetDefined)for(const e of t.vfnote[0].modifiers)if(e.getCategory()===u.Articulation.CATEGORY){e.position===u.Modifier.Position.ABOVE?(n.placement=o.PlacementEnum.Above,i=o.PlacementEnum.Above):e.position===u.Modifier.Position.BELOW&&(n.placement=o.PlacementEnum.Below,i=o.PlacementEnum.Below);break}this.placement===o.PlacementEnum.Above?(c=e.PositionAndShape.RelativePosition.y+e.PositionAndShape.BorderTop,this.rules.SlurPlacementUseSkyBottomLine&&(c=Math.min(c,e.parentStaffEntry.getSkylineMin())),i===o.PlacementEnum.Above&&(c-=this.rules.SlurEndArticulationYOffset)):(c=e.PositionAndShape.RelativePosition.y+e.PositionAndShape.BorderBottom,this.rules.SlurPlacementUseSkyBottomLine&&(c=Math.max(c,e.parentStaffEntry.getBottomlineMax())),i===o.PlacementEnum.Below&&(c+=this.rules.SlurEndArticulationYOffset)),e.parentVoiceEntry.StemDirection===h.StemDirectionType.Down&&this.placement===o.PlacementEnum.Below&&(l-=.5),e.parentVoiceEntry.StemDirection===h.StemDirectionType.Up&&this.placement===o.PlacementEnum.Above&&(l+=.5)}else l=i.PositionAndShape.Size.width;return e||t||(a=-1.5,c=-1.5),e||(a=this.placement===o.PlacementEnum.Above?c-1:c+1),t||(c=this.placement===o.PlacementEnum.Above?a-1:a+1),this.slur.startNoteHasMoreStartingSlurs()&&this.slur.isSlurLonger()&&(this.placement===o.PlacementEnum.Above?a-=n.SlursStartingAtSameStaffEntryYOffset:a+=n.SlursStartingAtSameStaffEntryYOffset),this.slur.endNoteHasMoreEndingSlurs()&&this.slur.isSlurLonger()&&(this.placement===o.PlacementEnum.Above?c-=n.SlursStartingAtSameStaffEntryYOffset:c+=n.SlursStartingAtSameStaffEntryYOffset),this.placement===o.PlacementEnum.Above?(a=Math.min(a,1.5),c=Math.min(c,1.5)):(a=Math.max(a,i.StaffHeight-1.5),c=Math.max(c,i.StaffHeight-1.5)),{startX:r,startY:a,endX:l,endY:c}}calculatePlacement(e,t){if(this.rules.SlurPlacementFromXML&&this.slur.PlacementXml!==o.PlacementEnum.NotYetDefined)return void(this.placement=this.slur.PlacementXml);for(let r=0,a=this.staffEntries.length;r<a;++r)if(this.staffEntries[r].parentMeasure.hasMultipleVoices())return void(this.slur.StartNote.ParentVoiceEntry.ParentVoice instanceof l.LinkedVoice||this.slur.EndNote.ParentVoiceEntry.ParentVoice instanceof l.LinkedVoice?this.placement=o.PlacementEnum.Below:this.placement=o.PlacementEnum.Above);for(let r=0,a=this.staffEntries.length;r<a;++r)if(this.staffEntries[r].LyricsEntries.length>0)return void(this.placement=o.PlacementEnum.Above);const i=this.staffEntries[0],n=this.staffEntries[this.staffEntries.length-1],s=i.graphicalVoiceEntries[0].parentVoiceEntry.StemDirection;if(s===n.graphicalVoiceEntries[0].parentVoiceEntry.StemDirection)this.placement=s===h.StemDirectionType.Up?o.PlacementEnum.Below:o.PlacementEnum.Above,this.rules.SlurPlacementAtStems&&(this.placement=s===h.StemDirectionType.Up?o.PlacementEnum.Above:o.PlacementEnum.Below);else{let s=i.PositionAndShape.BorderLeft+i.PositionAndShape.RelativePosition.x+i.parentMeasure.PositionAndShape.RelativePosition.x,r=n.PositionAndShape.BorderRight+n.PositionAndShape.RelativePosition.x+n.parentMeasure.PositionAndShape.RelativePosition.x;this.graceStart&&(s+=n.PositionAndShape.RelativePosition.x),this.graceEnd&&(r+=n.staffEntryParent.PositionAndShape.RelativePosition.x);const a=-1*e.getSkyLineMinInRange(s,r),l=e.getBottomLineMaxInRange(s,r)-t.StaffHeight;this.placement=l>a?o.PlacementEnum.Above:o.PlacementEnum.Below}}calculateTopPoints(e,t,i,n){const r=[];let o=n.getRightIndexForPointX(e.x,i.SkyLine.length),a=n.getLeftIndexForPointX(t.x,i.SkyLine.length);o<0&&(o=0),a>=i.SkyLine.length&&(a=i.SkyLine.length-1);for(let l=o;l<a;l++){const e=i.SkyLine[l];if(0!==e){const t=new s.PointF2D((.5+l)/n.SamplingUnit,e);r.push(t)}}return r}calculateBottomPoints(e,t,i,n){const r=[];let o=n.getRightIndexForPointX(e.x,i.BottomLine.length),a=n.getLeftIndexForPointX(t.x,i.BottomLine.length);o<0&&(o=0),a>=i.BottomLine.length&&(a=i.BottomLine.length-1);for(let l=o;l<a;l++){const e=i.BottomLine[l];if(0!==e){const t=new s.PointF2D((.5+l)/n.SamplingUnit,e);r.push(t)}}return r}calculateMaxLeftSlope(e,t,i){let n=-Number.MAX_VALUE;const s=t.x,r=t.y;for(let o=0;o<e.length;o++)Math.abs(e[o].y-Number.MAX_VALUE)<1e-4||Math.abs(e[o].y- -Number.MAX_VALUE)<1e-4||(n=Math.max(n,(e[o].y-r)/(e[o].x-s)));return n=Math.max(n,Math.abs(i.y-r)/(i.x-s)),n=Math.min(n,5.6713),n}calculateMaxRightSlope(e,t,i){let n=Number.MAX_VALUE;const s=i.x,r=i.y;for(let o=0;o<e.length;o++)Math.abs(e[o].y-Number.MAX_VALUE)<1e-4||Math.abs(e[o].y- -Number.MAX_VALUE)<1e-4||(n=Math.min(n,(r-e[o].y)/(s-e[o].x)));return n=Math.min(n,(r-t.y)/(s-t.x)),n=Math.max(n,-5.6713),n}getPointListMaxY(e){let t=-Number.MAX_VALUE;for(let i=0,n=e.length;i<n;++i){const n=e[i];Math.abs(n.y- -Number.MAX_VALUE)<1e-4||Math.abs(n.y-Number.MAX_VALUE)<1e-4||(t=Math.max(t,n.y))}return t}calculateTranslatedAndRotatedPointListAbove(e,t,i,n){const r=[];for(let o=0;o<e.length;o++){if(Math.abs(e[o].y-Number.MAX_VALUE)<1e-4||Math.abs(e[o].y- -Number.MAX_VALUE)<1e-4)continue;let a=new s.PointF2D(e[o].x-t,-(e[o].y-i));a=n.vectorMultiplication(a),r.push(a)}return r}calculateTranslatedAndRotatedPointListBelow(e,t,i,n){const r=[];for(let o=0;o<e.length;o++){if(Math.abs(e[o].y-Number.MAX_VALUE)<1e-4||Math.abs(e[o].y- -Number.MAX_VALUE)<1e-4)continue;let a=new s.PointF2D(e[o].x-t,e[o].y-i);a=n.vectorMultiplication(a),r.push(a)}return r}calculateHeightWidthRatio(e,t){return 0===t.length?0:Math.max(0,this.getPointListMaxY(t))/e}calculateControlPoints(e,t,i,n,r,o,a){let l=this.rules.SlurHeightFactor,c=1;const h=this.rules.SlurHeightFlattenLongSlursCutoffAngle,u=this.rules.SlurHeightFlattenLongSlursCutoffWidth;t>h&&e>u&&(c+=e/70*this.rules.SlurHeightFlattenLongSlursFactorByWidth,c*=1+t/30*this.rules.SlurHeightFlattenLongSlursFactorByAngle,l/=c);const f=Math.min(.5,Math.max(.1,1.7*t/80*l*Math.pow(Math.max(r,.05),.4))),p=Math.min(.5,Math.max(.1,1.7*-i/80*l*Math.pow(Math.max(r,.05),.4))),m=new s.PointF2D;m.x=e*f*Math.cos(t*d.degreesToRadiansFactor),m.y=e*f*Math.sin(t*d.degreesToRadiansFactor);const g=new s.PointF2D;g.x=e-e*p*Math.cos(i*d.degreesToRadiansFactor),g.y=-e*p*Math.sin(i*d.degreesToRadiansFactor);let b=m.y-g.y;for(;this.rules.SlurMaximumYControlPointDistance&&Math.abs(b)>this.rules.SlurMaximumYControlPointDistance;)b<0?(m.y+=1,g.y-=1):(m.y-=1,g.y+=1),b=m.y-g.y;return{startControlPoint:m,endControlPoint:g}}calculateAngles(e,t,i,n){let s=Math.atan(t)/d.degreesToRadiansFactor;t>0?s+=20:s-=20;let r=Math.atan(i)/d.degreesToRadiansFactor;return i<0?r-=20:r+=20,{startAngle:Math.min(Math.max(e,s),n),endAngle:Math.max(Math.min(-e,r),-n)}}}t.GraphicalSlur=d,d.degreesToRadiansFactor=Math.PI/180},4041:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4831),s=i(3288),r=function(){function e(e){this.root=null,this.compare=e||n.defaultCompare,this.nElements=0}return e.prototype.add=function(e){return!n.isUndefined(e)&&null!==this.insertNode(this.createNode(e))&&(this.nElements++,!0)},e.prototype.clear=function(){this.root=null,this.nElements=0},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.size=function(){return this.nElements},e.prototype.contains=function(e){return!n.isUndefined(e)&&null!==this.searchNode(this.root,e)},e.prototype.search=function(e){var t=this.searchNode(this.root,e);if(null!==t)return t.element},e.prototype.remove=function(e){var t=this.searchNode(this.root,e);return null!==t&&(this.removeNode(t),this.nElements--,!0)},e.prototype.inorderTraversal=function(e){this.inorderTraversalAux(this.root,e,{stop:!1})},e.prototype.preorderTraversal=function(e){this.preorderTraversalAux(this.root,e,{stop:!1})},e.prototype.postorderTraversal=function(e){this.postorderTraversalAux(this.root,e,{stop:!1})},e.prototype.levelTraversal=function(e){this.levelTraversalAux(this.root,e)},e.prototype.minimum=function(){if(!this.isEmpty()&&null!==this.root)return this.minimumAux(this.root).element},e.prototype.maximum=function(){if(!this.isEmpty()&&null!==this.root)return this.maximumAux(this.root).element},e.prototype.forEach=function(e){this.inorderTraversal(e)},e.prototype.toArray=function(){var e=[];return this.inorderTraversal((function(t){return e.push(t),!0})),e},e.prototype.height=function(){return this.heightAux(this.root)},e.prototype.searchNode=function(e,t){for(var i=1;null!==e&&0!==i;)(i=this.compare(t,e.element))<0?e=e.leftCh:i>0&&(e=e.rightCh);return e},e.prototype.transplant=function(e,t){null===e.parent?this.root=t:e===e.parent.leftCh?e.parent.leftCh=t:e.parent.rightCh=t,null!==t&&(t.parent=e.parent)},e.prototype.removeNode=function(e){if(null===e.leftCh)this.transplant(e,e.rightCh);else if(null===e.rightCh)this.transplant(e,e.leftCh);else{var t=this.minimumAux(e.rightCh);t.parent!==e&&(this.transplant(t,t.rightCh),t.rightCh=e.rightCh,t.rightCh.parent=t),this.transplant(e,t),t.leftCh=e.leftCh,t.leftCh.parent=t}},e.prototype.inorderTraversalAux=function(e,t,i){null===e||i.stop||(this.inorderTraversalAux(e.leftCh,t,i),i.stop||(i.stop=!1===t(e.element),i.stop||this.inorderTraversalAux(e.rightCh,t,i)))},e.prototype.levelTraversalAux=function(e,t){var i=new s.default;for(null!==e&&i.enqueue(e),e=i.dequeue()||null;null!=e;){if(!1===t(e.element))return;null!==e.leftCh&&i.enqueue(e.leftCh),null!==e.rightCh&&i.enqueue(e.rightCh),e=i.dequeue()||null}},e.prototype.preorderTraversalAux=function(e,t,i){null===e||i.stop||(i.stop=!1===t(e.element),i.stop||(this.preorderTraversalAux(e.leftCh,t,i),i.stop||this.preorderTraversalAux(e.rightCh,t,i)))},e.prototype.postorderTraversalAux=function(e,t,i){null===e||i.stop||(this.postorderTraversalAux(e.leftCh,t,i),i.stop||(this.postorderTraversalAux(e.rightCh,t,i),i.stop||(i.stop=!1===t(e.element))))},e.prototype.minimumAux=function(e){for(;null!=e&&null!==e.leftCh;)e=e.leftCh;return e},e.prototype.maximumAux=function(e){for(;null!=e&&null!==e.rightCh;)e=e.rightCh;return e},e.prototype.heightAux=function(e){return null===e?-1:Math.max(this.heightAux(e.leftCh),this.heightAux(e.rightCh))+1},e.prototype.insertNode=function(e){for(var t=null,i=this.root;null!==i;){var n=this.compare(e.element,i.element);if(0===n)return null;n<0?(t=i,i=i.leftCh):(t=i,i=i.rightCh)}return e.parent=t,null===t?this.root=e:this.compare(e.element,t.element)<0?t.leftCh=e:t.rightCh=e,e},e.prototype.createNode=function(e){return{element:e,leftCh:null,rightCh:null,parent:null}},e}();t.default=r},4064:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NoteHeadShape=t.Notehead=void 0;const s=n(i(3065));class r{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.sourceNote=e,this.setShapeFromXml(t,i)}setShapeFromXml(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.shape=r.ShapeTypeXmlToShape(e);let i=t;void 0===i&&(this.sourceNote?i=this.sourceNote.Length.Denominator>2:(s.default.warn("notehead: sourceNote and filledXmlAttribute undefined."),i=!0)),this.filled=i}get SourceNote(){return this.sourceNote}get Shape(){return this.shape}get Filled(){return this.filled}static ShapeTypeXmlToShape(e){switch(e.toLowerCase()){case"normal":return o.NORMAL;case"x":return o.X;case"slash":return o.SLASH;case"diamond":return o.DIAMOND;case"square":case"la":return o.SQUARE;case"do":case"triangle":return o.TRIANGLE;case"inverted triangle":return o.TRIANGLE_INVERTED;case"rectangle":return o.RECTANGLE;case"circle-x":return o.CIRCLEX;default:return s.default.info("unsupported/unhandled xml notehead '"+e+"'. Using normal notehead."),o.NORMAL}}}var o;t.Notehead=r,function(e){e[e.CIRCLEX=0]="CIRCLEX",e[e.DIAMOND=1]="DIAMOND",e[e.NORMAL=2]="NORMAL",e[e.RECTANGLE=3]="RECTANGLE",e[e.SLASH=4]="SLASH",e[e.SQUARE=5]="SQUARE",e[e.TRIANGLE=6]="TRIANGLE",e[e.TRIANGLE_INVERTED=7]="TRIANGLE_INVERTED",e[e.X=8]="X"}(o||(t.NoteHeadShape=o={}))},4076:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(1325),t),s(i(7551),t),s(i(6001),t),s(i(3457),t)},4127:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ArticulationReader=void 0;const s=i(1336),r=n(i(3065)),o=i(3123),a=i(8215),l=i(6362),c=i(8233),h=i(9003),u=i(9019),d=i(8045);t.ArticulationReader=class{constructor(e){this.rules=e}getAccEnumFromString(e){switch(e){case"sharp":return c.AccidentalEnum.SHARP;case"flat":return c.AccidentalEnum.FLAT;case"natural":return c.AccidentalEnum.NATURAL;case"double-sharp":case"sharp-sharp":return c.AccidentalEnum.DOUBLESHARP;case"double-flat":case"flat-flat":return c.AccidentalEnum.DOUBLEFLAT;case"triple-sharp":return c.AccidentalEnum.TRIPLESHARP;case"triple-flat":return c.AccidentalEnum.TRIPLEFLAT;case"quarter-sharp":return c.AccidentalEnum.QUARTERTONESHARP;case"quarter-flat":return c.AccidentalEnum.QUARTERTONEFLAT;case"three-quarters-sharp":return c.AccidentalEnum.THREEQUARTERSSHARP;case"three-quarters-flat":return c.AccidentalEnum.THREEQUARTERSFLAT;case"slash-quarter-sharp":return c.AccidentalEnum.SLASHQUARTERSHARP;case"slash-sharp":return c.AccidentalEnum.SLASHSHARP;case"double-slash-flat":return c.AccidentalEnum.DOUBLESLASHFLAT;case"sori":return c.AccidentalEnum.SORI;case"koron":return c.AccidentalEnum.KORON;default:return c.AccidentalEnum.NONE}}addArticulationExpression(e,t){if(void 0!==e&&e.elements().length>0){const o=e.elements();for(let a=0,c=o.length;a<c;++a){const c=o[a];let f=c.name;try{f=f.replace("-","");const e=s.ArticulationEnum[f];if(s.VoiceEntry.isSupportedArticulation(e)){var i;let r=l.PlacementEnum.NotYetDefined;const o=null===(i=c.attribute("placement"))||void 0===i?void 0:i.value;"above"===o?r=l.PlacementEnum.Above:"below"===o&&(r=l.PlacementEnum.Below);const a=new h.Articulation(e,r);if("staccato"===f)t.Articulations.length>0&&t.Articulations[0].articulationEnum!==s.ArticulationEnum.staccato&&t.Articulations.splice(0,0,a);else if("breathmark"===f)r===l.PlacementEnum.NotYetDefined&&(a.placement=l.PlacementEnum.Above);else if("strongaccent"===f){var n;const e=null===c||void 0===c||null===(n=c.attribute("type"))||void 0===n?void 0:n.value;"up"===e?a.articulationEnum=s.ArticulationEnum.marcatoup:"down"===e&&(a.articulationEnum=s.ArticulationEnum.marcatodown)}else if(e===s.ArticulationEnum.softaccent){const e=t.ParentSourceStaffEntry.ParentStaff.Id-1;r===l.PlacementEnum.NotYetDefined&&(r=l.PlacementEnum.Above,e>0&&(r=l.PlacementEnum.Below));const i=t.ParentSourceStaffEntry.VerticalContainerParent.ParentMeasure,n=new u.MultiExpression(i,t.Timestamp);n.StartingContinuousDynamic=new d.ContinuousDynamicExpression(d.ContDynamicEnum.crescendo,r,e,i,-1),n.StartingContinuousDynamic.IsStartOfSoftAccent=!0,n.StartingContinuousDynamic.StartMultiExpression=n,n.StartingContinuousDynamic.EndMultiExpression=n,n.EndingContinuousDynamic=new d.ContinuousDynamicExpression(d.ContDynamicEnum.diminuendo,r,e,i,-1),n.EndingContinuousDynamic.StartMultiExpression=n,n.EndingContinuousDynamic.EndMultiExpression=n,i.StaffLinkedExpressions[e].push(n)}t.hasArticulation(a)||t.Articulations.push(a)}}catch(e){const t="Invalid note articulation.";return void r.default.debug("addArticulationExpression",t,e)}}}}addFermata(e,t){var i;let n=s.ArticulationEnum.fermata;e.attributes().length>0&&e.attribute("type")&&"inverted"===e.attribute("type").value&&(n=s.ArticulationEnum.invertedfermata);let r=l.PlacementEnum.Above;"below"===(null===(i=e.attribute("placement"))||void 0===i?void 0:i.value)&&(r=l.PlacementEnum.Below),t.Articulations.push(new h.Articulation(n,r))}addTechnicalArticulations(e,t,i){const n={bend:s.ArticulationEnum.bend,"down-bow":s.ArticulationEnum.downbow,"open-string":s.ArticulationEnum.naturalharmonic,"snap-pizzicato":s.ArticulationEnum.snappizzicato,stopped:s.ArticulationEnum.lefthandpizzicato,"up-bow":s.ArticulationEnum.upbow,harmonic:s.ArticulationEnum.naturalharmonic};for(const s in n){if(!n.hasOwnProperty(s))continue;const i=n[s],o=e.element(s);if(o){var r,a;let e;"above"===(null===(r=o.attribute("placement"))||void 0===r?void 0:r.value)&&(e=l.PlacementEnum.Above),"below"===(null===(a=o.attribute("placement"))||void 0===a?void 0:a.value)&&(e=l.PlacementEnum.Below);const n=new h.Articulation(i,e);t.hasArticulation(n)||t.Articulations.push(n)}}const c=e.elements("fingering");for(const s of c){const e=this.createTechnicalInstruction(s,i);e.type=o.TechnicalInstructionType.Fingering,i.Fingering||(i.Fingering=e),t.TechnicalInstructions.push(e)}const u=e.element("string");if(u){const e=this.createTechnicalInstruction(u,i);e.type=o.TechnicalInstructionType.String,i.StringInstruction=e,t.TechnicalInstructions.push(e)}}createTechnicalInstruction(e,t){const i=new o.TechnicalInstruction;i.sourceNote=t,i.value=e.value;const n=e.attribute("placement");return this.rules.FingeringPositionFromXML&&(i.placement=this.getPlacement(n)),i}getPlacement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.PlacementEnum.NotYetDefined;if(t!==l.PlacementEnum.NotYetDefined)return t;if(!e)return l.PlacementEnum.NotYetDefined;switch(e.value){case"above":return l.PlacementEnum.Above;case"below":return l.PlacementEnum.Below;case"left":return l.PlacementEnum.Left;case"right":return l.PlacementEnum.Right;default:return l.PlacementEnum.NotYetDefined}}addOrnament(e,t){if(e){let i;const n={"delayed-inverted-turn":a.OrnamentEnum.DelayedInvertedTurn,"delayed-turn":a.OrnamentEnum.DelayedTurn,"inverted-mordent":a.OrnamentEnum.InvertedMordent,"inverted-turn":a.OrnamentEnum.InvertedTurn,mordent:a.OrnamentEnum.Mordent,"trill-mark":a.OrnamentEnum.Trill,turn:a.OrnamentEnum.Turn};for(const t in n){if(!n.hasOwnProperty(t))continue;const s=e.element(t);if(s){i=new a.OrnamentContainer(n[t]);const e=s.attribute("placement");e&&"below"===e.value&&(i.placement=l.PlacementEnum.Below)}}if(i){const n=e.elements("accidental-mark");if(n){let e=l.PlacementEnum.Below,t=c.AccidentalEnum.NONE;const s=n;for(let n=0,r=s.length;n<r;++n){const r=s[n];let o=r.value;t=this.getAccEnumFromString(o);const a=r.attribute("placement");r.hasAttributes&&a&&(o=a.value,"above"===o?e=l.PlacementEnum.Above:"below"===o&&(e=l.PlacementEnum.Below)),e===l.PlacementEnum.Above?i.AccidentalAbove=t:e===l.PlacementEnum.Below&&(i.AccidentalBelow=t)}}t.OrnamentContainer=i}}}}},4134:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowVoiceEntry=void 0;const n=i(4548),s=i(9479),r=i(4434);class o extends n.GraphicalVoiceEntry{constructor(e,t,i){super(e,t,i)}applyBordersFromVexflow(){var e;const t=this.vfStaveNote;if(!t.getNoteHeadBeginX)return;const i=t.getBoundingBox(),n=t.getNoteHeadBeginX()-i.x;this.PositionAndShape.RelativePosition.y=i.y/s.unitInPixels,this.PositionAndShape.BorderTop=0,this.PositionAndShape.BorderBottom=i.h/s.unitInPixels;const r=(t.width-(null!==(e=t.paddingRight)&&void 0!==e?e:0))/2;this.PositionAndShape.BorderLeft=-(n+r)/s.unitInPixels,this.PositionAndShape.BorderRight=(i.w-n)/s.unitInPixels}set vfStaveNote(e){this.mVexFlowStaveNote=e}get vfStaveNote(){return this.mVexFlowStaveNote}applyCustomNoteheads(){const e=this.vfStaveNote;if(e)for(let t=0;t<this.notes.length;t++){const i=this.notes[t].sourceNote;e.note_heads&&i.CustomNoteheadVFCode&&(e.note_heads[t].glyph_code=i.CustomNoteheadVFCode)}}color(){const e=this.rules.DefaultColorNotehead,t=this.rules.DefaultColorRest,i=this.rules.DefaultColorStem,n="#00000000";let s,o;const a=this.vfStaveNote;for(let f=0;f<this.notes.length;f++){const i=this.notes[f];if(o=i.sourceNote.NoteheadColor,s=o,this.rules.ColoringMode===r.ColoringModes.AutoColoring||this.rules.ColoringMode===r.ColoringModes.CustomColorSet)if(i.sourceNote.isRest())s=this.rules.ColoringSetCurrent.getValue(-1);else{const e=i.sourceNote.Pitch.FundamentalNote;s=this.rules.ColoringSetCurrent.getValue(e)}if(i.sourceNote.PrintObject?s&&"#000000"!==s||(s=this.rules.DefaultColorNotehead):s=n,!o&&this.rules.ColoringMode===r.ColoringModes.XML&&i.sourceNote.PrintObject&&(!i.sourceNote.isRest()&&e?s=e:i.sourceNote.isRest()&&t&&(s=t)),s&&i.sourceNote.PrintObject)i.sourceNote.NoteheadColorCurrentlyRendered=s;else if(!s)continue;if(this.rules.ColoringEnabled&&i.sourceNote.NoteBeam&&this.rules.ColorBeams){var l;const e=i.sourceNote.NoteBeam.Notes;let t=!0;for(let i=0;i<e.length;i++)e[i].NoteheadColorCurrentlyRendered!==s&&(t=!1);t&&(null===a||void 0===a||null===(l=a.beam)||void 0===l?void 0:l.setStyle)&&a.beam.setStyle({fillStyle:s,strokeStyle:s})}if(a){if(a.note_heads){const e=a.note_heads[f];e&&e.setStyle({fillStyle:s,strokeStyle:s})}a.setLedgerLineStyle&&(s===n?a.setLedgerLineStyle({fillStyle:s,strokeStyle:s,lineWidth:this.rules.LedgerLineWidth}):a.setLedgerLineStyle({fillStyle:this.rules.LedgerLineColorDefault,lineWidth:this.rules.LedgerLineWidth,strokeStyle:this.rules.LedgerLineColorDefault}))}}let c=i,h=!1;this.rules.ColoringEnabled&&(c=this.parentVoiceEntry.StemColor,c&&"#000000"!==c||(c=i),this.rules.ColorStemsLikeNoteheads&&s&&(c=s,h=!0));let u=!0;for(const r of this.parentVoiceEntry.Notes)if(r.PrintObject){u=!1;break}u&&(c=n);const d={fillStyle:c,strokeStyle:c};a&&a.setStemStyle&&(!u&&h&&(this.parentVoiceEntry.StemColor=c),a.setStemStyle(d),a.flag&&a.setFlagStyle&&this.rules.ColorFlags&&a.setFlagStyle(d))}}t.VexFlowVoiceEntry=o},4146:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DrawingParametersEnum=void 0,function(e){e.allon="allon",e.compact="compact",e.compacttight="compacttight",e.default="default",e.leadsheet="leadsheet",e.preview="preview",e.thumbnail="thumbnail"}(i||(t.DrawingParametersEnum=i={}))},4236:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ArpeggioType=t.Arpeggio=void 0,t.Arpeggio=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.ARPEGGIO_DIRECTIONLESS;this.parentVoiceEntry=e,this.type=t,this.notes=[]}addNote(e){this.notes.push(e),e.Arpeggio=this}},function(e){e[e.BRUSH_DOWN=1]="BRUSH_DOWN",e[e.BRUSH_UP=2]="BRUSH_UP",e[e.ROLL_DOWN=3]="ROLL_DOWN",e[e.ROLL_UP=4]="ROLL_UP",e[e.RASQUEDO_DOWN=5]="RASQUEDO_DOWN",e[e.RASQUEDO_UP=6]="RASQUEDO_UP",e[e.ARPEGGIO_DIRECTIONLESS=7]="ARPEGGIO_DIRECTIONLESS"}(i||(t.ArpeggioType=i={}))},4249:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedVoice=void 0;const n=i(5534);class s extends n.Voice{constructor(e,t,i){super(e,t),this.master=i}get Master(){return this.master}}t.LinkedVoice=s},4268:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tuplet=void 0,t.Tuplet=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.PlacementFromXml=!1,this.RenderTupletNumber=!0,this.notes=[],this.fractions=[],this.tupletLabelNumber=e,this.bracket=t}shouldBeBracketed(e,t,i){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3])return arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e&&void 0!==this.BracketedXmlValue)return this.BracketedXmlValue;const n=this.Notes[0][0].NoteBeam;if(!n)return!0;for(const s of this.Notes)if(s[0].NoteBeam!==n)return!0;return this.Bracket||3===this.TupletLabelNumber&&i||3!==this.TupletLabelNumber&&t}get TupletLabelNumber(){return this.tupletLabelNumber}set TupletLabelNumber(e){this.tupletLabelNumber=e}get Notes(){return this.notes}set Notes(e){this.notes=e}get Fractions(){return this.fractions}set Fractions(e){this.fractions=e}get Bracket(){return this.bracket}set Bracket(e){this.bracket=e}getNoteIndex(e){for(let t=this.notes.length-1;t>=0;t--)for(let i=0;i<this.notes[t].length;i++)if(e===this.notes[t][i])return t;return 0}}},4284:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemLine=void 0;const n=i(6954),s=i(6438),r=i(7741);class o extends r.GraphicalObject{constructor(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;super(),this.lineType=e,this.linePosition=t,this.parentMusicSystem=i,this.topMeasure=n,this.bottomMeasure=r,this.parentTopStaffLine=null===n||void 0===n?void 0:n.ParentStaffLine,this.boundingBox=new s.BoundingBox(this,i.PositionAndShape)}static getObjectWidthForLineType(e,t){switch(t){case n.SystemLinesEnum.SingleThin:return e.SystemThinLineWidth;case n.SystemLinesEnum.DoubleThin:return 2*e.SystemThinLineWidth+e.DistanceBetweenVerticalSystemLines;case n.SystemLinesEnum.ThinBold:return e.SystemThinLineWidth+e.SystemBoldLineWidth+e.DistanceBetweenVerticalSystemLines;case n.SystemLinesEnum.BoldThinDots:case n.SystemLinesEnum.DotsThinBold:return e.SystemThinLineWidth+e.SystemBoldLineWidth+e.DistanceBetweenVerticalSystemLines+e.SystemDotWidth+e.DistanceBetweenDotAndLine;case n.SystemLinesEnum.DotsBoldBoldDots:return 2*e.SystemBoldLineWidth+2*e.SystemDotWidth+2*e.DistanceBetweenDotAndLine+e.DistanceBetweenVerticalSystemLines;default:return 0}}}t.SystemLine=o},4332:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowMusicSystem=void 0;const n=i(5221),s=i(6954),r=i(4284),o=i(6014),a=i(3109),l=i(7098);class c extends n.MusicSystem{constructor(e,t){super(e),this.rules=t}calculateBorders(e){if(0===this.staffLines.length)return;const t=this.calcBracketsWidth();this.boundingBox.BorderLeft=-t,this.boundingBox.BorderMarginLeft=-t,this.boundingBox.XBordersHaveBeenSet=!0;const i=this.staffLines[0].SkyBottomLineCalculator.getSkyLineMin();this.boundingBox.BorderTop=i,this.boundingBox.BorderMarginTop=i;const n=this.staffLines[this.staffLines.length-1],s=n.SkyBottomLineCalculator.getBottomLineMax()+n.PositionAndShape.RelativePosition.y;this.boundingBox.BorderBottom=s,this.boundingBox.BorderMarginBottom=s,this.boundingBox.XBordersHaveBeenSet=!0,this.boundingBox.YBordersHaveBeenSet=!0}createSystemLine(e,t,i,n,a,l){let c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;const h=l;let u=!1;if(c&&(u=!0,c.lineTo(l,o.VexFlowConverter.line(i,n)),c.addMeasureLine(i,n),i===s.SystemLinesEnum.DotsBoldBoldDots)){const e=c.ParentStaffLine.Measures.indexOf(c)+1,t=c.ParentStaffLine.Measures[e],i=l.ParentStaffLine.Measures[e];t&&i&&(t.lineTo(i,o.VexFlowConverter.line(s.SystemLinesEnum.BoldThinDots,n)),t.addMeasureLine(s.SystemLinesEnum.BoldThinDots,n))}return h&&h.addMeasureLine(i,n,u),new r.SystemLine(i,n,this,l,c)}createInstrumentBracket(e,t){const i=e,n=t,s=new l.VexFlowInstrumentBrace(i,n);this.InstrumentBrackets.push(s)}createGroupBracket(e,t,i){const n=e,s=t;if(0===i){const e=new a.VexFlowInstrumentBracket(n,s,i);this.GroupBrackets.push(e)}else{const e=new l.VexFlowInstrumentBrace(n,s,i);this.GroupBrackets.push(e)}}}t.VexFlowMusicSystem=c},4356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtil=void 0,t.StringUtil=class{static StringContainsSeparatedWord(e,t){return new RegExp("( |^)"+t+"([ .]|$)",arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"i":void 0).test(e)}}},4387:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceMeasure=void 0;const n=i(2561),s=i(3236),r=i(2369),o=i(1645),a=i(1336),l=i(164),c=i(4543),h=i(6954);t.SourceMeasure=class{constructor(e,t){this.printNewSystemXml=!1,this.printNewPageXml=!1,this.IsSystemStartMeasure=!1,this.WidthFactor=1,this.hasLyrics=!1,this.hasMoodExpressions=!1,this.allRests=!1,this.isReducedToMultiRest=!1,this.multipleRestMeasureNumber=0,this.staffLinkedExpressions=[],this.tempoExpressions=[],this.verticalSourceStaffEntryContainers=[],this.graphicalMeasureErrors=[],this.firstRepetitionInstructions=[],this.lastRepetitionInstructions=[],this.completeNumberOfStaves=e,this.implicitMeasure=!1,this.hasEndLine=!1,this.endingBarStyleXml="",this.endingBarStyleEnum=h.SystemLinesEnum.SingleThin,this.firstInstructionsStaffEntries=new Array(e),this.lastInstructionsStaffEntries=new Array(e),this.rules=t,this.TempoInBPM=0;for(let i=0;i<e;i++)this.graphicalMeasureErrors.push(!1),this.staffLinkedExpressions.push([])}get MeasureNumber(){return this.measureNumber}set MeasureNumber(e){this.measureNumber=e}getPrintedMeasureNumber(){return this.rules.UseXMLMeasureNumbers&&Number.isInteger(this.MeasureNumberXML)?(this.MeasureNumberPrinted=this.MeasureNumberXML,this.MeasureNumberPrinted):(this.MeasureNumberPrinted=this.MeasureNumber,this.MeasureNumberPrinted)}get AbsoluteTimestamp(){return this.absoluteTimestamp}set AbsoluteTimestamp(e){this.absoluteTimestamp=e}get CompleteNumberOfStaves(){return this.completeNumberOfStaves}get Duration(){return this.duration}set Duration(e){this.duration=e}get ActiveTimeSignature(){return this.activeTimeSignature}set ActiveTimeSignature(e){this.activeTimeSignature=e}get ImplicitMeasure(){return this.implicitMeasure}set ImplicitMeasure(e){this.implicitMeasure=e}get HasEndLine(){return this.hasEndLine}set HasEndLine(e){this.hasEndLine=e}get StaffLinkedExpressions(){return this.staffLinkedExpressions}get TempoExpressions(){return this.tempoExpressions}get VerticalSourceStaffEntryContainers(){return this.verticalSourceStaffEntryContainers}get FirstInstructionsStaffEntries(){return this.firstInstructionsStaffEntries}get LastInstructionsStaffEntries(){return this.lastInstructionsStaffEntries}get FirstRepetitionInstructions(){return this.firstRepetitionInstructions}get LastRepetitionInstructions(){return this.lastRepetitionInstructions}getErrorInMeasure(e){return this.graphicalMeasureErrors[e]}setErrorInGraphicalMeasure(e,t){this.graphicalMeasureErrors[e]=t}getNextMeasure(e){return e[this.measureListIndex+1]}getPreviousMeasure(e){if(this.measureListIndex>1)return e[this.measureListIndex-1]}get Rules(){return this.rules}get VerticalMeasureList(){return this.verticalMeasureList}set VerticalMeasureList(e){this.verticalMeasureList=e}get TempoInBPM(){return this.tempoInBPM}set TempoInBPM(e){this.tempoInBPM=e}findOrCreateStaffEntry(e,t,i){let n,o;for(const s of this.verticalSourceStaffEntryContainers)if(s.Timestamp.Equals(e)){o=s;break}if(o)return o.StaffEntries[t]?n=o.StaffEntries[t]:(n=new r.SourceStaffEntry(o,i),o.StaffEntries[t]=n),{createdNewContainer:!1,staffEntry:n};const a=this.verticalSourceStaffEntryContainers[this.verticalSourceStaffEntryContainers.length-1];if(0===this.verticalSourceStaffEntryContainers.length||a.Timestamp.lt(e)){const o=new s.VerticalSourceStaffEntryContainer(this,e.clone(),this.completeNumberOfStaves);this.verticalSourceStaffEntryContainers.push(o),n=new r.SourceStaffEntry(o,i),o.StaffEntries[t]=n}else for(let l=this.verticalSourceStaffEntryContainers.length-1;l>=0;l--){if(this.verticalSourceStaffEntryContainers[l].Timestamp.lt(e)){const o=new s.VerticalSourceStaffEntryContainer(this,e.clone(),this.completeNumberOfStaves);this.verticalSourceStaffEntryContainers.splice(l+1,0,o),n=new r.SourceStaffEntry(o,i),o.StaffEntries[t]=n;break}if(0===l){const o=new s.VerticalSourceStaffEntryContainer(this,e.clone(),this.completeNumberOfStaves);this.verticalSourceStaffEntryContainers.splice(l,0,o),n=new r.SourceStaffEntry(o,i),o.StaffEntries[t]=n;break}}return{createdNewContainer:!0,staffEntry:n}}findOrCreateVoiceEntry(e,t){let i,n=!1;for(const s of e.VoiceEntries)if(s.ParentVoice===t){i=s;break}return i||(i=new a.VoiceEntry(e.Timestamp,t,e),n=!0),{createdVoiceEntry:n,voiceEntry:i}}getPreviousSourceStaffEntryFromIndex(e,t){for(let i=t-1;i>=0;i--)if(this.verticalSourceStaffEntryContainers[i][e])return this.verticalSourceStaffEntryContainers[i][e]}getVerticalContainerIndexByTimestamp(e){for(let t=0,i=this.VerticalSourceStaffEntryContainers.length;t<i;++t)if(this.VerticalSourceStaffEntryContainers[t].Timestamp.Equals(e))return t;return-1}getVerticalContainerByTimestamp(e){for(let t=0,i=this.VerticalSourceStaffEntryContainers.length;t<i;++t){const i=this.VerticalSourceStaffEntryContainers[t];if(i.Timestamp.Equals(e))return i}}checkForEmptyVerticalContainer(e){let t=0;for(let i=0;i<this.completeNumberOfStaves;i++)this.verticalSourceStaffEntryContainers[e][i]||t++;t===this.completeNumberOfStaves&&this.verticalSourceStaffEntryContainers.splice(e,1)}reverseCheck(e,t){let i=new n.Fraction(0,1);const s=[];for(let r=0;r<e.Instruments.length;r++){let t=new n.Fraction(0,1);const i=e.getGlobalStaffIndexOfFirstStaff(e.Instruments[r]);for(let s=0;s<e.Instruments[r].Staves.length;s++){const e=this.getLastSourceStaffEntryForInstrument(i+s);if(void 0!==e&&!e.hasTie())for(let r=this.verticalSourceStaffEntryContainers.indexOf(e.VerticalContainerParent)-1;r>=0;r--){const e=this.verticalSourceStaffEntryContainers[r][i+s];if(void 0!==e&&e.hasTie()&&t.lt(n.Fraction.plus(e.Timestamp,e.calculateMaxNoteLength()))){t=n.Fraction.plus(e.Timestamp,e.calculateMaxNoteLength());break}}}s.push(t)}for(let n=0,r=s.length;n<r;++n){const e=s[n];i.lt(e)&&(i=e)}return n.Fraction.max(i,t)}calculateInstrumentsDuration(e,t){const i=[];for(let s=0;s<e.Instruments.length;s++){let r=new n.Fraction(0,1);const o=e.getGlobalStaffIndexOfFirstStaff(e.Instruments[s]);for(let t=0;t<e.Instruments[s].Staves.length;t++){const e=this.getLastSourceStaffEntryForInstrument(o+t);if(void 0!==e&&e.Timestamp){const t=e.calculateMaxNoteLength(!1);r.lt(n.Fraction.plus(e.Timestamp,t))&&(r=n.Fraction.plus(e.Timestamp,t))}}r.lt(t[s])&&(r=t[s]),i.push(r)}return i}getEntriesPerStaff(e){const t=[];for(const i of this.VerticalSourceStaffEntryContainers){const n=i.StaffEntries[e];n&&t.push(n)}return t}hasBeginInstructions(){for(let e=0,t=this.FirstInstructionsStaffEntries.length;e<t;e++){const t=this.FirstInstructionsStaffEntries[e];if(void 0!==t&&t.Instructions.length>0)return!0}return!1}beginsWithRepetition(){return this.beginsWithLineRepetition()||this.beginsWithWordRepetition()}beginsWithLineRepetition(){for(let e=0,t=this.FirstRepetitionInstructions.length;e<t;++e){const t=this.FirstRepetitionInstructions[e];if(t.type===o.RepetitionInstructionEnum.StartLine)return!0;if(void 0!==t.parentRepetition&&t===t.parentRepetition.startMarker&&!t.parentRepetition.FromWords)return!0}return!1}endsWithLineRepetition(){for(let e=0,t=this.LastRepetitionInstructions.length;e<t;++e){const t=this.LastRepetitionInstructions[e];if(t.type===o.RepetitionInstructionEnum.BackJumpLine)return!0;const i=t.parentRepetition;if(i&&!i.FromWords)for(let e=0,n=i.BackwardJumpInstructions.length;e<n;++e)if(t===i.BackwardJumpInstructions[e])return!0}return!1}beginsWithWordRepetition(){for(let e=0,t=this.FirstRepetitionInstructions.length;e<t;++e){const t=this.FirstRepetitionInstructions[e];if(void 0!==t.parentRepetition&&t===t.parentRepetition.startMarker&&t.parentRepetition.FromWords)return!0}return!1}endsWithWordRepetition(){for(let e=0,t=this.LastRepetitionInstructions.length;e<t;++e){const t=this.LastRepetitionInstructions[e],i=t.parentRepetition;if(i&&i.FromWords){for(let e=0,n=i.BackwardJumpInstructions.length;e<n;++e)if(t===i.BackwardJumpInstructions[e])return!0;if(t===i.forwardJumpInstruction)return!0}}return!1}beginsRepetitionEnding(){for(const e of this.FirstRepetitionInstructions)if(e.type===o.RepetitionInstructionEnum.Ending&&e.alignment===o.AlignmentType.Begin)return!0;return!1}endsRepetitionEnding(){for(const e of this.LastRepetitionInstructions)if(e.type===o.RepetitionInstructionEnum.Ending&&e.alignment===o.AlignmentType.End)return!0;return!1}getKeyInstruction(e){if(this.FirstInstructionsStaffEntries[e]){const t=this.FirstInstructionsStaffEntries[e];for(let e=0,i=t.Instructions.length;e<i;++e){const i=t.Instructions[e];if(i instanceof c.KeyInstruction)return i}}}getLastSourceStaffEntryForInstrument(e){let t,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(let n=this.verticalSourceStaffEntryContainers.length-1;n>=0;n--)if(t=this.verticalSourceStaffEntryContainers[n].StaffEntries[e],t&&(!i||t.VoiceEntries.length>0))return t}canBeReducedToMultiRest(){var e,t;if(this.firstRepetitionInstructions.length>0||this.lastRepetitionInstructions.length>0)return!1;let i=!0,n=!1;for(const s of this.verticalSourceStaffEntryContainers)if(s)for(const e of s.StaffEntries)if(e&&e.ParentStaff.isVisible()){if(e.ChordContainers.length>0)return!1;e.ParentStaff.hasLyrics&&(n=!0);for(const t of e.VoiceEntries){for(const e of t.Notes)if(!e.isRest()){i=!1;break}if(!i)break}}if(!i||n||this.hasMoodExpressions||this.tempoExpressions.length>0)return!1;for(const s of this.staffLinkedExpressions)if(s.length>0)return!1;for(const s of this.lastInstructionsStaffEntries)for(let e=0,t=null===s||void 0===s?void 0:s.Instructions.length;e<t;++e)if(s.Instructions[e]instanceof l.ClefInstruction)return!1;return(null===(e=this.Duration)||void 0===e?void 0:e.RealValue)===(null===(t=this.ActiveTimeSignature)||void 0===t?void 0:t.RealValue)}}},4434:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ColoringModes=void 0,function(e){e[e.XML=0]="XML",e[e.AutoColoring=1]="AutoColoring",e[e.CustomColorSet=2]="CustomColorSet"}(i||(t.ColoringModes=i={}))},4538:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4831),s=i(4713),r=function(){function e(){this.firstNode=null,this.lastNode=null,this.nElements=0}return e.prototype.add=function(e,t){if(n.isUndefined(t)&&(t=this.nElements),t<0||t>this.nElements||n.isUndefined(e))return!1;var i=this.createNode(e);if(0===this.nElements||null===this.lastNode)this.firstNode=i,this.lastNode=i;else if(t===this.nElements)this.lastNode.next=i,this.lastNode=i;else if(0===t)i.next=this.firstNode,this.firstNode=i;else{var s=this.nodeAtIndex(t-1);if(null===s)return!1;i.next=s.next,s.next=i}return this.nElements++,!0},e.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},e.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},e.prototype.elementAtIndex=function(e){var t=this.nodeAtIndex(e);if(null!==t)return t.element},e.prototype.indexOf=function(e,t){var i=t||n.defaultEquals;if(n.isUndefined(e))return-1;for(var s=this.firstNode,r=0;null!==s;){if(i(s.element,e))return r;r++,s=s.next}return-1},e.prototype.contains=function(e,t){return this.indexOf(e,t)>=0},e.prototype.remove=function(e,t){var i=t||n.defaultEquals;if(this.nElements<1||n.isUndefined(e))return!1;for(var s=null,r=this.firstNode;null!==r;){if(i(r.element,e))return null===s?(this.firstNode=r.next,r===this.lastNode&&(this.lastNode=null)):r===this.lastNode?(this.lastNode=s,s.next=r.next,r.next=null):(s.next=r.next,r.next=null),this.nElements--,!0;s=r,r=r.next}return!1},e.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},e.prototype.equals=function(t,i){var s=i||n.defaultEquals;return t instanceof e&&this.size()===t.size()&&this.equalsAux(this.firstNode,t.firstNode,s)},e.prototype.equalsAux=function(e,t,i){for(;null!==e&&null!==t;){if(!i(e.element,t.element))return!1;e=e.next,t=t.next}return!0},e.prototype.removeElementAtIndex=function(e){if(!(e<0||e>=this.nElements||null===this.firstNode||null===this.lastNode)){var t;if(1===this.nElements)t=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var i=this.nodeAtIndex(e-1);null===i?(t=this.firstNode.element,this.firstNode=this.firstNode.next):i.next===this.lastNode&&(t=this.lastNode.element,this.lastNode=i),null!==i&&null!==i.next&&(t=i.next.element,i.next=i.next.next)}return this.nElements--,t}},e.prototype.forEach=function(e){for(var t=this.firstNode;null!==t&&!1!==e(t.element);)t=t.next},e.prototype.reverse=function(){for(var e=null,t=this.firstNode,i=null;null!==t;)i=t.next,t.next=e,e=t,t=i;i=this.firstNode,this.firstNode=this.lastNode,this.lastNode=i},e.prototype.toArray=function(){for(var e=[],t=this.firstNode;null!==t;)e.push(t.element),t=t.next;return e},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){return s.toString(this.toArray())},e.prototype.nodeAtIndex=function(e){if(e<0||e>=this.nElements)return null;if(e===this.nElements-1)return this.lastNode;for(var t=this.firstNode,i=0;i<e&&null!==t;i++)t=t.next;return t},e.prototype.createNode=function(e){return{element:e,next:null}},e}();t.default=r},4543:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyEnum=t.NoteEnumToHalfToneLink=t.KeyInstruction=void 0;const n=i(5364),s=i(8233),r=i(8233);class o extends n.AbstractNotationInstruction{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.major;super(e),this.isTransposedBy=0,this.Key=t,this.keyTypeOriginal=t,this.mode=i,this.alteratedNotes=this.calcAlteratedNotes()}static copy(e){const t=new o(e.parent,e.Key,e.Mode);return t.keyTypeOriginal=e.keyTypeOriginal,t}static getAllPossibleMajorKeyInstructions(){const e=[];for(let t=-7;t<7;t++){const i=new o(void 0,t,a.major);e.push(i)}return e}get Key(){return this.keyType}set Key(e){this.keyType=e,this.alteratedNotes=this.calcAlteratedNotes()}get Mode(){return this.mode}set Mode(e){this.mode=e}get AlteratedNotes(){return this.alteratedNotes}calcAlteratedNotes(){const e=[];if(this.keyType>0)for(let t=0;t<this.keyType;t++)e.push(o.sharpPositionList[t]);else if(this.keyType<0)for(let t=0;t<-this.keyType;t++)e.push(o.flatPositionList[t]);return e}willAlterateNote(e){return this.alteratedNotes.indexOf(e)>=0}getAlterationForPitch(e){return this.keyType>0&&this.alteratedNotes.indexOf(e.FundamentalNote)<=this.keyType?r.AccidentalEnum.SHARP:this.keyType<0&&this.alteratedNotes.indexOf(e.FundamentalNote)<=Math.abs(this.keyType)?r.AccidentalEnum.FLAT:r.AccidentalEnum.NONE}ToString(){return"Key: "+this.keyType+this.mode}OperatorEquals(e){const t=this;return t===e||!(!t||!e)&&t.Key===e.Key&&t.Mode===e.Mode}OperatorNotEqual(e){return!this.OperatorEquals(e)}}var a;t.KeyInstruction=o,o.sharpPositionList=[s.NoteEnum.F,s.NoteEnum.C,s.NoteEnum.G,s.NoteEnum.D,s.NoteEnum.A,s.NoteEnum.E,s.NoteEnum.B],o.flatPositionList=[s.NoteEnum.B,s.NoteEnum.E,s.NoteEnum.A,s.NoteEnum.D,s.NoteEnum.G,s.NoteEnum.C,s.NoteEnum.F],t.NoteEnumToHalfToneLink=class{constructor(e,t){this.note=e,this.halfTone=t}},function(e){e[e.major=0]="major",e[e.minor=1]="minor",e[e.none=2]="none",e[e.dorian=3]="dorian",e[e.phrygian=4]="phrygian",e[e.lydian=5]="lydian",e[e.mixolydian=6]="mixolydian",e[e.aeolian=7]="aeolian",e[e.ionian=8]="ionian",e[e.locrian=9]="locrian"}(a||(t.KeyEnum=a={}))},4548:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalVoiceEntry=void 0;const n=i(7741),s=i(6438),r=i(9713);class o extends n.GraphicalObject{constructor(e,t,i){super(),this.parentVoiceEntry=e,this.parentStaffEntry=t,this.PositionAndShape=new s.BoundingBox(this,t?t.PositionAndShape:void 0,!0),this.notes=[],this.rules=i||(t?t.parentMeasure.parentSourceMeasure.Rules:new r.EngravingRules)}sort(){return this.notes.sort(((e,t)=>{var i,n,s,r;return(null!==(i=null===(n=t.sourceNote.Pitch)||void 0===n?void 0:n.getHalfTone())&&void 0!==i?i:0)-(null!==(s=null===(r=e.sourceNote.Pitch)||void 0===r?void 0:r.getHalfTone())&&void 0!==s?s:0)})),this.notes}sortForVexflow(){return this.notes.sort(((e,t)=>{var i,n,s;return(null!==(i=null===(n=e.sourceNote.Pitch)||void 0===n?void 0:n.getHalfTone())&&void 0!==i?i:0)-(null!==(s=t.sourceNote.Pitch.getHalfTone())&&void 0!==s?s:0)})),this.notes}applyCustomNoteheads(){}color(){}}t.GraphicalVoiceEntry=o},4589:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4831),s=i(4713),r=function(){function e(e){this.data=[],this.compare=e||n.defaultCompare}return e.prototype.leftChildIndex=function(e){return 2*e+1},e.prototype.rightChildIndex=function(e){return 2*e+2},e.prototype.parentIndex=function(e){return Math.floor((e-1)/2)},e.prototype.minIndex=function(e,t){return t>=this.data.length?e>=this.data.length?-1:e:this.compare(this.data[e],this.data[t])<=0?e:t},e.prototype.siftUp=function(e){for(var t=this.parentIndex(e);e>0&&this.compare(this.data[t],this.data[e])>0;)s.swap(this.data,t,e),e=t,t=this.parentIndex(e)},e.prototype.siftDown=function(e){for(var t=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e));t>=0&&this.compare(this.data[e],this.data[t])>0;)s.swap(this.data,t,e),e=t,t=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e))},e.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},e.prototype.add=function(e){return!n.isUndefined(e)&&(this.data.push(e),this.siftUp(this.data.length-1),!0)},e.prototype.removeRoot=function(){if(this.data.length>0){var e=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),e}},e.prototype.contains=function(e){var t=n.compareToEquals(this.compare);return s.contains(this.data,e,t)},e.prototype.size=function(){return this.data.length},e.prototype.isEmpty=function(){return this.data.length<=0},e.prototype.clear=function(){this.data.length=0},e.prototype.forEach=function(e){s.forEach(this.data,e)},e}();t.default=r},4713:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4831);function s(e,t,i){for(var s=i||n.defaultEquals,r=e.length,o=0;o<r;o++)if(s(e[o],t))return o;return-1}t.indexOf=s,t.lastIndexOf=function(e,t,i){for(var s=i||n.defaultEquals,r=e.length-1;r>=0;r--)if(s(e[r],t))return r;return-1},t.contains=function(e,t,i){return s(e,t,i)>=0},t.remove=function(e,t,i){var n=s(e,t,i);return!(n<0||(e.splice(n,1),0))},t.frequency=function(e,t,i){for(var s=i||n.defaultEquals,r=e.length,o=0,a=0;a<r;a++)s(e[a],t)&&o++;return o},t.equals=function(e,t,i){var s=i||n.defaultEquals;if(e.length!==t.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!s(e[o],t[o]))return!1;return!0},t.copy=function(e){return e.concat()},t.swap=function(e,t,i){if(t<0||t>=e.length||i<0||i>=e.length)return!1;var n=e[t];return e[t]=e[i],e[i]=n,!0},t.toString=function(e){return"["+e.toString()+"]"},t.forEach=function(e,t){for(var i=0,n=e;i<n.length;i++)if(!1===t(n[i]))return}},4831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.prototype.hasOwnProperty;function n(e){return"function"==typeof e}function s(e){return void 0===e}function r(e){return"[object String]"===Object.prototype.toString.call(e)}t.has=function(e,t){return i.call(e,t)},t.defaultCompare=function(e,t){return e<t?-1:e===t?0:1},t.defaultEquals=function(e,t){return e===t},t.defaultToString=function(e){return null===e?"COLLECTION_NULL":s(e)?"COLLECTION_UNDEFINED":r(e)?"$s"+e:"$o"+e.toString()},t.makeString=function(e,i){if(void 0===i&&(i=","),null===e)return"COLLECTION_NULL";if(s(e))return"COLLECTION_UNDEFINED";if(r(e))return e.toString();var n="{",o=!0;for(var a in e)t.has(e,a)&&(o?o=!1:n+=i,n=n+a+":"+e[a]);return n+"}"},t.isFunction=n,t.isUndefined=s,t.isString=r,t.reverseCompareFunction=function(e){return s(e)||!n(e)?function(e,t){return e<t?1:e===t?0:-1}:function(t,i){return-1*e(t,i)}},t.compareToEquals=function(e){return function(t,i){return 0===e(t,i)}}},4864:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4980:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(6362),t),s(i(9147),t),s(i(6990),t),s(i(2148),t),s(i(9161),t),s(i(9803),t),s(i(9019),t),s(i(5332),t),s(i(9157),t),s(i(1112),t)},5023:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalInstantaneousDynamicExpression=void 0;const s=i(9490),r=i(6362),o=n(i(3065));class a extends s.AbstractGraphicalExpression{constructor(e,t,i){super(t,e,i.parentSourceMeasure),this.mInstantaneousDynamicExpression=e,this.mMeasure=i}updateSkyBottomLine(){const e=this.parentStaffLine.SkyBottomLineCalculator,t=this.PositionAndShape.RelativePosition.x+this.PositionAndShape.BorderMarginLeft,i=this.PositionAndShape.RelativePosition.x+this.PositionAndShape.BorderMarginRight;let n=0;switch(this.Placement){case r.PlacementEnum.Above:n=this.PositionAndShape.RelativePosition.y+this.PositionAndShape.BorderMarginTop,e.updateSkyLineInRange(t,i,n);break;case r.PlacementEnum.Below:n=this.PositionAndShape.RelativePosition.y+this.PositionAndShape.BorderMarginBottom,e.updateBottomLineInRange(t,i,n);break;default:o.default.error("Placement for GraphicalInstantaneousDynamicExpression is unknown")}}}t.GraphicalInstantaneousDynamicExpression=a},5054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalTie=void 0,t.GraphicalTie=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.tie=e,this.startNote=t,this.endNote=i}get SVGElement(){return this.vfTie.getAttribute("el")}get GetTie(){return this.tie}get StartNote(){return this.startNote}get Tie(){return this.tie}set StartNote(e){this.startNote=e}get EndNote(){return this.endNote}set EndNote(e){this.endNote=e}}},5166:e=>{"use strict";e.exports="precision mediump float;\nuniform sampler2D u_image;\nvarying vec4 v_position;\n\n#define NUM_ROWS 5\n#define ELEMENT_HEIGHT 300\n\nvoid main() {\n    const float halfPixel = 1.0 / float(ELEMENT_HEIGHT * 2);\n\n    vec2 absolutePosition = (v_position.xy + vec2(1.0)) / vec2(2.0);\n    float absX = absolutePosition.x;\n    float absY = absolutePosition.y;\n\n    int skyLine = 0;\n    for (int i = 0; i < ELEMENT_HEIGHT; ++i) {\n        float ratioY = float(i) / float(ELEMENT_HEIGHT);\n        float relY = (ratioY - 0.5 + halfPixel) / float(NUM_ROWS);\n        float x = absX;\n        float y = absY + relY;\n\n        float currentAlpha = texture2D(u_image, vec2(x, y)).a;\n        if (currentAlpha > 0.0) {\n            skyLine = i;\n            break;\n        }\n    }\n\n    int bottomLine = ELEMENT_HEIGHT;\n    for (int i = ELEMENT_HEIGHT - 1; i >= 0; --i) {\n        float ratioY = float(i) / float(ELEMENT_HEIGHT);\n        float relY = (ratioY - 0.5 + halfPixel) / float(NUM_ROWS);\n        float x = absX;\n        float y = absY + relY;\n\n        float currentAlpha = texture2D(u_image, vec2(x, y)).a;\n        if (currentAlpha > 0.0) {\n            bottomLine = i;\n            break;\n        }\n    }\n\n    int r = skyLine;\n    if (r > 256) {\n        r -= 256;\n    }\n    int g = bottomLine;\n    if (g > 256) {\n        g -= 256;\n    }\n    int b = (skyLine / 256 * 16) + (bottomLine / 256);\n\n    gl_FragColor = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, 1.0);\n}\n"},5221:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSystem=void 0;const n=i(9252),s=i(6438),r=i(2561),o=i(7533),a=i(8254),l=i(7741),c=i(9409),h=i(6954),u=i(3263),d=i(67),f=i(7435);class p extends l.GraphicalObject{constructor(e){super(),this.needsToBeRedrawn=!0,this.staffLines=[],this.graphicalMeasures=[],this.labels=new u.Dictionary,this.measureNumberLabels=[],this.objectsToRedraw=[],this.instrumentBrackets=[],this.groupBrackets=[],this.graphicalMarkedAreas=[],this.graphicalComments=[],this.systemLines=[],this.breaksPage=!1,this.id=e,this.boundingBox=new s.BoundingBox(this),this.maxLabelLength=0}get Parent(){return this.parent}set Parent(e){if(this.parent){const e=this.parent.MusicSystems.indexOf(this,0);e>-1&&this.parent.MusicSystems.splice(e,1)}this.parent=e,this.boundingBox.Parent=e.PositionAndShape}get NextSystem(){const e=this.Parent.MusicSystems.indexOf(this);return e!==this.Parent.MusicSystems.length?this.Parent.MusicSystems[e+1]:void 0}get StaffLines(){return this.staffLines}set StaffLines(e){this.staffLines=e}get GraphicalMeasures(){return this.graphicalMeasures}get MeasureNumberLabels(){return this.measureNumberLabels}get Labels(){return this.labels.values()}get ObjectsToRedraw(){return this.objectsToRedraw}get InstrumentBrackets(){return this.instrumentBrackets}get GroupBrackets(){return this.groupBrackets}get GraphicalMarkedAreas(){return this.graphicalMarkedAreas}get GraphicalComments(){return this.graphicalComments}get SystemLines(){return this.systemLines}get Id(){return this.id}createSystemLeftLine(e,t,i){let n=-e/2;i&&(n=this.maxLabelLength+t-e/2);const s=this.staffLines[0].Measures[0];let r;this.staffLines.length>1&&(r=this.staffLines[this.staffLines.length-1].Measures[0]);const o=this.createSystemLine(n,e,h.SystemLinesEnum.SingleThin,d.SystemLinePosition.MeasureBegin,this,s,r);this.SystemLines.push(o),o.PositionAndShape.RelativePosition=new c.PointF2D(n,0),o.PositionAndShape.BorderLeft=0,o.PositionAndShape.BorderRight=e,o.PositionAndShape.BorderTop=o.PositionAndShape.Parent.BorderTop,o.PositionAndShape.BorderBottom=o.PositionAndShape.Parent.BorderBottom,this.createLinesForSystemLine(o)}createVerticalLineForMeasure(e,t,i,n,s,r){const o=r.ParentStaffLine,a=new c.PointF2D(o.PositionAndShape.RelativePosition.x,o.PositionAndShape.RelativePosition.y),l=o.ParentStaff.ParentInstrument.Staves;if(o.ParentStaff===l[0]){let h;l.length>1&&(h=this.getBottomStaffLine(o).Measures[s]);const u=this.createSystemLine(e,t,i,n,this,r,h),d=a.x+e;u.PositionAndShape.RelativePosition=new c.PointF2D(d,0),u.PositionAndShape.BorderLeft=0,u.PositionAndShape.BorderRight=t,this.SystemLines.push(u)}}setYPositionsToVerticalLineObjectsAndCreateLines(e){}calculateBorders(e){}alignBeginInstructions(){}GetLeftBorderAbsoluteXPosition(){return this.StaffLines[0].PositionAndShape.AbsolutePosition.x+this.StaffLines[0].Measures[0].beginInstructionsWidth}GetRightBorderAbsoluteXPosition(){return this.StaffLines[0].PositionAndShape.AbsolutePosition.x+this.StaffLines[0].StaffLines[0].End.x}AddGraphicalMeasures(e){for(let t=0,i=e.length;t<i;++t)e[t].ParentMusicSystem=this;this.graphicalMeasures.push(e)}GetSystemsFirstTimeStamp(){return this.graphicalMeasures[0][0].parentSourceMeasure.AbsoluteTimestamp}GetSystemsLastTimeStamp(){const e=this.graphicalMeasures[this.graphicalMeasures.length-1][0].parentSourceMeasure;return r.Fraction.plus(e.AbsoluteTimestamp,e.Duration)}createInstrumentBrackets(e,t){for(let i=0,n=e.length;i<n;++i){const t=e[i];if(t.Staves.length>1){let e,i;for(let n=0,s=this.staffLines.length;n<s;++n){const s=this.staffLines[n];s.ParentStaff===t.Staves[0]&&s.ParentStaff.Visible&&(e=s),s.ParentStaff===t.Staves[t.Staves.length-1]&&s.ParentStaff.Visible&&(i=s)}e&&i&&this.createInstrumentBracket(e,i)}}}createGroupBrackets(e,t,i){for(let n=0,s=e.length;n<s;++n){const s=e[n];if(s.InstrumentalGroups.length<1)continue;const r=this.findFirstVisibleInstrumentInInstrumentalGroup(s),o=this.findLastVisibleInstrumentInInstrumentalGroup(s);if(!r||!o)continue;let a,l;for(let e=0,t=this.staffLines.length;e<t;++e){const t=this.staffLines[e];t.ParentStaff===r.Staves[0]&&(a=t),t.ParentStaff===o.Staves[0]&&(l=t)}a&&l&&this.createGroupBracket(a,l,i),s.InstrumentalGroups.length<1||this.createGroupBrackets(s.InstrumentalGroups,t,i+1)}}createMusicSystemLabel(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=t;for(let h=0,u=this.staffLines.length;h<u;++h){var r,l;const i=this.staffLines[h].ParentStaff.ParentInstrument;let s;if(n)s=i.NameLabel,this.rules.RenderPartNames&&(null===(r=s)||void 0===r?void 0:r.print)||(s=new f.Label("",i.NameLabel.textAlignment,i.NameLabel.font),t=0);else{if(!this.rules.RenderPartAbbreviations||!this.rules.RenderPartNames||1===this.staffLines.length||!i.PartAbbreviation||""===i.PartAbbreviation)return;const e=i.PartAbbreviation;s=new f.Label(e,i.NameLabel.textAlignment,i.NameLabel.font)}if(null!==i&&void 0!==i&&null!==(l=i.NameLabel)&&void 0!==l&&l.print){const t=new a.GraphicalLabel(s,e,o.TextAlignmentEnum.LeftCenter,this.rules,this.boundingBox);t.setLabelPositionAndShapeBorders(),this.labels.setValue(i,t)}else t=0}this.maxLabelLength=0;const c=this.labels.values();for(let o=0,a=c.length;o<a;++o){const e=c[o];e.Label.print&&e.PositionAndShape.Size.width>this.maxLabelLength&&(this.maxLabelLength=e.PositionAndShape.Size.width,t=s)}this.updateMusicSystemStaffLineXPosition(t)}setMusicSystemLabelsYPosition(){this.labels.forEach(((e,t)=>{let i=0,n=0;for(let s=0;s<this.staffLines.length;s++)if(this.staffLines[s].ParentStaff.ParentInstrument===e){for(let t=s;t<this.staffLines.length;t++){const s=this.staffLines[t];if(s.ParentStaff.ParentInstrument!==e)break;i+=s.PositionAndShape.RelativePosition.y,n++}break}n>0&&(t.PositionAndShape.RelativePosition=new c.PointF2D(0,i/n+2))}))}checkStaffEntriesForStaffEntryLink(){let e=!1,t=!1;for(let i=0;i<this.staffLines.length-1;i++){for(let t=0,n=this.staffLines[i].Measures.length;t<n;++t){const n=this.staffLines[i].Measures[t];for(let t=0,i=n.staffEntries.length;t<i;++t)n.staffEntries[t].sourceStaffEntry.Link&&(e=!0)}for(let e=0,n=this.staffLines[i+1].Measures.length;e<n;++e){const n=this.staffLines[i+1].Measures[e];for(let e=0,i=n.staffEntries.length;e<i;++e)n.staffEntries[e].sourceStaffEntry.Link&&(t=!0)}}return!(!e||!t)}getBottomStaffLine(e){const t=e.ParentStaff.ParentInstrument.Staves;let i;for(let s=t.length-1;s>=0;s--){var n;if(null!==(n=t[s])&&void 0!==n&&n.Visible){i=t[s];break}}for(const s of e.ParentMusicSystem.staffLines)if(s.ParentStaff===i)return s}createSystemLine(e,t,i,n,s,r){throw new Error("not implemented")}createLinesForSystemLine(e){}calcBracketsWidth(){let e=0;for(let t=0,i=this.GroupBrackets.length;t<i;++t){const i=this.GroupBrackets[t];e=Math.max(e,i.PositionAndShape.Size.width)}for(let t=0,i=this.InstrumentBrackets.length;t<i;++t){const i=this.InstrumentBrackets[t];e=Math.max(e,i.PositionAndShape.Size.width)}return e}createInstrumentBracket(e,t){}createGroupBracket(e,t,i){}findFirstVisibleInstrumentInInstrumentalGroup(e){for(let t=0,i=e.InstrumentalGroups.length;t<i;++t){const i=e.InstrumentalGroups[t];if(!(i instanceof n.Instrument))return this.findFirstVisibleInstrumentInInstrumentalGroup(i);if(i.isVisible())return i}}findLastVisibleInstrumentInInstrumentalGroup(e){let t;for(let i=e.InstrumentalGroups.length-1;i>=0;i--){if(t=e.InstrumentalGroups[i],!(t instanceof n.Instrument))return this.findLastVisibleInstrumentInInstrumentalGroup(t);if(t.isVisible())return t}}updateMusicSystemStaffLineXPosition(e){for(let t=0,i=this.StaffLines.length;t<i;++t){const i=this.StaffLines[t],n=i.PositionAndShape.RelativePosition;n.x=this.maxLabelLength+e,i.PositionAndShape.RelativePosition=n,i.PositionAndShape.BorderRight=this.boundingBox.Size.width-this.maxLabelLength-e;for(let e=0;e<i.StaffLines.length;e++){const t=new c.PointF2D(i.PositionAndShape.Size.width,i.StaffLines[e].End.y);i.StaffLines[e].End=t}}}}t.MusicSystem=p},5246:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StavePositionEnum=t.VexFlowMeasure=void 0;var s=n(i(3206)).default.Flow;const r=i(5748),o=i(6954),a=i(164),l=i(6014),c=i(8365);var h=s.NoteSubGroup;const u=n(i(3065)),d=i(9479),f=i(1645),p=i(67),m=i(1336),g=i(4134),b=i(2561),v=i(9713),y=i(3123),x=i(6362),S=i(5282);class E extends r.GraphicalMeasure{constructor(e,t,i){super(e,t,i),this.octaveOffset=3,this.vfVoices={},this.vfTies=[],this.vfRepetitionWords=[],this.hasMetronomeMark=!1,this.connectors=[],this.beams={},this.autoVfBeams=[],this.autoTupletVfBeams=[],this.vfbeams={},this.tuplets={},this.vftuplets={},this.minimumStaffEntriesWidth=-1,this.rules=i?i.ParentMusicSystem.rules:t?t.Rules:new v.EngravingRules,this.resetLayout()}setAbsoluteCoordinates(e,t){this.stave.setX(e).setY(t)}resetLayout(){this.stave=new s.Stave(0,0,0,{fill_style:this.rules.StaffLineColor,space_above_staff_ln:0,space_below_staff_ln:0}),this.InitiallyActiveClef&&(this.stave.clef=l.VexFlowConverter.Clef(this.InitiallyActiveClef).type),this.stave.MeasureNumber=this.MeasureNumber,this.hasMetronomeMark=!1,this.ParentStaff&&this.setLineNumber(this.ParentStaff.StafflineCount),this.stave.setBegBarType(s.Barline.type.NONE),this.parentSourceMeasure&&this.parentSourceMeasure.endingBarStyleEnum===o.SystemLinesEnum.None&&this.stave.setEndBarType(s.Barline.type.NONE),this.updateInstructionWidth()}clean(){this.vfTies.length=0,this.connectors=[],this.resetLayout()}getLineWidth(e){switch(e){case o.SystemLinesEnum.BoldThinDots:case o.SystemLinesEnum.DotsThinBold:return 10/d.unitInPixels;case o.SystemLinesEnum.DotsBoldBoldDots:return 10/d.unitInPixels+this.rules.RepeatEndStartPadding;default:return 0}}addClefAtBegin(e){if(this.rules.RenderClefsAtBeginningOfStaffline){if(this.octaveOffset=e.OctaveOffset,e.ClefType===a.ClefEnum.TAB)this.stave.addClef("tab",void 0,void 0,void 0);else{const t=l.VexFlowConverter.Clef(e,"default");this.stave.addClef(t.type,t.size,t.annotation,s.StaveModifier.Position.BEGIN)}this.updateInstructionWidth()}}setLineNumber(e){5!==e&&(0===e?(this.stave.setNumLines(0),this.stave.getBottomLineY=function(){return this.getYForLine(this.options.num_lines)}):1===e?(this.stave.options.line_config=[{visible:!1},{visible:!1},{visible:!0},{visible:!1},{visible:!1}],this.stave.getBottomLineY=function(){return this.getYForLine(2)}):2===e?(this.stave.options.line_config=[{visible:!1},{visible:!1},{visible:!0},{visible:!0},{visible:!1}],this.stave.getBottomLineY=function(){return this.getYForLine(3)}):3===e?(this.stave.options.line_config=[{visible:!1},{visible:!0},{visible:!0},{visible:!0},{visible:!1}],this.stave.getBottomLineY=function(){return this.getYForLine(2)}):(this.stave.setNumLines(e),this.stave.getBottomLineY=function(){return this.getYForLine(this.options.num_lines)}))}addKeyAtBegin(e,t,i){var n;if(this.rules.RenderKeySignatures&&this.ShowKeySignature&&(!this.isTabMeasure||this.rules.TabKeySignatureRendered||this.rules.TabKeySignatureSpacingAdded)&&(null===(n=this.parentSourceMeasure)||void 0===n||!n.isReducedToMultiRest||this.rules.MultipleRestMeasureAddKeySignature)){if(this.stave.setKeySignature(l.VexFlowConverter.keySignature(e),l.VexFlowConverter.keySignature(t),void 0),this.isTabMeasure&&!this.rules.TabKeySignatureRendered){const e=this.stave.getModifiers();for(const t of e)if(t instanceof s.KeySignature){t.setStyle({fillStyle:"#00000000"}),t.hidden=!0;break}}this.updateInstructionWidth()}}addRhythmAtBegin(e){if(this.isTabMeasure&&!this.rules.TabTimeSignatureRendered&&!this.rules.TabTimeSignatureSpacingAdded)return;const t=l.VexFlowConverter.TimeSignature(e);this.stave.addModifier(t,s.StaveModifier.Position.BEGIN),(!this.ShowTimeSignature||this.isTabMeasure&&!this.rules.TabTimeSignatureRendered)&&(t.setStyle({fillStyle:"#00000000"}),t.hidden=!0),this.updateInstructionWidth()}addClefAtEnd(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.isTabMeasure)return;const i=l.VexFlowConverter.Clef(e,"small");if(t||!this.stave.endClef){this.stave.setEndClef(i.type,i.size,i.annotation);for(const e of this.stave.getModifiers())if(t){const t=e.originalStrokeStyle,i=e.originalFillStyle;e.getStyle()&&(t&&i?(e.getStyle().strokeStyle=t,e.getStyle().fillStyle=i):(e.getStyle().strokeStyle=null,e.getStyle().fillStyle=null))}else if("clefs"===e.getCategory()&&e.getPosition()===s.StaveModifier.Position.END&&e.type===i.type){const t="#12345600",i=e.getStyle();i&&(e.originalStrokeStyle=i.strokeStyle,e.originalFillStyle=i.fillStyle),e.setStyle({strokeStyle:t,fillStyle:t})}return this.parentSourceMeasure.hasEndClef=!0,this.updateInstructionWidth()}}addMeasureLine(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(t){case p.SystemLinePosition.MeasureBegin:e===o.SystemLinesEnum.BoldThinDots&&(i||(this.stave.modifiers[0].draw=function(e){switch(e.checkContext(),this.setRendered(),this.type){case s.Barline.type.SINGLE:this.drawVerticalBar(e,this.x,!1);break;case s.Barline.type.DOUBLE:this.drawVerticalBar(e,this.x,!0);break;case s.Barline.type.END:this.drawVerticalEndBar(e,this.x);break;case s.Barline.type.REPEAT_BEGIN:this.drawRepeatBar(e,this.x,!0);break;case s.Barline.type.REPEAT_END:this.drawRepeatBar(e,this.x,!1);break;case s.Barline.type.REPEAT_BOTH:this.drawRepeatBar(e,this.x,!1),this.drawRepeatBar(e,this.x,!0)}}),this.stave.setBegBarType(s.Barline.type.REPEAT_BEGIN));break;case p.SystemLinePosition.MeasureEnd:switch(e){case o.SystemLinesEnum.DotsBoldBoldDots:this.stave.setEndBarType(s.Barline.type.REPEAT_BOTH);break;case o.SystemLinesEnum.DotsThinBold:this.stave.setEndBarType(s.Barline.type.REPEAT_END);break;case o.SystemLinesEnum.DoubleThin:this.stave.setEndBarType(s.Barline.type.DOUBLE);break;case o.SystemLinesEnum.ThinBold:this.stave.setEndBarType(s.Barline.type.END);break;case o.SystemLinesEnum.DoubleBold:this.stave.setEndBarType(8);break;case o.SystemLinesEnum.None:this.stave.setEndBarType(s.Barline.type.NONE)}}}addMeasureNumber(){const e=this.MeasureNumber.toString(),t=w.ABOVE;this.stave.setText(e,t,{justification:1,shift_x:0,shift_y:0})}addWordRepetition(e){let t,i=s.StaveModifier.Position.END;const n=this.beginInstructionsWidth;switch(e.type){case f.RepetitionInstructionEnum.Segno:t=s.Repetition.type.SEGNO_LEFT,i=s.StaveModifier.Position.LEFT;break;case f.RepetitionInstructionEnum.Coda:t=s.Repetition.type.CODA_LEFT,i=s.StaveModifier.Position.LEFT;break;case f.RepetitionInstructionEnum.DaCapo:t=s.Repetition.type.DC;break;case f.RepetitionInstructionEnum.DalSegno:t=s.Repetition.type.DS;break;case f.RepetitionInstructionEnum.Fine:t=s.Repetition.type.FINE;break;case f.RepetitionInstructionEnum.ToCoda:t=s.Repetition.type.TO_CODA;break;case f.RepetitionInstructionEnum.DaCapoAlFine:t=s.Repetition.type.DC_AL_FINE;break;case f.RepetitionInstructionEnum.DaCapoAlCoda:t=s.Repetition.type.DC_AL_CODA;break;case f.RepetitionInstructionEnum.DalSegnoAlFine:t=s.Repetition.type.DS_AL_FINE;break;case f.RepetitionInstructionEnum.DalSegnoAlCoda:t=s.Repetition.type.DS_AL_CODA}if(t){const e=new s.Repetition(t,n,-this.rules.RepetitionSymbolsYOffset);return e.xShiftAsPercentOfStaveWidth=this.rules.RepetitionEndInstructionXShiftAsPercentOfStaveWidth,void this.stave.addModifier(e,i)}this.addVolta(e)}addVolta(e){let t=s.Volta.type.BEGIN;if(e.type===f.RepetitionInstructionEnum.Ending){switch(e.alignment){case f.AlignmentType.Begin:t=this.parentSourceMeasure.endsRepetitionEnding()?s.Volta.type.BEGIN_END:s.Volta.type.BEGIN;break;case f.AlignmentType.End:if(this.parentSourceMeasure.beginsRepetitionEnding())return;t=s.Volta.type.END}const n=this.ParentStaffLine.SkyBottomLineCalculator,r=this.PositionAndShape.AbsolutePosition.x+this.PositionAndShape.BorderMarginLeft+.4,o=Math.max(this.PositionAndShape.AbsolutePosition.x+this.PositionAndShape.BorderMarginRight,r+.4),a=n.getSkyLineMinInRange(r,o)-2;let l,c=-6.1+this.rules.VoltaOffset,h=this.rules.VoltaOffset;a<c&&(h+=a-c,c=a);const u=this.parentSourceMeasure.MeasureNumber;for(let e=0;e<this.ParentStaffLine.Measures.length;e++){var i;const t=this.ParentStaffLine.Measures[e];t instanceof E&&(t.MeasureNumber!==u-1&&t.MeasureNumber+(null===(i=t.parentSourceMeasure)||void 0===i?void 0:i.multipleRestMeasures)!==u||(l=t))}if(l){const e=l.stave.getModifiers();for(let t=0;t<e.length;t++){const i=e[t];if(i.hasOwnProperty("volta")){const e=l.ParentStaffLine.SkyBottomLineCalculator,t=l.PositionAndShape.AbsolutePosition.x+l.PositionAndShape.BorderMarginLeft+.4,n=Math.max(l.PositionAndShape.AbsolutePosition.x+l.PositionAndShape.BorderMarginRight,t+.4),s=e.getSkyLineMinInRange(t,n);s<=c?(h+=s-c,c=s):(i.y_shift=h*d.unitInPixels,l.ParentStaffLine.SkyBottomLineCalculator.updateSkyLineInRange(t,n,c))}}}h*=10,this.stave.setVoltaType(t,e.endingIndices[0],h),n.updateSkyLineInRange(r,o,c)}}setWidth(e){super.setWidth(e),this.stave.setWidth(e*d.unitInPixels)}layoutSymbols(){}draw(e){var t;const i=e.openGroup();i&&(null!==(t=i.classList)&&void 0!==t&&t.add("vf-measure"),i.id="".concat(this.MeasureNumber)),this.stave.setContext(e).draw();for(const n in this.vfVoices)this.vfVoices.hasOwnProperty(n)&&(e.save(),this.vfVoices[n].draw(e,this.stave),e.restore());for(const n in this.vfbeams)if(this.vfbeams.hasOwnProperty(n))for(const t of this.vfbeams[n])t.setContext(e).draw();if(this.autoVfBeams)for(const n of this.autoVfBeams)n.setContext(e).draw();if(!this.isTabMeasure||this.rules.TupletNumbersInTabs){if(this.autoTupletVfBeams)for(const t of this.autoTupletVfBeams)t.setContext(e).draw();for(const t in this.vftuplets)if(this.vftuplets.hasOwnProperty(t))for(let i=0;i<this.tuplets[t].length;i++){const n=this.tuplets[t][i][0],s=this.vftuplets[t][i];s&&(!n.RenderTupletNumber||n.ShowNumberNoneGivenInXml&&this.rules.TupletNumberUseShowNoneXMLValue?s.RenderTupletNumber=!1:s.RenderTupletNumber=!0,s.setContext(e).draw())}}for(const n of this.vfTies)n instanceof s.TabSlide||(n.setContext(e),n.draw());e.closeGroup();for(const n of this.connectors)e.openGroup("connector"),n.setContext(e).draw(),e.closeGroup();this.correctNotePositions()}format(){this.formatVoices&&this.formatVoices((this.PositionAndShape.Size.width-this.beginInstructionsWidth-this.endInstructionsWidth)*d.unitInPixels,this)}correctNotePositions(){if(this.isTabMeasure)for(const e of this.getVoicesWithinMeasure())for(const t of e.VoiceEntries)for(const e of t.Notes){const t=e,i=this.rules.GNote(e);t.StringNumberTab>=0&&(i.parentVoiceEntry.PositionAndShape.RelativePosition.y=(t.StringNumberTab-1)*this.rules.TabStaffInterlineHeightForBboxes)}else for(const e of this.getVoicesWithinMeasure())for(const t of e.VoiceEntries)for(const e of t.Notes){if(e.isRest())continue;const t=this.rules.GNote(e);if(null===t||void 0===t||!t.vfnote)return;const i=t.vfnote[0];let n=0;t.parentVoiceEntry.parentVoiceEntry.StemDirection===m.StemDirectionType.Up&&"w"!==t.vfnote[0].getDuration()?n+=3.5:n+=.5,n+=-t.notehead(i).line+t.parentVoiceEntry.notes.last().notehead().line,t.PositionAndShape.RelativePosition.y=n}}getVoicesWithinMeasure(){const e=[];for(const t of this.staffEntries)for(const i of t.graphicalVoiceEntries)-1===e.indexOf(i.parentVoiceEntry.ParentVoice)&&e.push(i.parentVoiceEntry.ParentVoice);return e}getGraphicalVoiceEntriesPerVoice(e){const t=[];for(const i of this.staffEntries)for(const n of i.graphicalVoiceEntries)n.parentVoiceEntry.ParentVoice===e&&t.push(n);return t}getRestFilledVexFlowStaveNotesPerVoice(e){let t,i=this.getGraphicalVoiceEntriesPerVoice(e);for(let r=0;r<i.length;r++){const e=i[r],n=e.notes[0].sourceNote.getAbsoluteTimestamp();let s=new b.Fraction;for(const t of e.notes){const e=b.Fraction.plus(t.sourceNote.getAbsoluteTimestamp(),t.sourceNote.Length);s.lt(e)&&(s=e)}if(t){const e=b.Fraction.minus(n,t);if(e.RealValue>0){u.default.trace("Ghost Found in between (measure ".concat(this.MeasureNumber,")"));const t=this.createGhostGves(e);i.splice(r,0,...t),r+=t.length}}else{const e=b.Fraction.minus(n,this.parentSourceMeasure.AbsoluteTimestamp);if(e.RealValue>0){u.default.trace("Ghost Found at start (measure ".concat(this.MeasureNumber,")"));const t=this.createGhostGves(e);i.splice(0,0,...t),r+=t.length}}t=s}const n=b.Fraction.plus(this.parentSourceMeasure.AbsoluteTimestamp,this.parentSourceMeasure.Duration),s=b.Fraction.minus(n,t);if(s.RealValue>0){u.default.trace("Ghost Found at end (measure ".concat(this.MeasureNumber,")"));const e=this.createGhostGves(s);i=i.concat(e)}return i}createGhostGves(e){const t=l.VexFlowConverter.GhostNotes(e),i=[];for(const n of t){const e=new g.VexFlowVoiceEntry(void 0,void 0,this.rules);e.vfStaveNote=n,i.push(e)}return i}handleBeam(e,t){const i=e.sourceNote.ParentVoiceEntry.ParentVoice.VoiceId;let n,s=this.beams[i];s||(s=this.beams[i]=[]);for(const o of s)o[0]===t&&(n=o);n||(n=[t,[]],s.push(n));const r=e.parentVoiceEntry;n[1].indexOf(r)<0&&n[1].push(r)}handleTuplet(e,t){const i=e.sourceNote.ParentVoiceEntry.ParentVoice.VoiceId;t=e.sourceNote.NoteTuplet;let n,s=this.tuplets[i];s||(s=this.tuplets[i]=[]);for(const o of s)o[0]===t&&(n=o);n||(n=[t,[]],s.push(n));const r=e.parentVoiceEntry;n[1].indexOf(r)<0&&n[1].push(r)}finalizeBeams(){if(this.vfbeams={},this.isTabMeasure&&!this.rules.TabBeamsRendered)return;const e=[];for(const t in this.beams)if(this.beams.hasOwnProperty(t)){let i=this.vfbeams[t];i||(i=this.vfbeams[t]=[]);for(const n of this.beams[t]){let t=!1;for(const e of n[0].Notes)if(e.Length.RealValue>=new b.Fraction(1,4).RealValue&&(!e.TypeLength||e.TypeLength.RealValue>.125)){t=!0;break}if(t){u.default.debug("Beam between note >= quarter, likely tremolo, currently unsupported. continuing.");continue}const r=[],o=n[0],a=n[1];let l=!0;for(const e of a)e.parentVoiceEntry.ParentVoice===o.Notes[0].ParentVoiceEntry.ParentVoice&&(l=e.parentVoiceEntry.WantedStemDirection===m.StemDirectionType.Undefined);let c,h=!1;const d=[];for(const i of a){const t=i.vfStaveNote;t&&(r.push(t),e.push(t)),i.parentVoiceEntry.IsGrace&&(h=!0),i.parentVoiceEntry.StemColor&&this.rules.ColoringEnabled&&d.push(i.parentVoiceEntry.StemColor)}if(r.length>1){const e=new s.Beam(r,l);if(h&&(e.render_options.beam_width=3,e.render_options.partial_beam_length=4),d.length>=2&&this.rules.ColorBeams){c=d[0];for(const e of d)if(e!==c){c=void 0;break}e.setStyle({fillStyle:c,strokeStyle:c})}this.rules.FlatBeams&&(e.render_options.flat_beams=!0,e.render_options.flat_beam_offset=this.rules.FlatBeamOffset,e.render_options.flat_beam_offset_per_beam=this.rules.FlatBeamOffsetPerBeam),i.push(e)}else u.default.debug("Warning! Beam with no notes!")}}this.rules.AutoBeamNotes&&this.autoBeamNotes(e)}autoBeamNotes(e){if(!this.rules.AutoBeamTabs&&this.isTabMeasure)return;let t,i=60,n=[],r=[],o=[];this.autoTupletVfBeams=[];const a=[];this.autoVfBeams=[];let l=this.parentSourceMeasure.ActiveTimeSignature;l||(l=this.parentSourceMeasure.Duration);for(const d of this.staffEntries)for(const h of d.graphicalVoiceEntries){const u=h.vfStaveNote,f=h.notes[0],p={vfStaveNote:u,sourceNote:f.sourceNote},m=d.relInMeasureTimestamp.isOnBeat(l),g=r.length>=2,v=f.sourceNote.Length.RealValue-new b.Fraction(1,4).RealValue>-b.Fraction.FloatInaccuracyTolerance,y=h.parentVoiceEntry.IsGrace||v||e.contains(u);if(y||m){if(g){for(const e of r)n.push(e);a.push(n.slice()),n=[]}if(r=[],y)continue}const x=h.notes[0].sourceNote.NoteTuplet;if(x){let e=!1;for(const t of x.Notes){for(const i of t)if(i.NoteTypeXml>=S.NoteType.QUARTER||i.ParentVoiceEntry.IsGrace||i.isRest()&&!this.rules.AutoBeamOptions.beam_rests){e=!0;break}if(e)break}if(t){if(t!==x){if(o.length>1){const e=[];for(const i of o)e.push(i.vfStaveNote);const t=new s.Beam(e,!0);this.rules.FlatBeams&&(t.render_options.flat_beams=!0,t.render_options.flat_beam_offset=this.rules.FlatBeamOffset,t.render_options.flat_beam_offset_per_beam=this.rules.FlatBeamOffsetPerBeam),this.autoTupletVfBeams.push(t);const n=new c.Beam(i++);n.AutoGenerated=!0;for(const i of o)n.addNoteToBeam(i.sourceNote)}o=[],t=x}}else t=x;e||o.push(p)}else t=void 0,r.push(p)}if(o.length>=2){const e=[];for(const i of o)e.push(i.vfStaveNote);const t=new s.Beam(e,!0);this.rules.FlatBeams&&(t.render_options.flat_beams=!0,t.render_options.flat_beam_offset=this.rules.FlatBeamOffset,t.render_options.flat_beam_offset_per_beam=this.rules.FlatBeamOffsetPerBeam),this.autoTupletVfBeams.push(t);const n=new c.Beam(i++);n.AutoGenerated=!0;for(const i of o)n.addNoteToBeam(i.sourceNote)}if(r.length>=2){for(const e of r)n.push(e);a.push(n)}const h=this.rules.AutoBeamOptions,u={beam_middle_only:h.beam_middle_rests_only,beam_rests:h.beam_rests,maintain_stem_directions:h.maintain_stem_directions};if(h.groups&&h.groups.length){const e=[];for(const t of h.groups)e.push(new s.Fraction(t[0],t[1]));u.groups=e}for(const c of a){const e=[];for(const i of c)e.push(i.vfStaveNote);const t=s.Beam.generateBeams(e,u);for(const i of t)this.rules.FlatBeams&&(i.render_options.flat_beams=!0,i.render_options.flat_beam_offset=this.rules.FlatBeamOffset,i.render_options.flat_beam_offset_per_beam=this.rules.FlatBeamOffsetPerBeam),this.autoVfBeams.push(i)}}finalizeTuplets(){this.vftuplets={};for(const e in this.tuplets)if(this.tuplets.hasOwnProperty(e)){let t=this.vftuplets[e];t||(t=this.vftuplets[e]=[]);for(const i of this.tuplets[e]){const e=[],n=i[1];for(const t of n)e.push(t.vfStaveNote);if(e.length>1){const n=i[0],r=n.Notes[0][0].NormalNotes,o=n.shouldBeBracketed(this.rules.TupletsBracketedUseXMLValue,this.rules.TupletsBracketed,this.rules.TripletsBracketed,this.isTabMeasure,this.rules.TabTupletsBracketed);let a=s.Tuplet.LOCATION_TOP;n.tupletLabelNumberPlacement===x.PlacementEnum.Below&&(a=s.Tuplet.LOCATION_BOTTOM);let l=0;if(this.isTabMeasure&&(l=10*this.rules.TabTupletYOffsetBottom,a===s.Tuplet.LOCATION_TOP)){l=-10*this.rules.TabTupletYOffsetTop;const e=n.Notes[0][0];(null===e||void 0===e?void 0:e.hasTabEffects())&&(l-=10*this.rules.TabTupletYOffsetEffects)}const c=new s.Tuplet(e,{bracketed:o,location:a,notes_occupied:r,num_notes:n.TupletLabelNumber,ratioed:n.Ratioed,y_offset:l});t.push(c)}else u.default.debug("Warning! Tuplet with no notes! Trying to ignore, but this is a serious problem.")}}}layoutStaffEntry(e){}graphicalMeasureCreatedCalculations(){let e,t=[];const i=[];for(const r of this.staffEntries){e=!1,t=[];for(const n of r.graphicalVoiceEntries)if(n.parentVoiceEntry.IsGrace)t.push(n),i.push(n),e||(e=n.parentVoiceEntry.GraceSlur);else if(n.vfStaveNote=l.VexFlowConverter.StaveNote(n),t.length>0){const i=[];for(let e=0;e<t.length;e++){const n=t[e];n.GraceSlash=n.parentVoiceEntry.GraceNoteSlash,e>0&&(n.GraceSlash=!1);const s=l.VexFlowConverter.StaveNote(n);n.vfStaveNote=s,i.push(s)}const r=new s.GraceNoteGroup(i,e);let o=this.rules.GraceNoteGroupXMargin;i.length>1&&(o/=3),r.spacing=10*o,n.vfStaveNote.addModifier(0,r),t=[]}}if(t.length>0)for(const s of t)s.vfStaveNote=l.VexFlowConverter.StaveNote(s),s.parentVoiceEntry.GraceAfterMainNote=!0;this.finalizeBeams(),this.finalizeTuplets();const n=this.getVoicesWithinMeasure();if(this.rules.RenderFingerings)for(const s of this.staffEntries)s.setModifierXOffsets();for(const r of n){if(!r)continue;this.vfVoices[r.VoiceId]=new s.Voice({beat_value:this.parentSourceMeasure.ActiveTimeSignature.Denominator,num_beats:this.parentSourceMeasure.ActiveTimeSignature.Numerator,resolution:s.RESOLUTION}).setMode(s.Voice.Mode.SOFT);const e=this.getRestFilledVexFlowStaveNotesPerVoice(r);for(const t of e){if(t.parentVoiceEntry&&t.parentVoiceEntry.IsGrace&&!t.parentVoiceEntry.GraceAfterMainNote)continue;const e=t;if(0===e.vfStaveNote.getTicks().denominator&&(e.vfStaveNote.getTicks().denominator=1),0===t.notes.length||!t.notes[0]||!t.notes[0].sourceNote.PrintObject){this.vfVoices[r.VoiceId].addTickable(e.vfStaveNote);continue}const i=e.parentStaffEntry;if(i&&i.vfClefBefore){const t=new h([i.vfClefBefore]);e.vfStaveNote.getCategory&&"stavenotes"===e.vfStaveNote.getCategory()&&e.vfStaveNote.addModifier(0,t)}t.parentVoiceEntry&&this.rules.RenderFingerings&&(this.rules.FingeringPosition!==x.PlacementEnum.Left&&this.rules.FingeringPosition!==x.PlacementEnum.Right||this.createFingerings(t),this.createStringNumber(t)),this.createArpeggio(t),this.vfVoices[r.VoiceId].addTickable(e.vfStaveNote)}}this.setStemDirectionFromVexFlow();for(const s of i)this.createFingerings(s),this.createStringNumber(s),this.createArpeggio(s);this.createArticulations(),this.createOrnaments()}createArpeggio(e){if(e.parentVoiceEntry&&e.parentVoiceEntry.Arpeggio){const t=e.parentVoiceEntry.Arpeggio;if(e.notes&&e.notes.length>1){const i=l.VexFlowConverter.StrokeTypeFromArpeggioType(t.type),n=new s.Stroke(i,{all_voices:this.rules.ArpeggiosGoAcrossVoices});this.rules.RenderArpeggios&&e.vfStaveNote.addStroke(0,n)}else u.default.debug("[OSMD] arpeggio in measure ".concat(this.MeasureNumber," could not be drawn.\n                voice entry had less than two notes, arpeggio is likely between voice entries, not currently supported in Vexflow."))}}setStemDirectionFromVexFlow(){for(const e of this.staffEntries)for(const t of e.graphicalVoiceEntries)for(const e of t.notes){const i=e.vfnote;if(i&&i[0])switch(i[0].getStemDirection()){case s.Stem.UP:t.parentVoiceEntry.StemDirection=m.StemDirectionType.Up;break;case s.Stem.DOWN:t.parentVoiceEntry.StemDirection=m.StemDirectionType.Down}}}createArticulations(){for(let e=0,t=this.staffEntries.length;e<t;++e){const t=this.staffEntries[e].graphicalVoiceEntries;for(const e of t){const t=e.vfStaveNote;l.VexFlowConverter.generateArticulations(t,e.notes[0],this.rules)}}}createOrnaments(){for(let e=0,t=this.staffEntries.length;e<t;++e){const t=this.staffEntries[e].graphicalVoiceEntries;for(const e in t)if(t.hasOwnProperty(e)){const i=t[e].vfStaveNote,n=t[e].notes[0].sourceNote.ParentVoiceEntry.OrnamentContainer;n&&l.VexFlowConverter.generateOrnaments(i,n)}}}createFingerings(e){const t=e;let i=0;for(const s of e.notes)s.sourceNote.Fingering&&i++;const n=[];for(const s of e.parentVoiceEntry.TechnicalInstructions)s.type===y.TechnicalInstructionType.Fingering&&n.push(s);if(n.length>i){let t=0;for(const i of e.notes)if(i.sourceNote.Fingering)t++;else{if(t>n.length-1)break;i.sourceNote.Fingering=n[t],t++}}let r=-1;for(const o of e.notes){const n=o.sourceNote.Fingering;if(!n){r++;continue}r++;let a=this.rules.FingeringPosition;this.rules.FingeringPositionGrace===x.PlacementEnum.AboveOrBelow&&(this.isUpperStaffOfInstrument()?a=x.PlacementEnum.Above:this.isLowerStaffOfInstrument()&&(a=x.PlacementEnum.Below)),n.placement!==x.PlacementEnum.NotYetDefined&&(a=n.placement);let l,c=this.rules.FingeringOffsetX;switch(a){default:case x.PlacementEnum.Left:l=s.StaveModifier.Position.LEFT,c-=o.baseFingeringXOffset*d.unitInPixels;break;case x.PlacementEnum.Right:l=s.StaveModifier.Position.RIGHT,c+=o.baseFingeringXOffset*d.unitInPixels;break;case x.PlacementEnum.Above:l=s.StaveModifier.Position.ABOVE;break;case x.PlacementEnum.Below:l=s.StaveModifier.Position.BELOW;break;case x.PlacementEnum.NotYetDefined:const t=e.parentStaffEntry.sourceStaffEntry.ParentStaff;e.notes.length>1||e.parentStaffEntry.graphicalVoiceEntries.length>1?l=s.StaveModifier.Position.LEFT:0===t.idInMusicSheet?(l=s.StaveModifier.Position.ABOVE,a=x.PlacementEnum.Above):(l=s.StaveModifier.Position.BELOW,a=x.PlacementEnum.Below)}const h=new s.FretHandFinger(n.value);if(h.setPosition(l),h.setOffsetX(c),a===x.PlacementEnum.Above||a===x.PlacementEnum.Below){const e=a===x.PlacementEnum.Above?-1:1,o=a===x.PlacementEnum.Above?r:i-1-r;if(this.rules.FingeringInsideStafflines&&i>1){const t=h.getWidth()/2,n=2.5*i;h.setOffsetY(e*(o+n)*t)}else if(!this.rules.FingeringInsideStafflines){const i=new s.StringNumber(n.value);i.radius=0,i.setPosition(l),i.setOffsetY(e*o*i.getWidth()*2/3),t.vfStaveNote.addModifier(r,i);continue}}t.vfStaveNote.addModifier(r,h)}}createStringNumber(e){if(!this.rules.RenderStringNumbersClassical)return;const t=e;e.notes.forEach(((i,n)=>{const r=i.sourceNote.StringInstruction;if(r){let o=r.value;switch(o){case"1":o="I";break;case"2":o="II";break;case"3":o="III";break;case"4":o="IV";break;case"5":o="V";break;case"6":o="VI"}const a=new s.StringNumber(o);a.radius=0;const l=-this.rules.StringNumberOffsetY;e.notes.length>1||e.parentStaffEntry.graphicalVoiceEntries.length>1?(a.setOffsetX(13*i.baseStringNumberXOffset),a.setPosition(s.Modifier.Position.RIGHT)):a.setPosition(s.Modifier.Position.ABOVE),a.setOffsetY(l),t.vfStaveNote.addModifier(n,a)}}))}lineTo(e,t){const i=new s.StaveConnector(e.getVFStave(),this.stave);i.setType(t),this.connectors.push(i)}getVFStave(){return this.stave}updateInstructionWidth(){let e=0,t=0;const i=this.stave.getModifiers();for(const n of i)n.getPosition()===w.BEGIN?e+=n.getWidth()+n.getPadding(void 0):n.getPosition()===w.END&&(t+=n.getWidth()+n.getPadding(void 0));this.beginInstructionsWidth=(null!==e&&void 0!==e?e:0)/d.unitInPixels,this.endInstructionsWidth=(null!==t&&void 0!==t?t:0)/d.unitInPixels}addStaveTie(e,t){this.vfTies.push(e),t.vfTie=e,t.Tie.TieDirection===x.PlacementEnum.Below&&e.setDirection(1)}}var w;t.VexFlowMeasure=E,function(e){e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.ABOVE=3]="ABOVE",e[e.BELOW=4]="BELOW",e[e.BEGIN=5]="BEGIN",e[e.END=6]="END"}(w||(t.StavePositionEnum=w={}))},5274:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Tie=void 0;const s=i(2561),r=i(6362),o=n(i(3065));t.Tie=class{constructor(e,t){this.notes=[],this.TieNumber=1,this.TieDirection=r.PlacementEnum.NotYetDefined,this.NoteIndexToTieDirection={},this.AddNote(e),this.type=t}getTieDirection(e){if(!e)return this.TieDirection;for(let t=0;t<this.Notes.length;t++)if(this.Notes[t]===e)return this.NoteIndexToTieDirection[t]||this.TieDirection;return o.default.debug("tie.getTieDuration note not in tie.Notes"),this.TieDirection}get Notes(){return this.notes}get Type(){return this.type}get StartNote(){return this.notes[0]}get Duration(){const e=new s.Fraction;for(const t of this.notes)e.Add(t.Length);return e}get Pitch(){return this.StartNote.Pitch}AddNote(e){this.notes.push(e),e.NoteTie=this}}},5282:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoteTypeHandler=t.NoteType=void 0;const n=i(2561),s=i(9767),r=i(7307);var o;!function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e._1024th=1]="_1024th",e[e._512th=2]="_512th",e[e._256th=3]="_256th",e[e._128th=4]="_128th",e[e._64th=5]="_64th",e[e._32nd=6]="_32nd",e[e._16th=7]="_16th",e[e.EIGTH=8]="EIGTH",e[e.QUARTER=9]="QUARTER",e[e.HALF=10]="HALF",e[e.WHOLE=11]="WHOLE",e[e.BREVE=12]="BREVE",e[e.LONG=13]="LONG",e[e.MAXIMA=14]="MAXIMA"}(o||(t.NoteType=o={}));class a{static NoteTypeToString(e){return this.NoteTypeXmlValues[e]}static StringToNoteType(e){const t=this.NoteTypeXmlValues.indexOf(e);return-1!==t?t:o.UNDEFINED}static getNoteDurationFromType(e){switch(e){case"1024th":return new n.Fraction(1,1024);case"512th":return new n.Fraction(1,512);case"256th":return new n.Fraction(1,256);case"128th":return new n.Fraction(1,128);case"64th":return new n.Fraction(1,64);case"32th":case"32nd":return new n.Fraction(1,32);case"16th":return new n.Fraction(1,16);case"eighth":return new n.Fraction(1,8);case"quarter":return new n.Fraction(1,4);case"half":return new n.Fraction(1,2);case"whole":return new n.Fraction(1,1);case"breve":return new n.Fraction(2,1);case"long":return new n.Fraction(4,1);case"maxima":return new n.Fraction(8,1);default:{const e=s.ITextTranslation.translateText("ReaderErrorMessages/NoteDurationError","Invalid note duration.");throw new r.MusicSheetReadingException(e)}}}}t.NoteTypeHandler=a,a.NoteTypeXmlValues=["","1024th","512th","256th","128th","64th","32nd","16th","eigth","quarter","half","whole","breve","long","maxima"]},5294:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SubInstrument=void 0;const s=i(164),r=n(i(3065));class o{constructor(e){this.parentInstrument=e,this.fixedKey=-1,this.name=this.parseMidiInstrument(this.parentInstrument.Name),this.midiInstrumentID=o.midiInstrument[this.name],this.volume=1}get ParentInstrument(){return this.parentInstrument}static isPianoInstrument(e){return e===s.MidiInstrument.Acoustic_Grand_Piano||e===s.MidiInstrument.Bright_Acoustic_Piano||e===s.MidiInstrument.Electric_Grand_Piano||e===s.MidiInstrument.Electric_Piano_1||e===s.MidiInstrument.Electric_Piano_2}setMidiInstrument(e){this.midiInstrumentID=o.midiInstrument[this.parseMidiInstrument(e)]}parseMidiInstrument(e){try{if(e){const t=e.toLowerCase().trim();for(const e in o.midiInstrument)if(-1!==t.indexOf(e))return e}if(this.parentInstrument.Name){const e=this.parentInstrument.Name.toLowerCase().trim();for(const t in o.midiInstrument)if(-1!==e.indexOf(t))return t}}catch(e){r.default.error("Error parsing MIDI Instrument. Default to Grand Piano.")}return"unnamed"}}t.SubInstrument=o,o.midiInstrument={alt:s.MidiInstrument.Synth_Voice,alto:s.MidiInstrument.Synth_Voice,banjo:s.MidiInstrument.Banjo,bariton:s.MidiInstrument.Synth_Voice,baritone:s.MidiInstrument.Synth_Voice,bass:s.MidiInstrument.Synth_Voice,blockfloete:s.MidiInstrument.Recorder,brass:s.MidiInstrument.Trombone,bratsche:s.MidiInstrument.Viola,cello:s.MidiInstrument.Cello,clarinet:s.MidiInstrument.Clarinet,contrabass:s.MidiInstrument.Contrabass,drums:s.MidiInstrument.Percussion,flute:s.MidiInstrument.Flute,floete:s.MidiInstrument.Flute,frenchhorn:s.MidiInstrument.French_Horn,gitarre:s.MidiInstrument.Acoustic_Guitar_nylon,guitar:s.MidiInstrument.Acoustic_Guitar_nylon,harfe:s.MidiInstrument.Orchestral_Harp,harp:s.MidiInstrument.Orchestral_Harp,klarinette:s.MidiInstrument.Clarinet,klavier:s.MidiInstrument.Acoustic_Grand_Piano,kontrabass:s.MidiInstrument.Contrabass,oboe:s.MidiInstrument.Oboe,organ:s.MidiInstrument.Church_Organ,orgel:s.MidiInstrument.Church_Organ,orgue:s.MidiInstrument.Church_Organ,percussion:s.MidiInstrument.Percussion,piano:s.MidiInstrument.Acoustic_Grand_Piano,piccolo:s.MidiInstrument.Piccolo,posaune:s.MidiInstrument.Trombone,recorder:s.MidiInstrument.Recorder,sax:s.MidiInstrument.Tenor_Sax,schlagwerk:s.MidiInstrument.Percussion,schlagzeug:s.MidiInstrument.Percussion,sopran:s.MidiInstrument.Synth_Voice,steeldrum:s.MidiInstrument.Steel_Drums,streicher:s.MidiInstrument.String_Ensemble_1,strings:s.MidiInstrument.String_Ensemble_1,tenor:s.MidiInstrument.Synth_Voice,tpt:s.MidiInstrument.Trumpet,trombone:s.MidiInstrument.Trombone,trompete:s.MidiInstrument.Trumpet,trumpet:s.MidiInstrument.Trumpet,tuba:s.MidiInstrument.Tuba,unnamed:s.MidiInstrument.Acoustic_Grand_Piano,viola:s.MidiInstrument.Viola,violin:s.MidiInstrument.Violin,"violon-c":s.MidiInstrument.Cello,"violon.":s.MidiInstrument.Violin,voice:s.MidiInstrument.Synth_Voice,woodblock:s.MidiInstrument.Woodblock}},5332:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TempoExpressionEntry=t.MultiTempoExpression=void 0;const n=i(2561),s=i(9161),r=i(6362),o=i(2570),a=i(2221);t.MultiTempoExpression=class{constructor(e,t){this.expressions=[],this.sourceMeasure=e,this.timestamp=t}get Timestamp(){return this.timestamp}get AbsoluteTimestamp(){return n.Fraction.plus(this.sourceMeasure.AbsoluteTimestamp,this.timestamp)}get SourceMeasureParent(){return this.sourceMeasure}set SourceMeasureParent(e){this.sourceMeasure=e}get InstantaneousTempo(){return this.instantaneousTempo}get ContinuousTempo(){return this.continuousTempo}get EntriesList(){return this.expressions}get CombinedExpressionsText(){return this.combinedExpressionsText}set CombinedExpressionsText(e){this.combinedExpressionsText=e}getPlacementOfFirstEntry(){let e=r.PlacementEnum.Above;return this.expressions.length>0&&(this.expressions[0].Expression instanceof s.InstantaneousTempoExpression||this.expressions[0].Expression instanceof a.ContinuousTempoExpression)&&(e=this.expressions[0].Expression.Placement),e}getFontstyleOfFirstEntry(){let e=o.FontStyles.Regular;return this.expressions[0].Expression instanceof s.InstantaneousTempoExpression?e=o.FontStyles.Bold:this.expressions[0].Expression instanceof a.ContinuousTempoExpression&&(e=o.FontStyles.Italic),e}addExpression(e,t){if(this.checkIfAlreadyExists(e))return;e instanceof s.InstantaneousTempoExpression?this.instantaneousTempo=e:e instanceof a.ContinuousTempoExpression&&(this.continuousTempo=e);const i=new l;i.prefix=t,i.Expression=e,i.label=e.Label,this.expressions.push(i)}CompareTo(e){return this.Timestamp.RealValue>e.Timestamp.RealValue?1:this.Timestamp.RealValue<e.Timestamp.RealValue?-1:0}checkIfAlreadyExists(e){for(const t of this.expressions)if(t.label===e.Label)return!0;return!1}clearInstantaneousTempo(){this.instantaneousTempo=void 0}clearContinuousTempo(){this.continuousTempo=void 0}};class l{get Expression(){return this.expression}set Expression(e){this.expression=e}}t.TempoExpressionEntry=l},5340:e=>{"use strict";e.exports="attribute vec4 a_position;\nvarying vec4 v_position;\n\nvoid main() {\n    gl_Position = a_position;\n    v_position = a_position;\n}\n"},5364:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractNotationInstruction=void 0,t.AbstractNotationInstruction=class{constructor(e){this.printObject=!0,this.parent=e}get Parent(){return this.parent}set Parent(e){this.parent=e}get PrintObject(){return this.printObject}set PrintObject(e){this.printObject=e}}},5377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5468:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowSlur=t.CurvePositionEnum=void 0;var s,r=n(i(3206)).default.Flow;!function(e){e[e.NEAR_HEAD=1]="NEAR_HEAD",e[e.NEAR_TOP=2]="NEAR_TOP"}(s||(t.CurvePositionEnum=s={}));class o{constructor(e){this.vfStartNote=void 0,this.vfEndNote=void 0,this.parentSlur=e}static createFromVexflowSlur(e){return new o(e.parentSlur)}get vfSlur(){return this.parentSlur}curve_Options(){return{cps:[{x:0,y:10},{x:0,y:10}],invert:!1,position:s.NEAR_TOP,position_end:s.NEAR_TOP,spacing:2,thickness:2,x_shift:0,y_shift:10}}createVexFlowCurve(){this.vfCurve=new r.Curve(this.vfStartNote,this.vfEndNote,void 0)}}t.VexFlowSlur=o},5479:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkyBottomLineCalculationResult=void 0,t.SkyBottomLineCalculationResult=class{constructor(e,t){this.skyLine=e,this.bottomLine=t}}},5534:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Voice=void 0,t.Voice=class{constructor(e,t){this.voiceEntries=[],this.volume=1,this.parent=e,this.visible=!0,this.audible=!0,this.following=!0,this.voiceId=t}get VoiceEntries(){return this.voiceEntries}get Parent(){return this.parent}get Visible(){return this.visible}set Visible(e){this.visible=e}get Audible(){return this.audible}set Audible(e){this.audible=e}get Following(){return this.following}set Following(e){this.following=e}get VoiceId(){return this.voiceId}get Volume(){return this.volume}set Volume(e){this.volume=e}}},5678:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5748:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalMeasure=void 0;const n=i(7741),s=i(2561),r=i(6438),o=i(9409);class a extends n.GraphicalObject{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(),this.hasOnlyRests=!1,this.measureNumber=-1,this.ShowTimeSignature=!0,this.ShowKeySignature=!0,this.isTabMeasure=!1,this.parentStaff=e,this.parentSourceMeasure=t,this.parentStaffLine=i,i?(this.parentStaff=i.ParentStaff,this.PositionAndShape=new r.BoundingBox(this,i.PositionAndShape)):this.PositionAndShape=new r.BoundingBox(this),this.PositionAndShape.BorderBottom=4,this.parentSourceMeasure&&(this.measureNumber=this.parentSourceMeasure.MeasureNumber),this.staffEntries=[]}get ParentStaff(){return this.parentStaff}get ParentMusicSystem(){return this.parentMusicSystem}set ParentMusicSystem(e){this.parentMusicSystem=e}get MeasureNumber(){return this.measureNumber}get FirstInstructionStaffEntry(){return this.firstInstructionStaffEntry}set FirstInstructionStaffEntry(e){this.firstInstructionStaffEntry=e}get LastInstructionStaffEntry(){return this.lastInstructionStaffEntry}set LastInstructionStaffEntry(e){this.lastInstructionStaffEntry=e}get ParentStaffLine(){return this.parentStaffLine}set ParentStaffLine(e){this.parentStaffLine=e,this.parentStaffLine&&(this.PositionAndShape.Parent=this.parentStaffLine.PositionAndShape)}resetLayout(){throw new Error("not implemented")}getLineWidth(e){throw new Error("not implemented")}addClefAtBegin(e){throw new Error("not implemented")}addKeyAtBegin(e,t,i){throw new Error("not implemented")}addRhythmAtBegin(e){throw new Error("not implemented")}addClefAtEnd(e){throw new Error("not implemented")}setPositionInStaffline(e){this.PositionAndShape.RelativePosition=new o.PointF2D(e,0)}setWidth(e){this.PositionAndShape.BorderRight=e}layoutSymbols(){throw new Error("not implemented")}findGraphicalStaffEntryFromTimestamp(e){for(let i=0,n=this.staffEntries.length;i<n;++i){var t;const n=this.staffEntries[i];if(null!==(t=n.relInMeasureTimestamp)&&void 0!==t&&t.Equals(e))return n}}findGraphicalStaffEntryFromVerticalContainerTimestamp(e){for(let t=0,i=this.staffEntries.length;t<i;++t){const i=this.staffEntries[t];if(i.sourceStaffEntry.VerticalContainerParent.getAbsoluteTimestamp().Equals(e))return i}}hasSameDurationWithSourceMeasureParent(){const e=new s.Fraction(0,1);for(let t=0,i=this.staffEntries.length;t<i;++t){const i=this.staffEntries[t];e.Add(i.findStaffEntryMinNoteLength())}return e.Equals(this.parentSourceMeasure.Duration)}hasMultipleVoices(){if(0===this.staffEntries.length)return!1;const e=[];for(let t=0,i=this.staffEntries.length;t<i;++t){const i=this.staffEntries[t];for(let t=0,n=i.sourceStaffEntry.VoiceEntries.length;t<n;++t){const n=i.sourceStaffEntry.VoiceEntries[t];e.indexOf(n.ParentVoice)<0&&e.push(n.ParentVoice)}}return e.length>1}isVisible(){return this.ParentStaff.isVisible()}isMultiRestMeasure(){return void 0!==this.multiRestElement}getGraphicalMeasureDurationFromStaffEntries(){let e=new s.Fraction(0,1);const t=[];for(let i=0,n=this.staffEntries.length;i<n;++i){const e=this.staffEntries[i];for(let i=0,n=e.sourceStaffEntry.VoiceEntries.length;i<n;++i){const n=e.sourceStaffEntry.VoiceEntries[i];t.indexOf(n.ParentVoice)<0&&t.push(n.ParentVoice)}}for(let i=0,n=t.length;i<n;++i){const n=t[i],r=new s.Fraction(0,1);for(const e of this.staffEntries)for(const t of e.graphicalVoiceEntries)t.parentVoiceEntry.ParentVoice===n&&t.notes.length>0&&r.Add(t.notes[0].graphicalNoteLength);e.lt(r)&&(e=s.Fraction.createFromFraction(r))}return e}addGraphicalStaffEntry(e){this.staffEntries.push(e)}addGraphicalStaffEntryAtTimestamp(e){if(e)if(0===this.staffEntries.length||this.staffEntries[this.staffEntries.length-1].relInMeasureTimestamp.lt(e.relInMeasureTimestamp))this.staffEntries.push(e);else for(let t=this.staffEntries.length-1;t>=0;t--){if(this.staffEntries[t].relInMeasureTimestamp.lt(e.relInMeasureTimestamp)){this.staffEntries.splice(t+1,0,e);break}0===t&&this.staffEntries.splice(t,0,e)}}isPianoRightHand(){return this.isUpperStaffOfInstrument()}isPianoLeftHand(){return this.isLowerStaffOfInstrument()}isUpperStaffOfInstrument(){return 1===this.parentStaff.ParentInstrument.Staves.length||this.ParentStaff===this.parentStaff.ParentInstrument.Staves[0]}isLowerStaffOfInstrument(){return 1!==this.parentStaff.ParentInstrument.Staves.length&&this.ParentStaff===this.ParentStaff.ParentInstrument.Staves.last()}beginsWithLineRepetition(){const e=this.parentSourceMeasure;return!!e&&e.beginsWithLineRepetition()}endsWithLineRepetition(){const e=this.parentSourceMeasure;return!!e&&e.endsWithLineRepetition()}beginsWithWordRepetition(){const e=this.parentSourceMeasure;return!!e&&e.beginsWithWordRepetition()}endsWithWordRepetition(){const e=this.parentSourceMeasure;return!!e&&e.endsWithWordRepetition()}getTransposedHalftones(){return this.parentStaff.ParentInstrument.GetMusicSheet.Transpose+this.parentStaff.ParentInstrument.Transpose}}t.GraphicalMeasure=a},5749:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSymbolModuleFactory=void 0;const n=i(7631),s=i(6302);t.MusicSymbolModuleFactory=class{static createRepetitionInstructionReader(){return new n.RepetitionInstructionReader}static createRepetitionCalculator(){return new s.RepetitionCalculator}}},5824:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalUnknownExpression=void 0;const s=i(9490),r=i(6362),o=n(i(3065));class a extends s.AbstractGraphicalExpression{constructor(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;super(e,new r.AbstractExpression(i),n),this.label=t,this.sourceMultiExpression=s}updateSkyBottomLine(){const e=this.parentStaffLine.SkyBottomLineCalculator,t=this.label.PositionAndShape.RelativePosition.x+this.label.PositionAndShape.BorderMarginLeft,i=this.label.PositionAndShape.RelativePosition.x+this.label.PositionAndShape.BorderMarginRight;switch(this.Placement){case r.PlacementEnum.Above:const n=this.label.PositionAndShape.BorderMarginTop+this.label.PositionAndShape.RelativePosition.y;e.updateSkyLineInRange(t,i,n);break;case r.PlacementEnum.Below:const s=this.label.PositionAndShape.BorderMarginBottom+this.label.PositionAndShape.RelativePosition.y;e.updateBottomLineInRange(t,i,s);break;default:o.default.error("Placement for GraphicalUnknownExpression is unknown")}}}t.GraphicalUnknownExpression=a},5866:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowStaffLine=void 0;const n=i(2919),s=i(1083);class r extends n.StaffLine{constructor(e,t){super(e,t),this.slursInVFStaffLine=[],this.alignmentManager=new s.AlignmentManager(this)}get SlursInVFStaffLine(){return this.slursInVFStaffLine}addVFSlurToVFStaffline(e){this.slursInVFStaffLine.push(e)}get AlignmentManager(){return this.alignmentManager}}t.VexFlowStaffLine=r},5875:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContDynamicEnum=t.ContinuousDynamicExpression=void 0;const n=i(6362),s=i(2561);class r extends n.AbstractExpression{constructor(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";super(t),this.parentMeasure=n,this.NumberXml=s,this.dynamicType=e,this.label=r,this.staffNumber=i,this.startVolume=-1,this.endVolume=-1,""!==r&&this.setType()}get DynamicType(){return this.dynamicType}set DynamicType(e){this.dynamicType=e}get StartMultiExpression(){return this.startMultiExpression}set StartMultiExpression(e){this.startMultiExpression=e}get EndMultiExpression(){return this.endMultiExpression}set EndMultiExpression(e){this.endMultiExpression=e}get Placement(){return this.placement}set Placement(e){this.placement=e}get StartVolume(){return this.startVolume}set StartVolume(e){this.startVolume=e}get EndVolume(){return this.endVolume}set EndVolume(e){this.endVolume=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get Label(){return this.label}set Label(e){this.label=e,this.setType()}static isInputStringContinuousDynamic(e){return!!e&&(r.isStringInStringList(r.listContinuousDynamicIncreasing,e)||r.isStringInStringList(r.listContinuousDynamicDecreasing,e))}getInterpolatedDynamic(e){const t=this.StartMultiExpression.AbsoluteTimestamp;let i;if(i=this.EndMultiExpression?this.EndMultiExpression.AbsoluteTimestamp:s.Fraction.plus(this.startMultiExpression.SourceMeasureParent.AbsoluteTimestamp,this.startMultiExpression.SourceMeasureParent.Duration),e.lt(t))return-1;if(i.lt(e))return-2;const n=s.Fraction.minus(e,t).RealValue/s.Fraction.minus(i,t).RealValue;return Math.max(0,Math.min(99.9,this.startVolume+(this.endVolume-this.startVolume)*n))}isWedge(){return!this.label}setType(){r.isStringInStringList(r.listContinuousDynamicIncreasing,this.label)?this.dynamicType=o.crescendo:r.isStringInStringList(r.listContinuousDynamicDecreasing,this.label)&&(this.dynamicType=o.diminuendo)}}var o;t.ContinuousDynamicExpression=r,r.listContinuousDynamicIncreasing=["crescendo","cresc","cresc.","cres."],r.listContinuousDynamicDecreasing=["decrescendo","decresc","decr.","diminuendo","dim.","dim"],function(e){e[e.crescendo=0]="crescendo",e[e.diminuendo=1]="diminuendo"}(o||(t.ContDynamicEnum=o={}))},5951:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Fonts=void 0,function(e){e[e.TimesNewRoman=0]="TimesNewRoman",e[e.Kokila=1]="Kokila"}(i||(t.Fonts=i={}))},5955:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(3173),t),s(i(6597),t),s(i(624),t),s(i(7103),t)},5984:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionReader=void 0;const s=i(2561),r=i(5332),o=i(5875),a=i(2221),l=i(2148),c=i(437),h=i(9019),u=i(9161),d=i(9803),f=i(1112),p=i(6362),m=i(7533),g=i(9767),b=n(i(3065)),v=i(2570),y=i(9157),x=i(3253);t.ExpressionReader=class{constructor(e,t,i){this.openContinuousDynamicExpressions=[],this.musicSheet=e,this.staffNumber=i,this.globalStaffIndex=e.getGlobalStaffIndexOfFirstStaff(t)+(i-1),this.initialize()}readExpressionParameters(e,t,i,n,r,o,a){this.initialize(),this.divisions=i;const l=e.element("offset");if(void 0!==l&&!a)try{this.offsetDivisions=parseInt(l.value,10)}catch(e){const t="ReaderErrorMessages/ExpressionOffsetError, Invalid expression offset -> set to default.";b.default.debug("ExpressionReader.readExpressionParameters",t,e),this.musicSheet.SheetErrors.pushMeasureError(t),this.offsetDivisions=0}this.directionTimestamp=s.Fraction.createFromFraction(n);let c,h=new s.Fraction(Math.abs(this.offsetDivisions),4*i);this.offsetDivisions>0?n.RealValue>0?(h=s.Fraction.multiply(s.Fraction.minus(n,r),h),this.directionTimestamp=s.Fraction.plus(h,n)):this.directionTimestamp=s.Fraction.createFromFraction(h):this.offsetDivisions<0&&(n.RealValue>0?(h=s.Fraction.multiply(s.Fraction.minus(n,r),h),this.directionTimestamp=s.Fraction.minus(n,h)):this.directionTimestamp=s.Fraction.createFromFraction(h));const u=e.element("direction-type");let d;if(u&&(d=u.element("wedge"),d)){const e=d.attribute("default-y");e&&(c=this.readPosition(e))}this.WedgeYPosXml=c;const f=e.attribute("placement");if(f)try{const e=f.value;"below"===e?this.placement=p.PlacementEnum.Below:"above"===e&&(this.placement=p.PlacementEnum.Above)}catch(e){const t=g.ITextTranslation.translateText("ReaderErrorMessages/ExpressionPlacementError","Invalid expression placement -> set to default.");b.default.debug("ExpressionReader.readExpressionParameters",t,e),this.musicSheet.SheetErrors.pushMeasureError(t),this.placement=p.PlacementEnum.Below}if(this.placement===p.PlacementEnum.NotYetDefined)try{if(u){const e=u.element("dynamics");if(e){const t=e.attribute("default-y");t&&this.readExpressionPlacement(t,"read dynamics y pos")}if(d){const e=d.attribute("default-y");e&&this.readExpressionPlacement(e,"read wedge y pos")}const t=u.element("words");if(t){const e=t.attribute("default-y");e&&this.readExpressionPlacement(e,"read words y pos")}const i=u.element("rehearsal");if(i){const e=i.attribute("default-y");e&&this.readExpressionPlacement(e,"read rehearsal pos")}}}catch(e){const t=g.ITextTranslation.translateText("ReaderErrorMessages/ExpressionPlacementError","Invalid expression placement. Set to default.");b.default.debug("ExpressionReader.readExpressionParameters",t,e),this.musicSheet.SheetErrors.pushMeasureError(t),this.placement=p.PlacementEnum.Below}this.placement===p.PlacementEnum.NotYetDefined&&(t.Staves.length>1?this.placement=p.PlacementEnum.Below:t.HasLyrics?this.placement=p.PlacementEnum.Above:this.placement=p.PlacementEnum.Below)}read(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=!1,o=!1;const a=i.clone(),l=e.element("offset");if(null!==l&&void 0!==l&&l.value){const e=Number.parseInt(l.value,10);a.Add(new s.Fraction(e,4*this.divisions))}const c=e.element("sound");if(c){const e=c.attribute("tempo"),i=c.attribute("dynamics");if(e){const i=e.value.match(/^(\d+)(\.\d+)?$/);(null===i||void 0===i?void 0:i.length)>0?this.soundTempo=Math.round(Number.parseFloat(e.value)):(b.default.info("invalid xml tempo: "+e.value),this.soundTempo=100),t.TempoInBPM=this.soundTempo,0===this.musicSheet.DefaultStartTempoInBpm&&(this.musicSheet.DefaultStartTempoInBpm=this.soundTempo),this.musicSheet.HasBPMInfo=!0,r=!0}if(i){const e=i.value.match(/\d+/);this.soundDynamic=void 0!==e?parseInt(e[0],10):100,o=!0}}const h=e.elements("direction-type");for(const d of h){let l=d.element("metronome");if(l){const e=l.element("beat-unit"),i=void 0!==l.element("beat-unit-dot"),n=l.element("per-minute");if(void 0!==e&&n){l.hasAttributes&&void 0!==l.attribute("default-x")&&(this.directionTimestamp=s.Fraction.createFromFraction(a));const r=parseFloat(n.value);this.createNewTempoExpressionIfNeeded(t);const o=new u.InstantaneousTempoExpression(void 0,this.placement,this.staffNumber,r,this.currentMultiTempoExpression,!0);o.parentMeasure=t,this.soundTempo=r,t.TempoInBPM=this.soundTempo*(i?1.5:1),0===this.musicSheet.DefaultStartTempoInBpm&&(this.musicSheet.DefaultStartTempoInBpm=this.soundTempo),this.musicSheet.HasBPMInfo=!0,o.dotted=i,o.beatUnit=e.value,this.currentMultiTempoExpression.addExpression(o,""),this.currentMultiTempoExpression.CombinedExpressionsText="test"}}else if(l=d.element("dynamics"),l){const i=void 0!==e.element("notations");this.interpretInstantaneousDynamics(l,t,a,i)}else if(l=d.element("words"),l)if(r){this.createNewTempoExpressionIfNeeded(t),this.currentMultiTempoExpression.CombinedExpressionsText=l.value;const e=new u.InstantaneousTempoExpression(l.value,this.placement,this.staffNumber,this.soundTempo,this.currentMultiTempoExpression);this.currentMultiTempoExpression.addExpression(e,"")}else o||this.interpretWords(l,t,a);else l=d.element("wedge"),l?this.interpretWedge(e,l,t,n,t.MeasureNumber):(l=d.element("rehearsal"),l&&this.interpretRehearsalMark(l,t,i,t.MeasureNumber))}}closeOpenExpressions(e,t){for(const i of this.openContinuousDynamicExpressions)this.createNewMultiExpressionIfNeeded(e,i.NumberXml,t),this.closeOpenContinuousDynamic(i,e,t);this.openContinuousTempoExpression&&this.closeOpenContinuousTempo(s.Fraction.plus(e.AbsoluteTimestamp,t))}addOctaveShift(e,t,i){let n=1;const s=e.element("staff");if(s)try{n=parseInt(s.value,10)}catch(e){const t=g.ITextTranslation.translateText("ReaderErrorMessages/OctaveShiftStaffError","Invalid octave shift staff number. Set to default");this.musicSheet.SheetErrors.pushMeasureError(t),n=1,b.default.debug("ExpressionReader.addOctaveShift",t,e)}const r=e.element("direction-type");if(r){const s=r.element("octave-shift"),a=this.readPlacement(e);if(void 0!==s&&s.hasAttributes)try{const e=this.readNumber(s);if(s.attribute("size")){var o;const r=parseInt(s.attribute("size").value,10);let l=0;8===r?l=1:15===r&&(l=2);let h=null===(o=s.attribute("type"))||void 0===o?void 0:o.value;if(h||(a===p.PlacementEnum.Above?h="down":a===p.PlacementEnum.Below&&(h="up")),"up"===h||"down"===h){const i=new c.OctaveShift(h,l);i.StaffNumber=n,this.getMultiExpression=this.createNewMultiExpressionIfNeeded(t,e),this.getMultiExpression.OctaveShiftStart=i,i.ParentStartMultiExpression=this.getMultiExpression,this.openOctaveShift=i}else"stop"===h?this.openOctaveShift&&(this.getMultiExpression=this.createNewMultiExpressionIfNeeded(t,this.openOctaveShift.numberXml,i),this.getMultiExpression.OctaveShiftEnd=this.openOctaveShift,this.openOctaveShift.ParentEndMultiExpression=this.getMultiExpression,this.openOctaveShift=void 0):h||b.default.debug("octave-shift missing type in xml")}}catch(e){const t=g.ITextTranslation.translateText("ReaderErrorMessages/OctaveShiftError","Error while reading octave shift.");this.musicSheet.SheetErrors.pushMeasureError(t),b.default.debug("ExpressionReader.addOctaveShift",t,e)}}}addPedalMarking(e,t,i){const n=e.element("direction-type");if(n){const a=n.element("pedal");if(void 0!==a&&a.hasAttributes){let n=!1,l=!1;try{var s,r,o;switch("yes"===(null===(s=a.attribute("line"))||void 0===s?void 0:s.value)?l=!0:"no"===(null===(r=a.attribute("line"))||void 0===r?void 0:r.value)?(l=!1,n=!0):"yes"===(null===(o=a.attribute("sign"))||void 0===o?void 0:o.value)?n=!0:(n=!1,l=!0),a.attribute("type").value){case"start":this.openPedal&&this.openPedal.IsLine&&this.endOpenPedal(t),this.createNewMultiExpressionIfNeeded(t,-1),this.openPedal=new x.Pedal(l,n),this.getMultiExpression.PedalStart=this.openPedal,this.openPedal.ParentStartMultiExpression=this.getMultiExpression;break;case"stop":this.openPedal&&this.endOpenPedal(t,i);break;case"change":this.openPedal&&this.openPedal.IsLine&&(this.openPedal.ChangeEnd=!0,this.createNewMultiExpressionIfNeeded(t,-1),this.getMultiExpression.PedalEnd=this.openPedal,this.openPedal.ParentEndMultiExpression=this.getMultiExpression,this.createNewMultiExpressionIfNeeded(t,-1),this.openPedal=new x.Pedal(l,n),this.openPedal.ChangeBegin=!0,this.getMultiExpression.PedalStart=this.openPedal,this.openPedal.ParentStartMultiExpression=this.getMultiExpression)}}catch(e){const t=g.ITextTranslation.translateText("ReaderErrorMessages/PedalError","Error while reading pedal.");this.musicSheet.SheetErrors.pushMeasureError(t),b.default.debug("ExpressionReader.addPedalMarking",t,e)}}}}endOpenPedal(e,t){this.createNewMultiExpressionIfNeeded(e,-1,t),this.getMultiExpression.PedalEnd=this.openPedal,this.openPedal.ParentEndMultiExpression=this.getMultiExpression,this.openPedal=void 0}initialize(){this.placement=p.PlacementEnum.NotYetDefined,this.soundTempo=0,this.soundDynamic=0,this.offsetDivisions=0}readPlacement(e){var t;const i=null===(t=e.attribute("placement"))||void 0===t?void 0:t.value;return"above"===i?p.PlacementEnum.Above:"below"===i?p.PlacementEnum.Below:p.PlacementEnum.NotYetDefined}readExpressionPlacement(e,t){try{const t=this.readPosition(e);t<0?this.placement=p.PlacementEnum.Below:t>0&&(this.placement=p.PlacementEnum.Above)}catch(e){b.default.debug("ExpressionReader.readExpressionParameters",t,e)}}readPosition(e){try{const t=parseInt(e.value,10);return t<0?this.placement=p.PlacementEnum.Below:t>0&&(this.placement=p.PlacementEnum.Above),t}catch(e){b.default.debug("ExpressionReader.readExpressionParameters",e)}}interpretInstantaneousDynamics(e,t,i,n){if(e.hasElements){var r;e.hasAttributes&&e.attribute("default-x")&&(this.directionTimestamp=s.Fraction.createFromFraction(i));const c=this.readNumber(e);let h=null===(r=e.elements()[0])||void 0===r?void 0:r.name;if("other-dynamics"===h&&(h=e.elements()[0].value),h){var o;if(null!==(o=t.Rules)&&void 0!==o&&o.IgnoreRepeatedDynamics){var a;let t;try{t=l.DynamicEnum[h]}catch(e){const t=g.ITextTranslation.translateText("ReaderErrorMessages/DynamicError","Error while reading dynamic.");return void this.musicSheet.SheetErrors.pushMeasureError(t)}if((null===(a=this.activeInstantaneousDynamic)||void 0===a?void 0:a.DynEnum)===t)return}n?this.createNewMultiExpressionIfNeeded(t,c,s.Fraction.createFromFraction(i)):this.createNewMultiExpressionIfNeeded(t,c);const r=new l.InstantaneousDynamicExpression(h,this.soundDynamic,this.placement,this.staffNumber,t);r.InMeasureTimestamp=i.clone(),this.getMultiExpression.addExpression(r,""),this.initialize(),this.activeInstantaneousDynamic?this.activeInstantaneousDynamic.DynEnum=r.DynEnum:this.activeInstantaneousDynamic=new l.InstantaneousDynamicExpression(h,0,p.PlacementEnum.NotYetDefined,1,t)}}}interpretWords(e,t,i){const n=e.value;if(t.Rules.IgnoreBracketsWords&&(/^\(\s*\)$/.test(n)||/^\[\s*\]$/.test(n)))return;let r;const o=e.attribute("font-style");let a,l,c;o&&(a=o.value,"italic"===a&&(r=v.FontStyles.Italic));const h=e.attribute("font-weight");h&&(l=h.value,"bold"===l&&(r=v.FontStyles.Bold,"italic"===a&&(r=v.FontStyles.BoldItalic)));const u=e.attribute("color");let d;if(u&&(c=u.value),t.Rules.PlaceWordsInsideStafflineFromXml){var f;const t=null===(f=e.attribute("default-y"))||void 0===f?void 0:f.value;(null===t||void 0===t?void 0:t.length)>0&&(d=Number.parseInt(t,10))}if(n.length>0){if(e.hasAttributes&&e.attribute("default-x")&&(this.directionTimestamp=s.Fraction.createFromFraction(i)),this.checkIfWordsNodeIsRepetitionInstruction(n))return;this.fillMultiOrTempoExpression(n,t,i,r,c,d),this.initialize()}}readNumber(e){var t;let i=1;const n=null===(t=e.attribute("number"))||void 0===t?void 0:t.value;return n&&(i=Number.parseInt(n,10)),i}interpretWedge(e,t,i,n,r){var a;void 0!==t&&t.hasAttributes&&t.attribute("default-x")&&(this.directionTimestamp=s.Fraction.createFromFraction(n));const l=this.readNumber(t),c=null===(a=t.attribute("type"))||void 0===a||null===(a=a.value)||void 0===a?void 0:a.toLowerCase();this.lastWedge&&this.lastWedge.parentMeasure.MeasureNumberXML===i.MeasureNumberXML&&this.lastWedge.StaffNumber===this.staffNumber&&this.placement===this.lastWedge.Placement&&void 0!==this.WedgeYPosXml&&this.lastWedge.YPosXml===this.WedgeYPosXml&&this.lastWedge.StartMultiExpression.Timestamp.Equals(this.directionTimestamp)&&this.lastWedge.DynamicType===o.ContDynamicEnum[c]||("stop"===c?(this.createNewMultiExpressionIfNeeded(i,l,n),this.getMultiExpression.EndOffsetFraction=new s.Fraction(this.offsetDivisions,4*this.divisions)):this.createNewMultiExpressionIfNeeded(i,l),this.addWedge(t,i,n),this.initialize())}interpretRehearsalMark(e,t,i,n){t.rehearsalExpression=new y.RehearsalExpression(e.value,this.placement)}createNewMultiExpressionIfNeeded(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;i||(i=this.directionTimestamp);let n=this.getMultiExpression;return(!n||n&&(n.SourceMeasureParent!==e||n.numberXml!==t||n.SourceMeasureParent===e&&!n.Timestamp.Equals(i)))&&(this.getMultiExpression=n=new h.MultiExpression(e,s.Fraction.createFromFraction(i)),this.getMultiExpression.numberXml=t,e.StaffLinkedExpressions[this.globalStaffIndex].push(n)),n}createNewTempoExpressionIfNeeded(e){this.currentMultiTempoExpression&&this.currentMultiTempoExpression.SourceMeasureParent===e&&this.currentMultiTempoExpression.Timestamp===this.directionTimestamp||(this.currentMultiTempoExpression=new r.MultiTempoExpression(e,s.Fraction.createFromFraction(this.directionTimestamp)),e.TempoExpressions.push(this.currentMultiTempoExpression))}addWedge(e,t,i){if(void 0!==e&&e.hasAttributes){const n=this.readNumber(e),s=e.attribute("type").value.toLowerCase();try{if("crescendo"===s||"diminuendo"===s){const e=new o.ContinuousDynamicExpression(o.ContDynamicEnum[s],this.placement,this.staffNumber,t,n);this.lastWedge=e,this.lastWedge.YPosXml=this.WedgeYPosXml,this.openContinuousDynamicExpressions.push(e);let i=this.getMultiExpression;i||(i=this.createNewMultiExpressionIfNeeded(t,n)),i.StartingContinuousDynamic=e,e.StartMultiExpression=i,void 0!==this.activeInstantaneousDynamic&&this.activeInstantaneousDynamic.StaffNumber===e.StaffNumber&&(this.activeInstantaneousDynamic=void 0)}else if("stop"===s)for(const e of this.openContinuousDynamicExpressions)e.NumberXml===n&&this.closeOpenContinuousDynamic(e,t,i)}catch(e){const t="ReaderErrorMessages/WedgeError, Error while reading Crescendo / Diminuendo.";this.musicSheet.SheetErrors.pushMeasureError(t),b.default.debug("ExpressionReader.addWedge",t,e)}}}fillMultiOrTempoExpression(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(!e)return;const o=e.trim();this.createExpressionFromString("",o,t,i,e,n,s,r)}createExpressionFromString(e,t,i,n,s,r,l){let c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;const h=u.InstantaneousTempoExpression.isInputStringInstantaneousTempo(t),p=a.ContinuousTempoExpression.isInputStringContinuousTempo(t);if(h||p){if(i.TempoExpressions.length>0)for(let e=0,n=i.TempoExpressions.length;e<n;++e){const n=i.TempoExpressions[e];if(n.Timestamp===this.directionTimestamp&&void 0!==n.InstantaneousTempo&&-1!==n.InstantaneousTempo.Label.indexOf(t))return!1}if(this.createNewTempoExpressionIfNeeded(i),this.currentMultiTempoExpression.CombinedExpressionsText=s,h){const i=new u.InstantaneousTempoExpression(t,this.placement,this.staffNumber,this.soundTempo,this.currentMultiTempoExpression);return i.ColorXML=l,this.currentMultiTempoExpression.addExpression(i,e),!0}if(p){const i=new a.ContinuousTempoExpression(t,this.placement,this.staffNumber,this.currentMultiTempoExpression);return i.ColorXML=l,this.currentMultiTempoExpression.addExpression(i,e),!0}}if(o.ContinuousDynamicExpression.isInputStringContinuousDynamic(t)){const s=new o.ContinuousDynamicExpression(void 0,this.placement,this.staffNumber,i,-1,t);s.ColorXML=l;const r=this.getMultiExpression;return r&&this.closeOpenContinuousDynamic(r.StartingContinuousDynamic,i,n),this.createNewMultiExpressionIfNeeded(i,-1),void 0!==this.activeInstantaneousDynamic&&this.activeInstantaneousDynamic.StaffNumber===s.StaffNumber&&(this.activeInstantaneousDynamic=void 0),this.openContinuousDynamicExpressions.push(s),s.StartMultiExpression=this.getMultiExpression,this.getMultiExpression.addExpression(s,e),!0}if(d.MoodExpression.isInputStringMood(t)){const n=this.createNewMultiExpressionIfNeeded(i,-1);i.hasMoodExpressions=!0;const s=new d.MoodExpression(t,this.placement,this.staffNumber);return s.fontStyle=r,s.ColorXML=l,n.addExpression(s,e),!0}const g=this.createNewMultiExpressionIfNeeded(i,-1,n);if(i.TempoExpressions.length>0)for(let o=0,a=i.TempoExpressions.length;o<a;++o){const e=i.TempoExpressions[o];if(e.Timestamp===this.directionTimestamp&&void 0!==e.InstantaneousTempo&&e.EntriesList.length>0&&!this.hasDigit(t)&&this.globalStaffIndex>0){if(e.EntriesList[0].label.indexOf(t)>=0)return!1;break}}let b=m.TextAlignmentEnum.CenterBottom;this.musicSheet.Rules.CompactMode&&(b=m.TextAlignmentEnum.LeftBottom);const v=new f.UnknownExpression(t,this.placement,b,this.staffNumber);return v.fontStyle=r,v.ColorXML=l,v.defaultYXml=c,v.parentMeasure=i,g.addExpression(v,e),!1}closeOpenContinuousDynamic(e,t,i){if(!e)return;const n=e.NumberXml;e.EndMultiExpression=this.createNewMultiExpressionIfNeeded(t,n,i),e.StartMultiExpression.EndingContinuousDynamic=e,this.openContinuousDynamicExpressions=this.openContinuousDynamicExpressions.filter((t=>t!==e))}closeOpenContinuousTempo(e){this.openContinuousTempoExpression.AbsoluteEndTimestamp=e,this.openContinuousTempoExpression=void 0}checkIfWordsNodeIsRepetitionInstruction(e){return"coda"===(e=e.trim().toLowerCase())||"tocoda"===e||"to coda"===e||"fine"===e||"d.c."===e||"dacapo"===e||"da capo"===e||"d.s."===e||"dalsegno"===e||"dal segno"===e||"d.c. al fine"===e||"d.s. al fine"===e||"d.c. al coda"===e||"d.s. al coda"===e}hasDigit(e){return/\d/.test(e)}}},6001:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RepetitionEndingPart=t.Repetition=void 0;const s=i(3457),r=i(2561),o=i(7551),a=n(i(3065));class l extends o.PartListEntry{constructor(e,t){super(e),this.backwardJumpInstructions=[],this.endingParts=[],this.endingIndexDict={},this.userNumberOfRepetitions=0,this.visibles=[],this.fromWords=!1,this.repetitonIterationOrder=[],this.numberOfEndings=1,this.musicSheet2=e,this.virtualOverallRepetition=t}get BackwardJumpInstructions(){return this.backwardJumpInstructions}get EndingIndexDict(){return this.endingIndexDict}get EndingParts(){return this.endingParts}get Visibles(){return this.visibles}set Visibles(e){this.visibles=e}get DefaultNumberOfRepetitions(){let e=2;return this.virtualOverallRepetition&&(e=1),Math.max(e,Object.keys(this.endingIndexDict).length,this.checkRepetitionForMultipleLyricVerses())}get UserNumberOfRepetitions(){return this.userNumberOfRepetitions}set UserNumberOfRepetitions(e){this.userNumberOfRepetitions=e,this.repetitonIterationOrder=[];const t=this.userNumberOfRepetitions-this.NumberOfEndings;for(let i=1;i<=this.userNumberOfRepetitions;i++)i<=t?this.repetitonIterationOrder.push(1):this.repetitonIterationOrder.push(i-t)}getForwardJumpTargetForIteration(e){const t=this.repetitonIterationOrder[e-1];return this.endingIndexDict[t]?this.endingIndexDict[t].part.StartIndex:-1}getBackwardJumpTarget(){return this.startMarker.measureIndex}SetEndingStartIndex(e,t){const i=new c(new s.SourceMusicPart(this.musicSheet2,t,t));this.endingParts.push(i);for(const n of e)try{this.endingIndexDict[n]=i,i.endingIndices.push(n),this.numberOfEndings<n&&(this.numberOfEndings=n)}catch(e){a.default.error("Repetition: Exception.",e)}}setEndingEndIndex(e,t){this.endingIndexDict[e]&&this.endingIndexDict[e].part.setEndIndex(t)}get NumberOfEndings(){return this.numberOfEndings}get FromWords(){return this.fromWords}set FromWords(e){this.fromWords=e}get AbsoluteTimestamp(){return r.Fraction.createFromFraction(this.musicSheet2.SourceMeasures[this.startMarker.measureIndex].AbsoluteTimestamp)}get StartIndex(){return this.startMarker.measureIndex}get EndIndex(){if(0===this.BackwardJumpInstructions.length)return this.StartIndex;let e=this.backwardJumpInstructions[this.backwardJumpInstructions.length-1].measureIndex;return this.endingIndexDict[this.NumberOfEndings]&&(e=Math.max(this.endingIndexDict[this.NumberOfEndings].part.EndIndex,e)),e}checkRepetitionForMultipleLyricVerses(){let e=0;const t=this.StartIndex,i=this.EndIndex;for(let n=t;n<=i;n++){const t=this.musicSheet2.SourceMeasures[n];for(let i=0;i<t.CompleteNumberOfStaves;i++)for(const n of t.VerticalSourceStaffEntryContainers[i].StaffEntries)if(n){let t=0;for(const e of n.VoiceEntries)t+=Object.keys(e.LyricsEntries).length;e=Math.max(e,t)}}return e}get FirstSourceMeasureNumber(){return this.getFirstSourceMeasure().MeasureNumber}get LastSourceMeasureNumber(){return this.getLastSourceMeasure().MeasureNumber}}t.Repetition=l;class c{constructor(e){this.endingIndices=[],this.part=e}ToString(){return this.endingIndices.join(", ")}}t.RepetitionEndingPart=c},6014:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowConverter=void 0;var s=n(i(3206)).default.Flow;const r=i(164),o=i(8233),a=i(2561),l=i(9288),c=i(4543),h=i(8233),u=i(8233),d=i(6954),f=i(2570),p=i(5951),m=i(2683),g=n(i(3065)),b=i(1336),v=i(67),y=i(8215),x=i(4064),S=i(9479),E=i(4236),w=i(9647),T=i(6362);class _{static durations(e,t){const i=[],n=e.clone();for(;n.RealValue>1e-4;){const e=n.RealValue;if(e>=2)i.push("1/2"),n.Sub(new a.Fraction(2,1));else if(e>=1)i.push("w"),n.Sub(new a.Fraction(1,1));else if(e<1&&e>=.5){if(t&&e>.5)return["w"];i.push("h"),n.Sub(new a.Fraction(1,2))}else if(e<.5&&e>=.25){if(t&&e>.25)return["h"];i.push("q"),n.Sub(new a.Fraction(1,4))}else if(e<.25&&e>=.125){if(t&&e>.125)return["q"];i.push("8"),n.Sub(new a.Fraction(1,8))}else if(e<.125&&e>=.0625){if(t&&e>.0625)return["8"];i.push("16"),n.Sub(new a.Fraction(1,16))}else if(e<.0625&&e>=.03125){if(t&&e>.03125)return["16"];i.push("32"),n.Sub(new a.Fraction(1,32))}else if(e<.03125&&e>=.015625){if(t&&e>.015625)return["32"];i.push("64"),n.Sub(new a.Fraction(1,64))}else{if(t)return["64"];i.push("128"),n.Sub(new a.Fraction(1,128))}}return i}static pitch(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=s;void 0===s&&(a=3),t&&void 0===s&&(a=0,i.ClefType===r.ClefEnum.F&&(a=2),i.ClefType===r.ClefEnum.C&&(a=2));const l=u.NoteEnum[e.FundamentalNote].toLowerCase(),c=o.Pitch.accidentalVexflow(e.Accidental),h=e.Octave-i.OctaveOffset+a;let d="";return n&&(d=this.NoteHeadCode(n)),[l+"n/"+h+d,c,i]}static restToNotePitch(e,t){let i=e.Octave;switch(t){case r.ClefEnum.C:case r.ClefEnum.F:i+=2;case r.ClefEnum.G:}return new o.Pitch(e.FundamentalNote,i,h.AccidentalEnum.NONE)}static NoteHeadCode(e){const t=e.Filled?"2":"1";switch(e.Shape){case x.NoteHeadShape.NORMAL:return"";case x.NoteHeadShape.DIAMOND:return"/D"+t;case x.NoteHeadShape.TRIANGLE:return"/T"+t;case x.NoteHeadShape.TRIANGLE_INVERTED:return"/TI";case x.NoteHeadShape.X:return"/X"+t;case x.NoteHeadShape.CIRCLEX:return"/X3";case x.NoteHeadShape.RECTANGLE:return"/R"+t;case x.NoteHeadShape.SQUARE:return"/S"+t;case x.NoteHeadShape.SLASH:default:return""}}static GhostNotes(e){const t=[],i=_.durations(e,!1);for(const n of i)t.push(new s.GhostNote({duration:n}));return t}static StaveNote(e){var t;e.sortForVexflow();const i=e.notes,n=e.parentStaffEntry.parentMeasure.parentSourceMeasure.Rules,l=i[0];let c=[];const h=[],u=l.graphicalNoteLength,d=void 0!==l.sourceNote.NoteTuplet;let f,p=_.durations(u,d)[0];void 0!==l.sourceNote.TypeLength&&l.sourceNote.TypeLength!==u&&0!==l.sourceNote.TypeLength.RealValue&&(p=_.durations(l.sourceNote.TypeLength,d)[0],l.numberOfDots=l.sourceNote.DotsXml);let m,g,v=l.numberOfDots,y=!1,E=0,w=!1;for(const s of i){if(v<s.numberOfDots&&(v=s.numberOfDots),s.sourceNote.isRest()){if(w=!0,s.sourceNote.Pitch){c=[s.vfpitch[0]];break}{var T;c=["b/4"];const e=null===(T=s.parentVoiceEntry)||void 0===T?void 0:T.parentVoiceEntry;if(e){var M,P,C;const t=null===(M=s.parentVoiceEntry)||void 0===M?void 0:M.parentStaffEntry.parentMeasure.staffEntries;let i,n,r=-1;for(let s=0;s<t.length;s++){var A;if((null===(A=t[s])||void 0===A||null===(A=A.graphicalVoiceEntries[0])||void 0===A?void 0:A.parentVoiceEntry)===e){r=s;break}}if(r>=1&&t.length-1>=r+1&&(i=null===(P=t[r-1])||void 0===P||null===(P=P.graphicalVoiceEntries[0])||void 0===P?void 0:P.parentVoiceEntry,n=null===(C=t[r+1])||void 0===C||null===(C=C.graphicalVoiceEntries[0])||void 0===C?void 0:C.parentVoiceEntry,i&&n)){var N;const e=i.Notes[0],t=n.Notes[0];if(null!==(N=e.NoteBeam)&&void 0!==N&&N.Notes.includes(t)){const e=i.Notes.last().Pitch,t=s.Clef();c=[_.pitch(_.restToNotePitch(e.getTransposedPitch(-2),t.ClefType),!1,t)[0]]}}}}if((s.sourceNote.IsWholeMeasureRest||u.RealValue===s.sourceNote.SourceMeasure.ActiveTimeSignature.RealValue)&&(c=["d/5"],1===e.parentStaffEntry.parentMeasure.ParentStaff.StafflineCount&&(c=["b/4"]),p="w",v=0,y=!0,E=n.WholeRestXShiftVexflow*S.unitInPixels),s.sourceNote.ParentStaff.Voices.length>1){const e=s.parentVoiceEntry.parentStaffEntry.graphicalVoiceEntries,t=s.parentVoiceEntry.parentVoiceEntry.ParentVoice.VoiceId;let i,a;for(const r of e)for(const e of r.notes){if(e===s||e.sourceNote.isRest()||!e.sourceNote.PrintObject)continue;const r=e.parentVoiceEntry.parentVoiceEntry.WantedStemDirection,o=1===t||5===t,l=o?1:-1,c=e.sourceNote.Pitch.getHalfTone();(!i||1===l&&c>i||-1===l&&c<i)&&(i=c,a=0,o&&r===b.StemDirectionType.Up?a+=7:o||r!==b.StemDirectionType.Down?a+=o?1:2:a+=7,p.includes("8")||r===b.StemDirectionType.Up&&-1===l&&(a+=1),e.sourceNote.NoteBeam&&(a+=1),p.includes("w")&&(a/=2),a+=.5*Math.ceil(n.RestCollisionYPadding),a*=l,s.lineShift=a)}if(i>0){let e=3;const t=s.Clef();switch(t.ClefType){case r.ClefEnum.F:e=5;break;case r.ClefEnum.C:e=4}m=o.Pitch.fromHalftone(i),c=[_.pitch(m,!0,t,void 0,e)[0]]}}break}const t=s.vfpitch;c.push(t[0]),h.push(t[1]),f||(f=_.Clef(t[2]).type)}for(let s=0,r=v;s<r;++s)p+="d";1===i.length&&(null===(t=i[0].sourceNote.Notehead)||void 0===t?void 0:t.Shape)===x.NoteHeadShape.SLASH&&(p+="s"),w&&(p+="r");const L={align_center:y,auto_stem:!0,clef:f,duration:p,keys:c,slash:e.GraceSlash},k=e.notes[0].sourceNote;if(k.IsCueNote&&(L.glyph_font_scale=s.DEFAULT_NOTATION_FONT_SCALE*s.GraceNote.SCALE,L.stroke_px=s.GraceNote.LEDGER_LINE_OFFSET),e.parentVoiceEntry.IsGrace||e.notes[0].sourceNote.IsCueNote)g=new s.GraceNote(L);else{g=new s.StaveNote(L),g.stagger_same_whole_notes=n.StaggerSameWholeNotes;const t=e.parentStaffEntry.LyricsEntries;let r=!0,o=0;if(t.length>0&&n.RenderLyrics&&n.LyricsUseXPaddingForLongLyrics){const t=e.parentStaffEntry.parentMeasure,i=[];for(let r=t.staffEntries.indexOf(e.parentStaffEntry)+1;r<t.staffEntries.length;r++){const e=t.staffEntries[r];e.graphicalVoiceEntries[0]&&i.push(e)}let n,s=e.parentStaffEntry.relInMeasureTimestamp.clone();for(const l of i){const t=l.relInMeasureTimestamp.clone();if(n=a.Fraction.minus(t,e.parentVoiceEntry.Timestamp),n.RealValue>.25){r=!1;break}if(l.LyricsEntries.length>0)break;o+=32*a.Fraction.minus(t,s).RealValue,s=t}}if(n.RenderLyrics&&n.LyricsUseXPaddingForLongLyrics&&t.length>0&&r){let s=!1,r=0;for(const e of i)if(e.sourceNote.Length.RealValue<=.125){s=!0;break}let a=!1;for(const i of t){const t=n.LyricsXPaddingWidthThreshold;let l=i.GraphicalLabel.PositionAndShape.Size.width;if(i.hasDashFromLyricWord()&&(l+=.5),l>t){r+=l-t;const i=e.parentStaffEntry,c=i.parentMeasure.staffEntries,h=c.indexOf(i)===c.length-1;h&&(o+=n.LyricsXPaddingReductionForLastNoteInMeasure),s||(o+=n.LyricsXPaddingReductionForLongNotes),!n.LyricsXPaddingForLastNoteInMeasure&&h||l>t+o&&(a=!0,r-=o);break}}a&&(g.paddingRight=10*n.LyricsXPaddingFactorForLongLyrics*r)}}const I=e.notes[0].lineShift;if(0!==I&&(g.getKeyProps()[0].line+=I),i.length>1)for(let s=0;s<i.length;s++){var R;(null===(R=i[s].sourceNote.Notehead)||void 0===R?void 0:R.Shape)===x.NoteHeadShape.SLASH&&(g.note_heads[s].note_type="s")}if(g.getKeyProps().forEach(((t,i)=>{let{line:n}=t;return e.notes[i].staffLine=n})),(n.LedgerLineWidth||n.LedgerLineStrokeStyle)&&(g.ledgerLineStyle||(g.ledgerLineStyle={}),n.LedgerLineWidth&&(g.ledgerLineStyle.lineWidth=n.LedgerLineWidth),n.LedgerLineStrokeStyle&&(g.ledgerLineStyle.strokeStyle=n.LedgerLineStrokeStyle)),n.ColoringEnabled){const t=n.DefaultColorStem;let i=e.parentVoiceEntry.StemColor;!i&&t&&(i=t);const s={fillStyle:i,strokeStyle:i};i&&(g.setStemStyle(s),g.flag&&n.ColorFlags&&g.setFlagStyle(s))}if(g.x_shift=E,e.parentVoiceEntry.IsGrace&&e.notes[0].sourceNote.NoteBeam&&(e.parentVoiceEntry.WantedStemDirection=e.notes[0].sourceNote.NoteBeam.Notes[0].ParentVoiceEntry.WantedStemDirection),e.parentVoiceEntry)switch(e.parentVoiceEntry.WantedStemDirection){case b.StemDirectionType.Up:g.setStemDirection(s.Stem.UP),e.parentVoiceEntry.StemDirection=b.StemDirectionType.Up;break;case b.StemDirectionType.Down:g.setStemDirection(s.Stem.DOWN),e.parentVoiceEntry.StemDirection=b.StemDirectionType.Down}for(let r=0,o=i.length;r<o;r+=1){if(i[r].setIndex(g,r),h[r]){if("###"===h[r]){g.addAccidental(r,new s.Accidental("##")),g.addAccidental(r,new s.Accidental("#"));continue}if("bbs"===h[r]){g.addAccidental(r,new s.Accidental("bb")),g.addAccidental(r,new s.Accidental("b"));continue}g.addAccidental(r,new s.Accidental(h[r]))}const e=i[r].sourceNote.TremoloStrokes;if(e>0){const t=new s.Tremolo(e);t.extra_stroke_scale=n.TremoloStrokeScale,t.y_spacing_scale=n.TremoloYSpacingScale,g.addModifier(r,t)}}if(.25===k.Length.RealValue&&k.Notehead&&!1===k.Notehead.Filled){const e=g.getKeyProps();for(let t=0;t<e.length;t++)e[t].code="v81"}for(let s=0,r=v;s<r;++s)g.addDotToAll();return g}static generateArticulations(e,t,i){if(e&&"GhostNote"!==e.getAttribute("type"))for(const n of t.sourceNote.ParentVoiceEntry.Articulations){let r,o=s.Modifier.Position.ABOVE;if(e.getStemDirection()===s.Stem.UP&&(o=s.Modifier.Position.BELOW,i.ArticulationAboveNoteForStemUp)){const e=t.parentVoiceEntry.parentStaffEntry.parentMeasure,i=null===e||void 0===e?void 0:e.ParentStaff,n=null===i||void 0===i?void 0:i.ParentInstrument.Staves;(1===n.length||2===n.length&&i!==n[1])&&(o=s.Modifier.Position.ABOVE)}const a=n.articulationEnum;switch(i.ArticulationPlacementFromXML&&(n.placement===T.PlacementEnum.Above?o=s.Modifier.Position.ABOVE:n.placement===T.PlacementEnum.Below&&(o=s.Modifier.Position.BELOW)),a){case b.ArticulationEnum.accent:{r=new s.Articulation("a>");const e=t.sourceNote.NoteSlurs;for(const n of e)n.StartNote===t.sourceNote&&(n.PlacementXml===T.PlacementEnum.Above?r.setYShift(10*-i.SlurStartArticulationYOffsetOfArticulation):n.PlacementXml===T.PlacementEnum.Below&&r.setYShift(10*i.SlurStartArticulationYOffsetOfArticulation));break}case b.ArticulationEnum.breathmark:r=new s.Articulation("abr"),n.placement===T.PlacementEnum.Above&&(o=s.Modifier.Position.ABOVE),r.breathMarkDistance=i.BreathMarkDistance;break;case b.ArticulationEnum.downbow:r=new s.Articulation("am"),void 0===n.placement&&(o=s.Modifier.Position.ABOVE,n.placement=T.PlacementEnum.Above);break;case b.ArticulationEnum.fermata:r=new s.Articulation("a@a"),o=s.Modifier.Position.ABOVE,n.placement=T.PlacementEnum.Above;break;case b.ArticulationEnum.marcatodown:r=new s.Articulation("a|");break;case b.ArticulationEnum.marcatoup:r=new s.Articulation("a^"),o=s.Modifier.Position.ABOVE;break;case b.ArticulationEnum.invertedfermata:{const e=t.sourceNote.ParentVoiceEntry;if(e!==t.sourceNote.ParentVoiceEntry.ParentSourceStaffEntry.VoiceEntries.last()){e.Articulations=e.Articulations.slice(e.Articulations.indexOf(n)),e.ParentSourceStaffEntry.VoiceEntries.last().Articulations.push(n);continue}r=new s.Articulation("a@u"),o=s.Modifier.Position.BELOW,n.placement=T.PlacementEnum.Below;break}case b.ArticulationEnum.lefthandpizzicato:r=new s.Articulation("a+");break;case b.ArticulationEnum.naturalharmonic:r=new s.Articulation("ah");break;case b.ArticulationEnum.snappizzicato:r=new s.Articulation("ao");break;case b.ArticulationEnum.staccatissimo:r=new s.Articulation("av");break;case b.ArticulationEnum.staccato:r=new s.Articulation("a.");break;case b.ArticulationEnum.tenuto:r=new s.Articulation("a-");break;case b.ArticulationEnum.upbow:r=new s.Articulation("a|"),void 0===n.placement&&(o=s.Modifier.Position.ABOVE,n.placement=T.PlacementEnum.Above);break;case b.ArticulationEnum.strongaccent:r=new s.Articulation("a^")}r&&(r.setPosition(o),e.addModifier(0,r))}}static generateOrnaments(e,t){let i,n=s.Modifier.Position.ABOVE;switch(t.placement===T.PlacementEnum.Below&&(n=s.Modifier.Position.BELOW),t.GetOrnament){case y.OrnamentEnum.DelayedInvertedTurn:i=new s.Ornament("turn_inverted"),i.setDelayed(!0);break;case y.OrnamentEnum.DelayedTurn:i=new s.Ornament("turn"),i.setDelayed(!0);break;case y.OrnamentEnum.InvertedMordent:i=new s.Ornament("mordent"),i.setDelayed(!1);break;case y.OrnamentEnum.InvertedTurn:i=new s.Ornament("turn_inverted"),i.setDelayed(!1);break;case y.OrnamentEnum.Mordent:i=new s.Ornament("mordent_inverted"),i.setDelayed(!1);break;case y.OrnamentEnum.Trill:i=new s.Ornament("tr"),i.setDelayed(!1);break;case y.OrnamentEnum.Turn:i=new s.Ornament("turn"),i.setDelayed(!1);break;default:return void g.default.warn("unhandled OrnamentEnum type: "+t.GetOrnament)}i&&(t.AccidentalBelow!==h.AccidentalEnum.NONE&&i.setLowerAccidental(o.Pitch.accidentalVexflow(t.AccidentalBelow)),t.AccidentalAbove!==h.AccidentalEnum.NONE&&i.setUpperAccidental(o.Pitch.accidentalVexflow(t.AccidentalAbove)),i.setPosition(n),e.addModifier(0,i))}static StrokeTypeFromArpeggioType(e){switch(e){case E.ArpeggioType.ARPEGGIO_DIRECTIONLESS:return s.Stroke.Type.ARPEGGIO_DIRECTIONLESS;case E.ArpeggioType.BRUSH_DOWN:return s.Stroke.Type.BRUSH_UP;case E.ArpeggioType.BRUSH_UP:return s.Stroke.Type.BRUSH_DOWN;case E.ArpeggioType.RASQUEDO_DOWN:return s.Stroke.Type.RASQUEDO_UP;case E.ArpeggioType.RASQUEDO_UP:return s.Stroke.Type.RASQUEDO_DOWN;case E.ArpeggioType.ROLL_DOWN:return s.Stroke.Type.ROLL_UP;case E.ArpeggioType.ROLL_UP:return s.Stroke.Type.ROLL_DOWN;default:return s.Stroke.Type.ARPEGGIO_DIRECTIONLESS}}static CreateTabNote(e){const t=[],i=e.notes.reverse(),n=[],r=e.notes[0].graphicalNoteLength,o=void 0!==e.notes[0].sourceNote.NoteTuplet;let a=_.durations(r,o)[0],l=0,c=!1;const h=e.parentStaffEntry.parentMeasure.parentSourceMeasure.Rules;let u=!1;for(const p of e.notes){var d;const i=p.sourceNote;let r={str:i.StringNumberTab,fret:i.FretNumber};p.sourceNote instanceof w.TabNote||(g.default.info("invalid tab note: ".concat(p.sourceNote.Pitch.ToString()," in measure ").concat(e.parentStaffEntry.parentMeasure.MeasureNumber,", likely missing XML string+fret number.")),r={str:1,fret:0}),h.TabUseXNoteheadShapeForTabNote&&(null===(d=p.sourceNote.Notehead)||void 0===d?void 0:d.Shape)===x.NoteHeadShape.X&&(r.fret="x",u=!0),t.push(r),i.BendArray&&i.BendArray.forEach((function(e){let t;const i=e.bendalter-r.fret;t=i>1?"Full":1===i?"1/2":"1/4","up"===e.direction?n.push({type:s.Bend.UP,text:t,width:10}):n.push({type:s.Bend.DOWN,text:t,width:10})})),i.VibratoStroke&&(c=!0),l<p.numberOfDots&&(l=p.numberOfDots)}for(let s=0,p=l;s<p;++s)a+="d";const f=new s.TabNote({duration:a,positions:t});u&&(f.render_options.scale=h.TabXNoteheadScale,f.render_options.TabUseXNoteheadAlternativeGlyph=h.TabUseXNoteheadAlternativeGlyph,f.updateWidth()),h.UsePageBackgroundColorForTabNotes&&(f.BackgroundColor=h.PageBackgroundColor);for(let s=0,p=i.length;s<p;s+=1)i[s].setIndex(f,s);return n.forEach((function(e){e.type===s.Bend.UP?f.addModifier(new s.Bend(e.text,!1)):f.addModifier(new s.Bend(e.text,!0))})),c&&f.addModifier(new s.Vibrato),f}static Clef(e){let t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";switch("default"!==n&&"small"!==n&&(g.default.warn('Invalid VexFlow clef size "'.concat(n,'" specified. Using "default".')),n="default"),e.ClefType){case r.ClefEnum.G:switch(e.Line){case 1:t="french";break;case 2:t="treble";break;default:t="treble",g.default.error("Clef ".concat(r.ClefEnum[e.ClefType]," on line ").concat(e.Line,' not supported by VexFlow. Using default value "').concat(t,'".'))}break;case r.ClefEnum.F:switch(e.Line){case 4:t="bass";break;case 3:t="baritone-f";break;case 5:t="subbass";break;default:t="bass",g.default.error("Clef ".concat(r.ClefEnum[e.ClefType]," on line ").concat(e.Line,' not supported by VexFlow. Using default value "').concat(t,'".'))}break;case r.ClefEnum.C:switch(e.Line){case 3:t="alto";break;case 4:t="tenor";break;case 1:t="soprano";break;case 2:t="mezzo-soprano";break;default:t="alto",g.default.error("Clef ".concat(r.ClefEnum[e.ClefType]," on line ").concat(e.Line,' not supported by VexFlow. Using default value "').concat(t,'".'))}break;case r.ClefEnum.percussion:t="percussion";break;case r.ClefEnum.TAB:t="treble";break;default:g.default.info("bad clef type: "+e.ClefType),t="treble"}return 1===e.OctaveOffset&&"bass"!==t?i="8va":-1===e.OctaveOffset&&(i="8vb"),{type:t,size:n,annotation:i}}static TimeSignature(e){let t;switch(e.SymbolEnum){case l.RhythmSymbolEnum.NONE:t=e.Rhythm.Numerator+"/"+e.Rhythm.Denominator;break;case l.RhythmSymbolEnum.COMMON:t="C";break;case l.RhythmSymbolEnum.CUT:t="C|"}return new s.TimeSignature(t)}static keySignature(e){if(!e)return;let t;switch(e.Mode){case c.KeyEnum.minor:t=_.minorMap[e.Key]+"m";break;case c.KeyEnum.major:case c.KeyEnum.none:t=_.majorMap[e.Key];break;default:t="C"}return t}static line(e,t){switch(e){case d.SystemLinesEnum.SingleThin:return t===v.SystemLinePosition.MeasureBegin?s.StaveConnector.type.SINGLE:s.StaveConnector.type.SINGLE_RIGHT;case d.SystemLinesEnum.DoubleThin:return s.StaveConnector.type.THIN_DOUBLE;case d.SystemLinesEnum.ThinBold:return s.StaveConnector.type.BOLD_DOUBLE_RIGHT;case d.SystemLinesEnum.BoldThinDots:return s.StaveConnector.type.BOLD_DOUBLE_LEFT;case d.SystemLinesEnum.DotsThinBold:case d.SystemLinesEnum.DotsBoldBoldDots:return s.StaveConnector.type.BOLD_DOUBLE_RIGHT;case d.SystemLinesEnum.None:return s.StaveConnector.type.NONE}}static font(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.FontStyles.Regular,i=(arguments.length>2&&void 0!==arguments[2]||p.Fonts.TimesNewRoman,arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0),n="normal",s="normal",r="'".concat((arguments.length>3?arguments[3]:void 0).DefaultFontFamily,"'");switch(t){case f.FontStyles.Bold:s="bold";break;case f.FontStyles.Italic:n="italic";break;case f.FontStyles.BoldItalic:n="italic",s="bold";case f.FontStyles.Underlined:}return p.Fonts.Kokila,i&&"default"!==i&&(r="'".concat(i,"'")),n+" "+s+" "+Math.floor(e)+"px "+r}static fontStyle(e){switch(e){case f.FontStyles.Bold:return"bold";case f.FontStyles.Italic:return"italic";case f.FontStyles.BoldItalic:return"italic bold";default:return"normal"}}static style(e){return m.OUTLINE_AND_FILL_STYLE_DICT.getValue(e)}}t.VexFlowConverter=_,_.majorMap={"-1":"F","-2":"Bb","-3":"Eb","-4":"Ab","-5":"Db","-6":"Gb","-7":"Cb","-8":"Fb",0:"C",1:"G",2:"D",3:"A",4:"E",5:"B",6:"F#",7:"C#",8:"G#"},_.minorMap={"-1":"D","-2":"G","-3":"C","-4":"F","-5":"Bb","-6":"Eb","-7":"Ab","-8":"Db",0:"A",1:"E",2:"B",3:"F#",4:"C#",5:"G#",6:"D#",7:"A#",8:"E#"}},6030:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LyricsReader=void 0;const n=i(649),s=i(2317),r=i(9767);t.LyricsReader=class{constructor(e){this.openLyricWords={},this.musicSheet=e}addLyricEntry(e,t){if(e){const o=e;for(let a=0,l=o.length;a<l;++a){const l=o[a];try{let e="single";if(l.element("text")){let r=l.element("text");if(l.element("syllabic")&&(e=l.element("syllabic").value),r){var i;let o="";const a=l.elements();for(const e of a)"text"!==e.name&&"elision"!==e.name||(o+=e.value);if(o=o.replace("  "," "),void 0!==l.element("elision")&&"-"===o){const t=l.elements();let i,n,s=0;for(let e=0;e<t.length;e++)if("elision"===t[e].name){s=e;break}if(s>0)for(let e=s;e<t.length;e++){const s=t[e];"text"===s.name&&(i=s),"syllabic"===s.name&&(n=s)}void 0!==i&&n&&(r=i,e="middle")}let c,h="1";if(void 0!==l.attributes()&&l.attribute("number")&&(h=l.attribute("number").value),"single"===e||"end"===e){if(this.openLyricWords[h]){this.currentLyricWord=this.openLyricWords[h];const e=this.currentLyricWord.Syllables.length;c=new s.LyricsEntry(o,h,this.currentLyricWord,t,e),this.currentLyricWord.Syllables.push(c),delete this.openLyricWords[h],this.currentLyricWord=void 0}else c=new s.LyricsEntry(o,h,void 0,t);c.extend=void 0!==l.element("extend")}else if("begin"===e)this.openLyricWords[h]&&(delete this.openLyricWords[h],this.currentLyricWord=void 0),this.currentLyricWord=new n.LyricWord,this.openLyricWords[h]=this.currentLyricWord,c=new s.LyricsEntry(o,h,this.currentLyricWord,t,0),this.currentLyricWord.Syllables.push(c);else if("middle"===e)if(this.openLyricWords[h]){this.currentLyricWord=this.openLyricWords[h];const e=this.currentLyricWord.Syllables.length;c=new s.LyricsEntry(o,h,this.currentLyricWord,t,e),this.currentLyricWord.Syllables.push(c)}else c=new s.LyricsEntry(o,h,void 0,t);c&&(t.LyricsEntries[h]||(t.LyricsEntries.setValue(h,c),null!==(i=t.ParentSourceStaffEntry)&&void 0!==i&&null!==(i=i.VerticalContainerParent)&&void 0!==i&&i.ParentMeasure&&(t.ParentSourceStaffEntry.VerticalContainerParent.ParentMeasure.hasLyrics=!0)),t.ParentVoice.Parent.LyricVersesNumbers.includes(h)||t.ParentVoice.Parent.LyricVersesNumbers.push(h))}}}catch(e){const t=r.ITextTranslation.translateText("ReaderErrorMessages/LyricError","Error while reading lyric entry.");this.musicSheet.SheetErrors.pushMeasureError(t);continue}}}}}},6119:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4831),s=function(){function e(e){this.table={},this.nElements=0,this.toStr=e||n.defaultToString}return e.prototype.getValue=function(e){var t=this.table["$"+this.toStr(e)];if(!n.isUndefined(t))return t.value},e.prototype.setValue=function(e,t){if(!n.isUndefined(e)&&!n.isUndefined(t)){var i,s="$"+this.toStr(e),r=this.table[s];return n.isUndefined(r)?(this.nElements++,i=void 0):i=r.value,this.table[s]={key:e,value:t},i}},e.prototype.remove=function(e){var t="$"+this.toStr(e),i=this.table[t];if(!n.isUndefined(i))return delete this.table[t],this.nElements--,i.value},e.prototype.keys=function(){var e=[];for(var t in this.table)if(n.has(this.table,t)){var i=this.table[t];e.push(i.key)}return e},e.prototype.values=function(){var e=[];for(var t in this.table)if(n.has(this.table,t)){var i=this.table[t];e.push(i.value)}return e},e.prototype.forEach=function(e){for(var t in this.table)if(n.has(this.table,t)){var i=this.table[t];if(!1===e(i.key,i.value))return}},e.prototype.containsKey=function(e){return!n.isUndefined(this.getValue(e))},e.prototype.clear=function(){this.table={},this.nElements=0},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){var e="{";return this.forEach((function(t,i){e+="\n\t"+t+" : "+i})),e+"\n}"},e}();t.default=s},6173:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowTabMeasure=void 0;var s=n(i(3206)).default.Flow;const r=i(5246),o=i(6014),a=n(i(3065)),l=i(164);class c extends r.VexFlowMeasure{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0),this.isTabMeasure=!0}resetLayout(){var e;const t=null!==(e=this.ParentStaff.StafflineCount)&&void 0!==e?e:6;this.stave=new s.TabStave(0,0,0,{space_above_staff_ln:0,space_below_staff_ln:0,num_lines:t}),this.updateInstructionWidth()}graphicalMeasureCreatedCalculations(){for(let t=0,i=this.staffEntries.length;t<i;++t){const e=this.staffEntries[t];for(const t of e.graphicalVoiceEntries)if(t.notes[0].sourceNote.isRest()){const e=o.VexFlowConverter.GhostNotes(t.notes[0].sourceNote.Length);t.vfStaveNote=e[0],t.vfGhostNotes=e}else t.vfStaveNote=o.VexFlowConverter.CreateTabNote(t)}this.finalizeTuplets();const e=this.getVoicesWithinMeasure();for(const t of e){if(!t)continue;this.vfVoices[t.VoiceId]=new s.Voice({beat_value:this.parentSourceMeasure.Duration.Denominator,num_beats:this.parentSourceMeasure.Duration.Numerator,resolution:s.RESOLUTION}).setMode(s.Voice.Mode.SOFT);const e=this.getRestFilledVexFlowStaveNotesPerVoice(t);for(const i of e){if(i.parentVoiceEntry&&i.parentVoiceEntry.IsGrace&&!i.parentVoiceEntry.GraceAfterMainNote)continue;const e=i;if(0!==i.notes.length&&i.notes[0]&&i.notes[0].sourceNote.PrintObject){if(i.parentVoiceEntry&&i.parentVoiceEntry.Arpeggio){const t=i.parentVoiceEntry.Arpeggio;if(i.notes&&i.notes.length>1){const i=o.VexFlowConverter.StrokeTypeFromArpeggioType(t.type),n=new s.Stroke(i,{all_voices:this.rules.ArpeggiosGoAcrossVoices});this.rules.RenderArpeggios&&e.vfStaveNote.addStroke(0,n)}else a.default.debug("[OSMD] arpeggio in measure ".concat(this.MeasureNumber," could not be drawn.\n                        voice entry had less than two notes, arpeggio is likely between voice entries, not currently supported in Vexflow."))}if(e.vfGhostNotes)for(const i of e.vfGhostNotes)this.vfVoices[t.VoiceId].addTickable(i);else this.vfVoices[t.VoiceId].addTickable(e.vfStaveNote)}else if(e.vfGhostNotes)for(const i of e.vfGhostNotes)this.vfVoices[t.VoiceId].addTickable(i);else this.vfVoices[t.VoiceId].addTickable(e.vfStaveNote)}}}addClefAtBegin(e){e.ClefType===l.ClefEnum.TAB&&super.addClefAtBegin(e)}draw(e){super.draw(e);const t=this.parentSourceMeasure;t.multipleRestMeasures&&this.rules.RenderMultipleRestMeasures&&(this.multiRestElement=new s.MultiMeasureRest(t.multipleRestMeasures,{}),this.multiRestElement.setStave(this.stave),this.multiRestElement.setContext(e),this.multiRestElement.draw())}}t.VexFlowTabMeasure=c},6229:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Slur=void 0;const n=i(2561);t.Slur=class{constructor(){}get StartNote(){return this.startNote}set StartNote(e){this.startNote=e}get EndNote(){return this.endNote}set EndNote(e){this.endNote=e}startNoteHasMoreStartingSlurs(){if(!this.startNote)return!1;for(let e=0,t=this.startNote.NoteSlurs.length;e<t;++e){const t=this.startNote.NoteSlurs[e];if(t!==this&&t.StartNote===this.startNote)return!0}return!1}endNoteHasMoreEndingSlurs(){if(!this.endNote)return!1;for(let e=0,t=this.endNote.NoteSlurs.length;e<t;++e){const t=this.endNote.NoteSlurs[e];if(t!==this&&t.EndNote===this.endNote)return!0}return!1}isCrossed(){return this.startNote.ParentStaffEntry.ParentStaff!==this.endNote.ParentStaffEntry.ParentStaff}isSlurLonger(){if(!this.endNote||!this.startNote)return!1;const e=n.Fraction.minus(this.endNote.getAbsoluteTimestamp(),this.startNote.getAbsoluteTimestamp());for(let t=0,i=this.startNote.NoteSlurs.length;t<i;++t){const i=this.startNote.NoteSlurs[t];if(i!==this&&void 0!==i.EndNote&&void 0!==i.StartNote&&-1===n.Fraction.minus(i.EndNote.getAbsoluteTimestamp(),i.StartNote.getAbsoluteTimestamp()).CompareTo(e))return!0}for(let t=0,i=this.endNote.NoteSlurs.length;t<i;++t){const i=this.endNote.NoteSlurs[t];if(i!==this&&void 0!==i.EndNote&&void 0!==i.StartNote&&n.Fraction.minus(i.EndNote.getAbsoluteTimestamp(),i.StartNote.getAbsoluteTimestamp()).CompareTo(e))return!0}return!1}}},6302:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RepetitionCalculator=void 0;const n=i(1645),s=i(1645),r=i(7307);t.RepetitionCalculator=class{constructor(){this.repetitionInstructions=[]}calculateRepetitions(e,t){this.musicSheet=e,this.repetitionInstructions=t;const i=this.musicSheet.SourceMeasures;for(let n=0,s=this.repetitionInstructions.length;n<s;++n){const e=this.repetitionInstructions[n];this.currentMeasureIndex=e.measureIndex,this.currentMeasure=i[this.currentMeasureIndex],this.handleRepetitionInstructions(e)}for(let n=0,r=this.musicSheet.SourceMeasures.length;n<r;++n){const e=this.musicSheet.SourceMeasures[n];e.FirstRepetitionInstructions.length>1&&e.FirstRepetitionInstructions.sort(s.RepetitionInstructionComparer.Compare),e.LastRepetitionInstructions.length>1&&e.LastRepetitionInstructions.sort(s.RepetitionInstructionComparer.Compare)}}handleRepetitionInstructions(e){if(!this.currentMeasure)return!1;switch(e.type){case n.RepetitionInstructionEnum.StartLine:this.currentMeasure.FirstRepetitionInstructions.push(e);break;case n.RepetitionInstructionEnum.BackJumpLine:this.currentMeasure.LastRepetitionInstructions.push(e);break;case n.RepetitionInstructionEnum.Ending:if(e.alignment===n.AlignmentType.Begin)this.currentMeasure.FirstRepetitionInstructions.push(e);else for(let t=0,i=e.endingIndices.length;t<i;++t)this.currentMeasure.LastRepetitionInstructions.push(e);break;case n.RepetitionInstructionEnum.Segno:this.currentMeasure.FirstRepetitionInstructions.push(e);break;case n.RepetitionInstructionEnum.Fine:case n.RepetitionInstructionEnum.ToCoda:case n.RepetitionInstructionEnum.Coda:case n.RepetitionInstructionEnum.DaCapo:case n.RepetitionInstructionEnum.DalSegno:case n.RepetitionInstructionEnum.DalSegnoAlFine:case n.RepetitionInstructionEnum.DaCapoAlFine:case n.RepetitionInstructionEnum.DalSegnoAlCoda:case n.RepetitionInstructionEnum.DaCapoAlCoda:this.currentMeasure.LastRepetitionInstructions.push(e);break;case n.RepetitionInstructionEnum.None:break;default:throw new r.ArgumentOutOfRangeException("currentRepetitionInstruction")}return!0}}},6332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6352:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(1272),t),s(i(9099),t),s(i(5749),t),s(i(469),t),s(i(302),t),s(i(7503),t)},6362:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.PlacementEnum=t.AbstractExpression=void 0,t.AbstractExpression=class{constructor(e){this.placement=e}static isStringInStringList(e,t){for(let i=0,n=e.length;i<n;++i){const n=e[i];if(t.toLowerCase()===n.toLowerCase().trim())return!0}return!1}get Placement(){return this.placement}static PlacementEnumFromString(e){switch(e.toLowerCase()){case"above":return i.Above;case"below":return i.Below;case"aboveorbelow":case"abovebelow":return i.AboveOrBelow;case"left":return i.Left;case"right":return i.Right;default:return i.NotYetDefined}}},function(e){e[e.Above=0]="Above",e[e.Below=1]="Below",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.NotYetDefined=4]="NotYetDefined",e[e.AboveOrBelow=5]="AboveOrBelow"}(i||(t.PlacementEnum=i={}))},6438:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ColDirEnum=t.BoundingBox=void 0;const s=n(i(3065)),r=i(7307),o=i(9409),a=i(6864),l=i(200),c=i(7741);var h;t.BoundingBox=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isSymbol=!1,this.relativePositionHasBeenSet=!1,this.xBordersHaveBeenSet=!1,this.yBordersHaveBeenSet=!1,this.absolutePosition=new o.PointF2D,this.relativePosition=new o.PointF2D,this.size=new a.SizeF2D,this.marginSize=new a.SizeF2D,this.upperLeftCorner=new o.PointF2D,this.upperLeftMarginCorner=new o.PointF2D,this.borderLeft=0,this.borderRight=0,this.borderTop=0,this.borderBottom=0,this.borderMarginLeft=0,this.borderMarginRight=0,this.borderMarginTop=0,this.borderMarginBottom=0,this.childElements=[],this.parent=t,this.dataObject=e,this.isSymbol=i,this.xBordersHaveBeenSet=!1,this.yBordersHaveBeenSet=!1,t&&(this.Parent=t)}get RelativePositionHasBeenSet(){return this.relativePositionHasBeenSet}get XBordersHaveBeenSet(){return this.xBordersHaveBeenSet}set XBordersHaveBeenSet(e){this.xBordersHaveBeenSet=e}get YBordersHaveBeenSet(){return this.yBordersHaveBeenSet}set YBordersHaveBeenSet(e){this.yBordersHaveBeenSet=e}get AbsolutePosition(){return this.absolutePosition}set AbsolutePosition(e){this.absolutePosition=e}get RelativePosition(){return this.relativePosition}set RelativePosition(e){this.relativePosition=e,this.relativePositionHasBeenSet=!0}get Size(){return this.size}set Size(e){this.size=e}get MarginSize(){return this.marginSize}get UpperLeftCorner(){return this.upperLeftCorner}get UpperLeftMarginCorner(){return this.upperLeftMarginCorner}get BorderLeft(){return this.borderLeft}set BorderLeft(e){this.borderLeft=e,this.calculateRectangle()}get BorderRight(){return this.borderRight}set BorderRight(e){this.borderRight=e,this.calculateRectangle()}get BorderTop(){return this.borderTop}set BorderTop(e){this.borderTop=e,this.calculateRectangle()}get BorderBottom(){return this.borderBottom}set BorderBottom(e){this.borderBottom=e,this.calculateRectangle()}get BorderMarginLeft(){return this.borderMarginLeft>this.borderLeft?this.borderLeft:this.borderMarginLeft}set BorderMarginLeft(e){this.borderMarginLeft=e,this.calculateMarginRectangle()}get BorderMarginRight(){return this.borderMarginRight<this.borderRight?this.borderRight:this.borderMarginRight}set BorderMarginRight(e){this.borderMarginRight=e,this.calculateMarginRectangle()}get BorderMarginTop(){return this.borderMarginTop>this.borderTop?this.borderTop:this.borderMarginTop}set BorderMarginTop(e){this.borderMarginTop=e,this.calculateMarginRectangle()}get BorderMarginBottom(){return this.borderMarginBottom<this.borderBottom?this.borderBottom:this.borderMarginBottom}set BorderMarginBottom(e){this.borderMarginBottom=e,this.calculateMarginRectangle()}get BoundingRectangle(){return this.boundingRectangle}get BoundingMarginRectangle(){return this.boundingMarginRectangle}get ChildElements(){return this.childElements}set ChildElements(e){this.childElements=e}get Parent(){return this.parent}set Parent(e){if(this.parent){const e=this.parent.ChildElements.indexOf(this,0);e>-1&&this.parent.ChildElements.splice(e,1)}this.parent=e,this.parent.ChildElements.indexOf(this)>-1?s.default.error("BoundingBox of "+this.dataObject.constructor.name+" already in children list of "+this.parent.dataObject.constructor.name+"'s BoundingBox"):this.parent.ChildElements.push(this)}get DataObject(){return this.dataObject}get Center(){return new o.PointF2D(this.RelativePosition.x+(this.BorderMarginRight+this.BorderMarginLeft),this.RelativePosition.y+(this.BorderMarginBottom+this.BorderMarginTop))}setAbsolutePositionFromParent(){this.parent?(this.absolutePosition.x=this.parent.AbsolutePosition.x+this.relativePosition.x,this.absolutePosition.y=this.parent.AbsolutePosition.y+this.relativePosition.y):this.absolutePosition=this.relativePosition}calculateAbsolutePosition(){this.absolutePosition.x=this.relativePosition.x,this.absolutePosition.y=this.relativePosition.y;let e=this.parent;for(;e;)this.absolutePosition.x+=e.relativePosition.x,this.absolutePosition.y+=e.relativePosition.y,e=e.parent}calculateAbsolutePositionsRecursiveWithoutTopelement(){this.absolutePosition.x=0,this.absolutePosition.y=0;for(let e=0,t=this.ChildElements.length;e<t;++e)this.ChildElements[e].calculateAbsolutePositionsRecursive(this.absolutePosition.x,this.absolutePosition.y)}calculateAbsolutePositionsRecursive(e,t){this.absolutePosition.x=this.relativePosition.x+e,this.absolutePosition.y=this.relativePosition.y+t;for(let i=0,n=this.ChildElements.length;i<n;++i)this.ChildElements[i].calculateAbsolutePositionsRecursive(this.absolutePosition.x,this.absolutePosition.y)}calculateAbsolutePositionsOfChildren(){for(let e=0,t=this.ChildElements.length;e<t;++e)this.ChildElements[e].calculateAbsolutePositionsRecursive(this.absolutePosition.x,this.absolutePosition.y)}calculateBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===this.childElements.length)return;for(let c=0,h=this.ChildElements.length;c<h;++c){const t=this.ChildElements[c];let i=!0;for(const n of e){const e=t.DataObject;if(e.isInstanceOfClass&&e.isInstanceOfClass(n)){i=!1;break}}i&&t.calculateBoundingBox(e)}let t=Number.MAX_VALUE,i=Number.MIN_VALUE,n=Number.MAX_VALUE,s=Number.MIN_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MAX_VALUE,l=Number.MIN_VALUE;this.isSymbol&&(t=this.borderLeft,i=this.borderRight,n=this.borderTop,s=this.borderBottom,r=this.borderMarginLeft,o=this.borderMarginRight,a=this.borderMarginTop,l=this.borderMarginBottom);for(let c=0,h=this.ChildElements.length;c<h;++c){const e=this.ChildElements[c];t=Math.min(t,e.relativePosition.x+e.borderLeft),i=Math.max(i,e.relativePosition.x+e.borderRight),n=Math.min(n,e.relativePosition.y+e.borderTop),s=Math.max(s,e.relativePosition.y+e.borderBottom),r=Math.min(r,e.relativePosition.x+e.borderMarginLeft),o=Math.max(o,e.relativePosition.x+e.borderMarginRight),a=Math.min(a,e.relativePosition.y+e.borderMarginTop),l=Math.max(l,e.relativePosition.y+e.borderMarginBottom)}this.borderLeft=t,this.borderRight=i,this.borderTop=n,this.borderBottom=s,this.borderMarginLeft=r,this.borderMarginRight=o,this.borderMarginTop=a,this.borderMarginBottom=l,this.calculateRectangle(),this.calculateMarginRectangle(),this.xBordersHaveBeenSet=!0,this.yBordersHaveBeenSet=!0}calculateTopBottomBorders(){if(0===this.childElements.length)return;for(let s=0,r=this.ChildElements.length;s<r;++s)this.ChildElements[s].calculateTopBottomBorders();let e=Number.MAX_VALUE,t=Number.MIN_VALUE,i=Number.MAX_VALUE,n=Number.MIN_VALUE;this.yBordersHaveBeenSet&&(e=this.borderTop,t=this.borderBottom,i=this.borderMarginTop,n=this.borderMarginBottom);for(let s=0,r=this.ChildElements.length;s<r;++s){const r=this.ChildElements[s];e=Math.min(e,r.relativePosition.y+r.borderTop),t=Math.max(t,r.relativePosition.y+r.borderBottom),i=Math.min(i,r.relativePosition.y+r.borderMarginTop),n=Math.max(n,r.relativePosition.y+r.borderMarginBottom)}this.borderTop=e,this.borderBottom=t,this.borderMarginTop=i,this.borderMarginBottom=n,this.calculateRectangle(),this.calculateMarginRectangle()}computeNonOverlappingPositionWithMargin(e,t,i){this.RelativePosition=new o.PointF2D(i.x,i.y),this.setAbsolutePositionFromParent();let n=0,s=!1;do{switch(t){case h.Left:case h.Right:n=this.relativePosition.x,e.calculateMarginPositionAlongDirection(this,t),s=Math.abs(n-this.relativePosition.x)>.001;break;case h.Up:case h.Down:n=this.relativePosition.y,e.calculateMarginPositionAlongDirection(this,t),s=Math.abs(n-this.relativePosition.y)>.001;break;default:throw new r.ArgumentOutOfRangeException("direction")}}while(s)}collisionDetection(e){const t=Math.min(this.AbsolutePosition.x+this.borderRight,e.absolutePosition.x+e.borderRight)-Math.max(this.AbsolutePosition.x+this.borderLeft,e.absolutePosition.x+e.borderLeft),i=Math.min(this.AbsolutePosition.y+this.borderBottom,e.absolutePosition.y+e.borderBottom)-Math.max(this.AbsolutePosition.y+this.borderTop,e.absolutePosition.y+e.borderTop);return t>=0&&i>=0}liesInsideBorders(e){const t=this.AbsolutePosition.x+this.borderLeft<=e.absolutePosition.x+e.borderLeft&&e.absolutePosition.x+e.borderLeft<=this.AbsolutePosition.x+this.borderRight,i=this.AbsolutePosition.x+this.borderLeft<=e.absolutePosition.x+e.borderRight&&e.absolutePosition.x+e.borderRight<=this.AbsolutePosition.x+this.borderRight;if(t&&i){const t=this.AbsolutePosition.y+this.borderTop<=e.absolutePosition.y+e.borderTop&&e.absolutePosition.y+e.borderTop<=this.AbsolutePosition.y+this.borderBottom,i=this.AbsolutePosition.y+this.borderTop<=e.absolutePosition.y+e.borderBottom&&e.absolutePosition.y+e.borderBottom<=this.AbsolutePosition.y+this.borderBottom;if(t&&i)return!0}return!1}pointLiesInsideBorders(e){return this.AbsolutePosition.x+this.borderLeft<=e.x&&e.x<=this.AbsolutePosition.x+this.borderRight&&this.AbsolutePosition.y+this.borderTop<=e.y&&e.y<=this.AbsolutePosition.y+this.borderBottom}marginCollisionDetection(e){const t=Math.min(this.AbsolutePosition.x+this.borderMarginRight,e.absolutePosition.x+e.borderMarginRight)-Math.max(this.AbsolutePosition.x+this.borderMarginLeft,e.absolutePosition.x+e.borderMarginLeft),i=Math.min(this.AbsolutePosition.y+this.borderMarginBottom,e.absolutePosition.y+e.borderMarginBottom)-Math.max(this.AbsolutePosition.y+this.borderMarginTop,e.absolutePosition.y+e.borderMarginTop);return t>0&&i>0}liesInsideMargins(e){const t=this.AbsolutePosition.x+this.borderMarginLeft<=e.absolutePosition.x+e.borderMarginLeft&&e.absolutePosition.x+e.borderMarginLeft<=this.AbsolutePosition.x+this.borderMarginRight,i=this.AbsolutePosition.x+this.borderMarginLeft<=e.absolutePosition.x+e.borderMarginRight&&e.absolutePosition.x+e.borderMarginRight<=this.AbsolutePosition.x+this.borderMarginRight;if(t&&i){const t=this.AbsolutePosition.y+this.borderMarginTop<=e.absolutePosition.y+e.borderMarginTop&&e.absolutePosition.y+e.borderMarginTop<=this.AbsolutePosition.y+this.borderMarginBottom,i=this.AbsolutePosition.y+this.borderMarginTop<=e.absolutePosition.y+e.borderMarginBottom&&e.absolutePosition.y+e.borderMarginBottom<=this.AbsolutePosition.y+this.borderMarginBottom;if(t&&i)return!0}return!1}pointLiesInsideMargins(e){return this.AbsolutePosition.x+this.borderMarginLeft<=e.x&&e.x<=this.AbsolutePosition.x+this.borderMarginRight&&this.AbsolutePosition.y+this.borderMarginTop<=e.y&&e.y<=this.AbsolutePosition.y+this.borderMarginBottom}computeNonOverlappingPosition(e,t,i){this.RelativePosition=new o.PointF2D(i.x,i.y),this.setAbsolutePositionFromParent();let n=0,s=!1;do{switch(t){case h.Left:case h.Right:n=this.relativePosition.x,e.calculatePositionAlongDirection(this,t),s=Math.abs(n-this.relativePosition.x)>1e-4;break;case h.Up:case h.Down:n=this.relativePosition.y,e.calculatePositionAlongDirection(this,t),s=Math.abs(n-this.relativePosition.y)>1e-4;break;default:throw new r.ArgumentOutOfRangeException("direction")}}while(s)}getClickedObjectOfType(e){const t=this.dataObject;if(this.pointLiesInsideBorders(e)&&t)return t;for(let i=0,n=this.childElements.length;i<n;++i){const t=this.childElements[i].getClickedObjectOfType(e);if(t)return t}}getObjectsInRegion(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.GraphicalObject.name,n=[];for(const s of this.childElements)n=n.concat(s.getObjectsInRegion(e,t,i));return this.dataObject&&this.dataObject.isInstanceOfClass(i)&&(t?e.liesInsideBorders(this)&&n.push(this.dataObject):e.collisionDetection(this)&&n.push(this.dataObject)),n}calculateRectangle(){this.upperLeftCorner=new o.PointF2D(this.BorderLeft,this.BorderTop),this.size=new a.SizeF2D(this.BorderRight-this.BorderLeft,this.BorderBottom-this.BorderTop),this.boundingRectangle=l.RectangleF2D.createFromLocationAndSize(this.upperLeftCorner,this.size)}calculateMarginRectangle(){this.upperLeftMarginCorner=new o.PointF2D(this.BorderMarginLeft,this.BorderMarginTop),this.marginSize=new a.SizeF2D(this.BorderMarginRight-this.BorderMarginLeft,this.BorderMarginBottom-this.BorderMarginTop),this.boundingMarginRectangle=l.RectangleF2D.createFromLocationAndSize(this.upperLeftMarginCorner,this.marginSize)}calculateMarginPositionAlongDirection(e,t){if(this!==e){if(this.isSymbol&&this.marginCollisionDetection(e)){let i=0;switch(t){case h.Left:return i=this.absolutePosition.x+this.borderMarginLeft-(e.absolutePosition.x+e.borderMarginRight),e.relativePosition.x+=i,void(e.absolutePosition.x+=i);case h.Right:return i=this.absolutePosition.x+this.borderMarginRight-(e.absolutePosition.x+e.borderMarginLeft),e.relativePosition.x+=i,void(e.absolutePosition.x+=i);case h.Up:return i=this.absolutePosition.y+this.borderMarginTop-(e.absolutePosition.y+e.borderMarginBottom),e.relativePosition.y+=i,void(e.absolutePosition.y+=i);case h.Down:return i=this.absolutePosition.y+this.borderMarginBottom-(e.absolutePosition.y+e.borderMarginTop),e.relativePosition.y+=i,void(e.absolutePosition.y+=i);default:throw new r.ArgumentOutOfRangeException("direction")}}for(let i=0,n=this.ChildElements.length;i<n;++i)this.ChildElements[i].calculateMarginPositionAlongDirection(e,t)}}calculatePositionAlongDirection(e,t){if(this!==e){if(this.isSymbol&&this.collisionDetection(e)){let i;switch(t){case h.Left:return i=this.absolutePosition.x+this.borderLeft-(e.absolutePosition.x+e.borderRight),e.relativePosition.x+=i,void(e.absolutePosition.x+=i);case h.Right:return i=this.absolutePosition.x+this.borderRight-(e.absolutePosition.x+e.borderLeft),e.relativePosition.x+=i,void(e.absolutePosition.x+=i);case h.Up:return i=this.absolutePosition.y+this.borderTop-(e.absolutePosition.y+e.borderBottom),e.relativePosition.y+=i,void(e.absolutePosition.y+=i);case h.Down:return i=this.absolutePosition.y+this.borderBottom-(e.absolutePosition.y+e.borderTop),e.relativePosition.y+=i,void(e.absolutePosition.y+=i);default:throw new r.ArgumentOutOfRangeException("direction")}}for(let i=0,n=this.ChildElements.length;i<n;++i)this.ChildElements[i].calculatePositionAlongDirection(e,t)}}},function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Up=2]="Up",e[e.Down=3]="Down",e[e.NotYetDefined=4]="NotYetDefined"}(h||(t.ColDirEnum=h={}))},6452:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalLine=void 0;const n=i(2683);t.GraphicalLine=class{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.OutlineAndFillStyleEnum.BaseWritingColor,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.start=e,this.end=t,this.width=i,this.styleId=s,this.colorHex=r}get Start(){return this.start}set Start(e){this.start=e}get End(){return this.end}set End(e){this.end=e}get Width(){return this.width}set Width(e){this.width=e}}},6597:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cursor=void 0;const n=i(2561),r=i(624);t.Cursor=class{constructor(e,t,i){this.hidden=!0,this.currentPageNumber=1,this.skipInvisibleNotes=!0,this.container=e,this.openSheetMusicDisplay=t,this.rules=this.openSheetMusicDisplay.EngravingRules,this.cursorOptions=i;let n=0;for(this.cursorElementId="cursorImg-0";document.getElementById(this.cursorElementId);)n++,this.cursorElementId="cursorImg-".concat(n);const s=document.createElement("img");s.id=this.cursorElementId,s.style.position="absolute",!0===this.cursorOptions.follow?(this.wantedZIndex="-1",s.style.zIndex=this.wantedZIndex):(this.wantedZIndex="-2",s.style.zIndex=this.wantedZIndex),this.cursorElement=s,this.container.appendChild(s)}adjustToBackgroundColor(){let e;e=this.rules.PageBackgroundColor?"1":this.wantedZIndex,this.cursorElement.style.zIndex=e}init(e,t){this.manager=e,this.graphic=t,this.reset(),this.hidden=!0,this.hide()}show(){this.hidden=!1,this.update(),this.adjustToBackgroundColor()}resetIterator(){if(!this.openSheetMusicDisplay.Sheet||!this.openSheetMusicDisplay.Sheet.SourceMeasures)return void console.log("OSMD.Cursor.resetIterator(): sheet or measures were null/undefined.");const e=this.openSheetMusicDisplay.Sheet.SourceMeasures.length-1;let t=this.rules.MinMeasureToDrawIndex;t=Math.min(t,e);let i=this.rules.MaxMeasureToDrawIndex;if(i=Math.min(i,e),this.openSheetMusicDisplay.Sheet&&this.openSheetMusicDisplay.Sheet.SourceMeasures.length>t&&(this.openSheetMusicDisplay.Sheet.SelectionStart=this.openSheetMusicDisplay.Sheet.SourceMeasures[t].AbsoluteTimestamp),this.openSheetMusicDisplay.Sheet&&this.openSheetMusicDisplay.Sheet.SourceMeasures.length>i){const e=this.openSheetMusicDisplay.Sheet.SourceMeasures[i];this.openSheetMusicDisplay.Sheet.SelectionEnd=n.Fraction.plus(e.AbsoluteTimestamp,e.Duration)}this.iterator=this.manager.getIterator(),this.iterator.SkipInvisibleNotes=this.skipInvisibleNotes}getStaffEntryFromVoiceEntry(e){const t=e.ParentSourceStaffEntry.VerticalContainerParent.ParentMeasure.measureListIndex,i=e.ParentSourceStaffEntry.ParentStaff.idInMusicSheet;return this.graphic.findGraphicalStaffEntryFromMeasureList(i,t,e.ParentSourceStaffEntry)}update(){var e;if(this.hidden||void 0===this.hidden||null===this.hidden)return;this.updateCurrentPage();const t=this.iterator;let i,n=t.CurrentVisibleVoiceEntries(),s=t.CurrentMeasureIndex,r=0,o=0,a=0;if(0!==n.length||t.FrontReached||t.EndReached||(t.moveToPrevious(),n=t.CurrentVisibleVoiceEntries(),t.moveToNext()),t.FrontReached&&0===n.length){t.moveToNext(),n=t.CurrentVisibleVoiceEntries();const e=this.findVisibleGraphicalMeasure(t.CurrentMeasureIndex);r=e.PositionAndShape.AbsolutePosition.x,i=e.ParentMusicSystem,t.moveToPrevious()}else if(t.EndReached||!t.CurrentVoiceEntries||0===n.length){t.moveToPrevious(),n=t.CurrentVisibleVoiceEntries(),s=t.CurrentMeasureIndex;const e=this.findVisibleGraphicalMeasure(t.CurrentMeasureIndex);r=e.PositionAndShape.AbsolutePosition.x+e.PositionAndShape.Size.width,i=e.ParentMusicSystem,t.moveToNext()}else if(t.CurrentMeasure.isReducedToMultiRest){const e=this.findVisibleGraphicalMeasure(t.CurrentMeasureIndex),n=e.parentSourceMeasure.multipleRestMeasures,s=t.CurrentMeasure.multipleRestMeasureNumber/(n+1),o=e.PositionAndShape.Size.width-e.beginInstructionsWidth;r=e.PositionAndShape.AbsolutePosition.x+e.beginInstructionsWidth+s*o,i=e.ParentMusicSystem}else{const e=n.map((e=>this.getStaffEntryFromVoiceEntry(e))).sort(((e,t)=>{var i,n;return(null===e||void 0===e||null===(i=e.PositionAndShape)||void 0===i||null===(i=i.AbsolutePosition)||void 0===i?void 0:i.x)<=(null===t||void 0===t||null===(n=t.PositionAndShape)||void 0===n||null===(n=n.AbsolutePosition)||void 0===n?void 0:n.x)?-1:1}))[0];e&&(r=e.PositionAndShape.AbsolutePosition.x,i=e.parentMeasure.ParentMusicSystem)}if(null===(e=i)||void 0===e||!e.StaffLines[0])return;o=i.PositionAndShape.AbsolutePosition.y+i.StaffLines[0].PositionAndShape.RelativePosition.y;let l=i.PositionAndShape.AbsolutePosition.y;const c=i.StaffLines[i.StaffLines.length-1];c&&(l+=c.PositionAndShape.RelativePosition.y+c.StaffHeight),a=l-o;const h=this.findVisibleGraphicalMeasure(s);if(!h)return;const u=h.PositionAndShape;if(this.updateWidthAndStyle(u,r,o,a),this.openSheetMusicDisplay.FollowCursor&&this.cursorOptions.follow)if(this.openSheetMusicDisplay.EngravingRules.RenderSingleHorizontalStaffline)this.cursorElement.scrollIntoView({behavior:"smooth",inline:"center"});else{const e=this.cursorElement.getBoundingClientRect().top;this.cursorElement.scrollIntoView({behavior:e<1e3?"smooth":"auto",block:"center"})}this.cursorElement.style.display=""}findVisibleGraphicalMeasure(e){for(let t=0;t<this.graphic.NumberOfStaves;t++){const e=this.graphic.findGraphicalMeasure(this.iterator.CurrentMeasureIndex,t);if(null!==e&&void 0!==e&&e.ParentStaff.isVisible())return e}}updateWidthAndStyle(e,t,i,n){const s=this.cursorElement;let o=0;switch(this.cursorOptions.type){case r.CursorType.ThinLeft:s.style.top=10*i*this.openSheetMusicDisplay.zoom+"px",s.style.left=10*(t-1.5)*this.openSheetMusicDisplay.zoom+"px",s.height=10*n*this.openSheetMusicDisplay.zoom,o=5*this.openSheetMusicDisplay.zoom;break;case r.CursorType.ShortThinTopLeft:s.style.top=10*(i-2.5)*this.openSheetMusicDisplay.zoom+"px",s.style.left=10*t*this.openSheetMusicDisplay.zoom+"px",s.height=15*this.openSheetMusicDisplay.zoom,o=5*this.openSheetMusicDisplay.zoom;break;case r.CursorType.CurrentArea:s.style.top=10*e.AbsolutePosition.y*this.openSheetMusicDisplay.zoom+"px",s.style.left=10*e.AbsolutePosition.x*this.openSheetMusicDisplay.zoom+"px",s.height=10*n*this.openSheetMusicDisplay.zoom,o=10*e.Size.width*this.openSheetMusicDisplay.zoom;break;case r.CursorType.CurrentAreaLeft:s.style.top=10*e.AbsolutePosition.y*this.openSheetMusicDisplay.zoom+"px",s.style.left=10*e.AbsolutePosition.x*this.openSheetMusicDisplay.zoom+"px",s.height=10*n*this.openSheetMusicDisplay.zoom,o=10*(t-e.AbsolutePosition.x)*this.openSheetMusicDisplay.zoom;break;default:s.style.top=10*i*this.openSheetMusicDisplay.zoom+"px",s.style.left=10*(t-1.5)*this.openSheetMusicDisplay.zoom+"px",s.height=10*n*this.openSheetMusicDisplay.zoom,o=30*this.openSheetMusicDisplay.zoom}s.width=o,this.cursorOptionsRendered!==this.cursorOptions&&this.updateStyle(o,this.cursorOptions)}hide(){this.cursorElement.style.display="none",this.hidden=!0}previous(){this.iterator.moveToPreviousVisibleVoiceEntry(!1),this.update()}next(){this.iterator.moveToNextVisibleVoiceEntry(!1),this.update()}reset(){this.resetIterator(),this.update()}updateStyle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;void 0!==t&&(this.cursorOptions=t);const i=document.createElement("canvas");i.width=this.cursorElement.width,i.height=1;const n=i.getContext("2d");n.globalAlpha=this.cursorOptions.alpha;const o=n.createLinearGradient(0,0,this.cursorElement.width,0);switch(this.cursorOptions.type){case r.CursorType.ThinLeft:case r.CursorType.ShortThinTopLeft:case r.CursorType.CurrentArea:case r.CursorType.CurrentAreaLeft:o.addColorStop(1,this.cursorOptions.color);break;default:o.addColorStop(0,"white"),o.addColorStop(.2,this.cursorOptions.color),o.addColorStop(.8,this.cursorOptions.color),o.addColorStop(1,"white")}n.fillStyle=o,n.fillRect(0,0,e,1),this.cursorOptionsRendered=s({},this.cursorOptions),this.cursorElement.src=i.toDataURL("image/png")}get Iterator(){return this.iterator}get Hidden(){return this.hidden}VoicesUnderCursor(e){return this.iterator.CurrentVisibleVoiceEntries(e)}NotesUnderCursor(e){const t=this.VoicesUnderCursor(e),i=[];return t.forEach((e=>{i.push.apply(i,e.Notes)})),i}GNotesUnderCursor(e){const t=this.VoicesUnderCursor(e),i=[];return t.forEach((e=>{i.push(...e.Notes.map((e=>this.rules.GNote(e))))})),i}updateCurrentPage(){let e=this.iterator.currentTimeStamp;e.RealValue<0&&(e=new n.Fraction(0,0));for(const t of this.graphic.MusicPages)if(t.MusicSystems.last().GetSystemsLastTimeStamp().gt(e)){const e=t.PageNumber;return e!==this.currentPageNumber&&(this.container.removeChild(this.cursorElement),this.container=document.getElementById("osmdCanvasPage"+e),this.container.appendChild(this.cursorElement)),this.currentPageNumber=e}return 1}get SkipInvisibleNotes(){return this.skipInvisibleNotes}set SkipInvisibleNotes(e){this.skipInvisibleNotes=e,this.iterator.SkipInvisibleNotes=e}get CursorOptions(){return this.cursorOptions}set CursorOptions(e){this.cursorOptions=e}Dispose(){this.hide(),this.container.removeChild(this.cursorElement),this.rules=void 0,this.openSheetMusicDisplay=void 0,this.cursorOptions=void 0}nextMeasure(){const e=this.Iterator.CurrentMeasure;let t=this.Iterator.currentTimeStamp.RealValue;this.next();let i=0;for(;this.Iterator.CurrentMeasure===e&&this.Iterator.currentTimeStamp.RealValue!==t&&i<999;)t=this.Iterator.currentTimeStamp.RealValue,this.next(),i++}previousMeasure(){const e=this.Iterator.CurrentMeasure;let t=this.Iterator.currentTimeStamp.RealValue;this.previous();let i=0;for(;this.Iterator.CurrentMeasure===e&&this.Iterator.currentTimeStamp.RealValue!==t&&i<999;)t=this.Iterator.currentTimeStamp.RealValue,this.previous(),i++;for(i=0;0!==this.Iterator.CurrentRelativeInMeasureTimestamp.RealValue&&i<999;)this.previous(),i++}}},6644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StaffEntryLink=void 0,t.StaffEntryLink=class{constructor(e){this.linkStaffEntries=[],this.voiceEntry=e}get GetVoiceEntry(){return this.voiceEntry}get LinkStaffEntries(){return this.linkStaffEntries}set LinkStaffEntries(e){this.linkStaffEntries=e}}},6659:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalChordSymbolContainer=void 0;const n=i(7435),s=i(8254),r=i(9719),o=i(6438),a=i(7741),l=i(9409),c=i(4980);class h extends a.GraphicalObject{constructor(e,t,i,n,s,r){super(),this.chordSymbolContainer=e,this.boundingBox=new o.BoundingBox(this,t),this.rules=r,this.calculateLabel(i,s,n)}get GetChordSymbolContainer(){return this.chordSymbolContainer}get GraphicalLabel(){return this.graphicalLabel}calculateLabel(e,t,i){const o=r.ChordSymbolContainer.calculateChordText(this.chordSymbolContainer,t,i),a=this.GetChordSymbolContainer.Placement===c.PlacementEnum.Above?this.rules.ChordSymbolTextAlignmentTop:this.rules.ChordSymbolTextAlignmentBottom;this.graphicalLabel=new s.GraphicalLabel(new n.Label(o),e,a,this.rules,this.boundingBox),this.graphicalLabel.PositionAndShape.RelativePosition=new l.PointF2D(this.rules.ChordSymbolRelativeXOffset,0),this.graphicalLabel.Label.colorDefault=this.rules.DefaultColorChordSymbol}}t.GraphicalChordSymbolContainer=h},6670:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowStaffEntry=void 0;const n=i(348),s=i(9479),r=i(8233);class o extends n.GraphicalStaffEntry{constructor(e,t,i){super(e,t,i)}calculateXPosition(){const e=this.parentMeasure.getVFStave();let t=0;for(const i of this.graphicalVoiceEntries)if(i.vfStaveNote){if(i.vfStaveNote.setStave(e),!i.vfStaveNote.preFormatted)continue;i.applyBordersFromVexflow();let n=!1,r=this.PositionAndShape;i.notes[0].sourceNote.isWholeRest()&&!this.hasOnlyRests()&&(n=!0,r=i.PositionAndShape),this.parentMeasure.ParentStaff.isTab?r.RelativePosition.x=(i.vfStaveNote.getAbsoluteX()+i.vfStaveNote.glyph.getWidth())/s.unitInPixels:(r.RelativePosition.x=i.vfStaveNote.getBoundingBox().getX()/s.unitInPixels,n&&(r.RelativePosition.x-=e.getNoteStartX()/s.unitInPixels,r.RelativePosition.x-=1.3));const o=i.notes[0].sourceNote;o.isRest()&&o.Length.RealValue===this.parentMeasure.parentSourceMeasure.ActiveTimeSignature.RealValue&&(r.RelativePosition.x+=this.parentMeasure.parentSourceMeasure.Rules.WholeRestXShiftVexflow-.1,i.PositionAndShape.BorderLeft=-.7,i.PositionAndShape.BorderRight=.7),i.PositionAndShape.BorderLeft<t&&(t=i.PositionAndShape.BorderLeft)}this.PositionAndShape.RelativePosition.x-=t,this.PositionAndShape.calculateBoundingBox()}setMaxAccidentals(){for(const e of this.graphicalVoiceEntries)for(const t of e.notes)if(t.DrawnAccidental!==r.AccidentalEnum.NONE)return this.MaxAccidentals=1;return this.MaxAccidentals=0}setModifierXOffsets(){let e=[];for(const s of this.graphicalVoiceEntries)e=e.concat(s.notes);const t=e.map((e=>e.staffLine)),i=this.calculateModifierXOffsets(t,1),n=this.calculateModifierXOffsets(t,.5);e.forEach(((e,t)=>{e.baseFingeringXOffset=n[t],e.baseStringNumberXOffset=i[t]}))}calculateModifierXOffsets(e,t){const i=[];for(let n=0;n<e.length;n++){let s=0,r=!0;for(;r;)for(let o=n;o>=0;o--){if(Math.abs(e[n]-e[o])<=t&&s===i[o]){s++,r=!0;break}r=!1}i.push(s)}return i}}t.VexFlowStaffEntry=o},6703:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6711:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalCurve=void 0;const n=i(9409);class s{constructor(){s.tPow3=new Array(s.bezierCurveStepSize),s.oneMinusTPow3=new Array(s.bezierCurveStepSize),s.bezierFactorOne=new Array(s.bezierCurveStepSize),s.bezierFactorTwo=new Array(s.bezierCurveStepSize);for(let e=0;e<s.bezierCurveStepSize;e++){const t=e/s.bezierCurveStepSize;s.tPow3[e]=Math.pow(t,3),s.oneMinusTPow3[e]=Math.pow(1-t,3),s.bezierFactorOne[e]=3*Math.pow(1-t,2)*t,s.bezierFactorTwo[e]=3*(1-t)*Math.pow(t,2)}}calculateCurvePointAtIndex(e){const t=Math.round(e*s.bezierCurveStepSize);return t<0||t>=s.bezierCurveStepSize?new n.PointF2D:new n.PointF2D(s.oneMinusTPow3[t]*this.bezierStartPt.x+s.bezierFactorOne[t]*this.bezierStartControlPt.x+s.bezierFactorTwo[t]*this.bezierEndControlPt.x+s.tPow3[t]*this.bezierEndPt.x,s.oneMinusTPow3[t]*this.bezierStartPt.y+s.bezierFactorOne[t]*this.bezierStartControlPt.y+s.bezierFactorTwo[t]*this.bezierEndControlPt.y+s.tPow3[t]*this.bezierEndPt.y)}}t.GraphicalCurve=s,s.bezierCurveStepSize=1e3},6723:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalGraphicalStaffEntryContainer=void 0,t.VerticalGraphicalStaffEntryContainer=class{constructor(e,t){this.staffEntries=[],this.absoluteTimestamp=t,this.staffEntries=new Array(e)}get Index(){return this.index}set Index(e){this.index=e}get AbsoluteTimestamp(){return this.absoluteTimestamp}get StaffEntries(){return this.staffEntries}set StaffEntries(e){this.staffEntries=e}static compareByTimestamp(e,t){const i=e.absoluteTimestamp.RealValue,n=t.absoluteTimestamp.RealValue;return i<n?-1:i>n?1:0}getFirstNonNullStaffEntry(){for(let e=0,t=this.staffEntries.length;e<t;++e){const t=this.staffEntries[e];if(t)return t}}}},6864:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeF2D=void 0,t.SizeF2D=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.width=e,this.height=t}}},6873:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(813),t),s(i(2774),t)},6888:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MXLHelper=void 0;const s=i(3902),r=n(i(1710)),o=n(i(3065));t.MXLHelper=class{static MXLtoIXmlElement(e){return this.MXLtoXMLstring(e).then((e=>{const t=(new DOMParser).parseFromString(e,"text/xml"),i=new s.IXmlElement(t.documentElement);return Promise.resolve(i)}),(e=>{throw new Error("extractSheetFromMxl: "+e.message)}))}static MXLtoXMLstring(e){const t=new r.default;return t.loadAsync(e).then((async e=>{let i=await t.file("META-INF/container.xml").async("text");if(!i.startsWith("<")){const e=await t.file("META-INF/container.xml").async("uint8array");i=new TextDecoder("utf-8").decode(e)}if(!i.startsWith("<")){const e=await t.file("META-INF/container.xml").async("uint8array");i=new TextDecoder("utf-16").decode(e)}const n=(new DOMParser).parseFromString(i,"text/xml").getElementsByTagName("rootfile")[0].getAttribute("full-path"),s=await t.file(n).async("text");if(!s.substring(0,1).startsWith("<")){const e=await t.file(n).async("uint8array");return new TextDecoder("utf-16").decode(e)}return s}),(e=>{throw o.default.error(e),e}))}}},6904:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix2D=void 0;const n=i(9409);class s{constructor(){this.matrix=[];for(let e=0;e<2;e++){this.matrix[e]=[];for(let t=0;t<2;t++)this.matrix[e][t]=0}}static getRotationMatrix(e){const t=new s,i=Math.cos(e),n=Math.sin(e);return t.matrix[0][0]=i,t.matrix[0][1]=-n,t.matrix[1][0]=n,t.matrix[1][1]=i,t}scalarMultiplication(e){for(let t=0;t<2;t++)for(let i=0;i<2;i++)this.matrix[t][i]*=e}getTransposeMatrix(){const e=new s;for(let t=0;t<2;t++)for(let i=0;i<2;i++)e.matrix[t][i]=this.matrix[i][t];return e}vectorMultiplication(e){const t=new n.PointF2D;return t.x=e.x*this.matrix[0][0]+e.y*this.matrix[0][1],t.y=e.x*this.matrix[1][0]+e.y*this.matrix[1][1],t}}t.Matrix2D=s},6954:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SystemLinesEnumHelper=t.SystemLinesEnum=void 0,function(e){e[e.SingleThin=0]="SingleThin",e[e.DoubleThin=1]="DoubleThin",e[e.ThinBold=2]="ThinBold",e[e.BoldThinDots=3]="BoldThinDots",e[e.DotsThinBold=4]="DotsThinBold",e[e.DotsBoldBoldDots=5]="DotsBoldBoldDots",e[e.None=6]="None",e[e.Dotted=7]="Dotted",e[e.Dashed=8]="Dashed",e[e.Bold=9]="Bold",e[e.BoldThin=10]="BoldThin",e[e.DoubleBold=11]="DoubleBold",e[e.Tick=12]="Tick",e[e.Short=13]="Short"}(i||(t.SystemLinesEnum=i={})),t.SystemLinesEnumHelper=class{static xmlBarlineStyleToSystemLinesEnum(e){return"regular"===e?i.SingleThin:"dotted"===e?i.Dotted:"dashed"===e?i.Dashed:"heavy"===e?i.Bold:"light-light"===e?i.DoubleThin:"light-heavy"===e?i.ThinBold:"heavy-light"===e?i.BoldThin:"heavy-heavy"===e?i.DoubleBold:"tick"===e?i.Tick:"short"===e?i.Short:"none"===e?i.None:i.SingleThin}}},6990:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicExpressionSymbolEnum=void 0,function(e){e[e.p=0]="p",e[e.f=1]="f",e[e.s=2]="s",e[e.z=3]="z",e[e.m=4]="m",e[e.r=5]="r"}(i||(t.DynamicExpressionSymbolEnum=i={}))},7066:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureBuildParameters=t.SystemBuildParameters=t.MusicSystemBuilder=void 0;const n=i(1888),s=i(9288),r=i(4543),o=i(164),a=i(9409),l=i(6452),c=i(6954),h=i(7921),u=i(164),d=i(813),f=i(67);t.MusicSystemBuilder=class{constructor(){this.musicSystems=[],this.globalSystemIndex=0,this.leadSheet=!1}initialize(e,t,i){this.leadSheet=e.LeadSheet,this.graphicalMusicSheet=e,this.rules=this.graphicalMusicSheet.ParentMusicSheet.Rules,this.measureList=t,this.numberOfVisibleStaffLines=i,this.activeRhythm=new Array(this.numberOfVisibleStaffLines),this.activeKeys=new Array(this.numberOfVisibleStaffLines),this.activeClefs=new Array(this.numberOfVisibleStaffLines),this.initializeActiveInstructions(this.measureList[0])}buildMusicSystems(){const e=this.getFullPageSystemWidth();let t=!1;for(this.measureListIndex=0,this.currentSystemParams=new p,this.currentSystemParams.currentSystem=this.initMusicSystem();this.measureListIndex<this.measureList.length;){var i;const r=this.measureList[this.measureListIndex];if(!r||!r[0]){this.measureListIndex++;continue}for(let e=0,t=r.length;e<t;++e)r[e].resetLayout();const o=r[0].parentSourceMeasure,a=o.HasEndLine,l=a&&this.rules.NewPartAndSystemAfterFinalBarline,c=this.currentSystemParams.IsSystemStartMeasure();o.IsSystemStartMeasure=c;const h=o===this.graphicalMusicSheet.ParentMusicSheet.getFirstSourceMeasure();let u=this.rules.MeasureLeftMargin,d=0;const f=this.getMeasureStartLine();if(u+=this.getLineWidth(r[0],f,c),!this.leadSheet){let e=!1;t&&this.rules.ShowRhythmAgainAfterPartEndOrFinalBarline&&(e=!0),u+=this.addBeginInstructions(r,c,h||e),d+=this.addEndInstructions(r)}let p=0;for(let e=0;e<this.numberOfVisibleStaffLines;e++)p=Math.max(p,r[e].minimumStaffEntriesWidth);const m=this.getMeasureEndLine();d+=this.getLineWidth(r[0],m,c);let g,b=this.rules.MeasureLeftMargin;if(this.measureListIndex+1<this.measureList.length){var n,s;const e=this.measureList[this.measureListIndex+1];g=null===(n=e[0])||void 0===n?void 0:n.parentSourceMeasure,(null===(s=g)||void 0===s?void 0:s.hasBeginInstructions())&&(b+=this.addBeginInstructions(e,!1,!1))}let v=u+d+p;(null===(i=r[0])||void 0===i||null===(i=i.parentSourceMeasure)||void 0===i?void 0:i.multipleRestMeasures)&&(v=this.rules.MultipleRestMeasureDefaultWidth);const y=this.currentSystemParams.systemMeasures.length,x=this.currentSystemParams.currentWidth+v+b<e,S=this.rules.NewPageAtXMLNewPageAttribute&&o.printNewPageXml,E=S||this.rules.NewSystemAtXMLNewPageAttribute&&o.printNewPageXml||this.rules.NewSystemAtXMLNewSystemAttribute&&o.printNewSystemXml||y===this.rules.RenderXMeasuresPerLineAkaSystem&&y>0;if(c||x&&!E){if(this.addMeasureToSystem(r,f,m,v,u,p,d),this.updateActiveClefs(o,r),this.measureListIndex++,l){if(this.rules.MaxSystemToDrawNumber===this.musicSystems.length)return this.finalizeCurrentSystem(r,!this.rules.StretchLastSystemLine,!1),this.musicSystems;this.finalizeCurrentAndCreateNewSystem(r,!this.rules.StretchLastSystemLine,!1)}t=a}else{if(this.rules.MaxSystemToDrawNumber===this.musicSystems.length)return this.finalizeCurrentSystem(r,!1,!0,S),this.musicSystems;this.finalizeCurrentAndCreateNewSystem(r,!1,!0,S)}}if(this.currentSystemParams.systemMeasures.length>0){if(this.rules.MaxSystemToDrawNumber===this.musicSystems.length)return this.finalizeCurrentSystem(this.measureList[this.measureList.length-1],!this.rules.StretchLastSystemLine,!1),this.musicSystems;this.finalizeCurrentAndCreateNewSystem(this.measureList[this.measureList.length-1],!this.rules.StretchLastSystemLine,!1)}return this.musicSystems}calculateSystemYLayout(){for(const e of this.musicSystems)this.optimizeDistanceBetweenStaffLines(e);this.calculateMusicSystemsRelativePositions()}setMeasureWidth(e,t,i,n){for(let s=0,r=e.length;s<r;++s){const r=e[s];r.setWidth(t),i>0&&(r.beginInstructionsWidth=i),n>0&&(r.endInstructionsWidth=n)}}finalizeCurrentAndCreateNewSystem(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.finalizeCurrentSystem(e,t,i,n),this.currentSystemParams=new p,void 0!==e&&this.measureListIndex<this.measureList.length&&(this.currentSystemParams.currentSystem=this.initMusicSystem())}finalizeCurrentSystem(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.currentSystemParams.currentSystem.breaksPage=n,this.adaptRepetitionLineWithIfNeeded(),void 0!==e&&i&&this.checkAndCreateExtraInstructionMeasure(e),this.stretchMusicSystem(t)}adaptRepetitionLineWithIfNeeded(){const e=this.currentSystemParams.systemMeasures;if(e.length>=1){const t=this.currentSystemParams.currentSystem.GraphicalMeasures[this.currentSystemParams.currentSystem.GraphicalMeasures.length-1];let i=0;const n=e[e.length-1];n.endLine===c.SystemLinesEnum.DotsBoldBoldDots&&(n.endLine=c.SystemLinesEnum.DotsThinBold,i=t[0].getLineWidth(c.SystemLinesEnum.DotsBoldBoldDots)/2-t[0].getLineWidth(c.SystemLinesEnum.DotsThinBold)),this.currentSystemParams.currentSystemFixWidth-=i;for(let e=0,s=t.length;e<s;++e)t[e].endInstructionsWidth-=i}}addMeasureToSystem(e,t,i,n,s,r,o){this.currentSystemParams.systemMeasures.push({beginLine:t,endLine:i}),this.setMeasureWidth(e,n,s,o),this.addStaveMeasuresToSystem(e),this.currentSystemParams.currentWidth+=n,this.currentSystemParams.currentSystemFixWidth+=s+o,this.currentSystemParams.currentSystemVarWidth+=r,this.currentSystemParams.systemMeasureIndex++}initMusicSystem(){const e=h.MusicSheetCalculator.symbolFactory.createMusicSystem(this.globalSystemIndex++,this.rules);return this.musicSystems.push(e),this.layoutSystemStaves(e),e.createMusicSystemLabel(this.rules.InstrumentLabelTextHeight,this.rules.SystemLabelsRightMargin,this.rules.LabelMarginBorderFactor,1===this.musicSystems.length),e}getFullPageSystemWidth(){return this.graphicalMusicSheet.ParentMusicSheet.pageWidth-this.rules.PageLeftMargin-this.rules.PageRightMargin-this.rules.SystemLeftMargin-this.rules.SystemRightMargin}layoutSystemStaves(e){const t=this.getFullPageSystemWidth(),i=e.PositionAndShape;i.BorderLeft=0,i.BorderRight=t,i.BorderTop=0;const n=[],s=this.graphicalMusicSheet.ParentMusicSheet.Instruments;for(let a=0,l=s.length;a<l;++a){const e=s[a];if(e.isVisible()&&0!==e.Voices.length)for(let t=0,i=e.Staves.length;t<i;++t){const i=e.Staves[t];(null===i||void 0===i?void 0:i.Visible)&&n.push(i)}}let r=!1;if(this.leadSheet)for(let a=0,l=n.length;a<l;++a)if(n[a].ParentInstrument.LyricVersesNumbers.length>1){r=!0;break}let o=0;for(let a=0;a<n.length;a++)if(this.addStaffLineToMusicSystem(e,o,n[a]),o+=this.rules.StaffHeight,a+1<n.length){let e=0;e=this.leadSheet&&!r?2.5:n[a].ParentInstrument===n[a+1].ParentInstrument?this.rules.BetweenStaffDistance:this.rules.StaffDistance,o+=e}i.BorderBottom=o}addStaffLineToMusicSystem(e,t,i){if(e){const n=h.MusicSheetCalculator.symbolFactory.createStaffLine(e,i);e.StaffLines.push(n);const s=n.PositionAndShape,r=new a.PointF2D;r.x=0,s.BorderRight=e.PositionAndShape.Size.width,r.y=t,s.RelativePosition=r,s.BorderLeft=0,s.BorderTop=0,s.BorderBottom=this.rules.StaffHeight;for(let e=0;e<5;e++){const t=new a.PointF2D;t.x=0,t.y=e*this.rules.StaffHeight/4;const i=new a.PointF2D;i.x=n.PositionAndShape.Size.width,i.y=e*this.rules.StaffHeight/4,this.leadSheet&&(t.y=i.y=0),n.StaffLines[e]=new l.GraphicalLine(t,i,this.rules.StaffLineWidth)}}}initializeActiveInstructions(e){const t=this.graphicalMusicSheet.ParentMusicSheet.getFirstSourceMeasure();if(t){this.visibleStaffIndices=this.graphicalMusicSheet.getVisibleStavesIndicesFromSourceMeasure(e);for(let e=0,i=this.visibleStaffIndices.length;e<i;e++){const i=this.visibleStaffIndices[e],n=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(t,i);this.activeClefs[e]=t.FirstInstructionsStaffEntries[i].Instructions[0],n.InitiallyActiveClef=this.activeClefs[e];const s=t.FirstInstructionsStaffEntries[i].Instructions[1];if(s){let t=r.KeyInstruction.copy(s);t=this.transposeKeyInstruction(t,n),this.activeKeys[e]=t}const o=t.FirstInstructionsStaffEntries[i].Instructions[2];this.activeRhythm[e]=o}}}transposeKeyInstruction(e,t){const i=t.getTransposedHalftones();return i!==e.isTransposedBy&&t.ParentStaff.ParentInstrument.MidiInstrumentId!==u.MidiInstrument.Percussion&&void 0!==h.MusicSheetCalculator.transposeCalculator&&h.MusicSheetCalculator.transposeCalculator.transposeKey(e,i),e}addBeginInstructions(e,t,i){const n=e.length;if(0===n)return 0;let s=0;const r=e[0].parentSourceMeasure,o=[];for(let a=0;a<n;++a){const n=e[a];n&&o.push(n.getVFStave());const l=this.visibleStaffIndices[a],c=r.FirstInstructionsStaffEntries[l],h=this.AddInstructionsAtMeasureBegin(c,n,a,i,t);s=Math.max(s,h)}return o[0].formatBegModifiers(o),s}addEndInstructions(e){const t=e.length;if(0===t)return 0;let i=.5;const n=e[0].parentSourceMeasure;for(let s=0;s<t;s++){const t=e[s],r=this.visibleStaffIndices[s],o=n.LastInstructionsStaffEntries[r],a=this.addInstructionsAtMeasureEnd(o,t,e);i=Math.max(i,a)}return i}AddInstructionsAtMeasureBegin(e,t,i,n,a){let l,c,h,u=0;if(e)for(let g=0,b=e.Instructions.length;g<b;++g){const t=e.Instructions[g];t instanceof o.ClefInstruction?l=t:t instanceof r.KeyInstruction?c=t:t instanceof s.RhythmInstruction&&(h=t)}t.InitiallyActiveClef=null!==l&&void 0!==l?l:this.activeClefs[i],a&&(l||(l=this.activeClefs[i]),c||(c=r.KeyInstruction.copy(this.activeKeys[i])),n&&!h&&(h=this.activeRhythm[i]));let d=!1,f=!1,p=!1;if(l?(t.addClefAtBegin(l),d=!0):l=this.activeClefs[i],c){c=this.transposeKeyInstruction(c,t);const e=a?void 0:this.activeKeys[i];t.addKeyAtBegin(c,e,l),f=!0}if(void 0!==h&&h.PrintObject&&this.rules.RenderTimeSignatures){let e=!0;const i=t.MeasureNumber-1-this.rules.MinMeasureToDrawIndex;if(t.MeasureNumber-1>=0&&this.measureList[i]){var m;const t=null===(m=this.measureList[i][0])||void 0===m?void 0:m.parentSourceMeasure;(null===t||void 0===t?void 0:t.ImplicitMeasure)&&(null===t||void 0===t?void 0:t.RhythmPrinted)&&(e=!1)}e&&(t.addRhythmAtBegin(h),t.parentSourceMeasure.RhythmPrinted=h,p=!0)}return(d||f||p)&&(u+=t.beginInstructionsWidth,p&&(u+=this.rules.RhythmRightMargin)),u}addInstructionsAtMeasureEnd(e,t,i){if(!e||!e.Instructions||0===e.Instructions.length)return 0;for(let n=0,s=e.Instructions.length;n<s;++n){const s=e.Instructions[n];if(s instanceof o.ClefInstruction){const e=s;t.addClefAtEnd(e);for(const n of i)n!==t&&n.addClefAtEnd(e,!1)}}return this.rules.MeasureRightMargin+t.endInstructionsWidth}updateActiveClefs(e,t){for(let i=0,n=t.length;i<n;i++){const t=this.visibleStaffIndices[i],n=e.FirstInstructionsStaffEntries[t];if(n)for(let e=0,c=n.Instructions.length;e<c;++e){const t=n.Instructions[e];t instanceof o.ClefInstruction?this.activeClefs[i]=t:t instanceof r.KeyInstruction?this.activeKeys[i]=t:t instanceof s.RhythmInstruction&&(this.activeRhythm[i]=t)}const a=e.getEntriesPerStaff(t);for(let e=0,s=a.length;e<s;++e){const t=a[e];if(t.Instructions)for(let e=0,n=t.Instructions.length;e<n;++e){const n=t.Instructions[e];n instanceof o.ClefInstruction&&(this.activeClefs[i]=n)}}const l=e.LastInstructionsStaffEntries[t];if(l){const e=l.Instructions;for(let t=0,n=e.length;t<n;++t){const n=e[t];n instanceof o.ClefInstruction&&(this.activeClefs[i]=n)}}}}checkAndCreateExtraInstructionMeasure(e){const t=e[0].parentSourceMeasure.FirstInstructionsStaffEntries,i=[];for(let s=0,r=e.length;s<r;++s){const n=e[s];i.push(t[n.ParentStaff.idInMusicSheet])}let n=0;for(let o=0,a=i.length;o<a;++o){const e=i[o];if(!e)continue;const t=e.Instructions;let a,l;for(let i=0,n=t.length;i<n;++i){const e=t[i];e instanceof r.KeyInstruction&&e.Key!==this.activeKeys[o].Key&&(a=e),e instanceof s.RhythmInstruction&&e!==this.activeRhythm[o]&&(l=e)}if(void 0!==a||l){const e=this.addExtraInstructionMeasure(o,a,l);n=Math.max(n,e)}}n>0&&(this.currentSystemParams.systemMeasures.push({beginLine:c.SystemLinesEnum.None,endLine:c.SystemLinesEnum.None}),this.currentSystemParams.currentWidth+=n,this.currentSystemParams.currentSystemFixWidth+=n)}addExtraInstructionMeasure(e,t,i){const n=this.currentSystemParams.currentSystem,s=h.MusicSheetCalculator.symbolFactory.createExtraGraphicalMeasure(n.StaffLines[e]);[].push(s),t&&s.addKeyAtBegin(t,this.activeKeys[e],this.activeClefs[e]),void 0!==i&&i.PrintObject&&s.addRhythmAtBegin(i),s.PositionAndShape.BorderLeft=0,s.PositionAndShape.BorderTop=0,s.PositionAndShape.BorderBottom=this.rules.StaffHeight;const r=this.rules.MeasureLeftMargin+s.beginInstructionsWidth+this.rules.MeasureRightMargin;return s.PositionAndShape.BorderRight=r,n.StaffLines[e].Measures.push(s),r}addStaveMeasuresToSystem(e){if(e[0]){const t=[];for(let n=0;n<e.length;n++)t.push(e[n]);const i=this.currentSystemParams.currentSystem;for(let e=0;e<this.numberOfVisibleStaffLines;e++){const n=t[e];i.StaffLines[e].Measures.push(n),n.ParentStaffLine=i.StaffLines[e]}i.AddGraphicalMeasures(t)}}getMeasureStartLine(){if(this.thisMeasureBeginsLineRepetition()){const e=0===this.measureListIndex;if(e&&this.rules.RepetitionAllowFirstMeasureBeginningRepeatBarline)return c.SystemLinesEnum.BoldThinDots;const t=this.currentSystemParams.IsSystemStartMeasure();if(this.previousMeasureEndsLineRepetition()&&!t)return c.SystemLinesEnum.DotsBoldBoldDots;if(!e)return c.SystemLinesEnum.BoldThinDots}return c.SystemLinesEnum.None}getMeasureEndLine(){let e;try{if(e=this.measureList[this.measureListIndex][0].parentSourceMeasure,this.rules.RenderMultipleRestMeasures&&e.multipleRestMeasures>1){const t=Math.min(this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length-1,e.measureListIndex+e.multipleRestMeasures-1);e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t]}}finally{}return this.nextMeasureBeginsLineRepetition()&&this.thisMeasureEndsLineRepetition()?c.SystemLinesEnum.DotsBoldBoldDots:this.thisMeasureEndsLineRepetition()?c.SystemLinesEnum.DotsThinBold:this.nextMeasureHasKeyInstructionChange()||this.thisMeasureEndsWordRepetition()||this.nextMeasureBeginsWordRepetition()?c.SystemLinesEnum.DoubleThin:e&&void 0!==e.endingBarStyleEnum?e.endingBarStyleEnum:c.SystemLinesEnum.SingleThin}getLineWidth(e,t,i){let n=e.getLineWidth(t);return t===c.SystemLinesEnum.DotsBoldBoldDots&&(n/=2),i&&t===c.SystemLinesEnum.BoldThinDots&&(n+=this.rules.DistanceBetweenLastInstructionAndRepetitionBarline),n}previousMeasureEndsLineRepetition(){if(0===this.measureListIndex)return!1;for(let e=0,t=this.measureList[this.measureListIndex-1].length;e<t;++e)if(this.measureList[this.measureListIndex-1][e].endsWithLineRepetition())return!0;return!1}thisMeasureBeginsLineRepetition(){for(let e=0,t=this.measureList[this.measureListIndex].length;e<t;++e)if(this.measureList[this.measureListIndex][e].beginsWithLineRepetition())return!0;return!1}nextMeasureBeginsLineRepetition(){const e=this.measureListIndex+1;if(e>=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length||!this.measureList[e])return!1;for(let t=0,i=this.measureList[e].length;t<i;++t)if(this.measureList[e][t].beginsWithLineRepetition())return!0;return!1}thisMeasureEndsLineRepetition(){for(let t=0,i=this.measureList[this.measureListIndex].length;t<i;++t){var e;const i=this.measureList[this.measureListIndex][t];if(i.endsWithLineRepetition())return!0;if(null!==(e=i.parentSourceMeasure)&&void 0!==e&&e.isReducedToMultiRest){const e=this.graphicalMusicSheet.ParentMusicSheet;let t=i.parentSourceMeasure;const n=e.SourceMeasures.indexOf(t);let s=t.multipleRestMeasureNumber;for(let i=n+1;i<e.SourceMeasures.length;i++){const n=e.SourceMeasures[i];if(!(n.multipleRestMeasureNumber>=s))break;t=n,s=n.multipleRestMeasureNumber}return t.endsWithLineRepetition()}}return!1}nextMeasureBeginsWordRepetition(){const e=this.measureListIndex+1;if(e>=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length||e>this.measureList.length-1)return!1;for(let t=0,i=this.measureList[e].length;t<i;++t)if(this.measureList[e][t].beginsWithWordRepetition())return!0;return!1}thisMeasureEndsWordRepetition(){for(let e=0,t=this.measureList[this.measureListIndex].length;e<t;++e)if(this.measureList[this.measureListIndex][e].endsWithWordRepetition())return!0;return!1}nextMeasureHasKeyInstructionChange(){return void 0!==this.getNextMeasureKeyInstruction()}getNextMeasureKeyInstruction(){if(this.measureListIndex<this.measureList.length-1)for(let t=0;t<this.measureList[this.measureListIndex].length;t++){var e;const i=null===(e=this.measureList[this.measureListIndex+1][t])||void 0===e?void 0:e.parentSourceMeasure;if(!i)return;return i.getKeyInstruction(this.visibleStaffIndices[t])}}calculateXScalingFactor(e,t){return Math.abs(t-0)<1e-5||Math.abs(e-0)<1e-5?1:(this.currentSystemParams.currentSystem.StaffLines[0].PositionAndShape.Size.width-e)/t}stretchMusicSystem(e){let t=this.calculateXScalingFactor(this.currentSystemParams.currentSystemFixWidth,this.currentSystemParams.currentSystemVarWidth);e&&(t=Math.min(t,this.rules.LastSystemMaxScalingFactor));const i=this.currentSystemParams.currentSystem;for(let n=0,s=i.StaffLines.length;n<s;++n){const e=i.StaffLines[n];let s=0;for(let n=0;n<e.Measures.length;n++){const r=e.Measures[n];r.setPositionInStaffline(s);const o=r.beginInstructionsWidth;if(r.setWidth(o+r.minimumStaffEntriesWidth*t+r.endInstructionsWidth),n<this.currentSystemParams.systemMeasures.length){const e=this.currentSystemParams.systemMeasures[n].beginLine,t=r.getLineWidth(c.SystemLinesEnum.BoldThinDots);if(e===c.SystemLinesEnum.BoldThinDots){let o=s;0===n&&(o=s+r.beginInstructionsWidth-t),i.createVerticalLineForMeasure(o,t,e,f.SystemLinePosition.MeasureBegin,n,r)}}if(r.staffEntriesScaleFactor=t,r.layoutSymbols(),!(n+1<this.currentSystemParams.systemMeasures.length&&this.currentSystemParams.systemMeasures[n+1].beginLine===c.SystemLinesEnum.BoldThinDots)){let e=c.SystemLinesEnum.SingleThin;n<this.currentSystemParams.systemMeasures.length&&(e=this.currentSystemParams.systemMeasures[n].endLine);const t=r.getLineWidth(e);let s=r.PositionAndShape.RelativePosition.x+r.PositionAndShape.BorderRight-t;e===c.SystemLinesEnum.DotsBoldBoldDots&&(s-=t/2),i.createVerticalLineForMeasure(s,t,e,f.SystemLinePosition.MeasureEnd,n,r)}s=r.PositionAndShape.RelativePosition.x+r.PositionAndShape.BorderRight}}e&&this.decreaseMusicSystemBorders()}decreaseMusicSystemBorders(){const e=this.currentSystemParams.currentSystem,t=d.CollectionUtil.last(e.StaffLines[0].Measures).PositionAndShape,i=t.RelativePosition.x+t.Size.width;for(let n=0,s=e.StaffLines.length;n<s;++n){const t=e.StaffLines[n];t.PositionAndShape.BorderRight=i;for(let e=0,n=t.StaffLines.length;e<n;++e){const n=t.StaffLines[e];n.End=new a.PointF2D(i,n.End.y)}}e.PositionAndShape.BorderRight=i+this.currentSystemParams.maxLabelLength+this.rules.SystemLabelsRightMargin}updateStaffLinesRelativePosition(e,t,i){for(let n=t;n<e.StaffLines.length;n++)e.StaffLines[n].PositionAndShape.RelativePosition.y=i;e.PositionAndShape.BorderBottom+=i}createMusicPage(){const e=new n.GraphicalMusicPage(this.graphicalMusicSheet);return this.graphicalMusicSheet.MusicPages.push(e),e.PageNumber=this.graphicalMusicSheet.MusicPages.length,e.PositionAndShape.BorderLeft=0,e.PositionAndShape.BorderRight=this.graphicalMusicSheet.ParentMusicSheet.pageWidth,e.PositionAndShape.BorderTop=0,e.PositionAndShape.BorderBottom=this.rules.PageHeight,e.PositionAndShape.RelativePosition=new a.PointF2D(0,0),e}addSystemToPage(e,t){e.MusicSystems.push(t),t.Parent=e}optimizeDistanceBetweenStaffLines(e){if(!e.checkStaffEntriesForStaffEntryLink())for(let n=0;n<e.StaffLines.length-1;n++){const t=e.StaffLines[n].BottomLine,i=e.StaffLines[n+1].SkyLine;let s=0;for(let e=0;e<t.length;e++){const n=t[e],r=Math.max(0,e-6),o=Math.min(i.length-1,e+6);let a=0;for(let e=r;e<=o;e++)a=Math.min(a,i[e]);const l=n-a;s=Math.max(l,s)}s+=this.rules.MinSkyBottomDistBetweenStaves,s=Math.max(s,this.rules.StaffHeight+this.rules.MinimumStaffLineDistance);const r=s+e.StaffLines[n].PositionAndShape.RelativePosition.y;this.updateStaffLinesRelativePosition(e,n+1,r)}const t=e.StaffLines[0];e.PositionAndShape.BorderTop=t.PositionAndShape.RelativePosition.y+t.PositionAndShape.BorderTop;const i=e.StaffLines[e.StaffLines.length-1];e.PositionAndShape.BorderBottom=i.PositionAndShape.RelativePosition.y+i.PositionAndShape.BorderBottom}calculateMusicSystemsRelativePositions(){let e=this.createMusicPage(),t=0,i=this.musicSystems[0],n=0;for(let s=0;s<this.musicSystems.length;s++)if(i=this.musicSystems[s],0===e.MusicSystems.length){this.addSystemToPage(e,i),t=this.rules.CompactMode?this.rules.PageTopMarginNarrow:this.rules.PageTopMargin,1===this.graphicalMusicSheet.MusicPages.length&&this.rules.RenderTitle&&(t+=this.rules.TitleTopDistance+this.rules.SheetTitleHeight+this.rules.TitleBottomDistance);const s=new a.PointF2D(this.rules.PageLeftMargin+this.rules.SystemLeftMargin,t);i.PositionAndShape.RelativePosition=s,t+i.PositionAndShape.BorderBottom>this.rules.PageHeight-this.rules.PageBottomMargin&&(n++,n<=4&&console.log("warning: could not fit a single system on page ".concat(e.PageNumber," and measure number ").concat(i.GraphicalMeasures[0][0].MeasureNumber,'.\n                            The PageFormat may be too small for this sheet."\n                            Will not give further warnings for all pages, only total.')))}else{const n=this.musicSystems[s-1],r=n.StaffLines[n.StaffLines.length-1],o=r.PositionAndShape;let l=this.findRequiredDistanceWithSkyBottomLine(n,i);l+=this.rules.MinSkyBottomDistBetweenSystems,l=Math.max(l,this.rules.MinimumDistanceBetweenSystems+r.StaffHeight);const c=t+o.RelativePosition.y+l,h=c+i.PositionAndShape.BorderMarginBottom;if(this.rules.NewPageAtXMLNewPageAttribute&&n.breaksPage||!(h<this.rules.PageHeight-this.rules.PageBottomMargin)){e=this.createMusicPage(),s-=1;continue}{this.addSystemToPage(e,i),t=c;const n=new a.PointF2D(this.rules.PageLeftMargin+this.rules.SystemLeftMargin,t);i.PositionAndShape.RelativePosition=n}}n>0&&console.log("total amount of pages that couldn't fit a single music system: ".concat(n," of ").concat(e.PageNumber))}findRequiredDistanceWithSkyBottomLine(e,t){const i=e.StaffLines[e.StaffLines.length-1],n=t.StaffLines[0],s=i.BottomLine,r=n.SkyLine,o=i.PositionAndShape,a=n.PositionAndShape,l=1/this.rules.SamplingUnit;let c=0;for(let h=0;h<s.length;h++){const e=s[h],t=h+Math.round((o.RelativePosition.x-a.RelativePosition.x)*l);if(t<0)continue;if(t>=r.length)break;const i=Math.max(0,t-6),n=Math.min(r.length-1,t+6);let u=0;for(let s=i;s<=n;s++)u=Math.min(u,r[s]);const d=e-u;c=Math.max(d,c)}return 0===c&&(c=o.BorderBottom-a.BorderTop),c}};class p{constructor(){this.systemMeasures=[],this.systemMeasureIndex=0,this.currentWidth=0,this.currentSystemFixWidth=0,this.currentSystemVarWidth=0,this.maxLabelLength=0}IsSystemStartMeasure(){return 0===this.systemMeasureIndex}}t.SystemBuildParameters=p,t.MeasureBuildParameters=class{}},7098:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowInstrumentBrace=void 0;var s=n(i(3206)).default.Flow;const r=i(3109);class o extends r.VexFlowInstrumentBracket{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this.vexflowConnector.setType(s.StaveConnector.type.BRACE)}}t.VexFlowInstrumentBrace=o},7103:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenSheetMusicDisplay=void 0;const s=i(3902),r=i(806),o=i(9099),a=i(8724),l=i(7921),c=i(9479),h=i(9436),u=i(9834),d=i(6597),f=i(6888),p=i(3173),m=n(i(3065)),g=i(3661),b=i(4146),v=i(4434),y=i(624),x=i(9713),S=i(6362),E=i(3263),w=i(2683),T=i(8233),_=i(1538);class M{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.OSMDOptions.OSMDOptionsStandard();if(this.version="1.9.3-release",this.cursorsOptions=[],this.cursors=[],this.zoom=1,this.zoomUpdated=!1,this.loadUrlTimeout=5e3,"string"==typeof e?this.container=document.getElementById(e):e&&"appendChild"in e&&(this.container=e),!this.container)throw new Error("Please pass a valid div container to OpenSheetMusicDisplay");void 0===t.autoResize&&(t.autoResize=!0),this.backendType=y.BackendType.SVG,this.setOptions(t)}get cursor(){return this.cursors[0]}get Cursor(){return this.cursor}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Untitled Score";if(this.reset(),"string"==typeof e){const t=e,i=this;if(t.startsWith("PK\x03\x04"))return m.default.debug("[OSMD] This is a zip file, unpack it first: "+t),f.MXLHelper.MXLtoXMLstring(t).then((e=>i.load(e)),(e=>{throw m.default.debug(e),new Error("OpenSheetMusicDisplay: Invalid MXL file")}));if(t.startsWith("\uf7ef\uf7bb\uf7bf"))return m.default.debug("[OSMD] UTF with BOM detected, truncate first 3 bytes and pass along: "+t),i.load(t.substring(3));let n=t;if(/^\s/.test(n)&&(n=n.trim()),n.startsWith("<?xml")){const t=this.OnXMLRead(n);m.default.debug("[OSMD] Finally parsing XML content, length: "+t.length),e=(new DOMParser).parseFromString(t,"application/xml")}else{if(n.length<2083)return m.default.debug("[OSMD] Retrieve the file at the given URL: "+n),p.AJAX.ajax(n,this.loadUrlTimeout).then((e=>i.load(e)),(e=>{throw e}));console.error("[OSMD] osmd.load(string): Could not process string. Did not find <?xml at beginning.")}}if(!e||!e.nodeName)return Promise.reject(new Error("OpenSheetMusicDisplay: The document which was provided is invalid"));const i=e,n=i.childNodes;let r;m.default.debug("[OSMD] load(), Document url: "+i.URL);for(let s=0,o=n.length;s<o;s+=1){const e=n[s];if(e.nodeType===Node.ELEMENT_NODE&&"score-partwise"===e.nodeName.toLowerCase()){r=e;break}}if(!r)return console.error("Could not parse MusicXML, no valid partwise element found"),Promise.reject(new Error("OpenSheetMusicDisplay: Document is not a valid 'partwise' MusicXML"));const a=new s.IXmlElement(r),l=new _.TemposCalculator,c=new o.MusicSheetReader([l],this.rules);return this.sheet=c.createMusicSheet(a,t),void 0===this.sheet?Promise.reject(new Error("given music sheet was incomplete or could not be loaded.")):(m.default.info("[OSMD] Loaded sheet ".concat(this.sheet.TitleString," successfully.")),this.needBackendUpdate=!0,this.updateGraphic(),Promise.resolve({}))}updateGraphic(){const e=new r.VexFlowMusicSheetCalculator(this.rules);this.graphic=new a.GraphicalMusicSheet(this.sheet,e),this.drawingParameters.drawCursors&&this.cursors.forEach((e=>{e.init(this.sheet.MusicPartManager,this.graphic)})),this.drawingParameters.DrawingParametersEnum===b.DrawingParametersEnum.leadsheet&&(this.graphic.LeadSheet=!0)}render(){var e;if(!this.graphic)throw new Error("OSMD: load() needs to be called before render()");null!==(e=this.drawer)&&void 0!==e&&e.clear(),this.Sheet.SourceMeasures[0].ImplicitMeasure&&(this.rules.MinMeasureToDrawNumber>1&&(this.rules.MinMeasureToDrawIndex=this.rules.MinMeasureToDrawNumber),this.rules.MaxMeasureToDrawNumber>0&&(this.rules.MaxMeasureToDrawIndex=this.rules.MaxMeasureToDrawNumber));let t=this.container.offsetWidth;this.rules.RenderSingleHorizontalStaffline&&(t=this.rules.SheetMaximumWidth),this.sheet.pageWidth=t/this.zoom/10,this.rules.PageFormat&&!this.rules.PageFormat.IsUndefined?(this.rules.PageHeight=this.sheet.pageWidth/this.rules.PageFormat.aspectRatio,m.default.debug("[OSMD] PageHeight: "+this.rules.PageHeight)):(m.default.debug("[OSMD] endless/undefined pageformat, id: "+this.rules.PageFormat.idString),this.rules.PageHeight=100001),this.graphic.reCalculate(),this.drawingParameters.drawCursors&&(this.graphic.Cursors.length=0),this.createOrRefreshRenderBackend(),this.needBackendUpdate=!1,this.drawer.setZoom(this.zoom),this.drawer.drawSheet(this.graphic),this.enableOrDisableCursors(this.drawingParameters.drawCursors),this.drawingParameters.drawCursors&&this.cursors.forEach((e=>{e.update()})),this.zoomUpdated=!1,this.rules.RenderCount++}createOrRefreshRenderBackend(){if(this.drawer&&this.drawer.Backends){this.drawer.Backends[0]&&this.drawer.Backends[0].removeAllChildrenFromContainer(this.container);for(const e of this.drawer.Backends)e.free();this.drawer.Backends.clear()}this.drawingParameters.Rules=this.rules,this.drawer=new c.VexFlowMusicSheetDrawer(this.drawingParameters),this.drawer.drawableBoundingBoxElement=this.DrawBoundingBox,this.drawer.bottomLineVisible=this.drawBottomLine,this.drawer.skyLineVisible=this.drawSkyLine;let e,t=this.container.offsetWidth;this.rules.RenderSingleHorizontalStaffline&&(t=10*(this.EngravingRules.PageLeftMargin+this.graphic.MusicPages[0].PositionAndShape.Size.width+this.EngravingRules.PageRightMargin)*this.zoom);const i=32767;for(const n of this.graphic.MusicPages){if(n.PageNumber>this.rules.MaxPageToDrawNumber)break;const s=this.createBackend(this.backendType,n),r=" exceeds CanvasBackend limit of 32767. Cutting off score.";s.getOSMDBackendType()===y.BackendType.Canvas&&t>i&&(m.default.warn("[OSMD] Warning: width of "+t+r),t=i),this.rules.PageFormat&&!this.rules.PageFormat.IsUndefined?e=t/this.rules.PageFormat.aspectRatio:(e=n.PositionAndShape.Size.height,e+=this.rules.PageBottomMargin,s.getOSMDBackendType()===y.BackendType.Canvas&&(e+=.1),e+=n.PositionAndShape.BorderTop,this.rules.RenderTitle&&(e+=this.rules.TitleTopDistance),e*=10*this.zoom),s.getOSMDBackendType()===y.BackendType.Canvas&&e>i&&(m.default.warn("[OSMD] Warning: height of "+e+r),e=Math.min(e,i)),s.resize(t,e),s.clear(),s.getContext().setFillStyle(this.rules.DefaultColorMusic),s.getContext().setStrokeStyle(this.rules.DefaultColorMusic),this.drawer.Backends.push(s),this.graphic.drawer=this.drawer}}exportSVG(){for(const t of null===(e=this.drawer)||void 0===e?void 0:e.Backends){var e;t instanceof h.SvgVexFlowBackend&&t.export()}}IsReadyToRender(){return void 0!==this.graphic}clear(){var e;null!==(e=this.drawer)&&void 0!==e&&e.clear(),this.reset()}setOptions(e){if(this.rules||(this.rules=new x.EngravingRules),this.drawingParameters||e.drawingParameters?e.drawingParameters&&(this.drawingParameters?this.drawingParameters.DrawingParametersEnum=b.DrawingParametersEnum[e.drawingParameters.toLowerCase()]:this.drawingParameters=new g.DrawingParameters(b.DrawingParametersEnum[e.drawingParameters],this.rules)):this.drawingParameters=new g.DrawingParameters(b.DrawingParametersEnum.default,this.rules),null==e)return void m.default.warn("warning: osmd.setOptions() called without an options parameter, has no effect.\nexample usage: osmd.setOptions({drawCredits: false, drawPartNames: false})");this.OnXMLRead=function(e){return e},e.onXMLRead&&(this.OnXMLRead=e.onXMLRead);let t=!this.drawer||!this.drawer.Backends||this.drawer.Backends.length<1;if(void 0!==e.backend){const i=y.OSMDOptions.BackendTypeFromString(e.backend);t=t||this.backendType!==i,this.backendType=i}this.needBackendUpdate=t,void 0!==e.autoBeam&&(this.rules.AutoBeamNotes=e.autoBeam);const i=e.autoBeamOptions;if(i&&(void 0===i.maintain_stem_directions&&(i.maintain_stem_directions=!1),this.rules.AutoBeamOptions=i,i.groups&&i.groups.length))for(const n of i.groups)if(2!==n.length)throw new Error("Each fraction in autoBeamOptions.groups must be of length 2, e.g. [3,4] for beaming three fourths");void 0!==e.percussionOneLineCutoff&&(this.rules.PercussionOneLineCutoff=e.percussionOneLineCutoff),0!==this.rules.PercussionOneLineCutoff&&void 0!==e.percussionForceVoicesOneLineCutoff&&(this.rules.PercussionForceVoicesOneLineCutoff=e.percussionForceVoicesOneLineCutoff),void 0!==e.alignRests&&(this.rules.AlignRests=e.alignRests),void 0!==e.coloringMode&&this.setColoringMode(e),void 0!==e.coloringEnabled&&(this.rules.ColoringEnabled=e.coloringEnabled),void 0!==e.colorStemsLikeNoteheads&&(this.rules.ColorStemsLikeNoteheads=e.colorStemsLikeNoteheads),e.disableCursor&&(this.drawingParameters.drawCursors=!1),e.drawHiddenNotes&&(this.drawingParameters.drawHiddenNotes=!0),void 0!==e.drawCredits&&(this.drawingParameters.DrawCredits=e.drawCredits),void 0!==e.drawComposer&&(this.drawingParameters.DrawComposer=e.drawComposer),void 0!==e.drawTitle&&(this.drawingParameters.DrawTitle=e.drawTitle),void 0!==e.drawSubtitle&&(this.drawingParameters.DrawSubtitle=e.drawSubtitle),void 0!==e.drawLyricist&&(this.drawingParameters.DrawLyricist=e.drawLyricist),void 0!==e.drawMetronomeMarks&&(this.rules.MetronomeMarksDrawn=e.drawMetronomeMarks),void 0!==e.drawPartNames&&(this.drawingParameters.DrawPartNames=e.drawPartNames,e.drawPartAbbreviations||(this.rules.RenderPartAbbreviations=e.drawPartNames)),void 0!==e.drawPartAbbreviations&&(this.rules.RenderPartAbbreviations=e.drawPartAbbreviations),!1===e.drawFingerings&&(this.rules.RenderFingerings=!1),void 0!==e.drawMeasureNumbers&&(this.rules.RenderMeasureNumbers=e.drawMeasureNumbers),e.drawMeasureNumbersOnlyAtSystemStart&&(this.rules.RenderMeasureNumbersOnlyAtSystemStart=e.drawMeasureNumbersOnlyAtSystemStart),void 0!==e.drawLyrics&&(this.rules.RenderLyrics=e.drawLyrics),void 0!==e.drawTimeSignatures&&(this.rules.RenderTimeSignatures=e.drawTimeSignatures),void 0!==e.drawSlurs&&(this.rules.RenderSlurs=e.drawSlurs),void 0!==e.measureNumberInterval&&(this.rules.MeasureNumberLabelOffset=e.measureNumberInterval),void 0!==e.useXMLMeasureNumbers&&(this.rules.UseXMLMeasureNumbers=e.useXMLMeasureNumbers),void 0!==e.fingeringPosition&&(this.rules.FingeringPosition=S.AbstractExpression.PlacementEnumFromString(e.fingeringPosition)),void 0!==e.fingeringInsideStafflines&&(this.rules.FingeringInsideStafflines=e.fingeringInsideStafflines),void 0!==e.newSystemFromXML&&(this.rules.NewSystemAtXMLNewSystemAttribute=e.newSystemFromXML),void 0!==e.newSystemFromNewPageInXML&&(this.rules.NewSystemAtXMLNewPageAttribute=e.newSystemFromNewPageInXML),void 0!==e.newPageFromXML&&(this.rules.NewPageAtXMLNewPageAttribute=e.newPageFromXML),void 0!==e.fillEmptyMeasuresWithWholeRest&&(this.rules.FillEmptyMeasuresWithWholeRest=e.fillEmptyMeasuresWithWholeRest),void 0!==e.followCursor&&(this.FollowCursor=e.followCursor),void 0!==e.setWantedStemDirectionByXml&&(this.rules.SetWantedStemDirectionByXml=e.setWantedStemDirectionByXml),e.darkMode?(this.rules.applyDefaultColorMusic("#FFFFFF"),this.rules.PageBackgroundColor="#000000",this.rules.DarkModeEnabled=!0):!1===e.darkMode&&(this.rules.applyDefaultColorMusic("#000000"),this.rules.PageBackgroundColor=void 0,this.rules.DarkModeEnabled=!1),e.defaultColorMusic&&this.rules.applyDefaultColorMusic(e.defaultColorMusic),e.defaultColorNotehead&&(this.rules.DefaultColorNotehead=e.defaultColorNotehead),e.defaultColorRest&&(this.rules.DefaultColorRest=e.defaultColorRest),e.defaultColorStem&&(this.rules.DefaultColorStem=e.defaultColorStem),e.defaultColorLabel&&(this.rules.DefaultColorLabel=e.defaultColorLabel),e.defaultColorTitle&&(this.rules.DefaultColorTitle=e.defaultColorTitle),e.defaultFontFamily&&(this.rules.DefaultFontFamily=e.defaultFontFamily),e.defaultFontStyle&&(this.rules.DefaultFontStyle=e.defaultFontStyle),e.drawUpToMeasureNumber>=0&&(this.rules.MaxMeasureToDrawIndex=Math.max(e.drawUpToMeasureNumber-1,0),this.rules.MaxMeasureToDrawNumber=e.drawUpToMeasureNumber),e.drawFromMeasureNumber>=0&&(this.rules.MinMeasureToDrawIndex=Math.max(e.drawFromMeasureNumber-1,0),this.rules.MinMeasureToDrawNumber=e.drawFromMeasureNumber),e.drawUpToPageNumber&&(this.rules.MaxPageToDrawNumber=e.drawUpToPageNumber),e.drawUpToSystemNumber&&(this.rules.MaxSystemToDrawNumber=e.drawUpToSystemNumber),e.tupletsRatioed&&(this.rules.TupletsRatioed=!0),e.tupletsBracketed&&(this.rules.TupletsBracketed=!0),e.tripletsBracketed&&(this.rules.TripletsBracketed=!0),e.autoResize?(this.resizeHandlerAttached||this.autoResize(),this.autoResizeEnabled=!0):!1===e.autoResize&&(this.autoResizeEnabled=!1),void 0!==e.pageFormat&&this.setPageFormat(e.pageFormat),void 0!==e.pageBackgroundColor&&(this.rules.PageBackgroundColor=e.pageBackgroundColor),void 0!==e.renderSingleHorizontalStaffline&&(this.rules.RenderSingleHorizontalStaffline=e.renderSingleHorizontalStaffline),void 0!==e.spacingFactorSoftmax&&(this.rules.SoftmaxFactorVexFlow=e.spacingFactorSoftmax),void 0!==e.spacingBetweenTextLines&&(this.rules.SpacingBetweenTextLines=e.spacingBetweenTextLines),void 0!==e.stretchLastSystemLine&&(this.rules.StretchLastSystemLine=e.stretchLastSystemLine),void 0!==e.autoGenerateMultipleRestMeasuresFromRestMeasures&&(this.rules.AutoGenerateMultipleRestMeasuresFromRestMeasures=e.autoGenerateMultipleRestMeasuresFromRestMeasures),void 0!==e.cursorsOptions?this.cursorsOptions=e.cursorsOptions:this.cursorsOptions=[{type:y.CursorType.Standard,color:this.EngravingRules.DefaultColorCursor,alpha:.5,follow:!0}],void 0!==e.preferredSkyBottomLineBatchCalculatorBackend&&(this.rules.PreferredSkyBottomLineBatchCalculatorBackend=e.preferredSkyBottomLineBatchCalculatorBackend),void 0!==e.skyBottomLineBatchMinMeasures&&(this.rules.SkyBottomLineBatchMinMeasures=e.skyBottomLineBatchMinMeasures)}setColoringMode(e){if(e.coloringMode===v.ColoringModes.XML)return void(this.rules.ColoringMode=v.ColoringModes.XML);const t=[T.NoteEnum.C,T.NoteEnum.D,T.NoteEnum.E,T.NoteEnum.F,T.NoteEnum.G,T.NoteEnum.A,T.NoteEnum.B];let i;if(e.coloringMode===v.ColoringModes.CustomColorSet){if(!e.coloringSetCustom||8!==e.coloringSetCustom.length)throw new Error("Invalid amount of colors: With coloringModes.customColorSet, you have to provide a coloringSetCustom parameter (array) with 8 strings (C to B, rest note).");for(const t of e.coloringSetCustom)if(!/^\#[0-9a-fA-F]{6}$/.test(t))throw new Error("One of the color strings in options.coloringSetCustom was not a valid HTML Hex color:\n"+t);i=e.coloringSetCustom}else if(e.coloringMode===v.ColoringModes.AutoColoring){i=[];const e=Object.keys(w.AutoColorSet);for(let t=0;t<e.length;t++)i.push(w.AutoColorSet[e[t]])}const n=new E.Dictionary;for(let s=0;s<t.length;s++)n.setValue(t[s],i[s]);n.setValue(-1,i.last()),this.rules.ColoringSetCurrent=n,this.rules.ColoringMode=e.coloringMode}setLogLevel(e){switch(e){case"trace":m.default.setLevel(m.default.levels.TRACE);break;case"debug":m.default.setLevel(m.default.levels.DEBUG);break;case"info":m.default.setLevel(m.default.levels.INFO);break;case"warn":m.default.setLevel(m.default.levels.WARN);break;case"error":m.default.setLevel(m.default.levels.ERROR);break;case"silent":m.default.setLevel(m.default.levels.SILENT);break;default:m.default.warn("Could not set log level to ".concat(e,". Using warn instead.")),m.default.setLevel(m.default.levels.WARN)}}getLogLevel(){return m.default.getLevel()}reset(){this.drawingParameters.drawCursors&&this.cursors.forEach((e=>{e.hide()})),this.sheet=void 0,this.graphic=void 0,this.zoom=1,this.rules.RenderCount=0}autoResize(){const e=this;this.handleResize((()=>{}),(()=>{var t;(null===(t=this.graphic)||void 0===t?void 0:t.GetCalculator)instanceof r.VexFlowMusicSheetCalculator&&(this.graphic.GetCalculator.beamsNeedUpdate=!0),e.IsReadyToRender()&&e.renderAndScrollBack()}))}renderAndScrollBack(){const e=window.scrollY/document.body.scrollHeight;this.render();const t=document.body.scrollHeight*e;window.scrollTo({top:t,behavior:"instant"})}handleResize(e,t){let i,n;const s=this;function r(){s.AutoResizeEnabled&&(i=(new Date).getTime(),n||(e(),i=(new Date).getTime(),n=window.setTimeout(o,200)))}function o(){n=void 0,window.clearTimeout(n),(new Date).getTime()-i<200?n=window.setTimeout(o,200):t()}window.attachEvent?window.attachEvent("onresize",r):window.addEventListener("resize",r),this.resizeHandlerAttached=!0,window.setTimeout(e,0),window.setTimeout(t,1)}enableOrDisableCursors(e){if(this.drawingParameters.drawCursors=e,e)for(let o=0;o<this.cursorsOptions.length;o++){var t,i,n,s,r;const e=null===(t=null===(i=this.cursors[o])||void 0===i?void 0:i.Hidden)||void 0===t||t,a=null===(n=this.cursors[o])||void 0===n?void 0:n.Iterator;null===(s=this.cursors[o])||void 0===s||s.hide();let l=null===(r=this.drawer)||void 0===r?void 0:r.Backends[0];if(l&&this.rules.RestoreCursorAfterRerender&&this.cursors[o]){const e=this.cursors[o].updateCurrentPage();l=this.drawer.Backends[e-1]}l&&l.getRenderElement()&&(this.cursors[o]=new d.Cursor(l.getRenderElement(),this,this.cursorsOptions[o])),this.sheet&&this.graphic&&this.cursors[o]&&this.cursors[o].init(this.sheet.MusicPartManager,this.graphic),this.rules.RestoreCursorAfterRerender&&(this.cursors[o].hidden=e,a&&(this.cursors[o].iterator=a,this.cursors[o].update()))}else this.cursors.forEach((e=>{e.hide()}))}createBackend(e,t){let i;return i=void 0===e||e===y.BackendType.SVG?new h.SvgVexFlowBackend(this.rules):new u.CanvasVexFlowBackend(this.rules),i.graphicalMusicPage=t,i.initialize(this.container,this.zoom),i}static StringToPageFormat(e){let t=x.PageFormat.UndefinedPageFormat;if(e.match("^[0-9]+x[0-9]+$")){const i=e.split("x"),n=Number.parseInt(i[0],10),s=Number.parseInt(i[1],10);n>0&&n<32768&&s>0&&s<32768&&(t=new x.PageFormat(n,s,"customPageFormat".concat(e)))}return e=(e=(e=e.replace(" ","_")).replace("Landscape","L")).replace("Portrait","P"),M.PageFormatStandards.hasOwnProperty(e)?(t=M.PageFormatStandards[e],t):t}setPageFormat(e){const t=M.StringToPageFormat(e);this.needBackendUpdate=!t.Equals(this.rules.PageFormat),this.rules.PageFormat=t}setCustomPageFormat(e,t){if(e>0&&t>0){const i=new x.PageFormat(e,t);this.rules.PageFormat=i}}set DrawSkyLine(e){this.drawSkyLine=e,this.drawer&&(this.drawer.skyLineVisible=e)}get DrawSkyLine(){return this.drawer.skyLineVisible}set DrawBottomLine(e){this.drawBottomLine=e,this.drawer&&(this.drawer.bottomLineVisible=e)}get DrawBottomLine(){return this.drawer.bottomLineVisible}set DrawBoundingBox(e){this.setDrawBoundingBox(e,!0)}get DrawBoundingBox(){return this.drawBoundingBox}setDrawBoundingBox(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.drawBoundingBox=e,this.drawer&&(this.drawer.drawableBoundingBoxElement=e),t&&this.renderAndScrollBack()}get AutoResizeEnabled(){return this.autoResizeEnabled}set AutoResizeEnabled(e){this.autoResizeEnabled=e}get Zoom(){return this.zoom}set Zoom(e){var t;this.zoom=e,this.zoomUpdated=!0,(null===(t=this.graphic)||void 0===t?void 0:t.GetCalculator)instanceof r.VexFlowMusicSheetCalculator&&(this.graphic.GetCalculator.beamsNeedUpdate=this.zoomUpdated)}set FollowCursor(e){this.followCursor=e}get FollowCursor(){return this.followCursor}set TransposeCalculator(e){l.MusicSheetCalculator.transposeCalculator=e}get TransposeCalculator(){return l.MusicSheetCalculator.transposeCalculator}get Sheet(){return this.sheet}get Drawer(){return this.drawer}get GraphicSheet(){return this.graphic}get DrawingParameters(){return this.drawingParameters}get EngravingRules(){return this.rules}get Version(){return this.version}}t.OpenSheetMusicDisplay=M,M.PageFormatStandards={A3_L:new x.PageFormat(420,297,"A3_L"),A3_P:new x.PageFormat(297,420,"A3_P"),A4_L:new x.PageFormat(297,210,"A4_L"),A4_P:new x.PageFormat(210,297,"A4_P"),A5_L:new x.PageFormat(210,148,"A5_L"),A5_P:new x.PageFormat(148,210,"A5_P"),A6_L:new x.PageFormat(148,105,"A6_L"),A6_P:new x.PageFormat(105,148,"A6_P"),Endless:x.PageFormat.UndefinedPageFormat,Letter_L:new x.PageFormat(279.4,215.9,"Letter_L"),Letter_P:new x.PageFormat(215.9,279.4,"Letter_P")}},7109:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowPedal=void 0;const s=n(i(3206)),r=i(6438),o=i(7824),a=i(512);class l extends o.GraphicalPedal{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];switch(super(e,t),this.vfStyle=s.default.Flow.PedalMarking.Styles.BRACKET,this.ChangeBegin=!1,this.ChangeEnd=!1,this.line=-3,this.EndSymbolPositionAndShape=void 0,this.ChangeBegin=e.ChangeBegin,this.ChangeEnd=e.ChangeEnd,this.pedalSymbol){case a.MusicSymbol.PEDAL_SYMBOL:this.vfStyle=s.default.Flow.PedalMarking.Styles.TEXT,this.EndSymbolPositionAndShape=new r.BoundingBox(this,t);break;case a.MusicSymbol.PEDAL_MIXED:this.vfStyle=i&&n?s.default.Flow.PedalMarking.Styles.BRACKET_OPEN_BOTH:i?s.default.Flow.PedalMarking.Styles.BRACKET_OPEN_BEGIN:n?s.default.Flow.PedalMarking.Styles.MIXED_OPEN_END:s.default.Flow.PedalMarking.Styles.MIXED;break;case a.MusicSymbol.PEDAL_BRACKET:default:this.vfStyle=i&&n?s.default.Flow.PedalMarking.Styles.BRACKET_OPEN_BOTH:i?s.default.Flow.PedalMarking.Styles.BRACKET_OPEN_BEGIN:n?s.default.Flow.PedalMarking.Styles.BRACKET_OPEN_END:s.default.Flow.PedalMarking.Styles.BRACKET}}setStartNote(e){if(!e)return!1;for(const t of e.graphicalVoiceEntries){const e=t;if(null!==e&&void 0!==e&&e.vfStaveNote)return this.startNote=e.vfStaveNote,this.startVfVoiceEntry=e,!0}return!1}setEndNote(e){if(!e)return!1;for(const t of e.graphicalVoiceEntries){const e=t;if(null!==e&&void 0!==e&&e.vfStaveNote)return this.endNote=e.vfStaveNote,this.endVfVoiceEntry=e,!0}return!1}setEndMeasure(e){this.endMeasure=e}CalculateBoundingBox(){}setLine(e){this.line=e}getPedalMarking(){const e=new s.default.Flow.PedalMarking([this.startNote,this.endNote]);return this.endMeasure&&e.setEndStave(this.endMeasure.getVFStave()),e.setStyle(this.vfStyle),e.setLine(this.line),e.setCustomText(this.DepressText,this.ReleaseText),this.endVfVoiceEntry&&!this.getPedal.EndsStave||(e.EndsStave=!0),this.getPedal.BeginsStave&&(e.BeginsStave=!0),e.ChangeBegin=this.ChangeBegin,e.ChangeEnd=this.ChangeEnd,e}setEndsStave(e,t){(null===t||void 0===t?void 0:t.gte(e.parentSourceMeasure.Duration))&&(this.getPedal.EndsStave=!0)}setBeginsStave(e,t){e&&0===t.RealValue&&(this.getPedal.BeginsStave=!0)}}t.VexFlowPedal=l},7225:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7307:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidEnumArgumentException=t.ArgumentOutOfRangeException=t.MusicSheetReadingException=void 0,t.MusicSheetReadingException=class{constructor(e,t){this.message=e,t&&(this.message+=" "+t.toString())}},t.ArgumentOutOfRangeException=class{constructor(e){this.message=e}},t.InvalidEnumArgumentException=class{constructor(e){this.message=e}}},7435:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Label=void 0;const n=i(7533);t.Label=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.TextAlignmentEnum.CenterBottom,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.IsCreditLabel=!1,this.text=e,this.print=s,this.textAlignment=t,this.font=i,this.fontFamily=void 0}ToString(){return this.text}}},7456:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(4236),t),s(i(8365),t),s(i(9719),t),s(i(7718),t),s(i(4249),t),s(i(1850),t),s(i(4064),t),s(i(5282),t),s(i(8215),t),s(i(4387),t),s(i(2369),t),s(i(1910),t),s(i(6644),t),s(i(5274),t),s(i(4268),t),s(i(3236),t),s(i(5534),t),s(i(1336),t),s(i(9184),t),s(i(1850),t),s(i(5282),t),s(i(4387),t),s(i(2369),t),s(i(3236),t),s(i(5274),t)},7499:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(1083),t),s(i(9834),t),s(i(9436),t),s(i(1902),t),s(i(2400),t),s(i(6014),t),s(i(1216),t),s(i(9635),t),s(i(3753),t),s(i(7809),t),s(i(7098),t),s(i(3109),t),s(i(5246),t),s(i(3849),t),s(i(806),t),s(i(9479),t),s(i(4332),t),s(i(9310),t),s(i(5468),t),s(i(6670),t),s(i(5866),t),s(i(7506),t),s(i(6173),t),s(i(7785),t),s(i(4134),t)},7503:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReaderPluginManager=void 0;const s=n(i(3065));t.ReaderPluginManager=class{constructor(){this.voiceMeasureReadPlugins=[]}addVoiceMeasureReadPlugin(e){this.voiceMeasureReadPlugins.push(e)}processVoiceMeasureReadPlugins(e,t,i){for(const n of this.voiceMeasureReadPlugins)try{n.measureReadCalculations(e,t,i)}catch(e){s.default.info("VoiceGenerator.addSingleNote: ",e)}}}},7506:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexflowStafflineNoteCalculator=void 0;const n=i(8233),s=i(9635),r=i(3263),o=i(164),a=i(1336);class l{constructor(e){this.staffPitchListMapping=new r.Dictionary,this.baseLineNote=n.NoteEnum.B,this.baseLineOctave=1,this.rules=e}trackNote(e){if(!(e instanceof s.VexFlowGraphicalNote)||e.Clef().ClefType!==o.ClefEnum.percussion||e.sourceNote.isRest()||0===this.rules.PercussionOneLineCutoff||-1===this.rules.PercussionForceVoicesOneLineCutoff)return;const t=e.parentVoiceEntry.parentStaffEntry.sourceStaffEntry.ParentStaff.idInMusicSheet;let i;this.staffPitchListMapping.containsKey(t)||this.staffPitchListMapping.setValue(t,new Array),i=this.staffPitchListMapping.getValue(t);const n=e.sourceNote.Pitch;l.findOrInsert(i,n)}static PitchIndexOf(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(i>e.length-1)return-1;for(let n=i;n<e.length;n++){const i=e[n];if(t.OperatorEquals(i))return n}return-1}static findOrInsert(e,t){for(let i=0;i<e.length;i++){const n=e[i];if(t.OperatorEquals(n))return i;if(t.OperatorFundamentalLessThan(n))return e.splice(i,0,t),i}return e.push(t),e.length-1}positionNote(e){const t=e.parentVoiceEntry.parentStaffEntry.sourceStaffEntry.ParentStaff.idInMusicSheet;if(!(e instanceof s.VexFlowGraphicalNote)||e.sourceNote.isRest()||!this.staffPitchListMapping.containsKey(t))return e;const i=this.staffPitchListMapping.getValue(t),r=this.rules.PercussionUseXMLDisplayStep&&void 0!==e.sourceNote.displayStepUnpitched;if(i.length>this.rules.PercussionOneLineCutoff&&!r&&!this.rules.PercussionUseCajon2NoteSystem)return e;const o=e,c=e.sourceNote.Pitch;let h=this.baseLineNote,u=this.baseLineOctave;if(this.rules.PercussionUseCajon2NoteSystem?c.FundamentalNote===n.NoteEnum.C&&(h=n.NoteEnum.G,u=1):this.rules.PercussionUseXMLDisplayStep&&void 0!==e.sourceNote.displayStepUnpitched&&(h=e.sourceNote.displayStepUnpitched,u=e.sourceNote.displayOctaveUnpitched+this.rules.PercussionOneLineXMLDisplayStepOctaveOffset),i.length<=this.rules.PercussionForceVoicesOneLineCutoff)o.setAccidental(new n.Pitch(h,u,c.Accidental));else{const e=l.PitchIndexOf(i,c);if(e>-1){const t=Math.ceil(i.length/2);if(!this.rules.PercussionUseXMLDisplayStep)if(e>=t)switch(u=2,(e-t)%5){case 1:h=n.NoteEnum.E;break;case 2:h=n.NoteEnum.G;break;case 3:h=n.NoteEnum.B;break;case 4:h=n.NoteEnum.D,u=3;break;default:h=n.NoteEnum.C}else switch(e%5){case 1:h=n.NoteEnum.F;break;case 2:h=n.NoteEnum.D;break;case 3:h=n.NoteEnum.B,u=0;break;case 4:h=n.NoteEnum.G,u=0;break;default:h=n.NoteEnum.A}const s=new n.Pitch(h,u,c.Accidental);o.setAccidental(s);const r=o.parentVoiceEntry.parentVoiceEntry;!this.rules.SetWantedStemDirectionByXml&&r.Notes.length<2&&(s.Octave>this.baseLineOctave||s.FundamentalNote===this.baseLineNote&&s.Octave===this.baseLineOctave?o.parentVoiceEntry.parentVoiceEntry.WantedStemDirection=a.StemDirectionType.Up:o.parentVoiceEntry.parentVoiceEntry.WantedStemDirection=a.StemDirectionType.Down)}}return o}getStafflineUniquePositionCount(e){return this.staffPitchListMapping.containsKey(e)?this.staffPitchListMapping.getValue(e).length:0}}t.VexflowStafflineNoteCalculator=l},7533:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TextAlignment=t.TextAlignmentEnum=void 0,function(e){e[e.LeftTop=0]="LeftTop",e[e.LeftCenter=1]="LeftCenter",e[e.LeftBottom=2]="LeftBottom",e[e.CenterTop=3]="CenterTop",e[e.CenterCenter=4]="CenterCenter",e[e.CenterBottom=5]="CenterBottom",e[e.RightTop=6]="RightTop",e[e.RightCenter=7]="RightCenter",e[e.RightBottom=8]="RightBottom"}(i||(t.TextAlignmentEnum=i={})),t.TextAlignment=class{static IsLeft(e){return e===i.LeftTop||e===i.LeftCenter||e===i.LeftBottom}static IsCenterAligned(e){return e===i.CenterTop||e===i.CenterCenter||e===i.CenterBottom}static IsRight(e){return e===i.RightTop||e===i.RightCenter||e===i.RightBottom}}},7551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartListEntry=void 0,t.PartListEntry=class{constructor(e){this.enrolledTimestamps=[],this.visible=!0,this.musicSheet=e}get Visible(){return this.visible}set Visible(e){this.visible=e}getFirstSourceMeasure(){return this.musicSheet.SourceMeasures[this.startIndex]}getLastSourceMeasure(){return this.musicSheet.SourceMeasures[this.endIndex]}}},7586:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstrumentalGroup=void 0,t.InstrumentalGroup=class{constructor(e,t,i){this.instrumentalGroups=[],this.name=e,this.musicSheet=t,this.parent=i}get InstrumentalGroups(){return this.instrumentalGroups}get Parent(){return this.parent}get Name(){return this.name}set Name(e){this.name=e}get GetMusicSheet(){return this.musicSheet}}},7624:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionEndSymbol=void 0;const n=i(7741),s=i(2683),r=i(9409),o=i(6438),a=i(6452),l=i(813);class c extends n.GraphicalObject{constructor(e,t){super();const i=t,n=e.PositionAndShape.AbsolutePosition.y,c=l.CollectionUtil.last(e.StaffLines).PositionAndShape.RelativePosition.y+4;this.verticalLine=new a.GraphicalLine(new r.PointF2D(i,n),new r.PointF2D(i,n+c),.4,s.OutlineAndFillStyleEnum.SelectionSymbol);for(let s=0,o=e.StaffLines.length;s<o;++s){const t=e.StaffLines[s],o=new r.PointF2D(i,n+t.PositionAndShape.RelativePosition.y),a=new Array(3);o.y-=.2,a[0].x=o.x-3,a[0].y=o.y+1.2,a[1].x=o.x-2,a[1].y=o.y+.4,a[2].x=o.x-2,a[2].y=o.y+2,this.arrows.push(a);const l=new Array(8),c=.8;o.x-=.1,o.y+=.3;const h=.2;l[0].x=o.x-2,l[0].y=o.y+1.5-h,l[1].x=o.x-1,l[1].y=o.y+1.5-h,l[2].x=o.x-1,l[2].y=o.y+2.5,l[3].x=o.x-2,l[3].y=o.y+2.5,l[4].x=l[0].x,l[4].y=l[0].y-c,l[5].x=l[4].x+c+1,l[5].y=l[4].y,l[6].x=l[5].x,l[6].y=l[3].y+c,l[7].x=l[3].x,l[7].y=l[6].y,this.arrowlines.push(l)}this.boundingBox=new o.BoundingBox(this),this.boundingBox.AbsolutePosition=new r.PointF2D(i,n),this.boundingBox.BorderLeft=-.4,this.boundingBox.BorderRight=4,this.boundingBox.BorderBottom=c}}t.SelectionEndSymbol=c},7631:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RepetitionInstructionReader=void 0;const n=i(1645),s=i(1645),r=i(4356);t.RepetitionInstructionReader=class{set MusicSheet(e){this.musicSheet=e,this.xmlMeasureList=new Array(this.musicSheet.Instruments.length),this.repetitionInstructions=[]}prepareReadingMeasure(e,t){this.currentMeasureIndex=t}handleLineRepetitionInstructions(e){let t=!1;if(e.elements().length>0){let s="",r=!1,o="",a="",l="";const c=[],h=e.element("bar-style");h&&(l=h.value),s=e.attributes().length>0&&e.attribute("location")?e.attribute("location").value:"right";const u=e.elements();for(let e=0,t=u.length;e<t;++e){const t=u[e];if("repeat"===t.name&&t.hasAttributes)r=!0,o=t.attribute("direction").value;else if("ending"===t.name&&t.hasAttributes&&void 0!==t.attribute("type")&&t.attribute("number")){var i;if("no"===(null===(i=t.attribute("print-object"))||void 0===i?void 0:i.value))continue;a=t.attribute("type").value;let e=t.attribute("number").value;t.value&&(e=t.value);const n=e.split("[,+]");for(let t=0,i=n.length;t<i;++t){const e=n[t],i=e.match("[0-9]");if(-1!==e.search("-")&&2===i.length){const e=parseInt(i[0],10),t=parseInt(i[1],10);for(let i=e;i<=t;i++)c.push(i)}else for(let t=0,n=i.length;t<n;++t){const e=i[t];c.push(parseInt(e,10))}}}}if("light-heavy"!==l||0!==c.length||r||(t=!0),r||c.length>0)if("left"===s){if("start"===a){const e=new n.RepetitionInstruction(this.currentMeasureIndex,n.RepetitionInstructionEnum.Ending,n.AlignmentType.Begin,void 0,c);this.addInstruction(this.repetitionInstructions,e)}if("forward"===o){const e=new n.RepetitionInstruction(this.currentMeasureIndex,n.RepetitionInstructionEnum.StartLine);this.addInstruction(this.repetitionInstructions,e)}}else{if("stop"===a){const e=new n.RepetitionInstruction(this.currentMeasureIndex,n.RepetitionInstructionEnum.Ending,n.AlignmentType.End,void 0,c);this.addInstruction(this.repetitionInstructions,e)}if("backward"===o){const e=new n.RepetitionInstruction(this.currentMeasureIndex,n.RepetitionInstructionEnum.BackJumpLine);this.addInstruction(this.repetitionInstructions,e)}}}return t}handleRepetitionInstructionsFromWordsOrSymbols(e,t){const i=e.element("words"),s=this.currentMeasureIndex;if(i){const e="d\\s?\\.s\\.",t=i.value.trim().toLowerCase();if(r.StringUtil.StringContainsSeparatedWord(t,e+" al fine",!0)){const e=new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.DalSegnoAlFine);return this.addInstruction(this.repetitionInstructions,e),!0}const o="d\\.\\s?c\\.";if(r.StringUtil.StringContainsSeparatedWord(t,o+" al coda",!0)){const e=new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.DaCapoAlCoda);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,o+" al fine",!0)){const e=new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.DaCapoAlFine);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,o+" al coda",!0)){const e=new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.DaCapoAlCoda);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,o)||r.StringUtil.StringContainsSeparatedWord(t,"da\\s?capo",!0)){const e=new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.DaCapo);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,e,!0)||r.StringUtil.StringContainsSeparatedWord(t,"dal\\s?segno",!0)){let e;return e=r.StringUtil.StringContainsSeparatedWord(t,"al\\s?coda",!0)?new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.DalSegnoAlCoda):new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.DalSegno),this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,"to\\s?coda",!0)||r.StringUtil.StringContainsSeparatedWord(t,"a (la )?coda",!0)){const e=new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.ToCoda);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,"fine",!0)){const e=new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.Fine);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,"coda",!0)){const e=new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.Coda);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,"segno",!0)){const e=new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.Segno);return this.addInstruction(this.repetitionInstructions,e),!0}}else{if(e.element("segno")){const e=new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.Segno);return this.addInstruction(this.repetitionInstructions,e),!0}if(e.element("coda")){const e=new n.RepetitionInstruction(s,n.RepetitionInstructionEnum.Coda);return this.addInstruction(this.repetitionInstructions,e),!0}}return!1}removeRedundantInstructions(){let e=0,t=0,i=0,r=0;for(let s=0;s<this.repetitionInstructions.length;s++){const o=this.repetitionInstructions[s];switch(o.type){case n.RepetitionInstructionEnum.Coda:i>0&&this.findInstructionInPreviousMeasure(s,o.measureIndex,n.RepetitionInstructionEnum.ToCoda)&&(o.type=n.RepetitionInstructionEnum.None);break;case n.RepetitionInstructionEnum.Segno:if(e-r>0){let e=!1;for(let s=0,r=this.repetitionInstructions.length;s<r;++s){const r=this.repetitionInstructions[s];if(o.measureIndex-r.measureIndex==1)switch(r.type){case n.RepetitionInstructionEnum.BackJumpLine:r.type=i-t>0?n.RepetitionInstructionEnum.DalSegnoAlCoda:n.RepetitionInstructionEnum.DalSegno,o.type=n.RepetitionInstructionEnum.None,e=!0;break;case n.RepetitionInstructionEnum.DalSegno:case n.RepetitionInstructionEnum.DalSegnoAlFine:case n.RepetitionInstructionEnum.DalSegnoAlCoda:o.type=n.RepetitionInstructionEnum.None,e=!0}if(e)break}if(e)break;o.type=i-t>0?n.RepetitionInstructionEnum.DalSegnoAlCoda:n.RepetitionInstructionEnum.DalSegno,o.alignment=n.AlignmentType.End,o.measureIndex--}}if(this.backwardSearchForPreviousIdenticalInstruction(s,o)||o.type===n.RepetitionInstructionEnum.None)this.repetitionInstructions.splice(s,1),s--;else switch(o.type){case n.RepetitionInstructionEnum.Fine:break;case n.RepetitionInstructionEnum.ToCoda:i++;break;case n.RepetitionInstructionEnum.Coda:t++;break;case n.RepetitionInstructionEnum.Segno:e++;break;case n.RepetitionInstructionEnum.DalSegnoAlFine:case n.RepetitionInstructionEnum.DalSegnoAlCoda:r++}}this.repetitionInstructions.sort(s.RepetitionInstructionComparer.Compare)}findInstructionInPreviousMeasure(e,t,i){for(let n=e-1;n>=0;n--){const e=this.repetitionInstructions[n];if(t-e.measureIndex==1&&e.type===i)return!0}return!1}backwardSearchForPreviousIdenticalInstruction(e,t){for(let i=e-1;i>=0;i--)if(this.repetitionInstructions[i].equals(t))return!0;return!1}addInstruction(e,t){let i=!0;for(let n=0,s=e.length;n<s;++n){const s=e[n];if(t.equals(s)){i=!1;break}}i&&e.push(t)}}},7718:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Glissando=void 0;const n=i(2561),s=i(6438);t.Glissando=class{constructor(e){this.notes=[],this.XMLNumber=1,this.AddNote(e),this.StartNote=e,this.Direction=s.ColDirEnum.NotYetDefined}get Notes(){return this.notes}get Duration(){const e=new n.Fraction;for(const t of this.notes)e.Add(t.Length);return e}get Pitch(){return this.StartNote.Pitch}AddNote(e){this.notes.push(e),e.NoteGlissando=this,2===this.notes.length&&(this.notes[0].Pitch.getHalfTone()<this.notes[1].Pitch.getHalfTone()?this.Direction=s.ColDirEnum.Up:this.Direction=s.ColDirEnum.Down)}}},7741:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalObject=void 0;const n=i(7791);class s extends n.AClassHierarchyTrackable{get PositionAndShape(){return this.boundingBox}set PositionAndShape(e){this.boundingBox=e}}t.GraphicalObject=s},7751:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalLyricWord=void 0,t.GraphicalLyricWord=class{constructor(e){this.graphicalLyricsEntries=[],this.lyricWord=e,this.initialize()}get GetLyricWord(){return this.lyricWord}get GraphicalLyricsEntries(){return this.graphicalLyricsEntries}set GraphicalLyricsEntries(e){this.graphicalLyricsEntries=e}isFilled(){for(let e=0;e<this.graphicalLyricsEntries.length;e++)if(!this.graphicalLyricsEntries[e])return!1;return!0}initialize(){for(let e=0;e<this.lyricWord.Syllables.length;e++)this.graphicalLyricsEntries.push(void 0)}}},7785:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowTextMeasurer=void 0;const n=i(6014);t.VexFlowTextMeasurer=class{constructor(e){this.fontSize=20,this.fontSizeStandard=this.fontSize;const t=document.createElement("canvas");this.context=t.getContext("2d"),this.rules=e}computeTextWidthToHeightRatio(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.fontSize;return this.context.font=n.VexFlowConverter.font(r,i,t,this.rules,s),this.context.measureText(e).width/r}setFontSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.fontSizeStandard;return this.fontSize=e,e}}},7791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AClassHierarchyTrackable=void 0,t.AClassHierarchyTrackable=class{isInstanceOfClass(e){let t=this.constructor.prototype;for(;t;){if(e===t.constructor.name)return!0;t=t.__proto__}return!1}}},7809:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowInstantaneousDynamicExpression=void 0;const n=i(5023),s=i(2148),r=i(8254),o=i(7435),a=i(7533),l=i(2570);class c extends n.GraphicalInstantaneousDynamicExpression{constructor(e,t,i){super(e,t,i);const n=new o.Label(this.Expression);this.label=new r.GraphicalLabel(n,this.rules.ContinuousDynamicTextHeight,a.TextAlignmentEnum.CenterCenter,this.rules,this.PositionAndShape),this.label.Label.fontStyle=l.FontStyles.BoldItalic,this.label.setLabelPositionAndShapeBorders(),this.PositionAndShape.calculateBoundingBox()}get InstantaneousDynamic(){return this.mInstantaneousDynamicExpression}get Expression(){return s.DynamicEnum[this.mInstantaneousDynamicExpression.DynEnum]}}t.VexFlowInstantaneousDynamicExpression=c},7824:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalPedal=void 0;const n=i(7741),s=i(6438),r=i(512);class o extends n.GraphicalObject{constructor(e,t){super(),this.getPedal=e,this.setSymbol(),this.PositionAndShape=new s.BoundingBox(this,t)}setSymbol(){!this.getPedal.IsLine&&this.getPedal.IsSign?this.pedalSymbol=r.MusicSymbol.PEDAL_SYMBOL:this.getPedal.IsLine&&this.getPedal.IsSign?this.pedalSymbol=r.MusicSymbol.PEDAL_MIXED:this.pedalSymbol=r.MusicSymbol.PEDAL_BRACKET}}t.GraphicalPedal=o},7921:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSheetCalculator=void 0;const s=i(8724),r=i(2561),o=i(1850),a=i(5748),l=i(164),c=i(437),h=i(1336),u=i(7066),d=i(9409),f=i(2369),p=i(8254),m=i(7533),g=i(4543),b=i(3123),v=i(4249),y=i(6438),x=i(8033),S=i(8927),E=i(164),w=n(i(3065)),T=i(3263),_=i(6452),M=i(7435),P=i(3236),C=i(6362),A=i(3361),N=i(9161),L=i(2221),k=i(5875),I=i(1066),R=i(624),O=i(5824),D=i(5534),B=i(9647);class F{constructor(){this.staffEntriesWithGraphicalTies=[],this.staffEntriesWithOrnaments=[],this.staffEntriesWithChordSymbols=[],this.staffLinesWithLyricWords=[],this.graphicalLyricWords=[],this.abstractNotImplementedErrorMessage="abstract, not implemented",this.dynamicExpressionMap=new Map}static get TextMeasurer(){return F.textMeasurer}static set TextMeasurer(e){F.textMeasurer=e}get leadSheet(){return this.graphicalMusicSheet.LeadSheet}static setMeasuresMinStaffEntriesWidth(e,t){for(let i=0,n=e.length;i<n;++i){const n=e[i];n&&(n.minimumStaffEntriesWidth=t)}}initialize(e){this.graphicalMusicSheet=e,this.rules=e.ParentMusicSheet.Rules,this.rules.clearMusicSheetObjects(),this.prepareGraphicalMusicSheet()}prepareGraphicalMusicSheet(){const e=this.graphicalMusicSheet.ParentMusicSheet;this.staffEntriesWithGraphicalTies=[],this.staffEntriesWithOrnaments=[],this.staffEntriesWithChordSymbols=[],this.staffLinesWithLyricWords=[],this.graphicalMusicSheet.Initialize();const t=this.graphicalMusicSheet.MeasureList,i=this.createAccidentalCalculators(),n=this.graphicalMusicSheet.initializeActiveClefs(),s=[],r=e.getCompleteNumberOfStaves(),o=[];for(let l=0;l<r;l++)o.push(void 0);for(let l=0,c=e.SourceMeasures.length;l<c;++l){const r=e.SourceMeasures[l],a=this.createGraphicalMeasuresForSourceMeasure(r,i,s,o,n);if(t.push(a),r.multipleRestMeasures>0&&this.rules.RenderMultipleRestMeasures){r.isReducedToMultiRest=!0,r.multipleRestMeasureNumber=1;const i=r.multipleRestMeasures-1;l+=i;for(let n=1;n<=i;n++){const i=e.SourceMeasures.indexOf(r)+n;if(i>=e.SourceMeasures.length)break;const s=e.SourceMeasures[i];s.multipleRestMeasureNumber=n+1,s.isReducedToMultiRest=!0,t.push([void 0])}}}if(this.rules.AutoGenerateMultipleRestMeasuresFromRestMeasures&&this.rules.RenderMultipleRestMeasures){let r,a=0;for(let l=0,c=e.SourceMeasures.length;l<c;++l){const c=e.SourceMeasures[l];if(!c.isReducedToMultiRest&&c.canBeReducedToMultiRest())if(a>0){r.isReducedToMultiRest=!0,r.multipleRestMeasureNumber=1,a++,c.multipleRestMeasureNumber=a,c.isReducedToMultiRest=!0;for(let e=0;e<t[l].length;e++)t[l][e]=void 0}else r=c,a=1;else if(a>1){r.multipleRestMeasures=a;const e=this.createGraphicalMeasuresForSourceMeasure(r,i,s,o,n);t[r.measureListIndex]=e,a=0,r=void 0}else a=0,r=void 0}if(a>1){r.multipleRestMeasures=a,r.isReducedToMultiRest=!0;const e=this.createGraphicalMeasuresForSourceMeasure(r,i,s,o,n);t[r.measureListIndex]=e,a=0,r=void 0}}const a=n.map((e=>e.ClefType===l.ClefEnum.percussion));this.handleStaffEntries(a),this.calculateVerticalContainersList(),this.setIndicesToVerticalGraphicalContainers()}calculate(){this.musicSystems=[],this.clearSystemsAndMeasures(),this.clearRecreatedObjects(),this.createGraphicalTies(),this.calculateSheetLabelBoundingBoxes(),this.calculateXLayout(this.graphicalMusicSheet,this.maxInstrNameLabelLength()),this.graphicalMusicSheet.MusicPages.length=0,this.calculateMusicSystems(),s.GraphicalMusicSheet.transformRelativeToAbsolutePosition(this.graphicalMusicSheet)}calculateXLayout(e,t){if(this.graphicalMusicSheet.MeasureList.length>0){let e,t=0,n=1;for(let i=0;i<this.graphicalMusicSheet.MeasureList.length;i++){e=this.graphicalMusicSheet.MeasureList[i];let s=this.calculateMeasureXLayout(e);s=this.calculateMeasureWidthFromStaffEntries(e,s),s>t&&(t=s);const r=this.graphicalMusicSheet.ParentMusicSheet.MeasureWidthFactor;for(const t of e)if(null!==t&&void 0!==t&&t.parentSourceMeasure.WidthFactor){n=t.parentSourceMeasure.WidthFactor;break}s*=r*n,F.setMeasuresMinStaffEntriesWidth(e,s)}if(this.rules.FixedMeasureWidth){let n=t;this.rules.FixedMeasureWidthFixedValue&&(n=this.rules.FixedMeasureWidthFixedValue);for(let t=0;t<this.graphicalMusicSheet.MeasureList.length;t++){var i;e=this.graphicalMusicSheet.MeasureList[t],!this.rules.FixedMeasureWidthUseForPickupMeasures&&(null===(i=e[0])||void 0===i?void 0:i.parentSourceMeasure.ImplicitMeasure)||F.setMeasuresMinStaffEntriesWidth(e,n)}}}}calculateMeasureWidthFromStaffEntries(e,t){throw new Error(this.abstractNotImplementedErrorMessage)}formatMeasures(){throw new Error(this.abstractNotImplementedErrorMessage)}calculateMeasureXLayout(e){throw new Error(this.abstractNotImplementedErrorMessage)}initGraphicalMeasuresCreation(){throw new Error(this.abstractNotImplementedErrorMessage)}handleBeam(e,t,i){throw new Error(this.abstractNotImplementedErrorMessage)}handleTiedGraphicalNote(e,t,i,n,s,r,o,a){throw new Error(this.abstractNotImplementedErrorMessage)}handleVoiceEntryLyrics(e,t,i){throw new Error(this.abstractNotImplementedErrorMessage)}handleVoiceEntryOrnaments(e,t,i){throw new Error(this.abstractNotImplementedErrorMessage)}handleVoiceEntryArticulations(e,t,i){throw new Error(this.abstractNotImplementedErrorMessage)}handleVoiceEntryTechnicalInstructions(e,t,i){throw new Error(this.abstractNotImplementedErrorMessage)}handleTuplet(e,t,i){throw new Error(this.abstractNotImplementedErrorMessage)}layoutVoiceEntry(e,t,i,n){throw new Error(this.abstractNotImplementedErrorMessage)}layoutStaffEntry(e){throw new Error(this.abstractNotImplementedErrorMessage)}createGraphicalTie(e,t,i,n,s){throw new Error(this.abstractNotImplementedErrorMessage)}updateStaffLineBorders(e){throw new Error(this.abstractNotImplementedErrorMessage)}calculateMeasureNumberPlacement(e){const t=e.StaffLines[0];if(!t||!t.Measures[0])return void w.default.warn("calculateMeasureNumberPlacement: measure undefined for system.Id "+e.Id);let i=t.Measures[0].MeasureNumber,n=0;for(let s=0;s<t.Measures.length;s++){const r=t.Measures[s];let o=this.rules.RenderMeasureNumbersOnlyAtSystemStart&&s>1;if(1===s&&t.Measures[0].parentSourceMeasure.ImplicitMeasure&&(o=!1),o)return;0!==r.MeasureNumber&&1!==r.MeasureNumber||(i=r.MeasureNumber),n=r!==t.Measures[0]&&this.rules.MeasureNumberLabelXOffset?this.rules.MeasureNumberLabelXOffset:0;const a=this.rules.UseXMLMeasureNumbers&&1===r.MeasureNumber&&1!==r.parentSourceMeasure.getPrintedMeasureNumber();((r.MeasureNumber===i||r.MeasureNumber>=i+this.rules.MeasureNumberLabelOffset)&&!r.parentSourceMeasure.ImplicitMeasure||a)&&((1!==r.MeasureNumber||1===r.MeasureNumber&&r!==t.Measures[0]||a)&&this.calculateSingleMeasureNumberPlacement(r,t,e,n),i=r.MeasureNumber)}}calculateSingleMeasureNumberPlacement(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=e.parentSourceMeasure.getPrintedMeasureNumber().toString(),r=new M.Label(s),o=new p.GraphicalLabel(r,this.rules.MeasureNumberLabelHeight,m.TextAlignmentEnum.LeftBottom,this.rules),a=t.SkyBottomLineCalculator;o.setLabelPositionAndShapeBorders(),o.PositionAndShape.Parent=i.PositionAndShape;const l=t.PositionAndShape.RelativePosition.x+e.PositionAndShape.RelativePosition.x-o.PositionAndShape.BorderMarginLeft+n;let c,h=l,u=l-o.PositionAndShape.BorderLeft+o.PositionAndShape.BorderRight;h-=t.PositionAndShape.RelativePosition.x,u-=t.PositionAndShape.RelativePosition.x;const f=h+.5,g=u-.5,b=a.getSkyLineMinInRange(f,g);if(e===t.Measures[0]){let t=0;if(i.GroupBrackets.length>0)for(const e of i.GroupBrackets)t=Math.min(t,e.PositionAndShape.BorderTop);else e.ParentStaff.ParentInstrument.Parent&&(t=-1);c=Math.min(b,t)}else c=b;c=Math.min(0,c),o.PositionAndShape.RelativePosition=new d.PointF2D(l,c),i.MeasureNumberLabels.push(o)}calculateMeasureNumberSkyline(e){const t=e.StaffLines[0];for(const i of e.MeasureNumberLabels){let e=i.PositionAndShape.RelativePosition.x,n=e-i.PositionAndShape.BorderLeft+i.PositionAndShape.BorderRight;e-=t.PositionAndShape.RelativePosition.x,n-=t.PositionAndShape.RelativePosition.x,t.SkyBottomLineCalculator.updateSkyLineInRange(e,n,i.PositionAndShape.RelativePosition.y+i.PositionAndShape.BorderMarginTop)}}layoutGraphicalTie(e,t,i){throw new Error(this.abstractNotImplementedErrorMessage)}calculateSingleStaffLineLyricsPosition(e,t){let i=0,n=this.rules.StaffHeight;const s=new Map,r=[],o=e.SkyBottomLineCalculator;let a=e.Measures.length;for(let c=0;c<a;++c){const t=e.Measures[c],a=t.PositionAndShape.RelativePosition,l=t.staffEntries.length;for(let e=0;e<l;++e){const l=t.staffEntries[e],c=l.LyricsEntries.length;for(let e=0;e<c;++e){const t=l.LyricsEntries[e].LyricsEntry;s[t.VerseNumber]=t.IsChorus}if(c>0){r.push(l),i=Math.max(i,l.LyricsEntries.length);const e=l.PositionAndShape.RelativePosition.x+a.x;let t=Number.MAX_VALUE,s=Number.MIN_VALUE;for(let i=0;i<l.LyricsEntries.length;i++){const n=l.LyricsEntries[i].GraphicalLabel;t=Math.min(t,e+n.PositionAndShape.BorderMarginLeft),s=Math.max(s,e+n.PositionAndShape.BorderMarginRight)}const c=o.getBottomLineMaxInRange(t,s);n=Math.max(n,c+this.rules.LyricsYMarginToBottomLine)}}}let l=0;a=r.length;for(const c of r){const e=[];let i=!0;for(let t=0;t<c.LyricsEntries.length;t++)i&&(i=c.LyricsEntries[t].LyricsEntry.IsChorus);for(const n of t)s[n]===i&&e.push(n);for(let t=0;t<c.LyricsEntries.length;t++){const i=c.LyricsEntries[t],s=i.GraphicalLabel,r=i.LyricsEntry.VerseNumber,o=e.indexOf(r),a=n+this.rules.LyricsHeight+this.rules.VerticalBetweenLyricsDistance+this.rules.LyricsYOffsetToStaffHeight+(this.rules.VerticalBetweenLyricsDistance+this.rules.LyricsHeight)*o,h=s.PositionAndShape.RelativePosition.x;s.PositionAndShape.RelativePosition=new d.PointF2D(h,a),s.Label.fontStyle=i.LyricsEntry.FontStyle,l=Math.max(l,a)}}if(r.length>0){const t=e.PositionAndShape.Size.width;let i=r[0].PositionAndShape.RelativePosition.x+r[0].PositionAndShape.BorderMarginLeft+r[0].parentMeasure.PositionAndShape.RelativePosition.x;i=i>t?t:i,o.updateBottomLineInRange(i,t,l)}return r}calculateLyricsExtendsAndDashes(e){for(let t=0,i=e.length;t<i;++t){const i=e[t];for(let e=0;e<i.LyricsEntries.length;e++){const t=i.LyricsEntries[e];t.ParentLyricWord&&t.ParentLyricWord.GraphicalLyricsEntries[t.ParentLyricWord.GraphicalLyricsEntries.length-1]!==t&&this.calculateSingleLyricWord(t),t.LyricsEntry.extend&&this.calculateLyricExtend(t)}}}calculateSingleOctaveShift(e,t,i,n){throw new Error(this.abstractNotImplementedErrorMessage)}calculateWordRepetitionInstruction(e,t){throw new Error(this.abstractNotImplementedErrorMessage)}calculateMoodAndUnknownExpression(e,t,i){var n;const s=e.AbsoluteTimestamp,r=this.graphicalMusicSheet.MeasureList[t];let o=new d.PointF2D;const a=null===(n=e.UnknownList[0])||void 0===n?void 0:n.defaultYXml;if(e.MoodList.length>0||e.UnknownList.length>0){var l;let t="";for(let i=0,s=e.EntriesList.length;i<s;++i){const n=e.EntriesList[i];""!==n.prefix&&(t+=""===t?n.prefix:" "+n.prefix),t+=""===t?n.label:" "+n.label}const n=r[i].ParentStaffLine;if(!n)return void w.default.debug("MusicSheetCalculator.calculateMoodAndUnknownExpression: staffLine undefined. Returning.");o=this.getRelativePositionInStaffLineFromTimestamp(s,i,n,null===n||void 0===n?void 0:n.isPartOfMultiStaffInstrument()),Math.abs(o.x-0)<1e-4&&(o.x=r[i].beginInstructionsWidth+this.rules.RhythmRightMargin);const c=this.rules.UnknownTextHeight,h=e.getPlacementOfFirstEntry(),u=this.calculateLabel(n,o,t,e.getFontstyleOfFirstEntry(),h,c),d=e.getColorXMLOfFirstEntry();if(this.rules.ExpressionsUseXMLColor&&d&&(u.ColorXML=d),this.rules.PlaceWordsInsideStafflineFromXml&&a<0&&a>-50){let e=a/10;e+=this.rules.PlaceWordsInsideStafflineYOffset,u.PositionAndShape.RelativePosition.y=e}const f=new O.GraphicalUnknownExpression(n,u,h,null===(l=r[i])||void 0===l?void 0:l.parentSourceMeasure,e);n.AbstractExpressions.push(f)}}clearRecreatedObjects(){for(let e=0,t=this.staffEntriesWithGraphicalTies.length;e<t;++e)this.staffEntriesWithGraphicalTies[e].GraphicalTies.length=0;this.staffEntriesWithGraphicalTies.length=0}handleStaffEntryLink(e,t){w.default.debug("handleStaffEntryLink not implemented")}calculateMusicSystems(){if(!this.graphicalMusicSheet.MeasureList)return;const e=this.graphicalMusicSheet.MeasureList;if(!e)return;this.rules.MinMeasureToDrawIndex>e.length-1&&(w.default.debug("minimum measure to draw index out of range. resetting min measure index to limit."),this.rules.MinMeasureToDrawIndex=e.length-1);const t=[];for(let s=this.rules.MinMeasureToDrawIndex,r=e.length;s<r&&s<=this.rules.MaxMeasureToDrawIndex;++s){const i=[];for(let t=0,n=e[s].length;t<n;++t){const n=e[s][t];if(null!==n&&void 0!==n&&n.isVisible()&&(i.push(n),this.rules.ColoringEnabled))for(const e of n.staffEntries)for(const t of e.graphicalVoiceEntries)t.applyCustomNoteheads(),t.color()}t.push(i)}let i=0;for(let s=0,r=t.length;s<r;++s){const e=t[s];i=Math.max(e.length,i);break}if(0===i)return;const n=new u.MusicSystemBuilder;if(n.initialize(this.graphicalMusicSheet,t,i),this.musicSystems=n.buildMusicSystems(),this.formatMeasures(),this.leadSheet||(this.optimizeRestPlacement(),this.calculateStaffEntryArticulationMarks(),this.rules.RenderSlurs&&this.calculateTieCurves()),this.calculateSkyBottomLines(),this.calculateTupletNumbers(),this.rules.RenderMeasureNumbers)for(let s=0,r=this.musicSystems.length;s<r;++s){const e=this.musicSystems[s];this.calculateMeasureNumberPlacement(e)}if(this.rules.RenderFingerings&&this.calculateFingerings(),!this.leadSheet&&this.rules.RenderSlurs&&this.calculateSlurs(),this.calculateGlissandi(),this.rules.RenderMeasureNumbers)for(let s=0,r=this.musicSystems.length;s<r;++s){const e=this.musicSystems[s];this.calculateMeasureNumberSkyline(e)}this.leadSheet||this.calculateOrnaments(),this.calculateChordSymbols(),this.leadSheet||(this.calculateDynamicExpressions(),this.calculateMoodAndUnknownExpressions(),this.calculateExpressionAlignements(),this.calculateOctaveShifts(),this.rules.RenderPedals&&this.calculatePedals(),this.calculateWordRepetitionInstructions()),this.calculateRepetitionEndings(),this.leadSheet||this.calculateTempoExpressions(),this.calculateRehearsalMarks(),this.calculateLyricsPosition();for(let s=0,r=this.musicSystems.length;s<r;++s){const e=this.musicSystems[s];for(let t=0,i=e.StaffLines.length;t<i;++t){const i=e.StaffLines[t];this.updateStaffLineBorders(i)}}n.calculateSystemYLayout(),this.calculateComments(),this.calculateMarkedAreas();for(let s=0,r=this.graphicalMusicSheet.MusicPages.length;s<r;++s){const e=this.graphicalMusicSheet.MusicPages[s];for(let i=0,n=e.MusicSystems.length;i<n;++i){const t=0===s&&0===i,n=e.MusicSystems[i];n.setMusicSystemLabelsYPosition(),this.leadSheet?n===n.Parent.MusicSystems[0]&&n.createSystemLeftLine(this.rules.SystemThinLineWidth,this.rules.SystemLabelsRightMargin,t):(n.setYPositionsToVerticalLineObjectsAndCreateLines(this.rules),n.createSystemLeftLine(this.rules.SystemThinLineWidth,this.rules.SystemLabelsRightMargin,t),n.createInstrumentBrackets(this.graphicalMusicSheet.ParentMusicSheet.Instruments,this.rules.StaffHeight),n.createGroupBrackets(this.graphicalMusicSheet.ParentMusicSheet.InstrumentalGroups,this.rules.StaffHeight,0),n.alignBeginInstructions()),n.calculateBorders(this.rules)}const t=e.MusicSystems[0].PositionAndShape.BorderTop;for(let i=0,n=e.MusicSystems.length;i<n;++i){const n=e.MusicSystems[i];n.PositionAndShape.RelativePosition=new d.PointF2D(n.PositionAndShape.RelativePosition.x,n.PositionAndShape.RelativePosition.y-t)}e.PositionAndShape.calculateTopBottomBorders(),e===this.graphicalMusicSheet.MusicPages[0]&&this.calculatePageLabels(e),e.PositionAndShape.calculateTopBottomBorders()}}calculateMarkedAreas(){}calculateComments(){}calculateChordSymbols(){for(const e of this.musicSystems)for(const t of e.StaffLines){const i=t.SkyBottomLineCalculator;let n=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;if(this.rules.ChordSymbolYAlignment&&"staffline"===this.rules.ChordSymbolYAlignmentScope){const e=[];for(const i of t.Measures)e.push(...i.staffEntries);const{minOffset:r,maxOffset:o}=this.calculateAlignedChordSymbolsOffset(e,i);n=r,s=o}for(let r=0;r<t.Measures.length;r++){const o=t.Measures[r];if(this.rules.ChordSymbolYAlignment&&"measure"===this.rules.ChordSymbolYAlignmentScope){const{minOffset:e,maxOffset:t}=this.calculateAlignedChordSymbolsOffset(o.staffEntries,i);n=e,s=t}let l;for(const t of o.staffEntries)if(t.graphicalChordContainers&&0!==t.graphicalChordContainers.length)for(let c=0;c<t.graphicalChordContainers.length;c++){const h=t.graphicalChordContainers[c];if(0===t.graphicalVoiceEntries.length&&t.relInMeasureTimestamp.RealValue>0){let e=0;0===o.staffEntries[0].relInMeasureTimestamp.RealValue&&(e=o.staffEntries[0].PositionAndShape.RelativePosition.x,1===o.MeasureNumber&&(e+=this.rules.ChordSymbolWholeMeasureRestXOffsetMeasure1));let i=e+(o.PositionAndShape.Size.width-o.endInstructionsWidth-e)*(t.relInMeasureTimestamp.RealValue/o.parentSourceMeasure.Duration.RealValue)+h.PositionAndShape.BorderMarginLeft;l&&(i=Math.max(i,l.PositionAndShape.RelativePosition.x+l.GraphicalLabel.PositionAndShape.Size.width+this.rules.ChordSymbolXSpacing)),h.PositionAndShape.RelativePosition.x=i,h.PositionAndShape.Parent=o.staffEntries[0].PositionAndShape.Parent}const u=h.PositionAndShape,d=u.Parent;if(d.DataObject instanceof a.GraphicalMeasure&&0===t.relInMeasureTimestamp.RealValue&&(u.RelativePosition.x=Math.max(o.beginInstructionsWidth,u.RelativePosition.x),1===o.MeasureNumber&&u.RelativePosition.x>3&&(u.RelativePosition.x+=this.rules.ChordSymbolWholeMeasureRestXOffsetMeasure1)),0===t.PositionAndShape.RelativePosition.x){const i=e.GraphicalMeasures[r];for(const e of i){let i=!1;for(const n of e.staffEntries)if(n.relInMeasureTimestamp===t.relInMeasureTimestamp&&0!==n.PositionAndShape.RelativePosition.x){u.RelativePosition.x=n.PositionAndShape.RelativePosition.x,i=!0;break}if(i)break}}const f=u.BorderMarginLeft+d.AbsolutePosition.x+u.RelativePosition.x,p=u.BorderMarginRight+d.AbsolutePosition.x+u.RelativePosition.x,m=h.GetChordSymbolContainer.Placement;m===C.PlacementEnum.Below?(!this.rules.ChordSymbolYAlignment||s<0)&&(s=i.getBottomLineMaxInRange(f,p)):m===C.PlacementEnum.Above&&(!this.rules.ChordSymbolYAlignment||n>0)&&(n=i.getSkyLineMinInRange(f,p));let g=0;0===c?(g+=this.rules.ChordSymbolYOffset,g+=.1):g+=this.rules.ChordSymbolYPadding,m!==C.PlacementEnum.Below&&(g*=-1);const b=h.GraphicalLabel;m===C.PlacementEnum.Below?(b.PositionAndShape.RelativePosition.y=s+g,b.setLabelPositionAndShapeBorders(),b.PositionAndShape.calculateBoundingBox(),i.updateBottomLineInRange(f,p,s+b.PositionAndShape.BorderMarginBottom+this.rules.ChordSymbolBottomMargin)):(b.PositionAndShape.RelativePosition.y=n+g,b.setLabelPositionAndShapeBorders(),b.PositionAndShape.calculateBoundingBox(),i.updateSkyLineInRange(f,p,n+b.PositionAndShape.BorderMarginTop)),l=h}}}}calculateAlignedChordSymbolsOffset(e,t){let i=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER;for(const s of e)for(const e of s.graphicalChordContainers){const s=e.PositionAndShape,r=s.Parent;let o=s.BorderMarginLeft+r.AbsolutePosition.x,l=s.BorderMarginRight+r.AbsolutePosition.x;r.DataObject instanceof a.GraphicalMeasure&&(o+=r.DataObject.beginInstructionsWidth,l+=r.DataObject.beginInstructionsWidth);const c=e.GetChordSymbolContainer.Placement;c===C.PlacementEnum.Above?i=Math.min(i,t.getSkyLineMinInRange(o,l)):c===C.PlacementEnum.Below&&(n=Math.max(n,t.getBottomLineMaxInRange(o,l)))}return{minOffset:i,maxOffset:n}}layoutMeasureWithWholeRest(e,t,i){}layoutBeams(e){}layoutArticulationMarks(e,t,i){}layoutOrnament(e,t,i){}calculateRestNotePlacementWithinGraphicalBeam(e,t,i,n,s){}calculateTupletNumbers(){if(!this.rules.TupletNumberLimitConsecutiveRepetitions)return;let e,t,i,n=-1,s=0;const r={};for(const o of this.graphicalMusicSheet.ParentMusicSheet.Instruments)for(const a of o.Voices){s=0,r[a.VoiceId]={};for(const o of a.VoiceEntries)if(o.Notes.length>0){const l=o.Notes[0];if(!l.NoteTuplet||l.NoteTuplet.shouldBeBracketed(this.rules.TupletsBracketedUseXMLValue,this.rules.TupletsBracketed,this.rules.TripletsBracketed)){n=-1,s=0,t=void 0,e=void 0;continue}if(l.NoteTuplet===i)continue;let c=l.TypeLength;if(c||(w.default.warn("note missing TypeLength"),c=l.NoteTuplet.Fractions[0]),l.NoteTuplet!==t&&r[a.VoiceId][l.NoteTuplet.TupletLabelNumber]&&r[a.VoiceId][l.NoteTuplet.TupletLabelNumber][c.RealValue]){l.NoteTuplet.RenderTupletNumber=!1,i=l.NoteTuplet;continue}l.NoteTuplet.TupletLabelNumber===n&&c.Equals(e)&&!l.NoteTuplet.Bracket||(n=l.NoteTuplet.TupletLabelNumber,e=c,s=0),t=l.NoteTuplet,s++,s<=this.rules.TupletNumberMaxConsecutiveRepetitions&&(l.NoteTuplet.RenderTupletNumber=!0),s>this.rules.TupletNumberMaxConsecutiveRepetitions&&(l.NoteTuplet.RenderTupletNumber=!1,this.rules.TupletNumberAlwaysDisableAfterFirstMax&&(r[a.VoiceId][n]||(r[a.VoiceId][n]={}),r[a.VoiceId][n][c.RealValue]=!0)),i=t}}}calculateSlurs(){}calculateGlissandi(){}calculateDynamicExpressionsForMultiExpression(e,t,i){}calculateGraphicalVerbalContinuousDynamic(e,t){const i=e.Label,n=t.x+i.PositionAndShape.BorderMarginLeft,s=t.x+i.PositionAndShape.BorderMarginRight,r=e.ContinuousDynamic.Placement,o=e.ParentStaffLine.SkyBottomLineCalculator;let a;r===C.PlacementEnum.Below?(a=o.getBottomLineMaxInRange(n,s),i.PositionAndShape.RelativePosition=new d.PointF2D(t.x,a-i.PositionAndShape.BorderMarginTop)):(a=o.getSkyLineMinInRange(n,s),i.PositionAndShape.RelativePosition=new d.PointF2D(t.x,a-i.PositionAndShape.BorderMarginBottom))}calculateGraphicalContinuousDynamic(e,t){const i=e.IsSoftAccent,n=e.ParentStaffLine.ParentStaff.idInMusicSheet,s=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(e.ContinuousDynamic.EndMultiExpression.SourceMeasureParent,n);if(!s)return void w.default.warn("MusicSheetCalculator.calculateGraphicalContinuousDynamic: No endMeasure found");e.EndMeasure=s;const o=e.ParentStaffLine,a=s.ParentStaffLine,l=a&&o===a;let c=!1;a?c=null===a||void 0===a?void 0:a.isPartOfMultiStaffInstrument():o&&(c=null===o||void 0===o?void 0:o.isPartOfMultiStaffInstrument());const h=r.Fraction.createFromFraction(e.ContinuousDynamic.EndMultiExpression.AbsoluteTimestamp),u=this.graphicalMusicSheet.GetVerticalContainerFromTimestamp(h),d=u.getFirstNonNullStaffEntry().parentMeasure,f=d.PositionAndShape.AbsolutePosition.x+d.PositionAndShape.BorderRight;let p=new r.Fraction(0,0,0);for(const r of u.StaffEntries){var m;const e=null===r||void 0===r||null===(m=r.sourceStaffEntry)||void 0===m?void 0:m.calculateMaxNoteLength(!1);(null===e||void 0===e?void 0:e.gt(p))&&(p=e)}const g=!i&&e.ContinuousDynamic.DynamicType===k.ContDynamicEnum.diminuendo,b=this.getRelativePositionInStaffLineFromTimestamp(h,n,a,c,0,g),v=r.Fraction.plus(h,p).clone();e.ContinuousDynamic.EndMultiExpression.EndOffsetFraction&&this.rules.UseEndOffsetForExpressions&&v.Add(e.ContinuousDynamic.EndMultiExpression.EndOffsetFraction);const y=this.getRelativePositionInStaffLineFromTimestamp(v,n,a,c,0,e.ContinuousDynamic.DynamicType===k.ContDynamicEnum.diminuendo),x=this.rules.SoftAccentWedgePadding,S=u.getFirstNonNullStaffEntry().PositionAndShape.Size.width,E=this.rules.SoftAccentSizeFactor;i?(t.x-=S/2*E+x,b.x=t.x+S/2*E):y.x>b.x&&y.x<f?b.x+=(y.x-b.x)/this.rules.WedgeEndDistanceBetweenTimestampsFactor:b.x=f-this.rules.WedgeHorizontalMargin;const T=this.dynamicExpressionMap.get(e.ContinuousDynamic.StartMultiExpression.AbsoluteTimestamp.RealValue);T&&T.DataObject.ParentStaffLine===o&&(t.x=T.RelativePosition.x+this.rules.WedgeHorizontalMargin,t.x+=T.BorderMarginRight);const _=o.ParentMusicSystem,M=_.StaffLines.indexOf(o),P=o.SkyBottomLineCalculator,A=e.ContinuousDynamic.Placement;let N;l&&b.x-t.x<this.rules.WedgeMinLength&&!i&&(b.x=t.x+this.rules.WedgeMinLength);const L=t.x;let R=a.Measures[0].beginInstructionsWidth-this.rules.WedgeHorizontalMargin-2,O=0,D=0;const B=[];if(l)O=b.x;else{O=o.PositionAndShape.Size.width,D=b.x;const t=[o,a],i=e.StartMeasure;let r=i,l=0,c=i.parentSourceMeasure.measureListIndex;for(;r!==s&&l<1e3;){const i=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[c],s=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(i,n);if(s){r=s;const i=r.ParentStaffLine;if(!t.includes(i)){t.push(i);const n=new I.GraphicalContinuousDynamicExpression(e.ContinuousDynamic,i,i.Measures[0].parentSourceMeasure);n.IsSplittedPart=!0,B.push(n)}}c++,l++}N=new I.GraphicalContinuousDynamicExpression(e.ContinuousDynamic,a,s.parentSourceMeasure),N.IsSplittedPart=!0,e.IsSplittedPart=!0}i&&(R=b.x+x,D=R+S/2*E);let F=0,V=0;if(A===C.PlacementEnum.Below){let t=0;if(M<_.StaffLines.length-1&&(t=M+1),t>M){const e=_.StaffLines[t].PositionAndShape.RelativePosition.y-o.PositionAndShape.RelativePosition.y-this.rules.StaffHeight;F=this.rules.StaffHeight+e/2}else F=this.rules.WedgePlacementBelowY;F-=this.rules.WedgeOpeningLength/2,l||(V=F);let i=P.getBottomLineMaxInRange(L,O);i>F&&(F=i);const n=!1;if(M<_.StaffLines.length-1){const i=o.findClosestStaffEntry(O),s=o.findClosestStaffEntry(L);if(s&&i&&(s.parentVerticalContainer,n)){const i=_.StaffLines[t],n=i.SkyBottomLineCalculator.getSkyLineMinInRange(L,O),s=i.PositionAndShape.RelativePosition.y-o.PositionAndShape.RelativePosition.y+n;F=s-this.rules.WedgeOpeningLength>this.rules.StaffHeight?s-this.rules.WedgeVerticalMargin:this.rules.StaffHeight+this.rules.WedgeOpeningLength,e.NotToBeRemoved=!0}}l||(i=a.SkyBottomLineCalculator.getBottomLineMaxInRange(R,D),i>V&&(V=i),V+=this.rules.WedgeOpeningLength/2,V+=this.rules.WedgeVerticalMargin),n||(F+=this.rules.WedgeOpeningLength/2,F+=this.rules.WedgeVerticalMargin)}else if(A===C.PlacementEnum.Above){if(1===o.ParentStaff.ParentInstrument.Staves.length)F=this.rules.WedgePlacementAboveY;else{let e=0;M>0&&(e=M-1);const t=_.StaffLines[e];F=-(o.PositionAndShape.RelativePosition.y-t.PositionAndShape.RelativePosition.y-this.rules.StaffHeight)/2}F+=this.rules.WedgeOpeningLength/2,l||(V=F);let e=P.getSkyLineMinInRange(L,O);e<F&&(F=e);const t=!1;if(o.ParentStaff.ParentInstrument.Staves.length>1&&M>0){const e=o.findClosestStaffEntry(L),i=o.findClosestStaffEntry(O);if(e&&i){e.parentVerticalContainer;const i=M-1;if(t){const e=_.StaffLines[i];if(e){const t=e.SkyBottomLineCalculator.getBottomLineMaxInRange(L,O);F=(o.PositionAndShape.RelativePosition.y-e.PositionAndShape.RelativePosition.y-t-this.rules.StaffHeight)/2+this.rules.StaffHeight}}}}l||(e=a.SkyBottomLineCalculator.getSkyLineMinInRange(R,D),e<V&&(V=e),V-=this.rules.WedgeOpeningLength/2),t||(F-=this.rules.WedgeOpeningLength/2,F-=this.rules.WedgeVerticalMargin),l||(V-=this.rules.WedgeVerticalMargin)}if(e.Lines.clear(),i)e.createFirstHalfCrescendoLines(L,O,F),e.createSecondHalfDiminuendoLines(R,D,F),e.calcPsi();else if(l&&!i)e.createLines(L,O,F),e.calcPsi();else{e.createFirstHalfLines(L,O,F),e.calcPsi();for(let t=0;t<B.length;t++){const i=B[t],n=i.ParentStaffLine;let s=V;if(A===C.PlacementEnum.Below){const e=a.SkyBottomLineCalculator.getBottomLineMaxInRange(R,O);e>s&&(s=e),s+=this.rules.WedgeOpeningLength/2,s+=this.rules.WedgeVerticalMargin}else if(A===C.PlacementEnum.Above){const e=n.SkyBottomLineCalculator.getSkyLineMinInRange(R,D);e<V&&(s=e),s-=this.rules.WedgeOpeningLength/2}e.ContinuousDynamic.DynamicType===k.ContDynamicEnum.crescendo?i.createSecondHalfCrescendoLines(0,n.PositionAndShape.Size.width,s):i.createFirstHalfDiminuendoLines(0,n.PositionAndShape.Size.width,s),i.calcPsi()}N.createSecondHalfLines(R,D,V),N.calcPsi()}this.dynamicExpressionMap.set(h.RealValue,e.PositionAndShape)}calculateGraphicalInstantaneousDynamicExpression(e,t,i){const n=e.ParentStaffLine;if(!n)return;const s=t.x+e.PositionAndShape.BorderMarginLeft,r=t.x+e.PositionAndShape.BorderMarginRight,o=n.SkyBottomLineCalculator;let a=0;if(e.Placement===C.PlacementEnum.Above){const i=o.getSkyLineMinInRange(s,r);if(n.isPartOfMultiStaffInstrument()&&n.ParentStaff!==n.ParentStaff.ParentInstrument.Staves[0]){const t=n.ParentMusicSystem.StaffLines[n.ParentMusicSystem.StaffLines.indexOf(n)-1];if(t){const s=(null===n||void 0===n?void 0:n.PositionAndShape.RelativePosition.y)-t.PositionAndShape.RelativePosition.y-this.rules.StaffHeight;a=i>-s/2?-s/2:i-e.PositionAndShape.BorderMarginBottom}}else a=i-e.PositionAndShape.BorderMarginBottom;e.PositionAndShape.RelativePosition=new d.PointF2D(t.x,a)}else if(e.Placement===C.PlacementEnum.Below){const i=o.getBottomLineMaxInRange(s,r),l=n.ParentStaff.ParentInstrument.Staves[n.ParentStaff.ParentInstrument.Staves.length-1];if(n.isPartOfMultiStaffInstrument()&&n.ParentStaff!==l){const t=n.ParentMusicSystem.StaffLines[n.ParentMusicSystem.StaffLines.indexOf(n)+1];if(t){const s=t.PositionAndShape.RelativePosition.y-n.PositionAndShape.RelativePosition.y-this.rules.StaffHeight;a=i+e.PositionAndShape.BorderMarginBottom<this.rules.StaffHeight+s/2?this.rules.StaffHeight+s/2:i-e.PositionAndShape.BorderMarginTop}}else a=i-e.PositionAndShape.BorderMarginTop;e.PositionAndShape.RelativePosition=new d.PointF2D(t.x,a)}e.updateSkyBottomLine()}calcGraphicalRepetitionEndingsRecursively(e){}layoutSingleRepetitionEnding(e,t,i,n,s,r){}calculateLabel(e,t,i,n,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:m.TextAlignmentEnum.CenterBottom,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;const l=new M.Label(i,o);l.fontStyle=n,l.fontHeight=r;const c=new p.GraphicalLabel(l,r,l.textAlignment,this.rules,e.PositionAndShape),h=1.1;s===C.PlacementEnum.Below&&(c.Label.textAlignment=m.TextAlignmentEnum.LeftTop),c.setLabelPositionAndShapeBorders(),c.PositionAndShape.BorderMarginBottom*=h,c.PositionAndShape.BorderMarginTop*=h,c.PositionAndShape.BorderMarginLeft*=h,c.PositionAndShape.BorderMarginRight*=h;let u,f=t.x+c.PositionAndShape.BorderMarginLeft,g=t.x+c.PositionAndShape.BorderMarginRight;g>e.PositionAndShape.Size.width&&(g=e.PositionAndShape.Size.width-this.rules.MeasureRightMargin,f=g-c.PositionAndShape.MarginSize.width,t.x=f-c.PositionAndShape.BorderMarginLeft);const b=e.SkyBottomLineCalculator;return u=s===C.PlacementEnum.Below?b.getBottomLineMaxInRange(f,g)+a:b.getSkyLineMinInRange(f,g)-a,c.PositionAndShape.RelativePosition=new d.PointF2D(t.x,u),s===C.PlacementEnum.Below?b.updateBottomLineInRange(f,g,c.PositionAndShape.BorderMarginBottom+u):b.updateSkyLineInRange(f,g,c.PositionAndShape.BorderMarginTop+u),c}calculateTempoExpressionsForMultiTempoExpression(e,t,i){const n=r.Fraction.plus(e.AbsoluteTimestamp,t.Timestamp),s=this.graphicalMusicSheet.MeasureList[i];let o=new d.PointF2D;if(t.ContinuousTempo||t.InstantaneousTempo){if(this.rules.MinMeasureToDrawIndex>0)return;if(!s[0])return;let e=s[0].ParentStaffLine,i=s[0].PositionAndShape.RelativePosition.x,r=0;for(let t=0;t<s.length;t++)if(s[t].ParentStaffLine&&0!==s[t].ParentStaffLine.Measures.length&&s[t].ParentStaffLine.Measures.length>0){e=s[t].ParentStaffLine,i=s[t].PositionAndShape.RelativePosition.x,r=t;break}if(o=this.getRelativePositionInStaffLineFromTimestamp(n,r,e,e.isPartOfMultiStaffInstrument(),i),t.EntriesList.length>0&&t.EntriesList[0].Expression instanceof N.InstantaneousTempoExpression&&(t.EntriesList[0].Expression.Placement=C.PlacementEnum.Above,e.Measures[0].staffEntries.length>0&&0===Math.abs(o.x-e.Measures[0].staffEntries[0].PositionAndShape.RelativePosition.x)&&e.ParentMusicSystem===this.musicSystems[0])){const t=e.Measures[0].FirstInstructionStaffEntry;if(t){const e=t.GraphicalInstructions.last();o.x=e.PositionAndShape.RelativePosition.x}this.rules.CompactMode&&(o.x=e.PositionAndShape.RelativePosition.x+e.Measures[0].PositionAndShape.RelativePosition.x)}for(const n of t.EntriesList){let i=m.TextAlignmentEnum.CenterBottom;this.rules.CompactMode&&(i=m.TextAlignmentEnum.LeftBottom);const s=this.calculateLabel(e,o,n.label,t.getFontstyleOfFirstEntry(),n.Expression.Placement,this.rules.UnknownTextHeight,i,this.rules.TempoYSpacing);if(n.Expression.ColorXML&&this.rules.ExpressionsUseXMLColor&&(s.ColorXML=n.Expression.ColorXML),n.Expression instanceof N.InstantaneousTempoExpression){for(const t of e.AbstractExpressions)t instanceof A.GraphicalInstantaneousTempoExpression&&(t.SourceExpression.Label,n.Expression.Label);if(new A.GraphicalInstantaneousTempoExpression(n.Expression,s).ParentStaffLine||w.default.warn("Adding staffline didn't work"),this.rules.MetronomeMarksDrawn&&n.Expression.TempoType===N.TempoType.metronomeMark){this.createMetronomeMark(n.Expression);continue}}else if(n.Expression instanceof L.ContinuousTempoExpression){for(const t of e.AbstractExpressions)t instanceof A.GraphicalInstantaneousTempoExpression&&(t.SourceExpression.Label,n.Expression.Label);e.AbstractExpressions.push(new A.GraphicalInstantaneousTempoExpression(n.Expression,s))}}}}createMetronomeMark(e){throw new Error(this.abstractNotImplementedErrorMessage)}graphicalMeasureCreatedCalculations(e){}clearSystemsAndMeasures(){for(let e=0,t=this.graphicalMusicSheet.MusicPages.length;e<t;++e){const t=this.graphicalMusicSheet.MusicPages[e];for(let e=0,i=t.MusicSystems.length;e<i;++e){const i=t.MusicSystems[e];for(let e=0,t=i.StaffLines.length;e<t;++e){const t=i.StaffLines[e];t.ParentStaff.Visible||t.Measures.clear();for(let e=0,i=t.Measures.length;e<i;++e){const i=t.Measures[e];if(i.FirstInstructionStaffEntry){const e=i.PositionAndShape.ChildElements.indexOf(i.FirstInstructionStaffEntry.PositionAndShape);e>-1&&i.PositionAndShape.ChildElements.splice(e,1),i.FirstInstructionStaffEntry=void 0,i.beginInstructionsWidth=0}if(i.LastInstructionStaffEntry){const e=i.PositionAndShape.ChildElements.indexOf(i.LastInstructionStaffEntry.PositionAndShape);e>-1&&i.PositionAndShape.ChildElements.splice(e,1),i.LastInstructionStaffEntry=void 0,i.endInstructionsWidth=0}}t.Measures=[],t.PositionAndShape.ChildElements=[]}i.StaffLines.length=0,i.PositionAndShape.ChildElements=[]}t.MusicSystems=[],t.PositionAndShape.ChildElements=[]}this.graphicalMusicSheet.MusicPages=[]}handleVoiceEntry(e,t,i,n,s,r,o,a,l){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:void 0,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:void 0;e.StemDirectionXml!==h.StemDirectionType.Undefined&&this.rules.SetWantedStemDirectionByXml&&void 0!==e.StemDirectionXml?e.WantedStemDirection=e.StemDirectionXml:this.calculateStemDirectionFromVoices(e);const d=t.findOrCreateGraphicalVoiceEntry(e);d.octaveShiftValue=a;const f=t.tabStaffEntry;let p;f&&(p=f.findOrCreateGraphicalVoiceEntry(e));for(let h=0,m=e.Notes.length;h<m;++h){const n=e.Notes[h];if(!n)continue;if(void 0!==u&&void 0!==u.Link&&void 0!==c&&c.indexOf(n)>-1)continue;let l;if(e.IsGrace?l=F.symbolFactory.createGraceNote(n,d,s,this.rules,a):(l=F.symbolFactory.createNote(n,d,s,a,this.rules,void 0),F.stafflineNoteCalculator.trackNote(l)),n.Pitch&&this.checkNoteForAccidental(l,i,s,a),this.resetYPositionForLeadSheet(l.PositionAndShape),t.addGraphicalNoteToListAtCorrectYPosition(d,l),l.PositionAndShape.calculateBoundingBox(),this.leadSheet||(void 0!==n.NoteBeam&&n.PrintObject&&(n instanceof B.TabNote&&!this.rules.TabBeamsRendered||this.handleBeam(l,n.NoteBeam,o)),void 0!==n.NoteTuplet&&n.PrintObject&&this.handleTuplet(l,n.NoteTuplet,r)),p){const e=F.symbolFactory.createNote(n,p,s,a,this.rules,void 0);f.addGraphicalNoteToListAtCorrectYPosition(p,e),e.PositionAndShape.calculateBoundingBox(),this.leadSheet||n.NoteTuplet&&this.handleTuplet(e,n.NoteTuplet,r)}}return e.Articulations.length>0&&this.handleVoiceEntryArticulations(e.Articulations,e,t),e.TechnicalInstructions.length>0&&this.handleVoiceEntryTechnicalInstructions(e.TechnicalInstructions,e,t),e.LyricsEntries.size()>0&&this.handleVoiceEntryLyrics(e,t,n),e.OrnamentContainer&&this.handleVoiceEntryOrnaments(e.OrnamentContainer,e,t),a}resetYPositionForLeadSheet(e){this.leadSheet&&(e.RelativePosition=new d.PointF2D(e.RelativePosition.x,0))}layoutVoiceEntries(e,t){if(e.PositionAndShape.RelativePosition=new d.PointF2D(0,0),!this.leadSheet)for(const i of e.graphicalVoiceEntries){const t=i.notes;if(0===t.length)continue;const n=t[0].sourceNote.ParentVoiceEntry,s=void 0!==t[0].sourceNote.Pitch;this.layoutVoiceEntry(n,t,e,s)}}maxInstrNameLabelLength(){let e=0;for(const i of this.graphicalMusicSheet.ParentMusicSheet.Instruments){var t;if(null!==(t=i.NameLabel)&&void 0!==t&&t.print&&i.Voices.length>0&&i.Voices[0].Visible){let t=i.NameLabel;this.rules.RenderPartNames||(t=new M.Label("",t.textAlignment,t.font));const n=new p.GraphicalLabel(t,this.rules.InstrumentLabelTextHeight,m.TextAlignmentEnum.LeftCenter,this.rules);n.setLabelPositionAndShapeBorders(),e=Math.max(e,n.PositionAndShape.MarginSize.width)}}return this.rules.RenderPartNames?e:0}calculateSheetLabelBoundingBoxes(){const e=this.graphicalMusicSheet.ParentMusicSheet,t=this.rules.DefaultColorTitle;if(void 0!==e.Title&&this.rules.RenderTitle){const i=new p.GraphicalLabel(e.Title,this.rules.SheetTitleHeight,m.TextAlignmentEnum.CenterBottom,this.rules);i.Label.IsCreditLabel=!0,i.Label.colorDefault=t,this.graphicalMusicSheet.Title=i,i.setLabelPositionAndShapeBorders()}else this.rules.RenderTitle||(this.graphicalMusicSheet.Title=void 0);if(void 0!==e.Subtitle&&this.rules.RenderSubtitle){const i=new p.GraphicalLabel(e.Subtitle,this.rules.SheetSubtitleHeight,m.TextAlignmentEnum.CenterCenter,this.rules);i.Label.IsCreditLabel=!0,i.Label.colorDefault=t,this.graphicalMusicSheet.Subtitle=i,i.setLabelPositionAndShapeBorders()}else this.rules.RenderSubtitle||(this.graphicalMusicSheet.Subtitle=void 0);if(void 0!==e.Composer&&this.rules.RenderComposer){const i=new p.GraphicalLabel(e.Composer,this.rules.SheetComposerHeight,m.TextAlignmentEnum.RightCenter,this.rules);i.Label.IsCreditLabel=!0,i.Label.colorDefault=t,this.graphicalMusicSheet.Composer=i,i.setLabelPositionAndShapeBorders()}else this.rules.RenderComposer||(this.graphicalMusicSheet.Composer=void 0);if(void 0!==e.Lyricist&&this.rules.RenderLyricist){const i=new p.GraphicalLabel(e.Lyricist,this.rules.SheetAuthorHeight,m.TextAlignmentEnum.LeftCenter,this.rules);i.Label.IsCreditLabel=!0,i.Label.colorDefault=t,this.graphicalMusicSheet.Lyricist=i,i.setLabelPositionAndShapeBorders()}else this.rules.RenderLyricist||(this.graphicalMusicSheet.Lyricist=void 0);if(void 0!==e.Copyright&&this.rules.RenderCopyright){const i=new p.GraphicalLabel(e.Copyright,this.rules.SheetCopyrightHeight,m.TextAlignmentEnum.CenterBottom,this.rules);i.Label.IsCreditLabel=!0,i.Label.colorDefault=t,this.graphicalMusicSheet.Copyright=i,i.setLabelPositionAndShapeBorders()}else this.rules.RenderCopyright||(this.graphicalMusicSheet.Copyright=void 0)}checkMeasuresForWholeRestNotes(){for(let e=0,t=this.musicSystems.length;e<t;++e){const t=this.musicSystems[e];for(let e=0,i=t.StaffLines.length;e<i;++e){const i=t.StaffLines[e];for(let e=0,t=i.Measures.length;e<t;++e){const t=i.Measures[e];if(1===t.staffEntries.length){const e=t.staffEntries[0];if(e.graphicalVoiceEntries.length>0&&1===e.graphicalVoiceEntries[0].notes.length){const i=e.graphicalVoiceEntries[0].notes[0];!i.sourceNote.Pitch&&new r.Fraction(1,2).lt(i.sourceNote.Length)&&this.layoutMeasureWithWholeRest(i,e,t)}}}}}}optimizeRestNotePlacement(e,t){if(0===e.graphicalVoiceEntries.length)return;const i=e.graphicalVoiceEntries[0].notes;if(0===i.length)return;const n=i[0],s=n.sourceNote.isRest();if(2===e.graphicalVoiceEntries.length){let t=!1;const i=e.graphicalVoiceEntries[1].notes;i.length>0&&(t=i[0].sourceNote.isRest()),s&&t?this.calculateTwoRestNotesPlacementWithCollisionDetection(e):(s||t)&&this.calculateRestNotePlacementWithCollisionDetectionFromGraphicalNote(e)}else if(s&&e!==t.staffEntries[0]&&e!==t.staffEntries[t.staffEntries.length-1]){const i=t.staffEntries.indexOf(e),s=t.staffEntries[i-1],r=t.staffEntries[i+1];if(1===s.graphicalVoiceEntries.length){const t=s.graphicalVoiceEntries[0].notes[0];if(void 0!==t.sourceNote.NoteBeam&&1===r.graphicalVoiceEntries.length){const i=r.graphicalVoiceEntries[0].notes[0];void 0!==i.sourceNote.NoteBeam&&t.sourceNote.NoteBeam===i.sourceNote.NoteBeam&&(this.calculateRestNotePlacementWithinGraphicalBeam(e,n,t,r,i),e.PositionAndShape.calculateBoundingBox())}}}}getRelativePositionInStaffLineFromTimestamp(e,t,i,n){let s,o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=new d.PointF2D;const h=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length,u=this.graphicalMusicSheet.GetInterpolatedIndexInVerticalContainers(e),f=Math.min(Math.floor(u),h-1),p=Math.min(Math.ceil(u),h-1);if(f<0||t<0)return c;if(s=this.getFirstLeftNotNullStaffEntryFromContainer(f,t,n),o=this.getFirstRightNotNullStaffEntryFromContainer(p,t,n),s&&o){let t=s.parentMeasure.PositionAndShape.RelativePosition.x;a>0&&(t=a);let n=s.PositionAndShape.RelativePosition.x+t,h=o.PositionAndShape.RelativePosition.x+o.parentMeasure.PositionAndShape.RelativePosition.x;const u=e.RealValue>o.getAbsoluteTimestamp().RealValue;a>0?h=o.PositionAndShape.RelativePosition.x+t:l&&(s.getAbsoluteTimestamp().RealValue===e.RealValue||u)&&(n=s.PositionAndShape.RelativePosition.x+s.PositionAndShape.BorderLeft+t,h=n);let f=0;if(s!==o){const t=s.getAbsoluteTimestamp(),i=o.getAbsoluteTimestamp();f=r.Fraction.minus(e,t).RealValue/r.Fraction.minus(i,t).RealValue}s.parentMeasure.ParentStaffLine!==o.parentMeasure.ParentStaffLine&&(s.parentMeasure.ParentStaffLine===i?h=i.PositionAndShape.Size.width:n=i.PositionAndShape.RelativePosition.x),c=new d.PointF2D(n+(h-n)*f,0)}return c}getRelativeXPositionFromTimestamp(e){const t=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length,i=this.graphicalMusicSheet.GetInterpolatedIndexInVerticalContainers(e),n=Math.max(0,Math.min(Math.round(i),t-1)),s=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[n].getFirstNonNullStaffEntry();return s.PositionAndShape.RelativePosition.x+s.parentMeasure.PositionAndShape.RelativePosition.x}calculatePageLabels(e){this.rules.RenderSingleHorizontalStaffline&&(e.PositionAndShape.calculateBoundingBox([a.GraphicalMeasure.name]),this.graphicalMusicSheet.ParentMusicSheet.pageWidth=e.PositionAndShape.Size.width);let t=10,i=-1;if(e.MusicSystems.length>0){const n=e.MusicSystems[0];t=n.PositionAndShape.RelativePosition.y+n.PositionAndShape.BorderTop;const s=e.MusicSystems[e.MusicSystems.length-1];i=s.PositionAndShape.RelativePosition.y+s.PositionAndShape.BorderBottom}const n=this.graphicalMusicSheet.Title;if(n&&this.rules.RenderTitle){n.PositionAndShape.Parent=e.PositionAndShape;const t=new d.PointF2D;t.x=this.graphicalMusicSheet.ParentMusicSheet.pageWidth/2,this.rules.RenderSingleHorizontalStaffline&&(t.x=Math.max(t.x,n.PositionAndShape.Size.width)),t.y=this.rules.TitleTopDistance+this.rules.SheetTitleHeight,n.PositionAndShape.RelativePosition=t,e.Labels.push(n)}if(this.graphicalMusicSheet.Subtitle&&this.rules.RenderTitle&&this.rules.RenderSubtitle){var s;const t=this.graphicalMusicSheet.Subtitle;t.PositionAndShape.Parent=e.PositionAndShape;const i=new d.PointF2D;i.x=this.graphicalMusicSheet.ParentMusicSheet.pageWidth/2,this.rules.RenderSingleHorizontalStaffline&&(i.x=n.PositionAndShape.RelativePosition.x),i.y=this.rules.TitleTopDistance+this.rules.SheetTitleHeight+this.rules.SheetMinimumDistanceBetweenTitleAndSubtitle;const r=null===(s=t.TextLines)||void 0===s?void 0:s.length;r>1&&(i.y+=t.PositionAndShape.BorderBottom*(r-1)/r),t.PositionAndShape.RelativePosition=i,e.Labels.push(t)}const r=this.graphicalMusicSheet.Composer;let o;if(r&&this.rules.RenderComposer){var l;r.PositionAndShape.Parent=e.PositionAndShape,r.setLabelPositionAndShapeBorders();const i=new d.PointF2D;i.x=this.graphicalMusicSheet.ParentMusicSheet.pageWidth-this.rules.PageRightMargin,i.y=t,i.y-=this.rules.SystemComposerDistance;const n=null===(l=r.TextLines)||void 0===l?void 0:l.length;n>1&&(i.y-=r.PositionAndShape.BorderBottom*(n-1)/n),o=i.y,r.PositionAndShape.RelativePosition=i,e.Labels.push(r)}const c=this.graphicalMusicSheet.Lyricist;if(c&&this.rules.RenderLyricist){c.PositionAndShape.Parent=e.PositionAndShape,c.setLabelPositionAndShapeBorders();const i=new d.PointF2D;i.x=this.rules.PageLeftMargin,i.y=t,i.y-=this.rules.SystemLyricistDistance,i.y+=c.PositionAndShape.BorderBottom,i.y=Math.min(i.y,null!==o&&void 0!==o?o:Number.MAX_SAFE_INTEGER),c.PositionAndShape.RelativePosition=i,e.Labels.push(c)}const h=this.graphicalMusicSheet.Copyright;if(h&&this.rules.RenderCopyright){h.PositionAndShape.Parent=e.PositionAndShape,h.setLabelPositionAndShapeBorders();const t=new d.PointF2D;t.x=e.PositionAndShape.Size.width/2,t.y=i+this.rules.SheetCopyrightMargin,t.y-=h.PositionAndShape.BorderTop,h.PositionAndShape.RelativePosition=t,e.Labels.push(h)}this.rules.RenderSingleHorizontalStaffline&&(e.PositionAndShape.calculateBoundingBox([a.GraphicalMeasure.name]),this.graphicalMusicSheet.ParentMusicSheet.pageWidth=e.PositionAndShape.Size.width)}createGraphicalTies(){for(let e=0;e<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;e++){const t=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e];for(let i=0;i<t.CompleteNumberOfStaves;i++)for(let n=0;n<t.VerticalSourceStaffEntryContainers.length;n++){const s=t.VerticalSourceStaffEntryContainers[n].StaffEntries[i];if(s){const t=this.graphicalMusicSheet.findGraphicalStaffEntryFromMeasureList(i,e,s);t&&(t.GraphicalTies.clear(),t.ties.clear());for(let n=0,r=s.VoiceEntries.length;n<r;++n){const r=s.VoiceEntries[n];for(let n=0,s=r.Notes.length;n<s;++n){const s=r.Notes[n];if(s.NoteTie){const n=s.NoteTie;if(s===s.NoteTie.Notes.last())continue;if(t)for(const e of t.GraphicalTies)e.Tie;this.handleTie(n,t,i,e)}}}this.setTieDirections(t)}}}}handleTie(e,t,i,n){if(!t)return;t.ties.push(e);let s,r,o,a=t;for(let l=1;l<e.Notes.length;l++)if(s=a.findTieGraphicalNoteFromNote(e.Notes[l-1]),r=this.graphicalMusicSheet.GetGraphicalFromSourceStaffEntry(e.Notes[l].ParentStaffEntry),r){if(o=r.findTieGraphicalNoteFromNote(e.Notes[l]),void 0!==s&&void 0!==o&&r){if(!s.sourceNote.PrintObject||!o.sourceNote.PrintObject)continue;const t=this.createGraphicalTie(e,a,r,s,o);a.GraphicalTies.push(t),this.staffEntriesWithGraphicalTies.indexOf(a)>=0&&this.staffEntriesWithGraphicalTies.push(a)}a=r}}setTieDirections(e){if(!e)return;const t=e.ties;if(1===t.length){const e=t[0];if(e.TieDirection===C.PlacementEnum.NotYetDefined){const t=e.Notes[0].ParentVoiceEntry.ParentVoice.VoiceId;2!==t&&6!==t||(e.TieDirection=C.PlacementEnum.Below)}}if(t.length>1){let e;for(const i of t){const t=i.Notes[0];(!e||t.Pitch.getHalfTone()>e.Pitch.getHalfTone())&&(e=t)}for(const i of t)i.TieDirection===C.PlacementEnum.NotYetDefined&&(i.Notes[0]===e?i.TieDirection=C.PlacementEnum.Above:i.TieDirection=C.PlacementEnum.Below)}}createAccidentalCalculators(){const e=[],t=this.graphicalMusicSheet.ParentMusicSheet.getFirstSourceMeasure();if(t)for(let i=0;i<t.CompleteNumberOfStaves;i++){const n=new S.AccidentalCalculator;if(e.push(n),n.Transpose=this.graphicalMusicSheet.ParentMusicSheet.Transpose,t.FirstInstructionsStaffEntries[i])for(let e=0,s=t.FirstInstructionsStaffEntries[i].Instructions.length;e<s;++e){const s=t.FirstInstructionsStaffEntries[i].Instructions[e];if(s instanceof g.KeyInstruction){const e=s;n.ActiveKeyInstruction=e}}}return e}calculateVerticalContainersList(){const e=this.graphicalMusicSheet.MeasureList[0].length;for(let t=0;t<this.graphicalMusicSheet.MeasureList.length;t++)for(let i=0;i<e;i++){const e=this.graphicalMusicSheet.MeasureList[t][i];if(e)for(let t=0,n=e.staffEntries.length;t<n;++t){const n=e.staffEntries[t],s=this.graphicalMusicSheet.getOrCreateVerticalContainer(n.getAbsoluteTimestamp());s&&(s.StaffEntries[i]=n,n.parentVerticalContainer=s)}}}setIndicesToVerticalGraphicalContainers(){for(let e=0;e<this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length;e++)this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[e].Index=e}createGraphicalMeasuresForSourceMeasure(e,t,i,n,s){this.initGraphicalMeasuresCreation();const r=[],o=[],a=[],l=[];let c=!0;for(let h=0;h<e.CompleteNumberOfStaves;h++){const u=this.createGraphicalMeasure(e,a,o,t[h],s,n,i,h,l);c=c&&u.hasOnlyRests,r.push(u)}return e.allRests=c,e.VerticalMeasureList=r,r}createGraphicalMeasure(e,t,i,n,s,a,u,d,p){const m=this.graphicalMusicSheet.ParentMusicSheet.getStaffFromIndex(d);let b;if(s[d].ClefType===l.ClefEnum.TAB||m.isTab)m.isTab=!0,b=F.symbolFactory.createTabStaffMeasure(e,m);else if(e.multipleRestMeasures&&this.rules.RenderMultipleRestMeasures)b=F.symbolFactory.createMultiRestMeasure(e,m);else{if(e.multipleRestMeasureNumber>1)return;b=F.symbolFactory.createGraphicalMeasure(e,m)}if(b.hasError=e.getErrorInMeasure(d),e.FirstInstructionsStaffEntries[d])for(let r=0,o=e.FirstInstructionsStaffEntries[d].Instructions.length;r<o;++r){const t=e.FirstInstructionsStaffEntries[d].Instructions[r];if(t instanceof g.KeyInstruction){const e=g.KeyInstruction.copy(t),i=b.getTransposedHalftones();0!==i&&b.ParentStaff.ParentInstrument.MidiInstrumentId!==E.MidiInstrument.Percussion&&F.transposeCalculator&&F.transposeCalculator.transposeKey(e,i),n.ActiveKeyInstruction=e}}const v=[];for(let o=0,l=e.StaffLinkedExpressions[d].length;o<l;++o){const t=e.StaffLinkedExpressions[d][o];let i;if(t.OctaveShiftStart?i=t.OctaveShiftStart:t.OctaveShiftEnd&&(i=t.OctaveShiftEnd),i){var y;v.push(t);const n=i;let s=null===n||void 0===n||null===(y=n.ParentEndMultiExpression)||void 0===y?void 0:y.AbsoluteTimestamp;null!==n&&void 0!==n&&n.ParentEndMultiExpression||(s=r.Fraction.plus(e.AbsoluteTimestamp,e.Duration)),a[d]=new x.OctaveShiftParams(n,n.ParentStartMultiExpression.AbsoluteTimestamp,s)}}for(let r=0;r<e.VerticalSourceStaffEntryContainers.length;r++){const o=e.VerticalSourceStaffEntryContainers[r].StaffEntries[d];if(o){var S;for(let t=0,i=o.Instructions.length;t<i;++t){var w;const e=o.Instructions[t];e instanceof l.ClefInstruction&&(null===(w=s[d])||void 0===w?void 0:w.ClefType)!==l.ClefEnum.TAB&&(s[d]=e)}const e=F.symbolFactory.createStaffEntry(o,b);r<b.staffEntries.length?b.addGraphicalStaffEntryAtTimestamp(e):b.addGraphicalStaffEntry(e);const h=[];o.Link&&(o.findLinkedNotes(h),this.handleStaffEntryLink(e,p));let f=c.OctaveEnum.NONE;if(a[d]&&a[d].getAbsoluteStartTimestamp.lte(o.AbsoluteTimestamp)&&o.AbsoluteTimestamp.lte(a[d].getAbsoluteEndTimestamp)&&(f=a[d].getOpenOctaveShift.Type),f===c.OctaveEnum.NONE)for(const t of v){var T,_;let e;if(t.OctaveShiftStart?e=t.OctaveShiftStart:t.OctaveShiftEnd&&(e=t.OctaveShiftEnd),null!==(T=e)&&void 0!==T&&null!==(T=T.ParentStartMultiExpression)&&void 0!==T&&T.AbsoluteTimestamp.lte(o.AbsoluteTimestamp)&&(null===(_=e.ParentEndMultiExpression)||void 0===_||!_.AbsoluteTimestamp.lt(o.AbsoluteTimestamp))){f=e.Type;break}}for(let r=0,a=o.VoiceEntries.length;r<a;++r){const a=o.VoiceEntries[r];f=this.handleVoiceEntry(a,e,n,u,s[d],t,i,f,d,h,o)}if(o.Instructions.length>0){const t=o.Instructions[0];F.symbolFactory.createInStaffClef(e,t)}this.rules.RenderChordSymbols&&(null===(S=o.ChordContainers)||void 0===S?void 0:S.length)>0&&(o.ParentStaff.ParentInstrument.HasChordSymbols=!0,F.symbolFactory.createChordSymbols(o,e,n.ActiveKeyInstruction,this.graphicalMusicSheet.ParentMusicSheet.Transpose))}}if(n.doCalculationsAtEndOfMeasure(),e.LastInstructionsStaffEntries[d]){const t=e.LastInstructionsStaffEntries[d];for(let e=0,i=t.Instructions.length;e<i;++e){var M;const i=t.Instructions[e];i instanceof l.ClefInstruction&&(null===(M=s[d])||void 0===M?void 0:M.ClefType)!==l.ClefEnum.TAB&&(s[d]=i)}}for(let r=0,o=e.StaffLinkedExpressions[d].length;r<o;++r){const t=e.StaffLinkedExpressions[d][r];void 0!==t.OctaveShiftEnd&&void 0!==a[d]&&t.OctaveShiftEnd===a[d].getOpenOctaveShift&&(a[d]=void 0)}for(const r of b.staffEntries)for(const e of r.graphicalVoiceEntries)this.setBeamNotesWantedStemDirections(e.parentVoiceEntry);if(this.rules.FillEmptyMeasuresWithWholeRest>=1&&0===b.staffEntries.length){const t=new f.SourceStaffEntry(new P.VerticalSourceStaffEntryContainer(b.parentSourceMeasure,b.parentSourceMeasure.AbsoluteTimestamp,b.parentSourceMeasure.CompleteNumberOfStaves),m);if(0===m.Voices.length){const e=new D.Voice(b.ParentStaff.ParentInstrument,-1);m.Voices.push(e)}const i=new h.VoiceEntry(new r.Fraction(0,1),m.Voices[0],t);let n=e.Duration;0===n.RealValue&&(n=e.ActiveTimeSignature.clone());const s=new o.Note(i,t,n,void 0,e,!0);s.IsWholeMeasureRest=!0,s.PrintObject=this.rules.FillEmptyMeasuresWithWholeRest===R.FillEmptyMeasuresWithWholeRests.YesVisible,i.Notes.push(s);const a=F.symbolFactory.createStaffEntry(t,b);b.addGraphicalStaffEntry(a),a.relInMeasureTimestamp=i.Timestamp;const u=F.symbolFactory.createVoiceEntry(i,a);a.graphicalVoiceEntries.push(u);const d=F.symbolFactory.createNote(s,u,new l.ClefInstruction,c.OctaveEnum.NONE,this.rules);F.stafflineNoteCalculator.trackNote(d),u.notes.push(d)}b.hasOnlyRests=!0;for(const r of b.staffEntries)if(b.hasOnlyRests=r.hasOnlyRests(),!b.hasOnlyRests)break;return b}checkNoteForAccidental(e,t,i,n){let s=e.sourceNote.Pitch;const r=e.parentVoiceEntry.parentStaffEntry.parentMeasure.getTransposedHalftones();0!==r&&e.sourceNote.ParentStaffEntry.ParentStaff.ParentInstrument.MidiInstrumentId!==E.MidiInstrument.Percussion&&(s=e.Transpose(t.ActiveKeyInstruction,i,r,n),e.sourceNote.TransposedPitch=s),e.sourceNote.halfTone=s.getHalfTone(),t.checkAccidental(e,s)}handleStaffEntries(e){for(let t=0,i=this.graphicalMusicSheet.MeasureList.length;t<i;++t){const i=this.graphicalMusicSheet.MeasureList[t];for(let t=0,n=i.length;t<n;++t){const n=i[t];if(n){this.rules.PercussionOneLineCutoff>0&&!this.rules.PercussionUseCajon2NoteSystem&&e[t]&&(-1===this.rules.PercussionOneLineCutoff||F.stafflineNoteCalculator.getStafflineUniquePositionCount(t)<this.rules.PercussionOneLineCutoff)&&(n.ParentStaff.StafflineCount=1);for(const e of n.staffEntries)void 0!==e.parentMeasure&&e.graphicalVoiceEntries.length>0&&e.graphicalVoiceEntries[0].notes.length>0&&(this.layoutVoiceEntries(e,t),this.layoutStaffEntry(e));this.graphicalMeasureCreatedCalculations(n)}}}}calculateSkyBottomLines(){}calculateExpressionAlignements(){}calculateStaffEntryArticulationMarks(){for(let e=0,t=this.musicSystems.length;e<t;++e){const t=this.musicSystems[e];for(let e=0,i=t.StaffLines.length;e<i;++e){const i=t.StaffLines[e];for(let e=0,t=i.Measures.length;e<t;++e){const t=i.Measures[e];for(let e=0,i=t.staffEntries.length;e<i;++e){const i=t.staffEntries[e];for(let e=0,t=i.sourceStaffEntry.VoiceEntries.length;e<t;++e){const t=i.sourceStaffEntry.VoiceEntries[e];t.Articulations.length>0&&this.layoutArticulationMarks(t.Articulations,t,i)}}}}}}calculateOrnaments(){for(let e=0,t=this.musicSystems.length;e<t;++e){const t=this.musicSystems[e];for(let e=0,i=t.StaffLines.length;e<i;++e){const i=t.StaffLines[e];for(let e=0,t=i.Measures.length;e<t;++e){const t=i.Measures[e];for(let e=0,i=t.staffEntries.length;e<i;++e){const i=t.staffEntries[e];for(let e=0,t=i.sourceStaffEntry.VoiceEntries.length;e<t;++e){const t=i.sourceStaffEntry.VoiceEntries[e];if(t.OrnamentContainer){if(t.hasTie()&&!i.relInMeasureTimestamp.Equals(t.Timestamp))continue;this.layoutOrnament(t.OrnamentContainer,t,i),-1===this.staffEntriesWithOrnaments.indexOf(i)&&this.staffEntriesWithOrnaments.push(i)}}}}}}}getFingeringPlacement(e){let t=this.rules.FingeringPosition;return t!==C.PlacementEnum.NotYetDefined&&t!==C.PlacementEnum.AboveOrBelow||(t=e.isUpperStaffOfInstrument()?C.PlacementEnum.Above:C.PlacementEnum.Below),t}calculateFingerings(){if(this.rules.FingeringPosition!==C.PlacementEnum.Left&&this.rules.FingeringPosition!==C.PlacementEnum.Right)for(const i of this.musicSystems)for(const n of i.StaffLines)for(const i of n.Measures){if(i.isTabMeasure&&!this.rules.TabFingeringsRendered)continue;const s=this.getFingeringPlacement(i);for(const r of i.staffEntries){r.FingeringEntries=[];const o=n.SkyBottomLineCalculator,a=r.PositionAndShape.RelativePosition.x+i.PositionAndShape.RelativePosition.x,l=[];for(const e of r.graphicalVoiceEntries)if(!e.parentVoiceEntry.IsGrace)for(const t of e.parentVoiceEntry.TechnicalInstructions)t.type===b.TechnicalInstructionType.Fingering&&l.push(t);if(l.length>0){let i;s===C.PlacementEnum.Below&&l.reverse();for(const n of r.graphicalVoiceEntries)for(const s of n.notes){var e,t;(!i||(null===(e=s.sourceNote.Pitch)||void 0===e?void 0:e.getHalfTone())>(null===(t=i.Pitch)||void 0===t?void 0:t.getHalfTone()))&&(i=s.sourceNote)}l[0].sourceNote===i&&s===C.PlacementEnum.Above&&l.reverse()}for(let e=0;e<l.length;e++){const t=l[e],i=s===C.PlacementEnum.Above?m.TextAlignmentEnum.CenterBottom:m.TextAlignmentEnum.CenterTop,c=new M.Label(t.value,i),h=new p.GraphicalLabel(c,this.rules.FingeringTextSize,c.textAlignment,this.rules,n.PositionAndShape);t.fontFamily&&(c.fontFamily=t.fontFamily);const u=a+h.PositionAndShape.BorderMarginLeft,d=a+h.PositionAndShape.BorderMarginRight;let f;f=s===C.PlacementEnum.Above?o.getSkyLineMinInRange(u,d):o.getBottomLineMaxInRange(u,d);let g=0;0===e?(g+=this.rules.FingeringOffsetY,s===C.PlacementEnum.Above&&(g+=.1)):g+=this.rules.FingeringPaddingY,s===C.PlacementEnum.Above&&(g*=-1),h.PositionAndShape.RelativePosition.y+=f+g,h.PositionAndShape.RelativePosition.x=a,h.setLabelPositionAndShapeBorders(),h.PositionAndShape.calculateBoundingBox(),r.FingeringEntries.push(h);const b=h.PositionAndShape.RelativePosition.x+h.PositionAndShape.BorderLeft,v=b-h.PositionAndShape.BorderLeft+h.PositionAndShape.BorderRight;s===C.PlacementEnum.Above?o.updateSkyLineInRange(b,v,h.PositionAndShape.RelativePosition.y+h.PositionAndShape.BorderTop):s===C.PlacementEnum.Below&&o.updateBottomLineInRange(b,v,h.PositionAndShape.RelativePosition.y+h.PositionAndShape.BorderBottom)}}}}optimizeRestPlacement(){for(let e=0,t=this.musicSystems.length;e<t;++e){const t=this.musicSystems[e];for(let e=0,i=t.StaffLines.length;e<i;++e){const i=t.StaffLines[e];for(let e=0,t=i.Measures.length;e<t;++e){const t=i.Measures[e];for(let e=0,i=t.staffEntries.length;e<i;++e){const i=t.staffEntries[e];this.optimizeRestNotePlacement(i,t)}}}}}calculateTwoRestNotesPlacementWithCollisionDetection(e){const t=e.graphicalVoiceEntries[0].notes[0],i=e.graphicalVoiceEntries[1].notes[0];i.PositionAndShape.RelativePosition=new d.PointF2D(0,2.5),e.PositionAndShape.calculateAbsolutePositionsRecursiveWithoutTopelement(),t.PositionAndShape.computeNonOverlappingPositionWithMargin(e.PositionAndShape,y.ColDirEnum.Up,new d.PointF2D(0,i.PositionAndShape.RelativePosition.y));const n=t.PositionAndShape.RelativePosition;n.y-=1,t.PositionAndShape.RelativePosition=n,e.PositionAndShape.calculateBoundingBox()}calculateRestNotePlacementWithCollisionDetectionFromGraphicalNote(e){let t,i;e.graphicalVoiceEntries[0].notes[0].sourceNote.isRest()?(t=e.graphicalVoiceEntries[0].notes[0],i=e.graphicalVoiceEntries[1].notes):(i=e.graphicalVoiceEntries[0].notes,t=e.graphicalVoiceEntries[1].notes[0]);let n=!1;e.PositionAndShape.calculateAbsolutePositionsRecursiveWithoutTopelement();for(let s=0,r=i.length;s<r;++s){const e=i[s];if(t.PositionAndShape.marginCollisionDetection(e.PositionAndShape)){n=!0;break}}if(n)if(t.sourceNote.ParentVoiceEntry.ParentVoice instanceof v.LinkedVoice){const e=i[0].PositionAndShape.BorderMarginBottom+i[0].PositionAndShape.RelativePosition.y;t.PositionAndShape.RelativePosition=new d.PointF2D(0,e-t.PositionAndShape.BorderMarginTop+.5)}else{const e=i[i.length-1],n=e.PositionAndShape.BorderMarginTop+e.PositionAndShape.RelativePosition.y;if(i[0].sourceNote.ParentVoiceEntry.ParentVoice instanceof v.LinkedVoice)t.PositionAndShape.RelativePosition=new d.PointF2D(0,n-t.PositionAndShape.BorderMarginBottom-.5);else{const e=i[0].PositionAndShape.BorderMarginBottom+i[0].PositionAndShape.RelativePosition.y;t.PositionAndShape.RelativePosition=e<2?new d.PointF2D(0,e-t.PositionAndShape.BorderMarginTop+.5):new d.PointF2D(0,n-t.PositionAndShape.BorderMarginBottom-0)}}e.PositionAndShape.calculateBoundingBox()}calculateTieCurves(){for(const e of this.musicSystems)for(const t of e.StaffLines)for(const e of t.Measures)for(const t of e.staffEntries)for(const i of t.GraphicalTies)if(void 0!==i.StartNote&&i.StartNote.parentVoiceEntry.parentStaffEntry===t){const t=i.StartNote.parentVoiceEntry.parentStaffEntry.parentMeasure.ParentStaffLine!==i.EndNote.parentVoiceEntry.parentStaffEntry.parentMeasure.ParentStaffLine;this.layoutGraphicalTie(i,t,e.ParentStaff.isTab)}}calculateLyricsPosition(){const e=new T.Dictionary;for(let t=0,i=this.graphicalMusicSheet.ParentMusicSheet.Instruments.length;t<i;++t){const e=this.graphicalMusicSheet.ParentMusicSheet.Instruments[t];e.HasLyrics&&e.LyricVersesNumbers.length>0&&e.LyricVersesNumbers.sort()}for(let t=0,i=this.musicSystems.length;t<i;++t){const i=this.musicSystems[t];for(let t=0,n=i.StaffLines.length;t<n;++t){const n=i.StaffLines[t],s=this.calculateSingleStaffLineLyricsPosition(n,n.ParentStaff.ParentInstrument.LyricVersesNumbers);e.setValue(n,s),this.calculateLyricsExtendsAndDashes(e.getValue(n))}}for(let t=0,i=this.musicSystems.length;t<i;++t){const i=this.musicSystems[t];for(let t=0,n=i.StaffLines.length;t<n;++t){const n=i.StaffLines[t];this.calculateLyricsExtendsAndDashes(e.getValue(n))}}}calculateSingleLyricWord(e){const t=e.ParentLyricWord,i=t.GraphicalLyricsEntries.indexOf(e);let n;if(i>=0&&(n=t.GraphicalLyricsEntries[i+1]),!n)return;const s=e.StaffEntryParent.parentMeasure.ParentStaffLine,r=n.StaffEntryParent.parentMeasure.ParentStaffLine,o=e.StaffEntryParent,a=n.StaffEntryParent;if(e.StaffEntryParent.parentMeasure.ParentStaffLine===n.StaffEntryParent.parentMeasure.ParentStaffLine){const t=o.parentMeasure.PositionAndShape.RelativePosition.x+o.PositionAndShape.RelativePosition.x+e.GraphicalLabel.PositionAndShape.RelativePosition.x+e.GraphicalLabel.PositionAndShape.BorderMarginRight-e.GraphicalLabel.CenteringXShift,i=a.parentMeasure.PositionAndShape.RelativePosition.x+a.PositionAndShape.RelativePosition.x+e.GraphicalLabel.PositionAndShape.RelativePosition.x+n.GraphicalLabel.PositionAndShape.BorderMarginLeft,r=e.GraphicalLabel.PositionAndShape.RelativePosition.y;let l=1;i-t>3*this.rules.MinimumDistanceBetweenDashes&&(l=Math.floor((i-t)/this.rules.MinimumDistanceBetweenDashes)-1),1===l?this.calculateSingleDashForLyricWord(s,t,i,r):this.calculateDashes(s,t,i,r)}else{const t=o.parentMeasure.PositionAndShape.RelativePosition.x+o.PositionAndShape.RelativePosition.x+e.GraphicalLabel.PositionAndShape.BorderMarginRight,i=s.Measures[s.Measures.length-1],l=i.PositionAndShape.RelativePosition.x+i.PositionAndShape.Size.width;let c=e.GraphicalLabel.PositionAndShape.RelativePosition.y;if(this.calculateDashes(s,t,l,c),r&&r.Measures[0]&&a.parentMeasure.ParentStaffLine&&(a!==a.parentMeasure.staffEntries[0]||a.parentMeasure!==a.parentMeasure.ParentStaffLine.Measures[0])){const e=r.Measures[0].staffEntries[0].PositionAndShape.RelativePosition.x,t=a.parentMeasure.PositionAndShape.RelativePosition.x+a.PositionAndShape.RelativePosition.x+n.GraphicalLabel.PositionAndShape.BorderMarginLeft;c=n.GraphicalLabel.PositionAndShape.RelativePosition.y,this.calculateDashes(r,e,t,c)}}}calculateDashes(e,t,i,n){let s=i-t;if(s<3*this.rules.MinimumDistanceBetweenDashes)this.calculateSingleDashForLyricWord(e,t,i,n);else{const r=Math.floor(s/this.rules.MinimumDistanceBetweenDashes)-1,o=s/(r+1);let a=0;for(t+=o,i-=o;a<=Math.floor(r/2)&&i>t;)s=this.calculateRightAndLeftDashesForLyricWord(e,t,i,n),t+=o,i-=o,a++;s>2*o&&this.calculateSingleDashForLyricWord(e,t,i,n)}}calculateSingleDashForLyricWord(e,t,i,n){const s=new M.Label("-");s.colorDefault=this.rules.DefaultColorLyrics;let r=this.rules.LyricsHeight;i-t<.8&&(r*=.8,n-=.1*r);const o=new p.GraphicalLabel(s,r,m.TextAlignmentEnum.CenterBottom,this.rules);o.setLabelPositionAndShapeBorders(),e.LyricsDashes.push(o),-1===this.staffLinesWithLyricWords.indexOf(e)&&this.staffLinesWithLyricWords.push(e),o.PositionAndShape.Parent=e.PositionAndShape;const a=new d.PointF2D(t+(i-t)/2,n);o.PositionAndShape.RelativePosition=a}calculateLyricExtend(e){let t=e.GraphicalLabel.PositionAndShape.RelativePosition.y;const i=e.StaffEntryParent,n=i.parentMeasure.ParentStaffLine;let s,r;const o=i.parentMeasure.ParentStaff.idInMusicSheet;for(let a=i.parentVerticalContainer.Index+1;a<this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length;++a){const e=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[a].StaffEntries[o];if(e){if(e.hasOnlyRests())break;if(e.LyricsEntries.length>0)break;s=e,r=s.parentMeasure.ParentStaffLine,r||(r=i.parentMeasure.ParentStaffLine)}}if(s&&r)if(n===r&&s.parentMeasure.ParentStaffLine){const r=i.parentMeasure.PositionAndShape.RelativePosition.x+i.PositionAndShape.RelativePosition.x+e.GraphicalLabel.PositionAndShape.BorderMarginRight,o=s.parentMeasure.PositionAndShape.RelativePosition.x+s.PositionAndShape.RelativePosition.x+s.PositionAndShape.BorderMarginRight;t-=e.GraphicalLabel.PositionAndShape.Size.height/4,this.calculateSingleLyricWordWithUnderscore(n,r,o,t)}else{const o=n.Measures[n.Measures.length-1].PositionAndShape,a=i.parentMeasure.PositionAndShape.RelativePosition.x+i.PositionAndShape.RelativePosition.x+e.GraphicalLabel.PositionAndShape.BorderMarginRight,l=o.RelativePosition.x+o.Size.width;if(t-=e.GraphicalLabel.PositionAndShape.Size.height/4,this.calculateSingleLyricWordWithUnderscore(n,a,l,t),!s)return;if(s.parentMeasure.ParentStaffLine&&s.parentMeasure.staffEntries&&(s!==s.parentMeasure.staffEntries[0]||s.parentMeasure!==s.parentMeasure.ParentStaffLine.Measures[0])){const e=r.Measures[0].staffEntries[0].PositionAndShape.RelativePosition.x,i=s.parentMeasure.PositionAndShape.RelativePosition.x+s.PositionAndShape.RelativePosition.x+s.PositionAndShape.BorderMarginRight;this.calculateSingleLyricWordWithUnderscore(r,e,i,t)}}}calculateSingleLyricWordWithUnderscore(e,t,i,n){const s=new d.PointF2D(t,n),r=new d.PointF2D(i,n),o=new _.GraphicalLine(s,r,this.rules.LyricUnderscoreLineWidth);o.colorHex=this.rules.DefaultColorLyrics,e.LyricLines.push(o),-1===this.staffLinesWithLyricWords.indexOf(e)&&this.staffLinesWithLyricWords.push(e)}calculateRightAndLeftDashesForLyricWord(e,t,i,n){const s=new M.Label("-");s.colorDefault=this.rules.DefaultColorLyrics;const r=new p.GraphicalLabel(s,this.rules.LyricsHeight,m.TextAlignmentEnum.CenterBottom,this.rules);r.setLabelPositionAndShapeBorders(),e.LyricsDashes.push(r),-1===this.staffLinesWithLyricWords.indexOf(e)&&this.staffLinesWithLyricWords.push(e),r.PositionAndShape.Parent=e.PositionAndShape;const o=new d.PointF2D(t,n);r.PositionAndShape.RelativePosition=o;const a=new M.Label("-"),l=new p.GraphicalLabel(a,this.rules.LyricsHeight,m.TextAlignmentEnum.CenterBottom,this.rules);l.setLabelPositionAndShapeBorders(),e.LyricsDashes.push(l),l.PositionAndShape.Parent=e.PositionAndShape;const c=new d.PointF2D(i,n);return l.PositionAndShape.RelativePosition=c,l.PositionAndShape.RelativePosition.x-r.PositionAndShape.RelativePosition.x}calculateDynamicExpressions(){const e=Math.min(this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length-1,this.rules.MaxMeasureToDrawIndex);for(let t=Math.min(this.rules.MinMeasureToDrawIndex,this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length);t<=e;t++){const e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t];this.dynamicExpressionMap.clear();for(let i=0;i<e.StaffLinkedExpressions.length;i++)if(this.graphicalMusicSheet.MeasureList[t]&&this.graphicalMusicSheet.MeasureList[t][i]&&this.graphicalMusicSheet.MeasureList[t][i].ParentStaff.isVisible())for(let n=0;n<e.StaffLinkedExpressions[i].length;n++)(void 0!==e.StaffLinkedExpressions[i][n].InstantaneousDynamic||void 0!==e.StaffLinkedExpressions[i][n].StartingContinuousDynamic&&e.StaffLinkedExpressions[i][n].StartingContinuousDynamic.StartMultiExpression===e.StaffLinkedExpressions[i][n]&&0===e.StaffLinkedExpressions[i][n].UnknownList.length)&&this.calculateDynamicExpressionsForMultiExpression(e.StaffLinkedExpressions[i][n],t,i)}this.dynamicExpressionMap.clear()}calculateOctaveShifts(){for(let e=0;e<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;e++){const t=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e];for(let i=0;i<t.StaffLinkedExpressions.length;i++)if(this.graphicalMusicSheet.MeasureList[e]&&this.graphicalMusicSheet.MeasureList[e][i]&&this.graphicalMusicSheet.MeasureList[e][i].ParentStaff.isVisible())for(let n=0;n<t.StaffLinkedExpressions[i].length;n++)t.StaffLinkedExpressions[i][n].OctaveShiftStart&&this.calculateSingleOctaveShift(t,t.StaffLinkedExpressions[i][n],e,i)}}calculatePedals(){for(let e=0;e<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;e++){const t=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e];for(let i=0;i<t.StaffLinkedExpressions.length;i++)if(this.graphicalMusicSheet.MeasureList[e]&&this.graphicalMusicSheet.MeasureList[e][i]&&this.graphicalMusicSheet.MeasureList[e][i].ParentStaff.isVisible())for(let n=0;n<t.StaffLinkedExpressions[i].length;n++)t.StaffLinkedExpressions[i][n].PedalStart&&this.calculateSinglePedal(t,t.StaffLinkedExpressions[i][n],e,i)}}getFirstLeftNotNullStaffEntryFromContainer(e,t,i){if(this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[e].StaffEntries[t])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[e].StaffEntries[t];for(let n=e-1;n>=0;n--)if(this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[n].StaffEntries[t])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[n].StaffEntries[t]}getFirstRightNotNullStaffEntryFromContainer(e,t,i){if(this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[e].StaffEntries[t])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[e].StaffEntries[t];for(let n=e+1;n<this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length;n++)if(this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[n].StaffEntries[t])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[n].StaffEntries[t]}calculateWordRepetitionInstructions(){for(let e=0;e<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;e++){const t=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e];for(let i=0,n=t.FirstRepetitionInstructions.length;i<n;++i){const n=t.FirstRepetitionInstructions[i];this.calculateWordRepetitionInstruction(n,e)}for(let i=0,n=t.LastRepetitionInstructions.length;i<n;++i){const n=t.LastRepetitionInstructions[i];this.calculateWordRepetitionInstruction(n,e)}}}calculateRepetitionEndings(){const e=this.graphicalMusicSheet.ParentMusicSheet;for(let t=0,i=e.Repetitions.length;t<i;++t){const i=e.Repetitions[t];this.calcGraphicalRepetitionEndingsRecursively(i)}}calculateTempoExpressions(){const e=Math.min(this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length-1,this.rules.MaxMeasureToDrawIndex);for(let t=this.rules.MinMeasureToDrawIndex;t<=e;t++){const e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t];for(let i=0;i<e.TempoExpressions.length;i++)this.calculateTempoExpressionsForMultiTempoExpression(e,e.TempoExpressions[i],t)}}calculateRehearsalMarks(){if(this.rules.RenderRehearsalMarks)for(const e of this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures)this.calculateRehearsalMark(e)}calculateRehearsalMark(e){throw new Error(this.abstractNotImplementedErrorMessage)}calculateMoodAndUnknownExpressions(){for(let e=0;e<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;e++){const t=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e];for(let i=0;i<t.StaffLinkedExpressions.length;i++)if(this.graphicalMusicSheet.MeasureList[e]&&this.graphicalMusicSheet.MeasureList[e][i]&&this.graphicalMusicSheet.MeasureList[e][i].ParentStaff.isVisible())for(let n=0;n<t.StaffLinkedExpressions[i].length;n++)(t.StaffLinkedExpressions[i][n].MoodList.length>0||t.StaffLinkedExpressions[i][n].UnknownList.length>0)&&this.calculateMoodAndUnknownExpression(t.StaffLinkedExpressions[i][n],e,i)}}calculateStemDirectionFromVoices(e){if(void 0!==e.ParentSourceStaffEntry.Link)return e===e.ParentSourceStaffEntry.VoiceEntries[0]?void(e.WantedStemDirection=h.StemDirectionType.Up):void(e.WantedStemDirection=h.StemDirectionType.Down);e.ParentVoice instanceof v.LinkedVoice?e.WantedStemDirection=h.StemDirectionType.Down:e.ParentSourceStaffEntry.VoiceEntries.length>1&&(e.WantedStemDirection=h.StemDirectionType.Up)}setBeamNotesWantedStemDirections(e){if(!(e.Notes.length>0))return;const t=e.Notes[0].NoteBeam;if(t)for(const i of t.Notes)if(i.ParentVoiceEntry.WantedStemDirection!==h.StemDirectionType.Undefined&&i.ParentVoiceEntry.ParentSourceStaffEntry.ParentStaff.Id===e.ParentSourceStaffEntry.ParentStaff.Id){e.WantedStemDirection=i.ParentVoiceEntry.WantedStemDirection;break}}}t.MusicSheetCalculator=F},8033:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OctaveShiftParams=void 0,t.OctaveShiftParams=class{constructor(e,t,i){this.getOpenOctaveShift=e,this.getAbsoluteStartTimestamp=t,this.getAbsoluteEndTimestamp=i}}},8045:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(5875),t),s(i(2221),t),s(i(437),t),s(i(6229),t)},8156:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(5955),t),s(i(1745),t),s(i(6873),t),s(i(2552),t),s(i(363),t)},8215:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrnamentEnum=t.OrnamentContainer=void 0;const n=i(8233),s=i(6362);var r;t.OrnamentContainer=class{constructor(e){this.placement=s.PlacementEnum.Above,this.accidentalAbove=n.AccidentalEnum.NONE,this.accidentalBelow=n.AccidentalEnum.NONE,this.ornament=e}get GetOrnament(){return this.ornament}get AccidentalAbove(){return this.accidentalAbove}set AccidentalAbove(e){this.accidentalAbove=e}get AccidentalBelow(){return this.accidentalBelow}set AccidentalBelow(e){this.accidentalBelow=e}},function(e){e[e.Trill=0]="Trill",e[e.Turn=1]="Turn",e[e.InvertedTurn=2]="InvertedTurn",e[e.DelayedTurn=3]="DelayedTurn",e[e.DelayedInvertedTurn=4]="DelayedInvertedTurn",e[e.Mordent=5]="Mordent",e[e.InvertedMordent=6]="InvertedMordent"}(r||(t.OrnamentEnum=r={}))},8233:(e,t)=>{"use strict";var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.Pitch=t.AccidentalEnum=t.NoteEnum=void 0,function(e){e[e.C=0]="C",e[e.D=2]="D",e[e.E=4]="E",e[e.F=5]="F",e[e.G=7]="G",e[e.A=9]="A",e[e.B=11]="B"}(i||(t.NoteEnum=i={})),function(e){e[e.SHARP=0]="SHARP",e[e.FLAT=1]="FLAT",e[e.NONE=2]="NONE",e[e.NATURAL=3]="NATURAL",e[e.DOUBLESHARP=4]="DOUBLESHARP",e[e.DOUBLEFLAT=5]="DOUBLEFLAT",e[e.TRIPLESHARP=6]="TRIPLESHARP",e[e.TRIPLEFLAT=7]="TRIPLEFLAT",e[e.QUARTERTONESHARP=8]="QUARTERTONESHARP",e[e.QUARTERTONEFLAT=9]="QUARTERTONEFLAT",e[e.SLASHFLAT=10]="SLASHFLAT",e[e.THREEQUARTERSSHARP=11]="THREEQUARTERSSHARP",e[e.THREEQUARTERSFLAT=12]="THREEQUARTERSFLAT",e[e.SLASHQUARTERSHARP=13]="SLASHQUARTERSHARP",e[e.SLASHSHARP=14]="SLASHSHARP",e[e.DOUBLESLASHFLAT=15]="DOUBLESLASHFLAT",e[e.SORI=16]="SORI",e[e.KORON=17]="KORON"}(n||(t.AccidentalEnum=n={}));class s{static getNoteEnumString(e){switch(e){case i.C:return"C";case i.D:return"D";case i.E:return"E";case i.F:return"F";case i.G:return"G";case i.A:return"A";case i.B:return"B";default:return""}}static lineShiftFromNoteEnum(e,t){if(0===t)return[e,0];const i=s.pitchEnumValues,n=i.indexOf(e);let r=0,o=(n+t)%i.length;return n+t>i.length-1&&(r=1),o<0&&(o=i.length+o,r=-1),[i[o],r]}static CalculateTransposedHalfTone(e,t){const i=e.fundamentalNote+e.AccidentalHalfTones+t;return s.WrapAroundCheck(i,12)}static WrapAroundCheck(e,t){let i=0;for(;e<0;)e+=t,i--;for(;e>=t;)e-=t,i++;return{overflow:i,halftone:e}}static calcFrequency(e){let t,n=0;if(e instanceof s){const s=e;n=s.octave-1,t=s.fundamentalNote-i.A+s.AccidentalHalfTones}else"number"==typeof e&&(t=e-57);return 440*Math.pow(2,n)*Math.pow(2,t/12)}static calcFractionalKey(e){return Math.log(e/440)/Math.LN10*s.halftoneFactor+57}static fromFrequency(e){const t=s.calcFractionalKey(e)+.5,i=Math.floor(t/12)-s.octXmlDiff,r=Math.floor(t)%12;let o=r,a=n.NONE;return-1===this.pitchEnumValues.indexOf(o)&&(o=r-1,a=n.SHARP),new s(o,i,a)}static fromHalftone(e){const t=Math.floor(e/12)-s.octXmlDiff,i=e%12;let r=i,o=n.NONE;return-1===this.pitchEnumValues.indexOf(r)&&(r=i-1,o=n.SHARP),new s(r,t,o)}static ceiling(e){let t=e%=12;return-1===this.pitchEnumValues.indexOf(t)&&(t=e+1),t}static floor(e){let t=e%=12;return-1===this.pitchEnumValues.indexOf(t)&&(t=e-1),t}constructor(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;this.accidental=n.NONE,this.fundamentalNote=e,this.octave=t,this.accidental=i,this.accidentalXml=r,this.halfTone=e+12*(t+s.octXmlDiff)+s.HalfTonesFromAccidental(i),o||(this.frequency=s.calcFrequency(this)),this.OctaveShiftApplied=a}static HalfTonesFromAccidental(e){switch(e){case n.NONE:return 0;case n.SHARP:return 1;case n.FLAT:return-1;case n.NATURAL:return 0;case n.DOUBLESHARP:return 2;case n.DOUBLEFLAT:return-2;case n.TRIPLESHARP:return 3;case n.TRIPLEFLAT:return-3;case n.QUARTERTONESHARP:return.5;case n.QUARTERTONEFLAT:return-.5;case n.SLASHFLAT:return-.51;case n.THREEQUARTERSSHARP:return 1.5;case n.THREEQUARTERSFLAT:return-1.5;case n.SLASHQUARTERSHARP:return.0013;case n.SLASHSHARP:return.0014;case n.DOUBLESLASHFLAT:return-.0015;case n.SORI:return.0016;case n.KORON:return.0017;default:throw new Error("Unhandled AccidentalEnum value")}}static AccidentalFromHalfTones(e){switch(e){case 0:return n.NONE;case 1:return n.SHARP;case-1:return n.FLAT;case 2:return n.DOUBLESHARP;case-2:return n.DOUBLEFLAT;case 3:return n.TRIPLESHARP;case-3:return n.TRIPLEFLAT;case.5:return n.QUARTERTONESHARP;case-.5:return n.QUARTERTONEFLAT;case 1.5:return n.THREEQUARTERSSHARP;case-1.5:return n.THREEQUARTERSFLAT;default:return e>0&&e<1?n.QUARTERTONESHARP:e<0&&e>-1?n.QUARTERTONEFLAT:n.QUARTERTONESHARP}}static accidentalVexflow(e){let t;switch(e){case n.NATURAL:t="n";break;case n.FLAT:t="b";break;case n.SHARP:t="#";break;case n.DOUBLESHARP:t="##";break;case n.TRIPLESHARP:t="###";break;case n.DOUBLEFLAT:t="bb";break;case n.TRIPLEFLAT:t="bbs";break;case n.QUARTERTONESHARP:t="+";break;case n.QUARTERTONEFLAT:t="d";break;case n.SLASHFLAT:t="bs";break;case n.THREEQUARTERSSHARP:t="++";break;case n.THREEQUARTERSFLAT:t="db";break;case n.SLASHQUARTERSHARP:t="+-";break;case n.SLASHSHARP:t="++-";break;case n.DOUBLESLASHFLAT:t="bss";break;case n.SORI:t="o";break;case n.KORON:t="k"}return t}get AccidentalHalfTones(){return s.HalfTonesFromAccidental(this.accidental)}get Octave(){return this.octave}get FundamentalNote(){return this.fundamentalNote}get Accidental(){return this.accidental}get AccidentalXml(){return this.accidentalXml}get Frequency(){return this.frequency}static get OctaveXmlDifference(){return s.octXmlDiff}getHalfTone(){return this.halfTone}getTransposedPitch(e){if(e>12)throw new Error("rewrite this method to handle bigger octave changes or don't use is with bigger octave changes!");return e>0?this.getHigherPitchByTransposeFactor(e):e<0?this.getLowerPitchByTransposeFactor(-e):this}DoEnharmonicChange(){switch(this.accidental){case n.FLAT:case n.DOUBLEFLAT:this.fundamentalNote=this.getPreviousFundamentalNote(this.fundamentalNote),this.accidental=s.AccidentalFromHalfTones(this.halfTone-(this.fundamentalNote+12*(this.octave+s.octXmlDiff)));break;case n.SHARP:case n.DOUBLESHARP:this.fundamentalNote=this.getNextFundamentalNote(this.fundamentalNote),this.accidental=s.AccidentalFromHalfTones(this.halfTone-(this.fundamentalNote+12*(this.octave+s.octXmlDiff)));break;default:return}}ToString(){let e=s.accidentalVexflow(this.accidental);return e||(e=""),"Key: "+s.getNoteEnumString(this.fundamentalNote)+e+", Note: "+this.fundamentalNote+", octave: "+this.octave.toString()}ToStringShort(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=s.accidentalVexflow(this.accidental);t||(t="");const i=this.octave+e;return s.getNoteEnumString(this.fundamentalNote)+t+i}get ToStringShortGet(){return this.ToStringShort(0)}OperatorEquals(e){const t=this;return!(!t||!e)&&t.FundamentalNote===e.FundamentalNote&&t.Octave===e.Octave&&t.Accidental===e.Accidental}OperatorNotEqual(e){return!(this===e)}OperatorFundamentalGreaterThan(e){const t=this;return t.Octave===e.Octave?t.FundamentalNote>e.FundamentalNote:t.Octave>e.Octave}OperatorFundamentalLessThan(e){const t=this;return t.Octave===e.Octave?t.FundamentalNote<e.FundamentalNote:t.Octave<e.Octave}getHigherPitchByTransposeFactor(e){const t=s.pitchEnumValues.indexOf(this.fundamentalNote);let i,r=this.octave;return t+e>s.pitchEnumValues.length-1?(i=s.pitchEnumValues[t+e-s.pitchEnumValues.length],r++):i=s.pitchEnumValues[t+e],new s(i,r,n.NONE)}getLowerPitchByTransposeFactor(e){const t=s.pitchEnumValues.indexOf(this.fundamentalNote);let i,r=this.octave;return t-e<0?(i=s.pitchEnumValues[s.pitchEnumValues.length+t-e],r--):i=s.pitchEnumValues[t-e],new s(i,r,n.NONE)}getNextFundamentalNote(e){let t=s.pitchEnumValues.indexOf(e);return t=(t+1)%s.pitchEnumValues.length,s.pitchEnumValues[t]}getPreviousFundamentalNote(e){const t=s.pitchEnumValues.indexOf(e);return t>0?s.pitchEnumValues[t-1]:s.pitchEnumValues[s.pitchEnumValues.length-1]}}t.Pitch=s,s.pitchEnumValues=[i.C,i.D,i.E,i.F,i.G,i.A,i.B],s.halftoneFactor=12/(Math.LN2/Math.LN10),s.octXmlDiff=3},8254:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalLabel=void 0;const n=i(7533),s=i(6438),r=i(995),o=i(7921);class a extends r.Clickable{constructor(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;super(),this.CenteringXShift=0,this.label=e,this.boundingBox=new s.BoundingBox(this,r),this.label.fontHeight=t,this.label.textAlignment=i,this.rules=n}get Label(){return this.label}toString(){return"".concat(this.label.text," (").concat(this.boundingBox.RelativePosition.x,",").concat(this.boundingBox.RelativePosition.y,")")}setLabelPositionAndShapeBorders(){var e,t;if(""===this.Label.text.trim())return;this.TextLines=[];const i=null!==(e=null===(t=this.rules)||void 0===t?void 0:t.LabelMarginBorderFactor)&&void 0!==e?e:.1,s=this.Label.text.split(/[\n\r]+/g),r=s.length;let a=0;for(let n=0;n<r;n++){const e=s[n].trim(),t=o.MusicSheetCalculator.TextMeasurer.computeTextWidthToHeightRatio(e,this.Label.font,this.Label.fontStyle,this.label.fontFamily),i=this.Label.fontHeight*t;a=Math.max(a,i),this.TextLines.push({text:e,xOffset:0,width:i})}for(const o of this.TextLines){let e=0;switch(this.Label.textAlignment){case n.TextAlignmentEnum.RightBottom:case n.TextAlignmentEnum.RightCenter:case n.TextAlignmentEnum.RightTop:e=a-o.width;break;case n.TextAlignmentEnum.CenterBottom:case n.TextAlignmentEnum.CenterCenter:case n.TextAlignmentEnum.CenterTop:e=(a-o.width)/2}o.xOffset=e}let l=this.Label.fontHeight*r;this.rules.SpacingBetweenTextLines>0&&this.TextLines.length>1&&(l+=this.rules.SpacingBetweenTextLines*r/10);const c=this.PositionAndShape;switch(this.Label.textAlignment){case n.TextAlignmentEnum.CenterBottom:c.BorderTop=-l,c.BorderLeft=-a/2,c.BorderBottom=0,c.BorderRight=a/2;break;case n.TextAlignmentEnum.CenterCenter:c.BorderTop=-l/2,c.BorderLeft=-a/2,c.BorderBottom=l/2,c.BorderRight=a/2;break;case n.TextAlignmentEnum.CenterTop:c.BorderTop=0,c.BorderLeft=-a/2,c.BorderBottom=l,c.BorderRight=a/2;break;case n.TextAlignmentEnum.LeftBottom:c.BorderTop=-l,c.BorderLeft=0,c.BorderBottom=0,c.BorderRight=a;break;case n.TextAlignmentEnum.LeftCenter:c.BorderTop=-l/2,c.BorderLeft=0,c.BorderBottom=l/2,c.BorderRight=a;break;case n.TextAlignmentEnum.LeftTop:c.BorderTop=0,c.BorderLeft=0,c.BorderBottom=l,c.BorderRight=a;break;case n.TextAlignmentEnum.RightBottom:c.BorderTop=-l,c.BorderLeft=-a,c.BorderBottom=0,c.BorderRight=0;break;case n.TextAlignmentEnum.RightCenter:c.BorderTop=-l/2,c.BorderLeft=-a,c.BorderBottom=l/2,c.BorderRight=0;break;case n.TextAlignmentEnum.RightTop:c.BorderTop=0,c.BorderLeft=-a,c.BorderBottom=l,c.BorderRight=0}c.BorderMarginTop=c.BorderTop-l*i,c.BorderMarginLeft=c.BorderLeft-l*i,c.BorderMarginBottom=c.BorderBottom+l*i,c.BorderMarginRight=c.BorderRight+l*i}}t.GraphicalLabel=a},8365:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.BeamEnum=t.Beam=void 0,t.Beam=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.notes=[],this.extendedNoteList=[],this.BeamNumberOffsetToXML=0,this.AutoGenerated=!1,this.BeamNumber=e,this.BeamNumberOffsetToXML=t}get Notes(){return this.notes}set Notes(e){this.notes=e}get ExtendedNoteList(){return this.extendedNoteList}set ExtendedNoteList(e){this.extendedNoteList=e}addNoteToBeam(e){e&&(e.NoteBeam=this,this.notes.push(e),this.extendedNoteList.push(e))}},function(e){e[e.BeamNone=-1]="BeamNone",e[e.BeamBegin=0]="BeamBegin",e[e.BeamContinue=1]="BeamContinue",e[e.BeamEnd=2]="BeamEnd",e[e.BeamForward=3]="BeamForward",e[e.BeamBackward=4]="BeamBackward"}(i||(t.BeamEnum=i={}))},8464:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(4831),s=i(4589),r=function(){function e(e){this.heap=new s.default(n.reverseCompareFunction(e))}return e.prototype.enqueue=function(e){return this.heap.add(e)},e.prototype.add=function(e){return this.heap.add(e)},e.prototype.dequeue=function(){if(0!==this.heap.size()){var e=this.heap.peek();return this.heap.removeRoot(),e}},e.prototype.peek=function(){return this.heap.peek()},e.prototype.contains=function(e){return this.heap.contains(e)},e.prototype.isEmpty=function(){return this.heap.isEmpty()},e.prototype.size=function(){return this.heap.size()},e.prototype.clear=function(){this.heap.clear()},e.prototype.forEach=function(e){this.heap.forEach(e)},e}();t.default=r},8628:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransposeCalculator=void 0;const n=i(9735);class s{transposePitch(e,t,i){let r=n.NoteEnum.C,o=0,a=n.AccidentalEnum.NONE;const l=n.Pitch.CalculateTransposedHalfTone(e,i);let c=l.halftone,h=l.overflow;for(let u=0;u<s.noteEnums.length;u++){const t=s.noteEnums[u];if(t===c){const t=u;return r=s.noteEnums[t],o=e.Octave+h,a=n.AccidentalEnum.NONE,new n.Pitch(r,o,a)}if(t>c)break}for(let u=0;u<s.noteEnums.length;u++)if(s.noteEnums[u]>c){let i=u;const l=n.Pitch.HalfTonesFromAccidental(e.Accidental);for((l>0||0===l&&t.Key>=0)&&i--;i<0;)i+=7,c+=12,h--;for(;i>=7;)i-=7,c-=12,h++;r=s.noteEnums[i],a=n.Pitch.AccidentalFromHalfTones(c-r),o=e.Octave+h;break}return new n.Pitch(r,o,a)}transposeKey(e,t){let i=0,n=0;for(;i<s.keyMapping.length&&(n=s.keyMapping[i],n!==e.keyTypeOriginal);i++);let r=i+t;for(;r>=12;)r-=12;for(;r<0;)r+=12;e.Key=s.keyMapping[r],e.isTransposedBy=t}}t.TransposeCalculator=s,s.keyMapping=[0,-5,2,-3,4,-1,6,1,-4,3,-2,5],s.noteEnums=[n.NoteEnum.C,n.NoteEnum.D,n.NoteEnum.E,n.NoteEnum.F,n.NoteEnum.G,n.NoteEnum.A,n.NoteEnum.B]},8659:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(8628),t)},8705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OSMDColor=void 0;class i{constructor(e,t,i){this.alpha=255,this.red=e,this.green=t,this.blue=i}static get Black(){return new i(0,0,0)}static get DeepSkyBlue(){return new i(0,191,255)}static get Green(){return new i(20,160,20)}static get Magenta(){return new i(255,0,255)}static get Orange(){return new i(255,128,0)}static get Red(){return new i(240,20,20)}static get Disabled(){return new i(225,225,225)}static get DarkBlue(){return new i(0,0,140)}static get Debug1(){return new i(200,0,140)}static get Debug2(){return new i(100,100,200)}static get Debug3(){return new i(0,50,140)}toString(){return"rgb("+this.red+","+this.green+","+this.blue+","+this.alpha+")"}}t.OSMDColor=i},8713:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionStartSymbol=void 0;const n=i(9409),s=i(2683),r=i(6452),o=i(7741),a=i(6438),l=i(813);class c extends o.GraphicalObject{constructor(e,t){super();const i=t,o=e.PositionAndShape.AbsolutePosition.y,c=l.CollectionUtil.last(e.StaffLines).PositionAndShape.RelativePosition.y+4;this.verticalLine=new r.GraphicalLine(new n.PointF2D(i,o),new n.PointF2D(i,o+c),.4,s.OutlineAndFillStyleEnum.SelectionSymbol);for(let s=0,r=e.StaffLines.length;s<r;++s){const t=e.StaffLines[s],r=new n.PointF2D(i,o+t.PositionAndShape.RelativePosition.y),a=new Array(7);a[0].x=r.x+4,a[0].y=r.y+2,a[1].x=r.x+2.5,a[1].y=r.y+.5,a[2].x=r.x+2.5,a[2].y=r.y+1.3,a[3].x=r.x+1,a[3].y=r.y+1.3,a[4].x=r.x+1,a[4].y=r.y+2.7,a[5].x=r.x+2.5,a[5].y=r.y+2.7,a[6].x=r.x+2.5,a[6].y=r.y+3.5,this.arrows.push(a)}this.boundingBox=new a.BoundingBox(this),this.boundingBox.AbsolutePosition=new n.PointF2D(i,o),this.boundingBox.BorderLeft=-.4,this.boundingBox.BorderRight=4,this.boundingBox.BorderBottom=c}}t.SelectionStartSymbol=c},8724:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SystemImageProperties=t.GraphicalMusicSheet=void 0;const s=i(6723),r=i(6452),o=i(348),a=i(9409),l=i(164),c=i(4543),h=i(2561),u=i(6438),d=n(i(3065)),f=i(813),p=i(4548),m=i(7741);t.GraphicalMusicSheet=class{constructor(e,t){this.musicPages=[],this.measureList=[],this.verticalGraphicalStaffEntryContainers=[],this.cursors=[],this.leadSheet=!1,this.musicSheet=e,this.numberOfStaves=this.musicSheet.Staves.length,this.calculator=t,this.calculator.initialize(this)}get ParentMusicSheet(){return this.musicSheet}get GetCalculator(){return this.calculator}get MusicPages(){return this.musicPages}set MusicPages(e){this.musicPages=e}get MeasureList(){return this.measureList}set MeasureList(e){this.measureList=e}get VerticalGraphicalStaffEntryContainers(){return this.verticalGraphicalStaffEntryContainers}set VerticalGraphicalStaffEntryContainers(e){this.verticalGraphicalStaffEntryContainers=e}get Title(){return this.title}set Title(e){this.title=e}get Subtitle(){return this.subtitle}set Subtitle(e){this.subtitle=e}get Composer(){return this.composer}set Composer(e){this.composer=e}get Lyricist(){return this.lyricist}set Lyricist(e){this.lyricist=e}get Copyright(){return this.copyright}set Copyright(e){this.copyright=e}get Cursors(){return this.cursors}get SelectionStartSymbol(){return this.selectionStartSymbol}get SelectionEndSymbol(){return this.selectionEndSymbol}get MinAllowedSystemWidth(){return this.minAllowedSystemWidth}set MinAllowedSystemWidth(e){this.minAllowedSystemWidth=e}get NumberOfStaves(){return this.numberOfStaves}get LeadSheet(){return this.leadSheet}set LeadSheet(e){this.leadSheet=e}static transformRelativeToAbsolutePosition(e){for(let t=0;t<e.MusicPages.length;t++){const i=e.MusicPages[t].setMusicPageAbsolutePosition(t,e.ParentMusicSheet.Rules);e.MusicPages[t].PositionAndShape.calculateAbsolutePositionsRecursive(i.x,i.y)}}Initialize(){this.verticalGraphicalStaffEntryContainers=[],this.musicPages=[],this.measureList=[]}reCalculate(){this.calculator.calculate()}EnforceRedrawOfMusicSystems(){for(let e=0,t=this.musicPages.length;e<t;++e){const t=this.musicPages[e];for(let e=0,i=t.MusicSystems.length;e<i;++e)t.MusicSystems[e].needsToBeRedrawn=!0}}getClickedObject(e){for(let t=0,i=this.MusicPages.length;t<i;++t)return this.MusicPages[t].PositionAndShape.getClickedObjectOfType(e)}findGraphicalMeasure(e,t){for(let n=e;n>=0;n--){var i;const e=null===(i=this.measureList[n])||void 0===i?void 0:i[t];if(e)return e}}findGraphicalMeasureByMeasureNumber(e,t){for(let i=e;i>=0;i--)if(this.MeasureList[i]){const n=this.MeasureList[i][t];if((null===n||void 0===n?void 0:n.MeasureNumber)===e)return n}}findGraphicalStaffEntryFromMeasureList(e,t,i){for(let n=t;n<this.measureList.length;n++){const t=this.measureList[n][e];if(t)for(let e=0,n=t.staffEntries.length;e<n;++e){const n=t.staffEntries[e];if(n.sourceStaffEntry===i)return n}}}findNextGraphicalStaffEntry(e,t,i){const n=i.parentMeasure,s=n.staffEntries.indexOf(i);if(s<n.staffEntries.length-1)return n.staffEntries[s+1];if(t<this.measureList.length-1){const i=this.measureList[t+1][e];if(i.staffEntries.length>0)return i.staffEntries[0]}}getFirstVisibleMeasuresListFromIndices(e,t){const i=[],n=this.measureList[0].length;for(let s=e;s<=t;s++)for(let e=0;e<n;e++)if(this.measureList[s][e].isVisible()){i.push(this.measureList[s][e]);break}return i}orderMeasuresByStaffLine(e){const t=[];let i=[];t.push(i);for(let n=0;n<e.length;n++)0===n?i.push(e[0]):(e[n].ParentStaffLine===e[n-1].ParentStaffLine||(-1===t.indexOf(i)&&t.push(i),i=[],t.push(i)),i.push(e[n]));return t}initializeActiveClefs(){const e=[],t=this.musicSheet.getFirstSourceMeasure();if(t)for(let i=0;i<t.CompleteNumberOfStaves;i++){let n=new l.ClefInstruction;if(t.FirstInstructionsStaffEntries[i])for(let e=0,s=t.FirstInstructionsStaffEntries[i].Instructions.length;e<s;++e){const s=t.FirstInstructionsStaffEntries[i].Instructions[e];s instanceof l.ClefInstruction&&(n=s)}e.push(n)}return e}GetMainKey(){const e=this.musicSheet.getFirstSourceMeasure();if(e)for(let t=0;t<e.CompleteNumberOfStaves;t++)for(let i=0,n=e.FirstInstructionsStaffEntries[t].Instructions.length;i<n;++i){const n=e.FirstInstructionsStaffEntries[t].Instructions[i];if(n instanceof c.KeyInstruction)return n}}getOrCreateVerticalContainer(e){if(0===this.verticalGraphicalStaffEntryContainers.length||f.CollectionUtil.getLastElement(this.verticalGraphicalStaffEntryContainers).AbsoluteTimestamp.lt(e)){const t=new s.VerticalGraphicalStaffEntryContainer(this.numberOfStaves,e);return this.verticalGraphicalStaffEntryContainers.push(t),t}for(let t=this.verticalGraphicalStaffEntryContainers.length-1;t>=0;t--){if(this.verticalGraphicalStaffEntryContainers[t].AbsoluteTimestamp.lt(e)){const i=new s.VerticalGraphicalStaffEntryContainer(this.numberOfStaves,e);return this.verticalGraphicalStaffEntryContainers.splice(t+1,0,i),i}if(this.verticalGraphicalStaffEntryContainers[t].AbsoluteTimestamp.Equals(e))return this.verticalGraphicalStaffEntryContainers[t]}}GetVerticalContainerFromTimestamp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=f.CollectionUtil.binarySearch(this.verticalGraphicalStaffEntryContainers,new s.VerticalGraphicalStaffEntryContainer(0,e),s.VerticalGraphicalStaffEntryContainer.compareByTimestamp,t);if(i>=0)return this.verticalGraphicalStaffEntryContainers[i]}GetInterpolatedIndexInVerticalContainers(e){const t=this.verticalGraphicalStaffEntryContainers;if(1===t.length)return 0;let i,n,s=0,r=t.length-1;if(e.lte(t[t.length-1].AbsoluteTimestamp)){for(;r-s>1;){const i=Math.floor((r+s)/2);if(t[s].AbsoluteTimestamp.Equals(e)){r=s;break}if(t[r].AbsoluteTimestamp.Equals(e)){s=r;break}if(t[i].AbsoluteTimestamp.Equals(e))return this.verticalGraphicalStaffEntryContainers.indexOf(t[i]);e.lt(t[i].AbsoluteTimestamp)?r=i:s=i}if(s===r)return this.verticalGraphicalStaffEntryContainers.indexOf(t[s]);i=t[s].AbsoluteTimestamp,n=t[r].AbsoluteTimestamp}else i=t[t.length-1].AbsoluteTimestamp,n=h.Fraction.plus(this.getLongestStaffEntryDuration(t.length-1),i),r=t.length;const o=n.RealValue-i.RealValue,a=r-(n.RealValue-e.RealValue)/o;return Math.min(a,this.verticalGraphicalStaffEntryContainers.length-1)}getVisibleStavesIndicesFromSourceMeasure(e){const t=[],i=[];for(let n=0,s=e.length;n<s;++n){const i=e[n].ParentStaff.ParentInstrument;-1===t.indexOf(i)&&t.push(i)}for(let n=0,s=t.length;n<s;++n){const e=t[n],s=this.musicSheet.getGlobalStaffIndexOfFirstStaff(e);for(let t=0;t<e.Staves.length;t++)i.push(s+t)}return i}getGraphicalMeasureFromSourceMeasureAndIndex(e,t){for(let n=0;n<this.measureList.length;n++){var i;if((null===(i=this.measureList[n][0])||void 0===i?void 0:i.parentSourceMeasure)===e)return this.measureList[n][t]}}getLastGraphicalMeasureFromIndex(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.measureList.length-1;t&&(i=Math.min(i,this.musicSheet.Rules.MaxMeasureToDrawIndex));let n=this.measureList[i][e];for(;!n&&i>=0;)n=this.measureList[--i][e];return this.measureList[i][e]}getMeasureIndex(e,t,i){for(t=0;t<this.measureList.length;t++)for(let i=0,n=this.measureList[t].length;i<n;++i)if(this.measureList[t][i]===e)return!0;return!1}GetNearestGraphicalObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.GraphicalObject.name,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;const o=[];for(;0===o.length&&i<=n;){const n=new u.BoundingBox(void 0);n.BorderLeft=e.x-i,n.BorderTop=e.y-i,n.BorderRight=e.x+i,n.BorderBottom=e.y+i,n.AbsolutePosition=new a.PointF2D(e.x,e.y),n.calculateAbsolutePosition();for(let e=0,i=this.MusicPages.length;e<i;++e){const i=this.MusicPages[e].PositionAndShape.getObjectsInRegion(n,!1,t);if(i&&0!==i.length)for(let e=0,t=i.length;e<t;++e)r?r(i[e])&&o.push(i[e]):o.push(i[e])}i+=s}let l;for(let a=0,c=o.length;a<c;++a){const t=o[a];(void 0===l||this.CalculateDistance(t.PositionAndShape.AbsolutePosition,e)<this.CalculateDistance(l.PositionAndShape.AbsolutePosition,e))&&(l=t)}if(l)return l}GetNearestVoiceEntry(e){return this.GetNearestGraphicalObject(e,p.GraphicalVoiceEntry.name,5,20,5,(e=>{var t;return void 0!==(null===(t=e.parentStaffEntry)||void 0===t?void 0:t.relInMeasureTimestamp)}))}GetNearestNote(e,t){const i=this.GetNearestVoiceEntry(e);if(!i)return;let n,s=Number.MAX_SAFE_INTEGER;for(const r of i.notes){const t=r.PositionAndShape.AbsolutePosition.y,i=Math.abs(r.PositionAndShape.AbsolutePosition.x-e.x),o=Math.abs(t-e.y);i+o<s&&(n=r,s=i+o)}return n}domToSvg(e){return this.domToSvgTransform(e,!0)}svgToDom(e){return this.domToSvgTransform(e,!1)}svgToOsmd(e){const t=new a.PointF2D(e.x,e.y);return t.x/=10,t.y/=10,t}domToSvgTransform(e,t){const i=this.drawer.Backends[0].getSvgElement(),n=i.createSVGPoint();n.x=e.x,n.y=e.y;let s=i.getScreenCTM();t&&(s=s.inverse());const r=n.matrixTransform(s);return new a.PointF2D(r.x,r.y)}GetClickableLabel(e){const t=new u.BoundingBox;t.BorderLeft=e.x-4,t.BorderTop=e.y-4,t.BorderRight=e.x+4,t.BorderBottom=e.y+4,t.AbsolutePosition=new a.PointF2D(0,0);for(let i=0,n=this.MusicPages.length;i<n;++i){const e=this.MusicPages[i].PositionAndShape.getObjectsInRegion(t);if(1===e.length)for(let t=0,i=e.length;t<i;++t)return e[t]}}GetNearestStaffEntry(e){const t=[],i=new u.BoundingBox(void 0);i.BorderLeft=e.x-10,i.BorderTop=e.y-10,i.BorderRight=e.x+10,i.BorderBottom=e.y+10,i.AbsolutePosition=new a.PointF2D(0,0);for(let s=0,r=this.MusicPages.length;s<r;++s){const e=this.MusicPages[s].PositionAndShape.getObjectsInRegion(i,!1,o.GraphicalStaffEntry.name);if(e&&0!==e.length)for(let i=0,n=e.length;i<n;++i){const n=e[i];t.push(n)}}let n;for(let s=0,r=t.length;s<r;++s){const i=t[s];if(void 0===n)n=i;else{if(!i.relInMeasureTimestamp)continue;this.CalculateDistance(i.PositionAndShape.AbsolutePosition,e)<this.CalculateDistance(n.PositionAndShape.AbsolutePosition,e)&&(n=i)}}if(n)return n}GetNearestObject(e,t){const i=[],n=new u.BoundingBox(void 0);n.BorderLeft=e.x-10,n.BorderTop=e.y-10,n.BorderRight=e.x+10,n.BorderBottom=e.y+10,n.AbsolutePosition=new a.PointF2D(0,0);for(let r=0,o=this.MusicPages.length;r<o;++r){const e=this.MusicPages[r].PositionAndShape.getObjectsInRegion(n,!1,t);if(e&&0!==e.length)for(let t=0,n=e.length;t<n;++t){const n=e[t];i.push(n)}}let s;for(let r=0,o=i.length;r<o;++r){const t=i[r];(void 0===s||this.CalculateDistance(t.PositionAndShape.AbsolutePosition,e)<this.CalculateDistance(s.PositionAndShape.AbsolutePosition,e))&&(s=t)}if(s)return s}GetPossibleCommentAnchor(e){const t=this.GetNearestStaffEntry(e);if(t)return t.sourceStaffEntry}getClickedObjectOfType(e){for(let t=0,i=this.musicPages.length;t<i;++t){const i=this.musicPages[t].PositionAndShape.getClickedObjectOfType(e);if(i)return i}}tryGetTimestampFromPosition(e){const t=this.getClickedObjectOfType(e);if(t)return t.getAbsoluteTimestamp()}tryGetClickableLabel(e){try{return this.GetClickableLabel(e)}catch(t){d.default.info("GraphicalMusicSheet.tryGetClickableObject","positionOnMusicSheet: "+e,t)}}tryGetTimeStampFromPosition(e){try{const t=this.GetNearestStaffEntry(e);if(!t)return;return t.getAbsoluteTimestamp()}catch(t){d.default.info("GraphicalMusicSheet.tryGetTimeStampFromPosition","positionOnMusicSheet: "+e,t)}}getStaffEntry(e){const t=this.VerticalGraphicalStaffEntryContainers[e];let i;try{for(let e=0,n=t.StaffEntries.length;e<n;++e){const n=t.StaffEntries[e];n&&n.sourceStaffEntry.ParentStaff.isVisible()&&(i?n.PositionAndShape&&i.PositionAndShape&&i.PositionAndShape.RelativePosition.x>n.PositionAndShape.RelativePosition.x&&(i=n):i=n)}}catch(e){d.default.info("GraphicalMusicSheet.getStaffEntry",e)}return i}GetPreviousVisibleContainerIndex(e){for(let t=e-1;t>=0;t--){const e=this.verticalGraphicalStaffEntryContainers[t].StaffEntries;for(let i=0,n=e.length;i<n;++i){const n=e[i];if(n&&n.sourceStaffEntry.ParentStaff.isVisible())return t}}return-1}GetNextVisibleContainerIndex(e){for(let t=e+1;t<this.verticalGraphicalStaffEntryContainers.length;++t){const e=this.verticalGraphicalStaffEntryContainers[t].StaffEntries;for(let i=0,n=e.length;i<n;++i){const n=e[i];if(n&&n.sourceStaffEntry.ParentStaff.isVisible())return t}}return-1}findClosestLeftStaffEntry(e,t){let i,n=Math.floor(e);n=Math.min(this.VerticalGraphicalStaffEntryContainers.length-1,n);for(let s=n;s>=0;s--)if(i=this.getStaffEntry(s),i){if(!t)return i;if(i.sourceStaffEntry.ParentStaff.isVisible())return i}}findClosestRightStaffEntry(e,t){let i;for(let n=Math.max(0,Math.ceil(e));n<this.VerticalGraphicalStaffEntryContainers.length;n++)if(i=this.getStaffEntry(n),i){if(!t)return i;if(i.sourceStaffEntry.ParentStaff.isVisible())return i}}calculateCursorLineAtTimestamp(e,t){const i=this.calculateXPositionFromTimestamp(e),n=i[0],s=i[1];if(!s||0===s.StaffLines.length)return;const o=s.PositionAndShape.AbsolutePosition.y,l=f.CollectionUtil.last(s.StaffLines).PositionAndShape.RelativePosition.y+4;return new r.GraphicalLine(new a.PointF2D(n,o),new a.PointF2D(n,o+l),3,t)}calculateXPositionFromTimestamp(e){var t,i,n,s;let r;const o=this.GetInterpolatedIndexInVerticalContainers(e),a=this.findClosestLeftStaffEntry(o,!0),l=this.findClosestRightStaffEntry(o,!0),c=e.RealValue;if(!a&&!l)return[0,void 0];let u,d;if(u=a?null===(t=a.parentMeasure.ParentStaffLine)||void 0===t?void 0:t.ParentMusicSystem:null===(i=l.parentMeasure.ParentStaffLine)||void 0===i?void 0:i.ParentMusicSystem,d=l?null===(n=l.parentMeasure.ParentStaffLine)||void 0===n?void 0:n.ParentMusicSystem:null===(s=a.parentMeasure.ParentStaffLine)||void 0===s?void 0:s.ParentMusicSystem,u===d){let e,t,i;if(r=u,a)if(l)t=a.PositionAndShape.AbsolutePosition.x,i=l.PositionAndShape.AbsolutePosition.x,e=a===l?0:(c-a.getAbsoluteTimestamp().RealValue)/(l.getAbsoluteTimestamp().RealValue-a.getAbsoluteTimestamp().RealValue);else{t=a.PositionAndShape.AbsolutePosition.x,i=r.GetRightBorderAbsoluteXPosition();const n=a.parentMeasure.parentSourceMeasure;e=(c-a.getAbsoluteTimestamp().RealValue)/(h.Fraction.plus(n.AbsoluteTimestamp,n.Duration).RealValue-a.getAbsoluteTimestamp().RealValue)}else t=i=l.PositionAndShape.AbsolutePosition.x,e=0;return e=Math.min(1,Math.max(0,e)),[t+e*(i-t),r]}{const e=l.parentMeasure.parentSourceMeasure.AbsoluteTimestamp.RealValue;let t,i;if(c<e&&u.StaffLines[0]){r=u;const n=a.PositionAndShape.AbsolutePosition.x,s=r.GetRightBorderAbsoluteXPosition();t=(c-a.getAbsoluteTimestamp().RealValue)/(e-a.getAbsoluteTimestamp().RealValue),t=Math.min(1,Math.max(0,t)),i=n+t*(s-n)}else{r=d;const n=l.PositionAndShape.AbsolutePosition.x,s=r.GetLeftBorderAbsoluteXPosition();t=(c-e)/(l.getAbsoluteTimestamp().RealValue-e),t=Math.min(1,Math.max(0,t)),i=s+t*(n-s)}return[i,r]}}GetNumberOfVisibleInstruments(){let e=0;for(let t=0,i=this.musicSheet.Instruments.length;t<i;++t)this.musicSheet.Instruments[t].isVisible()&&e++;return e}GetNumberOfFollowedInstruments(){let e=0;for(let t=0,i=this.musicSheet.Instruments.length;t<i;++t)!0===this.musicSheet.Instruments[t].Following&&e++;return e}GetGraphicalFromSourceStaffEntry(e){var t;if(null===(t=e.VerticalContainerParent.ParentMeasure)||void 0===t||!t.VerticalMeasureList)return;const i=e.VerticalContainerParent.ParentMeasure.VerticalMeasureList[e.ParentStaff.idInMusicSheet];return null===i||void 0===i?void 0:i.findGraphicalStaffEntryFromTimestamp(e.Timestamp)}CalculateDistance(e,t){const i=e.x-t.x,n=e.y-t.y;return i*i+n*n}getLongestStaffEntryDuration(e){let t=new h.Fraction(0,1);for(const i of this.verticalGraphicalStaffEntryContainers[e].StaffEntries){if(!i)continue;const e=i.findStaffEntryMaxNoteLength();t.lt(e)&&(t=e)}return t}},t.SystemImageProperties=class{}},8786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSheetErrors=void 0,t.MusicSheetErrors=class{constructor(){this.measureErrors={},this.errors=[],this.tempErrors=[]}finalizeMeasure(e){let t=this.measureErrors[e];t||(t=[]),this.measureErrors[e]=t.concat(this.tempErrors),this.tempErrors=[]}pushMeasureError(e){this.tempErrors.push(e)}push(e){this.errors.push(e)}}},8900:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8927:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccidentalCalculator=void 0;const n=i(8233),s=i(8233),r=i(3263),o=i(7921);t.AccidentalCalculator=class{constructor(){this.keySignatureNoteAlterationsDict=new r.Dictionary,this.currentAlterationsComparedToKeyInstructionList=[],this.currentInMeasureNoteAlterationsDict=new r.Dictionary}get ActiveKeyInstruction(){return this.activeKeyInstruction}set ActiveKeyInstruction(e){this.activeKeyInstruction=e,this.reactOnKeyInstructionChange()}doCalculationsAtEndOfMeasure(){this.currentInMeasureNoteAlterationsDict.clear(),this.currentAlterationsComparedToKeyInstructionList.clear();for(const e of this.keySignatureNoteAlterationsDict.keys())this.currentInMeasureNoteAlterationsDict.setValue(e,this.keySignatureNoteAlterationsDict.getValue(e))}checkAccidental(e,t){if(!t)return;const i=t.FundamentalNote+12*t.Octave,r=e.sourceNote.NoteTie;if(r&&e.sourceNote!==r.StartNote)return;const a=this.currentAlterationsComparedToKeyInstructionList.indexOf(i)>=0;if(this.currentInMeasureNoteAlterationsDict.containsKey(i))if(a&&this.currentAlterationsComparedToKeyInstructionList.splice(this.currentAlterationsComparedToKeyInstructionList.indexOf(i),1),this.currentInMeasureNoteAlterationsDict.getValue(i)!==t.AccidentalHalfTones){this.keySignatureNoteAlterationsDict.containsKey(i)&&this.keySignatureNoteAlterationsDict.getValue(i)!==t.AccidentalHalfTones?(this.currentAlterationsComparedToKeyInstructionList.push(i),this.currentInMeasureNoteAlterationsDict.setValue(i,t.AccidentalHalfTones)):t.Accidental!==n.AccidentalEnum.NONE&&this.currentInMeasureNoteAlterationsDict.remove(i);const r=this.currentInMeasureNoteAlterationsDict.getValue(i);if(t.Accidental===n.AccidentalEnum.NONE&&(t=.5===Math.abs(r)?new s.Pitch(t.FundamentalNote,t.Octave,n.AccidentalEnum.NONE,void 0,!1,t.OctaveShiftApplied):new s.Pitch(t.FundamentalNote,t.Octave,n.AccidentalEnum.NATURAL,void 0,!1,t.OctaveShiftApplied)),this.isAlterAmbiguousAccidental(t.Accidental)&&!t.AccidentalXml)return;o.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(e,t)}else t.AccidentalXml&&0===this.Transpose&&!a&&o.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(e,t);else if(t.Accidental!==n.AccidentalEnum.NONE){if(a||this.currentAlterationsComparedToKeyInstructionList.push(i),this.currentInMeasureNoteAlterationsDict.setValue(i,t.AccidentalHalfTones),this.isAlterAmbiguousAccidental(t.Accidental)&&!t.AccidentalXml)return;o.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(e,t)}else a&&(t=new s.Pitch(t.FundamentalNote,t.Octave,n.AccidentalEnum.NATURAL,void 0,!1,t.OctaveShiftApplied),this.currentAlterationsComparedToKeyInstructionList.splice(this.currentAlterationsComparedToKeyInstructionList.indexOf(i),1),o.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(e,t))}isAlterAmbiguousAccidental(e){return e===n.AccidentalEnum.SLASHFLAT||e===n.AccidentalEnum.QUARTERTONEFLAT}reactOnKeyInstructionChange(){const e=this.activeKeyInstruction.AlteratedNotes;let t;t=this.activeKeyInstruction.Key>0?n.AccidentalEnum.SHARP:n.AccidentalEnum.FLAT,this.keySignatureNoteAlterationsDict.clear(),this.currentAlterationsComparedToKeyInstructionList.length=0;for(let i=-9;i<9;i++)for(let n=0;n<e.length;n++)this.keySignatureNoteAlterationsDict.setValue(e[n]+12*i,s.Pitch.HalfTonesFromAccidental(t));this.doCalculationsAtEndOfMeasure()}}},9003:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Articulation=void 0,t.Articulation=class{constructor(e,t){this.articulationEnum=e,this.placement=t}Equals(e){return e.articulationEnum===this.articulationEnum&&e.placement===this.placement}}},9019:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiExpressionEntry=t.MultiExpression=void 0;const n=i(2561),s=i(2148),r=i(5875),o=i(9803),a=i(1112),l=i(6362),c=i(2570);t.MultiExpression=class{constructor(e,t){this.unknownList=[],this.moodList=[],this.expressions=[],this.sourceMeasure=e,this.timestamp=t}get SourceMeasureParent(){return this.sourceMeasure}set SourceMeasureParent(e){this.sourceMeasure=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get Timestamp(){return this.timestamp}set Timestamp(e){this.timestamp=e}get AbsoluteTimestamp(){return n.Fraction.plus(this.timestamp,this.sourceMeasure.AbsoluteTimestamp)}get InstantaneousDynamic(){return this.instantaneousDynamic}set InstantaneousDynamic(e){this.instantaneousDynamic=e}get EndingContinuousDynamic(){return this.endingContinuousDynamic}set EndingContinuousDynamic(e){this.endingContinuousDynamic=e}get StartingContinuousDynamic(){return this.startingContinuousDynamic}set StartingContinuousDynamic(e){this.startingContinuousDynamic=e}get MoodList(){return this.moodList}get UnknownList(){return this.unknownList}get EntriesList(){return this.expressions}get OctaveShiftStart(){return this.octaveShiftStart}set OctaveShiftStart(e){this.octaveShiftStart=e}get OctaveShiftEnd(){return this.octaveShiftEnd}set OctaveShiftEnd(e){this.octaveShiftEnd=e}get CombinedExpressionsText(){return this.combinedExpressionsText}set CombinedExpressionsText(e){this.combinedExpressionsText=e}getPlacementOfFirstEntry(){let e=l.PlacementEnum.Above;return this.expressions.length>0&&(this.expressions[0].expression instanceof s.InstantaneousDynamicExpression||this.expressions[0].expression instanceof r.ContinuousDynamicExpression||this.expressions[0].expression instanceof o.MoodExpression||this.expressions[0].expression instanceof a.UnknownExpression)&&(e=this.expressions[0].expression.Placement),e}getFontstyleOfFirstEntry(){var e;let t=c.FontStyles.Regular;return this.expressions.length>0&&(this.expressions[0].expression instanceof r.ContinuousDynamicExpression||this.expressions[0].expression instanceof o.MoodExpression?t=c.FontStyles.Italic:this.expressions[0].expression instanceof a.UnknownExpression&&(t=null!==(e=this.expressions[0].expression.fontStyle)&&void 0!==e?e:c.FontStyles.Regular)),t}getColorXMLOfFirstEntry(){let e;return this.expressions.length>=1&&(e=this.expressions[0].expression.ColorXML),e}addExpression(e,t){e instanceof s.InstantaneousDynamicExpression?(this.instantaneousDynamic&&this.removeExpressionFromEntryList(this.InstantaneousDynamic),this.instantaneousDynamic=e,this.instantaneousDynamic.ParentMultiExpression=this):e instanceof r.ContinuousDynamicExpression?this.startingContinuousDynamic=e:e instanceof o.MoodExpression?this.moodList.push(e):e instanceof a.UnknownExpression&&this.unknownList.push(e),this.addExpressionToEntryList(e,t)}CompareTo(e){return this.Timestamp.RealValue>e.Timestamp.RealValue?1:this.Timestamp.RealValue<e.Timestamp.RealValue?-1:0}addExpressionToEntryList(e,t){const i=new h;i.prefix=t,i.expression=e,e instanceof r.ContinuousDynamicExpression||e instanceof o.MoodExpression||e instanceof a.UnknownExpression?i.label=e.Label:i.label="",this.expressions.push(i)}removeExpressionFromEntryList(e){for(let t=0,i=this.expressions.length;t<i;++t)if(this.expressions[t].expression===e){this.expressions.splice(t,1);break}}};class h{}t.MultiExpressionEntry=h},9024:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimestampTransform=t.MusicPartManager=void 0;const n=i(2561),s=i(474);t.MusicPartManager=class{constructor(e){this.musicSheet=e}reInit(){this.init()}init(){this.parts=this.musicSheet.Repetitions.slice(),this.sheetStart=this.musicSheet.SelectionStart=new n.Fraction(0,1),this.sheetEnd=this.musicSheet.SelectionEnd=this.musicSheet.SheetEndTimestamp,this.calcMapping()}getCurrentRepetitionTimestampTransform(e){let t;for(let i=this.timestamps.length-1;i>=0;i--)if(t=this.timestamps[i],e.gte(t.$from))return t;return this.timestamps[0]}absoluteEnrolledToSheetTimestamp(e){if(0===this.timestamps.length)return e;const t=this.getCurrentRepetitionTimestampTransform(e);return n.Fraction.plus(e,n.Fraction.minus(t.to,t.$from))}get Parts(){return this.parts}get MusicSheet(){return this.musicSheet}getIterator(e){return e?new s.MusicPartManagerIterator(this.musicSheet,e,void 0):new s.MusicPartManagerIterator(this.musicSheet,this.musicSheet.SelectionStart,this.musicSheet.SelectionEnd)}setSelectionStart(e){this.musicSheet.SelectionStart=e,this.musicSheet.SelectionEnd=void 0}setSelectionRange(e,t){this.musicSheet.SelectionStart=null!==e&&void 0!==e?e:this.sheetStart,this.musicSheet.SelectionEnd=null!==t&&void 0!==t?t:this.sheetEnd}calcMapping(){const e=[],t=this.getIterator();let i=t.CurrentRepetition,n=new r(t.CurrentEnrolledTimestamp.clone(),t.CurrentSourceTimestamp.clone(),void 0,0);for(e.push(n);!t.EndReached;){if(t.JumpOccurred||i!==t.CurrentRepetition){if(i=t.CurrentRepetition,t.backJumpOccurred){const i=t.JumpResponsibleRepetition;n.nextBackJump=t.CurrentEnrolledTimestamp,n.curRepetition=i,n.curRepetitionIteration=t.CurrentJumpResponsibleRepetitionIterationBeforeJump;for(let t=this.timestamps.length-2;t>=0&&!e[t].to.lt(i.AbsoluteTimestamp)&&!e[t].curRepetition;t--)e[t].nextBackJump=n.nextBackJump,e[t].curRepetition=i,e[t].curRepetitionIteration=n.curRepetitionIteration}n=new r(t.CurrentEnrolledTimestamp.clone(),t.CurrentSourceTimestamp.clone(),void 0,0),e.push(n)}t.moveToNext()}this.timestamps=e}};class r{constructor(e,t,i,n){this.$from=e,this.to=t,this.curRepetition=i,this.curRepetitionIteration=n,this.nextBackJump=void 0,this.nextForwardJump=void 0}}t.TimestampTransform=r},9099:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSheetReader=void 0;const s=i(427),r=i(4387),o=i(2561),a=i(1272),l=i(9252),c=i(9767),h=i(7307),u=n(i(3065)),d=i(9288),f=i(9288),p=i(2369),m=i(7586),g=i(5294),b=i(164),v=i(7435),y=i(5749),x=i(9713),S=i(7503),E=i(7533);t.MusicSheetReader=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new x.EngravingRules;this.completeNumberOfStaves=0,this.pluginManager=new S.ReaderPluginManager,this.afterSheetReadingModules=e||[],this.repetitionInstructionReader=y.MusicSymbolModuleFactory.createRepetitionInstructionReader(),this.repetitionCalculator=y.MusicSymbolModuleFactory.createRepetitionCalculator(),this.rules=t}get PluginManager(){return this.pluginManager}get CompleteNumberOfStaves(){return this.completeNumberOfStaves}static doCalculationsAfterDurationHasBeenSet(e){for(const t of e)t.doCalculationsAfterDurationHasBeenSet()}createMusicSheet(e,t){try{return this._createMusicSheet(e,t)}catch(e){return void u.default.error("MusicSheetReader.CreateMusicSheet",e)}}_removeFromArray(e,t){const i=e.indexOf(t);-1!==i&&e.splice(i,1)}trimString(e){return e.replace(/^\s+|\s+$/g,"")}_lastElement(e){return e[e.length-1]}_createMusicSheet(e,t){const i=[];let n=0;this.musicSheet=new s.MusicSheet,this.musicSheet.Path=t,this.musicSheet.Rules=this.rules;const a=e.attribute("osmdMeasureWidthFactor");if(a){const e=Number.parseFloat(a.value);"number"!=typeof e||isNaN(e)?u.default.info("xml parse: osmdMeasureWidthFactor invalid"):this.musicSheet.MeasureWidthFactor=e}if(!e)throw new h.MusicSheetReadingException("Undefined root element");this.pushSheetLabels(e,t);const l=e.element("part-list");if(!l)throw new h.MusicSheetReadingException("Undefined partListNode");const d=e.elements("part"),f=l.elements();this.initializeReading(f,d,i);let p=!0;this.currentFraction=new o.Fraction(0,1);let m=!1,g=e.element("identification");for(g&&(g=g.element("encoding")),g&&(g=g.element("software")),void 0!==g&&"Guitar Pro 5"===g.value&&(m=!0);p;){void 0!==this.currentMeasure&&this.currentMeasure.HasEndLine&&this.rules.NewPartAndSystemAfterFinalBarline&&(n=0),this.currentMeasure=new r.SourceMeasure(this.completeNumberOfStaves,this.musicSheet.Rules);for(const t of i)try{p=p&&t.readNextXmlMeasure(this.currentMeasure,this.currentFraction,m)}catch(e){const t=c.ITextTranslation.translateText("ReaderErrorMessages/InstrumentError","Error while reading instruments.");throw new h.MusicSheetReadingException(t,e)}p&&(this.musicSheet.addMeasure(this.currentMeasure),this.checkIfRhythmInstructionsAreSetAndEqual(i),this.checkSourceMeasureForNullEntries(),n=this.setSourceMeasureDuration(i,n),this.currentMeasure.AbsoluteTimestamp=this.currentFraction.clone(),this.musicSheet.SheetErrors.finalizeMeasure(this.currentMeasure.MeasureNumber),this.currentFraction.Add(this.currentMeasure.Duration),this.previousMeasure=this.currentMeasure)}this.repetitionInstructionReader&&(this.repetitionInstructionReader.removeRedundantInstructions(),this.repetitionCalculator&&this.repetitionCalculator.calculateRepetitions(this.musicSheet,this.repetitionInstructionReader.repetitionInstructions)),this.musicSheet.checkForInstrumentWithNoVoice(),this.musicSheet.fillStaffList();for(let s=0,r=this.afterSheetReadingModules.length;s<r;++s)this.afterSheetReadingModules[s].calculate(this.musicSheet);return this.musicSheet.userStartTempoInBPM=this.musicSheet.userStartTempoInBPM||this.musicSheet.DefaultStartTempoInBpm,this.musicSheet}initializeReading(e,t,i){const n=this.createInstrumentGroups(e);this.completeNumberOfStaves=this.getCompleteNumberOfStavesFromXml(t),0!==t.length&&(this.repetitionInstructionReader.MusicSheet=this.musicSheet,this.currentFraction=new o.Fraction(0,1),this.currentMeasure=void 0,this.previousMeasure=void 0);let s=0;for(const r of t){const t=r.attribute("id");if(t){const o=n[t.value],l=r.elements("measure");let h=1;try{h=this.getInstrumentNumberOfStavesFromXml(r)}catch(e){const t=c.ITextTranslation.translateText("ReaderErrorMessages/InstrumentStavesNumberError","Invalid number of staves at instrument: ");this.musicSheet.SheetErrors.push(t+o.Name);continue}o.createStaves(h),i.push(new a.InstrumentReader(this.pluginManager,this.repetitionInstructionReader,l,o)),this.repetitionInstructionReader&&(this.repetitionInstructionReader.xmlMeasureList[s]=l),s++}}}checkIfRhythmInstructionsAreSetAndEqual(e){const t=[];for(let s=0;s<this.completeNumberOfStaves;s++)if(this.currentMeasure.FirstInstructionsStaffEntries[s]){const e=this.currentMeasure.FirstInstructionsStaffEntries[s].Instructions[this.currentMeasure.FirstInstructionsStaffEntries[s].Instructions.length-1];e instanceof d.RhythmInstruction&&t.push(e)}let i=0,n=-1;for(let s=0,r=t.length;s<r;++s){const e=t[s];if(e.Rhythm.RealValue>i){if(this.areRhythmInstructionsMixed(t)&&e.SymbolEnum!==f.RhythmSymbolEnum.NONE)continue;i=e.Rhythm.RealValue,n=t.indexOf(e)}}if(t.length>0&&t.length<this.completeNumberOfStaves){const i=t[n].clone();for(let e=0;e<this.completeNumberOfStaves;e++)void 0===this.currentMeasure.FirstInstructionsStaffEntries[e]||this._lastElement(this.currentMeasure.FirstInstructionsStaffEntries[e].Instructions)instanceof d.RhythmInstruction||(this.currentMeasure.FirstInstructionsStaffEntries[e].removeAllInstructionsOfTypeRhythmInstruction(),this.currentMeasure.FirstInstructionsStaffEntries[e].Instructions.push(i.clone())),this.currentMeasure.FirstInstructionsStaffEntries[e]||(this.currentMeasure.FirstInstructionsStaffEntries[e]=new p.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[e].Instructions.push(i.clone()));for(let t=0,n=e.length;t<n;++t)e[t].ActiveRhythm=i}if(0===t.length&&this.currentMeasure===this.musicSheet.SourceMeasures[0]){const t=new d.RhythmInstruction(new o.Fraction(4,4,0,!1),f.RhythmSymbolEnum.NONE);for(let e=0;e<this.completeNumberOfStaves;e++)this.currentMeasure.FirstInstructionsStaffEntries[e]?this.currentMeasure.FirstInstructionsStaffEntries[e].removeAllInstructionsOfTypeRhythmInstruction():this.currentMeasure.FirstInstructionsStaffEntries[e]=new p.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[e].Instructions.push(t);for(let i=0,n=e.length;i<n;++i)e[i].ActiveRhythm=t}for(let s=0,r=t.length;s<r;++s){const e=t[s];if(e.Rhythm.RealValue<i&&this._lastElement(this.currentMeasure.FirstInstructionsStaffEntries[t.indexOf(e)].Instructions)instanceof d.RhythmInstruction){const i=this.currentMeasure.FirstInstructionsStaffEntries[t.indexOf(e)].Instructions;i[i.length-1]=t[n].clone()}Math.abs(e.Rhythm.RealValue-i)<1e-6&&e.SymbolEnum!==f.RhythmSymbolEnum.NONE&&this.areRhythmInstructionsMixed(t)&&(e.SymbolEnum=f.RhythmSymbolEnum.NONE)}}areRhythmInstructionsMixed(e){for(let t=1;t<e.length;t++)if(Math.abs(e[t].Rhythm.RealValue-e[0].Rhythm.RealValue)<1e-6&&e[t].SymbolEnum!==e[0].SymbolEnum)return!0;return!1}setSourceMeasureDuration(e,t){let i=new o.Fraction(0,1);const n=[];for(const a of e){n.push(a.MaxTieNoteFraction);const e=a.ActiveRhythm.Rhythm;i.lt(e)&&(i=new o.Fraction(e.Numerator,e.Denominator,0,!1))}const s=this.currentMeasure.calculateInstrumentsDuration(this.musicSheet,n);let r=new o.Fraction(0,1);for(const o of s)r.lt(o)&&(r=o);o.Fraction.Equal(r,i)?this.checkFractionsForEquivalence(r,i):r.lt(i)&&(r=this.currentMeasure.reverseCheck(this.musicSheet,r),this.checkFractionsForEquivalence(r,i)),this.currentMeasure.ImplicitMeasure=this.checkIfMeasureIsImplicit(r,i),(!this.currentMeasure.ImplicitMeasure||t>0)&&t++,this.currentMeasure.Duration=r,this.currentMeasure.ActiveTimeSignature=i,this.currentMeasure.MeasureNumber=t;for(let a=0;a<s.length;a++){const e=s[a];if(this.currentMeasure.ImplicitMeasure&&e!==r||!o.Fraction.Equal(e,i)&&!this.allInstrumentsHaveSameDuration(s,r)){const e=this.musicSheet.getGlobalStaffIndexOfFirstStaff(this.musicSheet.Instruments[a]);for(let t=0;t<this.musicSheet.Instruments[a].Staves.length;t++)if(!this.graphicalMeasureIsEmpty(e+t)){this.currentMeasure.setErrorInGraphicalMeasure(e+t,!0);const i=c.ITextTranslation.translateText("ReaderErrorMessages/MissingNotesError","Given Notes don't correspond to measure duration.");this.musicSheet.SheetErrors.pushMeasureError(i)}}}return t}checkFractionsForEquivalence(e,t){if(t.Denominator>e.Denominator){const i=t.Denominator/e.Denominator;e.expand(i)}}checkIfMeasureIsImplicit(e,t){return!(this.previousMeasure||!e.lt(t))||!!this.previousMeasure&&o.Fraction.plus(this.previousMeasure.Duration,e).Equals(t)}allInstrumentsHaveSameDuration(e,t){let i=0;for(let n=0,s=e.length;n<s;++n)e[n].Equals(t)&&i++;return i===e.length&&t!==new o.Fraction(0,1)}graphicalMeasureIsEmpty(e){let t=0;for(let i=0;i<this.currentMeasure.VerticalSourceStaffEntryContainers.length;i++)this.currentMeasure.VerticalSourceStaffEntryContainers[i].StaffEntries[e]||t++;return t===this.currentMeasure.VerticalSourceStaffEntryContainers.length}checkSourceMeasureForNullEntries(){for(let e=this.currentMeasure.VerticalSourceStaffEntryContainers.length-1;e>=0;e--)for(let t=this.currentMeasure.VerticalSourceStaffEntryContainers[e].StaffEntries.length-1;t>=0;t--){const i=this.currentMeasure.VerticalSourceStaffEntryContainers[e].StaffEntries[t];if(i)for(let e=i.VoiceEntries.length-1;e>=0;e--){const t=i.VoiceEntries[e];0===t.Notes.length&&(this._removeFromArray(t.ParentVoice.VoiceEntries,t),this._removeFromArray(i.VoiceEntries,t))}void 0!==i&&0===i.VoiceEntries.length&&0===i.ChordContainers.length&&(this.currentMeasure.VerticalSourceStaffEntryContainers[e].StaffEntries[t]=void 0)}for(let e=this.currentMeasure.VerticalSourceStaffEntryContainers.length-1;e>=0;e--){let t=0;for(let i=0,n=this.currentMeasure.VerticalSourceStaffEntryContainers[e].StaffEntries.length;i<n;++i)this.currentMeasure.VerticalSourceStaffEntryContainers[e].StaffEntries[i]||t++;t===this.currentMeasure.VerticalSourceStaffEntryContainers[e].StaffEntries.length&&this._removeFromArray(this.currentMeasure.VerticalSourceStaffEntryContainers,this.currentMeasure.VerticalSourceStaffEntryContainers[e])}}pushSheetLabels(e,t){this.readComposer(e),this.readTitle(e),this.readCopyright(e);try{this.musicSheet.Title&&this.musicSheet.Composer&&this.musicSheet.Subtitle||this.readTitleAndComposerFromCredits(e)}catch(e){u.default.info("MusicSheetReader.pushSheetLabels","readTitleAndComposerFromCredits",e)}try{if(!this.musicSheet.Title){const e=Math.max(0,t.lastIndexOf("/"),t.lastIndexOf("\\")),i=t.substr(e).split(".",1);this.musicSheet.Title=new v.Label(i[0])}}catch(e){u.default.info("MusicSheetReader.pushSheetLabels","read title from file name",e)}}presentAttrsWithValue(e,t){for(const i of e.attributes())if(i.value===t)return!0;return!1}readComposer(e){const t=e.element("identification");if(t){const e=t.elements("creator");for(let t=0,i=e.length;t<i;++t){const i=e[t];if(i.hasAttributes){if(this.presentAttrsWithValue(i,"composer")){this.musicSheet.Composer=new v.Label(this.trimString(i.value));continue}(this.presentAttrsWithValue(i,"lyricist")||this.presentAttrsWithValue(i,"poet"))&&(this.musicSheet.Lyricist=new v.Label(this.trimString(i.value)))}}}}readCopyright(e){const t=e.elements("identification");if(t.length>0){const e=t[0].elements("rights");if(e.length>0)for(let t=0,i=e.length;t<i;++t){const i=e[t];if(i.value){this.musicSheet.Copyright=new v.Label(i.value,E.TextAlignmentEnum.CenterBottom,void 0,!0);break}}}}readTitleAndComposerFromCredits(e){if(this.rules.SheetComposerSubtitleUseLegacyParsing)return void this.readTitleAndComposerFromCreditsLegacy(e);const t=this.computeSystemYCoordinates(e);if(0===t)return;let i,n,s;const r=e.elements("credit");for(let u=0,d=r.length;u<d;++u){const e=r[u];if(!e.attribute("page"))return;if("1"===e.attribute("page").value){let r;if(e){let c=!1,h=!1;const u=e.element("credit-type");"subtitle"===(null===u||void 0===u?void 0:u.value)?c=!0:"composer"===(null===u||void 0===u?void 0:u.value)&&(h=!0);let d=c||h;r=e.elements("credit-words");for(const e of r){var o,a,l;const r=null===(o=e.value)||void 0===o?void 0:o.trim();if("Copyright \xa9"===r)continue;const u=null===(a=e.attribute("justify"))||void 0===a?void 0:a.value;"right"===u?(h=!0,d=!0):"center"===u&&i&&(c=!0,d=!0);const f=null===(l=e.attribute("default-y"))||void 0===l?void 0:l.value,p=null!=f,m=p?parseFloat(f):Number.MIN_VALUE;if(p&&m>t||d)if(i||d){if(h||"right"===u)s?s+="\n"+r:s=r;else if(c||"right"!==u&&"left"!==u)n?n+="\n"+r:n=r;else if("left"===u){this.musicSheet.Lyricist||(this.musicSheet.Lyricist=new v.Label(r));break}}else i=r}}}}if(!this.musicSheet.Title&&i&&(this.musicSheet.Title=new v.Label(this.trimString(i))),!this.musicSheet.Subtitle&&n&&(this.musicSheet.Subtitle=new v.Label(this.trimString(n))),s){var c,h;let e=!1;this.musicSheet.Composer?(null!==(c=s.match("\n"))&&void 0!==c?c:[]).length+1>=(null!==(h=this.musicSheet.Composer.text.match("\n"))&&void 0!==h?h:[]).length+1&&(e=!0):e=!0,e&&(this.musicSheet.Composer=new v.Label(this.trimString(s)))}}readTitleAndComposerFromCreditsLegacy(e){const t=this.computeSystemYCoordinates(e);if(0===t)return;let i,n,s,r=1,o=0;const a=e.elements("credit");for(let u=0,d=a.length;u<d;++u){const e=a[u];if(!e.attribute("page"))return;if("1"===e.attribute("page").value){let a;if(e){var l,c;if(a=e.element("credit-words"),!a.attribute("justify"))break;const u=null===(l=a.attribute("justify"))||void 0===l?void 0:l.value,d=null===(c=a.attribute("default-y"))||void 0===c?void 0:c.value,f=null!=d,p=f?parseFloat(d):Number.MIN_VALUE;let m=!1;const g=e.element("credit-type");if("subtitle"===(null===g||void 0===g?void 0:g.value)&&(m=!0),f&&p>t||m){if(!this.musicSheet.Title&&!m){var h;const e=null===(h=a.attribute("font-size"))||void 0===h?void 0:h.value;if(e){const t=parseFloat(e);r<t&&(r=t,i=a.value)}}switch(this.musicSheet.Subtitle||("right"!==u&&"left"!==u||m)&&(o<p?(o=p,s?(n=s,s=a.value):s=a.value):n?n+="\n"+a.value:n=a.value),u){case"right":this.musicSheet.Composer||(this.musicSheet.Composer=new v.Label(this.trimString(a.value)));break;case"left":this.musicSheet.Lyricist||(this.musicSheet.Lyricist=new v.Label(this.trimString(a.value)))}}}}}!this.musicSheet.Title&&i&&(this.musicSheet.Title=new v.Label(this.trimString(i))),!this.musicSheet.Subtitle&&n&&(this.musicSheet.Subtitle=new v.Label(this.trimString(n)))}computeSystemYCoordinates(e){if(!e.element("defaults"))return 0;let t=0,i=0;try{var n,s;const i=null!==(n=null===(s=e.element("defaults"))||void 0===s||null===(s=s.element("page-layout"))||void 0===s?void 0:s.element("page-height").value)&&void 0!==n?n:"0";t=parseFloat(i)}catch(e){return u.default.info("MusicSheetReader.computeSystemYCoordinates(): couldn't find page height, not reading title/composer."),0}let r=!1;const o=e.elements("part");for(let a=0,l=o.length;a<l;++a){const e=o[a].elements("measure");for(let t=0,n=e.length;t<n;++t){const n=e[t];if(n.element("print")){const e=n.element("print").elements("system-layout");for(let t=0,n=e.length;t<n;++t){const n=e[t];if(n.element("top-system-distance")){const e=n.element("top-system-distance").value;i=parseFloat(e),r=!0;break}}break}}if(r)break}if(e.element("defaults").element("system-layout")&&e.element("defaults").element("system-layout").element("top-system-distance")){const t=e.element("defaults").element("system-layout").element("top-system-distance").value;i=parseFloat(t)}return 0===i?0:t-i}readTitle(e){const t=e.element("work");let i;t&&(i=t.element("work-title"),i&&i.value&&(this.musicSheet.Title=new v.Label(this.trimString(i.value))));const n=e.element("movement-title");let s="";if(n&&(this.musicSheet.Title?s=this.trimString(n.value):this.musicSheet.Title=new v.Label(this.trimString(n.value))),t){const e=t.element("work-number");if(e){const t=e.value;t&&(s=""===s?t:s+", "+t)}}s&&(this.musicSheet.Subtitle=new v.Label(s))}createInstrumentGroups(e){let t=0;const i={};let n;try{const s=e;for(let r=0,o=s.length;r<o;++r){const o=s[r];if("score-part"===o.name){const s=o.attribute("id").value,r=new l.Instrument(t,s,this.musicSheet,n);t++;const a=o.elements();for(let t=0,i=a.length;t<i;++t){const i=a[t];try{if("part-name"===i.name)r.Name=i.value,i.attribute("print-object")&&"no"===i.attribute("print-object").value&&(r.NameLabel.print=!1);else if("part-abbreviation"===i.name)r.PartAbbreviation=i.value;else if("score-instrument"===i.name){const e=new g.SubInstrument(r);e.idString=i.firstAttribute.value,r.SubInstruments.push(e);const t=i.element("instrument-name");t&&(e.name=t.value,e.setMidiInstrument(t.value))}else if("midi-instrument"===i.name){let t=r.getSubInstrument(i.firstAttribute.value);for(let e=0,s=r.SubInstruments.length;e<s;++e){const n=r.SubInstruments[e];if(n.idString===i.value){t=n;break}}const n=i.elements();for(let i=0,s=n.length;i<s;++i){const s=n[i];try{if("midi-channel"===s.name)10===parseInt(s.value,10)&&(r.MidiInstrumentId=b.MidiInstrument.Percussion);else if("midi-program"===s.name)r.SubInstruments.length>0&&r.MidiInstrumentId!==b.MidiInstrument.Percussion&&(t.midiInstrumentID=Math.max(0,parseInt(s.value,10)-1));else if("midi-unpitched"===s.name)t.fixedKey=Math.max(0,parseInt(s.value,10));else if("volume"===s.name)try{const e=parseFloat(s.value);t.volume=e/127}catch(e){u.default.debug("ExpressionReader.readExpressionParameters","read volume",e)}else if("pan"===s.name)try{const e=parseFloat(s.value);t.pan=e/64}catch(e){u.default.debug("ExpressionReader.readExpressionParameters","read pan",e)}}catch(e){u.default.info("MusicSheetReader.createInstrumentGroups midi settings: ",e)}}}}catch(e){u.default.info("MusicSheetReader.createInstrumentGroups: ",e)}}if(0===r.SubInstruments.length){const e=new g.SubInstrument(r);r.SubInstruments.push(e)}i[s]=r,n?(n.InstrumentalGroups.push(r),this.musicSheet.Instruments.push(r)):(this.musicSheet.InstrumentalGroups.push(r),this.musicSheet.Instruments.push(r))}else if("part-group"===o.name&&"start"===o.attribute("type").value){const e=new m.InstrumentalGroup("group",this.musicSheet,n);n?n.InstrumentalGroups.push(e):this.musicSheet.InstrumentalGroups.push(e),n=e}else if("part-group"===o.name&&"stop"===o.attribute("type").value&&n){if(1===n.InstrumentalGroups.length){const e=n.InstrumentalGroups[0];n.Parent?(n.Parent.InstrumentalGroups.push(e),this._removeFromArray(n.Parent.InstrumentalGroups,n)):(this.musicSheet.InstrumentalGroups.push(e),this._removeFromArray(this.musicSheet.InstrumentalGroups,n))}n=n.Parent}}}catch(e){const t=c.ITextTranslation.translateText("ReaderErrorMessages/InstrumentError","Error while reading Instruments");throw new h.MusicSheetReadingException(t,e)}for(let s=0,r=this.musicSheet.Instruments.length;s<r;++s){const e=this.musicSheet.Instruments[s];e.Name||(e.Name="Instr. "+e.IdString)}return i}getCompleteNumberOfStavesFromXml(e){let t=0;for(const i of e){const e=i.elements("measure");if(e.length>0){const i=e[0];if(i){let e=i.element("attributes");e&&(e=e.element("staves")),e?t+=parseInt(e.value,10):t++}}}if(isNaN(t)||t<=0){const e=c.ITextTranslation.translateText("ReaderErrorMessages/StaffError","Invalid number of staves.");throw new h.MusicSheetReadingException(e)}return t}getInstrumentNumberOfStavesFromXml(e){let t=0;const i=e.element("measure");if(i){const e=i.element("attributes");let n;e&&(n=e.element("staves")),t=e&&n?parseInt(n.value,10):1}if(isNaN(t)||t<=0){const e=c.ITextTranslation.translateText("ReaderErrorMessages/StaffError","Invalid number of Staves.");throw new h.MusicSheetReadingException(e)}return t}}},9147:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTempoExpression=void 0;const n=i(6362);class s extends n.AbstractExpression{constructor(e,t,i,n){super(t),this.label=e,this.staffNumber=i,this.parentMultiTempoExpression=n}get Label(){return this.label}set Label(e){this.label=e}get Placement(){return this.placement}set Placement(e){this.placement=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get ParentMultiTempoExpression(){return this.parentMultiTempoExpression}static isStringInStringList(e,t){for(const i of e)if(s.stringContainsSeparatedWord(t.toLowerCase().trim(),i.toLowerCase().trim()))return!0;return!1}static stringContainsSeparatedWord(e,t){return e===t||-1!==e.indexOf(" "+t)||-1!==e.indexOf(t+" ")}}t.AbstractTempoExpression=s},9157:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RehearsalExpression=void 0;const n=i(6362);class s extends n.AbstractExpression{constructor(e,t){super(t),this.label=e}}t.RehearsalExpression=s},9161:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeSubType=t.InstTempo=t.TempoType=t.InstantaneousTempoExpression=void 0;const n=i(9147),s=i(2561);class r extends n.AbstractTempoExpression{constructor(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];super(e,t,i,s),this.parentMeasure=s.SourceMeasureParent,this.isMetronomeMark=r,this.setTempoAndTempoType(n)}static getDefaultValueForInstTempo(e){switch(e){case a.larghissimo:return 20;case a.grave:return 30;case a.lento:return 48;case a.largo:return 52;case a.larghetto:return 63;case a.adagio:return 70;case a.adagietto:return 75;case a.andanteModerato:return 88;case a.andante:return 92;case a.andantino:return 96;case a.moderato:return 106;case a.allegretto:return 112;case a.allegroModerato:return 118;case a.allegro:return 130;case a.vivace:return 140;case a.vivacissimo:return 155;case a.allegrissimo:return 170;case a.presto:return 184;case a.prestissimo:return 200;default:return 60}}static isInputStringInstantaneousTempo(e){return!!e&&(r.isStringInStringList(r.listInstantaneousTempoLarghissimo,e)||r.isStringInStringList(r.listInstantaneousTempoGrave,e)||r.isStringInStringList(r.listInstantaneousTempoLento,e)||r.isStringInStringList(r.listInstantaneousTempoLargo,e)||r.isStringInStringList(r.listInstantaneousTempoLarghetto,e)||r.isStringInStringList(r.listInstantaneousTempoAdagio,e)||r.isStringInStringList(r.listInstantaneousTempoAdagietto,e)||r.isStringInStringList(r.listInstantaneousTempoAndanteModerato,e)||r.isStringInStringList(r.listInstantaneousTempoAndante,e)||r.isStringInStringList(r.listInstantaneousTempoAndantino,e)||r.isStringInStringList(r.listInstantaneousTempoModerato,e)||r.isStringInStringList(r.listInstantaneousTempoAllegretto,e)||r.isStringInStringList(r.listInstantaneousTempoAllegroModerato,e)||r.isStringInStringList(r.listInstantaneousTempoAllegro,e)||r.isStringInStringList(r.listInstantaneousTempoVivace,e)||r.isStringInStringList(r.listInstantaneousTempoVivacissimo,e)||r.isStringInStringList(r.listInstantaneousTempoAllegrissimo,e)||r.isStringInStringList(r.listInstantaneousTempoPresto,e)||r.isStringInStringList(r.listInstantaneousTempoPrestissimo,e)||r.isStringInStringList(r.listInstantaneousTempoChangesGeneral,e))}get Label(){return this.label}set Label(e){this.label=e}get Placement(){return this.placement}set Placement(e){this.placement=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get TempoInBpm(){return this.tempoInBpm}set TempoInBpm(e){this.tempoInBpm=e}get ParentMultiTempoExpression(){return this.parentMultiTempoExpression}getAbsoluteTimestamp(){return s.Fraction.plus(this.ParentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.ParentMultiTempoExpression.Timestamp)}getAbsoluteFloatTimestamp(){return s.Fraction.plus(this.ParentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.ParentMultiTempoExpression.Timestamp).RealValue}setTempoAndTempoType(e){if(!this.label)return this.tempoInBpm=e,void(this.TempoType=o.metronomeMark);r.isStringInStringList(r.listInstantaneousTempoLarghissimo,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.larghissimo)),this.tempoInBpm=e,this.InstTempo=a.larghissimo,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoGrave,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.grave)),this.tempoInBpm=e,this.InstTempo=a.grave,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoLento,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.lento)),this.tempoInBpm=e,this.InstTempo=a.lento,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoLargo,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.largo)),this.tempoInBpm=e,this.InstTempo=a.largo,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoLarghetto,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.larghetto)),this.tempoInBpm=e,this.InstTempo=a.larghetto,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoAdagio,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.adagio)),this.tempoInBpm=e,this.InstTempo=a.adagio,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoAdagietto,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.adagietto)),this.tempoInBpm=e,this.InstTempo=a.adagietto,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoAndanteModerato,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.andanteModerato)),this.tempoInBpm=e,this.InstTempo=a.andanteModerato,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoAndante,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.andante)),this.tempoInBpm=e,this.InstTempo=a.andante,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoAndantino,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.andantino)),this.tempoInBpm=e,this.InstTempo=a.andantino,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoModerato,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.moderato)),this.tempoInBpm=e,this.InstTempo=a.moderato,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoAllegretto,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.allegretto)),this.tempoInBpm=e,this.InstTempo=a.allegretto,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoAllegroModerato,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.allegroModerato)),this.tempoInBpm=e,this.InstTempo=a.allegroModerato,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoAllegro,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.allegro)),this.tempoInBpm=e,this.InstTempo=a.allegro,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoVivace,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.vivace)),this.tempoInBpm=e,this.InstTempo=a.vivace,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoVivacissimo,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.vivacissimo)),this.tempoInBpm=e,this.InstTempo=a.vivacissimo,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoAllegrissimo,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.allegrissimo)),this.tempoInBpm=e,this.InstTempo=a.allegrissimo,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoPresto,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.presto)),this.tempoInBpm=e,this.InstTempo=a.presto,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoPrestissimo,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(a.prestissimo)),this.tempoInBpm=e,this.InstTempo=a.prestissimo,this.TempoType=o.inst):r.isStringInStringList(r.listInstantaneousTempoAddons,this.label)?(this.tempoInBpm=0,this.TempoType=o.addon):r.isStringInStringList(r.listInstantaneousTempoChangesGeneral,this.label)&&(this.tempoInBpm=0,this.TempoType=o.change)}}var o,a,l;t.InstantaneousTempoExpression=r,r.listInstantaneousTempoLarghissimo=["Larghissimo","Sehr breit","very, very slow"],r.listInstantaneousTempoGrave=["Grave","Schwer","slow and solemn"],r.listInstantaneousTempoLento=["Lento","Lent","Langsam","slowly"],r.listInstantaneousTempoLargo=["Largo","Breit","broadly"],r.listInstantaneousTempoLarghetto=["Larghetto","Etwas breit","rather broadly"],r.listInstantaneousTempoAdagio=["Adagio","Langsam","Ruhig","slow and stately"],r.listInstantaneousTempoAdagietto=["Adagietto","Ziemlich ruhig","Ziemlich langsam","rather slow"],r.listInstantaneousTempoAndanteModerato=["Andante moderato"],r.listInstantaneousTempoAndante=["Andante","Gehend","Schreitend","at a walking pace"],r.listInstantaneousTempoAndantino=["Andantino","Maestoso"],r.listInstantaneousTempoModerato=["Moderato","M\xe4\xdfig","Mod\xe9r\xe9","moderately"],r.listInstantaneousTempoAllegretto=["Allegretto","Animato","fast"],r.listInstantaneousTempoAllegroModerato=["Allegro moderato"],r.listInstantaneousTempoAllegro=["Allegro","Rapide","Vite","Rasch","Schnell","Fr\xf6hlich"],r.listInstantaneousTempoVivace=["Vivace","Allegro Assai","Lebhaft","Lebendig","lively and fast"],r.listInstantaneousTempoVivacissimo=["Vivacissimo","Sehr lebhaft","Sehr lebendig"],r.listInstantaneousTempoAllegrissimo=["Allegrissimo","very fast"],r.listInstantaneousTempoPresto=["Presto","Sehr schnell","Geschwind"],r.listInstantaneousTempoPrestissimo=["Prestissimo","\xe4u\xdferst schnell"],r.listInstantaneousTempoChangesGeneral=["tempo primo","a tempo","tempo i","rubato","doppio movimento","rallentando","ritardando","ritard.","rit.","ritard","rall...","accelerando","accel"],r.listInstantaneousTempoAddons=["assai","amoroso","cantabile","con brio","con dolore","con espressione","con fuoco","con moto","con spirito","spiritoso","espressivo","giocoso","giusto","grazioso","lesto","lugubre","maestoso","ma non troppo","marcato","molto","morendo","mosso","non tanto","piu","un poco","poco","quasi","risoluto","scherzando","sostenuto","teneramente","tempo giusto","tranquillo","sehr","lieblich","liebevoll","mit Leidenschaft","mit Liebe","amour\xf6s","gesanglich","mit Schwung","mit Feuer","mit Schmerz","mit Ausdruck","mit Bewegung","geistvoll","ausdrucksvoll","freudig","verspielt","angemessen","grazi\xf6s","mit Grazie","flink","beh\xe4nde","traurig","klagend","majest\xe4tisch","aber nicht zu sehr","markant","gem\xe4\xdfigt","viel","sehr","ersterbend","bewegt","nicht zu sehr","mehr","ein wenig","gleichsam","entschlossen","zupackend","heiter","nachdr\xfccklich","getragen","gewichtig","zart","z\xe4rtlich","im angemessenen Zeitma\xdf","ruhig","ein wenig","alla marcia","ad libitum","alla breve"],function(e){e[e.none=0]="none",e[e.metronomeMark=1]="metronomeMark",e[e.inst=2]="inst",e[e.change=3]="change",e[e.addon=4]="addon"}(o||(t.TempoType=o={})),function(e){e[e.larghissimo=0]="larghissimo",e[e.grave=1]="grave",e[e.lento=2]="lento",e[e.largo=3]="largo",e[e.larghetto=4]="larghetto",e[e.adagio=5]="adagio",e[e.adagietto=6]="adagietto",e[e.andanteModerato=7]="andanteModerato",e[e.andante=8]="andante",e[e.andantino=9]="andantino",e[e.moderato=10]="moderato",e[e.allegretto=11]="allegretto",e[e.allegroModerato=12]="allegroModerato",e[e.allegro=13]="allegro",e[e.vivace=14]="vivace",e[e.vivacissimo=15]="vivacissimo",e[e.allegrissimo=16]="allegrissimo",e[e.presto=17]="presto",e[e.prestissimo=18]="prestissimo",e[e.lastRealTempo=19]="lastRealTempo"}(a||(t.InstTempo=a={})),function(e){e[e.none=0]="none",e[e.atempo=1]="atempo",e[e.doppioMovimento=2]="doppioMovimento",e[e.tempoprimo=3]="tempoprimo"}(l||(t.ChangeSubType=l={}))},9184:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(5364),t),s(i(164),t),s(i(4543),t),s(i(1645),t),s(i(9288),t),s(i(3123),t)},9252:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Instrument=void 0;const n=i(7586),s=i(7435),r=i(1910);class o extends n.InstrumentalGroup{constructor(e,t,i,n){super(void 0,i,n),this.Transpose=0,this.voices=[],this.staves=[],this.hasLyrics=!1,this.hasChordSymbols=!1,this.lyricVersesNumbers=[],this.subInstruments=[],this.id=e,this.idString=t,this.nameLabel=new s.Label(t)}get Voices(){return this.voices}get Staves(){return this.staves}get NameLabel(){return this.nameLabel}get HasLyrics(){return this.hasLyrics}set HasLyrics(e){this.hasLyrics=e}get HasChordSymbols(){return this.hasChordSymbols}set HasChordSymbols(e){this.hasChordSymbols=e}get LyricVersesNumbers(){return this.lyricVersesNumbers}set LyricVersesNumbers(e){this.lyricVersesNumbers=e}get Name(){return this.nameLabel.text}set Name(e){this.nameLabel.text=e}get IdString(){return this.idString}get Id(){return this.id}get MidiInstrumentId(){return this.subInstruments[0].midiInstrumentID}set MidiInstrumentId(e){this.subInstruments[0].midiInstrumentID=e}get Volume(){return this.subInstruments[0].volume}set Volume(e){for(let t=0,i=this.subInstruments.length;t<i;++t)this.subInstruments[t].volume=e}get PlaybackTranspose(){return this.playbackTranspose}set PlaybackTranspose(e){this.playbackTranspose=e}get SubInstruments(){return this.subInstruments}getSubInstrument(e){for(let t=0,i=this.subInstruments.length;t<i;++t){const i=this.subInstruments[t];if(i.idString===e)return i}}get PartAbbreviation(){return this.partAbbreviation}set PartAbbreviation(e){this.partAbbreviation=e}get Visible(){return this.voices.length>0&&this.Voices[0].Visible}isVisible(){if(!this.Visible)return!1;for(const e of this.Staves)if(e.Visible)return!0;return!1}set Visible(e){for(let t=0,i=this.Voices.length;t<i;++t)this.Voices[t].Visible=e}get Audible(){let e=!1;for(let t=0,i=this.Voices.length;t<i;++t){const i=this.Voices[t];e=e||i.Audible}return e}set Audible(e){for(let t=0,i=this.Voices.length;t<i;++t)this.Voices[t].Audible=e;for(let t=0,i=this.staves.length;t<i;++t)this.staves[t].audible=e}get Following(){let e=!1;for(let t=0,i=this.Voices.length;t<i;++t){const i=this.Voices[t];e=e||i.Following}return e}set Following(e){for(let t=0,i=this.Voices.length;t<i;++t)this.Voices[t].Following=e;for(let t=0,i=this.staves.length;t<i;++t)this.staves[t].following=e}SetVoiceAudible(e,t){for(let i=0,n=this.Voices.length;i<n;++i){const n=this.Voices[i];if(n.VoiceId===e){n.Audible=t;break}}}SetVoiceFollowing(e,t){for(let i=0,n=this.Voices.length;i<n;++i){const n=this.Voices[i];if(n.VoiceId===e){n.Following=t;break}}}SetStaffAudible(e,t){const i=this.staves[e-1];if(i.audible=t,t)for(let n=0,s=i.Voices.length;n<s;++n)i.Voices[n].Audible=!0;else for(let n=0,s=i.Voices.length;n<s;++n){const t=i.Voices[n];let s=!1;for(let i=0,n=this.Staves.length;i<n;++i){const n=this.Staves[i];if(n.Id!==e&&n.audible)for(let e=0,i=n.Voices.length;e<i;++e)n.Voices[e]===t&&(s=!0)}s||(t.Audible=!1)}}SetStaffFollow(e,t){const i=this.staves[e-1];if(i.following=t,t)for(let n=0,s=i.Voices.length;n<s;++n)i.Voices[n].Following=!0;else for(let n=0,s=i.Voices.length;n<s;++n){const t=i.Voices[n];let s=!1;for(let i=0,n=this.Staves.length;i<n;++i){const n=this.Staves[i];if(n.Id!==e&&n.following)for(let e=0,i=n.Voices.length;e<i;++e)n.Voices[e]===t&&(s=!0)}s||(t.Following=!1)}}areAllVoiceVisible(){for(const e of this.Voices)if(!e.Visible)return!1;return!0}createStaves(e){for(let t=0;t<e;t++)this.staves.push(new r.Staff(this,t+1))}toString(){return"".concat(this.Name," , id: ").concat(this.id,", idstring: ").concat(this.idString)}}t.Instrument=o},9281:function(e,t,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=i(6119),o=i(4831),a=function(e){function t(t,i){var n=e.call(this,i)||this;return n.defaultFactoryFunction=t,n}return s(t,e),t.prototype.setDefault=function(t,i){var n=e.prototype.getValue.call(this,t);return o.isUndefined(n)?(this.setValue(t,i),i):n},t.prototype.getValue=function(e){return this.setDefault(e,this.defaultFactoryFunction())},t}(r.default);t.default=a},9288:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RhythmSymbolEnum=t.RhythmInstruction=void 0;const n=i(5364);class s extends n.AbstractNotationInstruction{constructor(e,t){super(void 0),this.rhythm=e,this.numerator=e.Numerator,this.denominator=e.Denominator,this.symbolEnum=t}get Rhythm(){return this.rhythm}set Rhythm(e){this.rhythm=e}get SymbolEnum(){return this.symbolEnum}set SymbolEnum(e){this.symbolEnum=e}clone(){return new s(this.rhythm.clone(),this.symbolEnum)}OperatorEquals(e){const t=this;return t===e||!(!t||!e)&&t.numerator===e.numerator&&t.denominator===e.denominator}OperatorNotEqual(e){return!(this===e)}ToString(){return"Rhythm: "+this.rhythm.toString()}}var r;t.RhythmInstruction=s,function(e){e[e.NONE=0]="NONE",e[e.COMMON=1]="COMMON",e[e.CUT=2]="CUT"}(r||(t.RhythmSymbolEnum=r={}))},9310:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowOctaveShift=void 0;var s=n(i(3206)).default.Flow;const r=i(2768),o=i(437),a=n(i(3065));class l extends r.GraphicalOctaveShift{constructor(e,t){switch(super(e,t),e.Type){case o.OctaveEnum.VA8:this.position=s.TextBracket.Positions.TOP,this.supscript="va",this.text="8";break;case o.OctaveEnum.MA15:this.position=s.TextBracket.Positions.TOP,this.supscript="ma",this.text="15";break;case o.OctaveEnum.VB8:this.position=s.TextBracket.Positions.BOTTOM,this.supscript="vb",this.text="8";break;case o.OctaveEnum.MB15:this.position=s.TextBracket.Positions.BOTTOM,this.supscript="mb",this.text="15";break;default:a.default.error("Unknown or NONE octaveshift. This should not be called!")}}setStartNote(e){for(const t of e.graphicalVoiceEntries){const e=t;if(null!==e&&void 0!==e&&e.vfStaveNote)return this.startNote=e.vfStaveNote,!0}return!1}setEndNote(e){for(const i of e.graphicalVoiceEntries){var t;const n=i;if(null!==n&&void 0!==n&&n.vfStaveNote)return this.endNote=n.vfStaveNote,this.endMeasure=e.parentMeasure,null!==(t=this.endMeasure)&&void 0!==t&&t.parentSourceMeasure.Rules.OctaveShiftOnWholeMeasureNoteUntilEndOfMeasure&&n.notes[0].sourceNote.isWholeMeasureNote()&&(this.graphicalEndAtMeasureEnd=!0),!0}return!1}getTextBracket(){let e,t=this.endNote;const i=this;this.graphicalEndAtMeasureEnd&&(e={getAbsoluteX:()=>10*(i.endMeasure.PositionAndShape.AbsolutePosition.x+i.endMeasure.PositionAndShape.Size.width),getGlyph:()=>({getWidth:()=>0})}),e&&(t=e);const n=new s.TextBracket({position:this.position,start:this.startNote,stop:t,superscript:this.supscript,text:this.text});return this.endsOnDifferentStaffLine&&(n.render_options.show_bracket=!1),n}}t.VexFlowOctaveShift=l},9409:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointF2D=void 0;class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=0,this.y=0,this.x=e,this.y=t}static get Empty(){return new i}static pointsAreEqual(e,t){return e.x===t.x&&e.y===t.y}ToString(){return"["+this.x+", "+this.y+"]"}}t.PointF2D=i},9436:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SvgVexFlowBackend=void 0;var s=n(i(3206)).default.Flow;const r=i(1902),o=i(6014),a=i(2570),l=i(624),c=n(i(3065));class h extends r.VexFlowBackend{constructor(e){super(),this.rules=e}getVexflowBackendType(){return s.Renderer.Backends.SVG}getOSMDBackendType(){return l.BackendType.SVG}getCanvasSize(){var e;return null===(e=document.getElementById("osmdCanvasPage"+this.graphicalMusicPage.PageNumber))||void 0===e?void 0:e.offsetHeight}initialize(e,t){this.zoom=t,this.canvas=document.createElement("div"),this.canvas.id="osmdCanvasPage"+this.graphicalMusicPage.PageNumber,this.inner=this.canvas,this.inner.style.position="relative",this.canvas.style.zIndex="0",e.appendChild(this.inner),this.renderer=new s.Renderer(this.canvas,this.getVexflowBackendType()),this.ctx=this.renderer.getContext(),this.ctx.svg.id="osmdSvgPage"+this.graphicalMusicPage.PageNumber}getContext(){return this.ctx}getSvgElement(){return this.ctx.svg}removeNode(e){var t;const i=null===(t=this.ctx)||void 0===t?void 0:t.svg;if(!i)return!1;try{i.removeChild(e)}catch(e){return c.default.error(e),!1}return!0}free(){const e=this.ctx.svg;for(;e.lastChild;)e.removeChild(e.lastChild)}clear(){this.ctx&&(this.free(),this.rules.PageBackgroundColor&&(this.ctx.svg.style["background-color"]=this.rules.PageBackgroundColor))}scale(e){this.ctx.scale(e,e)}translate(e,t){}renderText(e,t,i,n,s,r){let l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;this.ctx.save();const h=this.ctx.openGroup("text");l&&(this.ctx.attributes.fill=l,this.ctx.attributes.stroke=l);let u=c;c&&"default"!==c||(u=this.rules.DefaultFontFamily),this.ctx.setFont(u,e,o.VexFlowConverter.fontStyle(t)),this.ctx.attributes["font-size"]="".concat(e,"px"),this.ctx.state["font-size"]="".concat(e,"px");let d="normal",f="normal";switch(t){case a.FontStyles.Bold:d="bold";break;case a.FontStyles.Italic:f="italic";break;case a.FontStyles.BoldItalic:d="bold",f="italic";break;default:d="normal"}return this.ctx.attributes["font-weight"]=d,this.ctx.state["font-weight"]=d,this.ctx.attributes["font-style"]=f,this.ctx.state["font-style"]=f,this.ctx.fillText(n,r.x,r.y+s),this.ctx.closeGroup(),this.ctx.restore(),h}renderRectangle(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.ctx.save();const s=this.ctx.openGroup("rect");return this.ctx.attributes.fill=i||o.VexFlowConverter.style(t),this.ctx.attributes["fill-opacity"]=n,this.ctx.fillRect(e.x,e.y,e.width,e.height),this.ctx.restore(),this.ctx.attributes["fill-opacity"]=1,this.ctx.closeGroup(),s}renderLine(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF0000FF",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,s=arguments.length>4?arguments[4]:void 0;this.ctx.save();const r=this.ctx.openGroup("line",s);return this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(t.x,t.y),this.ctx.attributes.stroke=i,this.ctx.lineWidth=n,this.ctx.stroke(),this.ctx.closeGroup(),this.ctx.restore(),r}renderCurve(e,t,i){let n;t&&i&&(n="".concat(i.getSVGId(),"-slur"));const s=this.ctx.openGroup("curve",n);return this.ctx.beginPath(),this.ctx.moveTo(e[0].x,e[0].y),this.ctx.bezierCurveTo(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y),this.ctx.lineTo(e[7].x,e[7].y),this.ctx.bezierCurveTo(e[6].x,e[6].y,e[5].x,e[5].y,e[4].x,e[4].y),this.ctx.lineTo(e[0].x,e[0].y),this.ctx.closePath(),this.ctx.fill(),this.ctx.closeGroup(),s}renderPath(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;const n=this.ctx.openGroup("path",i);let s;this.ctx.beginPath();for(const r of e)s?this.ctx.lineTo(r.x,r.y):(this.ctx.moveTo(r.x,r.y),s=r);return this.ctx.closePath(),t?this.ctx.fill():this.ctx.stroke(),this.ctx.stroke(),this.ctx.closeGroup(),n}export(){const e=this.ctx.svg.cloneNode(!0),t=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),i=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",t);i.replaceChild(e,i.documentElement);const n=(new XMLSerializer).serializeToString(i),s=document.createElement("a");s.href="data:image/svg+xml; charset=utf8, "+encodeURIComponent(n.replace(/></g,">\n\r<")),s.download="opensheetmusicdisplay_download.svg",s.innerHTML=window.location.href+"/download",document.body.appendChild(s)}}t.SvgVexFlowBackend=h},9479:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowMusicSheetDrawer=t.unitInPixels=void 0;const s=n(i(3206)),r=i(1932),o=i(200),a=i(9409),l=i(7785),c=i(2683),h=i(6362),u=i(3361),d=i(5023),f=n(i(3065)),p=i(1066),m=i(3661),g=i(5824),b=i(9436);t.unitInPixels=10;class v extends r.MusicSheetDrawer{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.DrawingParameters;super(new l.VexFlowTextMeasurer(e.Rules),e),this.backends=[],this.zoom=1,this.pageIdx=0}get Backends(){return this.backends}drawSheet(e){var i,n,r;"gonville"===this.rules.DefaultVexFlowNoteFont&&(s.default.Flow.DEFAULT_FONT_STACK=[null===(i=s.default.Flow.Fonts)||void 0===i?void 0:i.Gonville,null===(n=s.default.Flow.Fonts)||void 0===n?void 0:n.Bravura,null===(r=s.default.Flow.Fonts)||void 0===r?void 0:r.Custom]),s.default.Flow.STAVE_LINE_THICKNESS=this.rules.StaffLineWidth*t.unitInPixels,s.default.Flow.STEM_WIDTH=this.rules.StemWidth*t.unitInPixels,s.default.Flow.DEFAULT_NOTATION_FONT_SCALE=this.rules.VexFlowDefaultNotationFontScale,s.default.Flow.DEFAULT_TAB_FONT_SCALE=this.rules.VexFlowDefaultTabFontScale,this.pageIdx=0;for(const t of e.MusicPages){if(t.PageNumber>this.rules.MaxPageToDrawNumber)break;const e=this.backends[this.pageIdx];e.graphicalMusicPage=t,e.scale(this.zoom),this.pageIdx+=1}this.pageIdx=0,this.backend=this.backends[0],super.drawSheet(e)}drawPage(e){e&&(this.backend=this.backends[e.PageNumber-1],super.drawPage(e),this.pageIdx+=1)}clear(){for(const e of this.backends)e.clear()}setZoom(e){this.zoom=e}calculatePixelDistance(e){return e*t.unitInPixels}drawStaffLine(e){var t,i,n;const s=this.backend.getContext(),r=s.openGroup();r&&(r.classList.add("staffline"),e.ParentStaff&&(r.id="".concat(null===(t=e.ParentStaff.ParentInstrument)||void 0===t?void 0:t.Name).concat(null===(i=e.ParentStaff.ParentInstrument)||void 0===i?void 0:i.Id,"-").concat(null===(n=e.ParentStaff)||void 0===n?void 0:n.Id))),super.drawStaffLine(e);const o=e.PositionAndShape.AbsolutePosition;this.rules.RenderSlurs&&this.drawSlurs(e,o),this.rules.RenderGlissandi&&this.drawGlissandi(e,o),s.closeGroup()}drawSlurs(e,t){for(const i of e.GraphicalSlurs)i.slur.isCrossed()||this.drawSlur(i,t)}drawGlissandi(e,t){for(const i of e.GraphicalGlissandi)this.drawGlissando(i,t)}drawGlissando(e,t){if(e.StaffLine.ParentStaff.isTab||e.calculateLine(this.rules),e.Line){const i=new a.PointF2D(e.Line.Start.x+t.x,e.Line.Start.y),n=new a.PointF2D(e.Line.End.x+t.x,e.Line.End.y);e.Line.SVGElement=this.drawLine(i,n,e.Color,e.Width)}else{const t=e.vfTie;if(t){const e=this.backend.getContext();t.setContext(e),t.draw()}}}drawSlur(e,t){const i=[],n=new a.PointF2D(e.bezierStartPt.x+t.x,e.bezierStartPt.y+t.y),s=new a.PointF2D(e.bezierStartControlPt.x+t.x,e.bezierStartControlPt.y+t.y),r=new a.PointF2D(e.bezierEndControlPt.x+t.x,e.bezierEndControlPt.y+t.y),o=new a.PointF2D(e.bezierEndPt.x+t.x,e.bezierEndPt.y+t.y);i.push(this.applyScreenTransformation(n)),i.push(this.applyScreenTransformation(s)),i.push(this.applyScreenTransformation(r)),i.push(this.applyScreenTransformation(o)),e.placement===h.PlacementEnum.Above?(n.y-=.05,s.y-=.3,r.y-=.3,o.y-=.05):(n.y+=.05,s.y+=.3,r.y+=.3,o.y+=.05),i.push(this.applyScreenTransformation(n)),i.push(this.applyScreenTransformation(s)),i.push(this.applyScreenTransformation(r)),i.push(this.applyScreenTransformation(o));const l=this.rules.GNote(e.slur.StartNote);e.SVGElement=this.backend.renderCurve(i,!0,l)}drawMeasure(e){e.setAbsoluteCoordinates(e.PositionAndShape.AbsolutePosition.x*t.unitInPixels,e.PositionAndShape.AbsolutePosition.y*t.unitInPixels);try{e.draw(this.backend.getContext())}catch(e){f.default.warn("VexFlowMusicSheetDrawer.drawMeasure",e)}let i=0;for(const t of e.staffEntries)this.drawStaffEntry(t),i=this.drawBuzzRolls(t,i)}drawBuzzRolls(e,t){for(const s of e.graphicalVoiceEntries)for(const e of s.notes){var i;if(null!==(i=e.sourceNote.TremoloInfo)&&void 0!==i&&i.tremoloUnmeasured){var n;const i=this.rules.TremoloBuzzRollThickness,s=.9,r=.5,o=e;let l,c;const h=o.vfnote[0].getStemDirection();let u;if(this.backend instanceof b.SvgVexFlowBackend&&(u=o.getStemSVG()),void 0!==(null===(n=u)||void 0===n?void 0:n.getBbox)){const e=u.getBBox();l=new a.PointF2D(e.x/10,e.y/10),c=e.height/10}else c=o.vfnote[0].getStemLength()/10,l=new a.PointF2D(o.vfnote[0].getStem().x_begin/10,o.vfnote[0].getStem().y_top/10),1===h&&(l.y-=c);let d=l.y+c/3;o.vfnote[0].getBeamCount()>1&&(d=l.y+c/2,-1===h&&(d-=r+.2));const f=l.x-.5,p=d,m=[],g=[new a.PointF2D(0,-i),new a.PointF2D(s-i,0),new a.PointF2D(-s+i,-r),new a.PointF2D(0,-i),new a.PointF2D(s,0),new a.PointF2D(0,i),new a.PointF2D(-s+i,0),new a.PointF2D(s-i,r),new a.PointF2D(0,i),new a.PointF2D(-s,0)];let v=new a.PointF2D(f,p);m.push(v);for(const e of g)v=m.last(),m.push(new a.PointF2D(v.x+e.x,v.y-e.y));this.DrawPath(m,o.ParentMusicPage,!0,"buzzRoll".concat(t)),t++}}return t}drawLine(e,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000000FF",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2;return e=this.applyScreenTransformation(e),i=this.applyScreenTransformation(i),this.backend.renderLine(e,i,n,s*t.unitInPixels)}DrawOverlayLine(e,i,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FF0000FF",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2,o=arguments.length>5?arguments[5]:void 0;if(!n.PageNumber||n.PageNumber>this.backends.length||n.PageNumber<1)return void console.log("VexFlowMusicSheetDrawer.drawOverlayLine: invalid page number / music page number doesn't correspond to an existing backend.");const a=n.PageNumber-1,l=this.backends[a];return e=this.applyScreenTransformation(e),i=this.applyScreenTransformation(i),o||(o="overlayLine ".concat(e.x,"/").concat(e.y)),l.renderLine(e,i,s,r*t.unitInPixels,o)}DrawPath(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;const s=t.PageNumber-1,r=this.backends[s],o=[];for(const a of e)o.push(this.applyScreenTransformation(a));return r.renderPath(o,i,n)}drawSkyLine(e){const t=e.PositionAndShape.AbsolutePosition,i=e.PositionAndShape.Size.width;this.drawSampledLine(e.SkyLine,t,i)}drawBottomLine(e){const t=new a.PointF2D(e.PositionAndShape.AbsolutePosition.x,e.PositionAndShape.AbsolutePosition.y),i=e.PositionAndShape.Size.width;this.drawSampledLine(e.BottomLine,t,i,"#0000FFFF")}drawSampledLine(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FF0000FF";const s=[];let r=0;for(let a=0;a<e.length;a++)e[a]!==r&&(s.push(a),r=e[a]);const o=t;if(s.length>0){const t=this.rules.SamplingUnit;let r,l,c=new a.PointF2D(o.x,o.y),h=new a.PointF2D(s[0]/t+o.x,o.y);this.drawLine(c,h,n),e[0]>=0&&(r=new a.PointF2D(s[0]/t+o.x,o.y),l=new a.PointF2D(s[0]/t+o.x,o.y+e[s[0]]),this.drawLine(r,l,n));for(let i=1;i<s.length;i++)c=new a.PointF2D(s[i-1]/t+o.x,o.y+e[s[i-1]]),h=new a.PointF2D(s[i]/t+o.x,o.y+e[s[i-1]]),this.drawLine(c,h,n),r=new a.PointF2D(s[i]/t+o.x,o.y+e[s[i-1]]),l=new a.PointF2D(s[i]/t+o.x,o.y+e[s[i]]),this.drawLine(r,l,n);s[s.length-1]<e.length?(c=new a.PointF2D(s[s.length-1]/t+o.x,o.y+e[s[s.length-1]]),h=new a.PointF2D(o.x+i,o.y+e[s[s.length-1]]),this.drawLine(c,h,n)):(c=new a.PointF2D(s[s.length-1]/t+o.x,o.y),h=new a.PointF2D(o.x+i,o.y),this.drawLine(c,h,n))}else{const e=new a.PointF2D(o.x,o.y),t=new a.PointF2D(o.x+i,o.y);this.drawLine(e,t,n)}}drawStaffEntry(e){if(e.FingeringEntries.length>0)for(const t of e.FingeringEntries)t.SVGNode=this.drawLabel(t,c.GraphicalLayers.Notes);if(void 0!==e.graphicalChordContainers&&e.graphicalChordContainers.length>0)for(const t of e.graphicalChordContainers){const e=t.GraphicalLabel;e.SVGNode=this.drawLabel(e,c.GraphicalLayers.Notes)}this.rules.RenderLyrics&&e.LyricsEntries.length>0&&this.drawLyrics(e.LyricsEntries,c.GraphicalLayers.Notes)}drawLyrics(e,t){e.forEach((e=>{var i;const n=e.GraphicalLabel;n.Label.colorDefault=this.rules.DefaultColorLyrics,n.SVGNode=this.drawLabel(n,t),null===(i=n.SVGNode)||void 0===i||i.classList.add("lyrics")}))}drawInstrumentBrace(e,t){const i=this.backend.getContext();i.openGroup("brace"),e.draw(i),i.closeGroup()}drawGroupBracket(e,t){const i=this.backend.getContext();i.openGroup("bracket"),e.draw(i),i.closeGroup()}drawOctaveShifts(e){for(const t of e.OctaveShifts)if(t){const i=t,n=this.backend.getContext(),s=i.getTextBracket();this.rules.DefaultColorMusic&&(s.render_options.color=this.rules.DefaultColorMusic),s.setContext(n);try{s.draw()}catch(e){f.default.warn(e)}}}drawPedals(e){for(const t of e.Pedals)if(t){const e=t,i=this.backend.getContext(),n=e.getPedalMarking();n.render_options.color=this.rules.DefaultColorMusic,n.setContext(i),n.draw()}}drawExpressions(e){for(const i of e.AbstractExpressions)if(i instanceof d.GraphicalInstantaneousDynamicExpression)this.drawInstantaneousDynamic(i);else if(i instanceof u.GraphicalInstantaneousTempoExpression){var t;if((null===(t=i.SourceExpression.parentMeasure)||void 0===t?void 0:t.MeasureNumber)<=1&&!this.rules.RenderFirstTempoExpression)continue;const e=i.GraphicalLabel;e.SVGNode=this.drawLabel(e,c.GraphicalLayers.Notes)}else if(i instanceof p.GraphicalContinuousDynamicExpression)this.drawContinuousDynamic(i);else if(i instanceof g.GraphicalUnknownExpression){const e=i.Label;e.SVGNode=this.drawLabel(e,c.GraphicalLayers.Notes)}else f.default.warn("Unkown type of expression!")}drawInstantaneousDynamic(e){const t=e.Label;t.SVGNode=this.drawLabel(t,c.GraphicalLayers.Notes)}drawContinuousDynamic(e){if(e.IsVerbal){const t=e.Label;t.SVGNode=this.drawLabel(t,c.GraphicalLayers.Notes)}else for(const i of e.Lines){var t;const n=new a.PointF2D(e.ParentStaffLine.PositionAndShape.AbsolutePosition.x+i.Start.x,e.ParentStaffLine.PositionAndShape.AbsolutePosition.y+i.Start.y),s=new a.PointF2D(e.ParentStaffLine.PositionAndShape.AbsolutePosition.x+i.End.x,e.ParentStaffLine.PositionAndShape.AbsolutePosition.y+i.End.y);i.SVGElement=this.drawLine(n,s,null!==(t=i.colorHex)&&void 0!==t?t:"#000000",i.Width)}}renderLabel(e,i,n,s,r,o){if(!e.Label.print)return;const l=e.Label.fontHeight*t.unitInPixels,{font:c}=e.Label;let h;this.rules.ColoringEnabled&&(h=e.Label.colorDefault,e.ColorXML&&(h=e.ColorXML),h||(h=this.rules.DefaultColorLabel));let u,{fontStyle:d,fontFamily:f}=e.Label;d||(d=this.rules.DefaultFontStyle),f||(f=this.rules.DefaultFontFamily);for(let t=0;t<(null===(p=e.TextLines)||void 0===p?void 0:p.length);t++){var p;const i=e.TextLines[t],n=this.calculatePixelDistance(i.xOffset),s=new a.PointF2D(o.x+n,o.y),f=this.backend.renderText(l,d,c,i.text,r,s,h,e.Label.fontFamily);u?u.appendChild(f):u=f,o.y=o.y+r,e.TextLines.length>1&&(o.y+=this.rules.SpacingBetweenTextLines)}return u}renderRectangle(e,t,i,n,s){return this.backend.renderRectangle(e,i,n,s)}applyScreenTransformation(e){return new a.PointF2D(e.x*t.unitInPixels,e.y*t.unitInPixels)}applyScreenTransformationForRect(e){return new o.RectangleF2D(e.x*t.unitInPixels,e.y*t.unitInPixels,e.width*t.unitInPixels,e.height*t.unitInPixels)}}t.VexFlowMusicSheetDrawer=v},9490:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractGraphicalExpression=void 0;const n=i(7741),s=i(6438);class r extends n.GraphicalObject{constructor(e,t,i){super(),this.expression=t,this.parentMeasure=i,this.boundingBox=new s.BoundingBox(this,e.PositionAndShape),this.parentStaffLine=e,this.parentStaffLine.AbstractExpressions.push(this),this.rules=e.ParentMusicSystem.rules}get Label(){return this.label}get ParentStaffLine(){return this.parentStaffLine}get SourceExpression(){return this.expression}get Placement(){return this.expression.Placement}}t.AbstractGraphicalExpression=r},9536:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChordSymbolReader=void 0;const s=i(9719),r=i(8233),o=i(9767),a=n(i(3065)),l=i(6362);class c{static readChordSymbol(e,t,i){const n=e.element("root"),h=e.element("kind"),u=e.element("numeral"),d=h.attribute("text");if(!n&&!u)return;let f;const p=e.element("bass");if(p){const i=p.element("bass-step"),n=p.element("bass-alter");let s=r.NoteEnum.C;if(i)try{s=r.NoteEnum[i.value.trim()]}catch(e){const i=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return t.SheetErrors.pushMeasureError(i),void a.default.debug("InstrumentReader.readChordSymbol",i,e)}let l=r.AccidentalEnum.NONE;if(n)try{l=r.Pitch.AccidentalFromHalfTones(parseInt(n.value,10))}catch(e){const i=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");t.SheetErrors.pushMeasureError(i),a.default.debug("InstrumentReader.readChordSymbol",i,e)}f=new r.Pitch(s,1,l)}const m=[],g=e.elements("degree");for(const l of g)if(l){const i=l.element("degree-value"),n=l.element("degree-alter"),c=l.element("degree-type");if(!i||!n||!c)return;let h,u,d;try{h=parseInt(i.value.trim(),10)}catch(e){const i=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return t.SheetErrors.pushMeasureError(i),void a.default.debug("InstrumentReader.readChordSymbol",i,e)}try{u=r.Pitch.AccidentalFromHalfTones(parseInt(n.value,10))}catch(e){const i=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return t.SheetErrors.pushMeasureError(i),void a.default.debug("InstrumentReader.readChordSymbol",i,e)}try{d=s.ChordDegreeText[c.value.trim().toLowerCase()]}catch(e){const i=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return t.SheetErrors.pushMeasureError(i),void a.default.debug("InstrumentReader.readChordSymbol",i,e)}m.push(new s.Degree(h,u,d))}let b=c.readPlacement(e);if(b!==l.PlacementEnum.Below&&(b=l.PlacementEnum.Above),u){var v;const e=u.element("numeral-root"),i=null===e||void 0===e||null===(v=e.attribute("text"))||void 0===v?void 0:v.value,n=null!==i&&void 0!==i?i:null===e||void 0===e?void 0:e.value,r=new s.ChordSymbolContainer(void 0,s.ChordSymbolEnum.none,f,m,t.Rules,b);return r.NumeralText=n,r}const y=n.element("root-step"),x=n.element("root-alter");if(n&&!y)return;let S;try{S=r.NoteEnum[y.value.trim()]}catch(e){const i=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return t.SheetErrors.pushMeasureError(i),void a.default.debug("InstrumentReader.readChordSymbol",i,e)}let E=r.AccidentalEnum.NONE;if(x)try{E=r.Pitch.AccidentalFromHalfTones(parseInt(x.value,10))}catch(e){const i=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");t.SheetErrors.pushMeasureError(i),a.default.debug("InstrumentReader.readChordSymbol",i,e)}const w=new r.Pitch(S,1,E);let T,_=h.value.trim().replace("-","");if(d)switch(d.value){case"aug":_="augmented";break;case"dim":_="diminished"}try{T=s.ChordSymbolEnum[_]}catch(e){const i=o.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return t.SheetErrors.pushMeasureError(i),void a.default.debug("InstrumentReader.readChordSymbol",i,e)}return new s.ChordSymbolContainer(w,T,f,m,t.Rules,b)}static readPlacement(e){var t;const i=null===(t=e.attribute("placement"))||void 0===t?void 0:t.value;return"above"===i?l.PlacementEnum.Above:"below"===i?l.PlacementEnum.Below:l.PlacementEnum.NotYetDefined}}t.ChordSymbolReader=c},9635:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowGraphicalNote=void 0;const n=i(3430),s=i(6014),r=i(437),o=i(3849);class a extends n.GraphicalNote{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.OctaveEnum.NONE;if(super(e,t,arguments.length>4?arguments[4]:void 0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0),this.clef=i,this.octaveShift=n,e.Pitch){const t=e.isRest()?e.Pitch:r.OctaveShift.getPitchFromOctaveShift(e.Pitch,n);this.vfpitch=s.VexFlowConverter.pitch(t,e.isRest(),this.clef,this.sourceNote.Notehead),this.vfpitch[1]=void 0}}setAccidental(e){const t=this.drawPitch(e);this.vfpitch=s.VexFlowConverter.pitch(t,this.sourceNote.isRest(),this.clef,this.sourceNote.Notehead),this.DrawnAccidental=t.Accidental}drawPitch(e){return r.OctaveShift.getPitchFromOctaveShift(e,this.octaveShift)}Transpose(e,t,i,n){const o=super.Transpose(e,t,i,n),a=r.OctaveShift.getPitchFromOctaveShift(o,this.octaveShift);return this.vfpitch=s.VexFlowConverter.pitch(a,this.sourceNote.isRest(),this.clef,this.sourceNote.Notehead),this.vfpitch[1]=void 0,a}setIndex(e,t){this.vfnote=[e,t],this.vfnoteIndex=t}notehead(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e||(e=this.vfnote[0]);const t=e.note_heads;return t&&t.length>this.vfnoteIndex&&t[this.vfnoteIndex]?e.note_heads[this.vfnoteIndex]:{line:0}}Clef(){return this.clef}getSVGId(){if(this.vfnote)return this.vfnote[0].getAttribute("id")}setVisible(e){var t,i,n,s,r,o,a,l;let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const h=null===(t=c.applyToBeams)||void 0===t||t,u=null===(i=c.applyToLedgerLines)||void 0===i||i,d=null===(n=c.applyToNotehead)||void 0===n||n,f=null===(s=c.applyToSlurs)||void 0===s||s,p=null===(r=c.applyToStem)||void 0===r||r,m=null===(o=c.applyToTies)||void 0===o||o,g="visibility",b=e?"visible":"hidden";if(d&&null!==(a=this.getSVGGElement())&&void 0!==a&&a.setAttribute(g,b),p&&null!==(l=this.getStemSVG())&&void 0!==l&&l.setAttribute(g,b),h)for(const v of this.getBeamSVGs())null===v||void 0===v||v.setAttribute(g,b);if(u)for(const v of this.getLedgerLineSVGs())null===v||void 0===v||v.setAttribute(g,b);if(m)for(const v of this.getTieSVGs())null===v||void 0===v||v.setAttribute(g,b);if(f)for(const v of this.getSlurSVGs())null===v||void 0===v||v.setAttribute(g,b)}getSVGGElement(){if(this.vfnote)return this.vfnote[0].getAttribute("el")}getStemSVG(){const e=document.getElementById("vf-"+this.getSVGId()+"-stem");return(null===e||void 0===e?void 0:e.children.length)>0?e.children[0]:e}getBeamSVGs(){const e=[];for(let t=0;;t++){const i=document.getElementById("vf-".concat(this.getSVGId(),"-beam").concat(t));if(!i)break;e.push(i)}return e}getLedgerLineSVGs(){const e=[],t="vf-".concat(this.getSVGId(),"ledgers"),i=document.getElementById(t);if(!i)return[];for(const n of i.childNodes)e.push(n);return e}getTieSVGs(){const e=[],t=document.querySelectorAll("[id='vf-".concat(this.getSVGId(),"-tie']"));for(const i of t)e.push(i);return e}getSlurSVGs(){const e=[],t=document.querySelectorAll("[id='vf-".concat(this.getSVGId(),"-slur']"));for(const i of t)e.push(i);return e}getNoteheadSVGs(){var e;const t=this.getVFNoteSVG(),i=[];if(null!==t&&void 0!==t&&null!==(e=t.children)&&void 0!==e&&e.length)for(const n of t.children)n.classList.contains("vf-notehead")&&i.push(n);return i}getFlagSVG(){var e;const t=this.getVFNoteSVG();if(null!==t&&void 0!==t&&null!==(e=t.children)&&void 0!==e&&e.length)for(const i of t.children)if(i.classList.contains("vf-flag"))return i}getVFNoteSVG(){if(this.parentVoiceEntry.parentStaffEntry.parentMeasure.isMultiRestMeasure())return this.parentVoiceEntry.parentStaffEntry.parentMeasure.multiRestElement;const e=this.getSVGGElement();for(const t of null===e||void 0===e?void 0:e.children)if(t.classList.contains("vf-note"))return t}getModifierSVGs(){var e;const t=this.getSVGGElement(),i=[];if(null!==t&&void 0!==t&&null!==(e=t.children)&&void 0!==e&&e.length)for(const n of null===t||void 0===t?void 0:t.children)n.classList.contains("vf-modifiers")&&i.push(n);return i}setColor(e){var t,i,n,s,r,a,l,c,h,u,d,f;let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const m=null!==(t=p.applyToBeams)&&void 0!==t&&t,g=null===(i=p.applyToFlag)||void 0===i||i,b=null!==(n=p.applyToLedgerLines)&&void 0!==n&&n,v=null!==(s=p.applyToLyrics)&&void 0!==s&&s,y=null===(r=p.applyToModifiers)||void 0===r||r,x=null===(a=p.applyToNoteheads)||void 0===a||a,S=null!==(l=p.applyToSlurs)&&void 0!==l&&l,E=null===(c=p.applyToStem)||void 0===c||c,w=null!==(h=p.applyToTies)&&void 0!==h&&h,T=null===(u=p.applyToMultiRestMeasure)||void 0===u||u,_=null===(d=p.applyToMultiRestMeasureNumber)||void 0===d||d,M=null===(f=p.applyToMultiRestMeasureRestBar)||void 0===f||f;if(m){const t=this.getBeamSVGs();for(const i of t)for(const t of i.children)t.setAttribute("fill",e)}if(g){const t=this.getFlagSVG();if(t)for(const i of t.children)i.setAttribute("fill",e)}if(b){const t=this.getLedgerLineSVGs();for(const i of t)i.setAttribute("stroke",e)}if(v){const t=this.getLyricsSVGs();for(const i of t)for(const t of i.children)t.setAttribute("stroke",e),t.setAttribute("fill",e)}if(T&&this.parentVoiceEntry.parentStaffEntry.parentMeasure instanceof o.VexFlowMultiRestMeasure){var P;const t=this.parentVoiceEntry.parentStaffEntry.parentMeasure.multiRestElementSVG;if(null!==t&&void 0!==t&&null!==(P=t.children)&&void 0!==P&&P.length)for(const i of t.children){var C;if(null!==(C=i.children)&&void 0!==C&&C.length){if(_)for(const t of i.children)t.setAttribute("fill",e)}else M&&i.setAttribute("fill",e)}}if(y){const t=this.getModifierSVGs();for(const i of t)for(const t of i.children)t.setAttribute("fill",e)}if(x){const t=this.getNoteheadSVGs();for(const i of t)for(const t of i.children)t.setAttribute("fill",e)}if(S){const t=this.getSlurSVGs();for(const i of t)for(const t of i.children)t.setAttribute("fill",e)}if(E){const t=this.getStemSVG();t&&t.setAttribute("stroke",e)}if(w){const t=this.getTieSVGs();for(const i of t)for(const t of i.children)t.setAttribute("fill",e)}}}t.VexFlowGraphicalNote=a},9647:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabNote=void 0;const n=i(1850);class s extends n.Note{constructor(e,t,i,n,s,r,o,a,l){super(e,t,i,n,s),this.stringNumberTab=r,this.fretNumber=o,this.bendArray=a,this.vibratoStroke=l}get StringNumberTab(){return this.stringNumberTab}get FretNumber(){return this.fretNumber}get BendArray(){return this.bendArray}get VibratoStroke(){return this.vibratoStroke}hasTabEffects(){var e;return(null===(e=this.bendArray)||void 0===e?void 0:e.length)>0||this.vibratoStroke}}t.TabNote=s},9713:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PageFormat=t.EngravingRules=void 0;const s=i(1888),r=n(i(3065)),o=i(7533),a=i(6362),l=i(624),c=i(4434),h=i(3263),u=i(2257),d=i(8233),f=i(9719),p=i(3430);class m{constructor(){this.NoteDistances=[1,1,1.3,1.6,2,2.5,3,4],this.NoteDistancesScalingFactors=[1,2,4,8,16,32,64,128],this.DurationDistanceDict={},this.DurationScalingDistanceDict={},this.NoteToGraphicalNoteMapObjectCount=0,this.RenderCount=0,this.loadDefaultValues()}loadDefaultValues(){this.SamplingUnit=3*m.unit,this.SheetTitleHeight=4,this.SheetSubtitleHeight=2,this.SheetMinimumDistanceBetweenTitleAndSubtitle=1,this.SheetComposerHeight=2,this.SheetAuthorHeight=2,this.SheetCopyrightHeight=1.5,this.SheetCopyrightMargin=2,this.SheetComposerSubtitleUseLegacyParsing=!1,this.CompactMode=!1,this.PagePlacementEnum=s.PagePlacementEnum.Down,this.PageHeight=100001,this.PageTopMargin=5,this.PageTopMarginNarrow=0,this.PageBottomMargin=5,this.PageLeftMargin=5,this.PageRightMargin=5,this.TitleTopDistance=5,this.TitleBottomDistance=1,this.StaffDistance=7,this.BetweenStaffDistance=5,this.MinimumStaffLineDistance=4,this.MinSkyBottomDistBetweenStaves=1,this.StaffHeight=4,this.TabStaffInterlineHeight=1.1111,this.TabStaffInterlineHeightForBboxes=1.3,this.BetweenStaffLinesDistance=m.unit,this.SystemLeftMargin=0,this.SystemRightMargin=0,this.SystemLabelsRightMargin=2,this.SystemComposerDistance=2,this.SystemLyricistDistance=2,this.InstrumentLabelTextHeight=2,this.MinimumDistanceBetweenSystems=7,this.MinSkyBottomDistBetweenSystems=5,this.LastSystemMaxScalingFactor=1.4,this.AutoBeamNotes=!1,this.AutoBeamOptions={beam_middle_rests_only:!1,beam_rests:!1,maintain_stem_directions:!1},this.AutoBeamTabs=!1,this.BeamWidth=m.unit/2,this.BeamSpaceWidth=m.unit/3,this.BeamForwardLength=1.25*m.unit,this.FlatBeams=!1,this.FlatBeamOffset=20,this.FlatBeamOffsetPerBeam=10,this.ClefLeftMargin=.5,this.ClefRightMargin=.75,this.PercussionOneLineCutoff=3,this.PercussionForceVoicesOneLineCutoff=1,this.PercussionUseXMLDisplayStep=!0,this.PercussionXMLDisplayStepNoteValueShift=0,this.PercussionOneLineXMLDisplayStepOctaveOffset=0,this.PercussionUseCajon2NoteSystem=!1,this.BetweenKeySymbolsDistance=.2,this.KeyRightMargin=.75,this.RhythmRightMargin=1.25,this.ShowRhythmAgainAfterPartEndOrFinalBarline=!0,this.NewPartAndSystemAfterFinalBarline=!1,this.InStaffClefScalingFactor=.8,this.DistanceBetweenNaturalAndSymbolWhenCancelling=.4,this.NoteHelperLinesOffset=.25,this.MeasureLeftMargin=.7,this.MeasureRightMargin=0,this.DistanceBetweenLastInstructionAndRepetitionBarline=1,this.ArpeggioDistance=.6,this.StaccatoShorteningFactor=2,this.IdealStemLength=3,this.StemNoteHeadBorderYOffset=.2,this.StemMargin=.2,this.StemMinLength=2.5,this.StemMaxLength=4.5,this.BeamSlopeMaxAngle=10,this.StemMinAllowedDistanceBetweenNoteHeadAndBeamLine=1,this.SetWantedStemDirectionByXml=!0,this.GraceNoteScalingFactor=.6,this.GraceNoteXOffset=.2,this.GraceNoteGroupXMargin=0,this.WedgeOpeningLength=1.2,this.WedgeMeasureEndOpeningLength=.75,this.WedgeMeasureBeginOpeningLength=.75,this.WedgePlacementAboveY=-1.5,this.WedgePlacementBelowY=1.5,this.WedgeHorizontalMargin=.6,this.WedgeVerticalMargin=.5,this.DistanceOffsetBetweenTwoHorizontallyCrossedWedges=.3,this.WedgeMinLength=2,this.WedgeEndDistanceBetweenTimestampsFactor=1.75,this.ArticulationAboveNoteForStemUp=!1,this.SoftAccentWedgePadding=.4,this.SoftAccentSizeFactor=.6,this.DistanceBetweenAdjacentDynamics=.75,this.TempoChangeMeasureValidity=4,this.TempoContinousFactor=.7,this.StaccatoScalingFactor=.8,this.BetweenDotsDistance=.8,this.OrnamentAccidentalScalingFactor=.65,this.ChordSymbolTextHeight=2,this.ChordSymbolTextAlignmentTop=o.TextAlignmentEnum.LeftBottom,this.ChordSymbolTextAlignmentBottom=o.TextAlignmentEnum.LeftTop,this.ChordSymbolBottomMargin=.6,this.ChordSymbolRelativeXOffset=-1,this.ChordSymbolExtraXShiftForShortChordSymbols=.3,this.ChordSymbolExtraXShiftWidthThreshold=2,this.ChordSymbolXSpacing=1,this.ChordOverlapAllowedIntoNextMeasure=0,this.ChordSymbolYOffset=.1,this.ChordSymbolYPadding=0,this.ChordSymbolYAlignment=!0,this.ChordSymbolYAlignmentScope="staffline",this.ChordSymbolWholeMeasureRestXOffset=0,this.ChordSymbolWholeMeasureRestXOffsetMeasure1=-2,this.ChordAccidentalTexts=new h.Dictionary,this.resetChordAccidentalTexts(this.ChordAccidentalTexts,!1),this.ChordSymbolLabelTexts=new h.Dictionary,this.resetChordSymbolLabelTexts(this.ChordSymbolLabelTexts),this.CustomChords=[],this.resetChordNames(),this.RepetitionSymbolsYOffset=0,this.RepetitionEndInstructionXShiftAsPercentOfStaveWidth=.4,this.RehearsalMarkXOffsetDefault=10,this.RehearsalMarkXOffset=0,this.RehearsalMarkXOffsetSystemStartMeasure=-20,this.RehearsalMarkYOffsetDefault=-15,this.RehearsalMarkYOffsetAddedForRehearsalMarks=-12,this.RehearsalMarkYOffset=0,this.RehearsalMarkFontSize=10,this.MeasureNumberLabelHeight=1.5*m.unit,this.MeasureNumberLabelOffset=2,this.MeasureNumberLabelXOffset=-.5,this.TupletsRatioed=!1,this.TupletsRatioedUseXMLValue=!0,this.TupletsBracketed=!1,this.TripletsBracketed=!1,this.TupletsBracketedUseXMLValue=!0,this.TupletNumberLabelHeight=1.5*m.unit,this.TupletNumberYOffset=.5,this.TupletNumberLimitConsecutiveRepetitions=!0,this.TupletNumberMaxConsecutiveRepetitions=2,this.TupletNumberAlwaysDisableAfterFirstMax=!0,this.TupletNumberUseShowNoneXMLValue=!0,this.LabelMarginBorderFactor=.1,this.TupletVerticalLineLength=.5,this.TupletNumbersInTabs=!0,this.TabTupletYOffsetBottom=1,this.TabTupletYOffsetTop=-3.5,this.TabTupletYOffsetEffects=1.5,this.TabTupletsBracketed=!0,this.TabBeamsRendered=!0,this.TabKeySignatureRendered=!1,this.TabKeySignatureSpacingAdded=!0,this.TabTimeSignatureRendered=!1,this.TabTimeSignatureSpacingAdded=!0,this.TabFingeringsRendered=!1,this.TabUseXNoteheadShapeForTabNote=!0,this.TabUseXNoteheadAlternativeGlyph=!0,this.TabXNoteheadScale=.9,this.SlurPlacementFromXML=!0,this.SlurPlacementAtStems=!1,this.SlurPlacementUseSkyBottomLine=!1,this.BezierCurveStepSize=1e3,this.calculateCurveParametersArrays(),this.TieGhostObjectWidth=.75,this.TieYPositionOffsetFactor=.3,this.MinimumNeededXspaceForTieGhostObject=1,this.TieHeightMinimum=.28,this.TieHeightMaximum=1.2,this.TieHeightInterpolationK=.0288,this.TieHeightInterpolationD=.136,this.SlurNoteHeadYOffset=.5,this.SlurEndArticulationYOffset=.8,this.SlurStartArticulationYOffsetOfArticulation=.5,this.SlurStemXOffset=.3,this.SlurSlopeMaxAngle=15,this.SlurTangentMinAngle=30,this.SlurTangentMaxAngle=80,this.SlurHeightFactor=1,this.SlurHeightFlattenLongSlursFactorByWidth=.24,this.SlurHeightFlattenLongSlursFactorByAngle=.36,this.SlurHeightFlattenLongSlursCutoffAngle=47,this.SlurHeightFlattenLongSlursCutoffWidth=16,this.SlursStartingAtSameStaffEntryYOffset=.8,this.SlurMaximumYControlPointDistance=void 0,this.GlissandoNoteOffset=.5,this.GlissandoStafflineStartMinimumWidth=1,this.GlissandoStafflineStartYDistanceToNote=.8,this.GlissandoStafflineEndOffset=1,this.GlissandoDefaultWidth=.1,this.RepetitionAllowFirstMeasureBeginningRepeatBarline=!0,this.RepetitionEndingLabelHeight=2,this.RepetitionEndingLabelXOffset=.5,this.RepetitionEndingLabelYOffset=.3,this.RepetitionEndingLineYLowerOffset=.5,this.RepetitionEndingLineYUpperOffset=.3,this.VoltaOffset=2.5,this.LyricsAlignmentStandard=o.TextAlignmentEnum.LeftBottom,this.LyricsHeight=2,this.LyricsYOffsetToStaffHeight=0,this.LyricsYMarginToBottomLine=.2,this.LyricsExtraXShiftForShortLyrics=.5,this.LyricsExtraXShiftForShortLyricsWidthThreshold=1.4,this.LyricsUseXPaddingForLongLyrics=!0,this.LyricsXPaddingFactorForLongLyrics=1,this.LyricsXPaddingWidthThreshold=1.7,this.LyricsXPaddingReductionForLongNotes=.7,this.LyricsXPaddingReductionForLastNoteInMeasure=1.2,this.LyricsXPaddingForLastNoteInMeasure=!0,this.VerticalBetweenLyricsDistance=.5,this.HorizontalBetweenLyricsDistance=.2,this.BetweenSyllableMaximumDistance=10,this.BetweenSyllableMinimumDistance=.5,this.LyricOverlapAllowedIntoNextMeasure=3.4,this.MinimumDistanceBetweenDashes=10,this.MaximumLyricsElongationFactor=2.5,this.TempoYSpacing=.5,this.InstantaneousTempoTextHeight=2.3,this.ContinuousDynamicTextHeight=2.3,this.UseEndOffsetForExpressions=!0,this.MoodTextHeight=2.3,this.UnknownTextHeight=2,this.ContinuousTempoTextHeight=2.3,this.DynamicExpressionMaxDistance=2,this.DynamicExpressionSpacer=.5,this.IgnoreRepeatedDynamics=!1,this.ExpressionsUseXMLColor=!0,this.VexFlowDefaultNotationFontScale=39,this.VexFlowDefaultTabFontScale=39,this.TremoloStrokeScale=1,this.TremoloYSpacingScale=1,this.TremoloBuzzRollThickness=.25,this.StemWidth=.15,this.StaffLineWidth=.1,this.StaffLineColor=void 0,this.LedgerLineWidth=1,this.LedgerLineStrokeStyle=void 0,this.LedgerLineColorDefault="#000000",this.WedgeLineWidth=.12,this.TupletLineWidth=.12,this.LyricUnderscoreLineWidth=.12,this.SystemThinLineWidth=.12,this.SystemBoldLineWidth=m.unit/2,this.SystemRepetitionEndingLineWidth=.12,this.SystemDotWidth=m.unit/2,this.DistanceBetweenVerticalSystemLines=.35,this.DistanceBetweenDotAndLine=.7,this.RepeatEndStartPadding=2,this.OctaveShiftLineWidth=.12,this.OctaveShiftVerticalLineLength=m.unit,this.OctaveShiftOnWholeMeasureNoteUntilEndOfMeasure=!1,this.GraceLineWidth=this.StaffLineWidth*this.GraceNoteScalingFactor,this.MultipleRestMeasureDefaultWidth=4,this.MultipleRestMeasureAddKeySignature=!0,this.FixedMeasureWidth=!1,this.FixedMeasureWidthFixedValue=void 0,this.FixedMeasureWidthUseForPickupMeasures=!1,this.MinimumCrossedBeamDifferenceMargin=1e-4,this.SheetMaximumWidth=32767,this.VoiceSpacingMultiplierVexflow=.85,this.VoiceSpacingAddendVexflow=3,this.PickupMeasureWidthMultiplier=1,this.PickupMeasureRepetitionSpacing=.8,this.PickupMeasureSpacingSingleNoteAddend=1.6,this.DisplacedNoteMargin=.1,this.MinNoteDistance=2,this.SubMeasureXSpacingThreshold=35,this.MeasureDynamicsMaxScalingFactor=2.5,this.WholeRestXShiftVexflow=-1.5,this.MetronomeMarksDrawn=!0,this.MetronomeMarkXShift=-6,this.MetronomeMarkYShift=-1,this.SoftmaxFactorVexFlow=15,this.StaggerSameWholeNotes=!0,this.AlignRests=l.AlignRestOption.Never,this.RestCollisionYPadding=0,this.FillEmptyMeasuresWithWholeRest=l.FillEmptyMeasuresWithWholeRests.No,this.ArpeggiosGoAcrossVoices=!1,this.RenderArpeggios=!0,this.RenderSlurs=!0,this.RenderGlissandi=!0,this.ColoringMode=c.ColoringModes.XML,this.ColoringEnabled=!0,this.ColorStemsLikeNoteheads=!1,this.ColorBeams=!0,this.ColorFlags=!0,this.applyDefaultColorMusic("#000000"),this.DefaultColorCursor="#33e02f",this.DefaultFontFamily="Times New Roman",this.DefaultFontStyle=u.FontStyles.Regular,this.DefaultVexFlowNoteFont="gonville",this.MaxMeasureToDrawIndex=Number.MAX_VALUE,this.MaxMeasureToDrawNumber=Number.MAX_VALUE,this.MinMeasureToDrawIndex=0,this.MinMeasureToDrawNumber=0,this.MaxSystemToDrawNumber=Number.MAX_VALUE,this.MaxPageToDrawNumber=Number.MAX_VALUE,this.RenderComposer=!0,this.RenderTitle=!0,this.RenderSubtitle=!0,this.RenderLyricist=!0,this.RenderCopyright=!1,this.RenderPartNames=!0,this.RenderPartAbbreviations=!0,this.RenderSystemLabelsAfterFirstPage=!0,this.RenderFingerings=!0,this.RenderMeasureNumbers=!0,this.RenderMeasureNumbersOnlyAtSystemStart=!1,this.UseXMLMeasureNumbers=!0,this.RenderLyrics=!0,this.RenderChordSymbols=!0,this.RenderMultipleRestMeasures=!0,this.AutoGenerateMultipleRestMeasuresFromRestMeasures=!0,this.RenderRehearsalMarks=!0,this.RenderClefsAtBeginningOfStaffline=!0,this.RenderKeySignatures=!0,this.RenderTimeSignatures=!0,this.RenderFirstTempoExpression=!0,this.RenderPedals=!0,this.ArticulationPlacementFromXML=!0,this.BreathMarkDistance=.8,this.FingeringPosition=a.PlacementEnum.AboveOrBelow,this.FingeringPositionFromXML=!0,this.FingeringPositionGrace=a.PlacementEnum.Left,this.FingeringInsideStafflines=!1,this.FingeringLabelFontHeight=1.7,this.FingeringOffsetX=0,this.FingeringOffsetY=0,this.FingeringPaddingY=-.2,this.FingeringTextSize=1.5,this.RenderStringNumbersClassical=!0,this.StringNumberOffsetY=0,this.NewSystemAtXMLNewSystemAttribute=!1,this.NewPageAtXMLNewPageAttribute=!1,this.NewSystemAtXMLNewPageAttribute=!1,this.RenderXMeasuresPerLineAkaSystem=0,this.RestoreCursorAfterRerender=!0,this.StretchLastSystemLine=!1,this.IgnoreBracketsWords=!0,this.PlaceWordsInsideStafflineFromXml=!1,this.PlaceWordsInsideStafflineYOffset=.9,this.PageFormat=g.UndefinedPageFormat,this.PageBackgroundColor=void 0,this.DarkModeEnabled=!1,this.UsePageBackgroundColorForTabNotes=!0,this.RenderSingleHorizontalStaffline=!1,this.SpacingBetweenTextLines=0,this.NoteToGraphicalNoteMap=new h.Dictionary,this.NoteToGraphicalNoteMapObjectCount=0,this.SkyBottomLineBatchMinMeasures=5,this.SkyBottomLineWebGLMinMeasures=80,this.AlwaysSetPreferredSkyBottomLineBackendAutomatically=!0,this.DisableWebGLInFirefox=!0,this.DisableWebGLInSafariAndIOS=!0,this.setPreferredSkyBottomLineBackendAutomatically();try{this.MaxInstructionsConstValue=this.ClefLeftMargin+this.ClefRightMargin+this.KeyRightMargin+this.RhythmRightMargin+11}catch(e){r.default.info("EngravingRules()",e)}}setPreferredSkyBottomLineBackendAutomatically(){var e,t,i,n;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r="",o="";"object"==typeof globalThis&&(r=null!==(e=null===(t=globalThis.navigator)||void 0===t?void 0:t.vendor)&&void 0!==e?e:"",o=null!==(i=null===(n=globalThis.navigator)||void 0===n?void 0:n.userAgent)&&void 0!==i?i:"");let a=!1;(this.DisableWebGLInSafariAndIOS&&/apple/i.test(r)||this.DisableWebGLInFirefox&&o.includes("Firefox"))&&(a=!0),this.PreferredSkyBottomLineBatchCalculatorBackend=l.SkyBottomLineBatchCalculatorBackendType.Plain,a||s>=this.SkyBottomLineWebGLMinMeasures&&(this.PreferredSkyBottomLineBatchCalculatorBackend=l.SkyBottomLineBatchCalculatorBackendType.WebGL)}applyDefaultColorMusic(e){this.DefaultColorMusic=e,this.DefaultColorNotehead=e,this.DefaultColorRest=e,this.DefaultColorStem=e,this.DefaultColorLabel=e,this.DefaultColorLyrics=e,this.DefaultColorTitle=e,this.LedgerLineColorDefault=e}addGraphicalNoteToNoteMap(e,t){e.NoteToGraphicalNoteObjectId=this.NoteToGraphicalNoteMapObjectCount,this.NoteToGraphicalNoteMap.setValue(e.NoteToGraphicalNoteObjectId,t),this.NoteToGraphicalNoteMapObjectCount++}GNote(e){return p.GraphicalNote.FromNote(e,this)}clearMusicSheetObjects(){this.NoteToGraphicalNoteMap=new h.Dictionary,this.NoteToGraphicalNoteMapObjectCount=0}resetChordAccidentalTexts(e,t){e.setValue(d.AccidentalEnum.SHARP,t?"\u266f":"#"),e.setValue(d.AccidentalEnum.FLAT,t?"\u266d":"b"),e.setValue(d.AccidentalEnum.DOUBLEFLAT,t?"\ud834\udd2b":"bb"),e.setValue(d.AccidentalEnum.DOUBLESHARP,t?"\ud834\udd2a":"x")}setChordSymbolLabelText(e,t){this.ChordSymbolLabelTexts.setValue(e,t)}resetChordSymbolLabelTexts(e){return e.setValue(f.ChordSymbolEnum.minor,"m"),e.setValue(f.ChordSymbolEnum.augmented,"aug"),e.setValue(f.ChordSymbolEnum.diminished,"dim"),e.setValue(f.ChordSymbolEnum.dominant,"7"),e.setValue(f.ChordSymbolEnum.majorseventh,"maj7"),e.setValue(f.ChordSymbolEnum.minorseventh,"m7"),e.setValue(f.ChordSymbolEnum.diminishedseventh,"dim7"),e.setValue(f.ChordSymbolEnum.augmentedseventh,"aug7"),e.setValue(f.ChordSymbolEnum.halfdiminished,"m7".concat(this.ChordAccidentalTexts.getValue(d.AccidentalEnum.FLAT),"5")),e.setValue(f.ChordSymbolEnum.majorminor,"m(maj7)"),e.setValue(f.ChordSymbolEnum.majorsixth,"maj6"),e.setValue(f.ChordSymbolEnum.minorsixth,"m6"),e.setValue(f.ChordSymbolEnum.dominantninth,"9"),e.setValue(f.ChordSymbolEnum.majorninth,"maj9"),e.setValue(f.ChordSymbolEnum.minorninth,"m9"),e.setValue(f.ChordSymbolEnum.dominant11th,"11"),e.setValue(f.ChordSymbolEnum.major11th,"maj11"),e.setValue(f.ChordSymbolEnum.minor11th,"m11"),e.setValue(f.ChordSymbolEnum.dominant13th,"13"),e.setValue(f.ChordSymbolEnum.major13th,"maj13"),e.setValue(f.ChordSymbolEnum.minor13th,"m13"),e.setValue(f.ChordSymbolEnum.suspendedsecond,"sus2"),e.setValue(f.ChordSymbolEnum.suspendedfourth,"sus4"),e.setValue(f.ChordSymbolEnum.power,"5"),e.setValue(f.ChordSymbolEnum.none,"N.C."),e}addChordName(e,t,i,n,s){if(void 0!==f.ChordSymbolEnum[t]){const r={adds:i,alts:n,subs:s};this.CustomChords.push(f.CustomChord.createCustomChord(e,f.ChordSymbolEnum[t],r))}}renameChord(e,t){f.CustomChord.renameCustomChord(e,t,this.CustomChords)}resetChordNames(){const e=this.ChordAccidentalTexts.getValue(d.AccidentalEnum.SHARP),t=this.ChordAccidentalTexts.getValue(d.AccidentalEnum.FLAT);this.addChordName("alt","major",["".concat(e,"5"),"".concat(t,"9"),"".concat(e,"9")],["".concat(t,"5")],[]),this.addChordName("7alt","dominant",["".concat(e,"5"),"".concat(t,"9"),"".concat(e,"9")],["".concat(t,"5")],[]),this.addChordName("7sus4","dominant",["4"],[],["3"]),this.addChordName("7sus4","suspendedfourth",["7"],[],[]),this.addChordName("9sus4","dominantninth",["4"],[],["3"]),this.addChordName("9sus4","suspendedfourth",["9"],[],[]),this.addChordName("11sus4","dominant11th",["4"],[],["3"]),this.addChordName("11sus4","suspendedfourth",["11"],[],[]),this.addChordName("13sus4","dominant13th",["4"],[],["3"]),this.addChordName("13sus4","suspendedfourth",["13"],[],[]),this.addChordName("7sus2","dominant",["2"],[],["3"]),this.addChordName("7sus2","suspendedsecond",["7"],[],[]),this.addChordName("m7".concat(t,"5"),"minorseventh",[],["".concat(t,"5")],[]),this.addChordName("9sus2","dominantninth",["2"],[],["3"]),this.addChordName("9sus2","suspendedsecond",["9"],[],[]),this.addChordName("11sus2","dominant11th",["2"],[],["3"]),this.addChordName("11sus2","suspendedsecond",["11"],[],[]),this.addChordName("13sus2","dominant13th",["2"],[],["3"]),this.addChordName("13sus2","suspendedsecond",["13"],[],[]),this.addChordName("m(maj9)","majorminor",["9"],[],[]),this.addChordName("m(maj11)","majorminor",["11"],[],[]),this.addChordName("m(maj13)","majorminor",["13"],[],[]),this.addChordName("69","majorsixth",["9"],[],[]),this.addChordName("mi69","minorsixth",["9"],[],[])}calculateCurveParametersArrays(){this.TPower3=new Array(this.BezierCurveStepSize),this.OneMinusTPower3=new Array(this.BezierCurveStepSize),this.FactorOne=new Array(this.BezierCurveStepSize),this.FactorTwo=new Array(this.BezierCurveStepSize);for(let e=0;e<this.BezierCurveStepSize;e++){const t=e/this.BezierCurveStepSize;this.TPower3[e]=Math.pow(t,3),this.OneMinusTPower3[e]=Math.pow(1-t,3),this.FactorOne[e]=3*Math.pow(1-t,2)*t,this.FactorTwo[e]=3*(1-t)*Math.pow(t,2)}}}t.EngravingRules=m,m.unit=1;class g{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"noIdStringGiven";this.width=e,this.height=t,this.idString=i}get aspectRatio(){return this.IsUndefined?0:this.width/this.height}get IsUndefined(){return void 0===this.width||void 0===this.height||0===this.height||0===this.width}static get UndefinedPageFormat(){return new g(0,0)}Equals(e){return!!e&&e.width===this.width&&e.height===this.height}}t.PageFormat=g},9719:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChordSymbolEnum=t.ChordDegreeText=t.CustomChord=t.Degree=t.ChordSymbolContainer=void 0;const n=i(8233),s=i(7921),r=i(8233),o=i(6362);t.ChordSymbolContainer=class{constructor(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.PlacementEnum.Above;this.rootPitch=e,this.chordKind=t,this.bassPitch=i,this.degrees=n,this.rules=s,this.Placement=r}get RootPitch(){return this.rootPitch}get ChordKind(){return this.chordKind}get BassPitch(){return this.bassPitch}get ChordDegrees(){return this.degrees}static calculateChordText(e,t,i){if(void 0!==e.NumeralText)return e.NumeralText;let o=e.RootPitch;if(s.MusicSheetCalculator.transposeCalculator&&(o=s.MusicSheetCalculator.transposeCalculator.transposePitch(e.RootPitch,i,t)),e.ChordKind===c.none)return e.getTextFromChordKindEnum(e.ChordKind);let a=n.Pitch.getNoteEnumString(o.FundamentalNote);o.Accidental!==r.AccidentalEnum.NONE&&(a+=e.getTextForAccidental(o.Accidental));const h={adds:[],alts:[],subs:[]};for(const n of e.ChordDegrees)if(n){let t="";switch(n.alteration!==r.AccidentalEnum.NONE&&(t+=e.getTextForAccidental(n.alteration)),t+=n.value,n.text){case l.add:h.adds.push(t);break;case l.alter:h.alts.push(t);break;case l.subtract:h.subs.push(t)}}let u=e.getTextFromChordKindEnum(e.ChordKind);const d=["adds","alts","subs"],f=e.rules.CustomChords;for(const n of f){if(n.chordKind!==e.chordKind)continue;let t=!0;for(const e of d){for(const i of n.degrees[e]||[])if(h[e].indexOf(i)<0){t=!1;break}if(!t)break}if(t){for(const e of d)for(const t of n.degrees[e]||[])h[e].splice(h[e].indexOf(t),1);u=n.alternateName}}if(a+=u,h.adds.length>0&&(a+="("+h.adds.join(",")+")"),h.alts.length>0&&(a+="(alt "+h.alts.join(",")+")"),h.subs.length>0&&(a+="(omit "+h.subs.join(",")+")"),e.BassPitch){let r=e.BassPitch;s.MusicSheetCalculator.transposeCalculator&&(r=s.MusicSheetCalculator.transposeCalculator.transposePitch(e.BassPitch,i,t)),a+="/",a+=n.Pitch.getNoteEnumString(r.FundamentalNote),a+=e.getTextForAccidental(r.Accidental)}return a}getTextForAccidental(e){const t=this.rules.ChordAccidentalTexts.getValue(e);return void 0!==t?t:""}getTextFromChordKindEnum(e){var t;return null!==(t=this.rules.ChordSymbolLabelTexts.getValue(e))&&void 0!==t?t:""}},t.Degree=class{constructor(e,t,i){this.value=e,this.alteration=t,this.text=i}};class a{constructor(e,t,i){this.alternateName=e,this.chordKind=t,this.degrees=i}static createCustomChord(e,t,i){return new a(e,t,i)}static renameCustomChord(e,t,i){for(const n of i)n.alternateName===e&&(n.alternateName=t)}}var l,c;t.CustomChord=a,function(e){e[e.add=0]="add",e[e.alter=1]="alter",e[e.subtract=2]="subtract"}(l||(t.ChordDegreeText=l={})),function(e){e[e.major=0]="major",e[e.minor=1]="minor",e[e.augmented=2]="augmented",e[e.diminished=3]="diminished",e[e.dominant=4]="dominant",e[e.majorseventh=5]="majorseventh",e[e.minorseventh=6]="minorseventh",e[e.diminishedseventh=7]="diminishedseventh",e[e.augmentedseventh=8]="augmentedseventh",e[e.halfdiminished=9]="halfdiminished",e[e.majorminor=10]="majorminor",e[e.majorsixth=11]="majorsixth",e[e.minorsixth=12]="minorsixth",e[e.dominantninth=13]="dominantninth",e[e.majorninth=14]="majorninth",e[e.minorninth=15]="minorninth",e[e.dominant11th=16]="dominant11th",e[e.major11th=17]="major11th",e[e.minor11th=18]="minor11th",e[e.dominant13th=19]="dominant13th",e[e.major13th=20]="major13th",e[e.minor13th=21]="minor13th",e[e.suspendedsecond=22]="suspendedsecond",e[e.suspendedfourth=23]="suspendedfourth",e[e.Neapolitan=24]="Neapolitan",e[e.Italian=25]="Italian",e[e.French=26]="French",e[e.German=27]="German",e[e.pedal=28]="pedal",e[e.power=29]="power",e[e.Tristan=30]="Tristan",e[e.none=31]="none"}(c||(t.ChordSymbolEnum=c={}))},9735:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,s)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),s(i(2561),t),s(i(6904),t),s(i(8786),t),s(i(8705),t),s(i(8233),t),s(i(9409),t),s(i(200),t),s(i(6864),t)},9760:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalStaffEntryLink=void 0,t.GraphicalStaffEntryLink=class{constructor(e){this.graphicalLinkedStaffEntries=[],this.staffEntryLink=e,this.initialize()}get GetStaffEntryLink(){return this.staffEntryLink}get GraphicalLinkedStaffEntries(){return this.graphicalLinkedStaffEntries}set GraphicalLinkedStaffEntries(e){this.graphicalLinkedStaffEntries=e}isFilled(){for(let e=0;e<this.graphicalLinkedStaffEntries.length;e++)if(!this.graphicalLinkedStaffEntries[e])return!1;return!0}getLinkedStaffEntriesGraphicalNotes(e){if(-1!==this.graphicalLinkedStaffEntries.indexOf(e)){const e=[];for(let t=0,i=this.graphicalLinkedStaffEntries.length;t<i;++t){const i=this.graphicalLinkedStaffEntries[t];for(const t of i.graphicalVoiceEntries)for(const i of t.notes)i.sourceNote.ParentStaffEntry.Link&&i.sourceNote.ParentVoiceEntry===this.staffEntryLink.GetVoiceEntry&&e.push(i)}return e}}initialize(){for(let e=0,t=this.staffEntryLink.LinkStaffEntries.length;e<t;++e)this.graphicalLinkedStaffEntries.push(void 0)}}},9767:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITextTranslation=void 0,t.ITextTranslation=class{static translateText(e,t){if(!this.defaultTextTranslation)return t}}},9803:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MoodEnum=t.MoodExpression=void 0;const n=i(6362);class s extends n.AbstractExpression{constructor(e,t,i){super(t),this.label=e,this.staffNumber=i,this.setMoodType()}static isInputStringMood(e){return!!e&&(s.isStringInStringList(s.listMoodAffettuoso,e)||s.isStringInStringList(s.listMoodAgitato,e)||s.isStringInStringList(s.listMoodAnimato,e)||s.isStringInStringList(s.listMoodAppassionato,e)||s.isStringInStringList(s.listMoodBrillante,e)||s.isStringInStringList(s.listMoodCantabile,e)||s.isStringInStringList(s.listMoodDolce,e)||s.isStringInStringList(s.listMoodEnergico,e)||s.isStringInStringList(s.listMoodEroico,e)||s.isStringInStringList(s.listMoodEspressivo,e)||s.isStringInStringList(s.listMoodFurioso,e)||s.isStringInStringList(s.listMoodGiocoso,e)||s.isStringInStringList(s.listMoodGioioso,e)||s.isStringInStringList(s.listMoodGrandioso,e)||s.isStringInStringList(s.listMoodGrazioso,e)||s.isStringInStringList(s.listMoodLacrimoso,e)||s.isStringInStringList(s.listMoodLeggiero,e)||s.isStringInStringList(s.listMoodMaestoso,e)||s.isStringInStringList(s.listMoodMalinconico,e)||s.isStringInStringList(s.listMoodMarcato,e)||s.isStringInStringList(s.listMoodMarziale,e)||s.isStringInStringList(s.listMoodMesto,e)||s.isStringInStringList(s.listMoodMorendo,e)||s.isStringInStringList(s.listMoodNobilmente,e)||s.isStringInStringList(s.listMoodPatetico,e)||s.isStringInStringList(s.listMoodPesante,e)||s.isStringInStringList(s.listMoodSaltando,e)||s.isStringInStringList(s.listMoodSautille,e)||s.isStringInStringList(s.listMoodScherzando,e)||s.isStringInStringList(s.listMoodSostenuto,e)||s.isStringInStringList(s.listMoodSpiccato,e)||s.isStringInStringList(s.listMoodTenerezza,e)||s.isStringInStringList(s.listMoodTranquillamente,e)||s.isStringInStringList(s.listMoodTrionfante,e))}get Label(){return this.label}set Label(e){this.label=e}get Mood(){return this.moodType}set Mood(e){this.moodType=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get Placement(){return this.placement}set Placement(e){this.placement=e}setMoodType(){s.isStringInStringList(s.listMoodAffettuoso,this.label)?this.moodType=r.Affettuoso:s.isStringInStringList(s.listMoodAgitato,this.label)?this.moodType=r.Agitato:s.isStringInStringList(s.listMoodAnimato,this.label)?this.moodType=r.Animato:s.isStringInStringList(s.listMoodAppassionato,this.label)?this.moodType=r.Appassionato:s.isStringInStringList(s.listMoodBrillante,this.label)?this.moodType=r.Brillante:s.isStringInStringList(s.listMoodCantabile,this.label)?this.moodType=r.Cantabile:s.isStringInStringList(s.listMoodDolce,this.label)?this.moodType=r.Dolce:s.isStringInStringList(s.listMoodEnergico,this.label)?this.moodType=r.Energico:s.isStringInStringList(s.listMoodEroico,this.label)?this.moodType=r.Eroico:s.isStringInStringList(s.listMoodEspressivo,this.label)?this.moodType=r.Espressivo:s.isStringInStringList(s.listMoodFurioso,this.label)?this.moodType=r.Furioso:s.isStringInStringList(s.listMoodGiocoso,this.label)?this.moodType=r.Giocoso:s.isStringInStringList(s.listMoodGioioso,this.label)?this.moodType=r.Gioioso:s.isStringInStringList(s.listMoodGrandioso,this.label)?this.moodType=r.Grandioso:s.isStringInStringList(s.listMoodGrazioso,this.label)?this.moodType=r.Grazioso:s.isStringInStringList(s.listMoodLacrimoso,this.label)?this.moodType=r.Lacrimoso:s.isStringInStringList(s.listMoodLeggiero,this.label)?this.moodType=r.Leggiero:s.isStringInStringList(s.listMoodMaestoso,this.label)?this.moodType=r.Maestoso:s.isStringInStringList(s.listMoodMalinconico,this.label)?this.moodType=r.Malinconico:s.isStringInStringList(s.listMoodMarcato,this.label)?this.moodType=r.Marcato:s.isStringInStringList(s.listMoodMarziale,this.label)?this.moodType=r.Marziale:s.isStringInStringList(s.listMoodMesto,this.label)?this.moodType=r.Mesto:s.isStringInStringList(s.listMoodMorendo,this.label)?this.moodType=r.Morendo:s.isStringInStringList(s.listMoodNobilmente,this.label)?this.moodType=r.Nobilmente:s.isStringInStringList(s.listMoodPatetico,this.label)?this.moodType=r.Patetico:s.isStringInStringList(s.listMoodPesante,this.label)?this.moodType=r.Pesante:s.isStringInStringList(s.listMoodSaltando,this.label)?this.moodType=r.Saltando:s.isStringInStringList(s.listMoodSautille,this.label)?this.moodType=r.Sautille:s.isStringInStringList(s.listMoodScherzando,this.label)?this.moodType=r.Scherzando:s.isStringInStringList(s.listMoodSostenuto,this.label)?this.moodType=r.Sostenuto:s.isStringInStringList(s.listMoodSpiccato,this.label)?this.moodType=r.Spiccato:s.isStringInStringList(s.listMoodTenerezza,this.label)?this.moodType=r.Tenerezza:s.isStringInStringList(s.listMoodTranquillamente,this.label)?this.moodType=r.Tranquillamente:s.isStringInStringList(s.listMoodTrionfante,this.label)&&(this.moodType=r.Trionfante)}}var r;t.MoodExpression=s,s.listMoodAffettuoso=["affettuoso"],s.listMoodAgitato=["agitato"],s.listMoodAppassionato=["appassionato"],s.listMoodAnimato=["animato","lively"],s.listMoodBrillante=["brillante"],s.listMoodCantabile=["cantabile"],s.listMoodDolce=["dolce"],s.listMoodEnergico=["energico"],s.listMoodEroico=["eroico"],s.listMoodEspressivo=["espressivo"],s.listMoodFurioso=["furioso"],s.listMoodGiocoso=["giocoso"],s.listMoodGioioso=["gioioso"],s.listMoodLacrimoso=["lacrimoso"],s.listMoodGrandioso=["grandioso"],s.listMoodGrazioso=["grazioso"],s.listMoodLeggiero=["leggiero"],s.listMoodMaestoso=["maestoso"],s.listMoodMalinconico=["malinconico"],s.listMoodMarcato=["marcato"],s.listMoodMarziale=["marziale"],s.listMoodMesto=["mesto"],s.listMoodMorendo=["morendo"],s.listMoodNobilmente=["nobilmente"],s.listMoodPatetico=["patetico"],s.listMoodPesante=["pesante"],s.listMoodSautille=["sautille"],s.listMoodSaltando=["saltando"],s.listMoodScherzando=["scherzando"],s.listMoodSostenuto=["sostenuto"],s.listMoodSpiccato=["spiccato"],s.listMoodTenerezza=["tenerezza"],s.listMoodTranquillamente=["tranquillamente"],s.listMoodTrionfante=["trionfante"],function(e){e[e.Affettuoso=0]="Affettuoso",e[e.Agitato=1]="Agitato",e[e.Appassionato=2]="Appassionato",e[e.Animato=3]="Animato",e[e.Brillante=4]="Brillante",e[e.Cantabile=5]="Cantabile",e[e.Dolce=6]="Dolce",e[e.Energico=7]="Energico",e[e.Eroico=8]="Eroico",e[e.Espressivo=9]="Espressivo",e[e.Furioso=10]="Furioso",e[e.Giocoso=11]="Giocoso",e[e.Gioioso=12]="Gioioso",e[e.Lacrimoso=13]="Lacrimoso",e[e.Grandioso=14]="Grandioso",e[e.Grazioso=15]="Grazioso",e[e.Leggiero=16]="Leggiero",e[e.Maestoso=17]="Maestoso",e[e.Malinconico=18]="Malinconico",e[e.Marcato=19]="Marcato",e[e.Marziale=20]="Marziale",e[e.Mesto=21]="Mesto",e[e.Morendo=22]="Morendo",e[e.Nobilmente=23]="Nobilmente",e[e.Patetico=24]="Patetico",e[e.Pesante=25]="Pesante",e[e.Sautille=26]="Sautille",e[e.Saltando=27]="Saltando",e[e.Scherzando=28]="Scherzando",e[e.Sostenuto=29]="Sostenuto",e[e.Spiccato=30]="Spiccato",e[e.Tenerezza=31]="Tenerezza",e[e.Tranquillamente=32]="Tranquillamente",e[e.Trionfante=33]="Trionfante",e[e.Vivace=34]="Vivace"}(r||(t.MoodEnum=r={}))},9834:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasVexFlowBackend=void 0;var s=n(i(3206)).default.Flow;const r=i(1902),o=i(6014),a=i(624),l=i(1888);class c extends r.VexFlowBackend{constructor(e){super(),this.rules=e}getVexflowBackendType(){return s.Renderer.Backends.CANVAS}getOSMDBackendType(){return a.BackendType.Canvas}getCanvasSize(){var e;return null===(e=document.getElementById("osmdCanvasPage"+this.graphicalMusicPage.PageNumber))||void 0===e?void 0:e.offsetHeight}initialize(e,t){this.zoom=t,this.canvas=document.createElement("canvas"),this.graphicalMusicPage||(this.graphicalMusicPage=new l.GraphicalMusicPage(void 0),this.graphicalMusicPage.PageNumber=1),this.canvas.id="osmdCanvasVexFlowBackendCanvas"+this.graphicalMusicPage.PageNumber,this.inner=document.createElement("div"),this.inner.id="osmdCanvasPage"+this.graphicalMusicPage.PageNumber,this.inner.style.position="relative",this.canvas.style.zIndex="0",this.inner.appendChild(this.canvas),e.appendChild(this.inner),this.renderer=new s.Renderer(this.canvas,this.getVexflowBackendType()),this.ctx=this.renderer.getContext()}initializeHeadless(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;this.graphicalMusicPage||(this.graphicalMusicPage=new l.GraphicalMusicPage(void 0),this.graphicalMusicPage.PageNumber=1),this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=t,this.renderer=new s.Renderer(this.canvas,this.getVexflowBackendType()),this.ctx=this.renderer.getContext()}getContext(){return this.ctx}free(){this.canvas&&(this.canvas.width=0,this.canvas.height=0,this.canvas.remove(),delete this.canvas,this.canvas=null)}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.rules.PageBackgroundColor&&(this.ctx.save(),this.ctx.setFillStyle(this.rules.PageBackgroundColor),this.zoom=1,this.ctx.fillRect(0,0,this.canvas.width/this.zoom,this.canvas.height/this.zoom),this.ctx.restore())}scale(e){this.ctx.scale(e,e)}translate(e,t){this.CanvasRenderingCtx.translate(e,t)}renderText(e,t,i,n,s,r){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;const c=this.CanvasRenderingCtx.font;this.CanvasRenderingCtx.save(),this.CanvasRenderingCtx.font=o.VexFlowConverter.font(e,t,i,this.rules,l),this.CanvasRenderingCtx.fillStyle=a,this.CanvasRenderingCtx.strokeStyle=a,this.CanvasRenderingCtx.fillText(n,r.x,r.y+s),this.CanvasRenderingCtx.restore(),this.CanvasRenderingCtx.font=c}renderRectangle(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=this.CanvasRenderingCtx.fillStyle;this.CanvasRenderingCtx.fillStyle=i||o.VexFlowConverter.style(t),this.CanvasRenderingCtx.globalAlpha=n,this.ctx.fillRect(e.x,e.y,e.width,e.height),this.CanvasRenderingCtx.fillStyle=s,this.CanvasRenderingCtx.globalAlpha=1}renderLine(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF0000FF";const n=this.CanvasRenderingCtx.strokeStyle;this.CanvasRenderingCtx.strokeStyle=i,this.CanvasRenderingCtx.beginPath(),this.CanvasRenderingCtx.moveTo(e.x,e.y),this.CanvasRenderingCtx.lineTo(t.x,t.y),this.CanvasRenderingCtx.stroke(),this.CanvasRenderingCtx.strokeStyle=n}renderCurve(e){this.ctx.beginPath(),this.ctx.moveTo(e[0].x,e[0].y),this.ctx.bezierCurveTo(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y),this.ctx.lineTo(e[7].x,e[7].y),this.ctx.bezierCurveTo(e[6].x,e[6].y,e[5].x,e[5].y,e[4].x,e[4].y),this.ctx.lineTo(e[0].x,e[0].y),this.ctx.closePath(),this.ctx.fill()}renderPath(e){let t,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.ctx.beginPath();for(const n of e)t?this.ctx.lineTo(n.x,n.y):(this.ctx.moveTo(n.x,n.y),t=n);this.ctx.closePath(),i?this.ctx.fill():this.ctx.stroke()}get CanvasRenderingCtx(){return this.ctx.vexFlowCanvasContext}}t.CanvasVexFlowBackend=c},9924:function(e,t,i){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(i(4041).default);t.default=r},9990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}return i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(8156)})(),e.exports=n()},672:(e,t,i)=>{"use strict";var n=i(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(s(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.flushSync=function(e){var t=l.T,i=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=i,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var i=t.as,n=c(i,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,r="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===i?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:s,fetchPriority:r}):"script"===i&&o.d.X(e,{crossOrigin:n,integrity:s,fetchPriority:r,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var i=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var i=t.as,n=c(i,t.crossOrigin);o.d.L(e,i,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var i=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,i){return l.H.useFormState(e,t,i)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},693:(e,t,i)=>{var n=i(736);e.exports=function(e,t,i){return(t=n(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,i)=>{var n=i(987),s=i(156),r=i(122),o=i(752);e.exports=function(e,t){return n(e)||s(e,t)||r(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,i)=>{var n=i(738).default,s=i(45);e.exports=function(e){var t=s(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},799:(e,t)=>{"use strict";var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(e,t,n){var s=null;if(void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),"key"in t)for(var r in n={},t)"key"!==r&&(n[r]=t[r]);else n=t;return t=n.ref,{$$typeof:i,type:e,key:s,ref:void 0!==t?t:null,props:n}}t.Fragment=n,t.jsx=s,t.jsxs=s},817:(e,t,i)=>{"use strict";var n=i(0),s=function(e){return function(e){return null!==e&&e!==[]&&e>=0&&e<129}(e)?+e:n.midi(e)};e.exports=function(e){if(e.buffers){var t=e.opts.map,i="function"===typeof t?t:s,n=function(e){return e?i(e)||e:null};e.buffers=function(e,t){return Object.keys(e).reduce((function(i,n){return i[t(n)]=e[n],i}),{})}(e.buffers,n);var r=e.start;e.start=function(e,t,i){var s=n(e),o=s%1;return o&&(s=Math.floor(s),i=Object.assign(i||{},{cents:Math.floor(100*o)})),r(s,t,i)}}return e}},831:e=>{e.exports=function(e){return e.on=function(t,i){if(1===arguments.length&&"function"===typeof t)return e.on("event",t);var n,s,r="on"+t,o=e[r];return e[r]=o?(n=o,s=i,function(e,t,i,r){n(e,t,i,r),s(e,t,i,r)}):i,e},e}},843:e=>{"use strict";e.exports={decode:function(e,t){for(var i,n,s,r=e.replace(/[^A-Za-z0-9\+\/]/g,""),o=r.length,a=t?Math.ceil((3*o+1>>2)/t)*t:3*o+1>>2,l=new Uint8Array(a),c=0,h=0,u=0;u<o;u++)if(n=3&u,c|=((s=r.charCodeAt(u))>64&&s<91?s-65:s>96&&s<123?s-71:s>47&&s<58?s+4:43===s?62:47===s?63:0)<<18-6*n,3===n||o-u===1){for(i=0;i<3&&h<a;i++,h++)l[h]=c>>>(16>>>i&24)&255;c=0}return l}}},853:(e,t,i)=>{"use strict";e.exports=i(896)},896:(e,t)=>{"use strict";function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,s=e[n];if(!(0<r(s,t)))break e;e[n]=t,e[i]=s,i=n}}function n(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,s=e.length,o=s>>>1;n<o;){var a=2*(n+1)-1,l=e[a],c=a+1,h=e[c];if(0>r(l,i))c<s&&0>r(h,l)?(e[n]=h,e[c]=i,n=c):(e[n]=l,e[a]=i,n=a);else{if(!(c<s&&0>r(h,i)))break e;e[n]=h,e[c]=i,n=c}}}return t}function r(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],h=[],u=1,d=null,f=3,p=!1,m=!1,g=!1,b="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=n(h);null!==t;){if(null===t.callback)s(h);else{if(!(t.startTime<=e))break;s(h),t.sortIndex=t.expirationTime,i(c,t)}t=n(h)}}function S(e){if(g=!1,x(e),!m)if(null!==n(c))m=!0,L();else{var t=n(h);null!==t&&k(S,t.startTime-e)}}var E,w=!1,T=-1,_=5,M=-1;function P(){return!(t.unstable_now()-M<_)}function C(){if(w){var e=t.unstable_now();M=e;var i=!0;try{e:{m=!1,g&&(g=!1,v(T),T=-1),p=!0;var r=f;try{t:{for(x(e),d=n(c);null!==d&&!(d.expirationTime>e&&P());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,x(e),i=!0;break t}d===n(c)&&s(c),x(e)}else s(c);d=n(c)}if(null!==d)i=!0;else{var l=n(h);null!==l&&k(S,l.startTime-e),i=!1}}break e}finally{d=null,f=r,p=!1}i=void 0}}finally{i?E():w=!1}}}if("function"===typeof y)E=function(){y(C)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,N=A.port2;A.port1.onmessage=C,E=function(){N.postMessage(null)}}else E=function(){b(C,0)};function L(){w||(w=!0,E())}function k(e,i){T=b((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,L())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var i=f;f=t;try{return e()}finally{f=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=f;f=e;try{return t()}finally{f=i}},t.unstable_scheduleCallback=function(e,s,r){var o=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?o+r:o:r=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>o?(e.sortIndex=r,i(h,e),null===n(c)&&e===n(h)&&(g?(v(T),T=-1):g=!0,k(S,r-o))):(e.sortIndex=a,i(c,e),m||p||(m=!0,L())),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=f;return function(){var i=f;f=t;try{return e.apply(this,arguments)}finally{f=i}}}},897:(e,t,i)=>{var n=i(693);function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}e.exports=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},950:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(672)},960:(e,t,i)=>{var n=i(736);function s(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,n(s.key),s)}}e.exports=function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},988:(e,t,i)=>{"use strict";function n(e,t){return Array(t+1).join(e)}function s(e){return"number"===typeof e}function r(e,t){return Math.pow(2,(e-69)/12)*(t||440)}i.r(t),i.d(t,{acc:()=>m,alt:()=>v,build:()=>u,chroma:()=>y,freq:()=>f,letter:()=>p,midi:()=>d,oct:()=>x,parse:()=>c,pc:()=>g,regex:()=>a,step:()=>b});var o=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function a(){return o}var l=[0,2,4,5,7,9,11];function c(e,t,i){if("string"!==typeof e)return null;var n=o.exec(e);if(!n||!t&&n[4])return null;var s={letter:n[1].toUpperCase(),acc:n[2].replace(/x/g,"##")};s.pc=s.letter+s.acc,s.step=(s.letter.charCodeAt(0)+3)%7,s.alt="b"===s.acc[0]?-s.acc.length:s.acc.length;var a=l[s.step]+s.alt;return s.chroma=a<0?12+a:a%12,n[3]&&(s.oct=+n[3],s.midi=a+12*(s.oct+1),s.freq=r(s.midi,i)),t&&(s.tonicOf=n[4]),s}var h="CDEFGAB";function u(e,t,i){return null===e||"undefined"===typeof e?null:e.step?u(e.step,e.alt,e.oct):e<0||e>6?null:h.charAt(e)+(s(r=t)?r<0?n("b",-r):n("#",r):"")+function(e){return s(e)?""+e:""}(i);var r}function d(e){if((s(e)||"string"===typeof e)&&e>=0&&e<128)return+e;var t=c(e);return t&&function(e){return"undefined"!==typeof e}(t.midi)?t.midi:null}function f(e,t){var i=d(e);return null===i?null:r(i,t)}function p(e){return(c(e)||{}).letter}function m(e){return(c(e)||{}).acc}function g(e){return(c(e)||{}).pc}function b(e){return(c(e)||{}).step}function v(e){return(c(e)||{}).alt}function y(e){return(c(e)||{}).chroma}function x(e){return(c(e)||{}).oct}},998:function(e,t,i){!function(e,t,i,n){"use strict";function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var r=s(t),o=s(i),a=s(n),l=function(e,t,i){return{endTime:t,insertTime:i,type:"exponentialRampToValue",value:e}},c=function(e,t,i){return{endTime:t,insertTime:i,type:"linearRampToValue",value:e}},h=function(e,t){return{startTime:t,type:"setValue",value:e}},u=function(e,t,i){return{duration:i,startTime:t,type:"setValueCurve",values:e}},d=function(e,t,i){var n=i.startTime,s=i.target,r=i.timeConstant;return s+(t-s)*Math.exp((n-e)/r)},f=function(e){return"exponentialRampToValue"===e.type},p=function(e){return"linearRampToValue"===e.type},m=function(e){return f(e)||p(e)},g=function(e){return"setValue"===e.type},b=function(e){return"setValueCurve"===e.type},v=function e(t,i,n,s){var r=t[i];return void 0===r?s:m(r)||g(r)?r.value:b(r)?r.values[r.values.length-1]:d(n,e(t,i-1,r.startTime,s),r)},y=function(e,t,i,n,s){return void 0===i?[n.insertTime,s]:m(i)?[i.endTime,i.value]:g(i)?[i.startTime,i.value]:b(i)?[i.startTime+i.duration,i.values[i.values.length-1]]:[i.startTime,v(e,t-1,i.startTime,s)]},x=function(e){return"cancelAndHold"===e.type},S=function(e){return"cancelScheduledValues"===e.type},E=function(e){return x(e)||S(e)?e.cancelTime:f(e)||p(e)?e.endTime:e.startTime},w=function(e,t,i,n){var s=n.endTime,r=n.value;return i===r?r:0<i&&0<r||i<0&&r<0?i*Math.pow(r/i,(e-t)/(s-t)):0},T=function(e,t,i,n){return i+(e-t)/(n.endTime-t)*(n.value-i)},_=function(e,t){var i=Math.floor(t),n=Math.ceil(t);return i===n?e[i]:(1-(t-i))*e[i]+(1-(n-t))*e[n]},M=function(e,t){var i=t.duration,n=t.startTime,s=t.values,r=(e-n)/i*(s.length-1);return _(s,r)},P=function(e){return"setTarget"===e.type},C=function(){function e(t){o.default(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return a.default(e,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=E(e);if(x(e)||S(e)){var i=this._automationEvents.findIndex((function(e){return E(e)>=t})),n=this._automationEvents[i];if(-1!==i&&(this._automationEvents=this._automationEvents.slice(0,i)),x(e)){var s=this._automationEvents[this._automationEvents.length-1];if(void 0!==n&&m(n)){if(P(s))throw new Error("The internal list is malformed.");var r=b(s)?s.startTime+s.duration:E(s),o=b(s)?s.values[s.values.length-1]:s.value,a=f(n)?w(t,r,o,n):T(t,r,o,n),d=f(n)?l(a,t,this._currenTime):c(a,t,this._currenTime);this._automationEvents.push(d)}void 0!==s&&P(s)&&this._automationEvents.push(h(this.getValue(t),t)),void 0!==s&&b(s)&&s.startTime+s.duration>t&&(this._automationEvents[this._automationEvents.length-1]=u(new Float32Array([6,7]),s.startTime,t-s.startTime))}}else{var g=this._automationEvents.findIndex((function(e){return E(e)>t})),v=-1===g?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[g-1];if(void 0!==v&&b(v)&&E(v)+v.duration>t)return!1;var y=f(e)?l(e.value,e.endTime,this._currenTime):p(e)?c(e.value,t,this._currenTime):e;if(-1===g)this._automationEvents.push(y);else{if(b(e)&&t+e.duration>E(this._automationEvents[g]))return!1;this._automationEvents.splice(g,0,y)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex((function(t){return E(t)>e}));if(t>1){var i=this._automationEvents.slice(t-1),n=i[0];P(n)&&i.unshift(h(v(this._automationEvents,t-2,n.startTime,this._defaultValue),n.startTime)),this._automationEvents=i}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var t=this._automationEvents[this._automationEvents.length-1],i=this._automationEvents.findIndex((function(t){return E(t)>e})),n=this._automationEvents[i],s=E(t)<=e?t:this._automationEvents[i-1];if(void 0!==s&&P(s)&&(void 0===n||!m(n)||n.insertTime>e))return d(e,v(this._automationEvents,i-2,s.startTime,this._defaultValue),s);if(void 0!==s&&g(s)&&(void 0===n||!m(n)))return s.value;if(void 0!==s&&b(s)&&(void 0===n||!m(n)||s.startTime+s.duration>e))return e<s.startTime+s.duration?M(e,s):s.values[s.values.length-1];if(void 0!==s&&m(s)&&(void 0===n||!m(n)))return s.value;if(void 0!==n&&f(n)){var o=y(this._automationEvents,i-1,s,n,this._defaultValue),a=r.default(o,2),l=a[0],c=a[1];return w(e,l,c,n)}if(void 0!==n&&p(n)){var h=y(this._automationEvents,i-1,s,n,this._defaultValue),u=r.default(h,2),x=u[0],S=u[1];return T(e,x,S,n)}return this._defaultValue}}]),e}(),A=function(e){return{cancelTime:e,type:"cancelAndHold"}},N=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},L=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},k=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},I=function(e,t,i){return{startTime:t,target:e,timeConstant:i,type:"setTarget"}};e.AutomationEventList=C,e.createCancelAndHoldAutomationEvent=A,e.createCancelScheduledValuesAutomationEvent=N,e.createExponentialRampToValueAutomationEvent=L,e.createLinearRampToValueAutomationEvent=k,e.createSetTargetAutomationEvent=I,e.createSetValueAutomationEvent=h,e.createSetValueCurveAutomationEvent=u,Object.defineProperty(e,"__esModule",{value:!0})}(t,i(715),i(383),i(960))},999:function(e,t,i){var n;"undefined"!=typeof self&&self,e.exports=(n=i(43),function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},n.apply(this,arguments)}function s(e){return l(e)||a(e)||o(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(e,t):void 0}}function a(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(e){if(Array.isArray(e))return c(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"HighchartsReact",(function(){return p}));var u=i(1),d=i.n(u),f="undefined"!=typeof window?u.useLayoutEffect:u.useEffect,p=Object(u.memo)(Object(u.forwardRef)((function(e,t){var i=Object(u.useRef)(),r=Object(u.useRef)(),o=Object(u.useRef)(e.constructorType),a=Object(u.useRef)(e.highcharts);return f((function(){function t(){var t=e.highcharts||"object"===("undefined"==typeof window?"undefined":h(window))&&window.Highcharts,n=e.constructorType||"chart";t?t[n]?e.options?r.current=t[n](i.current,e.options,e.callback):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(r.current){if(!1!==e.allowChartUpdate)if(e.constructorType!==o.current||e.highcharts!==a.current)o.current=e.constructorType,a.current=e.highcharts,t();else if(!e.immutable&&r.current){var n;(n=r.current).update.apply(n,[e.options].concat(s(e.updateArgs||[!0,!0])))}else t()}else t()}),[e.options,e.allowChartUpdate,e.updateArgs,e.containerProps,e.highcharts,e.constructorType]),f((function(){return function(){r.current&&(r.current.destroy(),r.current=null)}}),[]),Object(u.useImperativeHandle)(t,(function(){return{get chart(){return r.current},container:i}}),[]),d.a.createElement("div",n({},e.containerProps,{ref:i}))})));t.default=p},function(e,t){e.exports=n}]))}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;i.t=function(n,s){if(1&s&&(n=this(n)),8&s)return n;if("object"===typeof n&&n){if(4&s&&n.__esModule)return n;if(16&s&&"function"===typeof n.then)return n}var r=Object.create(null);i.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&s&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,i.d(r,o),r}})(),i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};i.r(e),i.d(e,{hasBrowserEnv:()=>qd,hasStandardBrowserEnv:()=>Zd,hasStandardBrowserWebWorkerEnv:()=>Qd,navigator:()=>$d,origin:()=>Jd});var t=i(43),n=i.t(t,2),s=i(391);function r(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;i[n]=e[n]}return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function l(e,t,i){return(t=a(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}const u=["sri"],d=["page"],f=["page","matches"],p=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var b="popstate";function v(){return _((function(e,t){let{pathname:i,search:n,hash:s}=e.location;return E("",{pathname:i,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:w(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function y(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function x(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(i){}}}function S(e,t){return{usr:e.state,key:e.key,idx:t}}function E(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3?arguments[3]:void 0;return h(h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?T(t):t),{},{state:i,key:t&&t.key||n||Math.random().toString(36).substring(2,10)})}function w(e){let{pathname:t="/",search:i="",hash:n=""}=e;return i&&"?"!==i&&(t+="?"===i.charAt(0)?i:"?"+i),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function T(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function _(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:r=!1}=n,o=s.history,a="POP",l=null,c=u();function u(){return(o.state||{idx:null}).idx}function d(){a="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:p.location,delta:t})}function f(e){return M(e)}null==c&&(c=0,o.replaceState(h(h({},o.state),{},{idx:c}),""));let p={get action(){return a},get location(){return e(s,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(b,d),l=e,()=>{s.removeEventListener(b,d),l=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a="PUSH";let n=E(p.location,e,t);i&&i(n,e),c=u()+1;let h=S(n,c),d=p.createHref(n);try{o.pushState(h,"",d)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;s.location.assign(d)}r&&l&&l({action:a,location:p.location,delta:1})},replace:function(e,t){a="REPLACE";let n=E(p.location,e,t);i&&i(n,e),c=u();let s=S(n,c),h=p.createHref(n);o.replaceState(s,"",h),r&&l&&l({action:a,location:p.location,delta:0})},go:e=>o.go(e)};return p}function M(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="http://localhost";"undefined"!==typeof window&&(i="null"!==window.location.origin?window.location.origin:window.location.href),y(i,"No window.location.(origin|href) available to create URL");let n="string"===typeof e?e:w(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=i+n),new URL(n,i)}new WeakMap;function P(e,t){return C(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function C(e,t,i,n){let s=z(("string"===typeof t?T(t):t).pathname||"/",i);if(null==s)return null;let r=A(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let i=e.length===t.length&&e.slice(0,-1).every(((e,i)=>e===t[i]));return i?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(r);let o=null;for(let a=0;null==o&&a<r.length;++a){let e=W(s);o=V(r[a],e,n)}return o}function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=function(e,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,a=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(n)&&o)return;y(l.relativePath.startsWith(n),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(n,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(n.length)}let c=Q([n,l.relativePath]),h=i.concat(l);e.children&&e.children.length>0&&(y(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),A(e.children,t,h,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:F(c,e.index),routesMeta:h})};return e.forEach(((e,t)=>{var i;if(""!==e.path&&null!==(i=e.path)&&void 0!==i&&i.includes("?"))for(let n of N(e.path))r(e,t,!0,n);else r(e,t)})),t}function N(e){let t=e.split("/");if(0===t.length)return[];let[i,...n]=t,s=i.endsWith("?"),r=i.replace(/\?$/,"");if(0===n.length)return s?[r,""]:[r];let o=N(n.join("/")),a=[];return a.push(...o.map((e=>""===e?r:[r,e].join("/")))),s&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}var L=/^:[\w-]+$/,k=3,I=2,R=1,O=10,D=-2,B=e=>"*"===e;function F(e,t){let i=e.split("/"),n=i.length;return i.some(B)&&(n+=D),t&&(n+=I),i.filter((e=>!B(e))).reduce(((e,t)=>e+(L.test(t)?k:""===t?R:O)),n)}function V(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:n}=e,s={},r="/",o=[];for(let a=0;a<n.length;++a){let e=n[a],l=a===n.length-1,c="/"===r?t:t.slice(r.length)||"/",h=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!h&&l&&i&&!n[n.length-1].route.index&&(h=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Q([r,h.pathname]),pathnameBase:J(Q([r,h.pathnameBase])),route:u}),"/"!==h.pathnameBase&&(r=Q([r,h.pathnameBase]))}return o}function j(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[i,n]=G(e.path,e.caseSensitive,e.end),s=t.match(i);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce(((e,t,i)=>{let{paramName:n,isOptional:s}=t;if("*"===n){let e=a[i]||"";o=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[i];return e[n]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:r,pathnameBase:o,pattern:e}}function G(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,i)=>(n.push({paramName:t,isOptional:null!=i}),i?"/?([^\\/]+)?":"/([^\\/]+)"))).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function W(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return x(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,n=e.charAt(i);return n&&"/"!==n?null:e.slice(i)||"/"}var U=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H=e=>U.test(e);function X(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?i.length>1&&i.pop():"."!==e&&i.push(e)})),i.length>1?i.join("/"):"/"}function Y(e,t,i,n){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(n),"].  Please separate it out to the `to.").concat(i,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function K(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function q(e){let t=K(e);return t.map(((e,i)=>i===t.length-1?e.pathname:e.pathnameBase))}function Z(e,t,i){let n,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?n=T(e):(n=h({},e),y(!n.pathname||!n.pathname.includes("?"),Y("?","pathname","search",n)),y(!n.pathname||!n.pathname.includes("#"),Y("#","pathname","hash",n)),y(!n.search||!n.search.includes("#"),Y("#","search","hash",n)));let r,o=""===e||""===n.pathname,a=o?"/":n.pathname;if(null==a)r=i;else{let e=t.length-1;if(!s&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}r=e>=0?t[e]:"/"}let l=function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:s="",hash:r=""}="string"===typeof e?T(e):e;if(n)if(H(n))t=n;else{if(n.includes("//")){let e=n;n=n.replace(/\/\/+/g,"/"),x(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(n))}t=n.startsWith("/")?X(n.substring(1),"/"):X(n,i)}else t=i;return{pathname:t,search:ee(s),hash:te(r)}}(n,r),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&i.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Q=e=>e.join("/").replace(/\/\/+/g,"/"),J=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ee=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",te=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function ie(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function ne(e){return e.map((e=>e.route.path)).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var se=["POST","PUT","PATCH","DELETE"],re=(new Set(se),["GET",...se]);new Set(re),Symbol("ResetLoaderData");var oe=t.createContext(null);oe.displayName="DataRouter";var ae=t.createContext(null);ae.displayName="DataRouterState";var le=t.createContext(!1);var ce=t.createContext({isTransitioning:!1});ce.displayName="ViewTransition";var he=t.createContext(new Map);he.displayName="Fetchers";var ue=t.createContext(null);ue.displayName="Await";var de=t.createContext(null);de.displayName="Navigation";var fe=t.createContext(null);fe.displayName="Location";var pe=t.createContext({outlet:null,matches:[],isDataRoute:!1});pe.displayName="Route";var me=t.createContext(null);me.displayName="RouteError";function ge(){return null!=t.useContext(fe)}function be(){return y(ge(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(fe).location}var ve="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ye(e){t.useContext(de).static||t.useLayoutEffect(e)}function xe(){let{isDataRoute:e}=t.useContext(pe);return e?function(){let{router:e}=Ne("useNavigate"),i=ke("useNavigate"),n=t.useRef(!1);ye((()=>{n.current=!0}));let s=t.useCallback((async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(n.current,ve),n.current&&("number"===typeof t?await e.navigate(t):await e.navigate(t,h({fromRouteId:i},s)))}),[e,i]);return s}():function(){y(ge(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(oe),{basename:i,navigator:n}=t.useContext(de),{matches:s}=t.useContext(pe),{pathname:r}=be(),o=JSON.stringify(q(s)),a=t.useRef(!1);ye((()=>{a.current=!0}));let l=t.useCallback((function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x(a.current,ve),!a.current)return;if("number"===typeof t)return void n.go(t);let l=Z(t,JSON.parse(o),r,"path"===s.relative);null==e&&"/"!==i&&(l.pathname="/"===l.pathname?i:Q([i,l.pathname])),(s.replace?n.replace:n.push)(l,s.state,s)}),[i,n,o,r,e]);return l}()}t.createContext(null);function Se(){let{matches:e}=t.useContext(pe),i=e[e.length-1];return i?i.params:{}}function Ee(e){let{relative:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=t.useContext(pe),{pathname:s}=be(),r=JSON.stringify(q(n));return t.useMemo((()=>Z(e,JSON.parse(r),s,"path"===i)),[e,r,s,i])}function we(e,i,n,s,r){y(ge(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=t.useContext(de),{matches:a}=t.useContext(pe),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";Oe(u,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=be();if(i){var g;let e="string"===typeof i?T(i):i;y("/"===d||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let b=p.pathname||"/",v=b;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let S=P(e,{pathname:v});x(f||null!=S,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),x(null==S||void 0!==S[S.length-1].route.element||void 0!==S[S.length-1].route.Component||void 0!==S[S.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let E=Ce(S&&S.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Q([d,o.encodeLocation?o.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Q([d,o.encodeLocation?o.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])}))),a,n,s,r);return i&&E?t.createElement(fe.Provider,{value:{location:h({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},E):E}function Te(){let e=Ie(),i=ie(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:o},"ErrorBoundary")," or"," ",t.createElement("code",{style:o},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},i),n?t.createElement("pre",{style:r},n):null,a)}var _e=t.createElement(Te,null),Me=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?t.createElement(pe.Provider,{value:this.props.routeContext},t.createElement(me.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Pe(e){let{routeContext:i,match:n,children:s}=e,r=t.useContext(oe);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(pe.Provider,{value:i},s)}function Ce(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==i.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,o=null===n||void 0===n?void 0:n.errors;if(null!=o){let e=r.findIndex((e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id])));y(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),r=r.slice(0,Math.min(r.length,e+1))}let a=!1,l=-1;if(n)for(let t=0;t<r.length;t++){let e=r[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=t),e.route.id){let{loaderData:t,errors:i}=n,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!i||void 0===i[e.route.id]);if(e.route.lazy||s){a=!0,r=l>=0?r.slice(0,l+1):[r[0]];break}}}let c=n&&s?(e,t)=>{var i,r;s(e,{location:n.location,params:null!==(i=null===(r=n.matches)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.params)&&void 0!==i?i:{},unstable_pattern:ne(n.matches),errorInfo:t})}:void 0;return r.reduceRight(((e,s,h)=>{let u,d=!1,f=null,p=null;n&&(u=o&&s.route.id?o[s.route.id]:void 0,f=s.route.errorElement||_e,a&&(l<0&&0===h?(Oe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):l===h&&(d=!0,p=s.route.hydrateFallbackElement||null)));let m=i.concat(r.slice(0,h+1)),g=()=>{let i;return i=u?f:d?p:s.route.Component?t.createElement(s.route.Component,null):s.route.element?s.route.element:e,t.createElement(Pe,{match:s,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:i})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===h)?t.createElement(Me,{location:n.location,revalidation:n.revalidation,component:f,error:u,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()}),null)}function Ae(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ne(e){let i=t.useContext(oe);return y(i,Ae(e)),i}function Le(e){let i=t.useContext(ae);return y(i,Ae(e)),i}function ke(e){let i=function(e){let i=t.useContext(pe);return y(i,Ae(e)),i}(e),n=i.matches[i.matches.length-1];return y(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ie(){var e;let i=t.useContext(me),n=Le("useRouteError"),s=ke("useRouteError");return void 0!==i?i:null===(e=n.errors)||void 0===e?void 0:e[s]}var Re={};function Oe(e,t,i){t||Re[e]||(Re[e]=!0,x(!1,i))}var De={};function Be(e,t){e||De[t]||(De[t]=!0,console.warn(t))}n.useOptimistic;t.memo((function(e){let{routes:t,future:i,state:n,unstable_onError:s}=e;return we(t,void 0,n,s,i)}));function Fe(e){y(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ve(e){let{basename:i="/",children:n=null,location:s,navigationType:r="POP",navigator:o,static:a=!1,unstable_useTransitions:l}=e;y(!ge(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),h=t.useMemo((()=>({basename:c,navigator:o,static:a,unstable_useTransitions:l,future:{}})),[c,o,a,l]);"string"===typeof s&&(s=T(s));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:m="default"}=s,g=t.useMemo((()=>{let e=z(u,c);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:m},navigationType:r}}),[c,u,d,f,p,m,r]);return x(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(u).concat(d).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:t.createElement(de.Provider,{value:h},t.createElement(fe.Provider,{children:n,value:g}))}function je(e){let{children:t,location:i}=e;return we(Ge(t),i)}t.Component;function Ge(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return t.Children.forEach(e,((e,s)=>{if(!t.isValidElement(e))return;let r=[...i,s];if(e.type===t.Fragment)return void n.push.apply(n,Ge(e.props.children,r));y(e.type===Fe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),y(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ge(e.props.children,r)),n.push(o)})),n}var We="get",ze="application/x-www-form-urlencoded";function Ue(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var He=null;var Xe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ye(e){return null==e||Xe.has(e)?e:(x(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(ze,'"')),null)}function Ke(e,t){let i,n,s,r,o;if(Ue(a=e)&&"form"===a.tagName.toLowerCase()){let o=e.getAttribute("action");n=o?z(o,t):null,i=e.getAttribute("method")||We,s=Ye(e.getAttribute("enctype"))||ze,r=new FormData(e)}else if(function(e){return Ue(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ue(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let a=e.getAttribute("formaction")||o.getAttribute("action");if(n=a?z(a,t):null,i=e.getAttribute("formmethod")||o.getAttribute("method")||We,s=Ye(e.getAttribute("formenctype"))||Ye(o.getAttribute("enctype"))||ze,r=new FormData(o,e),!function(){if(null===He)try{new FormData(document.createElement("form"),0),He=!1}catch(e){He=!0}return He}()){let{name:t,type:i,value:n}=e;if("image"===i){let e=t?"".concat(t,"."):"";r.append("".concat(e,"x"),"0"),r.append("".concat(e,"y"),"0")}else t&&r.append(t,n)}}else{if(Ue(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=We,n=null,s=ze,o=e}var a;return r&&"text/plain"===s&&(o=r,r=void 0),{action:n,method:i.toLowerCase(),encType:s,formData:r,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function qe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function $e(e,t,i){let n="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname="_root.".concat(i):t&&"/"===z(n.pathname,t)?n.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(i):n.pathname="".concat(n.pathname.replace(/\/$/,""),".").concat(i),n}async function Ze(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Qe(e){return null!=e&&"string"===typeof e.page}function Je(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function et(e,t,i,n,s,r){let o=(e,t)=>!i[t]||e.route.id!==i[t].route.id,a=(e,t)=>{var n;return i[t].pathname!==e.pathname||(null===(n=i[t].route.path)||void 0===n?void 0:n.endsWith("*"))&&i[t].params["*"]!==e.params["*"]};return"assets"===r?t.filter(((e,t)=>o(e,t)||a(e,t))):"data"===r?t.filter(((t,r)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,r)||a(t,r))return!0;if(t.route.shouldRevalidate){var c;let n=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null===(c=i[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof n)return n}return!0})):[]}function tt(e,t){let{includeHydrateFallback:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n=e.map((e=>{let n=t.routes[e.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),i&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s})).flat(1),[...new Set(n)];var n}function it(e,t){let i=new Set,n=new Set(t);return e.reduce(((e,s)=>{if(t&&!Qe(s)&&"script"===s.as&&s.href&&n.has(s.href))return e;let r=JSON.stringify(function(e){let t={},i=Object.keys(e).sort();for(let n of i)t[n]=e[n];return t}(s));return i.has(r)||(i.add(r),e.push({key:r,link:s})),e}),[])}function nt(e,t){return"lazy"===e.mode&&!0===t}function st(){let e=t.useContext(oe);return qe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function rt(){let e=t.useContext(ae);return qe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ot=t.createContext(void 0);function at(){let e=t.useContext(ot);return qe(e,"You must render this element inside a <HydratedRouter> element"),e}function lt(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function ct(e,t,i){if(i&&!ft)return[e[0]];if(t){let i=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,i+1)}return e}ot.displayName="FrameworkContext";function ht(e){let{page:i}=e,n=r(e,d),{router:s}=st(),o=t.useMemo((()=>P(s.routes,i,s.basename)),[s.routes,i,s.basename]);return o?t.createElement(dt,h({page:i,matches:o},n)):null}function ut(e){let{manifest:i,routeModules:n}=at(),[s,r]=t.useState([]);return t.useEffect((()=>{let t=!1;return async function(e,t,i){return it((await Promise.all(e.map((async e=>{let n=t.routes[e.route.id];if(n){let e=await Ze(n,i);return e.links?e.links():[]}return[]})))).flat(1).filter(Je).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?h(h({},e),{},{rel:"prefetch",as:"style"}):h(h({},e),{},{rel:"prefetch"}))))}(e,i,n).then((e=>{t||r(e)})),()=>{t=!0}}),[e,i,n]),s}function dt(e){let{page:i,matches:n}=e,s=r(e,f),o=be(),{manifest:a,routeModules:l}=at(),{basename:c}=st(),{loaderData:u,matches:d}=rt(),p=t.useMemo((()=>et(i,n,d,a,o,"data")),[i,n,d,a,o]),m=t.useMemo((()=>et(i,n,d,a,o,"assets")),[i,n,d,a,o]),g=t.useMemo((()=>{if(i===o.pathname+o.search+o.hash)return[];let e=new Set,t=!1;if(n.forEach((i=>{var n;let s=a.routes[i.route.id];s&&s.hasLoader&&(!p.some((e=>e.route.id===i.route.id))&&i.route.id in u&&null!==(n=l[i.route.id])&&void 0!==n&&n.shouldRevalidate||s.hasClientLoader?t=!0:e.add(i.route.id))})),0===e.size)return[];let s=$e(i,c,"data");return t&&e.size>0&&s.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[s.pathname+s.search]}),[c,u,o,a,p,n,i,l]),b=t.useMemo((()=>tt(m,a)),[m,a]),v=ut(m);return t.createElement(t.Fragment,null,g.map((e=>t.createElement("link",h({key:e,rel:"prefetch",as:"fetch",href:e},s)))),b.map((e=>t.createElement("link",h({key:e,rel:"modulepreload",href:e},s)))),v.map((e=>{let{key:i,link:n}=e;return t.createElement("link",h({key:i,nonce:s.nonce},n))})))}var ft=!1;function pt(e){let{manifest:i,serverHandoffString:n,isSpaMode:s,renderMeta:o,routeDiscovery:a,ssr:l}=at(),{router:c,static:d,staticContext:f}=st(),{matches:p}=rt(),m=t.useContext(le),g=nt(a,l);o&&(o.didRenderScripts=!0);let b=ct(p,null,s);t.useEffect((()=>{0}),[]);let v=t.useMemo((()=>{var s;if(m)return null;let o=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=d?"".concat(null!==i.hmr&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(i.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(i.url)),";\n").concat(b.map(((e,t)=>{let n="route".concat(t),s=i.routes[e.route.id];qe(s,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:r,clientLoaderModule:o,clientMiddlewareModule:a,hydrateFallbackModule:l,module:c}=s,h=[...r?[{module:r,varName:"".concat(n,"_clientAction")}]:[],...o?[{module:o,varName:"".concat(n,"_clientLoader")}]:[],...a?[{module:a,varName:"".concat(n,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(n,"_HydrateFallback")}]:[],{module:c,varName:"".concat(n,"_main")}];return 1===h.length?"import * as ".concat(n," from ").concat(JSON.stringify(c),";"):[h.map((e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";'))).join("\n"),"const ".concat(n," = {").concat(h.map((e=>"...".concat(e.varName))).join(","),"};")].join("\n")})).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:i}=e,n=r(e,u),s=new Set(t.state.matches.map((e=>e.route.id))),o=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(o.pop();o.length>0;)a.push("/".concat(o.join("/"))),o.pop();a.forEach((e=>{let i=P(t.routes,e,t.basename);i&&i.forEach((e=>s.add(e.route.id)))}));let l=[...s].reduce(((e,t)=>Object.assign(e,{[t]:n.routes[t]})),{});return h(h({},n),{},{routes:l,sri:!!i||void 0})}(i,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(b.map(((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t))).join(","),"};\n\nimport(").concat(JSON.stringify(i.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:void 0})),t.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:"module",async:!0})))}),[]),y=ft||m?[]:(i.entry.imports.concat(tt(b,i,{includeHydrateFallback:!0})),[...new Set(x)]);var x;let S="object"===typeof i.sri?i.sri:{};return Be(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ft||m?null:t.createElement(t.Fragment,null,"object"===typeof i.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:S})}}):null,g?null:t.createElement("link",{rel:"modulepreload",href:i.url,crossOrigin:e.crossOrigin,integrity:S[i.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:i.entry.module,crossOrigin:e.crossOrigin,integrity:S[i.entry.module],suppressHydrationWarning:!0}),y.map((i=>t.createElement("link",{key:i,rel:"modulepreload",href:i,crossOrigin:e.crossOrigin,integrity:S[i],suppressHydrationWarning:!0}))),v)}function mt(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}t.Component;function gt(e){let{error:i,isOutsideRemixApp:n}=e;console.error(i);let s,r=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(ie(i))return t.createElement(bt,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},i.status," ",i.statusText),r);if(i instanceof Error)0;else{let e=null==i?"Unknown Error":"object"===typeof i&&"toString"in i?i.toString():JSON.stringify(i);new Error(e)}return t.createElement(bt,{title:"Application Error!",isOutsideRemixApp:n},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),r)}function bt(e){var i;let{title:n,renderScripts:s,isOutsideRemixApp:r,children:o}=e,{routeModules:a}=at();return null!==a.root&&void 0!==i&&i.Layout&&!r?o:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,n)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},o,s?t.createElement(pt,null):null)))}var vt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{vt&&(window.__reactRouterVersion="7.10.1")}catch(Sy){}function yt(e){let{basename:i,children:n,unstable_useTransitions:s,window:r}=e,o=t.useRef();null==o.current&&(o.current=v({window:r,v5Compat:!0}));let a=o.current,[l,c]=t.useState({action:a.action,location:a.location}),h=t.useCallback((e=>{!1===s?c(e):t.startTransition((()=>c(e)))}),[s]);return t.useLayoutEffect((()=>a.listen(h)),[a,h]),t.createElement(Ve,{basename:i,children:n,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:!0===s})}var xt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,St=t.forwardRef((function(e,i){let n,{onClick:s,discover:o="render",prefetch:a="none",relative:l,reloadDocument:c,replace:u,state:d,target:f,to:m,preventScrollReset:g,viewTransition:b}=e,v=r(e,p),{basename:S,unstable_useTransitions:E}=t.useContext(de),T="string"===typeof m&&xt.test(m),_=!1;if("string"===typeof m&&T&&(n=m,vt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),i=z(t.pathname,S);t.origin===e.origin&&null!=i?m=i+t.search+t.hash:_=!0}catch(Sy){x(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let M=function(e){let{relative:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(ge(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=t.useContext(de),{hash:r,pathname:o,search:a}=Ee(e,{relative:i}),l=o;return"/"!==n&&(l="/"===o?n:Q([n,o])),s.createHref({pathname:l,search:a,hash:r})}(m,{relative:l}),[P,C,A]=function(e,i){let n=t.useContext(ot),[s,r]=t.useState(!1),[o,a]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:h,onMouseLeave:u,onTouchStart:d}=i,f=t.useRef(null);t.useEffect((()=>{if("render"===e&&a(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{a(e.isIntersecting)}))}),{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}}),[e]),t.useEffect((()=>{if(s){let e=setTimeout((()=>{a(!0)}),100);return()=>{clearTimeout(e)}}}),[s]);let p=()=>{r(!0)},m=()=>{r(!1),a(!1)};return n?"intent"!==e?[o,f,{}]:[o,f,{onFocus:lt(l,p),onBlur:lt(c,m),onMouseEnter:lt(h,p),onMouseLeave:lt(u,m),onTouchStart:lt(d,p)}]:[!1,f,{}]}(a,v),N=function(e){let{target:i,replace:n,state:s,preventScrollReset:r,relative:o,viewTransition:a,unstable_useTransitions:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=xe(),h=be(),u=Ee(e,{relative:o});return t.useCallback((d=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(d,i)){d.preventDefault();let i=void 0!==n?n:w(h)===w(u),f=()=>c(e,{replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:a});l?t.startTransition((()=>f())):f()}}),[h,c,u,n,s,i,e,r,o,a,l])}(m,{replace:u,state:d,target:f,preventScrollReset:g,relative:l,viewTransition:b,unstable_useTransitions:E});let L=t.createElement("a",h(h(h({},v),A),{},{href:n||M,onClick:_||c?s:function(e){s&&s(e),e.defaultPrevented||N(e)},ref:mt(i,C),target:f,"data-discover":T||"render"!==o?void 0:"true"}));return P&&!T?t.createElement(t.Fragment,null,L,t.createElement(ht,{page:M})):L}));St.displayName="Link",t.forwardRef((function(e,i){let{"aria-current":n="page",caseSensitive:s=!1,className:o="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=e,f=r(e,m),p=Ee(c,{relative:f.relative}),g=be(),b=t.useContext(ae),{navigator:v,basename:x}=t.useContext(de),S=null!=b&&function(e){let{relative:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useContext(ce);y(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Tt("useViewTransitionState"),r=Ee(e,{relative:i});if(!n.isTransitioning)return!1;let o=z(n.currentLocation.pathname,s)||n.currentLocation.pathname,a=z(n.nextLocation.pathname,s)||n.nextLocation.pathname;return null!=j(r.pathname,a)||null!=j(r.pathname,o)}(p)&&!0===u,E=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,w=g.pathname,T=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(w=w.toLowerCase(),T=T?T.toLowerCase():null,E=E.toLowerCase()),T&&x&&(T=z(T,x)||T);const _="/"!==E&&E.endsWith("/")?E.length-1:E.length;let M,P=w===E||!a&&w.startsWith(E)&&"/"===w.charAt(_),C=null!=T&&(T===E||!a&&T.startsWith(E)&&"/"===T.charAt(E.length)),A={isActive:P,isPending:C,isTransitioning:S},N=P?n:void 0;M="function"===typeof o?o(A):[o,P?"active":null,C?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let L="function"===typeof l?l(A):l;return t.createElement(St,h(h({},f),{},{"aria-current":N,className:M,ref:i,style:L,to:c,viewTransition:u}),"function"===typeof d?d(A):d)})).displayName="NavLink";var Et=t.forwardRef(((e,i)=>{let{discover:n="render",fetcherKey:s,navigate:o,reloadDocument:a,replace:l,state:c,method:u=We,action:d,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:b}=e,v=r(e,g),{unstable_useTransitions:x}=t.useContext(de),S=Pt(),E=function(e){let{relative:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=t.useContext(de),s=t.useContext(pe);y(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),o=h({},Ee(e||".",{relative:i})),a=be();if(null==e){o.search=a.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let i=e.toString();o.search=i?"?".concat(i):""}}e&&"."!==e||!r.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(o.pathname="/"===o.pathname?n:Q([n,o.pathname]));return w(o)}(d,{relative:p}),T="get"===u.toLowerCase()?"get":"post",_="string"===typeof d&&xt.test(d);return t.createElement("form",h(h({ref:i,method:T,action:E,onSubmit:a?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let i=e.nativeEvent.submitter,n=(null===i||void 0===i?void 0:i.getAttribute("formmethod"))||u,r=()=>S(i||e.currentTarget,{fetcherKey:s,method:n,navigate:o,replace:l,state:c,relative:p,preventScrollReset:m,viewTransition:b});x&&!1!==o?t.startTransition((()=>r())):r()}},v),{},{"data-discover":_||"render"!==n?void 0:"true"}))}));function wt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Tt(e){let i=t.useContext(oe);return y(i,wt(e)),i}Et.displayName="Form";var _t=0,Mt=()=>"__".concat(String(++_t),"__");function Pt(){let{router:e}=Tt("useSubmit"),{basename:i}=t.useContext(de),n=ke("useRouteId"),s=e.fetch,r=e.navigate;return t.useCallback((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:a,encType:l,formData:c,body:h}=Ke(e,i);if(!1===t.navigate){let e=t.fetcherKey||Mt();await s(e,n,t.action||o,{preventScrollReset:t.preventScrollReset,formData:c,body:h,formMethod:t.method||a,formEncType:t.encType||l,flushSync:t.flushSync})}else await r(t.action||o,{preventScrollReset:t.preventScrollReset,formData:c,body:h,formMethod:t.method||a,formEncType:t.encType||l,replace:t.replace,state:t.state,fromRouteId:n,flushSync:t.flushSync,viewTransition:t.viewTransition})}),[s,r,i,n])}var Ct={version:"0.18.5"},At=1200,Nt=1252,Lt=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],kt={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},It=function(e){-1!=Lt.indexOf(e)&&(Nt=kt[0]=e)};var Rt=function(e){At=e,It(e)};function Ot(){Rt(1200),It(1252)}function Dt(e){for(var t=[],i=0,n=e.length;i<n;++i)t[i]=e.charCodeAt(i);return t}function Bt(e){for(var t=[],i=0;i<e.length>>1;++i)t[i]=String.fromCharCode(e.charCodeAt(2*i+1)+(e.charCodeAt(2*i)<<8));return t.join("")}var Ft,Vt=function(e){var t=e.charCodeAt(0),i=e.charCodeAt(1);return 255==t&&254==i?function(e){for(var t=[],i=0;i<e.length>>1;++i)t[i]=String.fromCharCode(e.charCodeAt(2*i)+(e.charCodeAt(2*i+1)<<8));return t.join("")}(e.slice(2)):254==t&&255==i?Bt(e.slice(2)):65279==t?e.slice(1):e},jt=function(e){return String.fromCharCode(e)},Gt=function(e){return String.fromCharCode(e)};var Wt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function zt(e){for(var t="",i=0,n=0,s=0,r=0,o=0,a=0,l=0,c=0;c<e.length;)r=(i=e.charCodeAt(c++))>>2,o=(3&i)<<4|(n=e.charCodeAt(c++))>>4,a=(15&n)<<2|(s=e.charCodeAt(c++))>>6,l=63&s,isNaN(n)?a=l=64:isNaN(s)&&(l=64),t+=Wt.charAt(r)+Wt.charAt(o)+Wt.charAt(a)+Wt.charAt(l);return t}function Ut(e){var t="",i=0,n=0,s=0,r=0,o=0,a=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)i=Wt.indexOf(e.charAt(l++))<<2|(r=Wt.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(i),n=(15&r)<<4|(o=Wt.indexOf(e.charAt(l++)))>>2,64!==o&&(t+=String.fromCharCode(n)),s=(3&o)<<6|(a=Wt.indexOf(e.charAt(l++))),64!==a&&(t+=String.fromCharCode(s));return t}var Ht=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),Xt=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(Sy){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Yt(e){return Ht?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function Kt(e){return Ht?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var qt=function(e){return Ht?Xt(e,"binary"):e.split("").map((function(e){return 255&e.charCodeAt(0)}))};function $t(e){if(Array.isArray(e))return e.map((function(e){return String.fromCharCode(e)})).join("");for(var t=[],i=0;i<e.length;++i)t[i]=String.fromCharCode(e[i]);return t.join("")}function Zt(e){if("undefined"==typeof ArrayBuffer)throw new Error("Unsupported");if(e instanceof ArrayBuffer)return Zt(new Uint8Array(e));for(var t=new Array(e.length),i=0;i<e.length;++i)t[i]=e[i];return t}var Qt=Ht?function(e){return Buffer.concat(e.map((function(e){return Buffer.isBuffer(e)?e:Xt(e)})))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,i=0;for(t=0;t<e.length;++t)i+=e[t].length;var n=new Uint8Array(i),s=0;for(t=0,i=0;t<e.length;i+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],i);else{if("string"==typeof e[t])throw"wtf";n.set(new Uint8Array(e[t]),i)}return n}return[].concat.apply([],e.map((function(e){return Array.isArray(e)?e:[].slice.call(e)})))};var Jt=/\u0000/g,ei=/[\u0001-\u0006]/g;function ti(e){for(var t="",i=e.length-1;i>=0;)t+=e.charAt(i--);return t}function ii(e,t){var i=""+e;return i.length>=t?i:dn("0",t-i.length)+i}function ni(e,t){var i=""+e;return i.length>=t?i:dn(" ",t-i.length)+i}function si(e,t){var i=""+e;return i.length>=t?i:i+dn(" ",t-i.length)}var ri=Math.pow(2,32);function oi(e,t){return e>ri||e<-ri?function(e,t){var i=""+Math.round(e);return i.length>=t?i:dn("0",t-i.length)+i}(e,t):function(e,t){var i=""+e;return i.length>=t?i:dn("0",t-i.length)+i}(Math.round(e),t)}function ai(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var li=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],ci=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var hi={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},ui={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},di={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function fi(e,t,i){for(var n=e<0?-1:1,s=e*n,r=0,o=1,a=0,l=1,c=0,h=0,u=Math.floor(s);c<t&&(a=(u=Math.floor(s))*o+r,h=u*c+l,!(s-u<5e-8));)s=1/(s-u),r=o,o=a,l=c,c=h;if(h>t&&(c>t?(h=l,a=r):(h=c,a=o)),!i)return[0,n*a,h];var d=Math.floor(n*a/h);return[d,n*a-d*h,h]}function pi(e,t,i){if(e>2958465||e<0)return null;var n=0|e,s=Math.floor(86400*(e-n)),r=0,o=[],a={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(a.u)<1e-6&&(a.u=0),t&&t.date1904&&(n+=1462),a.u>.9999&&(a.u=0,86400==++s&&(a.T=s=0,++n,++a.D)),60===n)o=i?[1317,10,29]:[1900,2,29],r=3;else if(0===n)o=i?[1317,8,29]:[1900,1,0],r=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),o=[l.getFullYear(),l.getMonth()+1,l.getDate()],r=l.getDay(),n<60&&(r=(r+6)%7),i&&(r=function(e,t){t[0]-=581;var i=e.getDay();e<60&&(i=(i+6)%7);return i}(l,o))}return a.y=o[0],a.m=o[1],a.d=o[2],a.S=s%60,s=Math.floor(s/60),a.M=s%60,s=Math.floor(s/60),a.H=s,a.q=r,a}var mi=new Date(1899,11,31,0,0,0),gi=mi.getTime(),bi=new Date(1900,2,1,0,0,0);function vi(e,t){var i=e.getTime();return t?i-=1262304e5:e>=bi&&(i+=864e5),(i-(gi+6e4*(e.getTimezoneOffset()-mi.getTimezoneOffset())))/864e5}function yi(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function xi(e){var t,i=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=i>=-4&&i<=-1?e.toPrecision(10+i):Math.abs(i)<=9?function(e){var t=e<0?12:11,i=yi(e.toFixed(12));return i.length<=t||(i=e.toPrecision(10)).length<=t?i:e.toExponential(5)}(e):10===i?e.toFixed(10).substr(0,12):function(e){var t=yi(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),yi(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function Si(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):xi(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return Wi(14,vi(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Ei(e,t,i,n){var s,r="",o=0,a=0,l=i.y,c=0;switch(e){case 98:l=i.y+543;case 121:switch(t.length){case 1:case 2:s=l%100,c=2;break;default:s=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:s=i.m,c=t.length;break;case 3:return ci[i.m-1][1];case 5:return ci[i.m-1][0];default:return ci[i.m-1][2]}break;case 100:switch(t.length){case 1:case 2:s=i.d,c=t.length;break;case 3:return li[i.q][0];default:return li[i.q][1]}break;case 104:switch(t.length){case 1:case 2:s=1+(i.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:s=i.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:s=i.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==i.u||"s"!=t&&"ss"!=t?(a=n>=2?3===n?1e3:100:1===n?10:1,(o=Math.round(a*(i.S+i.u)))>=60*a&&(o=0),"s"===t?0===o?"0":""+o/a:(r=ii(o,2+n),"ss"===t?r.substr(0,2):"."+r.substr(2,t.length-1))):ii(i.S,t.length);case 90:switch(t){case"[h]":case"[hh]":s=24*i.D+i.H;break;case"[m]":case"[mm]":s=60*(24*i.D+i.H)+i.M;break;case"[s]":case"[ss]":s=60*(60*(24*i.D+i.H)+i.M)+Math.round(i.S+i.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:s=l,c=1}return c>0?ii(s,c):""}function wi(e){if(e.length<=3)return e;for(var t=e.length%3,i=e.substr(0,t);t!=e.length;t+=3)i+=(i.length>0?",":"")+e.substr(t,3);return i}var Ti=/%/g;function _i(e,t){var i,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+_i(e,-t);var s=e.indexOf(".");-1===s&&(s=e.indexOf("E"));var r=Math.floor(Math.log(t)*Math.LOG10E)%s;if(r<0&&(r+=s),-1===(i=(t/Math.pow(10,r)).toPrecision(n+1+(s+r)%s)).indexOf("e")){var o=Math.floor(Math.log(t)*Math.LOG10E);for(-1===i.indexOf(".")?i=i.charAt(0)+"."+i.substr(1)+"E+"+(o-i.length+r):i+="E+"+(o-r);"0."===i.substr(0,2);)i=(i=i.charAt(0)+i.substr(2,s)+"."+i.substr(2+s)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");i=i.replace(/\+-/,"-")}i=i.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,i,n){return t+i+n.substr(0,(s+r)%s)+"."+n.substr(r)+"E"}))}else i=t.toExponential(n);return e.match(/E\+00$/)&&i.match(/e[+-]\d$/)&&(i=i.substr(0,i.length-1)+"0"+i.charAt(i.length-1)),e.match(/E\-/)&&i.match(/e\+/)&&(i=i.replace(/e\+/,"e")),i.replace("e","E")}var Mi=/# (\?+)( ?)\/( ?)(\d+)/;var Pi=/^#*0*\.([0#]+)/,Ci=/\).*[0#]/,Ai=/\(###\) ###\\?-####/;function Ni(e){for(var t,i="",n=0;n!=e.length;++n)switch(t=e.charCodeAt(n)){case 35:break;case 63:i+=" ";break;case 48:i+="0";break;default:i+=String.fromCharCode(t)}return i}function Li(e,t){var i=Math.pow(10,t);return""+Math.round(e*i)/i}function ki(e,t){var i=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(i*n)).length?0:Math.round(i*n)}function Ii(e,t,i){if(40===e.charCodeAt(0)&&!t.match(Ci)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return i>=0?Ii("n",n,i):"("+Ii("n",n,-i)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,i){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return Di(e,t.substr(0,n),i/Math.pow(10,3*(t.length-n)))}(e,t,i);if(-1!==t.indexOf("%"))return function(e,t,i){var n=t.replace(Ti,""),s=t.length-n.length;return Di(e,n,i*Math.pow(10,2*s))+dn("%",s)}(e,t,i);if(-1!==t.indexOf("E"))return _i(t,i);if(36===t.charCodeAt(0))return"$"+Ii(e,t.substr(" "==t.charAt(1)?2:1),i);var s,r,o,a,l=Math.abs(i),c=i<0?"-":"";if(t.match(/^00+$/))return c+oi(l,t.length);if(t.match(/^[#?]+$/))return"0"===(s=oi(i,0))&&(s=""),s.length>t.length?s:Ni(t.substr(0,t.length-s.length))+s;if(r=t.match(Mi))return function(e,t,i){var n=parseInt(e[4],10),s=Math.round(t*n),r=Math.floor(s/n),o=s-r*n,a=n;return i+(0===r?"":""+r)+" "+(0===o?dn(" ",e[1].length+1+e[4].length):ni(o,e[1].length)+e[2]+"/"+e[3]+ii(a,e[4].length))}(r,l,c);if(t.match(/^#+0+$/))return c+oi(l,t.length-t.indexOf("0"));if(r=t.match(Pi))return s=Li(i,r[1].length).replace(/^([^\.]+)$/,"$1."+Ni(r[1])).replace(/\.$/,"."+Ni(r[1])).replace(/\.(\d*)$/,(function(e,t){return"."+t+dn("0",Ni(r[1]).length-t.length)})),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),r=t.match(/^(0*)\.(#*)$/))return c+Li(l,r[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,r[1].length?"0.":".");if(r=t.match(/^#{1,3},##0(\.?)$/))return c+wi(oi(l,0));if(r=t.match(/^#,##0\.([#0]*0)$/))return i<0?"-"+Ii(e,t,-i):wi(""+(Math.floor(i)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(i,r[1].length)))+"."+ii(ki(i,r[1].length),r[1].length);if(r=t.match(/^#,#*,#0/))return Ii(e,t.replace(/^#,#*,/,""),i);if(r=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=ti(Ii(e,t.replace(/[\\-]/g,""),i)),o=0,ti(ti(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return o<s.length?s.charAt(o++):"0"===e?"0":""})));if(t.match(Ai))return"("+(s=Ii(e,"##########",i)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var h="";if(r=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(r[4].length,7),a=fi(l,Math.pow(10,o)-1,!1),s=""+c," "==(h=Di("n",r[1],a[1])).charAt(h.length-1)&&(h=h.substr(0,h.length-1)+"0"),s+=h+r[2]+"/"+r[3],(h=si(a[2],o)).length<r[4].length&&(h=Ni(r[4].substr(r[4].length-h.length))+h),s+=h;if(r=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(r[1].length,r[4].length),7),c+((a=fi(l,Math.pow(10,o)-1,!0))[0]||(a[1]?"":"0"))+" "+(a[1]?ni(a[1],o)+r[2]+"/"+r[3]+si(a[2],o):dn(" ",2*o+1+r[2].length+r[3].length));if(r=t.match(/^[#0?]+$/))return s=oi(i,0),t.length<=s.length?s:Ni(t.substr(0,t.length-s.length))+s;if(r=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+i.toFixed(Math.min(r[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var u=t.indexOf(".")-o,d=t.length-s.length-u;return Ni(t.substr(0,u)+s+t.substr(t.length-d))}if(r=t.match(/^00,000\.([#0]*0)$/))return o=ki(i,r[1].length),i<0?"-"+Ii(e,t,-i):wi(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(i)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?ii(0,3-e.length):"")+e}))+"."+ii(o,r[1].length);switch(t){case"###,##0.00":return Ii(e,"#,##0.00",i);case"###,###":case"##,###":case"#,###":var f=wi(oi(l,0));return"0"!==f?c+f:"";case"###,###.00":return Ii(e,"###,##0.00",i).replace(/^0\./,".");case"#,###.00":return Ii(e,"#,##0.00",i).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Ri(e,t){var i,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+Ri(e,-t);var s=e.indexOf(".");-1===s&&(s=e.indexOf("E"));var r=Math.floor(Math.log(t)*Math.LOG10E)%s;if(r<0&&(r+=s),!(i=(t/Math.pow(10,r)).toPrecision(n+1+(s+r)%s)).match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);-1===i.indexOf(".")?i=i.charAt(0)+"."+i.substr(1)+"E+"+(o-i.length+r):i+="E+"+(o-r),i=i.replace(/\+-/,"-")}i=i.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,i,n){return t+i+n.substr(0,(s+r)%s)+"."+n.substr(r)+"E"}))}else i=t.toExponential(n);return e.match(/E\+00$/)&&i.match(/e[+-]\d$/)&&(i=i.substr(0,i.length-1)+"0"+i.charAt(i.length-1)),e.match(/E\-/)&&i.match(/e\+/)&&(i=i.replace(/e\+/,"e")),i.replace("e","E")}function Oi(e,t,i){if(40===e.charCodeAt(0)&&!t.match(Ci)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return i>=0?Oi("n",n,i):"("+Oi("n",n,-i)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,i){for(var n=t.length-1;44===t.charCodeAt(n-1);)--n;return Di(e,t.substr(0,n),i/Math.pow(10,3*(t.length-n)))}(e,t,i);if(-1!==t.indexOf("%"))return function(e,t,i){var n=t.replace(Ti,""),s=t.length-n.length;return Di(e,n,i*Math.pow(10,2*s))+dn("%",s)}(e,t,i);if(-1!==t.indexOf("E"))return Ri(t,i);if(36===t.charCodeAt(0))return"$"+Oi(e,t.substr(" "==t.charAt(1)?2:1),i);var s,r,o,a,l=Math.abs(i),c=i<0?"-":"";if(t.match(/^00+$/))return c+ii(l,t.length);if(t.match(/^[#?]+$/))return s=""+i,0===i&&(s=""),s.length>t.length?s:Ni(t.substr(0,t.length-s.length))+s;if(r=t.match(Mi))return function(e,t,i){return i+(0===t?"":""+t)+dn(" ",e[1].length+2+e[4].length)}(r,l,c);if(t.match(/^#+0+$/))return c+ii(l,t.length-t.indexOf("0"));if(r=t.match(Pi))return s=(s=(""+i).replace(/^([^\.]+)$/,"$1."+Ni(r[1])).replace(/\.$/,"."+Ni(r[1]))).replace(/\.(\d*)$/,(function(e,t){return"."+t+dn("0",Ni(r[1]).length-t.length)})),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),r=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,r[1].length?"0.":".");if(r=t.match(/^#{1,3},##0(\.?)$/))return c+wi(""+l);if(r=t.match(/^#,##0\.([#0]*0)$/))return i<0?"-"+Oi(e,t,-i):wi(""+i)+"."+dn("0",r[1].length);if(r=t.match(/^#,#*,#0/))return Oi(e,t.replace(/^#,#*,/,""),i);if(r=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=ti(Oi(e,t.replace(/[\\-]/g,""),i)),o=0,ti(ti(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return o<s.length?s.charAt(o++):"0"===e?"0":""})));if(t.match(Ai))return"("+(s=Oi(e,"##########",i)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var h="";if(r=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(r[4].length,7),a=fi(l,Math.pow(10,o)-1,!1),s=""+c," "==(h=Di("n",r[1],a[1])).charAt(h.length-1)&&(h=h.substr(0,h.length-1)+"0"),s+=h+r[2]+"/"+r[3],(h=si(a[2],o)).length<r[4].length&&(h=Ni(r[4].substr(r[4].length-h.length))+h),s+=h;if(r=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(r[1].length,r[4].length),7),c+((a=fi(l,Math.pow(10,o)-1,!0))[0]||(a[1]?"":"0"))+" "+(a[1]?ni(a[1],o)+r[2]+"/"+r[3]+si(a[2],o):dn(" ",2*o+1+r[2].length+r[3].length));if(r=t.match(/^[#0?]+$/))return s=""+i,t.length<=s.length?s:Ni(t.substr(0,t.length-s.length))+s;if(r=t.match(/^([#0]+)\.([#0]+)$/)){s=""+i.toFixed(Math.min(r[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var u=t.indexOf(".")-o,d=t.length-s.length-u;return Ni(t.substr(0,u)+s+t.substr(t.length-d))}if(r=t.match(/^00,000\.([#0]*0)$/))return i<0?"-"+Oi(e,t,-i):wi(""+i).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?ii(0,3-e.length):"")+e}))+"."+ii(0,r[1].length);switch(t){case"###,###":case"##,###":case"#,###":var f=wi(""+l);return"0"!==f?c+f:"";default:if(t.match(/\.[0#?]*$/))return Oi(e,t.slice(0,t.lastIndexOf(".")),i)+Ni(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Di(e,t,i){return(0|i)===i?Oi(e,t,i):Ii(e,t,i)}var Bi=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Fi(e){for(var t=0,i="",n="";t<e.length;)switch(i=e.charAt(t)){case"G":ai(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(n=i;"]"!==e.charAt(t++)&&t<e.length;)n+=e.charAt(t);if(n.match(Bi))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(i=e.charAt(++t))>-1||"\\"==i&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===i;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var Vi=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function ji(e,t){if(null==t)return!1;var i=parseFloat(t[2]);switch(t[1]){case"=":if(e==i)return!0;break;case">":if(e>i)return!0;break;case"<":if(e<i)return!0;break;case"<>":if(e!=i)return!0;break;case">=":if(e>=i)return!0;break;case"<=":if(e<=i)return!0}return!1}function Gi(e,t){var i=function(e){for(var t=[],i=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:i=!i;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),!0===i)throw new Error("Format |"+e+"| unterminated string ");return t}(e),n=i.length,s=i[n-1].indexOf("@");if(n<4&&s>-1&&--n,i.length>4)throw new Error("cannot find right format for |"+i.join("|")+"|");if("number"!==typeof t)return[4,4===i.length||s>-1?i[i.length-1]:"@"];switch(i.length){case 1:i=s>-1?["General","General","General",i[0]]:[i[0],i[0],i[0],"@"];break;case 2:i=s>-1?[i[0],i[0],i[0],i[1]]:[i[0],i[1],i[0],"@"];break;case 3:i=s>-1?[i[0],i[1],i[0],i[2]]:[i[0],i[1],i[2],"@"]}var r=t>0?i[0]:t<0?i[1]:i[2];if(-1===i[0].indexOf("[")&&-1===i[1].indexOf("["))return[n,r];if(null!=i[0].match(/\[[=<>]/)||null!=i[1].match(/\[[=<>]/)){var o=i[0].match(Vi),a=i[1].match(Vi);return ji(t,o)?[n,i[0]]:ji(t,a)?[n,i[1]]:[n,i[null!=o&&null!=a?2:1]]}return[n,r]}function Wi(e,t,i){null==i&&(i={});var n="";switch(typeof e){case"string":n="m/d/yy"==e&&i.dateNF?i.dateNF:e;break;case"number":null==(n=14==e&&i.dateNF?i.dateNF:(null!=i.table?i.table:hi)[e])&&(n=i.table&&i.table[ui[e]]||hi[ui[e]]),null==n&&(n=di[e]||"General")}if(ai(n,0))return Si(t,i);t instanceof Date&&(t=vi(t,i.date1904));var s=Gi(n,t);if(ai(s[1]))return Si(t,i);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,i,n){for(var s,r,o,a=[],l="",c=0,h="",u="t",d="H";c<e.length;)switch(h=e.charAt(c)){case"G":if(!ai(e,c))throw new Error("unrecognized character "+h+" in "+e);a[a.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(o=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(o);a[a.length]={t:"t",v:l},++c;break;case"\\":var f=e.charAt(++c),p="("===f||")"===f?f:"t";a[a.length]={t:p,v:f},++c;break;case"_":a[a.length]={t:"t",v:" "},c+=2;break;case"@":a[a.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==s&&null==(s=pi(t,i,"2"===e.charAt(c+1))))return"";a[a.length]={t:"X",v:e.substr(c,2)},u=h,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":h=h.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==s&&null==(s=pi(t,i)))return"";for(l=h;++c<e.length&&e.charAt(c).toLowerCase()===h;)l+=h;"m"===h&&"h"===u.toLowerCase()&&(h="M"),"h"===h&&(h=d),a[a.length]={t:h,v:l},u=h;break;case"A":case"a":case"\u4e0a":var m={t:h,v:h};if(null==s&&(s=pi(t,i)),"A/P"===e.substr(c,3).toUpperCase()?(null!=s&&(m.v=s.H>=12?"P":"A"),m.t="T",d="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=s&&(m.v=s.H>=12?"PM":"AM"),m.t="T",c+=5,d="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=s&&(m.v=s.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),m.t="T",c+=5,d="h"):(m.t="t",++c),null==s&&"T"===m.t)return"";a[a.length]=m,u=h;break;case"[":for(l=h;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(Bi)){if(null==s&&null==(s=pi(t,i)))return"";a[a.length]={t:"Z",v:l.toLowerCase()},u=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",Fi(e)||(a[a.length]={t:"t",v:l}));break;case".":if(null!=s){for(l=h;++c<e.length&&"0"===(h=e.charAt(c));)l+=h;a[a.length]={t:"s",v:l};break}case"0":case"#":for(l=h;++c<e.length&&"0#?.,E+-%".indexOf(h=e.charAt(c))>-1;)l+=h;a[a.length]={t:"n",v:l};break;case"?":for(l=h;e.charAt(++c)===h;)l+=h;a[a.length]={t:h,v:l},u=h;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":a[a.length]={t:1===n?"t":h,v:h},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=h;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);a[a.length]={t:"D",v:l};break;case" ":a[a.length]={t:h,v:h},++c;break;case"$":a[a.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(h))throw new Error("unrecognized character "+h+" in "+e);a[a.length]={t:"t",v:h},++c}var g,b=0,v=0;for(c=a.length-1,u="t";c>=0;--c)switch(a[c].t){case"h":case"H":a[c].t=d,u="h",b<1&&(b=1);break;case"s":(g=a[c].v.match(/\.0+$/))&&(v=Math.max(v,g[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":u=a[c].t;break;case"m":"s"===u&&(a[c].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&a[c].v.match(/[Hh]/)&&(b=1),b<2&&a[c].v.match(/[Mm]/)&&(b=2),b<3&&a[c].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:s.u>=.5&&(s.u=0,++s.S),s.S>=60&&(s.S=0,++s.M),s.M>=60&&(s.M=0,++s.H);break;case 2:s.u>=.5&&(s.u=0,++s.S),s.S>=60&&(s.S=0,++s.M)}var y,x="";for(c=0;c<a.length;++c)switch(a[c].t){case"t":case"T":case" ":case"D":break;case"X":a[c].v="",a[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[c].v=Ei(a[c].t.charCodeAt(0),a[c].v,s,v),a[c].t="t";break;case"n":case"?":for(y=c+1;null!=a[y]&&("?"===(h=a[y].t)||"D"===h||(" "===h||"t"===h)&&null!=a[y+1]&&("?"===a[y+1].t||"t"===a[y+1].t&&"/"===a[y+1].v)||"("===a[c].t&&(" "===h||"n"===h||")"===h)||"t"===h&&("/"===a[y].v||" "===a[y].v&&null!=a[y+1]&&"?"==a[y+1].t));)a[c].v+=a[y].v,a[y]={v:"",t:";"},++y;x+=a[c].v,c=y-1;break;case"G":a[c].t="t",a[c].v=Si(t,i)}var S,E,w="";if(x.length>0){40==x.charCodeAt(0)?(S=t<0&&45===x.charCodeAt(0)?-t:t,E=Di("n",x,S)):(E=Di("n",x,S=t<0&&n>1?-t:t),S<0&&a[0]&&"t"==a[0].t&&(E=E.substr(1),a[0].v="-"+a[0].v)),y=E.length-1;var T=a.length;for(c=0;c<a.length;++c)if(null!=a[c]&&"t"!=a[c].t&&a[c].v.indexOf(".")>-1){T=c;break}var _=a.length;if(T===a.length&&-1===E.indexOf("E")){for(c=a.length-1;c>=0;--c)null!=a[c]&&-1!=="n?".indexOf(a[c].t)&&(y>=a[c].v.length-1?(y-=a[c].v.length,a[c].v=E.substr(y+1,a[c].v.length)):y<0?a[c].v="":(a[c].v=E.substr(0,y+1),y=-1),a[c].t="t",_=c);y>=0&&_<a.length&&(a[_].v=E.substr(0,y+1)+a[_].v)}else if(T!==a.length&&-1===E.indexOf("E")){for(y=E.indexOf(".")-1,c=T;c>=0;--c)if(null!=a[c]&&-1!=="n?".indexOf(a[c].t)){for(r=a[c].v.indexOf(".")>-1&&c===T?a[c].v.indexOf(".")-1:a[c].v.length-1,w=a[c].v.substr(r+1);r>=0;--r)y>=0&&("0"===a[c].v.charAt(r)||"#"===a[c].v.charAt(r))&&(w=E.charAt(y--)+w);a[c].v=w,a[c].t="t",_=c}for(y>=0&&_<a.length&&(a[_].v=E.substr(0,y+1)+a[_].v),y=E.indexOf(".")+1,c=T;c<a.length;++c)if(null!=a[c]&&(-1!=="n?(".indexOf(a[c].t)||c===T)){for(r=a[c].v.indexOf(".")>-1&&c===T?a[c].v.indexOf(".")+1:0,w=a[c].v.substr(0,r);r<a[c].v.length;++r)y<E.length&&(w+=E.charAt(y++));a[c].v=w,a[c].t="t",_=c}}}for(c=0;c<a.length;++c)null!=a[c]&&"n?".indexOf(a[c].t)>-1&&(S=n>1&&t<0&&c>0&&"-"===a[c-1].v?-t:t,a[c].v=Di(a[c].t,a[c].v,S),a[c].t="t");var M="";for(c=0;c!==a.length;++c)null!=a[c]&&(M+=a[c].v);return M}(s[1],t,i,s[0])}function zi(e,t){if("number"!=typeof t){t=+t||-1;for(var i=0;i<392;++i)if(void 0!=hi[i]){if(hi[i]==e){t=i;break}}else t<0&&(t=i);t<0&&(t=391)}return hi[t]=e,t}function Ui(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',hi=e}var Hi={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Xi=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var Yi=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),i=0;256!=i;++i)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=i)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[i]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var i=function(e){var t=0,i=0,n=0,s="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(n=0;256!=n;++n)s[n]=e[n];for(n=0;256!=n;++n)for(i=e[n],t=256+n;t<4096;t+=256)i=s[t]=i>>>8^e[255&i];var r=[];for(n=1;16!=n;++n)r[n-1]="undefined"!==typeof Int32Array?s.subarray(256*n,256*n+256):s.slice(256*n,256*n+256);return r}(t),n=i[0],s=i[1],r=i[2],o=i[3],a=i[4],l=i[5],c=i[6],h=i[7],u=i[8],d=i[9],f=i[10],p=i[11],m=i[12],g=i[13],b=i[14];return e.table=t,e.bstr=function(e,i){for(var n=~i,s=0,r=e.length;s<r;)n=n>>>8^t[255&(n^e.charCodeAt(s++))];return~n},e.buf=function(e,i){for(var v=~i,y=e.length-15,x=0;x<y;)v=b[e[x++]^255&v]^g[e[x++]^v>>8&255]^m[e[x++]^v>>16&255]^p[e[x++]^v>>>24]^f[e[x++]]^d[e[x++]]^u[e[x++]]^h[e[x++]]^c[e[x++]]^l[e[x++]]^a[e[x++]]^o[e[x++]]^r[e[x++]]^s[e[x++]]^n[e[x++]]^t[e[x++]];for(y+=15;x<y;)v=v>>>8^t[255&(v^e[x++])];return~v},e.str=function(e,i){for(var n=~i,s=0,r=e.length,o=0,a=0;s<r;)(o=e.charCodeAt(s++))<128?n=n>>>8^t[255&(n^o)]:o<2048?n=(n=n>>>8^t[255&(n^(192|o>>6&31))])>>>8^t[255&(n^(128|63&o))]:o>=55296&&o<57344?(o=64+(1023&o),a=1023&e.charCodeAt(s++),n=(n=(n=(n=n>>>8^t[255&(n^(240|o>>8&7))])>>>8^t[255&(n^(128|o>>2&63))])>>>8^t[255&(n^(128|a>>6&15|(3&o)<<4))])>>>8^t[255&(n^(128|63&a))]):n=(n=(n=n>>>8^t[255&(n^(224|o>>12&15))])>>>8^t[255&(n^(128|o>>6&63))])>>>8^t[255&(n^(128|63&o))];return~n},e}(),Ki=function(){var e,t={};function i(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:i(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function n(e){if("/"==e.charAt(e.length-1))return n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function s(e,t){"string"===typeof t&&(t=new Date(t));var i=t.getHours();i=(i=i<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,i);var n=t.getFullYear()-1980;n=(n=n<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,n)}function r(e){zs(e,0);for(var t={},i=0;e.l<=e.length-4;){var n=e.read_shift(2),s=e.read_shift(2),r=e.l+s,o={};if(21589===n)1&(i=e.read_shift(1))&&(o.mtime=e.read_shift(4)),s>5&&(2&i&&(o.atime=e.read_shift(4)),4&i&&(o.ctime=e.read_shift(4))),o.mtime&&(o.mt=new Date(1e3*o.mtime));e.l=r,t[n]=o}return t}function o(){return e||(e={})}function a(e,t){if(80==e[0]&&75==e[1])return ne(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=E(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var i=t&&t.root||"",n=(Ht&&Buffer.isBuffer(e)?e.toString("binary"):E(e)).split("\r\n"),s=0,r="";for(s=0;s<n.length;++s)if(r=n[s],/^Content-Location:/i.test(r)&&(r=r.slice(r.indexOf("file")),i||(i=r.slice(0,r.lastIndexOf("/")+1)),r.slice(0,i.length)!=i))for(;i.length>0&&(i=(i=i.slice(0,i.length-1)).slice(0,i.lastIndexOf("/")+1),r.slice(0,i.length)!=i););var o=(n[1]||"").match(/boundary="(.*?)"/);if(!o)throw new Error("MAD cannot find boundary");var a="--"+(o[1]||""),l=[],c=[],h={FileIndex:l,FullPaths:c};d(h);var u,f=0;for(s=0;s<n.length;++s){var p=n[s];p!==a&&p!==a+"--"||(f++&&ce(h,n.slice(u,s),i),u=s)}return h}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var i,n,s,r,o,a,f=512,p=[],m=e.slice(0,512);zs(m,0);var g=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(v,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(i=g[0]){case 3:f=512;break;case 4:f=4096;break;case 0:if(0==g[1])return ne(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+i)}512!==f&&zs(m=e.slice(0,f),28);var y=e.slice(0,f);!function(e,t){var i=9;switch(e.l+=2,i=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+i);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+i);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+i)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,i);var x=m.read_shift(4,"i");if(3===i&&0!==x)throw new Error("# Directory Sectors: Expected 0 saw "+x);m.l+=4,r=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),o=m.read_shift(4,"i"),n=m.read_shift(4,"i"),a=m.read_shift(4,"i"),s=m.read_shift(4,"i");for(var S=-1,w=0;w<109&&!((S=m.read_shift(4,"i"))<0);++w)p[w]=S;var T=function(e,t){for(var i=Math.ceil(e.length/t)-1,n=[],s=1;s<i;++s)n[s-1]=e.slice(s*t,(s+1)*t);return n[i-1]=e.slice(i*t),n}(e,f);c(a,s,T,f,p);var _=function(e,t,i,n){var s=e.length,r=[],o=[],a=[],l=[],c=n-1,h=0,u=0,d=0,f=0;for(h=0;h<s;++h)if(a=[],(d=h+t)>=s&&(d-=s),!o[d]){l=[];var p=[];for(u=d;u>=0;){p[u]=!0,o[u]=!0,a[a.length]=u,l.push(e[u]);var m=i[Math.floor(4*u/n)];if(n<4+(f=4*u&c))throw new Error("FAT boundary crossed: "+u+" 4 "+n);if(!e[m])break;if(p[u=Os(e[m],f)])break}r[d]={nodes:a,data:hs([l])}}return r}(T,r,p,f);_[r].name="!Directory",n>0&&o!==b&&(_[o].name="!MiniFAT"),_[p[0]].name="!FAT",_.fat_addrs=p,_.ssz=f;var M=[],P=[],C=[];!function(e,t,i,n,s,r,o,a){for(var c,d=0,f=n.length?2:0,p=t[e].data,m=0,g=0;m<p.length;m+=128){var v=p.slice(m,m+128);zs(v,64),g=v.read_shift(2),c=ds(v,0,g-f),n.push(c);var y={name:c,type:v.read_shift(1),color:v.read_shift(1),L:v.read_shift(4,"i"),R:v.read_shift(4,"i"),C:v.read_shift(4,"i"),clsid:v.read_shift(16),state:v.read_shift(4,"i"),start:0,size:0};0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(y.ct=u(v,v.l-8)),0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(y.mt=u(v,v.l-8)),y.start=v.read_shift(4,"i"),y.size=v.read_shift(4,"i"),y.size<0&&y.start<0&&(y.size=y.type=0,y.start=b,y.name=""),5===y.type?(d=y.start,s>0&&d!==b&&(t[d].name="!StreamData")):y.size>=4096?(y.storage="fat",void 0===t[y.start]&&(t[y.start]=h(i,y.start,t.fat_addrs,t.ssz)),t[y.start].name=y.name,y.content=t[y.start].data.slice(0,y.size)):(y.storage="minifat",y.size<0?y.size=0:d!==b&&y.start!==b&&t[d]&&(y.content=l(y,t[d].data,(t[a]||{}).data))),y.content&&zs(y.content,0),r[c]=y,o.push(y)}}(r,_,T,M,n,{},P,o),function(e,t,i){for(var n=0,s=0,r=0,o=0,a=0,l=i.length,c=[],h=[];n<l;++n)c[n]=h[n]=n,t[n]=i[n];for(;a<h.length;++a)s=e[n=h[a]].L,r=e[n].R,o=e[n].C,c[n]===n&&(-1!==s&&c[s]!==s&&(c[n]=c[s]),-1!==r&&c[r]!==r&&(c[n]=c[r])),-1!==o&&(c[o]=n),-1!==s&&n!=c[n]&&(c[s]=c[n],h.lastIndexOf(s)<a&&h.push(s)),-1!==r&&n!=c[n]&&(c[r]=c[n],h.lastIndexOf(r)<a&&h.push(r));for(n=1;n<l;++n)c[n]===n&&(-1!==r&&c[r]!==r?c[n]=c[r]:-1!==s&&c[s]!==s&&(c[n]=c[s]));for(n=1;n<l;++n)if(0!==e[n].type){if((a=n)!=c[a])do{a=c[a],t[n]=t[a]+"/"+t[n]}while(0!==a&&-1!==c[a]&&a!=c[a]);c[n]=-1}for(t[0]+="/",n=1;n<l;++n)2!==e[n].type&&(t[n]+="/")}(P,C,M),M.shift();var A={FileIndex:P,FullPaths:C};return t&&t.raw&&(A.raw={header:y,sectors:T}),A}function l(e,t,i){for(var n=e.start,s=e.size,r=[],o=n;i&&s>0&&o>=0;)r.push(t.slice(o*g,o*g+g)),s-=g,o=Os(i,4*o);return 0===r.length?Hs(0):Qt(r).slice(0,e.size)}function c(e,t,i,n,s){var r=b;if(e===b){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var o=i[e],a=(n>>>2)-1;if(!o)return;for(var l=0;l<a&&(r=Os(o,4*l))!==b;++l)s.push(r);c(Os(o,n-4),t-1,i,n,s)}}function h(e,t,i,n,s){var r=[],o=[];s||(s=[]);var a=n-1,l=0,c=0;for(l=t;l>=0;){s[l]=!0,r[r.length]=l,o.push(e[l]);var h=i[Math.floor(4*l/n)];if(n<4+(c=4*l&a))throw new Error("FAT boundary crossed: "+l+" 4 "+n);if(!e[h])break;l=Os(e[h],c)}return{nodes:r,data:hs([o])}}function u(e,t){return new Date(1e3*(Rs(e,t+4)/1e7*Math.pow(2,32)+Rs(e,t)/1e7-11644473600))}function d(e,t){var i=t||{},n=i.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=n+"/",e.FileIndex[0]={name:n,type:5}),i.CLSID&&(e.FileIndex[0].clsid=i.CLSID),function(e){var t="\x01Sh33tJ5";if(Ki.find(e,"/"+t))return;var i=Hs(4);i[0]=55,i[1]=i[3]=50,i[2]=54,e.FileIndex.push({name:t,type:2,content:i,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),f(e)}(e)}function f(e,t){d(e);for(var s=!1,r=!1,o=e.FullPaths.length-1;o>=0;--o){var a=e.FileIndex[o];switch(a.type){case 0:r?s=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:r=!0,isNaN(a.R*a.L*a.C)&&(s=!0),a.R>-1&&a.L>-1&&a.R==a.L&&(s=!0);break;default:s=!0}}if(s||t){var l=new Date(1987,1,19),c=0,h=Object.create?Object.create(null):{},u=[];for(o=0;o<e.FullPaths.length;++o)h[e.FullPaths[o]]=!0,0!==e.FileIndex[o].type&&u.push([e.FullPaths[o],e.FileIndex[o]]);for(o=0;o<u.length;++o){var f=i(u[o][0]);(r=h[f])||(u.push([f,{name:n(f).replace("/",""),type:1,clsid:x,ct:l,mt:l,content:null}]),h[f]=!0)}for(u.sort((function(e,t){return function(e,t){for(var i=e.split("/"),n=t.split("/"),s=0,r=0,o=Math.min(i.length,n.length);s<o;++s){if(r=i[s].length-n[s].length)return r;if(i[s]!=n[s])return i[s]<n[s]?-1:1}return i.length-n.length}(e[0],t[0])})),e.FullPaths=[],e.FileIndex=[],o=0;o<u.length;++o)e.FullPaths[o]=u[o][0],e.FileIndex[o]=u[o][1];for(o=0;o<u.length;++o){var p=e.FileIndex[o],m=e.FullPaths[o];if(p.name=n(m).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||x,0===o)p.C=u.length>1?1:-1,p.size=0,p.type=5;else if("/"==m.slice(-1)){for(c=o+1;c<u.length&&i(e.FullPaths[c])!=m;++c);for(p.C=c>=u.length?-1:c,c=o+1;c<u.length&&i(e.FullPaths[c])!=i(m);++c);p.R=c>=u.length?-1:c,p.type=1}else i(e.FullPaths[o+1]||"")==i(m)&&(p.R=o+1),p.type=2}}}function p(e,t){var i=t||{};if("mad"==i.fileType)return function(e,t){for(var i=t||{},n=i.boundary||"SheetJS",s=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(n="------="+n).slice(2)+'"',"","",""],r=e.FullPaths[0],o=r,a=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(o=e.FullPaths[l].slice(r.length),(a=e.FileIndex[l]).size&&a.content&&"\x01Sh33tJ5"!=o){o=o.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,(function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"})).replace(/[\u0080-\uFFFF]/g,(function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"}));for(var c=a.content,h=Ht&&Buffer.isBuffer(c)?c.toString("binary"):E(c),u=0,d=Math.min(1024,h.length),f=0,p=0;p<=d;++p)(f=h.charCodeAt(p))>=32&&f<128&&++u;var m=u>=4*d/5;s.push(n),s.push("Content-Location: "+(i.root||"file:///C:/SheetJS/")+o),s.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),s.push("Content-Type: "+oe(a,o)),s.push(""),s.push(m?le(h):ae(h))}return s.push(n+"--\r\n"),s.join("\r\n")}(e,i);if(f(e),"zip"===i.fileType)return function(e,t){var i=t||{},n=[],r=[],o=Hs(1),a=i.compression?8:0,l=0;0;var c=0,h=0,u=0,d=0,f=e.FullPaths[0],p=f,m=e.FileIndex[0],g=[],b=0;for(c=1;c<e.FullPaths.length;++c)if(p=e.FullPaths[c].slice(f.length),(m=e.FileIndex[c]).size&&m.content&&"\x01Sh33tJ5"!=p){var v=u,y=Hs(p.length);for(h=0;h<p.length;++h)y.write_shift(1,127&p.charCodeAt(h));y=y.slice(0,y.l),g[d]=Yi.buf(m.content,0);var x=m.content;8==a&&(x=w(x)),(o=Hs(30)).write_shift(4,67324752),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,a),m.mt?s(o,m.mt):o.write_shift(4,0),o.write_shift(-4,8&l?0:g[d]),o.write_shift(4,8&l?0:x.length),o.write_shift(4,8&l?0:m.content.length),o.write_shift(2,y.length),o.write_shift(2,0),u+=o.length,n.push(o),u+=y.length,n.push(y),u+=x.length,n.push(x),8&l&&((o=Hs(12)).write_shift(-4,g[d]),o.write_shift(4,x.length),o.write_shift(4,m.content.length),u+=o.l,n.push(o)),(o=Hs(46)).write_shift(4,33639248),o.write_shift(2,0),o.write_shift(2,20),o.write_shift(2,l),o.write_shift(2,a),o.write_shift(4,0),o.write_shift(-4,g[d]),o.write_shift(4,x.length),o.write_shift(4,m.content.length),o.write_shift(2,y.length),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(4,0),o.write_shift(4,v),b+=o.l,r.push(o),b+=y.length,r.push(y),++d}return o=Hs(22),o.write_shift(4,101010256),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,d),o.write_shift(2,d),o.write_shift(4,b),o.write_shift(4,u),o.write_shift(2,0),Qt([Qt(n),Qt(r),o])}(e,i);var n=function(e){for(var t=0,i=0,n=0;n<e.FileIndex.length;++n){var s=e.FileIndex[n];if(s.content){var r=s.content.length;r>0&&(r<4096?t+=r+63>>6:i+=r+511>>9)}}for(var o=e.FullPaths.length+3>>2,a=t+127>>7,l=(t+7>>3)+i+o+a,c=l+127>>7,h=c<=109?0:Math.ceil((c-109)/127);l+c+h+127>>7>c;)h=++c<=109?0:Math.ceil((c-109)/127);var u=[1,h,c,a,o,i,t,0];return e.FileIndex[0].size=t<<6,u[7]=(e.FileIndex[0].start=u[0]+u[1]+u[2]+u[3]+u[4]+u[5])+(u[6]+7>>3),u}(e),r=Hs(n[7]<<9),o=0,a=0;for(o=0;o<8;++o)r.write_shift(1,y[o]);for(o=0;o<8;++o)r.write_shift(2,0);for(r.write_shift(2,62),r.write_shift(2,3),r.write_shift(2,65534),r.write_shift(2,9),r.write_shift(2,6),o=0;o<3;++o)r.write_shift(2,0);for(r.write_shift(4,0),r.write_shift(4,n[2]),r.write_shift(4,n[0]+n[1]+n[2]+n[3]-1),r.write_shift(4,0),r.write_shift(4,4096),r.write_shift(4,n[3]?n[0]+n[1]+n[2]-1:b),r.write_shift(4,n[3]),r.write_shift(-4,n[1]?n[0]-1:b),r.write_shift(4,n[1]),o=0;o<109;++o)r.write_shift(-4,o<n[2]?n[1]+o:-1);if(n[1])for(a=0;a<n[1];++a){for(;o<236+127*a;++o)r.write_shift(-4,o<n[2]?n[1]+o:-1);r.write_shift(-4,a===n[1]-1?b:a+1)}var l=function(e){for(a+=e;o<a-1;++o)r.write_shift(-4,o+1);e&&(++o,r.write_shift(-4,b))};for(a=o=0,a+=n[1];o<a;++o)r.write_shift(-4,S.DIFSECT);for(a+=n[2];o<a;++o)r.write_shift(-4,S.FATSECT);l(n[3]),l(n[4]);for(var c=0,h=0,u=e.FileIndex[0];c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&((h=u.content.length)<4096||(u.start=a,l(h+511>>9)));for(l(n[6]+7>>3);511&r.l;)r.write_shift(-4,S.ENDOFCHAIN);for(a=o=0,c=0;c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&(!(h=u.content.length)||h>=4096||(u.start=a,l(h+63>>6)));for(;511&r.l;)r.write_shift(-4,S.ENDOFCHAIN);for(o=0;o<n[4]<<2;++o){var d=e.FullPaths[o];if(d&&0!==d.length){u=e.FileIndex[o],0===o&&(u.start=u.size?u.start-1:b);var p=0===o&&i.root||u.name;if(h=2*(p.length+1),r.write_shift(64,p,"utf16le"),r.write_shift(2,h),r.write_shift(1,u.type),r.write_shift(1,u.color),r.write_shift(-4,u.L),r.write_shift(-4,u.R),r.write_shift(-4,u.C),u.clsid)r.write_shift(16,u.clsid,"hex");else for(c=0;c<4;++c)r.write_shift(4,0);r.write_shift(4,u.state||0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,u.start),r.write_shift(4,u.size),r.write_shift(4,0)}else{for(c=0;c<17;++c)r.write_shift(4,0);for(c=0;c<3;++c)r.write_shift(4,-1);for(c=0;c<12;++c)r.write_shift(4,0)}}for(o=1;o<e.FileIndex.length;++o)if((u=e.FileIndex[o]).size>=4096)if(r.l=u.start+1<<9,Ht&&Buffer.isBuffer(u.content))u.content.copy(r,r.l,0,u.size),r.l+=u.size+511&-512;else{for(c=0;c<u.size;++c)r.write_shift(1,u.content[c]);for(;511&c;++c)r.write_shift(1,0)}for(o=1;o<e.FileIndex.length;++o)if((u=e.FileIndex[o]).size>0&&u.size<4096)if(Ht&&Buffer.isBuffer(u.content))u.content.copy(r,r.l,0,u.size),r.l+=u.size+63&-64;else{for(c=0;c<u.size;++c)r.write_shift(1,u.content[c]);for(;63&c;++c)r.write_shift(1,0)}if(Ht)r.l=r.length;else for(;r.l<r.length;)r.write_shift(1,0);return r}t.version="1.2.1";var m,g=64,b=-2,v="d0cf11e0a1b11ae1",y=[208,207,17,224,161,177,26,225],x="00000000000000000000000000000000",S={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:b,FREESECT:-1,HEADER_SIGNATURE:v,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:x,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function E(e){for(var t=new Array(e.length),i=0;i<e.length;++i)t[i]=String.fromCharCode(e[i]);return t.join("")}function w(e){return m?m.deflateRawSync(e):K(e)}var T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],M=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function P(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var C="undefined"!==typeof Uint8Array,A=C?new Uint8Array(256):[],N=0;N<256;++N)A[N]=P(N);function L(e,t){var i=A[255&e];return t<=8?i>>>8-t:(i=i<<8|A[e>>8&255],t<=16?i>>>16-t:(i=i<<8|A[e>>16&255])>>>24-t)}function k(e,t){var i=7&t,n=t>>>3;return(e[n]|(i<=6?0:e[n+1]<<8))>>>i&3}function I(e,t){var i=7&t,n=t>>>3;return(e[n]|(i<=5?0:e[n+1]<<8))>>>i&7}function R(e,t){var i=7&t,n=t>>>3;return(e[n]|(i<=3?0:e[n+1]<<8))>>>i&31}function O(e,t){var i=7&t,n=t>>>3;return(e[n]|(i<=1?0:e[n+1]<<8))>>>i&127}function D(e,t,i){var n=7&t,s=t>>>3,r=(1<<i)-1,o=e[s]>>>n;return i<8-n?o&r:(o|=e[s+1]<<8-n,i<16-n?o&r:(o|=e[s+2]<<16-n,i<24-n?o&r:(o|=e[s+3]<<24-n)&r))}function B(e,t,i){var n=7&t,s=t>>>3;return n<=5?e[s]|=(7&i)<<n:(e[s]|=i<<n&255,e[s+1]=(7&i)>>8-n),t+3}function F(e,t,i){return i=(1&i)<<(7&t),e[t>>>3]|=i,t+1}function V(e,t,i){var n=t>>>3;return i<<=7&t,e[n]|=255&i,i>>>=8,e[n+1]=i,t+8}function j(e,t,i){var n=t>>>3;return i<<=7&t,e[n]|=255&i,i>>>=8,e[n+1]=255&i,e[n+2]=i>>>8,t+16}function G(e,t){var i=e.length,n=2*i>t?2*i:t+5,s=0;if(i>=t)return e;if(Ht){var r=Kt(n);if(e.copy)e.copy(r);else for(;s<e.length;++s)r[s]=e[s];return r}if(C){var o=new Uint8Array(n);if(o.set)o.set(e);else for(;s<i;++s)o[s]=e[s];return o}return e.length=n,e}function W(e){for(var t=new Array(e),i=0;i<e;++i)t[i]=0;return t}function z(e,t,i){var n=1,s=0,r=0,o=0,a=0,l=e.length,c=C?new Uint16Array(32):W(32);for(r=0;r<32;++r)c[r]=0;for(r=l;r<i;++r)e[r]=0;l=e.length;var h=C?new Uint16Array(l):W(l);for(r=0;r<l;++r)c[s=e[r]]++,n<s&&(n=s),h[r]=0;for(c[0]=0,r=1;r<=n;++r)c[r+16]=a=a+c[r-1]<<1;for(r=0;r<l;++r)0!=(a=e[r])&&(h[r]=c[a+16]++);var u=0;for(r=0;r<l;++r)if(0!=(u=e[r]))for(a=L(h[r],n)>>n-u,o=(1<<n+4-u)-1;o>=0;--o)t[a|o<<u]=15&u|r<<4;return n}var U=C?new Uint16Array(512):W(512),H=C?new Uint16Array(32):W(32);if(!C){for(var X=0;X<512;++X)U[X]=0;for(X=0;X<32;++X)H[X]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);z(e,H,32);var i=[];for(t=0;t<=143;t++)i.push(8);for(;t<=255;t++)i.push(9);for(;t<=279;t++)i.push(7);for(;t<=287;t++)i.push(8);z(i,U,288)}();var Y=function(){for(var e=C?new Uint8Array(32768):[],t=0,i=0;t<M.length-1;++t)for(;i<M[t+1];++i)e[i]=t;for(;i<32768;++i)e[i]=29;var n=C?new Uint8Array(259):[];for(t=0,i=0;t<_.length-1;++t)for(;i<_[t+1];++i)n[i]=t;return function(t,i){return t.length<8?function(e,t){for(var i=0;i<e.length;){var n=Math.min(65535,e.length-i),s=i+n==e.length;for(t.write_shift(1,+s),t.write_shift(2,n),t.write_shift(2,65535&~n);n-- >0;)t[t.l++]=e[i++]}return t.l}(t,i):function(t,i){for(var s=0,r=0,o=C?new Uint16Array(32768):[];r<t.length;){var a=Math.min(65535,t.length-r);if(a<10){for(7&(s=B(i,s,+!(r+a!=t.length)))&&(s+=8-(7&s)),i.l=s/8|0,i.write_shift(2,a),i.write_shift(2,65535&~a);a-- >0;)i[i.l++]=t[r++];s=8*i.l}else{s=B(i,s,+!(r+a!=t.length)+2);for(var l=0;a-- >0;){var c=t[r],h=-1,u=0;if((h=o[l=32767&(l<<5^c)])&&((h|=-32768&r)>r&&(h-=32768),h<r))for(;t[h+u]==t[r+u]&&u<250;)++u;if(u>2){(c=n[u])<=22?s=V(i,s,A[c+1]>>1)-1:(V(i,s,3),V(i,s+=5,A[c-23]>>5),s+=3);var d=c<8?0:c-4>>2;d>0&&(j(i,s,u-_[c]),s+=d),c=e[r-h],s=V(i,s,A[c]>>3),s-=3;var f=c<4?0:c-2>>1;f>0&&(j(i,s,r-h-M[c]),s+=f);for(var p=0;p<u;++p)o[l]=32767&r,l=32767&(l<<5^t[r]),++r;a-=u-1}else c<=143?c+=48:s=F(i,s,1),s=V(i,s,A[c]),o[l]=32767&r,++r}s=V(i,s,0)-1}}return i.l=(s+7)/8|0,i.l}(t,i)}}();function K(e){var t=Hs(50+Math.floor(1.1*e.length)),i=Y(e,t);return t.slice(0,i)}var q=C?new Uint16Array(32768):W(32768),$=C?new Uint16Array(32768):W(32768),Z=C?new Uint16Array(128):W(128),Q=1,J=1;function ee(e,t){var i=R(e,t)+257,n=R(e,t+=5)+1,s=function(e,t){var i=7&t,n=t>>>3;return(e[n]|(i<=4?0:e[n+1]<<8))>>>i&15}(e,t+=5)+4;t+=4;for(var r=0,o=C?new Uint8Array(19):W(19),a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=C?new Uint8Array(8):W(8),h=C?new Uint8Array(8):W(8),u=o.length,d=0;d<s;++d)o[T[d]]=r=I(e,t),l<r&&(l=r),c[r]++,t+=3;var f=0;for(c[0]=0,d=1;d<=l;++d)h[d]=f=f+c[d-1]<<1;for(d=0;d<u;++d)0!=(f=o[d])&&(a[d]=h[f]++);var p=0;for(d=0;d<u;++d)if(0!=(p=o[d])){f=A[a[d]]>>8-p;for(var m=(1<<7-p)-1;m>=0;--m)Z[f|m<<p]=7&p|d<<3}var g=[];for(l=1;g.length<i+n;)switch(t+=7&(f=Z[O(e,t)]),f>>>=3){case 16:for(r=3+k(e,t),t+=2,f=g[g.length-1];r-- >0;)g.push(f);break;case 17:for(r=3+I(e,t),t+=3;r-- >0;)g.push(0);break;case 18:for(r=11+O(e,t),t+=7;r-- >0;)g.push(0);break;default:g.push(f),l<f&&(l=f)}var b=g.slice(0,i),v=g.slice(i);for(d=i;d<286;++d)b[d]=0;for(d=n;d<30;++d)v[d]=0;return Q=z(b,q,286),J=z(v,$,30),t}function te(e,t){var i=function(e,t){if(3==e[0]&&!(3&e[1]))return[Yt(t),2];for(var i=0,n=0,s=Kt(t||1<<18),r=0,o=s.length>>>0,a=0,l=0;0==(1&n);)if(n=I(e,i),i+=3,n>>>1!=0)for(n>>1==1?(a=9,l=5):(i=ee(e,i),a=Q,l=J);;){!t&&o<r+32767&&(o=(s=G(s,r+32767)).length);var c=D(e,i,a),h=n>>>1==1?U[c]:q[c];if(i+=15&h,0===((h>>>=4)>>>8&255))s[r++]=h;else{if(256==h)break;var u=(h-=257)<8?0:h-4>>2;u>5&&(u=0);var d=r+_[h];u>0&&(d+=D(e,i,u),i+=u),c=D(e,i,l),i+=15&(h=n>>>1==1?H[c]:$[c]);var f=(h>>>=4)<4?0:h-2>>1,p=M[h];for(f>0&&(p+=D(e,i,f),i+=f),!t&&o<d&&(o=(s=G(s,d+100)).length);r<d;)s[r]=s[r-p],++r}}else{7&i&&(i+=8-(7&i));var m=e[i>>>3]|e[1+(i>>>3)]<<8;if(i+=32,m>0)for(!t&&o<r+m&&(o=(s=G(s,r+m)).length);m-- >0;)s[r++]=e[i>>>3],i+=8}return t?[s,i+7>>>3]:[s.slice(0,r),i+7>>>3]}(e.slice(e.l||0),t);return e.l+=i[1],i[0]}function ie(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function ne(e,t){var i=e;zs(i,0);var n={FileIndex:[],FullPaths:[]};d(n,{root:t.root});for(var s=i.length-4;(80!=i[s]||75!=i[s+1]||5!=i[s+2]||6!=i[s+3])&&s>=0;)--s;i.l=s+4,i.l+=4;var o=i.read_shift(2);i.l+=6;var a=i.read_shift(4);for(i.l=a,s=0;s<o;++s){i.l+=20;var l=i.read_shift(4),c=i.read_shift(4),h=i.read_shift(2),u=i.read_shift(2),f=i.read_shift(2);i.l+=8;var p=i.read_shift(4),m=r(i.slice(i.l+h,i.l+h+u));i.l+=h+u+f;var g=i.l;i.l=p+4,se(i,l,c,n,m),i.l=g}return n}function se(e,t,i,n,s){e.l+=2;var o=e.read_shift(2),a=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),i=65535&e.read_shift(2),n=new Date,s=31&i,r=15&(i>>>=5);i>>>=4,n.setMilliseconds(0),n.setFullYear(i+1980),n.setMonth(r-1),n.setDate(s);var o=31&t,a=63&(t>>>=5);return t>>>=6,n.setHours(t),n.setMinutes(a),n.setSeconds(o<<1),n}(e);if(8257&o)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),h=e.read_shift(4),u=e.read_shift(2),d=e.read_shift(2),f="",p=0;p<u;++p)f+=String.fromCharCode(e[e.l++]);if(d){var g=r(e.slice(e.l,e.l+d));(g[21589]||{}).mt&&(l=g[21589].mt),((s||{})[21589]||{}).mt&&(l=s[21589].mt)}e.l+=d;var b=e.slice(e.l,e.l+c);switch(a){case 8:b=function(e,t){if(!m)return te(e,t);var i=new(0,m.InflateRaw),n=i._processChunk(e.slice(e.l),i._finishFlushFlag);return e.l+=i.bytesRead,n}(e,h);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+a)}var v=!1;8&o&&(134695760==e.read_shift(4)&&(e.read_shift(4),v=!0),c=e.read_shift(4),h=e.read_shift(4)),c!=t&&ie(v,"Bad compressed size: "+t+" != "+c),h!=i&&ie(v,"Bad uncompressed size: "+i+" != "+h),he(n,f,b,{unsafe:!0,mt:l})}var re={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function oe(e,t){if(e.ctype)return e.ctype;var i=e.name||"",n=i.match(/\.([^\.]+)$/);return n&&re[n[1]]||t&&(n=(i=t).match(/[\.\\]([^\.\\])+$/))&&re[n[1]]?re[n[1]]:"application/octet-stream"}function ae(e){for(var t=zt(e),i=[],n=0;n<t.length;n+=76)i.push(t.slice(n,n+76));return i.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,(function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)}));"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var i=[],n=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),s=0;s<n.length;++s){var r=n[s];if(0!=r.length)for(var o=0;o<r.length;){var a=76,l=r.slice(o,o+a);"="==l.charAt(a-1)?a--:"="==l.charAt(a-2)?a-=2:"="==l.charAt(a-3)&&(a-=3),l=r.slice(o,o+a),(o+=a)<r.length&&(l+="="),i.push(l)}else i.push("")}return i.join("\r\n")}function ce(e,t,i){for(var n,s="",r="",o="",a=0;a<10;++a){var l=t[a];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":s=c[2].trim();break;case"content-type":o=c[2].trim();break;case"content-transfer-encoding":r=c[2].trim()}}switch(++a,r.toLowerCase()){case"base64":n=qt(Ut(t.slice(a).join("")));break;case"quoted-printable":n=function(e){for(var t=[],i=0;i<e.length;++i){for(var n=e[i];i<=e.length&&"="==n.charAt(n.length-1);)n=n.slice(0,n.length-1)+e[++i];t.push(n)}for(var s=0;s<t.length;++s)t[s]=t[s].replace(/[=][0-9A-Fa-f]{2}/g,(function(e){return String.fromCharCode(parseInt(e.slice(1),16))}));return qt(t.join("\r\n"))}(t.slice(a));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+r)}var h=he(e,s.slice(i.length),n,{unsafe:!0});o&&(h.ctype=o)}function he(e,t,i,s){var r=s&&s.unsafe;r||d(e);var o=!r&&Ki.find(e,t);if(!o){var a=e.FullPaths[0];t.slice(0,a.length)==a?a=t:("/"!=a.slice(-1)&&(a+="/"),a=(a+t).replace("//","/")),o={name:n(t),type:2},e.FileIndex.push(o),e.FullPaths.push(a),r||Ki.utils.cfb_gc(e)}return o.content=i,o.size=i?i.length:0,s&&(s.CLSID&&(o.clsid=s.CLSID),s.mt&&(o.mt=s.mt),s.ct&&(o.ct=s.ct)),o}return t.find=function(e,t){var i=e.FullPaths.map((function(e){return e.toUpperCase()})),n=i.map((function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]})),s=!1;47===t.charCodeAt(0)?(s=!0,t=i[0].slice(0,-1)+t):s=-1!==t.indexOf("/");var r=t.toUpperCase(),o=!0===s?i.indexOf(r):n.indexOf(r);if(-1!==o)return e.FileIndex[o];var a=!r.match(ei);for(r=r.replace(Jt,""),a&&(r=r.replace(ei,"!")),o=0;o<i.length;++o){if((a?i[o].replace(ei,"!"):i[o]).replace(Jt,"")==r)return e.FileIndex[o];if((a?n[o].replace(ei,"!"):n[o]).replace(Jt,"")==r)return e.FileIndex[o]}return null},t.read=function(t,i){var n=i&&i.type;switch(n||Ht&&Buffer.isBuffer(t)&&(n="buffer"),n||"base64"){case"file":return function(t,i){return o(),a(e.readFileSync(t),i)}(t,i);case"base64":return a(qt(Ut(t)),i);case"binary":return a(qt(t),i)}return a(t,i)},t.parse=a,t.write=function(t,i){var n=p(t,i);switch(i&&i.type||"buffer"){case"file":return o(),e.writeFileSync(i.filename,n),n;case"binary":return"string"==typeof n?n:E(n);case"base64":return zt("string"==typeof n?n:E(n));case"buffer":if(Ht)return Buffer.isBuffer(n)?n:Xt(n);case"array":return"string"==typeof n?qt(n):n}return n},t.writeFile=function(t,i,n){o();var s=p(t,n);e.writeFileSync(i,s)},t.utils={cfb_new:function(e){var t={};return d(t,e),t},cfb_add:he,cfb_del:function(e,t){d(e);var i=Ki.find(e,t);if(i)for(var n=0;n<e.FileIndex.length;++n)if(e.FileIndex[n]==i)return e.FileIndex.splice(n,1),e.FullPaths.splice(n,1),!0;return!1},cfb_mov:function(e,t,i){d(e);var s=Ki.find(e,t);if(s)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==s)return e.FileIndex[r].name=n(i),e.FullPaths[r]=i,!0;return!1},cfb_gc:function(e){f(e,!0)},ReadShift:Bs,CheckField:Ws,prep_blob:zs,bconcat:Qt,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(Sy){console.error("cannot use native zlib: "+(Sy.message||Sy))}},_deflateRaw:K,_inflateRaw:te,consts:S},t}();let qi;function $i(e){for(var t=Object.keys(e),i=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&i.push(t[n]);return i}function Zi(e){for(var t=[],i=$i(e),n=0;n!==i.length;++n)t[e[i[n]]]=i[n];return t}var Qi=new Date(1899,11,30,0,0,0);function Ji(e,t){var i=e.getTime();return t&&(i-=1263168e5),(i-(Qi.getTime()+6e4*(e.getTimezoneOffset()-Qi.getTimezoneOffset())))/864e5}var en=new Date,tn=Qi.getTime()+6e4*(en.getTimezoneOffset()-Qi.getTimezoneOffset()),nn=en.getTimezoneOffset();function sn(e){var t=new Date;return t.setTime(24*e*60*60*1e3+tn),t.getTimezoneOffset()!==nn&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-nn)),t}function rn(e){var t=0,i=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var r=1;r!=s.length;++r)if(s[r]){switch(i=1,r>3&&(n=!0),s[r].slice(s[r].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[r].slice(s[r].length-1));case"D":i*=24;case"H":i*=60;case"M":if(!n)throw new Error("Unsupported ISO Duration Field: M");i*=60}t+=i*parseInt(s[r],10)}return t}var on=new Date("2017-02-19T19:06:09.000Z"),an=isNaN(on.getFullYear())?new Date("2/19/17"):on,ln=2017==an.getFullYear();function cn(e,t){var i=new Date(e);if(ln)return t>0?i.setTime(i.getTime()+60*i.getTimezoneOffset()*1e3):t<0&&i.setTime(i.getTime()-60*i.getTimezoneOffset()*1e3),i;if(e instanceof Date)return e;if(1917==an.getFullYear()&&!isNaN(i.getFullYear())){var n=i.getFullYear();return e.indexOf(""+n)>-1||i.setFullYear(i.getFullYear()+100),i}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],r=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(r=new Date(r.getTime()-60*r.getTimezoneOffset()*1e3)),r}function hn(e,t){if(Ht&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return qn(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return qn(Bt(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return qn(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return qn(new TextDecoder("utf-16be").decode(e.slice(2)))}var i={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,(function(e){return i[e]||e}))}catch(Sy){}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function un(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=un(e[i]));return t}function dn(e,t){for(var i="";i.length<t;)i+=e;return i}function fn(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var i=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,(function(){return i*=100,""}));return isNaN(t=Number(n))?(n=n.replace(/[(](.*)[)]/,(function(e,t){return i=-i,t})),isNaN(t=Number(n))?t:t/i):t/i}var pn=["january","february","march","april","may","june","july","august","september","october","november","december"];function mn(e){var t=new Date(e),i=new Date(NaN),n=t.getYear(),s=t.getMonth(),r=t.getDate();if(isNaN(r))return i;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==pn.indexOf(o))return i}else if(o.match(/[a-z]/))return i;return n<0||n>8099?i:(s>0||r>1)&&101!=n?t:e.match(/[^-0-9:,\/\\]/)?i:t}var gn=function(){var e=5=="abacaba".split(/(:?b)/i).length;return function(t,i,n){if(e||"string"==typeof i)return t.split(i);for(var s=t.split(i),r=[s[0]],o=1;o<s.length;++o)r.push(n),r.push(s[o]);return r}}();function bn(e){return e?e.content&&e.type?hn(e.content,!0):e.data?Vt(e.data):e.asNodeBuffer&&Ht?Vt(e.asNodeBuffer().toString("binary")):e.asBinary?Vt(e.asBinary()):e._data&&e._data.getContent?Vt(hn(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function vn(e){if(!e)return null;if(e.data)return Dt(e.data);if(e.asNodeBuffer&&Ht)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return"string"==typeof t?Dt(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function yn(e,t){for(var i=e.FullPaths||$i(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),r=0;r<i.length;++r){var o=i[r].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return e.files?e.files[i[r]]:e.FileIndex[r]}return null}function xn(e,t){var i=yn(e,t);if(null==i)throw new Error("Cannot find file "+t+" in zip");return i}function Sn(e,t,i){if(!i)return function(e){return e&&".bin"===e.name.slice(-4)?vn(e):bn(e)}(xn(e,t));if(!t)return null;try{return Sn(e,t)}catch(Sy){return null}}function En(e,t,i){if(!i)return bn(xn(e,t));if(!t)return null;try{return En(e,t)}catch(Sy){return null}}function wn(e,t,i){if(!i)return vn(xn(e,t));if(!t)return null;try{return wn(e,t)}catch(Sy){return null}}function Tn(e){for(var t=e.FullPaths||$i(e.files),i=[],n=0;n<t.length;++n)"/"!=t[n].slice(-1)&&i.push(t[n].replace(/^Root Entry[\/]/,""));return i.sort()}function _n(e,t,i){if(e.FullPaths){var n;if("string"==typeof i)return n=Ht?Xt(i):function(e){for(var t=[],i=0,n=e.length+250,s=Yt(e.length+255),r=0;r<e.length;++r){var o=e.charCodeAt(r);if(o<128)s[i++]=o;else if(o<2048)s[i++]=192|o>>6&31,s[i++]=128|63&o;else if(o>=55296&&o<57344){o=64+(1023&o);var a=1023&e.charCodeAt(++r);s[i++]=240|o>>8&7,s[i++]=128|o>>2&63,s[i++]=128|a>>6&15|(3&o)<<4,s[i++]=128|63&a}else s[i++]=224|o>>12&15,s[i++]=128|o>>6&63,s[i++]=128|63&o;i>n&&(t.push(s.slice(0,i)),i=0,s=Yt(65535),n=65530)}return t.push(s.slice(0,i)),Qt(t)}(i),Ki.utils.cfb_add(e,t,n);Ki.utils.cfb_add(e,t,i)}else e.file(t,i)}function Mn(e,t){switch(t.type){case"base64":return Ki.read(e,{type:"base64"});case"binary":return Ki.read(e,{type:"binary"});case"buffer":case"array":return Ki.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Pn(e,t){if("/"==e.charAt(0))return e.slice(1);var i=t.split("/");"/"!=t.slice(-1)&&i.pop();for(var n=e.split("/");0!==n.length;){var s=n.shift();".."===s?i.pop():"."!==s&&i.push(s)}return i.join("/")}var Cn='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',An=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,Nn=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/gm,Ln=Cn.match(Nn)?Nn:/<[^>]*>/g,kn=/<\w*:/,In=/<(\/?)\w+:/;function Rn(e,t,i){for(var n={},s=0,r=0;s!==e.length&&(32!==(r=e.charCodeAt(s))&&10!==r&&13!==r);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var o=e.match(An),a=0,l="",c=0,h="",u="",d=1;if(o)for(c=0;c!=o.length;++c){for(u=o[c],r=0;r!=u.length&&61!==u.charCodeAt(r);++r);for(h=u.slice(0,r).trim();32==u.charCodeAt(r+1);)++r;for(d=34==(s=u.charCodeAt(r+1))||39==s?1:0,l=u.slice(r+1+d,u.length-d),a=0;a!=h.length&&58!==h.charCodeAt(a);++a);if(a===h.length)h.indexOf("_")>0&&(h=h.slice(0,h.indexOf("_"))),n[h]=l,i||(n[h.toLowerCase()]=l);else{var f=(5===a&&"xmlns"===h.slice(0,5)?"xmlns":"")+h.slice(a+1);if(n[f]&&"ext"==h.slice(a-3,a))continue;n[f]=l,i||(n[f.toLowerCase()]=l)}}return n}function On(e){return e.replace(In,"<$1")}var Dn={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Bn=Zi(Dn),Fn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/gi,t=/_x([\da-fA-F]{4})_/gi;return function i(n){var s=n+"",r=s.indexOf("<![CDATA[");if(-1==r)return s.replace(e,(function(e,t){return Dn[e]||String.fromCharCode(parseInt(t,e.indexOf("x")>-1?16:10))||e})).replace(t,(function(e,t){return String.fromCharCode(parseInt(t,16))}));var o=s.indexOf("]]>");return i(s.slice(0,r))+s.slice(r+9,o)+i(s.slice(o+3))}}(),Vn=/[&<>'"]/g;var jn=/[\u0000-\u001f]/g;function Gn(e){return(e+"").replace(Vn,(function(e){return Bn[e]})).replace(/\n/g,"<br/>").replace(jn,(function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"}))}var Wn=function(){var e=/&#(\d+);/g;function t(e,t){return String.fromCharCode(parseInt(t,10))}return function(i){return i.replace(e,t)}}();function zn(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Un(e){for(var t="",i=0,n=0,s=0,r=0,o=0,a=0;i<e.length;)(n=e.charCodeAt(i++))<128?t+=String.fromCharCode(n):(s=e.charCodeAt(i++),n>191&&n<224?(o=(31&n)<<6,o|=63&s,t+=String.fromCharCode(o)):(r=e.charCodeAt(i++),n<240?t+=String.fromCharCode((15&n)<<12|(63&s)<<6|63&r):(a=((7&n)<<18|(63&s)<<12|(63&r)<<6|63&(o=e.charCodeAt(i++)))-65536,t+=String.fromCharCode(55296+(a>>>10&1023)),t+=String.fromCharCode(56320+(1023&a)))));return t}function Hn(e){var t,i,n,s=Yt(2*e.length),r=1,o=0,a=0;for(i=0;i<e.length;i+=r)r=1,(n=e.charCodeAt(i))<128?t=n:n<224?(t=64*(31&n)+(63&e.charCodeAt(i+1)),r=2):n<240?(t=4096*(15&n)+64*(63&e.charCodeAt(i+1))+(63&e.charCodeAt(i+2)),r=3):(r=4,t=262144*(7&n)+4096*(63&e.charCodeAt(i+1))+64*(63&e.charCodeAt(i+2))+(63&e.charCodeAt(i+3)),a=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==a&&(s[o++]=255&a,s[o++]=a>>>8,a=0),s[o++]=t%256,s[o++]=t>>>8;return s.slice(0,o).toString("ucs2")}function Xn(e){return Xt(e,"binary").toString("utf8")}var Yn="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",Kn=Ht&&(Xn(Yn)==Un(Yn)&&Xn||Hn(Yn)==Un(Yn)&&Hn)||Un,qn=Ht?function(e){return Xt(e,"utf8").toString("binary")}:function(e){for(var t=[],i=0,n=0,s=0;i<e.length;)switch(n=e.charCodeAt(i++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(63&n)));break;case n>=55296&&n<57344:n-=55296,s=e.charCodeAt(i++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(63&s)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(63&n)))}return t.join("")},$n=function(){var e={};return function(t,i){var n=t+"|"+(i||"");return e[n]?e[n]:e[n]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",i||"")}}(),Zn=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map((function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]}));return function(t){for(var i=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),n=0;n<e.length;++n)i=i.replace(e[n][0],e[n][1]);return i}}(),Qn=function(){var e={};return function(t){return void 0!==e[t]?e[t]:e[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}}(),Jn=/<\/?(?:vt:)?variant>/g,es=/<(?:vt:)([^>]*)>([\s\S]*)</;function ts(e,t){var i=Rn(e),n=e.match(Qn(i.baseType))||[],s=[];if(n.length!=i.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+i.size);return s}return n.forEach((function(e){var t=e.replace(Jn,"").match(es);t&&s.push({v:Kn(t[2]),t:t[1]})})),s}var is=/(^\s|\s$|\n)/;function ns(e){return $i(e).map((function(t){return" "+t+'="'+e[t]+'"'})).join("")}function ss(e,t,i){return"<"+e+(null!=i?ns(i):"")+(null!=t?(t.match(is)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function rs(e){if(Ht&&Buffer.isBuffer(e))return e.toString("utf8");if("string"===typeof e)return e;if("undefined"!==typeof Uint8Array&&e instanceof Uint8Array)return Kn($t(Zt(e)));throw new Error("Bad input format: expected Buffer or string")}var os=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/gm,as="http://schemas.openxmlformats.org/package/2006/content-types",ls=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];var cs=function(e){for(var t=[],i=0;i<e[0].length;++i)if(e[0][i])for(var n=0,s=e[0][i].length;n<s;n+=10240)t.push.apply(t,e[0][i].slice(n,n+10240));return t},hs=Ht?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map((function(e){return Buffer.isBuffer(e)?e:Xt(e)}))):cs(e)}:cs,us=function(e,t,i){for(var n=[],s=t;s<i;s+=2)n.push(String.fromCharCode(ks(e,s)));return n.join("").replace(Jt,"")},ds=Ht?function(e,t,i){return Buffer.isBuffer(e)?e.toString("utf16le",t,i).replace(Jt,""):us(e,t,i)}:us,fs=function(e,t,i){for(var n=[],s=t;s<t+i;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},ps=Ht?function(e,t,i){return Buffer.isBuffer(e)?e.toString("hex",t,t+i):fs(e,t,i)}:fs,ms=function(e,t,i){for(var n=[],s=t;s<i;s++)n.push(String.fromCharCode(Ls(e,s)));return n.join("")},gs=Ht?function(e,t,i){return Buffer.isBuffer(e)?e.toString("utf8",t,i):ms(e,t,i)}:ms,bs=function(e,t){var i=Rs(e,t);return i>0?gs(e,t+4,t+4+i-1):""},vs=bs,ys=function(e,t){var i=Rs(e,t);return i>0?gs(e,t+4,t+4+i-1):""},xs=ys,Ss=function(e,t){var i=2*Rs(e,t);return i>0?gs(e,t+4,t+4+i-1):""},Es=Ss,ws=function(e,t){var i=Rs(e,t);return i>0?ds(e,t+4,t+4+i):""},Ts=ws,_s=function(e,t){var i=Rs(e,t);return i>0?gs(e,t+4,t+4+i):""},Ms=_s,Ps=function(e,t){return function(e,t){for(var i=1-2*(e[t+7]>>>7),n=((127&e[t+7])<<4)+(e[t+6]>>>4&15),s=15&e[t+6],r=5;r>=0;--r)s=256*s+e[t+r];return 2047==n?0==s?i*(1/0):NaN:(0==n?n=-1022:(n-=1023,s+=Math.pow(2,52)),i*Math.pow(2,n-52)*s)}(e,t)},Cs=Ps,As=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function Ns(){ds=function(e,t,i){return Ft.utils.decode(1200,e.slice(t,i)).replace(Jt,"")},gs=function(e,t,i){return Ft.utils.decode(65001,e.slice(t,i))},vs=function(e,t){var i=Rs(e,t);return i>0?Ft.utils.decode(Nt,e.slice(t+4,t+4+i-1)):""},xs=function(e,t){var i=Rs(e,t);return i>0?Ft.utils.decode(At,e.slice(t+4,t+4+i-1)):""},Es=function(e,t){var i=2*Rs(e,t);return i>0?Ft.utils.decode(1200,e.slice(t+4,t+4+i-1)):""},Ts=function(e,t){var i=Rs(e,t);return i>0?Ft.utils.decode(1200,e.slice(t+4,t+4+i)):""},Ms=function(e,t){var i=Rs(e,t);return i>0?Ft.utils.decode(65001,e.slice(t+4,t+4+i)):""}}Ht&&(vs=function(e,t){if(!Buffer.isBuffer(e))return bs(e,t);var i=e.readUInt32LE(t);return i>0?e.toString("utf8",t+4,t+4+i-1):""},xs=function(e,t){if(!Buffer.isBuffer(e))return ys(e,t);var i=e.readUInt32LE(t);return i>0?e.toString("utf8",t+4,t+4+i-1):""},Es=function(e,t){if(!Buffer.isBuffer(e))return Ss(e,t);var i=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+i-1)},Ts=function(e,t){if(!Buffer.isBuffer(e))return ws(e,t);var i=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+i)},Ms=function(e,t){if(!Buffer.isBuffer(e))return _s(e,t);var i=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+i)},Cs=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):Ps(e,t)},As=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof Ft&&Ns();var Ls=function(e,t){return e[t]},ks=function(e,t){return 256*e[t+1]+e[t]},Is=function(e,t){var i=256*e[t+1]+e[t];return i<32768?i:-1*(65535-i+1)},Rs=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Os=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Ds=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Bs(e,t){var i,n,s,r,o,a,l="",c=[];switch(t){case"dbcs":if(a=this.l,Ht&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(o=0;o<e;++o)l+=String.fromCharCode(ks(this,a)),a+=2;e*=2;break;case"utf8":l=gs(this,this.l,this.l+e);break;case"utf16le":e*=2,l=ds(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof Ft)return Bs.call(this,e,"dbcs");l=Ft.utils.decode(At,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=vs(this,this.l),e=4+Rs(this,this.l);break;case"lpstr-cp":l=xs(this,this.l),e=4+Rs(this,this.l);break;case"lpwstr":l=Es(this,this.l),e=4+2*Rs(this,this.l);break;case"lpp4":e=4+Rs(this,this.l),l=Ts(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+Rs(this,this.l),l=Ms(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(s=Ls(this,this.l+e++));)c.push(jt(s));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(s=ks(this,this.l+e));)c.push(jt(s)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",a=this.l,o=0;o<e;++o){if(this.lens&&-1!==this.lens.indexOf(a))return s=Ls(this,a),this.l=a+1,r=Bs.call(this,e-o,s?"dbcs-cont":"sbcs-cont"),c.join("")+r;c.push(jt(ks(this,a))),a+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof Ft){l=Ft.utils.decode(At,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",a=this.l,o=0;o!=e;++o){if(this.lens&&-1!==this.lens.indexOf(a))return s=Ls(this,a),this.l=a+1,r=Bs.call(this,e-o,s?"dbcs-cont":"sbcs-cont"),c.join("")+r;c.push(jt(Ls(this,a))),a+=1}l=c.join("");break;default:switch(e){case 1:return i=Ls(this,this.l),this.l++,i;case 2:return i=("i"===t?Is:ks)(this,this.l),this.l+=2,i;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(i=(e>0?Os:Ds)(this,this.l),this.l+=4,i):(n=Rs(this,this.l),this.l+=4,n);case 8:case-8:if("f"===t)return n=8==e?Cs(this,this.l):Cs([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,n;e=8;case 16:l=ps(this,this.l,e)}}return this.l+=e,l}var Fs=function(e,t,i){e[i]=255&t,e[i+1]=t>>>8&255,e[i+2]=t>>>16&255,e[i+3]=t>>>24&255},Vs=function(e,t,i){e[i]=255&t,e[i+1]=t>>8&255,e[i+2]=t>>16&255,e[i+3]=t>>24&255},js=function(e,t,i){e[i]=255&t,e[i+1]=t>>>8&255};function Gs(e,t,i){var n=0,s=0;if("dbcs"===i){for(s=0;s!=t.length;++s)js(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if("sbcs"===i){if("undefined"!==typeof Ft&&874==Nt)for(s=0;s!=t.length;++s){var r=Ft.utils.encode(Nt,t.charAt(s));this[this.l+s]=r[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=255&t.charCodeAt(s);n=t.length}else{if("hex"===i){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}if("utf16le"===i){var o=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var a=t.charCodeAt(s);this[this.l++]=255&a,this[this.l++]=a>>8}for(;this.l<o;)this[this.l++]=0;return this}switch(e){case 1:n=1,this[this.l]=255&t;break;case 2:n=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:n=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:n=4,Fs(this,t,this.l);break;case 8:if(n=8,"f"===i){!function(e,t,i){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,r=0,o=n?-t:t;isFinite(o)?0==o?s=r=0:(s=Math.floor(Math.log(o)/Math.LN2),r=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(r)||r<Math.pow(2,52))?s=-1022:(r-=Math.pow(2,52),s+=1023)):(s=2047,r=isNaN(t)?26985:0);for(var a=0;a<=5;++a,r/=256)e[i+a]=255&r;e[i+6]=(15&s)<<4|15&r,e[i+7]=s>>4|n}(this,t,this.l);break}case 16:break;case-4:n=4,Vs(this,t,this.l)}}return this.l+=n,this}function Ws(e,t){var i=ps(this,this.l,e.length>>1);if(i!==e)throw new Error(t+"Expected "+e+" saw "+i);this.l+=e.length>>1}function zs(e,t){e.l=t,e.read_shift=Bs,e.chk=Ws,e.write_shift=Gs}function Us(e,t){e.l+=t}function Hs(e){var t=Yt(e);return zs(t,0),t}function Xs(e,t,i){if(e){var n,s,r;zs(e,e.l||0);for(var o=e.length,a=0,l=0;e.l<o;){128&(a=e.read_shift(1))&&(a=(127&a)+((127&e.read_shift(1))<<7));var c=th[a]||th[65535];for(r=127&(n=e.read_shift(1)),s=1;s<4&&128&n;++s)r+=(127&(n=e.read_shift(1)))<<7*s;l=e.l+r;var h=c.f&&c.f(e,r,i);if(e.l=l,t(h,c,a))return}}}function Ys(){var e=[],t=Ht?256:2048,i=function(e){var t=Hs(e);return zs(t,0),t},n=i(t),s=function(){n&&(n.length>n.l&&((n=n.slice(0,n.l)).l=n.length),n.length>0&&e.push(n),n=null)},r=function(e){return n&&e<n.length-n.l?n:(s(),n=i(Math.max(e+1,t)))};return{next:r,push:function(e){s(),null==(n=e).l&&(n.l=n.length),r(t)},end:function(){return s(),Qt(e)},_bufs:e}}function Ks(e,t,i){var n=un(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!i||i.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function qs(e,t,i){var n=un(e);return n.s=Ks(n.s,t.s,i),n.e=Ks(n.e,t.s,i),n}function $s(e,t){if(e.cRel&&e.c<0)for(e=un(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=un(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var i=nr(e);return e.cRel||null==e.cRel||(i=i.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(i=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(i)),i}function Zs(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?$s(e.s,t.biff)+":"+$s(e.e,t.biff):(e.s.rRel?"":"$")+Js(e.s.r)+":"+(e.e.rRel?"":"$")+Js(e.e.r):(e.s.cRel?"":"$")+tr(e.s.c)+":"+(e.e.cRel?"":"$")+tr(e.e.c)}function Qs(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function Js(e){return""+(e+1)}function er(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),i=0,n=0;n!==t.length;++n)i=26*i+t.charCodeAt(n)-64;return i-1}function tr(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function ir(e){for(var t=0,i=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(i=26*i+(s-64))}return{c:i-1,r:t-1}}function nr(e){for(var t=e.c+1,i="";t;t=(t-1)/26|0)i=String.fromCharCode((t-1)%26+65)+i;return i+(e.r+1)}function sr(e){var t=e.indexOf(":");return-1==t?{s:ir(e),e:ir(e)}:{s:ir(e.slice(0,t)),e:ir(e.slice(t+1))}}function rr(e,t){return"undefined"===typeof t||"number"===typeof t?rr(e.s,e.e):("string"!==typeof e&&(e=nr(e)),"string"!==typeof t&&(t=nr(t)),e==t?e:e+":"+t)}function or(e){var t={s:{c:0,r:0},e:{c:0,r:0}},i=0,n=0,s=0,r=e.length;for(i=0;n<r&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)i=26*i+s;for(t.s.c=--i,i=0;n<r&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)i=10*i+s;if(t.s.r=--i,n===r||10!=s)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,i=0;n!=r&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)i=26*i+s;for(t.e.c=--i,i=0;n!=r&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)i=10*i+s;return t.e.r=--i,t}function ar(e,t){var i="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=Wi(e.z,i?Ji(t):t)}catch(Sy){}try{return e.w=Wi((e.XF||{}).numFmtId||(i?14:0),i?Ji(t):t)}catch(Sy){return""+t}}function lr(e,t,i){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&i&&i.dateNF&&(e.z=i.dateNF),"e"==e.t?Or[e.v]||e.v:ar(e,void 0==t?e.v:t))}function cr(e,t){var i=t&&t.sheet?t.sheet:"Sheet1",n={};return n[i]=e,{SheetNames:[i],Sheets:n}}function hr(e,t,i){var n=i||{},s=e?Array.isArray(e):n.dense;var r=e||(s?[]:{}),o=0,a=0;if(r&&null!=n.origin){if("number"==typeof n.origin)o=n.origin;else{var l="string"==typeof n.origin?ir(n.origin):n.origin;o=l.r,a=l.c}r["!ref"]||(r["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(r["!ref"]){var h=or(r["!ref"]);c.s.c=h.s.c,c.s.r=h.s.r,c.e.c=Math.max(c.e.c,h.e.c),c.e.r=Math.max(c.e.r,h.e.r),-1==o&&(c.e.r=o=h.e.r+1)}for(var u=0;u!=t.length;++u)if(t[u]){if(!Array.isArray(t[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var d=0;d!=t[u].length;++d)if("undefined"!==typeof t[u][d]){var f={v:t[u][d]},p=o+u,m=a+d;if(c.s.r>p&&(c.s.r=p),c.s.c>m&&(c.s.c=m),c.e.r<p&&(c.e.r=p),c.e.c<m&&(c.e.c=m),!t[u][d]||"object"!==typeof t[u][d]||Array.isArray(t[u][d])||t[u][d]instanceof Date)if(Array.isArray(f.v)&&(f.f=t[u][d][1],f.v=f.v[0]),null===f.v)if(f.f)f.t="n";else if(n.nullError)f.t="e",f.v=0;else{if(!n.sheetStubs)continue;f.t="z"}else"number"===typeof f.v?f.t="n":"boolean"===typeof f.v?f.t="b":f.v instanceof Date?(f.z=n.dateNF||hi[14],n.cellDates?(f.t="d",f.w=Wi(f.z,Ji(f.v))):(f.t="n",f.v=Ji(f.v),f.w=Wi(f.z,f.v))):f.t="s";else f=t[u][d];if(s)r[p]||(r[p]=[]),r[p][m]&&r[p][m].z&&(f.z=r[p][m].z),r[p][m]=f;else{var g=nr({c:m,r:p});r[g]&&r[g].z&&(f.z=r[g].z),r[g]=f}}}return c.s.c<1e7&&(r["!ref"]=rr(c)),r}function ur(e,t){return hr(null,e,t)}function dr(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function fr(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function pr(e,t){var i=e.l,n=e.read_shift(1),s=dr(e),r=[],o={t:s,h:s};if(0!==(1&n)){for(var a=e.read_shift(4),l=0;l!=a;++l)r.push(fr(e));o.r=r}else o.r=[{ich:0,ifnt:0}];return e.l=i+t,o}var mr=pr;function gr(e){var t=e.read_shift(4),i=e.read_shift(2);return i+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:i}}function br(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var vr=dr;function yr(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}var xr=dr,Sr=yr;function Er(e){var t=e.slice(e.l,e.l+4),i=1&t[0],n=2&t[0];e.l+=4;var s=0===n?Cs([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):Os(t,0)>>2;return i?s/100:s}function wr(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var Tr=wr;function _r(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Mr(e,t){var i=e.read_shift(4);switch(i){case 0:return"";case 4294967295:case 4294967294:return{2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"}[e.read_shift(4)]||""}if(i>400)throw new Error("Unsupported Clipboard: "+i.toString(16));return e.l-=4,e.read_shift(0,1==t?"lpstr":"lpwstr")}var Pr=80,Cr=[Pr,81],Ar={1:{n:"CodePage",t:2},2:{n:"Category",t:Pr},3:{n:"PresentationFormat",t:Pr},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:Pr},15:{n:"Company",t:Pr},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:Pr},27:{n:"ContentStatus",t:Pr},28:{n:"Language",t:Pr},29:{n:"Version",t:Pr},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},Nr={1:{n:"CodePage",t:2},2:{n:"Title",t:Pr},3:{n:"Subject",t:Pr},4:{n:"Author",t:Pr},5:{n:"Keywords",t:Pr},6:{n:"Comments",t:Pr},7:{n:"Template",t:Pr},8:{n:"LastAuthor",t:Pr},9:{n:"RevNumber",t:Pr},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:Pr},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},Lr={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},kr=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Ir(e){return e.map((function(e){return[e>>16&255,e>>8&255,255&e]}))}var Rr=un(Ir([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),Or={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Dr={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Br={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};var Fr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Vr(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function jr(e,t){var i={"!id":{}};if(!e)return i;"/"!==t.charAt(0)&&(t="/"+t);var n={};return(e.match(Ln)||[]).forEach((function(e){var s=Rn(e);if("<Relationship"===s[0]){var r={};r.Type=s.Type,r.Target=s.Target,r.Id=s.Id,s.TargetMode&&(r.TargetMode=s.TargetMode);var o="External"===s.TargetMode?s.Target:Pn(s.Target,t);i[o]=r,n[s.Id]=r}})),i["!id"]=n,i}var Gr=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Wr=function(){for(var e=new Array(Gr.length),t=0;t<Gr.length;++t){var i=Gr[t],n="(?:"+i[0].slice(0,i[0].indexOf(":"))+":)"+i[0].slice(i[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function zr(e){var t={};e=Kn(e);for(var i=0;i<Gr.length;++i){var n=Gr[i],s=e.match(Wr[i]);null!=s&&s.length>0&&(t[n[1]]=Fn(s[1])),"date"===n[2]&&t[n[1]]&&(t[n[1]]=cn(t[n[1]]))}return t}var Ur=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function Hr(e,t,i,n){var s=[];if("string"==typeof e)s=ts(e,n);else for(var r=0;r<e.length;++r)s=s.concat(e[r].map((function(e){return{v:e}})));var o="string"==typeof t?ts(t,n).map((function(e){return e.v})):t,a=0,l=0;if(o.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"\u5de5\u4f5c\u8868":case"\u041b\u0438\u0441\u0442\u044b":case"\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0639\u0645\u0644":case"\u30ef\u30fc\u30af\u30b7\u30fc\u30c8":case"\u05d2\u05dc\u05d9\u05d5\u05e0\u05d5\u05ea \u05e2\u05d1\u05d5\u05d3\u05d4":case"Arbeitsbl\xe4tter":case"\xc7al\u0131\u015fma Sayfalar\u0131":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de c\xe1lculo":case"Planilhas":case"Regneark":case"Hojas de c\xe1lculo":case"Werkbladen":i.Worksheets=l,i.SheetNames=o.slice(a,a+l);break;case"Named Ranges":case"Rangos con nombre":case"\u540d\u524d\u4ed8\u304d\u4e00\u89a7":case"Benannte Bereiche":case"Navngivne omr\xe5der":i.NamedRanges=l,i.DefinedNames=o.slice(a,a+l);break;case"Charts":case"Diagramme":i.Chartsheets=l,i.ChartNames=o.slice(a,a+l)}a+=l}}var Xr=/<[^>]+>[^<]*/g;var Yr,Kr={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function qr(e,t,i){Yr||(Yr=Zi(Kr)),e[t=Yr[t]||t]=i}function $r(e){var t=e.read_shift(4),i=e.read_shift(4);return new Date(1e3*(i/1e7*Math.pow(2,32)+t/1e7-11644473600)).toISOString().replace(/\.000/,"")}function Zr(e,t,i){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(i)for(;e.l-n&3;)++e.l;return s}function Qr(e,t,i){var n=e.read_shift(0,"lpwstr");return i&&(e.l+=4-(n.length+1&3)&3),n}function Jr(e,t,i){return 31===t?Qr(e):Zr(e,0,i)}function eo(e,t,i){return Jr(e,t,!1===i?0:4)}function to(e){var t=e.l,i=so(e,81);return 0==e[e.l]&&0==e[e.l+1]&&e.l-t&2&&(e.l+=2),[i,so(e,3)]}function io(e,t){for(var i=e.read_shift(4),n={},s=0;s!=i;++s){var r=e.read_shift(4),o=e.read_shift(4);n[r]=e.read_shift(o,1200===t?"utf16le":"utf8").replace(Jt,"").replace(ei,"!"),1200===t&&o%2&&(e.l+=2)}return 3&e.l&&(e.l=e.l>>3<<2),n}function no(e){var t=e.read_shift(4),i=e.slice(e.l,e.l+t);return e.l+=t,(3&t)>0&&(e.l+=4-(3&t)&3),i}function so(e,t,i){var n,s=e.read_shift(2),r=i||{};if(e.l+=2,12!==t&&s!==t&&-1===Cr.indexOf(t)&&(4126!=(65534&t)||4126!=(65534&s)))throw new Error("Expected type "+t+" saw "+s);switch(12===t?s:t){case 2:return n=e.read_shift(2,"i"),r.raw||(e.l+=2),n;case 3:return n=e.read_shift(4,"i");case 11:return 0!==e.read_shift(4);case 19:return n=e.read_shift(4);case 30:return Zr(e,0,4).replace(Jt,"");case 31:return Qr(e);case 64:return $r(e);case 65:return no(e);case 71:return function(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}(e);case 80:return eo(e,s,!r.raw).replace(Jt,"");case 81:return function(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Jr(e,t,0)}(e,s).replace(Jt,"");case 4108:return function(e){for(var t=e.read_shift(4),i=[],n=0;n<t/2;++n)i.push(to(e));return i}(e);case 4126:case 4127:return 4127==s?function(e){for(var t=e.read_shift(4),i=[],n=0;n!=t;++n){var s=e.l;i[n]=e.read_shift(0,"lpwstr").replace(Jt,""),e.l-s&2&&(e.l+=2)}return i}(e):function(e){for(var t=e.read_shift(4),i=[],n=0;n!=t;++n)i[n]=e.read_shift(0,"lpstr-cp").replace(Jt,"");return i}(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+s)}}function ro(e,t){var i=e.l,n=e.read_shift(4),s=e.read_shift(4),r=[],o=0,a=0,l=-1,c={};for(o=0;o!=s;++o){var h=e.read_shift(4),u=e.read_shift(4);r[o]=[h,u+i]}r.sort((function(e,t){return e[1]-t[1]}));var d={};for(o=0;o!=s;++o){if(e.l!==r[o][1]){var f=!0;if(o>0&&t)switch(t[r[o-1][0]].t){case 2:e.l+2===r[o][1]&&(e.l+=2,f=!1);break;case 80:case 4108:e.l<=r[o][1]&&(e.l=r[o][1],f=!1)}if((!t||0==o)&&e.l<=r[o][1]&&(f=!1,e.l=r[o][1]),f)throw new Error("Read Error: Expected address "+r[o][1]+" at "+e.l+" :"+o)}if(t){var p=t[r[o][0]];if(d[p.n]=so(e,p.t,{raw:!0}),"version"===p.p&&(d[p.n]=String(d[p.n]>>16)+"."+("0000"+String(65535&d[p.n])).slice(-4)),"CodePage"==p.n)switch(d[p.n]){case 0:d[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Rt(a=d[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+d[p.n])}}else if(1===r[o][0]){if(a=d.CodePage=so(e,2),Rt(a),-1!==l){var m=e.l;e.l=r[l][1],c=io(e,a),e.l=m}}else if(0===r[o][0]){if(0===a){l=o,e.l=r[o+1][1];continue}c=io(e,a)}else{var g,b=c[r[o][0]];switch(e[e.l]){case 65:e.l+=4,g=no(e);break;case 30:case 31:e.l+=4,g=eo(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,g=e.read_shift(4,"i");break;case 19:e.l+=4,g=e.read_shift(4);break;case 5:e.l+=4,g=e.read_shift(8,"f");break;case 11:e.l+=4,g=lo(e,4);break;case 64:e.l+=4,g=cn($r(e));break;default:throw new Error("unparsed value: "+e[e.l])}d[b]=g}}return e.l=i+n,d}function oo(e,t,i){var n=e.content;if(!n)return{};zs(n,0);var s,r,o,a,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var c=n.read_shift(4),h=n.read_shift(16);if(h!==Ki.utils.consts.HEADER_CLSID&&h!==i)throw new Error("Bad PropertySet CLSID "+h);if(1!==(s=n.read_shift(4))&&2!==s)throw new Error("Unrecognized #Sets: "+s);if(r=n.read_shift(16),a=n.read_shift(4),1===s&&a!==n.l)throw new Error("Length mismatch: "+a+" !== "+n.l);2===s&&(o=n.read_shift(16),l=n.read_shift(4));var u,d=ro(n,t),f={SystemIdentifier:c};for(var p in d)f[p]=d[p];if(f.FMTID=r,1===s)return f;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);try{u=ro(n,null)}catch(Sy){}for(p in u)f[p]=u[p];return f.FMTID=[r,o],f}function ao(e,t){return e.read_shift(t),null}function lo(e,t){return 1===e.read_shift(t)}function co(e){return e.read_shift(2,"u")}function ho(e,t){return function(e,t,i){for(var n=[],s=e.l+t;e.l<s;)n.push(i(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}(e,t,co)}function uo(e,t,i){var n=e.read_shift(i&&i.biff>=12?2:1),s="sbcs-cont",r=At;(i&&i.biff>=8&&(At=1200),i&&8!=i.biff)?12==i.biff&&(s="wstr"):e.read_shift(1)&&(s="dbcs-cont");i.biff>=2&&i.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return At=r,o}function fo(e){var t=At;At=1200;var i,n=e.read_shift(2),s=e.read_shift(1),r=4&s,o=8&s,a=1+(1&s),l=0,c={};o&&(l=e.read_shift(2)),r&&(i=e.read_shift(4));var h=2==a?"dbcs-cont":"sbcs-cont",u=0===n?"":e.read_shift(n,h);return o&&(e.l+=4*l),r&&(e.l+=i),c.t=u,o||(c.raw="<t>"+c.t+"</t>",c.r=c.t),At=t,c}function po(e,t,i){if(i){if(i.biff>=2&&i.biff<=5)return e.read_shift(t,"cpstr");if(i.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function mo(e,t,i){var n=e.read_shift(i&&2==i.biff?1:2);return 0===n?(e.l++,""):po(e,n,i)}function go(e,t,i){if(i.biff>5)return mo(e,0,i);var n=e.read_shift(1);return 0===n?(e.l++,""):e.read_shift(n,i.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function bo(e,t){var i=e.read_shift(16);switch(i){case"e0c9ea79f9bace118c8200aa004ba90b":return function(e){var t=e.read_shift(4),i=e.l,n=!1;t>24&&(e.l+=t-24,"795881f43b1d7f48af2c825dc4852763"===e.read_shift(16)&&(n=!0),e.l=i);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(Jt,"");return n&&(e.l+=24),s}(e);case"0303000000000000c000000000000046":return function(e){for(var t=e.read_shift(2),i="";t-- >0;)i+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,57005!=e.read_shift(2))throw new Error("Bad FileMoniker");if(0===e.read_shift(4))return i+n.replace(/\\/g,"/");var s=e.read_shift(4);if(3!=e.read_shift(2))throw new Error("Bad FileMoniker");return i+e.read_shift(s>>1,"utf16le").replace(Jt,"")}(e);default:throw new Error("Unsupported Moniker "+i)}}function vo(e){var t=e.read_shift(4);return t>0?e.read_shift(t,"utf16le").replace(Jt,""):""}function yo(e){return[e.read_shift(1),e.read_shift(1),e.read_shift(1),e.read_shift(1)]}function xo(e,t){var i=yo(e);return i[3]=0,i}function So(e){return{r:e.read_shift(2),c:e.read_shift(2),ixfe:e.read_shift(2)}}function Eo(e,t,i){var n=i.biff>8?4:2;return[e.read_shift(n),e.read_shift(n,"i"),e.read_shift(n,"i")]}function wo(e){return[e.read_shift(2),Er(e)]}function To(e){var t=e.read_shift(2),i=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:i}}}function _o(e){var t=e.read_shift(2),i=e.read_shift(2);return{s:{c:e.read_shift(1),r:t},e:{c:e.read_shift(1),r:i}}}var Mo=_o;function Po(e){e.l+=4;var t=e.read_shift(2),i=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[i,t,n]}function Co(e){e.l+=2,e.l+=e.read_shift(2)}var Ao={0:Co,4:Co,5:Co,6:Co,7:function(e){return e.l+=4,e.cf=e.read_shift(2),{}},8:Co,9:Co,10:Co,11:Co,12:Co,13:function(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t},14:Co,15:Co,16:Co,17:Co,18:Co,19:Co,20:Co,21:Po};function No(e,t){var i={BIFFVer:0,dt:0};switch(i.BIFFVer=e.read_shift(2),(t-=2)>=2&&(i.dt=e.read_shift(2),e.l-=2),i.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+i.BIFFVer)}return e.read_shift(t),i}function Lo(e,t,i){var n=0;i&&2==i.biff||(n=e.read_shift(2));var s=e.read_shift(2);return i&&2==i.biff&&(n=1-(s>>15),s&=32767),[{Unsynced:1&n,DyZero:(2&n)>>1,ExAsc:(4&n)>>2,ExDsc:(8&n)>>3},s]}var ko=go;function Io(e,t,i){var n=e.l+t,s=8!=i.biff&&i.biff?2:4,r=e.read_shift(s),o=e.read_shift(s),a=e.read_shift(2),l=e.read_shift(2);return e.l=n,{s:{r:r,c:a},e:{r:o,c:l}}}function Ro(e,t,i){var n=So(e);2!=i.biff&&9!=t||++e.l;var s=function(e){var t=e.read_shift(1);return 1===e.read_shift(1)?t:1===t}(e);return n.val=s,n.t=!0===s||!1===s?"b":"e",n}var Oo=function(e,t,i){return 0===t?"":go(e,0,i)};function Do(e,t,i){var n,s=e.read_shift(2),r={fBuiltIn:1&s,fWantAdvise:s>>>1&1,fWantPict:s>>>2&1,fOle:s>>>3&1,fOleLink:s>>>4&1,cf:s>>>5&1023,fIcon:s>>>15&1};return 14849===i.sbcch&&(n=function(e,t,i){e.l+=4,t-=4;var n=e.l+t,s=uo(e,0,i),r=e.read_shift(2);if(r!==(n-=e.l))throw new Error("Malformed AddinUdf: padding = "+n+" != "+r);return e.l+=r,s}(e,t-2,i)),r.body=n||e.read_shift(t-2),"string"===typeof n&&(r.Name=n),r}var Bo=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Fo(e,t,i){var n=e.l+t,s=e.read_shift(2),r=e.read_shift(1),o=e.read_shift(1),a=e.read_shift(i&&2==i.biff?1:2),l=0;(!i||i.biff>=5)&&(5!=i.biff&&(e.l+=2),l=e.read_shift(2),5==i.biff&&(e.l+=2),e.l+=4);var c=po(e,o,i);32&s&&(c=Bo[c.charCodeAt(0)]);var h=n-e.l;i&&2==i.biff&&--h;var u=n!=e.l&&0!==a&&h>0?function(e,t,i,n){var s,r=e.l+t,o=Ml(e,n,i);r!==e.l&&(s=_l(e,r-e.l,o,i));return[o,s]}(e,h,i,a):[];return{chKey:r,Name:c,itab:l,rgce:u}}function Vo(e,t,i){if(i.biff<8)return function(e,t,i){3==e[e.l+1]&&e[e.l]++;var n=uo(e,0,i);return 3==n.charCodeAt(0)?n.slice(1):n}(e,0,i);for(var n=[],s=e.l+t,r=e.read_shift(i.biff>8?4:2);0!==r--;)n.push(Eo(e,i.biff,i));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function jo(e,t,i){var n=Mo(e,6);switch(i.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,kl(e,t,i)]}var Go={8:function(e,t){var i=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=i,{fmt:n}}};function Wo(e,t,i){if(!i.cellStyles)return Us(e,t);var n=i&&i.biff>=12?4:2,s=e.read_shift(n),r=e.read_shift(n),o=e.read_shift(n),a=e.read_shift(n),l=e.read_shift(2);2==n&&(e.l+=2);var c={s:s,e:r,w:o,ixfe:a,flags:l};return(i.biff>=5||!i.biff)&&(c.level=l>>8&7),c}var zo=So,Uo=ho,Ho=mo;var Xo=[2,3,48,49,131,139,140,245],Yo=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=Zi({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function i(t,i){var n=i||{};n.dateNF||(n.dateNF="yyyymmdd");var s=ur(function(t,i){var n=[],s=Yt(1);switch(i.type){case"base64":s=qt(Ut(t));break;case"binary":s=qt(t);break;case"buffer":case"array":s=t}zs(s,0);var r=s.read_shift(1),o=!!(136&r),a=!1,l=!1;switch(r){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:a=!0,o=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+r.toString(16))}var c=0,h=521;2==r&&(c=s.read_shift(2)),s.l+=3,2!=r&&(c=s.read_shift(4)),c>1048576&&(c=1e6),2!=r&&(h=s.read_shift(2));var u=s.read_shift(2),d=i.codepage||1252;2!=r&&(s.l+=16,s.read_shift(1),0!==s[s.l]&&(d=e[s[s.l]]),s.l+=1,s.l+=2),l&&(s.l+=36);for(var f=[],p={},m=Math.min(s.length,2==r?521:h-10-(a?264:0)),g=l?32:11;s.l<m&&13!=s[s.l];)switch((p={}).name=Ft.utils.decode(d,s.slice(s.l,s.l+g)).replace(/[\u0000\r\n].*$/g,""),s.l+=g,p.type=String.fromCharCode(s.read_shift(1)),2==r||l||(p.offset=s.read_shift(4)),p.len=s.read_shift(1),2==r&&(p.offset=s.read_shift(2)),p.dec=s.read_shift(1),p.name.length&&f.push(p),2!=r&&(s.l+=l?13:14),p.type){case"B":a&&8==p.len||!i.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":i.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==s[s.l]&&(s.l=h-1),13!==s.read_shift(1))throw new Error("DBF Terminator not found "+s.l+" "+s[s.l]);s.l=h;var b=0,v=0;for(n[0]=[],v=0;v!=f.length;++v)n[0][v]=f[v].name;for(;c-- >0;)if(42!==s[s.l])for(++s.l,n[++b]=[],v=0,v=0;v!=f.length;++v){var y=s.slice(s.l,s.l+f[v].len);s.l+=f[v].len,zs(y,0);var x=Ft.utils.decode(d,y);switch(f[v].type){case"C":x.trim().length&&(n[b][v]=x.replace(/\s+$/,""));break;case"D":8===x.length?n[b][v]=new Date(+x.slice(0,4),+x.slice(4,6)-1,+x.slice(6,8)):n[b][v]=x;break;case"F":n[b][v]=parseFloat(x.trim());break;case"+":case"I":n[b][v]=l?2147483648^y.read_shift(-4,"i"):y.read_shift(4,"i");break;case"L":switch(x.trim().toUpperCase()){case"Y":case"T":n[b][v]=!0;break;case"N":case"F":n[b][v]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+x+"|")}break;case"M":if(!o)throw new Error("DBF Unexpected MEMO for type "+r.toString(16));n[b][v]="##MEMO##"+(l?parseInt(x.trim(),10):y.read_shift(4));break;case"N":(x=x.replace(/\u0000/g,"").trim())&&"."!=x&&(n[b][v]=+x||0);break;case"@":n[b][v]=new Date(y.read_shift(-8,"f")-621356832e5);break;case"T":n[b][v]=new Date(864e5*(y.read_shift(4)-2440588)+y.read_shift(4));break;case"Y":n[b][v]=y.read_shift(4,"i")/1e4+y.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":n[b][v]=-y.read_shift(-8,"f");break;case"B":if(a&&8==f[v].len){n[b][v]=y.read_shift(8,"f");break}case"G":case"P":y.l+=f[v].len;break;case"0":if("_NullFlags"===f[v].name)break;default:throw new Error("DBF Unsupported data type "+f[v].type)}}else s.l+=u;if(2!=r&&s.l<s.length&&26!=s[s.l++])throw new Error("DBF EOF Marker missing "+(s.l-1)+" of "+s.length+" "+s[s.l-1].toString(16));return i&&i.sheetRows&&(n=n.slice(0,i.sheetRows)),i.DBF=f,n}(t,n),n);return s["!cols"]=n.DBF.map((function(e){return{wch:e.len,DBF:e}})),delete n.DBF,s}var n={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return cr(i(e,t),t)}catch(Sy){if(t&&t.WTF)throw Sy}return{SheetNames:[],Sheets:{}}},to_sheet:i,from_sheet:function(e,i){var s=i||{};if(+s.codepage>=0&&Rt(+s.codepage),"string"==s.type)throw new Error("Cannot write DBF to JS string");var r=Ys(),o=Kh(e,{header:1,raw:!0,cellDates:!0}),a=o[0],l=o.slice(1),c=e["!cols"]||[],h=0,u=0,d=0,f=1;for(h=0;h<a.length;++h)if(((c[h]||{}).DBF||{}).name)a[h]=c[h].DBF.name,++d;else if(null!=a[h]){if(++d,"number"===typeof a[h]&&(a[h]=a[h].toString(10)),"string"!==typeof a[h])throw new Error("DBF Invalid column name "+a[h]+" |"+typeof a[h]+"|");if(a.indexOf(a[h])!==h)for(u=0;u<1024;++u)if(-1==a.indexOf(a[h]+"_"+u)){a[h]+="_"+u;break}}var p=or(e["!ref"]),m=[],g=[],b=[];for(h=0;h<=p.e.c-p.s.c;++h){var v="",y="",x=0,S=[];for(u=0;u<l.length;++u)null!=l[u][h]&&S.push(l[u][h]);if(0!=S.length&&null!=a[h]){for(u=0;u<S.length;++u){switch(typeof S[u]){case"number":y="B";break;case"string":default:y="C";break;case"boolean":y="L";break;case"object":y=S[u]instanceof Date?"D":"C"}x=Math.max(x,String(S[u]).length),v=v&&v!=y?"C":y}x>250&&(x=250),"C"==(y=((c[h]||{}).DBF||{}).type)&&c[h].DBF.len>x&&(x=c[h].DBF.len),"B"==v&&"N"==y&&(v="N",b[h]=c[h].DBF.dec,x=c[h].DBF.len),g[h]="C"==v||"N"==y?x:n[v]||0,f+=g[h],m[h]=v}else m[h]="?"}var E=r.next(32);for(E.write_shift(4,318902576),E.write_shift(4,l.length),E.write_shift(2,296+32*d),E.write_shift(2,f),h=0;h<4;++h)E.write_shift(4,0);for(E.write_shift(4,(+t[Nt]||3)<<8),h=0,u=0;h<a.length;++h)if(null!=a[h]){var w=r.next(32),T=(a[h].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);w.write_shift(1,T,"sbcs"),w.write_shift(1,"?"==m[h]?"C":m[h],"sbcs"),w.write_shift(4,u),w.write_shift(1,g[h]||n[m[h]]||0),w.write_shift(1,b[h]||0),w.write_shift(1,2),w.write_shift(4,0),w.write_shift(1,0),w.write_shift(4,0),w.write_shift(4,0),u+=g[h]||n[m[h]]||0}var _=r.next(264);for(_.write_shift(4,13),h=0;h<65;++h)_.write_shift(4,0);for(h=0;h<l.length;++h){var M=r.next(f);for(M.write_shift(1,0),u=0;u<a.length;++u)if(null!=a[u])switch(m[u]){case"L":M.write_shift(1,null==l[h][u]?63:l[h][u]?84:70);break;case"B":M.write_shift(8,l[h][u]||0,"f");break;case"N":var P="0";for("number"==typeof l[h][u]&&(P=l[h][u].toFixed(b[u]||0)),d=0;d<g[u]-P.length;++d)M.write_shift(1,32);M.write_shift(1,P,"sbcs");break;case"D":l[h][u]?(M.write_shift(4,("0000"+l[h][u].getFullYear()).slice(-4),"sbcs"),M.write_shift(2,("00"+(l[h][u].getMonth()+1)).slice(-2),"sbcs"),M.write_shift(2,("00"+l[h][u].getDate()).slice(-2),"sbcs")):M.write_shift(8,"00000000","sbcs");break;case"C":var C=String(null!=l[h][u]?l[h][u]:"").slice(0,g[u]);for(M.write_shift(1,C,"sbcs"),d=0;d<g[u]-C.length;++d)M.write_shift(1,32)}}return r.next(1).write_shift(1,26),r.end()}}}(),Ko=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+$i(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),i=function(t,i){var n=e[i];return"number"==typeof n?Gt(n):n},n=function(e,t,i){var n=t.charCodeAt(0)-32<<4|i.charCodeAt(0)-48;return 59==n?e:Gt(n)};function s(e,s){var r,o=e.split(/[\n\r]+/),a=-1,l=-1,c=0,h=0,u=[],d=[],f=null,p={},m=[],g=[],b=[],v=0;for(+s.codepage>=0&&Rt(+s.codepage);c!==o.length;++c){v=0;var y,x=o[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,i),S=x.replace(/;;/g,"\0").split(";").map((function(e){return e.replace(/\u0000/g,";")})),E=S[0];if(x.length>0)switch(E){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==S[1].charAt(0)&&d.push(x.slice(3).replace(/;;/g,";"));break;case"C":var w=!1,T=!1,_=!1,M=!1,P=-1,C=-1;for(h=1;h<S.length;++h)switch(S[h].charAt(0)){case"A":case"G":break;case"X":l=parseInt(S[h].slice(1))-1,T=!0;break;case"Y":for(a=parseInt(S[h].slice(1))-1,T||(l=0),r=u.length;r<=a;++r)u[r]=[];break;case"K":'"'===(y=S[h].slice(1)).charAt(0)?y=y.slice(1,y.length-1):"TRUE"===y?y=!0:"FALSE"===y?y=!1:isNaN(fn(y))?isNaN(mn(y).getDate())||(y=cn(y)):(y=fn(y),null!==f&&Fi(f)&&(y=sn(y))),"undefined"!==typeof Ft&&"string"==typeof y&&"string"!=(s||{}).type&&(s||{}).codepage&&(y=Ft.utils.decode(s.codepage,y)),w=!0;break;case"E":M=!0;var A=el(S[h].slice(1),{r:a,c:l});u[a][l]=[u[a][l],A];break;case"S":_=!0,u[a][l]=[u[a][l],"S5S"];break;case"R":P=parseInt(S[h].slice(1))-1;break;case"C":C=parseInt(S[h].slice(1))-1;break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+x)}if(w&&(u[a][l]&&2==u[a][l].length?u[a][l][0]=y:u[a][l]=y,f=null),_){if(M)throw new Error("SYLK shared formula cannot have own formula");var N=P>-1&&u[P][C];if(!N||!N[1])throw new Error("SYLK shared formula cannot find base");u[a][l][1]=nl(N[1],{r:a-P,c:l-C})}break;case"F":var L=0;for(h=1;h<S.length;++h)switch(S[h].charAt(0)){case"X":l=parseInt(S[h].slice(1))-1,++L;break;case"Y":for(a=parseInt(S[h].slice(1))-1,r=u.length;r<=a;++r)u[r]=[];break;case"M":v=parseInt(S[h].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":f=d[parseInt(S[h].slice(1))];break;case"W":for(b=S[h].slice(1).split(" "),r=parseInt(b[0],10);r<=parseInt(b[1],10);++r)v=parseInt(b[2],10),g[r-1]=0===v?{hidden:!0}:{wch:v},Na(g[r-1]);break;case"C":g[l=parseInt(S[h].slice(1))-1]||(g[l]={});break;case"R":m[a=parseInt(S[h].slice(1))-1]||(m[a]={}),v>0?(m[a].hpt=v,m[a].hpx=Ia(v)):0===v&&(m[a].hidden=!0);break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+x)}L<1&&(f=null);break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+x)}}return m.length>0&&(p["!rows"]=m),g.length>0&&(p["!cols"]=g),s&&s.sheetRows&&(u=u.slice(0,s.sheetRows)),[u,p]}function r(e,t){var i=function(e,t){switch(t.type){case"base64":return s(Ut(e),t);case"binary":return s(e,t);case"buffer":return s(Ht&&Buffer.isBuffer(e)?e.toString("binary"):$t(e),t);case"array":return s(hn(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),n=i[0],r=i[1],o=ur(n,t);return $i(r).forEach((function(e){o[e]=r[e]})),o}function o(e,t,i,n){var s="C;Y"+(i+1)+";X"+(n+1)+";K";switch(e.t){case"n":s+=e.v||0,e.f&&!e.F&&(s+=";E"+il(e.f,{r:i,c:n}));break;case"b":s+=e.v?"TRUE":"FALSE";break;case"e":s+=e.w||e.v;break;case"d":s+='"'+(e.w||e.v)+'"';break;case"s":s+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return s}return e["|"]=254,{to_workbook:function(e,t){return cr(r(e,t),t)},to_sheet:r,from_sheet:function(e,t){var i,n,s=["ID;PWXL;N;E"],r=[],a=or(e["!ref"]),l=Array.isArray(e),c="\r\n";s.push("P;PGeneral"),s.push("F;P0;DG0G8;M255"),e["!cols"]&&(n=s,e["!cols"].forEach((function(e,t){var i="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?i+="0":("number"!=typeof e.width||e.wpx||(e.wpx=_a(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=Ma(e.wpx)),"number"==typeof e.wch&&(i+=Math.round(e.wch)))," "!=i.charAt(i.length-1)&&n.push(i)}))),e["!rows"]&&function(e,t){t.forEach((function(t,i){var n="F;";t.hidden?n+="M0;":t.hpt?n+="M"+20*t.hpt+";":t.hpx&&(n+="M"+20*ka(t.hpx)+";"),n.length>2&&e.push(n+"R"+(i+1))}))}(s,e["!rows"]),s.push("B;Y"+(a.e.r-a.s.r+1)+";X"+(a.e.c-a.s.c+1)+";D"+[a.s.c,a.s.r,a.e.c,a.e.r].join(" "));for(var h=a.s.r;h<=a.e.r;++h)for(var u=a.s.c;u<=a.e.c;++u){var d=nr({r:h,c:u});(i=l?(e[h]||[])[u]:e[d])&&(null!=i.v||i.f&&!i.F)&&r.push(o(i,0,h,u))}return s.join(c)+c+r.join(c)+c+"E"+c}}}(),qo=function(){function e(e,t){for(var i=e.split("\n"),n=-1,s=-1,r=0,o=[];r!==i.length;++r)if("BOT"!==i[r].trim()){if(!(n<0)){for(var a=i[r].trim().split(","),l=a[0],c=a[1],h=i[++r]||"";1&(h.match(/["]/g)||[]).length&&r<i.length-1;)h+="\n"+i[++r];switch(h=h.trim(),+l){case-1:if("BOT"===h){o[++n]=[],s=0;continue}if("EOD"!==h)throw new Error("Unrecognized DIF special command "+h);break;case 0:"TRUE"===h?o[n][s]=!0:"FALSE"===h?o[n][s]=!1:isNaN(fn(c))?isNaN(mn(c).getDate())?o[n][s]=c:o[n][s]=cn(c):o[n][s]=fn(c),++s;break;case 1:(h=(h=h.slice(1,h.length-1)).replace(/""/g,'"'))&&h.match(/^=".*"$/)&&(h=h.slice(2,-1)),o[n][s++]=""!==h?h:null}if("EOD"===h)break}}else o[++n]=[],s=0;return t&&t.sheetRows&&(o=o.slice(0,t.sheetRows)),o}function t(t,i){return ur(function(t,i){switch(i.type){case"base64":return e(Ut(t),i);case"binary":return e(t,i);case"buffer":return e(Ht&&Buffer.isBuffer(t)?t.toString("binary"):$t(t),i);case"array":return e(hn(t),i)}throw new Error("Unrecognized type "+i.type)}(t,i),i)}return{to_workbook:function(e,i){return cr(t(e,i),i)},to_sheet:t,from_sheet:function(){var e=function(e,t,i,n,s){e.push(t),e.push(i+","+n),e.push('"'+s.replace(/"/g,'""')+'"')},t=function(e,t,i,n){e.push(t+","+i),e.push(1==t?'"'+n.replace(/"/g,'""')+'"':n)};return function(i){var n,s=[],r=or(i["!ref"]),o=Array.isArray(i);e(s,"TABLE",0,1,"sheetjs"),e(s,"VECTORS",0,r.e.r-r.s.r+1,""),e(s,"TUPLES",0,r.e.c-r.s.c+1,""),e(s,"DATA",0,0,"");for(var a=r.s.r;a<=r.e.r;++a){t(s,-1,0,"BOT");for(var l=r.s.c;l<=r.e.c;++l){var c=nr({r:a,c:l});if(n=o?(i[a]||[])[l]:i[c])switch(n.t){case"n":var h=n.w;h||null==n.v||(h=n.v),null==h?n.f&&!n.F?t(s,1,0,"="+n.f):t(s,1,0,""):t(s,0,h,"V");break;case"b":t(s,0,n.v?1:0,n.v?"TRUE":"FALSE");break;case"s":t(s,1,0,isNaN(n.v)?n.v:'="'+n.v+'"');break;case"d":n.w||(n.w=Wi(n.z||hi[14],Ji(cn(n.v)))),t(s,0,n.w,"V");break;default:t(s,1,0,"")}else t(s,1,0,"")}}t(s,-1,0,"EOD");return s.join("\r\n")}}()}}(),$o=function(){function e(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(e,t){return ur(function(e,t){for(var i=e.split("\n"),n=-1,s=-1,r=0,o=[];r!==i.length;++r){var a=i[r].trim().split(":");if("cell"===a[0]){var l=ir(a[1]);if(o.length<=l.r)for(n=o.length;n<=l.r;++n)o[n]||(o[n]=[]);switch(n=l.r,s=l.c,a[2]){case"t":o[n][s]=a[3].replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n");break;case"v":o[n][s]=+a[3];break;case"vtf":var c=a[a.length-1];case"vtc":"nl"===a[3]?o[n][s]=!!+a[4]:o[n][s]=+a[4],"vtf"==a[2]&&(o[n][s]=[o[n][s],c])}}}return t&&t.sheetRows&&(o=o.slice(0,t.sheetRows)),o}(e,t),t)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),n=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),r="--SocialCalcSpreadsheetControlSave--";function o(t){if(!t||!t["!ref"])return"";for(var i,n=[],s=[],r="",o=sr(t["!ref"]),a=Array.isArray(t),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c)if(r=nr({r:l,c:c}),(i=a?(t[l]||[])[c]:t[r])&&null!=i.v&&"z"!==i.t){switch(s=["cell",r,"t"],i.t){case"s":case"str":s.push(e(i.v));break;case"n":i.f?(s[2]="vtf",s[3]="n",s[4]=i.v,s[5]=e(i.f)):(s[2]="v",s[3]=i.v);break;case"b":s[2]="vt"+(i.f?"f":"c"),s[3]="nl",s[4]=i.v?"1":"0",s[5]=e(i.f||(i.v?"TRUE":"FALSE"));break;case"d":var h=Ji(cn(i.v));s[2]="vtc",s[3]="nd",s[4]=""+h,s[5]=i.w||Wi(i.z||hi[14],h);break;case"e":continue}n.push(s.join(":"))}return n.push("sheet:c:"+(o.e.c-o.s.c+1)+":r:"+(o.e.r-o.s.r+1)+":tvf:1"),n.push("valueformat:1:text-wiki"),n.join("\n")}return{to_workbook:function(e,i){return cr(t(e,i),i)},to_sheet:t,from_sheet:function(e){return[i,n,s,n,o(e),r].join("\n")}}}(),Zo=function(){function e(e,t,i,n,s){s.raw?t[i][n]=e:""===e||("TRUE"===e?t[i][n]=!0:"FALSE"===e?t[i][n]=!1:isNaN(fn(e))?isNaN(mn(e).getDate())?t[i][n]=e:t[i][n]=cn(e):t[i][n]=fn(e))}var t={44:",",9:"\t",59:";",124:"|"},i={44:3,9:2,59:1,124:0};function n(e){for(var n={},s=!1,r=0,o=0;r<e.length;++r)34==(o=e.charCodeAt(r))?s=!s:!s&&o in t&&(n[o]=(n[o]||0)+1);for(r in o=[],n)Object.prototype.hasOwnProperty.call(n,r)&&o.push([n[r],r]);if(!o.length)for(r in n=i)Object.prototype.hasOwnProperty.call(n,r)&&o.push([n[r],r]);return o.sort((function(e,t){return e[0]-t[0]||i[e[1]]-i[t[1]]})),t[o.pop()[1]]||44}function s(e,t){var i=t||{},s="";var r=i.dense?[]:{},o={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(s=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(s=e.charAt(4),e=e.slice(6)):s=n(e.slice(0,1024)):s=i&&i.FS?i.FS:n(e.slice(0,1024));var a=0,l=0,c=0,h=0,u=0,d=s.charCodeAt(0),f=!1,p=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var g=null!=i.dateNF?function(e){var t="number"==typeof e?hi[e]:e;return t=t.replace(Xi,"(\\d+)"),new RegExp("^"+t+"$")}(i.dateNF):null;function b(){var t=e.slice(h,u),n={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)n.t="z";else if(i.raw)n.t="s",n.v=t;else if(0===t.trim().length)n.t="s",n.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(n.t="s",n.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(n.t="n",n.f=t.slice(1)):(n.t="s",n.v=t);else if("TRUE"==t)n.t="b",n.v=!0;else if("FALSE"==t)n.t="b",n.v=!1;else if(isNaN(c=fn(t)))if(!isNaN(mn(t).getDate())||g&&t.match(g)){n.z=i.dateNF||hi[14];var s=0;g&&t.match(g)&&(t=function(e,t,i){var n=-1,s=-1,r=-1,o=-1,a=-1,l=-1;(t.match(Xi)||[]).forEach((function(e,t){var c=parseInt(i[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":n=c;break;case"d":r=c;break;case"h":o=c;break;case"s":l=c;break;case"m":o>=0?a=c:s=c}})),l>=0&&-1==a&&s>=0&&(a=s,s=-1);var c=(""+(n>=0?n:(new Date).getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(r>=1?r:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var h=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==o&&-1==a&&-1==l?c:-1==n&&-1==s&&-1==r?h:c+"T"+h}(0,i.dateNF,t.match(g)||[]),s=1),i.cellDates?(n.t="d",n.v=cn(t,s)):(n.t="n",n.v=Ji(cn(t,s))),!1!==i.cellText&&(n.w=Wi(n.z,n.v instanceof Date?Ji(n.v):n.v)),i.cellNF||delete n.z}else n.t="s",n.v=t;else n.t="n",!1!==i.cellText&&(n.w=t),n.v=c;if("z"==n.t||(i.dense?(r[a]||(r[a]=[]),r[a][l]=n):r[nr({c:l,r:a})]=n),h=u+1,m=e.charCodeAt(h),o.e.c<l&&(o.e.c=l),o.e.r<a&&(o.e.r=a),p==d)++l;else if(l=0,++a,i.sheetRows&&i.sheetRows<=a)return!0}e:for(;u<e.length;++u)switch(p=e.charCodeAt(u)){case 34:34===m&&(f=!f);break;case d:case 10:case 13:if(!f&&b())break e}return u-h>0&&b(),r["!ref"]=rr(o),r}function r(t,i){return i&&i.PRN?i.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?s(t,i):ur(function(t,i){var n=i||{},s=[];if(!t||0===t.length)return s;for(var r=t.split(/[\r\n]/),o=r.length-1;o>=0&&0===r[o].length;)--o;for(var a=10,l=0,c=0;c<=o;++c)-1==(l=r[c].indexOf(" "))?l=r[c].length:l++,a=Math.max(a,l);for(c=0;c<=o;++c){s[c]=[];var h=0;for(e(r[c].slice(0,a).trim(),s,c,h,n),h=1;h<=(r[c].length-a)/10+1;++h)e(r[c].slice(a+10*(h-1),a+10*h).trim(),s,c,h,n)}return n.sheetRows&&(s=s.slice(0,n.sheetRows)),s}(t,i),i):s(t,i)}function o(e,t){var i="",n="string"==t.type?[0,0,0,0]:zh(e,t);switch(t.type){case"base64":i=Ut(e);break;case"binary":case"string":i=e;break;case"buffer":i=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof Ft?Ft.utils.decode(t.codepage,e):Ht&&Buffer.isBuffer(e)?e.toString("binary"):$t(e);break;case"array":i=hn(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==n[0]&&187==n[1]&&191==n[2]?i=Kn(i.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?i=Kn(i):"binary"==t.type&&"undefined"!==typeof Ft&&t.codepage&&(i=Ft.utils.decode(t.codepage,Ft.utils.encode(28591,i))),"socialcalc:version:"==i.slice(0,19)?$o.to_sheet("string"==t.type?i:Kn(i),t):r(i,t)}return{to_workbook:function(e,t){return cr(o(e,t),t)},to_sheet:o,from_sheet:function(e){for(var t,i=[],n=or(e["!ref"]),s=Array.isArray(e),r=n.s.r;r<=n.e.r;++r){for(var o=[],a=n.s.c;a<=n.e.c;++a){var l=nr({r:r,c:a});if((t=s?(e[r]||[])[a]:e[l])&&null!=t.v){for(var c=(t.w||(lr(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";o.push(c+(0===a?" ":""))}else o.push("          ")}i.push(o.join(""))}return i.join("\n")}}}();var Qo=function(){function e(e,t,i){if(e){zs(e,e.l||0);for(var n=i.Enum||b;e.l<e.length;){var s=e.read_shift(2),r=n[s]||n[65535],o=e.read_shift(2),a=e.l+o,l=r.f&&r.f(e,o,i);if(e.l=a,t(l,r,s))return}}}function t(t,i){if(!t)return t;var n=i||{};var s=n.dense?[]:{},r="Sheet1",o="",a=0,l={},c=[],h=[],u={s:{r:0,c:0},e:{r:0,c:0}},d=n.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])n.Enum=b,e(t,(function(e,t,i){switch(i){case 0:n.vers=e,e>=4096&&(n.qpro=!0);break;case 6:u=e;break;case 204:e&&(o=e);break;case 222:o=e;break;case 15:case 51:n.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==i&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=n.dateNF||hi[14],n.cellDates&&(e[1].t="d",e[1].v=sn(e[1].v))),n.qpro&&e[3]>a&&(s["!ref"]=rr(u),l[r]=s,c.push(r),s=n.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},a=e[3],r=o||"Sheet"+(a+1),o="");var h=n.dense?(s[e[0].r]||[])[e[0].c]:s[nr(e[0])];if(h){h.t=e[1].t,h.v=e[1].v,null!=e[1].z&&(h.z=e[1].z),null!=e[1].f&&(h.f=e[1].f);break}n.dense?(s[e[0].r]||(s[e[0].r]=[]),s[e[0].r][e[0].c]=e[1]):s[nr(e[0])]=e[1]}}),n);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);n.Enum=v,14==t[2]&&(n.qpro=!0,t.l=0),e(t,(function(e,t,i){switch(i){case 204:r=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>a&&(s["!ref"]=rr(u),l[r]=s,c.push(r),s=n.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},a=e[3],r="Sheet"+(a+1)),d>0&&e[0].r>=d)break;n.dense?(s[e[0].r]||(s[e[0].r]=[]),s[e[0].r][e[0].c]=e[1]):s[nr(e[0])]=e[1],u.e.c<e[0].c&&(u.e.c=e[0].c),u.e.r<e[0].r&&(u.e.r=e[0].r);break;case 27:e[14e3]&&(h[e[14e3][0]]=e[14e3][1]);break;case 1537:h[e[0]]=e[1],e[0]==a&&(r=e[1])}}),n)}if(s["!ref"]=rr(u),l[o||r]=s,c.push(o||r),!h.length)return{SheetNames:c,Sheets:l};for(var f={},p=[],m=0;m<h.length;++m)l[c[m]]?(p.push(h[m]||c[m]),f[h[m]]=l[h[m]]||l[c[m]]):(p.push(h[m]),f[h[m]]={"!ref":"A1"});return{SheetNames:p,Sheets:f}}function i(e,t,i){var n=[{c:0,r:0},{t:"n",v:0},0,0];return i.qpro&&20768!=i.vers?(n[0].c=e.read_shift(1),n[3]=e.read_shift(1),n[0].r=e.read_shift(2),e.l+=2):(n[2]=e.read_shift(1),n[0].c=e.read_shift(2),n[0].r=e.read_shift(2)),n}function n(e,t,n){var s=e.l+t,r=i(e,0,n);if(r[1].t="s",20768==n.vers){e.l++;var o=e.read_shift(1);return r[1].v=e.read_shift(o,"utf8"),r}return n.qpro&&e.l++,r[1].v=e.read_shift(s-e.l,"cstr"),r}function s(e,t,i){var n=Hs(7+i.length);n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(1,39);for(var s=0;s<n.length;++s){var r=i.charCodeAt(s);n.write_shift(1,r>=128?95:r)}return n.write_shift(1,0),n}function r(e,t,i){var n=Hs(7);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,i,"i"),n}function o(e,t,i){var n=Hs(13);return n.write_shift(1,255),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(8,i,"f"),n}function a(e,t,i){var n=32768&t;return t=(n?e:0)+((t&=-32769)>=8192?t-16384:t),(n?"":"$")+(i?tr(t):Js(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function h(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function u(e,t,i,n){var s=Hs(6+n.length);s.write_shift(2,e),s.write_shift(1,i),s.write_shift(1,t),s.write_shift(1,39);for(var r=0;r<n.length;++r){var o=n.charCodeAt(r);s.write_shift(1,o>=128?95:o)}return s.write_shift(1,0),s}function d(e,t){var i=h(e),n=e.read_shift(4),s=e.read_shift(4),r=e.read_shift(2);if(65535==r)return 0===n&&3221225472===s?(i[1].t="e",i[1].v=15):0===n&&3489660928===s?(i[1].t="e",i[1].v=42):i[1].v=0,i;var o=32768&r;return r=(32767&r)-16446,i[1].v=(1-2*o)*(s*Math.pow(2,r+32)+n*Math.pow(2,r)),i}function f(e,t,i,n){var s=Hs(14);if(s.write_shift(2,e),s.write_shift(1,i),s.write_shift(1,t),0==n)return s.write_shift(4,0),s.write_shift(4,0),s.write_shift(2,65535),s;var r,o=0,a=0,l=0;return n<0&&(o=1,n=-n),a=0|Math.log2(n),0==(2147483648&(l=(n/=Math.pow(2,a-31))>>>0))&&(++a,l=(n/=2)>>>0),n-=l,l|=2147483648,l>>>=0,r=(n*=Math.pow(2,32))>>>0,s.write_shift(4,r),s.write_shift(4,l),a+=16383+(o?32768:0),s.write_shift(2,a),s}function p(e,t){var i=h(e),n=e.read_shift(8,"f");return i[1].v=n,i}function m(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function g(e,t){var i=Hs(5+e.length);i.write_shift(2,14e3),i.write_shift(2,t);for(var n=0;n<e.length;++n){var s=e.charCodeAt(n);i[i.l++]=s>127?95:s}return i[i.l++]=0,i}var b={0:{n:"BOF",f:co},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,i){var n={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&i.qpro?(n.s.c=e.read_shift(1),e.l++,n.s.r=e.read_shift(2),n.e.c=e.read_shift(1),e.l++,n.e.r=e.read_shift(2),n):(n.s.c=e.read_shift(2),n.s.r=e.read_shift(2),12==t&&i.qpro&&(e.l+=2),n.e.c=e.read_shift(2),n.e.r=e.read_shift(2),12==t&&i.qpro&&(e.l+=2),65535==n.s.c&&(n.s.c=n.e.c=n.s.r=n.e.r=0),n)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,n){var s=i(e,0,n);return s[1].v=e.read_shift(2,"i"),s}},14:{n:"NUMBER",f:function(e,t,n){var s=i(e,0,n);return s[1].v=e.read_shift(8,"f"),s}},15:{n:"LABEL",f:n},16:{n:"FORMULA",f:function(e,t,n){var s=e.l+t,r=i(e,0,n);if(r[1].v=e.read_shift(8,"f"),n.qpro)e.l=s;else{var o=e.read_shift(2);!function(e,t){zs(e,0);var i=[],n=0,s="",r="",o="",h="";for(;e.l<e.length;){var u=e[e.l++];switch(u){case 0:i.push(e.read_shift(8,"f"));break;case 1:r=a(t[0].c,e.read_shift(2),!0),s=a(t[0].r,e.read_shift(2),!1),i.push(r+s);break;case 2:var d=a(t[0].c,e.read_shift(2),!0),f=a(t[0].r,e.read_shift(2),!1);r=a(t[0].c,e.read_shift(2),!0),s=a(t[0].r,e.read_shift(2),!1),i.push(d+f+":"+r+s);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:i.push("("+i.pop()+")");break;case 5:i.push(e.read_shift(2));break;case 6:for(var p="";u=e[e.l++];)p+=String.fromCharCode(u);i.push('"'+p.replace(/"/g,'""')+'"');break;case 8:i.push("-"+i.pop());break;case 23:i.push("+"+i.pop());break;case 22:i.push("NOT("+i.pop()+")");break;case 20:case 21:h=i.pop(),o=i.pop(),i.push(["AND","OR"][u-20]+"("+o+","+h+")");break;default:if(u<32&&c[u])h=i.pop(),o=i.pop(),i.push(o+c[u]+h);else{if(!l[u])return u<=7?console.error("WK1 invalid opcode "+u.toString(16)):u<=24?console.error("WK1 unsupported op "+u.toString(16)):u<=30?console.error("WK1 invalid opcode "+u.toString(16)):u<=115?console.error("WK1 unsupported function opcode "+u.toString(16)):console.error("WK1 unrecognized opcode "+u.toString(16));if(69==(n=l[u][1])&&(n=e[e.l++]),n>i.length)return void console.error("WK1 bad formula parse 0x"+u.toString(16)+":|"+i.join("|")+"|");var m=i.slice(-n);i.length-=n,i.push(l[u][0]+"("+m.join(",")+")")}}}1==i.length?t[1].f=""+i[0]:console.error("WK1 bad formula parse |"+i.join("|")+"|")}(e.slice(e.l,e.l+o),r),e.l+=o}return r}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:n},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:m},222:{n:"SHEETNAMELP",f:function(e,t){var i=e[e.l++];i>t-1&&(i=t-1);for(var n="";n.length<i;)n+=String.fromCharCode(e[e.l++]);return n}},65535:{n:""}},v={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var i=h(e);return i[1].t="s",i[1].v=e.read_shift(t-4,"cstr"),i}},23:{n:"NUMBER17",f:d},24:{n:"NUMBER18",f:function(e,t){var i=h(e);i[1].v=e.read_shift(2);var n=i[1].v>>1;if(1&i[1].v)switch(7&n){case 0:n=5e3*(n>>3);break;case 1:n=500*(n>>3);break;case 2:n=(n>>3)/20;break;case 3:n=(n>>3)/200;break;case 4:n=(n>>3)/2e3;break;case 5:n=(n>>3)/2e4;break;case 6:n=(n>>3)/16;break;case 7:n=(n>>3)/64}return i[1].v=n,i}},25:{n:"FORMULA19",f:function(e,t){var i=d(e);return e.l+=t-14,i}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var i={},n=e.l+t;e.l<n;){var s=e.read_shift(2);if(14e3==s){for(i[s]=[0,""],i[s][0]=e.read_shift(2);e[e.l];)i[s][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return i}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var i=h(e),n=e.read_shift(4);return i[1].v=n>>6,i}},38:{n:"??"},39:{n:"NUMBER27",f:p},40:{n:"FORMULA28",f:function(e,t){var i=p(e);return e.l+=t-10,i}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:m},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,i){if(i.qpro&&!(t<21)){var n=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[n,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var i=t||{};if(+i.codepage>=0&&Rt(+i.codepage),"string"==i.type)throw new Error("Cannot write WK1 to JS string");var n=Ys(),a=or(e["!ref"]),l=Array.isArray(e),c=[];nh(n,0,function(e){var t=Hs(2);return t.write_shift(2,e),t}(1030)),nh(n,6,function(e){var t=Hs(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(a));for(var h=Math.min(a.e.r,8191),u=a.s.r;u<=h;++u)for(var d=Js(u),f=a.s.c;f<=a.e.c;++f){u===a.s.r&&(c[f]=tr(f));var p=c[f]+d,m=l?(e[u]||[])[f]:e[p];if(m&&"z"!=m.t)if("n"==m.t)(0|m.v)==m.v&&m.v>=-32768&&m.v<=32767?nh(n,13,r(u,f,m.v)):nh(n,14,o(u,f,m.v));else nh(n,15,s(u,f,lr(m).slice(0,239)))}return nh(n,1),n.end()},book_to_wk3:function(e,t){var i=t||{};if(+i.codepage>=0&&Rt(+i.codepage),"string"==i.type)throw new Error("Cannot write WK3 to JS string");var n=Ys();nh(n,0,function(e){var t=Hs(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var i=0,n=0,s=0,r=0;r<e.SheetNames.length;++r){var o=e.SheetNames[r],a=e.Sheets[o];if(a&&a["!ref"]){++s;var l=sr(a["!ref"]);i<l.e.r&&(i=l.e.r),n<l.e.c&&(n=l.e.c)}}i>8191&&(i=8191);return t.write_shift(2,i),t.write_shift(1,s),t.write_shift(1,n),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var s=0,r=0;s<e.SheetNames.length;++s)(e.Sheets[e.SheetNames[s]]||{})["!ref"]&&nh(n,27,g(e.SheetNames[s],r++));var o=0;for(s=0;s<e.SheetNames.length;++s){var a=e.Sheets[e.SheetNames[s]];if(a&&a["!ref"]){for(var l=or(a["!ref"]),c=Array.isArray(a),h=[],d=Math.min(l.e.r,8191),p=l.s.r;p<=d;++p)for(var m=Js(p),b=l.s.c;b<=l.e.c;++b){p===l.s.r&&(h[b]=tr(b));var v=h[b]+m,y=c?(a[p]||[])[b]:a[v];if(y&&"z"!=y.t)if("n"==y.t)nh(n,23,f(p,b,o,y.v));else nh(n,22,u(p,b,o,lr(y).slice(0,239)))}++o}}return nh(n,1),n.end()},to_workbook:function(e,i){switch(i.type){case"base64":return t(qt(Ut(e)),i);case"binary":return t(qt(e),i);case"buffer":case"array":return t(e,i)}throw"Unsupported type "+i.type}}}();var Jo=function(){var e=$n("t"),t=$n("rPr");function i(i){var n=i.match(e);if(!n)return{t:"s",v:""};var s={t:"s",v:Fn(n[1])},r=i.match(t);return r&&(s.s=function(e){var t={},i=e.match(Ln),n=0,s=!1;if(i)for(;n!=i.length;++n){var r=Rn(i[n]);switch(r[0].replace(/\w*:/g,"")){case"<condense":case"<extend":break;case"<shadow":if(!r.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if("1"==r.val)break;t.cp=kt[parseInt(r.val,10)];break;case"<outline":if(!r.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=r.val;break;case"<sz":t.sz=r.val;break;case"<strike":if(!r.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!r.val)break;switch(r.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting"}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if("0"==r.val)break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if("0"==r.val)break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":r.rgb&&(t.color=r.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=r.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=r.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":case"<scheme":case"<scheme>":case"<scheme/>":case"</scheme>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(47!==r[0].charCodeAt(1)&&!s)throw new Error("Unrecognized rich format "+r[0])}}return t}(r[1])),s}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(e){return e.replace(n,"").split(s).map(i).filter((function(e){return e.v}))}}(),ea=function(){var e=/(\r\n|\n)/g;function t(t){var i=[[],t.v,[]];return t.v?(t.s&&function(e,t,i){var n=[];e.u&&n.push("text-decoration: underline;"),e.uval&&n.push("text-underline-style:"+e.uval+";"),e.sz&&n.push("font-size:"+e.sz+"pt;"),e.outline&&n.push("text-effect: outline;"),e.shadow&&n.push("text-shadow: auto;"),t.push('<span style="'+n.join("")+'">'),e.b&&(t.push("<b>"),i.push("</b>")),e.i&&(t.push("<i>"),i.push("</i>")),e.strike&&(t.push("<s>"),i.push("</s>"));var s=e.valign||"";"superscript"==s||"super"==s?s="sup":"subscript"==s&&(s="sub"),""!=s&&(t.push("<"+s+">"),i.push("</"+s+">")),i.push("</span>")}(t.s,i[0],i[2]),i[0].join("")+i[1].replace(e,"<br/>")+i[2].join("")):""}return function(e){return e.map(t).join("")}}(),ta=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,ia=/<(?:\w+:)?r>/,na=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function sa(e,t){var i=!t||t.cellHTML,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Fn(Kn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Kn(e),i&&(n.h=Gn(n.t))):e.match(ia)&&(n.r=Kn(e),n.t=Fn(Kn((e.replace(na,"").match(ta)||[]).join("").replace(Ln,""))),i&&(n.h=ea(Jo(n.r)))),n):{t:""}}var ra=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,oa=/<(?:\w+:)?(?:si|sstItem)>/g,aa=/<\/(?:\w+:)?(?:si|sstItem)>/;function la(e){if("undefined"!==typeof Ft)return Ft.utils.encode(Nt,e);for(var t=[],i=e.split(""),n=0;n<i.length;++n)t[n]=i[n].charCodeAt(0);return t}function ca(e,t){var i={};return i.Major=e.read_shift(2),i.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),i}function ha(e){for(var t=e.read_shift(4),i=e.l+t-4,n={},s=e.read_shift(4),r=[];s-- >0;)r.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=r,e.l!=i)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+i);return n}function ua(e){var t=function(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=ca(e,4),t.U=ca(e,4),t.W=ca(e,4),t}(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),4!=e.read_shift(4))throw new Error("Bad !Primary record");return t}function da(e,t){var i=e.l+t,n={};n.Flags=63&e.read_shift(4),e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=36==n.Flags;break;case 26625:s=4==n.Flags;break;case 0:s=16==n.Flags||4==n.Flags||36==n.Flags;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(i-e.l>>1,"utf16le"),e.l=i,n}function fa(e,t){var i={},n=e.l+t;return e.l+=4,i.Salt=e.slice(e.l,e.l+16),e.l+=16,i.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),i.VerifierHash=e.slice(e.l,n),e.l=n,i}function pa(e){if(36!=(63&e.read_shift(4)))throw new Error("EncryptionInfo mismatch");var t=e.read_shift(4);return{t:"Std",h:da(e,t),v:fa(e,e.length-e.l)}}function ma(){throw new Error("File is password-protected: ECMA-376 Extensible")}function ga(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var i=e.read_shift(e.length-e.l,"utf8"),n={};return i.replace(Ln,(function(e){var i=Rn(e);switch(On(i[0])){case"<?xml":case"<encryption":case"</encryption>":case"</keyEncryptors>":case"</keyEncryptor>":break;case"<keyData":t.forEach((function(e){n[e]=i[e]}));break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"<keyEncryptor":n.uri=i.uri;break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}})),n}function ba(e){var t,i,n=0,s=la(e),r=s.length+1;for((t=Yt(r))[0]=s.length,i=1;i!=r;++i)t[i]=s[i-1];for(i=r-1;i>=0;--i)n=((0===(16384&n)?0:1)|n<<1&32767)^t[i];return 52811^n}var va=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],i=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(e,t){return 255&((i=e^t)/2|128*i);var i};return function(s){for(var r,o,a,l=la(s),c=function(e){for(var n=t[e.length-1],s=104,r=e.length-1;r>=0;--r)for(var o=e[r],a=0;7!=a;++a)64&o&&(n^=i[s]),o*=2,--s;return n}(l),h=l.length,u=Yt(16),d=0;16!=d;++d)u[d]=0;for(1===(1&h)&&(r=c>>8,u[h]=n(e[0],r),--h,r=255&c,o=l[l.length-1],u[h]=n(o,r));h>0;)r=c>>8,u[--h]=n(l[h],r),r=255&c,u[--h]=n(l[h],r);for(h=15,a=15-l.length;a>0;)r=c>>8,u[h]=n(e[a],r),--a,r=255&c,u[--h]=n(l[h],r),--h,--a;return u}}(),ya=function(e){var t=0,i=va(e);return function(e){var n=function(e,t,i,n,s){var r,o;for(s||(s=t),n||(n=va(e)),r=0;r!=t.length;++r)o=t[r],o=255&((o^=n[i])>>5|o<<3),s[r]=o,++i;return[s,i,n]}("",e,t,i);return t=n[1],n[0]}};function xa(e,t,i){var n=i||{};return n.Info=e.read_shift(2),e.l-=2,1===n.Info?n.Data=function(e){var t={},i=t.EncryptionVersionInfo=ca(e,4);if(1!=i.Major||1!=i.Minor)throw"unrecognized version code "+i.Major+" : "+i.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}(e):n.Data=function(e,t){var i={},n=i.EncryptionVersionInfo=ca(e,4);if(t-=4,2!=n.Minor)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);i.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,i.EncryptionHeader=da(e,s),t-=s,i.EncryptionVerifier=fa(e,t),i}(e,t),n}var Sa=function(){function e(e,i){switch(i.type){case"base64":return t(Ut(e),i);case"binary":return t(e,i);case"buffer":return t(Ht&&Buffer.isBuffer(e)?e.toString("binary"):$t(e),i);case"array":return t(hn(e),i)}throw new Error("Unrecognized type "+i.type)}function t(e,t){var i=(t||{}).dense?[]:{},n=e.match(/\\trowd.*?\\row\b/g);if(!n.length)throw new Error("RTF missing table");var s={s:{c:0,r:0},e:{c:0,r:n.length-1}};return n.forEach((function(e,t){Array.isArray(i)&&(i[t]=[]);for(var n,r=/\\\w+\b/g,o=0,a=-1;n=r.exec(e);){if("\\cell"===n[0]){var l=e.slice(o,r.lastIndex-n[0].length);if(" "==l[0]&&(l=l.slice(1)),++a,l.length){var c={v:l,t:"s"};Array.isArray(i)?i[t][a]=c:i[nr({r:t,c:a})]=c}}o=r.lastIndex}a>s.e.c&&(s.e.c=a)})),i["!ref"]=rr(s),i}return{to_workbook:function(t,i){return cr(e(t,i),i)},to_sheet:e,from_sheet:function(e){for(var t,i=["{\\rtf1\\ansi"],n=or(e["!ref"]),s=Array.isArray(e),r=n.s.r;r<=n.e.r;++r){i.push("\\trowd\\trautofit1");for(var o=n.s.c;o<=n.e.c;++o)i.push("\\cellx"+(o+1));for(i.push("\\pard\\intbl"),o=n.s.c;o<=n.e.c;++o){var a=nr({r:r,c:o});(t=s?(e[r]||[])[o]:e[a])&&(null!=t.v||t.f&&!t.F)&&(i.push(" "+(t.w||(lr(t),t.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}}}();function Ea(e){for(var t=0,i=1;3!=t;++t)i=256*i+(e[t]>255?255:e[t]<0?0:e[t]);return i.toString(16).toUpperCase().slice(1)}function wa(e,t){if(0===t)return e;var i=function(e){var t=e[0]/255,i=e[1]/255,n=e[2]/255,s=Math.max(t,i,n),r=Math.min(t,i,n),o=s-r;if(0===o)return[0,0,t];var a,l=0,c=s+r;switch(a=o/(c>1?2-c:c),s){case t:l=((i-n)/o+6)%6;break;case i:l=(n-t)/o+2;break;case n:l=(t-i)/o+4}return[l/6,a,c/2]}(function(e){var t=e.slice("#"===e[0]?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}(e));return i[2]=t<0?i[2]*(1+t):1-(1-i[2])*(1-t),Ea(function(e){var t,i=e[0],n=e[1],s=e[2],r=2*n*(s<.5?s:1-s),o=s-r/2,a=[o,o,o],l=6*i;if(0!==n)switch(0|l){case 0:case 6:t=r*l,a[0]+=r,a[1]+=t;break;case 1:t=r*(2-l),a[0]+=t,a[1]+=r;break;case 2:t=r*(l-2),a[1]+=r,a[2]+=t;break;case 3:t=r*(4-l),a[1]+=t,a[2]+=r;break;case 4:t=r*(l-4),a[2]+=r,a[0]+=t;break;case 5:t=r*(6-l),a[2]+=t,a[0]+=r}for(var c=0;3!=c;++c)a[c]=Math.round(255*a[c]);return a}(i))}var Ta=6;function _a(e){return Math.floor((e+Math.round(128/Ta)/256)*Ta)}function Ma(e){return Math.floor((e-5)/Ta*100+.5)/100}function Pa(e){return Math.round((e*Ta+5)/Ta*256)/256}function Ca(e){return Pa(Ma(_a(e)))}function Aa(e){var t=Math.abs(e-Ca(e)),i=Ta;if(t>.005)for(Ta=1;Ta<15;++Ta)Math.abs(e-Ca(e))<=t&&(t=Math.abs(e-Ca(e)),i=Ta);Ta=i}function Na(e){e.width?(e.wpx=_a(e.width),e.wch=Ma(e.wpx),e.MDW=Ta):e.wpx?(e.wch=Ma(e.wpx),e.width=Pa(e.wch),e.MDW=Ta):"number"==typeof e.wch&&(e.width=Pa(e.wch),e.wpx=_a(e.width),e.MDW=Ta),e.customWidth&&delete e.customWidth}var La=96;function ka(e){return 96*e/La}function Ia(e){return e*La/96}var Ra={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};var Oa=["numFmtId","fillId","fontId","borderId","xfId"],Da=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];var Ba=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,i=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,n=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(r,o,a){var l,c={};return r?((l=(r=r.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"")).match(e))&&function(e,t,i){t.NumberFmt=[];for(var n=$i(hi),s=0;s<n.length;++s)t.NumberFmt[n[s]]=hi[n[s]];var r=e[0].match(Ln);if(r)for(s=0;s<r.length;++s){var o=Rn(r[s]);switch(On(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":case"</numFmt>":break;case"<numFmt":var a=Fn(Kn(o.formatCode)),l=parseInt(o.numFmtId,10);if(t.NumberFmt[l]=a,l>0){if(l>392){for(l=392;l>60&&null!=t.NumberFmt[l];--l);t.NumberFmt[l]=a}zi(a,l)}break;default:if(i.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}(l,c,a),(l=r.match(n))&&function(e,t,i,n){t.Fonts=[];var s={},r=!1;(e[0].match(Ln)||[]).forEach((function(e){var o=Rn(e);switch(On(o[0])){case"<fonts":case"<fonts>":case"</fonts>":case"<font":case"<font>":case"<name/>":case"</name>":case"<sz/>":case"</sz>":case"<vertAlign/>":case"</vertAlign>":case"<family/>":case"</family>":case"<scheme/>":case"</scheme>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=Kn(o.val));break;case"<b":s.bold=o.val?zn(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?zn(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?zn(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?zn(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?zn(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?zn(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?zn(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<charset":if("1"==o.val)break;o.codepage=kt[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=zn(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var a=Rr[s.color.index];81==s.color.index&&(a=Rr[1]),a||(a=Rr[1]),s.color.rgb=a[0].toString(16)+a[1].toString(16)+a[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&i.themeElements&&i.themeElements.clrScheme&&(s.color.rgb=wa(i.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<AlternateContent":case"<ext":r=!0;break;case"</AlternateContent>":case"</ext>":r=!1;break;default:if(n&&n.WTF&&!r)throw new Error("unrecognized "+o[0]+" in fonts")}}))}(l,c,o,a),(l=r.match(i))&&function(e,t,i,n){t.Fills=[];var s={},r=!1;(e[0].match(Ln)||[]).forEach((function(e){var i=Rn(e);switch(On(i[0])){case"<fills":case"<fills>":case"</fills>":case"</fill>":case"<gradientFill>":case"<patternFill/>":case"</patternFill>":case"<bgColor/>":case"</bgColor>":case"<fgColor/>":case"</fgColor>":case"<stop":case"<stop/>":case"</stop>":case"<color":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":i.patternType&&(s.patternType=i.patternType);break;case"<bgColor":s.bgColor||(s.bgColor={}),i.indexed&&(s.bgColor.indexed=parseInt(i.indexed,10)),i.theme&&(s.bgColor.theme=parseInt(i.theme,10)),i.tint&&(s.bgColor.tint=parseFloat(i.tint)),i.rgb&&(s.bgColor.rgb=i.rgb.slice(-6));break;case"<fgColor":s.fgColor||(s.fgColor={}),i.theme&&(s.fgColor.theme=parseInt(i.theme,10)),i.tint&&(s.fgColor.tint=parseFloat(i.tint)),null!=i.rgb&&(s.fgColor.rgb=i.rgb.slice(-6));break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(n&&n.WTF&&!r)throw new Error("unrecognized "+i[0]+" in fills")}}))}(l,c,0,a),(l=r.match(s))&&function(e,t,i,n){t.Borders=[];var s={},r=!1;(e[0].match(Ln)||[]).forEach((function(e){var i=Rn(e);switch(On(i[0])){case"<borders":case"<borders>":case"</borders>":case"</border>":case"<left/>":case"<left":case"<left>":case"</left>":case"<right/>":case"<right":case"<right>":case"</right>":case"<top/>":case"<top":case"<top>":case"</top>":case"<bottom/>":case"<bottom":case"<bottom>":case"</bottom>":case"<diagonal":case"<diagonal>":case"<diagonal/>":case"</diagonal>":case"<horizontal":case"<horizontal>":case"<horizontal/>":case"</horizontal>":case"<vertical":case"<vertical>":case"<vertical/>":case"</vertical>":case"<start":case"<start>":case"<start/>":case"</start>":case"<end":case"<end>":case"<end/>":case"</end>":case"<color":case"<color>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<border":case"<border>":case"<border/>":s={},i.diagonalUp&&(s.diagonalUp=zn(i.diagonalUp)),i.diagonalDown&&(s.diagonalDown=zn(i.diagonalDown)),t.Borders.push(s);break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(n&&n.WTF&&!r)throw new Error("unrecognized "+i[0]+" in borders")}}))}(l,c,0,a),(l=r.match(t))&&function(e,t,i){var n;t.CellXf=[];var s=!1;(e[0].match(Ln)||[]).forEach((function(e){var r=Rn(e),o=0;switch(On(r[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":case"</xf>":case"</alignment>":case"<protection":case"</protection>":case"<protection/>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<xf":case"<xf/>":for(delete(n=r)[0],o=0;o<Oa.length;++o)n[Oa[o]]&&(n[Oa[o]]=parseInt(n[Oa[o]],10));for(o=0;o<Da.length;++o)n[Da[o]]&&(n[Da[o]]=zn(n[Da[o]]));if(t.NumberFmt&&n.numFmtId>392)for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}t.CellXf.push(n);break;case"<alignment":case"<alignment/>":var a={};r.vertical&&(a.vertical=r.vertical),r.horizontal&&(a.horizontal=r.horizontal),null!=r.textRotation&&(a.textRotation=r.textRotation),r.indent&&(a.indent=r.indent),r.wrapText&&(a.wrapText=zn(r.wrapText)),n.alignment=a;break;case"<AlternateContent":case"<ext":s=!0;break;case"</AlternateContent>":case"</ext>":s=!1;break;default:if(i&&i.WTF&&!s)throw new Error("unrecognized "+r[0]+" in cellXfs")}}))}(l,c,a),c):c}}();var Fa=Us;var Va=Us;var ja=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Ga(e,t,i){t.themeElements.clrScheme=[];var n={};(e[0].match(Ln)||[]).forEach((function(e){var s=Rn(e);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":"/"===s[0].charAt(1)?(t.themeElements.clrScheme[ja.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(i&&i.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}}))}function Wa(){}function za(){}var Ua=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Ha=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Xa=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;var Ya=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Ka(e,t){var i;e&&0!==e.length||(e=qa());var n={};if(!(i=e.match(Ya)))throw new Error("themeElements not found in theme");return function(e,t,i){var n;t.themeElements={},[["clrScheme",Ua,Ga],["fontScheme",Ha,Wa],["fmtScheme",Xa,za]].forEach((function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,i)}))}(i[0],n,t),n.raw=e,n}function qa(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var i=[Cn];return i[i.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',i[i.length]="<a:themeElements>",i[i.length]='<a:clrScheme name="Office">',i[i.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',i[i.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',i[i.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',i[i.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',i[i.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',i[i.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',i[i.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',i[i.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',i[i.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',i[i.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',i[i.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',i[i.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',i[i.length]="</a:clrScheme>",i[i.length]='<a:fontScheme name="Office">',i[i.length]="<a:majorFont>",i[i.length]='<a:latin typeface="Cambria"/>',i[i.length]='<a:ea typeface=""/>',i[i.length]='<a:cs typeface=""/>',i[i.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',i[i.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',i[i.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',i[i.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',i[i.length]='<a:font script="Arab" typeface="Times New Roman"/>',i[i.length]='<a:font script="Hebr" typeface="Times New Roman"/>',i[i.length]='<a:font script="Thai" typeface="Tahoma"/>',i[i.length]='<a:font script="Ethi" typeface="Nyala"/>',i[i.length]='<a:font script="Beng" typeface="Vrinda"/>',i[i.length]='<a:font script="Gujr" typeface="Shruti"/>',i[i.length]='<a:font script="Khmr" typeface="MoolBoran"/>',i[i.length]='<a:font script="Knda" typeface="Tunga"/>',i[i.length]='<a:font script="Guru" typeface="Raavi"/>',i[i.length]='<a:font script="Cans" typeface="Euphemia"/>',i[i.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',i[i.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',i[i.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',i[i.length]='<a:font script="Thaa" typeface="MV Boli"/>',i[i.length]='<a:font script="Deva" typeface="Mangal"/>',i[i.length]='<a:font script="Telu" typeface="Gautami"/>',i[i.length]='<a:font script="Taml" typeface="Latha"/>',i[i.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',i[i.length]='<a:font script="Orya" typeface="Kalinga"/>',i[i.length]='<a:font script="Mlym" typeface="Kartika"/>',i[i.length]='<a:font script="Laoo" typeface="DokChampa"/>',i[i.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',i[i.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',i[i.length]='<a:font script="Viet" typeface="Times New Roman"/>',i[i.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',i[i.length]='<a:font script="Geor" typeface="Sylfaen"/>',i[i.length]="</a:majorFont>",i[i.length]="<a:minorFont>",i[i.length]='<a:latin typeface="Calibri"/>',i[i.length]='<a:ea typeface=""/>',i[i.length]='<a:cs typeface=""/>',i[i.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',i[i.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',i[i.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',i[i.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',i[i.length]='<a:font script="Arab" typeface="Arial"/>',i[i.length]='<a:font script="Hebr" typeface="Arial"/>',i[i.length]='<a:font script="Thai" typeface="Tahoma"/>',i[i.length]='<a:font script="Ethi" typeface="Nyala"/>',i[i.length]='<a:font script="Beng" typeface="Vrinda"/>',i[i.length]='<a:font script="Gujr" typeface="Shruti"/>',i[i.length]='<a:font script="Khmr" typeface="DaunPenh"/>',i[i.length]='<a:font script="Knda" typeface="Tunga"/>',i[i.length]='<a:font script="Guru" typeface="Raavi"/>',i[i.length]='<a:font script="Cans" typeface="Euphemia"/>',i[i.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',i[i.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',i[i.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',i[i.length]='<a:font script="Thaa" typeface="MV Boli"/>',i[i.length]='<a:font script="Deva" typeface="Mangal"/>',i[i.length]='<a:font script="Telu" typeface="Gautami"/>',i[i.length]='<a:font script="Taml" typeface="Latha"/>',i[i.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',i[i.length]='<a:font script="Orya" typeface="Kalinga"/>',i[i.length]='<a:font script="Mlym" typeface="Kartika"/>',i[i.length]='<a:font script="Laoo" typeface="DokChampa"/>',i[i.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',i[i.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',i[i.length]='<a:font script="Viet" typeface="Arial"/>',i[i.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',i[i.length]='<a:font script="Geor" typeface="Sylfaen"/>',i[i.length]="</a:minorFont>",i[i.length]="</a:fontScheme>",i[i.length]='<a:fmtScheme name="Office">',i[i.length]="<a:fillStyleLst>",i[i.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:lin ang="16200000" scaled="1"/>',i[i.length]="</a:gradFill>",i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:lin ang="16200000" scaled="0"/>',i[i.length]="</a:gradFill>",i[i.length]="</a:fillStyleLst>",i[i.length]="<a:lnStyleLst>",i[i.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',i[i.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',i[i.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',i[i.length]="</a:lnStyleLst>",i[i.length]="<a:effectStyleLst>",i[i.length]="<a:effectStyle>",i[i.length]="<a:effectLst>",i[i.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',i[i.length]="</a:effectLst>",i[i.length]="</a:effectStyle>",i[i.length]="<a:effectStyle>",i[i.length]="<a:effectLst>",i[i.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',i[i.length]="</a:effectLst>",i[i.length]="</a:effectStyle>",i[i.length]="<a:effectStyle>",i[i.length]="<a:effectLst>",i[i.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',i[i.length]="</a:effectLst>",i[i.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',i[i.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',i[i.length]="</a:effectStyle>",i[i.length]="</a:effectStyleLst>",i[i.length]="<a:bgFillStyleLst>",i[i.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',i[i.length]="</a:gradFill>",i[i.length]='<a:gradFill rotWithShape="1">',i[i.length]="<a:gsLst>",i[i.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',i[i.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',i[i.length]="</a:gsLst>",i[i.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',i[i.length]="</a:gradFill>",i[i.length]="</a:bgFillStyleLst>",i[i.length]="</a:fmtScheme>",i[i.length]="</a:themeElements>",i[i.length]="<a:objectDefaults>",i[i.length]="<a:spDef>",i[i.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',i[i.length]="</a:spDef>",i[i.length]="<a:lnDef>",i[i.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',i[i.length]="</a:lnDef>",i[i.length]="</a:objectDefaults>",i[i.length]="<a:extraClrSchemeLst/>",i[i.length]="</a:theme>",i.join("")}function $a(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:case 4:e.l+=4;break;case 1:t.xclrValue=function(e,t){return Us(e,t)}(e,4);break;case 2:t.xclrValue=yo(e);break;case 3:t.xclrValue=function(e){return e.read_shift(4)}(e)}return e.l+=8,t}function Za(e){var t=e.read_shift(2),i=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=$a(e);break;case 6:n[1]=function(e,t){return Us(e,t)}(e,i);break;case 14:case 15:n[1]=e.read_shift(1===i?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+i)}return n}function Qa(e,t,i,n){var s,r=Array.isArray(e);t.forEach((function(t){var o=ir(t.ref);if(r?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[t.ref],!s){s={t:"z"},r?e[o.r][o.c]=s:e[t.ref]=s;var a=or(e["!ref"]||"BDWGO1000001:A1");a.s.r>o.r&&(a.s.r=o.r),a.e.r<o.r&&(a.e.r=o.r),a.s.c>o.c&&(a.s.c=o.c),a.e.c<o.c&&(a.e.c=o.c);var l=rr(a);l!==e["!ref"]&&(e["!ref"]=l)}s.c||(s.c=[]);var c={a:t.author,t:t.t,r:t.r,T:i};t.h&&(c.h=t.h);for(var h=s.c.length-1;h>=0;--h){if(!i&&s.c[h].T)return;i&&!s.c[h].T&&s.c.splice(h,1)}if(i&&n)for(h=0;h<n.length;++h)if(c.a==n[h].id){c.a=n[h].name||c.a;break}s.c.push(c)}))}var Ja=dr;var el=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function i(e,i,n,s){var r=!1,o=!1;0==n.length?o=!0:"["==n.charAt(0)&&(o=!0,n=n.slice(1,-1)),0==s.length?r=!0:"["==s.charAt(0)&&(r=!0,s=s.slice(1,-1));var a=n.length>0?0|parseInt(n,10):0,l=s.length>0?0|parseInt(s,10):0;return r?l+=t.c:--l,o?a+=t.r:--a,i+(r?"":"$")+tr(l)+(o?"":"$")+Js(a)}return function(n,s){return t=s,n.replace(e,i)}}(),tl=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,il=function(){return function(e,t){return e.replace(tl,(function(e,i,n,s,r,o){var a=er(s)-(n?0:t.c),l=Qs(o)-(r?0:t.r);return i+"R"+(0==l?"":r?l+1:"["+l+"]")+"C"+(0==a?"":n?a+1:"["+a+"]")}))}}();function nl(e,t){return e.replace(tl,(function(e,i,n,s,r,o){return i+("$"==n?n+s:tr(er(s)+t.c))+("$"==r?r+o:Js(Qs(o)+t.r))}))}function sl(e,t,i){var n=sr(t).s,s=ir(i);return nl(e,{r:s.r-n.r,c:s.c-n.c})}function rl(e){return e.replace(/_xlfn\./g,"")}function ol(e){e.l+=1}function al(e,t){var i=e.read_shift(1==t?1:2);return[16383&i,i>>14&1,i>>15&1]}function ll(e,t,i){var n=2;if(i){if(i.biff>=2&&i.biff<=5)return cl(e);12==i.biff&&(n=4)}var s=e.read_shift(n),r=e.read_shift(n),o=al(e,2),a=al(e,2);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:r,c:a[0],cRel:a[1],rRel:a[2]}}}function cl(e){var t=al(e,2),i=al(e,2),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:i[0],c:s,cRel:i[1],rRel:i[2]}}}function hl(e,t,i){if(i&&i.biff>=2&&i.biff<=5)return function(e){var t=al(e,2),i=e.read_shift(1);return{r:t[0],c:i,cRel:t[1],rRel:t[2]}}(e);var n=e.read_shift(i&&12==i.biff?4:2),s=al(e,2);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function ul(e){var t=e.read_shift(2),i=e.read_shift(2);return{r:t,c:255&i,fQuoted:!!(16384&i),cRel:i>>15,rRel:i>>15}}function dl(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function fl(e){return[e.read_shift(1),e.read_shift(1)]}function pl(e,t){var i=[e.read_shift(1)];if(12==t)switch(i[0]){case 2:i[0]=4;break;case 4:i[0]=16;break;case 0:i[0]=1;break;case 1:i[0]=2}switch(i[0]){case 4:i[1]=lo(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:i[1]=Or[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:i[1]=_r(e);break;case 2:i[1]=go(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+i[0])}return i}function ml(e,t,i){for(var n=e.read_shift(12==i.biff?4:2),s=[],r=0;r!=n;++r)s.push((12==i.biff?Tr:To)(e,8));return s}function gl(e,t,i){var n=0,s=0;12==i.biff?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),i.biff>=2&&i.biff<8&&(--n,0==--s&&(s=256));for(var r=0,o=[];r!=n&&(o[r]=[]);++r)for(var a=0;a!=s;++a)o[r][a]=pl(e,i.biff);return o}function bl(e,t,i){return e.l+=2,[ul(e)]}function vl(e){return e.l+=6,[]}function yl(e){return e.l+=2,[co(e),1&e.read_shift(2)]}var xl=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var Sl={1:{n:"PtgExp",f:function(e,t,i){return e.l++,i&&12==i.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(i&&2==i.biff?1:2)]}},2:{n:"PtgTbl",f:Us},3:{n:"PtgAdd",f:ol},4:{n:"PtgSub",f:ol},5:{n:"PtgMul",f:ol},6:{n:"PtgDiv",f:ol},7:{n:"PtgPower",f:ol},8:{n:"PtgConcat",f:ol},9:{n:"PtgLt",f:ol},10:{n:"PtgLe",f:ol},11:{n:"PtgEq",f:ol},12:{n:"PtgGe",f:ol},13:{n:"PtgGt",f:ol},14:{n:"PtgNe",f:ol},15:{n:"PtgIsect",f:ol},16:{n:"PtgUnion",f:ol},17:{n:"PtgRange",f:ol},18:{n:"PtgUplus",f:ol},19:{n:"PtgUminus",f:ol},20:{n:"PtgPercent",f:ol},21:{n:"PtgParen",f:ol},22:{n:"PtgMissArg",f:ol},23:{n:"PtgStr",f:function(e,t,i){return e.l++,uo(e,0,i)}},26:{n:"PtgSheet",f:function(e,t,i){return e.l+=5,e.l+=2,e.l+=2==i.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,i){return e.l+=2==i.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,Or[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,_r(e)}},32:{n:"PtgArray",f:function(e,t,i){var n=(96&e[e.l++])>>5;return e.l+=2==i.biff?6:12==i.biff?14:7,[n]}},33:{n:"PtgFunc",f:function(e,t,i){var n=(96&e[e.l])>>5;e.l+=1;var s=e.read_shift(i&&i.biff<=3?1:2);return[Wl[s],Gl[s],n]}},34:{n:"PtgFuncVar",f:function(e,t,i){var n=e[e.l++],s=e.read_shift(1),r=i&&i.biff<=3?[88==n?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[s,(0===r[0]?Gl:jl)[r[1]]]}},35:{n:"PtgName",f:function(e,t,i){var n=e.read_shift(1)>>>5&3,s=!i||i.biff>=8?4:2,r=e.read_shift(s);switch(i.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[n,0,r]}},36:{n:"PtgRef",f:function(e,t,i){var n=(96&e[e.l])>>5;return e.l+=1,[n,hl(e,0,i)]}},37:{n:"PtgArea",f:function(e,t,i){return[(96&e[e.l++])>>5,ll(e,i.biff>=2&&i.biff,i)]}},38:{n:"PtgMemArea",f:function(e,t,i){var n=e.read_shift(1)>>>5&3;return e.l+=i&&2==i.biff?3:4,[n,e.read_shift(i&&2==i.biff?1:2)]}},39:{n:"PtgMemErr",f:Us},40:{n:"PtgMemNoMem",f:Us},41:{n:"PtgMemFunc",f:function(e,t,i){return[e.read_shift(1)>>>5&3,e.read_shift(i&&2==i.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,i){var n=e.read_shift(1)>>>5&3;return e.l+=4,i.biff<8&&e.l--,12==i.biff&&(e.l+=2),[n]}},43:{n:"PtgAreaErr",f:function(e,t,i){var n=(96&e[e.l++])>>5;return e.l+=i&&i.biff>8?12:i.biff<8?6:8,[n]}},44:{n:"PtgRefN",f:function(e,t,i){var n=(96&e[e.l])>>5;e.l+=1;var s=function(e,t,i){var n=i&&i.biff?i.biff:8;if(n>=2&&n<=5)return function(e){var t=e.read_shift(2),i=e.read_shift(1),n=(32768&t)>>15,s=(16384&t)>>14;return t&=16383,1==n&&t>=8192&&(t-=16384),1==s&&i>=128&&(i-=256),{r:t,c:i,cRel:s,rRel:n}}(e);var s=e.read_shift(n>=12?4:2),r=e.read_shift(2),o=(16384&r)>>14,a=(32768&r)>>15;if(r&=16383,1==a)for(;s>524287;)s-=1048576;if(1==o)for(;r>8191;)r-=16384;return{r:s,c:r,cRel:o,rRel:a}}(e,0,i);return[n,s]}},45:{n:"PtgAreaN",f:function(e,t,i){var n=(96&e[e.l++])>>5,s=function(e,t,i){if(i.biff<8)return cl(e);var n=e.read_shift(12==i.biff?4:2),s=e.read_shift(12==i.biff?4:2),r=al(e,2),o=al(e,2);return{s:{r:n,c:r[0],cRel:r[1],rRel:r[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}(e,0,i);return[n,s]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,i){return 5==i.biff?function(e){var t=e.read_shift(1)>>>5&3,i=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,i,n]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,i){var n=(96&e[e.l])>>5;e.l+=1;var s=e.read_shift(2);return i&&5==i.biff&&(e.l+=12),[n,s,hl(e,0,i)]}},59:{n:"PtgArea3d",f:function(e,t,i){var n=(96&e[e.l++])>>5,s=e.read_shift(2,"i");if(i)switch(i.biff){case 5:e.l+=12;break;case 12:0}return[n,s,ll(e,0,i)]}},60:{n:"PtgRefErr3d",f:function(e,t,i){var n=(96&e[e.l++])>>5,s=e.read_shift(2),r=4;if(i)switch(i.biff){case 5:r=15;break;case 12:r=6}return e.l+=r,[n,s]}},61:{n:"PtgAreaErr3d",f:function(e,t,i){var n=(96&e[e.l++])>>5,s=e.read_shift(2),r=8;if(i)switch(i.biff){case 5:e.l+=12,r=6;break;case 12:r=12}return e.l+=r,[n,s]}},255:{}},El={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},wl={1:{n:"PtgElfLel",f:yl},2:{n:"PtgElfRw",f:bl},3:{n:"PtgElfCol",f:bl},6:{n:"PtgElfRwV",f:bl},7:{n:"PtgElfColV",f:bl},10:{n:"PtgElfRadical",f:bl},11:{n:"PtgElfRadicalS",f:vl},13:{n:"PtgElfColS",f:vl},15:{n:"PtgElfColSV",f:vl},16:{n:"PtgElfRadicalLel",f:yl},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),i=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),r=e.read_shift(2);return{ixti:t,coltype:3&i,rt:xl[i>>2&31],idx:n,c:s,C:r}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},Tl={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,i){var n=255&e[e.l+1]?1:0;return e.l+=i&&2==i.biff?3:4,[n]}},2:{n:"PtgAttrIf",f:function(e,t,i){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(i&&2==i.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,i){e.l+=2;for(var n=e.read_shift(i&&2==i.biff?1:2),s=[],r=0;r<=n;++r)s.push(e.read_shift(i&&2==i.biff?1:2));return s}},8:{n:"PtgAttrGoto",f:function(e,t,i){var n=255&e[e.l+1]?1:0;return e.l+=2,[n,e.read_shift(i&&2==i.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,i){e.l+=i&&2==i.biff?3:4}},32:{n:"PtgAttrBaxcel",f:dl},33:{n:"PtgAttrBaxcel",f:dl},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),fl(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),fl(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function _l(e,t,i,n){if(n.biff<8)return Us(e,t);for(var s=e.l+t,r=[],o=0;o!==i.length;++o)switch(i[o][0]){case"PtgArray":i[o][1]=gl(e,0,n),r.push(i[o][1]);break;case"PtgMemArea":i[o][2]=ml(e,i[o][1],n),r.push(i[o][2]);break;case"PtgExp":n&&12==n.biff&&(i[o][1][1]=e.read_shift(4),r.push(i[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+i[o][0]}return 0!==(t=s-e.l)&&r.push(Us(e,t)),r}function Ml(e,t,i){for(var n,s,r=e.l+t,o=[];r!=e.l;)t=r-e.l,s=e[e.l],n=Sl[s]||Sl[El[s]],24!==s&&25!==s||(n=(24===s?wl:Tl)[e[e.l+1]]),n&&n.f?o.push([n.n,n.f(e,t,i)]):Us(e,t);return o}function Pl(e){for(var t=[],i=0;i<e.length;++i){for(var n=e[i],s=[],r=0;r<n.length;++r){var o=n[r];if(o)if(2===o[0])s.push('"'+o[1].replace(/"/g,'""')+'"');else s.push(o[1]);else s.push("")}t.push(s.join(","))}return t.join(";")}var Cl={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Al(e,t,i){if(!e)return"SH33TJSERR0";if(i.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(i.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(i.biff>8)switch(e[n[0]][0]){case 357:return s=-1==n[1]?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return null!=i.SID?e.SheetNames[i.SID]:"SH33TJSSAME"+e[n[0]][0];default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=-1==n[1]?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map((function(e){return e.Name})).join(";;");default:return e[n[0]][0][3]?(s=-1==n[1]?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Nl(e,t,i){var n=Al(e,t,i);return"#REF"==n?n:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(n,i)}function Ll(e,t,i,n,s){var r,o,a,l,c=s&&s.biff||8,h={s:{c:0,r:0},e:{c:0,r:0}},u=[],d=0,f=0,p="";if(!e[0]||!e[0][0])return"";for(var m=-1,g="",b=0,v=e[0].length;b<v;++b){var y=e[0][b];switch(y[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(r=u.pop(),o=u.pop(),m>=0){switch(e[0][m][1][0]){case 0:g=dn(" ",e[0][m][1][1]);break;case 1:g=dn("\r",e[0][m][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}o+=g,m=-1}u.push(o+Cl[y[0]]+r);break;case"PtgIsect":r=u.pop(),o=u.pop(),u.push(o+" "+r);break;case"PtgUnion":r=u.pop(),o=u.pop(),u.push(o+","+r);break;case"PtgRange":r=u.pop(),o=u.pop(),u.push(o+":"+r);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":a=Ks(y[1][1],h,s),u.push($s(a,c));break;case"PtgRefN":a=i?Ks(y[1][1],i,s):y[1][1],u.push($s(a,c));break;case"PtgRef3d":d=y[1][1],a=Ks(y[1][2],h,s);p=Nl(n,d,s);u.push(p+"!"+$s(a,c));break;case"PtgFunc":case"PtgFuncVar":var x=y[1][0],S=y[1][1];x||(x=0);var E=0==(x&=127)?[]:u.slice(-x);u.length-=x,"User"===S&&(S=E.shift()),u.push(S+"("+E.join(",")+")");break;case"PtgBool":u.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":u.push(y[1]);break;case"PtgNum":u.push(String(y[1]));break;case"PtgStr":u.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=qs(y[1][1],i?{s:i}:h,s),u.push(Zs(l,s));break;case"PtgArea":l=qs(y[1][1],h,s),u.push(Zs(l,s));break;case"PtgArea3d":d=y[1][1],l=y[1][2],p=Nl(n,d,s),u.push(p+"!"+Zs(l,s));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgName":f=y[1][2];var w=(n.names||[])[f-1]||(n[0]||[])[f],T=w?w.Name:"SH33TJSNAME"+String(f);T&&"_xlfn."==T.slice(0,6)&&!s.xlfn&&(T=T.slice(6)),u.push(T);break;case"PtgNameX":var _,M=y[1][1];if(f=y[1][2],!(s.biff<=5)){var P="";if(14849==((n[M]||[])[0]||[])[0]||(1025==((n[M]||[])[0]||[])[0]?n[M][f]&&n[M][f].itab>0&&(P=n.SheetNames[n[M][f].itab-1]+"!"):P=n.SheetNames[f-1]+"!"),n[M]&&n[M][f])P+=n[M][f].Name;else if(n[0]&&n[0][f])P+=n[0][f].Name;else{var C=(Al(n,M,s)||"").split(";;");C[f-1]?P=C[f-1]:P+="SH33TJSERRX"}u.push(P);break}M<0&&(M=-M),n[M]&&(_=n[M][f]),_||(_={Name:"SH33TJSERRY"}),u.push(_.Name);break;case"PtgParen":var A="(",N=")";if(m>=0){switch(g="",e[0][m][1][0]){case 2:A=dn(" ",e[0][m][1][1])+A;break;case 3:A=dn("\r",e[0][m][1][1])+A;break;case 4:N=dn(" ",e[0][m][1][1])+N;break;case 5:N=dn("\r",e[0][m][1][1])+N;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}u.push(A+u.pop()+N);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":u.push("#REF!");break;case"PtgExp":a={c:y[1][1],r:y[1][0]};var L={c:i.c,r:i.r};if(n.sharedf[nr(a)]){var k=n.sharedf[nr(a)];u.push(Ll(k,h,L,n,s))}else{var I=!1;for(r=0;r!=n.arrayf.length;++r)if(o=n.arrayf[r],!(a.c<o[0].s.c||a.c>o[0].e.c)&&!(a.r<o[0].s.r||a.r>o[0].e.r)){u.push(Ll(o[1],h,L,n,s)),I=!0;break}I||u.push(y[1])}break;case"PtgArray":u.push("{"+Pl(y[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=b;break;case"PtgMissArg":u.push("");break;case"PtgList":u.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(y))}if(3!=s.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][b][0])){var R=!0;switch((y=e[0][m])[1][0]){case 4:R=!1;case 0:g=dn(" ",y[1][1]);break;case 5:R=!1;case 1:g=dn("\r",y[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}u.push((R?g:"")+u.pop()+(R?"":g)),m=-1}}if(u.length>1&&s.WTF)throw new Error("bad formula stack");return u[0]}function kl(e,t,i){var n,s=e.l+t,r=2==i.biff?1:2,o=e.read_shift(r);if(65535==o)return[[],Us(e,t-2)];var a=Ml(e,o,i);return t!==o+r&&(n=_l(e,t-o-r,a,i)),e.l=s,[a,n]}function Il(e,t,i){var n,s=e.l+t,r=e.read_shift(2),o=Ml(e,r,i);return 65535==r?[[],Us(e,t-2)]:(t!==r+2&&(n=_l(e,s-r-2,o,i)),[o,n])}function Rl(e,t,i){var n=e.l+t,s=So(e);2==i.biff&&++e.l;var r=function(e){var t;if(65535!==ks(e,e.l+6))return[_r(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=1===e[e.l+2],e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}(e),o=e.read_shift(1);2!=i.biff&&(e.read_shift(1),i.biff>=5&&e.read_shift(4));var a=function(e,t,i){var n,s=e.l+t,r=2==i.biff?1:2,o=e.read_shift(r);if(65535==o)return[[],Us(e,t-2)];var a=Ml(e,o,i);return t!==o+r&&(n=_l(e,t-o-r,a,i)),e.l=s,[a,n]}(e,n-e.l,i);return{cell:s,val:r[0],formula:a,shared:o>>3&1,tt:r[1]}}function Ol(e,t,i){var n=e.read_shift(4),s=Ml(e,n,i),r=e.read_shift(4);return[s,r>0?_l(e,r,s,i):null]}var Dl=Ol,Bl=Ol,Fl=Ol,Vl=Ol,jl={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Gl={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Wl={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function zl(e){return"of:"==e.slice(0,3)&&(e=e.slice(3)),61==e.charCodeAt(0)&&61==(e=e.slice(1)).charCodeAt(0)&&(e=e.slice(1)),(e=(e=(e=e.replace(/COM\.MICROSOFT\./g,"")).replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,(function(e,t){return t.replace(/\./g,"")}))).replace(/\[.(#[A-Z]*[?!])\]/g,"$1")).replace(/[;~]/g,",").replace(/\|/g,";")}function Ul(e){var t=e.split(":");return[t[0].split(".")[0],t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var Hl={},Xl={};function Yl(e,t){if(e){var i=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(i=[1,1,1,1,.5,.5]),null==e.left&&(e.left=i[0]),null==e.right&&(e.right=i[1]),null==e.top&&(e.top=i[2]),null==e.bottom&&(e.bottom=i[3]),null==e.header&&(e.header=i[4]),null==e.footer&&(e.footer=i[5])}}function Kl(e,t,i,n,s,r){try{n.cellNF&&(e.z=hi[t])}catch(Sy){if(n.WTF)throw Sy}if("z"!==e.t||n.cellStyles){if("d"===e.t&&"string"===typeof e.v&&(e.v=cn(e.v)),(!n||!1!==n.cellText)&&"z"!==e.t)try{if(null==hi[t]&&zi(Hi[t]||"General",t),"e"===e.t)e.w=e.w||Or[e.v];else if(0===t)if("n"===e.t)(0|e.v)===e.v?e.w=e.v.toString(10):e.w=xi(e.v);else if("d"===e.t){var o=Ji(e.v);e.w=(0|o)===o?o.toString(10):xi(o)}else{if(void 0===e.v)return"";e.w=Si(e.v,Xl)}else"d"===e.t?e.w=Wi(t,Ji(e.v),Xl):e.w=Wi(t,e.v,Xl)}catch(Sy){if(n.WTF)throw Sy}if(n.cellStyles&&null!=i)try{e.s=r.Fills[i],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=wa(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=wa(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(Sy){if(n.WTF&&r.Fills)throw Sy}}}var ql=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,$l=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Zl=/<(?:\w:)?hyperlink [^>]*>/gm,Ql=/"(\w*:\w*)"/,Jl=/<(?:\w:)?col\b[^>]*[\/]?>/g,ec=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,tc=/<(?:\w:)?pageMargins[^>]*\/>/g,ic=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,nc=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,sc=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function rc(e,t,i,n,s,r,o){if(!e)return e;n||(n={"!id":{}});var a=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",h="",u=e.match($l);u?(c=e.slice(0,u.index),h=e.slice(u.index+u[0].length)):c=h=e;var d=c.match(ic);d?oc(d[0],a,s,i):(d=c.match(nc))&&function(e,t,i,n,s){oc(e.slice(0,e.indexOf(">")),i,n,s)}(d[0],d[1],a,s,i);var f=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(f>0){var p=c.slice(f,f+50).match(Ql);p&&function(e,t){var i=or(t);i.s.r<=i.e.r&&i.s.c<=i.e.c&&i.s.r>=0&&i.s.c>=0&&(e["!ref"]=rr(i))}(a,p[1])}var m=c.match(sc);m&&m[1]&&function(e,t){t.Views||(t.Views=[{}]);(e.match(ac)||[]).forEach((function(e,i){var n=Rn(e);t.Views[i]||(t.Views[i]={}),+n.zoomScale&&(t.Views[i].zoom=+n.zoomScale),zn(n.rightToLeft)&&(t.Views[i].RTL=!0)}))}(m[1],s);var g=[];if(t.cellStyles){var b=c.match(Jl);b&&function(e,t){for(var i=!1,n=0;n!=t.length;++n){var s=Rn(t[n],!0);s.hidden&&(s.hidden=zn(s.hidden));var r=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!i&&s.width&&(i=!0,Aa(s.width)),Na(s);r<=o;)e[r++]=un(s)}}(g,b)}u&&lc(u[1],a,t,l,r,o);var v=h.match(ec);v&&(a["!autofilter"]=function(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}(v[0]));var y=[],x=h.match(ql);if(x)for(f=0;f!=x.length;++f)y[f]=or(x[f].slice(x[f].indexOf('"')+1));var S=h.match(Zl);S&&function(e,t,i){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var r=Rn(Kn(t[s]),!0);if(!r.ref)return;var o=((i||{})["!id"]||[])[r.id];o?(r.Target=o.Target,r.location&&(r.Target+="#"+Fn(r.location))):(r.Target="#"+Fn(r.location),o={Target:r.Target,TargetMode:"Internal"}),r.Rel=o,r.tooltip&&(r.Tooltip=r.tooltip,delete r.tooltip);for(var a=or(r.ref),l=a.s.r;l<=a.e.r;++l)for(var c=a.s.c;c<=a.e.c;++c){var h=nr({c:c,r:l});n?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=r):(e[h]||(e[h]={t:"z",v:void 0}),e[h].l=r)}}}(a,S,n);var E=h.match(tc);if(E&&(a["!margins"]=function(e){var t={};return["left","right","top","bottom","header","footer"].forEach((function(i){e[i]&&(t[i]=parseFloat(e[i]))})),t}(Rn(E[0]))),!a["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(a["!ref"]=rr(l)),t.sheetRows>0&&a["!ref"]){var w=or(a["!ref"]);t.sheetRows<=+w.e.r&&(w.e.r=t.sheetRows-1,w.e.r>l.e.r&&(w.e.r=l.e.r),w.e.r<w.s.r&&(w.s.r=w.e.r),w.e.c>l.e.c&&(w.e.c=l.e.c),w.e.c<w.s.c&&(w.s.c=w.e.c),a["!fullref"]=a["!ref"],a["!ref"]=rr(w))}return g.length>0&&(a["!cols"]=g),y.length>0&&(a["!merges"]=y),a}function oc(e,t,i,n){var s=Rn(e);i.Sheets[n]||(i.Sheets[n]={}),s.codeName&&(i.Sheets[n].CodeName=Fn(Kn(s.codeName)))}var ac=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;var lc=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,i=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,r=$n("v"),o=$n("f");return function(a,l,c,h,u,d){for(var f,p,m,g,b,v=0,y="",x=[],S=[],E=0,w=0,T=0,_="",M=0,P=0,C=0,A=0,N=Array.isArray(d.CellXf),L=[],k=[],I=Array.isArray(l),R=[],O={},D=!1,B=!!c.sheetStubs,F=a.split(t),V=0,j=F.length;V!=j;++V){var G=(y=F[V].trim()).length;if(0!==G){var W=0;e:for(v=0;v<G;++v)switch(y[v]){case">":if("/"!=y[v-1]){++v;break e}if(c&&c.cellStyles){if(M=null!=(p=Rn(y.slice(W,v),!0)).r?parseInt(p.r,10):M+1,P=-1,c.sheetRows&&c.sheetRows<M)continue;O={},D=!1,p.ht&&(D=!0,O.hpt=parseFloat(p.ht),O.hpx=Ia(O.hpt)),"1"==p.hidden&&(D=!0,O.hidden=!0),null!=p.outlineLevel&&(D=!0,O.level=+p.outlineLevel),D&&(R[M-1]=O)}break;case"<":W=v}if(W>=v)break;if(M=null!=(p=Rn(y.slice(W,v),!0)).r?parseInt(p.r,10):M+1,P=-1,!(c.sheetRows&&c.sheetRows<M)){h.s.r>M-1&&(h.s.r=M-1),h.e.r<M-1&&(h.e.r=M-1),c&&c.cellStyles&&(O={},D=!1,p.ht&&(D=!0,O.hpt=parseFloat(p.ht),O.hpx=Ia(O.hpt)),"1"==p.hidden&&(D=!0,O.hidden=!0),null!=p.outlineLevel&&(D=!0,O.level=+p.outlineLevel),D&&(R[M-1]=O)),x=y.slice(v).split(e);for(var z=0;z!=x.length&&"<"==x[z].trim().charAt(0);++z);for(x=x.slice(z),v=0;v!=x.length;++v)if(0!==(y=x[v].trim()).length){if(S=y.match(i),E=v,w=0,T=0,y="<c "+("<"==y.slice(0,1)?">":"")+y,null!=S&&2===S.length){for(E=0,_=S[1],w=0;w!=_.length&&!((T=_.charCodeAt(w)-64)<1||T>26);++w)E=26*E+T;P=--E}else++P;for(w=0;w!=y.length&&62!==y.charCodeAt(w);++w);if(++w,(p=Rn(y.slice(0,w),!0)).r||(p.r=nr({r:M-1,c:P})),f={t:""},null!=(S=(_=y.slice(w)).match(r))&&""!==S[1]&&(f.v=Fn(S[1])),c.cellFormula){if(null!=(S=_.match(o))&&""!==S[1]){if(f.f=Fn(Kn(S[1])).replace(/\r\n/g,"\n"),c.xlfn||(f.f=rl(f.f)),S[0].indexOf('t="array"')>-1)f.F=(_.match(s)||[])[1],f.F.indexOf(":")>-1&&L.push([or(f.F),f.F]);else if(S[0].indexOf('t="shared"')>-1){g=Rn(S[0]);var U=Fn(Kn(S[1]));c.xlfn||(U=rl(U)),k[parseInt(g.si,10)]=[g,U,p.r]}}else(S=_.match(/<f[^>]*\/>/))&&k[(g=Rn(S[0])).si]&&(f.f=sl(k[g.si][1],k[g.si][2],p.r));var H=ir(p.r);for(w=0;w<L.length;++w)H.r>=L[w][0].s.r&&H.r<=L[w][0].e.r&&H.c>=L[w][0].s.c&&H.c<=L[w][0].e.c&&(f.F=L[w][1])}if(null==p.t&&void 0===f.v)if(f.f||f.F)f.v=0,f.t="n";else{if(!B)continue;f.t="z"}else f.t=p.t||"n";switch(h.s.c>P&&(h.s.c=P),h.e.c<P&&(h.e.c=P),f.t){case"n":if(""==f.v||null==f.v){if(!B)continue;f.t="z"}else f.v=parseFloat(f.v);break;case"s":if("undefined"==typeof f.v){if(!B)continue;f.t="z"}else m=Hl[parseInt(f.v,10)],f.v=m.t,f.r=m.r,c.cellHTML&&(f.h=m.h);break;case"str":f.t="s",f.v=null!=f.v?Kn(f.v):"",c.cellHTML&&(f.h=Gn(f.v));break;case"inlineStr":S=_.match(n),f.t="s",null!=S&&(m=sa(S[1]))?(f.v=m.t,c.cellHTML&&(f.h=m.h)):f.v="";break;case"b":f.v=zn(f.v);break;case"d":c.cellDates?f.v=cn(f.v,1):(f.v=Ji(cn(f.v,1)),f.t="n");break;case"e":c&&!1===c.cellText||(f.w=f.v),f.v=Dr[f.v]}if(C=A=0,b=null,N&&void 0!==p.s&&null!=(b=d.CellXf[p.s])&&(null!=b.numFmtId&&(C=b.numFmtId),c.cellStyles&&null!=b.fillId&&(A=b.fillId)),Kl(f,C,A,c,u,d),c.cellDates&&N&&"n"==f.t&&Fi(hi[C])&&(f.t="d",f.v=sn(f.v)),p.cm&&c.xlmeta){var X=(c.xlmeta.Cell||[])[+p.cm-1];X&&"XLDAPR"==X.type&&(f.D=!0)}if(I){var Y=ir(p.r);l[Y.r]||(l[Y.r]=[]),l[Y.r][Y.c]=f}else l[p.r]=f}}}}R.length>0&&(l["!rows"]=R)}}();var cc=Tr;function hc(e){return[br(e),_r(e),"n"]}var uc=Tr;var dc=["left","right","top","bottom","header","footer"];function fc(e,t,i,n,s,r){var o=r||{"!type":"chart"};if(!e)return r;var a=0,l=0,c="A",h={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach((function(e){var t=function(e){var t,i=[],n=e.match(/^<c:numCache>/);(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/gm)||[]).forEach((function(e){var t=e.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);t&&(i[+t[1]]=n?+t[2]:t[2])}));var s=Fn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/gm)||[]).forEach((function(e){t=e.replace(/<.*?>/g,"")})),[i,s,t]}(e);h.s.r=h.s.c=0,h.e.c=a,c=tr(a),t[0].forEach((function(e,i){o[c+Js(i)]={t:"n",v:e,z:t[1]},l=i})),h.e.r<l&&(h.e.r=l),++a})),a>0&&(o["!ref"]=rr(h)),o}var pc=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],mc=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],gc=[],bc=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function vc(e,t){for(var i=0;i!=e.length;++i)for(var n=e[i],s=0;s!=t.length;++s){var r=t[s];if(null==n[r[0]])n[r[0]]=r[1];else switch(r[2]){case"bool":"string"==typeof n[r[0]]&&(n[r[0]]=zn(n[r[0]]));break;case"int":"string"==typeof n[r[0]]&&(n[r[0]]=parseInt(n[r[0]],10))}}}function yc(e,t){for(var i=0;i!=t.length;++i){var n=t[i];if(null==e[n[0]])e[n[0]]=n[1];else switch(n[2]){case"bool":"string"==typeof e[n[0]]&&(e[n[0]]=zn(e[n[0]]));break;case"int":"string"==typeof e[n[0]]&&(e[n[0]]=parseInt(e[n[0]],10))}}}function xc(e){yc(e.WBProps,pc),yc(e.CalcPr,bc),vc(e.WBView,mc),vc(e.Sheets,gc),Xl.date1904=zn(e.WBProps.date1904)}var Sc="][*?/\\".split("");function Ec(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var i=!0;return Sc.forEach((function(n){if(-1!=e.indexOf(n)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");i=!1}})),i}var wc=/<\w+:workbook/;function Tc(e,t){var i={};return e.read_shift(4),i.ArchID=e.read_shift(4),e.l+=t-8,i}function _c(e,t,i){return".bin"===t.slice(-4)?function(e,t){var i={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var r=[],o=[[]];return o.SheetNames=[],o.XTI=[],th[16]={n:"BrtFRTArchID$",f:Tc},Xs(e,(function(e,a,l){switch(l){case 156:o.SheetNames.push(e.name),i.Sheets.push(e);break;case 153:i.WBProps=e;break;case 39:null!=e.Sheet&&(t.SID=e.Sheet),e.Ref=Ll(e.Ptg,0,null,o,t),delete t.SID,delete e.Ptg,r.push(e);break;case 1036:case 361:case 2071:case 158:case 143:case 664:case 353:case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:case 16:break;case 357:case 358:case 355:case 667:o[0].length?o.push([l,e]):o[0]=[l,e],o[o.length-1].XTI=[];break;case 362:0===o.length&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(e),o.XTI=o.XTI.concat(e);break;case 35:case 37:n.push(l),s=!0;break;case 36:case 38:n.pop(),s=!1;break;default:if(a.T);else if(!s||t.WTF&&37!=n[n.length-1]&&35!=n[n.length-1])throw new Error("Unexpected record 0x"+l.toString(16))}}),t),xc(i),i.Names=r,i.supbooks=o,i}(e,i):function(e,t){if(!e)throw new Error("Could not find file");var i={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",r={},o=0;if(e.replace(Ln,(function(a,l){var c=Rn(a);switch(On(c[0])){case"<?xml":case"</workbook>":case"<fileVersion/>":case"</fileVersion>":case"<fileSharing":case"<fileSharing/>":case"</workbookPr>":case"<workbookProtection":case"<workbookProtection/>":case"<bookViews":case"<bookViews>":case"</bookViews>":case"</workbookView>":case"<sheets":case"<sheets>":case"</sheets>":case"</sheet>":case"<functionGroups":case"<functionGroups/>":case"<functionGroup":case"<externalReferences":case"</externalReferences>":case"<externalReferences>":case"<externalReference":case"<definedNames/>":case"<definedName/>":case"</calcPr>":case"<oleSize":case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":case"<customWorkbookView":case"</customWorkbookView>":case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":case"<pivotCache":case"<smartTagPr":case"<smartTagPr/>":case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":case"<smartTagType":case"<webPublishing":case"<webPublishing/>":case"<fileRecoveryPr":case"<fileRecoveryPr/>":case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":case"<webPublishObject":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":case"<ArchID":case"<revisionPtr":break;case"<workbook":a.match(wc)&&(s="xmlns"+a.match(/<(\w+):/)[1]),i.xmlns=c[s];break;case"<fileVersion":delete c[0],i.AppVersion=c;break;case"<workbookPr":case"<workbookPr/>":pc.forEach((function(e){if(null!=c[e[0]])switch(e[2]){case"bool":i.WBProps[e[0]]=zn(c[e[0]]);break;case"int":i.WBProps[e[0]]=parseInt(c[e[0]],10);break;default:i.WBProps[e[0]]=c[e[0]]}})),c.codeName&&(i.WBProps.CodeName=Kn(c.codeName));break;case"<workbookView":case"<workbookView/>":delete c[0],i.WBView.push(c);break;case"<sheet":switch(c.state){case"hidden":c.Hidden=1;break;case"veryHidden":c.Hidden=2;break;default:c.Hidden=0}delete c.state,c.name=Fn(Kn(c.name)),delete c[0],i.Sheets.push(c);break;case"<definedNames>":case"<definedNames":case"<ext":case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</definedNames>":case"</ext>":case"</AlternateContent>":n=!1;break;case"<definedName":(r={}).Name=Kn(c.name),c.comment&&(r.Comment=c.comment),c.localSheetId&&(r.Sheet=+c.localSheetId),zn(c.hidden||"0")&&(r.Hidden=!0),o=l+a.length;break;case"</definedName>":r.Ref=Fn(Kn(e.slice(o,l))),i.Names.push(r);break;case"<calcPr":case"<calcPr/>":delete c[0],i.CalcPr=c;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+c[0]+" in workbook")}return a})),-1===ls.indexOf(i.xmlns))throw new Error("Unknown Namespace: "+i.xmlns);return xc(i),i}(e,i)}function Mc(e,t,i,n,s,r,o,a){return".bin"===t.slice(-4)?function(e,t,i,n,s,r,o){if(!e)return e;var a=t||{};n||(n={"!id":{}});var l,c,h,u,d,f,p,m,g,b,v=a.dense?[]:{},y={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=[],S=!1,E=!1,w=[];a.biff=12,a["!row"]=0;var T=0,_=!1,M=[],P={},C=a.supbooks||s.supbooks||[[]];if(C.sharedf=P,C.arrayf=M,C.SheetNames=s.SheetNames||s.Sheets.map((function(e){return e.name})),!a.supbooks&&(a.supbooks=C,s.Names))for(var A=0;A<s.Names.length;++A)C[0][A+1]=s.Names[A];var N,L,k=[],I=[],R=!1;if(th[16]={n:"BrtShortReal",f:hc},Xs(e,(function(e,t,A){if(!E)switch(A){case 148:l=e;break;case 0:c=e,a.sheetRows&&a.sheetRows<=c.r&&(E=!0),g=Js(d=c.r),a["!row"]=c.r,(e.hidden||e.hpt||null!=e.level)&&(e.hpt&&(e.hpx=Ia(e.hpt)),I[e.r]=e);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(h={t:e[2]},e[2]){case"n":h.v=e[1];break;case"s":m=Hl[e[1]],h.v=m.t,h.r=m.r;break;case"b":h.v=!!e[1];break;case"e":h.v=e[1],!1!==a.cellText&&(h.w=Or[h.v]);break;case"str":h.t="s",h.v=e[1];break;case"is":h.t="s",h.v=e[1].t}if((u=o.CellXf[e[0].iStyleRef])&&Kl(h,u.numFmtId,null,a,r,o),f=-1==e[0].c?f+1:e[0].c,a.dense?(v[d]||(v[d]=[]),v[d][f]=h):v[tr(f)+g]=h,a.cellFormula){for(_=!1,T=0;T<M.length;++T){var O=M[T];c.r>=O[0].s.r&&c.r<=O[0].e.r&&f>=O[0].s.c&&f<=O[0].e.c&&(h.F=rr(O[0]),_=!0)}!_&&e.length>3&&(h.f=e[3])}if(y.s.r>c.r&&(y.s.r=c.r),y.s.c>f&&(y.s.c=f),y.e.r<c.r&&(y.e.r=c.r),y.e.c<f&&(y.e.c=f),a.cellDates&&u&&"n"==h.t&&Fi(hi[u.numFmtId])){var D=pi(h.v);D&&(h.t="d",h.v=new Date(D.y,D.m-1,D.d,D.H,D.M,D.S,D.u))}N&&("XLDAPR"==N.type&&(h.D=!0),N=void 0),L&&(L=void 0);break;case 1:case 12:if(!a.sheetStubs||S)break;h={t:"z",v:void 0},f=-1==e[0].c?f+1:e[0].c,a.dense?(v[d]||(v[d]=[]),v[d][f]=h):v[tr(f)+g]=h,y.s.r>c.r&&(y.s.r=c.r),y.s.c>f&&(y.s.c=f),y.e.r<c.r&&(y.e.r=c.r),y.e.c<f&&(y.e.c=f),N&&("XLDAPR"==N.type&&(h.D=!0),N=void 0),L&&(L=void 0);break;case 176:w.push(e);break;case 49:N=((a.xlmeta||{}).Cell||[])[e-1];break;case 494:var B=n["!id"][e.relId];for(B?(e.Target=B.Target,e.loc&&(e.Target+="#"+e.loc),e.Rel=B):""==e.relId&&(e.Target="#"+e.loc),d=e.rfx.s.r;d<=e.rfx.e.r;++d)for(f=e.rfx.s.c;f<=e.rfx.e.c;++f)a.dense?(v[d]||(v[d]=[]),v[d][f]||(v[d][f]={t:"z",v:void 0}),v[d][f].l=e):(p=nr({c:f,r:d}),v[p]||(v[p]={t:"z",v:void 0}),v[p].l=e);break;case 426:if(!a.cellFormula)break;M.push(e),(b=a.dense?v[d][f]:v[tr(f)+g]).f=Ll(e[1],0,{r:c.r,c:f},C,a),b.F=rr(e[0]);break;case 427:if(!a.cellFormula)break;P[nr(e[0].s)]=e[1],(b=a.dense?v[d][f]:v[tr(f)+g]).f=Ll(e[1],0,{r:c.r,c:f},C,a);break;case 60:if(!a.cellStyles)break;for(;e.e>=e.s;)k[e.e--]={width:e.w/256,hidden:!!(1&e.flags),level:e.level},R||(R=!0,Aa(e.w/256)),Na(k[e.e+1]);break;case 161:v["!autofilter"]={ref:rr(e)};break;case 476:v["!margins"]=e;break;case 147:s.Sheets[i]||(s.Sheets[i]={}),e.name&&(s.Sheets[i].CodeName=e.name),(e.above||e.left)&&(v["!outline"]={above:e.above,left:e.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),e.RTL&&(s.Views[0].RTL=!0);break;case 485:case 64:case 1053:case 151:case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:S=!0;break;case 36:S=!1;break;case 37:x.push(A),S=!0;break;case 38:x.pop(),S=!1;break;default:if(t.T);else if(!S||a.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}),a),delete a.supbooks,delete a["!row"],!v["!ref"]&&(y.s.r<2e6||l&&(l.e.r>0||l.e.c>0||l.s.r>0||l.s.c>0))&&(v["!ref"]=rr(l||y)),a.sheetRows&&v["!ref"]){var O=or(v["!ref"]);a.sheetRows<=+O.e.r&&(O.e.r=a.sheetRows-1,O.e.r>y.e.r&&(O.e.r=y.e.r),O.e.r<O.s.r&&(O.s.r=O.e.r),O.e.c>y.e.c&&(O.e.c=y.e.c),O.e.c<O.s.c&&(O.s.c=O.e.c),v["!fullref"]=v["!ref"],v["!ref"]=rr(O))}return w.length>0&&(v["!merges"]=w),k.length>0&&(v["!cols"]=k),I.length>0&&(v["!rows"]=I),v}(e,n,i,s,r,o,a):rc(e,n,i,s,r,o,a)}function Pc(e,t,i,n,s,r,o,a){return".bin"===t.slice(-4)?function(e,t,i,n,s){if(!e)return e;n||(n={"!id":{}});var r={"!type":"chart","!drawel":null,"!rel":""},o=[],a=!1;return Xs(e,(function(e,n,l){switch(l){case 550:r["!rel"]=e;break;case 651:s.Sheets[i]||(s.Sheets[i]={}),e.name&&(s.Sheets[i].CodeName=e.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:o.push(l);break;case 38:o.pop();break;default:if(n.T>0)o.push(l);else if(n.T<0)o.pop();else if(!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),t),n["!id"][r["!rel"]]&&(r["!drawel"]=n["!id"][r["!rel"]]),r}(e,n,i,s,r):function(e,t,i,n,s){if(!e)return e;n||(n={"!id":{}});var r,o={"!type":"chart","!drawel":null,"!rel":""},a=e.match(ic);return a&&oc(a[0],0,s,i),(r=e.match(/drawing r:id="(.*?)"/))&&(o["!rel"]=r[1]),n["!id"][o["!rel"]]&&(o["!drawel"]=n["!id"][o["!rel"]]),o}(e,0,i,s,r)}function Cc(e,t,i,n){return".bin"===t.slice(-4)?function(e,t,i){var n={NumberFmt:[]};for(var s in hi)n.NumberFmt[s]=hi[s];n.CellXf=[],n.Fonts=[];var r=[],o=!1;return Xs(e,(function(e,s,a){switch(a){case 44:n.NumberFmt[e[0]]=e[1],zi(e[1],e[0]);break;case 43:n.Fonts.push(e),null!=e.color.theme&&t&&t.themeElements&&t.themeElements.clrScheme&&(e.color.rgb=wa(t.themeElements.clrScheme[e.color.theme].rgb,e.color.tint||0));break;case 1025:case 45:case 46:case 48:case 507:case 572:case 475:case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 47:617==r[r.length-1]&&n.CellXf.push(e);break;case 35:o=!0;break;case 36:o=!1;break;case 37:r.push(a),o=!0;break;case 38:r.pop(),o=!1;break;default:if(s.T>0)r.push(a);else if(s.T<0)r.pop();else if(!o||i.WTF&&37!=r[r.length-1])throw new Error("Unexpected record 0x"+a.toString(16))}})),n}(e,i,n):Ba(e,i,n)}function Ac(e,t,i){return".bin"===t.slice(-4)?function(e,t){var i=[],n=!1;return Xs(e,(function(e,s,r){switch(r){case 159:i.Count=e[0],i.Unique=e[1];break;case 19:i.push(e);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(s.T,!n||t.WTF)throw new Error("Unexpected record 0x"+r.toString(16))}})),i}(e,i):function(e,t){var i=[],n="";if(!e)return i;var s=e.match(ra);if(s){n=s[2].replace(oa,"").split(aa);for(var r=0;r!=n.length;++r){var o=sa(n[r].trim(),t);null!=o&&(i[i.length]=o)}s=Rn(s[1]),i.Count=s.count,i.Unique=s.uniqueCount}return i}(e,i)}function Nc(e,t,i){return".bin"===t.slice(-4)?function(e,t){var i=[],n=[],s={},r=!1;return Xs(e,(function(e,o,a){switch(a){case 632:n.push(e);break;case 635:s=e;break;case 637:s.t=e.t,s.h=e.h,s.r=e.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,i.push(s);break;case 3072:case 37:case 38:break;case 35:r=!0;break;case 36:r=!1;break;default:if(o.T);else if(!r||t.WTF)throw new Error("Unexpected record 0x"+a.toString(16))}})),i}(e,i):function(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var i=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach((function(e){if(""!==e&&""!==e.trim()){var t=e.match(/<(?:\w+:)?author[^>]*>(.*)/);t&&i.push(t[1])}}));var r=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return r&&r[1]&&r[1].split(/<\/\w*:?comment>/).forEach((function(e){if(""!==e&&""!==e.trim()){var s=e.match(/<(?:\w+:)?comment[^>]*>/);if(s){var r=Rn(s[0]),o={author:r.authorId&&i[r.authorId]||"sheetjsghost",ref:r.ref,guid:r.guid},a=ir(r.ref);if(!(t.sheetRows&&t.sheetRows<=a.r)){var l=e.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),c=!!l&&!!l[1]&&sa(l[1])||{r:"",t:"",h:""};o.r=c.r,"<t></t>"==c.r&&(c.t=c.h=""),o.t=(c.t||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t.cellHTML&&(o.h=c.h),n.push(o)}}}})),n}(e,i)}function Lc(e,t,i){return".bin"===t.slice(-4)?function(e){var t=[];return Xs(e,(function(e,i,n){if(63===n)t.push(e);else if(!i.T)throw new Error("Unexpected record 0x"+n.toString(16))})),t}(e):function(e){var t=[];if(!e)return t;var i=1;return(e.match(Ln)||[]).forEach((function(e){var n=Rn(e);switch(n[0]){case"<?xml":case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete n[0],n.i?i=n.i:n.i=i,t.push(n)}})),t}(e)}function kc(e,t,i,n){if(".bin"===i.slice(-4))return function(e,t,i,n){if(!e)return e;var s=n||{},r=!1;Xs(e,(function(e,t,i){switch(i){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:r=!0;break;case 36:r=!1;break;default:if(t.T);else if(!r||s.WTF)throw new Error("Unexpected record 0x"+i.toString(16))}}),s)}(e,0,0,n)}function Ic(e,t,i){return".bin"===t.slice(-4)?function(e,t,i){var n={Types:[],Cell:[],Value:[]},s=i||{},r=[],o=!1,a=2;return Xs(e,(function(e,t,i){switch(i){case 335:n.Types.push({name:e.name});break;case 51:e.forEach((function(e){1==a?n.Cell.push({type:n.Types[e[0]-1].name,index:e[1]}):0==a&&n.Value.push({type:n.Types[e[0]-1].name,index:e[1]})}));break;case 337:a=e?1:0;break;case 338:a=2;break;case 35:r.push(i),o=!0;break;case 36:r.pop(),o=!1;break;default:if(t.T);else if(!o||s.WTF&&35!=r[r.length-1])throw new Error("Unexpected record 0x"+i.toString(16))}})),n}(e,0,i):function(e,t,i){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s,r=!1,o=2;return e.replace(Ln,(function(e){var t=Rn(e);switch(On(t[0])){case"<?xml":case"<metadata":case"</metadata>":case"<metadataTypes":case"</metadataTypes>":case"</metadataType>":case"</futureMetadata>":case"<bk>":case"</bk>":case"</rc>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<metadataType":n.Types.push({name:t.name});break;case"<futureMetadata":for(var a=0;a<n.Types.length;++a)n.Types[a].name==t.name&&(s=n.Types[a]);break;case"<rc":1==o?n.Cell.push({type:n.Types[t.t-1].name,index:+t.v}):0==o&&n.Value.push({type:n.Types[t.t-1].name,index:+t.v});break;case"<cellMetadata":o=1;break;case"</cellMetadata>":case"</valueMetadata>":o=2;break;case"<valueMetadata":o=0;break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<rvb":if(!s)break;s.offsets||(s.offsets=[]),s.offsets.push(+t.i);break;default:if(!r&&i.WTF)throw new Error("unrecognized "+t[0]+" in metadata")}return e})),n}(e,0,i)}var Rc,Oc=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Dc=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Bc(e,t){var i=e.split(/\s+/),n=[];if(t||(n[0]=i[0]),1===i.length)return n;var s,r,o,a=e.match(Oc);if(a)for(o=0;o!=a.length;++o)-1===(r=(s=a[o].match(Dc))[1].indexOf(":"))?n[s[1]]=s[2].slice(1,s[2].length-1):n["xmlns:"===s[1].slice(0,6)?"xmlns"+s[1].slice(6):s[1].slice(r+1)]=s[2].slice(1,s[2].length-1);return n}function Fc(e){var t={};if(1===e.split(/\s+/).length)return t;var i,n,s,r=e.match(Oc);if(r)for(s=0;s!=r.length;++s)-1===(n=(i=r[s].match(Dc))[1].indexOf(":"))?t[i[1]]=i[2].slice(1,i[2].length-1):t["xmlns:"===i[1].slice(0,6)?"xmlns"+i[1].slice(6):i[1].slice(n+1)]=i[2].slice(1,i[2].length-1);return t}function Vc(e,t,i,n){var s=n;switch((i[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=zn(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=cn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+i[0])}e[Fn(t)]=s}function jc(e,t,i){if("z"!==e.t){if(!i||!1!==i.cellText)try{"e"===e.t?e.w=e.w||Or[e.v]:"General"===t?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=xi(e.v):e.w=Si(e.v):e.w=function(e,t){var i=Rc[e]||Fn(e);return"General"===i?Si(t):Wi(i,t)}(t||"General",e.v)}catch(Sy){if(i.WTF)throw Sy}try{var n=Rc[t]||t||"General";if(i.cellNF&&(e.z=n),i.cellDates&&"n"==e.t&&Fi(n)){var s=pi(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(Sy){if(i.WTF)throw Sy}}}function Gc(e,t,i){if(i.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=Ra[n.Pattern]||n.Pattern)}e[t.ID]=t}function Wc(e,t,i,n,s,r,o,a,l,c){var h="General",u=n.StyleID,d={};c=c||{};var f=[],p=0;for(void 0===u&&a&&(u=a.StyleID),void 0===u&&o&&(u=o.StyleID);void 0!==r[u]&&(r[u].nf&&(h=r[u].nf),r[u].Interior&&f.push(r[u].Interior),r[u].Parent);)u=r[u].Parent;switch(i.Type){case"Boolean":n.t="b",n.v=zn(e);break;case"String":n.t="s",n.r=Wn(Fn(e)),n.v=e.indexOf("<")>-1?Fn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":"Z"!=e.slice(-1)&&(e+="Z"),n.v=(cn(e)-new Date(Date.UTC(1899,11,30)))/864e5,n.v!==n.v?n.v=Fn(e):n.v<60&&(n.v=n.v-1),h&&"General"!=h||(h="yyyy-mm-dd");case"Number":void 0===n.v&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Dr[e],!1!==c.cellText&&(n.w=e);break;default:""==e&&""==t?n.t="z":(n.t="s",n.v=Wn(t||e))}if(jc(n,h,c),!1!==c.cellFormula)if(n.Formula){var m=Fn(n.Formula);61==m.charCodeAt(0)&&(m=m.slice(1)),n.f=el(m,s),delete n.Formula,"RC"==n.ArrayRange?n.F=el("RC:RC",s):n.ArrayRange&&(n.F=el(n.ArrayRange,s),l.push([or(n.F),n.F]))}else for(p=0;p<l.length;++p)s.r>=l[p][0].s.r&&s.r<=l[p][0].e.r&&s.c>=l[p][0].s.c&&s.c<=l[p][0].e.c&&(n.F=l[p][1]);c.cellStyles&&(f.forEach((function(e){!d.patternType&&e.patternType&&(d.patternType=e.patternType)})),n.s=d),void 0!==n.StyleID&&(n.ixfe=n.StyleID)}function zc(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e.v=e.w=e.ixfe=void 0}function Uc(e,t){var i=t||{};Ui();var n=Vt(rs(e));"binary"!=i.type&&"array"!=i.type&&"base64"!=i.type||(n="undefined"!==typeof Ft?Ft.utils.decode(65001,Dt(n)):Kn(n));var s,r=n.slice(0,1024).toLowerCase(),o=!1;if((1023&(r=r.replace(/".*?"/g,"")).indexOf(">"))>Math.min(1023&r.indexOf(","),1023&r.indexOf(";"))){var a=un(i);return a.type="string",Zo.to_workbook(n,a)}if(-1==r.indexOf("<?xml")&&["html","table","head","meta","script","style","div"].forEach((function(e){r.indexOf("<"+e)>=0&&(o=!0)})),o)return function(e,t){var i=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!i||0==i.length)throw new Error("Invalid HTML: could not find <table>");if(1==i.length)return cr(sh(i[0],t),t);var n={SheetNames:[],Sheets:{}};return i.forEach((function(e,i){iu(n,sh(e,t),"Sheet"+(i+1))})),n}(n,i);Rc={"General Number":"General","General Date":hi[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":hi[15],"Short Date":hi[14],"Long Time":hi[19],"Medium Time":hi[18],"Short Time":hi[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:hi[2],Standard:hi[4],Percent:hi[10],Scientific:hi[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[];var h,u={},d=[],f=i.dense?[]:{},p="",m={},g={},b=Bc('<Data ss:Type="String">'),v=0,y=0,x=0,S={s:{r:2e6,c:2e6},e:{r:0,c:0}},E={},w={},T="",_=0,M=[],P={},C={},A=0,N=[],L=[],k={},I=[],R=!1,O=[],D=[],B={},F=0,V=0,j={Sheets:[],WBProps:{date1904:!1}},G={};os.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/gm,"");for(var W="";s=os.exec(n);)switch(s[3]=(W=s[3]).toLowerCase()){case"data":if("data"==W){if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==s[0].charAt(s[0].length-2)&&c.push([s[3],!0]);break}if(c[c.length-1][1])break;"/"===s[1]?Wc(n.slice(v,s.index),T,b,"comment"==c[c.length-1][0]?k:m,{c:y,r:x},E,I[y],g,O,i):(T="",b=Bc(s[0]),v=s.index+s[0].length);break;case"cell":if("/"===s[1])if(L.length>0&&(m.c=L),(!i.sheetRows||i.sheetRows>x)&&void 0!==m.v&&(i.dense?(f[x]||(f[x]=[]),f[x][y]=m):f[tr(y)+Js(x)]=m),m.HRef&&(m.l={Target:Fn(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(F=y+(0|parseInt(m.MergeAcross,10)),V=x+(0|parseInt(m.MergeDown,10)),M.push({s:{c:y,r:x},e:{c:F,r:V}})),i.sheetStubs)if(m.MergeAcross||m.MergeDown){for(var z=y;z<=F;++z)for(var U=x;U<=V;++U)(z>y||U>x)&&(i.dense?(f[U]||(f[U]=[]),f[U][z]={t:"z"}):f[tr(z)+Js(U)]={t:"z"});y=F+1}else++y;else m.MergeAcross?y=F+1:++y;else(m=Fc(s[0])).Index&&(y=+m.Index-1),y<S.s.c&&(S.s.c=y),y>S.e.c&&(S.e.c=y),"/>"===s[0].slice(-2)&&++y,L=[];break;case"row":"/"===s[1]||"/>"===s[0].slice(-2)?(x<S.s.r&&(S.s.r=x),x>S.e.r&&(S.e.r=x),"/>"===s[0].slice(-2)&&(g=Bc(s[0])).Index&&(x=+g.Index-1),y=0,++x):((g=Bc(s[0])).Index&&(x=+g.Index-1),B={},("0"==g.AutoFitHeight||g.Height)&&(B.hpx=parseInt(g.Height,10),B.hpt=ka(B.hpx),D[x]=B),"1"==g.Hidden&&(B.hidden=!0,D[x]=B));break;case"worksheet":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"));d.push(p),S.s.r<=S.e.r&&S.s.c<=S.e.c&&(f["!ref"]=rr(S),i.sheetRows&&i.sheetRows<=S.e.r&&(f["!fullref"]=f["!ref"],S.e.r=i.sheetRows-1,f["!ref"]=rr(S))),M.length&&(f["!merges"]=M),I.length>0&&(f["!cols"]=I),D.length>0&&(f["!rows"]=D),u[p]=f}else S={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=y=0,c.push([s[3],!1]),l=Bc(s[0]),p=Fn(l.Name),f=i.dense?[]:{},M=[],O=[],D=[],G={name:p,Hidden:0},j.Sheets.push(G);break;case"table":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else{if("/>"==s[0].slice(-2))break;c.push([s[3],!1]),I=[],R=!1}break;case"style":"/"===s[1]?Gc(E,w,i):w=Bc(s[0]);break;case"numberformat":w.nf=Fn(Bc(s[0]).Format||"General"),Rc[w.nf]&&(w.nf=Rc[w.nf]);for(var H=0;392!=H&&hi[H]!=w.nf;++H);if(392==H)for(H=57;392!=H;++H)if(null==hi[H]){zi(w.nf,H);break}break;case"column":if("table"!==c[c.length-1][0])break;if((h=Bc(s[0])).Hidden&&(h.hidden=!0,delete h.Hidden),h.Width&&(h.wpx=parseInt(h.Width,10)),!R&&h.wpx>10){R=!0,Ta=6;for(var X=0;X<I.length;++X)I[X]&&Na(I[X])}R&&Na(h),I[h.Index-1||I.length]=h;for(var Y=0;Y<+h.Span;++Y)I[I.length]=un(h);break;case"namedrange":if("/"===s[1])break;j.Names||(j.Names=[]);var K=Rn(s[0]),q={Name:K.Name,Ref:el(K.RefersTo.slice(1),{r:0,c:0})};j.Sheets.length>0&&(q.Sheet=j.Sheets.length-1),j.Names.push(q);break;case"namedcell":case"b":case"i":case"u":case"s":case"em":case"h2":case"h3":case"sub":case"sup":case"span":case"alignment":case"borders":case"border":case"protection":case"paragraphs":case"name":case"pixelsperinch":case"null":break;case"font":if("/>"===s[0].slice(-2))break;"/"===s[1]?T+=n.slice(_,s.index):_=s.index+s[0].length;break;case"interior":if(!i.cellStyles)break;w.Interior=Bc(s[0]);break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if("/>"===s[0].slice(-2))break;"/"===s[1]?qr(P,W,n.slice(A,s.index)):A=s.index+s[0].length;break;case"styles":case"workbook":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else c.push([s[3],!1]);break;case"comment":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"));zc(k),L.push(k)}else c.push([s[3],!1]),k={a:(l=Bc(s[0])).Author};break;case"autofilter":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else if("/"!==s[0].charAt(s[0].length-2)){var $=Bc(s[0]);f["!autofilter"]={ref:el($.Range).replace(/\$/g,"")},c.push([s[3],!0])}break;case"datavalidation":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==s[0].charAt(s[0].length-2)&&c.push([s[3],!0]);break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==s[0].charAt(s[0].length-2)&&c.push([s[3],!0]);break;default:if(0==c.length&&"document"==s[3])return bh(n,i);if(0==c.length&&"uof"==s[3])return bh(n,i);var Z=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(s[3]){case"allowpng":case"removepersonalinformation":case"downloadcomponents":case"locationofcomponents":case"colors":case"color":case"index":case"rgb":case"targetscreensize":case"readonlyrecommended":break;default:Z=!1}break;case"componentoptions":switch(s[3]){case"toolbar":case"hideofficelogo":case"spreadsheetautofit":case"label":case"caption":case"maxheight":case"maxwidth":case"nextsheetnumber":break;default:Z=!1}break;case"excelworkbook":switch(s[3]){case"date1904":j.WBProps.date1904=!0;break;case"windowheight":case"windowwidth":case"windowtopx":case"windowtopy":case"tabratio":case"protectstructure":case"protectwindow":case"protectwindows":case"activesheet":case"displayinknotes":case"firstvisiblesheet":case"supbook":case"sheetname":case"sheetindex":case"sheetindexfirst":case"sheetindexlast":case"dll":case"acceptlabelsinformulas":case"donotsavelinkvalues":case"iteration":case"maxiterations":case"maxchange":case"path":case"xct":case"count":case"selectedsheets":case"calculation":case"uncalced":case"startupprompt":case"crn":case"externname":case"formula":case"colfirst":case"collast":case"wantadvise":case"boolean":case"error":case"text":case"ole":case"noautorecover":case"publishobjects":case"donotcalculatebeforesave":case"number":case"refmoder1c1":case"embedsavesmarttags":break;default:Z=!1}break;case"workbookoptions":switch(s[3]){case"owcversion":case"height":case"width":break;default:Z=!1}break;case"worksheetoptions":switch(s[3]){case"visible":if("/>"===s[0].slice(-2));else if("/"===s[1])switch(n.slice(A,s.index)){case"SheetHidden":G.Hidden=1;break;case"SheetVeryHidden":G.Hidden=2}else A=s.index+s[0].length;break;case"header":f["!margins"]||Yl(f["!margins"]={},"xlml"),isNaN(+Rn(s[0]).Margin)||(f["!margins"].header=+Rn(s[0]).Margin);break;case"footer":f["!margins"]||Yl(f["!margins"]={},"xlml"),isNaN(+Rn(s[0]).Margin)||(f["!margins"].footer=+Rn(s[0]).Margin);break;case"pagemargins":var Q=Rn(s[0]);f["!margins"]||Yl(f["!margins"]={},"xlml"),isNaN(+Q.Top)||(f["!margins"].top=+Q.Top),isNaN(+Q.Left)||(f["!margins"].left=+Q.Left),isNaN(+Q.Right)||(f["!margins"].right=+Q.Right),isNaN(+Q.Bottom)||(f["!margins"].bottom=+Q.Bottom);break;case"displayrighttoleft":j.Views||(j.Views=[]),j.Views[0]||(j.Views[0]={}),j.Views[0].RTL=!0;break;case"freezepanes":case"frozennosplit":case"splithorizontal":case"splitvertical":case"donotdisplaygridlines":case"activerow":case"activecol":case"toprowbottompane":case"leftcolumnrightpane":case"unsynced":case"print":case"printerrors":case"panes":case"scale":case"pane":case"number":case"layout":case"pagesetup":case"selected":case"protectobjects":case"enableselection":case"protectscenarios":case"validprinterinfo":case"horizontalresolution":case"verticalresolution":case"numberofcopies":case"activepane":case"toprowvisible":case"leftcolumnvisible":case"fittopage":case"rangeselection":case"papersizeindex":case"pagelayoutzoom":case"pagebreakzoom":case"filteron":case"fitwidth":case"fitheight":case"commentslayout":case"zoom":case"lefttoright":case"gridlines":case"allowsort":case"allowfilter":case"allowinsertrows":case"allowdeleterows":case"allowinsertcols":case"allowdeletecols":case"allowinserthyperlinks":case"allowformatcells":case"allowsizecols":case"allowsizerows":case"tabcolorindex":case"donotdisplayheadings":case"showpagelayoutzoom":case"blackandwhite":case"donotdisplayzeros":case"displaypagebreak":case"rowcolheadings":case"donotdisplayoutline":case"noorientation":case"allowusepivottables":case"zeroheight":case"viewablerange":case"selection":case"protectcontents":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;default:Z=!1}break;case"pivottable":case"pivotcache":switch(s[3]){case"immediateitemsondrop":case"showpagemultipleitemlabel":case"compactrowindent":case"location":case"pivotfield":case"orientation":case"layoutform":case"layoutsubtotallocation":case"layoutcompactrow":case"position":case"pivotitem":case"datatype":case"datafield":case"sourcename":case"parentfield":case"ptlineitems":case"ptlineitem":case"countofsameitems":case"item":case"itemtype":case"ptsource":case"cacheindex":case"consolidationreference":case"filename":case"reference":case"nocolumngrand":case"norowgrand":case"blanklineafteritems":case"hidden":case"subtotal":case"basefield":case"mapchilditems":case"function":case"refreshonfileopen":case"printsettitles":case"mergelabels":case"defaultversion":case"refreshname":case"refreshdate":case"refreshdatecopy":case"versionlastrefresh":case"versionlastupdate":case"versionupdateablemin":case"versionrefreshablemin":case"calculation":break;default:Z=!1}break;case"pagebreaks":switch(s[3]){case"colbreaks":case"colbreak":case"rowbreaks":case"rowbreak":case"colstart":case"colend":case"rowend":break;default:Z=!1}break;case"autofilter":switch(s[3]){case"autofiltercolumn":case"autofiltercondition":case"autofilterand":case"autofilteror":break;default:Z=!1}break;case"querytable":switch(s[3]){case"id":case"autoformatfont":case"autoformatpattern":case"querysource":case"querytype":case"enableredirections":case"refreshedinxl9":case"urlstring":case"htmltables":case"connection":case"commandtext":case"refreshinfo":case"notitles":case"nextid":case"columninfo":case"overwritecells":case"donotpromptforfile":case"textwizardsettings":case"source":case"number":case"decimal":case"thousandseparator":case"trailingminusnumbers":case"formatsettings":case"fieldtype":case"delimiters":case"tab":case"comma":case"autoformatname":case"versionlastedit":case"versionlastrefresh":break;default:Z=!1}break;case"datavalidation":switch(s[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":case"cellrangelist":break;default:Z=!1}break;case"sorting":case"conditionalformatting":switch(s[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"cellrangelist":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":break;default:Z=!1}break;case"mapinfo":case"schema":case"data":switch(s[3]){case"map":case"entry":case"range":case"xpath":case"field":case"xsdtype":case"filteron":case"aggregate":case"elementtype":case"attributetype":case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":case"row":break;default:Z=!1}break;case"smarttags":break;default:Z=!1}if(Z)break;if(s[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+s[3]+"|"+c.join("|");if("customdocumentproperties"===c[c.length-1][0]){if("/>"===s[0].slice(-2))break;"/"===s[1]?Vc(C,W,N,n.slice(A,s.index)):(N=s,A=s.index+s[0].length);break}if(i.WTF)throw"Unrecognized tag: "+s[3]+"|"+c.join("|")}var J={};return i.bookSheets||i.bookProps||(J.Sheets=u),J.SheetNames=d,J.Workbook=j,J.SSF=un(hi),J.Props=P,J.Custprops=C,J}function Hc(e,t){switch(Fh(t=t||{}),t.type||"base64"){case"base64":return Uc(Ut(e),t);case"binary":case"buffer":case"file":return Uc(e,t);case"array":return Uc($t(e),t)}}function Xc(e){var t={},i=e.content;if(i.l=28,t.AnsiUserType=i.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=function(e){return Mr(e,1)}(i),i.length-i.l<=4)return t;var n=i.read_shift(4);return 0==n||n>40?t:(i.l-=4,t.Reserved1=i.read_shift(0,"lpstr-ansi"),i.length-i.l<=4||1907505652!==(n=i.read_shift(4))?t:(t.UnicodeClipboardFormat=function(e){return Mr(e,2)}(i),0==(n=i.read_shift(4))||n>40?t:(i.l-=4,void(t.Reserved2=i.read_shift(0,"lpwstr")))))}var Yc=[60,1084,2066,2165,2175];function Kc(e,t,i,n,s){var r=n,o=[],a=i.slice(i.l,i.l+r);if(s&&s.enc&&s.enc.insitu&&a.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:case 133:break;default:s.enc.insitu(a)}o.push(a),i.l+=r;for(var l=ks(i,i.l),c=ih[l],h=0;null!=c&&Yc.indexOf(l)>-1;)r=ks(i,i.l+2),h=i.l+4,2066==l?h+=4:2165!=l&&2175!=l||(h+=12),a=i.slice(h,i.l+4+r),o.push(a),i.l+=4+r,c=ih[l=ks(i,i.l)];var u=Qt(o);zs(u,0);var d=0;u.lens=[];for(var f=0;f<o.length;++f)u.lens.push(d),d+=o[f].length;if(u.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+u.length+" < "+n;return t.f(u,u.length,s)}function qc(e,t,i){if("z"!==e.t&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=hi[n])}catch(Sy){if(t.WTF)throw Sy}if(!t||!1!==t.cellText)try{"e"===e.t?e.w=e.w||Or[e.v]:0===n||"General"==n?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=xi(e.v):e.w=Si(e.v):e.w=Wi(n,e.v,{date1904:!!i,dateNF:t&&t.dateNF})}catch(Sy){if(t.WTF)throw Sy}if(t.cellDates&&n&&"n"==e.t&&Fi(hi[n]||String(n))){var s=pi(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function $c(e,t,i){return{v:e,ixfe:t,t:i}}function Zc(e,t){var i={opts:{}},n={};var s,r,o,a,l,c,h,u,d=t.dense?[]:{},f={},p={},m=null,g=[],b="",v={},y="",x={},S=[],E=[],w=[],T={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},M=function(e){return e<8?Rr[e]:e<64&&w[e-8]||Rr[e]},P=function(e,t,i){if(!(B>1)&&!(i.sheetRows&&e.r>=i.sheetRows)){if(i.cellStyles&&t.XF&&t.XF.data&&function(e,t,i){var n,s=t.XF.data;s&&s.patternType&&i&&i.cellStyles&&(t.s={},t.s.patternType=s.patternType,(n=Ea(M(s.icvFore)))&&(t.s.fgColor={rgb:n}),(n=Ea(M(s.icvBack)))&&(t.s.bgColor={rgb:n}))}(0,t,i),delete t.ixfe,delete t.XF,s=e,y=nr(e),p&&p.s&&p.e||(p={s:{r:0,c:0},e:{r:0,c:0}}),e.r<p.s.r&&(p.s.r=e.r),e.c<p.s.c&&(p.s.c=e.c),e.r+1>p.e.r&&(p.e.r=e.r+1),e.c+1>p.e.c&&(p.e.c=e.c+1),i.cellFormula&&t.f)for(var n=0;n<S.length;++n)if(!(S[n][0].s.c>e.c||S[n][0].s.r>e.r)&&!(S[n][0].e.c<e.c||S[n][0].e.r<e.r)){t.F=rr(S[n][0]),S[n][0].s.c==e.c&&S[n][0].s.r==e.r||delete t.f,t.f&&(t.f=""+Ll(S[n][1],0,e,R,C));break}i.dense?(d[e.r]||(d[e.r]=[]),d[e.r][e.c]=t):d[y]=t}},C={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:S,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(C.password=t.password);var A=[],N=[],L=[],k=[],I=!1,R=[];R.SheetNames=C.snames,R.sharedf=C.sharedf,R.arrayf=C.arrayf,R.names=[],R.XTI=[];var O,D=0,B=0,F=0,V=[],j=[];C.codepage=1200,Rt(1200);for(var G=!1;e.l<e.length-1;){var W=e.l,z=e.read_shift(2);if(0===z&&10===D)break;var U=e.l===e.length?0:e.read_shift(2),H=ih[z];if(H&&H.f){if(t.bookSheets&&133===D&&133!==z)break;if(D=z,2===H.r||12==H.r){var X=e.read_shift(2);if(U-=2,!C.enc&&X!==z&&((255&X)<<8|X>>8)!==z)throw new Error("rt mismatch: "+X+"!="+z);12==H.r&&(e.l+=10,U-=10)}var Y={};if(Y=10===z?H.f(e,U,C):Kc(z,H,e,U,C),0==B&&-1===[9,521,1033,2057].indexOf(D))continue;switch(z){case 34:i.opts.Date1904=T.WBProps.date1904=Y;break;case 134:i.opts.WriteProtect=!0;break;case 47:if(C.enc||(e.l=0),C.enc=Y,!t.password)throw new Error("File is password-protected");if(null==Y.valid)throw new Error("Encryption scheme unsupported");if(!Y.valid)throw new Error("Password is incorrect");break;case 92:C.lastuser=Y;break;case 66:var K=Number(Y);switch(K){case 21010:K=1200;break;case 32768:K=1e4;break;case 32769:K=1252}Rt(C.codepage=K),G=!0;break;case 317:C.rrtabid=Y;break;case 25:C.winlocked=Y;break;case 439:i.opts.RefreshAll=Y;break;case 12:i.opts.CalcCount=Y;break;case 16:i.opts.CalcDelta=Y;break;case 17:i.opts.CalcIter=Y;break;case 13:i.opts.CalcMode=Y;break;case 14:i.opts.CalcPrecision=Y;break;case 95:i.opts.CalcSaveRecalc=Y;break;case 15:C.CalcRefMode=Y;break;case 2211:i.opts.FullCalc=Y;break;case 129:Y.fDialog&&(d["!type"]="dialog"),Y.fBelow||((d["!outline"]||(d["!outline"]={})).above=!0),Y.fRight||((d["!outline"]||(d["!outline"]={})).left=!0);break;case 224:E.push(Y);break;case 430:R.push([Y]),R[R.length-1].XTI=[];break;case 35:case 547:R[R.length-1].push(Y);break;case 24:case 536:O={Name:Y.Name,Ref:Ll(Y.rgce,0,null,R,C)},Y.itab>0&&(O.Sheet=Y.itab-1),R.names.push(O),R[0]||(R[0]=[],R[0].XTI=[]),R[R.length-1].push(Y),"_xlnm._FilterDatabase"==Y.Name&&Y.itab>0&&Y.rgce&&Y.rgce[0]&&Y.rgce[0][0]&&"PtgArea3d"==Y.rgce[0][0][0]&&(j[Y.itab-1]={ref:rr(Y.rgce[0][0][1][2])});break;case 22:C.ExternCount=Y;break;case 23:0==R.length&&(R[0]=[],R[0].XTI=[]),R[R.length-1].XTI=R[R.length-1].XTI.concat(Y),R.XTI=R.XTI.concat(Y);break;case 2196:if(C.biff<8)break;null!=O&&(O.Comment=Y[1]);break;case 18:d["!protect"]=Y;break;case 19:0!==Y&&C.WTF&&console.error("Password verifier: "+Y);break;case 133:f[Y.pos]=Y,C.snames.push(Y.name);break;case 10:if(--B)break;if(p.e){if(p.e.r>0&&p.e.c>0){if(p.e.r--,p.e.c--,d["!ref"]=rr(p),t.sheetRows&&t.sheetRows<=p.e.r){var q=p.e.r;p.e.r=t.sheetRows-1,d["!fullref"]=d["!ref"],d["!ref"]=rr(p),p.e.r=q}p.e.r++,p.e.c++}A.length>0&&(d["!merges"]=A),N.length>0&&(d["!objects"]=N),L.length>0&&(d["!cols"]=L),k.length>0&&(d["!rows"]=k),T.Sheets.push(_)}""===b?v=d:n[b]=d,d=t.dense?[]:{};break;case 9:case 521:case 1033:case 2057:if(8===C.biff&&(C.biff={9:2,521:3,1033:4}[z]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Y.BIFFVer]||8),C.biffguess=0==Y.BIFFVer,0==Y.BIFFVer&&4096==Y.dt&&(C.biff=5,G=!0,Rt(C.codepage=28591)),8==C.biff&&0==Y.BIFFVer&&16==Y.dt&&(C.biff=2),B++)break;if(d=t.dense?[]:{},C.biff<8&&!G&&(G=!0,Rt(C.codepage=t.codepage||1252)),C.biff<5||0==Y.BIFFVer&&4096==Y.dt){""===b&&(b="Sheet1"),p={s:{r:0,c:0},e:{r:0,c:0}};var $={pos:e.l-U,name:b};f[$.pos]=$,C.snames.push(b)}else b=(f[W]||{name:""}).name;32==Y.dt&&(d["!type"]="chart"),64==Y.dt&&(d["!type"]="macro"),A=[],N=[],C.arrayf=S=[],L=[],k=[],I=!1,_={Hidden:(f[W]||{hs:0}).hs,name:b};break;case 515:case 3:case 2:"chart"==d["!type"]&&(t.dense?(d[Y.r]||[])[Y.c]:d[nr({c:Y.c,r:Y.r})])&&++Y.c,c={ixfe:Y.ixfe,XF:E[Y.ixfe]||{},v:Y.val,t:"n"},F>0&&(c.z=V[c.ixfe>>8&63]),qc(c,t,i.opts.Date1904),P({c:Y.c,r:Y.r},c,t);break;case 5:case 517:c={ixfe:Y.ixfe,XF:E[Y.ixfe],v:Y.val,t:Y.t},F>0&&(c.z=V[c.ixfe>>8&63]),qc(c,t,i.opts.Date1904),P({c:Y.c,r:Y.r},c,t);break;case 638:c={ixfe:Y.ixfe,XF:E[Y.ixfe],v:Y.rknum,t:"n"},F>0&&(c.z=V[c.ixfe>>8&63]),qc(c,t,i.opts.Date1904),P({c:Y.c,r:Y.r},c,t);break;case 189:for(var Z=Y.c;Z<=Y.C;++Z){var Q=Y.rkrec[Z-Y.c][0];c={ixfe:Q,XF:E[Q],v:Y.rkrec[Z-Y.c][1],t:"n"},F>0&&(c.z=V[c.ixfe>>8&63]),qc(c,t,i.opts.Date1904),P({c:Z,r:Y.r},c,t)}break;case 6:case 518:case 1030:if("String"==Y.val){m=Y;break}if((c=$c(Y.val,Y.cell.ixfe,Y.tt)).XF=E[c.ixfe],t.cellFormula){var J=Y.formula;if(J&&J[0]&&J[0][0]&&"PtgExp"==J[0][0][0]){var ee=J[0][0][1][0],te=J[0][0][1][1],ie=nr({r:ee,c:te});x[ie]?c.f=""+Ll(Y.formula,0,Y.cell,R,C):c.F=((t.dense?(d[ee]||[])[te]:d[ie])||{}).F}else c.f=""+Ll(Y.formula,0,Y.cell,R,C)}F>0&&(c.z=V[c.ixfe>>8&63]),qc(c,t,i.opts.Date1904),P(Y.cell,c,t),m=Y;break;case 7:case 519:if(!m)throw new Error("String record expects Formula");m.val=Y,(c=$c(Y,m.cell.ixfe,"s")).XF=E[c.ixfe],t.cellFormula&&(c.f=""+Ll(m.formula,0,m.cell,R,C)),F>0&&(c.z=V[c.ixfe>>8&63]),qc(c,t,i.opts.Date1904),P(m.cell,c,t),m=null;break;case 33:case 545:S.push(Y);var ne=nr(Y[0].s);if(r=t.dense?(d[Y[0].s.r]||[])[Y[0].s.c]:d[ne],t.cellFormula&&r){if(!m)break;if(!ne||!r)break;r.f=""+Ll(Y[1],0,Y[0],R,C),r.F=rr(Y[0])}break;case 1212:if(!t.cellFormula)break;if(y){if(!m)break;x[nr(m.cell)]=Y[0],((r=t.dense?(d[m.cell.r]||[])[m.cell.c]:d[nr(m.cell)])||{}).f=""+Ll(Y[0],0,s,R,C)}break;case 253:c=$c(g[Y.isst].t,Y.ixfe,"s"),g[Y.isst].h&&(c.h=g[Y.isst].h),c.XF=E[c.ixfe],F>0&&(c.z=V[c.ixfe>>8&63]),qc(c,t,i.opts.Date1904),P({c:Y.c,r:Y.r},c,t);break;case 513:t.sheetStubs&&(c={ixfe:Y.ixfe,XF:E[Y.ixfe],t:"z"},F>0&&(c.z=V[c.ixfe>>8&63]),qc(c,t,i.opts.Date1904),P({c:Y.c,r:Y.r},c,t));break;case 190:if(t.sheetStubs)for(var se=Y.c;se<=Y.C;++se){var re=Y.ixfe[se-Y.c];c={ixfe:re,XF:E[re],t:"z"},F>0&&(c.z=V[c.ixfe>>8&63]),qc(c,t,i.opts.Date1904),P({c:se,r:Y.r},c,t)}break;case 214:case 516:case 4:(c=$c(Y.val,Y.ixfe,"s")).XF=E[c.ixfe],F>0&&(c.z=V[c.ixfe>>8&63]),qc(c,t,i.opts.Date1904),P({c:Y.c,r:Y.r},c,t);break;case 0:case 512:1===B&&(p=Y);break;case 252:g=Y;break;case 1054:if(4==C.biff){V[F++]=Y[1];for(var oe=0;oe<F+163&&hi[oe]!=Y[1];++oe);oe>=163&&zi(Y[1],F+163)}else zi(Y[1],Y[0]);break;case 30:V[F++]=Y;for(var ae=0;ae<F+163&&hi[ae]!=Y;++ae);ae>=163&&zi(Y,F+163);break;case 229:A=A.concat(Y);break;case 93:N[Y.cmo[0]]=C.lastobj=Y;break;case 438:C.lastobj.TxO=Y;break;case 127:C.lastobj.ImData=Y;break;case 440:for(l=Y[0].s.r;l<=Y[0].e.r;++l)for(a=Y[0].s.c;a<=Y[0].e.c;++a)(r=t.dense?(d[l]||[])[a]:d[nr({c:a,r:l})])&&(r.l=Y[1]);break;case 2048:for(l=Y[0].s.r;l<=Y[0].e.r;++l)for(a=Y[0].s.c;a<=Y[0].e.c;++a)(r=t.dense?(d[l]||[])[a]:d[nr({c:a,r:l})])&&r.l&&(r.l.Tooltip=Y[1]);break;case 28:if(C.biff<=5&&C.biff>=2)break;r=t.dense?(d[Y[0].r]||[])[Y[0].c]:d[nr(Y[0])];var le=N[Y[2]];r||(t.dense?(d[Y[0].r]||(d[Y[0].r]=[]),r=d[Y[0].r][Y[0].c]={t:"z"}):r=d[nr(Y[0])]={t:"z"},p.e.r=Math.max(p.e.r,Y[0].r),p.s.r=Math.min(p.s.r,Y[0].r),p.e.c=Math.max(p.e.c,Y[0].c),p.s.c=Math.min(p.s.c,Y[0].c)),r.c||(r.c=[]),o={a:Y[1],t:le.TxO.t},r.c.push(o);break;case 2173:E[Y.ixfe],Y.ext.forEach((function(e){e[0]}));break;case 125:if(!C.cellStyles)break;for(;Y.e>=Y.s;)L[Y.e--]={width:Y.w/256,level:Y.level||0,hidden:!!(1&Y.flags)},I||(I=!0,Aa(Y.w/256)),Na(L[Y.e+1]);break;case 520:var ce={};null!=Y.level&&(k[Y.r]=ce,ce.level=Y.level),Y.hidden&&(k[Y.r]=ce,ce.hidden=!0),Y.hpt&&(k[Y.r]=ce,ce.hpt=Y.hpt,ce.hpx=Ia(Y.hpt));break;case 38:case 39:case 40:case 41:d["!margins"]||Yl(d["!margins"]={}),d["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[z]]=Y;break;case 161:d["!margins"]||Yl(d["!margins"]={}),d["!margins"].header=Y.header,d["!margins"].footer=Y.footer;break;case 574:Y.RTL&&(T.Views[0].RTL=!0);break;case 146:w=Y;break;case 2198:u=Y;break;case 140:h=Y;break;case 442:b?_.CodeName=Y||_.name:T.WBProps.CodeName=Y||"ThisWorkbook"}}else H||console.error("Missing Info for XLS Record 0x"+z.toString(16)),e.l+=U}return i.SheetNames=$i(f).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return f[e].name})),t.bookSheets||(i.Sheets=n),!i.SheetNames.length&&v["!ref"]?(i.SheetNames.push("Sheet1"),i.Sheets&&(i.Sheets.Sheet1=v)):i.Preamble=v,i.Sheets&&j.forEach((function(e,t){i.Sheets[i.SheetNames[t]]["!autofilter"]=e})),i.Strings=g,i.SSF=un(hi),C.enc&&(i.Encryption=C.enc),u&&(i.Themes=u),i.Metadata={},void 0!==h&&(i.Metadata.Country=h),R.names.length>0&&(T.Names=R.names),i.Workbook=T,i}var Qc="e0859ff2f94f6810ab9108002b27b3d9",Jc="02d5cdd59c2e1b10939708002b2cf9ae";function eh(e,t){var i,n,s,r;if(t||(t={}),Fh(t),Ot(),t.codepage&&It(t.codepage),e.FullPaths){if(Ki.find(e,"/encryption"))throw new Error("File is password-protected");i=Ki.find(e,"!CompObj"),n=Ki.find(e,"/Workbook")||Ki.find(e,"/Book")}else{switch(t.type){case"base64":e=qt(Ut(e));break;case"binary":e=qt(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e))}zs(e,0),n={content:e}}if(i&&Xc(i),t.bookProps&&!t.bookSheets)s={};else{var o=Ht?"buffer":"array";if(n&&n.content)s=Zc(n.content,t);else if((r=Ki.find(e,"PerfectOffice_MAIN"))&&r.content)s=Qo.to_workbook(r.content,(t.type=o,t));else{if(!(r=Ki.find(e,"NativeContent_MAIN"))||!r.content)throw(r=Ki.find(e,"MN0"))&&r.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");s=Qo.to_workbook(r.content,(t.type=o,t))}t.bookVBA&&e.FullPaths&&Ki.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=function(e){var t=Ki.utils.cfb_new({root:"R"});return e.FullPaths.forEach((function(i,n){if("/"!==i.slice(-1)&&i.match(/_VBA_PROJECT_CUR/)){var s=i.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Ki.utils.cfb_add(t,s,e.FileIndex[n].content)}})),Ki.write(t)}(e))}var a={};return e.FullPaths&&function(e,t,i){var n=Ki.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=oo(n,Ar,Jc);for(var r in s)t[r]=s[r]}catch(Sy){if(i.WTF)throw Sy}var o=Ki.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var a=oo(o,Nr,Qc);for(var l in a)null==t[l]&&(t[l]=a[l])}catch(Sy){if(i.WTF)throw Sy}t.HeadingPairs&&t.TitlesOfParts&&(Hr(t.HeadingPairs,t.TitlesOfParts,t,i),delete t.HeadingPairs,delete t.TitlesOfParts)}(e,a,t),s.Props=s.Custprops=a,t.bookFiles&&(s.cfb=e),s}var th={0:{f:function(e,t){var i={},n=e.l+t;i.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var r=e.read_shift(1);return e.l=n,7&r&&(i.level=7&r),16&r&&(i.hidden=!0),32&r&&(i.hpt=s/20),i}},1:{f:function(e){return[gr(e)]}},2:{f:function(e){return[gr(e),Er(e),"n"]}},3:{f:function(e){return[gr(e),e.read_shift(1),"e"]}},4:{f:function(e){return[gr(e),e.read_shift(1),"b"]}},5:{f:function(e){return[gr(e),_r(e),"n"]}},6:{f:function(e){return[gr(e),dr(e),"str"]}},7:{f:function(e){return[gr(e),e.read_shift(4),"s"]}},8:{f:function(e,t,i){var n=e.l+t,s=gr(e);s.r=i["!row"];var r=[s,dr(e),"str"];if(i.cellFormula){e.l+=2;var o=Bl(e,n-e.l,i);r[3]=Ll(o,0,s,i.supbooks,i)}else e.l=n;return r}},9:{f:function(e,t,i){var n=e.l+t,s=gr(e);s.r=i["!row"];var r=[s,_r(e),"n"];if(i.cellFormula){e.l+=2;var o=Bl(e,n-e.l,i);r[3]=Ll(o,0,s,i.supbooks,i)}else e.l=n;return r}},10:{f:function(e,t,i){var n=e.l+t,s=gr(e);s.r=i["!row"];var r=[s,e.read_shift(1),"b"];if(i.cellFormula){e.l+=2;var o=Bl(e,n-e.l,i);r[3]=Ll(o,0,s,i.supbooks,i)}else e.l=n;return r}},11:{f:function(e,t,i){var n=e.l+t,s=gr(e);s.r=i["!row"];var r=[s,e.read_shift(1),"e"];if(i.cellFormula){e.l+=2;var o=Bl(e,n-e.l,i);r[3]=Ll(o,0,s,i.supbooks,i)}else e.l=n;return r}},12:{f:function(e){return[br(e)]}},13:{f:function(e){return[br(e),Er(e),"n"]}},14:{f:function(e){return[br(e),e.read_shift(1),"e"]}},15:{f:function(e){return[br(e),e.read_shift(1),"b"]}},16:{f:hc},17:{f:function(e){return[br(e),dr(e),"str"]}},18:{f:function(e){return[br(e),e.read_shift(4),"s"]}},19:{f:pr},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,i){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),r=xr(e),o=Fl(e,0,i),a=yr(e);e.l=n;var l={Name:r,Ptg:o};return s<268435455&&(l.Sheet=s),a&&(l.Comment=a),l}},40:{},42:{},43:{f:function(e,t,i){var n={};n.sz=e.read_shift(2)/20;var s=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1),700===e.read_shift(2)&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript"}var r=e.read_shift(1);0!=r&&(n.underline=r);var o=e.read_shift(1);o>0&&(n.family=o);var a=e.read_shift(1);switch(a>0&&(n.charset=a),e.l++,n.color=function(e){var t={},i=e.read_shift(1)>>>1,n=e.read_shift(1),s=e.read_shift(2,"i"),r=e.read_shift(1),o=e.read_shift(1),a=e.read_shift(1);switch(e.l++,i){case 0:t.auto=1;break;case 1:t.index=n;var l=Rr[n];l&&(t.rgb=Ea(l));break;case 2:t.rgb=Ea([r,o,a]);break;case 3:t.theme=n}return 0!=s&&(t.tint=s>0?s/32767:s/32768),t}(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor"}return n.name=dr(e),n}},44:{f:function(e,t){return[e.read_shift(2),dr(e)]}},45:{f:Fa},46:{f:Va},47:{f:function(e,t){var i=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=i,{ixfe:n,numFmtId:s}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],i=e.read_shift(4);i-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Wo},62:{f:function(e){return[gr(e),pr(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var i={};i.r=e.read_shift(4),i.c=e.read_shift(4),t.r=nr(i);var n=e.read_shift(1);return 2&n&&(t.l="1"),8&n&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Us,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var i={},n=e[e.l];return++e.l,i.above=!(64&n),i.left=!(128&n),e.l+=18,i.name=vr(e,t-19),i}},148:{f:cc,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var i={},n=e.read_shift(4);i.defaultThemeVersion=e.read_shift(4);var s=t>8?dr(e):"";return s.length>0&&(i.CodeName=s),i.autoCompressPictures=!!(65536&n),i.backupFile=!!(64&n),i.checkCompatibility=!!(4096&n),i.date1904=!!(1&n),i.filterPrivacy=!!(8&n),i.hidePivotFieldList=!!(1024&n),i.promptedSolutions=!!(16&n),i.publishItems=!!(2048&n),i.refreshAllConnections=!!(262144&n),i.saveExternalLinkValues=!!(128&n),i.showBorderUnselectedTables=!!(4&n),i.showInkAnnotation=!!(32&n),i.showObjects=["all","placeholders","none"][n>>13&3],i.showPivotChartFilter=!!(32768&n),i.updateLinks=["userSet","never","always"][n>>8&3],i}},154:{},155:{},156:{f:function(e,t){var i={};return i.Hidden=e.read_shift(4),i.iTabID=e.read_shift(4),i.strRelID=Sr(e,t-8),i.name=dr(e),i}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:Tr},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:uc},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:dr(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Sr},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Vo},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,i){var n=e.l+t,s=wr(e),r=e.read_shift(1),o=[s];if(o[2]=r,i.cellFormula){var a=Dl(e,n-e.l,i);o[1]=a}else e.l=n;return o}},427:{f:function(e,t,i){var n=e.l+t,s=[Tr(e,16)];if(i.cellFormula){var r=Vl(e,n-e.l,i);s[1]=r,e.l=n}else e.l=n;return s}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return dc.forEach((function(i){t[i]=_r(e)})),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var i=e.l+t,n=Tr(e,16),s=yr(e),r=dr(e),o=dr(e),a=dr(e);e.l=i;var l={rfx:n,relId:s,loc:r,display:a};return o&&(l.Tooltip=o),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Sr},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Ja},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var i=Tr(e,16);return t.rfx=i.s,t.ref=nr(i.s),e.l+=16,t}},636:{T:-1},637:{f:mr},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:dr(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},ih={6:{f:Rl},10:{f:ao},12:{f:co},13:{f:co},14:{f:lo},15:{f:lo},16:{f:_r},17:{f:lo},18:{f:lo},19:{f:co},20:{f:Oo},21:{f:Oo},23:{f:Vo},24:{f:Fo},25:{f:lo},26:{},27:{},28:{f:function(e,t,i){return function(e,t,i){if(!(i.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),r=e.read_shift(2),o=e.read_shift(2),a=go(e,0,i);return i.biff<8&&e.read_shift(1),[{r:n,c:s},a,o,r]}}(e,0,i)}},29:{},34:{f:lo},35:{f:Do},38:{f:_r},39:{f:_r},40:{f:_r},41:{f:_r},42:{f:lo},43:{f:lo},47:{f:function(e,t,i){var n={Type:i.biff>=8?e.read_shift(2):0};return n.Type?xa(e,t-2,n):function(e,t,i,n){var s={key:co(e),verificationBytes:co(e)};i.password&&(s.verifier=ba(i.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=ya(i.password))}(e,i.biff,i,n),n}},49:{f:function(e,t,i){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(i&&i.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10}return n.name=uo(e,0,i),n}},51:{f:co},60:{},61:{f:function(e){return{Pos:[e.read_shift(2),e.read_shift(2)],Dim:[e.read_shift(2),e.read_shift(2)],Flags:e.read_shift(2),CurTab:e.read_shift(2),FirstTab:e.read_shift(2),Selected:e.read_shift(2),TabRatio:e.read_shift(2)}}},64:{f:lo},65:{f:function(){}},66:{f:co},77:{},80:{},81:{},82:{},85:{f:co},89:{},90:{},91:{},92:{f:function(e,t,i){if(i.enc)return e.l+=t,"";var n=e.l,s=go(e,0,i);return e.read_shift(t+n-e.l),s}},93:{f:function(e,t,i){if(i&&i.biff<8)return function(e,t,i){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),r=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Go[n]||Us)(e,t,i)),{cmo:[s,n,r],ft:o}}(e,t,i);var n=Po(e),s=function(e,t){for(var i=e.l+t,n=[];e.l<i;){var s=e.read_shift(2);e.l-=2;try{n.push(Ao[s](e,i-e.l))}catch(Sy){return e.l=i,n}}return e.l!=i&&(e.l=i),n}(e,t-22,n[1]);return{cmo:n,ft:s}}},94:{},95:{f:lo},96:{},97:{},99:{f:lo},125:{f:Wo},128:{f:function(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(0!==t[0]&&t[0]--,0!==t[1]&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}},129:{f:function(e,t,i){var n=i&&8==i.biff||2==t?e.read_shift(2):(e.l+=t,0);return{fDialog:16&n,fBelow:64&n,fRight:128&n}}},130:{f:co},131:{f:lo},132:{f:lo},133:{f:function(e,t,i){var n=e.read_shift(4),s=3&e.read_shift(1),r=e.read_shift(1);switch(r){case 0:r="Worksheet";break;case 1:r="Macrosheet";break;case 2:r="Chartsheet";break;case 6:r="VBAModule"}var o=uo(e,0,i);return 0===o.length&&(o="Sheet1"),{pos:n,hs:s,dt:r,name:o}}},134:{},140:{f:function(e){var t,i=[0,0];return t=e.read_shift(2),i[0]=Lr[t]||t,t=e.read_shift(2),i[1]=Lr[t]||t,i}},141:{f:co},144:{},146:{f:function(e){for(var t=e.read_shift(2),i=[];t-- >0;)i.push(xo(e));return i}},151:{},152:{},153:{},154:{},155:{},156:{f:co},157:{},158:{},160:{f:Uo},161:{f:function(e,t){var i={};return t<32||(e.l+=16,i.header=_r(e),i.footer=_r(e),e.l+=2),i}},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:function(e,t){for(var i=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),r=[];e.l<i;)r.push(wo(e));if(e.l!==i)throw new Error("MulRK read error");var o=e.read_shift(2);if(r.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:r}}},190:{f:function(e,t){for(var i=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),r=[];e.l<i;)r.push(e.read_shift(2));if(e.l!==i)throw new Error("MulBlank read error");var o=e.read_shift(2);if(r.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:r}}},193:{f:ao},197:{},198:{},199:{},200:{},201:{},202:{f:lo},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:co},220:{},221:{f:lo},222:{},224:{f:function(e,t,i){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,n.data=function(e,t,i,n){var s={},r=e.read_shift(4),o=e.read_shift(4),a=e.read_shift(4),l=e.read_shift(2);return s.patternType=kr[a>>26],n.cellStyles?(s.alc=7&r,s.fWrap=r>>3&1,s.alcV=r>>4&7,s.fJustLast=r>>7&1,s.trot=r>>8&255,s.cIndent=r>>16&15,s.fShrinkToFit=r>>20&1,s.iReadOrder=r>>22&2,s.fAtrNum=r>>26&1,s.fAtrFnt=r>>27&1,s.fAtrAlc=r>>28&1,s.fAtrBdr=r>>29&1,s.fAtrPat=r>>30&1,s.fAtrProt=r>>31&1,s.dgLeft=15&o,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=127&a,s.icvBottom=a>>7&127,s.icvDiag=a>>14&127,s.dgDiag=a>>21&15,s.icvFore=127&l,s.icvBack=l>>7&127,s.fsxButton=l>>14&1,s):s}(e,0,n.fStyle,i),n}},225:{f:function(e,t){return 0===t||e.read_shift(2),1200}},226:{f:ao},227:{},229:{f:function(e,t){for(var i=[],n=e.read_shift(2);n--;)i.push(To(e));return i}},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:function(e,t){for(var i=e.l+t,n=e.read_shift(4),s=e.read_shift(4),r=[],o=0;o!=s&&e.l<i;++o)r.push(fo(e));return r.Count=n,r.Unique=s,r}},253:{f:function(e){var t=So(e);return t.isst=e.read_shift(4),t}},255:{f:function(e,t){var i={};return i.dsst=e.read_shift(2),e.l+=t-2,i}},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:ho},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:lo},353:{f:ao},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:function(e,t,i){var n=e.l+t,s=e.read_shift(2),r=e.read_shift(2);if(i.sbcch=r,1025==r||14849==r)return[r,s];if(r<1||r>255)throw new Error("Unexpected SupBook type: "+r);for(var o=po(e,r),a=[];n>e.l;)a.push(mo(e));return[r,s,o,a]}},431:{f:lo},432:{},433:{},434:{},437:{},438:{f:function(e,t,i){var n=e.l,s="";try{e.l+=4;var r=(i.lastobj||{cmo:[0,0]}).cmo[1];-1==[0,5,7,11,12,14].indexOf(r)?e.l+=6:function(e){var t=e.read_shift(1);e.l++;var i=e.read_shift(2);return e.l+=2,[t,i]}(e);var o=e.read_shift(2);e.read_shift(2),co(e);var a=e.read_shift(2);e.l+=a;for(var l=1;l<e.lens.length-1;++l){if(e.l-n!=e.lens[l])throw new Error("TxO: bad continue record");var c=e[e.l];if((s+=po(e,e.lens[l+1]-e.lens[l]-1)).length>=(c?o:2*o))break}if(s.length!==o&&s.length!==2*o)throw new Error("cchText: "+o+" != "+s.length);return e.l=n+t,{t:s}}catch(Sy){return e.l=n+t,{t:s}}}},439:{f:lo},440:{f:function(e,t){var i=To(e);e.l+=16;var n=function(e,t){var i=e.l+t,n=e.read_shift(4);if(2!==n)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var r,o,a,l,c,h,u="";16&s&&(r=vo(e,e.l)),128&s&&(o=vo(e,e.l)),257===(257&s)&&(a=vo(e,e.l)),1===(257&s)&&(l=bo(e,e.l)),8&s&&(u=vo(e,e.l)),32&s&&(c=e.read_shift(16)),64&s&&(h=$r(e)),e.l=i;var d=o||a||l||"";d&&u&&(d+="#"+u),d||(d="#"+u),2&s&&"/"==d.charAt(0)&&"/"!=d.charAt(1)&&(d="file://"+d);var f={Target:d};return c&&(f.guid=c),h&&(f.time=h),r&&(f.Tooltip=r),f}(e,t-24);return[i,n]}},441:{},442:{f:mo},443:{},444:{f:co},445:{},446:{},448:{f:ao},449:{f:function(e){return e.read_shift(2),e.read_shift(4)},r:2},450:{f:ao},512:{f:Io},513:{f:zo},515:{f:function(e,t,i){i.biffguess&&2==i.biff&&(i.biff=5);var n=So(e),s=_r(e);return n.val=s,n}},516:{f:function(e,t,i){i.biffguess&&2==i.biff&&(i.biff=5),e.l;var n=So(e);2==i.biff&&e.l++;var s=mo(e,e.l,i);return n.val=s,n}},517:{f:Ro},519:{f:Ho},520:{f:function(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var i=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,7&n&&(t.level=7&n),32&n&&(t.hidden=!0),64&n&&(t.hpt=i/20),t}},523:{},545:{f:jo},549:{f:Lo},566:{},574:{f:function(e,t,i){return i&&i.biff>=2&&i.biff<5?{}:{RTL:64&e.read_shift(2)}}},638:{f:function(e){var t=e.read_shift(2),i=e.read_shift(2),n=wo(e);return{r:t,c:i,ixfe:n[0],rknum:n[1]}}},659:{},1048:{},1054:{f:function(e,t,i){return[e.read_shift(2),go(e,0,i)]}},1084:{},1212:{f:function(e,t,i){var n=_o(e);e.l++;var s=e.read_shift(1);return[Il(e,t-=8,i),s,n]}},2048:{f:function(e,t){e.read_shift(2);var i=To(e),n=e.read_shift((t-10)/2,"dbcs-cont");return[i,n=n.replace(Jt,"")]}},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:No},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:ao},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:function(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t},r:12},2173:{f:function(e,t){e.l,e.l+=2;var i=e.read_shift(2);e.l+=2;for(var n=e.read_shift(2),s=[];n-- >0;)s.push(Za(e,e.l));return{ixfe:i,ext:s}},r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:lo,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:function(e,t,i){if(!(i.biff<8)){var n=e.read_shift(2),s=e.read_shift(2);return[po(e,n,i),po(e,s,i)]}e.l+=t},r:12},2197:{},2198:{f:function(e,t,i){var n=e.l+t;if(124226!==e.read_shift(4))if(i.cellStyles){var s,r=e.slice(e.l);e.l=n;try{s=Mn(r,{type:"array"})}catch(Sy){return}var o=En(s,"theme/theme/theme1.xml",!0);if(o)return Ka(o,i)}else e.l=n},r:12},2199:{},2200:{},2201:{},2202:{f:function(e){return[0!==e.read_shift(4),0!==e.read_shift(4),e.read_shift(4)]},r:12},2203:{f:ao},2204:{},2205:{},2206:{},2207:{},2211:{f:function(e){var t=function(e){var t=e.read_shift(2),i=e.read_shift(2);return e.l+=8,{type:t,flags:i}}(e);if(2211!=t.type)throw new Error("Invalid Future Record "+t.type);return 0!==e.read_shift(4)}},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:co},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:function(e,t,i){var n={area:!1};if(5!=i.biff)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,16&s&&(n.area=!0),n}},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:function(e){for(var t=e.read_shift(2),i=[];t-- >0;)i.push(xo(e));return i}},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:Io},1:{},2:{f:function(e){var t=So(e);++e.l;var i=e.read_shift(2);return t.t="n",t.val=i,t}},3:{f:function(e){var t=So(e);++e.l;var i=_r(e);return t.t="n",t.val=i,t}},4:{f:function(e,t,i){i.biffguess&&5==i.biff&&(i.biff=2);var n=So(e);++e.l;var s=go(e,0,i);return n.t="str",n.val=s,n}},5:{f:Ro},7:{f:function(e){var t=e.read_shift(1);return 0===t?(e.l++,""):e.read_shift(t,"sbcs-cont")}},8:{},9:{f:No},11:{},22:{f:co},30:{f:ko},31:{},32:{},33:{f:jo},36:{},37:{f:Lo},50:{f:function(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}},62:{},52:{},67:{},68:{f:co},69:{},86:{},126:{},127:{f:function(e){var t=e.read_shift(2),i=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:i,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:function(e,t,i){var n=e.l+t,s=So(e),r=e.read_shift(2),o=po(e,r,i);return e.l=n,s.t="str",s.val=o,s}},223:{},234:{},354:{},421:{},518:{f:Rl},521:{f:No},536:{f:Fo},547:{f:Do},561:{},579:{},1030:{f:Rl},1033:{f:No},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function nh(e,t,i,n){var s=t;if(!isNaN(s)){var r=n||(i||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,r),r>0&&As(i)&&e.push(i)}}function sh(e,t){var i=t||{};var n=i.dense?[]:{},s=(e=e.replace(/<!--.*?-->/g,"")).match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var r=e.match(/<\/table/i),o=s.index,a=r&&r.index||e.length,l=gn(e.slice(o,a),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,h=0,u=0,d=0,f={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(o=0;o<l.length;++o){var m=l[o].trim(),g=m.slice(0,3).toLowerCase();if("<tr"!=g){if("<td"==g||"<th"==g){var b=m.split(/<\/t[dh]>/i);for(a=0;a<b.length;++a){var v=b[a].trim();if(v.match(/<t[dh]/i)){for(var y=v,x=0;"<"==y.charAt(0)&&(x=y.indexOf(">"))>-1;)y=y.slice(x+1);for(var S=0;S<p.length;++S){var E=p[S];E.s.c==h&&E.s.r<c&&c<=E.e.r&&(h=E.e.c+1,S=-1)}var w=Rn(v.slice(0,v.indexOf(">")));d=w.colspan?+w.colspan:1,((u=+w.rowspan)>1||d>1)&&p.push({s:{r:c,c:h},e:{r:c+(u||1)-1,c:h+d-1}});var T=w.t||w["data-t"]||"";if(y.length)if(y=Zn(y),f.s.r>c&&(f.s.r=c),f.e.r<c&&(f.e.r=c),f.s.c>h&&(f.s.c=h),f.e.c<h&&(f.e.c=h),y.length){var _={t:"s",v:y};i.raw||!y.trim().length||"s"==T||("TRUE"===y?_={t:"b",v:!0}:"FALSE"===y?_={t:"b",v:!1}:isNaN(fn(y))?isNaN(mn(y).getDate())||(_={t:"d",v:cn(y)},i.cellDates||(_={t:"n",v:Ji(_.v)}),_.z=i.dateNF||hi[14]):_={t:"n",v:fn(y)}),i.dense?(n[c]||(n[c]=[]),n[c][h]=_):n[nr({r:c,c:h})]=_,h+=d}else h+=d;else h+=d}}}}else{if(++c,i.sheetRows&&i.sheetRows<=c){--c;break}h=0}}return n["!ref"]=rr(f),p.length&&(n["!merges"]=p),n}function rh(e,t,i,n){for(var s=e["!merges"]||[],r=[],o=t.s.c;o<=t.e.c;++o){for(var a=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>i||s[c].s.c>o)&&!(s[c].e.r<i||s[c].e.c<o)){if(s[c].s.r<i||s[c].s.c<o){a=-1;break}a=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(a<0)){var h=nr({r:i,c:o}),u=n.dense?(e[i]||[])[o]:e[h],d=u&&null!=u.v&&(u.h||Gn(u.w||(lr(u),u.w)||""))||"",f={};a>1&&(f.rowspan=a),l>1&&(f.colspan=l),n.editable?d='<span contenteditable="true">'+d+"</span>":u&&(f["data-t"]=u&&u.t||"z",null!=u.v&&(f["data-v"]=u.v),null!=u.z&&(f["data-z"]=u.z),u.l&&"#"!=(u.l.Target||"#").charAt(0)&&(d='<a href="'+u.l.Target+'">'+d+"</a>")),f.id=(n.id||"sjs")+"-"+h,r.push(ss("td",d,f))}}return"<tr>"+r.join("")+"</tr>"}var oh='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',ah="</body></html>";function lh(e,t,i){return[].join("")+"<table"+(i&&i.id?' id="'+i.id+'"':"")+">"}function ch(e,t){var i=t||{},n=null!=i.header?i.header:oh,s=null!=i.footer?i.footer:ah,r=[n],o=sr(e["!ref"]);i.dense=Array.isArray(e),r.push(lh(0,0,i));for(var a=o.s.r;a<=o.e.r;++a)r.push(rh(e,o,a,i));return r.push("</table>"+s),r.join("")}function hh(e,t,i){var n=i||{};var s=0,r=0;if(null!=n.origin)if("number"==typeof n.origin)s=n.origin;else{var o="string"==typeof n.origin?ir(n.origin):n.origin;s=o.r,r=o.c}var a=t.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,a.length),c={s:{r:0,c:0},e:{r:s,c:r}};if(e["!ref"]){var h=sr(e["!ref"]);c.s.r=Math.min(c.s.r,h.s.r),c.s.c=Math.min(c.s.c,h.s.c),c.e.r=Math.max(c.e.r,h.e.r),c.e.c=Math.max(c.e.c,h.e.c),-1==s&&(c.e.r=s=h.e.r+1)}var u=[],d=0,f=e["!rows"]||(e["!rows"]=[]),p=0,m=0,g=0,b=0,v=0,y=0;for(e["!cols"]||(e["!cols"]=[]);p<a.length&&m<l;++p){var x=a[p];if(dh(x)){if(n.display)continue;f[m]={hidden:!0}}var S=x.children;for(g=b=0;g<S.length;++g){var E=S[g];if(!n.display||!dh(E)){var w=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):Zn(E.innerHTML),T=E.getAttribute("data-z")||E.getAttribute("z");for(d=0;d<u.length;++d){var _=u[d];_.s.c==b+r&&_.s.r<m+s&&m+s<=_.e.r&&(b=_.e.c+1-r,d=-1)}y=+E.getAttribute("colspan")||1,((v=+E.getAttribute("rowspan")||1)>1||y>1)&&u.push({s:{r:m+s,c:b+r},e:{r:m+s+(v||1)-1,c:b+r+(y||1)-1}});var M={t:"s",v:w},P=E.getAttribute("data-t")||E.getAttribute("t")||"";null!=w&&(0==w.length?M.t=P||"z":n.raw||0==w.trim().length||"s"==P||("TRUE"===w?M={t:"b",v:!0}:"FALSE"===w?M={t:"b",v:!1}:isNaN(fn(w))?isNaN(mn(w).getDate())||(M={t:"d",v:cn(w)},n.cellDates||(M={t:"n",v:Ji(M.v)}),M.z=n.dateNF||hi[14]):M={t:"n",v:fn(w)})),void 0===M.z&&null!=T&&(M.z=T);var C="",A=E.getElementsByTagName("A");if(A&&A.length)for(var N=0;N<A.length&&(!A[N].hasAttribute("href")||"#"==(C=A[N].getAttribute("href")).charAt(0));++N);C&&"#"!=C.charAt(0)&&(M.l={Target:C}),n.dense?(e[m+s]||(e[m+s]=[]),e[m+s][b+r]=M):e[nr({c:b+r,r:m+s})]=M,c.e.c<b+r&&(c.e.c=b+r),b+=y}}++m}return u.length&&(e["!merges"]=(e["!merges"]||[]).concat(u)),c.e.r=Math.max(c.e.r,m-1+s),e["!ref"]=rr(c),m>=l&&(e["!fullref"]=rr((c.e.r=a.length-p+m-1+s,c))),e}function uh(e,t){return hh((t||{}).dense?[]:{},e,t)}function dh(e){var t="",i=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return i&&(t=i(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}function fh(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,(function(e,t){return Array(parseInt(t,10)+1).join(" ")})).replace(/<text:tab[^>]*\/>/g,"\t").replace(/<text:line-break\/>/g,"\n");return[Fn(t.replace(/<[^>]*>/g,""))]}var ph={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function mh(e,t){var i=t||{};var n,s,r,o,a,l,c=rs(e),h=[],u={name:""},d="",f=0,p={},m=[],g=i.dense?[]:{},b={value:""},v="",y=0,x=[],S=-1,E=-1,w={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,_={},M=[],P={},C=[],A=1,N=1,L=[],k={Names:[]},I={},R=["",""],O=[],D={},B="",F=0,V=!1,j=!1,G=0;for(os.lastIndex=0,c=c.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");a=os.exec(c);)switch(a[3]=a[3].replace(/_.*$/,"")){case"table":case"\u5de5\u4f5c\u8868":"/"===a[1]?(w.e.c>=w.s.c&&w.e.r>=w.s.r?g["!ref"]=rr(w):g["!ref"]="A1:A1",i.sheetRows>0&&i.sheetRows<=w.e.r&&(g["!fullref"]=g["!ref"],w.e.r=i.sheetRows-1,g["!ref"]=rr(w)),M.length&&(g["!merges"]=M),C.length&&(g["!rows"]=C),r.name=r["\u540d\u79f0"]||r.name,"undefined"!==typeof JSON&&JSON.stringify(r),m.push(r.name),p[r.name]=g,j=!1):"/"!==a[0].charAt(a[0].length-2)&&(r=Rn(a[0],!1),S=E=-1,w.s.r=w.s.c=1e7,w.e.r=w.e.c=0,g=i.dense?[]:{},M=[],C=[],j=!0);break;case"table-row-group":"/"===a[1]?--T:++T;break;case"table-row":case"\u884c":if("/"===a[1]){S+=A,A=1;break}if((o=Rn(a[0],!1))["\u884c\u53f7"]?S=o["\u884c\u53f7"]-1:-1==S&&(S=0),(A=+o["number-rows-repeated"]||1)<10)for(G=0;G<A;++G)T>0&&(C[S+G]={level:T});E=-1;break;case"covered-table-cell":"/"!==a[1]&&++E,i.sheetStubs&&(i.dense?(g[S]||(g[S]=[]),g[S][E]={t:"z"}):g[nr({r:S,c:E})]={t:"z"}),v="",x=[];break;case"table-cell":case"\u6570\u636e":if("/"===a[0].charAt(a[0].length-2))++E,b=Rn(a[0],!1),N=parseInt(b["number-columns-repeated"]||"1",10),l={t:"z",v:null},b.formula&&0!=i.cellFormula&&(l.f=zl(Fn(b.formula))),"string"==(b["\u6570\u636e\u7c7b\u578b"]||b["value-type"])&&(l.t="s",l.v=Fn(b["string-value"]||""),i.dense?(g[S]||(g[S]=[]),g[S][E]=l):g[nr({r:S,c:E})]=l),E+=N-1;else if("/"!==a[1]){v="",y=0,x=[],N=1;var W=A?S+A-1:S;if(++E>w.e.c&&(w.e.c=E),E<w.s.c&&(w.s.c=E),S<w.s.r&&(w.s.r=S),W>w.e.r&&(w.e.r=W),O=[],D={},l={t:(b=Rn(a[0],!1))["\u6570\u636e\u7c7b\u578b"]||b["value-type"],v:null},i.cellFormula)if(b.formula&&(b.formula=Fn(b.formula)),b["number-matrix-columns-spanned"]&&b["number-matrix-rows-spanned"]&&(P={s:{r:S,c:E},e:{r:S+(parseInt(b["number-matrix-rows-spanned"],10)||0)-1,c:E+(parseInt(b["number-matrix-columns-spanned"],10)||0)-1}},l.F=rr(P),L.push([P,l.F])),b.formula)l.f=zl(b.formula);else for(G=0;G<L.length;++G)S>=L[G][0].s.r&&S<=L[G][0].e.r&&E>=L[G][0].s.c&&E<=L[G][0].e.c&&(l.F=L[G][1]);switch((b["number-columns-spanned"]||b["number-rows-spanned"])&&(P={s:{r:S,c:E},e:{r:S+(parseInt(b["number-rows-spanned"],10)||0)-1,c:E+(parseInt(b["number-columns-spanned"],10)||0)-1}},M.push(P)),b["number-columns-repeated"]&&(N=parseInt(b["number-columns-repeated"],10)),l.t){case"boolean":l.t="b",l.v=zn(b["boolean-value"]);break;case"float":case"percentage":case"currency":l.t="n",l.v=parseFloat(b.value);break;case"date":l.t="d",l.v=cn(b["date-value"]),i.cellDates||(l.t="n",l.v=Ji(l.v)),l.z="m/d/yy";break;case"time":l.t="n",l.v=rn(b["time-value"])/86400,i.cellDates&&(l.t="d",l.v=sn(l.v)),l.z="HH:MM:SS";break;case"number":l.t="n",l.v=parseFloat(b["\u6570\u636e\u6570\u503c"]);break;default:if("string"!==l.t&&"text"!==l.t&&l.t)throw new Error("Unsupported value type "+l.t);l.t="s",null!=b["string-value"]&&(v=Fn(b["string-value"]),x=[])}}else{if(V=!1,"s"===l.t&&(l.v=v||"",x.length&&(l.R=x),V=0==y),I.Target&&(l.l=I),O.length>0&&(l.c=O,O=[]),v&&!1!==i.cellText&&(l.w=v),V&&(l.t="z",delete l.v),(!V||i.sheetStubs)&&!(i.sheetRows&&i.sheetRows<=S))for(var z=0;z<A;++z){if(N=parseInt(b["number-columns-repeated"]||"1",10),i.dense)for(g[S+z]||(g[S+z]=[]),g[S+z][E]=0==z?l:un(l);--N>0;)g[S+z][E+N]=un(l);else for(g[nr({r:S+z,c:E})]=l;--N>0;)g[nr({r:S+z,c:E+N})]=un(l);w.e.c<=E&&(w.e.c=E)}E+=(N=parseInt(b["number-columns-repeated"]||"1",10))-1,N=0,l={},v="",x=[]}I={};break;case"document":case"document-content":case"\u7535\u5b50\u8868\u683c\u6587\u6863":case"spreadsheet":case"\u4e3b\u4f53":case"scripts":case"styles":case"font-face-decls":case"master-styles":if("/"===a[1]){if((n=h.pop())[0]!==a[3])throw"Bad state: "+n}else"/"!==a[0].charAt(a[0].length-2)&&h.push([a[3],!0]);break;case"annotation":if("/"===a[1]){if((n=h.pop())[0]!==a[3])throw"Bad state: "+n;D.t=v,x.length&&(D.R=x),D.a=B,O.push(D)}else"/"!==a[0].charAt(a[0].length-2)&&h.push([a[3],!1]);B="",F=0,v="",y=0,x=[];break;case"creator":"/"===a[1]?B=c.slice(F,a.index):F=a.index+a[0].length;break;case"meta":case"\u5143\u6570\u636e":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if("/"===a[1]){if((n=h.pop())[0]!==a[3])throw"Bad state: "+n}else"/"!==a[0].charAt(a[0].length-2)&&h.push([a[3],!1]);v="",y=0,x=[];break;case"scientific-number":case"currency-symbol":case"currency-style":case"script":case"libraries":case"automatic-styles":case"default-style":case"page-layout":case"style":case"map":case"font-face":case"paragraph-properties":case"table-properties":case"table-column-properties":case"table-row-properties":case"table-cell-properties":case"fraction":case"boolean-style":case"boolean":case"text-style":case"text-content":case"text-properties":case"embedded-text":case"body":case"\u7535\u5b50\u8868\u683c":case"forms":case"table-column":case"table-header-rows":case"table-rows":case"table-column-group":case"table-header-columns":case"table-columns":case"null-date":case"graphic-properties":case"calculation-settings":case"named-expressions":case"label-range":case"label-ranges":case"named-expression":case"sort":case"sort-by":case"sort-groups":case"tab":case"line-break":case"span":case"s":case"date":case"object":case"title":case"\u6807\u9898":case"desc":case"binary-data":case"table-source":case"scenario":case"iteration":case"content-validations":case"content-validation":case"help-message":case"error-message":case"database-ranges":case"filter":case"filter-and":case"filter-or":case"filter-condition":case"list-level-style-bullet":case"list-level-style-number":case"list-level-properties":case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":case"event-listener":case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":case"config-item":case"page-number":case"page-count":case"time":case"cell-range-source":case"detective":case"operation":case"highlighted-range":case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":case"rect":case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":case"properties":case"property":case"table-protection":case"data-pilot-grand-total":case"office-document-common-attrs":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if("/"===a[1]){if(_[u.name]=d,(n=h.pop())[0]!==a[3])throw"Bad state: "+n}else"/"!==a[0].charAt(a[0].length-2)&&(d="",u=Rn(a[0],!1),h.push([a[3],!0]));break;case"number":case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(h[h.length-1][0]){case"time-style":case"date-style":s=Rn(a[0],!1),d+=ph[a[3]]["long"===s.style?1:0]}break;case"text":if("/>"===a[0].slice(-2))break;if("/"===a[1])switch(h[h.length-1][0]){case"number-style":case"date-style":case"time-style":d+=c.slice(f,a.index)}else f=a.index+a[0].length;break;case"named-range":R=Ul((s=Rn(a[0],!1))["cell-range-address"]);var U={Name:s.name,Ref:R[0]+"!"+R[1]};j&&(U.Sheet=m.length),k.Names.push(U);break;case"p":case"\u6587\u672c\u4e32":if(["master-styles"].indexOf(h[h.length-1][0])>-1)break;if("/"!==a[1]||b&&b["string-value"])Rn(a[0],!1),y=a.index+a[0].length;else{var H=fh(c.slice(y,a.index));v=(v.length>0?v+"\n":"")+H[0]}break;case"database-range":if("/"===a[1])break;try{p[(R=Ul(Rn(a[0])["target-range-address"]))[0]]["!autofilter"]={ref:R[1]}}catch(Sy){}break;case"a":if("/"!==a[1]){if(!(I=Rn(a[0],!1)).href)break;I.Target=Fn(I.href),delete I.href,"#"==I.Target.charAt(0)&&I.Target.indexOf(".")>-1?(R=Ul(I.Target.slice(1)),I.Target="#"+R[0]+"!"+R[1]):I.Target.match(/^\.\.[\\\/]/)&&(I.Target=I.Target.slice(3))}break;default:switch(a[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"\u8868:":case"\u5b57:":break;default:if(i.WTF)throw new Error(a)}}var X={Sheets:p,SheetNames:m,Workbook:k};return i.bookSheets&&delete X.Sheets,X}function gh(e,t){t=t||{},yn(e,"META-INF/manifest.xml")&&function(e,t){for(var i,n,s=rs(e);i=os.exec(s);)switch(i[3]){case"manifest":break;case"file-entry":if("/"==(n=Rn(i[0],!1)).path&&"application/vnd.oasis.opendocument.spreadsheet"!==n.type)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw i}}(Sn(e,"META-INF/manifest.xml"),t);var i=En(e,"content.xml");if(!i)throw new Error("Missing content.xml in ODS / UOF file");var n=mh(Kn(i),t);return yn(e,"meta.xml")&&(n.Props=zr(Sn(e,"meta.xml"))),n}function bh(e,t){return mh(e,t)}function vh(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function yh(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):Kn($t(e))}function xh(e){var t=e.reduce((function(e,t){return e+t.length}),0),i=new Uint8Array(t),n=0;return e.forEach((function(e){i.set(e,n),n+=e.length})),i}function Sh(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>>24}function Eh(e,t){var i=t?t[0]:0,n=127&e[i];e:if(e[i++]>=128){if(n|=(127&e[i])<<7,e[i++]<128)break e;if(n|=(127&e[i])<<14,e[i++]<128)break e;if(n|=(127&e[i])<<21,e[i++]<128)break e;if(n+=(127&e[i])*Math.pow(2,28),++i,e[i++]<128)break e;if(n+=(127&e[i])*Math.pow(2,35),++i,e[i++]<128)break e;if(n+=(127&e[i])*Math.pow(2,42),++i,e[i++]<128)break e}return t&&(t[0]=i),n}function wh(e){var t=0,i=127&e[t];e:if(e[t++]>=128){if(i|=(127&e[t])<<7,e[t++]<128)break e;if(i|=(127&e[t])<<14,e[t++]<128)break e;if(i|=(127&e[t])<<21,e[t++]<128)break e;i|=(127&e[t])<<28}return i}function Th(e){for(var t=[],i=[0];i[0]<e.length;){var n,s=i[0],r=Eh(e,i),o=7&r,a=0;if(0==(r=Math.floor(r/8)))break;switch(o){case 0:for(var l=i[0];e[i[0]++]>=128;);n=e.slice(l,i[0]);break;case 5:a=4,n=e.slice(i[0],i[0]+a),i[0]+=a;break;case 1:a=8,n=e.slice(i[0],i[0]+a),i[0]+=a;break;case 2:a=Eh(e,i),n=e.slice(i[0],i[0]+a),i[0]+=a;break;default:throw new Error("PB Type ".concat(o," for Field ").concat(r," at offset ").concat(s))}var c={data:n,type:o};null==t[r]?t[r]=[c]:t[r].push(c)}return t}function _h(e,t){return(null==e?void 0:e.map((function(e){return t(e.data)})))||[]}function Mh(e){for(var t,i=[],n=[0];n[0]<e.length;){var s=Eh(e,n),r=Th(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:wh(r[1][0].data),messages:[]};r[2].forEach((function(t){var i=Th(t.data),s=wh(i[3][0].data);o.messages.push({meta:i,data:e.slice(n[0],n[0]+s)}),n[0]+=s})),(null==(t=r[3])?void 0:t[0])&&(o.merge=wh(r[3][0].data)>>>0>0),i.push(o)}return i}function Ph(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var i=[0],n=Eh(t,i),s=[];i[0]<t.length;){var r=3&t[i[0]];if(0!=r){var o=0,a=0;if(1==r?(a=4+(t[i[0]]>>2&7),o=(224&t[i[0]++])<<3,o|=t[i[0]++]):(a=1+(t[i[0]++]>>2),2==r?(o=t[i[0]]|t[i[0]+1]<<8,i[0]+=2):(o=(t[i[0]]|t[i[0]+1]<<8|t[i[0]+2]<<16|t[i[0]+3]<<24)>>>0,i[0]+=4)),s=[xh(s)],0==o)throw new Error("Invalid offset 0");if(o>s[0].length)throw new Error("Invalid offset beyond length");if(a>=o)for(s.push(s[0].slice(-o)),a-=o;a>=s[s.length-1].length;)s.push(s[s.length-1]),a-=s[s.length-1].length;s.push(s[0].slice(-o,-o+a))}else{var l=t[i[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[i[0]],c>1&&(l|=t[i[0]+1]<<8),c>2&&(l|=t[i[0]+2]<<16),c>3&&(l|=t[i[0]+3]<<24),l>>>=0,l++,i[0]+=c}s.push(t.slice(i[0],i[0]+l)),i[0]+=l}}var h=xh(s);if(h.length!=n)throw new Error("Unexpected length: ".concat(h.length," != ").concat(n));return h}function Ch(e){for(var t=[],i=0;i<e.length;){var n=e[i++],s=e[i]|e[i+1]<<8|e[i+2]<<16;i+=3,t.push(Ph(n,e.slice(i,i+s))),i+=s}if(i!==e.length)throw new Error("data is not a valid framed stream!");return xh(t)}function Ah(e,t,i){var n,s=vh(e),r=s.getUint32(8,!0),o=12,a=-1,l=-1,c=NaN,h=NaN,u=new Date(2001,0,1);switch(1&r&&(c=function(e,t){for(var i=(127&e[t+15])<<7|e[t+14]>>1,n=1&e[t+14],s=t+13;s>=t;--s)n=256*n+e[s];return(128&e[t+15]?-n:n)*Math.pow(10,i-6176)}(e,o),o+=16),2&r&&(h=s.getFloat64(o,!0),o+=8),4&r&&(u.setTime(u.getTime()+1e3*s.getFloat64(o,!0)),o+=8),8&r&&(l=s.getUint32(o,!0),o+=4),16&r&&(a=s.getUint32(o,!0),o+=4),e[1]){case 0:break;case 2:case 10:n={t:"n",v:c};break;case 3:n={t:"s",v:t[l]};break;case 5:n={t:"d",v:u};break;case 6:n={t:"b",v:h>0};break;case 7:n={t:"n",v:h/86400};break;case 8:n={t:"e",v:0};break;case 9:if(!(a>-1))throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&r," : ").concat(e.slice(0,4)));n={t:"s",v:i[a]};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&r," : ").concat(e.slice(0,4)))}return n}function Nh(e,t,i){switch(e[0]){case 0:case 1:case 2:case 3:return function(e,t,i,n){var s,r=vh(e),o=r.getUint32(4,!0),a=(n>1?12:8)+4*Sh(o&(n>1?3470:398)),l=-1,c=-1,h=NaN,u=new Date(2001,0,1);switch(512&o&&(l=r.getUint32(a,!0),a+=4),a+=4*Sh(o&(n>1?12288:4096)),16&o&&(c=r.getUint32(a,!0),a+=4),32&o&&(h=r.getFloat64(a,!0),a+=8),64&o&&(u.setTime(u.getTime()+1e3*r.getFloat64(a,!0)),a+=8),e[2]){case 0:break;case 2:s={t:"n",v:h};break;case 3:s={t:"s",v:t[c]};break;case 5:s={t:"d",v:u};break;case 6:s={t:"b",v:h>0};break;case 7:s={t:"n",v:h/86400};break;case 8:s={t:"e",v:0};break;case 9:if(l>-1)s={t:"s",v:i[l]};else if(c>-1)s={t:"s",v:t[c]};else{if(isNaN(h))throw new Error("Unsupported cell type ".concat(e.slice(0,4)));s={t:"n",v:h}}break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return s}(e,t,i,e[0]);case 5:return Ah(e,t,i);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Lh(e){return Eh(Th(e)[1][0].data)}function kh(e,t){var i=Th(t.data),n=wh(i[1][0].data),s=i[3],r=[];return(s||[]).forEach((function(t){var i=Th(t.data),s=wh(i[1][0].data)>>>0;switch(n){case 1:r[s]=yh(i[3][0].data);break;case 8:var o=Th(e[Lh(i[9][0].data)][0].data),a=e[Lh(o[1][0].data)][0],l=wh(a.meta[1][0].data);if(2001!=l)throw new Error("2000 unexpected reference to ".concat(l));var c=Th(a.data);r[s]=c[3].map((function(e){return yh(e.data)})).join("")}})),r}function Ih(e,t){var i,n=Th(t.data),s=(null==(i=null==n?void 0:n[7])?void 0:i[0])?wh(n[7][0].data)>>>0>0?1:0:-1,r=_h(n[5],(function(e){return function(e,t){var i,n,s,r,o,a,l,c,h,u,d,f,p,m,g,b,v=Th(e),y=wh(v[1][0].data)>>>0,x=wh(v[2][0].data)>>>0,S=(null==(n=null==(i=v[8])?void 0:i[0])?void 0:n.data)&&wh(v[8][0].data)>0||!1;if((null==(r=null==(s=v[7])?void 0:s[0])?void 0:r.data)&&0!=t)g=null==(a=null==(o=v[7])?void 0:o[0])?void 0:a.data,b=null==(c=null==(l=v[6])?void 0:l[0])?void 0:c.data;else{if(!(null==(u=null==(h=v[4])?void 0:h[0])?void 0:u.data)||1==t)throw"NUMBERS Tile missing ".concat(t," cell storage");g=null==(f=null==(d=v[4])?void 0:d[0])?void 0:f.data,b=null==(m=null==(p=v[3])?void 0:p[0])?void 0:m.data}for(var E=S?4:1,w=vh(g),T=[],_=0;_<g.length/2;++_){var M=w.getUint16(2*_,!0);M<65535&&T.push([_,M])}if(T.length!=x)throw"Expected ".concat(x," cells, found ").concat(T.length);var P=[];for(_=0;_<T.length-1;++_)P[T[_][0]]=b.subarray(T[_][1]*E,T[_+1][1]*E);return T.length>=1&&(P[T[T.length-1][0]]=b.subarray(T[T.length-1][1]*E)),{R:y,cells:P}}(e,s)}));return{nrows:wh(n[4][0].data)>>>0,data:r.reduce((function(e,t){return e[t.R]||(e[t.R]=[]),t.cells.forEach((function(i,n){if(e[t.R][n])throw new Error("Duplicate cell r=".concat(t.R," c=").concat(n));e[t.R][n]=i})),e}),[])}}function Rh(e,t){var i={"!ref":"A1"},n=e[Lh(Th(t.data)[2][0].data)],s=wh(n[0].meta[1][0].data);if(6001!=s)throw new Error("6000 unexpected reference to ".concat(s));return function(e,t,i){var n,s=Th(t.data),r={s:{r:0,c:0},e:{r:0,c:0}};if(r.e.r=(wh(s[6][0].data)>>>0)-1,r.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(r.e.c=(wh(s[7][0].data)>>>0)-1,r.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));i["!ref"]=rr(r);var o=Th(s[4][0].data),a=kh(e,e[Lh(o[4][0].data)][0]),l=(null==(n=o[17])?void 0:n[0])?kh(e,e[Lh(o[17][0].data)][0]):[],c=Th(o[3][0].data),h=0;c[1].forEach((function(t){var n=Th(t.data),s=e[Lh(n[2][0].data)][0],r=wh(s.meta[1][0].data);if(6002!=r)throw new Error("6001 unexpected reference to ".concat(r));var o=Ih(0,s);o.data.forEach((function(e,t){e.forEach((function(e,n){var s=nr({r:h+t,c:n}),r=Nh(e,a,l);r&&(i[s]=r)}))})),h+=o.nrows}))}(e,n[0],i),i}function Oh(e,t){var i={SheetNames:[],Sheets:{}};if(_h(Th(t.data)[1],Lh).forEach((function(t){e[t].forEach((function(t){if(2==wh(t.meta[1][0].data)){var n=function(e,t){var i,n=Th(t.data),s={name:(null==(i=n[1])?void 0:i[0])?yh(n[1][0].data):"",sheets:[]};return _h(n[2],Lh).forEach((function(t){e[t].forEach((function(t){6e3==wh(t.meta[1][0].data)&&s.sheets.push(Rh(e,t))}))})),s}(e,t);n.sheets.forEach((function(e,t){iu(i,e,0==t?n.name:n.name+"_"+t,!0)}))}}))})),0==i.SheetNames.length)throw new Error("Empty NUMBERS file");return i}function Dh(e){var t,i,n,s,r={},o=[];if(e.FullPaths.forEach((function(e){if(e.match(/\.iwpv2/))throw new Error("Unsupported password protection")})),e.FileIndex.forEach((function(e){if(e.name.match(/\.iwa$/)){var t,i;try{t=Ch(e.content)}catch(Sy){return console.log("?? "+e.content.length+" "+(Sy.message||Sy))}try{i=Mh(t)}catch(Sy){return console.log("## "+(Sy.message||Sy))}i.forEach((function(e){r[e.id]=e.messages,o.push(e.id)}))}})),!o.length)throw new Error("File has no messages");var a=(null==(s=null==(n=null==(i=null==(t=null==r?void 0:r[1])?void 0:t[0])?void 0:i.meta)?void 0:n[1])?void 0:s[0].data)&&1==wh(r[1][0].meta[1][0].data)&&r[1][0];if(a||o.forEach((function(e){r[e].forEach((function(e){if(1==wh(e.meta[1][0].data)>>>0){if(a)throw new Error("Document has multiple roots");a=e}}))})),!a)throw new Error("Cannot find Document root");return Oh(r,a)}function Bh(e){return function(t){for(var i=0;i!=e.length;++i){var n=e[i];void 0===t[n[0]]&&(t[n[0]]=n[1]),"n"===n[2]&&(t[n[0]]=Number(t[n[0]]))}}}function Fh(e){Bh([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function Vh(e,t,i,n,s,r,o,a,l,c,h,u){try{r[n]=jr(En(e,i,!0),t);var d,f=Sn(e,t);switch(a){case"sheet":d=Mc(f,t,s,l,r[n],c,h,u);break;case"chart":if(!(d=Pc(f,t,s,l,r[n],c))||!d["!drawel"])break;var p=Pn(d["!drawel"].Target,t),m=Vr(p),g=function(e,t){if(!e)return"??";var i=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][i].Target}(En(e,p,!0),jr(En(e,m,!0),p)),b=Pn(g,p),v=Vr(b);d=fc(En(e,b,!0),0,0,jr(En(e,v,!0),b),0,d);break;case"macro":x=t,r[n],x.slice(-4),d={"!type":"macro"};break;case"dialog":d=function(e,t){return t.slice(-4),{"!type":"dialog"}}(0,t,0,0,r[n]);break;default:throw new Error("Unrecognized sheet type "+a)}o[n]=d;var y=[];r&&r[n]&&$i(r[n]).forEach((function(i){var s="";if(r[n][i].Type==Fr.CMNT){s=Pn(r[n][i].Target,t);var o=Nc(Sn(e,s,!0),s,l);if(!o||!o.length)return;Qa(d,o,!1)}r[n][i].Type==Fr.TCMNT&&(s=Pn(r[n][i].Target,t),y=y.concat(function(e,t){var i=[],n=!1,s={},r=0;return e.replace(Ln,(function(o,a){var l=Rn(o);switch(On(l[0])){case"<?xml":case"<ThreadedComments":case"</ThreadedComments>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<threadedComment":s={author:l.personId,guid:l.id,ref:l.ref,T:1};break;case"</threadedComment>":null!=s.t&&i.push(s);break;case"<text>":case"<text":r=a+o.length;break;case"</text>":s.t=e.slice(r,a).replace(/\r\n/g,"\n").replace(/\r/g,"\n");break;case"<mentions":case"<mentions>":case"<ext":n=!0;break;case"</mentions>":case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return o})),i}(Sn(e,s,!0),l)))})),y&&y.length&&Qa(d,y,!0,l.people||[])}catch(Sy){if(l.WTF)throw Sy}var x}function jh(e){return"/"==e.charAt(0)?e.slice(1):e}function Gh(e,t){if(Ui(),Fh(t=t||{}),yn(e,"META-INF/manifest.xml"))return gh(e,t);if(yn(e,"objectdata.xml"))return gh(e,t);if(yn(e,"Index/Document.iwa")){if("undefined"==typeof Uint8Array)throw new Error("NUMBERS file parsing requires Uint8Array support");if(e.FileIndex)return Dh(e);var i=Ki.utils.cfb_new();return Tn(e).forEach((function(t){_n(i,t,wn(e,t))})),Dh(i)}if(!yn(e,"[Content_Types].xml")){if(yn(e,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(yn(e,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");throw new Error("Unsupported ZIP file")}var n,s,r=Tn(e),o=function(e){var t={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};if(!e||!e.match)return t;var i={};if((e.match(Ln)||[]).forEach((function(e){var n=Rn(e);switch(n[0].replace(kn,"<")){case"<?xml":break;case"<Types":t.xmlns=n["xmlns"+(n[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":i[n.Extension]=n.ContentType;break;case"<Override":void 0!==t[Br[n.ContentType]]&&t[Br[n.ContentType]].push(n.PartName)}})),t.xmlns!==as)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=i,delete t.calcchains,t}(En(e,"[Content_Types].xml")),a=!1;if(0===o.workbooks.length&&Sn(e,s="xl/workbook.xml",!0)&&o.workbooks.push(s),0===o.workbooks.length){if(!Sn(e,s="xl/workbook.bin",!0))throw new Error("Could not find workbook");o.workbooks.push(s),a=!0}"bin"==o.workbooks[0].slice(-3)&&(a=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(Hl=[],o.sst)try{Hl=Ac(Sn(e,jh(o.sst)),o.sst,t)}catch(Sy){if(t.WTF)throw Sy}t.cellStyles&&o.themes.length&&(l=function(e,t,i){return Ka(e,i)}(En(e,o.themes[0].replace(/^\//,""),!0)||"",o.themes[0],t)),o.style&&(c=Cc(Sn(e,jh(o.style)),o.style,l,t))}o.links.map((function(i){try{jr(En(e,Vr(jh(i))),i);return kc(Sn(e,jh(i)),0,i,t)}catch(Sy){}}));var h=_c(Sn(e,jh(o.workbooks[0])),o.workbooks[0],t),u={},d="";o.coreprops.length&&((d=Sn(e,jh(o.coreprops[0]),!0))&&(u=zr(d)),0!==o.extprops.length&&(d=Sn(e,jh(o.extprops[0]),!0))&&function(e,t,i){var n={};t||(t={}),e=Kn(e),Ur.forEach((function(i){var s=(e.match($n(i[0]))||[])[1];switch(i[2]){case"string":s&&(t[i[1]]=Fn(s));break;case"bool":t[i[1]]="true"===s;break;case"raw":var r=e.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));r&&r.length>0&&(n[i[1]]=r[1])}})),n.HeadingPairs&&n.TitlesOfParts&&Hr(n.HeadingPairs,n.TitlesOfParts,t,i)}(d,u,t));var f={};t.bookSheets&&!t.bookProps||0!==o.custprops.length&&(d=En(e,jh(o.custprops[0]),!0))&&(f=function(e,t){var i={},n="",s=e.match(Xr);if(s)for(var r=0;r!=s.length;++r){var o=s[r],a=Rn(o);switch(a[0]){case"<?xml":case"<Properties":break;case"<property":n=Fn(a.name);break;case"</property>":n=null;break;default:if(0===o.indexOf("<vt:")){var l=o.split(">"),c=l[0].slice(4),h=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":case"cy":case"error":i[n]=Fn(h);break;case"bool":i[n]=zn(h);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":i[n]=parseInt(h,10);break;case"r4":case"r8":case"decimal":i[n]=parseFloat(h);break;case"filetime":case"date":i[n]=cn(h);break;default:if("/"==c.slice(-1))break;t.WTF&&"undefined"!==typeof console&&console.warn("Unexpected",o,c,l)}}else if("</"===o.slice(0,2));else if(t.WTF)throw new Error(o)}}return i}(d,t));var p={};if((t.bookSheets||t.bookProps)&&(h.Sheets?n=h.Sheets.map((function(e){return e.name})):u.Worksheets&&u.SheetNames.length>0&&(n=u.SheetNames),t.bookProps&&(p.Props=u,p.Custprops=f),t.bookSheets&&"undefined"!==typeof n&&(p.SheetNames=n),t.bookSheets?p.SheetNames:t.bookProps))return p;n={};var m={};t.bookDeps&&o.calcchain&&(m=Lc(Sn(e,jh(o.calcchain)),o.calcchain));var g,b,v=0,y={},x=h.Sheets;u.Worksheets=x.length,u.SheetNames=[];for(var S=0;S!=x.length;++S)u.SheetNames[S]=x[S].name;var E=a?"bin":"xml",w=o.workbooks[0].lastIndexOf("/"),T=(o.workbooks[0].slice(0,w+1)+"_rels/"+o.workbooks[0].slice(w+1)+".rels").replace(/^\//,"");yn(e,T)||(T="xl/_rels/workbook."+E+".rels");var _=jr(En(e,T,!0),T.replace(/_rels.*/,"s5s"));(o.metadata||[]).length>=1&&(t.xlmeta=Ic(Sn(e,jh(o.metadata[0])),o.metadata[0],t)),(o.people||[]).length>=1&&(t.people=function(e,t){var i=[],n=!1;return e.replace(Ln,(function(e){var s=Rn(e);switch(On(s[0])){case"<?xml":case"<personList":case"</personList>":case"</person>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<person":i.push({name:s.displayname,id:s.id});break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+s[0]+" in threaded comments")}return e})),i}(Sn(e,jh(o.people[0])),t)),_&&(_=function(e,t){if(!e)return 0;try{e=t.map((function(t){return t.id||(t.id=t.strRelID),[t.name,e["!id"][t.id].Target,(i=e["!id"][t.id].Type,Fr.WS.indexOf(i)>-1?"sheet":Fr.CS&&i==Fr.CS?"chart":Fr.DS&&i==Fr.DS?"dialog":Fr.MS&&i==Fr.MS?"macro":i&&i.length?i:"sheet")];var i}))}catch(Sy){return null}return e&&0!==e.length?e:null}(_,h.Sheets));var M=Sn(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=u.Worksheets;++v){var P="sheet";if(_&&_[v]?(g="xl/"+_[v][1].replace(/[\/]?xl\//,""),yn(e,g)||(g=_[v][1]),yn(e,g)||(g=T.replace(/_rels\/.*$/,"")+_[v][1]),P=_[v][2]):g=(g="xl/worksheets/sheet"+(v+1-M)+"."+E).replace(/sheet0\./,"sheet."),b=g.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&null!=t.sheets)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(u.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var C=!1,A=0;A!=t.sheets.length;++A)"number"==typeof t.sheets[A]&&t.sheets[A]==v&&(C=1),"string"==typeof t.sheets[A]&&t.sheets[A].toLowerCase()==u.SheetNames[v].toLowerCase()&&(C=1);if(!C)continue e}}Vh(e,g,b,u.SheetNames[v],v,y,n,P,t,h,l,c)}return p={Directory:o,Workbook:h,Props:u,Custprops:f,Deps:m,Sheets:n,SheetNames:u.SheetNames,Strings:Hl,Styles:c,Themes:l,SSF:un(hi)},t&&t.bookFiles&&(e.files?(p.keys=r,p.files=e.files):(p.keys=[],p.files={},e.FullPaths.forEach((function(t,i){t=t.replace(/^Root Entry[\/]/,""),p.keys.push(t),p.files[t]=e.FileIndex[i]})))),t&&t.bookVBA&&(o.vba.length>0?p.vbaraw=Sn(e,jh(o.vba[0]),!0):o.defaults&&"application/vnd.ms-office.vbaProject"===o.defaults.bin&&(p.vbaraw=Sn(e,"xl/vbaProject.bin",!0))),p}function Wh(e,t){var i=t||{},n="Workbook",s=Ki.find(e,n);try{if(n="/!DataSpaces/Version",!(s=Ki.find(e,n))||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(function(e){var t={};t.id=e.read_shift(0,"lpp4"),t.R=ca(e,4),t.U=ca(e,4),t.W=ca(e,4)}(s.content),n="/!DataSpaces/DataSpaceMap",!(s=Ki.find(e,n))||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var r=function(e){var t=[];e.l+=4;for(var i=e.read_shift(4);i-- >0;)t.push(ha(e));return t}(s.content);if(1!==r.length||1!==r[0].comps.length||0!==r[0].comps[0].t||"StrongEncryptionDataSpace"!==r[0].name||"EncryptedPackage"!==r[0].comps[0].v)throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",!(s=Ki.find(e,n))||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=function(e){var t=[];e.l+=4;for(var i=e.read_shift(4);i-- >0;)t.push(e.read_shift(0,"lpp4"));return t}(s.content);if(1!=o.length||"StrongEncryptionTransform"!=o[0])throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",!(s=Ki.find(e,n))||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);ua(s.content)}catch(Sy){}if(n="/EncryptionInfo",!(s=Ki.find(e,n))||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=function(e){var t=ca(e);switch(t.Minor){case 2:return[t.Minor,pa(e)];case 3:return[t.Minor,ma()];case 4:return[t.Minor,ga(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}(s.content);if(n="/EncryptedPackage",!(s=Ki.find(e,n))||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(4==a[0]&&"undefined"!==typeof decrypt_agile)return decrypt_agile(a[1],s.content,i.password||"",i);if(2==a[0]&&"undefined"!==typeof decrypt_std76)return decrypt_std76(a[1],s.content,i.password||"",i);throw new Error("File is password-protected")}function zh(e,t){var i="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":i=Ut(e.slice(0,12));break;case"binary":i=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[i.charCodeAt(0),i.charCodeAt(1),i.charCodeAt(2),i.charCodeAt(3),i.charCodeAt(4),i.charCodeAt(5),i.charCodeAt(6),i.charCodeAt(7)]}function Uh(e,t){var i=0;e:for(;i<e.length;)switch(e.charCodeAt(i)){case 10:case 13:case 32:++i;break;case 60:return Hc(e.slice(i),t);default:break e}return Zo.to_workbook(e,t)}function Hh(e,t,i,n){return n?(i.type="string",Zo.to_workbook(e,i)):Zo.to_workbook(t,i)}function Xh(e,t){Ot();var i=t||{};if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer)return Xh(new Uint8Array(e),((i=un(i)).type="array",i));"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&!i.type&&(i.type="undefined"!==typeof Deno?"buffer":"array");var n,s=e,r=!1;if(i.cellStyles&&(i.cellNF=!0,i.sheetStubs=!0),Xl={},i.dateNF&&(Xl.dateNF=i.dateNF),i.type||(i.type=Ht&&Buffer.isBuffer(e)?"buffer":"base64"),"file"==i.type&&(i.type=Ht?"buffer":"binary",s=function(e){if("undefined"!==typeof qi)return qi.readFileSync(e);if("undefined"!==typeof Deno)return Deno.readFileSync(e);if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var t=File(e);t.open("r"),t.encoding="binary";var i=t.read();return t.close(),i}catch(Sy){if(!Sy.message||!Sy.message.match(/onstruct/))throw Sy}throw new Error("Cannot access file "+e)}(e),"undefined"===typeof Uint8Array||Ht||(i.type="array")),"string"==i.type&&(r=!0,i.type="binary",i.codepage=65001,s=function(e){return e.match(/[^\x00-\x7F]/)?qn(e):e}(e)),"array"==i.type&&"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&"undefined"!==typeof ArrayBuffer){var o=new ArrayBuffer(3),a=new Uint8Array(o);if(a.foo="bar",!a.foo)return(i=un(i)).type="array",Xh(Zt(s),i)}switch((n=zh(s,i))[0]){case 208:if(207===n[1]&&17===n[2]&&224===n[3]&&161===n[4]&&177===n[5]&&26===n[6]&&225===n[7])return function(e,t){return Ki.find(e,"EncryptedPackage")?Wh(e,t):eh(e,t)}(Ki.read(s,i),i);break;case 9:if(n[1]<=8)return eh(s,i);break;case 60:return Hc(s,i);case 73:if(73===n[1]&&42===n[2]&&0===n[3])throw new Error("TIFF Image File is not a spreadsheet");if(68===n[1])return function(e,t){var i=t||{},n=!!i.WTF;i.WTF=!0;try{var s=Ko.to_workbook(e,i);return i.WTF=n,s}catch(Sy){if(i.WTF=n,!Sy.message.match(/SYLK bad record ID/)&&n)throw Sy;return Zo.to_workbook(e,t)}}(s,i);break;case 84:if(65===n[1]&&66===n[2]&&76===n[3])return qo.to_workbook(s,i);break;case 80:return 75===n[1]&&n[2]<9&&n[3]<9?function(e,t){var i=e,n=t||{};return n.type||(n.type=Ht&&Buffer.isBuffer(e)?"buffer":"base64"),Gh(Mn(i,n),n)}(s,i):Hh(e,s,i,r);case 239:return 60===n[3]?Hc(s,i):Hh(e,s,i,r);case 255:if(254===n[1])return function(e,t){var i=e;return"base64"==t.type&&(i=Ut(i)),i=Ft.utils.decode(1200,i.slice(2),"str"),t.type="binary",Uh(i,t)}(s,i);if(0===n[1]&&2===n[2]&&0===n[3])return Qo.to_workbook(s,i);break;case 0:if(0===n[1]){if(n[2]>=2&&0===n[3])return Qo.to_workbook(s,i);if(0===n[2]&&(8===n[3]||9===n[3]))return Qo.to_workbook(s,i)}break;case 3:case 131:case 139:case 140:return Yo.to_workbook(s,i);case 123:if(92===n[1]&&114===n[2]&&116===n[3])return Sa.to_workbook(s,i);break;case 10:case 13:case 32:return function(e,t){var i="",n=zh(e,t);switch(t.type){case"base64":i=Ut(e);break;case"binary":i=e;break;case"buffer":i=e.toString("binary");break;case"array":i=hn(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==n[0]&&187==n[1]&&191==n[2]&&(i=Kn(i)),t.type="binary",Uh(i,t)}(s,i);case 137:if(80===n[1]&&78===n[2]&&71===n[3])throw new Error("PNG Image File is not a spreadsheet")}return Xo.indexOf(n[0])>-1&&n[2]<=12&&n[3]<=31?Yo.to_workbook(s,i):Hh(e,s,i,r)}function Yh(e,t,i,n,s,r,o,a){var l=Js(i),c=a.defval,h=a.raw||!Object.prototype.hasOwnProperty.call(a,"raw"),u=!0,d=1===s?[]:{};if(1!==s)if(Object.defineProperty)try{Object.defineProperty(d,"__rowNum__",{value:i,enumerable:!1})}catch(Sy){d.__rowNum__=i}else d.__rowNum__=i;if(!o||e[i])for(var f=t.s.c;f<=t.e.c;++f){var p=o?e[i][f]:e[n[f]+l];if(void 0!==p&&void 0!==p.t){var m=p.v;switch(p.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=r[f]){if(null==m)if("e"==p.t&&null===m)d[r[f]]=null;else if(void 0!==c)d[r[f]]=c;else{if(!h||null!==m)continue;d[r[f]]=null}else d[r[f]]=h&&("n"!==p.t||"n"===p.t&&!1!==a.rawNumbers)?m:lr(p,m,a);null!=m&&(u=!1)}}else{if(void 0===c)continue;null!=r[f]&&(d[r[f]]=c)}}return{row:d,isempty:u}}function Kh(e,t){if(null==e||null==e["!ref"])return[];var i={t:"n",v:0},n=0,s=1,r=[],o=0,a="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},h=null!=c.range?c.range:e["!ref"];switch(1===c.header?n=1:"A"===c.header?n=2:Array.isArray(c.header)?n=3:null==c.header&&(n=0),typeof h){case"string":l=or(h);break;case"number":(l=or(e["!ref"])).s.r=h;break;default:l=h}n>0&&(s=0);var u=Js(l.s.r),d=[],f=[],p=0,m=0,g=Array.isArray(e),b=l.s.r,v=0,y={};g&&!e[b]&&(e[b]=[]);var x=c.skipHidden&&e["!cols"]||[],S=c.skipHidden&&e["!rows"]||[];for(v=l.s.c;v<=l.e.c;++v)if(!(x[v]||{}).hidden)switch(d[v]=tr(v),i=g?e[b][v]:e[d[v]+u],n){case 1:r[v]=v-l.s.c;break;case 2:r[v]=d[v];break;case 3:r[v]=c.header[v-l.s.c];break;default:if(null==i&&(i={w:"__EMPTY",t:"s"}),a=o=lr(i,null,c),m=y[o]||0){do{a=o+"_"+m++}while(y[a]);y[o]=m,y[a]=1}else y[o]=1;r[v]=a}for(b=l.s.r+s;b<=l.e.r;++b)if(!(S[b]||{}).hidden){var E=Yh(e,l,b,d,n,r,g,c);(!1===E.isempty||(1===n?!1!==c.blankrows:c.blankrows))&&(f[p++]=E.row)}return f.length=p,f}var qh=/"/g;function $h(e,t,i,n,s,r,o,a){for(var l=!0,c=[],h="",u=Js(i),d=t.s.c;d<=t.e.c;++d)if(n[d]){var f=a.dense?(e[i]||[])[d]:e[n[d]+u];if(null==f)h="";else if(null!=f.v){l=!1,h=""+(a.rawNumbers&&"n"==f.t?f.v:lr(f,null,a));for(var p=0,m=0;p!==h.length;++p)if((m=h.charCodeAt(p))===s||m===r||34===m||a.forceQuotes){h='"'+h.replace(qh,'""')+'"';break}"ID"==h&&(h='"ID"')}else null==f.f||f.F?h="":(l=!1,(h="="+f.f).indexOf(",")>=0&&(h='"'+h.replace(qh,'""')+'"'));c.push(h)}return!1===a.blankrows&&l?null:c.join(o)}function Zh(e,t){var i=[],n=null==t?{}:t;if(null==e||null==e["!ref"])return"";var s=or(e["!ref"]),r=void 0!==n.FS?n.FS:",",o=r.charCodeAt(0),a=void 0!==n.RS?n.RS:"\n",l=a.charCodeAt(0),c=new RegExp(("|"==r?"\\|":r)+"+$"),h="",u=[];n.dense=Array.isArray(e);for(var d=n.skipHidden&&e["!cols"]||[],f=n.skipHidden&&e["!rows"]||[],p=s.s.c;p<=s.e.c;++p)(d[p]||{}).hidden||(u[p]=tr(p));for(var m=0,g=s.s.r;g<=s.e.r;++g)(f[g]||{}).hidden||null!=(h=$h(e,s,g,u,o,l,r,n))&&(n.strip&&(h=h.replace(c,"")),(h||!1!==n.blankrows)&&i.push((m++?a:"")+h));return delete n.dense,i.join("")}function Qh(e,t){t||(t={}),t.FS="\t",t.RS="\n";var i=Zh(e,t);if("undefined"==typeof Ft||"string"==t.type)return i;var n=Ft.utils.encode(1200,i,"str");return String.fromCharCode(255)+String.fromCharCode(254)+n}function Jh(e,t,i){var n,s=i||{},r=+!s.skipHeader,o=e||{},a=0,l=0;if(o&&null!=s.origin)if("number"==typeof s.origin)a=s.origin;else{var c="string"==typeof s.origin?ir(s.origin):s.origin;a=c.r,l=c.c}var h={s:{c:0,r:0},e:{c:l,r:a+t.length-1+r}};if(o["!ref"]){var u=or(o["!ref"]);h.e.c=Math.max(h.e.c,u.e.c),h.e.r=Math.max(h.e.r,u.e.r),-1==a&&(a=u.e.r+1,h.e.r=a+t.length-1+r)}else-1==a&&(a=0,h.e.r=t.length-1+r);var d=s.header||[],f=0;t.forEach((function(e,t){$i(e).forEach((function(i){-1==(f=d.indexOf(i))&&(d[f=d.length]=i);var c=e[i],h="z",u="",p=nr({c:l+f,r:a+t+r});n=eu(o,p),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?h="n":"boolean"==typeof c?h="b":"string"==typeof c?h="s":c instanceof Date?(h="d",s.cellDates||(h="n",c=Ji(c)),u=s.dateNF||hi[14]):null===c&&s.nullError&&(h="e",c=0),n?(n.t=h,n.v=c,delete n.w,delete n.R,u&&(n.z=u)):o[p]=n={t:h,v:c},u&&(n.z=u)):o[p]=c}))})),h.e.c=Math.max(h.e.c,l+d.length-1);var p=Js(a);if(r)for(f=0;f<d.length;++f)o[tr(f+l)+p]={t:"s",v:d[f]};return o["!ref"]=rr(h),o}function eu(e,t,i){if("string"==typeof t){if(Array.isArray(e)){var n=ir(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return eu(e,nr("number"!=typeof t?t:{r:t,c:i||0}))}function tu(){return{SheetNames:[],Sheets:{}}}function iu(e,t,i,n){var s=1;if(!i)for(;s<=65535&&-1!=e.SheetNames.indexOf(i="Sheet"+s);++s,i=void 0);if(!i||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(i)>=0){var r=i.match(/(^.*?)(\d+)$/);s=r&&+r[2]||0;var o=r&&r[1]||i;for(++s;s<=65535&&-1!=e.SheetNames.indexOf(i=o+s);++s);}if(Ec(i),e.SheetNames.indexOf(i)>=0)throw new Error("Worksheet with name |"+i+"| already exists!");return e.SheetNames.push(i),e.Sheets[i]=t,i}function nu(e,t,i){return t?(e.l={Target:t},i&&(e.l.Tooltip=i)):delete e.l,e}var su={encode_col:tr,encode_row:Js,encode_cell:nr,encode_range:rr,decode_col:er,decode_row:Qs,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:ir,decode_range:sr,format_cell:lr,sheet_add_aoa:hr,sheet_add_json:Jh,sheet_add_dom:hh,aoa_to_sheet:ur,json_to_sheet:function(e,t){return Jh(null,e,t)},table_to_sheet:uh,table_to_book:function(e,t){return cr(uh(e,t),t)},sheet_to_csv:Zh,sheet_to_txt:Qh,sheet_to_json:Kh,sheet_to_html:ch,sheet_to_formulae:function(e){var t,i="",n="";if(null==e||null==e["!ref"])return[];var s,r=or(e["!ref"]),o="",a=[],l=[],c=Array.isArray(e);for(s=r.s.c;s<=r.e.c;++s)a[s]=tr(s);for(var h=r.s.r;h<=r.e.r;++h)for(o=Js(h),s=r.s.c;s<=r.e.c;++s)if(i=a[s]+o,n="",void 0!==(t=c?(e[h]||[])[s]:e[i])){if(null!=t.F){if(i=t.F,!t.f)continue;n=t.f,-1==i.indexOf(":")&&(i=i+":"+i)}if(null!=t.f)n=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)n=""+t.v;else if("b"==t.t)n=t.v?"TRUE":"FALSE";else if(void 0!==t.w)n="'"+t.w;else{if(void 0===t.v)continue;n="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=i+"="+n}return l},sheet_to_row_object_array:Kh,sheet_get_cell:eu,book_new:tu,book_append_sheet:iu,book_set_sheet_visibility:function(e,t,i){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var i=e.SheetNames.indexOf(t);if(i>-1)return i;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),i){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+i)}e.Workbook.Sheets[n].Hidden=i},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:nu,cell_set_internal_link:function(e,t,i){return nu(e,"#"+t,i)},cell_add_comment:function(e,t,i){e.c||(e.c=[]),e.c.push({t:t,a:i||"SheetJS"})},sheet_set_array_formula:function(e,t,i,n){for(var s="string"!=typeof t?t:or(t),r="string"==typeof t?t:rr(t),o=s.s.r;o<=s.e.r;++o)for(var a=s.s.c;a<=s.e.c;++a){var l=eu(e,o,a);l.t="n",l.F=r,delete l.v,o==s.s.r&&a==s.s.c&&(l.f=i,n&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};Ct.version;const ru="uploadedFiles",ou="fileGroups",au=()=>{try{const e=localStorage.getItem(ru);return e?JSON.parse(e):[]}catch(e){return[]}},lu=e=>{localStorage.setItem(ru,JSON.stringify(e))},cu=()=>{try{const e=localStorage.getItem(ou);return e?JSON.parse(e):[]}catch(e){return[]}},hu=e=>{localStorage.setItem(ou,JSON.stringify(e))},uu=async e=>{const t=e.name.toLowerCase();if(t.endsWith(".csv")){return function(e){const t=["Good Signal Quality(0-100)","Mark","Attention","Meditation","Delta","Theta","Low Alpha","High Alpha","Low Beta","High Beta","Low Gamma","High Gamma"],i=e.split(/\r?\n/).filter((e=>""!==e.trim()));if(i.length<2){const e={};return t.forEach((t=>e[t]=[null])),e}const n=i[0].split(",").map((e=>e.trim())),s={};t.forEach((e=>{const t=n.findIndex((t=>t===e));s[e]=-1!==t?t:null}));const r={};t.forEach((e=>{r[e]=[]}));for(let o=1;o<i.length;o++){const e=i[o].split(",").map((e=>e.trim()));e.length<n.length||t.forEach((t=>{const i=s[t];if(null===i||i>=e.length)r[t].push(null);else{const n=e[i],s=parseFloat(n);r[t].push(isNaN(s)?n:s)}}))}return r}(await e.text())}if(t.endsWith(".xlsx")){return function(e){const t=Xh(e,{type:"array"}),i=t.SheetNames[0],n=t.Sheets[i],s=su.sheet_to_json(n,{header:1}),r=["Good Signal Quality(0-100)","Mark","Attention","Meditation","Delta","Theta","Low Alpha","High Alpha","Low Beta","High Beta","Low Gamma","High Gamma"];if(!s||s.length<2){const e={};return r.forEach((t=>e[t]=[null])),e}const o=s[0].map(String).map((e=>e.trim())),a={};r.forEach((e=>{const t=o.findIndex((t=>t===e));a[e]=-1!==t?t:null}));const l={};r.forEach((e=>{l[e]=[]}));for(let c=1;c<s.length;c++){const e=s[c];e.length<o.length||r.forEach((t=>{const i=a[t];if(null===i||i>=e.length)l[t].push(null);else{const n=e[i],s=parseFloat(n);l[t].push(isNaN(s)?n:s)}}))}return l}(await e.arrayBuffer())}throw new Error("\u4e0d\u652f\u63f4\u7684\u6a94\u6848\u683c\u5f0f\uff0c\u50c5\u652f\u63f4 CSV")};let du=0;const fu=()=>(du+=1,1e3*Date.now()+du);function pu(){const[e,i]=(0,t.useState)((()=>au())),[n,s]=(0,t.useState)((()=>cu())),r=(0,t.useCallback)((()=>{i(au()),s(cu())}),[]);(0,t.useEffect)((()=>{const e=e=>{e.key!==ru&&e.key!==ou||r()};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[r]);const o=(0,t.useCallback)((async(e,t)=>{const n=[];for(const i of e){const e=await uu(i),s={id:fu(),fileName:i.name,alias:i.name,uploadedAt:(new Date).toISOString(),data:e,userId:t};n.push(s)}const s=[...au(),...n];return lu(s),i(s),n}),[]),a=(0,t.useCallback)((async(e,t,n)=>{const r=fu().toString(),o=[];for(const i of e){const e=await uu(i),t={id:fu(),fileName:i.name,alias:i.name,uploadedAt:(new Date).toISOString(),data:e,userId:n,groupId:r};o.push(t)}const a={id:r,name:t,createdAt:(new Date).toISOString(),userId:n,fileIds:o.map((e=>e.id))},l=au(),c=cu(),h=[...l,...o],u=[...c,a];return lu(h),hu(u),i(h),s(u),a}),[]),l=(0,t.useCallback)(((e,t)=>{const n=au().map((i=>i.id===e?h(h({},i),{},{alias:t}):i));lu(n),i(n)}),[]),c=(0,t.useCallback)((e=>{const t=au(),n=cu(),r=t.filter((t=>t.id!==e)),o=n.map((t=>h(h({},t),{},{fileIds:t.fileIds.filter((t=>t!==e))}))).filter((e=>e.fileIds.length>0));lu(r),hu(o),i(r),s(o)}),[]),u=(0,t.useCallback)(((e,t,n)=>{const r={id:fu().toString(),name:e,createdAt:(new Date).toISOString(),userId:n,fileIds:t},o=au(),a=cu(),l=o.map((e=>t.includes(e.id)?h(h({},e),{},{groupId:r.id}):e)),c=[...a,r];return lu(l),hu(c),i(l),s(c),r}),[]),d=(0,t.useCallback)(((e,t)=>{const n=au(),r=cu().map((i=>i.id===e?h(h({},i),t):i));let o=n;t.fileIds&&(o=n.map((i=>t.fileIds.includes(i.id)?h(h({},i),{},{groupId:e}):i.groupId===e?h(h({},i),{},{groupId:void 0}):i)),lu(o),i(o)),hu(r),s(r)}),[]),f=(0,t.useCallback)((e=>{const t=au(),n=cu(),r=t.map((t=>t.groupId===e?h(h({},t),{},{groupId:void 0}):t)),o=n.filter((t=>t.id!==e));lu(r),hu(o),i(r),s(o)}),[]),p=(0,t.useCallback)((t=>e.filter((e=>e.groupId===t))),[e]),m=(0,t.useCallback)((e=>n.find((t=>t.id===e))),[n]);return{files:e,groups:n,addFiles:o,addFilesAsGroup:a,updateFileAlias:l,deleteFile:c,createGroup:u,updateGroup:d,deleteGroup:f,getFilesByGroup:p,getGroupById:m,reload:r}}const mu=[];function gu(e){mu.push(e)}function bu(){return mu}var vu=i(579);const yu=e=>{let{options:i,selected:n,onChange:s,placeholder:r="\u8acb\u9078\u64c7",title:o}=e;const[a,l]=(0,t.useState)(!1),c=e=>{n.includes(e)?s(n.filter((t=>t!==e))):s([...n,e])},h=i.filter((e=>n.includes(e.value)));return(0,vu.jsxs)(vu.Fragment,{children:[(0,vu.jsx)("button",{className:"btn w-full justify-between",onClick:()=>l(!0),children:(0,vu.jsx)("span",{className:"truncate flex-grow text-left",children:0===n.length?r:"\u5df2\u9078 ".concat(n.length,"/").concat(i.length)})}),h.length>0&&(0,vu.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:h.map((e=>(0,vu.jsxs)("span",{className:"badge gap-1",children:[e.label,(0,vu.jsx)("button",{type:"button",className:"ml-1",onClick:()=>c(e.value),children:"\u2715"})]},e.value)))}),a&&(0,vu.jsx)("div",{className:"modal modal-open",children:(0,vu.jsxs)("div",{className:"modal-box relative",children:[(0,vu.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:()=>l(!1),children:"\u2715"}),o&&(0,vu.jsx)("h3",{className:"text-lg font-bold mb-4",children:o}),(0,vu.jsx)("div",{className:"max-h-60 overflow-auto space-y-2",children:i.map((e=>(0,vu.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,vu.jsx)("input",{type:"checkbox",className:"checkbox",checked:n.includes(e.value),onChange:()=>c(e.value)}),(0,vu.jsx)("span",{children:e.label})]},e.value)))}),(0,vu.jsxs)("div",{className:"modal-action",children:[(0,vu.jsx)("button",{type:"button",className:"btn btn-sm",onClick:()=>s(i.map((e=>e.value))),children:"\u5168\u9078"}),(0,vu.jsx)("button",{type:"button",className:"btn btn-sm",onClick:()=>s([]),children:"\u6e05\u7a7a"}),(0,vu.jsx)("button",{className:"btn btn-primary",onClick:()=>l(!1),children:"\u78ba\u8a8d"})]})]})})]})};let xu=function(e){return e.Admin="\u7ba1\u7406\u8005",e.Basic="\u4e00\u822c\u4f7f\u7528\u8005",e}({});const Su="userList",Eu="currentUser",wu={id:"default-user",name:"\u9810\u8a2d\u4f7f\u7528\u8005",phone:"",email:"",role:xu.Basic,company:{name:"",address:"",id:"",phone:"",fax:""}};function Tu(){const e=function(){const e=localStorage.getItem(Su);if(e){const t=JSON.parse(e);return t.length>0?t:[wu]}return[wu]}(),i=function(e){const t=localStorage.getItem(Eu);return t?JSON.parse(t):e.length>0?e[0]:null}(e),[n,s]=(0,t.useState)(e),[r,o]=(0,t.useState)(i);(0,t.useEffect)((()=>{localStorage.setItem(Su,JSON.stringify(n))}),[n]),(0,t.useEffect)((()=>{r?localStorage.setItem(Eu,JSON.stringify(r)):localStorage.removeItem(Eu)}),[r]);return{users:n,currentUser:r,setCurrentUser:o,addUser:e=>{const t=[...n,e];s(t),o(e)},updateUser:e=>{const t=n.map((t=>t.id===e.id?e:t));s(t),r&&r.id===e.id&&o(e)},removeUser:e=>{const t=n.filter((t=>t.id!==e));s(t),r&&r.id===e&&o(t[0]||null)}}}const _u=(0,t.createContext)(void 0),Mu=e=>{let{children:t}=e;const i=Tu();return(0,vu.jsx)(_u.Provider,{value:i,children:t})},Pu=()=>{const e=(0,t.useContext)(_u);if(!e)throw new Error("useUserContext \u5fc5\u9808\u5728 UserProvider \u5167\u4f7f\u7528");return e},Cu="analysisHistory";function Au(e){localStorage.setItem(Cu,JSON.stringify(e))}function Nu(){const[e,i]=(0,t.useState)([]);(0,t.useEffect)((()=>{i(function(){const e=localStorage.getItem(Cu);return e?JSON.parse(e):[]}())}),[]);return{history:e,addHistoryRecord:t=>{const n=[t,...e];i(n),Au(n)},updateHistoryRecord:(t,n)=>{const s=e.map((e=>e.id===t?n:e));i(s),Au(s)},removeHistoryRecord:t=>{const n=e.filter((e=>e.id!==t));i(n),Au(n)}}}let Lu=function(e){return e.Success="\u6210\u529f",e.Failure="\u5931\u6557",e}({});const ku=()=>{const{files:e}=pu(),{users:i}=Pu(),{history:n,removeHistoryRecord:s,updateHistoryRecord:r}=Nu(),[o,a]=(0,t.useState)(""),[l,c]=(0,t.useState)([]),[u,d]=(0,t.useState)([]),[f,p]=(0,t.useState)(1),[m,g]=(0,t.useState)(!1),b=bu().reduce(((e,t)=>{const i=t.group||"\u4e3b\u8981\u529f\u80fd",n=e.find((e=>e.name===i));return n?n.plugins.push(t):e.push({name:i,plugins:[t]}),e}),[]);b.sort(((e,t)=>"\u4e3b\u8981\u529f\u80fd"===e.name?-1:"\u4e3b\u8981\u529f\u80fd"===t.name?1:e.name.localeCompare(t.name))),(0,t.useEffect)((()=>{0===l.length&&c(bu().map((e=>e.id)))}),[]),(0,t.useEffect)((()=>{0===u.length&&i.length>0&&d(i.map((e=>e.id)))}),[i]),(0,t.useEffect)((()=>{p(1)}),[o,l,u,n]);const v=n.filter((t=>{if(l.length>0&&!l.includes(t.analysisId))return!1;if(u.length>0&&!u.includes(t.userId))return!1;if(!o)return!0;const n=i.find((e=>e.id===t.userId)),s=t.selectedFileIds.map((t=>{const i=e.find((e=>e.id===t));return(null===i||void 0===i?void 0:i.alias)||(null===i||void 0===i?void 0:i.fileName)||""})).join(" ");return"".concat(t.analysisName," ").concat((null===n||void 0===n?void 0:n.name)||""," ").concat(s," ").concat(t.description||"").toLowerCase().includes(o.toLowerCase())})),y=Math.ceil(v.length/10),x=v.slice(10*(f-1),10*f);return(0,vu.jsxs)("div",{className:"space-y-12",children:[(0,vu.jsxs)("div",{className:"text-center py-6",children:[(0,vu.jsx)("h1",{className:"text-3xl font-light text-text mb-3 tracking-wide",children:"\u8166\u6ce2\u5206\u6790"}),(0,vu.jsx)("p",{className:"text-text-secondary max-w-lg mx-auto",children:"\u9078\u64c7\u5206\u6790\u529f\u80fd\uff0c\u63a2\u7d22\u8166\u6ce2\u6578\u64da\u7684\u5967\u79d8"})]}),(0,vu.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,vu.jsxs)(St,{to:"/files",className:"group flex items-center gap-4 p-5 bg-bg-card rounded-xl border border-border hover:border-text-light transition-all duration-300",children:[(0,vu.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-light flex items-center justify-center text-primary group-hover:bg-bg-active transition-colors",children:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),(0,vu.jsxs)("div",{children:[(0,vu.jsx)("h3",{className:"font-medium text-text",children:"\u4e0a\u50b3\u6a94\u6848"}),(0,vu.jsx)("p",{className:"text-sm text-text-muted",children:"\u7ba1\u7406\u8166\u6ce2\u8cc7\u6599"})]})]}),(0,vu.jsxs)(St,{to:"/users",className:"group flex items-center gap-4 p-5 bg-bg-card rounded-xl border border-border hover:border-text-light transition-all duration-300",children:[(0,vu.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-light flex items-center justify-center text-primary group-hover:bg-bg-active transition-colors",children:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,vu.jsxs)("div",{children:[(0,vu.jsx)("h3",{className:"font-medium text-text",children:"\u4f7f\u7528\u8005"}),(0,vu.jsx)("p",{className:"text-sm text-text-muted",children:"\u7ba1\u7406\u4f7f\u7528\u8005\u8cc7\u6599"})]})]}),(0,vu.jsxs)(St,{to:"/tutorial",className:"group flex items-center gap-4 p-5 bg-bg-card rounded-xl border border-border hover:border-text-light transition-all duration-300",children:[(0,vu.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary-light flex items-center justify-center text-primary group-hover:bg-bg-active transition-colors",children:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),(0,vu.jsxs)("div",{children:[(0,vu.jsx)("h3",{className:"font-medium text-text",children:"\u4f7f\u7528\u6559\u5b78"}),(0,vu.jsx)("p",{className:"text-sm text-text-muted",children:"\u4e86\u89e3\u7cfb\u7d71\u529f\u80fd"})]})]})]}),(0,vu.jsxs)("div",{children:[(0,vu.jsx)("h2",{className:"text-lg font-medium text-text mb-6",children:"\u9078\u64c7\u5206\u6790\u529f\u80fd"}),b.map((e=>(0,vu.jsxs)("div",{className:"mb-10",children:[(0,vu.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,vu.jsx)("span",{className:"text-sm font-medium text-text-muted",children:e.name}),(0,vu.jsx)("div",{className:"flex-1 h-px bg-border"})]}),(0,vu.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:e.plugins.map((e=>(0,vu.jsxs)(St,{to:"/analysis/".concat(e.id),className:"group bg-bg-card rounded-xl border border-border p-5 hover:border-text-light hover:shadow-sm transition-all duration-300",children:[(0,vu.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,vu.jsx)("h4",{className:"font-medium text-text group-hover:text-text-secondary",children:e.name}),(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-text-light group-hover:text-text-muted group-hover:translate-x-0.5 transition-all",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]}),(0,vu.jsx)("p",{className:"text-sm text-text-secondary line-clamp-2 mb-3",children:e.description}),(0,vu.jsxs)("div",{className:"flex items-center gap-1.5 text-xs text-text-muted",children:[(0,vu.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-text-light"}),(0,vu.jsxs)("span",{children:[e.requiredFiles.length," \u500b\u6a94\u6848"]})]})]},e.id)))})]},e.name)))]}),(0,vu.jsxs)("div",{className:"bg-bg-card rounded-xl border border-border",children:[(0,vu.jsxs)("button",{onClick:()=>g(!m),className:"w-full flex items-center justify-between p-5 hover:bg-bg-hover transition-colors rounded-xl",children:[(0,vu.jsxs)("div",{className:"flex items-center gap-3",children:[(0,vu.jsx)("div",{className:"w-9 h-9 rounded-full bg-primary-light flex items-center justify-center text-primary",children:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,vu.jsxs)("div",{className:"text-left",children:[(0,vu.jsx)("h3",{className:"font-medium text-text",children:"\u5206\u6790\u6b77\u53f2"}),(0,vu.jsxs)("p",{className:"text-sm text-text-muted",children:[n.length," \u7b46\u7d00\u9304"]})]})]}),(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-text-light transition-transform duration-300 ".concat(m?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]}),m&&(0,vu.jsxs)("div",{className:"border-t border-border-light",children:[(0,vu.jsx)("div",{className:"p-4 bg-bg-hover/50 border-b border-border-light",children:(0,vu.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[(0,vu.jsx)("div",{className:"flex-1",children:(0,vu.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-bg-card border border-border rounded-lg text-sm focus:outline-none focus:border-text-muted transition-colors placeholder:text-text-light",placeholder:"\u641c\u5c0b...",value:o,onChange:e=>a(e.target.value)})}),(0,vu.jsx)(yu,{options:bu().map((e=>({value:e.id,label:e.name}))),selected:l,onChange:c,placeholder:"\u5206\u6790\u529f\u80fd",title:"\u7be9\u9078\u5206\u6790\u529f\u80fd"}),(0,vu.jsx)(yu,{options:i.map((e=>({value:e.id,label:e.name}))),selected:u,onChange:d,placeholder:"\u4f7f\u7528\u8005",title:"\u7be9\u9078\u4f7f\u7528\u8005"})]})}),0===v.length?(0,vu.jsxs)("div",{className:"p-12 text-center",children:[(0,vu.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary-light flex items-center justify-center mx-auto mb-4",children:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,vu.jsx)("p",{className:"text-text",children:"\u5c1a\u7121\u5206\u6790\u7d00\u9304"}),(0,vu.jsx)("p",{className:"text-sm text-text-muted mt-1",children:"\u9078\u64c7\u4e0a\u65b9\u7684\u5206\u6790\u529f\u80fd\u958b\u59cb"})]}):(0,vu.jsxs)(vu.Fragment,{children:[(0,vu.jsx)("div",{className:"divide-y divide-border-light",children:x.map((t=>{const n=i.find((e=>e.id===t.userId));return(0,vu.jsx)("div",{className:"p-4 hover:bg-bg-hover/30 transition-colors",children:(0,vu.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,vu.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,vu.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,vu.jsx)(St,{to:"/analysis/".concat(t.analysisId),className:"font-medium text-text hover:text-text-secondary transition-colors",children:t.analysisName}),t.status===Lu.Success?(0,vu.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-success-light text-success",children:"\u5b8c\u6210"}):(0,vu.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs bg-error-light text-error",children:"\u5931\u6557"})]}),(0,vu.jsx)("p",{className:"text-sm text-text-secondary mb-2",children:t.description||"\u7121\u63cf\u8ff0"}),(0,vu.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs text-text-muted",children:[(0,vu.jsx)("span",{children:(null===n||void 0===n?void 0:n.name)||"\u672a\u77e5"}),(0,vu.jsx)("span",{children:"\xb7"}),(0,vu.jsx)("span",{children:new Date(t.timestamp).toLocaleString()})]}),(0,vu.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-2",children:t.selectedFileIds.map(((t,i)=>{const n=e.find((e=>e.id===t));return(0,vu.jsx)(St,{to:"/files/".concat(null===n||void 0===n?void 0:n.id),className:"inline-flex items-center px-2 py-1 rounded text-xs bg-bg-hover text-text-secondary hover:bg-bg-active transition-colors",children:(null===n||void 0===n?void 0:n.alias)||(null===n||void 0===n?void 0:n.fileName)||"\u672a\u77e5"},i)}))})]}),(0,vu.jsxs)("div",{className:"flex items-center gap-1",children:[t.status===Lu.Success?(0,vu.jsx)(St,{to:"/analysis/report/".concat(t.id),className:"px-3 py-1.5 text-sm text-white bg-primary rounded-lg hover:bg-primary-hover transition-colors",children:"\u6aa2\u8996"}):(0,vu.jsx)(St,{to:"/analysis/".concat(t.analysisId),className:"px-3 py-1.5 text-sm text-text-secondary bg-bg-hover rounded-lg hover:bg-bg-active transition-colors",children:"\u91cd\u8a66"}),(0,vu.jsx)("button",{onClick:()=>{const e=prompt("\u66f4\u65b0\u63cf\u8ff0",t.description||"");null!==e&&r(t.id,h(h({},t),{},{description:e}))},className:"p-1.5 text-text-muted hover:text-text-secondary hover:bg-bg-hover rounded-lg transition-colors",children:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,vu.jsx)("button",{onClick:()=>s(t.id),className:"p-1.5 text-text-muted hover:text-error hover:bg-error-light rounded-lg transition-colors",children:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},t.id)}))}),y>1&&(0,vu.jsxs)("div",{className:"flex items-center justify-center gap-2 p-4 border-t border-border-light",children:[(0,vu.jsx)("button",{onClick:()=>p((e=>Math.max(1,e-1))),disabled:1===f,className:"px-3 py-1.5 text-sm text-text-secondary bg-bg-hover rounded-lg hover:bg-bg-active disabled:opacity-40 disabled:cursor-not-allowed transition-colors",children:"\u4e0a\u4e00\u9801"}),(0,vu.jsxs)("span",{className:"text-sm text-text-muted px-2",children:[f," / ",y]}),(0,vu.jsx)("button",{onClick:()=>p((e=>Math.min(y,e+1))),disabled:f===y,className:"px-3 py-1.5 text-sm text-text-secondary bg-bg-hover rounded-lg hover:bg-bg-active disabled:opacity-40 disabled:cursor-not-allowed transition-colors",children:"\u4e0b\u4e00\u9801"})]})]})]})]})]})},Iu=e=>{let{requiredFileCount:i,requiredFileLabels:n,selectedFileIds:s,onFileSelect:r,onGroupSelect:o,userId:a}=e;const{files:l,groups:c,addFilesAsGroup:h}=pu(),[u,d]=(0,t.useState)("individual"),[f,p]=(0,t.useState)(!1),[m,g]=(0,t.useState)(""),[b,v]=(0,t.useState)([]),[y,x]=(0,t.useState)(!1),S=c.filter((e=>e.userId===a)),E=()=>{p(!1),g(""),v([])};return(0,vu.jsxs)("div",{className:"space-y-4",children:[(0,vu.jsxs)("div",{className:"flex gap-2",children:[(0,vu.jsx)("button",{type:"button",className:"btn btn-sm ".concat("individual"===u?"btn-primary":"btn-ghost"),onClick:()=>d("individual"),children:"\u500b\u5225\u9078\u64c7"}),(0,vu.jsx)("button",{type:"button",className:"btn btn-sm ".concat("group"===u?"btn-primary":"btn-ghost"),onClick:()=>d("group"),children:"\u7fa4\u7d44\u9078\u64c7"}),(0,vu.jsx)("button",{type:"button",className:"btn btn-sm btn-outline btn-secondary",onClick:()=>p(!0),children:"\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"})]}),"individual"===u?(0,vu.jsx)("div",{className:"space-y-3",children:n.map(((e,t)=>(0,vu.jsxs)("div",{className:"form-control",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:e})}),(0,vu.jsxs)("select",{className:"select select-bordered w-full",value:s[t]||"",onChange:e=>r(t,Number(e.target.value)),children:[(0,vu.jsx)("option",{value:"",children:"\u8acb\u9078\u64c7 ".concat(e)}),l.map((e=>(0,vu.jsxs)("option",{value:e.id,children:[e.alias||e.fileName,e.groupId&&" (\u7fa4\u7d44)"]},e.id)))]})]},t)))}):(0,vu.jsxs)("div",{className:"space-y-3",children:[0===S.length?(0,vu.jsx)("div",{className:"alert alert-info",children:(0,vu.jsx)("span",{children:"\u5c1a\u7121\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\uff0c\u8acb\u9ede\u64ca\u300c\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\u300d\u5efa\u7acb"})}):(0,vu.jsxs)("div",{className:"form-control",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u9078\u64c7\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"})}),(0,vu.jsxs)("select",{className:"select select-bordered w-full",onChange:e=>(e=>{if(c.find((t=>t.id===e))){const t=l.filter((t=>t.groupId===e)).slice(0,i).map((e=>e.id));o(t)}})(e.target.value),defaultValue:"",children:[(0,vu.jsx)("option",{value:"",disabled:!0,children:"\u8acb\u9078\u64c7\u7fa4\u7d44"}),S.map((e=>(0,vu.jsxs)("option",{value:e.id,children:[e.name," (",e.fileIds.length," \u500b\u6a94\u6848)"]},e.id)))]})]}),s.some((e=>null!==e))&&(0,vu.jsxs)("div",{className:"bg-base-200 rounded-lg p-4",children:[(0,vu.jsx)("p",{className:"text-sm font-medium mb-2",children:"\u5df2\u9078\u64c7\u7684\u6a94\u6848\uff1a"}),(0,vu.jsx)("ul",{className:"list-disc list-inside text-sm",children:s.map(((e,t)=>{const i=l.find((t=>t.id===e));return(0,vu.jsxs)("li",{children:[(0,vu.jsxs)("span",{className:"text-base-content/60",children:[n[t],"\uff1a"]})," ",(null===i||void 0===i?void 0:i.alias)||(null===i||void 0===i?void 0:i.fileName)||"\u672a\u9078\u64c7"]},t)}))})]})]}),0===l.length&&"individual"===u&&(0,vu.jsx)("div",{className:"alert alert-warning",children:(0,vu.jsx)("span",{children:"\u5c1a\u672a\u4e0a\u50b3\u4efb\u4f55\u6a94\u6848\uff0c\u8acb\u9ede\u64ca\u300c\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\u300d\u4e0a\u50b3\u6a94\u6848"})}),f&&(0,vu.jsxs)("div",{className:"modal modal-open",children:[(0,vu.jsxs)("div",{className:"modal-box relative",children:[(0,vu.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:E,children:"\u2715"}),(0,vu.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u7fa4\u7d44\u540d\u7a31"})}),(0,vu.jsx)("input",{type:"text",className:"input input-bordered w-full",placeholder:"\u4f8b\uff1a2024/01/01 \u6e2c\u8a66\u8cc7\u6599",value:m,onChange:e=>g(e.target.value)})]}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsxs)("span",{className:"label-text",children:["\u9078\u64c7\u8166\u6ce2\u6a94\u6848\uff08\u9700\u8981 ",i," \u500b\u6a94\u6848\uff09"]})}),(0,vu.jsx)("input",{type:"file",accept:".csv",multiple:!0,className:"file-input file-input-bordered w-full",onChange:e=>{e.target.files&&v(Array.from(e.target.files))}}),(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text-alt",children:"\u50c5\u652f\u63f4 CSV \u683c\u5f0f"})})]}),b.length>0&&(0,vu.jsxs)("div",{className:"bg-base-200 rounded-lg p-3 mb-4",children:[(0,vu.jsxs)("p",{className:"text-sm font-medium mb-2",children:["\u5df2\u9078\u64c7 ",b.length," \u500b\u6a94\u6848\uff1a"]}),(0,vu.jsx)("ul",{className:"list-disc list-inside text-sm",children:b.map(((e,t)=>(0,vu.jsx)("li",{children:e.name},t)))})]}),(0,vu.jsxs)("div",{className:"modal-action",children:[(0,vu.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(0!==b.length)if(m.trim())if(b.length===i){x(!0);try{const e=await h(b,m.trim(),a);o(e.fileIds),p(!1),g(""),v([])}catch(e){const t=e instanceof Error?e.message:"\u4e0a\u50b3\u5931\u6557";alert(t)}finally{x(!1)}}else alert("\u8acb\u9078\u64c7 ".concat(i," \u500b\u6a94\u6848"));else alert("\u8acb\u8f38\u5165\u7fa4\u7d44\u540d\u7a31");else alert("\u8acb\u9078\u64c7\u6a94\u6848")},disabled:y,children:y?(0,vu.jsxs)(vu.Fragment,{children:[(0,vu.jsx)("span",{className:"loading loading-spinner loading-sm"}),"\u4e0a\u50b3\u4e2d..."]}):"\u4e0a\u50b3\u4e26\u5efa\u7acb\u7fa4\u7d44"}),(0,vu.jsx)("button",{className:"btn btn-ghost",onClick:E,children:"\u53d6\u6d88"})]})]}),(0,vu.jsx)("div",{className:"modal-backdrop",onClick:E})]})]})},Ru=()=>{const{id:e}=Se(),i=xe(),{files:n}=pu(),{currentUser:s}=Pu(),{addHistoryRecord:r}=Nu(),[o,a]=(0,t.useState)(null),[l,c]=(0,t.useState)([]),[h,u]=(0,t.useState)({}),[d,f]=(0,t.useState)(""),[p,m]=(0,t.useState)(!1),[g,b]=(0,t.useState)(null);(0,t.useEffect)((()=>{const t=bu().find((t=>t.id===e));if(t)if(a(t),c(Array(t.requiredFiles.length).fill(null)),t.customFields){const e={};t.customFields.forEach((t=>{e[t.fieldName]=t.defaultValue})),u(e)}else u({});else a(null)}),[e]);return o?(0,vu.jsxs)("div",{className:"container mx-auto max-w-3xl",children:[(0,vu.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,vu.jsxs)("ul",{children:[(0,vu.jsx)("li",{children:(0,vu.jsx)(St,{to:"/",children:"\u9996\u9801"})}),o.group&&(0,vu.jsx)("li",{children:o.group}),(0,vu.jsx)("li",{children:o.name})]})}),(0,vu.jsx)("h1",{className:"text-3xl font-bold mb-2",children:o.group?"".concat(o.group," - ").concat(o.name):o.name}),(0,vu.jsx)("p",{className:"text-base-content/70 mb-6",children:o.description}),(0,vu.jsx)("div",{className:"card bg-base-100 shadow-md",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsx)("h2",{className:"card-title mb-4",children:"\u5206\u6790\u8a2d\u5b9a"}),(0,vu.jsxs)("div",{className:"space-y-4",children:[(0,vu.jsx)("h3",{className:"font-semibold",children:"\u9078\u64c7\u6a94\u6848"}),s?(0,vu.jsx)(Iu,{requiredFileCount:o.requiredFiles.length,requiredFileLabels:o.requiredFiles.map((e=>e.verbose_name)),selectedFileIds:l,onFileSelect:(e,t)=>{const i=[...l];i[e]=t,c(i)},onGroupSelect:e=>{c(e)},userId:s.id}):(0,vu.jsx)("div",{className:"alert alert-warning",children:(0,vu.jsxs)("span",{children:["\u8acb\u5148\u9078\u64c7\u4f7f\u7528\u8005\u3002",(0,vu.jsx)(St,{to:"/users",className:"link link-primary ml-1",children:"\u524d\u5f80\u4f7f\u7528\u8005\u7ba1\u7406"})]})})]}),o.editComponent&&(0,vu.jsxs)("div",{className:"mt-6",children:[(0,vu.jsx)("h3",{className:"font-semibold mb-2",children:"\u81ea\u8a02\u53c3\u6578"}),(0,vu.jsx)(o.editComponent,{customParams:h,onChange:u})]}),(0,vu.jsxs)("div",{className:"form-control mt-6",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u5206\u6790\u63cf\u8ff0\uff08\u9078\u586b\uff09"})}),(0,vu.jsx)("textarea",{className:"textarea textarea-bordered",placeholder:"\u8f38\u5165\u6b64\u6b21\u5206\u6790\u7684\u63cf\u8ff0\u6216\u5099\u8a3b",value:d,onChange:e=>f(e.target.value)})]}),g&&(0,vu.jsx)("div",{className:"alert alert-error mt-4",children:(0,vu.jsx)("span",{children:g})}),(0,vu.jsxs)("div",{className:"card-actions justify-end mt-6",children:[(0,vu.jsx)(St,{to:"/",className:"btn btn-ghost",children:"\u53d6\u6d88"}),(0,vu.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(b(null),!o)return void alert("\u627e\u4e0d\u5230\u5206\u6790\u529f\u80fd");if(!s)return void alert("\u8acb\u5148\u9078\u64c7\u4f7f\u7528\u8005");if(l.some((e=>null===e)))return void alert("\u8acb\u9078\u64c7\u6240\u6709\u6a94\u6848\uff1a\u9700\u8981 ".concat(o.requiredFiles.length," \u500b\u6a94\u6848"));const e=[];for(const i of l){const t=n.find((e=>e.id===i));if(!t)return void alert("\u9078\u64c7\u7684\u6a94\u6848\u4e0d\u5b58\u5728\uff0c\u8acb\u91cd\u65b0\u9078\u64c7");e.push(t)}let t=[];e.forEach((e=>{t=t.concat(e.data)})),m(!0);try{const e=await o.execute(t,h),n={id:Date.now(),analysisId:o.id,analysisName:o.name,selectedFileIds:l,result:e,timestamp:(new Date).toISOString(),userId:s.id,status:Lu.Success,customParams:h,description:d};r(n),i("/analysis/report/".concat(n.id))}catch(a){const e=a instanceof Error?a.message:"\u5206\u6790\u5931\u6557";b(e);const t={id:Date.now(),analysisId:o.id,analysisName:o.name,selectedFileIds:l,result:e,timestamp:(new Date).toISOString(),userId:s.id,status:Lu.Failure,customParams:h,description:d};r(t)}finally{m(!1)}},disabled:p||!s,children:p?(0,vu.jsxs)(vu.Fragment,{children:[(0,vu.jsx)("span",{className:"loading loading-spinner loading-sm"}),"\u5206\u6790\u4e2d..."]}):"\u958b\u59cb\u5206\u6790"})]})]})})]}):(0,vu.jsxs)("div",{className:"container mx-auto",children:[(0,vu.jsx)("div",{className:"alert alert-error",children:(0,vu.jsx)("span",{children:"\u627e\u4e0d\u5230\u6b64\u5206\u6790\u529f\u80fd"})}),(0,vu.jsx)(St,{to:"/",className:"btn btn-ghost mt-4",children:"\u8fd4\u56de\u9996\u9801"})]})},Ou=()=>{const{files:e,groups:i,addFiles:n,addFilesAsGroup:s,updateFileAlias:r,deleteFile:o,deleteGroup:a,updateGroup:l,createGroup:c}=pu(),{users:h,currentUser:u}=Pu(),[d,f]=(0,t.useState)([]),[p,m]=(0,t.useState)("files"),[g,b]=(0,t.useState)(!1),[v,y]=(0,t.useState)(null),[x,S]=(0,t.useState)(""),[E,w]=(0,t.useState)(!1),[T,_]=(0,t.useState)(""),[M,P]=(0,t.useState)([]),[C,A]=(0,t.useState)(!1),[N,L]=(0,t.useState)(!1),[k,I]=(0,t.useState)(null),[R,O]=(0,t.useState)(""),[D,B]=(0,t.useState)([]),[F,V]=(0,t.useState)(!1),[j,G]=(0,t.useState)(""),[W,z]=(0,t.useState)([]),U=()=>{b(!1),y(null),S("")},H=()=>{w(!1),_(""),P([])},X=()=>{L(!1),I(null),O(""),B([])},Y=()=>{V(!1),G(""),z([])},[K,q]=(0,t.useState)(!1),[$,Z]=(0,t.useState)(null),[Q,J]=(0,t.useState)(""),ee=()=>{q(!1),Z(null),J("")};return(0,vu.jsxs)("div",{className:"container mx-auto",children:[(0,vu.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,vu.jsxs)("ul",{children:[(0,vu.jsx)("li",{children:(0,vu.jsx)(St,{to:"/",children:"\u9996\u9801"})}),(0,vu.jsx)("li",{children:"\u8166\u6ce2\u6a94\u6848\u7ba1\u7406"})]})}),(0,vu.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\u8166\u6ce2\u6a94\u6848\u7ba1\u7406"}),(0,vu.jsx)("div",{className:"card bg-base-100 shadow-md mb-6",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[(0,vu.jsxs)("div",{children:[(0,vu.jsx)("h2",{className:"card-title",children:"\u4e0a\u50b3\u8166\u6ce2\u6a94\u6848"}),(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u50c5\u652f\u63f4 CSV \u683c\u5f0f\uff0c\u53ef\u540c\u6642\u9078\u64c7\u591a\u500b\u6a94\u6848"})]}),(0,vu.jsx)("button",{className:"btn btn-secondary mt-2 sm:mt-0",onClick:()=>w(!0),disabled:!u,children:"\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"})]}),(0,vu.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[(0,vu.jsxs)("div",{className:"w-full max-w-xs",children:[(0,vu.jsx)("input",{id:"single-file-input",type:"file",accept:".csv",multiple:!0,className:"file-input file-input-bordered w-full",onChange:e=>{e.target.files&&e.target.files.length>0&&f(Array.from(e.target.files))}}),d.length>0&&(0,vu.jsxs)("p",{className:"text-sm text-base-content/60 mt-1",children:["\u5df2\u9078\u64c7 ",d.length," \u500b\u6a94\u6848"]})]}),(0,vu.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(0!==d.length)if(u)try{const e=d.length;await n(d,u.id),f([]);const t=document.querySelector('input[type="file"]#single-file-input');t&&(t.value=""),alert("\u6210\u529f\u4e0a\u50b3 ".concat(e," \u500b\u6a94\u6848"))}catch(e){const t=e instanceof Error?e.message:"\u672a\u77e5\u932f\u8aa4";alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff1a"+t)}else alert("\u8acb\u5148\u8a2d\u5b9a\u4f7f\u7528\u8005");else alert("\u8acb\u9078\u64c7\u6a94\u6848")},disabled:0===d.length||!u,children:"\u4e0a\u50b3\u6a94\u6848"})]}),!u&&(0,vu.jsx)("div",{className:"alert alert-warning mt-4",children:(0,vu.jsxs)("span",{children:["\u8acb\u5148\u9078\u64c7\u4f7f\u7528\u8005\u3002",(0,vu.jsx)(St,{to:"/users",className:"link link-primary ml-1",children:"\u524d\u5f80\u4f7f\u7528\u8005\u7ba1\u7406"})]})})]})}),(0,vu.jsxs)("div",{className:"tabs tabs-boxed mb-4",children:[(0,vu.jsxs)("button",{className:"tab ".concat("files"===p?"tab-active":""),onClick:()=>m("files"),children:["\u6240\u6709\u6a94\u6848 (",e.length,")"]}),(0,vu.jsxs)("button",{className:"tab ".concat("groups"===p?"tab-active":""),onClick:()=>m("groups"),children:["\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44 (",i.length,")"]})]}),"files"===p&&(0,vu.jsxs)(vu.Fragment,{children:[(0,vu.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\u5df2\u4e0a\u50b3\u6a94\u6848"}),0===e.length?(0,vu.jsxs)("div",{className:"text-center py-8 text-base-content/60",children:[(0,vu.jsx)("p",{children:"\u5c1a\u7121\u6a94\u6848\u4e0a\u50b3"}),(0,vu.jsx)("p",{className:"text-sm mt-2",children:"\u8acb\u4f7f\u7528\u4e0a\u65b9\u5340\u584a\u4e0a\u50b3\u6a94\u6848"})]}):(0,vu.jsx)("div",{className:"overflow-x-auto bg-base-100 rounded-lg shadow",children:(0,vu.jsxs)("table",{className:"table w-full",children:[(0,vu.jsx)("thead",{children:(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("th",{children:"\u5225\u540d"}),(0,vu.jsx)("th",{children:"\u539f\u6a94\u540d"}),(0,vu.jsx)("th",{children:"\u7fa4\u7d44"}),(0,vu.jsx)("th",{children:"\u4e0a\u50b3\u6642\u9593"}),(0,vu.jsx)("th",{children:"\u4f7f\u7528\u8005"}),(0,vu.jsx)("th",{children:"\u64cd\u4f5c"})]})}),(0,vu.jsx)("tbody",{children:e.map((e=>{var t;const n=e.groupId?i.find((t=>t.id===e.groupId)):null;return(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("td",{className:"font-medium",children:e.alias}),(0,vu.jsx)("td",{className:"text-base-content/60",children:e.fileName}),(0,vu.jsx)("td",{children:n?(0,vu.jsx)("span",{className:"badge badge-outline badge-sm",children:n.name}):(0,vu.jsx)("span",{className:"text-base-content/40",children:"-"})}),(0,vu.jsx)("td",{children:new Date(e.uploadedAt).toLocaleString()}),(0,vu.jsx)("td",{children:(null===(t=h.find((t=>t.id===e.userId)))||void 0===t?void 0:t.name)||"\u672a\u77e5"}),(0,vu.jsx)("td",{children:(0,vu.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,vu.jsx)("label",{tabIndex:0,className:"btn btn-sm btn-ghost btn-circle",children:(0,vu.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-5 h-5 stroke-current",children:[(0,vu.jsx)("circle",{cx:"12",cy:"5",r:"1.5",fill:"currentColor"}),(0,vu.jsx)("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"}),(0,vu.jsx)("circle",{cx:"12",cy:"19",r:"1.5",fill:"currentColor"})]})}),(0,vu.jsxs)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow-lg bg-base-100 rounded-box w-40 border border-base-200",children:[(0,vu.jsx)("li",{children:(0,vu.jsxs)(St,{to:"/files/".concat(e.id),children:[(0,vu.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.64 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.64 0-8.573-3.007-9.963-7.178Z"}),(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),"\u6aa2\u8996"]})}),(0,vu.jsx)("li",{children:(0,vu.jsxs)("button",{onClick:()=>(e=>{y(e),S(e.alias),b(!0)})(e),children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125"})}),"\u4fee\u6539\u5225\u7a31"]})}),(0,vu.jsx)("li",{children:(0,vu.jsxs)("button",{onClick:()=>(e=>{Z(e),J(e.groupId||""),q(!0)})(e),children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})}),"\u7de8\u8f2f\u7fa4\u7d44"]})}),(0,vu.jsx)("li",{className:"border-t border-base-200 mt-1 pt-1",children:(0,vu.jsxs)("button",{className:"text-error hover:bg-error hover:text-white",onClick:()=>{window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u6a94\u6848\uff1f")&&o(e.id)},children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"\u522a\u9664"]})})]})]})})]},e.id)}))})]})})]}),"groups"===p&&(0,vu.jsxs)(vu.Fragment,{children:[(0,vu.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,vu.jsx)("h2",{className:"text-2xl font-bold",children:"\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"}),(0,vu.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>{G(""),z([]),V(!0)},disabled:!u||0===e.length,children:"\u5efa\u7acb\u65b0\u7fa4\u7d44"})]}),0===i.length?(0,vu.jsxs)("div",{className:"text-center py-8 text-base-content/60",children:[(0,vu.jsx)("p",{children:"\u5c1a\u7121\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"}),(0,vu.jsx)("p",{className:"text-sm mt-2",children:"\u8acb\u9ede\u64ca\u300c\u5efa\u7acb\u65b0\u7fa4\u7d44\u300d\u6216\u300c\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\u300d\u5efa\u7acb\u65b0\u7fa4\u7d44"})]}):(0,vu.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map((t=>{const i=(t=>e.filter((e=>e.groupId===t.id)))(t),n=h.find((e=>e.id===t.userId));return(0,vu.jsx)("div",{className:"card bg-base-100 shadow-md",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsxs)("div",{className:"flex items-start justify-between",children:[(0,vu.jsx)("h3",{className:"card-title text-lg",children:t.name}),(0,vu.jsxs)("span",{className:"badge badge-primary",children:[i.length," \u500b\u6a94\u6848"]})]}),(0,vu.jsxs)("div",{className:"text-sm text-base-content/60 mt-2",children:[(0,vu.jsxs)("p",{children:["\u5efa\u7acb\u6642\u9593\uff1a",new Date(t.createdAt).toLocaleString()]}),(0,vu.jsxs)("p",{children:["\u6240\u5c6c\u4f7f\u7528\u8005\uff1a",(null===n||void 0===n?void 0:n.name)||"\u672a\u77e5"]})]}),(0,vu.jsxs)("div",{className:"mt-3",children:[(0,vu.jsx)("p",{className:"text-sm font-medium mb-1",children:"\u5305\u542b\u6a94\u6848\uff1a"}),(0,vu.jsx)("ul",{className:"list-disc list-inside text-sm text-base-content/70",children:i.map((e=>(0,vu.jsx)("li",{children:e.alias||e.fileName},e.id)))})]}),(0,vu.jsx)("div",{className:"card-actions justify-end mt-4",children:(0,vu.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,vu.jsx)("label",{tabIndex:0,className:"btn btn-sm btn-ghost btn-circle",children:(0,vu.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-5 h-5 stroke-current",children:[(0,vu.jsx)("circle",{cx:"12",cy:"5",r:"1.5",fill:"currentColor"}),(0,vu.jsx)("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"}),(0,vu.jsx)("circle",{cx:"12",cy:"19",r:"1.5",fill:"currentColor"})]})}),(0,vu.jsxs)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow-lg bg-base-100 rounded-box w-40 border border-base-200",children:[(0,vu.jsx)("li",{children:(0,vu.jsxs)("button",{onClick:()=>(e=>{I(e),O(e.name),B(e.fileIds),L(!0)})(t),children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125"})}),"\u7de8\u8f2f\u7fa4\u7d44"]})}),(0,vu.jsx)("li",{className:"border-t border-base-200 mt-1 pt-1",children:(0,vu.jsxs)("button",{className:"text-error hover:bg-error hover:text-white",onClick:()=>{window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7fa4\u7d44\uff1f\uff08\u6a94\u6848\u4e0d\u6703\u88ab\u522a\u9664\uff09")&&a(t.id)},children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"\u522a\u9664\u7fa4\u7d44"]})})]})]})})]})},t.id)}))})]}),g&&(0,vu.jsxs)("div",{className:"modal modal-open",children:[(0,vu.jsxs)("div",{className:"modal-box relative",children:[(0,vu.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:U,children:"\u2715"}),(0,vu.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\u4fee\u6539\u6a94\u6848\u5225\u7a31"}),(0,vu.jsx)("input",{type:"text",value:x,onChange:e=>S(e.target.value),className:"input input-bordered w-full",placeholder:"\u8acb\u8f38\u5165\u65b0\u5225\u7a31"}),(0,vu.jsxs)("div",{className:"modal-action",children:[(0,vu.jsx)("button",{className:"btn btn-primary",onClick:()=>{v&&(r(v.id,x),b(!1),y(null),S(""))},children:"\u5132\u5b58"}),(0,vu.jsx)("button",{className:"btn btn-ghost",onClick:U,children:"\u53d6\u6d88"})]})]}),(0,vu.jsx)("div",{className:"modal-backdrop",onClick:U})]}),E&&(0,vu.jsxs)("div",{className:"modal modal-open",children:[(0,vu.jsxs)("div",{className:"modal-box relative",children:[(0,vu.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:H,children:"\u2715"}),(0,vu.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u7fa4\u7d44\u540d\u7a31"})}),(0,vu.jsx)("input",{type:"text",className:"input input-bordered w-full",placeholder:"\u4f8b\uff1a2024/01/01 \u6e2c\u8a66\u8cc7\u6599",value:T,onChange:e=>_(e.target.value)})]}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u9078\u64c7\u8166\u6ce2\u6a94\u6848\uff08\u53ef\u591a\u9078\uff09"})}),(0,vu.jsx)("input",{type:"file",accept:".csv",multiple:!0,className:"file-input file-input-bordered w-full",onChange:e=>{e.target.files&&P(Array.from(e.target.files))}}),(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text-alt",children:"\u50c5\u652f\u63f4 CSV \u683c\u5f0f"})})]}),M.length>0&&(0,vu.jsxs)("div",{className:"bg-base-200 rounded-lg p-3 mb-4",children:[(0,vu.jsxs)("p",{className:"text-sm font-medium mb-2",children:["\u5df2\u9078\u64c7 ",M.length," \u500b\u6a94\u6848\uff1a"]}),(0,vu.jsx)("ul",{className:"list-disc list-inside text-sm",children:M.map(((e,t)=>(0,vu.jsx)("li",{children:e.name},t)))})]}),(0,vu.jsxs)("div",{className:"modal-action",children:[(0,vu.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(0!==M.length)if(T.trim())if(u){A(!0);try{await s(M,T.trim(),u.id),w(!1),_(""),P([]),alert("\u7fa4\u7d44\u4e0a\u50b3\u6210\u529f")}catch(e){const t=e instanceof Error?e.message:"\u672a\u77e5\u932f\u8aa4";alert("\u7fa4\u7d44\u4e0a\u50b3\u5931\u6557\uff1a"+t)}finally{A(!1)}}else alert("\u8acb\u5148\u8a2d\u5b9a\u4f7f\u7528\u8005");else alert("\u8acb\u8f38\u5165\u7fa4\u7d44\u540d\u7a31");else alert("\u8acb\u9078\u64c7\u6a94\u6848")},disabled:C,children:C?(0,vu.jsxs)(vu.Fragment,{children:[(0,vu.jsx)("span",{className:"loading loading-spinner loading-sm"}),"\u4e0a\u50b3\u4e2d..."]}):"\u4e0a\u50b3\u4e26\u5efa\u7acb\u7fa4\u7d44"}),(0,vu.jsx)("button",{className:"btn btn-ghost",onClick:H,children:"\u53d6\u6d88"})]})]}),(0,vu.jsx)("div",{className:"modal-backdrop",onClick:H})]}),N&&k&&(0,vu.jsxs)("div",{className:"modal modal-open",children:[(0,vu.jsxs)("div",{className:"modal-box relative max-w-2xl",children:[(0,vu.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:X,children:"\u2715"}),(0,vu.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\u7de8\u8f2f\u7fa4\u7d44"}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u7fa4\u7d44\u540d\u7a31"})}),(0,vu.jsx)("input",{type:"text",className:"input input-bordered w-full",value:R,onChange:e=>O(e.target.value)})]}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsxs)("label",{className:"label",children:[(0,vu.jsx)("span",{className:"label-text",children:"\u7fa4\u7d44\u6a94\u6848"}),(0,vu.jsxs)("span",{className:"label-text-alt",children:["\u5df2\u9078 ",D.length," \u500b\u6a94\u6848"]})]}),(0,vu.jsx)("div",{className:"bg-base-200 rounded-lg p-3 max-h-60 overflow-y-auto",children:0===e.length?(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u5c1a\u7121\u6a94\u6848"}):(0,vu.jsx)("div",{className:"space-y-2",children:e.map((e=>{var t;return(0,vu.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-base-300 p-2 rounded",children:[(0,vu.jsx)("input",{type:"checkbox",className:"checkbox checkbox-sm",checked:D.includes(e.id),onChange:()=>{return t=e.id,void B((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}}),(0,vu.jsx)("span",{className:"flex-1",children:e.alias||e.fileName}),e.groupId&&e.groupId!==k.id&&(0,vu.jsx)("span",{className:"badge badge-outline badge-xs",children:null===(t=i.find((t=>t.id===e.groupId)))||void 0===t?void 0:t.name})]},e.id)}))})})]}),(0,vu.jsxs)("div",{className:"modal-action",children:[(0,vu.jsx)("button",{className:"btn btn-primary",onClick:()=>{k&&(l(k.id,{name:R,fileIds:D}),L(!1),I(null),O(""),B([]))},children:"\u5132\u5b58"}),(0,vu.jsx)("button",{className:"btn btn-ghost",onClick:X,children:"\u53d6\u6d88"})]})]}),(0,vu.jsx)("div",{className:"modal-backdrop",onClick:X})]}),F&&(0,vu.jsxs)("div",{className:"modal modal-open",children:[(0,vu.jsxs)("div",{className:"modal-box relative max-w-2xl",children:[(0,vu.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:Y,children:"\u2715"}),(0,vu.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\u5efa\u7acb\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u7fa4\u7d44\u540d\u7a31"})}),(0,vu.jsx)("input",{type:"text",className:"input input-bordered w-full",placeholder:"\u8acb\u8f38\u5165\u7fa4\u7d44\u540d\u7a31",value:j,onChange:e=>G(e.target.value)})]}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsxs)("label",{className:"label",children:[(0,vu.jsx)("span",{className:"label-text",children:"\u9078\u64c7\u6a94\u6848"}),(0,vu.jsxs)("span",{className:"label-text-alt",children:["\u5df2\u9078 ",W.length," \u500b\u6a94\u6848"]})]}),(0,vu.jsx)("div",{className:"bg-base-200 rounded-lg p-3 max-h-60 overflow-y-auto",children:0===e.length?(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u5c1a\u7121\u6a94\u6848\u53ef\u9078\u64c7"}):(0,vu.jsx)("div",{className:"space-y-2",children:e.map((e=>{var t;return(0,vu.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-base-300 p-2 rounded",children:[(0,vu.jsx)("input",{type:"checkbox",className:"checkbox checkbox-sm",checked:W.includes(e.id),onChange:()=>{return t=e.id,void z((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}}),(0,vu.jsx)("span",{className:"flex-1",children:e.alias||e.fileName}),e.groupId&&(0,vu.jsx)("span",{className:"badge badge-outline badge-xs",children:null===(t=i.find((t=>t.id===e.groupId)))||void 0===t?void 0:t.name})]},e.id)}))})}),(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text-alt text-base-content/60",children:"\u6a94\u6848\u53ef\u540c\u6642\u5c6c\u65bc\u591a\u500b\u7fa4\u7d44"})})]}),(0,vu.jsxs)("div",{className:"modal-action",children:[(0,vu.jsx)("button",{className:"btn btn-primary",onClick:()=>{j.trim()?0!==W.length?u?(c(j.trim(),W,u.id),V(!1),G(""),z([]),m("groups")):alert("\u8acb\u5148\u8a2d\u5b9a\u4f7f\u7528\u8005"):alert("\u8acb\u81f3\u5c11\u9078\u64c7\u4e00\u500b\u6a94\u6848"):alert("\u8acb\u8f38\u5165\u7fa4\u7d44\u540d\u7a31")},children:"\u5efa\u7acb\u7fa4\u7d44"}),(0,vu.jsx)("button",{className:"btn btn-ghost",onClick:Y,children:"\u53d6\u6d88"})]})]}),(0,vu.jsx)("div",{className:"modal-backdrop",onClick:Y})]}),K&&$&&(0,vu.jsxs)("div",{className:"modal modal-open",children:[(0,vu.jsxs)("div",{className:"modal-box relative",children:[(0,vu.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:ee,children:"\u2715"}),(0,vu.jsx)("h3",{className:"text-lg font-bold mb-4",children:"\u7de8\u8f2f\u6a94\u6848\u7fa4\u7d44"}),(0,vu.jsxs)("div",{className:"mb-4",children:[(0,vu.jsx)("p",{className:"text-sm text-base-content/60 mb-2",children:"\u6a94\u6848\uff1a"}),(0,vu.jsx)("p",{className:"font-medium",children:$.alias||$.fileName})]}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u6240\u5c6c\u7fa4\u7d44"})}),(0,vu.jsxs)("select",{className:"select select-bordered w-full",value:Q,onChange:e=>J(e.target.value),children:[(0,vu.jsx)("option",{value:"",children:"\u7121\u7fa4\u7d44"}),i.map((e=>(0,vu.jsxs)("option",{value:e.id,children:[e.name," (",e.fileIds.length," \u500b\u6a94\u6848)"]},e.id)))]})]}),(0,vu.jsxs)("div",{className:"modal-action",children:[(0,vu.jsx)("button",{className:"btn btn-primary",onClick:()=>{if($){const e=$.groupId,t=Q||void 0;if(e&&e!==t){const t=i.find((t=>t.id===e));t&&l(e,{fileIds:t.fileIds.filter((e=>e!==$.id))})}if(t&&t!==e){const e=i.find((e=>e.id===t));e&&l(t,{fileIds:[...e.fileIds,$.id]})}q(!1),Z(null),J("")}},children:"\u5132\u5b58"}),(0,vu.jsx)("button",{className:"btn btn-ghost",onClick:ee,children:"\u53d6\u6d88"})]})]}),(0,vu.jsx)("div",{className:"modal-backdrop",onClick:ee})]})]})},Du=()=>{var e;const{id:t}=Se(),{files:i}=pu(),{users:n}=Pu(),s=Number(t),r=i.find((e=>e.id===s));if(!r)return(0,vu.jsxs)("div",{className:"container mx-auto",children:[(0,vu.jsx)("div",{className:"alert alert-error",children:(0,vu.jsx)("span",{children:"\u627e\u4e0d\u5230\u8a72\u6a94\u6848"})}),(0,vu.jsx)(St,{to:"/files",className:"btn btn-ghost mt-4",children:"\u8fd4\u56de\u6a94\u6848\u5217\u8868"})]});const o=n.find((e=>e.id===r.userId));return(0,vu.jsxs)("div",{className:"container mx-auto",children:[(0,vu.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,vu.jsxs)("ul",{children:[(0,vu.jsx)("li",{children:(0,vu.jsx)(St,{to:"/",children:"\u9996\u9801"})}),(0,vu.jsx)("li",{children:(0,vu.jsx)(St,{to:"/files",children:"\u8166\u6ce2\u6a94\u6848\u7ba1\u7406"})}),(0,vu.jsx)("li",{children:r.alias||r.fileName})]})}),(0,vu.jsx)("h1",{className:"text-3xl font-bold mb-6",children:r.alias||r.fileName}),(0,vu.jsx)("div",{className:"card bg-base-100 shadow-md mb-6",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsx)("h2",{className:"card-title",children:"\u6a94\u6848\u8cc7\u8a0a"}),(0,vu.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,vu.jsxs)("div",{children:[(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u539f\u6a94\u540d"}),(0,vu.jsx)("p",{className:"font-medium",children:r.fileName})]}),(0,vu.jsxs)("div",{children:[(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u5225\u540d"}),(0,vu.jsx)("p",{className:"font-medium",children:r.alias})]}),(0,vu.jsxs)("div",{children:[(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u4e0a\u50b3\u6642\u9593"}),(0,vu.jsx)("p",{className:"font-medium",children:new Date(r.uploadedAt).toLocaleString()})]}),(0,vu.jsxs)("div",{children:[(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u6240\u5c6c\u4f7f\u7528\u8005"}),(0,vu.jsx)("p",{className:"font-medium",children:(null===o||void 0===o?void 0:o.name)||r.userId})]})]})]})}),(0,vu.jsx)("div",{className:"card bg-base-100 shadow-md mb-6",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsx)("h2",{className:"card-title",children:"\u6a94\u6848\u5167\u5bb9\u9810\u89bd"}),(0,vu.jsxs)("p",{className:"text-sm text-base-content/60 mb-4",children:["\u5171 ",r.data.length," \u5217\u8cc7\u6599"]}),(0,vu.jsxs)("div",{className:"overflow-x-auto max-h-96 overflow-y-auto bg-base-200 rounded-lg",children:[(0,vu.jsxs)("table",{className:"table table-xs table-pin-rows",children:[(0,vu.jsx)("thead",{children:(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("th",{children:"#"}),null===(e=r.data[0])||void 0===e?void 0:e.map(((e,t)=>(0,vu.jsxs)("th",{children:["\u6b04\u4f4d ",t+1]},t)))]})}),(0,vu.jsx)("tbody",{children:r.data.slice(0,100).map(((e,t)=>(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("td",{className:"text-base-content/60",children:t+1}),e.map(((e,t)=>(0,vu.jsx)("td",{children:String(null!==e&&void 0!==e?e:"")},t)))]},t)))})]}),r.data.length>100&&(0,vu.jsxs)("div",{className:"text-center py-2 text-base-content/60 text-sm",children:["\u50c5\u986f\u793a\u524d 100 \u5217\uff0c\u5171 ",r.data.length," \u5217"]})]})]})}),(0,vu.jsx)("div",{className:"flex gap-2",children:(0,vu.jsx)(St,{to:"/files",className:"btn btn-ghost",children:"\u8fd4\u56de\u6a94\u6848\u5217\u8868"})})]})},Bu=e=>{var t;let{company:i,user:n,test:s,explanation:r,resultContent:o}=e;const a=null!==(t=i.logoUrl)&&void 0!==t?t:"".concat("/demo-site","/hylove-logo.jpg");return(0,vu.jsxs)("div",{className:"card w-full bg-base-100 shadow-xl p-6",children:[(0,vu.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["\u300c",s.testName,"\u300d\u6e2c\u8a66\u7e3d\u7d50\u5831\u544a"]}),(0,vu.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row items-start space-x-4",children:[(0,vu.jsx)("div",{className:"flex-shrink-0 w-20",children:(0,vu.jsx)("img",{src:a,alt:"\u516c\u53f8Logo",className:"w-full object-contain"})}),(0,vu.jsxs)("div",{children:[(0,vu.jsx)("h3",{className:"text-xl font-semibold",children:i.name}),(0,vu.jsx)("p",{className:"mt-1",children:i.address}),(0,vu.jsxs)("p",{children:["\u7d71\u4e00\u7de8\u865f: ",i.id]}),(0,vu.jsxs)("p",{children:["Phone: ",i.phone," | Fax: ",i.fax]})]})]}),(0,vu.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-base-200 p-4 rounded",children:[(0,vu.jsxs)("div",{children:[(0,vu.jsxs)("p",{children:[(0,vu.jsx)("strong",{children:"\u4f7f\u7528\u8005ID\uff1a"})," ",n.id]}),(0,vu.jsxs)("p",{children:[(0,vu.jsx)("strong",{children:"\u59d3\u540d\uff1a"})," ",n.name]}),(0,vu.jsxs)("p",{children:[(0,vu.jsx)("strong",{children:"\u624b\u6a5f\u865f\u78bc\uff1a"})," ",n.phone]})]}),(0,vu.jsxs)("div",{children:[(0,vu.jsxs)("p",{children:[(0,vu.jsx)("strong",{children:"E-Mail\uff1a"})," ",n.email]}),(0,vu.jsxs)("p",{children:[(0,vu.jsx)("strong",{children:"\u6e2c\u8a66\u6642\u9593\uff1a"})," ",s.testTime]}),s.bluetoothSerial&&(0,vu.jsxs)("p",{children:[(0,vu.jsx)("strong",{children:"\u85cd\u7259\u5e8f\u865f\uff1a"})," ",s.bluetoothSerial]}),s.availableBase&&(0,vu.jsxs)("p",{children:[(0,vu.jsx)("strong",{children:"\u53ef\u7528\u57fa\u6578\uff1a"})," ",s.availableBase]})]})]}),o&&(0,vu.jsx)("div",{className:"mt-6",children:o}),r&&(0,vu.jsx)("div",{className:"mt-4",children:(0,vu.jsx)("p",{className:"italic text-sm text-gray-600",children:r})})]})},Fu=()=>{const{reportId:e}=Se(),{history:i}=Nu(),{users:n}=Pu(),[s,r]=(0,t.useState)(null),[o,a]=(0,t.useState)(null);if((0,t.useEffect)((()=>{if(e){const t=Number(e),n=i.find((e=>e.id===t))||null;if(r(n),n){const e=bu().find((e=>e.id===n.analysisId))||null;a(e)}}}),[e,i]),!s)return(0,vu.jsxs)("div",{className:"container mx-auto",children:[(0,vu.jsx)("div",{className:"alert alert-error",children:(0,vu.jsx)("span",{children:"\u627e\u4e0d\u5230\u5831\u544a"})}),(0,vu.jsx)(St,{to:"/",className:"btn btn-ghost mt-4",children:"\u8fd4\u56de\u9996\u9801"})]});const l=n.find((e=>e.id===s.userId)),c={id:(null===l||void 0===l?void 0:l.id)||"unknown",name:(null===l||void 0===l?void 0:l.name)||"\u672a\u77e5\u4f7f\u7528\u8005",phone:(null===l||void 0===l?void 0:l.phone)||"\u672a\u8a2d\u5b9a",email:(null===l||void 0===l?void 0:l.email)||"\u672a\u8a2d\u5b9a"},u={testName:s.analysisName,testTime:new Date(s.timestamp).toLocaleString(),bluetoothSerial:"BT-001",availableBase:"100"},d={name:(null===l||void 0===l?void 0:l.company.name)||"\u672a\u8a2d\u5b9a",address:(null===l||void 0===l?void 0:l.company.address)||"\u672a\u8a2d\u5b9a",id:(null===l||void 0===l?void 0:l.company.id)||"\u672a\u8a2d\u5b9a",phone:(null===l||void 0===l?void 0:l.company.phone)||"\u672a\u8a2d\u5b9a",fax:(null===l||void 0===l?void 0:l.company.fax)||"\u672a\u8a2d\u5b9a"},f=o&&o.renderReport?o.renderReport(s.result,s.customParams||{}):(0,vu.jsx)("p",{children:"\u627e\u4e0d\u5230\u5c0d\u61c9\u7684\u5206\u6790\u914d\u7f6e"}),p={company:d,user:c,test:u,explanation:(null===o||void 0===o?void 0:o.description)||"",resultContent:f};return(0,vu.jsxs)("div",{className:"container mx-auto",children:[(0,vu.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,vu.jsxs)("ul",{children:[(0,vu.jsx)("li",{children:(0,vu.jsx)(St,{to:"/",children:"\u9996\u9801"})}),(0,vu.jsx)("li",{children:(0,vu.jsx)(St,{to:"/analysis/".concat(s.analysisId),children:s.analysisName})}),(0,vu.jsx)("li",{children:"\u5206\u6790\u5831\u544a"})]})}),(0,vu.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[(0,vu.jsxs)("h1",{className:"text-3xl font-bold",children:[s.analysisName," - \u5206\u6790\u5831\u544a"]}),(0,vu.jsxs)("div",{className:"flex gap-2 mt-4 sm:mt-0",children:[(0,vu.jsx)(St,{to:"/",className:"btn btn-ghost",children:"\u8fd4\u56de\u9996\u9801"}),(0,vu.jsx)(St,{to:"/analysis/".concat(s.analysisId),className:"btn btn-primary",children:"\u518d\u6b21\u5206\u6790"})]})]}),(0,vu.jsx)(Bu,h({},p))]})},Vu=e=>{let{initialInfo:i,onSave:n,onCancel:s}=e;const[r,o]=(0,t.useState)(i||{id:"",name:"",phone:"",email:"",role:xu.Basic,company:{name:"",address:"",id:"",phone:"",fax:""}}),a=e=>{const{name:t,value:i}=e.target;if(t.startsWith("company.")){const e=t.split(".")[1];o(h(h({},r),{},{company:h(h({},r.company),{},{[e]:i})}))}else o(h(h({},r),{},"role"===t?{role:i}:{[t]:i}))};return(0,vu.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(h({},r))},className:"space-y-4",children:[(0,vu.jsx)("h2",{className:"text-2xl font-bold mb-4",children:r.id?"\u7de8\u8f2f\u4f7f\u7528\u8005":"\u65b0\u589e\u4f7f\u7528\u8005"}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u8eab\u5206"})}),(0,vu.jsx)("select",{name:"role",value:r.role,onChange:a,className:"select select-bordered",children:Object.values(xu).map((e=>(0,vu.jsx)("option",{value:e,children:e},e)))})]}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u59d3\u540d"})}),(0,vu.jsx)("input",{type:"text",name:"name",value:r.name,onChange:a,placeholder:"\u8acb\u8f38\u5165\u59d3\u540d",className:"input input-bordered",required:!0})]}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u96fb\u8a71"})}),(0,vu.jsx)("input",{type:"text",name:"phone",value:r.phone,onChange:a,placeholder:"\u8acb\u8f38\u5165\u96fb\u8a71",className:"input input-bordered",required:!0})]}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"Email"})}),(0,vu.jsx)("input",{type:"email",name:"email",value:r.email,onChange:a,placeholder:"\u8acb\u8f38\u5165 Email",className:"input input-bordered",required:!0})]}),(0,vu.jsx)("div",{className:"divider",children:"\u516c\u53f8\u8cc7\u8a0a"}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u516c\u53f8\u540d\u7a31"})}),(0,vu.jsx)("input",{type:"text",name:"company.name",value:r.company.name,onChange:a,placeholder:"\u8acb\u8f38\u5165\u516c\u53f8\u540d\u7a31",className:"input input-bordered",required:!0})]}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u5730\u5740"})}),(0,vu.jsx)("input",{type:"text",name:"company.address",value:r.company.address,onChange:a,placeholder:"\u8acb\u8f38\u5165\u516c\u53f8\u5730\u5740",className:"input input-bordered",required:!0})]}),(0,vu.jsxs)("div",{className:"form-control mb-4",children:[(0,vu.jsx)("label",{className:"label",children:(0,vu.jsx)("span",{className:"label-text",children:"\u7d71\u4e00\u7de8\u865f"})}),(0,vu.jsx)("input",{type:"text",name:"company.id",value:r.company.id,onChange:a,placeholder:"\u8acb\u8f38\u5165\u7d71\u4e00\u7de8\u865f",className:"input input-bordered",required:!0})]}),(0,vu.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,vu.jsxs)("div",{className:"form-control",children:[(0,vu.jsxs)("label",{className:"label",children:[(0,vu.jsx)("span",{className:"label-text",children:"\u516c\u53f8\u96fb\u8a71"}),(0,vu.jsx)("span",{className:"label-text-alt text-base-content/50",children:"\u9078\u586b"})]}),(0,vu.jsx)("input",{type:"text",name:"company.phone",value:r.company.phone,onChange:a,placeholder:"\u8acb\u8f38\u5165\u516c\u53f8\u96fb\u8a71",className:"input input-bordered"})]}),(0,vu.jsxs)("div",{className:"form-control",children:[(0,vu.jsxs)("label",{className:"label",children:[(0,vu.jsx)("span",{className:"label-text",children:"\u516c\u53f8\u50b3\u771f"}),(0,vu.jsx)("span",{className:"label-text-alt text-base-content/50",children:"\u9078\u586b"})]}),(0,vu.jsx)("input",{type:"text",name:"company.fax",value:r.company.fax,onChange:a,placeholder:"\u8acb\u8f38\u5165\u516c\u53f8\u50b3\u771f",className:"input input-bordered"})]})]}),(0,vu.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,vu.jsx)("button",{type:"submit",className:"btn btn-primary",children:"\u5132\u5b58"}),(0,vu.jsx)("button",{type:"button",onClick:s,className:"btn btn-secondary",children:"\u53d6\u6d88"})]})]})},ju=()=>{const{users:e,currentUser:i,setCurrentUser:n,addUser:s,updateUser:r,removeUser:o}=Pu(),[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,f]=(0,t.useState)(null),p=e=>{u(e),l(!0)},m=e=>{f(e)},g=()=>{l(!1)};return(0,vu.jsxs)("div",{className:"container mx-auto",children:[(0,vu.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,vu.jsxs)("ul",{children:[(0,vu.jsx)("li",{children:(0,vu.jsx)(St,{to:"/",children:"\u9996\u9801"})}),(0,vu.jsx)("li",{children:"\u4f7f\u7528\u8005\u7ba1\u7406"})]})}),(0,vu.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[(0,vu.jsx)("h1",{className:"text-3xl font-bold",children:"\u4f7f\u7528\u8005\u7ba1\u7406"}),(0,vu.jsx)("button",{className:"btn btn-primary mt-4 sm:mt-0",onClick:()=>{u({id:"",name:"",phone:"",email:"",role:xu.Basic,company:{name:"",address:"",id:"",phone:"",fax:""}}),l(!0)},children:"\u65b0\u589e\u4f7f\u7528\u8005"})]}),i&&(0,vu.jsx)("div",{className:"card bg-base-100 shadow-md mb-6",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsxs)("div",{className:"flex items-center justify-between",children:[(0,vu.jsx)("h2",{className:"card-title",children:"\u76ee\u524d\u4f7f\u7528\u8005"}),(0,vu.jsx)("span",{className:"badge badge-primary",children:i.role})]}),(0,vu.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[(0,vu.jsxs)("div",{children:[(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u59d3\u540d"}),(0,vu.jsx)("p",{className:"font-medium",children:i.name})]}),(0,vu.jsxs)("div",{children:[(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u96fb\u8a71"}),(0,vu.jsx)("p",{className:"font-medium",children:i.phone||"\u672a\u8a2d\u5b9a"})]}),(0,vu.jsxs)("div",{children:[(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"Email"}),(0,vu.jsx)("p",{className:"font-medium",children:i.email||"\u672a\u8a2d\u5b9a"})]}),(0,vu.jsxs)("div",{children:[(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u516c\u53f8"}),(0,vu.jsx)("p",{className:"font-medium",children:i.company.name||"\u672a\u8a2d\u5b9a"})]})]})]})}),(0,vu.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\u6240\u6709\u4f7f\u7528\u8005"}),0===e.length?(0,vu.jsxs)("div",{className:"text-center py-8 text-base-content/60",children:[(0,vu.jsx)("p",{children:"\u5c1a\u7121\u4f7f\u7528\u8005"}),(0,vu.jsx)("p",{className:"text-sm mt-2",children:"\u8acb\u9ede\u64ca\u4e0a\u65b9\u6309\u9215\u65b0\u589e\u4f7f\u7528\u8005"})]}):(0,vu.jsxs)(vu.Fragment,{children:[(0,vu.jsx)("div",{className:"hidden md:block overflow-x-auto bg-base-100 rounded-lg shadow",children:(0,vu.jsxs)("table",{className:"table w-full",children:[(0,vu.jsx)("thead",{children:(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("th",{children:"\u8eab\u5206"}),(0,vu.jsx)("th",{children:"\u59d3\u540d"}),(0,vu.jsx)("th",{children:"\u96fb\u8a71"}),(0,vu.jsx)("th",{children:"Email"}),(0,vu.jsx)("th",{children:"\u516c\u53f8"}),(0,vu.jsx)("th",{children:"\u64cd\u4f5c"})]})}),(0,vu.jsx)("tbody",{children:e.map((e=>(0,vu.jsxs)("tr",{className:(null===i||void 0===i?void 0:i.id)===e.id?"bg-base-200":"",children:[(0,vu.jsx)("td",{children:(0,vu.jsx)("span",{className:"badge badge-outline badge-sm",children:e.role})}),(0,vu.jsx)("td",{className:"font-medium",children:e.name}),(0,vu.jsx)("td",{children:e.phone||"-"}),(0,vu.jsx)("td",{children:e.email||"-"}),(0,vu.jsx)("td",{children:e.company.name||"-"}),(0,vu.jsx)("td",{children:(0,vu.jsxs)("div",{className:"flex space-x-2",children:[(null===i||void 0===i?void 0:i.id)!==e.id&&(0,vu.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>n(e),children:"\u5207\u63db"}),(null===i||void 0===i?void 0:i.id)===e.id&&(0,vu.jsx)("span",{className:"badge badge-success",children:"\u4f7f\u7528\u4e2d"}),(0,vu.jsx)("button",{className:"btn btn-sm btn-ghost",onClick:()=>p(e),children:"\u7de8\u8f2f"}),(0,vu.jsx)("button",{className:"btn btn-sm btn-error btn-outline",onClick:()=>m(e),children:"\u522a\u9664"})]})})]},e.id)))})]})}),(0,vu.jsx)("div",{className:"md:hidden space-y-4",children:e.map((e=>(0,vu.jsx)("div",{className:"card bg-base-100 shadow ".concat((null===i||void 0===i?void 0:i.id)===e.id?"ring-2 ring-primary":""),children:(0,vu.jsxs)("div",{className:"card-body p-4",children:[(0,vu.jsxs)("div",{className:"flex items-center justify-between",children:[(0,vu.jsxs)("div",{className:"flex items-center gap-2",children:[(0,vu.jsx)("h3",{className:"font-bold text-lg",children:e.name}),(0,vu.jsx)("span",{className:"badge badge-outline badge-sm",children:e.role})]}),(null===i||void 0===i?void 0:i.id)===e.id&&(0,vu.jsx)("span",{className:"badge badge-success",children:"\u4f7f\u7528\u4e2d"})]}),(0,vu.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2 text-sm",children:[(0,vu.jsxs)("div",{children:[(0,vu.jsx)("p",{className:"text-base-content/60",children:"\u96fb\u8a71"}),(0,vu.jsx)("p",{children:e.phone||"-"})]}),(0,vu.jsxs)("div",{children:[(0,vu.jsx)("p",{className:"text-base-content/60",children:"\u516c\u53f8"}),(0,vu.jsx)("p",{children:e.company.name||"-"})]})]}),(0,vu.jsxs)("div",{className:"card-actions justify-end mt-3",children:[(null===i||void 0===i?void 0:i.id)!==e.id&&(0,vu.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>n(e),children:"\u5207\u63db"}),(0,vu.jsx)("button",{className:"btn btn-sm btn-ghost",onClick:()=>p(e),children:"\u7de8\u8f2f"}),(0,vu.jsx)("button",{className:"btn btn-sm btn-error btn-outline",onClick:()=>m(e),children:"\u522a\u9664"})]})]})},e.id)))})]}),a&&(0,vu.jsxs)("div",{className:"modal modal-open",children:[(0,vu.jsxs)("div",{className:"modal-box relative max-w-2xl",children:[(0,vu.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:g,children:"\u2715"}),(0,vu.jsx)(Vu,{initialInfo:c||void 0,onSave:e=>{e.id?r(e):s(h(h({},e),{},{id:Date.now().toString()})),l(!1)},onCancel:g})]}),(0,vu.jsx)("div",{className:"modal-backdrop",onClick:g})]}),d&&(0,vu.jsxs)("div",{className:"modal modal-open",children:[(0,vu.jsxs)("div",{className:"modal-box",children:[(0,vu.jsx)("h3",{className:"font-bold text-lg",children:"\u78ba\u8a8d\u522a\u9664"}),(0,vu.jsxs)("p",{className:"py-4",children:["\u78ba\u5b9a\u8981\u522a\u9664\u4f7f\u7528\u8005\u300c",(0,vu.jsx)("span",{className:"font-semibold",children:d.name}),"\u300d\u55ce\uff1f",(0,vu.jsx)("br",{}),(0,vu.jsx)("span",{className:"text-sm text-base-content/60",children:"\u6b64\u64cd\u4f5c\u7121\u6cd5\u5fa9\u539f\u3002"})]}),(0,vu.jsxs)("div",{className:"modal-action",children:[(0,vu.jsx)("button",{className:"btn btn-ghost",onClick:()=>f(null),children:"\u53d6\u6d88"}),(0,vu.jsx)("button",{className:"btn btn-error",onClick:()=>{d&&(o(d.id),f(null))},children:"\u78ba\u8a8d\u522a\u9664"})]})]}),(0,vu.jsx)("div",{className:"modal-backdrop",onClick:()=>f(null)})]})]})},Gu=()=>{const[e,i]=(0,t.useState)("getting-started"),n=[{id:"getting-started",title:"\u958b\u59cb\u4f7f\u7528"},{id:"user-management",title:"\u4f7f\u7528\u8005\u7ba1\u7406"},{id:"file-upload",title:"\u4e0a\u50b3\u8166\u6ce2\u6a94\u6848"},{id:"file-group",title:"\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"},{id:"analysis",title:"\u57f7\u884c\u5206\u6790"},{id:"report",title:"\u67e5\u770b\u5831\u544a"},{id:"faq",title:"\u5e38\u898b\u554f\u984c"}];return(0,vu.jsxs)("div",{className:"container mx-auto",children:[(0,vu.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,vu.jsxs)("ul",{children:[(0,vu.jsx)("li",{children:(0,vu.jsx)(St,{to:"/",children:"\u9996\u9801"})}),(0,vu.jsx)("li",{children:"\u4f7f\u7528\u6559\u5b78"})]})}),(0,vu.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\u4f7f\u7528\u6559\u5b78"}),(0,vu.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,vu.jsxs)("div",{className:"flex-1 order-2 lg:order-1 space-y-8",children:["getting-started"===e&&(0,vu.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u958b\u59cb\u4f7f\u7528"}),(0,vu.jsxs)("div",{className:"space-y-4",children:[(0,vu.jsx)("p",{children:"\u6b61\u8fce\u4f7f\u7528 HyLove \u8166\u6ce2\u5206\u6790\u7cfb\u7d71\uff01\u672c\u7cfb\u7d71\u53ef\u5e6b\u52a9\u60a8\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u6a94\u6848\uff0c \u4e26\u900f\u904e\u591a\u7a2e\u5206\u6790\u529f\u80fd\u7522\u751f\u5c08\u696d\u5831\u544a\u3002"}),(0,vu.jsxs)("div",{className:"alert alert-info",children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,vu.jsx)("span",{children:"\u9996\u6b21\u4f7f\u7528\u6642\uff0c\u7cfb\u7d71\u6703\u81ea\u52d5\u5efa\u7acb\u4e00\u500b\u300c\u9810\u8a2d\u4f7f\u7528\u8005\u300d\u4f9b\u60a8\u4f7f\u7528\u3002"})]}),(0,vu.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u5feb\u901f\u958b\u59cb\u6b65\u9a5f"}),(0,vu.jsxs)("ul",{className:"steps steps-vertical",children:[(0,vu.jsx)("li",{className:"step step-primary",children:(0,vu.jsxs)("div",{className:"text-left ml-4",children:[(0,vu.jsx)("p",{className:"font-medium",children:"\u78ba\u8a8d\u4f7f\u7528\u8005"}),(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u7cfb\u7d71\u53f3\u4e0a\u89d2\u6703\u986f\u793a\u76ee\u524d\u4f7f\u7528\u8005\uff0c\u53ef\u524d\u5f80\u300c\u4f7f\u7528\u8005\u7ba1\u7406\u300d\u65b0\u589e\u6216\u5207\u63db"})]})}),(0,vu.jsx)("li",{className:"step step-primary",children:(0,vu.jsxs)("div",{className:"text-left ml-4",children:[(0,vu.jsx)("p",{className:"font-medium",children:"\u4e0a\u50b3\u8166\u6ce2\u6a94\u6848"}),(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u524d\u5f80\u300c\u8166\u6ce2\u6a94\u6848\u7ba1\u7406\u300d\u4e0a\u50b3 CSV \u683c\u5f0f\u7684\u8166\u6ce2\u8cc7\u6599"})]})}),(0,vu.jsx)("li",{className:"step step-primary",children:(0,vu.jsxs)("div",{className:"text-left ml-4",children:[(0,vu.jsx)("p",{className:"font-medium",children:"\u9078\u64c7\u5206\u6790\u529f\u80fd"}),(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u5f9e\u9996\u9801\u9078\u64c7\u8981\u4f7f\u7528\u7684\u5206\u6790\u529f\u80fd"})]})}),(0,vu.jsx)("li",{className:"step step-primary",children:(0,vu.jsxs)("div",{className:"text-left ml-4",children:[(0,vu.jsx)("p",{className:"font-medium",children:"\u57f7\u884c\u5206\u6790\u4e26\u67e5\u770b\u5831\u544a"}),(0,vu.jsx)("p",{className:"text-sm text-base-content/60",children:"\u9078\u64c7\u524d\u6e2c/\u5f8c\u6e2c\u8cc7\u6599\uff0c\u9ede\u64ca\u300c\u958b\u59cb\u5206\u6790\u300d"})]})})]})]})]})}),"user-management"===e&&(0,vu.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u4f7f\u7528\u8005\u7ba1\u7406"}),(0,vu.jsxs)("div",{className:"space-y-4",children:[(0,vu.jsx)("p",{children:"\u4f7f\u7528\u8005\u7ba1\u7406\u529f\u80fd\u8b93\u60a8\u53ef\u4ee5\u5efa\u7acb\u591a\u500b\u4f7f\u7528\u8005\u5e33\u865f\uff0c\u65b9\u4fbf\u7ba1\u7406\u4e0d\u540c\u5ba2\u6236\u6216\u53d7\u6e2c\u8005\u7684\u8cc7\u6599\u3002"}),(0,vu.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u65b0\u589e\u4f7f\u7528\u8005"}),(0,vu.jsxs)("ol",{className:"list-decimal list-inside space-y-2 ml-4",children:[(0,vu.jsx)("li",{children:"\u9ede\u64ca\u5de6\u5074\u9078\u55ae\u7684\u300c\u4f7f\u7528\u8005\u7ba1\u7406\u300d"}),(0,vu.jsx)("li",{children:"\u9ede\u64ca\u53f3\u4e0a\u89d2\u300c\u65b0\u589e\u4f7f\u7528\u8005\u300d\u6309\u9215"}),(0,vu.jsxs)("li",{children:["\u586b\u5beb\u4f7f\u7528\u8005\u8cc7\u8a0a\uff1a",(0,vu.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-2 text-base-content/70",children:[(0,vu.jsx)("li",{children:"\u59d3\u540d\uff08\u5fc5\u586b\uff09"}),(0,vu.jsx)("li",{children:"\u96fb\u8a71\uff08\u5fc5\u586b\uff09"}),(0,vu.jsx)("li",{children:"Email\uff08\u5fc5\u586b\uff09"}),(0,vu.jsx)("li",{children:"\u516c\u53f8\u8cc7\u8a0a"})]})]}),(0,vu.jsx)("li",{children:"\u9ede\u64ca\u300c\u5132\u5b58\u300d\u5b8c\u6210\u5efa\u7acb"})]}),(0,vu.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u5207\u63db\u4f7f\u7528\u8005"}),(0,vu.jsx)("p",{children:"\u5728\u4f7f\u7528\u8005\u5217\u8868\u4e2d\uff0c\u9ede\u64ca\u300c\u5207\u63db\u300d\u6309\u9215\u5373\u53ef\u5207\u63db\u81f3\u8a72\u4f7f\u7528\u8005\u3002 \u76ee\u524d\u4f7f\u7528\u4e2d\u7684\u4f7f\u7528\u8005\u6703\u4ee5\u7da0\u8272\u6a19\u7c64\u6a19\u793a\u3002"}),(0,vu.jsxs)("div",{className:"alert alert-warning mt-4",children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,vu.jsx)("span",{children:"\u522a\u9664\u4f7f\u7528\u8005\u6642\uff0c\u8a72\u4f7f\u7528\u8005\u7684\u6a94\u6848\u548c\u5206\u6790\u8a18\u9304\u4e0d\u6703\u88ab\u522a\u9664\u3002"})]})]})]})}),"file-upload"===e&&(0,vu.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u4e0a\u50b3\u8166\u6ce2\u6a94\u6848"}),(0,vu.jsxs)("div",{className:"space-y-4",children:[(0,vu.jsx)("h3",{className:"text-lg font-semibold",children:"\u652f\u63f4\u7684\u6a94\u6848\u683c\u5f0f"}),(0,vu.jsx)("div",{className:"flex gap-2",children:(0,vu.jsx)("span",{className:"badge badge-primary badge-lg",children:"CSV"})}),(0,vu.jsx)("p",{className:"text-base-content/70",children:"\u76ee\u524d\u50c5\u652f\u63f4 CSV \u683c\u5f0f\u7684\u8166\u6ce2\u8cc7\u6599\u6a94\u6848\u3002"}),(0,vu.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u4e0a\u50b3\u6b65\u9a5f"}),(0,vu.jsxs)("ol",{className:"list-decimal list-inside space-y-2 ml-4",children:[(0,vu.jsx)("li",{children:"\u9ede\u64ca\u5de6\u5074\u9078\u55ae\u7684\u300c\u8166\u6ce2\u6a94\u6848\u7ba1\u7406\u300d"}),(0,vu.jsx)("li",{children:"\u9ede\u64ca\u300c\u9078\u64c7\u6a94\u6848\u300d\u6309\u9215"}),(0,vu.jsx)("li",{children:"\u53ef\u540c\u6642\u9078\u64c7\u591a\u500b CSV \u6a94\u6848"}),(0,vu.jsx)("li",{children:"\u78ba\u8a8d\u5df2\u9078\u64c7\u7684\u6a94\u6848\u6578\u91cf"}),(0,vu.jsx)("li",{children:"\u9ede\u64ca\u300c\u4e0a\u50b3\u6a94\u6848\u300d\u6309\u9215"})]}),(0,vu.jsxs)("div",{className:"mockup-browser border bg-base-300 mt-6",children:[(0,vu.jsx)("div",{className:"mockup-browser-toolbar",children:(0,vu.jsx)("div",{className:"input",children:"\u8166\u6ce2\u6a94\u6848\u7ba1\u7406"})}),(0,vu.jsxs)("div",{className:"px-4 py-8 bg-base-200 text-center",children:[(0,vu.jsx)("p",{className:"text-base-content/60",children:"\u9078\u64c7 CSV \u6a94\u6848\u5f8c\u9ede\u64ca\u4e0a\u50b3"}),(0,vu.jsx)("p",{className:"text-sm text-base-content/40 mt-2",children:"\u652f\u63f4\u591a\u6a94\u6848\u540c\u6642\u4e0a\u50b3"})]})]}),(0,vu.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u7ba1\u7406\u5df2\u4e0a\u50b3\u6a94\u6848"}),(0,vu.jsxs)("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[(0,vu.jsxs)("li",{children:[(0,vu.jsx)("strong",{children:"\u6aa2\u8996"}),"\uff1a\u67e5\u770b\u6a94\u6848\u5167\u5bb9\u548c\u8a73\u7d30\u8cc7\u8a0a"]}),(0,vu.jsxs)("li",{children:[(0,vu.jsx)("strong",{children:"\u5225\u7a31"}),"\uff1a\u4fee\u6539\u6a94\u6848\u986f\u793a\u540d\u7a31\uff0c\u65b9\u4fbf\u8fa8\u8b58"]}),(0,vu.jsxs)("li",{children:[(0,vu.jsx)("strong",{children:"\u7fa4\u7d44"}),"\uff1a\u5c07\u6a94\u6848\u52a0\u5165\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"]}),(0,vu.jsxs)("li",{children:[(0,vu.jsx)("strong",{children:"\u522a\u9664"}),"\uff1a\u79fb\u9664\u4e0d\u9700\u8981\u7684\u6a94\u6848"]})]})]})]})}),"file-group"===e&&(0,vu.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"}),(0,vu.jsxs)("div",{className:"space-y-4",children:[(0,vu.jsx)("p",{children:"\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\u53ef\u4ee5\u5e6b\u52a9\u60a8\u7d44\u7e54\u76f8\u95dc\u7684\u6a94\u6848\uff0c\u4f8b\u5982\u540c\u4e00\u6b21\u6e2c\u8a66\u7684\u524d\u6e2c\u548c\u5f8c\u6e2c\u8cc7\u6599\u3002 \u5728\u57f7\u884c\u5206\u6790\u6642\uff0c\u53ef\u4ee5\u76f4\u63a5\u9078\u64c7\u7fa4\u7d44\u4f86\u5feb\u901f\u586b\u5165\u6a94\u6848\u3002"}),(0,vu.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u5efa\u7acb\u7fa4\u7d44\u7684\u65b9\u5f0f"}),(0,vu.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 mt-4",children:[(0,vu.jsx)("div",{className:"card bg-base-200",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsx)("h4",{className:"card-title text-base",children:"\u65b9\u5f0f\u4e00\uff1a\u4e0a\u50b3\u6642\u5efa\u7acb"}),(0,vu.jsx)("p",{className:"text-sm",children:"\u9ede\u64ca\u300c\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\u300d\uff0c\u540c\u6642\u4e0a\u50b3\u591a\u500b\u6a94\u6848\u4e26\u547d\u540d\u7fa4\u7d44\u3002"})]})}),(0,vu.jsx)("div",{className:"card bg-base-200",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsx)("h4",{className:"card-title text-base",children:"\u65b9\u5f0f\u4e8c\uff1a\u5f9e\u73fe\u6709\u6a94\u6848\u5efa\u7acb"}),(0,vu.jsx)("p",{className:"text-sm",children:"\u5728\u300c\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\u300d\u5206\u9801\u9ede\u64ca\u300c\u5efa\u7acb\u65b0\u7fa4\u7d44\u300d\uff0c\u9078\u64c7\u8981\u52a0\u5165\u7684\u6a94\u6848\u3002"})]})})]}),(0,vu.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u7fa4\u7d44\u547d\u540d\u5efa\u8b70"}),(0,vu.jsx)("p",{children:"\u5efa\u8b70\u4f7f\u7528\u6e05\u695a\u7684\u547d\u540d\u65b9\u5f0f\uff0c\u4f8b\u5982\uff1a"}),(0,vu.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4 text-base-content/70",children:[(0,vu.jsx)("li",{children:"2024/01/15 \u738b\u5c0f\u660e \u6e2c\u8a66"}),(0,vu.jsx)("li",{children:"A001 \u5f35\u5148\u751f \u521d\u6b21\u6aa2\u6e2c"}),(0,vu.jsx)("li",{children:"\u7814\u7a76\u6848\u4f8b #15"})]})]})]})}),"analysis"===e&&(0,vu.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u57f7\u884c\u5206\u6790"}),(0,vu.jsxs)("div",{className:"space-y-4",children:[(0,vu.jsx)("h3",{className:"text-lg font-semibold",children:"\u53ef\u7528\u7684\u5206\u6790\u529f\u80fd"}),(0,vu.jsx)("p",{children:"\u7cfb\u7d71\u63d0\u4f9b\u591a\u7a2e\u5206\u6790\u529f\u80fd\uff0c\u5305\u62ec\uff1a"}),(0,vu.jsxs)("div",{className:"grid gap-2 md:grid-cols-2 mt-4",children:[(0,vu.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,vu.jsx)("span",{className:"badge badge-primary",children:"\u4e3b\u8981\u529f\u80fd"}),(0,vu.jsx)("span",{children:"\u5143\u795e\u97f3"})]}),(0,vu.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,vu.jsx)("span",{className:"badge badge-primary",children:"\u4e3b\u8981\u529f\u80fd"}),(0,vu.jsx)("span",{children:"\u4ea8\u904b\u4f86"})]}),(0,vu.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,vu.jsx)("span",{className:"badge badge-primary",children:"\u4e3b\u8981\u529f\u80fd"}),(0,vu.jsx)("span",{children:"\u8c9e\u5929\u8ce6"})]}),(0,vu.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,vu.jsx)("span",{className:"badge badge-primary",children:"\u4e3b\u8981\u529f\u80fd"}),(0,vu.jsx)("span",{children:"\u73cd\u5bf6\u7081"})]}),(0,vu.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,vu.jsx)("span",{className:"badge badge-primary",children:"\u4e3b\u8981\u529f\u80fd"}),(0,vu.jsx)("span",{children:"\u60c5\u9999\u610f"})]}),(0,vu.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,vu.jsx)("span",{className:"badge badge-secondary",children:"\u5229\u990a\u7081"}),(0,vu.jsx)("span",{children:"\u6b63\u5ff5\u4fee\u884c"})]}),(0,vu.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,vu.jsx)("span",{className:"badge badge-secondary",children:"\u5229\u990a\u7081"}),(0,vu.jsx)("span",{children:"\u7df4\u7081\u4fee\u884c"})]}),(0,vu.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,vu.jsx)("span",{className:"badge badge-accent",children:"\u8a55\u6bd4\u6e2c\u8a66"}),(0,vu.jsx)("span",{children:"\u5bf5\u7269 / \u98f2\u54c1 / \u9999\u6c34..."})]})]}),(0,vu.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u57f7\u884c\u5206\u6790\u6b65\u9a5f"}),(0,vu.jsxs)("ol",{className:"list-decimal list-inside space-y-2 ml-4",children:[(0,vu.jsx)("li",{children:"\u5f9e\u9996\u9801\u9078\u64c7\u8981\u4f7f\u7528\u7684\u5206\u6790\u529f\u80fd"}),(0,vu.jsxs)("li",{children:["\u9078\u64c7\u6a94\u6848\u9078\u53d6\u65b9\u5f0f\uff1a",(0,vu.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-2 text-base-content/70",children:[(0,vu.jsxs)("li",{children:[(0,vu.jsx)("strong",{children:"\u500b\u5225\u9078\u64c7"}),"\uff1a\u5206\u5225\u9078\u64c7\u524d\u6e2c\u548c\u5f8c\u6e2c\u8cc7\u6599"]}),(0,vu.jsxs)("li",{children:[(0,vu.jsx)("strong",{children:"\u7fa4\u7d44\u9078\u64c7"}),"\uff1a\u5f9e\u5df2\u5efa\u7acb\u7684\u7fa4\u7d44\u4e2d\u9078\u64c7"]})]})]}),(0,vu.jsx)("li",{children:"\u9078\u64c7\u524d\u6e2c\u8cc7\u6599\uff08\u5206\u6790\u524d\u7684\u8166\u6ce2\u6a94\u6848\uff09"}),(0,vu.jsx)("li",{children:"\u9078\u64c7\u5f8c\u6e2c\u8cc7\u6599\uff08\u5206\u6790\u5f8c\u7684\u8166\u6ce2\u6a94\u6848\uff09"}),(0,vu.jsx)("li",{children:"\u586b\u5beb\u5176\u4ed6\u5fc5\u8981\u53c3\u6578\uff08\u5982\u6709\uff09"}),(0,vu.jsx)("li",{children:"\u9ede\u64ca\u300c\u958b\u59cb\u5206\u6790\u300d\u6309\u9215"}),(0,vu.jsx)("li",{children:"\u7b49\u5f85\u5206\u6790\u5b8c\u6210\uff0c\u7cfb\u7d71\u6703\u81ea\u52d5\u8df3\u8f49\u81f3\u5831\u544a\u9801\u9762"})]}),(0,vu.jsxs)("div",{className:"alert alert-info mt-4",children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,vu.jsx)("span",{children:"\u5206\u6790\u904e\u7a0b\u9700\u8981\u9023\u63a5\u5f8c\u7aef API\uff0c\u8acb\u78ba\u4fdd\u7db2\u8def\u9023\u7dda\u6b63\u5e38\u3002"})]})]})]})}),"report"===e&&(0,vu.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u67e5\u770b\u5831\u544a"}),(0,vu.jsxs)("div",{className:"space-y-4",children:[(0,vu.jsx)("p",{children:"\u5206\u6790\u5b8c\u6210\u5f8c\uff0c\u7cfb\u7d71\u6703\u81ea\u52d5\u7522\u751f\u8a73\u7d30\u7684\u5206\u6790\u5831\u544a\u3002 \u5831\u544a\u5167\u5bb9\u6703\u6839\u64da\u4e0d\u540c\u7684\u5206\u6790\u529f\u80fd\u800c\u6709\u6240\u4e0d\u540c\u3002"}),(0,vu.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u5831\u544a\u5167\u5bb9"}),(0,vu.jsx)("p",{children:"\u4e00\u822c\u5831\u544a\u6703\u5305\u542b\u4ee5\u4e0b\u8cc7\u8a0a\uff1a"}),(0,vu.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[(0,vu.jsx)("li",{children:"\u5206\u6790\u6458\u8981"}),(0,vu.jsx)("li",{children:"\u6578\u64da\u5716\u8868"}),(0,vu.jsx)("li",{children:"\u8a73\u7d30\u5206\u6790\u7d50\u679c"}),(0,vu.jsx)("li",{children:"\u5efa\u8b70\u8aaa\u660e"})]}),(0,vu.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u5831\u544a\u64cd\u4f5c"}),(0,vu.jsxs)("div",{className:"flex gap-2 flex-wrap mt-2",children:[(0,vu.jsx)("div",{className:"badge badge-outline gap-2 p-3",children:"\u8fd4\u56de\u9996\u9801"}),(0,vu.jsx)("div",{className:"badge badge-outline gap-2 p-3",children:"\u518d\u6b21\u5206\u6790"})]}),(0,vu.jsxs)("div",{className:"alert mt-4",children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-info shrink-0 w-6 h-6",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,vu.jsx)("span",{children:"\u5831\u544a\u8cc7\u6599\u6703\u5132\u5b58\u5728\u700f\u89bd\u5668\u4e2d\uff0c\u6e05\u9664\u700f\u89bd\u5668\u8cc7\u6599\u6703\u5c0e\u81f4\u5831\u544a\u907a\u5931\u3002"})]})]})]})}),"faq"===e&&(0,vu.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,vu.jsxs)("div",{className:"card-body",children:[(0,vu.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u5e38\u898b\u554f\u984c"}),(0,vu.jsxs)("div",{className:"space-y-4",children:[(0,vu.jsxs)("div",{className:"collapse collapse-plus bg-base-200",children:[(0,vu.jsx)("input",{type:"radio",name:"faq-accordion",defaultChecked:!0}),(0,vu.jsx)("div",{className:"collapse-title font-medium",children:"\u70ba\u4ec0\u9ebc\u6211\u7684\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff1f"}),(0,vu.jsxs)("div",{className:"collapse-content",children:[(0,vu.jsx)("p",{children:"\u8acb\u78ba\u8a8d\uff1a"}),(0,vu.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-2",children:[(0,vu.jsx)("li",{children:"\u6a94\u6848\u683c\u5f0f\u70ba CSV"}),(0,vu.jsx)("li",{children:"\u6a94\u6848\u6c92\u6709\u640d\u58de"}),(0,vu.jsx)("li",{children:"\u5df2\u9078\u64c7\u4f7f\u7528\u8005"})]})]})]}),(0,vu.jsxs)("div",{className:"collapse collapse-plus bg-base-200",children:[(0,vu.jsx)("input",{type:"radio",name:"faq-accordion"}),(0,vu.jsx)("div",{className:"collapse-title font-medium",children:"\u5206\u6790\u7d50\u679c\u986f\u793a\u932f\u8aa4\u600e\u9ebc\u8fa6\uff1f"}),(0,vu.jsxs)("div",{className:"collapse-content",children:[(0,vu.jsx)("p",{children:"\u5982\u679c\u770b\u5230\u300cRequest failed with status code 422\u300d\u4e4b\u985e\u7684\u932f\u8aa4\uff0c \u53ef\u80fd\u662f\u56e0\u70ba\uff1a"}),(0,vu.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-2",children:[(0,vu.jsx)("li",{children:"\u6a94\u6848\u683c\u5f0f\u4e0d\u7b26\u5408\u5206\u6790\u8981\u6c42"}),(0,vu.jsx)("li",{children:"\u5f8c\u7aef API \u670d\u52d9\u66ab\u6642\u7121\u6cd5\u4f7f\u7528"}),(0,vu.jsx)("li",{children:"\u7db2\u8def\u9023\u7dda\u554f\u984c"})]}),(0,vu.jsx)("p",{className:"mt-2",children:"\u8acb\u78ba\u8a8d\u6a94\u6848\u5167\u5bb9\u6b63\u78ba\uff0c\u4e26\u7a0d\u5f8c\u518d\u8a66\u3002"})]})]}),(0,vu.jsxs)("div",{className:"collapse collapse-plus bg-base-200",children:[(0,vu.jsx)("input",{type:"radio",name:"faq-accordion"}),(0,vu.jsx)("div",{className:"collapse-title font-medium",children:"\u8cc7\u6599\u5132\u5b58\u5728\u54ea\u88e1\uff1f"}),(0,vu.jsxs)("div",{className:"collapse-content",children:[(0,vu.jsx)("p",{children:"\u6240\u6709\u8cc7\u6599\u90fd\u5132\u5b58\u5728\u700f\u89bd\u5668\u7684 localStorage \u4e2d\u3002 \u9019\u4ee3\u8868\uff1a"}),(0,vu.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-2",children:[(0,vu.jsx)("li",{children:"\u8cc7\u6599\u53ea\u5b58\u5728\u65bc\u60a8\u76ee\u524d\u4f7f\u7528\u7684\u700f\u89bd\u5668"}),(0,vu.jsx)("li",{children:"\u6e05\u9664\u700f\u89bd\u5668\u8cc7\u6599\u6703\u5c0e\u81f4\u6240\u6709\u8cc7\u6599\u907a\u5931"}),(0,vu.jsx)("li",{children:"\u4e0d\u540c\u88dd\u7f6e\u6216\u700f\u89bd\u5668\u7121\u6cd5\u5171\u4eab\u8cc7\u6599"})]})]})]}),(0,vu.jsxs)("div",{className:"collapse collapse-plus bg-base-200",children:[(0,vu.jsx)("input",{type:"radio",name:"faq-accordion"}),(0,vu.jsx)("div",{className:"collapse-title font-medium",children:"\u5982\u4f55\u5099\u4efd\u6211\u7684\u8cc7\u6599\uff1f"}),(0,vu.jsx)("div",{className:"collapse-content",children:(0,vu.jsx)("p",{children:"\u76ee\u524d\u7cfb\u7d71\u66ab\u4e0d\u652f\u63f4\u532f\u51fa/\u5099\u4efd\u529f\u80fd\u3002 \u5efa\u8b70\u5b9a\u671f\u5c07\u91cd\u8981\u7684\u5206\u6790\u5831\u544a\u622a\u5716\u4fdd\u5b58\u3002"})})]}),(0,vu.jsxs)("div",{className:"collapse collapse-plus bg-base-200",children:[(0,vu.jsx)("input",{type:"radio",name:"faq-accordion"}),(0,vu.jsx)("div",{className:"collapse-title font-medium",children:"\u524d\u6e2c\u548c\u5f8c\u6e2c\u8cc7\u6599\u6709\u4ec0\u9ebc\u5dee\u5225\uff1f"}),(0,vu.jsx)("div",{className:"collapse-content",children:(0,vu.jsx)("p",{children:"\u524d\u6e2c\u8cc7\u6599\u662f\u9032\u884c\u67d0\u9805\u6d3b\u52d5\u300c\u4e4b\u524d\u300d\u6536\u96c6\u7684\u8166\u6ce2\u8cc7\u6599\uff0c \u5f8c\u6e2c\u8cc7\u6599\u662f\u9032\u884c\u8a72\u6d3b\u52d5\u300c\u4e4b\u5f8c\u300d\u6536\u96c6\u7684\u8cc7\u6599\u3002 \u7cfb\u7d71\u6703\u6bd4\u8f03\u5169\u8005\u7684\u5dee\u7570\u4f86\u7522\u751f\u5206\u6790\u7d50\u679c\u3002"})})]})]})]})}),(0,vu.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,vu.jsx)("button",{className:"btn btn-outline",onClick:()=>{const t=n.findIndex((t=>t.id===e));t>0&&i(n[t-1].id)},disabled:e===n[0].id,children:"\u4e0a\u4e00\u7ae0"}),(0,vu.jsx)("button",{className:"btn btn-primary",onClick:()=>{const t=n.findIndex((t=>t.id===e));t<n.length-1&&i(n[t+1].id)},disabled:e===n[n.length-1].id,children:"\u4e0b\u4e00\u7ae0"})]})]}),(0,vu.jsx)("div",{className:"lg:w-64 flex-shrink-0 order-1 lg:order-2",children:(0,vu.jsx)("div",{className:"sticky top-4",children:(0,vu.jsxs)("ul",{className:"menu bg-base-200 rounded-lg w-full",children:[(0,vu.jsx)("li",{className:"menu-title",children:"\u76ee\u9304"}),n.map((t=>(0,vu.jsx)("li",{children:(0,vu.jsx)("a",{className:e===t.id?"active":"",onClick:()=>i(t.id),children:t.title})},t.id)))]})})})]})]})},Wu=e=>{let{children:i}=e;const{currentUser:n,users:s,setCurrentUser:r}=Pu(),o=be(),[a,l]=(0,t.useState)(!1),c=bu().reduce(((e,t)=>{const i=t.group||"\u4e3b\u8981\u529f\u80fd",n=e.find((e=>e.name===i));return n?n.plugins.push(t):e.push({name:i,plugins:[t]}),e}),[]);c.sort(((e,t)=>"\u4e3b\u8981\u529f\u80fd"===e.name?-1:"\u4e3b\u8981\u529f\u80fd"===t.name?1:e.name.localeCompare(t.name)));const h=e=>{const t=e.target.value,i=s.find((e=>e.id===t))||null;r(i)},u=e=>o.pathname===e,d=e=>o.pathname==="/analysis/".concat(e),f=[{path:"/",label:"\u9996\u9801",icon:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{path:"/files",label:"\u6a94\u6848",icon:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})},{path:"/users",label:"\u4f7f\u7528\u8005",icon:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{path:"/tutorial",label:"\u6559\u5b78",icon:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}];return(0,vu.jsxs)("div",{className:"flex h-screen bg-bg",children:[(0,vu.jsxs)("aside",{className:"hidden lg:flex flex-col w-60 bg-bg-sidebar border-r border-border",children:[(0,vu.jsx)("div",{className:"p-5 border-b border-border-light",children:(0,vu.jsxs)(St,{to:"/",className:"flex items-center gap-3",children:[(0,vu.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center",children:(0,vu.jsx)("span",{className:"text-white font-medium text-sm",children:"H"})}),(0,vu.jsx)("span",{className:"text-lg font-medium text-text tracking-wide",children:"Hylove"})]})}),(0,vu.jsx)("div",{className:"px-4 py-3 border-b border-border-light",children:(0,vu.jsx)("select",{className:"w-full bg-bg-hover text-text-secondary text-sm rounded-lg px-3 py-2 border border-border focus:outline-none focus:border-text-muted transition-colors",value:(null===n||void 0===n?void 0:n.id)||"",onChange:h,children:s.map((e=>(0,vu.jsx)("option",{value:e.id,children:e.name},e.id)))})}),(0,vu.jsxs)("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:[(0,vu.jsx)("ul",{className:"space-y-1",children:f.map((e=>(0,vu.jsx)("li",{children:(0,vu.jsxs)(St,{to:e.path,className:"flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm transition-all duration-200 ".concat(u(e.path)?"bg-bg-active text-text font-medium":"text-text-muted hover:text-text hover:bg-bg-hover"),children:[e.icon,(0,vu.jsx)("span",{children:e.label})]})},e.path)))}),(0,vu.jsxs)("div",{className:"mt-8",children:[(0,vu.jsx)("div",{className:"px-3 mb-3",children:(0,vu.jsx)("span",{className:"text-xs font-medium text-text-muted uppercase tracking-wider",children:"\u5206\u6790\u529f\u80fd"})}),c.map((e=>(0,vu.jsxs)("div",{className:"mb-5",children:[(0,vu.jsx)("div",{className:"px-3 mb-2",children:(0,vu.jsx)("span",{className:"text-xs text-text-light",children:e.name})}),(0,vu.jsx)("ul",{className:"space-y-0.5",children:e.plugins.map((e=>(0,vu.jsx)("li",{children:(0,vu.jsxs)(St,{to:"/analysis/".concat(e.id),className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all duration-200 ".concat(d(e.id)?"bg-bg-active text-text font-medium":"text-text-muted hover:text-text hover:bg-bg-hover"),children:[(0,vu.jsx)("span",{className:"w-1.5 h-1.5 rounded-full ".concat(d(e.id)?"bg-primary":"bg-text-light")}),(0,vu.jsx)("span",{className:"truncate",children:e.name})]})},e.id)))})]},e.name)))]})]}),(0,vu.jsx)("div",{className:"p-4 border-t border-border-light",children:(0,vu.jsxs)("div",{className:"text-xs text-text-light text-center",children:["\xa9 ",(new Date).getFullYear()," Hylove"]})})]}),a&&(0,vu.jsxs)("div",{className:"lg:hidden fixed inset-0 z-50 flex",children:[(0,vu.jsx)("div",{className:"fixed inset-0 bg-text/20 backdrop-blur-sm",onClick:()=>l(!1)}),(0,vu.jsxs)("aside",{className:"relative flex flex-col w-72 max-w-[85vw] bg-bg-sidebar shadow-xl",children:[(0,vu.jsxs)("div",{className:"p-5 border-b border-border-light flex items-center justify-between",children:[(0,vu.jsxs)(St,{to:"/",className:"flex items-center gap-3",onClick:()=>l(!1),children:[(0,vu.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center",children:(0,vu.jsx)("span",{className:"text-white font-medium text-sm",children:"H"})}),(0,vu.jsx)("span",{className:"text-lg font-medium text-text tracking-wide",children:"Hylove"})]}),(0,vu.jsx)("button",{onClick:()=>l(!1),className:"p-2 hover:bg-bg-hover rounded-lg transition-colors text-text-muted",children:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,vu.jsx)("div",{className:"px-4 py-3 border-b border-border-light",children:(0,vu.jsx)("select",{className:"w-full bg-bg-hover text-text-secondary text-sm rounded-lg px-3 py-2 border border-border focus:outline-none focus:border-text-muted",value:(null===n||void 0===n?void 0:n.id)||"",onChange:h,children:s.map((e=>(0,vu.jsx)("option",{value:e.id,children:e.name},e.id)))})}),(0,vu.jsxs)("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:[(0,vu.jsx)("ul",{className:"space-y-1",children:f.map((e=>(0,vu.jsx)("li",{children:(0,vu.jsxs)(St,{to:e.path,onClick:()=>l(!1),className:"flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm transition-all ".concat(u(e.path)?"bg-bg-active text-text font-medium":"text-text-muted hover:text-text hover:bg-bg-hover"),children:[e.icon,(0,vu.jsx)("span",{children:e.label})]})},e.path)))}),(0,vu.jsxs)("div",{className:"mt-8",children:[(0,vu.jsx)("div",{className:"px-3 mb-3",children:(0,vu.jsx)("span",{className:"text-xs font-medium text-text-muted uppercase tracking-wider",children:"\u5206\u6790\u529f\u80fd"})}),c.map((e=>(0,vu.jsxs)("div",{className:"mb-5",children:[(0,vu.jsx)("div",{className:"px-3 mb-2",children:(0,vu.jsx)("span",{className:"text-xs text-text-light",children:e.name})}),(0,vu.jsx)("ul",{className:"space-y-0.5",children:e.plugins.map((e=>(0,vu.jsx)("li",{children:(0,vu.jsxs)(St,{to:"/analysis/".concat(e.id),onClick:()=>l(!1),className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all ".concat(d(e.id)?"bg-bg-active text-text font-medium":"text-text-muted hover:text-text hover:bg-bg-hover"),children:[(0,vu.jsx)("span",{className:"w-1.5 h-1.5 rounded-full ".concat(d(e.id)?"bg-primary":"bg-text-light")}),(0,vu.jsx)("span",{className:"truncate",children:e.name})]})},e.id)))})]},e.name)))]})]})]})]}),(0,vu.jsxs)("div",{className:"flex-1 flex flex-col min-h-screen overflow-hidden",children:[(0,vu.jsxs)("header",{className:"lg:hidden flex items-center justify-between px-4 py-3 bg-bg-card border-b border-border",children:[(0,vu.jsx)("button",{onClick:()=>l(!0),className:"p-2 hover:bg-bg-hover rounded-lg transition-colors",children:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-text-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,vu.jsxs)(St,{to:"/",className:"flex items-center gap-2",children:[(0,vu.jsx)("div",{className:"w-7 h-7 rounded-full bg-primary flex items-center justify-center",children:(0,vu.jsx)("span",{className:"text-white font-medium text-xs",children:"H"})}),(0,vu.jsx)("span",{className:"font-medium text-text",children:"Hylove"})]}),(0,vu.jsx)("div",{className:"w-9"})]}),(0,vu.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,vu.jsx)("div",{className:"max-w-5xl mx-auto px-4 py-8 lg:px-8 lg:py-12",children:i})})]})]})},zu=()=>(0,vu.jsx)(Mu,{children:(0,vu.jsx)(yt,{basename:"/demo-site",children:(0,vu.jsx)(Wu,{children:(0,vu.jsxs)(je,{children:[(0,vu.jsx)(Fe,{path:"/",element:(0,vu.jsx)(ku,{})}),(0,vu.jsx)(Fe,{path:"/analysis/:id",element:(0,vu.jsx)(Ru,{})}),(0,vu.jsx)(Fe,{path:"/files",element:(0,vu.jsx)(Ou,{})}),(0,vu.jsx)(Fe,{path:"/files/:id",element:(0,vu.jsx)(Du,{})}),(0,vu.jsx)(Fe,{path:"/analysis/report/:reportId",element:(0,vu.jsx)(Fu,{})}),(0,vu.jsx)(Fe,{path:"/users",element:(0,vu.jsx)(ju,{})}),(0,vu.jsx)(Fe,{path:"/tutorial",element:(0,vu.jsx)(Gu,{})})]})})})});function Uu(e,t){return function(){return e.apply(t,arguments)}}const{toString:Hu}=Object.prototype,{getPrototypeOf:Xu}=Object,{iterator:Yu,toStringTag:Ku}=Symbol,qu=($u=Object.create(null),e=>{const t=Hu.call(e);return $u[t]||($u[t]=t.slice(8,-1).toLowerCase())});var $u;const Zu=e=>(e=e.toLowerCase(),t=>qu(t)===e),Qu=e=>t=>typeof t===e,{isArray:Ju}=Array,ed=Qu("undefined");function td(e){return null!==e&&!ed(e)&&null!==e.constructor&&!ed(e.constructor)&&sd(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const id=Zu("ArrayBuffer");const nd=Qu("string"),sd=Qu("function"),rd=Qu("number"),od=e=>null!==e&&"object"===typeof e,ad=e=>{if("object"!==qu(e))return!1;const t=Xu(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Ku in e)&&!(Yu in e)},ld=Zu("Date"),cd=Zu("File"),hd=Zu("Blob"),ud=Zu("FileList"),dd=Zu("URLSearchParams"),[fd,pd,md,gd]=["ReadableStream","Request","Response","Headers"].map(Zu);function bd(e,t){let i,n,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Ju(e))for(i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else{if(td(e))return;const n=s?Object.getOwnPropertyNames(e):Object.keys(e),r=n.length;let o;for(i=0;i<r;i++)o=n[i],t.call(null,e[o],o,e)}}function vd(e,t){if(td(e))return null;t=t.toLowerCase();const i=Object.keys(e);let n,s=i.length;for(;s-- >0;)if(n=i[s],t===n.toLowerCase())return n;return null}const yd="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,xd=e=>!ed(e)&&e!==yd;const Sd=(Ed="undefined"!==typeof Uint8Array&&Xu(Uint8Array),e=>Ed&&e instanceof Ed);var Ed;const wd=Zu("HTMLFormElement"),Td=(e=>{let{hasOwnProperty:t}=e;return(e,i)=>t.call(e,i)})(Object.prototype),_d=Zu("RegExp"),Md=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};bd(i,((i,s)=>{let r;!1!==(r=t(i,s,e))&&(n[s]=r||i)})),Object.defineProperties(e,n)};const Pd=Zu("AsyncFunction"),Cd=((e,t)=>{return e?setImmediate:t?(i="axios@".concat(Math.random()),n=[],yd.addEventListener("message",(e=>{let{source:t,data:s}=e;t===yd&&s===i&&n.length&&n.shift()()}),!1),e=>{n.push(e),yd.postMessage(i,"*")}):e=>setTimeout(e);var i,n})("function"===typeof setImmediate,sd(yd.postMessage)),Ad="undefined"!==typeof queueMicrotask?queueMicrotask.bind(yd):"undefined"!==typeof process&&process.nextTick||Cd,Nd={isArray:Ju,isArrayBuffer:id,isBuffer:td,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||sd(e.append)&&("formdata"===(t=qu(e))||"object"===t&&sd(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&id(e.buffer),t},isString:nd,isNumber:rd,isBoolean:e=>!0===e||!1===e,isObject:od,isPlainObject:ad,isEmptyObject:e=>{if(!od(e)||td(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Sy){return!1}},isReadableStream:fd,isRequest:pd,isResponse:md,isHeaders:gd,isUndefined:ed,isDate:ld,isFile:cd,isBlob:hd,isRegExp:_d,isFunction:sd,isStream:e=>od(e)&&sd(e.pipe),isURLSearchParams:dd,isTypedArray:Sd,isFileList:ud,forEach:bd,merge:function e(){const{caseless:t,skipUndefined:i}=xd(this)&&this||{},n={},s=(s,r)=>{const o=t&&vd(n,r)||r;ad(n[o])&&ad(s)?n[o]=e(n[o],s):ad(s)?n[o]=e({},s):Ju(s)?n[o]=s.slice():i&&ed(s)||(n[o]=s)};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&bd(arguments[r],s);return n},extend:function(e,t,i){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return bd(t,((t,n)=>{i&&sd(t)?e[n]=Uu(t,i):e[n]=t}),{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,n)=>{let s,r,o;const a={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),r=s.length;r-- >0;)o=s[r],n&&!n(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==i&&Xu(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:qu,kindOfTest:Zu,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return-1!==n&&n===i},toArray:e=>{if(!e)return null;if(Ju(e))return e;let t=e.length;if(!rd(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{const i=(e&&e[Yu]).call(e);let n;for(;(n=i.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let i;const n=[];for(;null!==(i=e.exec(t));)n.push(i);return n},isHTMLForm:wd,hasOwnProperty:Td,hasOwnProp:Td,reduceDescriptors:Md,freezeMethods:e=>{Md(e,((t,i)=>{if(sd(e)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const n=e[i];sd(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))}))},toObjectSet:(e,t)=>{const i={},n=e=>{e.forEach((e=>{i[e]=!0}))};return Ju(e)?n(e):n(String(e).split(t)),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,i){return t.toUpperCase()+i})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:vd,global:yd,isContextDefined:xd,isSpecCompliantForm:function(e){return!!(e&&sd(e.append)&&"FormData"===e[Ku]&&e[Yu])},toJSONObject:e=>{const t=new Array(10),i=(e,n)=>{if(od(e)){if(t.indexOf(e)>=0)return;if(td(e))return e;if(!("toJSON"in e)){t[n]=e;const s=Ju(e)?[]:{};return bd(e,((e,t)=>{const r=i(e,n+1);!ed(r)&&(s[t]=r)})),t[n]=void 0,s}}return e};return i(e,0)},isAsyncFn:Pd,isThenable:e=>e&&(od(e)||sd(e))&&sd(e.then)&&sd(e.catch),setImmediate:Cd,asap:Ad,isIterable:e=>null!=e&&sd(e[Yu])};function Ld(e,t,i,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Nd.inherits(Ld,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Nd.toJSONObject(this.config),code:this.code,status:this.status}}});const kd=Ld.prototype,Id={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Id[e]={value:e}})),Object.defineProperties(Ld,Id),Object.defineProperty(kd,"isAxiosError",{value:!0}),Ld.from=(e,t,i,n,s,r)=>{const o=Object.create(kd);Nd.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e));const a=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return Ld.call(o,a,l,i,n,s),e&&null==o.cause&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",r&&Object.assign(o,r),o};const Rd=Ld;function Od(e){return Nd.isPlainObject(e)||Nd.isArray(e)}function Dd(e){return Nd.endsWith(e,"[]")?e.slice(0,-2):e}function Bd(e,t,i){return e?e.concat(t).map((function(e,t){return e=Dd(e),!i&&t?"["+e+"]":e})).join(i?".":""):t}const Fd=Nd.toFlatObject(Nd,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Vd=function(e,t,i){if(!Nd.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(i=Nd.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Nd.isUndefined(t[e])}))).metaTokens,s=i.visitor||c,r=i.dots,o=i.indexes,a=(i.Blob||"undefined"!==typeof Blob&&Blob)&&Nd.isSpecCompliantForm(t);if(!Nd.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Nd.isDate(e))return e.toISOString();if(Nd.isBoolean(e))return e.toString();if(!a&&Nd.isBlob(e))throw new Rd("Blob is not supported. Use a Buffer instead.");return Nd.isArrayBuffer(e)||Nd.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,i,s){let a=e;if(e&&!s&&"object"===typeof e)if(Nd.endsWith(i,"{}"))i=n?i:i.slice(0,-2),e=JSON.stringify(e);else if(Nd.isArray(e)&&function(e){return Nd.isArray(e)&&!e.some(Od)}(e)||(Nd.isFileList(e)||Nd.endsWith(i,"[]"))&&(a=Nd.toArray(e)))return i=Dd(i),a.forEach((function(e,n){!Nd.isUndefined(e)&&null!==e&&t.append(!0===o?Bd([i],n,r):null===o?i:i+"[]",l(e))})),!1;return!!Od(e)||(t.append(Bd(s,i,r),l(e)),!1)}const h=[],u=Object.assign(Fd,{defaultVisitor:c,convertValue:l,isVisitable:Od});if(!Nd.isObject(e))throw new TypeError("data must be an object");return function e(i,n){if(!Nd.isUndefined(i)){if(-1!==h.indexOf(i))throw Error("Circular reference detected in "+n.join("."));h.push(i),Nd.forEach(i,(function(i,r){!0===(!(Nd.isUndefined(i)||null===i)&&s.call(t,i,Nd.isString(r)?r.trim():r,n,u))&&e(i,n?n.concat(r):[r])})),h.pop()}}(e),t};function jd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Gd(e,t){this._pairs=[],e&&Vd(e,this,t)}const Wd=Gd.prototype;Wd.append=function(e,t){this._pairs.push([e,t])},Wd.toString=function(e){const t=e?function(t){return e.call(this,t,jd)}:jd;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const zd=Gd;function Ud(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Hd(e,t,i){if(!t)return e;const n=i&&i.encode||Ud;Nd.isFunction(i)&&(i={serialize:i});const s=i&&i.serialize;let r;if(r=s?s(t,i):Nd.isURLSearchParams(t)?t.toString():new zd(t,i).toString(n),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const Xd=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Nd.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Yd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kd={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:zd,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},qd="undefined"!==typeof window&&"undefined"!==typeof document,$d="object"===typeof navigator&&navigator||void 0,Zd=qd&&(!$d||["ReactNative","NativeScript","NS"].indexOf($d.product)<0),Qd="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Jd=qd&&window.location.href||"http://localhost",ef=h(h({},e),Kd);const tf=function(e){function t(e,i,n,s){let r=e[s++];if("__proto__"===r)return!0;const o=Number.isFinite(+r),a=s>=e.length;if(r=!r&&Nd.isArray(n)?n.length:r,a)return Nd.hasOwnProp(n,r)?n[r]=[n[r],i]:n[r]=i,!o;n[r]&&Nd.isObject(n[r])||(n[r]=[]);return t(e,i,n[r],s)&&Nd.isArray(n[r])&&(n[r]=function(e){const t={},i=Object.keys(e);let n;const s=i.length;let r;for(n=0;n<s;n++)r=i[n],t[r]=e[r];return t}(n[r])),!o}if(Nd.isFormData(e)&&Nd.isFunction(e.entries)){const i={};return Nd.forEachEntry(e,((e,n)=>{t(function(e){return Nd.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,i,0)})),i}return null};const nf={transitional:Yd,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",n=i.indexOf("application/json")>-1,s=Nd.isObject(e);s&&Nd.isHTMLForm(e)&&(e=new FormData(e));if(Nd.isFormData(e))return n?JSON.stringify(tf(e)):e;if(Nd.isArrayBuffer(e)||Nd.isBuffer(e)||Nd.isStream(e)||Nd.isFile(e)||Nd.isBlob(e)||Nd.isReadableStream(e))return e;if(Nd.isArrayBufferView(e))return e.buffer;if(Nd.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Vd(e,new ef.classes.URLSearchParams,h({visitor:function(e,t,i,n){return ef.isNode&&Nd.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=Nd.isFileList(e))||i.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Vd(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||n?(t.setContentType("application/json",!1),function(e,t,i){if(Nd.isString(e))try{return(t||JSON.parse)(e),Nd.trim(e)}catch(Sy){if("SyntaxError"!==Sy.name)throw Sy}return(i||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||nf.transitional,i=t&&t.forcedJSONParsing,n="json"===this.responseType;if(Nd.isResponse(e)||Nd.isReadableStream(e))return e;if(e&&Nd.isString(e)&&(i&&!this.responseType||n)){const i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(Sy){if(i){if("SyntaxError"===Sy.name)throw Rd.from(Sy,Rd.ERR_BAD_RESPONSE,this,null,this.response);throw Sy}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ef.classes.FormData,Blob:ef.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Nd.forEach(["delete","get","head","post","put","patch"],(e=>{nf.headers[e]={}}));const sf=nf,rf=Nd.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),of=Symbol("internals");function af(e){return e&&String(e).trim().toLowerCase()}function lf(e){return!1===e||null==e?e:Nd.isArray(e)?e.map(lf):String(e)}function cf(e,t,i,n,s){return Nd.isFunction(n)?n.call(this,t,i):(s&&(t=i),Nd.isString(t)?Nd.isString(n)?-1!==t.indexOf(n):Nd.isRegExp(n)?n.test(t):void 0:void 0)}class hf{constructor(e){e&&this.set(e)}set(e,t,i){const n=this;function s(e,t,i){const s=af(t);if(!s)throw new Error("header name must be a non-empty string");const r=Nd.findKey(n,s);(!r||void 0===n[r]||!0===i||void 0===i&&!1!==n[r])&&(n[r||t]=lf(e))}const r=(e,t)=>Nd.forEach(e,((e,i)=>s(e,i,t)));if(Nd.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(Nd.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let i,n,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),i=e.substring(0,s).trim().toLowerCase(),n=e.substring(s+1).trim(),!i||t[i]&&rf[i]||("set-cookie"===i?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+", "+n:n)})),t})(e),t);else if(Nd.isObject(e)&&Nd.isIterable(e)){let i,n,s={};for(const t of e){if(!Nd.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[n=t[0]]=(i=s[n])?Nd.isArray(i)?[...i,t[1]]:[i,t[1]]:t[1]}r(s,t)}else null!=e&&s(t,e,i);return this}get(e,t){if(e=af(e)){const i=Nd.findKey(this,e);if(i){const e=this[i];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}(e);if(Nd.isFunction(t))return t.call(this,e,i);if(Nd.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=af(e)){const i=Nd.findKey(this,e);return!(!i||void 0===this[i]||t&&!cf(0,this[i],i,t))}return!1}delete(e,t){const i=this;let n=!1;function s(e){if(e=af(e)){const s=Nd.findKey(i,e);!s||t&&!cf(0,i[s],s,t)||(delete i[s],n=!0)}}return Nd.isArray(e)?e.forEach(s):s(e),n}clear(e){const t=Object.keys(this);let i=t.length,n=!1;for(;i--;){const s=t[i];e&&!cf(0,this[s],s,e,!0)||(delete this[s],n=!0)}return n}normalize(e){const t=this,i={};return Nd.forEach(this,((n,s)=>{const r=Nd.findKey(i,s);if(r)return t[r]=lf(n),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,i)=>t.toUpperCase()+i))}(s):String(s).trim();o!==s&&delete t[s],t[o]=lf(n),i[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Nd.forEach(this,((i,n)=>{null!=i&&!1!==i&&(t[n]=e&&Nd.isArray(i)?i.join(", "):i)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,i]=e;return t+": "+i})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return n.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[of]=this[of]={accessors:{}}).accessors,i=this.prototype;function n(e){const n=af(e);t[n]||(!function(e,t){const i=Nd.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+i,{value:function(e,i,s){return this[n].call(this,t,e,i,s)},configurable:!0})}))}(i,e),t[n]=!0)}return Nd.isArray(e)?e.forEach(n):n(e),this}}hf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Nd.reduceDescriptors(hf.prototype,((e,t)=>{let{value:i}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(e){this[n]=e}}})),Nd.freezeMethods(hf);const uf=hf;function df(e,t){const i=this||sf,n=t||i,s=uf.from(n.headers);let r=n.data;return Nd.forEach(e,(function(e){r=e.call(i,r,s.normalize(),t?t.status:void 0)})),s.normalize(),r}function ff(e){return!(!e||!e.__CANCEL__)}function pf(e,t,i){Rd.call(this,null==e?"canceled":e,Rd.ERR_CANCELED,t,i),this.name="CanceledError"}Nd.inherits(pf,Rd,{__CANCEL__:!0});const mf=pf;function gf(e,t,i){const n=i.config.validateStatus;i.status&&n&&!n(i.status)?t(new Rd("Request failed with status code "+i.status,[Rd.ERR_BAD_REQUEST,Rd.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}const bf=function(e,t){e=e||10;const i=new Array(e),n=new Array(e);let s,r=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=n[o];s||(s=l),i[r]=a,n[r]=l;let h=o,u=0;for(;h!==r;)u+=i[h++],h%=e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),l-s<t)return;const d=c&&l-c;return d?Math.round(1e3*u/d):void 0}};const vf=function(e,t){let i,n,s=0,r=1e3/t;const o=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=r,i=null,n&&(clearTimeout(n),n=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=r?o(l,e):(i=l,n||(n=setTimeout((()=>{n=null,o(i)}),r-t)))},()=>i&&o(i)]},yf=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const s=bf(50,250);return vf((i=>{const r=i.loaded,o=i.lengthComputable?i.total:void 0,a=r-n,l=s(a);n=r;e({loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&r<=o?(o-r)/l:void 0,event:i,lengthComputable:null!=o,[t?"download":"upload"]:!0})}),i)},xf=(e,t)=>{const i=null!=e;return[n=>t[0]({lengthComputable:i,total:e,loaded:n}),t[1]]},Sf=e=>function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return Nd.asap((()=>e(...i)))},Ef=ef.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,ef.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL(ef.origin),ef.navigator&&/(msie|trident)/i.test(ef.navigator.userAgent)):()=>!0,wf=ef.hasStandardBrowserEnv?{write(e,t,i,n,s,r,o){if("undefined"===typeof document)return;const a=["".concat(e,"=").concat(encodeURIComponent(t))];Nd.isNumber(i)&&a.push("expires=".concat(new Date(i).toUTCString())),Nd.isString(n)&&a.push("path=".concat(n)),Nd.isString(s)&&a.push("domain=".concat(s)),!0===r&&a.push("secure"),Nd.isString(o)&&a.push("SameSite=".concat(o)),document.cookie=a.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Tf(e,t,i){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==i)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const _f=e=>e instanceof uf?h({},e):e;function Mf(e,t){t=t||{};const i={};function n(e,t,i,n){return Nd.isPlainObject(e)&&Nd.isPlainObject(t)?Nd.merge.call({caseless:n},e,t):Nd.isPlainObject(t)?Nd.merge({},t):Nd.isArray(t)?t.slice():t}function s(e,t,i,s){return Nd.isUndefined(t)?Nd.isUndefined(e)?void 0:n(void 0,e,0,s):n(e,t,0,s)}function r(e,t){if(!Nd.isUndefined(t))return n(void 0,t)}function o(e,t){return Nd.isUndefined(t)?Nd.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(i,s,r){return r in t?n(i,s):r in e?n(void 0,i):void 0}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,i)=>s(_f(e),_f(t),0,!0)};return Nd.forEach(Object.keys(h(h({},e),t)),(function(n){const r=l[n]||s,o=r(e[n],t[n],n);Nd.isUndefined(o)&&r!==a||(i[n]=o)})),i}const Pf=e=>{const t=Mf({},e);let{data:i,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:r,headers:o,auth:a}=t;if(t.headers=o=uf.from(o),t.url=Hd(Tf(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),Nd.isFormData(i))if(ef.hasStandardBrowserEnv||ef.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Nd.isFunction(i.getHeaders)){const e=i.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach((e=>{let[i,n]=e;t.includes(i.toLowerCase())&&o.set(i,n)}))}if(ef.hasStandardBrowserEnv&&(n&&Nd.isFunction(n)&&(n=n(t)),n||!1!==n&&Ef(t.url))){const e=s&&r&&wf.read(r);e&&o.set(s,e)}return t},Cf="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,i){const n=Pf(e);let s=n.data;const r=uf.from(n.headers).normalize();let o,a,l,c,h,{responseType:u,onUploadProgress:d,onDownloadProgress:f}=n;function p(){c&&c(),h&&h(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const n=uf.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());gf((function(e){t(e),p()}),(function(e){i(e),p()}),{data:u&&"text"!==u&&"json"!==u?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(i(new Rd("Request aborted",Rd.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){const n=t&&t.message?t.message:"Network Error",s=new Rd(n,Rd.ERR_NETWORK,e,m);s.event=t||null,i(s),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const s=n.transitional||Yd;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),i(new Rd(t,s.clarifyTimeoutError?Rd.ETIMEDOUT:Rd.ECONNABORTED,e,m)),m=null},void 0===s&&r.setContentType(null),"setRequestHeader"in m&&Nd.forEach(r.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Nd.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),u&&"json"!==u&&(m.responseType=n.responseType),f&&([l,h]=yf(f,!0),m.addEventListener("progress",l)),d&&m.upload&&([a,c]=yf(d),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(o=t=>{m&&(i(!t||t.type?new mf(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const b=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);b&&-1===ef.protocols.indexOf(b)?i(new Rd("Unsupported protocol "+b+":",Rd.ERR_BAD_REQUEST,e)):m.send(s||null)}))},Af=(e,t)=>{const{length:i}=e=e?e.filter(Boolean):[];if(t||i){let i,n=new AbortController;const s=function(e){if(!i){i=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof Rd?t:new mf(t instanceof Error?t.message:t))}};let r=t&&setTimeout((()=>{r=null,s(new Rd("timeout ".concat(t," of ms exceeded"),Rd.ETIMEDOUT))}),t);const o=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)})),e=null)};e.forEach((e=>e.addEventListener("abort",s)));const{signal:a}=n;return a.unsubscribe=()=>Nd.asap(o),a}};function Nf(e,t){this.v=e,this.k=t}function Lf(e){return function(){return new kf(e.apply(this,arguments))}}function kf(e){var t,i;function n(t,i){try{var r=e[t](i),o=r.value,a=o instanceof Nf;Promise.resolve(a?o.v:o).then((function(i){if(a){var l="return"===t?"return":"next";if(!o.k||i.done)return n(l,i);i=e[l](i).value}s(r.done?"return":"normal",i)}),(function(e){n("throw",e)}))}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?n(t.key,t.arg):i=null}this._invoke=function(e,s){return new Promise((function(r,o){var a={key:e,arg:s,resolve:r,reject:o,next:null};i?i=i.next=a:(t=i=a,n(e,s))}))},"function"!=typeof e.return&&(this.return=void 0)}function If(e){return new Nf(e,0)}function Rf(e){var t={},i=!1;function n(t,n){return i=!0,n=new Promise((function(i){i(e[t](n))})),{done:!1,value:new Nf(n,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return i?(i=!1,e):n("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(i)throw i=!1,e;return n("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return i?(i=!1,e):n("return",e)}),t}function Of(e){var t,i,n,s=2;for("undefined"!=typeof Symbol&&(i=Symbol.asyncIterator,n=Symbol.iterator);s--;){if(i&&null!=(t=e[i]))return t.call(e);if(n&&null!=(t=e[n]))return new Df(t.call(e));i="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function Df(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Df=function(e){this.s=e,this.n=e.next},Df.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var i=this.s.return;return void 0===i?Promise.resolve({value:e,done:!0}):t(i.apply(this.s,arguments))},throw:function(e){var i=this.s.return;return void 0===i?Promise.reject(e):t(i.apply(this.s,arguments))}},new Df(e)}kf.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},kf.prototype.next=function(e){return this._invoke("next",e)},kf.prototype.throw=function(e){return this._invoke("throw",e)},kf.prototype.return=function(e){return this._invoke("return",e)};const Bf=function*(e,t){let i=e.byteLength;if(!t||i<t)return void(yield e);let n,s=0;for(;s<i;)n=s+t,yield e.slice(s,n),s=n},Ff=function(){var e=Lf((function*(e,t){var i,n=!1,s=!1;try{for(var r,o=Of(Vf(e));n=!(r=yield If(o.next())).done;n=!1){const e=r.value;yield*Rf(Of(Bf(e,t)))}}catch(a){s=!0,i=a}finally{try{n&&null!=o.return&&(yield If(o.return()))}finally{if(s)throw i}}}));return function(t,i){return e.apply(this,arguments)}}(),Vf=function(){var e=Lf((function*(e){if(e[Symbol.asyncIterator])return void(yield*Rf(Of(e)));const t=e.getReader();try{for(;;){const{done:e,value:i}=yield If(t.read());if(e)break;yield i}}finally{yield If(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),jf=(e,t,i,n)=>{const s=Ff(e,t);let r,o=0,a=e=>{r||(r=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await s.next();if(t)return a(),void e.close();let r=n.byteLength;if(i){let e=o+=r;i(e)}e.enqueue(new Uint8Array(n))}catch(t){throw a(t),t}},cancel:e=>(a(e),s.return())},{highWaterMark:2})},{isFunction:Gf}=Nd,Wf=(e=>{let{Request:t,Response:i}=e;return{Request:t,Response:i}})(Nd.global),{ReadableStream:zf,TextEncoder:Uf}=Nd.global,Hf=function(e){try{for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return!!e(...i)}catch(Sy){return!1}},Xf=e=>{e=Nd.merge.call({skipUndefined:!0},Wf,e);const{fetch:t,Request:i,Response:n}=e,s=t?Gf(t):"function"===typeof fetch,r=Gf(i),o=Gf(n);if(!s)return!1;const a=s&&Gf(zf),l=s&&("function"===typeof Uf?(c=new Uf,e=>c.encode(e)):async e=>new Uint8Array(await new i(e).arrayBuffer()));var c;const u=r&&a&&Hf((()=>{let e=!1;const t=new i(ef.origin,{body:new zf,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),d=o&&a&&Hf((()=>Nd.isReadableStream(new n("").body))),f={stream:d&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!f[e]&&(f[e]=(t,i)=>{let n=t&&t[e];if(n)return n.call(t);throw new Rd("Response type '".concat(e,"' is not supported"),Rd.ERR_NOT_SUPPORT,i)})}));const p=async(e,t)=>{const n=Nd.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Nd.isBlob(e))return e.size;if(Nd.isSpecCompliantForm(e)){const t=new i(ef.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Nd.isArrayBufferView(e)||Nd.isArrayBuffer(e)?e.byteLength:(Nd.isURLSearchParams(e)&&(e+=""),Nd.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:s,method:o,data:a,signal:l,cancelToken:c,timeout:m,onDownloadProgress:g,onUploadProgress:b,responseType:v,headers:y,withCredentials:x="same-origin",fetchOptions:S}=Pf(e),E=t||fetch;v=v?(v+"").toLowerCase():"text";let w=Af([l,c&&c.toAbortSignal()],m),T=null;const _=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let M;try{if(b&&u&&"get"!==o&&"head"!==o&&0!==(M=await p(y,a))){let e,t=new i(s,{method:"POST",body:a,duplex:"half"});if(Nd.isFormData(a)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,i]=xf(M,yf(Sf(b)));a=jf(t.body,65536,e,i)}}Nd.isString(x)||(x=x?"include":"omit");const t=r&&"credentials"in i.prototype,l=h(h({},S),{},{signal:w,method:o.toUpperCase(),headers:y.normalize().toJSON(),body:a,duplex:"half",credentials:t?x:void 0});T=r&&new i(s,l);let c=await(r?E(T,S):E(s,l));const m=d&&("stream"===v||"response"===v);if(d&&(g||m&&_)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=c[t]}));const t=Nd.toFiniteNumber(c.headers.get("content-length")),[i,s]=g&&xf(t,yf(Sf(g),!0))||[];c=new n(jf(c.body,65536,i,(()=>{s&&s(),_&&_()})),e)}v=v||"text";let P=await f[Nd.findKey(f,v)||"text"](c,e);return!m&&_&&_(),await new Promise(((t,i)=>{gf(t,i,{data:P,headers:uf.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:T})}))}catch(P){if(_&&_(),P&&"TypeError"===P.name&&/Load failed|fetch/i.test(P.message))throw Object.assign(new Rd("Network Error",Rd.ERR_NETWORK,e,T),{cause:P.cause||P});throw Rd.from(P,P&&P.code,e,T)}}},Yf=new Map,Kf=e=>{let t=e&&e.env||{};const{fetch:i,Request:n,Response:s}=t,r=[n,s,i];let o,a,l=r.length,c=Yf;for(;l--;)o=r[l],a=c.get(o),void 0===a&&c.set(o,a=l?new Map:Xf(t)),c=a;return a},qf=(Kf(),{http:null,xhr:Cf,fetch:{get:Kf}});Nd.forEach(qf,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Sy){}Object.defineProperty(e,"adapterName",{value:t})}}));const $f=e=>"- ".concat(e),Zf=e=>Nd.isFunction(e)||null===e||!1===e;const Qf={getAdapter:function(e,t){e=Nd.isArray(e)?e:[e];const{length:i}=e;let n,s;const r={};for(let o=0;o<i;o++){let i;if(n=e[o],s=n,!Zf(n)&&(s=qf[(i=String(n)).toLowerCase()],void 0===s))throw new Rd("Unknown adapter '".concat(i,"'"));if(s&&(Nd.isFunction(s)||(s=s.get(t))))break;r[i||"#"+o]=s}if(!s){const e=Object.entries(r).map((e=>{let[t,i]=e;return"adapter ".concat(t," ")+(!1===i?"is not supported by the environment":"is not available in the build")}));let t=i?e.length>1?"since :\n"+e.map($f).join("\n"):" "+$f(e[0]):"as no adapter specified";throw new Rd("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s},adapters:qf};function Jf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new mf(null,e)}function ep(e){Jf(e),e.headers=uf.from(e.headers),e.data=df.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Qf.getAdapter(e.adapter||sf.adapter,e)(e).then((function(t){return Jf(e),t.data=df.call(e,e.transformResponse,t),t.headers=uf.from(t.headers),t}),(function(t){return ff(t)||(Jf(e),t&&t.response&&(t.response.data=df.call(e,e.transformResponse,t.response),t.response.headers=uf.from(t.response.headers))),Promise.reject(t)}))}const tp="1.13.2",ip={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{ip[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));const np={};ip.transitional=function(e,t,i){function n(e,t){return"[Axios v"+tp+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return(i,s,r)=>{if(!1===e)throw new Rd(n(s," has been removed"+(t?" in "+t:"")),Rd.ERR_DEPRECATED);return t&&!np[s]&&(np[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,s,r)}},ip.spelling=function(e){return(t,i)=>(console.warn("".concat(i," is likely a misspelling of ").concat(e)),!0)};const sp={assertOptions:function(e,t,i){if("object"!==typeof e)throw new Rd("options must be an object",Rd.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const r=n[s],o=t[r];if(o){const t=e[r],i=void 0===t||o(t,r,e);if(!0!==i)throw new Rd("option "+r+" must be "+i,Rd.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new Rd("Unknown option "+r,Rd.ERR_BAD_OPTION)}},validators:ip},rp=sp.validators;class op{constructor(e){this.defaults=e||{},this.interceptors={request:new Xd,response:new Xd}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{i.stack?t&&!String(i.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(i.stack+="\n"+t):i.stack=t}catch(Sy){}}throw i}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Mf(this.defaults,t);const{transitional:i,paramsSerializer:n,headers:s}=t;void 0!==i&&sp.assertOptions(i,{silentJSONParsing:rp.transitional(rp.boolean),forcedJSONParsing:rp.transitional(rp.boolean),clarifyTimeoutError:rp.transitional(rp.boolean)},!1),null!=n&&(Nd.isFunction(n)?t.paramsSerializer={serialize:n}:sp.assertOptions(n,{encode:rp.function,serialize:rp.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),sp.assertOptions(t,{baseUrl:rp.spelling("baseURL"),withXsrfToken:rp.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=s&&Nd.merge(s.common,s[t.method]);s&&Nd.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=uf.concat(r,s);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let h,u=0;if(!a){const e=[ep.bind(this),void 0];for(e.unshift(...o),e.push(...l),h=e.length,c=Promise.resolve(t);u<h;)c=c.then(e[u++],e[u++]);return c}h=o.length;let d=t;for(;u<h;){const e=o[u++],t=o[u++];try{d=e(d)}catch(f){t.call(this,f);break}}try{c=ep.call(this,d)}catch(f){return Promise.reject(f)}for(u=0,h=l.length;u<h;)c=c.then(l[u++],l[u++]);return c}getUri(e){return Hd(Tf((e=Mf(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Nd.forEach(["delete","get","head","options"],(function(e){op.prototype[e]=function(t,i){return this.request(Mf(i||{},{method:e,url:t,data:(i||{}).data}))}})),Nd.forEach(["post","put","patch"],(function(e){function t(t){return function(i,n,s){return this.request(Mf(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:n}))}}op.prototype[e]=t(),op.prototype[e+"Form"]=t(!0)}));const ap=op;class lp{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const i=this;this.promise.then((e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e,n,s){i.reason||(i.reason=new mf(e,n,s),t(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new lp((function(t){e=t})),cancel:e}}}const cp=lp;const hp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(hp).forEach((e=>{let[t,i]=e;hp[i]=t}));const up=hp;const dp=function e(t){const i=new ap(t),n=Uu(ap.prototype.request,i);return Nd.extend(n,ap.prototype,i,{allOwnKeys:!0}),Nd.extend(n,i,null,{allOwnKeys:!0}),n.create=function(i){return e(Mf(t,i))},n}(sf);dp.Axios=ap,dp.CanceledError=mf,dp.CancelToken=cp,dp.isCancel=ff,dp.VERSION=tp,dp.toFormData=Vd,dp.AxiosError=Rd,dp.Cancel=dp.CanceledError,dp.all=function(e){return Promise.all(e)},dp.spread=function(e){return function(t){return e.apply(null,t)}},dp.isAxiosError=function(e){return Nd.isObject(e)&&!0===e.isAxiosError},dp.mergeConfig=Mf,dp.AxiosHeaders=uf,dp.formToJSON=e=>tf(Nd.isHTMLForm(e)?new FormData(e):e),dp.getAdapter=Qf.getAdapter,dp.HttpStatusCode=up,dp.default=dp;const fp=dp;async function pp(e,t){const i="".concat("https://hylove-demo.good-nas.cc").concat(e);return(await fp.post(i,t,{headers:{"Content-Type":"application/json"}})).data}var mp,gp=i(613);class bp{constructor(){this.steps=[]}[Symbol.iterator](){return this.steps.values()}createStep(e){let t=this.steps.find((t=>t.tick===e));return t||(t={tick:e,notes:[]},this.steps.push(t)),t}addNote(e,t){var i;(null!==(i=this.steps.find((t=>t.tick===e)))&&void 0!==i?i:this.createStep(e)).notes.push(t)}delete(e){const t=this.steps.findIndex((t=>t.tick===e.tick));null!=t&&this.steps.splice(t,1)}sort(){return this.steps.sort(((e,t)=>e.tick-t.tick)),this}getFirstEmptyTick(){return this.sort().steps.filter((e=>!e.notes.length))[0].tick}}class vp{constructor(e,t,i){this.stepQueue=new bp,this.stepQueueIndex=0,this.scheduledTicks=new Set,this.currentTick=0,this.currentTickTimestamp=0,this.audioContextStartTime=0,this.schedulerIntervalHandle=null,this.scheduleInterval=200,this.schedulePeriod=500,this.tickDenominator=1024,this.lastTickOffset=300,this.playing=!1,this.noteSchedulingCallback=i,this.wholeNoteLength=e,this.audioContext=t}get schedulePeriodTicks(){return this.schedulePeriod/this.tickDuration}get audioContextTime(){return this.audioContext?1e3*(this.audioContext.currentTime-this.audioContextStartTime):0}get tickDuration(){return this.wholeNoteLength/this.tickDenominator}get calculatedTick(){return this.currentTick+Math.round((this.audioContextTime-this.currentTickTimestamp)/this.tickDuration)}start(){this.playing=!0,this.stepQueue.sort(),this.audioContextStartTime=this.audioContext.currentTime,this.currentTickTimestamp=this.audioContextTime,this.schedulerIntervalHandle||(this.schedulerIntervalHandle=window.setInterval((()=>this.scheduleIterationStep()),this.scheduleInterval))}setIterationStep(e){e=Math.min(this.stepQueue.steps.length-1,e),this.stepQueueIndex=e,this.currentTick=this.stepQueue.steps[this.stepQueueIndex].tick}pause(){this.playing=!1}resume(){this.playing=!0,this.currentTickTimestamp=this.audioContextTime}reset(){this.playing=!1,this.currentTick=0,this.currentTickTimestamp=0,this.stepQueueIndex=0,clearInterval(this.scheduleInterval),this.schedulerIntervalHandle=null}loadNotes(e){let t=this.lastTickOffset;this.stepQueue.steps.length>0&&(t=this.stepQueue.getFirstEmptyTick());for(let i of e)if(!i.IsGrace)for(let e of i.Notes)this.stepQueue.addNote(t,e),this.stepQueue.createStep(t+e.Length.RealValue*this.tickDenominator)}scheduleIterationStep(){var e,t;if(!this.playing)return;this.currentTick=this.calculatedTick,this.currentTickTimestamp=this.audioContextTime;let i=null===(e=this.stepQueue.steps[this.stepQueueIndex])||void 0===e?void 0:e.tick;for(;this.nextTickAvailableAndWithinSchedulePeriod(i);){let e=this.stepQueue.steps[this.stepQueueIndex],n=(e.tick-this.currentTick)*this.tickDuration;n<0&&(n=0),this.scheduledTicks.add(e.tick),this.noteSchedulingCallback(n/1e3,e.notes),this.stepQueueIndex++,i=null===(t=this.stepQueue.steps[this.stepQueueIndex])||void 0===t?void 0:t.tick}for(let n of this.scheduledTicks)n<=this.currentTick&&this.scheduledTicks.delete(n)}nextTickAvailableAndWithinSchedulePeriod(e){return e&&this.currentTickTimestamp+(e-this.currentTick)*this.tickDuration<=this.currentTickTimestamp+this.schedulePeriod}}!function(e){e[e.None=0]="None",e[e.Staccato=1]="Staccato",e[e.Legato=2]="Legato"}(mp||(mp={}));const yp=[[0,"Acoustic Grand Piano"],[1,"Bright Acoustic Piano"],[2,"Electric Grand Piano"],[3,"Honky-tonk Piano"],[4,"Electric Piano 1"],[5,"Electric Piano 2"],[6,"Harpsichord"],[7,"Clavi"],[8,"Celesta"],[9,"Glockenspiel"],[10,"Music Box"],[11,"Vibraphone"],[12,"Marimba"],[13,"Xylophone"],[14,"Tubular Bells"],[15,"Dulcimer"],[16,"Drawbar Organ"],[17,"Percussive Organ"],[18,"Rock Organ"],[19,"Church Organ"],[20,"Reed Organ"],[21,"Accordion"],[22,"Harmonica"],[23,"Tango Accordion"],[24,"Acoustic Guitar (nylon)"],[25,"Acoustic Guitar (steel)"],[26,"Electric Guitar (jazz)"],[27,"Electric Guitar (clean)"],[28,"Electric Guitar (muted)"],[29,"Overdriven Guitar"],[30,"Distortion Guitar"],[31,"Guitar harmonics"],[32,"Acoustic Bass"],[33,"Electric Bass (finger)"],[34,"Electric Bass (pick)"],[35,"Fretless Bass"],[36,"Slap Bass 1"],[37,"Slap Bass 2"],[38,"Synth Bass 1"],[39,"Synth Bass 2"],[40,"Violin"],[41,"Viola"],[42,"Cello"],[43,"Contrabass"],[44,"Tremolo Strings"],[45,"Pizzicato Strings"],[46,"Orchestral Harp"],[47,"Timpani"],[48,"String Ensemble 1"],[49,"String Ensemble 2"],[50,"SynthStrings 1"],[51,"SynthStrings 2"],[52,"Choir Aahs"],[53,"Voice Oohs"],[54,"Synth Choir"],[55,"Orchestra Hit"],[56,"Trumpet"],[57,"Trombone"],[58,"Tuba"],[59,"Muted Trumpet"],[60,"French Horn"],[61,"Brass Section"],[62,"SynthBrass 1"],[63,"SynthBrass 2"],[64,"Soprano Sax"],[65,"Alto Sax"],[66,"Tenor Sax"],[67,"Baritone Sax"],[68,"Oboe"],[69,"English Horn"],[70,"Bassoon"],[71,"Clarinet"],[72,"Piccolo"],[73,"Flute"],[74,"Recorder"],[75,"Pan Flute"],[76,"Blown Bottle"],[77,"Shakuhachi"],[78,"Whistle"],[79,"Ocarina"],[80,"Lead 1 (square)"],[81,"Lead 2 (sawtooth)"],[82,"Lead 3 (calliope)"],[83,"Lead 4 (chiff)"],[84,"Lead 5 (charang)"],[85,"Lead 6 (voice)"],[86,"Lead 7 (fifths)"],[87,"Lead 8 (bass + lead)"],[88,"Pad 1 (new age)"],[89,"Pad 2 (warm)"],[90,"Pad 3 (polysynth)"],[91,"Pad 4 (choir)"],[92,"Pad 5 (bowed)"],[93,"Pad 6 (metallic)"],[94,"Pad 7 (halo)"],[95,"Pad 8 (sweep)"],[96,"FX 1 (rain)"],[97,"FX 2 (soundtrack)"],[98,"FX 3 (crystal)"],[99,"FX 4 (atmosphere)"],[100,"FX 5 (brightness)"],[101,"FX 6 (goblins)"],[102,"FX 7 (echoes)"],[103,"FX 8 (sci-fi)"],[104,"Sitar"],[105,"Banjo"],[106,"Shamisen"],[107,"Koto"],[108,"Kalimba"],[109,"Bag pipe"],[110,"Fiddle"],[111,"Shanai"],[112,"Tinkle Bell"],[113,"Agogo"],[114,"Steel Drums"],[115,"Woodblock"],[116,"Taiko Drum"],[117,"Melodic Tom"],[118,"Synth Drum"],[119,"Reverse Cymbal"],[120,"Guitar Fret Noise"],[121,"Breath Noise"],[122,"Seashore"],[123,"Bird Tweet"],[124,"Telephone Ring"],[125,"Helicopter"],[126,"Applause"],[127,"Gunshot"]],xp=["accordion","acoustic_bass","acoustic_grand_piano","acoustic_guitar_nylon","acoustic_guitar_steel","agogo","alto_sax","applause","bagpipe","banjo","baritone_sax","bassoon","bird_tweet","blown_bottle","brass_section","breath_noise","bright_acoustic_piano","celesta","cello","choir_aahs","church_organ","clarinet","clavinet","contrabass","distortion_guitar","drawbar_organ","dulcimer","electric_bass_finger","electric_bass_pick","electric_grand_piano","electric_guitar_clean","electric_guitar_jazz","electric_guitar_muted","electric_piano_1","electric_piano_2","english_horn","fiddle","flute","french_horn","fretless_bass","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","glockenspiel","guitar_fret_noise","guitar_harmonics","gunshot","harmonica","harpsichord","helicopter","honkytonk_piano","kalimba","koto","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass__lead","marimba","melodic_tom","music_box","muted_trumpet","oboe","ocarina","orchestra_hit","orchestral_harp","overdriven_guitar","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","pan_flute","percussive_organ","piccolo","pizzicato_strings","recorder","reed_organ","reverse_cymbal","rock_organ","seashore","shakuhachi","shamisen","shanai","sitar","slap_bass_1","slap_bass_2","soprano_sax","steel_drums","string_ensemble_1","string_ensemble_2","synth_bass_1","synth_bass_2","synth_brass_1","synth_brass_2","synth_choir","synth_drum","synth_strings_1","synth_strings_2","taiko_drum","tango_accordion","telephone_ring","tenor_sax","timpani","tinkle_bell","tremolo_strings","trombone","trumpet","tuba","tubular_bells","vibraphone","viola","violin","voice_oohs","whistle","woodblock","xylophone"];var Sp=i(200),Ep=function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(Sy){r(Sy)}}function a(e){try{l(n.throw(e))}catch(Sy){r(Sy)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};class wp{constructor(){this.players=new Map,this.instruments=yp.filter((e=>xp.includes(this.getSoundfontInstrumentName(e[1])))).map((e=>({midiId:e[0],name:e[1],loaded:!1})))}init(e){this.audioContext=e}load(e){return Ep(this,void 0,void 0,(function*(){const t=this.instruments.find((t=>t.midiId===e));if(!t)throw new Error("SoundfontPlayer does not support midi instrument ID "+e);if(this.players.has(e))return;const i=yield Sp.instrument(this.audioContext,this.getSoundfontInstrumentName(t.name));this.players.set(e,i)}))}stop(e){this.players.has(e)&&this.players.get(e).stop()}schedule(e,t,i){this.verifyPlayerLoaded(e),this.applyDynamics(i),this.players.get(e).schedule(t,i)}applyDynamics(e){for(const t of e)t.articulation===mp.Staccato&&(t.gain=Math.max(t.gain+.3,1.3*t.gain),t.duration=Math.min(.4*t.duration,.4))}verifyPlayerLoaded(e){if(!this.players.has(e))throw new Error("No soundfont player loaded for midi instrument "+e)}getSoundfontInstrumentName(e){return e.toLowerCase().replace(/\s+/g,"_")}}function Tp(e){return e.ParentVoiceEntry.isStaccato()?mp.Staccato:mp.None}function _p(e,t){let i=e.Length.RealValue*t;return e.NoteTie&&(Object.is(e.NoteTie.StartNote,e)&&e.NoteTie.Notes[1]?i+=e.NoteTie.Notes[1].Length.RealValue*t:i=0),i}function Mp(e){return e.ParentVoiceEntry.ParentVoice.Volume}class Pp{constructor(){this.subscribers=new Map}on(e,t){this.subscribers.get(e)||this.subscribers.set(e,[]),this.subscribers.get(e).push(t)}emit(e){const t=this.subscribers.get(e)||[];for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];for(const r of t)r(...n)}}var Cp=i(998);const Ap=new WeakSet,Np=new WeakMap,Lp=new WeakMap,kp=new WeakMap,Ip=new WeakMap,Rp=new WeakMap,Op=new WeakMap,Dp=new WeakMap,Bp=new WeakMap,Fp=new WeakMap,Vp=new WeakMap,jp={construct:()=>jp},Gp=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Wp=(e,t)=>{const i=[];let n=e.replace(/^[\s]+/,""),s=n.match(Gp);for(;null!==s;){const e=s[1].slice(1,-1),r=s[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());i.push(r),n=n.slice(s[0].length).replace(/^[\s]+/,""),s=n.match(Gp)}return[i.join(";"),n]},zp=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Up=e=>{if(!(e=>{try{new new Proxy(e,jp)}catch(t){return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!==typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},Hp={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Xp=(e,t)=>e.context===t,Yp=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch(t){return!1}return!0},Kp=()=>{try{return new DOMException("","IndexSizeError")}catch(e){return e.code=1,e.name="IndexSizeError",e}},qp=e=>{var t;e.getChannelData=(t=e.getChannelData,i=>{try{return t.call(e,i)}catch(n){if(12===n.code)throw Kp();throw n}})},$p={numberOfChannels:1},Zp=-34028234663852886e22,Qp=-Zp,Jp=(e,t)=>{const i=e.get(t);if(void 0===i)throw new Error("A value with the given key could not be found.");return i},em=e=>Jp(Dp,e),tm=e=>{if(Ap.has(e))throw new Error("The AudioNode is already stored.");Ap.add(e),em(e).forEach((e=>e(!0)))},im=e=>{if(!Ap.has(e))throw new Error("The AudioNode is not stored.");Ap.delete(e),em(e).forEach((e=>e(!1)))},nm={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},sm=e=>void 0===e||"number"===typeof e||"string"===typeof e&&("balanced"===e||"interactive"===e||"playback"===e),rm=e=>"context"in e,om=e=>rm(e[0]),am=e=>"port"in e,lm=e=>"inputs"in e,cm=(e,t,i,n)=>{if(lm(t)){const s=t.inputs[n];return e.connect(s,i,0),[s,i,0]}return e.connect(t,i,n),[t,i,n]},hm=(e,t)=>{if(!em(e).delete(t))throw new Error("Missing the expected event listener.")},um=(e,t,i,n)=>{lm(t)?e.disconnect(t.inputs[n],i,0):e.disconnect(t,i,n)},dm=e=>Jp(Np,e),fm=e=>Jp(kp,e),pm=e=>Jp(Lp,e),mm=e=>Jp(Ip,e),gm=(e,t,i,n)=>{for(const s of e)if(i(s)){if(n)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},bm=e=>Ap.has(e),vm=e=>Bp.has(e),ym=e=>!Ap.has(e),xm=(e,t)=>{const i=Array.from(e).filter(t);if(i.length>1)throw Error("More than one element was found.");if(0===i.length)throw Error("No element was found.");const[n]=i;return e.delete(n),n},Sm=(e,t)=>{!am(e)&&t.every((e=>0===e.size))&&im(e)},Em=e=>new Promise((t=>{const i=e.createScriptProcessor(256,1,1),n=e.createGain(),s=e.createBuffer(1,2,44100),r=s.getChannelData(0);r[0]=1,r[1]=1;const o=e.createBufferSource();o.buffer=s,o.loop=!0,o.connect(i).connect(e.destination),o.connect(n),o.disconnect(n),i.onaudioprocess=n=>{const s=n.inputBuffer.getChannelData(0);Array.prototype.some.call(s,(e=>1===e))?t(!0):t(!1),o.stop(),i.onaudioprocess=null,o.disconnect(i),i.disconnect(e.destination)},o.start()})),wm=(e,t)=>{const i=new Map;for(const n of e)for(const e of n){const t=i.get(e);i.set(e,void 0===t?1:t+1)}i.forEach(((e,i)=>t(i,e)))},Tm=e=>"context"in e,_m=e=>{const t=new Map;var i,n;e.connect=(i=e.connect.bind(e),function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Tm(e)?i(e,n,s):i(e,n),o=t.get(e);return void 0===o?t.set(e,[{input:s,output:n}]):o.every((e=>e.input!==s||e.output!==n))&&o.push({input:s,output:n}),r}),e.disconnect=(n=e.disconnect,(i,s,r)=>{if(n.apply(e),void 0===i)t.clear();else if("number"===typeof i)for(const[e,n]of t){const s=n.filter((e=>e.output!==i));0===s.length?t.delete(e):t.set(e,s)}else if(t.has(i))if(void 0===s)t.delete(i);else{const e=t.get(i);if(void 0!==e){const n=e.filter((e=>e.output!==s&&(e.input!==r||void 0===r)));0===n.length?t.delete(i):t.set(i,n)}}for(const[n,o]of t)o.forEach((t=>{Tm(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)}))})},Mm=(e,t,i,n)=>{let[s,r,o]=i;gm(e[r],[t,s,o],(e=>e[0]===t&&e[1]===s),n)},Pm=(e,t,i,n)=>{let[s,r]=i;gm(e,[t,s,r],(e=>e[0]===t&&e[1]===s),n)},Cm=(e,t,i,n)=>{let[s,r,o]=i;const a=e.get(s);void 0===a?e.set(s,new Set([[r,t,o]])):gm(a,[r,t,o],(e=>e[0]===r&&e[1]===t),n)},Am=(e,t,i)=>{let[n,s,r]=t;const o=e.get(n);void 0===o?e.set(n,new Set([[s,r]])):gm(o,[s,r],(e=>e[0]===s),i)},Nm=(e,t,i,n)=>{const s=Jp(e,t),r=xm(s,(e=>e[0]===i&&e[1]===n));return 0===s.size&&e.delete(t),r},Lm=(e,t,i)=>{const n=Jp(e,t),s=xm(n,(e=>e[0]===i));return 0===n.size&&e.delete(t),s},km=(e,t,i,n)=>{const{activeInputs:s,passiveInputs:r}=dm(t),{outputs:o}=dm(e),a=em(e),l=o=>{const a=pm(t),l=pm(e);if(o){const o=Nm(r,e,i,n);Mm(s,e,o,!1),vm(e)||cm(l,a,i,n),ym(t)&&tm(t)}else{const o=((e,t,i,n)=>xm(e[n],(e=>e[0]===t&&e[1]===i)))(s,e,i,n);Cm(r,n,o,!1),vm(e)||um(l,a,i,n),bm(t)&&Sm(t,s)}};return!!gm(o,[t,i,n],(e=>e[0]===t&&e[1]===i&&e[2]===n),!0)&&(a.add(l),bm(e)?Mm(s,e,[i,n,l],!0):Cm(r,n,[e,i,l],!0),!0)},Im=(e,t,i)=>{const{activeInputs:n,passiveInputs:s}=fm(t),{outputs:r}=dm(e),o=em(e),a=r=>{const o=pm(e),a=mm(t);if(r){const t=Lm(s,e,i);Pm(n,e,t,!1),vm(e)||o.connect(a,i)}else{const t=((e,t,i)=>xm(e,(e=>e[0]===t&&e[1]===i)))(n,e,i);Am(s,t,!1),vm(e)||o.disconnect(a,i)}};return!!gm(r,[t,i],(e=>e[0]===t&&e[1]===i),!0)&&(o.add(a),bm(e)?Pm(n,e,[i,a],!0):Am(s,[e,i,a],!0),!0)},Rm=(e,t,i)=>{for(const n of e)if(n[0]===t&&n[1]===i)return e.delete(n),n;return null},Om=(e,t,i,n)=>{const[s,r]=((e,t,i,n)=>{const{activeInputs:s,passiveInputs:r}=dm(t),o=Rm(s[n],e,i);if(null===o)return[Nm(r,e,i,n)[2],!1];return[o[2],!0]})(e,t,i,n);if(null!==s&&(hm(e,s),r&&!vm(e)&&um(pm(e),pm(t),i,n)),bm(t)){const{activeInputs:e}=dm(t);Sm(t,e)}},Dm=(e,t,i)=>{const[n,s]=((e,t,i)=>{const{activeInputs:n,passiveInputs:s}=fm(t),r=Rm(n,e,i);if(null===r)return[Lm(s,e,i)[1],!1];return[r[2],!0]})(e,t,i);null!==n&&(hm(e,n),s&&!vm(e)&&pm(e).disconnect(mm(t),i))};class Bm{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._map.forEach(((i,n)=>e.call(t,i,n,this)))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Fm={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,outputChannelCount:void 0,parameterData:{},processorOptions:{}},Vm=e=>{const t=[];for(let i=0;i<e;i+=1)t.push(1);return t};function jm(e,t,i,n,s){if("function"===typeof e.copyFromChannel)0===t[i].byteLength&&(t[i]=new Float32Array(128)),e.copyFromChannel(t[i],n,s);else{const r=e.getChannelData(n);if(0===t[i].byteLength)t[i]=r.slice(s,s+128);else{const e=new Float32Array(r.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);t[i].set(e)}}}const Gm=(e,t,i,n,s)=>{"function"===typeof e.copyToChannel?0!==t[i].byteLength&&e.copyToChannel(t[i],n,s):0!==t[i].byteLength&&e.getChannelData(n).set(t[i],s)},Wm=(e,t)=>{const i=[];for(let n=0;n<e;n+=1){const e=[],s="number"===typeof t?t:t[n];for(let t=0;t<s;t+=1)e.push(new Float32Array(128));i.push(e)}return i},zm=async(e,t,i,n,s,r)=>{const o=null===t?128*Math.ceil(e.context.length/128):t.length,a=n.channelCount*n.numberOfInputs,l=n.outputChannelCount.reduce(((e,t)=>e+t),0),c=0===l?null:i.createBuffer(l,o,i.sampleRate);if(void 0===s)throw new Error("Missing the processor constructor.");const u=dm(e),d=await((e,t)=>{const i=Jp(Vp,e),n=pm(t);return Jp(i,n)})(i,e),f=Wm(n.numberOfInputs,n.channelCount),p=Wm(n.numberOfOutputs,n.outputChannelCount),m=Array.from(e.parameters.keys()).reduce(((e,t)=>h(h({},e),{},{[t]:new Float32Array(128)})),{});for(let h=0;h<o;h+=128){if(n.numberOfInputs>0&&null!==t)for(let e=0;e<n.numberOfInputs;e+=1)for(let i=0;i<n.channelCount;i+=1)jm(t,f[e],i,i,h);void 0!==s.parameterDescriptors&&null!==t&&s.parameterDescriptors.forEach(((e,i)=>{let{name:n}=e;jm(t,m,n,a+i,h)}));for(let e=0;e<n.numberOfInputs;e+=1)for(let t=0;t<n.outputChannelCount[e];t+=1)0===p[e][t].byteLength&&(p[e][t]=new Float32Array(128));try{const e=f.map(((e,t)=>0===u.activeInputs[t].size?[]:e)),t=r(h/i.sampleRate,i.sampleRate,(()=>d.process(e,p,m)));if(null!==c)for(let i=0,s=0;i<n.numberOfOutputs;i+=1){for(let e=0;e<n.outputChannelCount[i];e+=1)Gm(c,p[i],e,s+e,h);s+=n.outputChannelCount[i]}if(!t)break}catch(g){e.dispatchEvent(new ErrorEvent("processorerror",{error:g}));break}}return c},Um={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Hm={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Xm={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Ym={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Km={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},qm={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},$m=(e,t,i)=>{const n=t[i];if(void 0===n)throw e();return n},Zm={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Qm={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Jm=()=>{try{return new DOMException("","InvalidStateError")}catch(e){return e.code=11,e.name="InvalidStateError",e}},eg=()=>{try{return new DOMException("","InvalidAccessError")}catch(e){return e.code=15,e.name="InvalidAccessError",e}},tg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},ig=(e,t,i,n,s,r,o,a,l,c,h)=>{const u=c.length;let d=a;for(let f=0;f<u;f+=1){let a=i[0]*c[f];for(let t=1;t<s;t+=1){const n=d-t&l-1;a+=i[t]*r[n],a-=e[t]*o[n]}for(let e=s;e<n;e+=1)a+=i[e]*r[d-e&l-1];for(let i=s;i<t;i+=1)a-=e[i]*o[d-i&l-1];r[d]=c[f],o[d]=a,d=d+1&l-1,h[f]=a}return d},ng={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},sg=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const i=e.decodeAudioData(t.buffer,(()=>{}));return void 0!==i&&(i.catch((()=>{})),!0)}catch(i){}return!1},rg={numberOfChannels:1},og=(e,t,i)=>{const n=t[i];void 0!==n&&n!==e[i]&&(e[i]=n)},ag=(e,t)=>{og(e,t,"channelCount"),og(e,t,"channelCountMode"),og(e,t,"channelInterpretation")},lg=e=>"function"===typeof e.getFloatTimeDomainData,cg=(e,t,i)=>{const n=t[i];void 0!==n&&n!==e[i].value&&(e[i].value=n)},hg=e=>{var t;e.start=(t=e.start,function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2?arguments[2]:void 0;if("number"===typeof s&&s<0||n<0||i<0)throw new RangeError("The parameters can't be negative.");t.call(e,i,n,s)})},ug=e=>{var t;e.stop=(t=e.stop,function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(i<0)throw new RangeError("The parameter can't be negative.");t.call(e,i)})},dg=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),fg=async(e,t)=>{const i=await(e=>new Promise(((t,i)=>{const{port1:n,port2:s}=new MessageChannel;n.onmessage=e=>{let{data:i}=e;n.close(),s.close(),t(i)},n.onmessageerror=e=>{let{data:t}=e;n.close(),s.close(),i(t)},s.postMessage(e)})))(t);return new e(i)},pg=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),mg=["offset"];function gg(e,t){const i=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/i,(e[1]*t[0]-e[0]*t[1])/i]}function bg(e,t){let i=[0,0];for(let r=e.length-1;r>=0;r-=1)s=t,i=[(n=i)[0]*s[0]-n[1]*s[1],n[0]*s[1]+n[1]*s[0]],i[0]+=e[r];var n,s;return i}const vg=["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"],yg=["channelCount","channelCountMode","pan"],xg=["curve","oversample"],Sg=()=>{try{return new DOMException("","NotSupportedError")}catch(e){return e.code=9,e.name="NotSupportedError",e}},Eg={numberOfChannels:1},wg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,type:"sine"},Tg={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},_g={disableNormalization:!1},Mg={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Pg=()=>{try{return new DOMException("","UnknownError")}catch(e){return e.name="UnknownError",e}},Cg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Ag=e=>{if(null===e)return!1;const t=e.length;return t%2!==0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},Ng=(e,t,i,n)=>{let s=Object.getPrototypeOf(e);for(;!s.hasOwnProperty(t);)s=Object.getPrototypeOf(s);const{get:r,set:o}=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,{get:i(r),set:n(o)})},Lg=(e,t)=>i=>{const n={value:e};return Object.defineProperties(i,{currentTarget:n,target:n}),"function"===typeof t?t.call(e,i):t.handleEvent.call(e,i)},kg=(Ig=new Map,Rg=new WeakMap,(e,t)=>{const i=Rg.get(e);if(void 0!==i)return i;const n=Ig.get(e);if(void 0!==n)return n;try{const i=t();return i instanceof Promise?(Ig.set(e,i),i.catch((()=>!1)).then((t=>(Ig.delete(e),Rg.set(e,t),t)))):(Rg.set(e,i),i)}catch(s){return Rg.set(e,!1),!1}});var Ig,Rg;const Og="undefined"===typeof window?null:window,Dg=(e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null)(Og),Bg=(e=>t=>null!==e&&t instanceof e)(Dg),Fg=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(Og),Vg=((e,t,i)=>n=>{if("closed"===n.state&&null!==t&&"webkitAudioContext"!==t.name){if(!e(n)){const e=Rp.get(n);if(void 0!==e)return e;const i=new t;return Rp.set(n,i),i}{const e=Rp.get(n);if(void 0!==e)return e;if(null!==i){const e=new i(1,1,44100);return Rp.set(n,e),e}}}return null})(Bg,Fg,Dg),jg=(e=>(t,i)=>{const n=e(t);return i(null!==n?n:t)})(Vg),Gg=((e,t,i)=>(n,s)=>{const r=i(n,(e=>e.createAnalyser()));if(ag(r,s),!(s.maxDecibels>s.minDecibels))throw t();return og(r,s,"fftSize"),og(r,s,"maxDecibels"),og(r,s,"minDecibels"),og(r,s,"smoothingTimeConstant"),e(lg,(()=>lg(r)))||(e=>{e.getFloatTimeDomainData=t=>{const i=new Uint8Array(t.length);e.getByteTimeDomainData(i);const n=Math.max(i.length,e.fftSize);for(let e=0;e<n;e+=1)t[e]=.0078125*(i[e]-128);return t}})(r),r})(kg,Kp,jg),Wg=(e=>t=>{const i=e(t);if(null===i.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return i.renderer})(dm),zg=((e,t,i)=>async(n,s,r,o)=>{const a=e(n),l=[...o,n];await Promise.all(a.activeInputs.map(((e,o)=>Array.from(e).filter((e=>{let[t]=e;return!l.includes(t)})).map((async e=>{let[a,c]=e;const h=t(a),u=await h.render(a,s,l),d=n.context.destination;i(a)||n===d&&i(n)||u.connect(r,c,o)})))).reduce(((e,t)=>[...e,...t]),[]))})(dm,Wg,vm),Ug=((e,t,i)=>()=>{const n=new WeakMap;return{render(s,r,o){const a=n.get(r);return void 0!==a?Promise.resolve(a):(async(s,r,o)=>{let a=t(s);if(!Xp(a,r)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=e(r,t)}return n.set(r,a),await i(s,r,a,o),a})(s,r,o)}}})(Gg,pm,zg),Hg=new WeakMap,Xg=(Yg=Op,e=>{const t=Yg.get(e);if(void 0===t)throw Jm();return t});var Yg;const Kg=new WeakMap,qg=(e=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,i,n){if(null!==i){let s=this._listeners.get(i);void 0===s&&(s=e(this,i),"function"===typeof i&&this._listeners.set(i,s)),this._nativeEventTarget.addEventListener(t,s,n)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,i){const n=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===n?null:n,i)}})(Lg),$g=(e=>t=>null!==e&&t instanceof e)(Fg),Zg=(e=>t=>null!==e&&"function"===typeof e.AudioNode&&t instanceof e.AudioNode)(Og),Qg=(e=>t=>null!==e&&"function"===typeof e.AudioParam&&t instanceof e.AudioParam)(Og),Jg=((e,t,i,n,s,r,o,a,l,c,h,u,d,f,p)=>class extends c{constructor(t,n,s,r){super(s),this._context=t,this._nativeAudioNode=s;const o=h(t);u(o)&&!0!==i(Em,(()=>Em(o)))&&_m(s),Lp.set(this,s),Dp.set(this,new Set),n&&tm(this),e(this,r,s)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(i<0||i>=this._nativeAudioNode.numberOfOutputs)throw s();const c=h(this._context),u=p(c);if(d(e)||f(e))throw r();if(rm(e)){const s=pm(e);try{const n=cm(this._nativeAudioNode,s,i,a);if(u||ym(this)?this._nativeAudioNode.disconnect(...n):ym(e)&&tm(e),am(e)){const e=t.get(s);if(void 0===e){const e=c.createGain();e.connect(n[0],0,n[2]),t.set(s,new Map([[a,e]]))}else if(void 0===e.get(a)){const t=c.createGain();t.connect(n[0],0,n[2]),e.set(a,t)}}}catch(g){if(12===g.code)throw r();throw g}if(u?((e,t,i,n)=>{const{outputs:s}=dm(e);if(gm(s,[t,i,n],(e=>e[0]===t&&e[1]===i&&e[2]===n),!0)){const{activeInputs:s}=dm(t);return Mm(s,e,[i,n,null],!0),!0}return!1})(this,e,i,a):km(this,e,i,a)){const t=l([this],e);wm(t,n(u))}return e}const m=mm(e);if("playbackRate"===m.name)throw o();try{this._nativeAudioNode.connect(m,i),(u||ym(this))&&this._nativeAudioNode.disconnect(m,i)}catch(g){if(12===g.code)throw r();throw g}if(u?((e,t,i)=>{const{outputs:n}=dm(e);if(gm(n,[t,i],(e=>e[0]===t&&e[1]===i),!0)){const{activeInputs:n}=fm(t);return Pm(n,e,[i,null],!0),!0}return!1})(this,e,i):Im(this,e,i)){const t=l([this],e);wm(t,n(u))}}disconnect(e,t,i){let n;if(void 0===e)n=(e=>{const t=dm(e),i=[];for(const n of t.outputs)om(n)?Om(e,...n):Dm(e,...n),i.push(n[0]);return t.outputs.clear(),i})(this);else if("number"===typeof e){if(e<0||e>=this.numberOfOutputs)throw s();n=((e,t)=>{const i=dm(e),n=[];for(const s of i.outputs)s[1]===t&&(om(s)?Om(e,...s):Dm(e,...s),n.push(s[0]),i.outputs.delete(s));return n})(this,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw s();if(rm(e)&&void 0!==i&&(i<0||i>=e.numberOfInputs))throw s();if(n=((e,t,i,n)=>{const s=dm(e);return Array.from(s.outputs).filter((e=>e[0]===t&&(void 0===i||e[1]===i)&&(void 0===n||e[2]===n))).map((t=>(om(t)?Om(e,...t):Dm(e,...t),s.outputs.delete(t),t[0])))})(this,e,t,i),0===n.length)throw r()}for(const s of n){const e=l([this],s);wm(e,a)}}})((eb=Np,(e,t,i)=>{const n=[];for(let s=0;s<i.numberOfInputs;s+=1)n.push(new Set);eb.set(e,{activeInputs:n,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),Hg,kg,((e,t,i,n,s,r)=>o=>(a,l)=>{const c=e.get(a);if(void 0===c){if(!o&&r(a)){const e=n(a),{outputs:r}=i(a);for(const i of r)if(om(i)){const s=n(i[0]);t(e,s,i[1],i[2])}else{const t=s(i[0]);e.disconnect(t,i[1])}}e.set(a,l)}else e.set(a,c+l)})(Bp,um,dm,pm,mm,bm),Kp,eg,Sg,((e,t,i,n,s,r,o,a)=>(l,c)=>{const h=t.get(l);if(void 0===h)throw new Error("Missing the expected cycle count.");const u=r(l.context),d=a(u);if(h===c){if(t.delete(l),!d&&o(l)){const t=n(l),{outputs:r}=i(l);for(const i of r)if(om(i)){const s=n(i[0]);e(t,s,i[1],i[2])}else{const e=s(i[0]);t.connect(e,i[1])}}}else t.set(l,h-c)})(cm,Bp,dm,pm,mm,Xg,bm,Bg),((e,t,i)=>function n(s,r){const o=rm(r)?r:i(e,r);if((e=>"delayTime"in e)(o))return[];if(s[0]===o)return[s];if(s.includes(o))return[];const{outputs:a}=t(o);return Array.from(a).map((e=>n([...s,o],e[0]))).reduce(((e,t)=>e.concat(t)),[])})(Kg,dm,Jp),qg,Xg,$g,Zg,Qg,Bg);var eb;const tb=((e,t,i,n,s,r)=>class extends e{constructor(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hp;const o=s(e),a=h(h({},Hp),i),l=n(o,a);super(e,!1,l,r(o)?t():null),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,i()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,i()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(Jg,Ug,Kp,Gg,Xg,Bg),ib=new WeakSet,nb=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(Og),sb=(rb=new Uint32Array(1),e=>(rb[0]=e,rb[0]));var rb;const ob=((e,t)=>i=>{i.copyFromChannel=function(n,s){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(s);if(o>=i.numberOfChannels)throw t();const a=i.length,l=i.getChannelData(o),c=n.length;for(let e=r<0?-r:0;e+r<a&&e<c;e+=1)n[e]=l[e+r]},i.copyToChannel=function(n,s){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(s);if(o>=i.numberOfChannels)throw t();const a=i.length,l=i.getChannelData(o),c=n.length;for(let e=r<0?-r:0;e+r<a&&e<c;e+=1)l[e+r]=n[e]}})(sb,Kp),ab=(e=>t=>{t.copyFromChannel=(i=>function(n,s){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(s);if(r<t.length)return i.call(t,n,o,r)})(t.copyFromChannel),t.copyToChannel=(i=>function(n,s){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(s);if(r<t.length)return i.call(t,n,o,r)})(t.copyToChannel)})(sb),lb=((e,t,i,n,s,r,o,a)=>{let l=null;return class c{constructor(c){if(null===s)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:d,sampleRate:f}=h(h({},$p),c);null===l&&(l=new s(1,1,44100));const p=null!==n&&t(r,r)?new n({length:u,numberOfChannels:d,sampleRate:f}):l.createBuffer(d,u,f);if(0===p.numberOfChannels)throw i();return"function"!==typeof p.copyFromChannel?(o(p),qp(p)):t(Yp,(()=>Yp(p)))||a(p),e.add(p),p}static[Symbol.hasInstance](t){return null!==t&&"object"===typeof t&&Object.getPrototypeOf(t)===c.prototype||e.has(t)}}})(ib,kg,Sg,nb,Dg,(e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch(t){return!1}return!0})(nb),ob,ab),cb=(e=>(t,i)=>{const n=e(t,(e=>e.createGain()));return ag(n,i),cg(n,i,"gain"),n})(jg),hb=(e=>(t,i)=>{const n=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.connect(n).connect(n.context.destination);const s=()=>{i.removeEventListener("ended",s),i.disconnect(n),n.disconnect()};i.addEventListener("ended",s)})(cb),ub=(e=>t=>{const i=e(t,(e=>e.createOscillator()));try{i.start(-1)}catch(n){return n instanceof RangeError}return!1})(jg),db=(e=>t=>{const i=t.createBuffer(1,1,44100),n=e(t,(e=>e.createBufferSource()));n.buffer=i,n.start(),n.stop();try{return n.stop(),!0}catch(s){return!1}})(jg),fb=(e=>t=>{const i=e(t,(e=>e.createOscillator()));try{i.stop(-1)}catch(n){return n instanceof RangeError}return!1})(jg),pb=(e=>(t,i)=>{const n=e(i,(e=>e.createGain()));t.connect(n);const s=(r=t.disconnect,()=>{r.call(t,n),t.removeEventListener("ended",s)});var r;t.addEventListener("ended",s),pg(t,n),t.stop=(e=>{let i=!1;return function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(i)try{e.call(t,s)}catch(r){n.gain.setValueAtTime(0,s)}else e.call(t,s),i=!0}})(t.stop)})(jg),mb=((e,t,i)=>async(n,s,r,o)=>{const a=t(n);await Promise.all(Array.from(a.activeInputs).map((async t=>{let[n,a]=t;const l=e(n),c=await l.render(n,s,o);i(n)||c.connect(r,a)})))})(Wg,fm,vm),gb=(e=>(t,i,n,s)=>e(i,t,n,s))(mb),bb=((e,t,i,n,s,r,o,a,l,c,h,u,d)=>(f,p)=>{const m=i(f,(e=>e.createBufferSource()));return ag(m,p),cg(m,p,"playbackRate"),og(m,p,"buffer"),og(m,p,"loop"),og(m,p,"loopEnd"),og(m,p,"loopStart"),t(n,(()=>n(f)))||(e=>{e.start=(t=>{let i=!1;return function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(i)throw Jm();t.call(e,n,s,r),i=!0}})(e.start)})(m),t(s,s)||((e,t)=>{let i=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY;var s,r;e.start=(s=e.start,r=e.stop,function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;if(s.call(e,o,a),l>=0&&l<Number.POSITIVE_INFINITY){const s=Math.max(o,t.currentTime),a=l/e.playbackRate.value;i=s+a,r.call(e,Math.min(i,n))}}),e.stop=(s=>function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;n=Math.max(r,t.currentTime),s.call(e,Math.min(i,n))})(e.stop)})(m,f),t(r,(()=>r(f)))||h(m),t(o,(()=>o(f)))||u(m,f),t(a,(()=>a(f)))||hg(m),t(l,(()=>l(f)))||d(m,f),t(c,(()=>c(f)))||ug(m),e(f,m),m})(hb,kg,jg,(e=>t=>{const i=e(t,(e=>e.createBufferSource()));i.start();try{i.start()}catch(n){return!0}return!1})(jg),(e=>()=>{if(null===e)return Promise.resolve(!1);const t=new e(1,1,44100),i=t.createBuffer(1,1,t.sampleRate),n=t.createBufferSource();return i.getChannelData(0)[0]=1,n.buffer=i,n.start(0,0,0),n.connect(t.destination),new Promise((e=>{t.oncomplete=t=>{let{renderedBuffer:i}=t;e(0===i.getChannelData(0)[0])},t.startRendering()}))})(Dg),(e=>t=>{const i=e(t,(e=>e.createBufferSource())),n=t.createBuffer(1,1,44100);i.buffer=n;try{i.start(0,1)}catch(s){return!1}return!0})(jg),(e=>t=>{const i=e(t,(e=>e.createBufferSource()));i.start();try{i.stop()}catch(n){return!1}return!0})(jg),ub,db,fb,(e=>{var t;e.start=(t=e.start,function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2?arguments[2]:void 0;const r=e.buffer,o=null===r?n:Math.min(r.duration,n);null!==r&&o>r.duration-.5/e.context.sampleRate?t.call(e,i,0,0):t.call(e,i,o,s)})}),(e=>(t,i)=>{const n=i.createBuffer(1,1,i.sampleRate);null===t.buffer&&(t.buffer=n),e(t,"buffer",(e=>()=>{const i=e.call(t);return i===n?null:i}),(e=>i=>e.call(t,null===i?n:i)))})(Ng),pb),vb=((e,t)=>(i,n,s,r)=>(e(n).replay(s),t(n,i,s,r)))((e=>t=>{const i=e(t);if(null===i.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return i.renderer})(fm),mb),yb=((e,t,i,n,s)=>()=>{const r=new WeakMap;let o=null,a=null;return{set start(e){o=e},set stop(e){a=e},render(l,c,h){const u=r.get(c);return void 0!==u?Promise.resolve(u):(async(l,c,h)=>{let u=i(l);const d=Xp(u,c);if(!d){const e={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=t(c,e),null!==o&&u.start(...o),null!==a&&u.stop(a)}return r.set(c,u),d?await e(c,l.playbackRate,u.playbackRate,h):await n(c,l.playbackRate,u.playbackRate,h),await s(l,c,u,h),u})(l,c,h)}}})(gb,bb,pm,vb,zg),xb=((e,t,i,n,s,r,o,a,l,c,h,u)=>function(d,f,p){let m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const b=new Cp.AutomationEventList(p.defaultValue),v=f?n(b):null,y={get defaultValue(){return p.defaultValue},get maxValue(){return null===m?p.maxValue:m},get minValue(){return null===g?p.minValue:g},get value(){return p.value},set value(e){p.value=e,y.setValueAtTime(e,d.context.currentTime)},cancelAndHoldAtTime(e){if("function"===typeof p.cancelAndHoldAtTime)null===v&&b.flush(d.context.currentTime),b.add(s(e)),p.cancelAndHoldAtTime(e);else{const t=Array.from(b).pop();null===v&&b.flush(d.context.currentTime),b.add(s(e));const i=Array.from(b).pop();p.cancelScheduledValues(e),t!==i&&void 0!==i&&("exponentialRampToValue"===i.type?p.exponentialRampToValueAtTime(i.value,i.endTime):"linearRampToValue"===i.type?p.linearRampToValueAtTime(i.value,i.endTime):"setValue"===i.type?p.setValueAtTime(i.value,i.startTime):"setValueCurve"===i.type&&p.setValueCurveAtTime(i.values,i.startTime,i.duration))}return y},cancelScheduledValues:e=>(null===v&&b.flush(d.context.currentTime),b.add(r(e)),p.cancelScheduledValues(e),y),exponentialRampToValueAtTime:(e,t)=>(null===v&&b.flush(d.context.currentTime),b.add(o(e,t)),p.exponentialRampToValueAtTime(e,t),y),linearRampToValueAtTime:(e,t)=>(null===v&&b.flush(d.context.currentTime),b.add(a(e,t)),p.linearRampToValueAtTime(e,t),y),setTargetAtTime:(e,t,i)=>(null===v&&b.flush(d.context.currentTime),b.add(l(e,t,i)),p.setTargetAtTime(e,t,i),y),setValueAtTime:(e,t)=>(null===v&&b.flush(d.context.currentTime),b.add(c(e,t)),p.setValueAtTime(e,t),y),setValueCurveAtTime(e,t,i){if(null!==u&&"webkitAudioContext"===u.name){const n=t+i,s=d.context.sampleRate,r=Math.ceil(t*s),o=Math.floor(n*s),a=o-r,l=new Float32Array(a);for(let h=0;h<a;h+=1){const n=(e.length-1)/i*((r+h)/s-t),o=Math.floor(n),a=Math.ceil(n);l[h]=o===a?e[o]:(1-(n-o))*e[o]+(1-(a-n))*e[a]}null===v&&b.flush(d.context.currentTime),b.add(h(l,t,i)),p.setValueCurveAtTime(l,t,i);const c=o/s;c<n&&y.setValueAtTime(l[l.length-1],c),y.setValueAtTime(e[e.length-1],n)}else null===v&&b.flush(d.context.currentTime),b.add(h(e,t,i)),p.setValueCurveAtTime(e,t,i);return y}};return i.set(y,p),t.set(y,d),e(y,v),y})((Sb=kp,(e,t)=>{Sb.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),Kg,Ip,(e=>({replay(t){for(const i of e)if("exponentialRampToValue"===i.type){const{endTime:e,value:n}=i;t.exponentialRampToValueAtTime(n,e)}else if("linearRampToValue"===i.type){const{endTime:e,value:n}=i;t.linearRampToValueAtTime(n,e)}else if("setTarget"===i.type){const{startTime:e,target:n,timeConstant:s}=i;t.setTargetAtTime(n,e,s)}else if("setValue"===i.type){const{startTime:e,value:n}=i;t.setValueAtTime(n,e)}else{if("setValueCurve"!==i.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:n,values:s}=i;t.setValueCurveAtTime(s,n,e)}}}})),Cp.createCancelAndHoldAutomationEvent,Cp.createCancelScheduledValuesAutomationEvent,Cp.createExponentialRampToValueAutomationEvent,Cp.createLinearRampToValueAutomationEvent,Cp.createSetTargetAutomationEvent,Cp.createSetValueAutomationEvent,Cp.createSetValueCurveAutomationEvent,Fg);var Sb;const Eb=((e,t,i,n,s,r,o,a)=>class extends e{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nm;const a=r(e),l=h(h({},nm),n),c=s(a,l),u=o(a),d=u?t():null;super(e,!1,c,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==n.buffer&&void 0!==n.buffer,this._nativeAudioBufferSourceNode=c,this._onended=null,this._playbackRate=i(this,u,c.playbackRate,Qp,Zp)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){try{this._nativeAudioBufferSourceNode.buffer=e}catch(t){if(null!==e||17!==t.code)throw t;if(null!==this._nativeAudioBufferSourceNode.buffer){const e=this._nativeAudioBufferSourceNode.buffer,t=e.numberOfChannels;for(let i=0;i<t;i+=1)e.getChannelData(i).fill(0);this._isBufferNullified=!0}}if(null!==e){if(this._isBufferSet)throw n();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"===typeof e?a(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const i=this._nativeAudioBufferSourceNode.onended;this._onended=null!==i&&i===t?e:i}get playbackRate(){return this._playbackRate}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(e,t,i),null!==this._audioBufferSourceNodeRenderer)this._audioBufferSourceNodeRenderer.start=void 0===i?[e,t]:[e,t,i];else{tm(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),setTimeout((()=>im(this)),1e3)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(Jg,yb,xb,Jm,bb,Xg,Bg,Lg),wb=((e,t,i,n,s,r,o,a)=>class extends e{constructor(e,i){const n=r(e),l=o(n),c=s(n,i,l);super(e,!1,c,l?t(a):null),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw n();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw i();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw n();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(Jg,(e=>{let t=null;return{render:(i,n,s)=>(null===t&&(t=(async(t,i,n)=>{const s=i.destination;return await e(t,i,s,n),s})(i,n,s)),t)}}),Kp,Jm,((e,t)=>(i,n,s)=>{const r=i.destination;if(r.channelCount!==n)try{r.channelCount=n}catch(a){}s&&"explicit"!==r.channelCountMode&&(r.channelCountMode="explicit"),0===r.maxChannelCount&&Object.defineProperty(r,"maxChannelCount",{value:n});const o=e(i,{channelCount:n,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return t(o,"channelCount",(e=>()=>e.call(o)),(e=>t=>{e.call(o,t);try{r.channelCount=t}catch(i){if(t>r.maxChannelCount)throw i}})),t(o,"channelCountMode",(e=>()=>e.call(o)),(e=>t=>{e.call(o,t),r.channelCountMode=t})),t(o,"channelInterpretation",(e=>()=>e.call(o)),(e=>t=>{e.call(o,t),r.channelInterpretation=t})),Object.defineProperty(o,"maxChannelCount",{get:()=>r.maxChannelCount}),o.connect(r),o})(cb,Ng),Xg,Bg,zg),Tb=(e=>(t,i)=>{const n=e(t,(e=>e.createBiquadFilter()));return ag(n,i),cg(n,i,"Q"),cg(n,i,"detune"),cg(n,i,"frequency"),cg(n,i,"gain"),og(n,i,"type"),n})(jg),_b=((e,t,i,n,s)=>()=>{const r=new WeakMap;return{render(o,a,l){const c=r.get(a);return void 0!==c?Promise.resolve(c):(async(o,a,l)=>{let c=i(o);const h=Xp(c,a);if(!h){const e={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=t(a,e)}return r.set(a,c),h?(await e(a,o.Q,c.Q,l),await e(a,o.detune,c.detune,l),await e(a,o.frequency,c.frequency,l),await e(a,o.gain,c.gain,l)):(await n(a,o.Q,c.Q,l),await n(a,o.detune,c.detune,l),await n(a,o.frequency,c.frequency,l),await n(a,o.gain,c.gain,l)),await s(o,a,c,l),c})(o,a,l)}}})(gb,Tb,pm,vb,zg),Mb=((e,t,i,n,s,r,o)=>class extends e{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Um;const a=r(e),l=h(h({},Um),n),c=s(a,l),u=o(a);super(e,!1,c,u?i():null),this._Q=t(this,u,c.Q,Qp,Zp),this._detune=t(this,u,c.detune,1200*Math.log2(Qp),-1200*Math.log2(Qp)),this._frequency=t(this,u,c.frequency,e.sampleRate/2,0),this._gain=t(this,u,c.gain,40*Math.log10(Qp),Zp),this._nativeBiquadFilterNode=c}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,i){if(this._nativeBiquadFilterNode.getFrequencyResponse(e,t,i),e.length!==t.length||t.length!==i.length)throw n()}})(Jg,xb,_b,eg,Tb,Xg,Bg),Pb=((e,t)=>(i,n,s)=>{const r=new Set;var o,a;return i.connect=(o=i.connect,function(s){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const c=0===r.size;if(t(s))return o.call(i,s,a,l),e(r,[s,a,l],(e=>e[0]===s&&e[1]===a&&e[2]===l),!0),c&&n(),s;o.call(i,s,a),e(r,[s,a],(e=>e[0]===s&&e[1]===a),!0),c&&n()}),i.disconnect=(a=i.disconnect,(e,n,o)=>{const l=r.size>0;if(void 0===e)a.apply(i),r.clear();else if("number"===typeof e){a.call(i,e);for(const t of r)t[1]===e&&r.delete(t)}else{t(e)?a.call(i,e,n,o):a.call(i,e,n);for(const t of r)t[0]!==e||void 0!==n&&t[1]!==n||void 0!==o&&t[2]!==o||r.delete(t)}const c=0===r.size;l&&c&&s()}),i})(gm,Zg),Cb=((e,t,i)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const r=t(n,(e=>e.createBufferSource()));i(s,(()=>{const e=s.numberOfInputs;for(let t=0;t<e;t+=1)r.connect(s,0,t)}),(()=>r.disconnect(s)))})(Jm,jg,Pb),Ab=((e,t)=>(i,n)=>{const s=e(i,(e=>e.createChannelMerger(n.numberOfInputs)));return 1!==s.channelCount&&"explicit"!==s.channelCountMode&&t(i,s),ag(s,n),s})(jg,Cb),Nb=((e,t,i)=>()=>{const n=new WeakMap;return{render(s,r,o){const a=n.get(r);return void 0!==a?Promise.resolve(a):(async(s,r,o)=>{let a=t(s);if(!Xp(a,r)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=e(r,t)}return n.set(r,a),await i(s,r,a,o),a})(s,r,o)}}})(Ab,pm,zg),Lb=((e,t,i,n,s)=>class extends e{constructor(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hm;const o=n(e),a=h(h({},Hm),r);super(e,!1,i(o,a),s(o)?t():null)}})(Jg,Nb,Ab,Xg,Bg),kb=(e=>(t,i)=>{const n=e(t,(e=>e.createChannelSplitter(i.numberOfOutputs)));return ag(n,i),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Jm()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw Jm()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw Jm()}})})(n),n})(jg),Ib=((e,t,i)=>()=>{const n=new WeakMap;return{render(s,r,o){const a=n.get(r);return void 0!==a?Promise.resolve(a):(async(s,r,o)=>{let a=t(s);if(!Xp(a,r)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=e(r,t)}return n.set(r,a),await i(s,r,a,o),a})(s,r,o)}}})(kb,pm,zg),Rb=((e,t,i,n,s)=>class extends e{constructor(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xm;const o=n(e),a=(e=>h(h({},e),{},{channelCount:e.numberOfOutputs}))(h(h({},Xm),r));super(e,!1,i(o,a),s(o)?t():null)}})(Jg,Ib,kb,Xg,Bg),Ob=((e,t,i,n)=>(s,o)=>{let{offset:a}=o,l=r(o,mg);const c=s.createBuffer(1,2,s.sampleRate),u=t(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=i(s,h(h({},l),{},{gain:a})),f=c.getChannelData(0);f[0]=1,f[1]=1,u.buffer=c,u.loop=!0;const p={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(e){d.channelCount=e},get channelCountMode(){return d.channelCountMode},set channelCountMode(e){d.channelCountMode=e},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return u.onended},set onended(e){u.onended=e},addEventListener(){return u.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return u.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return u.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.start.call(u,e)},stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.stop.call(u,e)}};return e(s,u),n(pg(p,d),(()=>u.connect(d)),(()=>u.disconnect(d)))})(hb,bb,cb,Pb),Db=((e,t,i,n,s,r)=>(o,a)=>{if(void 0===o.createConstantSource)return n(o,a);const l=i(o,(e=>e.createConstantSource()));return ag(l,a),cg(l,a,"offset"),t(s,(()=>s(o)))||hg(l),t(r,(()=>r(o)))||ug(l),e(o,l),l})(hb,kg,jg,Ob,ub,fb),Bb=((e,t,i,n,s)=>()=>{const r=new WeakMap;let o=null,a=null;return{set start(e){o=e},set stop(e){a=e},render(l,c,h){const u=r.get(c);return void 0!==u?Promise.resolve(u):(async(l,c,h)=>{let u=i(l);const d=Xp(u,c);if(!d){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=t(c,e),null!==o&&u.start(o),null!==a&&u.stop(a)}return r.set(c,u),d?await e(c,l.offset,u.offset,h):await n(c,l.offset,u.offset,h),await s(l,c,u,h),u})(l,c,h)}}})(gb,Db,pm,vb,zg),Fb=((e,t,i,n,s,r,o)=>class extends e{constructor(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ym;const a=s(e),l=h(h({},Ym),o),c=n(a,l),u=r(a),d=u?i():null;super(e,!1,c,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=c,this._offset=t(this,u,c.offset,Qp,Zp),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"===typeof e?o(this,e):null;this._nativeConstantSourceNode.onended=t;const i=this._nativeConstantSourceNode.onended;this._onended=null!==i&&i===t?e:i}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer)this._constantSourceNodeRenderer.start=e;else{tm(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),setTimeout((()=>im(this)),1e3)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}})(Jg,xb,Bb,Db,Xg,Bg,Lg),Vb=((e,t,i)=>(n,s)=>{let{buffer:r,channelCount:o,channelCountMode:a,channelInterpretation:l,disableNormalization:c}=s;const h=e(n,(e=>e.createConvolver()));ag(h,{channelCount:Math.max(o,2),channelCountMode:"max"===a?a:"clamped-max",channelInterpretation:l});const u=t(n,{channelCount:o,channelCountMode:a,channelInterpretation:l,gain:1}),d={get buffer(){return h.buffer},set buffer(e){h.buffer=e},get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){e>2&&(h.channelCount=e),u.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){"max"===e&&(h.channelCountMode=e),u.channelCountMode=e},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(e){h.channelInterpretation=e,u.channelInterpretation=e},get context(){return h.context},get inputs(){return[h]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get normalize(){return h.normalize},set normalize(e){h.normalize=e},addEventListener(){return h.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return h.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return h.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};c===d.normalize&&(d.normalize=!c),r!==d.buffer&&(d.buffer=r);return i(pg(d,u),(()=>h.connect(u)),(()=>h.disconnect(u)))})(jg,cb,Pb),jb=((e,t,i,n)=>(s,r)=>{const o=e(s,(e=>e.createConvolver()));try{o.channelCount=1}catch(a){return t(s,r)}if(ag(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),og(o,r,"buffer"),r.channelCount>2)throw i();if(n(o,"channelCount",(e=>()=>e.call(o)),(e=>t=>{if(t>2)throw i();return e.call(o,t)})),"max"===r.channelCountMode)throw i();return n(o,"channelCountMode",(e=>()=>e.call(o)),(e=>t=>{if("max"===t)throw i();return e.call(o,t)})),o})(jg,Vb,Sg,Ng),Gb=((e,t,i)=>()=>{const n=new WeakMap;return{render(s,r,o){const a=n.get(r);return void 0!==a?Promise.resolve(a):(async(s,r,o)=>{let a=t(s);if(!Xp(a,r)){const t={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=e(r,t)}return n.set(r,a),lm(a)?await i(s,r,a.inputs[0],o):await i(s,r,a,o),a})(s,r,o)}}})(jb,pm,zg),Wb=((e,t,i,n,s)=>class extends e{constructor(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Km;const o=n(e),a=h(h({},Km),r),l=i(o,a);super(e,!1,l,s(o)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=l}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0}else this._isBufferNullified=!1}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(Jg,Gb,jb,Xg,Bg),zb=(e=>(t,i)=>{const n=e(t,(e=>e.createDelay(i.maxDelayTime)));return ag(n,i),cg(n,i,"delayTime"),n})(jg),Ub=((e,t,i,n,s)=>r=>{const o=new WeakMap;return{render(a,l,c){const h=o.get(l);return void 0!==h?Promise.resolve(h):(async(a,l,c)=>{let h=i(a);const u=Xp(h,l);if(!u){const e={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,delayTime:h.delayTime.value,maxDelayTime:r};h=t(l,e)}return o.set(l,h),u?await e(l,a.delayTime,h.delayTime,c):await n(l,a.delayTime,h.delayTime,c),await s(a,l,h,c),h})(a,l,c)}}})(gb,zb,pm,vb,zg),Hb=((e,t,i,n,s,r)=>class extends e{constructor(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qm;const a=s(e),l=h(h({},qm),o),c=n(a,l),u=r(a);super(e,!1,c,u?i(l.maxDelayTime):null),this._delayTime=t(this,u,c.delayTime,l.maxDelayTime,0)}get delayTime(){return this._delayTime}})(Jg,xb,Ub,zb,Xg,Bg),Xb=((e,t)=>(i,n)=>{const s=e(i,(e=>e.createDynamicsCompressor()));if(ag(s,n),n.channelCount>2)throw t();if("max"===n.channelCountMode)throw t();return cg(s,n,"attack"),cg(s,n,"knee"),cg(s,n,"ratio"),cg(s,n,"release"),cg(s,n,"threshold"),s})(jg,Sg),Yb=((e,t,i,n,s)=>()=>{const r=new WeakMap;return{render(o,a,l){const c=r.get(a);return void 0!==c?Promise.resolve(c):(async(o,a,l)=>{let c=i(o);const h=Xp(c,a);if(!h){const e={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=t(a,e)}return r.set(a,c),h?(await e(a,o.attack,c.attack,l),await e(a,o.knee,c.knee,l),await e(a,o.ratio,c.ratio,l),await e(a,o.release,c.release,l),await e(a,o.threshold,c.threshold,l)):(await n(a,o.attack,c.attack,l),await n(a,o.knee,c.knee,l),await n(a,o.ratio,c.ratio,l),await n(a,o.release,c.release,l),await n(a,o.threshold,c.threshold,l)),await s(o,a,c,l),c})(o,a,l)}}})(gb,Xb,pm,vb,zg),Kb=((e,t,i,n,s,r,o)=>class extends e{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zm;const a=r(e),l=h(h({},Zm),s),c=n(a,l),u=o(a);super(e,!1,c,u?i():null),this._attack=t(this,u,c.attack,1,0),this._knee=t(this,u,c.knee,40,0),this._nativeDynamicsCompressorNode=c,this._ratio=t(this,u,c.ratio,20,1),this._release=t(this,u,c.release,1,0),this._threshold=t(this,u,c.threshold,0,-100)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"===typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(Jg,xb,Yb,Xb,Sg,Xg,Bg),qb=((e,t,i,n,s)=>()=>{const r=new WeakMap;return{render(o,a,l){const c=r.get(a);return void 0!==c?Promise.resolve(c):(async(o,a,l)=>{let c=i(o);const h=Xp(c,a);if(!h){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=t(a,e)}return r.set(a,c),h?await e(a,o.gain,c.gain,l):await n(a,o.gain,c.gain,l),await s(o,a,c,l),c})(o,a,l)}}})(gb,cb,pm,vb,zg),$b=((e,t,i,n,s,r)=>class extends e{constructor(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qm;const a=s(e),l=h(h({},Qm),o),c=n(a,l),u=r(a);super(e,!1,c,u?i():null),this._gain=t(this,u,c.gain,Qp,Zp)}get gain(){return this._gain}})(Jg,xb,qb,cb,Xg,Bg),Zb=(e=>(t,i,n,s)=>e(t,(e=>e.createScriptProcessor(i,n,s))))(jg),Qb=((e,t,i,n)=>(s,r,o)=>{let{channelCount:a,channelCountMode:l,channelInterpretation:c,feedback:h,feedforward:u}=o;const d=dg(r,s.sampleRate),f=h.length,p=u.length,m=Math.min(f,p);if(0===h.length||h.length>20)throw n();if(0===h[0])throw t();if(0===u.length||u.length>20)throw n();if(0===u[0])throw t();if(1!==h[0]){for(let e=0;e<p;e+=1)u[e]/=h[0];for(let e=1;e<f;e+=1)h[e]/=h[0]}const g=i(s,d,a,a);g.channelCount=a,g.channelCountMode=l,g.channelInterpretation=c;const b=[],v=[],y=[];for(let e=0;e<a;e+=1){b.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),v.push(e),y.push(t)}g.onaudioprocess=e=>{const t=e.inputBuffer,i=e.outputBuffer,n=t.numberOfChannels;for(let s=0;s<n;s+=1){const e=t.getChannelData(s),n=i.getChannelData(s);b[s]=ig(h,f,u,p,m,v[s],y[s],b[s],32,e,n)}};const x=s.sampleRate/2;return pg({get bufferSize(){return d},get channelCount(){return g.channelCount},set channelCount(e){g.channelCount=e},get channelCountMode(){return g.channelCountMode},set channelCountMode(e){g.channelCountMode=e},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(e){g.channelInterpretation=e},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener(){return g.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return g.dispatchEvent(arguments.length<=0?void 0:arguments[0])},getFrequencyResponse(t,i,n){if(t.length!==i.length||i.length!==n.length)throw e();const s=t.length;for(let e=0;e<s;e+=1){const s=-Math.PI*(t[e]/x),r=[Math.cos(s),Math.sin(s)],o=gg(bg(u,r),bg(h,r));i[e]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),n[e]=Math.atan2(o[1],o[0])}},removeEventListener(){return g.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},g)})(eg,Jm,Zb,Sg),Jb=((e,t,i,n)=>s=>e(sg,(()=>sg(s)))?Promise.resolve(e(n,n)).then((e=>{if(!e){const e=i(s,512,0,1);s.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>s.currentTime,e.connect(s.destination)}return s.startRendering()})):new Promise((e=>{const i=t(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=t=>{i.disconnect(),e(t.renderedBuffer)},i.connect(s.destination),s.startRendering()})))(kg,cb,Zb,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const i=new t(1,1,44100),n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((e=>{i.oncomplete=()=>{n.disconnect(),e(0!==i.currentTime)},i.startRendering()}))})(cb,Dg)),ev=((e,t,i,n,s,r)=>(o,a)=>{const l=new WeakMap;let c=null;const h=async(h,u,d)=>{let f=null,p=i(h);const m=Xp(p,u);if(void 0===u.createIIRFilter?f=e(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):m||(p=t(u,(e=>e.createIIRFilter(a,o)))),l.set(u,null===f?p:f),null!==f){if(null===c){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new n(h.context.destination.channelCount,h.context.length,u.sampleRate);c=(async()=>{await s(h,e,e.destination,d);return((e,t,i,n)=>{const s=i.length,r=n.length,o=Math.min(s,r);if(1!==i[0]){for(let e=0;e<s;e+=1)n[e]/=i[0];for(let e=1;e<r;e+=1)i[e]/=i[0]}const a=new Float32Array(32),l=new Float32Array(32),c=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),h=e.numberOfChannels;for(let u=0;u<h;u+=1){const t=e.getChannelData(u),h=c.getChannelData(u);a.fill(0),l.fill(0),ig(i,s,n,r,o,a,l,0,32,t,h)}return c})(await r(e),u,o,a)})()}const e=await c;return f.buffer=e,f.start(0),f}return await s(h,u,p,d),p};return{render(e,t,i){const n=l.get(t);return void 0!==n?Promise.resolve(n):h(e,t,i)}}})(bb,jg,pm,Dg,zg,Jb),tv=((e,t)=>(i,n,s)=>{if(void 0===i.createIIRFilter)return t(i,n,s);const r=e(i,(e=>e.createIIRFilter(s.feedforward,s.feedback)));return ag(r,s),r})(jg,Qb),iv=((e,t,i,n,s)=>class extends e{constructor(e,r){const o=n(e),a=s(o),l=h(h({},tg),r),c=t(o,a?null:e.baseLatency,l);super(e,!1,c,a?i(l.feedback,l.feedforward):null),(e=>{var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(i,n,s)=>{if(i.length!==n.length||n.length!==s.length)throw eg();return t.call(e,i,n,s)})})(c),this._nativeIIRFilterNode=c}getFrequencyResponse(e,t,i){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,i)}})(Jg,tv,ev,Xg,Bg),nv=((e,t,i,n,s)=>(r,o)=>{const a=o.listener,{forwardX:l,forwardY:c,forwardZ:h,positionX:u,positionY:d,positionZ:f,upX:p,upY:m,upZ:g}=void 0===a.forwardX?(()=>{const l=t(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),c=s(o),h=n(o,256,9,0),u=(t,n)=>{const s=i(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:n});return s.connect(l,0,t),s.start(),Object.defineProperty(s.offset,"defaultValue",{get:()=>n}),e({context:r},c,s.offset,Qp,Zp)};let d=[0,0,-1,0,1,0],f=[0,0,0];return h.onaudioprocess=e=>{let{inputBuffer:t}=e;const i=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0],t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];i.some(((e,t)=>e!==d[t]))&&(a.setOrientation(...i),d=i);const n=[t.getChannelData(6)[0],t.getChannelData(7)[0],t.getChannelData(8)[0]];n.some(((e,t)=>e!==f[t]))&&(a.setPosition(...n),f=n)},l.connect(h),{forwardX:u(0,0),forwardY:u(1,0),forwardZ:u(2,-1),positionX:u(6,0),positionY:u(7,0),positionZ:u(8,0),upX:u(3,0),upY:u(4,1),upZ:u(5,0)}})():a;return{get forwardX(){return l},get forwardY(){return c},get forwardZ(){return h},get positionX(){return u},get positionY(){return d},get positionZ(){return f},get upX(){return p},get upY(){return m},get upZ(){return g}}})(xb,Ab,Db,Zb,Bg),sv=new WeakMap,rv=((e,t,i,n,s,r)=>class extends i{constructor(i,r){super(i),this._nativeContext=i,Op.set(this,i);const o=i.sampleRate;Object.defineProperty(i,"sampleRate",{get:()=>o}),n(i)&&s.set(i,new Set),this._destination=new e(this,r),this._listener=t(this,i),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"===typeof e?r(this,e):null;this._nativeContext.onstatechange=t;const i=this._nativeContext.onstatechange;this._onstatechange=null!==i&&i===t?e:i}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(wb,nv,qg,Bg,sv,Lg),ov=((e,t,i,n,s,r,o)=>(a,l)=>{const c=i(a,(e=>e.createOscillator()));return ag(c,l),cg(c,l,"detune"),cg(c,l,"frequency"),void 0!==l.periodicWave?c.setPeriodicWave(l.periodicWave):og(c,l,"type"),t(n,(()=>n(a)))||hg(c),t(s,(()=>s(a)))||o(c,a),t(r,(()=>r(a)))||ug(c),e(a,c),c})(hb,kg,jg,ub,db,fb,pb),av=((e,t,i,n,s)=>()=>{const r=new WeakMap;let o=null,a=null,l=null;return{set periodicWave(e){o=e},set start(e){a=e},set stop(e){l=e},render(c,h,u){const d=r.get(h);return void 0!==d?Promise.resolve(d):(async(c,h,u)=>{let d=i(c);const f=Xp(d,h);if(!f){const e={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:null===o?void 0:o,type:d.type};d=t(h,e),null!==a&&d.start(a),null!==l&&d.stop(l)}return r.set(h,d),f?(await e(h,c.detune,d.detune,u),await e(h,c.frequency,d.frequency,u)):(await n(h,c.detune,d.detune,u),await n(h,c.frequency,d.frequency,u)),await s(c,h,d,u),d})(c,h,u)}}})(gb,ov,pm,vb,zg),lv=((e,t,i,n,s,r,o,a)=>class extends e{constructor(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wg;const a=r(e),l=h(h({},wg),i),c=n(a,l),u=o(a),d=u?s():null,f=e.sampleRate/2;super(e,!1,c,d),this._detune=t(this,u,c.detune,153600,-153600),this._frequency=t(this,u,c.frequency,f,-f),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=d,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"===typeof e?a(this,e):null;this._nativeOscillatorNode.onended=t;const i=this._nativeOscillatorNode.onended;this._onended=null!==i&&i===t?e:i}get type(){return this._nativeOscillatorNode.type}set type(e){if(this._nativeOscillatorNode.type=e,"custom"===e)throw i();null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer)this._oscillatorNodeRenderer.start=e;else{tm(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),setTimeout((()=>im(this)),1e3)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(Jg,xb,Jm,ov,av,Xg,Bg,Lg),cv=(e=>(t,i)=>{const n=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=t.createBuffer(1,2,t.sampleRate);return n.buffer=s,n.loop=!0,n.connect(i),n.start(),()=>{n.stop(),n.disconnect(i)}})(bb),hv=((e,t,i,n,s,o)=>(a,l)=>{let{curve:c,oversample:u}=l,d=r(l,xg);const f=i(a,(e=>e.createWaveShaper())),p=i(a,(e=>e.createWaveShaper()));ag(f,d),ag(p,d);const m=n(a,h(h({},d),{},{gain:1})),g=n(a,h(h({},d),{},{gain:-1})),b=n(a,h(h({},d),{},{gain:1})),v=n(a,h(h({},d),{},{gain:-1}));let y=null,x=!1,S=null;const E={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(e){m.channelCount=e,g.channelCount=e,f.channelCount=e,b.channelCount=e,p.channelCount=e,v.channelCount=e},get channelCountMode(){return f.channelCountMode},set channelCountMode(e){m.channelCountMode=e,g.channelCountMode=e,f.channelCountMode=e,b.channelCountMode=e,p.channelCountMode=e,v.channelCountMode=e},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(e){m.channelInterpretation=e,g.channelInterpretation=e,f.channelInterpretation=e,b.channelInterpretation=e,p.channelInterpretation=e,v.channelInterpretation=e},get context(){return f.context},get curve(){return S},set curve(i){if(null!==c&&c.length<2)throw t();if(null===i)f.curve=i,p.curve=i;else{const e=i.length,t=new Float32Array(e+2-e%2),n=new Float32Array(e+2-e%2);t[0]=i[0],n[0]=-i[e-1];const s=Math.ceil((e+1)/2),r=(e+1)/2-1;for(let o=1;o<s;o+=1){const a=o/s*r,l=Math.floor(a),c=Math.ceil(a);t[o]=l===c?i[l]:(1-(a-l))*i[l]+(1-(c-a))*i[c],n[o]=l===c?-i[e-1-l]:-(1-(a-l))*i[e-1-l]-(1-(c-a))*i[e-1-c]}t[s]=e%2===1?i[s-1]:(i[s-2]+i[s-1])/2,f.curve=t,p.curve=n}S=i,x&&(s(S)&&null===y?y=e(a,m):null!==y&&(y(),y=null))},get inputs(){return[m]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(e){f.oversample=e,p.oversample=e},addEventListener(){return m.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return m.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return m.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};c!==E.curve&&(E.curve=c),u!==E.oversample&&(E.oversample=u);return o(pg(E,b),(()=>{m.connect(f).connect(b),m.connect(g).connect(p).connect(v).connect(b),x=!0,s(S)&&(y=e(a,m))}),(()=>{m.disconnect(f),f.disconnect(b),m.disconnect(g),g.disconnect(p),p.disconnect(v),v.disconnect(b),x=!1,null!==y&&(y(),y=null)}))})(cv,Jm,jg,cb,Ag,Pb),uv=((e,t,i,n,s,r,o)=>(a,l)=>{const c=i(a,(e=>e.createWaveShaper()));try{return c.curve=new Float32Array([1]),n(a,l)}catch(f){}ag(c,l);const h=l.curve;if(null!==h&&h.length<2)throw t();og(c,l,"curve"),og(c,l,"oversample");let u=null,d=!1;o(c,"curve",(e=>()=>e.call(c)),(t=>i=>(t.call(c,i),d&&(s(i)&&null===u?u=e(a,c):s(i)||null===u||(u(),u=null)),i)));return r(c,(()=>{d=!0,s(c.curve)&&(u=e(a,c))}),(()=>{d=!1,null!==u&&(u(),u=null)}))})(cv,Jm,jg,hv,Ag,Pb,Ng),dv=((e,t,i,n,s,o,a,l,c,u)=>(d,f)=>{let{coneInnerAngle:p,coneOuterAngle:m,coneOuterGain:g,distanceModel:b,maxDistance:v,orientationX:y,orientationY:x,orientationZ:S,panningModel:E,positionX:w,positionY:T,positionZ:_,refDistance:M,rolloffFactor:P}=f,C=r(f,vg);const A=i(d,(e=>e.createPanner()));if(C.channelCount>2)throw l();if("max"===C.channelCountMode)throw l();ag(A,C);const N={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},L=n(d,h(h({},N),{},{channelInterpretation:"speakers",numberOfInputs:6})),k=s(d,h(h({},C),{},{gain:1})),I=s(d,h(h({},N),{},{gain:1})),R=s(d,h(h({},N),{},{gain:0})),O=s(d,h(h({},N),{},{gain:0})),D=s(d,h(h({},N),{},{gain:0})),B=s(d,h(h({},N),{},{gain:0})),F=s(d,h(h({},N),{},{gain:0})),V=o(d,256,6,1),j=a(d,h(h({},N),{},{curve:new Float32Array([1,1]),oversample:"none"}));let G=[y,x,S],W=[w,T,_];V.onaudioprocess=e=>{let{inputBuffer:t}=e;const i=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0]];i.some(((e,t)=>e!==G[t]))&&(A.setOrientation(...i),G=i);const n=[t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];n.some(((e,t)=>e!==W[t]))&&(A.setPosition(...n),W=n)},Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0});const z={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(e){if(e>2)throw l();k.channelCount=e,A.channelCount=e},get channelCountMode(){return A.channelCountMode},set channelCountMode(e){if("max"===e)throw l();k.channelCountMode=e,A.channelCountMode=e},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(e){k.channelInterpretation=e,A.channelInterpretation=e},get coneInnerAngle(){return A.coneInnerAngle},set coneInnerAngle(e){A.coneInnerAngle=e},get coneOuterAngle(){return A.coneOuterAngle},set coneOuterAngle(e){A.coneOuterAngle=e},get coneOuterGain(){return A.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();A.coneOuterGain=e},get context(){return A.context},get distanceModel(){return A.distanceModel},set distanceModel(e){A.distanceModel=e},get inputs(){return[k]},get maxDistance(){return A.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;A.maxDistance=e},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get orientationX(){return I.gain},get orientationY(){return R.gain},get orientationZ(){return O.gain},get panningModel(){return A.panningModel},set panningModel(e){if(A.panningModel=e,A.panningModel!==e&&"HRTF"===e)throw l()},get positionX(){return D.gain},get positionY(){return B.gain},get positionZ(){return F.gain},get refDistance(){return A.refDistance},set refDistance(e){if(e<0)throw new RangeError;A.refDistance=e},get rolloffFactor(){return A.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;A.rolloffFactor=e},addEventListener(){return k.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return k.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return k.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};p!==z.coneInnerAngle&&(z.coneInnerAngle=p),m!==z.coneOuterAngle&&(z.coneOuterAngle=m),g!==z.coneOuterGain&&(z.coneOuterGain=g),b!==z.distanceModel&&(z.distanceModel=b),v!==z.maxDistance&&(z.maxDistance=v),y!==z.orientationX.value&&(z.orientationX.value=y),x!==z.orientationY.value&&(z.orientationY.value=x),S!==z.orientationZ.value&&(z.orientationZ.value=S),E!==z.panningModel&&(z.panningModel=E),w!==z.positionX.value&&(z.positionX.value=w),T!==z.positionY.value&&(z.positionY.value=T),_!==z.positionZ.value&&(z.positionZ.value=_),M!==z.refDistance&&(z.refDistance=M),P!==z.rolloffFactor&&(z.rolloffFactor=P),1===G[0]&&0===G[1]&&0===G[2]||A.setOrientation(...G),0===W[0]&&0===W[1]&&0===W[2]||A.setPosition(...W);return u(pg(z,A),(()=>{k.connect(A),e(k,j,0,0),j.connect(I).connect(L,0,0),j.connect(R).connect(L,0,1),j.connect(O).connect(L,0,2),j.connect(D).connect(L,0,3),j.connect(B).connect(L,0,4),j.connect(F).connect(L,0,5),L.connect(V).connect(d.destination)}),(()=>{k.disconnect(A),c(k,j,0,0),j.disconnect(I),I.disconnect(L),j.disconnect(R),R.disconnect(L),j.disconnect(O),O.disconnect(L),j.disconnect(D),D.disconnect(L),j.disconnect(B),B.disconnect(L),j.disconnect(F),F.disconnect(L),L.disconnect(V),V.disconnect(d.destination)}))})(cm,Jm,jg,Ab,cb,Zb,uv,Sg,um,Pb),fv=((e,t)=>(i,n)=>{const s=e(i,(e=>e.createPanner()));return void 0===s.orientationX?t(i,n):(ag(s,n),cg(s,n,"orientationX"),cg(s,n,"orientationY"),cg(s,n,"orientationZ"),cg(s,n,"positionX"),cg(s,n,"positionY"),cg(s,n,"positionZ"),og(s,n,"coneInnerAngle"),og(s,n,"coneOuterAngle"),og(s,n,"coneOuterGain"),og(s,n,"distanceModel"),og(s,n,"maxDistance"),og(s,n,"panningModel"),og(s,n,"refDistance"),og(s,n,"rolloffFactor"),s)})(jg,dv),pv=((e,t,i,n,s,r,o,a,l,c)=>()=>{const u=new WeakMap;let d=null;return{render(f,p,m){const g=u.get(p);return void 0!==g?Promise.resolve(g):(async(f,p,m)=>{let g=null,b=r(f);const v={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation},y=h(h({},v),{},{coneInnerAngle:b.coneInnerAngle,coneOuterAngle:b.coneOuterAngle,coneOuterGain:b.coneOuterGain,distanceModel:b.distanceModel,maxDistance:b.maxDistance,panningModel:b.panningModel,refDistance:b.refDistance,rolloffFactor:b.rolloffFactor}),x=Xp(b,p);if("bufferSize"in b)g=n(p,h(h({},v),{},{gain:1}));else if(!x){const e=h(h({},y),{},{orientationX:b.orientationX.value,orientationY:b.orientationY.value,orientationZ:b.orientationZ.value,positionX:b.positionX.value,positionY:b.positionY.value,positionZ:b.positionZ.value});b=s(p,e)}if(u.set(p,null===g?b:g),null!==g){if(null===d){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new o(6,f.context.length,p.sampleRate),n=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});n.connect(e.destination),d=(async()=>{const t=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map((async(t,n)=>{const s=i(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===n?1:0});return await a(e,t,s.offset,m),s})));for(let e=0;e<6;e+=1)t[e].connect(n,0,e),t[e].start(0);return c(e)})()}const e=await d,r=n(p,h(h({},v),{},{gain:1}));await l(f,p,r,m);const u=[];for(let t=0;t<e.numberOfChannels;t+=1)u.push(e.getChannelData(t));let b=[u[0][0],u[1][0],u[2][0]],x=[u[3][0],u[4][0],u[5][0]],S=n(p,h(h({},v),{},{gain:1})),E=s(p,h(h({},y),{},{orientationX:b[0],orientationY:b[1],orientationZ:b[2],positionX:x[0],positionY:x[1],positionZ:x[2]}));r.connect(S).connect(E.inputs[0]),E.connect(g);for(let t=128;t<e.length;t+=128){const e=[u[0][t],u[1][t],u[2][t]],i=[u[3][t],u[4][t],u[5][t]];if(e.some(((e,t)=>e!==b[t]))||i.some(((e,t)=>e!==x[t]))){b=e,x=i;const o=t/p.sampleRate;S.gain.setValueAtTime(0,o),S=n(p,h(h({},v),{},{gain:0})),E=s(p,h(h({},y),{},{orientationX:b[0],orientationY:b[1],orientationZ:b[2],positionX:x[0],positionY:x[1],positionZ:x[2]})),S.gain.setValueAtTime(1,o),r.connect(S).connect(E.inputs[0]),E.connect(g)}}return g}return x?(await e(p,f.orientationX,b.orientationX,m),await e(p,f.orientationY,b.orientationY,m),await e(p,f.orientationZ,b.orientationZ,m),await e(p,f.positionX,b.positionX,m),await e(p,f.positionY,b.positionY,m),await e(p,f.positionZ,b.positionZ,m)):(await a(p,f.orientationX,b.orientationX,m),await a(p,f.orientationY,b.orientationY,m),await a(p,f.orientationZ,b.orientationZ,m),await a(p,f.positionX,b.positionX,m),await a(p,f.positionY,b.positionY,m),await a(p,f.positionZ,b.positionZ,m)),lm(b)?await l(f,p,b.inputs[0],m):await l(f,p,b,m),b})(f,p,m)}}})(gb,Ab,Db,cb,fv,pm,Dg,vb,zg,Jb),mv=((e,t,i,n,s,r)=>class extends e{constructor(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tg;const a=s(e),l=h(h({},Tg),o),c=i(a,l),u=r(a);super(e,!1,c,u?n():null),this._nativePannerNode=c,this._orientationX=t(this,u,c.orientationX,Qp,Zp),this._orientationY=t(this,u,c.orientationY,Qp,Zp),this._orientationZ=t(this,u,c.orientationZ,Qp,Zp),this._positionX=t(this,u,c.positionX,Qp,Zp),this._positionY=t(this,u,c.positionY,Qp,Zp),this._positionZ=t(this,u,c.positionZ,Qp,Zp)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(Jg,xb,fv,pv,Xg,Bg),gv=(e=>(t,i)=>{let{disableNormalization:n,imag:s,real:r}=i;const o=e(t),a=new Float32Array(s),l=new Float32Array(r);return null!==o?o.createPeriodicWave(l,a,{disableNormalization:n}):t.createPeriodicWave(l,a,{disableNormalization:n})})(Vg),bv=((e,t,i)=>class n{constructor(n,s){const r=t(n),o=h(h({},_g),s),a=e(r,o);return i.add(a),a}static[Symbol.hasInstance](e){return null!==e&&"object"===typeof e&&Object.getPrototypeOf(e)===n.prototype||i.has(e)}})(gv,Xg,new WeakSet),vv=((e,t,i,n,s,o)=>{const a=16385,l=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},d=h(h({},u),{},{oversample:"none"}),f=(e,r,o,f,p)=>{if(1===r)return((e,t,s,r)=>{const o=new Float32Array(a),f=new Float32Array(a);for(let i=0;i<a;i+=1){const e=i/16384*c;o[i]=Math.cos(e),f[i]=Math.sin(e)}const p=i(e,h(h({},u),{},{gain:0})),m=n(e,h(h({},d),{},{curve:o})),g=n(e,h(h({},d),{},{curve:l})),b=i(e,h(h({},u),{},{gain:0})),v=n(e,h(h({},d),{},{curve:f}));return{connectGraph(){t.connect(p),t.connect(g.inputs[0]),t.connect(b),g.connect(s),s.connect(m.inputs[0]),s.connect(v.inputs[0]),m.connect(p.gain),v.connect(b.gain),p.connect(r,0,0),b.connect(r,0,1)},disconnectGraph(){t.disconnect(p),t.disconnect(g.inputs[0]),t.disconnect(b),g.disconnect(s),s.disconnect(m.inputs[0]),s.disconnect(v.inputs[0]),m.disconnect(p.gain),v.disconnect(b.gain),p.disconnect(r,0,0),b.disconnect(r,0,1)}}})(e,o,f,p);if(2===r)return((e,s,r,o)=>{const f=new Float32Array(a),p=new Float32Array(a),m=new Float32Array(a),g=new Float32Array(a),b=Math.floor(8192.5);for(let t=0;t<a;t+=1)if(t>b){const e=(t-b)/(16384-b)*c;f[t]=Math.cos(e),p[t]=Math.sin(e),m[t]=0,g[t]=1}else{const e=t/(16384-b)*c;f[t]=1,p[t]=0,m[t]=Math.cos(e),g[t]=Math.sin(e)}const v=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=i(e,h(h({},u),{},{gain:0})),x=n(e,h(h({},d),{},{curve:f})),S=i(e,h(h({},u),{},{gain:0})),E=n(e,h(h({},d),{},{curve:p})),w=n(e,h(h({},d),{},{curve:l})),T=i(e,h(h({},u),{},{gain:0})),_=n(e,h(h({},d),{},{curve:m})),M=i(e,h(h({},u),{},{gain:0})),P=n(e,h(h({},d),{},{curve:g}));return{connectGraph(){s.connect(v),s.connect(w.inputs[0]),v.connect(y,1),v.connect(S,1),v.connect(T,1),v.connect(M,1),w.connect(r),r.connect(x.inputs[0]),r.connect(E.inputs[0]),r.connect(_.inputs[0]),r.connect(P.inputs[0]),x.connect(y.gain),E.connect(S.gain),_.connect(T.gain),P.connect(M.gain),y.connect(o,0,0),T.connect(o,0,0),S.connect(o,0,1),M.connect(o,0,1)},disconnectGraph(){s.disconnect(v),s.disconnect(w.inputs[0]),v.disconnect(y,1),v.disconnect(S,1),v.disconnect(T,1),v.disconnect(M,1),w.disconnect(r),r.disconnect(x.inputs[0]),r.disconnect(E.inputs[0]),r.disconnect(_.inputs[0]),r.disconnect(P.inputs[0]),x.disconnect(y.gain),E.disconnect(S.gain),_.disconnect(T.gain),P.disconnect(M.gain),y.disconnect(o,0,0),T.disconnect(o,0,0),S.disconnect(o,0,1),M.disconnect(o,0,1)}}})(e,o,f,p);throw s()};return(t,n)=>{let{channelCount:a,channelCountMode:l,pan:c}=n,u=r(n,yg);if("max"===l)throw s();const d=e(t,h(h({},u),{},{channelCount:1,channelCountMode:l,numberOfInputs:2})),p=i(t,h(h({},u),{},{channelCount:a,channelCountMode:l,gain:1})),m=i(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:c});let{connectGraph:g,disconnectGraph:b}=f(t,a,p,m,d);Object.defineProperty(m.gain,"defaultValue",{get:()=>0});const v={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(e){p.channelCount!==e&&(y&&b(),({connectGraph:g,disconnectGraph:b}=f(t,e,p,m,d)),y&&g()),p.channelCount=e},get channelCountMode(){return p.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw s();p.channelCountMode=e},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(e){p.channelInterpretation=e},get context(){return p.context},get inputs(){return[p]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get pan(){return m.gain},addEventListener(){return p.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return p.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return p.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};let y=!1;return o(pg(v,d),(()=>{g(),y=!0}),(()=>{b(),y=!1}))}})(Ab,kb,cb,uv,Sg,Pb),yv=((e,t,i)=>(n,s)=>e(n,(e=>{const r=s.channelCountMode;if("clamped-max"===r)throw i();if(void 0===n.createStereoPanner)return t(n,s);const o=e.createStereoPanner();return ag(o,s),cg(o,s,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>r,set:e=>{if(e!==r)throw i()}}),o})))(jg,vv,Sg),xv=((e,t,i,n,s)=>()=>{const r=new WeakMap;return{render(o,a,l){const c=r.get(a);return void 0!==c?Promise.resolve(c):(async(o,a,l)=>{let c=i(o);const h=Xp(c,a);if(!h){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=t(a,e)}return r.set(a,c),h?await e(a,o.pan,c.pan,l):await n(a,o.pan,c.pan,l),lm(c)?await s(o,a,c.inputs[0],l):await s(o,a,c,l),c})(o,a,l)}}})(gb,yv,pm,vb,zg),Sv=((e,t,i,n,s,r)=>class extends e{constructor(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mg;const a=s(e),l=h(h({},Mg),o),c=i(a,l),u=r(a);super(e,!1,c,u?n():null),this._pan=t(this,u,c.pan,1,-1)}get pan(){return this._pan}})(Jg,xb,yv,xv,Xg,Bg),Ev=((e,t,i)=>()=>{const n=new WeakMap;return{render(s,r,o){const a=n.get(r);return void 0!==a?Promise.resolve(a):(async(s,r,o)=>{let a=t(s);if(!Xp(a,r)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=e(r,t)}return n.set(r,a),lm(a)?await i(s,r,a.inputs[0],o):await i(s,r,a,o),a})(s,r,o)}}})(uv,pm,zg),wv=((e,t,i,n,s,r)=>class extends e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cg;const o=s(e),a=h(h({},Cg),t),l=i(o,a);super(e,!0,l,r(o)?n():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=l}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(Jg,Jm,uv,Ev,Xg,Bg),Tv=(e=>null!==e&&e.isSecureContext)(Og),_v=(e=>(t,i,n)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*i)},currentTime:{configurable:!0,get:()=>t}});try{return n()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(Og),Mv=Tv?((e,t,i,n,s,r,o,a,l)=>function(c,h){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"};const d=r(c),f=new URL(h,l.location.href).toString();if(void 0!==d.audioWorklet)return n(h).then((e=>{const[t,i]=Wp(e,f),n="".concat(t,";(registerProcessor=>{").concat(i,"\n})((n,p)=>registerProcessor(n,class extends p{process(i,o,p){return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}))"),r=new Blob([n],{type:"application/javascript; charset=utf-8"}),o=URL.createObjectURL(r),a=s(d);return(null!==a?a:d).audioWorklet.addModule(o,u).then((()=>URL.revokeObjectURL(o))).catch((e=>{throw URL.revokeObjectURL(o),void 0!==e.code&&"SyntaxError"!==e.name||(e.code=12),e}))}));const p=a.get(c);if(void 0!==p&&p.has(h))return Promise.resolve();const m=o.get(c);if(void 0!==m){const e=m.get(h);if(void 0!==e)return e}const g=n(h).then((e=>{const[i,n]=Wp(e,f),s="".concat(i,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(n,"\n})})(window,'_AWGS')");return t(s)})).then((()=>{const t=l._AWGS.pop();if(void 0===t)throw new SyntaxError;i(d.currentTime,d.sampleRate,(()=>t(class{},void 0,((t,i)=>{if(""===t.trim())throw e();const n=Fp.get(d);if(void 0!==n){if(n.has(t))throw e();Up(i),zp(i.parameterDescriptors),n.set(t,i)}else Up(i),zp(i.parameterDescriptors),Fp.set(d,new Map([[t,i]]))}),d.sampleRate,void 0,void 0)))})).catch((e=>{throw void 0!==e.code&&"SyntaxError"!==e.name||(e.code=12),e}));return void 0===m?o.set(c,new Map([[h,g]])):m.set(h,g),g.then((()=>{const e=a.get(c);void 0===e?a.set(c,new Set([h])):e.add(h)})).catch((()=>{})).then((()=>{const e=o.get(c);void 0!==e&&e.delete(h)})),g})(Sg,(e=>t=>new Promise(((i,n)=>{if(null===e)return void n(new SyntaxError);const s=e.document.head;if(null===s)n(new SyntaxError);else{const r=e.document.createElement("script"),o=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(o),l=e.onerror,c=()=>{e.onerror=l,URL.revokeObjectURL(a)};e.onerror=(t,i,s,r,o)=>i===a||i===e.location.href&&1===s&&1===r?(c(),n(o),!1):null!==l?l(t,i,s,r,o):void 0,r.onerror=()=>{c(),n(new SyntaxError)},r.onload=()=>{c(),i()},r.src=a,r.type="module",s.appendChild(r)}})))(Og),_v,(e=>async t=>{try{const e=await fetch(t);if(e.ok)return e.text()}catch(i){}throw e()})((()=>{try{return new DOMException("","AbortError")}catch(e){return e.code=20,e.name="AbortError",e}})),Vg,Xg,new WeakMap,new WeakMap,Og):void 0,Pv=((e,t)=>i=>e(i)||t(i))($g,Bg),Cv=((e,t,i,n,s,r,o,a,l,c,h,u,d)=>(f,p)=>{const m=o(f)?f:r(f);if(s.has(p)){const e=i();return Promise.reject(e)}try{s.add(p)}catch(g){}if(t(h,(()=>h(m)))){return("closed"===m.state&&null!==l&&a(m)?new l(1,1,m.sampleRate):m).decodeAudioData(p).catch((e=>{if(e instanceof DOMException&&"NotSupportedError"===e.name)throw new TypeError;throw e})).then((i=>(t(c,(()=>c(i)))||d(i),e.add(i),i)))}return new Promise(((t,i)=>{const s=()=>{try{(e=>{const{port1:t}=new MessageChannel;t.postMessage(e,[e])})(p)}catch(e){}},r=e=>{i(e),s()};try{m.decodeAudioData(p,(i=>{"function"!==typeof i.copyFromChannel&&(u(i),qp(i)),e.add(i),s(),t(i)}),(e=>{r(null===e?n():e)}))}catch(o){r(o)}}))})(ib,kg,(()=>{try{return new DOMException("","DataCloneError")}catch(e){return e.code=25,e.name="DataCloneError",e}}),(()=>{try{return new DOMException("","EncodingError")}catch(e){return e.code=0,e.name="EncodingError",e}}),new WeakSet,Xg,Pv,Bg,Dg,Yp,sg,ob,ab),Av=((e,t,i,n,s,r,o,a,l,c,u,d,f,p,m,g,b,v,y,x)=>class extends m{constructor(t,i){super(t,i),this._nativeContext=t,this._audioWorklet=void 0===e?void 0:{addModule:(t,i)=>e(this,t,i)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new s(this)}createBuffer(e,t,n){return new i({length:t,numberOfChannels:e,sampleRate:n})}createBufferSource(){return new n(this)}createChannelMerger(){return new r(this,{numberOfInputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createChannelSplitter(){return new o(this,{numberOfOutputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(){return new u(this,{maxDelayTime:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1})}createDynamicsCompressor(){return new d(this)}createGain(){return new f(this)}createIIRFilter(e,t){return new p(this,{feedback:t,feedforward:e})}createOscillator(){return new g(this)}createPanner(){return new b(this)}createPeriodicWave(e,t){return new v(this,h(h({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1}),{},{imag:t,real:e}))}createStereoPanner(){return new y(this)}createWaveShaper(){return new x(this)}decodeAudioData(e,t,i){return c(this._nativeContext,e).then((e=>("function"===typeof t&&t(e),e))).catch((e=>{throw"function"===typeof i&&i(e),e}))}})(Mv,tb,lb,Eb,Mb,Lb,Rb,Fb,Wb,Cv,Hb,Kb,$b,iv,rv,lv,mv,bv,Sv,wv),Nv=(e=>(t,i)=>e(t,(e=>e.createMediaElementSource(i.mediaElement))))(jg),Lv=((e,t,i,n)=>class extends e{constructor(e,s){const r=i(e),o=t(r,s);if(n(r))throw TypeError();super(e,!0,o,null),this._mediaElement=s.mediaElement,this._nativeMediaElementAudioSourceNode=o}get mediaElement(){return void 0===this._nativeMediaElementAudioSourceNode.mediaElement?this._mediaElement:this._nativeMediaElementAudioSourceNode.mediaElement}})(Jg,Nv,Xg,Bg),kv=((e,t)=>(i,n)=>{if(void 0===i.createMediaStreamDestination)throw t();const s=e(i,(e=>e.createMediaStreamDestination()));return ag(s,n),1===s.numberOfOutputs&&Object.defineProperty(s,"numberOfOutputs",{get:()=>0}),s})(jg,Sg),Iv=((e,t,i,n)=>class extends e{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ng;const r=i(e);if(n(r))throw new TypeError;const o=h(h({},ng),s),a=t(r,o);super(e,!1,a,null),this._nativeMediaStreamAudioDestinationNode=a}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(Jg,kv,Xg,Bg),Rv=(e=>(t,i)=>{let{mediaStream:n}=i;const s=n.getAudioTracks(),r=e(t,(e=>{s.sort(((e,t)=>e.id<t.id?-1:e.id>t.id?1:0));const t=s.slice(0,1);return e.createMediaStreamSource(new MediaStream(t))}));return Object.defineProperty(r,"mediaStream",{value:n}),r})(jg),Ov=((e,t,i,n)=>class extends e{constructor(e,s){const r=i(e),o=t(r,s);if(n(r))throw new TypeError;super(e,!0,o,null),this._nativeMediaStreamAudioSourceNode=o}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(Jg,Rv,Xg,Bg),Dv=((e,t,i)=>(n,s)=>{let{mediaStreamTrack:r}=s;return"function"===typeof n.createMediaStreamTrackSource?t(n,(e=>e.createMediaStreamTrackSource(r))):t(n,(t=>{const n=new MediaStream([r]),s=t.createMediaStreamSource(n);if("audio"!==r.kind)throw e();if(i(t))throw new TypeError;return s}))})(Jm,jg,Bg),Bv=((e,t,i)=>class extends e{constructor(e,n){const s=i(e);super(e,!0,t(s,n),null)}})(Jg,Dv,Xg),Fv=((e,t,i,n,s,r,o,a,l)=>class extends e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null===l)throw new Error("Missing the native AudioContext constructor.");const t=new l(e);if(null===t)throw n();if(!sm(e.latencyHint))throw new TypeError("The provided value '".concat(e.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==e.sampleRate&&t.sampleRate!==e.sampleRate)throw i();super(t,2);const{latencyHint:s}=e,{sampleRate:r}=t;if(this._baseLatency="number"===typeof t.baseLatency?t.baseLatency:"balanced"===s?512/r:"interactive"===s||void 0===s?256/r:"playback"===s?1024/r:128*Math.max(2,Math.min(128,Math.round(s*r/128)))/r,this._nativeAudioContext=t,this._state=null,"running"===t.state){this._state="suspended";const e=()=>{"suspended"===this._state&&(this._state=null),t.removeEventListener("statechange",e)};t.addEventListener("statechange",e)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw t()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close())}createMediaElementSource(e){return new s(this,{mediaElement:e})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(e){return new o(this,{mediaStream:e})}createMediaStreamTrackSource(e){return new a(this,{mediaStreamTrack:e})}resume(){return"suspended"===this._state?new Promise(((e,t)=>{const i=()=>{this._nativeAudioContext.removeEventListener("statechange",i),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",i)})):this._nativeAudioContext.resume().catch((e=>{if(void 0===e||15===e.code)throw t();throw e}))}suspend(){return this._nativeAudioContext.suspend().catch((e=>{if(void 0===e)throw t();throw e}))}})(Av,Jm,Sg,Pg,Lv,Iv,Ov,Bv,Fg),Vv=(e=>t=>{const i=e.get(t);if(void 0===i)throw new Error("The context has no set of AudioWorkletNodes.");return i})(sv),jv=(e=>(t,i)=>{e(t).add(i)})(Vv),Gv=(e=>function(t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=t[arguments.length>2&&void 0!==arguments[2]?arguments[2]:0];if(void 0===s)throw e();return Tm(i)?s.connect(i,0,n):s.connect(i,0)})(Kp),Wv=(e=>(t,i)=>{e(t).delete(i)})(Vv),zv=(e=>function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===i?t.forEach((e=>e.disconnect())):"number"===typeof i?$m(e,t,i).disconnect():Tm(i)?void 0===n?t.forEach((e=>e.disconnect(i))):void 0===s?$m(e,t,n).disconnect(i,0):$m(e,t,n).disconnect(i,0,s):void 0===n?t.forEach((e=>e.disconnect(i))):$m(e,t,n).disconnect(i,0)})(Kp),Uv=((e,t,i,n,s,r,o,a,l,c,u,d,f)=>(p,m,g,b)=>{if(0===b.numberOfInputs&&0===b.numberOfOutputs)throw c();if(void 0!==b.outputChannelCount){if(b.outputChannelCount.some((e=>e<1)))throw c();if(b.outputChannelCount.length!==b.numberOfOutputs)throw i()}if("explicit"!==b.channelCountMode)throw c();const v=b.channelCount*b.numberOfInputs,y=b.outputChannelCount.reduce(((e,t)=>e+t),0),x=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length;if(v+x>6||y>6)throw c();const S=new MessageChannel,E=[],w=[];for(let e=0;e<b.numberOfInputs;e+=1)E.push(a(p,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),w.push(r(p,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));const T=[];if(void 0!==g.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:i,name:n}of g.parameterDescriptors){const s=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==b.parameterData[n]?b.parameterData[n]:void 0===e?0:e});Object.defineProperties(s.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?Qp:t},minValue:{get:()=>void 0===i?Zp:i}}),T.push(s)}const _=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+x)}),M=dg(m,p.sampleRate),P=l(p,M,v+x,Math.max(1,y)),C=r(p,{channelCount:Math.max(1,y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,y)}),A=[];for(let e=0;e<b.numberOfOutputs;e+=1)A.push(s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:b.outputChannelCount[e]}));for(let e=0;e<b.numberOfInputs;e+=1){E[e].connect(w[e]);for(let t=0;t<b.channelCount;t+=1)w[e].connect(_,t,e*b.channelCount+t)}const N=new Bm(void 0===g.parameterDescriptors?[]:g.parameterDescriptors.map(((e,t)=>{let{name:i}=e;const n=T[t];return n.connect(_,0,v+t),n.start(0),[i,n.offset]})));_.connect(P);let L=b.channelInterpretation,k=null;const I=0===b.numberOfOutputs?[P]:A,R={get bufferSize(){return M},get channelCount(){return b.channelCount},set channelCount(e){throw n()},get channelCountMode(){return b.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return L},set channelInterpretation(e){for(const t of E)t.channelInterpretation=e;L=e},get context(){return P.context},get inputs(){return E},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get onprocessorerror(){return k},set onprocessorerror(e){"function"===typeof k&&R.removeEventListener("processorerror",k),k="function"===typeof e?e:null,"function"===typeof k&&R.addEventListener("processorerror",k)},get parameters(){return N},get port(){return S.port2},addEventListener(){return P.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},connect:t.bind(null,I),disconnect:u.bind(null,I),dispatchEvent(){return P.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return P.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},O=new Map;var D,B;S.port1.addEventListener=(D=S.port1.addEventListener,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if("message"===t[0]){const e="function"===typeof t[1]?t[1]:"object"===typeof t[1]&&null!==t[1]&&"function"===typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const i=O.get(t[1]);void 0!==i?t[1]=i:(t[1]=t=>{d(p.currentTime,p.sampleRate,(()=>e(t)))},O.set(e,t[1]))}}return D.call(S.port1,t[0],t[1],t[2])}),S.port1.removeEventListener=(B=S.port1.removeEventListener,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if("message"===t[0]){const e=O.get(t[1]);void 0!==e&&(O.delete(t[1]),t[1]=e)}return B.call(S.port1,t[0],t[1],t[2])});let F=null;Object.defineProperty(S.port1,"onmessage",{get:()=>F,set:e=>{"function"===typeof F&&S.port1.removeEventListener("message",F),F="function"===typeof e?e:null,"function"===typeof F&&(S.port1.addEventListener("message",F),S.port1.start())}}),g.prototype.port=S.port1;let V=null;const j=((e,t,i,n)=>{let s=Vp.get(e);void 0===s&&(s=new WeakMap,Vp.set(e,s));const r=fg(i,n);return s.set(t,r),r})(p,R,g,b);j.then((e=>V=e));const G=Wm(b.numberOfInputs,b.channelCount),W=Wm(b.numberOfOutputs,b.outputChannelCount),z=void 0===g.parameterDescriptors?[]:g.parameterDescriptors.reduce(((e,t)=>{let{name:i}=t;return h(h({},e),{},{[i]:new Float32Array(128)})}),{});let U=!0;const H=()=>{b.numberOfOutputs>0&&P.disconnect(C);for(let e=0,t=0;e<b.numberOfOutputs;e+=1){const i=A[e];for(let n=0;n<b.outputChannelCount[e];n+=1)C.disconnect(i,t+n,n);t+=b.outputChannelCount[e]}};P.onaudioprocess=t=>{let{inputBuffer:i,outputBuffer:n}=t;if(null!==V)for(let r=0;r<M;r+=128){for(let e=0;e<b.numberOfInputs;e+=1)for(let t=0;t<b.channelCount;t+=1)jm(i,G[e],t,t,r);void 0!==g.parameterDescriptors&&g.parameterDescriptors.forEach(((e,t)=>{let{name:n}=e;jm(i,z,n,v+t,r)}));for(let e=0;e<b.numberOfInputs;e+=1)for(let t=0;t<b.outputChannelCount[e];t+=1)0===W[e][t].byteLength&&(W[e][t]=new Float32Array(128));try{const t=G.map(((t,i)=>{const n=e.get(R);return void 0===n||void 0===n.get(i)?[]:t})),i=d(p.currentTime+r/p.sampleRate,p.sampleRate,(()=>V.process(t,W,z)));U=i;for(let e=0,s=0;e<b.numberOfOutputs;e+=1){for(let t=0;t<b.outputChannelCount[e];t+=1)Gm(n,W[e],t,s+t,r);s+=b.outputChannelCount[e]}}catch(s){U=!1,R.dispatchEvent(new ErrorEvent("processorerror",{error:s}))}if(!U){for(let e=0;e<b.numberOfInputs;e+=1){E[e].disconnect(w[e]);for(let t=0;t<b.channelCount;t+=1)w[r].disconnect(_,t,e*b.channelCount+t)}if(void 0!==g.parameterDescriptors){const e=g.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=T[t];e.disconnect(_,0,v+t),e.stop()}}_.disconnect(P),P.onaudioprocess=null,X?H():q();break}}};let X=!1;const Y=a(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),K=()=>P.connect(Y).connect(Y.context.destination),q=()=>{P.disconnect(Y),Y.disconnect()};return K(),f(R,(()=>{if(U){q(),b.numberOfOutputs>0&&P.connect(C);for(let e=0,t=0;e<b.numberOfOutputs;e+=1){const i=A[e];for(let n=0;n<b.outputChannelCount[e];n+=1)C.connect(i,t+n,n);t+=b.outputChannelCount[e]}}X=!0}),(()=>{U&&(K(),H()),X=!1}))})(Hg,Gv,Kp,Jm,Ab,kb,Db,cb,Zb,Sg,zv,_v,Pb),Hv=((e,t,i,n,s,r)=>(o,a,l,c,u,d)=>{if(null!==l)try{const i=t(o,(e=>new l(e,c,d))),s=new Map;let a=null;if(Object.defineProperties(i,{channelCount:{get:()=>d.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>a,set:e=>{"function"===typeof a&&i.removeEventListener("processorerror",a),a="function"===typeof e?e:null,"function"===typeof a&&i.addEventListener("processorerror",a)}}}),i.addEventListener=(p=i.addEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("processorerror"===t[0]){const e="function"===typeof t[1]?t[1]:"object"===typeof t[1]&&null!==t[1]&&"function"===typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const i=s.get(t[1]);void 0!==i?t[1]=i:(t[1]=i=>{e(new ErrorEvent(t[0],h(h({},i),{},{error:new Error})))},s.set(e,t[1]))}}return p.call(i,t[0],t[1],t[2])}),i.removeEventListener=(f=i.removeEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("processorerror"===t[0]){const e=s.get(t[1]);void 0!==e&&(s.delete(t[1]),t[1]=e)}return f.call(i,t[0],t[1],t[2])}),0!==d.numberOfOutputs){const e=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.connect(e).connect(e.context.destination);return r(i,(()=>e.disconnect()),(()=>e.connect(e.context.destination)))}return i}catch(m){if(11===m.code)throw s();throw m}var f,p;if(void 0===u)throw s();return(e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}})(d),i(o,a,u,d)})(Jm,jg,Uv,cb,Sg,Pb),Xv=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(Og),Yv=((e,t,i,n,s,r,o,a,l,c,h,u,d,f,p,m)=>(g,b,v)=>{const y=new WeakMap;let x=null;return{render(S,E,w){a(E,S);const T=y.get(E);return void 0!==T?Promise.resolve(T):(async(a,S,E)=>{let w=h(a),T=null;const _=Xp(w,S);if(null===u){const e=b.outputChannelCount.reduce(((e,t)=>e+t),0),i=s(S,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),r=[];for(let t=0;t<a.numberOfOutputs;t+=1)r.push(n(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:b.outputChannelCount[t]}));const c=o(S,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1});c.connect=t.bind(null,r),c.disconnect=l.bind(null,r),T=[i,r,c]}else _||(w=new u(S,g));if(y.set(S,null===T?w:T[2]),null!==T){if(null===x){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const e=a.channelCount*a.numberOfInputs,t=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,i=e+t,l=async()=>{const l=new d(i,128*Math.ceil(a.context.length/128),S.sampleRate),c=[],h=[];for(let e=0;e<b.numberOfInputs;e+=1)c.push(o(l,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),h.push(s(l,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));const u=await Promise.all(Array.from(a.parameters.values()).map((async e=>{const t=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await f(l,e,t.offset,E),t}))),g=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+t)});for(let e=0;e<b.numberOfInputs;e+=1){c[e].connect(h[e]);for(let t=0;t<b.channelCount;t+=1)h[e].connect(g,t,e*b.channelCount+t)}for(const[t,i]of u.entries())i.connect(g,0,e+t),i.start(0);return g.connect(l.destination),await Promise.all(c.map((e=>p(a,l,e,E)))),m(l)};x=zm(a,0===i?null:await l(),S,b,v,c)}const e=await x,t=i(S,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,h,u]=T;null!==e&&(t.buffer=e,t.start(0)),t.connect(l);for(let i=0,n=0;i<a.numberOfOutputs;i+=1){const e=h[i];for(let t=0;t<b.outputChannelCount[i];t+=1)l.connect(e,n+t,t);n+=b.outputChannelCount[i]}return u}if(_)for(const[t,i]of a.parameters.entries())await e(S,i,w.parameters.get(t),E);else for(const[e,t]of a.parameters.entries())await f(S,t,w.parameters.get(e),E);return await p(a,S,w,E),w})(S,E,w)}}})(gb,Gv,bb,Ab,kb,Db,cb,Wv,zv,_v,pm,Xv,Dg,vb,zg,Jb),Kv=(Tv&&((e,t,i,n,s,r,o,a,l)=>{})(jv,Jg,xb,Yv,Hv,Xg,Bg,Xv,Lg),((e,t,i,n,s)=>{})(Jm,Sg,Pg,rv,Fg),((e,t)=>(i,n,s)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(i,n,s)}catch(r){if("IndexSizeError"===r.name||"SyntaxError"===r.name)throw e();throw r}})(Sg,Dg)),qv=((e,t,i,n,s,r,o,a)=>{const l=[];return(c,h)=>i(c).render(c,h,l).then((()=>Promise.all(Array.from(n(h)).map((e=>i(e).render(e,h,l)))))).then((()=>s(h))).then((i=>("function"!==typeof i.copyFromChannel?(o(i),qp(i)):t(r,(()=>r(i)))||a(i),e.add(i),i)))})(ib,kg,Wg,Vv,Jb,Yp,ob,ab);var $v,Zv,Qv=function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(Sy){r(Sy)}}function a(e){try{l(n.throw(e))}catch(Sy){r(Sy)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};!function(e){e.INIT="INIT",e.PLAYING="PLAYING",e.STOPPED="STOPPED",e.PAUSED="PAUSED"}($v||($v={})),function(e){e.STATE_CHANGE="state-change",e.ITERATION="iteration"}(Zv||(Zv={}));const Jv=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wp;this.defaultBpm=100,this.scoreInstruments=[],this.ready=!1,this.ac=e,this.ac.suspend(),this.instrumentPlayer=t,this.instrumentPlayer.init(this.ac),this.availableInstruments=this.instrumentPlayer.instruments,this.events=new Pp,this.cursor=null,this.sheet=null,this.scheduler=null,this.iterationSteps=0,this.currentIterationStep=0,this.timeoutHandles=[],this.playbackSettings={bpm:this.defaultBpm,masterVolume:1},this.setState($v.INIT)}get wholeNoteLength(){return Math.round(60/this.playbackSettings.bpm*4e3)}getPlaybackInstrument(e){if(!this.sheet)return null;const t=this.sheet.Instruments.flatMap((e=>e.Voices)).find((t=>t.VoiceId===e));return this.availableInstruments.find((e=>e.midiId===t.midiInstrumentId))}setInstrument(e,t){return Qv(this,void 0,void 0,(function*(){yield this.instrumentPlayer.load(t),e.midiInstrumentId=t}))}loadScore(e){return Qv(this,void 0,void 0,(function*(){this.ready=!1,this.sheet=e.Sheet,this.scoreInstruments=this.sheet.Instruments,this.cursor=e.cursor,this.sheet.HasBPMInfo&&this.setBpm(this.sheet.DefaultStartTempoInBpm),yield this.loadInstruments(),this.initInstruments(),this.scheduler=new vp(this.wholeNoteLength,this.ac,((e,t)=>this.notePlaybackCallback(e,t))),this.countAndSetIterationSteps(),this.ready=!0,this.setState($v.STOPPED)}))}initInstruments(){for(const e of this.sheet.Instruments)for(const t of e.Voices)t.midiInstrumentId=e.MidiInstrumentId}loadInstruments(){return Qv(this,void 0,void 0,(function*(){let e=[];for(const t of this.sheet.Instruments){null==this.availableInstruments.find((e=>e.midiId===t.MidiInstrumentId))&&this.fallbackToPiano(t),e.push(this.instrumentPlayer.load(t.MidiInstrumentId))}yield Promise.all(e)}))}fallbackToPiano(e){if(console.warn("Can't find playback instrument for midiInstrumentId ".concat(e.MidiInstrumentId,". Falling back to piano")),e.MidiInstrumentId=0,null==this.availableInstruments.find((e=>0===e.midiId)))throw new Error("Piano fallback failed, grand piano not supported")}play(){return Qv(this,void 0,void 0,(function*(){yield this.ac.resume(),this.state!==$v.INIT&&this.state!==$v.STOPPED||this.cursor.show(),this.setState($v.PLAYING),this.scheduler.start()}))}stop(){return Qv(this,void 0,void 0,(function*(){this.setState($v.STOPPED),this.stopPlayers(),this.clearTimeouts(),this.scheduler.reset(),this.cursor.reset(),this.currentIterationStep=0,this.cursor.hide()}))}pause(){this.setState($v.PAUSED),this.ac.suspend(),this.stopPlayers(),this.scheduler.setIterationStep(this.currentIterationStep),this.scheduler.pause(),this.clearTimeouts()}jumpToStep(e){for(this.pause(),this.currentIterationStep>e&&(this.cursor.reset(),this.currentIterationStep=0);this.currentIterationStep<e;)this.cursor.next(),++this.currentIterationStep;let t=this.currentIterationStep;this.currentIterationStep>0&&this.currentIterationStep<this.iterationSteps&&++t,this.scheduler.setIterationStep(t)}setBpm(e){this.playbackSettings.bpm=e,this.scheduler&&(this.scheduler.wholeNoteLength=this.wholeNoteLength)}on(e,t){this.events.on(e,t)}countAndSetIterationSteps(){this.cursor.reset();let e=0;for(;!this.cursor.Iterator.EndReached;)this.cursor.Iterator.CurrentVoiceEntries&&this.scheduler.loadNotes(this.cursor.Iterator.CurrentVoiceEntries),this.cursor.next(),++e;this.iterationSteps=e,this.cursor.reset()}notePlaybackCallback(e,t){if(this.state!==$v.PLAYING)return;let i=new Map;for(let n of t){if(n.isRest())continue;const e=_p(n,this.wholeNoteLength);if(0===e)continue;const t=Mp(n),s=Tp(n),r=n.ParentVoiceEntry.ParentVoice.midiInstrumentId,o=n.ParentVoiceEntry.ParentVoice.Parent.SubInstruments[0].fixedKey||0;i.has(r)||i.set(r,[]),i.get(r).push({note:n.halfTone-12*o,duration:e/1e3,gain:t,articulation:s})}for(const[n,s]of i)this.instrumentPlayer.schedule(n,this.ac.currentTime+e,s);this.timeoutHandles.push(window.setTimeout((()=>this.iterationCallback()),Math.max(0,1e3*e-35)),window.setTimeout((()=>this.events.emit(Zv.ITERATION,t)),1e3*e))}setState(e){this.state=e,this.events.emit(Zv.STATE_CHANGE,e)}stopPlayers(){for(const e of this.sheet.Instruments)for(const t of e.Voices)this.instrumentPlayer.stop(t.midiInstrumentId)}clearTimeouts(){for(let e of this.timeoutHandles)clearTimeout(e);this.timeoutHandles=[]}iterationCallback(){this.state===$v.PLAYING&&(this.currentIterationStep>0&&this.cursor.next(),++this.currentIterationStep)}},ey=e=>{let{musicXML:i,height:n="500px"}=e;const s=(0,t.useRef)(null),r=(0,t.useRef)(null),o=(0,t.useRef)(null),[a,l]=(0,t.useState)(!0),[c,h]=(0,t.useState)(null),[u,d]=(0,t.useState)("music"),[f,p]=(0,t.useState)(!1),[m,g]=(0,t.useState)(!1),[b,v]=(0,t.useState)(!1);(0,t.useEffect)((()=>{if(!s.current||!i)return;return(async()=>{l(!0),h(null),v(!1);try{const t=(new DOMParser).parseFromString(i,"text/xml"),n=t.getElementsByTagName("movement-title"),a=t.getElementsByTagName("work-title"),c=(n.length>0?n[0].textContent:null)||(a.length>0?a[0].textContent:null)||"music";d(c),s.current&&(s.current.innerHTML=""),o.current&&(o.current.stop(),o.current=null),r.current=new gp.OpenSheetMusicDisplay(s.current,{autoResize:!0,drawTitle:!0,drawSubtitle:!0,drawComposer:!0,drawCredits:!0,drawPartNames:!0,followCursor:!0,drawingParameters:"default"}),await r.current.load(i),r.current.render();try{o.current=new Jv,await o.current.loadScore(r.current),v(!0)}catch(e){console.warn("Audio player initialization failed:",e)}l(!1)}catch(t){console.error("Error loading musicXML:",t),h(t instanceof Error?t.message:"\u8f09\u5165\u6a02\u8b5c\u5931\u6557"),l(!1)}})(),()=>{o.current&&(o.current.stop(),o.current=null),r.current=null}}),[i]);const y=(0,t.useCallback)((async()=>{if(o.current&&b)try{o.current.play(),p(!0),g(!1)}catch(e){console.error("Play error:",e)}}),[b,m]),x=(0,t.useCallback)((()=>{o.current&&(o.current.pause(),p(!1),g(!0))}),[]),S=(0,t.useCallback)((()=>{o.current&&(o.current.stop(),p(!1),g(!1))}),[]),E=(0,t.useCallback)((()=>{const e=new Blob([i],{type:"application/xml"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="".concat(u,".xml"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}),[i,u]),w=(0,t.useCallback)((()=>{if(!s.current)return;const e=s.current.querySelectorAll("svg");if(0===e.length)return void alert("\u627e\u4e0d\u5230\u6a02\u8b5c\u5167\u5bb9");const t=window.open("","_blank","width=800,height=600");if(!t)return void alert("\u7121\u6cd5\u958b\u555f\u5217\u5370\u8996\u7a97\uff0c\u8acb\u6aa2\u67e5\u5f48\u51fa\u8996\u7a97\u8a2d\u5b9a");let i="";e.forEach((e=>{const t=e.cloneNode(!0);t.setAttribute("width","100%"),t.removeAttribute("height"),t.style.maxWidth="100%",t.style.height="auto",i+=t.outerHTML})),t.document.write('\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <meta charset="UTF-8">\n                <title>'.concat(u," - \u6a02\u8b5c\u5217\u5370</title>\n                <style>\n                    @page {\n                        size: A4;\n                        margin: 15mm;\n                    }\n                    * {\n                        margin: 0;\n                        padding: 0;\n                        box-sizing: border-box;\n                    }\n                    body {\n                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n                        background: white;\n                        padding: 10mm;\n                    }\n                    h1 {\n                        text-align: center;\n                        font-size: 18pt;\n                        margin-bottom: 10mm;\n                        color: #333;\n                    }\n                    .score-container {\n                        width: 100%;\n                    }\n                    .score-container svg {\n                        width: 100% !important;\n                        height: auto !important;\n                        max-width: 100%;\n                        display: block;\n                        margin: 0 auto;\n                        page-break-inside: avoid;\n                    }\n                    @media print {\n                        body {\n                            padding: 0;\n                        }\n                        .no-print {\n                            display: none !important;\n                        }\n                    }\n                </style>\n            </head>\n            <body>\n                <h1>").concat(u,'</h1>\n                <div class="score-container">\n                    ').concat(i,"\n                </div>\n                <script>\n                    window.onload = function() {\n                        setTimeout(function() {\n                            window.print();\n                            window.close();\n                        }, 500);\n                    };\n                <\/script>\n            </body>\n            </html>\n        ")),t.document.close()}),[u]);return(0,vu.jsxs)("div",{className:"music-embed-container",children:[(0,vu.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-4 p-3 bg-base-200 rounded-lg",children:[(0,vu.jsxs)("div",{className:"flex items-center gap-1",children:[f?(0,vu.jsxs)("button",{onClick:x,className:"btn btn-secondary btn-sm",title:"\u66ab\u505c",children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,vu.jsx)("path",{fillRule:"evenodd",d:"M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z",clipRule:"evenodd"})}),"\u66ab\u505c"]}):(0,vu.jsxs)("button",{onClick:y,disabled:a||!b,className:"btn btn-primary btn-sm",title:"\u64ad\u653e",children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,vu.jsx)("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"})}),"\u64ad\u653e"]}),(0,vu.jsx)("button",{onClick:S,disabled:a||!f&&!m,className:"btn btn-ghost btn-sm",title:"\u505c\u6b62",children:(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,vu.jsx)("path",{fillRule:"evenodd",d:"M4.5 7.5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9Z",clipRule:"evenodd"})})})]}),(0,vu.jsx)("div",{className:"divider divider-horizontal mx-1"}),(0,vu.jsxs)("div",{className:"flex items-center gap-1",children:[(0,vu.jsxs)("button",{onClick:E,disabled:a,className:"btn btn-outline btn-sm",title:"\u4e0b\u8f09 MusicXML",children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),"\u4e0b\u8f09"]}),(0,vu.jsxs)("button",{onClick:w,disabled:a,className:"btn btn-outline btn-sm",title:"\u5217\u5370\u6a02\u8b5c",children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})}),"\u5217\u5370"]})]}),(0,vu.jsx)("span",{className:"text-xs text-text-muted ml-auto",children:a?"\u8f09\u5165\u4e2d...":b?"":"(\u97f3\u983b\u8f09\u5165\u4e2d...)"})]}),c&&(0,vu.jsxs)("div",{className:"alert alert-error mb-4",children:[(0,vu.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,vu.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,vu.jsxs)("span",{children:["\u6a02\u8b5c\u8f09\u5165\u5931\u6557\uff1a",c]})]}),(0,vu.jsx)("div",{ref:s,className:"overflow-auto bg-white rounded-lg p-4 relative",style:{minHeight:n,maxHeight:"800px"},children:a&&(0,vu.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80",children:(0,vu.jsx)("span",{className:"loading loading-spinner loading-lg text-primary"})})})]})};var ty=i(488),iy=i.n(ty),ny=i(999),sy=i.n(ny);const ry=e=>{const t=[["\u8eab\u5fc3\u72c0\u614b",e.bodyMind],["\u5143\u6c23\u72c0\u614b",e.vitality],["Delta \u983b\u6bb5",e.delta],["Theta \u983b\u6bb5",e.theta],["\u4f4e Alpha \u983b\u6bb5",e.lowAlpha],["\u9ad8 Alpha \u983b\u6bb5",e.highAlpha],["\u4f4e Beta \u983b\u6bb5",e.lowBeta],["\u9ad8 Beta \u983b\u6bb5",e.highBeta],["\u4f4e Gamma \u983b\u6bb5",e.lowGamma],["\u9ad8 Gamma \u983b\u6bb5",e.highGamma]];return(0,vu.jsxs)("div",{className:"p-6 space-y-6",children:[(0,vu.jsx)("h2",{className:"text-3xl font-bold",children:"\u5229\u990a\u7081\u5831\u544a"}),(0,vu.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,vu.jsxs)("div",{className:"card bg-base-100 shadow p-4",children:[(0,vu.jsx)("h3",{className:"text-lg font-semibold",children:"\u4fee\u884c\u985e\u578b"}),(0,vu.jsx)("p",{className:"mt-2",children:e.practiceType})]}),(0,vu.jsxs)("div",{className:"card bg-base-100 shadow p-4",children:[(0,vu.jsx)("h3",{className:"text-lg font-semibold",children:"\u4fee\u884c\u7b49\u7d1a"}),(0,vu.jsx)("p",{className:"mt-2",children:e.practiceLevel})]})]}),(0,vu.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e=>{let[t,i]=e;return(0,vu.jsxs)("div",{className:"card bg-base-100 shadow p-4",children:[(0,vu.jsx)("h4",{className:"text-md font-medium mb-2",children:t}),(0,vu.jsx)("p",{className:"text-sm mb-1",children:i.comment}),(0,vu.jsx)("p",{className:"text-xs text-gray-500",children:i.type})]},t)}))})]})},oy=e=>{const t=e.sentimentBefore.data.map((e=>e.score)),i=e.sentimentAfter.data.map((e=>e.score)),n={chart:{type:"column"},title:{text:"\u6613 Motion \u60c5\u7dd2\u6307\u6578\u524d\u5f8c\u6e2c\u6bd4\u8f03\u5716"},xAxis:{categories:e.sentimentBefore.data.map(((e,t)=>"T ".concat(t+1))),title:{text:"\u6e2c\u8a66\u6a23\u672c"}},yAxis:{min:-5,max:5,title:{text:"\u60c5\u7dd2\u6307\u6578"},plotLines:[{value:e.sentimentBefore.sentimentAvg,color:"#f87171",width:1,dashStyle:"ShortDash",label:{text:"\u524d\u6e2c\u5e73\u5747: ".concat(e.sentimentBefore.sentimentAvg),align:"right",style:{color:"#f87171"}}},{value:e.sentimentAfter.sentimentAvg,color:"#60a5fa",width:1,dashStyle:"ShortDash",label:{text:"\u5f8c\u6e2c\u5e73\u5747: ".concat(e.sentimentAfter.sentimentAvg),align:"right",style:{color:"#60a5fa"}}}]},tooltip:{shared:!0,valueSuffix:""},plotOptions:{column:{grouping:!0,shadow:!1}},series:[{name:e.sentimentBefore.name,data:t,type:"column",color:"#f87171"},{name:e.sentimentAfter.name,data:i,type:"column",color:"#60a5fa"}]};return(0,vu.jsxs)("div",{className:"p-4",children:[(0,vu.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"\u6613 Motion \u5831\u544a"}),(0,vu.jsx)(sy(),{highcharts:iy(),options:n})]})},ay={id:"yuanshenyin",group:"",name:"\u5143\u795e\u97f3",description:"\u55ae\u4eba\u8166\u6ce2\u5f71\u97f3\u7de8\u78bc\u53ca\u64ad\u653e\u7cfb\u7d71\uff0c\u5c08\u6ce8\u65bc\u500b\u4eba\u8166\u6ce2\u6578\u64da\u7684\u52d5\u614b\u7de8\u78bc\u8207\u5f71\u97f3\u5c55\u793a\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]};try{return await pp("/api/v1/music",t)}catch(i){throw i}},renderReport:(e,t)=>{const i=(null===t||void 0===t?void 0:t.sheetTitle)||"\u672a\u547d\u540d\u6a02\u8b5c",n=(null===t||void 0===t?void 0:t.soundTempo)||60,s=new DOMParser,r=new XMLSerializer,o=s.parseFromString(e,"text/xml"),a=o.getElementsByTagName("movement-title");if(a.length>0&&(a[0].textContent=i),n>0){const e=o.getElementsByTagName("per-minute");e.length>0&&(e[0].textContent=n.toString());const t=o.getElementsByTagName("sound");t.length>0&&t[0].setAttribute("tempo",n.toString())}const l=r.serializeToString(o);return(0,vu.jsx)("div",{className:"p-4",children:(0,vu.jsx)(ey,{musicXML:l,height:"500px"})})},customFields:[{label:"\u6a02\u8b5c\u6a19\u984c",fieldName:"sheetTitle",type:"string",defaultValue:"My Music"},{label:"\u901f\u5ea6",fieldName:"soundTempo",type:"number",defaultValue:60}],editComponent:e=>{var t,i;let{customParams:n,onChange:s}=e;return(0,vu.jsxs)("div",{className:"flex flex-col space-y-2 p-4 border rounded",children:[(0,vu.jsx)("input",{type:"text",className:"input input-bordered",placeholder:"\u6a02\u8b5c\u6a19\u984c",value:null!==(t=n.sheetTitle)&&void 0!==t?t:"",onChange:e=>s(h(h({},n),{},{sheetTitle:e.target.value}))}),(0,vu.jsx)("input",{type:"number",className:"input input-bordered",placeholder:"\u901f\u5ea6",value:null!==(i=n.soundTempo)&&void 0!==i?i:"",onChange:e=>s(h(h({},n),{},{soundTempo:parseInt(e.target.value)||0}))})]})}};gu(ay);const ly={id:"hengyunlai",group:"",name:"\u4ea8\u904b\u4f86",description:"H.R \u8a55\u4f30\u7cfb\u7d71\uff0c\u7528\u65bc\u8a55\u4f30\u500b\u4eba\u7684\u4eba\u529b\u8cc7\u6e90\u6f5b\u80fd\u53ca\u5de5\u4f5c\u9069\u914d\u5ea6\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]};try{return await pp("/api/v1/human_resource_data",t)}catch(i){throw i}},renderReport:e=>{const{TEScore:t,TEScore_report:i,EM_report:n,sentimentBeforeAvg:s,sentimentAfterAvg:r,delta:o,theta:a,lowAlpha:l,highAlpha:c,lowBeta:h,highBeta:u,lowGamma:d,highGamma:f,ranking_report:p=[]}=e;return(0,vu.jsxs)("div",{className:"p-4",children:[(0,vu.jsxs)("div",{className:"mb-4",children:[(0,vu.jsx)("h3",{className:"text-xl font-semibold",children:"\u7e3d\u9ad4\u8077\u80fd\u8a55\u4f30 TE"}),(0,vu.jsxs)("p",{className:"mt-2",children:["\u5206\u6578\uff1a",(0,vu.jsx)("strong",{children:t})]}),(0,vu.jsx)("p",{children:null===i||void 0===i?void 0:i.te_score_remark_tw})]}),(0,vu.jsxs)("div",{className:"mb-4",children:[(0,vu.jsx)("h3",{className:"text-xl font-semibold",children:"\u60c5\u7dd2\u8a55\u4f30"}),(0,vu.jsxs)("p",{children:["\u524d\u6e2c\u5e73\u5747\uff1a",(0,vu.jsx)("strong",{children:s}),"\uff0c\u5f8c\u6e2c\u5e73\u5747\uff1a",(0,vu.jsx)("strong",{children:r})]}),(0,vu.jsxs)("p",{children:["\u5206\u6578\uff1a",(0,vu.jsx)("strong",{children:null===n||void 0===n?void 0:n.score})]}),(0,vu.jsx)("p",{children:null===n||void 0===n?void 0:n.em_remark_tw})]}),(0,vu.jsxs)("div",{className:"mb-4",children:[(0,vu.jsx)("h3",{className:"text-xl font-semibold",children:"\u5404\u7dad\u5ea6\u7c21\u8981"}),(0,vu.jsxs)("table",{className:"table w-full",children:[(0,vu.jsx)("thead",{children:(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("th",{children:"\u7dad\u5ea6"}),(0,vu.jsx)("th",{children:"\u8a55\u5206"}),(0,vu.jsx)("th",{children:"\u5099\u8a3b"}),(0,vu.jsx)("th",{children:"\u9810\u6e2c"})]})}),(0,vu.jsxs)("tbody",{children:[(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("td",{children:null===o||void 0===o?void 0:o.title}),(0,vu.jsx)("td",{children:null===o||void 0===o?void 0:o.comment}),(0,vu.jsx)("td",{children:null===o||void 0===o?void 0:o.comment_remark_tw}),(0,vu.jsx)("td",{children:null===o||void 0===o?void 0:o.predict})]}),(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("td",{children:null===a||void 0===a?void 0:a.title}),(0,vu.jsx)("td",{children:null===a||void 0===a?void 0:a.comment}),(0,vu.jsx)("td",{children:null===a||void 0===a?void 0:a.comment_remark_tw}),(0,vu.jsx)("td",{children:null===a||void 0===a?void 0:a.predict})]}),(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("td",{children:null===l||void 0===l?void 0:l.title}),(0,vu.jsx)("td",{children:null===l||void 0===l?void 0:l.comment}),(0,vu.jsx)("td",{children:null===l||void 0===l?void 0:l.comment_remark_tw}),(0,vu.jsx)("td",{children:null===l||void 0===l?void 0:l.predict})]}),(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("td",{children:null===c||void 0===c?void 0:c.title}),(0,vu.jsx)("td",{children:null===c||void 0===c?void 0:c.comment}),(0,vu.jsx)("td",{children:null===c||void 0===c?void 0:c.comment_remark_tw}),(0,vu.jsx)("td",{children:null===c||void 0===c?void 0:c.predict})]}),(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("td",{children:null===h||void 0===h?void 0:h.title}),(0,vu.jsx)("td",{children:null===h||void 0===h?void 0:h.comment}),(0,vu.jsx)("td",{children:null===h||void 0===h?void 0:h.comment_remark_tw}),(0,vu.jsx)("td",{children:null===h||void 0===h?void 0:h.predict})]}),(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("td",{children:null===u||void 0===u?void 0:u.title}),(0,vu.jsx)("td",{children:null===u||void 0===u?void 0:u.comment}),(0,vu.jsx)("td",{children:null===u||void 0===u?void 0:u.comment_remark_tw}),(0,vu.jsx)("td",{children:null===u||void 0===u?void 0:u.predict})]}),(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("td",{children:null===d||void 0===d?void 0:d.title}),(0,vu.jsx)("td",{children:null===d||void 0===d?void 0:d.comment}),(0,vu.jsx)("td",{children:null===d||void 0===d?void 0:d.comment_remark_tw}),(0,vu.jsx)("td",{children:null===d||void 0===d?void 0:d.predict})]}),(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("td",{children:null===f||void 0===f?void 0:f.title}),(0,vu.jsx)("td",{children:null===f||void 0===f?void 0:f.comment}),(0,vu.jsx)("td",{children:null===f||void 0===f?void 0:f.comment_remark_tw}),(0,vu.jsx)("td",{children:null===f||void 0===f?void 0:f.predict})]})]})]})]}),(0,vu.jsxs)("div",{className:"mb-4",children:[(0,vu.jsx)("h3",{className:"text-xl font-semibold",children:"\u6392\u540d\u5831\u544a\uff08\u7531\u9ad8\u5230\u4f4e\uff09"}),(0,vu.jsxs)("table",{className:"table w-full",children:[(0,vu.jsx)("thead",{children:(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("th",{children:"\u7dad\u5ea6"}),(0,vu.jsx)("th",{children:"\u8a55\u5206"}),(0,vu.jsx)("th",{children:"\u5099\u8a3b"}),(0,vu.jsx)("th",{children:"\u9810\u6e2c"})]})}),(0,vu.jsx)("tbody",{children:p.map(((e,t)=>(0,vu.jsxs)("tr",{children:[(0,vu.jsx)("td",{children:e.title}),(0,vu.jsx)("td",{children:e.comment}),(0,vu.jsx)("td",{children:e.comment_remark_tw}),(0,vu.jsx)("td",{children:e.predict})]},t)))})]})]}),(0,vu.jsxs)("details",{className:"collapse border border-base-300 bg-base-100 rounded-box",children:[(0,vu.jsx)("summary",{className:"collapse-title text-sm font-medium",children:"\u986f\u793a\u539f\u59cb\u8cc7\u6599\uff08\u9664\u932f\u7528\uff09"}),(0,vu.jsx)("div",{className:"collapse-content",children:(0,vu.jsx)("pre",{className:"whitespace-pre-wrap text-xs",children:JSON.stringify(e,null,2)})})]})]})}};gu(ly);const cy={id:"mindei_normal",group:"\u5229\u990a\u7081",name:"\u6b63\u5ff5\u4fee\u884c",description:"\u6b63\u5ff5\u4fee\u884c\u6a21\u5f0f\uff0c\u901a\u904e\u524d\u6e2c\uff08\u6b63\u5e38\u775c\u773c\uff09\u8207\u5f8c\u6e2c\uff08\u6b63\u5ff5\u9589\u773c\uff09\u7684\u6578\u64da\u5c0d\u6bd4\uff0c\u8a55\u4f30\u8eab\u5fc3\u6307\u6578\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]};try{return await pp("/api/v1/mindfulness",t)}catch(i){throw i}},renderReport:ry};gu(cy);const hy={id:"mindei_movement",group:"\u5229\u990a\u7081",name:"\u7df4\u7081\u4fee\u884c",description:"\u7df4\u7081\u4fee\u884c\u6a21\u5f0f\uff0c\u524d\u6e2c\u70ba\u6b63\u5e38\u775c\u773c\uff0c\u5f8c\u6e2c\u70ba\u904b\u884c\u7df4\u7081\uff0c\u8a55\u4f30\u80fd\u91cf\u904b\u884c\u72c0\u614b\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]};try{return await pp("/api/v1/mindfulness",t)}catch(i){throw i}},renderReport:ry};gu(hy);const uy={id:"mindei_level",group:"\u5229\u990a\u7081",name:"\u7df4\u7081\u54c1\u968e",description:"\u7df4\u7081\u54c1\u968e\u6a21\u5f0f\uff0c\u524d\u6e2c\u70ba\u6b63\u5ff5\u9589\u773c\uff0c\u5f8c\u6e2c\u70ba\u904b\u884c\u7df4\u7081\uff0c\u8a55\u4f30\u4fee\u884c\u5c64\u7d1a\u53ca\u54c1\u8cea\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]};try{return await pp("/api/v1/mindfulness",t)}catch(i){throw i}},renderReport:ry};gu(uy);const dy={id:"zhentianfu",group:"",name:"\u8c9e\u5929\u8ce6",description:"\u6f5b\u80fd\u8a55\u4f30\u7cfb\u7d71\uff0c\u901a\u904e\u8166\u6ce2\u6578\u64da\u8a55\u4f30\u500b\u4eba\u7684\u6f5b\u80fd\u8868\u73fe\u8207\u80fd\u91cf\u5206\u5e03\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]};try{return await pp("/api/v1/talent",t)}catch(i){throw i}},renderReport:e=>{const t=[e.delta,e.theta,e.lowAlpha,e.highAlpha,e.lowBeta,e.highBeta,e.lowGamma,e.highGamma];return(0,vu.jsxs)("div",{className:"p-4 space-y-6",children:[(0,vu.jsx)("h3",{className:"text-2xl font-bold mb-4",children:"\u8c9e\u5929\u8ce6\u5831\u544a"}),(0,vu.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,vu.jsxs)("div",{className:"card bg-base-100 shadow-md p-4",children:[(0,vu.jsx)("h4",{className:"text-lg font-semibold",children:"\u60c5\u7dd2\u5206\u6790"}),(0,vu.jsxs)("p",{className:"text-sm",children:["\u60c5\u7dd2\u524d\u5e73\u5747\uff1a",e.sentimentBeforeAvg]}),(0,vu.jsxs)("p",{className:"text-sm",children:["\u60c5\u7dd2\u5f8c\u5e73\u5747\uff1a",e.sentimentAfterAvg]}),(0,vu.jsxs)("p",{className:"text-sm font-medium",children:["\u60c5\u7dd2\u8a55\u8a9e\uff1a",e.EM_report.em_remark_tw]})]}),(0,vu.jsxs)("div",{className:"card bg-base-100 shadow-md p-4",children:[(0,vu.jsx)("h4",{className:"text-lg font-semibold",children:"\u7e3d\u80fd\u91cf TE"}),(0,vu.jsxs)("p",{className:"text-sm",children:["\u5206\u6578\uff1a",e.TEScore]}),(0,vu.jsxs)("p",{className:"text-sm font-medium",children:["\u8a55\u8a9e\uff1a",e.TEScore_report.te_score_remark_tw]})]})]}),(0,vu.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(((e,t)=>(0,vu.jsxs)("div",{className:"card bg-base-100 shadow p-4",children:[(0,vu.jsxs)("h5",{className:"font-bold text-lg",children:[e.title," (",e.comment,")"]}),(0,vu.jsx)("p",{className:"text-sm",children:e.comment_remark_tw}),(0,vu.jsxs)("p",{className:"text-xs text-gray-500",children:["\u6f5b\u80fd\u9810\u6e2c\uff1a",e.predict," - ",e.predit_remark_tw]})]},t)))}),(0,vu.jsxs)("div",{className:"card bg-base-100 shadow-md p-4 mt-6",children:[(0,vu.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"\u80fd\u529b\u6392\u540d\uff08\u5f37\u5230\u5f31\uff09"}),(0,vu.jsx)("ol",{className:"list-decimal list-inside space-y-1",children:e.ranking_report.map(((e,t)=>(0,vu.jsxs)("li",{children:[(0,vu.jsxs)("span",{className:"font-semibold",children:[e.title," (",e.comment,")\uff1a"]}),e.comment_remark_tw]},t)))})]})]})}};gu(dy);const fy={id:"emotion_management",group:"\u6613",name:"\u60c5\u7dd2\u7ba1\u7406\u7cfb\u7d71",description:"\u60c5\u7dd2\u7ba1\u7406\u7cfb\u7d71\uff0c\u91dd\u5c0d\u60c5\u7dd2\u72c0\u614b\u9032\u884c\u8a55\u4f30\u8207\u7ba1\u7406\uff0c\u6db5\u84cb\u591a\u7a2e\u60c5\u7dd2\u6e2c\u8a66\u6a21\u5f0f\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]};try{return await pp("/api/v1/analysis/sentiment",t)}catch(i){throw i}},renderReport:oy};gu(fy);const py={id:"pet_test",group:"\u6613",name:"\u5bf5\u7269\u8a55\u6bd4\u6e2c\u8a66",description:"\u900f\u904e\u8996\u89ba\u8207\u89f8\u89ba\u6e2c\u8a66\uff0c\u8a55\u4f30\u4e26\u5339\u914d\u6700\u9069\u5408\u7684\u5bf5\u7269\u76f8\u95dc\u6307\u6a19\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]};try{return await pp("/api/v1/analysis/ore",t)}catch(i){throw i}},renderReport:oy};gu(py);const my={id:"beverage_test",group:"\u6613",name:"\u54c1\u8336/\u54c1\u9152/\u54c1\u5496\u5561\u8a55\u6bd4\u6e2c\u8a66",description:"\u57fa\u65bc\u55c5\u89ba\u8207\u5473\u89ba\u8a55\u6bd4\uff0c\u63d0\u4f9b\u8336\u3001\u9152\u3001\u5496\u5561\u7b49\u98f2\u54c1\u7684\u8a55\u4f30\u53c3\u8003\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]};try{return await pp("/api/v1/analysis/ore",t)}catch(i){throw i}},renderReport:oy};gu(my);const gy={id:"perfume_test",group:"\u6613",name:"\u9999\u6c34\u8a55\u6bd4\u6e2c\u8a66",description:"\u4ee5\u55c5\u89ba\u70ba\u4e3b\u7684\u6e2c\u8a66\u6a21\u5f0f\uff0c\u8a55\u4f30\u4e26\u63a8\u85a6\u6700\u9069\u5408\u4f7f\u7528\u8005\u7684\u9999\u6c34\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]};try{return await pp("/api/v1/analysis/ore",t)}catch(i){throw i}},renderReport:oy};gu(gy);const by={id:"music_test",group:"\u6613",name:"\u97f3\u6a02\u6f14\u594f/\u6b4c\u66f2\u6f14\u5531\u8a55\u6bd4\u6e2c\u8a66",description:"\u91dd\u5c0d\u807d\u89ba\u9032\u884c\u7684\u8a55\u6bd4\u6e2c\u8a66\uff0c\u6aa2\u8996\u97f3\u6a02\u8868\u73fe\u53ca\u8166\u6ce2\u53cd\u61c9\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]};try{return await pp("/api/v1/analysis/ore",t)}catch(i){throw i}},renderReport:oy};gu(by);const vy={id:"video_test",group:"\u6613",name:"\u77ed\u8996\u983b\u5ee3\u544a\u8a55\u6bd4\u6e2c\u8a66",description:"\u7d9c\u5408\u8996\u89ba\u8207\u807d\u89ba\u7684\u8a55\u6bd4\uff0c\u8a55\u4f30\u8996\u983b\u5ee3\u544a\u5c0d\u60c5\u7dd2\u8207\u8a8d\u77e5\u7684\u5f71\u97ff\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]};try{return await pp("/api/v1/analysis/ore",t)}catch(i){throw i}},renderReport:oy};gu(vy);const yy={id:"zhenbaoqi",group:"",name:"\u73cd\u5bf6\u7081",description:"\u6700\u4f73\u7081\u5834\u4e4b\u7926\u7269\u7d50\u6676\u9ad4\u6e2c\u8a66\u7cfb\u7d71\uff0c\u5229\u7528\u8166\u6ce2\u8207\u60c5\u7dd2\u6578\u64da\u63a8\u85a6\u6700\u9069\u5408\u7684\u7d50\u6676\u9ad4\u7522\u54c1\uff08\u53f0\u7063\u5c08\u5229\uff09\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]},i=await pp("/api/v1/treasure/stage1",t),n={ea_before_timing_diagram:i.ea0_timing_diagram,ea_after_timing_diagram:i.ea1_timing_diagram,wear_ea:i.wear_ea,pillow_ea:i.pillow_ea},s=await pp("/api/v1/treasure/stage2",n),r=s.stage2||s;return h(h({},i),r)},renderReport:e=>{const{te_scores:t,te_comments:i,ea0:n,ea1:s,me_score:r,ea_before_timing_diagram:o,ea_after_timing_diagram:a}=e;return(0,vu.jsxs)("div",{className:"p-6 space-y-6",children:[(0,vu.jsx)("h2",{className:"text-3xl font-bold",children:"\u73cd\u5bf6\u7081\u5831\u544a"}),(0,vu.jsx)("div",{className:"grid grid-cols-2 gap-4",children:["te1","te2","te3","te4"].map(((e,n)=>(0,vu.jsxs)("div",{className:"card bg-base-100 shadow p-4",children:[(0,vu.jsxs)("h4",{className:"font-semibold",children:["TE",n+1," \u5206\u6578"]}),(0,vu.jsx)("p",{children:t[e]}),(0,vu.jsx)("p",{className:"text-sm text-gray-500",children:i[e]})]},e)))}),(0,vu.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,vu.jsxs)("div",{className:"card p-4",children:["EA0: ",n]}),(0,vu.jsxs)("div",{className:"card p-4",children:["EA1: ",s]}),(0,vu.jsxs)("div",{className:"card p-4",children:["ME: ",r]})]}),(0,vu.jsxs)("div",{className:"card p-4",children:[(0,vu.jsx)("h4",{className:"mb-2",children:"\u60c5\u7dd2\u524d\u5f8c\u6e2c\u6642\u5e8f\u5716"}),(0,vu.jsx)(sy(),{highcharts:iy(),options:{chart:{type:"line"},title:{text:""},xAxis:{categories:o.map(((e,t)=>"T".concat(t+1)))},series:[{name:"\u524d\u6e2c",data:o,type:"line"},{name:"\u5f8c\u6e2c",data:a,type:"line"}]}})]}),(0,vu.jsxs)("div",{className:"card p-4",children:[(0,vu.jsx)("h4",{className:"font-semibold",children:"A.\u6700\u4f73\u7081\u5834\u4e4b\u7926\u7269\u7d50\u6676\u9ad4"}),(0,vu.jsx)("p",{children:"\uff08\u898b PDF \u8868\u4e8c\uff1a\u7c89\u8272\u85cd\u5bf6\u77f3\u3001\u2026\uff09"})]}),(0,vu.jsxs)("div",{className:"card p-4",children:[(0,vu.jsx)("h4",{className:"font-semibold",children:"B.\u63a8\u85a6\u5e02\u5834\u8457\u540d\u7d50\u6676\u9ad4"}),(0,vu.jsxs)("ul",{className:"list-disc list-inside",children:[(0,vu.jsx)("li",{children:"Jo Malone \u2026"}),(0,vu.jsx)("li",{children:"TOM FORD \u2026"})]})]})]})}};gu(yy);const xy={id:"qingxiangyi",group:"",name:"\u60c5\u9999\u610f",description:"\u6700\u4f73\u7081\u5834\u4e4b\u9999\u6c1b\u6e2c\u8a66\u7cfb\u7d71\uff0c\u901a\u904e\u8166\u6ce2\u8207\u60c5\u7dd2\u6578\u64da\u5206\u6790\uff0c\u63a8\u85a6\u9069\u5408\u7684\u9999\u6c1b\u7522\u54c1\uff0c\u4e26\u63d0\u4f9b\u8a73\u7d30\u5831\u544a\u8207\u5c0d\u7167\u8868\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]},i=await pp("/api/v1/perfume/stage1",t),n={ea_before_timing_diagram:i.ea0_timing_diagram,ea_after_timing_diagram:i.ea1_timing_diagram,fragrances:i.te_comment.te1.fragrances,brands:i.te_comment.te1.brands},s=await pp("/api/v1/perfume/stage2",n),r=s.stage2||s;return h(h({},i),r)},renderReport:e=>{const{te_scores:t,te_comments:i,ea0:n,ea1:s,me_score:r,ea_before_timing_diagram:o,ea_after_timing_diagram:a,fragrances:l,brands:c}=e;return(0,vu.jsxs)("div",{className:"p-6 space-y-6",children:[(0,vu.jsx)("h2",{className:"text-3xl font-bold",children:"\u60c5\u9999\u610f\u5831\u544a"}),(0,vu.jsxs)("div",{className:"card p-4",children:[(0,vu.jsx)("h4",{className:"font-semibold",children:"A.\u6700\u4f73\u7081\u5834\u4e4b\u4e2d\u8abf\u9999\u6c1b"}),(0,vu.jsx)("p",{children:l.join("\u3001")})]}),(0,vu.jsxs)("div",{className:"card p-4",children:[(0,vu.jsx)("h4",{className:"font-semibold",children:"B.\u63a8\u85a6\u5e02\u5834\u8457\u540d\u9999\u6c1b"}),(0,vu.jsx)("p",{children:c.join("\u3001")})]})]})}};gu(xy);s.createRoot(document.getElementById("root")).render((0,vu.jsx)(t.StrictMode,{children:(0,vu.jsx)(zu,{})}))})()})();
//# sourceMappingURL=main.41c74bee.js.map