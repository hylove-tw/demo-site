/*! For license information please see main.24ef1bf4.js.LICENSE.txt */
(()=>{var e={0:e=>{"use strict";var t=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;var n=[0,2,4,5,7,9,11];function i(e,i,r){if("string"!==typeof e)return null;var a=t.exec(e);if(!a||!i&&a[4])return null;var o={letter:a[1].toUpperCase(),acc:a[2].replace(/x/g,"##")};return o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt="b"===o.acc[0]?-o.acc.length:o.acc.length,o.chroma=n[o.step]+o.alt,a[3]&&(o.oct=+a[3],o.midi=o.chroma+12*(o.oct+1),o.freq=s(o.midi,r)),i&&(o.tonicOf=a[4]),o}function s(e,t){return Math.pow(2,(e-69)/12)*(t||440)}var r={parse:i,regex:function(){return t},midiToFreq:s};["letter","acc","pc","step","alt","chroma","oct","midi","freq"].forEach((function(e){r[e]=function(t){var n=i(t);return n&&"undefined"!==typeof n[e]?n[e]:null}})),e.exports=r},4:(e,t,n)=>{"use strict";var i=n(853),s=n(43),r=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var l=Symbol.for("react.element"),c=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.consumer"),g=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var w=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel"),_=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=_&&e[_]||e["@@iterator"])?e:null}var M=Symbol.for("react.client.reference");function C(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===M?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case u:return"Fragment";case h:return"Portal";case f:return"Profiler";case d:return"StrictMode";case v:return"Suspense";case y:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case g:return(e.displayName||"Context")+".Provider";case m:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case x:return null!==(t=e.displayName||null)?t:C(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return C(e(t))}catch(n){}}return null}var A,P,N=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=Object.assign;function L(e){if(void 0===A)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);A=t&&t[1]||"",P=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+A+e+P}var I=!1;function R(e,t){if(!e||I)return"";I=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var i=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(r){i=r}e.call(n.prototype)}}else{try{throw Error()}catch(a){i=a}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(o){if(o&&i&&"string"===typeof o.stack)return[o.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),a=r[0],o=r[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(i===l.length||s===c.length)for(i=l.length-1,s=c.length-1;1<=i&&0<=s&&l[i]!==c[s];)s--;for(;1<=i&&0<=s;i--,s--)if(l[i]!==c[s]){if(1!==i||1!==s)do{if(i--,0>--s||l[i]!==c[s]){var h="\n"+l[i].replace(" at new "," at ");return e.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",e.displayName)),h}}while(1<=i&&0<=s);break}}}finally{I=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?L(n):""}function O(e){switch(e.tag){case 26:case 27:case 5:return L(e.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 15:return e=R(e.type,!1);case 11:return e=R(e.type.render,!1);case 1:return e=R(e.type,!0);default:return""}}function D(e){try{var t="";do{t+=O(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function F(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function B(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function j(e){if(F(e)!==e)throw Error(a(188))}function V(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=V(e)))return t;e=e.sibling}return null}var G=Array.isArray,W=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z={pending:!1,data:null,method:null,action:null},U=[],H=-1;function X(e){return{current:e}}function Y(e){0>H||(e.current=U[H],U[H]=null,H--)}function q(e,t){H++,U[H]=e.current,e.current=t}var K=X(null),$=X(null),Z=X(null),Q=X(null);function J(e,t){switch(q(Z,t),q($,e),q(K,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?$h(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Zh(e=$h(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(K),q(K,t)}function ee(){Y(K),Y($),Y(Z)}function te(e){null!==e.memoizedState&&q(Q,e);var t=K.current,n=Zh(t,e.type);t!==n&&(q($,e),q(K,n))}function ne(e){$.current===e&&(Y(K),Y($)),Q.current===e&&(Y(Q),Du._currentValue=z)}var ie=Object.prototype.hasOwnProperty,se=i.unstable_scheduleCallback,re=i.unstable_cancelCallback,ae=i.unstable_shouldYield,oe=i.unstable_requestPaint,le=i.unstable_now,ce=i.unstable_getCurrentPriorityLevel,he=i.unstable_ImmediatePriority,ue=i.unstable_UserBlockingPriority,de=i.unstable_NormalPriority,fe=i.unstable_LowPriority,pe=i.unstable_IdlePriority,me=i.log,ge=i.unstable_setDisableYieldValue,be=null,ve=null;function ye(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(be,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Se(e)/we|0)|0},Se=Math.log,we=Math.LN2;var Ee=128,_e=4194304;function Te(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Me(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,s=e.suspendedLanes,r=e.pingedLanes,a=e.warmLanes;e=0!==e.finishedLanes;var o=134217727&n;return 0!==o?0!==(n=o&~s)?i=Te(n):0!==(r&=o)?i=Te(r):e||0!==(a=o&~a)&&(i=Te(a)):0!==(o=n&~s)?i=Te(o):0!==r?i=Te(r):e||0!==(a=n&~a)&&(i=Te(a)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(a=t&-t)||32===s&&0!==(4194176&a))?t:i}function Ce(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ae(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Pe(){var e=Ee;return 0===(4194176&(Ee<<=1))&&(Ee=128),e}function Ne(){var e=_e;return 0===(62914560&(_e<<=1))&&(_e=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Le(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ie(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-xe(t);e.entangledLanes|=t,e.entanglements[i]=1073741824|e.entanglements[i]|4194218&n}function Re(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-xe(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}function Oe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function De(){var e=W.p;return 0!==e?e:void 0===(e=window.event)?32:Zu(e.type)}var Fe=Math.random().toString(36).slice(2),Be="__reactFiber$"+Fe,je="__reactProps$"+Fe,Ve="__reactContainer$"+Fe,Ge="__reactEvents$"+Fe,We="__reactListeners$"+Fe,ze="__reactHandles$"+Fe,Ue="__reactResources$"+Fe,He="__reactMarker$"+Fe;function Xe(e){delete e[Be],delete e[je],delete e[Ge],delete e[We],delete e[ze]}function Ye(e){var t=e[Be];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ve]||n[Be]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=lu(e);null!==e;){if(n=e[Be])return n;e=lu(e)}return t}n=(e=n).parentNode}return null}function qe(e){if(e=e[Be]||e[Ve]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ke(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function $e(e){var t=e[Ue];return t||(t=e[Ue]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ze(e){e[He]=!0}var Qe=new Set,Je={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Je[e]=t,e=0;e<t.length;e++)Qe.add(t[e])}var nt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},rt={};function at(e,t,n){if(s=t,ie.call(rt,s)||!ie.call(st,s)&&(it.test(s)?rt[s]=!0:(st[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var i=t.toLowerCase().slice(0,5);if("data-"!==i&&"aria-"!==i)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function ot(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function lt(e,t,n,i){if(null===i)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+i)}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ut(e){e._valueTracker||(e._valueTracker=function(e){var t=ht(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){i=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=ht(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function gt(e,t,n,i,s,r,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ct(t)):null!=n?vt(e,a,ct(n)):null!=i&&e.removeAttribute("value"),null==s&&null!=r&&(e.defaultChecked=!!r),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function bt(e,t,n,i,s,r,a,o){if(null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.type=r),null!=t||null!=n){if(!("submit"!==r&&"reset"!==r||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}i="function"!==typeof(i=null!=i?i:s)&&"symbol"!==typeof i&&!!i,e.checked=o?e.checked:!!i,e.defaultChecked=!!i,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function yt(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(i&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function xt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(a(92));if(G(i)){if(1<i.length)throw Error(a(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i)}function wt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,t,n){var i=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?i?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":i?e.setProperty(t,n):"number"!==typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&n[s]!==i&&_t(e,s,i)}else for(var r in t)t.hasOwnProperty(r)&&_t(e,r,t[r])}function Mt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Nt=null;function kt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,It=null;function Rt(e){var t=qe(e);if(t&&(e=t.stateNode)){var n=e[je]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=i[je]||null;if(!s)throw Error(a(90));gt(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&dt(i)}break e;case"textarea":xt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&yt(e,!!n.multiple,t,!1)}}}var Ot=!1;function Dt(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Lt||null!==It)&&(Bc(),Lt&&(t=Lt,e=It,It=Lt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var i=n[je]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Bt=!1;if(nt)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch(Sd){Bt=!1}var Vt=null,Gt=null,Wt=null;function zt(){if(Wt)return Wt;var e,t,n=Gt,i=n.length,s="value"in Vt?Vt.value:Vt.textContent,r=s.length;for(e=0;e<i&&n[e]===s[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===s[r-t];t++);return Wt=s.slice(e,1<t?1-t:void 0)}function Ut(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Ht(){return!0}function Xt(){return!1}function Yt(e){function t(t,n,i,s,r){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Ht:Xt,this.isPropagationStopped=Xt,this}return k(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ht)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ht)},persist:function(){},isPersistent:Ht}),t}var qt,Kt,$t,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qt=Yt(Zt),Jt=k({},Zt,{view:0,detail:0}),en=Yt(Jt),tn=k({},Jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(qt=e.screenX-$t.screenX,Kt=e.screenY-$t.screenY):Kt=qt=0,$t=e),qt)},movementY:function(e){return"movementY"in e?e.movementY:Kt}}),nn=Yt(tn),sn=Yt(k({},tn,{dataTransfer:0})),rn=Yt(k({},Jt,{relatedTarget:0})),an=Yt(k({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),on=Yt(k({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ln=Yt(k({},Zt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},un={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=un[e])&&!!t[e]}function fn(){return dn}var pn=Yt(k({},Jt,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ut(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?Ut(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ut(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Yt(k({},tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=Yt(k({},Jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),bn=Yt(k({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vn=Yt(k({},tn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),yn=Yt(k({},Zt,{newState:0,oldState:0})),xn=[9,13,27,32],Sn=nt&&"CompositionEvent"in window,wn=null;nt&&"documentMode"in document&&(wn=document.documentMode);var En=nt&&"TextEvent"in window&&!wn,_n=nt&&(!Sn||wn&&8<wn&&11>=wn),Tn=String.fromCharCode(32),Mn=!1;function Cn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var Nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Nn[e.type]:"textarea"===t}function Ln(e,t,n,i){Lt?It?It.push(i):It=[i]:Lt=i,0<(t=Dh(t,"onChange")).length&&(n=new Qt("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var In=null,Rn=null;function On(e){Ah(e,0)}function Dn(e){if(dt(Ke(e)))return e}function Fn(e,t){if("change"===e)return t}var Bn=!1;if(nt){var jn;if(nt){var Vn="oninput"in document;if(!Vn){var Gn=document.createElement("div");Gn.setAttribute("oninput","return;"),Vn="function"===typeof Gn.oninput}jn=Vn}else jn=!1;Bn=jn&&(!document.documentMode||9<document.documentMode)}function Wn(){In&&(In.detachEvent("onpropertychange",zn),Rn=In=null)}function zn(e){if("value"===e.propertyName&&Dn(Rn)){var t=[];Ln(t,Rn,e,kt(e)),Dt(On,t)}}function Un(e,t,n){"focusin"===e?(Wn(),Rn=n,(In=t).attachEvent("onpropertychange",zn)):"focusout"===e&&Wn()}function Hn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Dn(Rn)}function Xn(e,t){if("click"===e)return Dn(t)}function Yn(e,t){if("input"===e||"change"===e)return Dn(t)}var qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Kn(e,t){if(qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!ie.call(t,s)||!qn(e[s],t[s]))return!1}return!0}function $n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zn(e,t){var n,i=$n(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=$n(i)}}function Qn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Qn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Jn(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function ei(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ti(e,t){var n=Jn(t);t=e.focusedElem;var i=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Qn(t.ownerDocument.documentElement,t)){if(null!==i&&ei(t))if(e=i.start,void 0===(n=i.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=void 0===i.end?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=Zn(t,r);var a=Zn(t,i);s&&a&&(1!==n.rangeCount||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&((e=e.createRange()).setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ni=nt&&"documentMode"in document&&11>=document.documentMode,ii=null,si=null,ri=null,ai=!1;function oi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ai||null==ii||ii!==ft(i)||("selectionStart"in(i=ii)&&ei(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},ri&&Kn(ri,i)||(ri=i,0<(i=Dh(si,"onSelect")).length&&(t=new Qt("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ii)))}function li(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ci={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionrun:li("Transition","TransitionRun"),transitionstart:li("Transition","TransitionStart"),transitioncancel:li("Transition","TransitionCancel"),transitionend:li("Transition","TransitionEnd")},hi={},ui={};function di(e){if(hi[e])return hi[e];if(!ci[e])return e;var t,n=ci[e];for(t in n)if(n.hasOwnProperty(t)&&t in ui)return hi[e]=n[t];return e}nt&&(ui=document.createElement("div").style,"AnimationEvent"in window||(delete ci.animationend.animation,delete ci.animationiteration.animation,delete ci.animationstart.animation),"TransitionEvent"in window||delete ci.transitionend.transition);var fi=di("animationend"),pi=di("animationiteration"),mi=di("animationstart"),gi=di("transitionrun"),bi=di("transitionstart"),vi=di("transitioncancel"),yi=di("transitionend"),xi=new Map,Si="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function wi(e,t){xi.set(e,t),et(t,[e])}var Ei=[],_i=0,Ti=0;function Mi(){for(var e=_i,t=Ti=_i=0;t<e;){var n=Ei[t];Ei[t++]=null;var i=Ei[t];Ei[t++]=null;var s=Ei[t];Ei[t++]=null;var r=Ei[t];if(Ei[t++]=null,null!==i&&null!==s){var a=i.pending;null===a?s.next=s:(s.next=a.next,a.next=s),i.pending=s}0!==r&&Ni(n,s,r)}}function Ci(e,t,n,i){Ei[_i++]=e,Ei[_i++]=t,Ei[_i++]=n,Ei[_i++]=i,Ti|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function Ai(e,t,n,i){return Ci(e,t,n,i),ki(e)}function Pi(e,t){return Ci(e,null,null,t),ki(e)}function Ni(e,t,n){e.lanes|=n;var i=e.alternate;null!==i&&(i.lanes|=n);for(var s=!1,r=e.return;null!==r;)r.childLanes|=n,null!==(i=r.alternate)&&(i.childLanes|=n),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(s=!0)),e=r,r=r.return;s&&null!==t&&3===e.tag&&(r=e.stateNode,s=31-xe(n),null===(e=(r=r.hiddenUpdates)[s])?r[s]=[t]:e.push(t),t.lane=536870912|n)}function ki(e){if(50<Ac)throw Ac=0,Pc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Li={},Ii=new WeakMap;function Ri(e,t){if("object"===typeof e&&null!==e){var n=Ii.get(e);return void 0!==n?n:(t={value:e,source:t,stack:D(t)},Ii.set(e,t),t)}return{value:e,source:t,stack:D(t)}}var Oi=[],Di=0,Fi=null,Bi=0,ji=[],Vi=0,Gi=null,Wi=1,zi="";function Ui(e,t){Oi[Di++]=Bi,Oi[Di++]=Fi,Fi=e,Bi=t}function Hi(e,t,n){ji[Vi++]=Wi,ji[Vi++]=zi,ji[Vi++]=Gi,Gi=e;var i=Wi;e=zi;var s=32-xe(i)-1;i&=~(1<<s),n+=1;var r=32-xe(t)+s;if(30<r){var a=s-s%5;r=(i&(1<<a)-1).toString(32),i>>=a,s-=a,Wi=1<<32-xe(t)+s|n<<s|i,zi=r+e}else Wi=1<<r|n<<s|i,zi=e}function Xi(e){null!==e.return&&(Ui(e,1),Hi(e,1,0))}function Yi(e){for(;e===Fi;)Fi=Oi[--Di],Oi[Di]=null,Bi=Oi[--Di],Oi[Di]=null;for(;e===Gi;)Gi=ji[--Vi],ji[Vi]=null,zi=ji[--Vi],ji[Vi]=null,Wi=ji[--Vi],ji[Vi]=null}var qi=null,Ki=null,$i=!1,Zi=null,Qi=!1,Ji=Error(a(519));function es(e){throw rs(Ri(Error(a(418,"")),e)),Ji}function ts(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[Be]=e,t[je]=i,n){case"dialog":Ph("cancel",t),Ph("close",t);break;case"iframe":case"object":case"embed":Ph("load",t);break;case"video":case"audio":for(n=0;n<Mh.length;n++)Ph(Mh[n],t);break;case"source":Ph("error",t);break;case"img":case"image":case"link":Ph("error",t),Ph("load",t);break;case"details":Ph("toggle",t);break;case"input":Ph("invalid",t),bt(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),ut(t);break;case"select":Ph("invalid",t);break;case"textarea":Ph("invalid",t),St(t,i.value,i.defaultValue,i.children),ut(t)}"string"!==typeof(n=i.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===i.suppressHydrationWarning||Wh(t.textContent,n)?(null!=i.popover&&(Ph("beforetoggle",t),Ph("toggle",t)),null!=i.onScroll&&Ph("scroll",t),null!=i.onScrollEnd&&Ph("scrollend",t),null!=i.onClick&&(t.onclick=zh),t=!0):t=!1,t||es(e)}function ns(e){for(qi=e.return;qi;)switch(qi.tag){case 3:case 27:return void(Qi=!0);case 5:case 13:return void(Qi=!1);default:qi=qi.return}}function is(e){if(e!==qi)return!1;if(!$i)return ns(e),$i=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Qh(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&Ki&&es(e),ns(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){Ki=ou(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}Ki=null}}else Ki=qi?ou(e.stateNode.nextSibling):null;return!0}function ss(){Ki=qi=null,$i=!1}function rs(e){null===Zi?Zi=[e]:Zi.push(e)}var as=Error(a(460)),os=Error(a(474)),ls={then:function(){}};function cs(e){return"fulfilled"===(e=e.status)||"rejected"===e}function hs(){}function us(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(hs,hs),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===as)throw Error(a(483));throw e;default:if("string"===typeof t.status)t.then(hs,hs);else{if(null!==(e=tc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===as)throw Error(a(483));throw e}throw ds=t,as}}var ds=null;function fs(){if(null===ds)throw Error(a(459));var e=ds;return ds=null,e}var ps=null,ms=0;function gs(e){var t=ms;return ms+=1,null===ps&&(ps=[]),us(ps,e,t)}function bs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function vs(e,t){if(t.$$typeof===l)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Fl(e,t)).index=0,e.sibling=null,e}function r(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=33554434,n):i:(t.flags|=33554434,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Wl(n,e.mode,i)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n,i){var r=n.type;return r===u?p(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===S&&ys(r)===t.type)?(bs(t=s(t,n.props),n),t.return=e,t):(bs(t=jl(n.type,n.key,n.props,null,e.mode,i),n),t.return=e,t)}function f(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zl(n,e.mode,i)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function p(e,t,n,i,r){return null===t||7!==t.tag?((t=Vl(n,e.mode,i,r)).return=e,t):((t=s(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Wl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case c:return bs(n=jl(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case h:return(t=zl(t,e.mode,n)).return=e,t;case S:return m(e,t=(0,t._init)(t._payload),n)}if(G(t)||T(t))return(t=Vl(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return m(e,gs(t),n);if(t.$$typeof===g)return m(e,Mo(e,t),n);vs(e,t)}return null}function b(e,t,n,i){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case c:return n.key===s?d(e,t,n,i):null;case h:return n.key===s?f(e,t,n,i):null;case S:return b(e,t,n=(s=n._init)(n._payload),i)}if(G(n)||T(n))return null!==s?null:p(e,t,n,i,null);if("function"===typeof n.then)return b(e,t,gs(n),i);if(n.$$typeof===g)return b(e,t,Mo(e,n),i);vs(e,n)}return null}function v(e,t,n,i,s){if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return l(t,e=e.get(n)||null,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case c:return d(t,e=e.get(null===i.key?n:i.key)||null,i,s);case h:return f(t,e=e.get(null===i.key?n:i.key)||null,i,s);case S:return v(e,t,n,i=(0,i._init)(i._payload),s)}if(G(i)||T(i))return p(t,e=e.get(n)||null,i,s,null);if("function"===typeof i.then)return v(e,t,n,gs(i),s);if(i.$$typeof===g)return v(e,t,n,Mo(t,i),s);vs(t,i)}return null}function y(l,d,f,p){if("object"===typeof f&&null!==f&&f.type===u&&null===f.key&&(f=f.props.children),"object"===typeof f&&null!==f){switch(f.$$typeof){case c:e:{for(var x=f.key;null!==d;){if(d.key===x){if((x=f.type)===u){if(7===d.tag){n(l,d.sibling),(p=s(d,f.props.children)).return=l,l=p;break e}}else if(d.elementType===x||"object"===typeof x&&null!==x&&x.$$typeof===S&&ys(x)===d.type){n(l,d.sibling),bs(p=s(d,f.props),f),p.return=l,l=p;break e}n(l,d);break}t(l,d),d=d.sibling}f.type===u?((p=Vl(f.props.children,l.mode,p,f.key)).return=l,l=p):(bs(p=jl(f.type,f.key,f.props,null,l.mode,p),f),p.return=l,l=p)}return o(l);case h:e:{for(x=f.key;null!==d;){if(d.key===x){if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===f.implementation){n(l,d.sibling),(p=s(d,f.children||[])).return=l,l=p;break e}n(l,d);break}t(l,d),d=d.sibling}(p=zl(f,l.mode,p)).return=l,l=p}return o(l);case S:return y(l,d,f=(x=f._init)(f._payload),p)}if(G(f))return function(s,a,o,l){for(var c=null,h=null,u=a,d=a=0,f=null;null!==u&&d<o.length;d++){u.index>d?(f=u,u=null):f=u.sibling;var p=b(s,u,o[d],l);if(null===p){null===u&&(u=f);break}e&&u&&null===p.alternate&&t(s,u),a=r(p,a,d),null===h?c=p:h.sibling=p,h=p,u=f}if(d===o.length)return n(s,u),$i&&Ui(s,d),c;if(null===u){for(;d<o.length;d++)null!==(u=m(s,o[d],l))&&(a=r(u,a,d),null===h?c=u:h.sibling=u,h=u);return $i&&Ui(s,d),c}for(u=i(u);d<o.length;d++)null!==(f=v(u,s,d,o[d],l))&&(e&&null!==f.alternate&&u.delete(null===f.key?d:f.key),a=r(f,a,d),null===h?c=f:h.sibling=f,h=f);return e&&u.forEach((function(e){return t(s,e)})),$i&&Ui(s,d),c}(l,d,f,p);if(T(f)){if("function"!==typeof(x=T(f)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var h=null,u=null,d=o,f=o=0,p=null,g=l.next();null!==d&&!g.done;f++,g=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var y=b(s,d,g.value,c);if(null===y){null===d&&(d=p);break}e&&d&&null===y.alternate&&t(s,d),o=r(y,o,f),null===u?h=y:u.sibling=y,u=y,d=p}if(g.done)return n(s,d),$i&&Ui(s,f),h;if(null===d){for(;!g.done;f++,g=l.next())null!==(g=m(s,g.value,c))&&(o=r(g,o,f),null===u?h=g:u.sibling=g,u=g);return $i&&Ui(s,f),h}for(d=i(d);!g.done;f++,g=l.next())null!==(g=v(d,s,f,g.value,c))&&(e&&null!==g.alternate&&d.delete(null===g.key?f:g.key),o=r(g,o,f),null===u?h=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(s,e)})),$i&&Ui(s,f),h}(l,d,f=x.call(f),p)}if("function"===typeof f.then)return y(l,d,gs(f),p);if(f.$$typeof===g)return y(l,d,Mo(l,f),p);vs(l,f)}return"string"===typeof f&&""!==f||"number"===typeof f||"bigint"===typeof f?(f=""+f,null!==d&&6===d.tag?(n(l,d.sibling),(p=s(d,f)).return=l,l=p):(n(l,d),(p=Wl(f,l.mode,p)).return=l,l=p),o(l)):n(l,d)}return function(e,t,n,i){try{ms=0;var s=y(e,t,n,i);return ps=null,s}catch(a){if(a===as)throw a;var r=Ol(29,a,null,e.mode);return r.lanes=i,r.return=e,r}}}var Ss=xs(!0),ws=xs(!1),Es=X(null),_s=X(0);function Ts(e,t){q(_s,e=cc),q(Es,t),cc=e|t.baseLanes}function Ms(){q(_s,cc),q(Es,Es.current)}function Cs(){cc=_s.current,Y(Es),Y(_s)}var As=X(null),Ps=null;function Ns(e){var t=e.alternate;q(Rs,1&Rs.current),q(As,e),null===Ps&&(null===t||null!==Es.current||null!==t.memoizedState)&&(Ps=e)}function ks(e){if(22===e.tag){if(q(Rs,Rs.current),q(As,e),null===Ps){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Ps=e)}}else Ls()}function Ls(){q(Rs,Rs.current),q(As,As.current)}function Is(e){Y(As),Ps===e&&(Ps=null),Y(Rs)}var Rs=X(0);function Os(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ds="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Fs=i.unstable_scheduleCallback,Bs=i.unstable_NormalPriority,js={$$typeof:g,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Vs(){return{controller:new Ds,data:new Map,refCount:0}}function Gs(e){e.refCount--,0===e.refCount&&Fs(Bs,(function(){e.controller.abort()}))}var Ws=null,zs=0,Us=0,Hs=null;function Xs(){if(0===--zs&&null!==Ws){null!==Hs&&(Hs.status="fulfilled");var e=Ws;Ws=null,Us=0,Hs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ys=N.S;N.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ws){var n=Ws=[];zs=0,Us=Sh(),Hs={status:"pending",value:void 0,then:function(e){n.push(e)}}}zs++,t.then(Xs,Xs)}(0,t),null!==Ys&&Ys(e,t)};var qs=X(null);function Ks(){var e=qs.current;return null!==e?e:tc.pooledCache}function $s(e,t){q(qs,null===t?qs.current:t.pool)}function Zs(){var e=Ks();return null===e?null:{parent:js._currentValue,pool:e}}var Qs=0,Js=null,er=null,tr=null,nr=!1,ir=!1,sr=!1,rr=0,ar=0,or=null,lr=0;function cr(){throw Error(a(321))}function hr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qn(e[n],t[n]))return!1;return!0}function ur(e,t,n,i,s,r){return Qs=r,Js=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=null===e||null===e.memoizedState?Ta:Ma,sr=!1,r=n(i,s),sr=!1,ir&&(r=fr(t,n,i,s)),dr(e),r}function dr(e){N.H=_a;var t=null!==er&&null!==er.next;if(Qs=0,tr=er=Js=null,nr=!1,ar=0,or=null,t)throw Error(a(300));null===e||za||null!==(e=e.dependencies)&&Eo(e)&&(za=!0)}function fr(e,t,n,i){Js=e;var s=0;do{if(ir&&(or=null),ar=0,ir=!1,25<=s)throw Error(a(301));if(s+=1,tr=er=null,null!=e.updateQueue){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,null!=r.memoCache&&(r.memoCache.index=0)}N.H=Ca,r=t(n,i)}while(ir);return r}function pr(){var e=N.H,t=e.useState()[0];return t="function"===typeof t.then?xr(t):t,e=e.useState()[0],(null!==er?er.memoizedState:null)!==e&&(Js.flags|=1024),t}function mr(){var e=0!==rr;return rr=0,e}function gr(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function br(e){if(nr){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}nr=!1}Qs=0,tr=er=Js=null,ir=!1,ar=rr=0,or=null}function vr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===tr?Js.memoizedState=tr=e:tr=tr.next=e,tr}function yr(){if(null===er){var e=Js.alternate;e=null!==e?e.memoizedState:null}else e=er.next;var t=null===tr?Js.memoizedState:tr.next;if(null!==t)tr=t,er=e;else{if(null===e){if(null===Js.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(er=e).memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},null===tr?Js.memoizedState=tr=e:tr=tr.next=e}return tr}function xr(e){var t=ar;return ar+=1,null===or&&(or=[]),e=us(or,e,t),t=Js,null===(null===tr?t.memoizedState:tr.next)&&(t=t.alternate,N.H=null===t||null===t.memoizedState?Ta:Ma),e}function Sr(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return xr(e);if(e.$$typeof===g)return To(e)}throw Error(a(438,String(e)))}function wr(e){var t=null,n=Js.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var i=Js.alternate;null!==i&&(null!==(i=i.updateQueue)&&(null!=(i=i.memoCache)&&(t={data:i.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Js.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=E;return t.index++,n}function Er(e,t){return"function"===typeof t?t(e):t}function _r(e){return Tr(yr(),er,e)}function Tr(e,t,n){var i=e.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=n;var s=e.baseQueue,r=i.pending;if(null!==r){if(null!==s){var o=s.next;s.next=r.next,r.next=o}t.baseQueue=s=r,i.pending=null}if(r=e.baseState,null===s)e.memoizedState=r;else{var l=o=null,c=null,h=t=s.next,u=!1;do{var d=-536870913&h.lane;if(d!==h.lane?(ic&d)===d:(Qs&d)===d){var f=h.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),d===Us&&(u=!0);else{if((Qs&f)===f){h=h.next,f===Us&&(u=!0);continue}d={lane:0,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},null===c?(l=c=d,o=r):c=c.next=d,Js.lanes|=f,uc|=f}d=h.action,sr&&n(r,d),r=h.hasEagerState?h.eagerState:n(r,d)}else f={lane:d,revertLane:h.revertLane,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null},null===c?(l=c=f,o=r):c=c.next=f,Js.lanes|=d,uc|=d;h=h.next}while(null!==h&&h!==t);if(null===c?o=r:c.next=l,!qn(r,e.memoizedState)&&(za=!0,u&&null!==(n=Hs)))throw n;e.memoizedState=r,e.baseState=o,e.baseQueue=c,i.lastRenderedState=r}return null===s&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Mr(e){var t=yr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,r=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{r=e(r,o.action),o=o.next}while(o!==s);qn(r,t.memoizedState)||(za=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),n.lastRenderedState=r}return[r,i]}function Cr(e,t,n){var i=Js,s=yr(),r=$i;if(r){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!qn((er||s).memoizedState,n);if(o&&(s.memoizedState=n,za=!0),s=s.queue,Qr(Nr.bind(null,i,s,e),[e]),s.getSnapshot!==t||o||null!==tr&&1&tr.memoizedState.tag){if(i.flags|=2048,Yr(9,Pr.bind(null,i,s,n,t),{destroy:void 0},null),null===tc)throw Error(a(349));r||0!==(60&Qs)||Ar(i,t,n)}return n}function Ar(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Js.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Js.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Pr(e,t,n,i){t.value=n,t.getSnapshot=i,kr(t)&&Lr(e)}function Nr(e,t,n){return n((function(){kr(t)&&Lr(e)}))}function kr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qn(e,n)}catch(i){return!0}}function Lr(e){var t=Pi(e,2);null!==t&&Lc(t,e,2)}function Ir(e){var t=vr();if("function"===typeof e){var n=e;if(e=n(),sr){ye(!0);try{n()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:e},t}function Rr(e,t,n,i){return e.baseState=n,Tr(e,er,"function"===typeof i?i:Er)}function Or(e,t,n,i,s){if(Sa(e))throw Error(a(485));if(null!==(e=t.action)){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){r.listeners.push(e)}};null!==N.T?n(!0):r.isTransition=!1,i(r),null===(n=t.pending)?(r.next=t.pending=r,Dr(t,r)):(r.next=n.next,t.pending=n.next=r)}}function Dr(e,t){var n=t.action,i=t.payload,s=e.state;if(t.isTransition){var r=N.T,a={};N.T=a;try{var o=n(s,i),l=N.S;null!==l&&l(a,o),Fr(e,t,o)}catch(c){jr(e,t,c)}finally{N.T=r}}else try{Fr(e,t,r=n(s,i))}catch(h){jr(e,t,h)}}function Fr(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){Br(e,t,n)}),(function(n){return jr(e,t,n)})):Br(e,t,n)}function Br(e,t,n){t.status="fulfilled",t.value=n,Vr(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Dr(e,n)))}function jr(e,t,n){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do{t.status="rejected",t.reason=n,Vr(t),t=t.next}while(t!==i)}e.action=null}function Vr(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Gr(e,t){return t}function Wr(e,t){if($i){var n=tc.formState;if(null!==n){e:{var i=Js;if($i){if(Ki){t:{for(var s=Ki,r=Qi;8!==s.nodeType;){if(!r){s=null;break t}if(null===(s=ou(s.nextSibling))){s=null;break t}}s="F!"===(r=s.data)||"F"===r?s:null}if(s){Ki=ou(s.nextSibling),i="F!"===s.data;break e}}es(i)}i=!1}i&&(t=n[0])}}return(n=vr()).memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:t},n.queue=i,n=va.bind(null,Js,i),i.dispatch=n,i=Ir(!1),r=xa.bind(null,Js,!1,i.queue),s={state:t,dispatch:null,action:e,pending:null},(i=vr()).queue=s,n=Or.bind(null,Js,s,r,n),s.dispatch=n,i.memoizedState=e,[t,n,!1]}function zr(e){return Ur(yr(),er,e)}function Ur(e,t,n){t=Tr(e,t,Gr)[0],e=_r(Er)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?xr(t):t;var i=yr(),s=i.queue,r=s.dispatch;return n!==i.memoizedState&&(Js.flags|=2048,Yr(9,Hr.bind(null,s,n),{destroy:void 0},null)),[t,r,e]}function Hr(e,t){e.action=t}function Xr(e){var t=yr(),n=er;if(null!==n)return Ur(t,n,e);yr(),t=t.memoizedState;var i=(n=yr()).queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Yr(e,t,n,i){return e={tag:e,create:t,inst:n,deps:i,next:null},null===(t=Js.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Js.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function qr(){return yr().memoizedState}function Kr(e,t,n,i){var s=vr();Js.flags|=e,s.memoizedState=Yr(1|t,n,{destroy:void 0},void 0===i?null:i)}function $r(e,t,n,i){var s=yr();i=void 0===i?null:i;var r=s.memoizedState.inst;null!==er&&null!==i&&hr(i,er.memoizedState.deps)?s.memoizedState=Yr(t,n,r,i):(Js.flags|=e,s.memoizedState=Yr(1|t,n,r,i))}function Zr(e,t){Kr(8390656,8,e,t)}function Qr(e,t){$r(2048,8,e,t)}function Jr(e,t){return $r(4,2,e,t)}function ea(e,t){return $r(4,4,e,t)}function ta(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function na(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,$r(4,4,ta.bind(null,t,e),n)}function ia(){}function sa(e,t){var n=yr();t=void 0===t?null:t;var i=n.memoizedState;return null!==t&&hr(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function ra(e,t){var n=yr();t=void 0===t?null:t;var i=n.memoizedState;if(null!==t&&hr(t,i[1]))return i[0];if(i=e(),sr){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[i,t],i}function aa(e,t,n){return void 0===n||0!==(1073741824&Qs)?e.memoizedState=t:(e.memoizedState=n,e=kc(),Js.lanes|=e,uc|=e,n)}function oa(e,t,n,i){return qn(n,t)?n:null!==Es.current?(e=aa(e,n,i),qn(e,t)||(za=!0),e):0===(42&Qs)?(za=!0,e.memoizedState=n):(e=kc(),Js.lanes|=e,uc|=e,t)}function la(e,t,n,i,s){var r=W.p;W.p=0!==r&&8>r?r:8;var a=N.T,o={};N.T=o,xa(e,!1,t,n);try{var l=s(),c=N.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)ya(e,t,function(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){i.status="fulfilled",i.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(i.status="rejected",i.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),i}(l,i),Nc());else ya(e,t,i,Nc())}catch(h){ya(e,t,{then:function(){},status:"rejected",reason:h},Nc())}finally{W.p=r,N.T=a}}function ca(){}function ha(e,t,n,i){if(5!==e.tag)throw Error(a(476));var s=ua(e).queue;la(e,s,t,z,null===n?ca:function(){return da(e),n(i)})}function ua(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:z,baseState:z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:z},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function da(e){ya(e,ua(e).next.queue,{},Nc())}function fa(){return To(Du)}function pa(){return yr().memoizedState}function ma(){return yr().memoizedState}function ga(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Nc(),i=Lo(t,e=ko(n),n);return null!==i&&(Lc(i,t,n),Io(i,t,n)),t={cache:Vs()},void(e.payload=t)}t=t.return}}function ba(e,t,n){var i=Nc();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Sa(e)?wa(t,n):null!==(n=Ai(e,t,n,i))&&(Lc(n,e,i),Ea(n,t,i))}function va(e,t,n){ya(e,t,n,Nc())}function ya(e,t,n,i){var s={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sa(e))wa(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=r(a,n);if(s.hasEagerState=!0,s.eagerState=o,qn(o,a))return Ci(e,t,s,0),null===tc&&Mi(),!1}catch(l){}if(null!==(n=Ai(e,t,s,i)))return Lc(n,e,i),Ea(n,t,i),!0}return!1}function xa(e,t,n,i){if(i={lane:2,revertLane:Sh(),action:i,hasEagerState:!1,eagerState:null,next:null},Sa(e)){if(t)throw Error(a(479))}else null!==(t=Ai(e,n,i,2))&&Lc(t,e,2)}function Sa(e){var t=e.alternate;return e===Js||null!==t&&t===Js}function wa(e,t){ir=nr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ea(e,t,n){if(0!==(4194176&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Re(e,n)}}var _a={readContext:To,use:Sr,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useLayoutEffect:cr,useInsertionEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useSyncExternalStore:cr,useId:cr};_a.useCacheRefresh=cr,_a.useMemoCache=cr,_a.useHostTransitionStatus=cr,_a.useFormState=cr,_a.useActionState=cr,_a.useOptimistic=cr;var Ta={readContext:To,use:Sr,useCallback:function(e,t){return vr().memoizedState=[e,void 0===t?null:t],e},useContext:To,useEffect:Zr,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Kr(4194308,4,ta.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Kr(4194308,4,e,t)},useInsertionEffect:function(e,t){Kr(4,2,e,t)},useMemo:function(e,t){var n=vr();t=void 0===t?null:t;var i=e();if(sr){ye(!0);try{e()}finally{ye(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=vr();if(void 0!==n){var s=n(t);if(sr){ye(!0);try{n(t)}finally{ye(!1)}}}else s=t;return i.memoizedState=i.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},i.queue=e,e=e.dispatch=ba.bind(null,Js,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},vr().memoizedState=e},useState:function(e){var t=(e=Ir(e)).queue,n=va.bind(null,Js,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ia,useDeferredValue:function(e,t){return aa(vr(),e,t)},useTransition:function(){var e=Ir(!1);return e=la.bind(null,Js,e.queue,!0,!1),vr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Js,s=vr();if($i){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===tc)throw Error(a(349));0!==(60&ic)||Ar(i,t,n)}s.memoizedState=n;var r={value:n,getSnapshot:t};return s.queue=r,Zr(Nr.bind(null,i,r,e),[e]),i.flags|=2048,Yr(9,Pr.bind(null,i,r,n,t),{destroy:void 0},null),n},useId:function(){var e=vr(),t=tc.identifierPrefix;if($i){var n=zi;t=":"+t+"R"+(n=(Wi&~(1<<32-xe(Wi)-1)).toString(32)+n),0<(n=rr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=lr++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return vr().memoizedState=ga.bind(null,Js)}};Ta.useMemoCache=wr,Ta.useHostTransitionStatus=fa,Ta.useFormState=Wr,Ta.useActionState=Wr,Ta.useOptimistic=function(e){var t=vr();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=xa.bind(null,Js,!0,n),n.dispatch=t,[e,t]};var Ma={readContext:To,use:Sr,useCallback:sa,useContext:To,useEffect:Qr,useImperativeHandle:na,useInsertionEffect:Jr,useLayoutEffect:ea,useMemo:ra,useReducer:_r,useRef:qr,useState:function(){return _r(Er)},useDebugValue:ia,useDeferredValue:function(e,t){return oa(yr(),er.memoizedState,e,t)},useTransition:function(){var e=_r(Er)[0],t=yr().memoizedState;return["boolean"===typeof e?e:xr(e),t]},useSyncExternalStore:Cr,useId:pa};Ma.useCacheRefresh=ma,Ma.useMemoCache=wr,Ma.useHostTransitionStatus=fa,Ma.useFormState=zr,Ma.useActionState=zr,Ma.useOptimistic=function(e,t){return Rr(yr(),0,e,t)};var Ca={readContext:To,use:Sr,useCallback:sa,useContext:To,useEffect:Qr,useImperativeHandle:na,useInsertionEffect:Jr,useLayoutEffect:ea,useMemo:ra,useReducer:Mr,useRef:qr,useState:function(){return Mr(Er)},useDebugValue:ia,useDeferredValue:function(e,t){var n=yr();return null===er?aa(n,e,t):oa(n,er.memoizedState,e,t)},useTransition:function(){var e=Mr(Er)[0],t=yr().memoizedState;return["boolean"===typeof e?e:xr(e),t]},useSyncExternalStore:Cr,useId:pa};function Aa(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:k({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}Ca.useCacheRefresh=ma,Ca.useMemoCache=wr,Ca.useHostTransitionStatus=fa,Ca.useFormState=Xr,Ca.useActionState=Xr,Ca.useOptimistic=function(e,t){var n=yr();return null!==er?Rr(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Pa={isMounted:function(e){return!!(e=e._reactInternals)&&F(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Nc(),s=ko(i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Lo(e,s,i))&&(Lc(t,e,i),Io(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Nc(),s=ko(i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Lo(e,s,i))&&(Lc(t,e,i),Io(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Nc(),i=ko(n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Lo(e,i,n))&&(Lc(t,e,n),Io(t,e,n))}};function Na(e,t,n,i,s,r,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,r,a):!t.prototype||!t.prototype.isPureReactComponent||(!Kn(n,i)||!Kn(s,r))}function ka(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Pa.enqueueReplaceState(t,t.state,null)}function La(e,t){var n=t;if("ref"in t)for(var i in n={},t)"ref"!==i&&(n[i]=t[i]);if(e=e.defaultProps)for(var s in n===t&&(n=k({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var Ia="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Ra(e){Ia(e)}function Oa(e){console.error(e)}function Da(e){Ia(e)}function Fa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function Ba(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(i){setTimeout((function(){throw i}))}}function ja(e,t,n){return(n=ko(n)).tag=3,n.payload={element:null},n.callback=function(){Fa(e,t)},n}function Va(e){return(e=ko(e)).tag=3,e}function Ga(e,t,n,i){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var r=i.value;e.payload=function(){return s(r)},e.callback=function(){Ba(t,n,i)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){Ba(t,n,i),"function"!==typeof s&&(null===wc?wc=new Set([this]):wc.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}var Wa=Error(a(461)),za=!1;function Ua(e,t,n,i){t.child=null===e?ws(t,null,n,i):Ss(t,e.child,n,i)}function Ha(e,t,n,i,s){n=n.render;var r=t.ref;if("ref"in i){var a={};for(var o in i)"ref"!==o&&(a[o]=i[o])}else a=i;return _o(t),i=ur(e,t,n,a,r,s),o=mr(),null===e||za?($i&&o&&Xi(t),t.flags|=1,Ua(e,t,i,s),t.child):(gr(e,t,s),uo(e,t,s))}function Xa(e,t,n,i,s){if(null===e){var r=n.type;return"function"!==typeof r||Dl(r)||void 0!==r.defaultProps||null!==n.compare?((e=jl(n.type,null,i,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Ya(e,t,r,i,s))}if(r=e.child,!fo(e,s)){var a=r.memoizedProps;if((n=null!==(n=n.compare)?n:Kn)(a,i)&&e.ref===t.ref)return uo(e,t,s)}return t.flags|=1,(e=Fl(r,i)).ref=t.ref,e.return=t,t.child=e}function Ya(e,t,n,i,s){if(null!==e){var r=e.memoizedProps;if(Kn(r,i)&&e.ref===t.ref){if(za=!1,t.pendingProps=i=r,!fo(e,s))return t.lanes=e.lanes,uo(e,t,s);0!==(131072&e.flags)&&(za=!0)}}return Za(e,t,n,i,s)}function qa(e,t,n){var i=t.pendingProps,s=i.children,r=0!==(2&t.stateNode._pendingVisibility),a=null!==e?e.memoizedState:null;if($a(e,t),"hidden"===i.mode||r){if(0!==(128&t.flags)){if(i=null!==a?a.baseLanes|n:n,null!==e){for(s=t.child=e.child,r=0;null!==s;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~i}else t.childLanes=0,t.child=null;return Ka(e,t,i,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ka(e,t,null!==a?a.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&$s(0,null!==a?a.cachePool:null),null!==a?Ts(t,a):Ms(),ks(t)}else null!==a?($s(0,a.cachePool),Ts(t,a),Ls(),t.memoizedState=null):(null!==e&&$s(0,null),Ms(),Ls());return Ua(e,t,s,n),t.child}function Ka(e,t,n,i){var s=Ks();return s=null===s?null:{parent:js._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&$s(0,null),Ms(),ks(t),null!==e&&wo(e,t,i,!0),null}function $a(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function Za(e,t,n,i,s){return _o(t),n=ur(e,t,n,i,void 0,s),i=mr(),null===e||za?($i&&i&&Xi(t),t.flags|=1,Ua(e,t,n,s),t.child):(gr(e,t,s),uo(e,t,s))}function Qa(e,t,n,i,s,r){return _o(t),t.updateQueue=null,n=fr(t,i,n,s),dr(e),i=mr(),null===e||za?($i&&i&&Xi(t),t.flags|=1,Ua(e,t,n,r),t.child):(gr(e,t,r),uo(e,t,r))}function Ja(e,t,n,i,s){if(_o(t),null===t.stateNode){var r=Li,a=n.contextType;"object"===typeof a&&null!==a&&(r=To(a)),r=new n(i,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=Pa,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=i,r.state=t.memoizedState,r.refs={},Po(t),a=n.contextType,r.context="object"===typeof a&&null!==a?To(a):Li,r.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(Aa(t,n,a,i),r.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(a=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),a!==r.state&&Pa.enqueueReplaceState(r,r.state,null),Fo(t,i,r,s),Do(),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){r=t.stateNode;var o=t.memoizedProps,l=La(n,o);r.props=l;var c=r.context,h=n.contextType;a=Li,"object"===typeof h&&null!==h&&(a=To(h));var u=n.getDerivedStateFromProps;h="function"===typeof u||"function"===typeof r.getSnapshotBeforeUpdate,o=t.pendingProps!==o,h||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o||c!==a)&&ka(t,r,i,a),Ao=!1;var d=t.memoizedState;r.state=d,Fo(t,i,r,s),Do(),c=t.memoizedState,o||d!==c||Ao?("function"===typeof u&&(Aa(t,n,u,i),c=t.memoizedState),(l=Ao||Na(t,n,l,i,d,c,a))?(h||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),r.props=i,r.state=c,r.context=a,i=l):("function"===typeof r.componentDidMount&&(t.flags|=4194308),i=!1)}else{r=t.stateNode,No(e,t),h=La(n,a=t.memoizedProps),r.props=h,u=t.pendingProps,d=r.context,c=n.contextType,l=Li,"object"===typeof c&&null!==c&&(l=To(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a!==u||d!==l)&&ka(t,r,i,l),Ao=!1,d=t.memoizedState,r.state=d,Fo(t,i,r,s),Do();var f=t.memoizedState;a!==u||d!==f||Ao||null!==e&&null!==e.dependencies&&Eo(e.dependencies)?("function"===typeof o&&(Aa(t,n,o,i),f=t.memoizedState),(h=Ao||Na(t,n,h,i,d,f,l)||null!==e&&null!==e.dependencies&&Eo(e.dependencies))?(c||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(i,f,l),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),r.props=i,r.state=f,r.context=l,i=h):("function"!==typeof r.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return r=i,$a(e,t),i=0!==(128&t.flags),r||i?(r=t.stateNode,n=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&i?(t.child=Ss(t,e.child,null,s),t.child=Ss(t,null,n,s)):Ua(e,t,n,s),t.memoizedState=r.state,e=t.child):e=uo(e,t,s),e}function eo(e,t,n,i){return ss(),t.flags|=256,Ua(e,t,n,i),t.child}var to={dehydrated:null,treeContext:null,retryLane:0};function no(e){return{baseLanes:e,cachePool:Zs()}}function io(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=pc),e}function so(e,t,n){var i,s=t.pendingProps,r=!1,o=0!==(128&t.flags);if((i=o)||(i=(null===e||null!==e.memoizedState)&&0!==(2&Rs.current)),i&&(r=!0,t.flags&=-129),i=0!==(32&t.flags),t.flags&=-33,null===e){if($i){if(r?Ns(t):Ls(),$i){var l,c=Ki;if(l=c){e:{for(l=c,c=Qi;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=ou(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Gi?{id:Wi,overflow:zi}:null,retryLane:536870912},(l=Ol(18,null,null,0)).stateNode=c,l.return=t,t.child=l,qi=t,Ki=null,l=!0):l=!1}l||es(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return"$!"===c.data?t.lanes=16:t.lanes=536870912,null;Is(t)}return c=s.children,s=s.fallback,r?(Ls(),c=ao({mode:"hidden",children:c},r=t.mode),s=Vl(s,r,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(r=t.child).memoizedState=no(n),r.childLanes=io(e,i,n),t.memoizedState=to,s):(Ns(t),ro(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(Ns(t),t.flags&=-257,t=oo(e,t,n)):null!==t.memoizedState?(Ls(),t.child=e.child,t.flags|=128,t=null):(Ls(),r=s.fallback,c=t.mode,s=ao({mode:"visible",children:s.children},c),(r=Vl(r,c,n,null)).flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,Ss(t,e.child,null,n),(s=t.child).memoizedState=no(n),s.childLanes=io(e,i,n),t.memoizedState=to,t=r);else if(Ns(t),"$!"===c.data){if(i=c.nextSibling&&c.nextSibling.dataset)var h=i.dgst;i=h,(s=Error(a(419))).stack="",s.digest=i,rs({value:s,source:null,stack:null}),t=oo(e,t,n)}else if(za||wo(e,t,n,!1),i=0!==(n&e.childLanes),za||i){if(null!==(i=tc)){if(0!==(42&(s=n&-n)))s=1;else switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=64;break;case 268435456:s=134217728;break;default:s=0}if(0!==(s=0!==(s&(i.suspendedLanes|n))?0:s)&&s!==l.retryLane)throw l.retryLane=s,Pi(e,s),Lc(i,e,s),Wa}"$?"===c.data||Uc(),t=oo(e,t,n)}else"$?"===c.data?(t.flags|=128,t.child=e.child,t=oh.bind(null,e),c._reactRetry=t,t=null):(e=l.treeContext,Ki=ou(c.nextSibling),qi=t,$i=!0,Zi=null,Qi=!1,null!==e&&(ji[Vi++]=Wi,ji[Vi++]=zi,ji[Vi++]=Gi,Wi=e.id,zi=e.overflow,Gi=t),(t=ro(t,s.children)).flags|=4096);return t}return r?(Ls(),r=s.fallback,c=t.mode,h=(l=e.child).sibling,(s=Fl(l,{mode:"hidden",children:s.children})).subtreeFlags=31457280&l.subtreeFlags,null!==h?r=Fl(h,r):(r=Vl(r,c,n,null)).flags|=2,r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,null===(c=e.child.memoizedState)?c=no(n):(null!==(l=c.cachePool)?(h=js._currentValue,l=l.parent!==h?{parent:h,pool:h}:l):l=Zs(),c={baseLanes:c.baseLanes|n,cachePool:l}),r.memoizedState=c,r.childLanes=io(e,i,n),t.memoizedState=to,s):(Ns(t),e=(n=e.child).sibling,(n=Fl(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function ro(e,t){return(t=ao({mode:"visible",children:t},e.mode)).return=e,e.child=t}function ao(e,t){return Gl(e,t,0,null)}function oo(e,t,n){return Ss(t,e.child,null,n),(e=ro(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function lo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),xo(e.return,t,n)}function co(e,t,n,i,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function ho(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(Ua(e,t,i.children,n),0!==(2&(i=Rs.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&lo(e,n,t);else if(19===e.tag)lo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(q(Rs,i),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===Os(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),co(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Os(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}co(t,!0,n,null,r);break;case"together":co(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function uo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),uc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(wo(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function fo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Eo(e))}function po(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)za=!0;else{if(!fo(e,n)&&0===(128&t.flags))return za=!1,function(e,t,n){switch(t.tag){case 3:J(t,t.stateNode.containerInfo),vo(t,js,e.memoizedState.cache),ss();break;case 27:case 5:te(t);break;case 4:J(t,t.stateNode.containerInfo);break;case 10:vo(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(Ns(t),t.flags|=128,null):0!==(n&t.child.childLanes)?so(e,t,n):(Ns(t),null!==(e=uo(e,t,n))?e.sibling:null);Ns(t);break;case 19:var s=0!==(128&e.flags);if((i=0!==(n&t.childLanes))||(wo(e,t,n,!1),i=0!==(n&t.childLanes)),s){if(i)return ho(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),q(Rs,Rs.current),i)break;return null;case 22:case 23:return t.lanes=0,qa(e,t,n);case 24:vo(t,js,e.memoizedState.cache)}return uo(e,t,n)}(e,t,n);za=0!==(131072&e.flags)}else za=!1,$i&&0!==(1048576&t.flags)&&Hi(t,Bi,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,"function"!==typeof i){if(void 0!==i&&null!==i){if((s=i.$$typeof)===b){t.tag=11,t=Ha(null,t,i,e,n);break e}if(s===x){t.tag=14,t=Xa(null,t,i,e,n);break e}}throw t=C(i)||i,Error(a(306,t,""))}Dl(i)?(e=La(i,e),t.tag=1,t=Ja(null,t,i,e,n)):(t.tag=0,t=Za(null,t,i,e,n))}return t;case 0:return Za(e,t,t.type,t.pendingProps,n);case 1:return Ja(e,t,i=t.type,s=La(i,t.pendingProps),n);case 3:e:{if(J(t,t.stateNode.containerInfo),null===e)throw Error(a(387));var r=t.pendingProps;i=(s=t.memoizedState).element,No(e,t),Fo(t,r,null,n);var o=t.memoizedState;if(r=o.cache,vo(t,js,r),r!==s.cache&&So(t,[js],n,!0),Do(),r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=eo(e,t,r,n);break e}if(r!==i){rs(i=Ri(Error(a(424)),t)),t=eo(e,t,r,n);break e}for(Ki=ou(t.stateNode.containerInfo.firstChild),qi=t,$i=!0,Zi=null,Qi=!0,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ss(),r===i){t=uo(e,t,n);break e}Ua(e,t,r,n)}t=t.child}return t;case 26:return $a(e,t),null===e?(n=gu(t.type,null,t.pendingProps,null))?t.memoizedState=n:$i||(n=t.type,e=t.pendingProps,(i=Kh(Z.current).createElement(n))[Be]=t,i[je]=e,Xh(i,n,e),Ze(i),t.stateNode=i):t.memoizedState=gu(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&$i&&(i=t.stateNode=cu(t.type,t.pendingProps,Z.current),qi=t,Qi=!0,Ki=ou(i.firstChild)),i=t.pendingProps.children,null!==e||$i?Ua(e,t,i,n):t.child=Ss(t,null,i,n),$a(e,t),t.child;case 5:return null===e&&$i&&((s=i=Ki)&&(null!==(i=function(e,t,n,i){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(i){if(!e[He])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(null==s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===r)return e}if(null===(e=ou(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,Qi))?(t.stateNode=i,qi=t,Ki=ou(i.firstChild),Qi=!1,s=!0):s=!1),s||es(t)),te(t),s=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,i=r.children,Qh(s,r)?i=null:null!==o&&Qh(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=ur(e,t,pr,null,null,n),Du._currentValue=s),$a(e,t),Ua(e,t,i,n),t.child;case 6:return null===e&&$i&&((e=n=Ki)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=ou(e.nextSibling)))return null}return e}(n,t.pendingProps,Qi))?(t.stateNode=n,qi=t,Ki=null,e=!0):e=!1),e||es(t)),null;case 13:return so(e,t,n);case 4:return J(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Ss(t,null,i,n):Ua(e,t,i,n),t.child;case 11:return Ha(e,t,t.type,t.pendingProps,n);case 7:return Ua(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ua(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,vo(t,t.type,i.value),Ua(e,t,i.children,n),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,_o(t),i=i(s=To(s)),t.flags|=1,Ua(e,t,i,n),t.child;case 14:return Xa(e,t,t.type,t.pendingProps,n);case 15:return Ya(e,t,t.type,t.pendingProps,n);case 19:return ho(e,t,n);case 22:return qa(e,t,n);case 24:return _o(t),i=To(js),null===e?(null===(s=Ks())&&(s=tc,r=Vs(),s.pooledCache=r,r.refCount++,null!==r&&(s.pooledCacheLanes|=n),s=r),t.memoizedState={parent:i,cache:s},Po(t),vo(t,js,s)):(0!==(e.lanes&n)&&(No(e,t),Fo(t,null,null,n),Do()),s=e.memoizedState,r=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),vo(t,js,i)):(i=r.cache,vo(t,js,i),i!==s.cache&&So(t,[js],n,!0))),Ua(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}var mo=X(null),go=null,bo=null;function vo(e,t,n){q(mo,t._currentValue),t._currentValue=n}function yo(e){e._currentValue=mo.current,Y(mo)}function xo(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function So(e,t,n,i){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var r=s.dependencies;if(null!==r){var o=s.child;r=r.firstContext;e:for(;null!==r;){var l=r;r=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){r.lanes|=n,null!==(l=r.alternate)&&(l.lanes|=n),xo(r.return,n,e),i||(o=null);break e}r=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(r=o.alternate)&&(r.lanes|=n),xo(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function wo(e,t,n,i){e=null;for(var s=t,r=!1;null!==s;){if(!r)if(0!==(524288&s.flags))r=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;qn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===Q.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Du):e=[Du])}s=s.return}null!==e&&So(t,e,n,i),t.flags|=262144}function Eo(e){for(e=e.firstContext;null!==e;){if(!qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _o(e){go=e,bo=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function To(e){return Co(go,e)}function Mo(e,t){return null===go&&_o(e),Co(e,t)}function Co(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===bo){if(null===e)throw Error(a(308));bo=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else bo=bo.next=t;return n}var Ao=!1;function Po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function No(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ko(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&ec)){var s=i.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=ki(e),Ni(e,null,n),t}return Ci(e,i,t,n),ki(e)}function Io(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Re(e,n)}}function Ro(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===r?s=r=a:r=r.next=a,n=n.next}while(null!==n);null===r?s=r=t:r=r.next=t}else s=r=t;return n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Oo=!1;function Do(){if(Oo){if(null!==Hs)throw Hs}}function Fo(e,t,n,i){Oo=!1;var s=e.updateQueue;Ao=!1;var r=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?r=c:a.next=c,a=l;var h=e.alternate;null!==h&&((o=(h=h.updateQueue).lastBaseUpdate)!==a&&(null===o?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=l))}if(null!==r){var u=s.baseState;for(a=0,h=c=l=null,o=r;;){var d=-536870913&o.lane,f=d!==o.lane;if(f?(ic&d)===d:(i&d)===d){0!==d&&d===Us&&(Oo=!0),null!==h&&(h=h.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,m=o;d=t;var g=n;switch(m.tag){case 1:if("function"===typeof(p=m.payload)){u=p.call(g,u,d);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(g,u,d):p)||void 0===d)break e;u=k({},u,d);break e;case 2:Ao=!0}}null!==(d=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=s.callbacks)?s.callbacks=[d]:f.push(d))}else f={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===h?(c=h=f,l=u):h=h.next=f,a|=d;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(f=o).next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}null===h&&(l=u),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,null===r&&(s.shared.lanes=0),uc|=a,e.lanes=a,e.memoizedState=u}}function Bo(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function jo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Bo(n[e],t)}function Vo(e,t){try{var n=t.updateQueue,i=null!==n?n.lastEffect:null;if(null!==i){var s=i.next;n=s;do{if((n.tag&e)===e){i=void 0;var r=n.create,a=n.inst;i=r(),a.destroy=i}n=n.next}while(n!==s)}}catch(o){ih(t,t.return,o)}}function Go(e,t,n){try{var i=t.updateQueue,s=null!==i?i.lastEffect:null;if(null!==s){var r=s.next;i=r;do{if((i.tag&e)===e){var a=i.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n;try{o()}catch(c){ih(s,l,c)}}}i=i.next}while(i!==r)}}catch(c){ih(t,t.return,c)}}function Wo(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{jo(t,n)}catch(i){ih(e,e.return,i)}}}function zo(e,t,n){n.props=La(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){ih(e,t,i)}}function Uo(e,t){try{var n=e.ref;if(null!==n){var i=e.stateNode;switch(e.tag){case 26:case 27:case 5:var s=i;break;default:s=i}"function"===typeof n?e.refCleanup=n(s):n.current=s}}catch(r){ih(e,t,r)}}function Ho(e,t){var n=e.ref,i=e.refCleanup;if(null!==n)if("function"===typeof i)try{i()}catch(s){ih(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(r){ih(e,t,r)}else n.current=null}function Xo(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){ih(e,e.return,s)}}function Yo(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,o=null,l=null,c=null,h=null,u=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:i.hasOwnProperty(p)||Uh(e,t,p,null,i,d)}}for(var f in i){var p=i[f];if(d=n[f],i.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":r=p;break;case"name":s=p;break;case"checked":h=p;break;case"defaultChecked":u=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==d&&Uh(e,t,f,p,i,d)}}return void gt(e,o,l,c,h,u,r,s);case"select":for(r in p=o=l=f=null,n)if(c=n[r],n.hasOwnProperty(r)&&null!=c)switch(r){case"value":break;case"multiple":p=c;default:i.hasOwnProperty(r)||Uh(e,t,r,null,i,c)}for(s in i)if(r=i[s],c=n[s],i.hasOwnProperty(s)&&(null!=r||null!=c))switch(s){case"value":f=r;break;case"defaultValue":l=r;break;case"multiple":o=r;default:r!==c&&Uh(e,t,s,r,i,c)}return t=l,n=o,i=p,void(null!=f?yt(e,!!n,f,!1):!!i!==!!n&&(null!=t?yt(e,!!n,t,!0):yt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Uh(e,t,l,null,i,s)}for(o in i)if(s=i[o],r=n[o],i.hasOwnProperty(o)&&(null!=s||null!=r))switch(o){case"value":f=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==r&&Uh(e,t,o,s,i,r)}return void xt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!i.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Uh(e,t,m,null,i,f);for(c in i)if(f=i[c],p=n[c],i.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Uh(e,t,c,f,i,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!i.hasOwnProperty(g)&&Uh(e,t,g,null,i,f);for(h in i)if(f=i[h],p=n[h],i.hasOwnProperty(h)&&f!==p&&(null!=f||null!=p))switch(h){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Uh(e,t,h,f,i,p)}return;default:if(Mt(t)){for(var b in n)f=n[b],n.hasOwnProperty(b)&&void 0!==f&&!i.hasOwnProperty(b)&&Hh(e,t,b,void 0,i,f);for(u in i)f=i[u],p=n[u],!i.hasOwnProperty(u)||f===p||void 0===f&&void 0===p||Hh(e,t,u,f,i,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!i.hasOwnProperty(v)&&Uh(e,t,v,null,i,f);for(d in i)f=i[d],p=n[d],!i.hasOwnProperty(d)||f===p||null==f&&null==p||Uh(e,t,d,f,i,p)}(i,e.type,n,t),i[je]=t}catch(s){ih(e,e.return,s)}}function qo(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Ko(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||qo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function $o(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=zh));else if(4!==i&&27!==i&&null!==(e=e.child))for($o(e,t,n),e=e.sibling;null!==e;)$o(e,t,n),e=e.sibling}function Zo(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&27!==i&&null!==(e=e.child))for(Zo(e,t,n),e=e.sibling;null!==e;)Zo(e,t,n),e=e.sibling}var Qo=!1,Jo=!1,el=!1,tl="function"===typeof WeakSet?WeakSet:Set,nl=null,il=!1;function sl(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:bl(e,n),4&i&&Vo(5,n);break;case 1:if(bl(e,n),4&i)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){ih(n,n.return,o)}else{var s=La(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){ih(n,n.return,l)}}64&i&&Wo(n),512&i&&Uo(n,n.return);break;case 3:if(bl(e,n),64&i&&null!==(i=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{jo(i,e)}catch(o){ih(n,n.return,o)}}break;case 26:bl(e,n),512&i&&Uo(n,n.return);break;case 27:case 5:bl(e,n),null===t&&4&i&&Xo(n),512&i&&Uo(n,n.return);break;case 12:default:bl(e,n);break;case 13:bl(e,n),4&i&&hl(e,n);break;case 22:if(!(s=null!==n.memoizedState||Qo)){t=null!==t&&null!==t.memoizedState||Jo;var r=Qo,a=Jo;Qo=s,(Jo=t)&&!a?yl(e,n,0!==(8772&n.subtreeFlags)):bl(e,n),Qo=r,Jo=a}512&i&&("manual"===n.memoizedProps.mode?Uo(n,n.return):Ho(n,n.return))}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Xe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var al=null,ol=!1;function ll(e,t,n){for(n=n.child;null!==n;)cl(e,t,n),n=n.sibling}function cl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(be,n)}catch(a){}switch(n.tag){case 26:Jo||Ho(n,t),ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Jo||Ho(n,t);var i=al,s=ol;for(al=n.stateNode,ll(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);Xe(n),al=i,ol=s;break;case 5:Jo||Ho(n,t);case 6:s=al;var r=ol;if(al=null,ll(e,t,n),ol=r,null!==(al=s))if(ol)try{e=al,i=n.stateNode,8===e.nodeType?e.parentNode.removeChild(i):e.removeChild(i)}catch(o){ih(n,t,o)}else try{al.removeChild(n.stateNode)}catch(o){ih(n,t,o)}break;case 18:null!==al&&(ol?(t=al,n=n.stateNode,8===t.nodeType?ru(t.parentNode,n):1===t.nodeType&&ru(t,n),md(t)):ru(al,n.stateNode));break;case 4:i=al,s=ol,al=n.stateNode.containerInfo,ol=!0,ll(e,t,n),al=i,ol=s;break;case 0:case 11:case 14:case 15:Jo||Go(2,n,t),Jo||Go(4,n,t),ll(e,t,n);break;case 1:Jo||(Ho(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount&&zo(n,t,i)),ll(e,t,n);break;case 21:ll(e,t,n);break;case 22:Jo||Ho(n,t),Jo=(i=Jo)||null!==n.memoizedState,ll(e,t,n),Jo=i;break;default:ll(e,t,n)}}function hl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{md(e)}catch(n){ih(t,t.return,n)}}function ul(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new tl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new tl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach((function(t){var i=lh.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}function dl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i],r=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:case 5:al=l.stateNode,ol=!1;break e;case 3:case 4:al=l.stateNode.containerInfo,ol=!0;break e}l=l.return}if(null===al)throw Error(a(160));cl(r,o,s),al=null,ol=!1,null!==(r=s.alternate)&&(r.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)pl(t,e),t=t.sibling}var fl=null;function pl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dl(t,e),ml(e),4&i&&(Go(3,e,e.return),Vo(3,e),Go(5,e,e.return));break;case 1:dl(t,e),ml(e),512&i&&(Jo||null===n||Ho(n,n.return)),64&i&&Qo&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var s=fl;if(dl(t,e),ml(e),512&i&&(Jo||null===n||Ho(n,n.return)),4&i){var r=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":(!(r=s.getElementsByTagName("title")[0])||r[He]||r[Be]||"http://www.w3.org/2000/svg"===r.namespaceURI||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),Xh(r,i,n),r[Be]=e,Ze(r),i=r;break e;case"link":var o=Cu("link","href",s).get(i+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((r=o[l]).getAttribute("href")===(null==n.href?null:n.href)&&r.getAttribute("rel")===(null==n.rel?null:n.rel)&&r.getAttribute("title")===(null==n.title?null:n.title)&&r.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}Xh(r=s.createElement(i),i,n),s.head.appendChild(r);break;case"meta":if(o=Cu("meta","content",s).get(i+(n.content||"")))for(l=0;l<o.length;l++)if((r=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&r.getAttribute("name")===(null==n.name?null:n.name)&&r.getAttribute("property")===(null==n.property?null:n.property)&&r.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&r.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}Xh(r=s.createElement(i),i,n),s.head.appendChild(r);break;default:throw Error(a(468,i))}r[Be]=e,Ze(r),i=r}e.stateNode=i}else Au(s,e.type,e.stateNode);else e.stateNode=wu(s,i,e.memoizedProps);else r!==i?(null===r?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):r.count--,null===i?Au(s,e.type,e.stateNode):wu(s,i,e.memoizedProps)):null===i&&null!==e.stateNode&&Yo(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&i&&null===e.alternate){s=e.stateNode,r=e.memoizedProps;try{for(var c=s.firstChild;c;){var h=c.nextSibling,u=c.nodeName;c[He]||"HEAD"===u||"BODY"===u||"SCRIPT"===u||"STYLE"===u||"LINK"===u&&"stylesheet"===c.rel.toLowerCase()||s.removeChild(c),c=h}for(var d=e.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Xh(s,d,r),s[Be]=e,s[je]=r}catch(m){ih(e,e.return,m)}}case 5:if(dl(t,e),ml(e),512&i&&(Jo||null===n||Ho(n,n.return)),32&e.flags){s=e.stateNode;try{wt(s,"")}catch(m){ih(e,e.return,m)}}4&i&&null!=e.stateNode&&Yo(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&i&&(el=!0);break;case 6:if(dl(t,e),ml(e),4&i){if(null===e.stateNode)throw Error(a(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(m){ih(e,e.return,m)}}break;case 3:if(Mu=null,s=fl,fl=du(t.containerInfo),dl(t,e),fl=s,ml(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{md(t.containerInfo)}catch(m){ih(e,e.return,m)}el&&(el=!1,gl(e));break;case 4:i=fl,fl=du(e.stateNode.containerInfo),dl(t,e),ml(e),fl=i;break;case 12:dl(t,e),ml(e);break;case 13:dl(t,e),ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(yc=le()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,ul(e,i)));break;case 22:if(512&i&&(Jo||null===n||Ho(n,n.return)),c=null!==e.memoizedState,h=null!==n&&null!==n.memoizedState,Qo=(u=Qo)||c,Jo=(d=Jo)||h,dl(t,e),Jo=d,Qo=u,ml(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&i&&(t._visibility=c?-2&t._visibility:1|t._visibility,c&&(t=Qo||Jo,null===n||h||t||vl(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){h=n=t;try{if(s=h.stateNode,c)"function"===typeof(r=s.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{o=h.stateNode;var p=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null;o.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){ih(h,h.return,m)}}}else if(6===t.tag){if(null===n){h=t;try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(m){ih(h,h.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,ul(e,n))));break;case 19:dl(t,e),ml(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,ul(e,i)));break;case 21:break;default:dl(t,e),ml(e)}}function ml(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var n=e.return;null!==n;){if(qo(n)){var i=n;break e}n=n.return}throw Error(a(160))}switch(i.tag){case 27:var s=i.stateNode;Zo(e,Ko(e),s);break;case 5:var r=i.stateNode;32&i.flags&&(wt(r,""),i.flags&=-33),Zo(e,Ko(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;$o(e,Ko(e),o);break;default:throw Error(a(161))}}}catch(l){ih(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;gl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function bl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)sl(e,t.alternate,t),t=t.sibling}function vl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Go(4,t,t.return),vl(t);break;case 1:Ho(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&zo(t,t.return,n),vl(t);break;case 26:case 27:case 5:Ho(t,t.return),vl(t);break;case 22:Ho(t,t.return),null===t.memoizedState&&vl(t);break;default:vl(t)}e=e.sibling}}function yl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var i=t.alternate,s=e,r=t,a=r.flags;switch(r.tag){case 0:case 11:case 15:yl(s,r,n),Vo(4,r);break;case 1:if(yl(s,r,n),"function"===typeof(s=(i=r).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){ih(i,i.return,c)}if(null!==(s=(i=r).updateQueue)){var o=i.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)Bo(l[s],o)}catch(c){ih(i,i.return,c)}}n&&64&a&&Wo(r),Uo(r,r.return);break;case 26:case 27:case 5:yl(s,r,n),n&&null===i&&4&a&&Xo(r),Uo(r,r.return);break;case 12:default:yl(s,r,n);break;case 13:yl(s,r,n),n&&4&a&&hl(s,r);break;case 22:null===r.memoizedState&&yl(s,r,n),Uo(r,r.return)}t=t.sibling}}function xl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Gs(n))}function Sl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Gs(e))}function wl(e,t,n,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t,n,i),t=t.sibling}function El(e,t,n,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:wl(e,t,n,i),2048&s&&Vo(9,t);break;case 3:wl(e,t,n,i),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Gs(e)));break;case 12:if(2048&s){wl(e,t,n,i),e=t.stateNode;try{var r=t.memoizedProps,a=r.id,o=r.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ih(t,t.return,l)}}else wl(e,t,n,i);break;case 23:break;case 22:r=t.stateNode,null!==t.memoizedState?4&r._visibility?wl(e,t,n,i):Tl(e,t):4&r._visibility?wl(e,t,n,i):(r._visibility|=4,_l(e,t,n,i,0!==(10256&t.subtreeFlags))),2048&s&&xl(t.alternate,t);break;case 24:wl(e,t,n,i),2048&s&&Sl(t.alternate,t);break;default:wl(e,t,n,i)}}function _l(e,t,n,i,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var r=e,a=t,o=n,l=i,c=a.flags;switch(a.tag){case 0:case 11:case 15:_l(r,a,o,l,s),Vo(8,a);break;case 23:break;case 22:var h=a.stateNode;null!==a.memoizedState?4&h._visibility?_l(r,a,o,l,s):Tl(r,a):(h._visibility|=4,_l(r,a,o,l,s)),s&&2048&c&&xl(a.alternate,a);break;case 24:_l(r,a,o,l,s),s&&2048&c&&Sl(a.alternate,a);break;default:_l(r,a,o,l,s)}t=t.sibling}}function Tl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,i=t,s=i.flags;switch(i.tag){case 22:Tl(n,i),2048&s&&xl(i.alternate,i);break;case 24:Tl(n,i),2048&s&&Sl(i.alternate,i);break;default:Tl(n,i)}t=t.sibling}}var Ml=8192;function Cl(e){if(e.subtreeFlags&Ml)for(e=e.child;null!==e;)Al(e),e=e.sibling}function Al(e){switch(e.tag){case 26:Cl(e),e.flags&Ml&&null!==e.memoizedState&&function(e,t,n){if(null===Nu)throw Error(a(475));var i=Nu;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=bu(n.href),r=e.querySelector(vu(s));if(r)return null!==(e=r._p)&&"object"===typeof e&&"function"===typeof e.then&&(i.count++,i=Lu.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=r,void Ze(r);r=e.ownerDocument||e,n=yu(n),(s=hu.get(s))&&_u(n,s),Ze(r=r.createElement("link"));var o=r;o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),Xh(r,"link",n),t.instance=r}null===i.stylesheets&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(i.count++,t=Lu.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}(fl,e.memoizedState,e.memoizedProps);break;case 5:default:Cl(e);break;case 3:case 4:var t=fl;fl=du(e.stateNode.containerInfo),Cl(e),fl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Ml,Ml=16777216,Cl(e),Ml=t):Cl(e))}}function Pl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Nl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];nl=i,Il(i,e)}Pl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)kl(e),e=e.sibling}function kl(e){switch(e.tag){case 0:case 11:case 15:Nl(e),2048&e.flags&&Go(9,e,e.return);break;case 3:case 12:default:Nl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Ll(e)):Nl(e)}}function Ll(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var i=t[n];nl=i,Il(i,e)}Pl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:Go(8,t,t.return),Ll(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Ll(t));break;default:Ll(t)}e=e.sibling}}function Il(e,t){for(;null!==nl;){var n=nl;switch(n.tag){case 0:case 11:case 15:Go(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var i=n.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:Gs(n.memoizedState.cache)}if(null!==(i=n.child))i.return=n,nl=i;else e:for(n=e;null!==nl;){var s=(i=nl).sibling,r=i.return;if(rl(i),i===n){nl=null;break e}if(null!==s){s.return=r,nl=s;break e}nl=r}}}function Rl(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,n,i){return new Rl(e,t,n,i)}function Dl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fl(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=31457280&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Bl(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jl(e,t,n,i,s,r){var o=0;if(i=e,"function"===typeof e)Dl(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,K.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case u:return Vl(n.children,s,r,t);case d:o=8,s|=24;break;case f:return(e=Ol(12,n,t,2|s)).elementType=f,e.lanes=r,e;case v:return(e=Ol(13,n,t,s)).elementType=v,e.lanes=r,e;case y:return(e=Ol(19,n,t,s)).elementType=y,e.lanes=r,e;case w:return Gl(n,s,r,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case p:case g:o=10;break e;case m:o=9;break e;case b:o=11;break e;case x:o=14;break e;case S:o=16,i=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),i=null}return(t=Ol(o,n,t,s)).elementType=e,t.type=i,t.lanes=r,t}function Vl(e,t,n,i){return(e=Ol(7,e,i,t)).lanes=n,e}function Gl(e,t,n,i){(e=Ol(22,e,i,t)).elementType=w,e.lanes=n;var s={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=s._current;if(null===e)throw Error(a(456));if(0===(2&s._pendingVisibility)){var t=Pi(e,2);null!==t&&(s._pendingVisibility|=2,Lc(t,e,2))}},attach:function(){var e=s._current;if(null===e)throw Error(a(456));if(0!==(2&s._pendingVisibility)){var t=Pi(e,2);null!==t&&(s._pendingVisibility&=-3,Lc(t,e,2))}}};return e.stateNode=s,e}function Wl(e,t,n){return(e=Ol(6,e,null,t)).lanes=n,e}function zl(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e){e.flags|=4}function Hl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Pu(t)){if(null!==(t=As.current)&&((4194176&ic)===ic?null!==Ps:(62914560&ic)!==ic&&0===(536870912&ic)||t!==Ps))throw ds=ls,os;e.flags|=8192}}function Xl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ne():536870912,e.lanes|=t,mc|=t)}function Yl(e,t){if(!$i)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ql(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=31457280&s.subtreeFlags,i|=31457280&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Kl(e,t,n){var i=t.pendingProps;switch(Yi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ql(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),yo(js),ee(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(is(t)?Ul(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Zi&&(Rc(Zi),Zi=null))),ql(t),null;case 26:return n=t.memoizedState,null===e?(Ul(t),null!==n?(ql(t),Hl(t,n)):(ql(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ul(t),ql(t),Hl(t,n)):(ql(t),t.flags&=-16777217):(e.memoizedProps!==i&&Ul(t),ql(t),t.flags&=-16777217),null;case 27:ne(t),n=Z.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==i&&Ul(t);else{if(!i){if(null===t.stateNode)throw Error(a(166));return ql(t),null}e=K.current,is(t)?ts(t):(e=cu(s,i,n),t.stateNode=e,Ul(t))}return ql(t),null;case 5:if(ne(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&Ul(t);else{if(!i){if(null===t.stateNode)throw Error(a(166));return ql(t),null}if(e=K.current,is(t))ts(t);else{switch(s=Kh(Z.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof i.is?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e="string"===typeof i.is?s.createElement(n,{is:i.is}):s.createElement(n)}}e[Be]=t,e[je]=i;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(Xh(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ul(t)}}return ql(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&Ul(t);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(e=Z.current,is(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(s=qi))switch(s.tag){case 27:case 5:i=s.memoizedProps}e[Be]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||Wh(e.nodeValue,n)))||es(t)}else(e=Kh(e).createTextNode(i))[Be]=t,t.stateNode=e}return ql(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=is(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[Be]=t}else ss(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ql(t),s=!1}else null!==Zi&&(Rc(Zi),Zi=null),s=!0;if(!s)return 256&t.flags?(Is(t),t):(Is(t),null)}if(Is(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(s=i.alternate.memoizedState.cachePool.pool);var r=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Xl(t,t.updateQueue),ql(t),null;case 4:return ee(),null===e&&Lh(t.stateNode.containerInfo),ql(t),null;case 10:return yo(t.type),ql(t),null;case 19:if(Y(Rs),null===(s=t.memoizedState))return ql(t),null;if(i=0!==(128&t.flags),null===(r=s.rendering))if(i)Yl(s,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(r=Os(e))){for(t.flags|=128,Yl(s,!1),e=r.updateQueue,t.updateQueue=e,Xl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Bl(n,e),n=n.sibling;return q(Rs,1&Rs.current|2),t.child}e=e.sibling}null!==s.tail&&le()>xc&&(t.flags|=128,i=!0,Yl(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Os(r))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Xl(t,e),Yl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!r.alternate&&!$i)return ql(t),null}else 2*le()-s.renderingStartTime>xc&&536870912!==n&&(t.flags|=128,i=!0,Yl(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(null!==(e=s.last)?e.sibling=r:t.child=r,s.last=r)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=le(),t.sibling=null,e=Rs.current,q(Rs,i?1&e|2:1&e),t):(ql(t),null);case 22:case 23:return Is(t),Cs(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?0!==(536870912&n)&&0===(128&t.flags)&&(ql(t),6&t.subtreeFlags&&(t.flags|=8192)):ql(t),null!==(n=t.updateQueue)&&Xl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&Y(qs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),yo(js),ql(t),null;case 25:return null}throw Error(a(156,t.tag))}function $l(e,t){switch(Yi(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return yo(js),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ne(t),null;case 13:if(Is(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ss()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Y(Rs),null;case 4:return ee(),null;case 10:return yo(t.type),null;case 22:case 23:return Is(t),Cs(),null!==e&&Y(qs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return yo(js),null;default:return null}}function Zl(e,t){switch(Yi(t),t.tag){case 3:yo(js),ee();break;case 26:case 27:case 5:ne(t);break;case 4:ee();break;case 13:Is(t);break;case 19:Y(Rs);break;case 10:yo(t.type);break;case 22:case 23:Is(t),Cs(),null!==e&&Y(qs);break;case 24:yo(js)}}var Ql={getCacheForType:function(e){var t=To(js),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},Jl="function"===typeof WeakMap?WeakMap:Map,ec=0,tc=null,nc=null,ic=0,sc=0,rc=null,ac=!1,oc=!1,lc=!1,cc=0,hc=0,uc=0,dc=0,fc=0,pc=0,mc=0,gc=null,bc=null,vc=!1,yc=0,xc=1/0,Sc=null,wc=null,Ec=!1,_c=null,Tc=0,Mc=0,Cc=null,Ac=0,Pc=null;function Nc(){if(0!==(2&ec)&&0!==ic)return ic&-ic;if(null!==N.T){return 0!==Us?Us:Sh()}return De()}function kc(){0===pc&&(pc=0===(536870912&ic)||$i?Pe():536870912);var e=As.current;return null!==e&&(e.flags|=32),pc}function Lc(e,t,n){(e===tc&&2===sc||null!==e.cancelPendingCommit)&&(Vc(e,0),Fc(e,ic,pc,!1)),Le(e,n),0!==(2&ec)&&e===tc||(e===tc&&(0===(2&ec)&&(dc|=n),4===hc&&Fc(e,ic,pc,!1)),mh(e))}function Ic(e,t,n){if(0!==(6&ec))throw Error(a(327));for(var i=!n&&0===(60&t)&&0===(t&e.expiredLanes)||Ce(e,t),s=i?function(e,t){var n=ec;ec|=2;var i=Wc(),s=zc();tc!==e||ic!==t?(Sc=null,xc=le()+500,Vc(e,t)):oc=Ce(e,t);e:for(;;)try{if(0!==sc&&null!==nc){t=nc;var r=rc;t:switch(sc){case 1:sc=0,rc=null,$c(e,t,r,1);break;case 2:if(cs(r)){sc=0,rc=null,Kc(t);break}t=function(){2===sc&&tc===e&&(sc=7),mh(e)},r.then(t,t);break e;case 3:sc=7;break e;case 4:sc=5;break e;case 7:cs(r)?(sc=0,rc=null,Kc(t)):(sc=0,rc=null,$c(e,t,r,7));break;case 5:var o=null;switch(nc.tag){case 26:o=nc.memoizedState;case 5:case 27:var l=nc;if(!o||Pu(o)){sc=0,rc=null;var c=l.sibling;if(null!==c)nc=c;else{var h=l.return;null!==h?(nc=h,Zc(h)):nc=null}break t}}sc=0,rc=null,$c(e,t,r,5);break;case 6:sc=0,rc=null,$c(e,t,r,6);break;case 8:jc(),hc=6;break e;default:throw Error(a(462))}}Yc();break}catch(u){Gc(e,u)}return bo=go=null,N.H=i,N.A=s,ec=n,null!==nc?0:(tc=null,ic=0,Mi(),hc)}(e,t):Hc(e,t,!0),r=i;;){if(0===s){oc&&!i&&Fc(e,t,0,!1);break}if(6===s)Fc(e,t,0,!ac);else{if(n=e.current.alternate,r&&!Dc(n)){s=Hc(e,t,!1),r=!1;continue}if(2===s){if(r=t,e.errorRecoveryDisabledLanes&r)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=gc;var c=l.current.memoizedState.isDehydrated;if(c&&(Vc(l,o).flags|=256),2!==(o=Hc(l,o,!1))){if(lc&&!c){l.errorRecoveryDisabledLanes|=r,dc|=r,s=4;break e}r=bc,bc=s,null!==r&&Rc(r)}s=o}if(r=!1,2!==s)continue}}if(1===s){Vc(e,0),Fc(e,t,0,!0);break}e:{switch(i=e,s){case 0:case 1:throw Error(a(345));case 4:if((4194176&t)===t){Fc(i,t,pc,!ac);break e}break;case 2:bc=null;break;case 3:case 5:break;default:throw Error(a(329))}if(i.finishedWork=n,i.finishedLanes=t,(62914560&t)===t&&10<(r=yc+300-le())){if(Fc(i,t,pc,!ac),0!==Me(i,0))break e;i.timeoutHandle=eu(Oc.bind(null,i,n,bc,Sc,vc,t,pc,dc,mc,ac,2,-0,0),r)}else Oc(i,n,bc,Sc,vc,t,pc,dc,mc,ac,0,-0,0)}}break}mh(e)}function Rc(e){null===bc?bc=e:bc.push.apply(bc,e)}function Oc(e,t,n,i,s,r,o,l,c,h,u,d,f){var p=t.subtreeFlags;if((8192&p||16785408===(16785408&p))&&(Nu={stylesheets:null,count:0,unsuspend:ku},Al(t),null!==(t=function(){if(null===Nu)throw Error(a(475));var e=Nu;return e.stylesheets&&0===e.count&&Ru(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&Ru(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=t(Jc.bind(null,e,n,i,s,o,l,c,1,d,f)),void Fc(e,r,o,!h);Jc(e,n,i,s,o,l,c,u,d,f)}function Dc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!qn(r(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fc(e,t,n,i){t&=~fc,t&=~dc,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var s=t;0<s;){var r=31-xe(s),a=1<<r;i[r]=-1,s&=~a}0!==n&&Ie(e,n,t)}function Bc(){return 0!==(6&ec)||(gh(0,!1),!1)}function jc(){if(null!==nc){if(0===sc)var e=nc.return;else bo=go=null,br(e=nc),ps=null,ms=0,e=nc;for(;null!==e;)Zl(e.alternate,e),e=e.return;nc=null}}function Vc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,tu(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),jc(),tc=e,nc=n=Fl(e.current,null),ic=t,sc=0,rc=null,ac=!1,oc=Ce(e,t),lc=!1,mc=pc=fc=dc=uc=hc=0,bc=gc=null,vc=!1,0!==(8&t)&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var s=31-xe(i),r=1<<s;t|=e[s],i&=~r}return cc=t,Mi(),n}function Gc(e,t){Js=null,N.H=_a,t===as?(t=fs(),sc=3):t===os?(t=fs(),sc=4):sc=t===Wa?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,rc=t,null===nc&&(hc=1,Fa(e,Ri(t,e.current)))}function Wc(){var e=N.H;return N.H=_a,null===e?_a:e}function zc(){var e=N.A;return N.A=Ql,e}function Uc(){hc=4,ac||(4194176&ic)!==ic&&null!==As.current||(oc=!0),0===(134217727&uc)&&0===(134217727&dc)||null===tc||Fc(tc,ic,pc,!1)}function Hc(e,t,n){var i=ec;ec|=2;var s=Wc(),r=zc();tc===e&&ic===t||(Sc=null,Vc(e,t)),t=!1;var a=hc;e:for(;;)try{if(0!==sc&&null!==nc){var o=nc,l=rc;switch(sc){case 8:jc(),a=6;break e;case 3:case 2:case 6:null===As.current&&(t=!0);var c=sc;if(sc=0,rc=null,$c(e,o,l,c),n&&oc){a=0;break e}break;default:c=sc,sc=0,rc=null,$c(e,o,l,c)}}Xc(),a=hc;break}catch(h){Gc(e,h)}return t&&e.shellSuspendCounter++,bo=go=null,ec=i,N.H=s,N.A=r,null===nc&&(tc=null,ic=0,Mi()),a}function Xc(){for(;null!==nc;)qc(nc)}function Yc(){for(;null!==nc&&!ae();)qc(nc)}function qc(e){var t=po(e.alternate,e,cc);e.memoizedProps=e.pendingProps,null===t?Zc(e):nc=t}function Kc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Qa(n,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=Qa(n,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:br(t);default:Zl(n,t),t=po(n,t=nc=Bl(t,cc),cc)}e.memoizedProps=e.pendingProps,null===t?Zc(e):nc=t}function $c(e,t,n,i){bo=go=null,br(t),ps=null,ms=0;var s=t.return;try{if(function(e,t,n,i,s){if(n.flags|=32768,null!==i&&"object"===typeof i&&"function"===typeof i.then){if(null!==(t=n.alternate)&&wo(t,n,s,!0),null!==(n=As.current)){switch(n.tag){case 13:return null===Ps?Uc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===ls?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),sh(e,i,s)),!1;case 22:return n.flags|=65536,i===ls?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),sh(e,i,s)),!1}throw Error(a(435,n.tag))}return sh(e,i,s),Uc(),!1}if($i)return null!==(t=As.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==Ji&&rs(Ri(e=Error(a(422),{cause:i}),n))):(i!==Ji&&rs(Ri(t=Error(a(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,i=Ri(i,n),Ro(e,s=ja(e.stateNode,i,s)),4!==hc&&(hc=2)),!1;var r=Error(a(520),{cause:i});if(r=Ri(r,n),null===gc?gc=[r]:gc.push(r),4!==hc&&(hc=2),null===t)return!0;i=Ri(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,Ro(n,e=ja(n.stateNode,i,e)),!1;case 1:if(t=n.type,r=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==r&&"function"===typeof r.componentDidCatch&&(null===wc||!wc.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,Ga(s=Va(s),e,n,i),Ro(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ic))return hc=1,Fa(e,Ri(n,e.current)),void(nc=null)}catch(r){if(null!==s)throw nc=s,r;return hc=1,Fa(e,Ri(n,e.current)),void(nc=null)}32768&t.flags?($i||1===i?e=!0:oc||0!==(536870912&ic)?e=!1:(ac=e=!0,(2===i||3===i||6===i)&&(null!==(i=As.current)&&13===i.tag&&(i.flags|=16384))),Qc(t,e)):Zc(t)}function Zc(e){var t=e;do{if(0!==(32768&t.flags))return void Qc(t,ac);e=t.return;var n=Kl(t.alternate,t,cc);if(null!==n)return void(nc=n);if(null!==(t=t.sibling))return void(nc=t);nc=t=e}while(null!==t);0===hc&&(hc=5)}function Qc(e,t){do{var n=$l(e.alternate,e);if(null!==n)return n.flags&=32767,void(nc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(nc=e);nc=e=n}while(null!==e);hc=6,nc=null}function Jc(e,t,n,i,s,r,o,l,c,h){var u=N.T,d=W.p;try{W.p=2,N.T=null,function(e,t,n,i,s,r,o,l){do{th()}while(null!==_c);if(0!==(6&ec))throw Error(a(327));var c=e.finishedWork;if(i=e.finishedLanes,null===c)return null;if(e.finishedWork=null,e.finishedLanes=0,c===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var h=c.lanes|c.childLanes;if(function(e,t,n,i,s,r){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var h=31-xe(n),u=1<<h;o[h]=0,l[h]=-1;var d=c[h];if(null!==d)for(c[h]=null,h=0;h<d.length;h++){var f=d[h];null!==f&&(f.lane&=-536870913)}n&=~u}0!==i&&Ie(e,i,0),0!==r&&0===s&&0!==e.tag&&(e.suspendedLanes|=r&~(a&~t))}(e,i,h|=Ti,r,o,l),e===tc&&(nc=tc=null,ic=0),0===(10256&c.subtreeFlags)&&0===(10256&c.flags)||Ec||(Ec=!0,Mc=h,Cc=n,function(e,t){se(e,t)}(de,(function(){return th(),null}))),n=0!==(15990&c.flags),0!==(15990&c.subtreeFlags)||n?(n=N.T,N.T=null,r=W.p,W.p=2,o=ec,ec|=4,function(e,t){if(e=e.containerInfo,Yh=Uu,ei(e=Jn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,h=0,u=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==s&&3!==d.nodeType||(l=o+s),d!==r||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++h===s&&(l=o),f===r&&++u===i&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(qh={focusedElem:e,selectionRange:n},Uu=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){switch(r=(t=nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==r){e=void 0,n=t,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var m=La(n.type,s,(n.elementType,n.type));e=i.getSnapshotBeforeUpdate(m,r),i.__reactInternalSnapshotBeforeUpdate=e}catch(b){ih(n,n.return,b)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))au(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":au(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}m=il,il=!1}(e,c),pl(c,e),ti(qh,e.containerInfo),Uu=!!Yh,qh=Yh=null,e.current=c,sl(e,c.alternate,c),oe(),ec=o,W.p=r,N.T=n):e.current=c,Ec?(Ec=!1,_c=e,Tc=i):eh(e,h),h=e.pendingLanes,0===h&&(wc=null),function(e){if(ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(be,e,void 0,128===(128&e.current.flags))}catch(t){}}(c.stateNode),mh(e),null!==t)for(s=e.onRecoverableError,c=0;c<t.length;c++)h=t[c],s(h.value,{componentStack:h.stack});0!==(3&Tc)&&th(),h=e.pendingLanes,0!==(4194218&i)&&0!==(42&h)?e===Pc?Ac++:(Ac=0,Pc=e):Ac=0,gh(0,!1)}(e,t,n,i,d,s,r,o)}finally{N.T=u,W.p=d}}function eh(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Gs(t)))}function th(){if(null!==_c){var e=_c,t=Mc;Mc=0;var n=Oe(Tc),i=N.T,s=W.p;try{if(W.p=32>n?32:n,N.T=null,null===_c)var r=!1;else{n=Cc,Cc=null;var o=_c,l=Tc;if(_c=null,Tc=0,0!==(6&ec))throw Error(a(331));var c=ec;if(ec|=4,kl(o.current),El(o,o.current,l,n),ec=c,gh(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(be,o)}catch(h){}r=!0}return r}finally{W.p=s,N.T=i,eh(e,t)}}return!1}function nh(e,t,n){t=Ri(n,t),null!==(e=Lo(e,t=ja(e.stateNode,t,2),2))&&(Le(e,2),mh(e))}function ih(e,t,n){if(3===e.tag)nh(e,e,n);else for(;null!==t;){if(3===t.tag){nh(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===wc||!wc.has(i))){e=Ri(n,e),null!==(i=Lo(t,n=Va(2),2))&&(Ga(n,i,t,e),Le(i,2),mh(i));break}}t=t.return}}function sh(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new Jl;var s=new Set;i.set(t,s)}else void 0===(s=i.get(t))&&(s=new Set,i.set(t,s));s.has(n)||(lc=!0,s.add(n),e=rh.bind(null,e,t,n),t.then(e,e))}function rh(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tc===e&&(ic&n)===n&&(4===hc||3===hc&&(62914560&ic)===ic&&300>le()-yc?0===(2&ec)&&Vc(e,0):fc|=n,mc===ic&&(mc=0)),mh(e)}function ah(e,t){0===t&&(t=Ne()),null!==(e=Pi(e,t))&&(Le(e,t),mh(e))}function oh(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ah(e,n)}function lh(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==i&&i.delete(t),ah(e,n)}var ch=null,hh=null,uh=!1,dh=!1,fh=!1,ph=0;function mh(e){var t;e!==hh&&null===e.next&&(null===hh?ch=hh=e:hh=hh.next=e),dh=!0,uh||(uh=!0,t=bh,iu((function(){0!==(6&ec)?se(he,t):t()})))}function gh(e,t){if(!fh&&dh){fh=!0;do{for(var n=!1,i=ch;null!==i;){if(!t)if(0!==e){var s=i.pendingLanes;if(0===s)var r=0;else{var a=i.suspendedLanes,o=i.pingedLanes;r=(1<<31-xe(42|e)+1)-1,r=201326677&(r&=s&~(a&~o))?201326677&r|1:r?2|r:0}0!==r&&(n=!0,xh(i,r))}else r=ic,0===(3&(r=Me(i,i===tc?r:0)))||Ce(i,r)||(n=!0,xh(i,r));i=i.next}}while(n);fh=!1}}function bh(){dh=uh=!1;var e=0;0!==ph&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Jh&&(Jh=e,!0);return Jh=null,!1}()&&(e=ph),ph=0);for(var t=le(),n=null,i=ch;null!==i;){var s=i.next,r=vh(i,t);0===r?(i.next=null,null===n?ch=s:n.next=s,null===s&&(hh=n)):(n=i,(0!==e||0!==(3&r))&&(dh=!0)),i=s}gh(e,!1)}function vh(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var a=31-xe(r),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&i)||(s[a]=Ae(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}if(n=ic,n=Me(e,e===(t=tc)?n:0),i=e.callbackNode,0===n||e===t&&2===sc||null!==e.cancelPendingCommit)return null!==i&&null!==i&&re(i),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ce(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==i&&re(i),Oe(n)){case 2:case 8:n=ue;break;case 32:default:n=de;break;case 268435456:n=pe}return i=yh.bind(null,e),n=se(n,i),e.callbackPriority=t,e.callbackNode=n,t}return null!==i&&null!==i&&re(i),e.callbackPriority=2,e.callbackNode=null,2}function yh(e,t){var n=e.callbackNode;if(th()&&e.callbackNode!==n)return null;var i=ic;return 0===(i=Me(e,e===tc?i:0))?null:(Ic(e,i,t),vh(e,le()),null!=e.callbackNode&&e.callbackNode===n?yh.bind(null,e):null)}function xh(e,t){if(th())return null;Ic(e,t,!0)}function Sh(){return 0===ph&&(ph=Pe()),ph}function wh(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function Eh(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var _h=0;_h<Si.length;_h++){var Th=Si[_h];wi(Th.toLowerCase(),"on"+(Th[0].toUpperCase()+Th.slice(1)))}wi(fi,"onAnimationEnd"),wi(pi,"onAnimationIteration"),wi(mi,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(gi,"onTransitionRun"),wi(bi,"onTransitionStart"),wi(vi,"onTransitionCancel"),wi(yi,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ch=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mh));function Ah(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=c;try{r(s)}catch(h){Ia(h)}s.currentTarget=null,r=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==r&&s.isPropagationStopped())break e;r=o,s.currentTarget=c;try{r(s)}catch(h){Ia(h)}s.currentTarget=null,r=l}}}}function Ph(e,t){var n=t[Ge];void 0===n&&(n=t[Ge]=new Set);var i=e+"__bubble";n.has(i)||(Ih(t,e,2,!1),n.add(i))}function Nh(e,t,n){var i=0;t&&(i|=4),Ih(n,e,i,t)}var kh="_reactListening"+Math.random().toString(36).slice(2);function Lh(e){if(!e[kh]){e[kh]=!0,Qe.forEach((function(t){"selectionchange"!==t&&(Ch.has(t)||Nh(t,!1,e),Nh(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[kh]||(t[kh]=!0,Nh("selectionchange",!1,t))}}function Ih(e,t,n,i){switch(Zu(t)){case 2:var s=Hu;break;case 8:s=Xu;break;default:s=Yu}n=s.bind(null,t,n,e),s=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),i?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Rh(e,t,n,i,s){var r=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===s||8===o.nodeType&&o.parentNode===s)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;a=a.return}for(;null!==o;){if(null===(a=Ye(o)))return;if(5===(l=a.tag)||6===l||26===l||27===l){i=r=a;continue e}o=o.parentNode}}i=i.return}Dt((function(){var i=r,s=kt(n),a=[];e:{var o=xi.get(e);if(void 0!==o){var l=Qt,c=e;switch(e){case"keypress":if(0===Ut(n))break e;case"keydown":case"keyup":l=pn;break;case"focusin":c="focus",l=rn;break;case"focusout":c="blur",l=rn;break;case"beforeblur":case"afterblur":l=rn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=gn;break;case fi:case pi:case mi:l=an;break;case yi:l=bn;break;case"scroll":case"scrollend":l=en;break;case"wheel":l=vn;break;case"copy":case"cut":case"paste":l=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=mn;break;case"toggle":case"beforetoggle":l=yn}var h=0!==(4&t),u=!h&&("scroll"===e||"scrollend"===e),d=h?null!==o?o+"Capture":null:o;h=[];for(var f,p=i;null!==p;){var m=p;if(f=m.stateNode,5!==(m=m.tag)&&26!==m&&27!==m||null===f||null===d||null!=(m=Ft(p,d))&&h.push(Oh(p,m,f)),u)break;p=p.return}0<h.length&&(o=new l(o,c,null,n,s),a.push({event:o,listeners:h}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Nt||!(c=n.relatedTarget||n.fromElement)||!Ye(c)&&!c[Ve])&&(l||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?Ye(c):null)&&(u=F(c),h=c.tag,c!==u||5!==h&&27!==h&&6!==h)&&(c=null)):(l=null,c=i),l!==c)){if(h=nn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(h=mn,m="onPointerLeave",d="onPointerEnter",p="pointer"),u=null==l?o:Ke(l),f=null==c?o:Ke(c),(o=new h(m,p+"leave",l,n,s)).target=u,o.relatedTarget=f,m=null,Ye(s)===i&&((h=new h(d,p+"enter",c,n,s)).target=f,h.relatedTarget=u,m=h),u=m,l&&c)e:{for(d=c,p=0,f=h=l;f;f=Fh(f))p++;for(f=0,m=d;m;m=Fh(m))f++;for(;0<p-f;)h=Fh(h),p--;for(;0<f-p;)d=Fh(d),f--;for(;p--;){if(h===d||null!==d&&h===d.alternate)break e;h=Fh(h),d=Fh(d)}h=null}else h=null;null!==l&&Bh(a,o,l,h,!1),null!==c&&null!==u&&Bh(a,u,c,h,!0)}if("select"===(l=(o=i?Ke(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Fn;else if(kn(o))if(Bn)g=Yn;else{g=Hn;var b=Un}else!(l=o.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?i&&Mt(i.elementType)&&(g=Fn):g=Xn;switch(g&&(g=g(e,i))?Ln(a,g,n,s):(b&&b(e,o,i),"focusout"===e&&i&&"number"===o.type&&null!=i.memoizedProps.value&&vt(o,"number",o.value)),b=i?Ke(i):window,e){case"focusin":(kn(b)||"true"===b.contentEditable)&&(ii=b,si=i,ri=null);break;case"focusout":ri=si=ii=null;break;case"mousedown":ai=!0;break;case"contextmenu":case"mouseup":case"dragend":ai=!1,oi(a,n,s);break;case"selectionchange":if(ni)break;case"keydown":case"keyup":oi(a,n,s)}var v;if(Sn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Pn?Cn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(_n&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Pn&&(v=zt()):(Gt="value"in(Vt=s)?Vt.value:Vt.textContent,Pn=!0)),0<(b=Dh(i,y)).length&&(y=new ln(y,e,null,n,s),a.push({event:y,listeners:b}),v?y.data=v:null!==(v=An(n))&&(y.data=v))),(v=En?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(Mn=!0,Tn);case"textInput":return(e=t.data)===Tn&&Mn?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!Sn&&Cn(e,t)?(e=zt(),Wt=Gt=Vt=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(y=Dh(i,"onBeforeInput")).length&&(b=new ln("onBeforeInput","beforeinput",null,n,s),a.push({event:b,listeners:y}),b.data=v)),function(e,t,n,i,s){if("submit"===t&&n&&n.stateNode===s){var r=wh((s[je]||null).action),a=i.submitter;a&&null!==(t=(t=a[je]||null)?wh(t.formAction):a.getAttribute("formAction"))&&(r=t,a=null);var o=new Qt("action","action",null,i,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(0!==ph){var e=a?Eh(s,a):new FormData(s);ha(n,{pending:!0,data:e,method:s.method,action:r},null,e)}}else"function"===typeof r&&(o.preventDefault(),e=a?Eh(s,a):new FormData(s),ha(n,{pending:!0,data:e,method:s.method,action:r},r,e))},currentTarget:s}]})}}(a,e,i,n,s)}Ah(a,t)}))}function Oh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Dh(e,t){for(var n=t+"Capture",i=[];null!==e;){var s=e,r=s.stateNode;5!==(s=s.tag)&&26!==s&&27!==s||null===r||(null!=(s=Ft(e,n))&&i.unshift(Oh(e,s,r)),null!=(s=Ft(e,t))&&i.push(Oh(e,s,r))),e=e.return}return i}function Fh(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Bh(e,t,n,i,s){for(var r=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===i)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Ft(n,r))&&a.unshift(Oh(n,c,l)):s||null!=(c=Ft(n,r))&&a.push(Oh(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var jh=/\r\n?/g,Vh=/\u0000|\uFFFD/g;function Gh(e){return("string"===typeof e?e:""+e).replace(jh,"\n").replace(Vh,"")}function Wh(e,t){return t=Gh(t),Gh(e)===t}function zh(){}function Uh(e,t,n,i,s,r){switch(n){case"children":"string"===typeof i?"body"===t||"textarea"===t&&""===i||wt(e,i):("number"===typeof i||"bigint"===typeof i)&&"body"!==t&&wt(e,""+i);break;case"className":ot(e,"class",i);break;case"tabIndex":ot(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ot(e,n,i);break;case"style":Tt(e,i,r);break;case"data":if("object"!==t){ot(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"===typeof i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=Pt(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"===typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof r&&("formAction"===n?("input"!==t&&Uh(e,t,"name",s.name,s,null),Uh(e,t,"formEncType",s.formEncType,s,null),Uh(e,t,"formMethod",s.formMethod,s,null),Uh(e,t,"formTarget",s.formTarget,s,null)):(Uh(e,t,"encType",s.encType,s,null),Uh(e,t,"method",s.method,s,null),Uh(e,t,"target",s.target,s,null))),null==i||"symbol"===typeof i||"boolean"===typeof i){e.removeAttribute(n);break}i=Pt(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=zh);break;case"onScroll":null!=i&&Ph("scroll",e);break;case"onScrollEnd":null!=i&&Ph("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(a(61));if(null!=(n=i.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"muted":e.muted=i&&"function"!==typeof i&&"symbol"!==typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"===typeof i||"boolean"===typeof i||"symbol"===typeof i){e.removeAttribute("xlink:href");break}n=Pt(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!==typeof i&&"symbol"!==typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"===typeof i||"symbol"===typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Ph("beforetoggle",e),Ph("toggle",e),at(e,"popover",i);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":at(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&at(e,n=Ct.get(n)||n,i)}}function Hh(e,t,n,i,s,r){switch(n){case"style":Tt(e,i,r);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!==typeof i||!("__html"in i))throw Error(a(61));if(null!=(n=i.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof i?wt(e,i):("number"===typeof i||"bigint"===typeof i)&&wt(e,""+i);break;case"onScroll":null!=i&&Ph("scroll",e);break;case"onScrollEnd":null!=i&&Ph("scrollend",e);break;case"onClick":null!=i&&(e.onclick=zh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Je.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(r=null!=(r=e[je]||null)?r[n]:null)&&e.removeEventListener(t,r,s),"function"!==typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):at(e,n,i):("function"!==typeof r&&null!==r&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,s)))}}function Xh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ph("error",e),Ph("load",e);var i,s=!1,r=!1;for(i in n)if(n.hasOwnProperty(i)){var o=n[i];if(null!=o)switch(i){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Uh(e,t,i,o,n,null)}}return r&&Uh(e,t,"srcSet",n.srcSet,n,null),void(s&&Uh(e,t,"src",n.src,n,null));case"input":Ph("invalid",e);var l=i=o=r=null,c=null,h=null;for(s in n)if(n.hasOwnProperty(s)){var u=n[s];if(null!=u)switch(s){case"name":r=u;break;case"type":o=u;break;case"checked":c=u;break;case"defaultChecked":h=u;break;case"value":i=u;break;case"defaultValue":l=u;break;case"children":case"dangerouslySetInnerHTML":if(null!=u)throw Error(a(137,t));break;default:Uh(e,t,s,u,n,null)}}return bt(e,i,l,c,h,o,r,!1),void ut(e);case"select":for(r in Ph("invalid",e),s=o=i=null,n)if(n.hasOwnProperty(r)&&null!=(l=n[r]))switch(r){case"value":i=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Uh(e,t,r,l,n,null)}return t=i,n=o,e.multiple=!!s,void(null!=t?yt(e,!!s,t,!1):null!=n&&yt(e,!!s,n,!0));case"textarea":for(o in Ph("invalid",e),i=r=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":r=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Uh(e,t,o,l,n,null)}return St(e,s,r,i),void ut(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Uh(e,t,c,s,n,null);return;case"dialog":Ph("cancel",e),Ph("close",e);break;case"iframe":case"object":Ph("load",e);break;case"video":case"audio":for(s=0;s<Mh.length;s++)Ph(Mh[s],e);break;case"image":Ph("error",e),Ph("load",e);break;case"details":Ph("toggle",e);break;case"embed":case"source":case"link":Ph("error",e),Ph("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(h in n)if(n.hasOwnProperty(h)&&null!=(s=n[h]))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Uh(e,t,h,s,n,null)}return;default:if(Mt(t)){for(u in n)n.hasOwnProperty(u)&&(void 0!==(s=n[u])&&Hh(e,t,u,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&Uh(e,t,l,s,n,null))}var Yh=null,qh=null;function Kh(e){return 9===e.nodeType?e:e.ownerDocument}function $h(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Qh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Jh=null;var eu="function"===typeof setTimeout?setTimeout:void 0,tu="function"===typeof clearTimeout?clearTimeout:void 0,nu="function"===typeof Promise?Promise:void 0,iu="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nu?function(e){return nu.resolve(null).then(e).catch(su)}:eu;function su(e){setTimeout((function(){throw e}))}function ru(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===i)return e.removeChild(s),void md(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=s}while(n);md(t)}function au(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":au(n),Xe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function ou(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function lu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function cu(e,t,n){switch(t=Kh(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}var hu=new Map,uu=new Set;function du(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var fu=W.d;W.d={f:function(){var e=fu.f(),t=Bc();return e||t},r:function(e){var t=qe(e);null!==t&&5===t.tag&&"form"===t.type?da(t):fu.r(e)},D:function(e){fu.D(e),mu("dns-prefetch",e,null)},C:function(e,t){fu.C(e,t),mu("preconnect",e,t)},L:function(e,t,n){fu.L(e,t,n);var i=pu;if(i&&e&&t){var s='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+mt(n.imageSizes)+'"]')):s+='[href="'+mt(e)+'"]';var r=s;switch(t){case"style":r=bu(e);break;case"script":r=xu(e)}hu.has(r)||(e=k({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),hu.set(r,e),null!==i.querySelector(s)||"style"===t&&i.querySelector(vu(r))||"script"===t&&i.querySelector(Su(r))||(Xh(t=i.createElement("link"),"link",e),Ze(t),i.head.appendChild(t)))}},m:function(e,t){fu.m(e,t);var n=pu;if(n&&e){var i=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+mt(i)+'"][href="'+mt(e)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=xu(e)}if(!hu.has(r)&&(e=k({rel:"modulepreload",href:e},t),hu.set(r,e),null===n.querySelector(s))){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Su(r)))return}Xh(i=n.createElement("link"),"link",e),Ze(i),n.head.appendChild(i)}}},X:function(e,t){fu.X(e,t);var n=pu;if(n&&e){var i=$e(n).hoistableScripts,s=xu(e),r=i.get(s);r||((r=n.querySelector(Su(s)))||(e=k({src:e,async:!0},t),(t=hu.get(s))&&Tu(e,t),Ze(r=n.createElement("script")),Xh(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}},S:function(e,t,n){fu.S(e,t,n);var i=pu;if(i&&e){var s=$e(i).hoistableStyles,r=bu(e);t=t||"default";var a=s.get(r);if(!a){var o={loading:0,preload:null};if(a=i.querySelector(vu(r)))o.loading=5;else{e=k({rel:"stylesheet",href:e,"data-precedence":t},n),(n=hu.get(r))&&_u(e,n);var l=a=i.createElement("link");Ze(l),Xh(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){o.loading|=1})),l.addEventListener("error",(function(){o.loading|=2})),o.loading|=4,Eu(a,t,i)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(r,a)}}},M:function(e,t){fu.M(e,t);var n=pu;if(n&&e){var i=$e(n).hoistableScripts,s=xu(e),r=i.get(s);r||((r=n.querySelector(Su(s)))||(e=k({src:e,async:!0,type:"module"},t),(t=hu.get(s))&&Tu(e,t),Ze(r=n.createElement("script")),Xh(r,"link",e),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}};var pu="undefined"===typeof document?null:document;function mu(e,t,n){var i=pu;if(i&&"string"===typeof t&&t){var s=mt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),uu.has(s)||(uu.add(s),e={rel:e,crossOrigin:n,href:t},null===i.querySelector(s)&&(Xh(t=i.createElement("link"),"link",e),Ze(t),i.head.appendChild(t)))}}function gu(e,t,n,i){var s,r,o,l,c=(c=Z.current)?du(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=bu(n.href),(i=(n=$e(c).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=bu(n.href);var h=$e(c).hoistableStyles,u=h.get(e);if(u||(c=c.ownerDocument||c,u={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,u),(h=c.querySelector(vu(e)))&&!h._p&&(u.instance=h,u.state.loading=5),hu.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},hu.set(e,n),h||(s=c,r=e,o=n,l=u.state,s.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=s.createElement("link"),l.preload=r,r.addEventListener("load",(function(){return l.loading|=1})),r.addEventListener("error",(function(){return l.loading|=2})),Xh(r,"link",o),Ze(r),s.head.appendChild(r))))),t&&null===i)throw Error(a(528,""));return u}if(t&&null!==i)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=xu(n),(i=(n=$e(c).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function bu(e){return'href="'+mt(e)+'"'}function vu(e){return'link[rel="stylesheet"]['+e+"]"}function yu(e){return k({},e,{"data-precedence":e.precedence,precedence:null})}function xu(e){return'[src="'+mt(e)+'"]'}function Su(e){return"script[async]"+e}function wu(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(i)return t.instance=i,Ze(i),i;var s=k({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ze(i=(e.ownerDocument||e).createElement("style")),Xh(i,"style",s),Eu(i,n.precedence,e),t.instance=i;case"stylesheet":s=bu(n.href);var r=e.querySelector(vu(s));if(r)return t.state.loading|=4,t.instance=r,Ze(r),r;i=yu(n),(s=hu.get(s))&&_u(i,s),Ze(r=(e.ownerDocument||e).createElement("link"));var o=r;return o._p=new Promise((function(e,t){o.onload=e,o.onerror=t})),Xh(r,"link",i),t.state.loading|=4,Eu(r,n.precedence,e),t.instance=r;case"script":return r=xu(n.src),(s=e.querySelector(Su(r)))?(t.instance=s,Ze(s),s):(i=n,(s=hu.get(r))&&Tu(i=k({},n),s),Ze(s=(e=e.ownerDocument||e).createElement("script")),Xh(s,"link",i),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Eu(i,n.precedence,e));return t.instance}function Eu(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,a=0;a<i.length;a++){var o=i[a];if(o.dataset.precedence===t)r=o;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function _u(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Tu(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Mu=null;function Cu(e,t,n){if(null===Mu){var i=new Map,s=Mu=new Map;s.set(n,i)}else(i=(s=Mu).get(n))||(i=new Map,s.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var r=n[s];if(!(r[He]||r[Be]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var a=r.getAttribute(t)||"";a=e+a;var o=i.get(a);o?o.push(r):i.set(a,[r])}}return i}function Au(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Pu(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Nu=null;function ku(){}function Lu(){if(this.count--,0===this.count)if(this.stylesheets)Ru(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Iu=null;function Ru(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Iu=new Map,t.forEach(Ou,e),Iu=null,Lu.call(e))}function Ou(e,t){if(!(4&t.state.loading)){var n=Iu.get(e);if(n)var i=n.get(null);else{n=new Map,Iu.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var a=s[r];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),i=a)}i&&n.set(null,i)}a=(s=t.instance).getAttribute("data-precedence"),(r=n.get(a)||i)===i&&n.set(null,s),n.set(a,s),this.count++,i=Lu.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Du={$$typeof:g,Provider:null,Consumer:null,_currentValue:z,_currentValue2:z,_threadCount:0};function Fu(e,t,n,i,s,r,a,o){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Bu(e,t,n,i,s,r,a,o,l,c,h,u){return e=new Fu(e,t,n,a,o,l,c,u),t=1,!0===r&&(t|=24),r=Ol(3,null,null,t),e.current=r,r.stateNode=e,(t=Vs()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:t},Po(r),e}function ju(e){return e?e=Li:Li}function Vu(e,t,n,i,s,r){s=ju(s),null===i.context?i.context=s:i.pendingContext=s,(i=ko(t)).payload={element:n},null!==(r=void 0===r?null:r)&&(i.callback=r),null!==(n=Lo(e,i,t))&&(Lc(n,0,t),Io(n,e,t))}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}function zu(e){if(13===e.tag){var t=Pi(e,67108864);null!==t&&Lc(t,0,67108864),Wu(e,67108864)}}var Uu=!0;function Hu(e,t,n,i){var s=N.T;N.T=null;var r=W.p;try{W.p=2,Yu(e,t,n,i)}finally{W.p=r,N.T=s}}function Xu(e,t,n,i){var s=N.T;N.T=null;var r=W.p;try{W.p=8,Yu(e,t,n,i)}finally{W.p=r,N.T=s}}function Yu(e,t,n,i){if(Uu){var s=qu(i);if(null===s)Rh(e,t,i,Ku,n),ad(e,i);else if(function(e,t,n,i,s){switch(t){case"focusin":return Ju=od(Ju,e,t,n,i,s),!0;case"dragenter":return ed=od(ed,e,t,n,i,s),!0;case"mouseover":return td=od(td,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return nd.set(r,od(nd.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,id.set(r,od(id.get(r)||null,e,t,n,i,s)),!0}return!1}(s,e,t,n,i))i.stopPropagation();else if(ad(e,i),4&t&&-1<rd.indexOf(e)){for(;null!==s;){var r=qe(s);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var a=Te(r.pendingLanes);if(0!==a){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-xe(a);o.entanglements[1]|=l,a&=~l}mh(r),0===(6&ec)&&(xc=le()+500,gh(0,!1))}}break;case 13:null!==(o=Pi(r,2))&&Lc(o,0,2),Bc(),Wu(r,2)}if(null===(r=qu(i))&&Rh(e,t,i,Ku,n),r===s)break;s=r}null!==s&&i.stopPropagation()}else Rh(e,t,i,null,n)}}function qu(e){return $u(e=kt(e))}var Ku=null;function $u(e){if(Ku=null,null!==(e=Ye(e))){var t=F(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=B(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ku=e,null}function Zu(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case he:return 2;case ue:return 8;case de:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Qu=!1,Ju=null,ed=null,td=null,nd=new Map,id=new Map,sd=[],rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ad(e,t){switch(e){case"focusin":case"focusout":Ju=null;break;case"dragenter":case"dragleave":ed=null;break;case"mouseover":case"mouseout":td=null;break;case"pointerover":case"pointerout":nd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":id.delete(t.pointerId)}}function od(e,t,n,i,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=qe(t))&&zu(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function ld(e){var t=Ye(e.target);if(null!==t){var n=F(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=B(n)))return e.blockedOn=t,void function(e,t){var n=W.p;try{return W.p=e,t()}finally{W.p=n}}(e.priority,(function(){if(13===n.tag){var e=Nc(),t=Pi(n,e);null!==t&&Lc(t,0,e),Wu(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function cd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qu(e.nativeEvent);if(null!==n)return null!==(t=qe(n))&&zu(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);Nt=i,n.target.dispatchEvent(i),Nt=null,t.shift()}return!0}function hd(e,t,n){cd(e)&&n.delete(t)}function ud(){Qu=!1,null!==Ju&&cd(Ju)&&(Ju=null),null!==ed&&cd(ed)&&(ed=null),null!==td&&cd(td)&&(td=null),nd.forEach(hd),id.forEach(hd)}function dd(e,t){e.blockedOn===t&&(e.blockedOn=null,Qu||(Qu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,ud)))}var fd=null;function pd(e){fd!==e&&(fd=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,(function(){fd===e&&(fd=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],s=e[t+2];if("function"!==typeof i){if(null===$u(i||n))continue;break}var r=qe(n);null!==r&&(e.splice(t,3),t-=3,ha(r,{pending:!0,data:s,method:n.method,action:i},i,s))}})))}function md(e){function t(t){return dd(t,e)}null!==Ju&&dd(Ju,e),null!==ed&&dd(ed,e),null!==td&&dd(td,e),nd.forEach(t),id.forEach(t);for(var n=0;n<sd.length;n++){var i=sd[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<sd.length&&null===(n=sd[0]).blockedOn;)ld(n),null===n.blockedOn&&sd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],a=s[je]||null;if("function"===typeof r)a||pd(n);else if(a){var o=null;if(r&&r.hasAttribute("formAction")){if(s=r,a=r[je]||null)o=a.formAction;else if(null!==$u(s))continue}else o=a.action;"function"===typeof o?n[i+1]=o:(n.splice(i,3),i-=3),pd(n)}}}function gd(e){this._internalRoot=e}function bd(e){this._internalRoot=e}bd.prototype.render=gd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vu(t.current,Nc(),e,t,null,null)},bd.prototype.unmount=gd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&th(),Vu(e.current,2,null,e,null,null),Bc(),t[Ve]=null}},bd.prototype.unstable_scheduleHydration=function(e){if(e){var t=De();e={blockedOn:null,target:e,priority:t};for(var n=0;n<sd.length&&0!==t&&t<sd[n].priority;n++);sd.splice(n,0,e),0===n&&ld(e)}};var vd=s.version;if("19.0.0"!==vd)throw Error(a(527,vd,"19.0.0"));W.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=F(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(null===s)break;var r=s.alternate;if(null===r){if(null!==(i=s.return)){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return j(s),e;if(r===i)return j(s),t;r=r.sibling}throw Error(a(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?V(e):null)?null:e.stateNode};var yd={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:N,findFiberByHostInstance:Ye,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{be=xd.inject(yd),ve=xd}catch(wd){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,i="",s=Ra,r=Oa,l=Da;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(r=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Bu(e,1,!1,null,0,n,i,s,r,l,0,null),e[Ve]=t.current,Lh(8===e.nodeType?e.parentNode:e),new gd(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var i=!1,s="",r=Ra,l=Oa,c=Da,h=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(r=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(h=n.formState)),(t=Bu(e,1,!0,t,0,i,s,r,l,c,0,h)).context=ju(null),n=t.current,(s=ko(i=Nc())).callback=null,Lo(n,s,i),t.current.lanes=i,Le(t,i),mh(t),e[Ve]=t.current,Lh(e),new bd(t)},t.version="19.0.0"},43:(e,t,n)=>{"use strict";e.exports=n(288)},45:(e,t,n)=>{var i=n(738).default;e.exports=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=i(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},59:(e,t,n)=>{"use strict";var i=n(520),s={},r={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function a(e){return"number"===typeof e}var o=["attack","decay","sustain","release"];e.exports=function(e,t,n){var l=!1,c=0,h={},u=e.createGain();u.gain.value=1;var d=Object.assign({},r,n),f={context:e,out:u,opts:d};return t instanceof AudioBuffer?f.buffer=t:f.buffers=t,f.start=function(t,n,i){if(f.buffer&&null!==t)return f.start(null,t,n);var r=t?f.buffers[t]:f.buffer;if(r){if(l){var a=i||s;n=Math.max(e.currentTime,n||0),f.emit("start",n,t,a);var o=p(t,r,a);return o.id=function(t,n){return n.id=c++,h[n.id]=n,n.source.onended=function(){var t=e.currentTime;n.source.disconnect(),n.env.disconnect(),n.disconnect(),f.emit("ended",t,n.id,n)},n.id}(0,o),o.env.start(n),o.source.start(n),f.emit("started",n,o.id,o),a.duration&&o.stop(n+a.duration),o}console.warn("SamplePlayer not connected to any node.")}else console.warn("Buffer "+t+" not found.")},f.play=function(e,t,n){return f.start(e,t,n)},f.stop=function(e,t){var n;return(t=t||Object.keys(h)).map((function(t){return(n=h[t])?(n.stop(e),n.id):null}))},f.connect=function(e){return l=!0,u.connect(e),f},f.emit=function(e,t,n,i){f.onevent&&f.onevent(e,t,n,i);var s=f["on"+e];s&&s(t,n,i)},f;function p(t,n,s){var r,l=e.createGain();return l.gain.value=0,l.connect(u),l.env=function(e,t,n){var s=i(e),r=t.adsr||n.adsr;return o.forEach((function(e,i){s[e]=r?r[i]:t[e]||n[e]})),s.value.value=a(t.gain)?t.gain:a(n.gain)?n.gain:1,s}(e,s,d),l.env.connect(l.gain),l.source=e.createBufferSource(),l.source.buffer=n,l.source.connect(l),l.source.loop=s.loop||d.loop,l.source.playbackRate.value=(r=s.cents||d.cents)?Math.pow(2,r/1200):1,l.source.loopStart=s.loopStart||d.loopStart,l.source.loopEnd=s.loopEnd||d.loopEnd,l.stop=function(n){var i=n||e.currentTime;f.emit("stop",i,t);var s=l.env.stop(i);l.source.stop(s)},l}}},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,n)=>{var i=n(79);e.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,s,r,a,o=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=r.call(n)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(e){c=!0,s=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw s}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports},167:(e,t,n)=>{var i=n(411);e.exports=function(e){return e.listenToMidi=function(t,n){var s={},r=n||{},a=r.gain||function(e){return e/127};return t.onmidimessage=function(t){var n=t.messageType?t:i(t);if("noteon"===n.messageType&&0===n.velocity&&(n.messageType="noteoff"),!r.channel||n.channel===r.channel)switch(n.messageType){case"noteon":s[n.key]=e.play(n.key,0,{gain:a(n.velocity)});break;case"noteoff":s[n.key]&&(s[n.key].stop(),delete s[n.key])}},e},e}},200:(e,t,n)=>{"use strict";var i=n(578),s=n(612);function r(e){return/\.js(\?.*)?$/i.test(e)}function a(e,t,n){return"https://gleitz.github.io/midi-js-soundfonts/"+(t="FluidR3_GM"===t?t:"MusyngKite")+"/"+e+"-"+(n="ogg"===n?n:"mp3")+".js"}var o=n(249);o.instrument=function e(t,n,o){if(1===arguments.length)return function(n,i){return e(t,n,i)};var l=o||{},c=l.isSoundfontURL||r,h=l.nameToUrl||a,u=c(n)?n:h(n,l.soundfont,l.format);return i(t,u,{only:l.only||l.notes}).then((function(e){var i=s(t,e,l).connect(l.destination?l.destination:t.destination);return i.url=u,i.name=n,i}))},o.nameToUrl=a,e.exports&&(e.exports=o),"undefined"!==typeof window&&(window.Soundfont=o)},249:(e,t,n)=>{"use strict";var i=n(988);function s(e,t){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof s))return new s(e);this.nameToUrl=t||s.nameToUrl,this.ctx=e,this.instruments={},this.promises=[]}function r(e,t){return t=t||{},function(n,s,r,a){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var o=n>0&&n<129?+n:i.midi(n),l=o?i.midiToFreq(o,440):null;if(l){r=r||.2;var c=(a=a||{}).destination||t.destination||e.destination,h=a.vcoType||t.vcoType||"sine",u=a.gain||t.gain||.4,d=e.createOscillator();d.type=h,d.frequency.value=l;var f=e.createGain();return f.gain.value=u,d.connect(f),f.connect(c),d.start(s),r>0&&d.stop(s+r),d}}}s.prototype.onready=function(e){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(e)},s.prototype.instrument=function(e,t){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var n=this.ctx;if((e=e||"default")in this.instruments)return this.instruments[e];var i={name:e,play:r(n,t)};if(this.instruments[e]=i,"default"!==e){var a=s.instrument(n,e,t).then((function(e){return i.play=e.play,i}));this.promises.push(a),i.onready=function(e){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),a.then(e)}}else i.onready=function(e){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),e()};return i},s.loadBuffers=function(e,t,n){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),s.instrument(e,t,n).then((function(e){return e.buffers}))},s.noteToMidi=i.midi,e.exports=s},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=b.prototype;var x=y.prototype=new v;x.constructor=y,m(x,b.prototype),x.isPureReactComponent=!0;var S=Array.isArray,w={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function _(e,t,i,s,r,a){return i=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:a}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var M=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(){}function P(e,t,s,r,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,h=!1;if(null===e)h=!0;else switch(o){case"bigint":case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case n:case i:h=!0;break;case d:return P((h=e._init)(e._payload),t,s,r,a)}}if(h)return a=a(e),h=""===r?"."+C(e,0):r,S(a)?(s="",null!=h&&(s=h.replace(M,"$&/")+"/"),P(a,t,s,"",(function(e){return e}))):null!=a&&(T(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(M,"$&/")+"/")+h,a=_(l.type,c,void 0,0,0,l.props)),t.push(a)),1;h=0;var u,p=""===r?".":r+":";if(S(e))for(var m=0;m<e.length;m++)h+=P(r=e[m],t,s,o=p+C(r,m),a);else if("function"===typeof(m=null===(u=e)||"object"!==typeof u?null:"function"===typeof(u=f&&u[f]||u["@@iterator"])?u:null))for(e=m.call(e),m=0;!(r=e.next()).done;)h+=P(r=r.value,t,s,o=p+C(r,m++),a);else if("object"===o){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(A,A):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,r,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return h}function N(e,t,n){if(null==e)return e;var i=[],s=0;return P(e,i,"","",(function(e){return t.call(n,e,s++)})),i}function k(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function I(){}t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=s,t.Profiler=a,t.PureComponent=y,t.StrictMode=r,t.Suspense=h,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key;if(null!=t)for(r in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!E.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(i[r]=t[r]);var r=arguments.length-2;if(1===r)i.children=n;else if(1<r){for(var a=Array(r),o=0;o<r;o++)a[o]=arguments[o+2];i.children=a}return _(e.type,s,void 0,0,0,i)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var i,s={},r=null;if(null!=t)for(i in void 0!==t.key&&(r=""+t.key),t)E.call(t,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(s[i]=t[i]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(i in a=e.defaultProps)void 0===s[i]&&(s[i]=a[i]);return _(e,r,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,n={};w.T=n;try{var i=e(),s=w.S;null!==s&&s(n,i),"object"===typeof i&&null!==i&&"function"===typeof i.then&&i.then(I,L)}catch(r){L(r)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,n){return w.H.useActionState(e,t,n)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return w.H.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,n){return w.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return w.H.useReducer(e,t,n)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return w.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return w.H.useTransition()},t.version="19.0.0"},383:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},411:e=>{e.exports=function e(t,n,i){function s(a,o){if(!n[a]){if(!t[a]){if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){var n=t[a][1][e];return s(n||e)}),c,c.exports,e,t,n,i)}return n[a].exports}for(var r=void 0,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){function t(e){if(this._event=e,this._data=e.data,this.receivedTime=e.receivedTime,this._data&&this._data.length<2)console.warn("Illegal MIDI message of length",this._data.length);else switch(this._messageCode=240&e.data[0],this.channel=15&e.data[0],this._messageCode){case 128:this.messageType="noteoff",this.key=127&e.data[1],this.velocity=127&e.data[2];break;case 144:this.messageType="noteon",this.key=127&e.data[1],this.velocity=127&e.data[2];break;case 160:this.messageType="keypressure",this.key=127&e.data[1],this.pressure=127&e.data[2];break;case 176:this.messageType="controlchange",this.controllerNumber=127&e.data[1],this.controllerValue=127&e.data[2],120===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allsoundoff":121===this.controllerNumber?this.channelModeMessage="resetallcontrollers":122===this.controllerNumber?0===this.controllerValue?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":123===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allnotesoff":124===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeoff":125===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeon":126===this.controllerNumber?this.channelModeMessage="monomodeon":127===this.controllerNumber&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=e.data[1];break;case 208:this.messageType="channelpressure",this.pressure=127&e.data[1];break;case 224:this.messageType="pitchbendchange";var t=127&e.data[2],n=127&e.data[1];this.pitchBend=(t<<8)+n}}return new t(e)},t.exports=n.default},{}]},{},[1])(1)},417:e=>{"use strict";var t=Array.isArray,n={};e.exports=function(e){return e.schedule=function(i,s){var r,a,o,l,c=e.context.currentTime,h=i<c?c:i;return e.emit("schedule",h,s),s.map((function(i){return i?(t(i)?(r=i[0],a=i[1]):(r=i.time,a=i),!function(e){return e&&"object"===typeof e}(a)?(o=a,l=n):(o=a.name||a.key||a.note||a.midi||null,l=a),e.start(o,h+(r||0),l)):null}))},e}},418:function(e,t,n){!function(e,t,n,i){"use strict";var s=function(e,t,n){return{endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}},r=function(e,t,n){return{endTime:t,insertTime:n,type:"linearRampToValue",value:e}},a=function(e,t){return{startTime:t,type:"setValue",value:e}},o=function(e,t,n){return{duration:n,startTime:t,type:"setValueCurve",values:e}},l=function(e,t,n){var i=n.startTime,s=n.target,r=n.timeConstant;return s+(t-s)*Math.exp((i-e)/r)},c=function(e){return"exponentialRampToValue"===e.type},h=function(e){return"linearRampToValue"===e.type},u=function(e){return c(e)||h(e)},d=function(e){return"setValue"===e.type},f=function(e){return"setValueCurve"===e.type},p=function(e,t,n,i){var s=e[t];return void 0===s?i:u(s)||d(s)?s.value:f(s)?s.values[s.values.length-1]:l(n,p(e,t-1,s.startTime,i),s)},m=function(e,t,n,i,s){return void 0===n?[i.insertTime,s]:u(n)?[n.endTime,n.value]:d(n)?[n.startTime,n.value]:f(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,p(e,t-1,n.startTime,s)]},g=function(e){return"cancelAndHold"===e.type},b=function(e){return"cancelScheduledValues"===e.type},v=function(e){return g(e)||b(e)?e.cancelTime:c(e)||h(e)?e.endTime:e.startTime},y=function(e,t,n,i){var s=i.endTime,r=i.value;return n===r?r:0<n&&0<r||n<0&&r<0?n*Math.pow(r/n,(e-t)/(s-t)):0},x=function(e,t,n,i){return n+(e-t)/(i.endTime-t)*(i.value-n)},S=function(e,t){var n=Math.floor(t),i=Math.ceil(t);return n===i?e[n]:(1-(t-n))*e[n]+(1-(i-t))*e[i]},w=function(e,t){var n=t.duration,i=t.startTime,s=t.values,r=(e-i)/n*(s.length-1);return S(s,r)},E=function(e){return"setTarget"===e.type},_=function(){function e(t){n(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return i(e,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=v(e);if(g(e)||b(e)){var n=this._automationEvents.findIndex((function(n){return b(e)&&f(n)?n.startTime+n.duration>=t:v(n)>=t})),i=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),g(e)){var l=this._automationEvents[this._automationEvents.length-1];if(void 0!==i&&u(i)){if(void 0!==l&&E(l))throw new Error("The internal list is malformed.");var d=void 0===l?i.insertTime:f(l)?l.startTime+l.duration:v(l),p=void 0===l?this._defaultValue:f(l)?l.values[l.values.length-1]:l.value,m=c(i)?y(t,d,p,i):x(t,d,p,i),S=c(i)?s(m,t,this._currenTime):r(m,t,this._currenTime);this._automationEvents.push(S)}if(void 0!==l&&E(l)&&this._automationEvents.push(a(this.getValue(t),t)),void 0!==l&&f(l)&&l.startTime+l.duration>t){var w=t-l.startTime,_=(l.values.length-1)/l.duration,T=Math.max(2,1+Math.ceil(w*_)),M=w/(T-1)*_,C=l.values.slice(0,T);if(M<1)for(var A=1;A<T;A+=1){var P=M*A%1;C[A]=l.values[A-1]*(1-P)+l.values[A]*P}this._automationEvents[this._automationEvents.length-1]=o(C,l.startTime,w)}}}else{var N=this._automationEvents.findIndex((function(e){return v(e)>t})),k=-1===N?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[N-1];if(void 0!==k&&f(k)&&v(k)+k.duration>t)return!1;var L=c(e)?s(e.value,e.endTime,this._currenTime):h(e)?r(e.value,t,this._currenTime):e;if(-1===N)this._automationEvents.push(L);else{if(f(e)&&t+e.duration>v(this._automationEvents[N]))return!1;this._automationEvents.splice(N,0,L)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex((function(t){return v(t)>e}));if(t>1){var n=this._automationEvents.slice(t-1),i=n[0];E(i)&&n.unshift(a(p(this._automationEvents,t-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex((function(t){return v(t)>e})),i=this._automationEvents[n],s=(-1===n?this._automationEvents.length:n)-1,r=this._automationEvents[s];if(void 0!==r&&E(r)&&(void 0===i||!u(i)||i.insertTime>e))return l(e,p(this._automationEvents,s-1,r.startTime,this._defaultValue),r);if(void 0!==r&&d(r)&&(void 0===i||!u(i)))return r.value;if(void 0!==r&&f(r)&&(void 0===i||!u(i)||r.startTime+r.duration>e))return e<r.startTime+r.duration?w(e,r):r.values[r.values.length-1];if(void 0!==r&&u(r)&&(void 0===i||!u(i)))return r.value;if(void 0!==i&&c(i)){var a=m(this._automationEvents,s,r,i,this._defaultValue),o=t(a,2),g=o[0],b=o[1];return y(e,g,b,i)}if(void 0!==i&&h(i)){var S=m(this._automationEvents,s,r,i,this._defaultValue),_=t(S,2),T=_[0],M=_[1];return x(e,T,M,i)}return this._defaultValue}}])}(),T=function(e){return{cancelTime:e,type:"cancelAndHold"}},M=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},C=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},A=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},P=function(e,t,n){return{startTime:t,target:e,timeConstant:n,type:"setTarget"}};e.AutomationEventList=_,e.createCancelAndHoldAutomationEvent=T,e.createCancelScheduledValuesAutomationEvent=M,e.createExponentialRampToValueAutomationEvent=C,e.createLinearRampToValueAutomationEvent=A,e.createSetTargetAutomationEvent=P,e.createSetValueAutomationEvent=a,e.createSetValueCurveAutomationEvent=o}(t,n(715),n(383),n(960))},488:function(e,t,n){var i,s,r=n(897).default;i="undefined"==typeof window?this:window,s=()=>(e=>{"use strict";let t,n;var i,s,a,o,l,c,h,u,d,f,p,m,g,b,v,y,x,S,w={d:(e,t)=>{for(var n in t)w.o(t,n)&&!w.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},E={};w.d(E,{default:()=>mu}),function(e,t,n,i,s){e.SVG_NS="http://www.w3.org/2000/svg",e.product="Highcharts",e.version="12.4.0",e.win="undefined"!=typeof window?window:{},e.doc=e.win.document,e.svg=!(null===(t=e.doc)||void 0===t||null===(n=t.createElementNS)||void 0===n||null===(n=n.call(t,e.SVG_NS,"svg"))||void 0===n||!n.createSVGRect),e.pageLang=null===(i=e.doc)||void 0===i||null===(i=i.documentElement)||void 0===i||null===(i=i.closest("[lang]"))||void 0===i?void 0:i.lang,e.userAgent=(null===(s=e.win.navigator)||void 0===s?void 0:s.userAgent)||"",e.isChrome=e.win.chrome,e.isFirefox=-1!==e.userAgent.indexOf("Firefox"),e.isMS=/(edge|msie|trident)/i.test(e.userAgent)&&!e.win.opera,e.isSafari=!e.isChrome&&-1!==e.userAgent.indexOf("Safari"),e.isTouchDevice=/(Mobile|Android|Windows Phone)/.test(e.userAgent),e.isWebKit=-1!==e.userAgent.indexOf("AppleWebKit"),e.deg2rad=2*Math.PI/360,e.marginNames=["plotTop","marginRight","marginBottom","plotLeft"],e.noop=function(){},e.supportsPassiveEvents=function(){let t=!1;if(!e.isMS){let n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.win.addEventListener&&e.win.removeEventListener&&(e.win.addEventListener("testPassive",e.noop,n),e.win.removeEventListener("testPassive",e.noop,n))}return t}(),e.charts=[],e.composed=[],e.dateFormats={},e.seriesTypes={},e.symbolSizes={},e.chartCount=0}(i||(i={}));let _=i,{charts:T,doc:M,win:C}=_;function A(e,t,n,i){let s=t?"Highcharts error":"Highcharts warning";32===e&&(e="".concat(s,": Deprecated member"));let r=O(e),a=r?"".concat(s," #").concat(e,": www.highcharts.com/errors/").concat(e,"/"):e.toString();if(void 0!==i){let e="";r&&(a+="?"),H(i,(function(t,n){e+="\n - ".concat(n,": ").concat(t),r&&(a+=encodeURI(n)+"="+encodeURI(t))})),a+=e}Y(_,"displayError",{chart:n,code:e,message:a,params:i},(function(){if(t)throw Error(a);C.console&&-1===A.messages.indexOf(a)&&console.warn(a)})),A.messages.push(a)}function P(e,t){return parseInt(e,t||10)}function N(e){return"string"==typeof e}function k(e){let t=Object.prototype.toString.call(e);return"[object Array]"===t||"[object Array Iterator]"===t}function L(e,t){return!!e&&"object"==typeof e&&(!t||!k(e))}function I(e){return L(e)&&"number"==typeof e.nodeType}function R(e){let t=null===e||void 0===e?void 0:e.constructor;return!(!L(e,!0)||I(e)||null===t||void 0===t||!t.name||"Object"===t.name)}function O(e){return"number"==typeof e&&!isNaN(e)&&e<1/0&&e>-1/0}function D(e){return null!=e}function F(e,t,n){let i,s=N(t)&&!D(n),r=(t,n)=>{D(t)?e.setAttribute(n,t):s?(i=e.getAttribute(n))||"class"!==n||(i=e.getAttribute(n+"Name")):e.removeAttribute(n)};return N(t)?r(n,t):H(t,r),i}function B(e){return k(e)?e:[e]}function j(e,t){let n;for(n in e||(e={}),t)e[n]=t[n];return e}function V(){let e=arguments,t=e.length;for(let n=0;n<t;n++){let t=e[n];if(null!=t)return t}}function G(e,t){j(e.style,t)}function W(e){return Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function z(e,t){return e>1e14?e:parseFloat(e.toPrecision(t||14))}(A||(A={})).messages=[],Math.easeInOutSine=function(e){return-.5*(Math.cos(Math.PI*e)-1)};let U=Array.prototype.find?function(e,t){return e.find(t)}:function(e,t){let n,i=e.length;for(n=0;n<i;n++)if(t(e[n],n))return e[n]};function H(e,t,n){for(let i in e)Object.hasOwnProperty.call(e,i)&&t.call(n||e[i],e[i],i,e)}function X(e,t,n){function i(t,n){let i=e.removeEventListener;i&&i.call(e,t,n,!1)}function s(n){let s,r;e.nodeName&&(t?(s={})[t]=!0:s=n,H(s,(function(e,t){if(n[t])for(r=n[t].length;r--;)i(t,n[t][r].fn)})))}let r="function"==typeof e&&e.prototype||e;if(Object.hasOwnProperty.call(r,"hcEvents")){let e=r.hcEvents;if(t){let r=e[t]||[];n?(e[t]=r.filter((function(e){return n!==e.fn})),i(t,n)):(s(e),e[t]=[])}else s(e),delete r.hcEvents}}function Y(e,t,n,i){if(n=n||{},null!==M&&void 0!==M&&M.createEvent&&(e.dispatchEvent||e.fireEvent&&e!==_)){let i=M.createEvent("Events");i.initEvent(t,!0,!0),n=j(i,n),e.dispatchEvent?e.dispatchEvent(n):e.fireEvent(t,n)}else if(e.hcEvents){n.target||j(n,{preventDefault:function(){n.defaultPrevented=!0},target:e,type:t});let i=[],s=e,r=!1;for(;s.hcEvents;)Object.hasOwnProperty.call(s,"hcEvents")&&s.hcEvents[t]&&(i.length&&(r=!0),i.unshift.apply(i,s.hcEvents[t])),s=Object.getPrototypeOf(s);r&&i.sort(((e,t)=>e.order-t.order)),i.forEach((t=>{!1===t.fn.call(e,n)&&n.preventDefault()}))}i&&!n.defaultPrevented&&i.call(e,n)}let q=function(){let e=Math.random().toString(36).substring(2,9)+"-",n=0;return function(){return"highcharts-"+(t?"":e)+n++}}();C.jQuery&&(C.jQuery.fn.highcharts=function(){let e=[].slice.call(arguments);if(this[0])return e[0]?(new(_[N(e[0])?e.shift():"Chart"])(this[0],e[0],e[1]),this):T[F(this[0],"data-highcharts-chart")]});let K={addEvent:function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s="function"==typeof e&&e.prototype||e;Object.hasOwnProperty.call(s,"hcEvents")||(s.hcEvents={});let r=s.hcEvents;_.Point&&e instanceof _.Point&&e.series&&e.series.chart&&(e.series.chart.runTrackerClick=!0);let a=e.addEventListener;a&&a.call(e,t,n,!!_.supportsPassiveEvents&&{passive:void 0===i.passive?-1!==t.indexOf("touch"):i.passive,capture:!1}),r[t]||(r[t]=[]);let o={fn:n,order:"number"==typeof i.order?i.order:1/0};return r[t].push(o),r[t].sort(((e,t)=>e.order-t.order)),function(){X(e,t,n)}},arrayMax:function(e){let t=e.length,n=e[0];for(;t--;)e[t]>n&&(n=e[t]);return n},arrayMin:function(e){let t=e.length,n=e[0];for(;t--;)e[t]<n&&(n=e[t]);return n},attr:F,clamp:function(e,t,n){return e>t?e<n?e:n:t},clearTimeout:function(e){D(e)&&clearTimeout(e)},correctFloat:z,createElement:function(e,t,n,i,s){let r=M.createElement(e);return t&&j(r,t),s&&G(r,{padding:"0",border:"none",margin:"0"}),n&&G(r,n),i&&i.appendChild(r),r},crisp:function(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)%2/2,n=(arguments.length>2?arguments[2]:void 0)?-1:1;return(Math.round(e*n-t)+t)*n},css:G,defined:D,destroyObjectProperties:function(e,t,n){H(e,(function(i,s){i!==t&&null!==i&&void 0!==i&&i.destroy&&i.destroy(),((null===i||void 0===i?void 0:i.destroy)||!n)&&delete e[s]}))},diffObjects:function(e,t,n,i){let s={};return function e(t,s,r,a){let o=n?s:t;H(t,(function(n,l){if(!a&&i&&i.indexOf(l)>-1&&s[l]){n=B(n),r[l]=[];for(let t=0;t<Math.max(n.length,s[l].length);t++)s[l][t]&&(void 0===n[t]?r[l][t]=s[l][t]:(r[l][t]={},e(n[t],s[l][t],r[l][t],a+1)))}else L(n,!0)&&!n.nodeType?(r[l]=k(n)?[]:{},e(n,s[l]||{},r[l],a+1),0===Object.keys(r[l]).length&&("colorAxis"!==l||0!==a)&&delete r[l]):(t[l]!==s[l]||l in t&&!(l in s))&&"__proto__"!==l&&"constructor"!==l&&(r[l]=o[l])}))}(e,t,s,0),s},discardElement:function(e){var t;null===e||void 0===e||null===(t=e.parentElement)||void 0===t||t.removeChild(e)},erase:function(e,t){let n=e.length;for(;n--;)if(e[n]===t){e.splice(n,1);break}},error:A,extend:j,extendClass:function(e,t){let n=function(){};return j(n.prototype=new e,t),n},find:U,fireEvent:Y,getAlignFactor:function(){return{center:.5,right:1,middle:.5,bottom:1}[arguments.length>0&&void 0!==arguments[0]?arguments[0]:""]||0},getClosestDistance:function(e,t){let n,i,s,r,a=!t;return e.forEach((e=>{if(e.length>1)for(r=i=e.length-1;r>0;r--){var o;(s=e[r]-e[r-1])<0&&!a?(null!==(o=t)&&void 0!==o&&o(),t=void 0):s&&(void 0===n||s<n)&&(n=s)}})),n},getMagnitude:W,getNestedProperty:function(e,t){let n=e.split(".");for(;n.length&&D(t);){let e=n.shift();if(void 0===e||"__proto__"===e)return;if("this"===e){let e;return L(t)&&(e=t["@this"]),null!==e&&void 0!==e?e:t}let i=t[e.replace(/[\\'"]/g,"")];if(!D(i)||"function"==typeof i||"number"==typeof i.nodeType||i===C)return;t=i}return t},getStyle:function e(t,n,i){let s;if("width"===n){var r;let n=Math.min(t.offsetWidth,t.scrollWidth),i=null===(r=t.getBoundingClientRect)||void 0===r?void 0:r.call(t).width;return i<n&&i>=n-1&&(n=Math.floor(i)),Math.max(0,n-(e(t,"padding-left",!0)||0)-(e(t,"padding-right",!0)||0))}if("height"===n)return Math.max(0,Math.min(t.offsetHeight,t.scrollHeight)-(e(t,"padding-top",!0)||0)-(e(t,"padding-bottom",!0)||0));let a=C.getComputedStyle(t,void 0);return a&&(s=a.getPropertyValue(n),V(i,"opacity"!==n)&&(s=P(s))),s},insertItem:function(e,t){let n,i=e.options.index,s=t.length;for(n=e.options.isInternal?s:0;n<s+1;n++)if(!t[n]||O(i)&&i<V(t[n].options.index,t[n]._i)||t[n].options.isInternal){t.splice(n,0,e);break}return n},isArray:k,isClass:R,isDOMElement:I,isFunction:function(e){return"function"==typeof e},isNumber:O,isObject:L,isString:N,merge:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let s,r=[e,...n],a={},o=function(e,t){return"object"!=typeof e&&(e={}),H(t,(function(n,i){"__proto__"!==i&&"constructor"!==i&&(!L(n,!0)||R(n)||I(n)?e[i]=t[i]:e[i]=o(e[i]||{},n))})),e};!0===e&&(a=r[1],r=Array.prototype.slice.call(r,2));let l=r.length;for(s=0;s<l;s++)a=o(a,r[s]);return a},normalizeTickInterval:function(e,t,n,i,s){let r,a=e,o=e/(n=V(n,W(e)));for(!t&&(t=s?[1,1.2,1.5,2,2.5,3,4,5,6,8,10]:[1,2,2.5,5,10],!1===i&&(1===n?t=t.filter((function(e){return e%1==0})):n<=.1&&(t=[1/n]))),r=0;r<t.length&&(a=t[r],(!s||!(a*n>=e))&&(s||!(o<=(t[r]+(t[r+1]||t[r]))/2)));r++);return z(a*n,-Math.round(Math.log(.001)/Math.LN10))},objectEach:H,offset:function(e){let t=M.documentElement,n=e.parentElement||e.parentNode?e.getBoundingClientRect():{top:0,left:0,width:0,height:0};return{top:n.top+(C.pageYOffset||t.scrollTop)-(t.clientTop||0),left:n.left+(C.pageXOffset||t.scrollLeft)-(t.clientLeft||0),width:n.width,height:n.height}},pad:function(e,t,n){return Array((t||2)+1-String(e).replace("-","").length).join(n||"0")+e},pick:V,pInt:P,pushUnique:function(e,t){return 0>e.indexOf(t)&&!!e.push(t)},relativeLength:function(e,t,n){return/%$/.test(e)?t*parseFloat(e)/100+(n||0):parseFloat(e)},removeEvent:X,replaceNested:function(e){let t,n;for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];do{for(n of(t=e,s))e=e.replace(n[0],n[1])}while(e!==t);return e},splat:B,stableSort:function(e,t){let n,i,s=e.length;for(i=0;i<s;i++)e[i].safeI=i;for(e.sort((function(e,i){return 0===(n=t(e,i))?e.safeI-i.safeI:n})),i=0;i<s;i++)delete e[i].safeI},syncTimeout:function(e,t,n){return t>0?setTimeout(e,t,n):(e.call(0,n),-1)},timeUnits:{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},ucfirst:function(e){return N(e)?e.substring(0,1).toUpperCase()+e.substring(1):String(e)},uniqueKey:q,useSerialIds:function(e){return t=V(e,t)},wrap:function(e,t,n){let i=e[t];e[t]=function(){let e=arguments,t=this;return n.apply(this,[function(){return i.apply(t,arguments.length?arguments:e)}].concat([].slice.call(arguments)))}}},{pageLang:$,win:Z}=_,{defined:Q,error:J,extend:ee,isNumber:te,isObject:ne,isString:ie,merge:se,objectEach:re,pad:ae,splat:oe,timeUnits:le,ucfirst:ce}=K,he=_.isSafari&&Z.Intl&&!Z.Intl.DateTimeFormat.prototype.formatRange,ue=class{constructor(e,t){this.options={timezone:"UTC"},this.variableTimezone=!1,this.Date=Z.Date,this.update(e),this.lang=t}update(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dTLCache={},this.options=t=se(!0,this.options,t);let{timezoneOffset:n,useUTC:i,locale:s}=t;this.Date=t.Date||Z.Date||Date;let r=t.timezone;Q(i)&&(r=i?"UTC":void 0),n&&n%60==0&&(r="Etc/GMT"+(n>0?"+":"")+n/60),this.variableTimezone="UTC"!==r&&0!==(null===(e=r)||void 0===e?void 0:e.indexOf("Etc/GMT")),this.timezone=r,this.lang&&s&&(this.lang.locale=s),["months","shortMonths","weekdays","shortWeekdays"].forEach((e=>{let t=/months/i.test(e),n=/short/.test(e),i={timeZone:"UTC"};i[t?"month":"weekday"]=n?"short":"long",this[e]=(t?[0,1,2,3,4,5,6,7,8,9,10,11]:[3,4,5,6,7,8,9]).map((e=>this.dateFormat(i,24*(t?31:1)*36e5*e)))}))}toParts(e){let[t,n,i,s,r,a,o]=this.dateTimeFormat({weekday:"narrow",day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},e,"es").split(/(?:, | |\/|:)/g);return[s,i-1,n,r,a,o,Math.floor(Number(e)||0)%1e3,"DLMXJVS".indexOf(t)].map(Number)}dateTimeFormat(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.locale||$,s=JSON.stringify(e)+i;ie(e)&&(e=this.str2dtf(e));let r=this.dTLCache[s];if(!r){var a;null!==(a=e.timeZone)&&void 0!==a||(e.timeZone=this.timezone);try{r=new Intl.DateTimeFormat(i,e)}catch(t){/Invalid time zone/i.test(t.message)?(J(34),e.timeZone="UTC",r=new Intl.DateTimeFormat(i,e)):J(t.message,!1)}}return this.dTLCache[s]=r,(null===(n=r)||void 0===n?void 0:n.format(t))||""}str2dtf(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={L:{fractionalSecondDigits:3},S:{second:"2-digit"},M:{minute:"numeric"},H:{hour:"2-digit"},k:{hour:"numeric"},E:{weekday:"narrow"},a:{weekday:"short"},A:{weekday:"long"},d:{day:"2-digit"},e:{day:"numeric"},b:{month:"short"},B:{month:"long"},m:{month:"2-digit"},o:{month:"numeric"},y:{year:"2-digit"},Y:{year:"numeric"}};return Object.keys(n).forEach((i=>{-1!==e.indexOf(i)&&ee(t,n[i])})),t}makeTime(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,o=this.Date.UTC(e,t,n,i,s||0,r||0,a||0);if("UTC"!==this.timezone){let e=this.getTimezoneOffset(o);if(o+=e,-1!==[2,3,8,9,10,11].indexOf(t)&&(i<5||i>20)){let t=this.getTimezoneOffset(o);e!==t?o+=t-e:e-36e5!==this.getTimezoneOffset(o-36e5)||he||(o-=36e5)}}return o}parse(e){if(!ie(e))return null!==e&&void 0!==e?e:void 0;let t=(e=e.replace(/\//g,"-").replace(/(GMT|UTC)/,"")).indexOf("Z")>-1||/([+-][0-9]{2}):?[0-9]{2}$/.test(e),n=/^[0-9]{4}-[0-9]{2}(-[0-9]{2}|)$/.test(e);t||n||(e+="Z");let i=Date.parse(e);return te(i)?i+(!t||n?this.getTimezoneOffset(i):0):void 0}getTimezoneOffset(e){if("UTC"!==this.timezone){let[t,n,i,s,r=0]=this.dateTimeFormat({timeZoneName:"shortOffset"},e,"en").split(/(GMT|:)/).map(Number),a=-60*(i+r/60)*6e4;if(te(a))return a}return 0}dateFormat(e,t,n){let i=this.lang;if(!Q(t)||isNaN(t))return(null===i||void 0===i?void 0:i.invalidDate)||"";if(ie(e=null!==e&&void 0!==e?e:"%Y-%m-%d %H:%M:%S")){let n,s=/%\[([a-zA-Z]+)\]/g;for(;n=s.exec(e);)e=e.replace(n[0],this.dateTimeFormat(n[1],t,null===i||void 0===i?void 0:i.locale))}if(ie(e)&&-1!==e.indexOf("%")){var s;let n=this,[r,a,o,l,c,h,u,d]=this.toParts(t),f=(null===i||void 0===i?void 0:i.weekdays)||this.weekdays,p=(null===i||void 0===i?void 0:i.shortWeekdays)||this.shortWeekdays,m=(null===i||void 0===i?void 0:i.months)||this.months,g=(null===i||void 0===i?void 0:i.shortMonths)||this.shortMonths;re(ee({a:p?p[d]:f[d].substr(0,3),A:f[d],d:ae(o),e:ae(o,2," "),w:d,v:null!==(s=null===i||void 0===i?void 0:i.weekFrom)&&void 0!==s?s:"",b:g[a],B:m[a],m:ae(a+1),o:a+1,y:r.toString().substr(2,2),Y:r,H:ae(l),k:l,I:ae(l%12||12),l:l%12||12,M:ae(c),p:l<12?"AM":"PM",P:l<12?"am":"pm",S:ae(h),L:ae(u,3)},_.dateFormats),(function(i,s){if(ie(e))for(;-1!==e.indexOf("%"+s);)e=e.replace("%"+s,"function"==typeof i?i.call(n,t):i)}))}else if(ne(e)){let n=(this.getTimezoneOffset(t)||0)/36e5,i=this.timezone||"Etc/GMT"+(n>=0?"+":"")+n,{prefix:s="",suffix:r=""}=e;e=s+this.dateTimeFormat(ee({timeZone:i},e),t)+r}return n?ce(e):e}resolveDTLFormat(e){return ne(e,!0)?ne(e,!0)&&(e=>void 0===e.main)(e)?{main:e}:e:{main:(e=oe(e))[0],from:e[1],to:e[2]}}getDateFormat(e,t,n,i){let s=this.dateFormat("%m-%d %H:%M:%S.%L",t),r="01-01 00:00:00.000",a={millisecond:15,second:12,minute:9,hour:6,day:3},o="millisecond",l=o;for(o in le){if(e&&e===le.week&&+this.dateFormat("%w",t)===n&&s.substr(6)===r.substr(6)){o="week";break}if(e&&le[o]>e){o=l;break}if(a[o]&&s.substr(a[o])!==r.substr(a[o]))break;"week"!==o&&(l=o)}return this.resolveDTLFormat(i[o]).main}},{defined:de,extend:fe,timeUnits:pe}=K,me=class extends ue{getTimeTicks(e,t,n,i){let s,r=this,a=[],o={},{count:l=1,unitRange:c}=e,[h,u,d,f,p,m]=r.toParts(t),g=(t||0)%1e3;if(null!==i&&void 0!==i||(i=1),de(t)){if(g=c>=pe.second?0:l*Math.floor(g/l),c>=pe.second&&(m=c>=pe.minute?0:l*Math.floor(m/l)),c>=pe.minute&&(p=c>=pe.hour?0:l*Math.floor(p/l)),c>=pe.hour&&(f=c>=pe.day?0:l*Math.floor(f/l)),c>=pe.day&&(d=c>=pe.month?1:Math.max(1,l*Math.floor(d/l))),c>=pe.month&&(u=c>=pe.year?0:l*Math.floor(u/l)),c>=pe.year&&(h-=h%l),c===pe.week){l&&(t=r.makeTime(h,u,d,f,p,m,g));let e=this.dateTimeFormat({timeZone:this.timezone,weekday:"narrow"},t,"es"),n="DLMXJVS".indexOf(e);d+=-n+i+(n<i?-7:0)}t=r.makeTime(h,u,d,f,p,m,g),r.variableTimezone&&de(n)&&(s=n-t>4*pe.month||r.getTimezoneOffset(t)!==r.getTimezoneOffset(n));let e=t,b=1;for(;e<n;)a.push(e),c===pe.year?e=r.makeTime(h+b*l,0):c===pe.month?e=r.makeTime(h,u+b*l):!s||c!==pe.day&&c!==pe.week?s&&c===pe.hour&&l>1?e=r.makeTime(h,u,d,f+b*l):e+=c*l:e=r.makeTime(h,u,d+b*l*(c===pe.day?1:7)),b++;a.push(e),c<=pe.hour&&a.length<1e4&&a.forEach((e=>{e%18e5==0&&"000000000"===r.dateFormat("%H%M%S%L",e)&&(o[e]="day")}))}return a.info=fe(e,{higherRanks:o,totalRange:c*l}),a}},{isTouchDevice:ge}=_,{fireEvent:be,merge:ve}=K,ye={colors:["#2caffe","#544fc5","#00e272","#fe6a35","#6b8abc","#d568fb","#2ee0ca","#fa4b42","#feb56a","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{weekFrom:"week from",chartTitle:"Chart title",locale:void 0,loading:"Loading...",months:void 0,seriesName:"Series {add index 1}",shortMonths:void 0,weekdays:void 0,numericSymbols:["k","M","G","T","P","E"],pieSliceName:"Slice",resetZoom:"Reset zoom",yAxisTitle:"Values",resetZoomTitle:"Reset zoom level 1:1"},global:{buttonTheme:{fill:"#f7f7f7",padding:8,r:2,stroke:"#cccccc","stroke-width":1,style:{color:"#333333",cursor:"pointer",fontSize:"0.8em",fontWeight:"normal"},states:{hover:{fill:"#e6e6e6"},select:{fill:"#e6e9ff",style:{color:"#000000",fontWeight:"bold"}},disabled:{style:{color:"#cccccc"}}}}},time:{Date:void 0,timezone:"UTC",timezoneOffset:0,useUTC:void 0},chart:{alignThresholds:!1,panning:{enabled:!1,type:"x"},styledMode:!1,borderRadius:0,colorCount:10,allowMutatingData:!0,ignoreHiddenSeries:!0,spacing:[10,10,15,10],resetZoomButton:{theme:{},position:{}},reflow:!0,type:"line",zooming:{singleTouch:!1,resetButton:{theme:{zIndex:6},position:{align:"right",x:-10,y:10}}},width:null,height:null,borderColor:"#334eff",backgroundColor:"#ffffff",plotBorderColor:"#cccccc"},title:{style:{color:"#333333",fontWeight:"bold"},text:"Chart title",margin:15,minScale:.67},subtitle:{style:{color:"#666666",fontSize:"0.8em"},text:""},caption:{margin:15,style:{color:"#666666",fontSize:"0.8em"},text:"",align:"left",verticalAlign:"bottom"},plotOptions:{},legend:{enabled:!0,align:"center",alignColumns:!0,className:"highcharts-no-tooltip",events:{},layout:"horizontal",itemMarginBottom:2,itemMarginTop:2,labelFormatter:function(){return this.name},borderColor:"#999999",borderRadius:0,navigation:{style:{fontSize:"0.8em"},activeColor:"#0022ff",inactiveColor:"#cccccc"},itemStyle:{color:"#333333",cursor:"pointer",fontSize:"0.8em",textDecoration:"none",textOverflow:"ellipsis"},itemHoverStyle:{color:"#000000"},itemHiddenStyle:{color:"#666666",textDecoration:"line-through"},shadow:!1,itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},squareSymbol:!0,symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{color:"#333333",fontSize:"0.8em",fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"#ffffff",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:{duration:300,easing:e=>Math.sqrt(1-Math.pow(e-1,2))},borderRadius:3,dateTimeLabelFormats:{millisecond:"%[AebHMSL]",second:"%[AebHMS]",minute:"%[AebHM]",hour:"%[AebHM]",day:"%[AebY]",week:"%v %[AebY]",month:"%[BY]",year:"%Y"},footerFormat:"",headerShape:"callout",hideDelay:500,padding:8,position:{x:0,y:3},shared:!1,snap:ge?25:10,headerFormat:'<span style="font-size: 0.8em">{ucfirst point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">\u25cf</span> {series.name}: <b>{point.y}</b><br/>',backgroundColor:"#ffffff",borderWidth:void 0,stickOnContact:!1,style:{color:"#333333",cursor:"default",fontSize:"0.8em"},useHTML:!1},credits:{enabled:!0,href:"https://www.highcharts.com?credits",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#999999",fontSize:"0.6em"},text:"Highcharts.com"}},xe=new me(ye.time,ye.lang),Se={defaultOptions:ye,defaultTime:xe,getOptions:function(){return ye},setOptions:function(e){var t;return be(_,"setOptions",{options:e}),ve(!0,ye,e),e.time&&xe.update(ye.time),e.lang&&"locale"in e.lang&&xe.update({locale:e.lang.locale}),null!==(t=e.lang)&&void 0!==t&&t.chartTitle&&(ye.title=r(r({},ye.title),{},{text:e.lang.chartTitle})),ye}},{win:we}=_,{isNumber:Ee,isString:_e,merge:Te,pInt:Me,defined:Ce}=K,Ae=(e,t,n)=>"color-mix(in srgb,".concat(e,",").concat(t," ").concat(100*n,"%)"),Pe=e=>_e(e)&&!!e&&"none"!==e;class Ne{static parse(e){return e?new Ne(e):Ne.None}constructor(e){let t,n,i,s;this.rgba=[NaN,NaN,NaN,NaN],this.input=e;let r=_.Color;if(r&&r!==Ne)return new r(e);if("object"==typeof e&&void 0!==e.stops)this.stops=e.stops.map((e=>new Ne(e[1])));else if("string"==typeof e)for(this.input=e=Ne.names[e.toLowerCase()]||e,i=Ne.parsers.length;i--&&!n;)(t=(s=Ne.parsers[i]).regex.exec(e))&&(n=s.parse(t));n&&(this.rgba=n)}get(e){let t=this.input,n=this.rgba;if(this.output)return this.output;if("object"==typeof t&&void 0!==this.stops){let n=Te(t);return n.stops=[].slice.call(n.stops),this.stops.forEach(((t,i)=>{n.stops[i]=[n.stops[i][0],t.get(e)]})),n}return n&&Ee(n[0])?"rgb"===e||!e&&1===n[3]?"rgb("+n[0]+","+n[1]+","+n[2]+")":"a"===e?"".concat(n[3]):"rgba("+n.join(",")+")":t}brighten(e){let t=this.rgba;if(this.stops)this.stops.forEach((function(t){t.brighten(e)}));else if(Ee(e)&&0!==e)if(Ee(t[0]))for(let n=0;n<3;n++)t[n]+=Me(255*e),t[n]<0&&(t[n]=0),t[n]>255&&(t[n]=255);else Ne.useColorMix&&Pe(this.input)&&(this.output=Ae(this.input,e>0?"white":"black",Math.abs(e)));return this}setOpacity(e){return this.rgba[3]=e,this}tweenTo(e,t){let n=this.rgba,i=e.rgba;if(!Ee(n[0])||!Ee(i[0]))return Ne.useColorMix&&Pe(this.input)&&Pe(e.input)&&t<.99?Ae(this.input,e.input,t):e.input||"none";let s=1!==i[3]||1!==n[3],r=(e,i)=>e+(n[i]-e)*(1-t),a=i.slice(0,3).map(r).map(Math.round);return s&&a.push(r(i[3],3)),(s?"rgba(":"rgb(")+a.join(",")+")"}}Ne.names={white:"#ffffff",black:"#000000"},Ne.parsers=[{regex:/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?(?:\.\d+)?)\s*\)/,parse:function(e){return[Me(e[1]),Me(e[2]),Me(e[3]),parseFloat(e[4],10)]}},{regex:/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/,parse:function(e){return[Me(e[1]),Me(e[2]),Me(e[3]),1]}},{regex:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])?$/i,parse:function(e){return[Me(e[1]+e[1],16),Me(e[2]+e[2],16),Me(e[3]+e[3],16),Ce(e[4])?Me(e[4]+e[4],16)/255:1]}},{regex:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})?$/i,parse:function(e){return[Me(e[1],16),Me(e[2],16),Me(e[3],16),Ce(e[4])?Me(e[4],16)/255:1]}}],Ne.useColorMix=null===(e=we.CSS)||void 0===e?void 0:e.supports("color","color-mix(in srgb,red,blue 9%)"),Ne.None=new Ne("");let{parse:ke}=Ne,{win:Le}=_,{isNumber:Ie,objectEach:Re}=K;class Oe{constructor(e,t,n){this.pos=NaN,this.options=t,this.elem=e,this.prop=n}dSetter(){let e=this.paths,t=null===e||void 0===e?void 0:e[0],n=null===e||void 0===e?void 0:e[1],i=this.now||0,s=[];if(1!==i&&t&&n)if(t.length===n.length&&i<1)for(let r=0;r<n.length;r++){let e=t[r],a=n[r],o=[];for(let t=0;t<a.length;t++){let n=e[t],s=a[t];Ie(n)&&Ie(s)&&("A"!==a[0]||4!==t&&5!==t)?o[t]=n+i*(s-n):o[t]=s}s.push(o)}else s=n;else s=this.toD||[];this.elem.attr("d",s,void 0,!0)}update(){let e=this.elem,t=this.prop,n=this.now,i=this.options.step;this[t+"Setter"]?this[t+"Setter"]():e.attr?e.element&&e.attr(t,n,null,!0):e.style[t]=n+this.unit,i&&i.call(e,n,this)}run(e,t,n){let i=this,s=i.options,r=function(e){return!r.stopped&&i.step(e)},a=Le.requestAnimationFrame||function(e){setTimeout(e,13)},o=function(){for(let e=0;e<Oe.timers.length;e++)Oe.timers[e]()||Oe.timers.splice(e--,1);Oe.timers.length&&a(o)};e!==t||this.elem["forceAnimate:"+this.prop]?(this.startTime=+new Date,this.start=e,this.end=t,this.unit=n,this.now=this.start,this.pos=0,r.elem=this.elem,r.prop=this.prop,r()&&1===Oe.timers.push(r)&&a(o)):(delete s.curAnim[this.prop],s.complete&&0===Object.keys(s.curAnim).length&&s.complete.call(this.elem))}step(e){let t,n,i=+new Date,s=this.options,r=this.elem,a=s.complete,o=s.duration,l=s.curAnim;return r.attr&&!r.element?t=!1:e||i>=o+this.startTime?(this.now=this.end,this.pos=1,this.update(),l[this.prop]=!0,n=!0,Re(l,(function(e){!0!==e&&(n=!1)})),n&&a&&a.call(r),t=!1):(this.pos=s.easing((i-this.startTime)/o),this.now=this.start+(this.end-this.start)*this.pos,this.update(),t=!0),t}initPath(e,t,n){let i,s,r,a,o=e.startX,l=e.endX,c=n.slice(),h=e.isArea,u=h?2:1,d=t&&n.length>t.length&&n.hasStackedCliffs,f=null===t||void 0===t?void 0:t.slice();if(!f||d)return[c,c];function p(e,t){for(;e.length<s;){let n=e[0],i=t[s-e.length];if(i&&"M"===n[0]&&("C"===i[0]?e[0]=["C",n[1],n[2],n[1],n[2],n[1],n[2]]:e[0]=["L",n[1],n[2]]),e.unshift(n),h){let t=e.pop();e.push(e[e.length-1],t)}}}function m(e){for(;e.length<s;){let t=e[Math.floor(e.length/u)-1].slice();if("C"===t[0]&&(t[1]=t[5],t[2]=t[6]),h){let n=e[Math.floor(e.length/u)].slice();e.splice(e.length/2,0,t,n)}else e.push(t)}}if(o&&l&&l.length){for(r=0;r<o.length;r++){if(o[r]===l[0]){i=r;break}if(o[0]===l[l.length-o.length+r]){i=r,a=!0;break}if(o[o.length-1]===l[l.length-o.length+r]){i=o.length-r;break}}void 0===i&&(f=[])}return f.length&&Ie(i)&&(s=c.length+i*u,a?(p(f,c),m(c)):(p(c,f),m(f))),[f,c]}fillSetter(){Oe.prototype.strokeSetter.apply(this,arguments)}strokeSetter(){this.elem.attr(this.prop,ke(this.start).tweenTo(ke(this.end),this.pos),void 0,!0)}}Oe.timers=[];let{defined:De,getStyle:Fe,isArray:Be,isNumber:je,isObject:Ve,merge:Ge,objectEach:We,pick:ze}=K;function Ue(e){return Ve(e)?Ge({duration:500,defer:0},e):{duration:500*!!e,defer:0}}function He(e,t){let n=Oe.timers.length;for(;n--;)Oe.timers[n].elem!==e||t&&t!==Oe.timers[n].prop||(Oe.timers[n].stopped=!0)}let Xe={animate:function(e,t,n){let i,s,r,a,o="";Ve(n)||(a=arguments,n={duration:a[2],easing:a[3],complete:a[4]}),je(n.duration)||(n.duration=400),n.easing="function"==typeof n.easing?n.easing:Math[n.easing]||Math.easeInOutSine,n.curAnim=Ge(t),We(t,(function(a,l){He(e,l),r=new Oe(e,n,l),s=void 0,"d"===l&&Be(t.d)?(r.paths=r.initPath(e,e.pathArray,t.d),r.toD=t.d,i=0,s=1):e.attr?i=e.attr(l):(i=parseFloat(Fe(e,l))||0,"opacity"!==l&&(o="px")),s||(s=a),"string"==typeof s&&s.match("px")&&(s=s.replace(/px/g,"")),r.run(i,s,o)}))},animObject:Ue,getDeferredAnimation:function(e,t,n){let i=Ue(t),s=n?[n]:e.series,r=0,a=0;return s.forEach((e=>{let n=Ue(e.options.animation);r=Ve(t)&&De(t.defer)?i.defer:Math.max(r,n.duration+n.defer),a=Math.min(i.duration,n.duration)})),e.renderer.forExport&&(r=0),{defer:Math.max(0,r-a),duration:Math.min(r,a)}},setAnimation:function(e,t){t.renderer.globalAnimation=ze(e,t.options.chart.animation,!0)},stop:He},{SVG_NS:Ye,win:qe}=_,{attr:Ke,createElement:$e,css:Ze,error:Qe,isFunction:Je,isString:et,objectEach:tt,splat:nt}=K,{trustedTypes:it}=qe,st=it&&Je(it.createPolicy)&&it.createPolicy("highcharts",{createHTML:e=>e}),rt=st?st.createHTML(""):"";class at{static filterUserAttributes(e){return tt(e,((t,n)=>{let i=!0;-1===at.allowedAttributes.indexOf(n)&&(i=!1),-1!==["background","dynsrc","href","lowsrc","src"].indexOf(n)&&(i=et(t)&&at.allowedReferences.some((e=>0===t.indexOf(e)))),i||(Qe(33,!1,void 0,{"Invalid attribute in config":"".concat(n)}),delete e[n]),et(t)&&e[n]&&(e[n]=t.replace(/</g,"&lt;"))})),e}static parseStyle(e){return e.split(";").reduce(((e,t)=>{let n=t.split(":").map((e=>e.trim())),i=n.shift();return i&&n.length&&(e[i.replace(/-([a-z])/g,(e=>e[1].toUpperCase()))]=n.join(":")),e}),{})}static setElementHTML(e,t){e.innerHTML=at.emptyHTML,t&&new at(t).addToDOM(e)}constructor(e){this.nodes="string"==typeof e?this.parseMarkup(e):e}addToDOM(e){return function e(t,n){let i;return nt(t).forEach((function(t){let s,r=t.tagName,a=t.textContent?_.doc.createTextNode(t.textContent):void 0,o=at.bypassHTMLFiltering;if(r)if("#text"===r)s=a;else if(-1!==at.allowedTags.indexOf(r)||o){let i="svg"===r?Ye:n.namespaceURI||Ye,l=_.doc.createElementNS(i,r),c=t.attributes||{};tt(t,(function(e,t){"tagName"!==t&&"attributes"!==t&&"children"!==t&&"style"!==t&&"textContent"!==t&&(c[t]=e)})),Ke(l,o?c:at.filterUserAttributes(c)),t.style&&Ze(l,t.style),a&&l.appendChild(a),e(t.children||[],l),s=l}else Qe(33,!1,void 0,{"Invalid tagName in config":r});s&&n.appendChild(s),i=s})),i}(this.nodes,e)}parseMarkup(e){let t,n=[];e=e.trim().replace(/ style=(["'])/g," data-style=$1");try{t=(new DOMParser).parseFromString(st?st.createHTML(e):e,"text/html")}catch(s){}if(!t){let n=$e("div");n.innerHTML=e,t={body:n}}let i=(e,t)=>{let n=e.nodeName.toLowerCase(),s={tagName:n};"#text"===n&&(s.textContent=e.textContent||"");let r=e.attributes;if(r){let e={};[].forEach.call(r,(t=>{"data-style"===t.name?s.style=at.parseStyle(t.value):e[t.name]=t.value})),s.attributes=e}if(e.childNodes.length){let t=[];[].forEach.call(e.childNodes,(e=>{i(e,t)})),t.length&&(s.children=t)}t.push(s)};return[].forEach.call(t.body.childNodes,(e=>i(e,n))),n}}at.allowedAttributes=["alt","aria-controls","aria-describedby","aria-expanded","aria-haspopup","aria-hidden","aria-label","aria-labelledby","aria-live","aria-pressed","aria-readonly","aria-roledescription","aria-selected","class","clip-path","color","colspan","cx","cy","d","disabled","dx","dy","fill","filterUnits","flood-color","flood-opacity","height","href","id","in","in2","markerHeight","markerWidth","offset","opacity","operator","orient","padding","paddingLeft","paddingRight","patternUnits","r","radius","refX","refY","result","role","rowspan","scope","slope","src","startOffset","stdDeviation","stroke-linecap","stroke-width","stroke","style","summary","tabindex","tableValues","target","text-align","text-anchor","textAnchor","textLength","title","type","valign","width","x","x1","x2","xlink:href","y","y1","y2","zIndex"],at.allowedReferences=["https://","http://","mailto:","/","../","./","#"],at.allowedTags=["#text","a","abbr","b","br","button","caption","circle","clipPath","code","dd","defs","div","dl","dt","em","feComponentTransfer","feComposite","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","filter","h1","h2","h3","h4","h5","h6","hr","i","img","li","linearGradient","marker","ol","p","path","pattern","pre","rect","small","span","stop","strong","style","sub","sup","svg","table","tbody","td","text","textPath","th","thead","title","tr","tspan","u","ul"],at.emptyHTML=rt,at.bypassHTMLFiltering=!1;let{defaultOptions:ot,defaultTime:lt}=Se,{pageLang:ct}=_,{extend:ht,getNestedProperty:ut,isArray:dt,isNumber:ft,isObject:pt,isString:mt,pick:gt,ucfirst:bt}=K,vt={add:(e,t)=>e+t,divide:(e,t)=>0!==t?e/t:"",eq:(e,t)=>e==t,each:function(e){let t=arguments[arguments.length-1];return!!dt(e)&&e.map(((n,i)=>St(t.body,ht(pt(n)?n:{"@this":n},{"@index":i,"@first":0===i,"@last":i===e.length-1})))).join("")},ge:(e,t)=>e>=t,gt:(e,t)=>e>t,if:e=>!!e,le:(e,t)=>e<=t,lt:(e,t)=>e<t,multiply:(e,t)=>e*t,ne:(e,t)=>e!=t,subtract:(e,t)=>e-t,ucfirst:bt,unless:e=>!e},yt={},xt=e=>/^["'].+["']$/.test(e);function St(){var e;let t,n,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,o=/\{([a-zA-Z\u00C0-\u017F\d:\.,;\-\/<>\[\]%_@+"'\u2019= #\(\)]+)\}/g,l=/\(([a-zA-Z\u00C0-\u017F\d:\.,;\-\/<>\[\]%_@+"'= ]+)\)/g,c=[],h=/f$/,u=/\.(\d)/,d=(null===a||void 0===a||null===(e=a.options)||void 0===e?void 0:e.lang)||ot.lang,f=(null===a||void 0===a?void 0:a.time)||lt,p=(null===a||void 0===a?void 0:a.numberFormatter)||wt.bind(a),m=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"true"===t||"false"!==t&&((e=Number(t)).toString()===t?e:xt(t)?t.slice(1,-1):ut(t,r))},g=0;for(;null!==(t=o.exec(s));){var b,v;let e=t,a=l.exec(t[1]);a&&(t=a,i=!0),(null===(b=n)||void 0===b?void 0:b.isBlock)||(n={ctx:r,expression:t[1],find:t[0],isBlock:"#"===t[1].charAt(0),start:t.index,startInner:t.index+t[0].length,length:t[0].length});let o=(n.isBlock?e:t)[1].split(" ")[0].replace("#","");vt[o]&&(n.isBlock&&o===n.fn&&g++,n.fn||(n.fn=o));let h="else"===t[1];if(n.isBlock&&n.fn&&(t[1]==="/".concat(n.fn)||h))if(g)!h&&g--;else{let e=n.startInner,i=s.substr(e,t.index-e);void 0===n.body?(n.body=i,n.startInner=t.index+t[0].length):n.elseBody=i,n.find+=i+t[0],h||(c.push(n),n=void 0)}else n.isBlock||c.push(n);if(a&&(null===(v=n)||void 0===v||!v.isBlock))break}return c.forEach((e=>{let t,n,{body:i,elseBody:o,expression:c,fn:g}=e;if(g){let s,l=[e],h=[],u=c.length,d=0;for(n=0;n<=u;n++){let e=c.charAt(n);s||'"'!==e&&"'"!==e?s===e&&(s=""):s=e,s||" "!==e&&n!==u||(h.push(c.substr(d,n-d)),d=n+1)}for(n=vt[g].length;n--;)l.unshift(m(h[n+1]));t=vt[g].apply(r,l),e.isBlock&&"boolean"==typeof t&&(t=St(t?i:o,r,a))}else{let n=xt(c)?[c]:c.split(":"),i=(t=m(n.shift()||""))%1!=0;if("number"==typeof t&&(n.length||i)){let e=n.join(":");if(h.test(e)||i){let n=parseInt((e.match(u)||["","-1"])[1],10);null!==t&&(t=p(t,n,d.decimalPoint,e.indexOf(",")>-1?d.thousandsSep:""))}else t=f.dateFormat(e,t)}l.lastIndex=0,l.test(e.find)&&mt(t)&&(t='"'.concat(t,'"'))}s=s.replace(e.find,gt(t,""))})),i?St(s,r,a):s}function wt(e,t,n,i){var s,r;t*=1;let a,o,[l,c]=(e=+e||0).toString().split("e").map(Number),h=(null===this||void 0===this||null===(s=this.options)||void 0===s?void 0:s.lang)||ot.lang,u=(e.toString().split(".")[1]||"").split("e")[0].length,d=t,f={};null!==n&&void 0!==n||(n=h.decimalPoint),null!==i&&void 0!==i||(i=h.thousandsSep),-1===t?t=Math.min(u,20):ft(t)?t&&c<0&&((o=t+c)>=0?(l=+l.toExponential(o).split("e")[0],t=o):(l=Math.floor(l),e=t<20?+(l*Math.pow(10,c)).toFixed(t):0,c=0)):t=2,c&&(null!==t&&void 0!==t||(t=2),e=l),ft(t)&&t>=0&&(f.minimumFractionDigits=t,f.maximumFractionDigits=t),""===i&&(f.useGrouping=!1);let p=i||n,m=p?"en":(null===this||void 0===this?void 0:this.locale)||h.locale||ct,g=JSON.stringify(f)+m;return a=(null!==(r=yt[g])&&void 0!==r?r:yt[g]=new Intl.NumberFormat(m,f)).format(e),p&&(a=a.replace(/([,\.])/g,"_$1").replace(/_\,/g,null!==i&&void 0!==i?i:",").replace("_.",null!==n&&void 0!==n?n:".")),(t||0!=+a)&&(!(c<0)||d)||(a="0"),c&&0!=+a&&(a+="e"+(c<0?"":"+")+c),a}let Et={dateFormat:function(e,t,n){return lt.dateFormat(e,t,n)},format:St,helpers:vt,numberFormat:wt};!function(e){let t;e.rendererTypes={},e.getRendererType=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return e.rendererTypes[n]||e.rendererTypes[t]},e.registerRendererType=function(n,i,s){e.rendererTypes[n]=i,(!t||s)&&(t=n,_.Renderer=i)}}(s||(s={}));let _t=s,{clamp:Tt,pick:Mt,pushUnique:Ct,stableSort:At}=K;(a||(a={})).distribute=function e(t,n,i){let s,r,a,o,l,c,h=t,u=h.reducedLen||n,d=(e,t)=>e.target-t.target,f=[],p=t.length,m=[],g=f.push,b=!0,v=0;for(s=p;s--;)v+=t[s].size;if(v>u){for(At(t,((e,t)=>(t.rank||0)-(e.rank||0))),a=(c=t[0].rank===t[t.length-1].rank)?p/2:-1,r=c?a:p-1;a&&v>u;)o=t[s=Math.floor(r)],Ct(m,s)&&(v-=o.size),r+=a,c&&r>=t.length&&(a/=2,r=a);m.sort(((e,t)=>t-e)).forEach((e=>g.apply(f,t.splice(e,1))))}for(At(t,d),t=t.map((e=>({size:e.size,targets:[e.target],align:Mt(e.align,.5)})));b;){for(s=t.length;s--;)o=t[s],l=(Math.min.apply(0,o.targets)+Math.max.apply(0,o.targets))/2,o.pos=Tt(l-o.size*o.align,0,n-o.size);for(s=t.length,b=!1;s--;)s>0&&t[s-1].pos+t[s-1].size>t[s].pos&&(t[s-1].size+=t[s].size,t[s-1].targets=t[s-1].targets.concat(t[s].targets),t[s-1].align=.5,t[s-1].pos+t[s-1].size>n&&(t[s-1].pos=n-t[s-1].size),t.splice(s,1),b=!0)}return g.apply(h,f),s=0,t.some((t=>{let r=0;return(t.targets||[]).some((()=>(h[s].pos=t.pos+r,void 0!==i&&Math.abs(h[s].pos-h[s].target)>i?(h.slice(0,s+1).forEach((e=>delete e.pos)),h.reducedLen=(h.reducedLen||n)-.1*n,h.reducedLen>.1*n&&e(h,n,i),!0):(r+=h[s].size,s++,!1))))})),At(h,d),h};let Pt=a,{animate:Nt,animObject:kt,stop:Lt}=Xe,{deg2rad:It,doc:Rt,svg:Ot,SVG_NS:Dt,win:Ft,isFirefox:Bt}=_,{addEvent:jt,attr:Vt,createElement:Gt,crisp:Wt,css:zt,defined:Ut,erase:Ht,extend:Xt,fireEvent:Yt,getAlignFactor:qt,isArray:Kt,isFunction:$t,isNumber:Zt,isObject:Qt,isString:Jt,merge:en,objectEach:tn,pick:nn,pInt:sn,pushUnique:rn,replaceNested:an,syncTimeout:on,uniqueKey:ln}=K;class cn{_defaultGetter(e){let t=nn(this[e+"Value"],this[e],this.element?this.element.getAttribute(e):null,0);return/^-?[\d\.]+$/.test(t)&&(t=parseFloat(t)),t}_defaultSetter(e,t,n){n.setAttribute(t,e)}add(e){let t,n=this.renderer,i=this.element;return e&&(this.parentGroup=e),void 0!==this.textStr&&"text"===this.element.nodeName&&n.buildText(this),this.added=!0,(!e||e.handleZ||this.zIndex)&&(t=this.zIndexSetter()),t||(e?e.element:n.box).appendChild(i),this.onAdd&&this.onAdd(),this}addClass(e,t){let n=t?"":this.attr("class")||"";return(e=(e||"").split(/ /g).reduce((function(e,t){return-1===n.indexOf(t)&&e.push(t),e}),n?[n]:[]).join(" "))!==n&&this.attr("class",e),this}afterSetters(){this.doTransform&&(this.updateTransform(),this.doTransform=!1)}align(e,t,n){var i;let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=this.renderer,a=r.alignedObjects,o=!!e;e?(this.alignOptions=e,this.alignByTranslate=t,this.alignTo=n):(e=this.alignOptions||{},t=this.alignByTranslate,n=this.alignTo);let l=!n||Jt(n)?n||"renderer":void 0;l&&(o&&rn(a,this),n=void 0);let c=nn(n,r[l],r),h=(c.x||0)+(e.x||0)+((c.width||0)-(e.width||0))*qt(e.align),u=(c.y||0)+(e.y||0)+((c.height||0)-(e.height||0))*qt(e.verticalAlign),d={"text-align":null===(i=e)||void 0===i?void 0:i.align};return d[t?"translateX":"x"]=Math.round(h),d[t?"translateY":"y"]=Math.round(u),s&&(this[this.placed?"animate":"attr"](d),this.placed=!0),this.alignAttr=d,this}alignSetter(e){let t={left:"start",center:"middle",right:"end"};t[e]&&(this.alignValue=e,this.element.setAttribute("text-anchor",t[e]))}animate(e,t,n){let i=kt(nn(t,this.renderer.globalAnimation,!0)),s=i.defer;return Rt.hidden&&(i.duration=0),0!==i.duration?(n&&(i.complete=n),on((()=>{this.element&&Nt(this,e,i)}),s)):(this.attr(e,void 0,n||i.complete),tn(e,(function(e,t){i.step&&i.step.call(this,e,{prop:t,pos:1,elem:this})}),this)),this}applyTextOutline(e){let t=this.element;-1!==e.indexOf("contrast")&&(e=e.replace(/contrast/g,this.renderer.getContrast(t.style.fill)));let n=e.indexOf(" "),i=e.substring(n+1),s=e.substring(0,n);if(s&&"none"!==s&&_.svg){this.fakeTS=!0,s=s.replace(/(^[\d\.]+)(.*?)$/g,(function(e,t,n){return 2*Number(t)+n})),this.removeTextOutline();let e=Rt.createElementNS(Dt,"tspan");Vt(e,{class:"highcharts-text-outline",fill:i,stroke:i,"stroke-width":s,"stroke-linejoin":"round"});let n=t.querySelector("textPath")||t;[].forEach.call(n.childNodes,(t=>{let n=t.cloneNode(!0);n.removeAttribute&&["fill","stroke","stroke-width","stroke"].forEach((e=>n.removeAttribute(e))),e.appendChild(n)}));let r=0;[].forEach.call(n.querySelectorAll("text tspan"),(e=>{r+=Number(e.getAttribute("dy"))}));let a=Rt.createElementNS(Dt,"tspan");a.textContent="\u200b",Vt(a,{x:Number(t.getAttribute("x")),dy:-r}),e.appendChild(a),n.insertBefore(e,n.firstChild)}}attr(e,t,n,i){let s,r,a,{element:o}=this,l=cn.symbolCustomAttribs,c=this;return"string"==typeof e&&void 0!==t&&(s=e,(e={})[s]=t),"string"==typeof e?c=(this[e+"Getter"]||this._defaultGetter).call(this,e,o):(tn(e,(function(t,n){a=!1,i||Lt(this,n),this.symbolName&&-1!==l.indexOf(n)&&(r||(this.symbolAttr(e),r=!0),a=!0),this.rotation&&("x"===n||"y"===n)&&(this.doTransform=!0),a||(this[n+"Setter"]||this._defaultSetter).call(this,t,n,o)}),this),this.afterSetters()),n&&n.call(this),c}clip(e){if(e&&!e.clipPath){let t=ln()+"-",n=this.renderer.createElement("clipPath").attr({id:t}).add(this.renderer.defs);Xt(e,{clipPath:n,id:t,count:0}),e.add(n)}return this.attr("clip-path",e?"url(".concat(this.renderer.url,"#").concat(e.id,")"):"none")}crisp(e,t){t=Math.round(t||e.strokeWidth||0);let n=e.x||this.x||0,i=e.y||this.y||0,s=(e.width||this.width||0)+n,r=(e.height||this.height||0)+i,a=Wt(n,t),o=Wt(i,t);return Xt(e,{x:a,y:o,width:Wt(s,t)-a,height:Wt(r,t)-o}),Ut(e.strokeWidth)&&(e.strokeWidth=t),e}complexColor(e,t,n){let i,s,r,a,o,l,c,h,u,d,f,p=this.renderer,m=[];Yt(this.renderer,"complexColor",{args:arguments},(function(){if(e.radialGradient?s="radialGradient":e.linearGradient&&(s="linearGradient"),s){if(r=e[s],o=p.gradients,l=e.stops,u=n.radialReference,Kt(r)&&(e[s]=r={x1:r[0],y1:r[1],x2:r[2],y2:r[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===s&&u&&!Ut(r.gradientUnits)&&(a=r,r=en(r,p.getRadialAttr(u,a),{gradientUnits:"userSpaceOnUse"})),tn(r,(function(e,t){"id"!==t&&m.push(t,e)})),tn(l,(function(e){m.push(e)})),o[m=m.join(",")])d=o[m].attr("id");else{r.id=d=ln();let e=o[m]=p.createElement(s).attr(r).add(p.defs);e.radAttr=a,e.stops=[],l.forEach((function(t){0===t[1].indexOf("rgba")?(c=(i=Ne.parse(t[1])).get("rgb"),h=i.get("a")):(c=t[1],h=1);let n=p.createElement("stop").attr({offset:t[0],"stop-color":c,"stop-opacity":h}).add(e);e.stops.push(n)}))}f="url("+p.url+"#"+d+")",n.setAttribute(t,f),n.gradient=m,e.toString=function(){return f}}}))}css(e){let t,n=this.styles,i={},s=this.element,r=!n;if(n&&tn(e,(function(e,t){n&&n[t]!==e&&(i[t]=e,r=!0)})),r){n&&(e=Xt(n,i)),null===e.width||"auto"===e.width?delete this.textWidth:"text"===s.nodeName.toLowerCase()&&e.width&&(t=this.textWidth=sn(e.width)),Xt(this.styles,e),t&&!Ot&&this.renderer.forExport&&delete e.width;let r=Bt&&e.fontSize||null;r&&(Zt(r)||/^\d+$/.test(r))&&(e.fontSize+="px");let a=en(e);s.namespaceURI===this.SVG_NS&&(["textOutline","textOverflow","whiteSpace","width"].forEach((e=>a&&delete a[e])),a.color&&(a.fill=a.color,delete a.color)),zt(s,a)}return this.added&&("text"===this.element.nodeName&&this.renderer.buildText(this),e.textOutline&&this.applyTextOutline(e.textOutline)),this}dashstyleSetter(e){let t,n=this["stroke-width"];if("inherit"===n&&(n=1),e){let i=(e=e.toLowerCase()).replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(t=i.length;t--;)i[t]=""+sn(i[t])*nn(n,NaN);e=i.join(",").replace(/NaN/g,"none"),this.element.setAttribute("stroke-dasharray",e)}}destroy(){let e,t,n=this,i=n.element||{},s=n.renderer,r=i.ownerSVGElement,a="SPAN"===i.nodeName&&n.parentGroup||void 0;if(i.onclick=i.onmouseout=i.onmouseover=i.onmousemove=i.point=null,Lt(n),n.clipPath&&r){let e=n.clipPath;[].forEach.call(r.querySelectorAll("[clip-path],[CLIP-PATH]"),(function(t){t.getAttribute("clip-path").indexOf(e.element.id)>-1&&t.removeAttribute("clip-path")})),n.clipPath=e.destroy()}if(n.stops){for(t=0;t<n.stops.length;t++)n.stops[t].destroy();n.stops.length=0,n.stops=void 0}for(n.safeRemoveChild(i);null!==(o=a)&&void 0!==o&&o.div&&0===a.div.childNodes.length;){var o;e=a.parentGroup,n.safeRemoveChild(a.div),delete a.div,a=e}n.alignOptions&&Ht(s.alignedObjects,n),tn(n,((e,t)=>{var i,s,r;((null===(i=n[t])||void 0===i?void 0:i.parentGroup)===n||-1!==["connector","foreignObject"].indexOf(t))&&null!==(s=n[t])&&void 0!==s&&null!==(r=s.destroy)&&void 0!==r&&r.call(s),delete n[t]}))}dSetter(e,t,n){Kt(e)&&("string"==typeof e[0]&&(e=this.renderer.pathToSegments(e)),this.pathArray=e,e=e.reduce(((e,t,n)=>null!==t&&void 0!==t&&t.join?(n?e+" ":"")+t.join(" "):(t||"").toString()),"")),/(NaN| {2}|^$)/.test(e)&&(e="M 0 0"),this[t]!==e&&(n.setAttribute(t,e),this[t]=e)}fillSetter(e,t,n){"string"==typeof e?n.setAttribute(t,e):e&&this.complexColor(e,t,n)}hrefSetter(e,t,n){n.setAttributeNS("http://www.w3.org/1999/xlink",t,e)}getBBox(e,t){let n,i,s,r,{alignValue:a,element:o,renderer:l,styles:c,textStr:h}=this,{cache:u,cacheKeys:d}=l,f=o.namespaceURI===this.SVG_NS,p=nn(t,this.rotation,0),m=l.styledMode?o&&cn.prototype.getStyle.call(o,"font-size"):c.fontSize;if(Ut(h)&&(-1===(r=h.toString()).indexOf("<")&&(r=r.replace(/\d/g,"0")),r+=["",l.rootFontSize,m,p,this.textWidth,a,c.lineClamp,c.textOverflow,c.fontWeight].join(",")),r&&!e&&(n=u[r]),!n||n.polygon){if(f||l.forExport){try{s=this.fakeTS&&function(e){let t=o.querySelector(".highcharts-text-outline");t&&zt(t,{display:e})},$t(s)&&s("none"),n=o.getBBox?Xt({},o.getBBox()):{width:o.offsetWidth,height:o.offsetHeight,x:0,y:0},$t(s)&&s("")}catch(g){}(!n||n.width<0)&&(n={x:0,y:0,width:0,height:0})}else n=this.htmlGetBBox();i=n.height,f&&(n.height=i={"11px,17":14,"13px,20":16}["".concat(m||"",",").concat(Math.round(i))]||i),p&&(n=this.getRotatedBox(n,p));let e={bBox:n};Yt(this,"afterGetBBox",e),n=e.bBox}if(r&&(""===h||n.height>0)){for(;d.length>250;)delete u[d.shift()];u[r]||d.push(r),u[r]=n}return n}getRotatedBox(e,t){let{x:n,y:i,width:s,height:r}=e,{alignValue:a,translateY:o,rotationOriginX:l=0,rotationOriginY:c=0}=this,h=qt(a),u=Number(this.element.getAttribute("y")||0)-(o?0:i),d=t*It,f=(t-90)*It,p=Math.cos(d),m=Math.sin(d),g=s*p,b=s*m,v=Math.cos(f),y=Math.sin(f),[[x,S],[w,E]]=[l,c].map((e=>[e-e*p,e*m])),_=n+h*(s-g)+x+E+u*v,T=_+g,M=T-r*v,C=M-g,A=i+u-h*b-S+w+u*y,P=A+b,N=P-r*y,k=N-b,L=Math.min(_,T,M,C),I=Math.min(A,P,N,k);return{x:L,y:I,width:Math.max(_,T,M,C)-L,height:Math.max(A,P,N,k)-I,polygon:[[_,A],[T,P],[M,N],[C,k]]}}getStyle(e){return Ft.getComputedStyle(this.element||this,"").getPropertyValue(e)}hasClass(e){return-1!==(""+this.attr("class")).split(" ").indexOf(e)}hide(){return this.attr({visibility:"hidden"})}htmlGetBBox(){return{height:0,width:0,x:0,y:0}}constructor(e,t){this.onEvents={},this.opacity=1,this.SVG_NS=Dt,this.element="span"===t||"body"===t?Gt(t):Rt.createElementNS(this.SVG_NS,t),this.renderer=e,this.styles={},Yt(this,"afterInit")}on(e,t){let{onEvents:n}=this;return n[e]&&n[e](),n[e]=jt(this.element,e,t),this}opacitySetter(e,t,n){let i=Number(Number(e).toFixed(3));this.opacity=i,n.setAttribute(t,i)}reAlign(){var e;(null===(e=this.alignOptions)||void 0===e?void 0:e.width)&&"left"!==this.alignOptions.align&&(this.alignOptions.width=this.getBBox().width,this.placed=!1,this.align())}removeClass(e){return this.attr("class",(""+this.attr("class")).replace(Jt(e)?RegExp("(^| )".concat(e,"( |$)")):e," ").replace(/ +/g," ").trim())}removeTextOutline(){let e=this.element.querySelector("tspan.highcharts-text-outline");e&&this.safeRemoveChild(e)}safeRemoveChild(e){let t=e.parentNode;t&&t.removeChild(e)}setRadialReference(e){let t=this.element.gradient&&this.renderer.gradients[this.element.gradient]||void 0;return this.element.radialReference=e,null!==t&&void 0!==t&&t.radAttr&&t.animate(this.renderer.getRadialAttr(e,t.radAttr)),this}shadow(e){var t;let{renderer:n}=this,i=en(90===(null===(t=this.parentGroup)||void 0===t?void 0:t.rotation)?{offsetX:-1,offsetY:-1}:{},Qt(e)?e:{}),s=n.shadowDefinition(i);return this.attr({filter:e?"url(".concat(n.url,"#").concat(s,")"):"none"})}show(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.attr({visibility:e?"inherit":"visible"})}"stroke-widthSetter"(e,t,n){this[t]=e,n.setAttribute(t,e)}strokeWidth(){if(!this.renderer.styledMode)return this["stroke-width"]||0;let e,t=this.getStyle("stroke-width"),n=0;return/px$/.test(t)?n=sn(t):""!==t&&(Vt(e=Rt.createElementNS(Dt,"rect"),{width:t,"stroke-width":0}),this.element.parentNode.appendChild(e),n=e.getBBox().width,e.parentNode.removeChild(e)),n}symbolAttr(e){let t=this;cn.symbolCustomAttribs.forEach((function(n){t[n]=nn(e[n],t[n])})),t.attr({d:t.renderer.symbols[t.symbolName](t.x,t.y,t.width,t.height,t)})}textSetter(e){e!==this.textStr&&(delete this.textPxLength,this.textStr=e,this.added&&this.renderer.buildText(this),this.reAlign())}titleSetter(e){let t=this.element,n=t.getElementsByTagName("title")[0]||Rt.createElementNS(this.SVG_NS,"title");t.insertBefore?t.insertBefore(n,t.firstChild):t.appendChild(n),n.textContent=an(nn(e,""),[/<[^>]*>/g,""]).replace(/&lt;/g,"<").replace(/&gt;/g,">")}toFront(){let e=this.element;return e.parentNode.appendChild(e),this}translate(e,t){return this.attr({translateX:e,translateY:t})}updateTransform(){var e,t,n,i;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform",{element:r,foreignObject:a,matrix:o,padding:l,rotation:c=0,rotationOriginX:h,rotationOriginY:u,scaleX:d,scaleY:f,text:p,translateX:m=0,translateY:g=0}=this,b=["translate("+m+","+g+")"];Ut(o)&&b.push("matrix("+o.join(",")+")"),c&&(b.push("rotate("+c+" "+(null!==(e=null!==(t=null!==h&&void 0!==h?h:r.getAttribute("x"))&&void 0!==t?t:this.x)&&void 0!==e?e:0)+" "+(null!==(n=null!==(i=null!==u&&void 0!==u?u:r.getAttribute("y"))&&void 0!==i?i:this.y)&&void 0!==n?n:0)+")"),"SPAN"!==(null===p||void 0===p?void 0:p.element.tagName)||null!==p&&void 0!==p&&p.foreignObject||p.attr({rotation:c,rotationOriginX:(h||0)-l,rotationOriginY:(u||0)-l})),(Ut(d)||Ut(f))&&b.push("scale("+nn(d,1)+" "+nn(f,1)+")"),b.length&&!(p||this).textPath&&((null===a||void 0===a?void 0:a.element)||r).setAttribute(s,b.join(" "))}visibilitySetter(e,t,n){"inherit"===e?n.removeAttribute(t):this[t]!==e&&n.setAttribute(t,e),this[t]=e}xGetter(e){return"circle"===this.element.nodeName&&("x"===e?e="cx":"y"===e&&(e="cy")),this._defaultGetter(e)}zIndexSetter(e,t){let n,i,s,r,a,o=this.renderer,l=this.parentGroup,c=(l||o).element||o.box,h=this.element,u=c===o.box,d=!1,f=this.added;if(Ut(e)?(h.setAttribute("data-z-index",e),e*=1,this[t]===e&&(f=!1)):Ut(this[t])&&h.removeAttribute("data-z-index"),this[t]=e,f){for((e=this.zIndex)&&l&&(l.handleZ=!0),a=(n=c.childNodes).length-1;a>=0&&!d;a--)r=!Ut(s=(i=n[a]).getAttribute("data-z-index")),i!==h&&(e<0&&r&&!u&&!a?(c.insertBefore(h,n[a]),d=!0):(sn(s)<=e||r&&(!Ut(e)||e>=0))&&(c.insertBefore(h,n[a+1]),d=!0));d||(c.insertBefore(h,n[3*!!u]),d=!0)}return d}}cn.symbolCustomAttribs=["anchorX","anchorY","clockwise","end","height","innerR","r","start","width","x","y"],cn.prototype.strokeSetter=cn.prototype.fillSetter,cn.prototype.yGetter=cn.prototype.xGetter,cn.prototype.matrixSetter=cn.prototype.rotationOriginXSetter=cn.prototype.rotationOriginYSetter=cn.prototype.rotationSetter=cn.prototype.scaleXSetter=cn.prototype.scaleYSetter=cn.prototype.translateXSetter=cn.prototype.translateYSetter=cn.prototype.verticalAlignSetter=function(e,t){this[t]=e,this.doTransform=!0};let hn=cn,{defined:un,extend:dn,getAlignFactor:fn,isNumber:pn,merge:mn,pick:gn,removeEvent:bn}=K;class vn extends hn{constructor(e,t,n,i,s,r,a,o,l,c){let h;super(e,"g"),this.paddingLeftSetter=this.paddingSetter,this.paddingRightSetter=this.paddingSetter,this.doUpdate=!1,this.textStr=t,this.x=n,this.y=i,this.anchorX=r,this.anchorY=a,this.baseline=l,this.className=c,this.addClass("button"===c?"highcharts-no-tooltip":"highcharts-label"),c&&this.addClass("highcharts-"+c),this.text=e.text(void 0,0,0,o).attr({zIndex:1}),"string"==typeof s&&((h=/^url\((.*?)\)$/.test(s))||this.renderer.symbols[s])&&(this.symbolKey=s),this.bBox=vn.emptyBBox,this.padding=3,this.baselineOffset=0,this.needsBox=e.styledMode||h,this.deferredAttr={},this.alignFactor=0}alignSetter(e){let t=fn(e);this.textAlign=e,t!==this.alignFactor&&(this.alignFactor=t,this.bBox&&pn(this.xSetting)&&this.attr({x:this.xSetting}))}anchorXSetter(e,t){this.anchorX=e,this.boxAttr(t,Math.round(e)-this.getCrispAdjust()-this.xSetting)}anchorYSetter(e,t){this.anchorY=e,this.boxAttr(t,e-this.ySetting)}boxAttr(e,t){this.box?this.box.attr(e,t):this.deferredAttr[e]=t}css(e){if(e){let t={};e=mn(e),vn.textProps.forEach((n=>{void 0!==e[n]&&(t[n]=e[n],delete e[n])})),this.text.css(t),"fontSize"in t||"fontWeight"in t?this.updateTextPadding():("width"in t||"textOverflow"in t)&&this.updateBoxSize()}return hn.prototype.css.call(this,e)}destroy(){bn(this.element,"mouseenter"),bn(this.element,"mouseleave"),this.text&&this.text.destroy(),this.box&&(this.box=this.box.destroy()),hn.prototype.destroy.call(this)}fillSetter(e,t){e&&(this.needsBox=!0),this.fill=e,this.boxAttr(t,e)}getBBox(e,t){this.textStr&&0===this.bBox.width&&0===this.bBox.height&&this.updateBoxSize();let{padding:n,height:i=0,translateX:s=0,translateY:r=0,width:a=0}=this,o=gn(this.paddingLeft,n),l=null!==t&&void 0!==t?t:this.rotation||0,c={width:a,height:i,x:s+this.bBox.x-o,y:r+this.bBox.y-n+this.baselineOffset};return l&&(c=this.getRotatedBox(c,l)),c}getCrispAdjust(){return(this.renderer.styledMode&&this.box?this.box.strokeWidth():this["stroke-width"]?parseInt(this["stroke-width"],10):0)%2/2}heightSetter(e){this.heightSetting=e,this.doUpdate=!0}afterSetters(){super.afterSetters(),this.doUpdate&&(this.updateBoxSize(),this.doUpdate=!1)}onAdd(){this.text.add(this),this.attr({text:gn(this.textStr,""),x:this.x||0,y:this.y||0}),this.box&&un(this.anchorX)&&this.attr({anchorX:this.anchorX,anchorY:this.anchorY})}paddingSetter(e,t){pn(e)?e!==this[t]&&(this[t]=e,this.updateTextPadding()):this[t]=void 0}rSetter(e,t){this.boxAttr(t,e)}strokeSetter(e,t){this.stroke=e,this.boxAttr(t,e)}"stroke-widthSetter"(e,t){e&&(this.needsBox=!0),this["stroke-width"]=e,this.boxAttr(t,e)}"text-alignSetter"(e){this.textAlign=this["text-align"]=e,this.updateTextPadding()}textSetter(e){void 0!==e&&this.text.attr({text:e}),this.updateTextPadding(),this.reAlign()}updateBoxSize(){let e,t=this.text,n={},i=this.padding,s=this.bBox=pn(this.widthSetting)&&pn(this.heightSetting)&&!this.textAlign||!un(t.textStr)?vn.emptyBBox:t.getBBox(void 0,0);this.width=this.getPaddedWidth(),this.height=(this.heightSetting||s.height||0)+2*i;let r=this.renderer.fontMetrics(t);if(this.baselineOffset=i+Math.min((this.text.firstLineMetrics||r).b,s.height||1/0),this.heightSetting&&(this.baselineOffset+=(this.heightSetting-r.h)/2),this.needsBox&&!t.textPath){if(!this.box){let e=this.box=this.symbolKey?this.renderer.symbol(this.symbolKey):this.renderer.rect();e.addClass(("button"===this.className?"":"highcharts-label-box")+(this.className?" highcharts-"+this.className+"-box":"")),e.add(this)}n.x=e=this.getCrispAdjust(),n.y=(this.baseline?-this.baselineOffset:0)+e,n.width=Math.round(this.width),n.height=Math.round(this.height),this.box.attr(dn(n,this.deferredAttr)),this.deferredAttr={}}}updateTextPadding(){let e=this.text,t=e.styles.textAlign||this.textAlign;if(!e.textPath){var n,i;this.updateBoxSize();let s=this.baseline?0:this.baselineOffset,r=(null!==(n=this.paddingLeft)&&void 0!==n?n:this.padding)+fn(t)*(null!==(i=this.widthSetting)&&void 0!==i?i:this.bBox.width);(r!==e.x||s!==e.y)&&(e.attr({align:t,x:r}),void 0!==s&&e.attr("y",s)),e.x=r,e.y=s}}widthSetter(e){this.widthSetting=pn(e)?e:void 0,this.doUpdate=!0}getPaddedWidth(){let e=this.padding,t=gn(this.paddingLeft,e),n=gn(this.paddingRight,e);return(this.widthSetting||this.bBox.width||0)+t+n}xSetter(e){this.x=e,this.alignFactor&&(e-=this.alignFactor*this.getPaddedWidth(),this["forceAnimate:x"]=!0),this.anchorX&&(this["forceAnimate:anchorX"]=!0),this.xSetting=Math.round(e),this.attr("translateX",this.xSetting)}ySetter(e){this.anchorY&&(this["forceAnimate:anchorY"]=!0),this.ySetting=this.y=Math.round(e),this.attr("translateY",this.ySetting)}}vn.emptyBBox={width:0,height:0,x:0,y:0},vn.textProps=["color","direction","fontFamily","fontSize","fontStyle","fontWeight","lineClamp","lineHeight","textAlign","textDecoration","textOutline","textOverflow","whiteSpace","width"];let{defined:yn,isNumber:xn,pick:Sn}=K;function wn(e,t,n,i,s){let r=[];if(s){let a=s.start||0,o=s.end||0,l=Sn(s.r,n),c=Sn(s.r,i||n),h=2e-4/(s.borderRadius?1:Math.max(l,1)),u=Math.abs(o-a-2*Math.PI)<h;u&&(a=Math.PI/2,o=2.5*Math.PI-h);let d=s.innerR,f=Sn(s.open,u),p=Math.cos(a),m=Math.sin(a),g=Math.cos(o),b=Math.sin(o),v=Sn(s.longArc,o-a-Math.PI<h?0:1),y=["A",l,c,0,v,Sn(s.clockwise,1),e+l*g,t+c*b];y.params={start:a,end:o,cx:e,cy:t},r.push(["M",e+l*p,t+c*m],y),yn(d)&&((y=["A",d,d,0,v,yn(s.clockwise)?1-s.clockwise:0,e+d*p,t+d*m]).params={start:o,end:a,cx:e,cy:t},r.push(f?["M",e+d*g,t+d*b]:["L",e+d*g,t+d*b],y)),f||r.push(["Z"])}return r}function En(e,t,n,i,s){return null!==s&&void 0!==s&&s.r?_n(e,t,n,i,s):[["M",e,t],["L",e+n,t],["L",e+n,t+i],["L",e,t+i],["Z"]]}function _n(e,t,n,i,s){let r=(null===s||void 0===s?void 0:s.r)||0;return[["M",e+r,t],["L",e+n-r,t],["A",r,r,0,0,1,e+n,t+r],["L",e+n,t+i-r],["A",r,r,0,0,1,e+n-r,t+i],["L",e+r,t+i],["A",r,r,0,0,1,e,t+i-r],["L",e,t+r],["A",r,r,0,0,1,e+r,t],["Z"]]}let Tn={arc:wn,callout:function(e,t,n,i,s){let r=Math.min((null===s||void 0===s?void 0:s.r)||0,n,i),a=r+6,o=null===s||void 0===s?void 0:s.anchorX,l=(null===s||void 0===s?void 0:s.anchorY)||0,c=_n(e,t,n,i,{r:r});if(!xn(o)||o<n&&o>0&&l<i&&l>0)return c;if(e+o>n-a)if(l>t+a&&l<t+i-a)c.splice(3,1,["L",e+n,l-6],["L",e+n+6,l],["L",e+n,l+6],["L",e+n,t+i-r]);else if(o<n){let s=l<t+a,h=s?t:t+i;c.splice(s?2:5,0,["L",o,l],["L",e+n-r,h])}else c.splice(3,1,["L",e+n,i/2],["L",o,l],["L",e+n,i/2],["L",e+n,t+i-r]);else if(e+o<a)if(l>t+a&&l<t+i-a)c.splice(7,1,["L",e,l+6],["L",e-6,l],["L",e,l-6],["L",e,t+r]);else if(o>0){let n=l<t+a,s=n?t:t+i;c.splice(n?1:6,0,["L",o,l],["L",e+r,s])}else c.splice(7,1,["L",e,i/2],["L",o,l],["L",e,i/2],["L",e,t+r]);else l>i&&o<n-a?c.splice(5,1,["L",o+6,t+i],["L",o,t+i+6],["L",o-6,t+i],["L",e+r,t+i]):l<0&&o>a&&c.splice(1,1,["L",o-6,t],["L",o,t-6],["L",o+6,t],["L",n-r,t]);return c},circle:function(e,t,n,i){return wn(e+n/2,t+i/2,n/2,i/2,{start:.5*Math.PI,end:2.5*Math.PI,open:!1})},diamond:function(e,t,n,i){return[["M",e+n/2,t],["L",e+n,t+i/2],["L",e+n/2,t+i],["L",e,t+i/2],["Z"]]},rect:En,roundedRect:_n,square:En,triangle:function(e,t,n,i){return[["M",e+n/2,t],["L",e+n,t+i],["L",e,t+i],["Z"]]},"triangle-down":function(e,t,n,i){return[["M",e,t],["L",e+n,t],["L",e+n/2,t+i],["Z"]]}},{doc:Mn,SVG_NS:Cn,win:An}=_,{attr:Pn,extend:Nn,fireEvent:kn,isString:Ln,objectEach:In,pick:Rn}=K,On=(e,t)=>e.substring(0,t)+"\u2026",Dn=class{constructor(e){let t=e.styles;this.renderer=e.renderer,this.svgElement=e,this.width=e.textWidth,this.textLineHeight=null===t||void 0===t?void 0:t.lineHeight,this.textOutline=null===t||void 0===t?void 0:t.textOutline,this.ellipsis="ellipsis"===(null===t||void 0===t?void 0:t.textOverflow),this.lineClamp=null===t||void 0===t?void 0:t.lineClamp,this.noWrap="nowrap"===(null===t||void 0===t?void 0:t.whiteSpace)}buildSVG(){let e=this.svgElement,t=e.element,n=e.renderer,i=Rn(e.textStr,"").toString(),s=-1!==i.indexOf("<"),r=t.childNodes,a=!e.added&&n.box,o=[i,this.ellipsis,this.noWrap,this.textLineHeight,this.textOutline,e.getStyle("font-size"),e.styles.lineClamp,this.width].join(",");if(o!==e.textCache){e.textCache=o,delete e.actualWidth;for(let e=r.length;e--;)t.removeChild(r[e]);if(s||this.ellipsis||this.width||e.textPath||-1!==i.indexOf(" ")&&(!this.noWrap||/<br.*?>/g.test(i))){if(""!==i){a&&a.appendChild(t);let n=new at(i);this.modifyTree(n.nodes),n.addToDOM(t),this.modifyDOM(),this.ellipsis&&-1!==(t.textContent||"").indexOf("\u2026")&&e.attr("title",this.unescapeEntities(e.textStr||"",["&lt;","&gt;"])),a&&a.removeChild(t)}}else t.appendChild(Mn.createTextNode(this.unescapeEntities(i)));Ln(this.textOutline)&&e.applyTextOutline&&e.applyTextOutline(this.textOutline)}}modifyDOM(){let e,t=this.svgElement,n=Pn(t.element,"x");for(t.firstLineMetrics=void 0;(e=t.element.firstChild)&&/^[\s\u200B]*$/.test(e.textContent||" ");)t.element.removeChild(e);[].forEach.call(t.element.querySelectorAll("tspan.highcharts-br"),((e,i)=>{e.nextSibling&&e.previousSibling&&(0===i&&1===e.previousSibling.nodeType&&(t.firstLineMetrics=t.renderer.fontMetrics(e.previousSibling)),Pn(e,{dy:this.getLineHeight(e.nextSibling),x:n}))}));let i=this.width||0;if(!i)return;let s=(e,s)=>{let r=e.textContent||"",a=r.replace(/([^\^])-/g,"$1- ").split(" "),o=!this.noWrap&&(a.length>1||t.element.childNodes.length>1),l=this.getLineHeight(s),c=Math.max(0,i-.8*l),h=0,u=t.actualWidth;if(o){let r=[],o=[];for(;s.firstChild&&s.firstChild!==e;)o.push(s.firstChild),s.removeChild(s.firstChild);for(;a.length;)if(a.length&&!this.noWrap&&h>0&&(r.push(e.textContent||""),e.textContent=a.join(" ").replace(/- /g,"-")),this.truncate(e,void 0,a,0===h&&u||0,i,c,((e,t)=>a.slice(0,t).join(" ").replace(/- /g,"-"))),u=t.actualWidth,h++,this.lineClamp&&h>=this.lineClamp){var d;a.length&&(this.truncate(e,e.textContent||"",void 0,0,i,c,On),e.textContent=(null===(d=e.textContent)||void 0===d?void 0:d.replace("\u2026",""))+"\u2026");break}o.forEach((t=>{s.insertBefore(t,e)})),r.forEach((t=>{s.insertBefore(Mn.createTextNode(t),e);let i=Mn.createElementNS(Cn,"tspan");i.textContent="\u200b",Pn(i,{dy:l,x:n}),s.insertBefore(i,e)}))}else this.ellipsis&&r&&this.truncate(e,r,void 0,0,i,c,On)},r=e=>{[].slice.call(e.childNodes).forEach((n=>{n.nodeType===An.Node.TEXT_NODE?s(n,e):(-1!==n.className.baseVal.indexOf("highcharts-br")&&(t.actualWidth=0),r(n))}))};r(t.element)}getLineHeight(e){let t=e.nodeType===An.Node.TEXT_NODE?e.parentElement:e;return this.textLineHeight?parseInt(this.textLineHeight.toString(),10):this.renderer.fontMetrics(t||this.svgElement.element).h}modifyTree(e){let t=(n,i)=>{let{attributes:s={},children:r,style:a={},tagName:o}=n,l=this.renderer.styledMode;if("b"===o||"strong"===o?l?s.class="highcharts-strong":a.fontWeight="bold":("i"===o||"em"===o)&&(l?s.class="highcharts-emphasized":a.fontStyle="italic"),null!==a&&void 0!==a&&a.color&&(a.fill=a.color),"br"===o){s.class="highcharts-br",n.textContent="\u200b";let t=e[i+1];(null===t||void 0===t?void 0:t.textContent)&&(t.textContent=t.textContent.replace(/^ +/gm,""))}else"a"===o&&r&&r.some((e=>"#text"===e.tagName))&&(n.children=[{children:r,tagName:"tspan"}]);"#text"!==o&&"a"!==o&&(n.tagName="tspan"),Nn(n,{attributes:s,style:a}),r&&r.filter((e=>"#text"!==e.tagName)).forEach(t)};e.forEach(t),kn(this.svgElement,"afterModifyTree",{nodes:e})}truncate(e,t,n,i,s,r,a){let o,l,c=this.svgElement,{rotation:h}=c,u=[],d=n&&!i?1:0,f=(t||n||"").length,p=f;n||(s=r);let m=function(t,s){let r=s||t,a=e.parentNode;if(a&&void 0===u[r]&&a.getSubStringLength)try{u[r]=i+a.getSubStringLength(0,n?r+1:r)}catch(o){}return u[r]};if(c.rotation=0,i+(l=m(e.textContent.length))>s){for(;d<=f;)p=Math.ceil((d+f)/2),n&&(o=a(n,p)),l=m(p,o&&o.length-1),d===f?d=f+1:l>s?f=p-1:d=p;0===f?e.textContent="":t&&f===t.length-1||(e.textContent=o||a(t||n,p)),this.ellipsis&&l>s&&this.truncate(e,e.textContent||"",void 0,0,s,r,On)}n&&n.splice(0,p),c.actualWidth=l,c.rotation=h}unescapeEntities(e,t){return In(this.renderer.escapes,(function(n,i){t&&-1!==t.indexOf(n)||(e=e.toString().replace(RegExp(n,"g"),i))})),e}},{defaultOptions:Fn}=Se,{charts:Bn,deg2rad:jn,doc:Vn,isFirefox:Gn,isMS:Wn,isWebKit:zn,noop:Un,SVG_NS:Hn,symbolSizes:Xn,win:Yn}=_,{addEvent:qn,attr:Kn,createElement:$n,crisp:Zn,css:Qn,defined:Jn,destroyObjectProperties:ei,extend:ti,isArray:ni,isNumber:ii,isObject:si,isString:ri,merge:ai,pick:oi,pInt:li,replaceNested:ci,uniqueKey:hi}=K;class ui{constructor(e,t,n,i,s,r,a){let o,l;this.x=0,this.y=0;let c=this.createElement("svg").attr({version:"1.1",class:"highcharts-root"}),h=c.element;a||c.css(this.getStyle(i||{})),e.appendChild(h),Kn(e,"dir","ltr"),-1===e.innerHTML.indexOf("xmlns")&&Kn(h,"xmlns",this.SVG_NS),this.box=h,this.boxWrapper=c,this.alignedObjects=[],this.url=this.getReferenceURL(),this.createElement("desc").add().element.appendChild(Vn.createTextNode("Created with Highcharts 12.4.0")),this.defs=this.createElement("defs").add(),this.allowHTML=r,this.forExport=s,this.styledMode=a,this.gradients={},this.cache={},this.cacheKeys=[],this.imgCount=0,this.rootFontSize=c.getStyle("font-size"),this.setSize(t,n,!1),Gn&&e.getBoundingClientRect&&((o=function(){Qn(e,{left:0,top:0}),l=e.getBoundingClientRect(),Qn(e,{left:Math.ceil(l.left)-l.left+"px",top:Math.ceil(l.top)-l.top+"px"})})(),this.unSubPixelFix=qn(Yn,"resize",o))}definition(e){return new at([e]).addToDOM(this.defs.element)}getReferenceURL(){if((Gn||zn)&&Vn.getElementsByTagName("base").length){if(!Jn(n)){let e=hi(),t=new at([{tagName:"svg",attributes:{width:8,height:8},children:[{tagName:"defs",children:[{tagName:"clipPath",attributes:{id:e},children:[{tagName:"rect",attributes:{width:4,height:4}}]}]},{tagName:"rect",attributes:{id:"hitme",width:8,height:8,"clip-path":"url(#".concat(e,")"),fill:"rgba(0,0,0,0.001)"}}]}]).addToDOM(Vn.body);Qn(t,{position:"fixed",top:0,left:0,zIndex:9e5});let i=Vn.elementFromPoint(6,6);n="hitme"===(null===i||void 0===i?void 0:i.id),Vn.body.removeChild(t)}if(n)return ci(Yn.location.href.split("#")[0],[/<[^>]*>/g,""],[/([\('\)])/g,"\\$1"],[/ /g,"%20"])}return""}getStyle(e){return this.style=ti({fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif',fontSize:"1rem"},e),this.style}setStyle(e){this.boxWrapper.css(this.getStyle(e))}isHidden(){return!this.boxWrapper.getBBox().width}destroy(){let e=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),ei(this.gradients||{}),this.gradients=null,this.defs=e.destroy(),this.unSubPixelFix&&this.unSubPixelFix(),this.alignedObjects=null,null}createElement(e){return new this.Element(this,e)}getRadialAttr(e,t){return{cx:e[0]-e[2]/2+(t.cx||0)*e[2],cy:e[1]-e[2]/2+(t.cy||0)*e[2],r:(t.r||0)*e[2]}}shadowDefinition(e){let t=["highcharts-drop-shadow-".concat(this.chartIndex),...Object.keys(e).map((t=>"".concat(t,"-").concat(e[t])))].join("-").toLowerCase().replace(/[^a-z\d\-]/g,""),n=ai({color:"#000000",offsetX:1,offsetY:1,opacity:.15,width:5},e);return this.defs.element.querySelector("#".concat(t))||this.definition({tagName:"filter",attributes:{id:t,filterUnits:n.filterUnits},children:this.getShadowFilterContent(n)}),t}getShadowFilterContent(e){return[{tagName:"feDropShadow",attributes:{dx:e.offsetX,dy:e.offsetY,"flood-color":e.color,"flood-opacity":Math.min(5*e.opacity,1),stdDeviation:e.width/2}}]}buildText(e){new Dn(e).buildSVG()}getContrast(e){if("transparent"===e)return"#000000";let t=Ne.parse(e).rgba,n=" clamp(0,calc(9e9*(0.5 - (0.2126*r + 0.7152*g + 0.0722*b))),1)";if(ii(t[0])||!Ne.useColorMix){let e=t.map((e=>{let t=e/255;return t<=.04?t/12.92:Math.pow((t+.055)/1.055,2.4)})),n=.2126*e[0]+.7152*e[1]+.0722*e[2];return 1.05/(n+.05)>(n+.05)/.05?"#FFFFFF":"#000000"}return"color(from "+e+" srgb"+n+n+n+")"}button(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=arguments.length>8?arguments[8]:void 0,a=arguments.length>9?arguments[9]:void 0,o=this.label(e,t,n,r,void 0,void 0,a,void 0,"button"),l=this.styledMode,c=arguments,h=0;s=ai(Fn.global.buttonTheme,s),l&&(delete s.fill,delete s.stroke,delete s["stroke-width"]);let u=s.states||{},d=s.style||{};delete s.states,delete s.style;let f=[at.filterUserAttributes(s)],p=[d];return l||["hover","select","disabled"].forEach(((e,t)=>{f.push(ai(f[0],at.filterUserAttributes(c[t+5]||u[e]||{}))),p.push(f[t+1].style),delete f[t+1].style})),qn(o.element,Wn?"mouseover":"mouseenter",(function(){3!==h&&o.setState(1)})),qn(o.element,Wn?"mouseout":"mouseleave",(function(){3!==h&&o.setState(h)})),o.setState=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(1!==e&&(o.state=h=e),o.removeClass(/highcharts-button-(normal|hover|pressed|disabled)/).addClass("highcharts-button-"+["normal","hover","pressed","disabled"][e]),!l){o.attr(f[e]);let t=p[e];si(t)&&o.css(t)}},o.attr(f[0]),!l&&(o.css(ti({cursor:"default"},d)),a&&o.text.css({pointerEvents:"none"})),o.on("touchstart",(e=>e.stopPropagation())).on("click",(function(e){3!==h&&(null===i||void 0===i||i.call(o,e))}))}crispLine(e,t){let[n,i]=e;return Jn(n[1])&&n[1]===i[1]&&(n[1]=i[1]=Zn(n[1],t)),Jn(n[2])&&n[2]===i[2]&&(n[2]=i[2]=Zn(n[2],t)),e}path(e){let t=this.styledMode?{}:{fill:"none"};return ni(e)?t.d=e:si(e)&&ti(t,e),this.createElement("path").attr(t)}circle(e,t,n){let i=si(e)?e:void 0===e?{}:{x:e,y:t,r:n},s=this.createElement("circle");return s.xSetter=s.ySetter=function(e,t,n){n.setAttribute("c"+t,e)},s.attr(i)}arc(e,t,n,i,s,r){let a;si(e)?(t=(a=e).y,n=a.r,i=a.innerR,s=a.start,r=a.end,e=a.x):a={innerR:i,start:s,end:r};let o=this.symbol("arc",e,t,n,n,a);return o.r=n,o}rect(e,t,n,i,s,r){let a=si(e)?e:void 0===e?{}:{x:e,y:t,r:s,width:Math.max(n||0,0),height:Math.max(i||0,0)},o=this.createElement("rect");return this.styledMode||(void 0!==r&&(a["stroke-width"]=r,ti(a,o.crisp(a))),a.fill="none"),o.rSetter=function(e,t,n){o.r=e,Kn(n,{rx:e,ry:e})},o.rGetter=function(){return o.r||0},o.attr(a)}roundedRect(e){return this.symbol("roundedRect").attr(e)}setSize(e,t,n){this.width=e,this.height=t,this.boxWrapper.animate({width:e,height:t},{step:function(){this.attr({viewBox:"0 0 "+this.attr("width")+" "+this.attr("height")})},duration:oi(n,!0)?void 0:0}),this.alignElements()}g(e){let t=this.createElement("g");return e?t.attr({class:"highcharts-"+e}):t}image(e,t,n,i,s,r){let a={preserveAspectRatio:"none"};ii(t)&&(a.x=t),ii(n)&&(a.y=n),ii(i)&&(a.width=i),ii(s)&&(a.height=s);let o=this.createElement("image").attr(a),l=function(t){o.attr({href:e}),r.call(o,t)};if(r){o.attr({href:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});let t=new Yn.Image;qn(t,"load",l),t.src=e,t.complete&&l({})}else o.attr({href:e});return o}symbol(e,t,n,i,s,r){let a,o,l,c,h=this,u=/^url\((.*?)\)$/,d=u.test(e),f=!d&&(this.symbols[e]?e:"circle"),p=f&&this.symbols[f];if(p)"number"==typeof t&&(o=p.call(this.symbols,t||0,n||0,i||0,s||0,r)),a=this.path(o),h.styledMode||a.attr("fill","none"),ti(a,{symbolName:f||void 0,x:t,y:n,width:i,height:s}),r&&ti(a,r);else if(d){var m,g;l=e.match(u)[1];let i=a=this.image(l);i.imgwidth=oi(null===r||void 0===r?void 0:r.width,null===(m=Xn[l])||void 0===m?void 0:m.width),i.imgheight=oi(null===r||void 0===r?void 0:r.height,null===(g=Xn[l])||void 0===g?void 0:g.height),c=e=>e.attr({width:e.width,height:e.height}),["width","height"].forEach((e=>{i["".concat(e,"Setter")]=function(e,t){this[t]=e;let{alignByTranslate:n,element:i,width:s,height:a,imgwidth:o,imgheight:l}=this,c="width"===t?o:l,h=1;r&&"within"===r.backgroundSize&&s&&a&&o&&l?(h=Math.min(s/o,a/l),Kn(i,{width:Math.round(o*h),height:Math.round(l*h)})):i&&c&&i.setAttribute(t,c),!n&&o&&l&&this.translate(((s||0)-o*h)/2,((a||0)-l*h)/2)}})),Jn(t)&&i.attr({x:t,y:n}),i.isImg=!0,i.symbolUrl=e,Jn(i.imgwidth)&&Jn(i.imgheight)?c(i):(i.attr({width:0,height:0}),$n("img",{onload:function(){let e=Bn[h.chartIndex];0===this.width&&(Qn(this,{position:"absolute",top:"-999em"}),Vn.body.appendChild(this)),Xn[l]={width:this.width,height:this.height},i.imgwidth=this.width,i.imgheight=this.height,i.element&&c(i),this.parentNode&&this.parentNode.removeChild(this),h.imgCount--,h.imgCount||!e||e.hasLoaded||e.onload()},src:l}),this.imgCount++)}return a}clipRect(e,t,n,i){return this.rect(e,t,n,i,0)}text(e,t,n,i){let s={};if(i&&(this.allowHTML||!this.forExport))return this.html(e,t,n);s.x=Math.round(t||0),n&&(s.y=Math.round(n)),Jn(e)&&(s.text=e);let r=this.createElement("text").attr(s);return i&&(!this.forExport||this.allowHTML)||(r.xSetter=function(e,t,n){let i=n.getElementsByTagName("tspan"),s=n.getAttribute(t);for(let r,a=0;a<i.length;a++)(r=i[a]).getAttribute(t)===s&&r.setAttribute(t,e);n.setAttribute(t,e)}),r}fontMetrics(e){let t=ii(e)?e:li(hn.prototype.getStyle.call(e,"font-size")||0),n=t<24?t+3:Math.round(1.2*t);return{h:n,b:Math.round(.8*n),f:t}}rotCorr(e,t,n){let i=e;return t&&n&&(i=Math.max(i*Math.cos(t*jn),4)),{x:-e/3*Math.sin(t*jn),y:i}}pathToSegments(e){let t=[],n=[],i={A:8,C:7,H:2,L:3,M:3,Q:5,S:5,T:3,V:2};for(let s=0;s<e.length;s++)ri(n[0])&&ii(e[s])&&n.length===i[n[0].toUpperCase()]&&e.splice(s,0,n[0].replace("M","L").replace("m","l")),"string"==typeof e[s]&&(n.length&&t.push(n.slice(0)),n.length=0),n.push(e[s]);return t.push(n.slice(0)),t}label(e,t,n,i,s,r,a,o,l){return new vn(this,e,t,n,i,s,r,a,o,l)}alignElements(){this.alignedObjects.forEach((e=>e.align()))}}ti(ui.prototype,{Element:hn,SVG_NS:Hn,escapes:{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},symbols:Tn,draw:Un}),_t.registerRendererType("svg",ui,!0);let{composed:di,isFirefox:fi}=_,{attr:pi,css:mi,createElement:gi,defined:bi,extend:vi,getAlignFactor:yi,isNumber:xi,pInt:Si,pushUnique:wi}=K;function Ei(e,t,n){var i;let s=null===(i=this.div)||void 0===i?void 0:i.style;hn.prototype["".concat(t,"Setter")].call(this,e,t,n),s&&(n.style[t]=s[t]=e)}let _i=(e,t)=>{if(!e.div){var n;let i=pi(e.element,"class"),s=e.css,a=gi("div",i?{className:i}:void 0,r(r({position:"absolute",left:"".concat(e.translateX||0,"px"),top:"".concat(e.translateY||0,"px")},e.styles),{},{display:e.display,opacity:e.opacity,visibility:e.visibility}),(null===(n=e.parentGroup)||void 0===n?void 0:n.div)||t);e.classSetter=(e,t,n)=>{n.setAttribute("class",e),a.className=e},e.translateXSetter=e.translateYSetter=(t,n)=>{e[n]=t,a.style["translateX"===n?"left":"top"]="".concat(t,"px"),e.doTransform=!0},e.scaleXSetter=e.scaleYSetter=(t,n)=>{e[n]=t,e.doTransform=!0},e.opacitySetter=e.visibilitySetter=Ei,e.css=t=>(s.call(e,t),t.cursor&&(a.style.cursor=t.cursor),t.pointerEvents&&(a.style.pointerEvents=t.pointerEvents),e),e.on=function(){return hn.prototype.on.apply({element:a,onEvents:e.onEvents},arguments),e},e.div=a}return e.div};class Ti extends hn{static compose(e){wi(di,this.compose)&&(e.prototype.html=function(e,t,n){return new Ti(this,"span").attr({text:e,x:Math.round(t),y:Math.round(n)})})}constructor(e,t){super(e,t),Ti.useForeignObject?this.foreignObject=e.createElement("foreignObject").attr({zIndex:2}):this.css(r({position:"absolute"},e.styledMode?{}:{fontFamily:e.style.fontFamily,fontSize:e.style.fontSize})),this.element.style.whiteSpace="nowrap"}getSpanCorrection(e,t,n){this.xCorr=-e*n,this.yCorr=-t}css(e){let t,{element:n}=this,i="SPAN"===n.tagName&&e&&"width"in e,s=i&&e.width;return i&&(delete e.width,this.textWidth=Si(s)||void 0,t=!0),"ellipsis"===(null===e||void 0===e?void 0:e.textOverflow)&&(e.overflow="hidden",e.whiteSpace="nowrap"),null!==e&&void 0!==e&&e.lineClamp&&(e.display="-webkit-box",e.WebkitLineClamp=e.lineClamp,e.WebkitBoxOrient="vertical",e.overflow="hidden"),xi(Number(null===e||void 0===e?void 0:e.fontSize))&&(e.fontSize+="px"),vi(this.styles,e),mi(n,e),t&&this.updateTransform(),this}htmlGetBBox(){let{element:e}=this;return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}updateTransform(){if(!this.added)return void(this.alignOnAdd=!0);let{element:e,foreignObject:t,oldTextWidth:n,renderer:i,rotation:s,rotationOriginX:r,rotationOriginY:a,scaleX:o,scaleY:l,styles:{display:c="inline-block",whiteSpace:h},textAlign:u="left",textWidth:d,translateX:f=0,translateY:p=0,x:m=0,y:g=0}=this;if(t||mi(e,{marginLeft:"".concat(f,"px"),marginTop:"".concat(p,"px")}),"SPAN"===e.tagName){var b;let f,p=[s,u,e.innerHTML,d,this.textAlign].join(","),v=-1*(null===(b=this.parentGroup)||void 0===b?void 0:b.padding)||0;if(d!==n){let t=this.textPxLength?this.textPxLength:(mi(e,{width:"",whiteSpace:h||"nowrap"}),e.offsetWidth),r=d||0,a=!i.styledMode&&""===e.style.textOverflow&&e.style.webkitLineClamp;(r>n||t>r||a)&&(/[\-\s\u00AD]/.test(e.textContent||e.innerText)||"ellipsis"===e.style.textOverflow)&&(mi(e,{width:(s||o||t>r||a)&&xi(d)?d+"px":"auto",display:c,whiteSpace:h||"normal"}),this.oldTextWidth=d)}t&&(mi(e,{display:"inline-block",verticalAlign:"top"}),t.attr({width:i.width,height:i.height})),p!==this.cTT&&(f=i.fontMetrics(e).b,bi(s)&&!t&&(s!==(this.oldRotation||0)||u!==this.oldAlign)&&mi(e,{transform:"rotate(".concat(s,"deg)"),transformOrigin:"".concat(v,"% ").concat(v,"px")}),this.getSpanCorrection(!bi(s)&&!this.textWidth&&this.textPxLength||e.offsetWidth,f,yi(u)));let{xCorr:y=0,yCorr:x=0}=this,S={left:"".concat(m+y,"px"),top:"".concat(g+x,"px"),textAlign:u,transformOrigin:"".concat((null!==r&&void 0!==r?r:m)-y-m-v,"px ").concat((null!==a&&void 0!==a?a:g)-x-g-v,"px")};(o||l)&&(S.transform="scale(".concat(null!==o&&void 0!==o?o:1,",").concat(null!==l&&void 0!==l?l:1,")")),t?(super.updateTransform(),xi(m)&&xi(g)?(t.attr({x:m+y,y:g+x,width:e.offsetWidth+3,height:e.offsetHeight,"transform-origin":e.getAttribute("transform-origin")||"0 0"}),mi(e,{display:c,textAlign:u})):fi&&t.attr({width:0,height:0})):mi(e,S),this.cTT=p,this.oldRotation=s,this.oldAlign=u}}add(e){let{foreignObject:t,renderer:n}=this,i=n.box.parentNode,s=[];if(t)t.add(e),super.add(n.createElement("body").attr({xmlns:"http://www.w3.org/1999/xhtml"}).css({background:"transparent",margin:"0 3px 0 0"}).add(t));else{let t;if(this.parentGroup=e,e&&!(t=e.div)){let n=e;for(;n;)s.push(n),n=n.parentGroup;for(let e of s.reverse())t=_i(e,i)}(t||i).appendChild(this.element)}return this.added=!0,this.alignOnAdd&&this.updateTransform(),this}textSetter(e){e!==this.textStr&&(delete this.bBox,delete this.oldTextWidth,at.setElementHTML(this.element,null!==e&&void 0!==e?e:""),this.textStr=e,this.doTransform=!0)}alignSetter(e){this.alignValue=this.textAlign=e,this.doTransform=!0}xSetter(e,t){this[t]=e,this.doTransform=!0}}let Mi=Ti.prototype;Mi.visibilitySetter=Mi.opacitySetter=Ei,Mi.ySetter=Mi.rotationSetter=Mi.rotationOriginXSetter=Mi.rotationOriginYSetter=Mi.xSetter,function(e){e.xAxis={alignTicks:!0,allowDecimals:void 0,panningEnabled:!0,zIndex:2,zoomEnabled:!0,dateTimeLabelFormats:{millisecond:{main:"%[HMSL]",range:!1},second:{main:"%[HMS]",range:!1},minute:{main:"%[HM]",range:!1},hour:{main:"%[HM]",range:!1},day:{main:"%[eb]"},week:{main:"%[eb]"},month:{main:"%[bY]"},year:{main:"%Y"}},endOnTick:!1,gridLineDashStyle:"Solid",gridZIndex:1,labels:{autoRotationLimit:80,distance:15,enabled:!0,indentation:10,overflow:"justify",reserveSpace:void 0,rotation:void 0,staggerLines:0,step:0,useHTML:!1,zIndex:7,style:{color:"#333333",cursor:"default",fontSize:"0.8em",textOverflow:"ellipsis"}},maxPadding:.01,minorGridLineDashStyle:"Solid",minorTickLength:2,minorTickPosition:"outside",minorTicksPerMajor:5,minPadding:.01,offset:void 0,reversed:void 0,reversedStacks:!1,showEmpty:!0,showFirstLabel:!0,showLastLabel:!0,startOfWeek:1,startOnTick:!1,tickLength:10,tickPixelInterval:100,tickmarkPlacement:"between",tickPosition:"outside",title:{align:"middle",useHTML:!1,x:0,y:0,style:{color:"#666666",fontSize:"0.8em"}},visible:!0,minorGridLineColor:"#f2f2f2",minorGridLineWidth:1,minorTickColor:"#999999",lineColor:"#333333",lineWidth:1,gridLineColor:"#e6e6e6",gridLineWidth:void 0,tickColor:"#333333"},e.yAxis={reversedStacks:!0,endOnTick:!0,maxPadding:.05,minPadding:.05,tickPixelInterval:72,showLastLabel:!0,labels:{x:void 0},startOnTick:!0,title:{},stackLabels:{animation:{},allowOverlap:!1,enabled:!1,crop:!0,overflow:"justify",formatter:function(){let{numberFormatter:e}=this.axis.chart;return e(this.total||0,-1)},style:{color:"#000000",fontSize:"0.7em",fontWeight:"bold",textOutline:"1px contrast"}},gridLineWidth:1,lineWidth:0}}(o||(o={}));let Ci=o,{addEvent:Ai,isFunction:Pi,objectEach:Ni,removeEvent:ki}=K;(l||(l={})).registerEventOptions=function(e,t){e.eventOptions=e.eventOptions||{},Ni(t.events,(function(t,n){e.eventOptions[n]!==t&&(e.eventOptions[n]&&(ki(e,n,e.eventOptions[n]),delete e.eventOptions[n]),Pi(t)&&(e.eventOptions[n]=t,Ai(e,n,t,{order:0})))}))};let Li=l,{deg2rad:Ii}=_,{clamp:Ri,correctFloat:Oi,defined:Di,destroyObjectProperties:Fi,extend:Bi,fireEvent:ji,getAlignFactor:Vi,isNumber:Gi,merge:Wi,objectEach:zi,pick:Ui}=K,Hi=class{constructor(e,t,n,i,s){this.isNew=!0,this.isNewLabel=!0,this.axis=e,this.pos=t,this.type=n||"",this.parameters=s||{},this.tickmarkOffset=this.parameters.tickmarkOffset,this.options=this.parameters.options,ji(this,"init"),n||i||this.addLabel()}addLabel(){var e,t,n;let i,s,r,a=this,o=a.axis,l=o.options,c=o.chart,h=o.categories,u=o.logarithmic,d=o.names,f=a.pos,p=Ui(null===(e=a.options)||void 0===e?void 0:e.labels,l.labels),m=o.tickPositions,g=f===m[0],b=f===m[m.length-1],v=(!p.step||1===p.step)&&1===o.tickInterval,y=m.info,x=a.label,S=this.parameters.category||(h?Ui(h[f],d[f],f):f);u&&Gi(S)&&(S=Oi(u.lin2log(S))),o.dateTime&&(y?i=(s=c.time.resolveDTLFormat(l.dateTimeLabelFormats[!(null!==(t=l.grid)&&void 0!==t&&t.enabled)&&y.higherRanks[f]||y.unitName])).main:Gi(S)&&(i=o.dateTime.getXDateFormat(S,l.dateTimeLabelFormats||{}))),a.isFirst=g,a.isLast=b;let w={axis:o,chart:c,dateTimeLabelFormat:i,isFirst:g,isLast:b,pos:f,tick:a,tickPositionInfo:y,value:S};ji(this,"labelFormat",w);let E=e=>p.formatter?p.formatter.call(e,e):p.format?(e.text=o.defaultLabelFormatter.call(e),Et.format(p.format,e,c)):o.defaultLabelFormatter.call(e),_=E.call(w,w),T=null===(n=s)||void 0===n?void 0:n.list;a.shortenLabel=T?function(){for(r=0;r<T.length;r++)if(Bi(w,{dateTimeLabelFormat:T[r]}),x.attr({text:E.call(w,w)}),x.getBBox().width<o.getSlotWidth(a)-2*(p.padding||0))return;x.attr({text:""})}:void 0,v&&o._addedPlotLB&&a.moveLabel(_,p),Di(x)||a.movedLabel?x&&x.textStr!==_&&!v&&(!x.textWidth||p.style.width||x.styles.width||x.css({width:null}),x.attr({text:_}),x.textPxLength=x.getBBox().width):(a.label=x=a.createLabel(_,p),a.rotation=0)}createLabel(e,t,n){let i=this.axis,{renderer:s,styledMode:r}=i.chart,a=t.style.whiteSpace,o=Di(e)&&t.enabled?s.text(e,null===n||void 0===n?void 0:n.x,null===n||void 0===n?void 0:n.y,t.useHTML).add(i.labelGroup):void 0;return o&&(r||o.css(Wi(t.style)),o.textPxLength=o.getBBox().width,!r&&a&&o.css({whiteSpace:a})),o}destroy(){Fi(this,this.axis)}getPosition(e,t,n,i){let s=this.axis,r=s.chart,a=i&&r.oldChartHeight||r.chartHeight,o={x:e?Oi(s.translate(t+n,void 0,void 0,i)+s.transB):s.left+s.offset+(s.opposite?(i&&r.oldChartWidth||r.chartWidth)-s.right-s.left:0),y:e?a-s.bottom+s.offset-(s.opposite?s.height:0):Oi(a-s.translate(t+n,void 0,void 0,i)-s.transB)};return o.y=Ri(o.y,-1e9,1e9),ji(this,"afterGetPosition",{pos:o}),o}getLabelPosition(e,t,n,i,s,r,a,o){let l,c,h=this.axis,u=h.transA,d=h.isLinked&&h.linkedParent?h.linkedParent.reversed:h.reversed,f=h.staggerLines,p=h.tickRotCorr||{x:0,y:0},m=i||h.reserveSpaceDefault?0:-h.labelOffset*("center"===h.labelAlign?.5:1),g=s.distance,b={};return l=0===h.side?n.rotation?-g:-n.getBBox().height:2===h.side?p.y+g:Math.cos(n.rotation*Ii)*(p.y-n.getBBox(!1,0).height/2),Di(s.y)&&(l=0===h.side&&h.horiz?s.y+l:s.y),e=e+Ui(s.x,[0,1,0,-1][h.side]*g)+m+p.x-(r&&i?r*u*(d?-1:1):0),t=t+l-(r&&!i?r*u*(d?1:-1):0),f&&(c=a/(o||1)%f,h.opposite&&(c=f-c-1),t+=c*(h.labelOffset/f)),b.x=e,b.y=Math.round(t),ji(this,"afterGetLabelPosition",{pos:b,tickmarkOffset:r,index:a}),b}getLabelSize(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0}getMarkPath(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return(arguments.length>5?arguments[5]:void 0).crispLine([["M",e,t],["L",e+(s?0:-n),t+(s?n:0)]],i)}handleOverflow(e){var t;let n,i=this.axis,s=i.options.labels,r=e.x,a=i.chart.chartWidth,o=i.chart.spacing,l=Ui(i.labelLeft,Math.min(i.pos,o[3])),c=Ui(i.labelRight,Math.max(i.isRadial?0:i.pos+i.len,a-o[1])),h=this.label,u=this.rotation,d=Vi(i.labelAlign||h.attr("align")),f=h.getBBox().width,p=i.getSlotWidth(this),m=p,g=1;u||"justify"!==s.overflow?u<0&&r-d*f<l?n=Math.round(r/Math.cos(u*Ii)-l):u>0&&r+d*f>c&&(n=Math.round((a-r)/Math.cos(u*Ii))):(r-d*f<l?m=e.x+m*(1-d)-l:r+(1-d)*f>c&&(m=c-e.x+m*d,g=-1),(m=Math.min(p,m))<p&&"center"===i.labelAlign&&(e.x+=g*(p-m-d*(p-Math.min(f,m)))),(f>m||i.autoRotation&&(null===h||void 0===h||null===(t=h.styles)||void 0===t?void 0:t.width))&&(n=m)),n&&h&&(this.shortenLabel?this.shortenLabel():h.css(Bi({},{width:Math.floor(n)+"px",lineClamp:+!i.isRadial})))}moveLabel(e,t){let n,i=this,s=i.label,r=i.axis,a=!1;s&&s.textStr===e?(i.movedLabel=s,a=!0,delete i.label):zi(r.ticks,(function(t){a||t.isNew||t===i||!t.label||t.label.textStr!==e||(i.movedLabel=t.label,a=!0,t.labelPos=i.movedLabel.xy,delete t.label)})),!a&&(i.labelPos||s)&&(n=i.labelPos||s.xy,i.movedLabel=i.createLabel(e,t,n),i.movedLabel&&i.movedLabel.attr({opacity:0}))}render(e,t,n){var i;let s=this.axis,r=s.horiz,a=this.pos,o=Ui(this.tickmarkOffset,s.tickmarkOffset),l=this.getPosition(r,a,o,t),c=l.x,h=l.y,u=s.pos,d=u+s.len,f=r?c:h,p=Ui(n,null===(i=this.label)||void 0===i?void 0:i.newOpacity,1);!s.chart.polar&&(Oi(f)<u||f>d)&&(n=0),null!==n&&void 0!==n||(n=1),this.isActive=!0,this.renderGridLine(t,n),this.renderMark(l,n),this.renderLabel(l,t,p,e),this.isNew=!1,ji(this,"afterRender")}renderGridLine(e,t){let n,i=this.axis,s=i.options,r={},a=this.pos,o=this.type,l=Ui(this.tickmarkOffset,i.tickmarkOffset),c=i.chart.renderer,h=this.gridLine,u=s.gridLineWidth,d=s.gridLineColor,f=s.gridLineDashStyle;"minor"===this.type&&(u=s.minorGridLineWidth,d=s.minorGridLineColor,f=s.minorGridLineDashStyle),h||(i.chart.styledMode||(r.stroke=d,r["stroke-width"]=u||0,r.dashstyle=f),o||(r.zIndex=1),e&&(t=0),this.gridLine=h=c.path().attr(r).addClass("highcharts-"+(o?o+"-":"")+"grid-line").add(i.gridGroup)),h&&(n=i.getPlotLinePath({value:a+l,lineWidth:h.strokeWidth(),force:"pass",old:e,acrossPanes:!1}))&&h[e||this.isNew?"attr":"animate"]({d:n,opacity:t})}renderMark(e,t){let n=this.axis,i=n.options,s=n.chart.renderer,r=this.type,a=n.tickSize(r?r+"Tick":"tick"),o=e.x,l=e.y,c=Ui(i["minor"!==r?"tickWidth":"minorTickWidth"],!r&&n.isXAxis?1:0),h=i["minor"!==r?"tickColor":"minorTickColor"],u=this.mark,d=!u;a&&(n.opposite&&(a[0]=-a[0]),!u&&(this.mark=u=s.path().addClass("highcharts-"+(r?r+"-":"")+"tick").add(n.axisGroup),n.chart.styledMode||u.attr({stroke:h,"stroke-width":c})),u[d?"attr":"animate"]({d:this.getMarkPath(o,l,a[0],u.strokeWidth(),n.horiz,s),opacity:t}))}renderLabel(e,t,n,i){let s=this.axis,r=s.horiz,a=s.options,o=this.label,l=a.labels,c=l.step,h=Ui(this.tickmarkOffset,s.tickmarkOffset),u=e.x,d=e.y,f=!0;o&&Gi(u)&&(o.xy=e=this.getLabelPosition(u,d,o,r,l,h,i,c),this.isFirst&&!this.isLast&&!a.showFirstLabel||this.isLast&&!this.isFirst&&!a.showLastLabel?f=!1:!r||l.step||l.rotation||t||0===n||this.handleOverflow(e),c&&i%c&&(f=!1),f&&Gi(e.y)?(e.opacity=n,o[this.isNewLabel?"attr":"animate"](e).show(!0),this.isNewLabel=!1):(o.hide(),this.isNewLabel=!0))}replaceMovedLabel(){let e=this.label,t=this.axis;e&&!this.isNew&&(e.animate({opacity:0},void 0,e.destroy),delete this.label),t.isDirty=!0,this.label=this.movedLabel,delete this.movedLabel}},{animObject:Xi}=Xe,{xAxis:Yi,yAxis:qi}=Ci,{defaultOptions:Ki}=Se,{registerEventOptions:$i}=Li,{deg2rad:Zi}=_,{arrayMax:Qi,arrayMin:Ji,clamp:es,correctFloat:ts,defined:ns,destroyObjectProperties:is,erase:ss,error:rs,extend:as,fireEvent:os,getClosestDistance:ls,insertItem:cs,isArray:hs,isNumber:us,isString:ds,merge:fs,normalizeTickInterval:ps,objectEach:ms,pick:gs,relativeLength:bs,removeEvent:vs,splat:ys,syncTimeout:xs}=K,Ss=(e,t)=>ps(t,void 0,void 0,gs(e.options.allowDecimals,t<.5||void 0!==e.tickAmount),!!e.tickAmount);as(Ki,{xAxis:Yi,yAxis:fs(Yi,qi)});class ws{constructor(e,t,n){this.init(e,t,n)}init(e,t){var n,i,s,r;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.coll,o="xAxis"===a,l=this.isZAxis||(e.inverted?!o:o);this.chart=e,this.horiz=l,this.isXAxis=o,this.coll=a,os(this,"init",{userOptions:t}),this.opposite=gs(t.opposite,this.opposite),this.side=gs(t.side,this.side,l?2*!this.opposite:this.opposite?1:3),this.setOptions(t);let c=this.options,h=c.labels;null!==(n=this.type)&&void 0!==n||(this.type=c.type||"linear"),null!==(i=this.uniqueNames)&&void 0!==i||(this.uniqueNames=null===(s=c.uniqueNames)||void 0===s||s),os(this,"afterSetType"),this.userOptions=t,this.minPixelPadding=0,this.reversed=gs(c.reversed,this.reversed),this.visible=c.visible,this.zoomEnabled=c.zoomEnabled,this.hasNames="category"===this.type||!0===c.categories,this.categories=hs(c.categories)&&c.categories||(this.hasNames?[]:void 0),this.names||(this.names=[],this.names.keys={}),this.plotLinesAndBandsGroups={},this.positiveValuesOnly=!!this.logarithmic,this.isLinked=ns(c.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},null!==(r=this.len)&&void 0!==r||(this.len=0),this.minRange=this.userMinRange=c.minRange||c.maxZoom,this.range=c.range,this.offset=c.offset||0,this.max=void 0,this.min=void 0;let u=gs(c.crosshair,ys(e.options.tooltip.crosshairs)[+!o]);this.crosshair=!0===u?{}:u,-1===e.axes.indexOf(this)&&(o?e.axes.splice(e.xAxis.length,0,this):e.axes.push(this),cs(this,e[this.coll])),e.orderItems(this.coll),this.series=this.series||[],e.inverted&&!this.isZAxis&&o&&!ns(this.reversed)&&(this.reversed=!0),this.labelRotation=us(h.rotation)?h.rotation:void 0,$i(this,c),os(this,"afterInit")}setOptions(e){let t=this.horiz?{labels:{autoRotation:[-45],padding:3},margin:15}:{labels:{padding:1},title:{rotation:90*this.side}};this.options=fs(t,"yAxis"===this.coll?{title:{text:this.chart.options.lang.yAxisTitle}}:{},Ki[this.coll],e),os(this,"afterSetOptions",{userOptions:e})}defaultLabelFormatter(){let e,t,n=this.axis,{numberFormatter:i}=this.chart,s=us(this.value)?this.value:NaN,r=n.chart.time,a=n.categories,o=this.dateTimeLabelFormat,l=Ki.lang,c=l.numericSymbols,h=l.numericSymbolMagnitude||1e3,u=n.logarithmic?Math.abs(s):n.tickInterval,d=null===c||void 0===c?void 0:c.length;if(a)t="".concat(this.value);else if(o)t=r.dateFormat(o,s,!0);else if(d&&c&&u>=1e3)for(;d--&&void 0===t;)u>=(e=Math.pow(h,d+1))&&10*s%e==0&&null!==c[d]&&0!==s&&(t=i(s/e,-1)+c[d]);return void 0===t&&(t=Math.abs(s)>=1e4?i(s,-1):i(s,-1,void 0,"")),t}getSeriesExtremes(){let e,t=this;os(this,"getSeriesExtremes",null,(function(){t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.threshold=void 0,t.softThreshold=!t.isXAxis,t.series.forEach((n=>{if(n.reserveSpace()){let i,s,r,a=n.options,o=a.threshold;if(t.hasVisibleSeries=!0,t.positiveValuesOnly&&0>=(o||0)&&(o=void 0),t.isXAxis)(i=n.getColumn("x")).length&&(i=t.logarithmic?i.filter((e=>e>0)):i,s=(e=n.getXExtremes(i)).min,r=e.max,us(s)||s instanceof Date||(i=i.filter(us),s=(e=n.getXExtremes(i)).min,r=e.max),i.length&&(t.dataMin=Math.min(gs(t.dataMin,s),s),t.dataMax=Math.max(gs(t.dataMax,r),r)));else{let e=n.applyExtremes();us(e.dataMin)&&(s=e.dataMin,t.dataMin=Math.min(gs(t.dataMin,s),s)),us(e.dataMax)&&(r=e.dataMax,t.dataMax=Math.max(gs(t.dataMax,r),r)),ns(o)&&(t.threshold=o),(!a.softThreshold||t.positiveValuesOnly)&&(t.softThreshold=!1)}}}))})),os(this,"afterGetSeriesExtremes")}translate(e,t,n,i,s,r){var a;let o=this.linkedParent||this,l=i&&o.old?o.old.min:o.min;if(!us(l))return NaN;let c=o.minPixelPadding,h=(o.isOrdinal||(null===(a=o.brokenAxis)||void 0===a?void 0:a.hasBreaks)||o.logarithmic&&s)&&!!o.lin2val,u=1,d=0,f=i&&o.old?o.old.transA:o.transA,p=0;return f||(f=o.transA),n&&(u*=-1,d=o.len),o.reversed&&(u*=-1,d-=u*(o.sector||o.len)),t?(p=(e=e*u+d-c)/f+l,h&&(p=o.lin2val(p))):(h&&(e=o.val2lin(e)),p=u*(e-l)*f+d+u*c+(us(r)?f*r:0),o.isRadial||(p=ts(p))),p}toPixels(e,t){var n,i;return this.translate(null!==(n=null===(i=this.chart)||void 0===i?void 0:i.time.parse(e))&&void 0!==n?n:NaN,!1,!this.horiz,void 0,!0)+(t?0:this.pos)}toValue(e,t){return this.translate(e-(t?0:this.pos),!0,!this.horiz,void 0,!0)}getPlotLinePath(e){let t,n,i,s,r,a=this,o=a.chart,l=a.left,c=a.top,h=e.old,u=e.value,d=e.lineWidth,f=h&&o.oldChartHeight||o.chartHeight,p=h&&o.oldChartWidth||o.chartWidth,m=a.transB,g=e.translatedValue,b=e.force;function v(e,t,n){return"pass"!==b&&(e<t||e>n)&&(b?e=es(e,t,n):r=!0),e}let y={value:u,lineWidth:d,old:h,force:b,acrossPanes:e.acrossPanes,translatedValue:g};return os(this,"getPlotLinePath",y,(function(e){t=i=(g=es(g=gs(g,a.translate(u,void 0,void 0,h)),-1e9,1e9))+m,n=s=f-g-m,us(g)?a.horiz?(n=c,s=f-a.bottom+(a.options.isInternal?0:o.scrollablePixelsY||0),t=i=v(t,l,l+a.width)):(t=l,i=p-a.right+(o.scrollablePixelsX||0),n=s=v(n,c,c+a.height)):(r=!0,b=!1),e.path=r&&!b?void 0:o.renderer.crispLine([["M",t,n],["L",i,s]],d||1)})),y.path}getLinearTickPositions(e,t,n){let i,s,r,a=ts(Math.floor(t/e)*e),o=ts(Math.ceil(n/e)*e),l=[];if(ts(a+e)===a&&(r=20),this.single)return[t];for(i=a;i<=o&&(l.push(i),(i=ts(i+e,r))!==s);)s=i;return l}getMinorTickInterval(){let{minorTicks:e,minorTickInterval:t}=this.options;return!0===e?gs(t,"auto"):!1!==e?t:void 0}getMinorTickPositions(){var e;let t,n=this.options,i=this.tickPositions,s=this.minorTickInterval,r=this.pointRangePadding||0,a=(this.min||0)-r,o=(this.max||0)+r,l=null!==(e=this.brokenAxis)&&void 0!==e&&e.hasBreaks?this.brokenAxis.unitLength:o-a,c=[];if(l&&l/s<this.len/3){let e=this.logarithmic;if(e)this.paddedTicks.forEach((function(t,n,i){n&&c.push.apply(c,e.getLogTickPositions(s,i[n-1],i[n],!0))}));else if(this.dateTime&&"auto"===this.getMinorTickInterval())c=c.concat(this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(s),a,o,n.startOfWeek));else for(t=a+(i[0]-a)%s;t<=o&&t!==c[0];t+=s)c.push(t)}return 0!==c.length&&this.trimTicks(c),c}adjustForMinRange(){var e,t,n;let i,s,r,a,o=this.options,l=this.logarithmic,c=this.chart.time,{max:h,min:u,minRange:d}=this;this.isXAxis&&void 0===d&&!l&&(d=ns(o.min)||ns(o.max)||ns(o.floor)||ns(o.ceiling)?null:Math.min(5*(ls(this.series.map((e=>{let t=e.getColumn("x");return e.xIncrement?t.slice(0,2):t})))||0),this.dataMax-this.dataMin)),us(h)&&us(u)&&us(d)&&h-u<d&&(s=this.dataMax-this.dataMin>=d,i=(d-h+u)/2,r=[u-i,null!==(e=c.parse(o.min))&&void 0!==e?e:u-i],s&&(r[2]=l?l.log2lin(this.dataMin):this.dataMin),a=[(u=Qi(r))+d,null!==(t=c.parse(o.max))&&void 0!==t?t:u+d],s&&(a[2]=l?l.log2lin(this.dataMax):this.dataMax),(h=Ji(a))-u<d&&(r[0]=h-d,r[1]=null!==(n=c.parse(o.min))&&void 0!==n?n:h-d,u=Qi(r))),this.minRange=d,this.min=u,this.max=h}getClosest(){let e,t;if(this.categories)t=1;else{let n=[];this.series.forEach((function(e){let i=e.closestPointRange,s=e.getColumn("x");1===s.length?n.push(s[0]):e.sorted&&ns(i)&&e.reserveSpace()&&(t=ns(t)?Math.min(t,i):i)})),n.length&&(n.sort(((e,t)=>e-t)),e=ls([n]))}return e&&t?Math.min(e,t):e||t}nameToX(e){let t,n=hs(this.options.categories),i=n?this.categories:this.names,s=e.options.x;return e.series.requireSorting=!1,ns(s)||(s=this.uniqueNames&&i?n?i.indexOf(e.name):gs(i.keys[e.name],-1):e.series.autoIncrement()),-1===s?!n&&i&&(t=i.length):us(s)&&(t=s),void 0!==t?(this.names[t]=e.name,this.names.keys[e.name]=t):e.x&&(t=e.x),t}updateNames(){let e=this,t=this.names;t.length>0&&(Object.keys(t.keys).forEach((function(e){delete t.keys[e]})),t.length=0,this.minRange=this.userMinRange,(this.series||[]).forEach((t=>{t.xIncrement=null,(!t.points||t.isDirtyData)&&(e.max=Math.max(e.max||0,t.dataTable.rowCount-1),t.processData(),t.generatePoints());let n=t.getColumn("x").slice();t.data.forEach(((t,i)=>{let s=n[i];(null===t||void 0===t?void 0:t.options)&&void 0!==t.name&&void 0!==(s=e.nameToX(t))&&s!==t.x&&(n[i]=t.x=s)})),t.dataTable.setColumn("x",n)})))}setAxisTranslation(){var e;let t,n,i=this,s=i.max-i.min,r=i.linkedParent,a=!!i.categories,o=i.isXAxis,l=i.axisPointRange||0,c=0,h=0,u=i.transA;(o||a||l)&&(t=i.getClosest(),r?(c=r.minPointOffset,h=r.pointRangePadding):i.series.forEach((function(e){let n=a?1:o?gs(e.options.pointRange,t,0):i.axisPointRange||0,s=e.options.pointPlacement;if(l=Math.max(l,n),!i.single||a){let t=e.is("xrange")?!o:o;c=Math.max(c,t&&ds(s)?0:n/2),h=Math.max(h,t&&"on"===s?0:n)}})),n=null!==(e=i.ordinal)&&void 0!==e&&e.slope&&t?i.ordinal.slope/t:1,i.minPointOffset=c*=n,i.pointRangePadding=h*=n,i.pointRange=Math.min(l,i.single&&a?1:s),o&&(i.closestPointRange=t)),i.translationSlope=i.transA=u=i.staticScale||i.len/(s+h||1),i.transB=i.horiz?i.left:i.bottom,i.minPixelPadding=u*c,os(this,"afterSetAxisTranslation")}minFromRange(){let{max:e,min:t}=this;return us(e)&&us(t)&&e-t||void 0}setTickInterval(e){var t;let n,i,s,r,a,{categories:o,chart:l,dataMax:c,dataMin:h,dateTime:u,isXAxis:d,logarithmic:f,options:p,softThreshold:m}=this,g=l.time,b=us(this.threshold)?this.threshold:void 0,v=this.minRange||0,{ceiling:y,floor:x,linkedTo:S,softMax:w,softMin:E}=p,_=us(S)&&(null===(t=l[this.coll])||void 0===t?void 0:t[S]),T=p.tickPixelInterval,M=p.maxPadding,C=p.minPadding,A=0,P=us(p.tickInterval)&&p.tickInterval>=0?p.tickInterval:void 0;if(u||o||_||this.getTickAmount(),r=gs(this.userMin,g.parse(p.min)),a=gs(this.userMax,g.parse(p.max)),_?(this.linkedParent=_,n=_.getExtremes(),this.min=gs(n.min,n.dataMin),this.max=gs(n.max,n.dataMax),this.type!==_.type&&rs(11,!0,l)):(m&&ns(b)&&us(c)&&us(h)&&(h>=b?(i=b,C=0):c<=b&&(s=b,M=0)),this.min=gs(r,i,h),this.max=gs(a,s,c)),us(this.max)&&us(this.min)&&(f&&(this.positiveValuesOnly&&!e&&0>=Math.min(this.min,gs(h,this.min))&&rs(10,!0,l),this.min=ts(f.log2lin(this.min),16),this.max=ts(f.log2lin(this.max),16)),this.range&&us(h)&&(this.userMin=this.min=r=Math.max(h,this.minFromRange()||0),this.userMax=a=this.max,this.range=void 0)),os(this,"foundExtremes"),this.adjustForMinRange(),us(this.min)&&us(this.max)){var N;if(!us(this.userMin)&&us(E)&&E<this.min&&(this.min=r=E),!us(this.userMax)&&us(w)&&w>this.max&&(this.max=a=w),o||this.axisPointRange||null!==(N=this.stacking)&&void 0!==N&&N.usePercentage||_||(A=this.max-this.min)&&(!ns(r)&&C&&(this.min-=A*C),!ns(a)&&M&&(this.max+=A*M)),!us(this.userMin)&&us(x)&&(this.min=Math.max(this.min,x)),!us(this.userMax)&&us(y)&&(this.max=Math.min(this.max,y)),m&&us(h)&&us(c)){let e=b||0;!ns(r)&&this.min<e&&h>=e?this.min=p.minRange?Math.min(e,this.max-v):e:!ns(a)&&this.max>e&&c<=e&&(this.max=p.minRange?Math.max(e,this.min+v):e)}!l.polar&&this.min>this.max&&(ns(p.min)?this.max=this.min:ns(p.max)&&(this.min=this.max)),A=this.max-this.min}if(this.min!==this.max&&us(this.min)&&us(this.max)?_&&!P&&T===_.options.tickPixelInterval?this.tickInterval=P=_.tickInterval:this.tickInterval=gs(P,this.tickAmount?A/Math.max(this.tickAmount-1,1):void 0,o?1:A*T/Math.max(this.len,T)):this.tickInterval=1,d&&!e){var k,L;let e=this.min!==(null===(k=this.old)||void 0===k?void 0:k.min)||this.max!==(null===(L=this.old)||void 0===L?void 0:L.max);this.series.forEach((function(t){var n;t.forceCrop=null===(n=t.forceCropping)||void 0===n?void 0:n.call(t),t.processData(e)})),os(this,"postProcessData",{hasExtremesChanged:e})}this.setAxisTranslation(),os(this,"initialAxisTranslation"),this.pointRange&&!P&&(this.tickInterval=Math.max(this.pointRange,this.tickInterval));let I=gs(p.minTickInterval,u&&!this.series.some((e=>!e.sorted))?this.closestPointRange:0);!P&&I&&this.tickInterval<I&&(this.tickInterval=I),u||f||P||(this.tickInterval=Ss(this,this.tickInterval)),this.tickAmount||(this.tickInterval=this.unsquish()),this.setTickPositions()}setTickPositions(){let e,t=this.options,n=t.tickPositions,i=t.tickPositioner,s=this.getMinorTickInterval(),r=!this.isPanning,a=r&&t.startOnTick,o=r&&t.endOnTick,l=[];if(this.tickmarkOffset=this.categories&&"between"===t.tickmarkPlacement&&1===this.tickInterval?.5:0,this.single=this.min===this.max&&ns(this.min)&&!this.tickAmount&&(this.min%1==0||!1!==t.allowDecimals),n)l=n.slice();else if(us(this.min)&&us(this.max)){var c,h;if((null===(c=this.ordinal)||void 0===c||!c.positions)&&(this.max-this.min)/this.tickInterval>Math.max(2*this.len,200))l=[this.min,this.max],rs(19,!1,this.chart);else if(this.dateTime)l=this.getTimeTicks(this.dateTime.normalizeTimeTickInterval(this.tickInterval,t.units),this.min,this.max,t.startOfWeek,null===(h=this.ordinal)||void 0===h?void 0:h.positions,this.closestPointRange,!0);else if(this.logarithmic)l=this.logarithmic.getLogTickPositions(this.tickInterval,this.min,this.max);else{let e=this.tickInterval,t=e;for(;t<=2*e&&(l=this.getLinearTickPositions(this.tickInterval,this.min,this.max),this.tickAmount&&l.length>this.tickAmount);)this.tickInterval=Ss(this,t*=1.1)}l.length>this.len&&(l=[l[0],l[l.length-1]])[0]===l[1]&&(l.length=1),i&&(this.tickPositions=l,(e=i.apply(this,[this.min,this.max]))&&(l=e))}this.tickPositions=l,this.minorTickInterval="auto"===s&&this.tickInterval?this.tickInterval/t.minorTicksPerMajor:s,this.paddedTicks=l.slice(0),this.trimTicks(l,a,o),!this.isLinked&&us(this.min)&&us(this.max)&&(this.single&&l.length<2&&!this.categories&&!this.series.some((e=>e.is("heatmap")&&"between"===e.options.pointPlacement))&&(this.min-=.5,this.max+=.5),n||e||this.adjustTickAmount()),os(this,"afterSetTickPositions")}trimTicks(e,t,n){let i=e[0],s=e[e.length-1],r=!this.isOrdinal&&this.minPointOffset||0;if(os(this,"trimTicks"),!this.isLinked||!this.grid){if(t&&i!==-1/0)this.min=i;else for(;this.min-r>e[0];)e.shift();if(n)this.max=s;else for(;this.max+r<e[e.length-1];)e.pop();0===e.length&&ns(i)&&!this.options.tickPositions&&e.push((s+i)/2)}}alignToOthers(){let e,t=this,n=t.chart,i=[this],s=t.options,r=n.options.chart,a="yAxis"===this.coll&&r.alignThresholds,o=[];if(t.thresholdAlignment=void 0,(!1!==r.alignTicks&&s.alignTicks||a)&&!1!==s.startOnTick&&!1!==s.endOnTick&&!t.logarithmic){let s=e=>{let{horiz:t,options:n}=e;return[t?n.left:n.top,n.width,n.height,n.pane].join(",")},r=s(this);n[this.coll].forEach((function(n){let{series:a}=n;a.length&&a.some((e=>e.visible))&&n!==t&&s(n)===r&&(e=!0,i.push(n))}))}if(e&&a){i.forEach((e=>{let n=e.getThresholdAlignment(t);us(n)&&o.push(n)}));let e=o.length>1?o.reduce(((e,t)=>e+t),0)/o.length:void 0;i.forEach((t=>{t.thresholdAlignment=e}))}return e}getThresholdAlignment(e){if((!us(this.dataMin)||this!==e&&this.series.some((e=>e.isDirty||e.isDirtyData)))&&this.getSeriesExtremes(),us(this.threshold)){let e=es((this.threshold-(this.dataMin||0))/((this.dataMax||0)-(this.dataMin||0)),0,1);return this.options.reversed&&(e=1-e),e}}getTickAmount(){let e=this.options,t=e.tickPixelInterval,n=e.tickAmount;ns(e.tickInterval)||n||!(this.len<t)||this.isRadial||this.logarithmic||!e.startOnTick||!e.endOnTick||(n=2),!n&&this.alignToOthers()&&(n=Math.ceil(this.len/t)+1),n<4&&(this.finalTickAmt=n,n=5),this.tickAmount=n}adjustTickAmount(){let e,t,n,i=this,{finalTickAmt:s,max:r,min:a,options:o,tickPositions:l,tickAmount:c,thresholdAlignment:h}=i,u=null===l||void 0===l?void 0:l.length,d=gs(i.threshold,i.softThreshold?0:null),f=i.tickInterval,p=()=>l.push(ts(l[l.length-1]+f)),m=()=>l.unshift(ts(l[0]-f));if(us(h)&&(n=h<.5?Math.ceil(h*(c-1)):Math.floor(h*(c-1)),o.reversed&&(n=c-1-n)),i.hasData()&&us(a)&&us(r)){let h=()=>{i.transA*=(u-1)/(c-1),i.min=o.startOnTick?l[0]:Math.min(a,l[0]),i.max=o.endOnTick?l[l.length-1]:Math.max(r,l[l.length-1])};if(us(n)&&us(i.threshold)){for(;l[n]!==d||l.length!==c||l[0]>a||l[l.length-1]<r;){for(l.length=0,l.push(i.threshold);l.length<c;)void 0===l[n]||l[n]>i.threshold?m():p();if(f>8*i.tickInterval)break;f*=2}h()}else if(u<c){for(;l.length<c;)l.length%2||a===d?p():m();h()}if(ns(s)){for(t=e=l.length;t--;)(3===s&&t%2==1||s<=2&&t>0&&t<e-1)&&l.splice(t,1);i.finalTickAmt=void 0}}}setScale(){var e,t,n,i,s;let{coll:r,stacking:a}=this,o=!1,l=!1;this.series.forEach((e=>{var t;o=o||e.isDirtyData||e.isDirty,l=l||(null===(t=e.xAxis)||void 0===t?void 0:t.isDirty)||!1})),this.setAxisSize();let c=this.len!==(null===(e=this.old)||void 0===e?void 0:e.len);c||o||l||this.isLinked||this.forceRedraw||this.userMin!==(null===(t=this.old)||void 0===t?void 0:t.userMin)||this.userMax!==(null===(n=this.old)||void 0===n?void 0:n.userMax)||this.alignToOthers()?(a&&"yAxis"===r&&a.buildStacks(),this.forceRedraw=!1,this.userMinRange||(this.minRange=void 0),this.getSeriesExtremes(),this.setTickInterval(),a&&"xAxis"===r&&a.buildStacks(),this.isDirty||(this.isDirty=c||this.min!==(null===(i=this.old)||void 0===i?void 0:i.min)||this.max!==(null===(s=this.old)||void 0===s?void 0:s.max))):a&&a.cleanStacks(),o&&delete this.allExtremes,os(this,"afterSetScale")}setExtremes(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,r=this.chart;this.series.forEach((e=>{delete e.kdTree})),e=r.time.parse(e),t=r.time.parse(t),os(this,"setExtremes",s=as(s,{min:e,max:t}),(e=>{this.userMin=e.min,this.userMax=e.max,this.eventArgs=e,n&&r.redraw(i)}))}setAxisSize(){let e=this.chart,t=this.options,n=t.offsets||[0,0,0,0],i=this.horiz,s=this.width=Math.round(bs(gs(t.width,e.plotWidth-n[3]+n[1]),e.plotWidth)),r=this.height=Math.round(bs(gs(t.height,e.plotHeight-n[0]+n[2]),e.plotHeight)),a=this.top=Math.round(bs(gs(t.top,e.plotTop+n[0]),e.plotHeight,e.plotTop)),o=this.left=Math.round(bs(gs(t.left,e.plotLeft+n[3]),e.plotWidth,e.plotLeft));this.bottom=e.chartHeight-r-a,this.right=e.chartWidth-s-o,this.len=Math.max(i?s:r,0),this.pos=i?o:a}getExtremes(){let e=this.logarithmic;return{min:e?ts(e.lin2log(this.min)):this.min,max:e?ts(e.lin2log(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}}getThreshold(e){let t=this.logarithmic,n=t?t.lin2log(this.min):this.min,i=t?t.lin2log(this.max):this.max;return null===e||e===-1/0?e=n:e===1/0?e=i:n>e?e=n:i<e&&(e=i),this.translate(e,0,1,0,1)}autoLabelAlign(e){let t=(gs(e,0)-90*this.side+720)%360,n={align:"center"};return os(this,"autoLabelAlign",n,(function(e){t>15&&t<165?e.align="right":t>195&&t<345&&(e.align="left")})),n.align}tickSize(e){let t,n=this.options,i=gs(n["tick"===e?"tickWidth":"minorTickWidth"],"tick"===e&&this.isXAxis&&!this.categories?1:0),s=n["tick"===e?"tickLength":"minorTickLength"];i&&s&&("inside"===n[e+"Position"]&&(s=-s),t=[s,i]);let r={tickSize:t};return os(this,"afterTickSize",r),r.tickSize}labelMetrics(){let e=this.chart.renderer,t=this.ticks,n=t[Object.keys(t)[0]]||{};return this.chart.renderer.fontMetrics(n.label||n.movedLabel||e.box)}unsquish(){let e,t,n=this.options.labels,i=n.padding||0,s=this.horiz,r=this.tickInterval,a=this.len/((+!!this.categories+this.max-this.min)/r),o=n.rotation,l=ts(.8*this.labelMetrics().h),c=Math.max(this.max-this.min,0),h=function(e){let t=(e+2*i)/(a||1);return(t=t>1?Math.ceil(t):1)*r>c&&e!==1/0&&a!==1/0&&c&&(t=Math.ceil(c/r)),ts(t*r)},u=r,d=Number.MAX_VALUE;if(s){if(!n.staggerLines&&(us(o)?t=[o]:a<n.autoRotationLimit&&(t=n.autoRotation)),t){let n,i;for(let s of t)(s===o||s&&s>=-90&&s<=90)&&(i=(n=h(Math.abs(l/Math.sin(Zi*s))))+Math.abs(s/360))<d&&(d=i,e=s,u=n)}}else u=h(.75*l);return this.autoRotation=t,this.labelRotation=gs(e,us(o)?o:0),n.step?r:u}getSlotWidth(e){let t=this.chart,n=this.horiz,i=this.options.labels,s=Math.max(this.tickPositions.length-!this.categories,1),r=t.margin[3];if(e&&us(e.slotWidth))return e.slotWidth;if(n&&i.step<2&&!this.isRadial)return i.rotation?0:(this.staggerLines||1)*this.len/s;if(!n){let e=i.style.width;if(void 0!==e)return parseInt(String(e),10);if(!this.opposite&&r)return r-t.spacing[3]}return.33*t.chartWidth}renderUnsquish(){let e,t=this.chart,n=t.renderer,i=this.tickPositions,s=this.ticks,r=this.options.labels,a=r.style,o=this.horiz,l=this.getSlotWidth(),c=Math.max(1,Math.round(l-(o?2*(r.padding||0):r.distance||0))),h={},u=this.labelMetrics(),d=a.lineClamp,f=null!==d&&void 0!==d?d:Math.floor(this.len/(i.length*u.h))||1,p=0;ds(r.rotation)||(h.rotation=r.rotation||0),i.forEach((function(e){var t;let n=s[e];n.movedLabel&&n.replaceMovedLabel();let i=(null===(t=n.label)||void 0===t?void 0:t.textPxLength)||0;i>p&&(p=i)})),this.maxLabelLength=p,this.autoRotation?p>c&&p>u.h?h.rotation=this.labelRotation:this.labelRotation=0:l&&(e=c),h.rotation&&(e=p>.5*t.chartHeight?.33*t.chartHeight:p,d||(f=1)),this.labelAlign=r.align||this.autoLabelAlign(this.labelRotation),this.labelAlign&&(h.align=this.labelAlign),i.forEach((function(t){let n=s[t],i=null===n||void 0===n?void 0:n.label,r=a.width,o={};i&&(i.attr(h),n.shortenLabel?n.shortenLabel():e&&!r&&"nowrap"!==a.whiteSpace&&(e<(i.textPxLength||0)||"SPAN"===i.element.tagName)?i.css(as(o,{width:"".concat(e,"px"),lineClamp:f})):!i.styles.width||o.width||r||i.css({width:"auto"}),n.rotation=h.rotation)}),this),this.tickRotCorr=n.rotCorr(u.b,this.labelRotation||0,0!==this.side)}hasData(){return this.series.some((function(e){return e.hasData()}))||this.options.showEmpty&&ns(this.min)&&ns(this.max)}addTitle(e){let t,n=this.chart.renderer,i=this.horiz,s=this.opposite,r=this.options.title,a=this.chart.styledMode;this.axisTitle||((t=r.textAlign)||(t=(i?{low:"left",middle:"center",high:"right"}:{low:s?"right":"left",middle:"center",high:s?"left":"right"})[r.align]),this.axisTitle=n.text(r.text||"",0,0,r.useHTML).attr({zIndex:7,rotation:r.rotation||0,align:t}).addClass("highcharts-axis-title"),a||this.axisTitle.css(fs(r.style)),this.axisTitle.add(this.axisGroup),this.axisTitle.isNew=!0),a||r.style.width||this.isRadial||this.axisTitle.css({width:this.len+"px"}),this.axisTitle[e?"show":"hide"](e)}generateTick(e){let t=this.ticks;t[e]?t[e].addLabel():t[e]=new Hi(this,e)}createGroups(){let{axisParent:e,chart:t,coll:n,options:i}=this,s=t.renderer,r=(t,r,a)=>s.g(t).attr({zIndex:a}).addClass("highcharts-".concat(n.toLowerCase()).concat(r," ")+(this.isRadial?"highcharts-radial-axis".concat(r," "):"")+(i.className||"")).add(e);this.axisGroup||(this.gridGroup=r("grid","-grid",i.gridZIndex),this.axisGroup=r("axis","",i.zIndex),this.labelGroup=r("axis-labels","-labels",i.labels.zIndex))}getOffset(){let e,t,n,i,s=this,{chart:r,horiz:a,options:o,side:l,ticks:c,tickPositions:h,coll:u}=s,d=r.inverted&&!s.isZAxis?[1,0,3,2][l]:l,f=s.hasData(),p=o.title,m=o.labels,g=us(o.crossing),b=r.axisOffset,v=r.clipOffset,y=[-1,1,1,-1][l],x=0,S=0,w=0;if(s.showAxis=e=f||o.showEmpty,s.staggerLines=s.horiz&&m.staggerLines||void 0,s.createGroups(),f||s.isLinked?(h.forEach((function(e){s.generateTick(e)})),s.renderUnsquish(),s.reserveSpaceDefault=0===l||2===l||{1:"left",3:"right"}[l]===s.labelAlign,gs(m.reserveSpace,!g&&null,"center"===s.labelAlign||null,s.reserveSpaceDefault)&&h.forEach((function(e){w=Math.max(c[e].getLabelSize(),w)})),s.staggerLines&&(w*=s.staggerLines),s.labelOffset=w*(s.opposite?-1:1)):ms(c,(function(e,t){e.destroy(),delete c[t]})),null!==p&&void 0!==p&&p.text&&!1!==p.enabled&&(s.addTitle(e),e&&!g&&!1!==p.reserveSpace&&(s.titleOffset=x=s.axisTitle.getBBox()[a?"height":"width"],S=ns(t=p.offset)?0:gs(p.margin,a?5:10))),s.renderLine(),s.offset=y*gs(o.offset,b[l]?b[l]+(o.margin||0):0),s.tickRotCorr=s.tickRotCorr||{x:0,y:0},i=0===l?-s.labelMetrics().h:2===l?s.tickRotCorr.y:0,n=Math.abs(w)+S,w&&(n-=i,n+=y*(a?gs(m.y,s.tickRotCorr.y+y*m.distance):gs(m.x,y*m.distance))),s.axisTitleMargin=gs(t,n),s.getMaxLabelDimensions&&(s.maxLabelDimensions=s.getMaxLabelDimensions(c,h)),"colorAxis"!==u&&v){let e=this.tickSize("tick");b[l]=Math.max(b[l],(s.axisTitleMargin||0)+x+y*s.offset,n,null!==h&&void 0!==h&&h.length&&e?e[0]+y*s.offset:0);let t=!s.axisLine||o.offset?0:s.axisLine.strokeWidth()/2;v[d]=Math.max(v[d],t)}os(this,"afterGetOffset")}getLinePath(e){let t=this.chart,n=this.opposite,i=this.offset,s=this.horiz,r=this.left+(n?this.width:0)+i,a=t.chartHeight-this.bottom-(n?this.height:0)+i;return n&&(e*=-1),t.renderer.crispLine([["M",s?this.left:r,s?a:this.top],["L",s?t.chartWidth-this.right:r,s?a:t.chartHeight-this.bottom]],e)}renderLine(){!this.axisLine&&(this.axisLine=this.chart.renderer.path().addClass("highcharts-axis-line").add(this.axisGroup),this.chart.styledMode||this.axisLine.attr({stroke:this.options.lineColor,"stroke-width":this.options.lineWidth,zIndex:7}))}getTitlePosition(e){let t=this.horiz,n=this.left,i=this.top,s=this.len,r=this.options.title,a=t?n:i,o=this.opposite,l=this.offset,c=r.x,h=r.y,u=this.chart.renderer.fontMetrics(e),d=e?Math.max(e.getBBox(!1,0).height-u.h-1,0):0,f={low:a+(t?0:s),middle:a+s/2,high:a+(t?s:0)}[r.align],p=(t?i+this.height:n)+(t?1:-1)*(o?-1:1)*(this.axisTitleMargin||0)+[-d,d,u.f,-d][this.side],m={x:t?f+c:p+(o?this.width:0)+l+c,y:t?p+h-(o?this.height:0)+l:f+h};return os(this,"afterGetTitlePosition",{titlePosition:m}),m}renderMinorTick(e,t){let n=this.minorTicks;n[e]||(n[e]=new Hi(this,e,"minor")),t&&n[e].isNew&&n[e].render(null,!0),n[e].render(null,!1,1)}renderTick(e,t,n){var i;let s=this.isLinked,r=this.ticks;(!s||e>=this.min&&e<=this.max||(null===(i=this.grid)||void 0===i?void 0:i.isColumn))&&(r[e]||(r[e]=new Hi(this,e)),n&&r[e].isNew&&r[e].render(t,!0,-1),r[e].render(t))}render(){let e,t,n=this,i=n.chart,s=n.logarithmic,r=i.renderer,a=n.options,o=n.isLinked,l=n.tickPositions,c=n.axisTitle,h=n.ticks,u=n.minorTicks,d=n.alternateBands,f=a.stackLabels,p=a.alternateGridColor,m=a.crossing,g=n.tickmarkOffset,b=n.axisLine,v=n.showAxis,y=Xi(r.globalAnimation);if(n.labelEdge.length=0,n.overlap=!1,[h,u,d].forEach((function(e){ms(e,(function(e){e.isActive=!1}))})),us(m)){let e=this.isXAxis?i.yAxis[0]:i.xAxis[0],t=[1,-1,-1,1][this.side];if(e){let i=e.toPixels(m,!0);n.horiz&&(i=e.len-i),n.offset=t*i}}if(n.hasData()||o){let r=n.chart.hasRendered&&n.old&&us(n.old.min);n.minorTickInterval&&!n.categories&&n.getMinorTickPositions().forEach((function(e){n.renderMinorTick(e,r)})),l.length&&(l.forEach((function(e,t){n.renderTick(e,t,r)})),g&&(0===n.min||n.single)&&(h[-1]||(h[-1]=new Hi(n,-1,null,!0)),h[-1].render(-1))),p&&l.forEach((function(r,a){t=void 0!==l[a+1]?l[a+1]+g:n.max-g,a%2==0&&r<n.max&&t<=n.max+(i.polar?-g:g)&&(d[r]||(d[r]=new _.PlotLineOrBand(n,{})),e=r+g,d[r].options={from:s?s.lin2log(e):e,to:s?s.lin2log(t):t,color:p,className:"highcharts-alternate-grid"},d[r].render(),d[r].isActive=!0)})),n._addedPlotLB||(n._addedPlotLB=!0,(a.plotLines||[]).concat(a.plotBands||[]).forEach((function(e){n.addPlotBandOrLine(e)})))}[h,u,d].forEach((function(e){let t=[],n=y.duration;ms(e,(function(e,n){e.isActive||(e.render(n,!1,0),e.isActive=!1,t.push(n))})),xs((function(){let n=t.length;for(;n--;)e[t[n]]&&!e[t[n]].isActive&&(e[t[n]].destroy(),delete e[t[n]])}),e!==d&&i.hasRendered&&n?n:0)})),b&&(b[b.isPlaced?"animate":"attr"]({d:this.getLinePath(b.strokeWidth())}),b.isPlaced=!0,b[v?"show":"hide"](v)),c&&v&&(c[c.isNew?"attr":"animate"](n.getTitlePosition(c)),c.isNew=!1),null!==f&&void 0!==f&&f.enabled&&n.stacking&&n.stacking.renderStackTotals(),n.old={len:n.len,max:n.max,min:n.min,transA:n.transA,userMax:n.userMax,userMin:n.userMin},n.isDirty=!1,os(this,"afterRender")}redraw(){this.visible&&(this.render(),this.plotLinesAndBands.forEach((function(e){e.render()}))),this.series.forEach((function(e){e.isDirty=!0}))}getKeepProps(){return this.keepProps||ws.keepProps}destroy(e){let t=this,n=t.plotLinesAndBands,i=this.eventOptions;if(os(this,"destroy",{keepEvents:e}),e||vs(t),[t.ticks,t.minorTicks,t.alternateBands].forEach((function(e){is(e)})),n){let e=n.length;for(;e--;)n[e].destroy()}for(let s in["axisLine","axisTitle","axisGroup","gridGroup","labelGroup","cross","scrollbar"].forEach((function(e){t[e]&&(t[e]=t[e].destroy())})),t.plotLinesAndBandsGroups)t.plotLinesAndBandsGroups[s]=t.plotLinesAndBandsGroups[s].destroy();ms(t,(function(e,n){-1===t.getKeepProps().indexOf(n)&&delete t[n]})),this.eventOptions=i}drawCrosshair(e,t){var n,i;let s,r,a,o,l=this.crosshair,c=null===(n=null===l||void 0===l?void 0:l.snap)||void 0===n||n,h=this.chart,u=this.cross;if(os(this,"drawCrosshair",{e:e,point:t}),e||(e=null===(i=this.cross)||void 0===i?void 0:i.e),l&&!1!==(ns(t)||!c)){var d,f;if(c?ns(t)&&(r=gs("colorAxis"!==this.coll?t.crosshairPos:null,this.isXAxis?t.plotX:this.len-t.plotY)):r=e&&(this.horiz?e.chartX-this.pos:this.len-e.chartY+this.pos),ns(r)&&(o={value:t&&(this.isXAxis?t.x:gs(t.stackY,t.y)),translatedValue:r},h.polar&&as(o,{isCrosshair:!0,chartX:null===(d=e)||void 0===d?void 0:d.chartX,chartY:null===(f=e)||void 0===f?void 0:f.chartY,point:t}),s=this.getPlotLinePath(o)||null),!ns(s))return void this.hideCrosshair();a=this.categories&&!this.isRadial,u||(this.cross=u=h.renderer.path().addClass("highcharts-crosshair highcharts-crosshair-"+(a?"category ":"thin ")+(l.className||"")).attr({zIndex:gs(l.zIndex,2)}).add(),!h.styledMode&&(u.attr({stroke:l.color||(a?Ne.parse("#ccd3ff").setOpacity(.25).get():"#cccccc"),"stroke-width":gs(l.width,1)}).css({"pointer-events":"none"}),l.dashStyle&&u.attr({dashstyle:l.dashStyle}))),u.show().attr({d:s}),a&&!l.width&&u.attr({"stroke-width":this.transA}),this.cross.e=e}else this.hideCrosshair();os(this,"afterDrawCrosshair",{e:e,point:t})}hideCrosshair(){this.cross&&this.cross.hide(),os(this,"afterHideCrosshair")}update(e,t){let n=this.chart;e=fs(this.userOptions,e),this.destroy(!0),this.init(n,e),n.isDirtyBox=!0,gs(t,!0)&&n.redraw()}remove(e){let t=this.chart,n=this.coll,i=this.series,s=i.length;for(;s--;)i[s]&&i[s].remove(!1);ss(t.axes,this),ss(t[n]||[],this),t.orderItems(n),this.destroy(),t.isDirtyBox=!0,gs(e,!0)&&t.redraw()}setTitle(e,t){this.update({title:e},t)}setCategories(e,t){this.update({categories:e},t)}}ws.keepProps=["coll","extKey","hcEvents","len","names","series","userMax","userMin"];let{addEvent:Es,getMagnitude:_s,normalizeTickInterval:Ts,timeUnits:Ms}=K;!function(e){function t(){return this.chart.time.getTimeTicks.apply(this.chart.time,arguments)}function n(){"datetime"===this.type?this.dateTime||(this.dateTime=new i(this)):this.dateTime=void 0}e.compose=function(e){return e.keepProps.includes("dateTime")||(e.keepProps.push("dateTime"),e.prototype.getTimeTicks=t,Es(e,"afterSetType",n)),e};class i{constructor(e){this.axis=e}normalizeTimeTickInterval(e,t){let n,i=t||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],s=i[i.length-1],r=Ms[s[0]],a=s[1];for(n=0;n<i.length&&(r=Ms[(s=i[n])[0]],a=s[1],!i[n+1]||!(e<=(r*a[a.length-1]+Ms[i[n+1][0]])/2));n++);return r===Ms.year&&e<5*r&&(a=[1,2,5]),{unitRange:r,count:Ts(e/r,a,"year"===s[0]?Math.max(_s(e/r),1):1),unitName:s[0]}}getXDateFormat(e,t){let{axis:n}=this,i=n.chart.time;return n.closestPointRange?i.getDateFormat(n.closestPointRange,e,n.options.startOfWeek,t)||i.resolveDTLFormat(t.year).main:i.resolveDTLFormat(t.day).main}}e.Additions=i}(c||(c={}));let Cs=c,{addEvent:As,normalizeTickInterval:Ps,pick:Ns}=K;!function(e){function t(){var e;"logarithmic"!==this.type?this.logarithmic=void 0:null!==(e=this.logarithmic)&&void 0!==e||(this.logarithmic=new i(this))}function n(){let e=this.logarithmic;e&&(this.lin2val=function(t){return e.lin2log(t)},this.val2lin=function(t){return e.log2lin(t)})}e.compose=function(e){return e.keepProps.includes("logarithmic")||(e.keepProps.push("logarithmic"),As(e,"afterSetType",t),As(e,"afterInit",n)),e};class i{constructor(e){this.axis=e}getLogTickPositions(e,t,n,i){let s=this.axis,r=s.len,a=s.options,o=[];if(i||(this.minorAutoInterval=void 0),e>=.5)e=Math.round(e),o=s.getLinearTickPositions(e,t,n);else if(e>=.08){let s,r,a,l,c,h,u;for(s=e>.3?[1,2,4]:e>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],r=Math.floor(t);r<n+1&&!u;r++)for(a=0,l=s.length;a<l&&!u;a++)(c=this.log2lin(this.lin2log(r)*s[a]))>t&&(!i||h<=n)&&void 0!==h&&o.push(h),h>n&&(u=!0),h=c}else{let l=this.lin2log(t),c=this.lin2log(n),h=i?s.getMinorTickInterval():a.tickInterval,u=a.tickPixelInterval/(i?5:1),d=i?r/s.tickPositions.length:r;e=Ps(e=Ns("auto"===h?null:h,this.minorAutoInterval,(c-l)*u/(d||1))),o=s.getLinearTickPositions(e,l,c).map(this.log2lin),i||(this.minorAutoInterval=e/5)}return i||(s.tickInterval=e),o}lin2log(e){return Math.pow(10,e)}log2lin(e){return Math.log(e)/Math.LN10}}e.Additions=i}(h||(h={}));let ks=h,{erase:Ls,extend:Is,isNumber:Rs}=K;!function(e){let t;function n(e){return this.addPlotBandOrLine(e,"plotBands")}function i(e,n){let i=this.userOptions,s=new t(this,e);if(this.visible&&(s=s.render()),s){if(this._addedPlotLB||(this._addedPlotLB=!0,(i.plotLines||[]).concat(i.plotBands||[]).forEach((e=>{this.addPlotBandOrLine(e)}))),n){let t=i[n]||[];t.push(e),i[n]=t}this.plotLinesAndBands.push(s)}return s}function s(e){return this.addPlotBandOrLine(e,"plotLines")}function r(e,t,n){n=n||this.options;let i,s,r=this.getPlotLinePath({value:t,force:!0,acrossPanes:n.acrossPanes}),a=[],o=this.horiz,l=!Rs(this.min)||!Rs(this.max)||e<this.min&&t<this.min||e>this.max&&t>this.max,c=this.getPlotLinePath({value:e,force:!0,acrossPanes:n.acrossPanes}),h=1;if(c&&r)for(l&&(s=c.toString()===r.toString(),h=0),i=0;i<c.length;i+=2){let e=c[i],t=c[i+1],n=r[i],l=r[i+1];("M"===e[0]||"L"===e[0])&&("M"===t[0]||"L"===t[0])&&("M"===n[0]||"L"===n[0])&&("M"===l[0]||"L"===l[0])&&(o&&n[1]===e[1]?(n[1]+=h,l[1]+=h):o||n[2]!==e[2]||(n[2]+=h,l[2]+=h),a.push(["M",e[1],e[2]],["L",t[1],t[2]],["L",l[1],l[2]],["L",n[1],n[2]],["Z"])),a.isFlat=s}return a}function a(e){this.removePlotBandOrLine(e)}function o(e){let t=this.plotLinesAndBands,n=this.options,i=this.userOptions;if(t){let s=t.length;for(;s--;)t[s].id===e&&t[s].destroy();[n.plotLines||[],i.plotLines||[],n.plotBands||[],i.plotBands||[]].forEach((function(t){for(s=t.length;s--;){var n;(null===(n=t[s])||void 0===n?void 0:n.id)===e&&Ls(t,t[s])}}))}}function l(e){this.removePlotBandOrLine(e)}e.compose=function(e,c){let h=c.prototype;return h.addPlotBand||(t=e,Is(h,{addPlotBand:n,addPlotLine:s,addPlotBandOrLine:i,getPlotBandPath:r,removePlotBand:a,removePlotLine:l,removePlotBandOrLine:o})),c}}(u||(u={}));let Os=u,{addEvent:Ds,arrayMax:Fs,arrayMin:Bs,defined:js,destroyObjectProperties:Vs,erase:Gs,fireEvent:Ws,merge:zs,objectEach:Us,pick:Hs}=K;class Xs{static compose(e,t){return Ds(e,"afterInit",(function(){this.labelCollectors.push((()=>{let e=[];for(let n of this.axes)for(let{label:i,options:s}of n.plotLinesAndBands){var t;i&&(null===s||void 0===s||null===(t=s.label)||void 0===t||!t.allowOverlap)&&e.push(i)}return e}))})),Os.compose(Xs,t)}constructor(e,t){this.axis=e,this.options=t,this.id=t.id}render(){var e,t,n;Ws(this,"render");let i,{axis:s,options:a}=this,{horiz:o,logarithmic:l}=s,{color:c,events:h,zIndex:u=0}=a,{renderer:d,time:f}=s.chart,p={},m=f.parse(a.to),g=f.parse(a.from),b=f.parse(a.value),v=a.borderWidth,y=a.label,{label:x,svgElem:S}=this,w=[],E=js(g)&&js(m),_=js(b),T=!S,M={class:"highcharts-plot-"+(E?"band ":"line ")+(a.className||"")},C=E?"bands":"lines";if(!s.chart.styledMode&&(_?(M.stroke=c||"#999999",M["stroke-width"]=Hs(a.width,1),a.dashStyle&&(M.dashstyle=a.dashStyle)):E&&(M.fill=c||"#e6e9ff",v&&(M.stroke=a.borderColor,M["stroke-width"]=v))),p.zIndex=u,C+="-"+u,(i=s.plotLinesAndBandsGroups[C])||(s.plotLinesAndBandsGroups[C]=i=d.g("plot-"+C).attr(p).add()),S||(this.svgElem=S=d.path().attr(M).add(i)),js(b))w=s.getPlotLinePath({value:null!==(e=null===l||void 0===l?void 0:l.log2lin(b))&&void 0!==e?e:b,lineWidth:S.strokeWidth(),acrossPanes:a.acrossPanes});else{var A,P;if(!js(g)||!js(m))return;w=s.getPlotBandPath(null!==(A=null===l||void 0===l?void 0:l.log2lin(g))&&void 0!==A?A:g,null!==(P=null===l||void 0===l?void 0:l.log2lin(m))&&void 0!==P?P:m,a)}return!this.eventsAdded&&h&&(Us(h,((e,t)=>{var n;null===(n=S)||void 0===n||n.on(t,(e=>{h[t].apply(this,[e])}))})),this.eventsAdded=!0),!T&&S.d||null===(t=w)||void 0===t||!t.length?S&&(w?(S.show(),S.animate({d:w})):S.d&&(S.hide(),x&&(this.label=x=x.destroy()))):S.attr({d:w}),y&&(js(y.text)||js(y.formatter))&&null!==(n=w)&&void 0!==n&&n.length&&s.width>0&&s.height>0&&!w.isFlat?(y=zs(r({align:o&&E?"center":void 0,x:o?!E&&4:10,verticalAlign:!o&&E?"middle":void 0,y:o?E?16:10:E?6:-4,rotation:o&&!E?90:0},E?{inside:!0}:{}),y),this.renderLabel(y,w,E,u)):x&&x.hide(),this}renderLabel(e,t,n,i){var s,r;let a=this.axis,o=a.chart.renderer,l=e.inside,c=this.label;c||(this.label=c=o.text(this.getLabelText(e),0,0,e.useHTML).attr({align:e.textAlign||e.align,rotation:e.rotation,class:"highcharts-plot-"+(n?"band":"line")+"-label "+(e.className||""),zIndex:i}),a.chart.styledMode||c.css(zs({color:null===(s=a.chart.options.title)||void 0===s||null===(s=s.style)||void 0===s?void 0:s.color,fontSize:"0.8em",textOverflow:n&&!l?"":"ellipsis"},e.style)),c.add());let h=t.xBounds||[t[0][1],t[1][1],n?t[2][1]:t[0][1]],u=t.yBounds||[t[0][2],t[1][2],n?t[2][2]:t[0][2]],d=Bs(h),f=Bs(u),p=Fs(h)-d;c.align(e,!1,{x:d,y:f,width:p,height:Fs(u)-f}),c.alignAttr.y-=o.fontMetrics(c).b,(!c.alignValue||"left"===c.alignValue||js(l))&&c.css({width:((null===(r=e.style)||void 0===r?void 0:r.width)||(n&&l?p:90===c.rotation?a.height-(c.alignAttr.y-a.top):(e.clip?a.width:a.chart.chartWidth)-(c.alignAttr.x-a.left)))+"px"}),c.show(!0)}getLabelText(e){return js(e.formatter)?e.formatter.call(this):e.text}destroy(){Gs(this.axis.plotLinesAndBands,this),delete this.axis,Vs(this)}}let{animObject:Ys}=Xe,{format:qs}=Et,{composed:Ks,dateFormats:$s,doc:Zs,isSafari:Qs}=_,{distribute:Js}=Pt,{addEvent:er,clamp:tr,css:nr,discardElement:ir,extend:sr,fireEvent:rr,getAlignFactor:ar,isArray:or,isNumber:lr,isObject:cr,isString:hr,merge:ur,pick:dr,pushUnique:fr,splat:pr,syncTimeout:mr}=K;class gr{constructor(e,t,n){this.allowShared=!0,this.crosshairs=[],this.distance=0,this.isHidden=!0,this.isSticky=!1,this.options={},this.outside=!1,this.chart=e,this.init(e,t),this.pointer=n}bodyFormatter(e){return e.map((e=>{let t=e.series.tooltipOptions,n=e.formatPrefix||"point";return(t[n+"Formatter"]||e.tooltipFormatter).call(e,t[n+"Format"]||"")}))}cleanSplit(e){this.chart.series.forEach((function(t){let n=null===t||void 0===t?void 0:t.tt;n&&(!n.isActive||e?t.tt=n.destroy():n.isActive=!1)}))}defaultFormatter(e){let t,n=this.points||pr(this);return(t=(t=[e.headerFooterFormatter(n[0])]).concat(e.bodyFormatter(n))).push(e.headerFooterFormatter(n[0],!0)),t}destroy(){this.label&&(this.label=this.label.destroy()),this.split&&(this.cleanSplit(!0),this.tt&&(this.tt=this.tt.destroy())),this.renderer&&(this.renderer=this.renderer.destroy(),ir(this.container)),K.clearTimeout(this.hideTimer)}getAnchor(e,t){var n;let i,{chart:s,pointer:r}=this,a=s.inverted,o=s.plotTop,l=s.plotLeft;if(null!==(n=(e=pr(e))[0].series)&&void 0!==n&&n.yAxis&&!e[0].series.yAxis.options.reversedStacks&&(e=e.slice().reverse()),this.followPointer&&t)void 0===t.chartX&&(t=r.normalize(t)),i=[t.chartX-l,t.chartY-o];else if(e[0].tooltipPos)i=e[0].tooltipPos;else{let n=0,s=0;e.forEach((function(e){let t=e.pos(!0);t&&(n+=t[0],s+=t[1])})),n/=e.length,s/=e.length,this.shared&&e.length>1&&t&&(a?n=t.chartX:s=t.chartY),i=[n-l,s-o]}let c={point:e[0],ret:i};return rr(this,"getAnchor",c),c.ret.map(Math.round)}getClassName(e,t,n){let i=this.options,s=e.series,r=s.options;return[i.className,"highcharts-label",n&&"highcharts-tooltip-header",t?"highcharts-tooltip-box":"highcharts-tooltip",!n&&"highcharts-color-"+dr(e.colorIndex,s.colorIndex),null===r||void 0===r?void 0:r.className].filter(hr).join(" ")}getLabel(){let{anchorX:e,anchorY:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{anchorX:0,anchorY:0},n=this,i=this.chart.styledMode,s=this.options,r=this.split&&this.allowShared,a=this.container,o=this.chart.renderer;if(this.label){let e=!this.label.hasClass("highcharts-label");(!r&&e||r&&!e)&&this.destroy()}if(!this.label){var l;if(this.outside){let e=this.chart,t=e.options.chart.style,n=_t.getRendererType();this.container=a=_.doc.createElement("div"),a.className="highcharts-tooltip-container "+(e.renderTo.className.match(/(highcharts[a-zA-Z0-9-]+)\s?/gm)||""),nr(a,{position:"absolute",top:"1px",pointerEvents:"none",zIndex:Math.max(this.options.style.zIndex||0,((null===t||void 0===t?void 0:t.zIndex)||0)+3)}),this.renderer=o=new n(a,0,0,t,void 0,void 0,o.styledMode)}if(r?this.label=o.g("tooltip"):(this.label=o.label("",e,t,s.shape||"callout",void 0,void 0,s.useHTML,void 0,"tooltip").attr({padding:s.padding,r:s.borderRadius}),i||this.label.attr({fill:s.backgroundColor,"stroke-width":s.borderWidth||0}).css(s.style).css({pointerEvents:s.style.pointerEvents||(this.shouldStickOnContact()?"auto":"none")})),n.outside){let e=this.label;[e.xSetter,e.ySetter].forEach(((t,i)=>{e[i?"ySetter":"xSetter"]=s=>{t.call(e,n.distance),e[i?"y":"x"]=s,a&&(a.style[i?"top":"left"]="".concat(s,"px"))}}))}this.label.attr({zIndex:8}).shadow(null!==(l=s.shadow)&&void 0!==l?l:!s.fixed).add()}return a&&!a.parentElement&&_.doc.body.appendChild(a),this.label}getPlayingField(){let{body:e,documentElement:t}=Zs,{chart:n,distance:i,outside:s}=this;return{width:s?Math.max(e.scrollWidth,t.scrollWidth,e.offsetWidth,t.offsetWidth,t.clientWidth)-2*i-2:n.chartWidth,height:s?Math.max(e.scrollHeight,t.scrollHeight,e.offsetHeight,t.offsetHeight,t.clientHeight):n.chartHeight}}getPosition(e,t,n){var i;let s,{distance:r,chart:a,outside:o,pointer:l}=this,{inverted:c,plotLeft:h,plotTop:u,polar:d}=a,{plotX:f=0,plotY:p=0}=n,m={},g=c&&n.h||0,{height:b,width:v}=this.getPlayingField(),y=l.getChartPosition(),x=e=>e*y.scaleX,S=e=>e*y.scaleY,w=n=>{let i="x"===n;return[n,i?v:b,i?e:t].concat(o?[i?x(e):S(t),i?y.left-r+x(f+h):y.top-r+S(p+u),0,i?v:b]:[i?e:t,i?f+h:p+u,i?h:u,i?h+a.plotWidth:u+a.plotHeight])},E=w("y"),_=w("x"),T=!!n.negative;!d&&(null===(i=a.hoverSeries)||void 0===i||null===(i=i.yAxis)||void 0===i?void 0:i.reversed)&&(T=!T);let M=!this.followPointer&&dr(n.ttBelow,!d&&!c===T),C=function(e,t,n,i,s,a,l){let c=o?"y"===e?S(r):x(r):r,h=(n-i)/2,u=i<s-r,d=s+r+i<t,f=s-c-n+h,p=s+c-h;if(M&&d)m[e]=p;else if(!M&&u)m[e]=f;else if(u)m[e]=Math.min(l-i,f-g<0?f:f-g);else{if(!d)return m[e]=0,!1;m[e]=Math.max(a,p+g+n>t?p:p+g)}},A=function(e,t,n,i,s){if(s<r||s>t-r)return!1;m[e]=s<n/2?1:s>t-i/2?t-i-2:s-n/2},P=function(e){[E,_]=[_,E],s=e},N=()=>{!1!==C.apply(0,E)?!1!==A.apply(0,_)||s||(P(!0),N()):s?m.x=m.y=0:(P(!0),N())};return(c&&!d||this.len>1)&&P(),N(),m}getFixedPosition(e,t,n){var i;let s=n.series,{chart:r,options:a,split:o}=this,l=a.position,c=l.relativeTo,h=a.shared||null!==s&&void 0!==s&&null!==(i=s.yAxis)&&void 0!==i&&i.isRadial&&("pane"===c||!c)?"plotBox":c,u="chart"===h?r.renderer:r[h]||r.getClipBox(s,!0);return{x:u.x+(u.width-e)*ar(l.align)+l.x,y:u.y+(u.height-t)*ar(l.verticalAlign)+(!o&&l.y||0)}}hide(e){let t=this;K.clearTimeout(this.hideTimer),e=dr(e,this.options.hideDelay),this.isHidden||(this.hideTimer=mr((function(){let n=t.getLabel();t.getLabel().animate({opacity:0},{duration:e?150:e,complete:()=>{n.hide(),t.container&&t.container.remove()}}),t.isHidden=!0}),e))}init(e,t){this.chart=e,this.options=t,this.crosshairs=[],this.isHidden=!0,this.split=t.split&&!e.inverted&&!e.polar,this.shared=t.shared||this.split,this.outside=dr(t.outside,!(!e.scrollablePixelsX&&!e.scrollablePixelsY))}shouldStickOnContact(e){return!(this.followPointer||!this.options.stickOnContact||e&&!this.pointer.inClass(e.target,"highcharts-tooltip"))}move(e,t,n,i){let{followPointer:s,options:r}=this,a=Ys(!s&&!this.isHidden&&!r.fixed&&r.animation),o={x:e,y:t};s||(this.len||0)>1?o.anchorX=o.anchorY=NaN:(o.anchorX=n,o.anchorY=i),a.step=()=>this.drawTracker(),this.getLabel().animate(o,a)}refresh(e,t){let{chart:n,options:i,pointer:s,shared:r}=this,a=pr(e),o=a[0],l=i.format,c=i.formatter||this.defaultFormatter,h=n.styledMode,u=this.allowShared;if(!i.enabled||!o.series)return;K.clearTimeout(this.hideTimer),this.allowShared=!(!or(e)&&e.series&&e.series.noSharedTooltip),u=u&&!this.allowShared,this.followPointer=!this.split&&o.series.tooltipOptions.followPointer;let d=this.getAnchor(e,t),f=d[0],p=d[1];r&&this.allowShared&&(s.applyInactiveState(a),a.forEach((e=>e.setState("hover"))),o.points=a),this.len=a.length;let m=hr(l)?qs(l,o,n):c.call(o,this);o.points=void 0;let g=o.series;if(this.distance=dr(g.tooltipOptions.distance,16),!1===m)this.hide();else{if(this.split&&this.allowShared)this.renderSplit(m,a);else{let e=f,r=p;if(t&&s.isDirectTouch&&(e=t.chartX-n.plotLeft,r=t.chartY-n.plotTop),!n.polar&&!1!==g.options.clip&&!a.some((t=>s.isDirectTouch||t.series.shouldShowTooltip(e,r))))return void this.hide();{let e=this.getLabel(u&&this.tt||{});(!i.style.width||h)&&e.css({width:(this.outside?this.getPlayingField():n.spacingBox).width+"px"}),e.attr({class:this.getClassName(o),text:m&&m.join?m.join(""):m}),this.outside&&e.attr({x:tr(e.x||0,0,this.getPlayingField().width-(e.width||0)-1)}),h||e.attr({stroke:i.borderColor||o.color||g.color||"#666666"}),this.updatePosition({plotX:f,plotY:p,negative:o.negative,ttBelow:o.ttBelow,series:g,h:d[2]||0})}}this.isHidden&&this.label&&this.label.attr({opacity:1}).show(),this.isHidden=!1}rr(this,"refresh")}renderSplit(e,t){var n,i;let s=this,{chart:r,chart:{chartWidth:a,chartHeight:o,plotHeight:l,plotLeft:c,plotTop:h,scrollablePixelsY:u=0,scrollablePixelsX:d,styledMode:f},distance:p,options:m,options:{fixed:g,position:b,positioner:v},pointer:y}=s,{scrollLeft:x=0,scrollTop:S=0}=(null===(n=r.scrollablePlotArea)||void 0===n?void 0:n.scrollingContainer)||{},w=s.outside&&"number"!=typeof d?Zs.documentElement.getBoundingClientRect():{left:x,right:x+a,top:S,bottom:S+o},E=s.getLabel(),_=this.renderer||r.renderer,T=!(null===(i=r.xAxis[0])||void 0===i||!i.opposite),{left:M,top:C}=y.getChartPosition(),A=v||g,P=h+S,N=0,k=l-u,L=function(e,t,n){let i,r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(n.isHeader)r=T?0:k,i=tr(a[0]-e/2,w.left,w.right-e-(s.outside?M:0));else if(g&&n){let a=s.getFixedPosition(e,t,n);i=a.x,r=a.y-P}else r=a[1]-P,i=tr(i=o?a[0]-e-p:a[0]+p,o?i:w.left,w.right);return{x:i,y:r}};hr(e)&&(e=[!1,e]);let I=e.slice(0,t.length+1).reduce((function(e,n,i){if(!1!==n&&""!==n){let r=t[i-1]||{isHeader:!0,plotX:t[0].plotX,plotY:l,series:{}},a=r.isHeader,o=a?s:r.series,u=o.tt=function(e,t,n){let i=e,{isHeader:r,series:a}=t,o=a.tooltipOptions||m;if(!i){var l;let e={padding:o.padding,r:o.borderRadius};f||(e.fill=o.backgroundColor,e["stroke-width"]=null!==(l=o.borderWidth)&&void 0!==l?l:g&&!r?0:1),i=_.label("",0,0,o[r?"headerShape":"shape"]||(g&&!r?"rect":"callout"),void 0,void 0,o.useHTML).addClass(s.getClassName(t,!0,r)).attr(e).add(E)}return i.isActive=!0,i.attr({text:n}),f||i.css(o.style).attr({stroke:o.borderColor||t.color||a.color||"#333333"}),i}(o.tt,r,n.toString()),d=u.getBBox(),b=d.width+u.strokeWidth();a&&(N=d.height,k+=N,T&&(P-=N));let{anchorX:y,anchorY:x}=function(e){let t,n,{isHeader:i,plotX:s=0,plotY:r=0,series:a}=e;if(i)t=Math.max(c+s,c),n=h+l/2;else{let{xAxis:e,yAxis:i}=a;t=e.pos+tr(s,-p,e.len+p),a.shouldShowTooltip(0,i.pos-h+r,{ignoreX:!0})&&(n=i.pos+r)}return{anchorX:t=tr(t,w.left-p,w.right+p),anchorY:n}}(r);if("number"==typeof x){let t=d.height+1,n=(v||L).call(s,b,t,r,[y,x]);e.push({align:A?0:void 0,anchorX:y,anchorY:x,boxWidth:b,point:r,rank:dr(n.rank,+!!a),size:t,target:n.y,tt:u,x:n.x})}else u.isActive=!1}return e}),[]);!A&&I.some((e=>{let{outside:t}=s,n=(t?M:0)+e.anchorX;return n<w.left&&n+e.boxWidth<w.right||n<M-w.left+e.boxWidth&&w.right-n>n}))&&(I=I.map((e=>{let{x:t,y:n}=L.call(this,e.boxWidth,e.size,e.point,[e.anchorX,e.anchorY],!1);return sr(e,{target:n,x:t})}))),s.cleanSplit(),Js(I,k);let R={left:M,right:M};I.forEach((function(e){let{x:t,boxWidth:n,isHeader:i}=e;!i&&(s.outside&&M+t<R.left&&(R.left=M+t),!i&&s.outside&&R.left+n>R.right&&(R.right=M+t))})),I.forEach((function(e){let{x:t,anchorX:n,anchorY:i,pos:r,point:{isHeader:a}}=e,o={visibility:void 0===r?"hidden":"inherit",x:t,y:(r||0)+P+(g&&b.y||0),anchorX:n,anchorY:i};if(s.outside&&t<n){let e=M-R.left;e>0&&(a||(o.x=t+e,o.anchorX=n+e),a&&(o.x=(R.right-R.left)/2,o.anchorX=n+e))}e.tt.attr(o)}));let{container:O,outside:D,renderer:F}=s;if(D&&O&&F){let{width:e,height:t,x:n,y:i}=E.getBBox();F.setSize(e+n,t+i,!1),O.style.left=R.left+"px",O.style.top=C+"px"}Qs&&E.attr({opacity:1===E.opacity?.999:1})}drawTracker(){if(!this.shouldStickOnContact())return void(this.tracker&&(this.tracker=this.tracker.destroy()));let e=this.chart,t=this.label,n=this.shared?e.hoverPoints:e.hoverPoint;if(!t||!n)return;let i={x:0,y:0,width:0,height:0},s=this.getAnchor(n),r=t.getBBox();s[0]+=e.plotLeft-(t.translateX||0),s[1]+=e.plotTop-(t.translateY||0),i.x=Math.min(0,s[0]),i.y=Math.min(0,s[1]),i.width=s[0]<0?Math.max(Math.abs(s[0]),r.width-s[0]):Math.max(Math.abs(s[0]),r.width),i.height=s[1]<0?Math.max(Math.abs(s[1]),r.height-Math.abs(s[1])):Math.max(Math.abs(s[1]),r.height),this.tracker?this.tracker.attr(i):(this.tracker=t.renderer.rect(i).addClass("highcharts-tracker").add(t),e.styledMode||this.tracker.attr({fill:"rgba(0,0,0,0)"}))}styledModeFormat(e){return e.replace('style="font-size: 0.8em"','class="highcharts-header"').replace(/style="color:{(point|series)\.color}"/g,'class="highcharts-color-{$1.colorIndex} {series.options.className} {point.options.className}"')}headerFooterFormatter(e,t){let n=e.series,i=n.tooltipOptions,s=n.xAxis,r=null===s||void 0===s?void 0:s.dateTime,a={isFooter:t,point:e},o=i.xDateFormat||"",l=i[t?"footerFormat":"headerFormat"];return rr(this,"headerFormatter",a,(function(t){if(r&&!o&&lr(e.key)&&(o=r.getXDateFormat(e.key,i.dateTimeLabelFormats)),r&&o){if(cr(o)){let e=o;$s[0]=t=>n.chart.time.dateFormat(e,t),o="%0"}(e.tooltipDateKeys||["key"]).forEach((e=>{l=l.replace(RegExp("point\\."+e+"([ \\)}])"),"(point.".concat(e,":").concat(o,")$1"))}))}n.chart.styledMode&&(l=this.styledModeFormat(l)),t.text=qs(l,e,this.chart)})),a.text||""}update(e){this.destroy(),this.init(this.chart,ur(!0,this.options,e))}updatePosition(e){let t,{chart:n,container:i,distance:s,options:r,pointer:a,renderer:o}=this,{height:l=0,width:c=0}=this.getLabel(),{fixed:h,positioner:u}=r,{left:d,top:f,scaleX:p,scaleY:m}=a.getChartPosition(),g=(u||h&&this.getFixedPosition||this.getPosition).call(this,c,l,e),b=_.doc,v=(e.plotX||0)+n.plotLeft,y=(e.plotY||0)+n.plotTop;if(o&&i){if(u||h){var x;let{scrollLeft:e=0,scrollTop:t=0}=(null===(x=n.scrollablePlotArea)||void 0===x?void 0:x.scrollingContainer)||{};g.x+=e+d-s,g.y+=t+f-s}t=(r.borderWidth||0)+2*s+2,o.setSize(tr(c+t,0,b.documentElement.clientWidth)-1,l+t,!1),(1!==p||1!==m)&&(nr(i,{transform:"scale(".concat(p,", ").concat(m,")")}),v*=p,y*=m),v+=d-g.x,y+=f-g.y}this.move(Math.round(g.x),Math.round(g.y||0),v,y)}}!function(e){e.compose=function(t){fr(Ks,"Core.Tooltip")&&er(t,"afterInit",(function(){let t=this.chart;t.options.tooltip&&(t.tooltip=new e(t,t.options.tooltip,this))}))}}(gr||(gr={}));let br=gr,{animObject:vr}=Xe,{defaultOptions:yr}=Se,{format:xr}=Et,{addEvent:Sr,crisp:wr,erase:Er,extend:_r,fireEvent:Tr,getNestedProperty:Mr,isArray:Cr,isFunction:Ar,isNumber:Pr,isObject:Nr,merge:kr,pick:Lr,syncTimeout:Ir,removeEvent:Rr,uniqueKey:Or}=K;class Dr{animateBeforeDestroy(){let e=this,t={x:e.startXPos,opacity:0},n=e.getGraphicalProps();n.singular.forEach((function(n){e[n]=e[n].animate("dataLabel"===n?{x:e[n].startXPos,y:e[n].startYPos,opacity:0}:t)})),n.plural.forEach((function(t){e[t].forEach((function(t){t.element&&t.animate(_r({x:e.startXPos},t.startYPos?{x:t.startXPos,y:t.startYPos}:{}))}))}))}applyOptions(e,t){let n=this.series,i=n.options.pointValKey||n.pointValKey;return _r(this,e=Dr.prototype.optionsToObject.call(this,e)),this.options=this.options?_r(this.options,e):e,e.group&&delete this.group,e.dataLabels&&delete this.dataLabels,i&&(this.y=Dr.prototype.getNestedProperty.call(this,i)),this.selected&&(this.state="select"),"name"in this&&void 0===t&&n.xAxis&&n.xAxis.hasNames&&(this.x=n.xAxis.nameToX(this)),void 0===this.x&&n?this.x=null!==t&&void 0!==t?t:n.autoIncrement():Pr(e.x)&&n.options.relativeXValue?this.x=n.autoIncrement(e.x):"string"==typeof this.x&&(null!==t&&void 0!==t||(t=n.chart.time.parse(this.x)),Pr(t)&&(this.x=t)),this.isNull=this.isValid&&!this.isValid(),this.formatPrefix=this.isNull?"null":"point",this}destroy(){if(!this.destroyed){let e=this,t=e.series,n=t.chart,i=t.options.dataSorting,s=n.hoverPoints,r=vr(e.series.chart.renderer.globalAnimation),a=()=>{for(let t in(e.graphic||e.graphics||e.dataLabel||e.dataLabels)&&(Rr(e),e.destroyElements()),e)delete e[t]};e.legendItem&&n.legend.destroyItem(e),s&&(e.setState(),Er(s,e),s.length||(n.hoverPoints=null)),e===n.hoverPoint&&e.onMouseOut(),null!==i&&void 0!==i&&i.enabled?(this.animateBeforeDestroy(),Ir(a,r.duration)):a(),n.pointCount--}this.destroyed=!0}destroyElements(e){let t=this,n=t.getGraphicalProps(e);n.singular.forEach((function(e){t[e]=t[e].destroy()})),n.plural.forEach((function(e){t[e].forEach((function(e){(null===e||void 0===e?void 0:e.element)&&e.destroy()})),delete t[e]}))}firePointEvent(e,t,n){let i=this,s=this.series.options;i.manageEvent(e),"click"===e&&s.allowPointSelect&&(n=function(e){!i.destroyed&&i.select&&i.select(null,e.ctrlKey||e.metaKey||e.shiftKey)}),Tr(i,e,t,n)}getClassName(){var e;return"highcharts-point"+(this.selected?" highcharts-point-select":"")+(this.negative?" highcharts-negative":"")+(this.isNull?" highcharts-null-point":"")+(void 0!==this.colorIndex?" highcharts-color-"+this.colorIndex:"")+(this.options.className?" "+this.options.className:"")+(null!==(e=this.zone)&&void 0!==e&&e.className?" "+this.zone.className.replace("highcharts-negative",""):"")}getGraphicalProps(e){let t,n,i=this,s=[],r={singular:[],plural:[]};for((e=e||{graphic:1,dataLabel:1}).graphic&&s.push("graphic","connector"),e.dataLabel&&s.push("dataLabel","dataLabelPath","dataLabelUpper"),n=s.length;n--;)i[t=s[n]]&&r.singular.push(t);return["graphic","dataLabel"].forEach((function(t){let n=t+"s";e[t]&&i[n]&&r.plural.push(n)})),r}getNestedProperty(e){if(e)return 0===e.indexOf("custom.")?Mr(e,this.options):this[e]}getZone(){var e;let t,n=this.series,i=n.zones,s=n.zoneAxis||"y",r=0;for(t=i[0];this[s]>=t.value;)t=i[++r];return this.nonZonedColor||(this.nonZonedColor=this.color),null!==(e=t)&&void 0!==e&&e.color&&!this.options.color?this.color=t.color:this.color=this.nonZonedColor,t}hasNewShapeType(){return(this.graphic&&(this.graphic.symbolName||this.graphic.element.nodeName))!==this.shapeType}constructor(e,t,n){var i,s;this.formatPrefix="point",this.visible=!0,this.point=this,this.series=e,this.applyOptions(t,n),null!==(i=this.id)&&void 0!==i||(this.id=Or()),this.resolveColor(),null!==(s=this.dataLabelOnNull)&&void 0!==s||(this.dataLabelOnNull=e.options.nullInteraction),e.chart.pointCount++,Tr(this,"afterInit")}isValid(){return(Pr(this.x)||this.x instanceof Date)&&Pr(this.y)}optionsToObject(e){let t,n=this.series,i=n.options.keys,s=i||n.pointArrayMap||["y"],r=s.length,a={},o=0,l=0;if(Pr(e)||null===e)a[s[0]]=e;else if(Cr(e))for(!i&&e.length>r&&("string"==(t=typeof e[0])?null!==(c=n.xAxis)&&void 0!==c&&c.dateTime?a.x=n.chart.time.parse(e[0]):a.name=e[0]:"number"===t&&(a.x=e[0]),o++);l<r;){var c;i&&void 0===e[o]||(s[l].indexOf(".")>0?Dr.prototype.setNestedProperty(a,e[o],s[l]):a[s[l]]=e[o]),o++,l++}else"object"==typeof e&&(a=e,e.dataLabels&&(n.hasDataLabels=()=>!0),e.marker&&(n._hasPointMarkers=!0));return a}pos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.plotY;if(!this.destroyed){let{plotX:n,series:i}=this,{chart:s,xAxis:r,yAxis:a}=i,o=0,l=0;if(Pr(n)&&Pr(t))return e&&(o=r?r.pos:s.plotLeft,l=a?a.pos:s.plotTop),s.inverted&&r&&a?[a.len-t+l,r.len-n+o]:[n+o,t+l]}}resolveColor(){let e,t,n,i=this.series,s=i.chart.options.chart,r=i.chart.styledMode,a=s.colorCount;delete this.nonZonedColor,i.options.colorByPoint?(r||(e=(t=i.options.colors||i.chart.options.colors)[i.colorCounter],a=t.length),n=i.colorCounter,i.colorCounter++,i.colorCounter===a&&(i.colorCounter=0)):(r||(e=i.color),n=i.colorIndex),this.colorIndex=Lr(this.options.colorIndex,n),this.color=Lr(this.options.color,e)}setNestedProperty(e,t,n){return n.split(".").reduce((function(e,n,i,s){let r=s.length-1===i;return e[n]=r?t:Nr(e[n],!0)?e[n]:{},e[n]}),e),e}shouldDraw(){return!this.isNull}tooltipFormatter(e){var t;let{chart:n,pointArrayMap:i=["y"],tooltipOptions:s}=this.series,{valueDecimals:r="",valuePrefix:a="",valueSuffix:o=""}=s;return n.styledMode&&(e=(null===(t=n.tooltip)||void 0===t?void 0:t.styledModeFormat(e))||e),i.forEach((t=>{t="{point."+t,(a||o)&&(e=e.replace(RegExp(t+"}","g"),a+t+"}"+o)),e=e.replace(RegExp(t+"}","g"),t+":,."+r+"f}")})),xr(e,this,n)}update(e,t,n,i){let s,r=this,a=r.series,o=r.graphic,l=a.chart,c=a.options;function h(){r.applyOptions(e);let i=o&&r.hasMockGraphic,h=null===r.y?!i:i;o&&h&&(r.graphic=o.destroy(),delete r.hasMockGraphic),Nr(e,!0)&&(null!==o&&void 0!==o&&o.element&&e&&e.marker&&void 0!==e.marker.symbol&&(r.graphic=o.destroy()),null!==e&&void 0!==e&&e.dataLabels&&r.dataLabel&&(r.dataLabel=r.dataLabel.destroy())),s=r.index;let u={};for(let e of a.dataColumnKeys())u[e]=r[e];a.dataTable.setRow(u,s),c.data[s]=Nr(c.data[s],!0)||Nr(e,!0)?r.options:Lr(e,c.data[s]),a.isDirty=a.isDirtyData=!0,!a.fixedBox&&a.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===c.legendType&&(l.isDirtyLegend=!0),t&&l.redraw(n)}t=Lr(t,!0),!1===i?h():r.firePointEvent("update",{options:e},h)}remove(e,t){this.series.removePoint(this.series.data.indexOf(this),e,t)}select(e,t){let n=this,i=n.series,s=i.chart;e=Lr(e,!n.selected),this.selectedStaging=e,n.firePointEvent(e?"select":"unselect",{accumulate:t},(function(){n.selected=n.options.selected=e,i.options.data[i.data.indexOf(n)]=n.options,n.setState(e&&"select"),t||s.getSelectedPoints().forEach((function(e){let t=e.series;e.selected&&e!==n&&(e.selected=e.options.selected=!1,t.options.data[t.data.indexOf(e)]=e.options,e.setState(s.hoverPoints&&t.options.inactiveOtherPoints?"inactive":""),e.firePointEvent("unselect"))}))})),delete this.selectedStaging}onMouseOver(e){let{inverted:t,pointer:n}=this.series.chart;n&&(e=e?n.normalize(e):n.getChartCoordinatesFromPoint(this,t),n.runPointActions(e,this))}onMouseOut(){let e=this.series.chart;this.firePointEvent("mouseOut"),this.series.options.inactiveOtherPoints||(e.hoverPoints||[]).forEach((function(e){e.setState()})),e.hoverPoints=e.hoverPoint=null}manageEvent(e){var t,n,i,s,r,a;let o=null===(t=kr(this.series.options.point,this.options).events)||void 0===t?void 0:t[e];!Ar(o)||null!==(n=this.hcEvents)&&void 0!==n&&n[e]&&-1!==(null===(i=this.hcEvents)||void 0===i||null===(i=i[e])||void 0===i?void 0:i.map((e=>e.fn)).indexOf(o))?this.importedUserEvent&&!o&&(null===(r=this.hcEvents)||void 0===r?void 0:r[e])&&(null===(a=this.hcEvents)||void 0===a?void 0:a[e].userEvent)&&(Rr(this,e),delete this.hcEvents[e],Object.keys(this.hcEvents)||delete this.importedUserEvent):(null!==(s=this.importedUserEvent)&&void 0!==s&&s.call(this),this.importedUserEvent=Sr(this,e,o),this.hcEvents&&(this.hcEvents[e].userEvent=!0))}setState(e,t){var n,i;let s,r,a,o,l=this.series,c=this.state,h=l.options.states[e||"normal"]||{},u=yr.plotOptions[l.type].marker&&l.options.marker,d=u&&!1===u.enabled,f=(null===u||void 0===u||null===(n=u.states)||void 0===n?void 0:n[e||"normal"])||{},p=!1===f.enabled,m=this.marker||{},g=l.chart,b=u&&l.markerAttribs,v=l.halo,y=l.stateMarkerGraphic;if((e=e||"")===this.state&&!t||this.selected&&"select"!==e||!1===h.enabled||e&&(p||d&&!1===f.enabled)||e&&m.states&&m.states[e]&&!1===m.states[e].enabled)return;if(this.state=e,b&&(s=l.markerAttribs(this,e)),this.graphic&&!this.hasMockGraphic){if(c&&this.graphic.removeClass("highcharts-point-"+c),e&&this.graphic.addClass("highcharts-point-"+e),!g.styledMode){r=l.pointAttribs(this,e),a=Lr(g.options.chart.animation,h.animation);let t=r.opacity;l.options.inactiveOtherPoints&&Pr(t)&&(this.dataLabels||[]).forEach((function(e){e&&!e.hasClass("highcharts-data-label-hidden")&&(e.animate({opacity:t},a),e.connector&&e.connector.animate({opacity:t},a))})),this.graphic.animate(r,a)}s&&this.graphic.animate(s,Lr(g.options.chart.animation,f.animation,u.animation)),y&&y.hide()}else e&&f&&(o=m.symbol||l.symbol,y&&y.currentSymbol!==o&&(y=y.destroy()),s&&(y?y[t?"animate":"attr"]({x:s.x,y:s.y}):o&&(l.stateMarkerGraphic=y=g.renderer.symbol(o,s.x,s.y,s.width,s.height,kr(u,f)).add(l.markerGroup),y.currentSymbol=o)),!g.styledMode&&y&&"inactive"!==this.state&&y.attr(l.pointAttribs(this,e))),y&&(y[e&&this.isInside?"show":"hide"](),y.element.point=this,y.addClass(this.getClassName(),!0));let x=h.halo,S=this.graphic||y,w=(null===S||void 0===S?void 0:S.visibility)||"inherit";null!==x&&void 0!==x&&x.size&&S&&"hidden"!==w&&!this.isCluster?(v||(l.halo=v=g.renderer.path().add(S.parentGroup)),v.show()[t?"animate":"attr"]({d:this.haloPath(x.size)}),v.attr({class:"highcharts-halo highcharts-color-"+Lr(this.colorIndex,l.colorIndex)+(this.className?" "+this.className:""),visibility:w,zIndex:-1}),v.point=this,g.styledMode||v.attr(_r({fill:this.color||l.color,"fill-opacity":x.opacity},at.filterUserAttributes(x.attributes||{})))):(null===(i=v)||void 0===i||null===(i=i.point)||void 0===i?void 0:i.haloPath)&&!v.point.destroyed&&v.animate({d:v.point.haloPath(0)},null,v.hide),Tr(this,"afterSetState",{state:e})}haloPath(e){let t=this.pos();return t?this.series.chart.renderer.symbols.circle(wr(t[0],1)-e,t[1]-e,2*e,2*e):[]}}let Fr=Dr,{parse:Br}=Ne,{charts:jr,composed:Vr,isTouchDevice:Gr}=_,{addEvent:Wr,attr:zr,css:Ur,extend:Hr,find:Xr,fireEvent:Yr,isNumber:qr,isObject:Kr,objectEach:$r,offset:Zr,pick:Qr,pushUnique:Jr,splat:ea}=K;class ta{applyInactiveState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];for(let i of(e.forEach((e=>{let n=e.series;t.push(n),n.linkedParent&&t.push(n.linkedParent),n.linkedSeries&&t.push.apply(t,n.linkedSeries),n.navigatorSeries&&t.push(n.navigatorSeries),n.boosted&&n.markerGroup&&t.push.apply(t,this.chart.series.filter((e=>e.markerGroup===n.markerGroup)))})),this.chart.series)){var n;let e=i.options;!1!==(null===(n=e.states)||void 0===n||null===(n=n.inactive)||void 0===n?void 0:n.enabled)&&(-1===t.indexOf(i)?i.setState("inactive",!0):e.inactiveOtherPoints&&i.setAllPointsToState("inactive"))}}destroy(){let e=this;this.eventsToUnbind.forEach((e=>e())),this.eventsToUnbind=[],!_.chartCount&&(ta.unbindDocumentMouseUp.forEach((e=>e.unbind())),ta.unbindDocumentMouseUp.length=0,ta.unbindDocumentTouchEnd&&(ta.unbindDocumentTouchEnd=ta.unbindDocumentTouchEnd())),clearInterval(e.tooltipTimeout),$r(e,(function(t,n){e[n]=void 0}))}getSelectionMarkerAttrs(e,t){let n={args:{chartX:e,chartY:t},attrs:{},shapeType:"rect"};return Yr(this,"getSelectionMarkerAttrs",n,(n=>{let i,{chart:s,zoomHor:r,zoomVert:a}=this,{mouseDownX:o=0,mouseDownY:l=0}=s,c=n.attrs;c.x=s.plotLeft,c.y=s.plotTop,c.width=r?1:s.plotWidth,c.height=a?1:s.plotHeight,r&&(c.width=Math.max(1,Math.abs(i=e-o)),c.x=(i>0?0:i)+o),a&&(c.height=Math.max(1,Math.abs(i=t-l)),c.y=(i>0?0:i)+l)})),n}drag(e){let t,{chart:n}=this,{mouseDownX:i=0,mouseDownY:s=0}=n,{panning:r,panKey:a,selectionMarkerFill:o}=n.options.chart,l=n.plotLeft,c=n.plotTop,h=n.plotWidth,u=n.plotHeight,d=Kr(r)?r.enabled:r,f=a&&e["".concat(a,"Key")],p=e.chartX,m=e.chartY,g=this.selectionMarker;if((!g||!g.touch)&&(p<l?p=l:p>l+h&&(p=l+h),m<c?m=c:m>c+u&&(m=c+u),this.hasDragged=Math.sqrt(Math.pow(i-p,2)+Math.pow(s-m,2)),this.hasDragged>10)){t=n.isInsidePlot(i-l,s-c,{visiblePlotOnly:!0});let{shapeType:a,attrs:h}=this.getSelectionMarkerAttrs(p,m);this.hasZoom&&t&&!f&&!g&&(this.selectionMarker=g=n.renderer[a](),g.attr({class:"highcharts-selection-marker",zIndex:7}).add(),n.styledMode||g.attr({fill:o||Br("#334eff").setOpacity(.25).get()})),g&&g.attr(h),t&&!g&&d&&n.pan(e,r)}}dragStart(e){let t=this.chart;t.mouseIsDown=e.type,t.cancelClick=!1,t.mouseDownX=e.chartX,t.mouseDownY=e.chartY}getSelectionBox(e){let t={args:{marker:e},result:e.getBBox()};return Yr(this,"getSelectionBox",t),t.result}drop(e){let t,{chart:n,selectionMarker:i}=this;for(let s of n.axes)s.isPanning&&(s.isPanning=!1,(s.options.startOnTick||s.options.endOnTick||s.series.some((e=>e.boosted)))&&(s.forceRedraw=!0,s.setExtremes(s.userMin,s.userMax,!1),t=!0));if(t&&n.redraw(),i&&e){if(this.hasDragged){let t=this.getSelectionBox(i);n.transform({axes:n.axes.filter((e=>e.zoomEnabled&&("xAxis"===e.coll&&this.zoomX||"yAxis"===e.coll&&this.zoomY))),selection:r({originalEvent:e,xAxis:[],yAxis:[]},t),from:t})}qr(n.index)&&(this.selectionMarker=i.destroy())}n&&qr(n.index)&&(Ur(n.container,{cursor:n._cursor}),n.cancelClick=this.hasDragged>10,n.mouseIsDown=!1,this.hasDragged=0,this.pinchDown=[],this.hasPinchMoved=!1)}findNearestKDPoint(e,t,n){let i;return e.forEach((function(e){let s=!(e.noSharedTooltip&&t)&&0>e.options.findNearestPointBy.indexOf("y"),r=e.searchPoint(n,s);Kr(r,!0)&&r.series&&(!Kr(i,!0)||function(e,n,i,s){let r=e.distX-n.distX,a=e.dist-n.dist,o=(null===(i=n.series.group)||void 0===i?void 0:i.zIndex)-(null===(s=e.series.group)||void 0===s?void 0:s.zIndex);return 0!==r&&t?r:0!==a?a:0!==o?o:e.series.index>n.series.index?-1:1}(i,r)>0)&&(i=r)})),i}getChartCoordinatesFromPoint(e,t){let{xAxis:n,yAxis:i}=e.series,s=e.shapeArgs;if(n&&i){var r,a;let o=null!==(r=null!==(a=e.clientX)&&void 0!==a?a:e.plotX)&&void 0!==r?r:0,l=e.plotY||0;return e.isNode&&s&&qr(s.x)&&qr(s.y)&&(o=s.x,l=s.y),t?{chartX:i.len+i.pos-l,chartY:n.len+n.pos-o}:{chartX:o+n.pos,chartY:l+i.pos}}if(null!==s&&void 0!==s&&s.x&&s.y)return{chartX:s.x,chartY:s.y}}getChartPosition(){if(this.chartPosition)return this.chartPosition;let{container:e}=this.chart,t=Zr(e);this.chartPosition={left:t.left,top:t.top,scaleX:1,scaleY:1};let{offsetHeight:n,offsetWidth:i}=e;return i>2&&n>2&&(this.chartPosition.scaleX=t.width/i,this.chartPosition.scaleY=t.height/n),this.chartPosition}getCoordinates(e){let t={xAxis:[],yAxis:[]};for(let n of this.chart.axes)t[n.isXAxis?"xAxis":"yAxis"].push({axis:n,value:n.toValue(e[n.horiz?"chartX":"chartY"])});return t}getHoverData(e,t,n,i,s,r){let a,o=[],l=function(e){return e.visible&&!(!s&&e.directTouch)&&Qr(e.options.enableMouseTracking,!0)},c=t,h={chartX:r?r.chartX:void 0,chartY:r?r.chartY:void 0,shared:s};Yr(this,"beforeGetHoverData",h),a=c&&!c.stickyTracking?[c]:n.filter((e=>e.stickyTracking&&(h.filter||l)(e)));let u=i&&e||!r?e:this.findNearestKDPoint(a,s,r);return c=null===u||void 0===u?void 0:u.series,u&&(s&&!c.noSharedTooltip?(a=n.filter((function(e){return h.filter?h.filter(e):l(e)&&!e.noSharedTooltip}))).forEach((function(e){var t;let n=null===(t=e.options)||void 0===t?void 0:t.nullInteraction,i=Xr(e.points,(function(e){return e.x===u.x&&(!e.isNull||!!n)}));Kr(i)&&(e.boosted&&e.boost&&(i=e.boost.getPoint(i)),o.push(i))})):o.push(u)),Yr(this,"afterGetHoverData",h={hoverPoint:u}),{hoverPoint:h.hoverPoint,hoverSeries:c,hoverPoints:o}}getPointFromEvent(e){let t,n=e.target;for(;n&&!t;)t=n.point,n=n.parentNode;return t}onTrackerMouseOut(e){let t=this.chart,n=e.relatedTarget,i=t.hoverSeries;this.isDirectTouch=!1,!i||!n||i.stickyTracking||this.inClass(n,"highcharts-tooltip")||this.inClass(n,"highcharts-series-"+i.index)&&this.inClass(n,"highcharts-tracker")||i.onMouseOut()}inClass(e,t){let n,i=e;for(;i;){if(n=zr(i,"class")){if(-1!==n.indexOf(t))return!0;if(-1!==n.indexOf("highcharts-container"))return!1}i=i.parentElement}}constructor(e,t){var n;this.hasDragged=0,this.pointerCaptureEventsToUnbind=[],this.eventsToUnbind=[],this.options=t,this.chart=e,this.runChartClick=!(null===(n=t.chart.events)||void 0===n||!n.click),this.pinchDown=[],this.setDOMEvents(),Yr(this,"afterInit")}normalize(e,t){let n=e.touches,i=n?n.length?n.item(0):Qr(n.changedTouches,e.changedTouches)[0]:e;t||(t=this.getChartPosition());let s=i.pageX-t.left,r=i.pageY-t.top;return Hr(e,{chartX:Math.round(s/=t.scaleX),chartY:Math.round(r/=t.scaleY)})}onContainerClick(e){let t=this.chart,n=t.hoverPoint,i=this.normalize(e),s=t.plotLeft,r=t.plotTop;!t.cancelClick&&(n&&this.inClass(i.target,"highcharts-tracker")?(Yr(n.series,"click",Hr(i,{point:n})),t.hoverPoint&&n.firePointEvent("click",i)):(Hr(i,this.getCoordinates(i)),t.isInsidePlot(i.chartX-s,i.chartY-r,{visiblePlotOnly:!0})&&Yr(t,"click",i)))}onContainerMouseDown(e){var t,n;let i=1==(1&(e.buttons||e.button));e=this.normalize(e),_.isFirefox&&0!==e.button&&this.onContainerMouseMove(e),(void 0===e.button||i)&&(this.zoomOption(e),i&&null!==(t=(n=e).preventDefault)&&void 0!==t&&t.call(n),this.dragStart(e))}onContainerMouseLeave(e){let{pointer:t}=jr[Qr(ta.hoverChartIndex,-1)]||{};e=this.normalize(e),this.onContainerMouseMove(e),t&&!this.inClass(e.relatedTarget,"highcharts-tooltip")&&(t.reset(),t.chartPosition=void 0)}onContainerMouseEnter(){delete this.chartPosition}onContainerMouseMove(e){var t;let n=this.chart,i=n.tooltip,s=this.normalize(e);this.setHoverChartIndex(e),("mousedown"===n.mouseIsDown||this.touchSelect(s))&&this.drag(s),(null===(t=n.exporting)||void 0===t||!t.openMenu)&&(this.inClass(s.target,"highcharts-tracker")||n.isInsidePlot(s.chartX-n.plotLeft,s.chartY-n.plotTop,{visiblePlotOnly:!0}))&&(null===i||void 0===i||!i.shouldStickOnContact(s))&&(this.inClass(s.target,"highcharts-no-tooltip")?this.reset(!1,0):this.runPointActions(s))}onDocumentTouchEnd(e){this.onDocumentMouseUp(e)}onContainerTouchMove(e){this.touchSelect(e)?this.onContainerMouseMove(e):this.touch(e)}onContainerTouchStart(e){this.touchSelect(e)?this.onContainerMouseDown(e):(this.zoomOption(e),this.touch(e,!0))}onDocumentMouseMove(e){let t=this.chart,n=t.tooltip,i=this.chartPosition,s=this.normalize(e,i);!i||t.isInsidePlot(s.chartX-t.plotLeft,s.chartY-t.plotTop,{visiblePlotOnly:!0})||(null===n||void 0===n?void 0:n.shouldStickOnContact(s))||s.target!==t.container.ownerDocument&&this.inClass(s.target,"highcharts-tracker")||this.reset()}onDocumentMouseUp(e){var t,n;null!==e&&void 0!==e&&e.touches&&this.hasPinchMoved&&null!==e&&void 0!==e&&null!==(t=e.preventDefault)&&void 0!==t&&t.call(e),null===(n=jr[Qr(ta.hoverChartIndex,-1)])||void 0===n||null===(n=n.pointer)||void 0===n||n.drop(e)}pinch(e){let t=this,{chart:n,hasZoom:i,lastTouches:s}=t,r=[].map.call(e.touches||[],(e=>t.normalize(e))),a=r.length,o=1===a&&(t.inClass(e.target,"highcharts-tracker")&&n.runTrackerClick||t.runChartClick),l=n.tooltip,c=1===a&&Qr(null===l||void 0===l?void 0:l.options.followTouchMove,!0);a>1?t.initiated=!0:c&&(t.initiated=!1),i&&t.initiated&&!o&&!1!==e.cancelable&&e.preventDefault(),"touchstart"===e.type?(t.pinchDown=r,t.res=!0,n.mouseDownX=e.chartX):c?this.runPointActions(t.normalize(e)):s&&(Yr(n,"touchpan",{originalEvent:e,touches:r},(()=>{let t=e=>{let t=e[0],n=e[1]||t;return{x:t.chartX,y:t.chartY,width:n.chartX-t.chartX,height:n.chartY-t.chartY}};n.transform({axes:n.axes.filter((e=>e.zoomEnabled&&(this.zoomHor&&e.horiz||this.zoomVert&&!e.horiz))),to:t(r),from:t(s),trigger:e.type})})),t.res&&(t.res=!1,this.reset(!1,0))),t.lastTouches=r}reset(e,t){let n=this.chart,i=n.hoverSeries,s=n.hoverPoint,r=n.hoverPoints,a=n.tooltip,o=null!==a&&void 0!==a&&a.shared?r:s;e&&o&&ea(o).forEach((function(t){t.series.isCartesian&&void 0===t.plotX&&(e=!1)})),e?a&&o&&ea(o).length&&(a.refresh(o),a.shared&&r?r.forEach((function(e){e.setState(e.state,!0),e.series.isCartesian&&(e.series.xAxis.crosshair&&e.series.xAxis.drawCrosshair(null,e),e.series.yAxis.crosshair&&e.series.yAxis.drawCrosshair(null,e))})):s&&(s.setState(s.state,!0),n.axes.forEach((function(e){e.crosshair&&s.series[e.coll]===e&&e.drawCrosshair(null,s)})))):(s&&s.onMouseOut(),r&&r.forEach((function(e){e.setState()})),i&&i.onMouseOut(),a&&a.hide(t),this.unDocMouseMove&&(this.unDocMouseMove=this.unDocMouseMove()),n.axes.forEach((function(e){e.hideCrosshair()})),n.hoverPoints=n.hoverPoint=void 0)}runPointActions(e,t,n){var i,s,r,a;let o=this.chart,l=o.series,c=null!==(i=o.tooltip)&&void 0!==i&&i.options.enabled?o.tooltip:void 0,h=!!c&&c.shared,u=t||o.hoverPoint,d=(null===(s=u)||void 0===s?void 0:s.series)||o.hoverSeries,f=(!e||"touchmove"!==e.type)&&(!!t||(null===(r=d)||void 0===r?void 0:r.directTouch)&&this.isDirectTouch),p=this.getHoverData(u,d,l,f,h,e);u=p.hoverPoint,d=p.hoverSeries;let m=p.hoverPoints,g=(null===(a=d)||void 0===a?void 0:a.tooltipOptions.followPointer)&&!d.tooltipOptions.split,b=h&&d&&!d.noSharedTooltip;if(u&&(n||u!==o.hoverPoint||null!==c&&void 0!==c&&c.isHidden)){if((o.hoverPoints||[]).forEach((function(e){-1===m.indexOf(e)&&e.setState()})),o.hoverSeries!==d&&d.onMouseOver(),this.applyInactiveState(m),(m||[]).forEach((function(e){e.setState("hover")})),o.hoverPoint&&o.hoverPoint.firePointEvent("mouseOut"),!u.series)return;o.hoverPoints=m,o.hoverPoint=u,u.firePointEvent("mouseOver",void 0,(()=>{c&&u&&c.refresh(b?m:u,e)}))}else if(g&&c&&!c.isHidden){let t=c.getAnchor([{}],e);o.isInsidePlot(t[0],t[1],{visiblePlotOnly:!0})&&c.updatePosition({plotX:t[0],plotY:t[1]})}this.unDocMouseMove||(this.unDocMouseMove=Wr(o.container.ownerDocument,"mousemove",(e=>{var t,n;return null===(t=jr[null!==(n=ta.hoverChartIndex)&&void 0!==n?n:-1])||void 0===t||null===(t=t.pointer)||void 0===t?void 0:t.onDocumentMouseMove(e)})),this.eventsToUnbind.push(this.unDocMouseMove)),o.axes.forEach((function(t){var n,i;let s,r=null===(n=null===(i=t.crosshair)||void 0===i?void 0:i.snap)||void 0===n||n;r&&((s=o.hoverPoint)&&s.series[t.coll]===t||(s=Xr(m,(e=>{var n;return(null===(n=e.series)||void 0===n?void 0:n[t.coll])===t})))),s||!r?t.drawCrosshair(e,s):t.hideCrosshair()}))}setDOMEvents(){let e=this.chart.container,t=e.ownerDocument;e.onmousedown=this.onContainerMouseDown.bind(this),e.onmousemove=this.onContainerMouseMove.bind(this),e.onclick=this.onContainerClick.bind(this),this.eventsToUnbind.push(Wr(e,"mouseenter",this.onContainerMouseEnter.bind(this)),Wr(e,"mouseleave",this.onContainerMouseLeave.bind(this))),ta.unbindDocumentMouseUp.some((e=>e.doc===t))||ta.unbindDocumentMouseUp.push({doc:t,unbind:Wr(t,"mouseup",this.onDocumentMouseUp.bind(this))});let n=this.chart.renderTo.parentElement;for(;n&&"BODY"!==n.tagName;)this.eventsToUnbind.push(Wr(n,"scroll",(()=>{delete this.chartPosition}))),n=n.parentElement;this.eventsToUnbind.push(Wr(e,"touchstart",this.onContainerTouchStart.bind(this),{passive:!1}),Wr(e,"touchmove",this.onContainerTouchMove.bind(this),{passive:!1})),ta.unbindDocumentTouchEnd||(ta.unbindDocumentTouchEnd=Wr(t,"touchend",this.onDocumentTouchEnd.bind(this),{passive:!1})),this.setPointerCapture(),Wr(this.chart,"redraw",this.setPointerCapture.bind(this))}setPointerCapture(){var e,t;if(!Gr)return;let n=this.pointerCaptureEventsToUnbind,i=this.chart,s=i.container,r=Qr(null===(e=i.options.tooltip)||void 0===e?void 0:e.followTouchMove,!0)&&i.series.some((e=>e.options.findNearestPointBy.indexOf("y")>-1));!this.hasPointerCapture&&r?(n.push(Wr(s,"pointerdown",(e=>{var t,n;(null===(t=e.target)||void 0===t?void 0:t.hasPointerCapture(e.pointerId))&&(null===(n=e.target)||void 0===n||n.releasePointerCapture(e.pointerId))})),Wr(s,"pointermove",(e=>{var t;null===(t=i.pointer)||void 0===t||null===(t=t.getPointFromEvent(e))||void 0===t||t.onMouseOver(e)}))),i.styledMode||Ur(s,{"touch-action":"none"}),s.className+=" highcharts-no-touch-action",this.hasPointerCapture=!0):this.hasPointerCapture&&!r&&(n.forEach((e=>e())),n.length=0,i.styledMode||Ur(s,{"touch-action":Qr(null===(t=i.options.chart.style)||void 0===t?void 0:t["touch-action"],"manipulation")}),s.className=s.className.replace(" highcharts-no-touch-action",""),this.hasPointerCapture=!1)}setHoverChartIndex(e){let t=this.chart,n=_.charts[Qr(ta.hoverChartIndex,-1)];if(n&&n!==t){var i;let s={relatedTarget:t.container};e&&!(null!==e&&void 0!==e&&e.relatedTarget)&&Object.assign({},e,s),null===(i=n.pointer)||void 0===i||i.onContainerMouseLeave(e||s)}(null===n||void 0===n?void 0:n.mouseIsDown)||(ta.hoverChartIndex=t.index)}touch(e,t){var n;let i,{chart:s,pinchDown:r=[]}=this;this.setHoverChartIndex(),1===(e=this.normalize(e)).touches.length?!s.isInsidePlot(e.chartX-s.plotLeft,e.chartY-s.plotTop,{visiblePlotOnly:!0})||null!==(n=s.exporting)&&void 0!==n&&n.openMenu?t&&this.reset():(t&&this.runPointActions(e),"touchmove"===e.type&&(this.hasPinchMoved=i=!!r[0]&&Math.pow(r[0].chartX-e.chartX,2)+Math.pow(r[0].chartY-e.chartY,2)>=16),Qr(i,!0)&&this.pinch(e)):2===e.touches.length&&this.pinch(e)}touchSelect(e){return!(!this.chart.zooming.singleTouch||!e.touches||1!==e.touches.length)}zoomOption(e){let t,n,i=this.chart,s=i.inverted,r=i.zooming.type||"";/touch/.test(e.type)&&(r=Qr(i.zooming.pinchType,r)),this.zoomX=t=/x/.test(r),this.zoomY=n=/y/.test(r),this.zoomHor=t&&!s||n&&s,this.zoomVert=n&&!s||t&&s,this.hasZoom=t||n}}ta.unbindDocumentMouseUp=[],function(e){e.compose=function(t){Jr(Vr,"Core.Pointer")&&Wr(t,"beforeRender",(function(){this.pointer=new e(this,this.options)}))}}(ta||(ta={}));let na=ta;!function(e){e.setLength=function(e,t,n){return Array.isArray(e)?(e.length=t,e):e[n?"subarray":"slice"](0,t)},e.splice=function(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(Array.isArray(e))return Array.isArray(s)||(s=Array.from(s)),{removed:e.splice(t,n,...s),array:e};let r=Object.getPrototypeOf(e).constructor,a=e[i?"subarray":"slice"](t,t+n),o=new r(e.length-n+s.length);return o.set(e.subarray(0,t),0),o.set(s,t),o.set(e.subarray(t+n),t+s.length),{removed:a,array:o}}}(d||(d={}));let{setLength:ia,splice:sa}=d,{fireEvent:ra,objectEach:aa,uniqueKey:oa}=K,la=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.autoId=!e.id,this.columns={},this.id=e.id||oa(),this.modified=this,this.rowCount=0,this.versionTag=oa();let t=0;aa(e.columns||{},((e,n)=>{this.columns[n]=e.slice(),t=Math.max(t,e.length)})),this.applyRowCount(t)}applyRowCount(e){this.rowCount=e,aa(this.columns,((t,n)=>{t.length!==e&&(this.columns[n]=ia(t,e))}))}deleteRows(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t>0&&e<this.rowCount){let n=0;aa(this.columns,((i,s)=>{this.columns[s]=sa(i,e,t).array,n=i.length})),this.rowCount=n}ra(this,"afterDeleteRows",{rowIndex:e,rowCount:t}),this.versionTag=oa()}getColumn(e,t){return this.columns[e]}getColumns(e,t){return(e||Object.keys(this.columns)).reduce(((e,t)=>(e[t]=this.columns[t],e)),{})}getRow(e,t){return(t||Object.keys(this.columns)).map((t=>{var n;return null===(n=this.columns[t])||void 0===n?void 0:n[e]}))}setColumn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;this.setColumns({[e]:t},n,i)}setColumns(e,t,n){let i=this.rowCount;aa(e,((e,t)=>{this.columns[t]=e.slice(),i=e.length})),this.applyRowCount(i),(null===n||void 0===n?void 0:n.silent)||(ra(this,"afterSetColumns"),this.versionTag=oa())}setRow(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rowCount,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,{columns:s}=this,r=n?this.rowCount+1:t+1;aa(e,((e,a)=>{let o=s[a]||!1!==(null===i||void 0===i?void 0:i.addColumns)&&Array(r);o&&(n?o=sa(o,t,0,!0,[e]).array:o[t]=e,s[a]=o)})),r>this.rowCount&&this.applyRowCount(r),(null===i||void 0===i?void 0:i.silent)||(ra(this,"afterSetRows"),this.versionTag=oa())}},{extend:ca,merge:ha,pick:ua}=K;!function(e){function t(e,t,n){var i;let s,r=this.legendItem=this.legendItem||{},{chart:a,options:o}=this,{baseline:l=0,symbolWidth:c,symbolHeight:h}=e,u=this.symbol||"circle",d=h/2,f=a.renderer,p=r.group,m=l-Math.round(((null===(i=e.fontMetrics)||void 0===i?void 0:i.b)||h)*(n?.4:.3)),g={},b=o.marker,v=0;if(a.styledMode||(g["stroke-width"]=Math.min(o.lineWidth||0,24),o.dashStyle?g.dashstyle=o.dashStyle:"square"!==o.linecap&&(g["stroke-linecap"]="round")),r.line=f.path().addClass("highcharts-graph").attr(g).add(p),n&&(r.area=f.path().addClass("highcharts-area").add(p)),g["stroke-linecap"]&&(v=Math.min(r.line.strokeWidth(),c)/2),c){var y;let e=[["M",v,m],["L",c-v,m]];r.line.attr({d:e}),null===(y=r.area)||void 0===y||y.attr({d:[...e,["L",c-v,l],["L",v,l]]})}if(b&&!1!==b.enabled&&c){let e=Math.min(ua(b.radius,d),d);0===u.indexOf("url")&&(b=ha(b,{width:h,height:h}),e=0),r.symbol=s=f.symbol(u,c/2-e,m-e,2*e,2*e,ca({context:"legend"},b)).addClass("highcharts-point").add(p),s.isMarker=!0}}e.areaMarker=function(e,n){t.call(this,e,n,!0)},e.lineMarker=t,e.rectangle=function(e,t){let n=t.legendItem||{},i=e.options,s=e.symbolHeight,r=i.squareSymbol,a=r?s:e.symbolWidth;n.symbol=this.chart.renderer.rect(r?(e.symbolWidth-s)/2:0,e.baseline-s+1,a,s,ua(e.options.symbolRadius,s/2)).addClass("highcharts-point").attr({zIndex:3}).add(n.group)}}(f||(f={}));let da=f,{defaultOptions:fa}=Se,{extend:pa,extendClass:ma,merge:ga}=K;!function(e){function t(t,n){let i=fa.plotOptions||{},s=n.defaultOptions,r=n.prototype;return r.type=t,r.pointClass||(r.pointClass=Fr),!e.seriesTypes[t]&&(s&&(i[t]=s),e.seriesTypes[t]=n,!0)}e.seriesTypes=_.seriesTypes,e.registerSeriesType=t,e.seriesType=function(n,i,s,r,a){let o=fa.plotOptions||{};if(i=i||"",o[n]=ga(o[i],s),delete e.seriesTypes[n],t(n,ma(e.seriesTypes[i]||Za,r)),e.seriesTypes[n].prototype.type=n,a){class t extends Fr{}pa(t.prototype,a),e.seriesTypes[n].prototype.pointClass=t}return e.seriesTypes[n]}}(p||(p={}));let ba=p,{animObject:va,setAnimation:ya}=Xe,{defaultOptions:xa}=Se,{registerEventOptions:Sa}=Li,{svg:wa,win:Ea}=_,{seriesTypes:_a}=ba,{format:Ta}=Et,{arrayMax:Ma,arrayMin:Ca,clamp:Aa,correctFloat:Pa,crisp:Na,defined:ka,destroyObjectProperties:La,diffObjects:Ia,erase:Ra,error:Oa,extend:Da,find:Fa,fireEvent:Ba,getClosestDistance:ja,getNestedProperty:Va,insertItem:Ga,isArray:Wa,isNumber:za,isString:Ua,merge:Ha,objectEach:Xa,pick:Ya,removeEvent:qa,syncTimeout:Ka}=K;class $a{constructor(){this.zoneAxis="y"}init(e,t){var n,i,s,r;let a;Ba(this,"init",{options:t}),null!==(n=this.dataTable)&&void 0!==n||(this.dataTable=new la);let o=e.series;this.eventsToUnbind=[],this.chart=e,this.options=this.setOptions(t);let l=this.options,c=!1!==l.visible;this.linkedSeries=[],this.bindAxes(),Da(this,{name:l.name,state:"",visible:c,selected:!0===l.selected}),Sa(this,l);let h=l.events;(null!==h&&void 0!==h&&h.click||null!==(i=l.point)&&void 0!==i&&null!==(i=i.events)&&void 0!==i&&i.click||l.allowPointSelect)&&(e.runTrackerClick=!0),this.getColor(),this.getSymbol(),this.isCartesian&&(e.hasCartesianSeries=!0),o.length&&(a=o[o.length-1]),this._i=Ya(null===(s=a)||void 0===s?void 0:s._i,-1)+1,this.opacity=this.options.opacity,e.orderItems("series",Ga(this,o)),null!==(r=l.dataSorting)&&void 0!==r&&r.enabled?this.setDataSortingOptions():this.points||this.data||this.setData(l.data,!1),Ba(this,"afterInit")}is(e){return _a[e]&&this instanceof _a[e]}bindAxes(){let e,t=this,n=t.options,i=t.chart;Ba(this,"bindAxes",null,(function(){(t.axisTypes||[]).forEach((function(s){(i[s]||[]).forEach((function(i){e=i.options,(Ya(n[s],0)===i.index||void 0!==n[s]&&n[s]===e.id)&&(Ga(t,i.series),t[s]=i,i.isDirty=!0)})),t[s]||t.optionalAxis===s||Oa(18,!0,i)}))})),Ba(this,"afterBindAxes")}hasData(){return this.visible&&void 0!==this.dataMax&&void 0!==this.dataMin||this.visible&&this.dataTable.rowCount>0}hasMarkerChanged(e,t){let n=e.marker,i=t.marker||{};return n&&(i.enabled&&!n.enabled||i.symbol!==n.symbol||i.height!==n.height||i.width!==n.width)}autoIncrement(e){var t,n;let i,s=this.options,{pointIntervalUnit:r,relativeXValue:a}=this.options,o=this.chart.time,l=null!==(t=null!==(n=this.xIncrement)&&void 0!==n?n:o.parse(s.pointStart))&&void 0!==t?t:0;if(this.pointInterval=i=Ya(this.pointInterval,s.pointInterval,1),a&&za(e)&&(i*=e),r){let e=o.toParts(l);"day"===r?e[2]+=i:"month"===r?e[1]+=i:"year"===r&&(e[0]+=i),i=o.makeTime.apply(o,e)-l}return a&&za(e)?l+i:(this.xIncrement=l+i,l)}setDataSortingOptions(){let e=this.options;Da(this,{requireSorting:!1,sorted:!1,enabledDataSorting:!0,allowDG:!1}),ka(e.pointRange)||(e.pointRange=1)}setOptions(e){var t,n;let i,s=this.chart,a=s.options.plotOptions,o=s.userOptions||{},l=Ha(e),c=s.styledMode,h={plotOptions:a,userOptions:l};Ba(this,"setOptions",h);let u=h.plotOptions[this.type],d=o.plotOptions||{},f=d.series||{},p=xa.plotOptions[this.type]||{},m=d[this.type]||{};u.dataLabels=this.mergeArrays(p.dataLabels,u.dataLabels),this.userOptions=h.userOptions;let g=Ha(u,a.series,m,l);this.tooltipOptions=Ha(xa.tooltip,null===(t=xa.plotOptions.series)||void 0===t?void 0:t.tooltip,null===p||void 0===p?void 0:p.tooltip,s.userOptions.tooltip,null===(n=d.series)||void 0===n?void 0:n.tooltip,m.tooltip,l.tooltip),this.stickyTracking=Ya(l.stickyTracking,m.stickyTracking,f.stickyTracking,!!this.tooltipOptions.shared&&!this.noSharedTooltip||g.stickyTracking),null===u.marker&&delete g.marker,this.zoneAxis=g.zoneAxis||"y";let b=this.zones=(g.zones||[]).map((e=>r({},e)));return(g.negativeColor||g.negativeFillColor)&&!g.zones&&(i={value:g[this.zoneAxis+"Threshold"]||g.threshold||0,className:"highcharts-negative"},c||(i.color=g.negativeColor,i.fillColor=g.negativeFillColor),b.push(i)),b.length&&ka(b[b.length-1].value)&&b.push(c?{}:{color:this.color,fillColor:this.fillColor}),Ba(this,"afterSetOptions",{options:g}),g}getName(){var e;return null!==(e=this.options.name)&&void 0!==e?e:Ta(this.chart.options.lang.seriesName,this,this.chart)}getCyclic(e,t,n){let i,s,r=this.chart,a="".concat(e,"Index"),o="".concat(e,"Counter"),l=(null===n||void 0===n?void 0:n.length)||r.options.chart.colorCount;!t&&(ka(s=Ya("color"===e?this.options.colorIndex:void 0,this[a]))?i=s:(r.series.length||(r[o]=0),i=r[o]%l,r[o]+=1),n&&(t=n[i])),void 0!==i&&(this[a]=i),this[e]=t}getColor(){this.chart.styledMode?this.getCyclic("color"):this.options.colorByPoint?this.color="#cccccc":this.getCyclic("color",this.options.color||xa.plotOptions[this.type].color,this.chart.options.colors)}getPointsCollection(){return(this.hasGroupedData?this.points:this.data)||[]}getSymbol(){let e=this.options.marker;this.getCyclic("symbol",e.symbol,this.chart.options.symbols)}getColumn(e,t){return(t?this.dataTable.modified:this.dataTable).getColumn(e,!0)||[]}findPointIndex(e,t){var n,i;let s,r,a,{id:o,x:l}=e,c=this.points,h=this.options.dataSorting,u=this.cropStart||0;if(o){let e=this.chart.get(o);e instanceof Fr&&(s=e)}else if(this.linkedParent||this.enabledDataSorting||this.options.relativeXValue){let t=t=>!t.touched&&t.index===e.index;if(null!==h&&void 0!==h&&h.matchByName?t=t=>!t.touched&&t.name===e.name:this.options.relativeXValue&&(t=t=>!t.touched&&t.options.x===e.x),!(s=Fa(c,t)))return}return s&&void 0!==(a=null===(n=s)||void 0===n?void 0:n.index)&&(r=!0),void 0===a&&za(l)&&(a=this.getColumn("x").indexOf(l,t)),-1!==a&&void 0!==a&&this.cropped&&(a=a>=u?a-u:a),!r&&za(a)&&null!==(i=c[a])&&void 0!==i&&i.touched&&(a=void 0),a}updateData(e,t){let n,i,s,r,{options:a,requireSorting:o}=this,l=a.dataSorting,c=this.points,h=[],u=e.length===c.length,d=!0;if(this.xIncrement=null,e.forEach(((e,t)=>{var i;let s,d=ka(e)&&this.pointClass.prototype.optionsToObject.call({series:this},e)||{},{id:f,x:p}=d;f||za(p)?(-1===(s=this.findPointIndex(d,r))||void 0===s?h.push(e):c[s]&&e!==(null===(i=a.data)||void 0===i?void 0:i[s])?(c[s].update(e,!1,void 0,!1),c[s].touched=!0,o&&(r=s+1)):c[s]&&(c[s].touched=!0),(!u||t!==s||(null===l||void 0===l?void 0:l.enabled)||this.hasDerivedData)&&(n=!0)):h.push(e)}),this),n)for(i=c.length;i--;){var f,p;(s=c[i])&&!s.touched&&(null===(f=(p=s).remove)||void 0===f||f.call(p,!1,t))}else!u||null!==l&&void 0!==l&&l.enabled?d=!1:(e.forEach(((e,t)=>{e===c[t].y||c[t].destroyed||c[t].update(e,!1,void 0,!1)})),h.length=0);if(c.forEach((e=>{e&&(e.touched=!1)})),!d)return!1;h.forEach((e=>{this.addPoint(e,!1,void 0,void 0,!1)}),this);let m=this.getColumn("x");return null===this.xIncrement&&m.length&&(this.xIncrement=Ma(m),this.autoIncrement()),!0}dataColumnKeys(){return["x",...this.pointArrayMap||["y"]]}setData(e){let t,n,i,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=this.points,l=(null===o||void 0===o?void 0:o.length)||0,c=this.options,h=this.chart,u=c.dataSorting,d=this.xAxis,f=c.turboThreshold,p=this.dataTable,m=this.dataColumnKeys(),g=this.pointValKey||"y",b=(this.pointArrayMap||[]).length,v=c.keys,y=0,x=1;h.options.chart.allowMutatingData||(c.data&&delete this.options.data,this.userOptions.data&&delete this.userOptions.data,i=Ha(!0,e));let S=(e=i||e||[]).length;if(null!==u&&void 0!==u&&u.enabled&&(e=this.sortData(e)),h.options.chart.allowMutatingData&&!1!==a&&S&&l&&!this.cropped&&!this.hasGroupedData&&this.visible&&!this.boosted&&(n=this.updateData(e,r)),!n){this.xIncrement=null,this.colorCounter=0;let n=f&&!c.relativeXValue&&S>f;if(n){let t=this.getFirstValidPoint(e),i=this.getFirstValidPoint(e,S-1,-1),s=e=>!(!Wa(e)||!v&&!za(e[0]));if(za(t)&&za(i)){let t=[],n=[];for(let i of e)t.push(this.autoIncrement()),n.push(i);p.setColumns({x:t,[g]:n})}else if(s(t)&&s(i))if(b){let n=+(t.length===b),i=Array(m.length).fill(0).map((()=>[]));for(let t of e){n&&i[0].push(this.autoIncrement());for(let e=n;e<=b;e++){var w;null===(w=i[e])||void 0===w||w.push(t[e-n])}}p.setColumns(m.reduce(((e,t,n)=>(e[t]=i[n],e)),{}))}else{v&&(y=v.indexOf("x"),x=v.indexOf("y"),y=y>=0?y:0,x=x>=0?x:1),1===t.length&&(x=0);let n=[],i=[];if(y===x)for(let t of e)n.push(this.autoIncrement()),i.push(t[x]);else for(let t of e)n.push(t[y]),i.push(t[x]);p.setColumns({x:n,[g]:i})}else n=!1}if(!n){let n=m.reduce(((e,t)=>(e[t]=[],e)),{});for(t=0;t<S;t++){let i=this.pointClass.prototype.applyOptions.apply({series:this},[e[t]]);for(let e of m)n[e][t]=i[e]}p.setColumns(n)}for(Ua(this.getColumn("y")[0])&&Oa(14,!0,h),this.data=[],this.options.data=this.userOptions.data=e,t=l;t--;){var E;null===(E=o[t])||void 0===E||E.destroy()}d&&(d.minRange=d.userMinRange),this.isDirty=h.isDirtyBox=!0,this.isDirtyData=!!o,r=!1}"point"===c.legendType&&(this.processData(),this.generatePoints()),s&&h.redraw(r)}sortData(e){let t=this,n=t.options.dataSorting.sortKey||"y",i=function(e,t){return ka(t)&&e.pointClass.prototype.optionsToObject.call({series:e},t)||{}};return e.forEach((function(n,s){e[s]=i(t,n),e[s].index=s}),this),e.concat().sort(((e,t)=>{let i=Va(n,e),s=Va(n,t);return s<i?-1:+(s>i)})).forEach((function(e,t){e.x=t}),this),t.linkedSeries&&t.linkedSeries.forEach((function(t){var n;let s=t.options,r=s.data;(null===(n=s.dataSorting)||void 0===n||!n.enabled)&&r&&(r.forEach((function(n,s){r[s]=i(t,n),e[s]&&(r[s].x=e[s].x,r[s].index=s)})),t.setData(r,!1))})),e}getProcessedData(e){let t,n,i,s,r,a=this,{dataTable:o,isCartesian:l,options:c,xAxis:h}=a,u=c.cropThreshold,d=e||a.getExtremesFromAll,f=null===h||void 0===h?void 0:h.logarithmic,p=o.rowCount,m=0,g=a.getColumn("x"),b=o,v=!1;return h&&(s=(i=h.getExtremes()).min,r=i.max,v=!(!h.categories||h.names.length),l&&a.sorted&&!d&&(!u||p>u||a.forceCrop)&&(g[p-1]<s||g[0]>r?b=new la:a.getColumn(a.pointValKey||"y").length&&(g[0]<s||g[p-1]>r)&&(b=(t=this.cropData(o,s,r)).modified,m=t.start,n=!0))),g=b.getColumn("x")||[],{modified:b,cropped:n,cropStart:m,closestPointRange:ja([f?g.map(f.log2lin):g],(()=>a.requireSorting&&!v&&Oa(15,!1,a.chart)))}}processData(e){let t=this.xAxis,n=this.dataTable;if(this.isCartesian&&!this.isDirty&&!t.isDirty&&!this.yAxis.isDirty&&!e)return!1;let i=this.getProcessedData();n.modified=i.modified,this.cropped=i.cropped,this.cropStart=i.cropStart,this.closestPointRange=this.basePointRange=i.closestPointRange,Ba(this,"afterProcessData")}cropData(e,t,n){let i,s,r=e.getColumn("x",!0)||[],a=r.length,o={},l=0,c=a;for(i=0;i<a;i++)if(r[i]>=t){l=Math.max(0,i-1);break}for(s=i;s<a;s++)if(r[s]>n){c=s+1;break}for(let h of this.dataColumnKeys()){let t=e.getColumn(h,!0);t&&(o[h]=t.slice(l,c))}return{modified:new la({columns:o}),start:l,end:c}}generatePoints(){var e,t;let n,i,s,r,a,o=this.options,l=this.processedData||o.data,c=this.dataTable.modified,h=this.getColumn("x",!0),u=this.pointClass,d=c.rowCount,f=this.cropStart||0,p=this.hasGroupedData,m=o.keys,g=[],b=null!==(e=o.dataGrouping)&&void 0!==e&&e.groupAll?f:0,v=null===(t=this.xAxis)||void 0===t?void 0:t.categories,y=this.pointArrayMap||["y"],x=this.dataColumnKeys(),S=this.data;if(!S&&!p){let e=[];e.length=(null===l||void 0===l?void 0:l.length)||0,S=this.data=e}for(m&&p&&(this.options.keys=!1),r=0;r<d;r++){var w,E,_;i=f+r,p?((s=new u(this,c.getRow(r,x)||[])).dataGroup=this.groupMap[b+r],(null===(w=s.dataGroup)||void 0===w?void 0:w.options)&&(s.options=s.dataGroup.options,Da(s,s.dataGroup.options),delete s.dataLabels)):(s=S[i],a=l?l[i]:c.getRow(r,y),s||void 0===a||(S[i]=s=new u(this,a,h[r]))),s&&(s.index=p?b+r:i,g[r]=s,s.category=null!==(E=null===v||void 0===v?void 0:v[s.x])&&void 0!==E?E:s.x,s.key=null!==(_=s.name)&&void 0!==_?_:s.category)}if(this.options.keys=m,S&&(d!==(n=S.length)||p))for(r=0;r<n;r++)r!==f||p||(r+=d),S[r]&&(S[r].destroyElements(),S[r].plotX=void 0);this.data=S,this.points=g,Ba(this,"afterGeneratePoints")}getXExtremes(e){return{min:Ca(e),max:Ma(e)}}getExtremes(e,t){var n;let i,s,r,{xAxis:a,yAxis:o}=this,l=t||this.getExtremesFromAll||this.options.getExtremesFromAll,c=l&&this.cropped?this.dataTable:this.dataTable.modified,h=c.rowCount,u=e||this.stackedYData,d=u?[u]:(null===(n=this.keysAffectYAxis||this.pointArrayMap||["y"])||void 0===n?void 0:n.map((e=>c.getColumn(e,!0)||[])))||[],f=this.getColumn("x",!0),p=[],m=this.requireSorting&&!this.is("column")?1:0,g=!!o&&o.positiveValuesOnly,b=l||this.cropped||!a,v=0,y=0;for(a&&(v=(i=a.getExtremes()).min,y=i.max),r=0;r<h;r++)if(s=f[r],b||(f[r+m]||s)>=v&&(f[r-m]||s)<=y)for(let e of d){let t=e[r];za(t)&&(t>0||!g)&&p.push(t)}let x={activeYData:p,dataMin:Ca(p),dataMax:Ma(p)};return Ba(this,"afterGetExtremes",{dataExtremes:x}),x}applyExtremes(){let e=this.getExtremes();return this.dataMin=e.dataMin,this.dataMax=e.dataMax,e}getFirstValidPoint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e.length,s=t;for(;s>=0&&s<i;){if(ka(e[s]))return e[s];s+=n}}translate(){this.generatePoints();let e,t,n,i,s=this.options,r=s.stacking,a=this.xAxis,o=this.enabledDataSorting,l=this.yAxis,c=this.points,h=c.length,u=this.pointPlacementToXValue(),d=!!u,f=s.threshold,p=s.startFromThreshold?f:0,m=(null===s||void 0===s?void 0:s.nullInteraction)&&l.len,g=Number.MAX_VALUE;function b(e){return Aa(e,-1e9,1e9)}for(e=0;e<h;e++){var v;let s,h,y,x=c[e],S=x.x,w=x.y,E=x.low,_=r&&(null===(v=l.stacking)||void 0===v?void 0:v.stacks[(this.negStacks&&w<(p?0:f)?"-":"")+this.stackKey]);x.plotX=za(t=a.translate(S,!1,!1,!1,!0,u))?Pa(b(t)):void 0,r&&this.visible&&_&&_[S]&&(i=this.getStackIndicator(i,S,this.index),!x.isNull&&i.key&&(y=(h=_[S]).points[i.key]),h&&Wa(y)&&(E=y[0],w=y[1],E===p&&i.key===_[S].base&&(E=Ya(za(f)?f:l.min)),l.positiveValuesOnly&&ka(E)&&E<=0&&(E=void 0),x.total=x.stackTotal=Ya(h.total),x.percentage=ka(x.y)&&h.total?x.y/h.total*100:void 0,x.stackY=w,this.irregularWidths||h.setOffset(this.pointXOffset||0,this.barW||0,void 0,void 0,void 0,this.xAxis))),x.yBottom=ka(E)?b(l.translate(E,!1,!0,!1,!0)):void 0,this.dataModify&&(w=this.dataModify.modifyValue(w,e)),za(w)&&void 0!==x.plotX?s=za(s=l.translate(w,!1,!0,!1,!0))?b(s):void 0:!za(w)&&m&&(s=m),x.plotY=s,x.isInside=this.isPointInside(x),x.clientX=d?Pa(a.translate(S,!1,!1,!1,!0,u)):t,x.negative=(x.y||0)<(f||0),x.isNull||!1===x.visible||(void 0!==n&&(g=Math.min(g,Math.abs(t-n))),n=t),x.zone=this.zones.length?x.getZone():void 0,!x.graphic&&this.group&&o&&(x.isNew=!0)}this.closestPointRangePx=g,Ba(this,"afterTranslate")}getValidPoints(e,t,n){let i=this.chart;return(e||this.points||[]).filter((function(e){let{plotX:s,plotY:r}=e;return(!!n||!e.isNull&&!!za(r))&&(!t||!!i.isInsidePlot(s,r,{inverted:i.inverted}))&&!1!==e.visible}))}getSharedClipKey(){return this.sharedClipKey=(this.options.xAxis||0)+","+(this.options.yAxis||0),this.sharedClipKey}setClip(){let{chart:e,group:t,markerGroup:n}=this,i=e.sharedClips,s=e.renderer,r=e.getClipBox(this),a=this.getSharedClipKey(),o=i[a];o?o.animate(r):i[a]=o=s.clipRect(r),t&&t.clip(!1===this.options.clip?void 0:o),n&&n.clip()}animate(e){let{chart:t,group:n,markerGroup:i}=this,s=t.inverted,r=va(this.options.animation),a=[this.getSharedClipKey(),r.duration,r.easing,r.defer].join(","),o=t.sharedClips[a],l=t.sharedClips[a+"m"];if(e&&n){let e=t.getClipBox(this);if(o)o.attr("height",e.height);else{e.width=0,s&&(e.x=t.plotHeight),o=t.renderer.clipRect(e),t.sharedClips[a]=o;let n={x:-99,y:-99,width:s?t.plotWidth+199:99,height:s?99:t.plotHeight+199};l=t.renderer.clipRect(n),t.sharedClips[a+"m"]=l}n.clip(o),null===i||void 0===i||i.clip(l)}else if(o&&!o.hasClass("highcharts-animating")){let e=t.getClipBox(this),n=r.step;(null!==i&&void 0!==i&&i.element.childNodes.length||t.series.length>1)&&(r.step=function(e,t){var i;n&&n.apply(t,arguments),"width"===t.prop&&(null===(i=l)||void 0===i?void 0:i.element)&&l.attr(s?"height":"width",e+99)}),o.addClass("highcharts-animating").animate(e,r)}}afterAnimate(){this.setClip(),Xa(this.chart.sharedClips,((e,t,n)=>{e&&!this.chart.container.querySelector('[clip-path="url(#'.concat(e.id,')"]'))&&(e.destroy(),delete n[t])})),this.finishedAnimating=!0,Ba(this,"afterAnimate")}drawPoints(){let e,t,n,i,s,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.points,l=this.chart,c=l.styledMode,{colorAxis:h,options:u}=this,d=u.marker,f=u.nullInteraction,p=this[this.specialGroup||"markerGroup"],m=this.xAxis,g=Ya(d.enabled,!m||!!m.isRadial||null,this.closestPointRangePx>=d.enabledThreshold*d.radius);if(!1!==d.enabled||this._hasPointMarkers)for(e=0;e<o.length;e++){i=(n=(t=o[e]).graphic)?"animate":"attr",s=t.marker||{},r=!!t.marker;let u=t.isNull;if(!(g&&!ka(s.enabled)||s.enabled)||u&&!f||!1===t.visible)n&&(t.graphic=n.destroy());else{let e=Ya(s.symbol,this.symbol,"rect");a=this.markerAttribs(t,t.selected&&"select"),this.enabledDataSorting&&(t.startXPos=m.reversed?-(a.width||0):m.width);let o=!1!==t.isInside;if(!n&&o&&((a.width||0)>0||t.hasImage)&&(t.graphic=n=l.renderer.symbol(e,a.x,a.y,a.width,a.height,r?s:d).add(p),this.enabledDataSorting&&l.hasRendered&&(n.attr({x:t.startXPos}),i="animate")),n&&"animate"===i&&n[o?"show":"hide"](o).animate(a),n){let e=this.pointAttribs(t,c||!t.selected?void 0:"select");c?h&&n.css({fill:e.fill}):n[i](e)}n&&n.addClass(t.getClassName(),!0)}}}markerAttribs(e,t){var n,i,s;let r,a,o=this.options,l=o.marker,c=e.marker||{},h=c.symbol||l.symbol,u={},d=Ya(c.radius,null===l||void 0===l?void 0:l.radius);t&&(r=l.states[t],a=c.states&&c.states[t],d=Ya(null===(n=a)||void 0===n?void 0:n.radius,null===(i=r)||void 0===i?void 0:i.radius,d&&d+((null===(s=r)||void 0===s?void 0:s.radiusPlus)||0))),e.hasImage=h&&0===h.indexOf("url"),e.hasImage&&(d=0);let f=e.pos();return za(d)&&f&&(o.crisp&&(f[0]=Na(f[0],e.hasImage?0:"rect"===h?(null===l||void 0===l?void 0:l.lineWidth)||0:1)),u.x=f[0]-d,u.y=f[1]-d),d&&(u.width=u.height=2*d),u}pointAttribs(e,t){var n;let i,s,r,a,o=this.options,l=o.marker,c=null===e||void 0===e?void 0:e.options,h=(null===c||void 0===c?void 0:c.marker)||{},u=null===c||void 0===c?void 0:c.color,d=null===e||void 0===e?void 0:e.color,f=null===e||void 0===e||null===(n=e.zone)||void 0===n?void 0:n.color,p=this.color,m=Ya(h.lineWidth,l.lineWidth),g=null!==e&&void 0!==e&&e.isNull&&o.nullInteraction?0:1;return p=u||f||d||p,r=h.fillColor||l.fillColor||p,a=h.lineColor||l.lineColor||p,t=t||"normal",i=l.states[t]||{},m=Ya((s=h.states&&h.states[t]||{}).lineWidth,i.lineWidth,m+Ya(s.lineWidthPlus,i.lineWidthPlus,0)),r=s.fillColor||i.fillColor||r,a=s.lineColor||i.lineColor||a,{stroke:a,"stroke-width":m,fill:r,opacity:g=Ya(s.opacity,i.opacity,g)}}destroy(e){let t,n,i=this,s=i.chart,r=/AppleWebKit\/533/.test(Ea.navigator.userAgent),a=i.data||[];for(Ba(i,"destroy",{keepEventsForUpdate:e}),this.removeEvents(e),(i.axisTypes||[]).forEach((function(e){var t;n=i[e],(null===(t=n)||void 0===t?void 0:t.series)&&(Ra(n.series,i),n.isDirty=n.forceRedraw=!0)})),i.legendItem&&i.chart.legend.destroyItem(i),t=a.length;t--;){var o,l;null===(o=a[t])||void 0===o||null===(l=o.destroy)||void 0===l||l.call(o)}for(let c of i.zones)La(c,void 0,!0);K.clearTimeout(i.animationTimeout),Xa(i,(function(e,t){e instanceof hn&&!e.survive&&e[r&&"group"===t?"hide":"destroy"]()})),s.hoverSeries===i&&(s.hoverSeries=void 0),Ra(s.series,i),s.orderItems("series"),Xa(i,(function(t,n){e&&"hcEvents"===n||delete i[n]}))}applyZones(){let{area:e,chart:t,graph:n,zones:i,points:s,xAxis:r,yAxis:a,zoneAxis:o}=this,{inverted:l,renderer:c}=t,h=this["".concat(o,"Axis")],{isXAxis:u,len:d=0,minPointOffset:f=0}=h||{},p=((null===n||void 0===n?void 0:n.strokeWidth())||0)/2+1,m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;l&&(n=d-n);let{translated:i=0,lineClip:s}=e,r=n-i;null===s||void 0===s||s.push(["L",t,Math.abs(r)<p?n-p*(r<=0?-1:1):i])};if(i.length&&(n||e)&&h&&za(h.min)){let t=h.getExtremes().max+f,p=e=>{e.forEach(((t,n)=>{("M"===t[0]||"L"===t[0])&&(e[n]=[t[0],u?d-t[1]:t[1],u?t[2]:d-t[2]])}))};if(i.forEach((e=>{e.lineClip=[],e.translated=Aa(h.toPixels(Ya(e.value,t),!0)||0,0,d)})),n&&!this.showLine&&n.hide(),e&&e.hide(),"y"===o&&s.length<r.len)for(let e of s){let{plotX:t,plotY:n,zone:s}=e,r=s&&i[i.indexOf(s)-1];s&&m(s,t,n),r&&m(r,t,n)}let g=[],b=h.toPixels(h.getExtremes().min-f,!0);i.forEach((t=>{var i,s,o;let h=t.lineClip||[],d=Math.round(t.translated||0);r.reversed&&h.reverse();let{clip:f,simpleClip:m}=t,v=0,y=0,x=r.len,S=a.len;u?(v=d,x=b):(y=d,S=b);let w=[["M",v,y],["L",x,y],["L",x,S],["L",v,S],["Z"]],E=[w[0],...h,w[1],w[2],...g,w[3],w[4]];g=h.reverse(),b=d,l&&(p(E),e&&p(w)),f?(f.animate({d:E}),null===(i=m)||void 0===i||i.animate({d:w})):(f=t.clip=c.path(E),e&&(m=t.simpleClip=c.path(w))),n&&null!==(s=t.graph)&&void 0!==s&&s.clip(f),e&&(null===(o=t.area)||void 0===o||o.clip(m))}))}else this.visible&&(n&&n.show(),e&&e.show())}plotGroup(e,t,n,i,s){let r=this[e],a=!r,o={visibility:n,zIndex:i||.1};return ka(this.opacity)&&!this.chart.styledMode&&"inactive"!==this.state&&(o.opacity=this.opacity),r||(this[e]=r=this.chart.renderer.g().add(s)),r.addClass("highcharts-"+t+" highcharts-series-"+this.index+" highcharts-"+this.type+"-series "+(ka(this.colorIndex)?"highcharts-color-"+this.colorIndex+" ":"")+(this.options.className||"")+(r.hasClass("highcharts-tracker")?" highcharts-tracker":""),!0),r.attr(o)[a?"attr":"animate"](this.getPlotBox(t)),r}getPlotBox(e){let t=this.xAxis,n=this.yAxis,i=this.chart,s=i.inverted&&!i.polar&&t&&this.invertible&&"series"===e;i.inverted&&(t=n,n=this.xAxis);let r={scale:1,translateX:t?t.left:i.plotLeft,translateY:n?n.top:i.plotTop,name:e};Ba(this,"getPlotBox",r);let{scale:a,translateX:o,translateY:l}=r;return{translateX:o,translateY:l,rotation:90*!!s,rotationOriginX:s?a*(t.len-n.len)/2:0,rotationOriginY:s?a*(t.len+n.len)/2:0,scaleX:s?-a:a,scaleY:a}}removeEvents(e){let{eventsToUnbind:t}=this;e||qa(this),t.length&&(t.forEach((e=>{e()})),t.length=0)}render(){var e,t,n,i,s;let r=this,{chart:a,options:o,hasRendered:l}=r,c=va(o.animation),h=r.visible?"inherit":"hidden",u=o.zIndex,d=a.seriesGroup,f=r.finishedAnimating?0:c.duration;Ba(this,"render"),r.plotGroup("group","series",h,u,d),r.markerGroup=r.plotGroup("markerGroup","markers",h,u,d),!1!==o.clip&&r.setClip(),f&&null!==(e=r.animate)&&void 0!==e&&e.call(r,!0),r.drawGraph&&(r.drawGraph(),r.applyZones()),r.visible&&r.drawPoints(),null!==(t=r.drawDataLabels)&&void 0!==t&&t.call(r),null!==(n=r.redrawPoints)&&void 0!==n&&n.call(r),o.enableMouseTracking&&null!==(i=r.drawTracker)&&void 0!==i&&i.call(r),f&&null!==(s=r.animate)&&void 0!==s&&s.call(r),l||(f&&c.defer&&(f+=c.defer),r.animationTimeout=Ka((()=>{r.afterAnimate()}),f||0)),r.isDirty=!1,r.hasRendered=!0,Ba(r,"afterRender")}redraw(){let e=this.isDirty||this.isDirtyData;this.translate(),this.render(),e&&delete this.kdTree}reserveSpace(){return this.visible||!this.chart.options.chart.ignoreHiddenSeries}searchPoint(e,t){let{xAxis:n,yAxis:i}=this,s=this.chart.inverted;return this.searchKDTree({clientX:s?n.len-e.chartY+n.pos:e.chartX-n.pos,plotY:s?i.len-e.chartX+i.pos:e.chartY-i.pos},t,e)}buildKDTree(e){this.buildingKdTree=!0;let t=this,n=t.options,i=n.findNearestPointBy.indexOf("y")>-1?2:1;delete t.kdTree,Ka((function(){t.kdTree=function e(n,i,s){let r,a,o=null===n||void 0===n?void 0:n.length;if(o)return r=t.kdAxisArray[i%s],n.sort(((e,t)=>(e[r]||0)-(t[r]||0))),{point:n[a=Math.floor(o/2)],left:e(n.slice(0,a),i+1,s),right:e(n.slice(a+1),i+1,s)}}(t.getValidPoints(void 0,!t.directTouch,null===n||void 0===n?void 0:n.nullInteraction),i,i),t.buildingKdTree=!1}),n.kdNow||"touchstart"===(null===e||void 0===e?void 0:e.type)?0:1)}searchKDTree(e,t,n,i,s){let r=this,[a,o]=this.kdAxisArray,l=t?"distX":"dist",c=(r.options.findNearestPointBy||"").indexOf("y")>-1?2:1,h=!!r.isBubble,u=i||((e,t,n)=>{let i=e[n]||0,s=t[n]||0;return[i===s&&e.index>t.index||i<s?e:t,!1]}),d=s||((e,t)=>e<t);if(this.kdTree||this.buildingKdTree||this.buildKDTree(n),this.kdTree)return function e(t,n,i,s,c){let f=n.point,p=r.kdAxisArray[i%s],m=f,g=!1;!function(e,t,n){let i=e[a],s=t[a],r=ka(i)&&ka(s)?i-s:null,l=e[o],c=t[o],u=ka(l)&&ka(c)?l-c:0,d=h&&(null===(n=t.marker)||void 0===n?void 0:n.radius)||0;t.dist=Math.sqrt((r&&r*r||0)+u*u)-d,t.distX=ka(r)?Math.abs(r)-d:Number.MAX_VALUE}(t,f);let b=(t[p]||0)-(f[p]||0)+(h&&(null===(c=f.marker)||void 0===c?void 0:c.radius)||0),v=b<0?"left":"right",y=b<0?"right":"left";return n[v]&&([m,g]=u(f,e(t,n[v],i+1,s),l)),n[y]&&d(Math.sqrt(b*b),m[l],g)&&(m=u(m,e(t,n[y],i+1,s),l)[0]),m}(e,this.kdTree,c,c)}pointPlacementToXValue(){let{options:e,xAxis:t}=this,n=e.pointPlacement;return"between"===n&&(n=t.reversed?-.5:.5),za(n)?n*(e.pointRange||t.pointRange):0}isPointInside(e){let{chart:t,xAxis:n,yAxis:i}=this,{plotX:s=-1,plotY:r=-1}=e;return r>=0&&r<=(i?i.len:t.plotHeight)&&s>=0&&s<=(n?n.len:t.plotWidth)}drawTracker(){var e;let t=this,n=t.options,i=n.trackByArea,s=[].concat((i?t.areaPath:t.graphPath)||[]),r=t.chart,a=r.pointer,o=r.renderer,l=(null===(e=r.options.tooltip)||void 0===e?void 0:e.snap)||0,c=()=>{n.enableMouseTracking&&r.hoverSeries!==t&&t.onMouseOver()},h="rgba(192,192,192,"+(wa?1e-4:.002)+")",u=t.tracker;u?u.attr({d:s}):t.graph&&(t.tracker=u=o.path(s).attr({visibility:t.visible?"inherit":"hidden",zIndex:2}).addClass(i?"highcharts-tracker-area":"highcharts-tracker-line").add(t.group),r.styledMode||u.attr({"stroke-linecap":"round","stroke-linejoin":"round",stroke:h,fill:i?h:"none","stroke-width":t.graph.strokeWidth()+(i?0:2*l)}),[t.tracker,t.markerGroup,t.dataLabelsGroup].forEach((e=>{e&&(e.addClass("highcharts-tracker").on("mouseover",c).on("mouseout",(e=>{null===a||void 0===a||a.onTrackerMouseOut(e)})),n.cursor&&!r.styledMode&&e.css({cursor:n.cursor}),e.on("touchstart",c))}))),Ba(this,"afterDrawTracker")}addPoint(e,t,n,i,s){let r,a,o=this.options,{chart:l,data:c,dataTable:h,xAxis:u}=this,d=(null===u||void 0===u?void 0:u.hasNames)&&u.names,f=o.data,p=this.getColumn("x");t=Ya(t,!0);let m={series:this};this.pointClass.prototype.applyOptions.apply(m,[e]);let g=m.x;if(a=p.length,this.requireSorting&&g<p[a-1])for(r=!0;a&&p[a-1]>g;)a--;h.setRow(m,a,!0,{addColumns:!1}),d&&m.name&&(d[g]=m.name),null!==f&&void 0!==f&&f.splice(a,0,e),(r||this.processedData)&&(this.data.splice(a,0,null),this.processData()),"point"===o.legendType&&this.generatePoints(),n&&(c[0]&&c[0].remove?c[0].remove(!1):([c,f].filter(ka).forEach((e=>{e.shift()})),h.deleteRows(0))),!1!==s&&Ba(this,"addPoint",{point:m}),this.isDirty=!0,this.isDirtyData=!0,t&&l.redraw(i)}removePoint(e,t,n){let i=this,{chart:s,data:r,points:a,dataTable:o}=i,l=r[e],c=function(){[(null===a||void 0===a?void 0:a.length)===r.length?a:void 0,r,i.options.data].filter(ka).forEach((t=>{t.splice(e,1)})),o.deleteRows(e),null!==l&&void 0!==l&&l.destroy(),i.isDirty=!0,i.isDirtyData=!0,t&&s.redraw()};ya(n,s),t=Ya(t,!0),l?l.firePointEvent("remove",null,c):c()}remove(e,t,n,i){let s=this,r=s.chart;function a(){s.destroy(i),r.isDirtyLegend=r.isDirtyBox=!0,r.linkSeries(i),Ya(e,!0)&&r.redraw(t)}!1!==n?Ba(s,"remove",null,a):a()}update(e,t){var n,i,s;Ba(this,"update",{options:e=Ia(e,this.userOptions)});let r,a,o=this,l=o.chart,c=o.userOptions,h=o.initialType||o.type,u=l.options.plotOptions,d=_a[h].prototype,f=o.finishedAnimating&&{animation:!1},p={},m=$a.keepProps.slice(),g=e.type||c.type||l.options.chart.type,b=!(this.hasDerivedData||g&&g!==this.type||void 0!==e.keys||void 0!==e.pointStart||void 0!==e.pointInterval||void 0!==e.relativeXValue||e.joinBy||e.mapData||["dataGrouping","pointStart","pointInterval","pointIntervalUnit","keys"].some((e=>o.hasOptionChanged(e))));g=g||h,b?(m.push.apply(m,$a.keepPropsForPoints),!1!==e.visible&&m.push("area","graph"),o.parallelArrays.forEach((function(e){m.push(e+"Data")})),e.data&&(e.dataSorting&&Da(o.options.dataSorting,e.dataSorting),this.setData(e.data,!1))):this.dataTable.modified=this.dataTable,e=Ha(c,{index:void 0===c.index?o.index:c.index,pointStart:null!==(n=null!==(i=null===u||void 0===u||null===(s=u.series)||void 0===s?void 0:s.pointStart)&&void 0!==i?i:c.pointStart)&&void 0!==n?n:o.getColumn("x")[0]},!b&&{data:o.options.data},e,f),b&&e.data&&(e.data=o.options.data),(m=["group","markerGroup","dataLabelsGroup","transformGroup"].concat(m)).forEach((function(e){m[e]=o[e],delete o[e]}));let v=!1;if(_a[g]){if(v=g!==o.type,o.remove(!1,!1,!1,!0),v)if(l.propFromSeries(),Object.setPrototypeOf)Object.setPrototypeOf(o,_a[g].prototype);else{let e=Object.hasOwnProperty.call(o,"hcEvents")&&o.hcEvents;for(a in d)o[a]=void 0;Da(o,_a[g].prototype),e?o.hcEvents=e:delete o.hcEvents}}else Oa(17,!0,l,{missingModuleFor:g});if(m.forEach((function(e){o[e]=m[e]})),o.init(l,e),b&&this.points)for(let x of(!1===(r=o.options).visible?(p.graphic=1,p.dataLabel=1):(this.hasMarkerChanged(r,c)&&(p.graphic=1),(null===(y=o.hasDataLabels)||void 0===y?void 0:y.call(o))||(p.dataLabel=1)),this.points)){var y;(null===x||void 0===x?void 0:x.series)&&(x.resolveColor(),Object.keys(p).length&&x.destroyElements(p),!1===r.showInLegend&&x.legendItem&&l.legend.destroyItem(x))}o.initialType=h,l.linkSeries(),l.setSortedData(),v&&o.linkedSeries.length&&(o.isDirtyData=!0),Ba(this,"afterUpdate"),Ya(t,!0)&&l.redraw(!!b&&void 0)}setName(e){this.name=this.options.name=this.userOptions.name=e,this.chart.isDirtyLegend=!0}hasOptionChanged(e){var t,n;let i=this.chart,s=this.options[e],r=i.options.plotOptions,a=this.userOptions[e],o=Ya(null===r||void 0===r||null===(t=r[this.type])||void 0===t?void 0:t[e],null===r||void 0===r||null===(n=r.series)||void 0===n?void 0:n[e]);return a&&!ka(o)?s!==a:s!==Ya(o,s)}onMouseOver(){let e=this.chart,t=e.hoverSeries,n=e.pointer;null!==n&&void 0!==n&&n.setHoverChartIndex(),t&&t!==this&&t.onMouseOut(),this.options.events.mouseOver&&Ba(this,"mouseOver"),this.setState("hover"),e.hoverSeries=this}onMouseOut(){let e=this.options,t=this.chart,n=t.tooltip,i=t.hoverPoint;t.hoverSeries=null,i&&i.onMouseOut(),this&&e.events.mouseOut&&Ba(this,"mouseOut"),n&&!this.stickyTracking&&(!n.shared||this.noSharedTooltip)&&n.hide(),t.series.forEach((function(e){e.setState("",!0)}))}setState(e,t){let n=this,i=n.options,s=n.graph,r=i.inactiveOtherPoints,a=i.states,o=Ya(a[e||"normal"]&&a[e||"normal"].animation,n.chart.options.chart.animation),l=i.lineWidth,c=i.opacity;if(e=e||"",n.state!==e&&([n.group,n.markerGroup,n.dataLabelsGroup].forEach((function(t){t&&(n.state&&t.removeClass("highcharts-series-"+n.state),e&&t.addClass("highcharts-series-"+e))})),n.state=e,!n.chart.styledMode)){if(a[e]&&!1===a[e].enabled)return;if(e&&(l=a[e].lineWidth||l+(a[e].lineWidthPlus||0),c=Ya(a[e].opacity,c)),s&&!s.dashstyle&&za(l))for(let e of[s,...this.zones.map((e=>e.graph))])null===e||void 0===e||e.animate({"stroke-width":l},o);r||[n.group,n.markerGroup,n.dataLabelsGroup,n.labelBySeries].forEach((function(e){e&&e.animate({opacity:c},o)}))}t&&r&&n.points&&n.setAllPointsToState(e||void 0)}setAllPointsToState(e){this.points.forEach((function(t){t.setState&&t.setState(e)}))}setVisible(e,t){var n;let i=this,s=i.chart,r=s.options.chart.ignoreHiddenSeries,a=i.visible;i.visible=e=i.options.visible=i.userOptions.visible=void 0===e?!a:e;let o=e?"show":"hide";["group","dataLabelsGroup","markerGroup","tracker","tt"].forEach((e=>{var t;null===(t=i[e])||void 0===t||t[o]()})),(s.hoverSeries===i||(null===(n=s.hoverPoint)||void 0===n?void 0:n.series)===i)&&i.onMouseOut(),i.legendItem&&s.legend.colorizeItem(i,e),i.isDirty=!0,i.options.stacking&&s.series.forEach((e=>{e.options.stacking&&e.visible&&(e.isDirty=!0)})),i.linkedSeries.forEach((t=>{t.setVisible(e,!1)})),r&&(s.isDirtyBox=!0),Ba(i,o),!1!==t&&s.redraw()}show(){this.setVisible(!0)}hide(){this.setVisible(!1)}select(e){this.selected=e=this.options.selected=void 0===e?!this.selected:e,this.checkbox&&(this.checkbox.checked=e),Ba(this,e?"select":"unselect")}shouldShowTooltip(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.series=this,n.visiblePlotOnly=!0,this.chart.isInsidePlot(e,t,n)}drawLegendSymbol(e,t){var n;null===(n=da[this.options.legendSymbol||"rectangle"])||void 0===n||n.call(this,e,t)}}$a.defaultOptions={lineWidth:2,allowPointSelect:!1,crisp:!0,showCheckbox:!1,animation:{duration:1e3},enableMouseTracking:!0,events:{},marker:{enabledThreshold:2,lineColor:"#ffffff",lineWidth:0,radius:4,states:{normal:{animation:!0},hover:{animation:{duration:150},enabled:!0,radiusPlus:2,lineWidthPlus:1},select:{fillColor:"#cccccc",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{animation:{},align:"center",borderWidth:0,defer:!0,formatter:function(){let{numberFormatter:e}=this.series.chart;return"number"!=typeof this.y?"":e(this.y,-1)},padding:5,style:{fontSize:"0.7em",fontWeight:"bold",color:"contrast",textOutline:"1px contrast"},verticalAlign:"bottom",x:0,y:0},cropThreshold:300,opacity:1,pointRange:0,softThreshold:!0,states:{normal:{animation:!0},hover:{animation:{duration:150},lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{animation:{duration:0}},inactive:{animation:{duration:150},opacity:.2}},stickyTracking:!0,turboThreshold:1e3,findNearestPointBy:"x"},$a.types=ba.seriesTypes,$a.registerType=ba.registerSeriesType,$a.keepProps=["colorIndex","eventOptions","navigatorSeries","symbolIndex","baseSeries"],$a.keepPropsForPoints=["data","isDirtyData","isDirtyCanvas","points","dataTable","processedData","xIncrement","cropped","_hasPointMarkers","hasDataLabels","nodes","layout","level","mapMap","mapData","minY","maxY","minX","maxX","transformGroups"],Da($a.prototype,{axisTypes:["xAxis","yAxis"],coll:"series",colorCounter:0,directTouch:!1,invertible:!0,isCartesian:!0,kdAxisArray:["clientX","plotY"],parallelArrays:["x","y"],pointClass:Fr,requireSorting:!0,sorted:!0}),ba.series=$a;let Za=$a,{animObject:Qa,setAnimation:Ja}=Xe,{registerEventOptions:eo}=Li,{composed:to,marginNames:no}=_,{distribute:io}=Pt,{format:so}=Et,{addEvent:ro,createElement:ao,css:oo,defined:lo,discardElement:co,find:ho,fireEvent:uo,isNumber:fo,merge:po,pick:mo,pushUnique:go,relativeLength:bo,stableSort:vo,syncTimeout:yo}=K;class xo{constructor(e,t){this.allItems=[],this.initialItemY=0,this.itemHeight=0,this.itemMarginBottom=0,this.itemMarginTop=0,this.itemX=0,this.itemY=0,this.lastItemY=0,this.lastLineHeight=0,this.legendHeight=0,this.legendWidth=0,this.maxItemWidth=0,this.maxLegendWidth=0,this.offsetWidth=0,this.padding=0,this.pages=[],this.symbolHeight=0,this.symbolWidth=0,this.titleHeight=0,this.totalItemWidth=0,this.widthOption=0,this.chart=e,this.setOptions(t),t.enabled&&(this.render(),eo(this,t),ro(this.chart,"endResize",(function(){this.legend.positionCheckboxes()}))),ro(this.chart,"render",(()=>{this.options.enabled&&this.proximate&&(this.proximatePositions(),this.positionItems())}))}setOptions(e){let t=mo(e.padding,8);this.options=e,this.chart.styledMode||(this.itemStyle=e.itemStyle,this.itemHiddenStyle=po(this.itemStyle,e.itemHiddenStyle)),this.itemMarginTop=e.itemMarginTop,this.itemMarginBottom=e.itemMarginBottom,this.padding=t,this.initialItemY=t-5,this.symbolWidth=mo(e.symbolWidth,16),this.pages=[],this.proximate="proximate"===e.layout&&!this.chart.inverted,this.baseline=void 0}update(e,t){let n=this.chart;this.setOptions(po(!0,this.options,e)),"events"in this.options&&eo(this,this.options),this.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,mo(t,!0)&&n.redraw(),uo(this,"afterUpdate",{redraw:t})}colorizeItem(e,t){var n;let i=e.color,{area:s,group:r,label:a,line:o,symbol:l}=e.legendItem||{};if((e instanceof Za||e instanceof Fr)&&(e.color=(null===(n=e.options)||void 0===n?void 0:n.legendSymbolColor)||i),null!==r&&void 0!==r&&r[t?"removeClass":"addClass"]("highcharts-legend-item-hidden"),!this.chart.styledMode){let{itemHiddenStyle:n={}}=this,i=n.color,{fillColor:r,fillOpacity:c,lineColor:h,marker:u}=e.options,d=e=>(!t&&(e.fill&&(e.fill=i),e.stroke&&(e.stroke=i)),e);null!==a&&void 0!==a&&a.css(po(t?this.itemStyle:n)),null!==o&&void 0!==o&&o.attr(d({stroke:h||e.color})),l&&l.attr(d(u&&l.isMarker?e.pointAttribs():{fill:e.color})),null===s||void 0===s||s.attr(d({fill:r||e.color,"fill-opacity":r?1:null!==c&&void 0!==c?c:.75}))}e.color=i,uo(this,"afterColorizeItem",{item:e,visible:t})}positionItems(){this.allItems.forEach(this.positionItem,this),this.chart.isResizing||this.positionCheckboxes()}positionItem(e){let{group:t,x:n=0,y:i=0}=e.legendItem||{},s=this.options,r=s.symbolPadding,a=!s.rtl,o=e.checkbox;if(null!==t&&void 0!==t&&t.element){let s={translateX:a?n:this.legendWidth-n-2*r-4,translateY:i};t[lo(t.translateY)?"animate":"attr"](s,void 0,(()=>{uo(this,"afterPositionItem",{item:e})}))}o&&(o.x=n,o.y=i)}destroyItem(e){let t=e.legendItem||{};for(let n of["group","label","line","symbol"])t[n]&&(t[n]=t[n].destroy());e.checkbox=co(e.checkbox),e.legendItem=void 0}destroy(){for(let e of this.getAllItems())this.destroyItem(e);for(let e of["clipRect","up","down","pager","nav","box","title","group"])this[e]&&(this[e]=this[e].destroy());this.display=null}positionCheckboxes(){var e;let t,n=null===(e=this.group)||void 0===e?void 0:e.alignAttr,i=this.clipHeight||this.legendHeight,s=this.titleHeight;n&&(t=n.translateY,this.allItems.forEach((function(e){let r,a=e.checkbox;a&&(r=t+s+a.y+(this.scrollOffset||0)+3,oo(a,{left:n.translateX+e.checkboxOffset+a.x-20+"px",top:r+"px",display:this.proximate||r>t-6&&r<t+i-6?"":"none"}))}),this))}renderTitle(){let e,t=this.options,n=this.padding,i=t.title,s=0;i.text&&(this.title||(this.title=this.chart.renderer.label(i.text,n-3,n-4,void 0,void 0,void 0,t.useHTML,void 0,"legend-title").attr({zIndex:1}),this.chart.styledMode||this.title.css(i.style),this.title.add(this.group)),i.width||this.title.css({width:this.maxLegendWidth+"px"}),s=(e=this.title.getBBox()).height,this.offsetWidth=e.width,this.contentGroup.attr({translateY:s})),this.titleHeight=s}setText(e){let t=this.options;e.legendItem.label.attr({text:t.labelFormat?so(t.labelFormat,e,this.chart):t.labelFormatter.call(e)})}renderItem(e){var t;let n=e.legendItem=e.legendItem||{},i=this.chart,s=i.renderer,r=this.options,a="horizontal"===r.layout,o=this.symbolWidth,l=r.symbolPadding||0,c=this.itemStyle,h=this.itemHiddenStyle,u=a?mo(r.itemDistance,20):0,d=!r.rtl,f=!e.series,p=!f&&e.series.drawLegendSymbol?e.series:e,m=p.options,g=!!this.createCheckboxForItem&&m&&m.showCheckbox,b=r.useHTML,v=e.options.className,y=n.label,x=o+l+u+20*!!g;!y&&(n.group=s.g("legend-item").addClass("highcharts-"+p.type+"-series highcharts-color-"+e.colorIndex+(v?" "+v:"")+(f?" highcharts-series-"+e.index:"")).attr({zIndex:1}).add(this.scrollGroup),n.label=y=s.text("",d?o+l:-l,this.baseline||0,b),i.styledMode||y.css(po(e.visible?c:h)),y.attr({align:d?"left":"right",zIndex:2}).add(n.group),!this.baseline&&(this.fontMetrics=s.fontMetrics(y),this.baseline=this.fontMetrics.f+3+this.itemMarginTop,y.attr("y",this.baseline),this.symbolHeight=mo(r.symbolHeight,this.fontMetrics.f),r.squareSymbol&&(this.symbolWidth=mo(r.symbolWidth,Math.max(this.symbolHeight,16)),x=this.symbolWidth+l+u+20*!!g,d&&y.attr("x",this.symbolWidth+l))),p.drawLegendSymbol(this,e),this.setItemEvents&&this.setItemEvents(e,y,b)),g&&!e.checkbox&&this.createCheckboxForItem&&this.createCheckboxForItem(e),this.colorizeItem(e,e.visible),(i.styledMode||!c.width)&&y.css({width:(r.itemWidth||this.widthOption||i.spacingBox.width)-x+"px"}),this.setText(e);let S=y.getBBox(),w=(null===(t=this.fontMetrics)||void 0===t?void 0:t.h)||0;e.itemWidth=e.checkboxOffset=r.itemWidth||n.labelWidth||S.width+x,this.maxItemWidth=Math.max(this.maxItemWidth,e.itemWidth),this.totalItemWidth+=e.itemWidth,this.itemHeight=e.itemHeight=Math.round(n.labelHeight||(S.height>1.5*w?S.height:w))}layoutItem(e){let t=this.options,n=this.padding,i="horizontal"===t.layout,s=e.itemHeight,r=this.itemMarginBottom,a=this.itemMarginTop,o=i?mo(t.itemDistance,20):0,l=this.maxLegendWidth,c=t.alignColumns&&this.totalItemWidth>l?this.maxItemWidth:e.itemWidth,h=e.legendItem||{};i&&this.itemX-n+c>l&&(this.itemX=n,this.lastLineHeight&&(this.itemY+=a+this.lastLineHeight+r),this.lastLineHeight=0),this.lastItemY=a+this.itemY+r,this.lastLineHeight=Math.max(s,this.lastLineHeight),h.x=this.itemX,h.y=this.itemY,i?this.itemX+=c:(this.itemY+=a+s+r,this.lastLineHeight=s),this.offsetWidth=this.widthOption||Math.max((i?this.itemX-n-(e.checkbox?0:o):c)+n,this.offsetWidth)}getAllItems(){let e=[];return this.chart.series.forEach((function(t){var n;let i=null===t||void 0===t?void 0:t.options;t&&mo(i.showInLegend,!lo(i.linkedTo)&&void 0,!0)&&(e=e.concat((null===(n=t.legendItem)||void 0===n?void 0:n.labels)||("point"===i.legendType?t.data:t)))})),uo(this,"afterGetAllItems",{allItems:e}),e}getAlignment(){let e=this.options;return this.proximate?e.align.charAt(0)+"tv":e.floating?"":e.align.charAt(0)+e.verticalAlign.charAt(0)+e.layout.charAt(0)}adjustMargins(e,t){let n=this.chart,i=this.options,s=this.getAlignment();s&&[/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/].forEach(((r,a)=>{var o;r.test(s)&&!lo(e[a])&&(n[no[a]]=Math.max(n[no[a]],n.legend[(a+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][a]*i[a%2?"x":"y"]+(null!==(o=i.margin)&&void 0!==o?o:12)+t[a]+(n.titleOffset[a]||0)))}))}proximatePositions(){let e,t=this.chart,n=[],i="left"===this.options.align;for(let s of(this.allItems.forEach((function(e){let s,r,a,o,l=i;e.yAxis&&(e.xAxis.options.reversed&&(l=!l),e.points&&(s=ho(l?e.points:e.points.slice(0).reverse(),(function(e){return fo(e.plotY)}))),r=this.itemMarginTop+e.legendItem.label.getBBox().height+this.itemMarginBottom,o=e.yAxis.top-t.plotTop,a=e.visible?(s?s.plotY:e.yAxis.height)+(o-.3*r):o+e.yAxis.height,n.push({target:a,size:r,item:e}))}),this),io(n,t.plotHeight)))e=s.item.legendItem||{},fo(s.pos)&&(e.y=t.plotTop-t.spacing[0]+s.pos)}render(){let e,t,n,i,s=this.chart,r=s.renderer,a=this.options,o=this.padding,l=this.getAllItems(),c=this.group,h=this.box;this.itemX=o,this.itemY=this.initialItemY,this.offsetWidth=0,this.lastItemY=0,this.widthOption=bo(a.width,s.spacingBox.width-o),i=s.spacingBox.width-2*o-a.x,["rm","lm"].indexOf(this.getAlignment().substring(0,2))>-1&&(i/=2),this.maxLegendWidth=this.widthOption||i,c||(this.group=c=r.g("legend").addClass(a.className||"").attr({zIndex:7}).add(),this.contentGroup=r.g().attr({zIndex:1}).add(c),this.scrollGroup=r.g().add(this.contentGroup)),this.renderTitle(),vo(l,((e,t)=>{var n,i;return((null===(n=e.options)||void 0===n?void 0:n.legendIndex)||0)-((null===(i=t.options)||void 0===i?void 0:i.legendIndex)||0)})),a.reversed&&l.reverse(),this.allItems=l,this.display=e=!!l.length,this.lastLineHeight=0,this.maxItemWidth=0,this.totalItemWidth=0,this.itemHeight=0,l.forEach(this.renderItem,this),l.forEach(this.layoutItem,this),t=(this.widthOption||this.offsetWidth)+o,n=this.lastItemY+this.lastLineHeight+this.titleHeight,n=this.handleOverflow(n)+o,h||(this.box=h=r.rect().addClass("highcharts-legend-box").attr({r:a.borderRadius}).add(c)),s.styledMode||h.attr({stroke:a.borderColor,"stroke-width":a.borderWidth||0,fill:a.backgroundColor||"none"}).shadow(a.shadow),t>0&&n>0&&h[h.placed?"animate":"attr"](h.crisp.call({},{x:0,y:0,width:t,height:n},h.strokeWidth())),c[e?"show":"hide"](),s.styledMode&&"none"===c.getStyle("display")&&(t=n=0),this.legendWidth=t,this.legendHeight=n,e&&this.align(),this.proximate||this.positionItems(),uo(this,"afterRender")}align(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.spacingBox,t=this.chart,n=this.options,i=e.y;/(lth|ct|rth)/.test(this.getAlignment())&&t.titleOffset[0]>0?i+=t.titleOffset[0]:/(lbh|cb|rbh)/.test(this.getAlignment())&&t.titleOffset[2]>0&&(i-=t.titleOffset[2]),i!==e.y&&(e=po(e,{y:i})),t.hasRendered||(this.group.placed=!1),this.group.align(po(n,{width:this.legendWidth,height:this.legendHeight,verticalAlign:this.proximate?"top":n.verticalAlign}),!0,e)}handleOverflow(e){let t,n,i,s,r=this,a=this.chart,o=a.renderer,l=this.options,c=l.y,h="top"===l.verticalAlign,u=this.padding,d=l.maxHeight,f=l.navigation,p=mo(f.animation,!0),m=f.arrowSize||12,g=this.pages,b=this.allItems,v=function(e){"number"==typeof e?w.attr({height:e}):w&&(r.clipRect=w.destroy(),r.contentGroup.clip()),r.contentGroup.div&&(r.contentGroup.div.style.clip=e?"rect("+u+"px,9999px,"+(u+e)+"px,0)":"auto")},y=function(e){return r[e]=o.circle(0,0,1.3*m).translate(m/2,m/2).add(S),a.styledMode||r[e].attr("fill","rgba(0,0,0,0.0001)"),r[e]},x=a.spacingBox.height+(h?-c:c)-u,S=this.nav,w=this.clipRect;return"horizontal"!==l.layout||"middle"===l.verticalAlign||l.floating||(x/=2),d&&(x=Math.min(x,d)),g.length=0,e&&x>0&&e>x&&!1!==f.enabled?(this.clipHeight=t=Math.max(x-20-this.titleHeight-u,0),this.currentPage=mo(this.currentPage,1),this.fullHeight=e,b.forEach(((e,r)=>{let a=(i=e.legendItem||{}).y||0,o=Math.round(i.label.getBBox().height),l=g.length;(!l||a-g[l-1]>t&&(n||a)!==g[l-1])&&(g.push(n||a),l++),i.pageIx=l-1,n&&s&&(s.pageIx=l-1),r===b.length-1&&a+o-g[l-1]>t&&a>g[l-1]&&(g.push(a),i.pageIx=l),a!==n&&(n=a),s=i})),w||(w=r.clipRect=o.clipRect(0,u-2,9999,0),r.contentGroup.clip(w)),v(t),S||(this.nav=S=o.g().attr({zIndex:1}).add(this.group),this.up=o.symbol("triangle",0,0,m,m).add(S),y("upTracker").on("click",(function(){r.scroll(-1,p)})),this.pager=o.text("",15,10).addClass("highcharts-legend-navigation"),!a.styledMode&&f.style&&this.pager.css(f.style),this.pager.add(S),this.down=o.symbol("triangle-down",0,0,m,m).add(S),y("downTracker").on("click",(function(){r.scroll(1,p)}))),r.scroll(0),e=x):S&&(v(),this.nav=S.destroy(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),e}scroll(e,t){let n=this.chart,i=this.pages,s=i.length,r=this.clipHeight,a=this.options.navigation,o=this.pager,l=this.padding,c=this.currentPage+e;c>s&&(c=s),c>0&&(void 0!==t&&Ja(t,n),this.nav.attr({translateX:l,translateY:r+this.padding+7+this.titleHeight,visibility:"inherit"}),[this.up,this.upTracker].forEach((function(e){e.attr({class:1===c?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})})),o.attr({text:c+"/"+s}),[this.down,this.downTracker].forEach((function(e){e.attr({x:18+this.pager.getBBox().width,class:c===s?"highcharts-legend-nav-inactive":"highcharts-legend-nav-active"})}),this),n.styledMode||(this.up.attr({fill:1===c?a.inactiveColor:a.activeColor}),this.upTracker.css({cursor:1===c?"default":"pointer"}),this.down.attr({fill:c===s?a.inactiveColor:a.activeColor}),this.downTracker.css({cursor:c===s?"default":"pointer"})),this.scrollOffset=-i[c-1]+this.initialItemY,this.scrollGroup.animate({translateY:this.scrollOffset}),this.currentPage=c,this.positionCheckboxes(),yo((()=>{uo(this,"afterScroll",{currentPage:c})}),Qa(mo(t,n.renderer.globalAnimation,!0)).duration))}setItemEvents(e,t,n){let i=this,s=e.legendItem||{},r=i.chart.renderer.boxWrapper,a=e instanceof Fr,o=e instanceof Za,l="highcharts-legend-"+(a?"point":"series")+"-active",c=i.chart.styledMode,h=n?[t,s.symbol]:[s.group],u=t=>{i.allItems.forEach((n=>{e!==n&&[n].concat(n.linkedSeries||[]).forEach((e=>{e.setState(t,!a)}))}))};for(let d of h)d&&d.on("mouseover",(function(){e.visible&&u("inactive"),e.setState("hover"),e.visible&&r.addClass(l),c||t.css(i.options.itemHoverStyle)})).on("mouseout",(function(){i.chart.styledMode||t.css(po(e.visible?i.itemStyle:i.itemHiddenStyle)),u(""),r.removeClass(l),e.setState()})).on("click",(function(t){r.removeClass(l),uo(i,"itemClick",{browserEvent:t,legendItem:e},(function(){e.setVisible&&e.setVisible(),u(e.visible?"inactive":"")})),a?e.firePointEvent("legendItemClick",{browserEvent:t}):o&&uo(e,"legendItemClick",{browserEvent:t})}))}createCheckboxForItem(e){e.checkbox=ao("input",{type:"checkbox",className:"highcharts-legend-checkbox",checked:e.selected,defaultChecked:e.selected},this.options.itemCheckboxStyle,this.chart.container),ro(e.checkbox,"click",(function(t){let n=t.target;uo(e.series||e,"checkboxClick",{checked:n.checked,item:e},(function(){e.select()}))}))}}!function(e){e.compose=function(t){go(to,"Core.Legend")&&ro(t,"beforeMargins",(function(){this.legend=new e(this,this.options.legend)}))}}(xo||(xo={}));let So=xo,{animate:wo,animObject:Eo,setAnimation:_o}=Xe,{defaultOptions:To}=Se,{numberFormat:Mo}=Et,{registerEventOptions:Co}=Li,{charts:Ao,doc:Po,marginNames:No,svg:ko,win:Lo}=_,{seriesTypes:Io}=ba,{addEvent:Ro,attr:Oo,createElement:Do,css:Fo,defined:Bo,diffObjects:jo,discardElement:Vo,erase:Go,error:Wo,extend:zo,find:Uo,fireEvent:Ho,getAlignFactor:Xo,getStyle:Yo,isArray:qo,isNumber:Ko,isObject:$o,isString:Zo,merge:Qo,objectEach:Jo,pick:el,pInt:tl,relativeLength:nl,removeEvent:il,splat:sl,syncTimeout:rl,uniqueKey:al}=K;class ol{static chart(e,t,n){return new ol(e,t,n)}constructor(e,t,n){this.sharedClips={};let i=[...arguments];(Zo(e)||e.nodeName)&&(this.renderTo=i.shift()),this.init(i[0],i[1])}setZoomOptions(){let e=this.options.chart,t=e.zooming;this.zooming=r(r({},t),{},{type:el(e.zoomType,t.type),key:el(e.zoomKey,t.key),pinchType:el(e.pinchType,t.pinchType),singleTouch:el(e.zoomBySingleTouch,t.singleTouch,!1),resetButton:Qo(t.resetButton,e.resetZoomButton)})}init(e,t){Ho(this,"init",{args:arguments},(function(){var n,i;let s=Qo(To,e),r=s.chart,a=this.renderTo||r.renderTo;this.userOptions=zo({},e),(this.renderTo=Zo(a)?Po.getElementById(a):a)||Wo(13,!0,this),this.margin=[],this.spacing=[],this.labelCollectors=[],this.callback=t,this.isResizing=0,this.options=s,this.axes=[],this.series=[],this.locale=null!==(n=s.lang.locale)&&void 0!==n?n:null===(i=this.renderTo.closest("[lang]"))||void 0===i?void 0:i.lang,this.time=new me(zo(s.time||{},{locale:this.locale}),s.lang),s.time=this.time.options,this.numberFormatter=(r.numberFormatter||Mo).bind(this),this.styledMode=r.styledMode,this.hasCartesianSeries=r.showAxes,this.index=Ao.length,Ao.push(this),_.chartCount++,Co(this,r),this.xAxis=[],this.yAxis=[],this.pointCount=this.colorCounter=this.symbolCounter=0,this.setZoomOptions(),Ho(this,"afterInit"),this.firstRender()}))}initSeries(e){let t=this.options.chart,n=e.type||t.type,i=Io[n];i||Wo(17,!0,this,{missingModuleFor:n});let s=new i;return"function"==typeof s.init&&s.init(this,e),s}setSortedData(){this.getSeriesOrderByLinks().forEach((function(e){e.points||e.data||!e.enabledDataSorting||e.setData(e.options.data,!1)}))}getSeriesOrderByLinks(){return this.series.concat().sort((function(e,t){return e.linkedSeries.length||t.linkedSeries.length?t.linkedSeries.length-e.linkedSeries.length:0}))}orderItems(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this[e],i=this.options[e]=sl(this.options[e]).slice(),s=this.userOptions[e]=this.userOptions[e]?sl(this.userOptions[e]).slice():[];if(this.hasRendered&&(i.splice(t),s.splice(t)),n)for(let r=t,a=n.length;r<a;++r){let e=n[r];e&&(e.index=r,e instanceof Za&&(e.name=e.getName()),e.options.isInternal||(i[r]=e.options,s[r]=e.userOptions))}}getClipBox(e,t){var n,i,s,r;let a=this.inverted,{xAxis:o,yAxis:l}=e||{},{x:c,y:h,width:u,height:d}=Qo(this.clipBox);return e&&(o&&o.len!==this.plotSizeX&&(u=o.len),l&&l.len!==this.plotSizeY&&(d=l.len),a&&!e.invertible&&([u,d]=[d,u])),t&&(c+=null!==(n=null===(i=a?l:o)||void 0===i?void 0:i.pos)&&void 0!==n?n:this.plotLeft,h+=null!==(s=null===(r=a?o:l)||void 0===r?void 0:r.pos)&&void 0!==s?s:this.plotTop),{x:c,y:h,width:u,height:d}}isInsidePlot(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{inverted:s,plotBox:r,plotLeft:a,plotTop:o,scrollablePlotBox:l}=this,{scrollLeft:c=0,scrollTop:h=0}=i.visiblePlotOnly&&(null===(n=this.scrollablePlotArea)||void 0===n?void 0:n.scrollingContainer)||{},u=i.series,d=i.visiblePlotOnly&&l||r,f=i.inverted?t:e,p=i.inverted?e:t,m={x:f,y:p,isInsidePlot:!0,options:i};if(!i.ignoreX){let e=u&&(s&&!this.polar?u.yAxis:u.xAxis)||{pos:a,len:1/0},t=i.paneCoordinates?e.pos+f:a+f;t>=Math.max(c+a,e.pos)&&t<=Math.min(c+a+d.width,e.pos+e.len)||(m.isInsidePlot=!1)}if(!i.ignoreY&&m.isInsidePlot){let e=!s&&i.axis&&!i.axis.isXAxis&&i.axis||u&&(s?u.xAxis:u.yAxis)||{pos:o,len:1/0},t=i.paneCoordinates?e.pos+p:o+p;t>=Math.max(h+o,e.pos)&&t<=Math.min(h+o+d.height,e.pos+e.len)||(m.isInsidePlot=!1)}return Ho(this,"afterIsInsidePlot",m),m.isInsidePlot}redraw(e){Ho(this,"beforeRedraw");let t,n,i,s,r=this.hasCartesianSeries?this.axes:this.colorAxis||[],a=this.series,o=this.pointer,l=this.legend,c=this.userOptions.legend,h=this.renderer,u=h.isHidden(),d=[],f=this.isDirtyBox,p=this.isDirtyLegend;for(h.rootFontSize=h.boxWrapper.getStyle("font-size"),this.setResponsive&&this.setResponsive(!1),_o(!!this.hasRendered&&e,this),u&&this.temporaryDisplay(),this.layOutTitles(!1),i=a.length;i--;)if(((s=a[i]).options.stacking||s.options.centerInCategory)&&(n=!0,s.isDirty)){t=!0;break}if(t)for(i=a.length;i--;)(s=a[i]).options.stacking&&(s.isDirty=!0);a.forEach((function(e){e.isDirty&&("point"===e.options.legendType?("function"==typeof e.updateTotals&&e.updateTotals(),p=!0):c&&(c.labelFormatter||c.labelFormat)&&(p=!0)),e.isDirtyData&&Ho(e,"updatedData")})),p&&l&&l.options.enabled&&(l.render(),this.isDirtyLegend=!1),n&&this.getStacks(),r.forEach((function(e){e.updateNames(),e.setScale()})),this.getMargins(),r.forEach((function(e){e.isDirty&&(f=!0)})),r.forEach((function(e){let t=e.min+","+e.max;e.extKey!==t&&(e.extKey=t,d.push((function(){Ho(e,"afterSetExtremes",zo(e.eventArgs,e.getExtremes())),delete e.eventArgs}))),(f||n)&&e.redraw()})),f&&this.drawChartBox(),Ho(this,"predraw"),a.forEach((function(e){(f||e.isDirty)&&e.visible&&e.redraw(),e.isDirtyData=!1})),o&&o.reset(!0),h.draw(),Ho(this,"redraw"),Ho(this,"render"),u&&this.temporaryDisplay(!0),d.forEach((function(e){e.call()}))}get(e){let t=this.series;function n(t){return t.id===e||t.options&&t.options.id===e}let i=Uo(this.axes,n)||Uo(this.series,n);for(let s=0;!i&&s<t.length;s++)i=Uo(t[s].points||[],n);return i}createAxes(){let e=this.userOptions;for(let t of(Ho(this,"createAxes"),["xAxis","yAxis"]))for(let n of e[t]=sl(e[t]||{}))new ws(this,n,t);Ho(this,"afterCreateAxes")}getSelectedPoints(){return this.series.reduce(((e,t)=>(t.getPointsCollection().forEach((t=>{el(t.selectedStaging,t.selected)&&e.push(t)})),e)),[])}getSelectedSeries(){return this.series.filter((e=>e.selected))}setTitle(e,t,n){this.applyDescription("title",e),this.applyDescription("subtitle",t),this.applyDescription("caption",void 0),this.layOutTitles(n)}applyDescription(e,t){var n;let i=this,s=this.options[e]=Qo(this.options[e],t),r=this[e];r&&t&&(this[e]=r=r.destroy()),s&&!r&&((r=this.renderer.text(s.text,0,0,s.useHTML).attr({align:s.align,class:"highcharts-"+e,zIndex:s.zIndex||4}).css({textOverflow:"ellipsis",whiteSpace:"nowrap"}).add()).update=function(t,n){i.applyDescription(e,t),i.layOutTitles(n)},this.styledMode||r.css(zo("title"===e?{fontSize:this.options.isStock?"1em":"1.2em"}:{},s.style)),r.textPxLength=r.getBBox().width,r.css({whiteSpace:null===(n=s.style)||void 0===n?void 0:n.whiteSpace}),this[e]=r)}layOutTitles(){var e,t,n,i;let s=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=[0,0,0],{options:a,renderer:o,spacingBox:l}=this;["title","subtitle","caption"].forEach((e=>{let t=this[e],n=this.options[e],i=Qo(l),s=(null===t||void 0===t?void 0:t.textPxLength)||0;if(t&&n){var a;Ho(this,"layOutTitle",{alignTo:i,key:e,textPxLength:s});let l=o.fontMetrics(t),c=l.b,h=l.h,u=n.verticalAlign||"top",d="top"===u,f=d&&n.minScale||1,p="title"===e?d?-3:0:d?r[0]+2:0,m=Math.min(i.width/s,1),g=Math.max(f,m),b=Qo({y:"bottom"===u?c:p+c},{align:"title"===e?m<f?"left":"center":null===(a=this.title)||void 0===a?void 0:a.alignValue},n),v=(n.width||(m>f?this.chartWidth:i.width)/g)+"px";t.alignValue!==b.align&&(t.placed=!1);let y=Math.round(t.css({width:v}).getBBox(n.useHTML).height);if(b.height=y,t.align(b,!1,i).attr({align:b.align,scaleX:g,scaleY:g,"transform-origin":"".concat(i.x+s*g*Xo(b.align)," ").concat(h)}),!n.floating){let e=y*(y<1.2*h?1:g);"top"===u?r[0]=Math.ceil(r[0]+e):"bottom"===u&&(r[2]=Math.ceil(r[2]+e))}}}),this),r[0]&&"top"===((null===(e=a.title)||void 0===e?void 0:e.verticalAlign)||"top")&&(r[0]+=(null===(t=a.title)||void 0===t?void 0:t.margin)||0),r[2]&&"bottom"===(null===(n=a.caption)||void 0===n?void 0:n.verticalAlign)&&(r[2]+=(null===(i=a.caption)||void 0===i?void 0:i.margin)||0);let c=!this.titleOffset||this.titleOffset.join(",")!==r.join(",");this.titleOffset=r,Ho(this,"afterLayOutTitles"),!this.isDirtyBox&&c&&(this.isDirtyBox=this.isDirtyLegend=c,this.hasRendered&&s&&this.isDirtyBox&&this.redraw())}getContainerBox(){let e=[].map.call(this.renderTo.children,(e=>{if(e!==this.container){let t=e.style.display;return e.style.display="none",[e,t]}})),t={width:Yo(this.renderTo,"width",!0)||0,height:Yo(this.renderTo,"height",!0)||0};return e.filter(Boolean).forEach((e=>{let[t,n]=e;t.style.display=n})),t}getChartSize(){var e;let t=this.options.chart,n=t.width,i=t.height,s=this.getContainerBox(),r=s.height<=1||!(null!==(e=this.renderTo.parentElement)&&void 0!==e&&e.style.height)&&"100%"===this.renderTo.style.height;this.chartWidth=Math.max(0,n||s.width||600),this.chartHeight=Math.max(0,nl(i,this.chartWidth)||(r?400:s.height)),this.containerBox=s}temporaryDisplay(e){let t,n=this.renderTo;if(e)for(;null!==(i=n)&&void 0!==i&&i.style;){var i;n.hcOrigStyle&&(Fo(n,n.hcOrigStyle),delete n.hcOrigStyle),n.hcOrigDetached&&(Po.body.removeChild(n),n.hcOrigDetached=!1),n=n.parentNode}else for(;null!==(s=n)&&void 0!==s&&s.style&&(Po.body.contains(n)||n.parentNode||(n.hcOrigDetached=!0,Po.body.appendChild(n)),("none"===Yo(n,"display",!1)||n.hcOricDetached)&&(n.hcOrigStyle={display:n.style.display,height:n.style.height,overflow:n.style.overflow},t={display:"block",overflow:"hidden"},n!==this.renderTo&&(t.height=0),Fo(n,t),n.offsetWidth||n.style.setProperty("display","block","important")),(n=n.parentNode)!==Po.body);)var s}setClassName(e){this.container.className="highcharts-container "+(e||"")}getContainer(){var e,t;let n,i=this.options,s=i.chart,r="data-highcharts-chart",a=al(),o=this.renderTo,l=tl(Oo(o,r));Ko(l)&&Ao[l]&&Ao[l].hasRendered&&Ao[l].destroy(),Oo(o,r,this.index),o.innerHTML=at.emptyHTML,s.skipClone||o.offsetWidth||this.temporaryDisplay(),this.getChartSize();let c=this.chartHeight,h=this.chartWidth;Fo(o,{overflow:"hidden"}),this.styledMode||(n=zo({position:"relative",overflow:"hidden",width:h+"px",height:c+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)",userSelect:"none","touch-action":"manipulation",outline:"none",padding:"0px"},s.style||{}));let u=Do("div",{id:a},n,o);this.container=u,this.getChartSize(),h!==this.chartWidth&&(h=this.chartWidth,this.styledMode||Fo(u,{width:el(null===(e=s.style)||void 0===e?void 0:e.width,h+"px")})),this.containerBox=this.getContainerBox(),this._cursor=u.style.cursor;let d=s.renderer||!ko?_t.getRendererType(s.renderer):ui;if(this.renderer=new d(u,h,c,void 0,s.forExport,null===(t=i.exporting)||void 0===t?void 0:t.allowHTML,this.styledMode),_o(void 0,this),this.setClassName(s.className),this.styledMode)for(let f in i.defs)this.renderer.definition(i.defs[f]);else this.renderer.setStyle(s.style);this.renderer.chartIndex=this.index,Ho(this,"afterGetContainer")}getMargins(e){var t;let{spacing:n,margin:i,titleOffset:s}=this;this.resetMargins(),s[0]&&!Bo(i[0])&&(this.plotTop=Math.max(this.plotTop,s[0]+n[0])),s[2]&&!Bo(i[2])&&(this.marginBottom=Math.max(this.marginBottom,s[2]+n[2])),null!==(t=this.legend)&&void 0!==t&&t.display&&this.legend.adjustMargins(i,n),Ho(this,"getMargins"),e||this.getAxisMargins()}getAxisMargins(){let e=this,t=e.axisOffset=[0,0,0,0],n=e.colorAxis,i=e.margin,s=e=>{e.forEach((e=>{e.visible&&e.getOffset()}))};e.hasCartesianSeries?s(e.axes):(null===n||void 0===n?void 0:n.length)&&s(n),No.forEach(((n,s)=>{Bo(i[s])||(e[n]+=t[s])})),e.setChartSize()}getOptions(){return jo(this.userOptions,To)}reflow(e){var t,n;let i=this,s=i.containerBox,r=i.getContainerBox();null===(t=i.pointer)||void 0===t||delete t.chartPosition,(null===(n=i.exporting)||void 0===n||!n.isPrinting)&&!i.isResizing&&s&&r.width&&((r.width!==s.width||r.height!==s.height)&&(K.clearTimeout(i.reflowTimeout),i.reflowTimeout=rl((function(){i.container&&i.setSize(void 0,void 0,!1)}),100*!!e)),i.containerBox=r)}setReflow(){let e=this,t=t=>{var n;(null===(n=e.options)||void 0===n?void 0:n.chart.reflow)&&e.hasLoaded&&e.reflow(t)};if("function"==typeof ResizeObserver)new ResizeObserver(t).observe(e.renderTo);else{let e=Ro(Lo,"resize",t);Ro(this,"destroy",e)}}setSize(e,t,n){let i=this,s=i.renderer;i.isResizing+=1,_o(n,i);let r=s.globalAnimation;i.oldChartHeight=i.chartHeight,i.oldChartWidth=i.chartWidth,void 0!==e&&(i.options.chart.width=e),void 0!==t&&(i.options.chart.height=t),i.getChartSize();let{chartWidth:a,chartHeight:o,scrollablePixelsX:l=0,scrollablePixelsY:c=0}=i;(i.isDirtyBox||a!==i.oldChartWidth||o!==i.oldChartHeight)&&(i.styledMode||(r?wo:Fo)(i.container,{width:"".concat(a+l,"px"),height:"".concat(o+c,"px")},r),i.setChartSize(!0),s.setSize(a,o,r),i.axes.forEach((function(e){e.isDirty=!0,e.setScale()})),i.isDirtyLegend=!0,i.isDirtyBox=!0,i.layOutTitles(),i.getMargins(),i.redraw(r),i.oldChartHeight=void 0,Ho(i,"resize"),setTimeout((()=>{i&&Ho(i,"endResize")}),Eo(r).duration)),i.isResizing-=1}setChartSize(e){var t,n;let i,s,r,a,{chartHeight:o,chartWidth:l,inverted:c,spacing:h,renderer:u}=this,d=this.clipOffset,f=Math[c?"floor":"round"];this.plotLeft=i=Math.round(this.plotLeft),this.plotTop=s=Math.round(this.plotTop),this.plotWidth=r=Math.max(0,Math.round(l-i-(null!==(t=this.marginRight)&&void 0!==t?t:0))),this.plotHeight=a=Math.max(0,Math.round(o-s-(null!==(n=this.marginBottom)&&void 0!==n?n:0))),this.plotSizeX=c?a:r,this.plotSizeY=c?r:a,this.spacingBox=u.spacingBox={x:h[3],y:h[0],width:l-h[3]-h[1],height:o-h[0]-h[2]},this.plotBox=u.plotBox={x:i,y:s,width:r,height:a},d&&(this.clipBox={x:f(d[3]),y:f(d[0]),width:f(this.plotSizeX-d[1]-d[3]),height:f(this.plotSizeY-d[0]-d[2])}),e||(this.axes.forEach((function(e){e.setAxisSize(),e.setAxisTranslation()})),u.alignElements()),Ho(this,"afterSetChartSize",{skipAxes:e})}resetMargins(){Ho(this,"resetMargins");let e=this,t=e.options.chart,n=t.plotBorderWidth||0,i=Math.round(n)/2;["margin","spacing"].forEach((n=>{let i=t[n],s=$o(i)?i:[i,i,i,i];["Top","Right","Bottom","Left"].forEach(((i,r)=>{var a;e[n][r]=null!==(a=t["".concat(n).concat(i)])&&void 0!==a?a:s[r]}))})),No.forEach(((t,n)=>{var i;e[t]=null!==(i=e.margin[n])&&void 0!==i?i:e.spacing[n]})),e.axisOffset=[0,0,0,0],e.clipOffset=[i,i,i,i],e.plotBorderWidth=n}drawChartBox(){let e,t,n,i=this.options.chart,s=this.renderer,r=this.chartWidth,a=this.chartHeight,o=this.styledMode,l=this.plotBGImage,c=i.backgroundColor,h=i.plotBackgroundColor,u=i.plotBackgroundImage,d=this.plotLeft,f=this.plotTop,p=this.plotWidth,m=this.plotHeight,g=this.plotBox,b=this.clipRect,v=this.clipBox,y=this.chartBackground,x=this.plotBackground,S=this.plotBorder,w="animate";y||(this.chartBackground=y=s.rect().addClass("highcharts-background").add(),w="attr"),o?e=t=y.strokeWidth():(t=(e=i.borderWidth||0)+8*!!i.shadow,n={fill:c||"none"},(e||y["stroke-width"])&&(n.stroke=i.borderColor,n["stroke-width"]=e),y.attr(n).shadow(i.shadow)),y[w]({x:t/2,y:t/2,width:r-t-e%2,height:a-t-e%2,r:i.borderRadius}),w="animate",x||(w="attr",this.plotBackground=x=s.rect().addClass("highcharts-plot-background").add()),x[w](g),!o&&(x.attr({fill:h||"none"}).shadow(i.plotShadow),u&&(l?(u!==l.attr("href")&&l.attr("href",u),l.animate(g)):this.plotBGImage=s.image(u,d,f,p,m).add())),b?b.animate({width:v.width,height:v.height}):this.clipRect=s.clipRect(v),w="animate",S||(w="attr",this.plotBorder=S=s.rect().addClass("highcharts-plot-border").attr({zIndex:1}).add()),o||S.attr({stroke:i.plotBorderColor,"stroke-width":i.plotBorderWidth||0,fill:"none"}),S[w](S.crisp(g,-S.strokeWidth())),this.isDirtyBox=!1,Ho(this,"afterDrawChartBox")}propFromSeries(){let e,t,n,i=this,s=i.options.chart,r=i.options.series;["inverted","angular","polar"].forEach((function(a){for(t=Io[s.type],n=s[a]||t&&t.prototype[a],e=null===r||void 0===r?void 0:r.length;!n&&e--;)(t=Io[r[e].type])&&t.prototype[a]&&(n=!0);i[a]=n}))}linkSeries(e){let t=this,n=t.series;n.forEach((function(e){e.linkedSeries.length=0})),n.forEach((function(e){let{linkedTo:n}=e.options;if(Zo(n)){let i;(i=":previous"===n?t.series[e.index-1]:t.get(n))&&i.linkedParent!==e&&(i.linkedSeries.push(e),e.linkedParent=i,i.enabledDataSorting&&e.setDataSortingOptions(),e.visible=el(e.options.visible,i.options.visible,e.visible))}})),Ho(this,"afterLinkSeries",{isUpdating:e})}renderSeries(){this.series.forEach((function(e){e.translate(),e.render()}))}render(){let e,t=this.axes,n=this.colorAxis,i=this.renderer,s=this.options.chart.axisLayoutRuns||2,r=e=>{e.forEach((e=>{e.visible&&e.render()}))},a=0,o=!0,l=0;for(let h of(this.setTitle(),Ho(this,"beforeMargins"),null!==(c=this.getStacks)&&void 0!==c&&c.call(this),this.getMargins(!0),this.setChartSize(),t)){var c;let{options:e}=h,{labels:t}=e;if(this.hasCartesianSeries&&h.horiz&&h.visible&&t.enabled&&h.series.length&&"colorAxis"!==h.coll&&!this.polar){a=e.tickLength,h.createGroups();let n=new Hi(h,0,"",!0),i=n.createLabel("x",t);if(n.destroy(),i&&el(t.reserveSpace,!Ko(e.crossing))&&(a=i.getBBox().height+t.distance+Math.max(e.offset||0,0)),a){null===i||void 0===i||i.destroy();break}}}for(this.plotHeight=Math.max(this.plotHeight-a,0);(o||e||s>1)&&l<s;){let n=this.plotWidth,i=this.plotHeight;for(let s of t)0===l?s.setScale():(s.horiz&&o||!s.horiz&&e)&&s.setTickInterval(!0);0===l?this.getAxisMargins():this.getMargins(),o=n/this.plotWidth>(l?1:1.1),e=i/this.plotHeight>(l?1:1.05),l++}this.drawChartBox(),this.hasCartesianSeries?r(t):(null===n||void 0===n?void 0:n.length)&&r(n),this.seriesGroup||(this.seriesGroup=i.g("series-group").attr({zIndex:3}).shadow(this.options.chart.seriesGroupShadow).add()),this.dataLabelsGroup||(this.dataLabelsGroup=i.g("datalabels-group").attr({zIndex:6}).add()),this.renderSeries(),this.addCredits(),this.setResponsive&&this.setResponsive(),this.hasRendered=!0}addCredits(e){let t=this,n=Qo(!0,this.options.credits,e);n.enabled&&!this.credits&&(this.credits=this.renderer.text(n.text+(this.mapCredits||""),0,0).addClass("highcharts-credits").on("click",(function(){n.href&&(Lo.location.href=n.href)})).attr({align:n.position.align,zIndex:8}),t.styledMode||this.credits.css(n.style),this.credits.add().align(n.position),this.credits.update=function(e){t.credits=t.credits.destroy(),t.addCredits(e)})}destroy(){let e,t=this,n=t.axes,i=t.series,s=t.container,r=null===s||void 0===s?void 0:s.parentNode;for(Ho(t,"destroy"),t.renderer.forExport?Go(Ao,t):Ao[t.index]=void 0,_.chartCount--,t.renderTo.removeAttribute("data-highcharts-chart"),il(t),e=n.length;e--;)n[e]=n[e].destroy();for(null!==(a=this.scroller)&&void 0!==a&&null!==(o=a.destroy)&&void 0!==o&&o.call(a),e=i.length;e--;){var a,o;i[e]=i[e].destroy()}["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","rangeSelector","legend","resetZoomButton","tooltip","renderer"].forEach((e=>{var n,i;t[e]=null===(n=t[e])||void 0===n||null===(i=n.destroy)||void 0===i?void 0:i.call(n)})),s&&(s.innerHTML=at.emptyHTML,il(s),r&&Vo(s)),Jo(t,(function(e,n){delete t[n]}))}firstRender(){var e;let t=this,n=t.options;t.getContainer(),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.createAxes();let i=qo(n.series)?n.series:[];n.series=[],i.forEach((function(e){t.initSeries(e)})),t.linkSeries(),t.setSortedData(),Ho(t,"beforeRender"),t.render(),null!==(e=t.pointer)&&void 0!==e&&e.getChartPosition(),t.renderer.imgCount||t.hasLoaded||t.onload(),t.temporaryDisplay(!0)}onload(){this.callbacks.concat([this.callback]).forEach((function(e){e&&void 0!==this.index&&e.apply(this,[this])}),this),Ho(this,"load"),Ho(this,"render"),Bo(this.index)&&this.setReflow(),this.warnIfA11yModuleNotLoaded(),this.hasLoaded=!0}warnIfA11yModuleNotLoaded(){let{options:e,title:t}=this;e&&!this.accessibility&&(this.renderer.boxWrapper.attr({role:"img","aria-label":((null===t||void 0===t?void 0:t.element.textContent)||"").replace(/</g,"&lt;")}),e.accessibility&&!1===e.accessibility.enabled||Wo('Highcharts warning: Consider including the "accessibility.js" module to make your chart more usable for people with disabilities. Set the "accessibility.enabled" option to false to remove this warning. See https://www.highcharts.com/docs/accessibility/accessibility-module.',!1,this))}addSeries(e,t,n){let i,s=this;return e&&(t=el(t,!0),Ho(s,"addSeries",{options:e},(function(){i=s.initSeries(e),s.isDirtyLegend=!0,s.linkSeries(),i.enabledDataSorting&&i.setData(e.data,!1),Ho(s,"afterAddSeries",{series:i}),t&&s.redraw(n)}))),i}addAxis(e,t,n,i){return this.createAxis(t?"xAxis":"yAxis",{axis:e,redraw:n,animation:i})}addColorAxis(e,t,n){return this.createAxis("colorAxis",{axis:e,redraw:t,animation:n})}createAxis(e,t){let n=new ws(this,t.axis,e);return el(t.redraw,!0)&&this.redraw(t.animation),n}showLoading(e){let t=this,n=t.options,i=n.loading,s=function(){r&&Fo(r,{left:t.plotLeft+"px",top:t.plotTop+"px",width:t.plotWidth+"px",height:t.plotHeight+"px"})},r=t.loadingDiv,a=t.loadingSpan;r||(t.loadingDiv=r=Do("div",{className:"highcharts-loading highcharts-loading-hidden"},null,t.container)),a||(t.loadingSpan=a=Do("span",{className:"highcharts-loading-inner"},null,r),Ro(t,"redraw",s)),r.className="highcharts-loading",at.setElementHTML(a,el(e,n.lang.loading,"")),!t.styledMode&&(Fo(r,zo(i.style,{zIndex:10})),Fo(a,i.labelStyle),t.loadingShown||(Fo(r,{opacity:0,display:""}),wo(r,{opacity:i.style.opacity||.5},{duration:i.showDuration||0}))),t.loadingShown=!0,s()}hideLoading(){let e=this.options,t=this.loadingDiv;t&&(t.className="highcharts-loading highcharts-loading-hidden",this.styledMode||wo(t,{opacity:0},{duration:e.loading.hideDuration||100,complete:function(){Fo(t,{display:"none"})}})),this.loadingShown=!1}update(e,t,n,i){let s,r,a,o=this,l={credits:"addCredits",title:"setTitle",subtitle:"setSubtitle",caption:"setCaption"},c=e.isResponsiveOptions,h=[];Ho(o,"update",{options:e}),c||o.setResponsive(!1,!0),e=jo(e,o.options),o.userOptions=Qo(o.userOptions,e);let u=e.chart;u&&(Qo(!0,o.options.chart,u),this.setZoomOptions(),"className"in u&&o.setClassName(u.className),("inverted"in u||"polar"in u||"type"in u)&&(o.propFromSeries(),s=!0),"alignTicks"in u&&(s=!0),"events"in u&&Co(this,u),Jo(u,(function(e,t){-1!==o.propsRequireUpdateSeries.indexOf("chart."+t)&&(r=!0),-1!==o.propsRequireDirtyBox.indexOf(t)&&(o.isDirtyBox=!0),-1!==o.propsRequireReflow.indexOf(t)&&(o.isDirtyBox=!0,c||(a=!0))})),!o.styledMode&&u.style&&o.renderer.setStyle(o.options.chart.style||{})),!o.styledMode&&e.colors&&(this.options.colors=e.colors),Jo(e,(function(t,n){o[n]&&"function"==typeof o[n].update?o[n].update(t,!1):"function"==typeof o[l[n]]?o[l[n]](t):"colors"!==n&&-1===o.collectionsWithUpdate.indexOf(n)&&Qo(!0,o.options[n],e[n]),"chart"!==n&&-1!==o.propsRequireUpdateSeries.indexOf(n)&&(r=!0)})),this.collectionsWithUpdate.forEach((function(t){e[t]&&(sl(e[t]).forEach((function(e,i){let s,r=Bo(e.id);r&&(s=o.get(e.id)),!s&&o[t]&&(s=o[t][el(e.index,i)])&&(r&&Bo(s.options.id)||s.options.isInternal)&&(s=void 0),s&&s.coll===t&&(s.update(e,!1),n&&(s.touched=!0)),!s&&n&&o.collectionsWithInit[t]&&(o.collectionsWithInit[t][0].apply(o,[e].concat(o.collectionsWithInit[t][1]||[]).concat([!1])).touched=!0)})),n&&o[t].forEach((function(e){e.touched||e.options.isInternal?delete e.touched:h.push(e)})))})),h.forEach((function(e){e.chart&&e.remove&&e.remove(!1)})),s&&o.axes.forEach((function(e){e.update({},!1)})),r&&o.getSeriesOrderByLinks().forEach((function(e){e.chart&&e.update({},!1)}),this);let d=null===u||void 0===u?void 0:u.width,f=u&&(Zo(u.height)?nl(u.height,d||o.chartWidth):u.height);a||Ko(d)&&d!==o.chartWidth||Ko(f)&&f!==o.chartHeight?o.setSize(d,f,i):el(t,!0)&&o.redraw(i),Ho(o,"afterUpdate",{options:e,redraw:t,animation:i})}setSubtitle(e,t){this.applyDescription("subtitle",e),this.layOutTitles(t)}setCaption(e,t){this.applyDescription("caption",e),this.layOutTitles(t)}showResetZoom(){let e=this,t=To.lang,n=e.zooming.resetButton,i=n.theme,s="chart"===n.relativeTo||"spacingBox"===n.relativeTo?null:"plotBox";function r(){e.zoomOut()}Ho(this,"beforeShowResetZoom",null,(function(){e.resetZoomButton=e.renderer.button(t.resetZoom,null,null,r,i).attr({align:n.position.align,title:t.resetZoomTitle}).addClass("highcharts-reset-zoom").add().align(n.position,!1,s)})),Ho(this,"afterShowResetZoom")}zoomOut(){Ho(this,"selection",{resetSelection:!0},(()=>this.transform({reset:!0,trigger:"zoom"})))}pan(e,t){let n=this,i="object"==typeof t?t:{enabled:t,type:"x"},s=i.type,r=s&&n[{x:"xAxis",xy:"axes",y:"yAxis"}[s]].filter((e=>e.options.panningEnabled&&!e.options.isInternal)),a=n.options.chart;null!==a&&void 0!==a&&a.panning&&(a.panning=i),Ho(this,"pan",{originalEvent:e},(()=>{n.transform({axes:r,event:e,to:{x:e.chartX-(n.mouseDownX||0),y:e.chartY-(n.mouseDownY||0)},trigger:"pan"}),Fo(n.container,{cursor:"move"})}))}transform(e){var t,n;let{axes:i=this.axes,event:s,from:r={},reset:a,selection:o,to:l={},trigger:c}=e,{inverted:h,time:u}=this;null!==(t=this.hoverPoints)&&void 0!==t&&t.forEach((e=>e.setState())),Ho(this,"transform",e);let d,f,p=e.hasZoomed||!1;for(let g of i){var m;let{horiz:e,len:t,minPointOffset:n=0,options:i,reversed:b}=g,v=e?"width":"height",y=e?"x":"y",x=el(l[v],g.len),S=el(r[v],g.len),w=10>Math.abs(x)?1:x/S,E=(r[y]||0)+S/2-g.pos,_=E-((null!==(m=l[y])&&void 0!==m?m:g.pos)+x/2-g.pos)/w,T=b&&!h||!b&&h?-1:1;if(!a&&(E<0||E>g.len))continue;let M=g.chart.polar||g.isOrdinal?0:n*T||0,C=g.toValue(_,!0),A=g.toValue(_+t/w,!0),P=C+M,N=A-M,k=g.allExtremes;if(o&&o[g.coll].push({axis:g,min:Math.min(C,A),max:Math.max(C,A)}),P>N&&([P,N]=[N,P]),1===w&&!a&&"yAxis"===g.coll&&!k){for(let e of g.series){let t=e.getExtremes(e.getProcessedData(!0).modified.getColumn("y")||[],!0);null!==k&&void 0!==k||(k={dataMin:Number.MAX_VALUE,dataMax:-Number.MAX_VALUE}),Ko(t.dataMin)&&Ko(t.dataMax)&&(k.dataMin=Math.min(t.dataMin,k.dataMin),k.dataMax=Math.max(t.dataMax,k.dataMax))}g.allExtremes=k}let{dataMin:L,dataMax:I,min:R,max:O}=zo(g.getExtremes(),k||{}),D=u.parse(i.min),F=u.parse(i.max),B=null!==L&&void 0!==L?L:D,j=null!==I&&void 0!==I?I:F,V=N-P,G=g.categories?0:Math.min(V,j-B),W=B-G*(Bo(D)?0:i.minPadding),z=j+G*(Bo(F)?0:i.maxPadding),U=g.allowZoomOutside||1===w||"zoom"!==c&&w>1,H=Math.min(null!==D&&void 0!==D?D:W,W,U?R:W),X=Math.max(null!==F&&void 0!==F?F:z,z,U?O:z);(!g.isOrdinal||1!==w||a)&&(P<H&&(P=H,w>=1&&(N=P+V)),N>X&&(N=X,w>=1&&(P=N-V)),(a||g.series.length&&(P!==R||N!==O)&&P>=H&&N<=X)&&(o?o[g.coll].push({axis:g,min:P,max:N}):(g.isPanning="zoom"!==c,g.isPanning&&(f=!0),g.setExtremes(a?void 0:P,a?void 0:N,!1,!1,{move:_,trigger:c,scale:w}),!a&&(P>H||N<X)&&"mousewheel"!==c&&(d=!0)),p=!0),this.hasCartesianSeries||a||"mousewheel"===c||(d=!0),s&&(this[e?"mouseDownX":"mouseDownY"]=s[e?"chartX":"chartY"]))}return p&&(o?Ho(this,"selection",o,(()=>{delete e.selection,e.trigger="zoom",this.transform(e)})):(!d||f||this.resetZoomButton?!d&&this.resetZoomButton&&(this.resetZoomButton=this.resetZoomButton.destroy()):this.showResetZoom(),this.redraw("zoom"===c&&(null!==(n=this.options.chart.animation)&&void 0!==n?n:this.pointCount<100)))),p}}zo(ol.prototype,{callbacks:[],collectionsWithInit:{xAxis:[ol.prototype.addAxis,[!0]],yAxis:[ol.prototype.addAxis,[!1]],series:[ol.prototype.addSeries]},collectionsWithUpdate:["xAxis","yAxis","series"],propsRequireDirtyBox:["backgroundColor","borderColor","borderWidth","borderRadius","plotBackgroundColor","plotBackgroundImage","plotBorderColor","plotBorderWidth","plotShadow","shadow"],propsRequireReflow:["margin","marginTop","marginRight","marginBottom","marginLeft","spacing","spacingTop","spacingRight","spacingBottom","spacingLeft"],propsRequireUpdateSeries:["chart.inverted","chart.polar","chart.ignoreHiddenSeries","chart.type","colors","plotOptions","time","tooltip"]});let{stop:ll}=Xe,{composed:cl}=_,{addEvent:hl,createElement:ul,css:dl,defined:fl,erase:pl,merge:ml,pushUnique:gl}=K;function bl(){var e;let t=this.scrollablePlotArea;(this.scrollablePixelsX||this.scrollablePixelsY)&&!t&&(this.scrollablePlotArea=t=new yl(this)),null===(e=t)||void 0===e||e.applyFixed()}function vl(){this.chart.scrollablePlotArea&&(this.chart.scrollablePlotArea.isDirty=!0)}class yl{static compose(e,t,n){gl(cl,this.compose)&&(hl(e,"afterInit",vl),hl(t,"afterSetChartSize",(e=>this.afterSetSize(e.target,e))),hl(t,"render",bl),hl(n,"show",vl))}static afterSetSize(e,t){let n,i,s,{minWidth:r,minHeight:a}=e.options.chart.scrollablePlotArea||{},{clipBox:o,plotBox:l,inverted:c,renderer:h}=e;if(!h.forExport)if(r?(e.scrollablePixelsX=n=Math.max(0,r-e.chartWidth),n&&(e.scrollablePlotBox=ml(e.plotBox),l.width=e.plotWidth+=n,o[c?"height":"width"]+=n,s=!0)):a&&(e.scrollablePixelsY=i=Math.max(0,a-e.chartHeight),fl(i)&&(e.scrollablePlotBox=ml(e.plotBox),l.height=e.plotHeight+=i,o[c?"width":"height"]+=i,s=!1)),fl(s)){if(!t.skipAxes)for(let u of e.axes)(u.horiz===s||e.hasParallelCoordinates&&"yAxis"===u.coll)&&(u.setAxisSize(),u.setAxisTranslation())}else delete e.scrollablePlotBox}constructor(e){var t,n;let i,s=e.options.chart,r=_t.getRendererType(),a=s.scrollablePlotArea||{},o=this.moveFixedElements.bind(this),l={WebkitOverflowScrolling:"touch",overflowX:"hidden",overflowY:"hidden"};e.scrollablePixelsX&&(l.overflowX="auto"),e.scrollablePixelsY&&(l.overflowY="auto"),this.chart=e;let c=this.parentDiv=ul("div",{className:"highcharts-scrolling-parent"},{position:"relative"},e.renderTo),h=this.scrollingContainer=ul("div",{className:"highcharts-scrolling"},l,c),u=this.innerContainer=ul("div",{className:"highcharts-inner-container"},void 0,h),d=this.fixedDiv=ul("div",{className:"highcharts-fixed"},{position:"absolute",overflow:"hidden",pointerEvents:"none",zIndex:((null===(t=s.style)||void 0===t?void 0:t.zIndex)||0)+2,top:0},void 0,!0),f=this.fixedRenderer=new r(d,e.chartWidth,e.chartHeight,s.style);this.mask=f.path().attr({fill:s.backgroundColor||"#fff","fill-opacity":null!==(n=a.opacity)&&void 0!==n?n:.85,zIndex:-1}).addClass("highcharts-scrollable-mask").add(),h.parentNode.insertBefore(d,h),dl(e.renderTo,{overflow:"visible"}),hl(e,"afterShowResetZoom",o),hl(e,"afterApplyDrilldown",o),hl(e,"afterLayOutTitles",o),hl(h,"scroll",(()=>{let{pointer:t,hoverPoint:n}=e;t&&(delete t.chartPosition,n&&(i=n),t.runPointActions(void 0,i,!0))})),u.appendChild(e.container)}applyFixed(){var e;let{chart:t,fixedRenderer:n,isDirty:i,scrollingContainer:s}=this,{axisOffset:r,chartWidth:a,chartHeight:o,container:l,plotHeight:c,plotLeft:h,plotTop:u,plotWidth:d,scrollablePixelsX:f=0,scrollablePixelsY:p=0}=t,{scrollPositionX:m=0,scrollPositionY:g=0}=t.options.chart.scrollablePlotArea||{},b=a+f,v=o+p;n.setSize(a,o),(null===i||void 0===i||i)&&(this.isDirty=!1,this.moveFixedElements()),ll(t.container),dl(l,{width:"".concat(b,"px"),height:"".concat(v,"px")}),t.renderer.boxWrapper.attr({width:b,height:v,viewBox:[0,0,b,v].join(" ")}),null!==(e=t.chartBackground)&&void 0!==e&&e.attr({width:b,height:v}),dl(s,{width:"".concat(a,"px"),height:"".concat(o,"px")}),fl(i)||(s.scrollLeft=f*m,s.scrollTop=p*g);let y=u-r[0]-1,x=h-r[3]-1,S=u+c+r[2]+1,w=h+d+r[1]+1,E=h+d-f,_=u+c-p,T=[["M",0,0]];f?T=[["M",0,y],["L",h-1,y],["L",h-1,S],["L",0,S],["Z"],["M",E,y],["L",a,y],["L",a,S],["L",E,S],["Z"]]:p&&(T=[["M",x,0],["L",x,u-1],["L",w,u-1],["L",w,0],["Z"],["M",x,_],["L",x,o],["L",w,o],["L",w,_],["Z"]]),"adjustHeight"!==t.redrawTrigger&&this.mask.attr({d:T})}moveFixedElements(){let e,{container:t,inverted:n,scrollablePixelsX:i,scrollablePixelsY:s}=this.chart,r=this.fixedRenderer,a=yl.fixedSelectors;if(i&&!n?e=".highcharts-yaxis":i&&n||s&&!n?e=".highcharts-xaxis":s&&n&&(e=".highcharts-yaxis"),!e||this.chart.hasParallelCoordinates&&".highcharts-yaxis"===e)for(let o of[".highcharts-xaxis",".highcharts-yaxis"])for(let e of["".concat(o,":not(.highcharts-radial-axis)"),"".concat(o,"-labels:not(.highcharts-radial-axis-labels)")])pl(a,e);else for(let o of["".concat(e,":not(.highcharts-radial-axis)"),"".concat(e,"-labels:not(.highcharts-radial-axis-labels)")])gl(a,o);for(let o of a)[].forEach.call(t.querySelectorAll(o),(e=>{(e.namespaceURI===r.SVG_NS?r.box:r.box.parentNode).appendChild(e),e.style.pointerEvents="auto"}))}}yl.fixedSelectors=[".highcharts-breadcrumbs-group",".highcharts-contextbutton",".highcharts-caption",".highcharts-credits",".highcharts-drillup-button",".highcharts-legend",".highcharts-legend-checkbox",".highcharts-navigator-series",".highcharts-navigator-xaxis",".highcharts-navigator-yaxis",".highcharts-navigator",".highcharts-range-selector-group",".highcharts-reset-zoom",".highcharts-scrollbar",".highcharts-subtitle",".highcharts-title"];let{format:xl}=Et,{series:Sl}=ba,{destroyObjectProperties:wl,fireEvent:El,getAlignFactor:_l,isNumber:Tl,pick:Ml}=K,Cl=class{constructor(e,t,n,i,s){let r=e.chart.inverted,a=e.reversed;this.axis=e;let o=this.isNegative=!!n!=!!a;this.options=t=t||{},this.x=i,this.total=null,this.cumulative=null,this.points={},this.hasValidPoints=!1,this.stack=s,this.leftCliff=0,this.rightCliff=0,this.alignOptions={align:t.align||(r?o?"left":"right":"center"),verticalAlign:t.verticalAlign||(r?"middle":o?"bottom":"top"),y:t.y,x:t.x},this.textAlign=t.textAlign||(r?o?"right":"left":"center")}destroy(){wl(this,this.axis)}render(e){let t=this.axis.chart,n=this.options,i=n.format,s=i?xl(i,this,t):n.formatter.call(this);if(this.label)this.label.attr({text:s,visibility:"hidden"});else{this.label=t.renderer.label(s,null,void 0,n.shape,void 0,void 0,n.useHTML,!1,"stack-labels");let i={r:n.borderRadius||0,text:s,padding:Ml(n.padding,5),visibility:"hidden"};t.styledMode||(i.fill=n.backgroundColor,i.stroke=n.borderColor,i["stroke-width"]=n.borderWidth,this.label.css(n.style||{})),this.label.attr(i),this.label.added||this.label.add(e)}this.label.labelrank=t.plotSizeY,El(this,"afterRender")}setOffset(e,t,n,i,s,r){let{alignOptions:a,axis:o,label:l,options:c,textAlign:h}=this,u=o.chart,d=this.getStackBox({xOffset:e,width:t,boxBottom:n,boxTop:i,defaultX:s,xAxis:r}),{verticalAlign:f}=a;if(l&&d){let e,t=l.getBBox(void 0,0),n=l.padding,i="justify"===Ml(c.overflow,"justify");a.x=c.x||0,a.y=c.y||0;let{x:s,y:r}=this.adjustStackPosition({labelBox:t,verticalAlign:f,textAlign:h});d.x-=s,d.y-=r,l.align(a,!1,d),(e=u.isInsidePlot(l.alignAttr.x+a.x+s,l.alignAttr.y+a.y+r))||(i=!1),i&&Sl.prototype.justifyDataLabel.call(o,l,a,l.alignAttr,t,d),l.attr({x:l.alignAttr.x,y:l.alignAttr.y,rotation:c.rotation,rotationOriginX:t.width*_l(c.textAlign||"center"),rotationOriginY:t.height/2}),Ml(!i&&c.crop,!0)&&(e=Tl(l.x)&&Tl(l.y)&&u.isInsidePlot(l.x-n+(l.width||0),l.y)&&u.isInsidePlot(l.x+n,l.y)),l[e?"show":"hide"]()}El(this,"afterSetOffset",{xOffset:e,width:t})}adjustStackPosition(e){let{labelBox:t,verticalAlign:n,textAlign:i}=e;return{x:t.width/2+t.width/2*(2*_l(i)-1),y:t.height/2*2*(1-_l(n))}}getStackBox(e){let t=this.axis,n=t.chart,{boxTop:i,defaultX:s,xOffset:r,width:a,boxBottom:o}=e,l=t.stacking.usePercentage?100:Ml(i,this.total,0),c=t.toPixels(l),h=e.xAxis||n.xAxis[0],u=Ml(s,h.translate(this.x))+r,d=Math.abs(c-t.toPixels(o||Tl(t.min)&&t.logarithmic&&t.logarithmic.lin2log(t.min)||0)),f=n.inverted,p=this.isNegative;return f?{x:(p?c:c-d)-n.plotLeft,y:h.height-u-a+h.top-n.plotTop,width:d,height:a}:{x:u+h.transB-n.plotLeft,y:(p?c-d:c)-n.plotTop,width:a,height:d}}},{getDeferredAnimation:Al}=Xe,{series:{prototype:Pl}}=ba,{addEvent:Nl,correctFloat:kl,defined:Ll,destroyObjectProperties:Il,fireEvent:Rl,isNumber:Ol,objectEach:Dl,pick:Fl}=K;function Bl(){let e=this.inverted;this.axes.forEach((e=>{var t;(null===(t=e.stacking)||void 0===t?void 0:t.stacks)&&e.hasVisibleSeries&&(e.stacking.oldStacks=e.stacking.stacks)})),this.series.forEach((t=>{var n;let i=(null===(n=t.xAxis)||void 0===n?void 0:n.options)||{};t.options.stacking&&t.reserveSpace()&&(t.stackKey=[t.type,Fl(t.options.stack,""),e?i.top:i.left,e?i.height:i.width].join(","))}))}function jl(){let e=this.stacking;if(e){var t;let n=e.stacks;Dl(n,((e,t)=>{Il(e),delete n[t]})),null===(t=e.stackTotalGroup)||void 0===t||t.destroy()}}function Vl(){this.stacking||(this.stacking=new Xl(this))}function Gl(e,t,n,i){return!Ll(e)||e.x!==t||i&&e.stackKey!==i?e={x:t,index:0,key:i,stackKey:i}:e.index++,e.key=[n,t,e.index].join(","),e}function Wl(){let e,t=this,n=t.yAxis,i=t.stackKey||"",s=n.stacking.stacks,r=t.getColumn("x",!0),a=t.options.stacking,o=t[a+"Stacker"];o&&[i,"-"+i].forEach((n=>{let i,a,l,c=r.length;for(;c--;){var h,u;i=r[c],e=t.getStackIndicator(e,i,t.index,n),a=null===(h=s[n])||void 0===h?void 0:h[i],(l=null===(u=a)||void 0===u?void 0:u.points[e.key||""])&&o.call(t,l,a,c)}}))}function zl(e,t,n){let i=t.total?100/t.total:0;e[0]=kl(e[0]*i),e[1]=kl(e[1]*i),this.stackedYData[n]=e[1]}function Ul(e){(this.is("column")||this.is("columnrange"))&&(this.options.centerInCategory&&this.chart.series.length>1?Pl.setStackedPoints.call(this,e,"group"):e.stacking.resetStacks())}function Hl(e,t){let n,i,s,r,a,o,l,c=t||this.options.stacking;if(!c||!this.reserveSpace()||({group:"xAxis"}[c]||"yAxis")!==e.coll)return;let h=this.getColumn("x",!0),u=this.getColumn(this.pointValKey||"y",!0),d=[],f=u.length,p=this.options,m=p.threshold||0,g=p.startFromThreshold?m:0,b=p.stack,v=t?"".concat(this.type,",").concat(c):this.stackKey||"",y="-"+v,x=this.negStacks,S=e.stacking,w=S.stacks,E=S.oldStacks;for(S.stacksTouched+=1,l=0;l<f;l++){var _,T;let t=h[l]||0,f=u[l],p=Ol(f)&&f||0;o=(n=this.getStackIndicator(n,t,this.index)).key||"",w[a=(i=x&&p<(g?0:m))?y:v]||(w[a]={}),w[a][t]||(null!==(_=E[a])&&void 0!==_&&_[t]?(w[a][t]=E[a][t],w[a][t].total=null):w[a][t]=new Cl(e,e.options.stackLabels,!!i,t,b)),s=w[a][t],null!==f?(s.points[o]=s.points[this.index]=[Fl(s.cumulative,g)],Ll(s.cumulative)||(s.base=o),s.touched=S.stacksTouched,n.index>0&&!1===this.singleStacks&&(s.points[o][0]=s.points[this.index+","+t+",0"][0])):(delete s.points[o],delete s.points[this.index]);let M=s.total||0;"percent"===c?(r=i?v:y,M=x&&null!==(T=w[r])&&void 0!==T&&T[t]?(r=w[r][t]).total=Math.max(r.total||0,M)+Math.abs(p):kl(M+Math.abs(p))):"group"===c?Ol(f)&&M++:M=kl(M+p),s.cumulative="group"===c?(M||1)-1:kl(Fl(s.cumulative,g)+p),s.total=M,null!==f&&(s.points[o].push(s.cumulative),d[l]=s.cumulative,s.hasValidPoints=!0)}"percent"===c&&(S.usePercentage=!0),"group"!==c&&(this.stackedYData=d),S.oldStacks={}}class Xl{constructor(e){this.oldStacks={},this.stacks={},this.stacksTouched=0,this.axis=e}buildStacks(){let e,t,n=this.axis,i=n.series,s="xAxis"===n.coll,r=n.options.reversedStacks,a=i.length;for(this.resetStacks(),this.usePercentage=!1,t=a;t--;)e=i[r?t:a-t-1],s&&e.setGroupedPoints(n),e.setStackedPoints(n);if(!s)for(t=0;t<a;t++)i[t].modifyStacks();Rl(n,"afterBuildStacks")}cleanStacks(){this.oldStacks&&(this.stacks=this.oldStacks,Dl(this.stacks,(e=>{Dl(e,(e=>{e.cumulative=e.total}))})))}resetStacks(){Dl(this.stacks,(e=>{Dl(e,((t,n)=>{Ol(t.touched)&&t.touched<this.stacksTouched?(t.destroy(),delete e[n]):(t.total=null,t.cumulative=null)}))}))}renderStackTotals(){var e;let t=this.axis,n=t.chart,i=n.renderer,s=this.stacks,r=Al(n,(null===(e=t.options.stackLabels)||void 0===e?void 0:e.animation)||!1),a=this.stackTotalGroup=this.stackTotalGroup||i.g("stack-labels").attr({zIndex:6,opacity:0}).add();a.translate(n.plotLeft,n.plotTop),Dl(s,(e=>{Dl(e,(e=>{e.render(a)}))})),a.animate({opacity:1},r)}}(m||(m={})).compose=function(e,t,n){let i=t.prototype,s=n.prototype;i.getStacks||(Nl(e,"init",Vl),Nl(e,"destroy",jl),i.getStacks=Bl,s.getStackIndicator=Gl,s.modifyStacks=Wl,s.percentStacker=zl,s.setGroupedPoints=Ul,s.setStackedPoints=Hl)};let Yl=m,{defined:ql,merge:Kl,isObject:$l}=K;class Zl extends Za{drawGraph(){let e=this.options,t=(this.gappedPath||this.getGraphPath).call(this),n=this.chart.styledMode;[this,...this.zones].forEach(((i,s)=>{let r,a=i.graph,o=a?"animate":"attr",l=i.dashStyle||e.dashStyle;a?(a.endX=this.preventGraphAnimation?null:t.xMap,a.animate({d:t})):t.length&&(i.graph=a=this.chart.renderer.path(t).addClass("highcharts-graph"+(s?" highcharts-zone-graph-".concat(s-1," "):" ")+(s&&i.className||"")).attr({zIndex:1}).add(this.group)),a&&!n&&(r={stroke:!s&&e.lineColor||i.color||this.color||"#cccccc","stroke-width":e.lineWidth||0,fill:this.fillGraph&&this.color||"none"},l?r.dashstyle=l:"square"!==e.linecap&&(r["stroke-linecap"]=r["stroke-linejoin"]="round"),a[o](r).shadow(e.shadow&&Kl({filterUnits:"userSpaceOnUse"},$l(e.shadow)?e.shadow:{}))),a&&(a.startX=t.xMap,a.isArea=t.isArea)}))}getGraphPath(e,t,n){let i,s=this,r=s.options,a=[],o=[],l=r.step,c=(e=e||s.points).reversed;return c&&e.reverse(),(l={right:1,center:2}[l]||l&&3)&&c&&(l=4-l),(e=this.getValidPoints(e,!1,r.nullInteraction||!(r.connectNulls&&!t&&!n))).forEach((function(c,h){let u,d=c.plotX,f=c.plotY,p=e[h-1],m=c.isNull||"number"!=typeof f;(c.leftCliff||null!==p&&void 0!==p&&p.rightCliff)&&!n&&(i=!0),m&&!ql(t)&&h>0?i=!r.connectNulls:m&&!t?i=!0:(0===h||i?u=[["M",c.plotX,c.plotY]]:s.getPointSpline?u=[s.getPointSpline(e,c,h)]:l?(u=1===l?[["L",p.plotX,f]]:2===l?[["L",(p.plotX+d)/2,p.plotY],["L",(p.plotX+d)/2,f]]:[["L",d,p.plotY]]).push(["L",d,f]):u=[["L",d,f]],o.push(c.x),l&&(o.push(c.x),2===l&&o.push(c.x)),a.push.apply(a,u),i=!1)})),a.xMap=o,s.graphPath=a,a}}Zl.defaultOptions=Kl(Za.defaultOptions,{legendSymbol:"lineMarker"}),ba.registerSeriesType("line",Zl);let{seriesTypes:{line:Ql}}=ba,{extend:Jl,merge:ec,objectEach:tc,pick:nc}=K;class ic extends Ql{drawGraph(){this.areaPath=[],super.drawGraph.apply(this);let{areaPath:e,options:t}=this;[this,...this.zones].forEach(((n,i)=>{var s;let r={},a=n.fillColor||t.fillColor,o=n.area,l=o?"animate":"attr";o?(o.endX=this.preventGraphAnimation?null:e.xMap,o.animate({d:e})):(r.zIndex=0,(o=n.area=this.chart.renderer.path(e).addClass("highcharts-area"+(i?" highcharts-zone-area-".concat(i-1," "):" ")+(i&&n.className||"")).add(this.group)).isArea=!0),this.chart.styledMode||(r.fill=a||n.color||this.color,r["fill-opacity"]=a?1:null!==(s=t.fillOpacity)&&void 0!==s?s:.75,o.css({pointerEvents:this.stickyTracking?"none":"auto"})),o[l](r),o.startX=e.xMap,o.shiftUnit=t.step?2:1}))}getGraphPath(e){let t,n,i,s=Ql.prototype.getGraphPath,r=this.options,a=r.stacking,o=this.yAxis,l=[],c=[],h=this.index,u=o.stacking.stacks[this.stackKey],d=r.threshold,f=Math.round(o.getThreshold(r.threshold)),p=nc(r.connectNulls,"percent"===a),m=function(n,i,s){let r,p,m=e[n],g=a&&u[m.x].points[h],b=m[s+"Null"]||0,v=m[s+"Cliff"]||0,y=!0;v||b?(r=(b?g[0]:g[1])+v,p=g[0]+v,y=!!b):!a&&e[i]&&e[i].isNull&&(r=p=d),void 0!==r&&(c.push({plotX:t,plotY:null===r?f:o.getThreshold(r),isNull:y,isCliff:!0}),l.push({plotX:t,plotY:null===p?f:o.getThreshold(p),doCurve:!1}))};e=e||this.points,a&&(e=this.getStackPoints(e));for(let S=0,w=e.length;S<w;++S)a||(e[S].leftCliff=e[S].rightCliff=e[S].leftNull=e[S].rightNull=void 0),n=e[S].isNull,t=nc(e[S].rectPlotX,e[S].plotX),i=a?nc(e[S].yBottom,f):f,(!n||p)&&(p||m(S,S-1,"left"),n&&!a&&p||(c.push(e[S]),l.push({x:S,plotX:t,plotY:i})),p||m(S,S+1,"right"));let g=s.call(this,c,!0,!0);l.reversed=!0;let b=s.call(this,l,!0,!0),v=b[0];v&&"M"===v[0]&&(b[0]=["L",v[1],v[2]]);let y=g.concat(b);y.length&&y.push(["Z"]);let x=s.call(this,c,!1,p);return this.chart.series.length>1&&a&&c.some((e=>e.isCliff))&&(y.hasStackedCliffs=x.hasStackedCliffs=!0),y.xMap=g.xMap,this.areaPath=y,x}getStackPoints(e){let t=this,n=[],i=[],s=this.xAxis,r=this.yAxis,a=r.stacking.stacks[this.stackKey],o={},l=r.series,c=l.length,h=r.options.reversedStacks?1:-1,u=l.indexOf(t);if(e=e||this.points,this.options.stacking){for(let t=0;t<e.length;t++)e[t].leftNull=e[t].rightNull=void 0,o[e[t].x]=e[t];tc(a,(function(e,t){null!==e.total&&i.push(t)})),i.sort((function(e,t){return e-t}));let d=l.map((e=>e.visible));i.forEach((function(e,f){let p,m,g=0;if(o[e]&&!o[e].isNull)n.push(o[e]),[-1,1].forEach((function(n){let s=1===n?"rightNull":"leftNull",r=a[i[f+n]],g=0;if(r){let n=u;for(;n>=0&&n<c;){let i=l[n].index;!(p=r.points[i])&&(i===t.index?o[e][s]=!0:d[n]&&(m=a[e].points[i])&&(g-=m[1]-m[0])),n+=h}}o[e][1===n?"rightCliff":"leftCliff"]=g}));else{let t=u;for(;t>=0&&t<c;){let n=l[t].index;if(p=a[e].points[n]){g=p[1];break}t+=h}g=nc(g,0),g=r.translate(g,0,1,0,1),n.push({isNull:!0,plotX:s.translate(e,0,0,0,1),x:e,plotY:g,yBottom:g})}}))}return n}}ic.defaultOptions=ec(Ql.defaultOptions,{threshold:0,legendSymbol:"areaMarker"}),Jl(ic.prototype,{singleStacks:!1}),ba.registerSeriesType("area",ic);let{line:sc}=ba.seriesTypes,{merge:rc,pick:ac}=K;class oc extends sc{getPointSpline(e,t,n){let i,s,r,a,o=t.plotX||0,l=t.plotY||0,c=e[n-1],h=e[n+1];function u(e){return e&&!e.isNull&&!1!==e.doCurve&&!t.isCliff}if(u(c)&&u(h)){let e=c.plotX||0,n=c.plotY||0,u=h.plotX||0,d=h.plotY||0,f=0;i=(1.5*o+e)/2.5,s=(1.5*l+n)/2.5,r=(1.5*o+u)/2.5,a=(1.5*l+d)/2.5,r!==i&&(f=(a-s)*(r-o)/(r-i)+l-a),s+=f,a+=f,s>n&&s>l?(s=Math.max(n,l),a=2*l-s):s<n&&s<l&&(s=Math.min(n,l),a=2*l-s),a>d&&a>l?(a=Math.max(d,l),s=2*l-a):a<d&&a<l&&(a=Math.min(d,l),s=2*l-a),t.rightContX=r,t.rightContY=a,t.controlPoints={low:[i,s],high:[r,a]}}let d=["C",ac(c.rightContX,c.plotX,0),ac(c.rightContY,c.plotY,0),ac(i,o,0),ac(s,l,0),o,l];return c.rightContX=c.rightContY=void 0,d}}oc.defaultOptions=rc(sc.defaultOptions),ba.registerSeriesType("spline",oc);let lc=oc,{area:cc,area:{prototype:hc}}=ba.seriesTypes,{extend:uc,merge:dc}=K;class fc extends lc{}fc.defaultOptions=dc(lc.defaultOptions,cc.defaultOptions),uc(fc.prototype,{getGraphPath:hc.getGraphPath,getStackPoints:hc.getStackPoints,drawGraph:hc.drawGraph}),ba.registerSeriesType("areaspline",fc);let{animObject:pc}=Xe,{parse:mc}=Ne,{noop:gc}=_,{clamp:bc,crisp:vc,defined:yc,extend:xc,fireEvent:Sc,isArray:wc,isNumber:Ec,merge:_c,pick:Tc,objectEach:Mc}=K;class Cc extends Za{animate(e){let t,n,i=this,s=this.yAxis,r=s.pos,a=s.reversed,o=i.options,{clipOffset:l,inverted:c}=this.chart,h={},u=c?"translateX":"translateY";e&&l?(h.scaleY=.001,n=bc(s.toPixels(o.threshold||0),r,r+s.len),c?h.translateX=(n+=a?-Math.floor(l[0]):Math.ceil(l[2]))-s.len:h.translateY=n+=a?Math.ceil(l[0]):-Math.floor(l[2]),i.clipBox&&i.setClip(),i.group.attr(h)):(t=Number(i.group.attr(u)),i.group.animate({scaleY:1},xc(pc(i.options.animation),{step:function(e,n){i.group&&(h[u]=t+n.pos*(r-t),i.group.attr(h))}})))}init(e,t){super.init.apply(this,arguments);let n=this;(e=n.chart).hasRendered&&e.series.forEach((function(e){e.type===n.type&&(e.isDirty=!0)}))}getColumnMetrics(){var e,t;let n,i=this,s=i.options,r=i.xAxis,a=i.yAxis,o=r.options.reversedStacks,l=r.reversed&&!o||!r.reversed&&o,c={},h=0;!1===s.grouping?h=1:i.chart.series.forEach((function(e){let t,s=e.yAxis,r=e.options;e.type===i.type&&e.reserveSpace()&&a.len===s.len&&a.pos===s.pos&&(r.stacking&&"group"!==r.stacking?(void 0===c[n=e.stackKey]&&(c[n]=h++),t=c[n]):!1!==r.grouping&&(t=h++),e.columnIndex=t)}));let u=Math.min(Math.abs(r.transA)*(!(null!==(e=r.brokenAxis)&&void 0!==e&&e.hasBreaks)&&(null===(t=r.ordinal)||void 0===t?void 0:t.slope)||s.pointRange||r.closestPointRange||r.tickInterval||1),r.len),d=u*s.groupPadding,f=(u-2*d)/(h||1),p=Math.min(s.maxPointWidth||r.len,Tc(s.pointWidth,f*(1-2*s.pointPadding))),m=(i.columnIndex||0)+ +!!l;return i.columnMetrics={width:p,offset:(f-p)/2+(d+m*f-u/2)*(l?-1:1),paddedWidth:f,columnCount:h},i.columnMetrics}crispCol(e,t,n,i){let s=this.borderWidth,r=this.chart.inverted;return i=vc(t+i,s,r)-(t=vc(t,s,r)),this.options.crisp&&(n=vc(e+n,s)-(e=vc(e,s))),{x:e,y:t,width:n,height:i}}adjustForMissingColumns(e,t,n,i){if(!n.isNull&&i.columnCount>1){var s;let r=this.xAxis.series.filter((e=>e.visible)).map((e=>e.index)),a=0,o=0;Mc(null===(s=this.xAxis.stacking)||void 0===s?void 0:s.stacks,(e=>{var t;let i="number"==typeof n.x?null===(t=e[n.x.toString()])||void 0===t?void 0:t.points:void 0,s=null===i||void 0===i?void 0:i[this.index],l={};if(i&&wc(s)){let e=this.index,t=Object.keys(i).filter((e=>!e.match(",")&&i[e]&&i[e].length>1)).map(parseFloat).filter((e=>-1!==r.indexOf(e))).filter((t=>{let n=this.chart.series[t].options,i=n.stacking&&n.stack;if(yc(i)){if(Ec(l[i]))return e===t&&(e=l[i]),!1;l[i]=t}return!0})).sort(((e,t)=>t-e));a=t.indexOf(e),o=t.length}})),a=this.xAxis.reversed?o-1-a:a;let l=(o-1)*i.paddedWidth+t;e=(n.plotX||0)+l/2-t-a*i.paddedWidth}return e}translate(){let e=this,t=e.chart,n=e.options,i=e.dense=e.closestPointRange*e.xAxis.transA<2,s=e.borderWidth=Tc(n.borderWidth,+!i),r=e.xAxis,a=e.yAxis,o=n.threshold,l=Tc(n.minPointLength,5),c=e.getColumnMetrics(),h=c.width,u=e.pointXOffset=c.offset,d=e.dataMin,f=e.dataMax,p=e.translatedThreshold=a.getThreshold(o),m=e.barW=Math.max(h,1+2*s);n.pointPadding&&n.crisp&&(m=Math.ceil(m)),Za.prototype.translate.apply(e),e.points.forEach((function(i){let s,g=Tc(i.yBottom,p),b=999+Math.abs(g),v=i.plotX||0,y=bc(i.plotY,-b,a.len+b),x=Math.min(y,g),S=Math.max(y,g)-x,w=h,E=v+u,_=m;l&&Math.abs(S)<l&&(S=l,s=!a.reversed&&!i.negative||a.reversed&&i.negative,Ec(o)&&Ec(f)&&i.y===o&&f<=o&&(a.min||0)<o&&(d!==f||(a.max||0)<=o)&&(s=!s,i.negative=!i.negative),x=Math.abs(x-p)>l?g-l:p-(s?l:0)),yc(i.options.pointWidth)&&(E-=Math.round(((w=_=Math.ceil(i.options.pointWidth))-h)/2)),n.centerInCategory&&(E=e.adjustForMissingColumns(E,w,i,c)),i.barX=E,i.pointWidth=w,i.tooltipPos=t.inverted?[bc(a.len+a.pos-t.plotLeft-y,a.pos-t.plotLeft,a.len+a.pos-t.plotLeft),r.len+r.pos-t.plotTop-E-_/2,S]:[r.left-t.plotLeft+E+_/2,bc(y+a.pos-t.plotTop,a.pos-t.plotTop,a.len+a.pos-t.plotTop),S],i.shapeType=e.pointClass.prototype.shapeType||"roundedRect",i.shapeArgs=e.crispCol(E,x,_,i.isNull?0:S)})),Sc(this,"afterColumnTranslate")}drawGraph(){this.group[this.dense?"addClass":"removeClass"]("highcharts-dense-data")}pointAttribs(e,t){var n,i;let s,r,a,o=this.options,l=this.pointAttrToOptions||{},c=l.stroke||"borderColor",h=l["stroke-width"]||"borderWidth",u=e&&e.color||this.color,d=e&&e[c]||o[c]||u,f=e&&e.options.dashStyle||o.dashStyle,p=e&&e[h]||o[h]||this[h]||0,m=null!==e&&void 0!==e&&e.isNull&&o.nullInteraction?0:null!==(n=null!==(i=null===e||void 0===e?void 0:e.opacity)&&void 0!==i?i:o.opacity)&&void 0!==n?n:1;e&&this.zones.length&&(r=e.getZone(),u=e.options.color||r&&(r.color||e.nonZonedColor)||this.color,r&&(d=r.borderColor||d,f=r.dashStyle||f,p=r.borderWidth||p)),t&&e&&(a=(s=_c(o.states[t],e.options.states&&e.options.states[t]||{})).brightness,u=s.color||void 0!==a&&mc(u).brighten(s.brightness).get()||u,d=s[c]||d,p=s[h]||p,f=s.dashStyle||f,m=Tc(s.opacity,m));let g={fill:u,stroke:d,"stroke-width":p,opacity:m};return f&&(g.dashstyle=f),g}drawPoints(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.points,n=this,i=this.chart,s=n.options,r=s.nullInteraction,a=i.renderer,o=s.animationLimit||250;t.forEach((function(t){let l=t.plotY,c=t.graphic,h=!!c,u=c&&i.pointCount<o?"animate":"attr";Ec(l)&&(null!==t.y||r)?(e=t.shapeArgs,c&&t.hasNewShapeType()&&(c=c.destroy()),n.enabledDataSorting&&(t.startXPos=n.xAxis.reversed?-(e&&e.width||0):n.xAxis.width),!c&&(t.graphic=c=a[t.shapeType](e).add(t.group||n.group),c&&n.enabledDataSorting&&i.hasRendered&&i.pointCount<o&&(c.attr({x:t.startXPos}),h=!0,u="animate")),c&&h&&c[u](_c(e)),i.styledMode||c[u](n.pointAttribs(t,t.selected&&"select")).shadow(!1!==t.allowShadow&&s.shadow),c&&(c.addClass(t.getClassName(),!0),c.attr({visibility:t.visible?"inherit":"hidden"}))):c&&(t.graphic=c.destroy())}))}drawTracker(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.points,n=this,i=n.chart,s=i.pointer,r=function(e){null===s||void 0===s||s.normalize(e);let t=null===s||void 0===s?void 0:s.getPointFromEvent(e);s&&t&&n.options.enableMouseTracking&&(i.isInsidePlot(e.chartX-i.plotLeft,e.chartY-i.plotTop,{visiblePlotOnly:!0})||(null===s||void 0===s?void 0:s.inClass(e.target,"highcharts-data-label")))&&(s.isDirectTouch=!0,t.onMouseOver(e))};t.forEach((function(t){e=wc(t.dataLabels)?t.dataLabels:t.dataLabel?[t.dataLabel]:[],t.graphic&&(t.graphic.element.point=t),e.forEach((function(e){(e.div||e.element).point=t}))})),n._hasTracking||(n.trackerGroups.forEach((function(e){n[e]&&(n[e].addClass("highcharts-tracker").on("mouseover",r).on("mouseout",(function(e){null===s||void 0===s||s.onTrackerMouseOut(e)})).on("touchstart",r),!i.styledMode&&n.options.cursor&&n[e].css({cursor:n.options.cursor}))})),n._hasTracking=!0),Sc(this,"afterDrawTracker")}remove(){let e=this,t=e.chart;t.hasRendered&&t.series.forEach((function(t){t.type===e.type&&(t.isDirty=!0)})),Za.prototype.remove.apply(e,arguments)}}Cc.defaultOptions=_c(Za.defaultOptions,{borderRadius:3,centerInCategory:!1,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{halo:!1,brightness:.1},select:{color:"#cccccc",borderColor:"#000000"}},dataLabels:{align:void 0,verticalAlign:void 0,y:void 0},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0,borderColor:"#ffffff"}),xc(Cc.prototype,{directTouch:!0,getSymbol:gc,negStacks:!0,trackerGroups:["group","dataLabelsGroup"]}),ba.registerSeriesType("column",Cc);let Ac=Cc,{getDeferredAnimation:Pc}=Xe,{format:Nc}=Et,{defined:kc,extend:Lc,fireEvent:Ic,getAlignFactor:Rc,isArray:Oc,isString:Dc,merge:Fc,objectEach:Bc,pick:jc,pInt:Vc,splat:Gc}=K;!function(e){function t(){return l(this).some((e=>null===e||void 0===e?void 0:e.enabled))}function n(e,t,n,i,s){let{chart:r,enabledDataSorting:a}=this,o=this.isCartesian&&r.inverted,l=e.plotX,c=e.plotY,h=n.rotation||0,u=kc(l)&&kc(c)&&r.isInsidePlot(l,Math.round(c),{inverted:o,paneCoordinates:!0,series:this}),d=0===h&&"justify"===jc(n.overflow,a?"none":"justify"),f=this.visible&&!1!==e.visible&&kc(l)&&(e.series.forceDL||a&&!d||u||jc(n.inside,!!this.options.stacking)&&i&&r.isInsidePlot(l,o?i.x+1:i.y+i.height-1,{inverted:o,paneCoordinates:!0,series:this})),p=e.pos();if(f&&p){var m,g;let l=t.getBBox(),c=t.getBBox(void 0,0);if(i=Lc({x:p[0],y:Math.round(p[1]),width:0,height:0},i||{}),"plotEdges"===n.alignTo&&this.isCartesian&&(i[o?"x":"y"]=0,i[o?"width":"height"]=(null===(m=this.yAxis)||void 0===m?void 0:m.len)||0),Lc(n,{width:l.width,height:l.height}),g=i,a&&this.xAxis&&!d&&this.setDataLabelStartPos(e,t,s,u,g),t.align(Fc(n,{width:c.width,height:c.height}),!1,i,!1),t.alignAttr.x+=Rc(n.align)*(c.width-l.width),t.alignAttr.y+=Rc(n.verticalAlign)*(c.height-l.height),t[t.placed?"animate":"attr"]({"text-align":t.alignAttr["text-align"]||"center",x:t.alignAttr.x+(l.width-c.width)/2,y:t.alignAttr.y+(l.height-c.height)/2,rotationOriginX:(t.width||0)/2,rotationOriginY:(t.height||0)/2}),d&&i.height>=0)this.justifyDataLabel(t,n,t.alignAttr,l,i,s);else if(jc(n.crop,!0)){let{x:e,y:n}=t.alignAttr;f=r.isInsidePlot(e,n,{paneCoordinates:!0,series:this})&&r.isInsidePlot(e+l.width-1,n+l.height-1,{paneCoordinates:!0,series:this})}n.shape&&!h&&t[s?"attr":"animate"]({anchorX:p[0],anchorY:p[1]})}s&&a&&(t.placed=!1),f||a&&!d?(t.show(),t.placed=!0):(t.hide(),t.placed=!1)}function i(){return this.plotGroup("dataLabelsGroup","data-labels",this.hasRendered?"inherit":"hidden",this.options.dataLabels.zIndex||6,this.chart.dataLabelsGroup)}function s(e){let t=this.hasRendered||0,n=this.initDataLabelsGroup().attr({opacity:+t});return!t&&n&&(this.visible&&n.show(),this.options.animation?n.animate({opacity:1},e):n.attr({opacity:1})),n}function r(e){var t;let n;e=e||this.points;let i=this,s=i.chart,r=i.options,a=s.renderer,{backgroundColor:c,plotBackgroundColor:h}=s.options.chart,u=a.getContrast(Dc(h)&&h||Dc(c)&&c||"#000000"),d=l(i),{animation:f,defer:p}=d[0],m=p?Pc(s,f,i):{defer:0,duration:0};Ic(this,"drawDataLabels"),null!==(t=i.hasDataLabels)&&void 0!==t&&t.call(i)&&(n=this.initDataLabels(m),e.forEach((e=>{var t;let l=e.dataLabels||[],c=e.color||i.color;Gc(o(d,e.dlOptions||(null===(t=e.options)||void 0===t?void 0:t.dataLabels))).forEach(((t,o)=>{var h;let d,f,p,m,g=t.enabled&&(e.visible||e.dataLabelOnHidden)&&(!e.isNull||e.dataLabelOnNull)&&function(e,t){let n=t.filter;if(n){let t=n.operator,i=e[n.property],s=n.value;return">"===t&&i>s||"<"===t&&i<s||">="===t&&i>=s||"<="===t&&i<=s||"=="===t&&i==s||"==="===t&&i===s||"!="===t&&i!=s||"!=="===t&&i!==s||!1}return!0}(e,t),{backgroundColor:b,borderColor:v,distance:y,style:x={}}=t,S={},w=l[o],E=!w;g&&(f=kc(d=jc(t[e.formatPrefix+"Format"],t.format))?Nc(d,e,s):(t[e.formatPrefix+"Formatter"]||t.formatter).call(e,t),p=t.rotation,!s.styledMode&&(x.color=jc(t.color,x.color,Dc(i.color)?i.color:void 0,"#000000"),"contrast"===x.color?("none"!==b&&(m=b),e.contrastColor=a.getContrast("auto"!==m&&Dc(m)&&m||(Dc(c)?c:"")),x.color=m||!kc(y)&&t.inside||0>Vc(y||0)||r.stacking?e.contrastColor:u):delete e.contrastColor,r.cursor&&(x.cursor=r.cursor)),S={r:t.borderRadius||0,rotation:p,padding:t.padding,zIndex:1},s.styledMode||(S.fill="auto"===b?e.color:b,S.stroke="auto"===v?e.color:v,S["stroke-width"]=t.borderWidth),Bc(S,((e,t)=>{void 0===e&&delete S[t]}))),!w||g&&kc(f)&&!!(w.div||null!==(h=w.text)&&void 0!==h&&h.foreignObject)==!!t.useHTML&&(w.rotation&&t.rotation||w.rotation===t.rotation)||(w=void 0,E=!0),g&&kc(f)&&""!==f&&(w?S.text=f:(w=a.label(f,0,0,t.shape,void 0,void 0,t.useHTML,void 0,"data-label")).addClass(" highcharts-data-label-color-"+e.colorIndex+" "+(t.className||"")+(t.useHTML?" highcharts-tracker":"")),w&&(w.options=t,w.attr(S),s.styledMode?x.width&&w.css({width:x.width,textOverflow:x.textOverflow,whiteSpace:x.whiteSpace}):w.css(x).shadow(t.shadow),Ic(w,"beforeAddingDataLabel",{labelOptions:t,point:e}),w.added||w.add(n),i.alignDataLabel(e,w,t,void 0,E),w.isActive=!0,l[o]&&l[o]!==w&&l[o].destroy(),l[o]=w))}));let h=l.length;for(;h--;){var f,p;null!==(f=l[h])&&void 0!==f&&f.isActive?l[h].isActive=!1:(null!==(p=l[h])&&void 0!==p&&p.destroy(),l.splice(h,1))}e.dataLabel=l[0],e.dataLabels=l}))),Ic(this,"afterDrawDataLabels")}function a(e,t,n,i,s,r){let a,o,l=this.chart,c=t.align,h=t.verticalAlign,u=e.box?0:e.padding||0,d=l.inverted?this.yAxis:this.xAxis,f=d?d.left-l.plotLeft:0,p=l.inverted?this.xAxis:this.yAxis,m=p?p.top-l.plotTop:0,{x:g=0,y:b=0}=t;return(a=(n.x||0)+u+f)<0&&("right"===c&&g>=0?(t.align="left",t.inside=!0):g-=a,o=!0),(a=(n.x||0)+i.width-u+f)>l.plotWidth&&("left"===c&&g<=0?(t.align="right",t.inside=!0):g+=l.plotWidth-a,o=!0),(a=n.y+u+m)<0&&("bottom"===h&&b>=0?(t.verticalAlign="top",t.inside=!0):b-=a,o=!0),(a=(n.y||0)+i.height-u+m)>l.plotHeight&&("top"===h&&b<=0?(t.verticalAlign="bottom",t.inside=!0):b+=l.plotHeight-a,o=!0),o&&(t.x=g,t.y=b,e.placed=!r,e.align(t,void 0,s)),o}function o(e,t){let n,i=[];if(Oc(e)&&!Oc(t))i=e.map((function(e){return Fc(e,t)}));else if(Oc(t)&&!Oc(e))i=t.map((function(t){return Fc(e,t)}));else if(Oc(e)||Oc(t)){if(Oc(e)&&Oc(t))for(n=Math.max(e.length,t.length);n--;)i[n]=Fc(e[n],t[n])}else i=Fc(e,t);return i}function l(e){var t,n;let i=e.chart.options.plotOptions;return Gc(o(o(null===i||void 0===i||null===(t=i.series)||void 0===t?void 0:t.dataLabels,null===i||void 0===i||null===(n=i[e.type])||void 0===n?void 0:n.dataLabels),e.options.dataLabels))}function c(e,t,n,i,s){let r=this.chart,a=r.inverted,o=this.xAxis,l=o.reversed,c=((a?t.height:t.width)||0)/2,h=e.pointWidth,u=h?h/2:0;t.startXPos=a?s.x:l?-c-u:o.width-c+u,t.startYPos=a?l?this.yAxis.height-c+u:-c-u:s.y,i?"hidden"===t.visibility&&(t.show(),t.attr({opacity:0}).animate({opacity:1})):t.attr({opacity:1}).animate({opacity:0},void 0,t.hide),r.hasRendered&&(n&&t.attr({x:t.startXPos,y:t.startYPos}),t.placed=!0)}e.compose=function(e){let l=e.prototype;l.initDataLabels||(l.initDataLabels=s,l.initDataLabelsGroup=i,l.alignDataLabel=n,l.drawDataLabels=r,l.justifyDataLabel=a,l.mergeArrays=o,l.setDataLabelStartPos=c,l.hasDataLabels=t)}}(g||(g={}));let Wc=g,{composed:zc}=_,{series:Uc}=ba,{merge:Hc,pushUnique:Xc}=K;!function(e){function t(e,t,n,i,s){var r,a,o,l,c,h,u;let{chart:d,options:f}=this,p=d.inverted,m=(null===(r=this.xAxis)||void 0===r?void 0:r.len)||d.plotSizeX||0,g=(null===(a=this.yAxis)||void 0===a?void 0:a.len)||d.plotSizeY||0,b=e.dlBox||e.shapeArgs,v=null!==(o=e.below)&&void 0!==o?o:(e.plotY||0)>(null!==(l=this.translatedThreshold)&&void 0!==l?l:g),y=null!==(c=n.inside)&&void 0!==c?c:!!f.stacking;if(b){if(i=Hc(b),"allow"!==n.overflow||!1!==n.crop||!1!==f.clip){i.y<0&&(i.height+=i.y,i.y=0);let e=i.y+i.height-g;e>0&&e<i.height-1&&(i.height-=e)}p&&(i={x:g-i.y-i.height,y:m-i.x-i.width,width:i.height,height:i.width}),y||(p?(i.x+=v?0:i.width,i.width=0):(i.y+=v?i.height:0,i.height=0))}null!==(h=n.align)&&void 0!==h||(n.align=!p||y?"center":v?"right":"left"),null!==(u=n.verticalAlign)&&void 0!==u||(n.verticalAlign=p||y?"middle":v?"top":"bottom"),Uc.prototype.alignDataLabel.call(this,e,t,n,i,s),n.inside&&e.contrastColor&&t.css({color:e.contrastColor})}e.compose=function(e){Wc.compose(Uc),Xc(zc,"ColumnDataLabel")&&(e.prototype.alignDataLabel=t)}}(b||(b={}));let Yc=b,{extend:qc,merge:Kc}=K;class $c extends Ac{}$c.defaultOptions=Kc(Ac.defaultOptions,{}),qc($c.prototype,{inverted:!0}),ba.registerSeriesType("bar",$c);let{column:Zc,line:Qc}=ba.seriesTypes,{addEvent:Jc,extend:eh,merge:th}=K;class nh extends Qc{applyJitter(){let e=this,t=this.options.jitter,n=this.points.length;t&&this.points.forEach((function(i,s){["x","y"].forEach((function(r,a){if(t[r]&&!i.isNull){let o="plot".concat(r.toUpperCase()),l=e["".concat(r,"Axis")],c=t[r]*l.transA;if(l&&!l.logarithmic){let e=Math.max(0,(i[o]||0)-c),t=Math.min(l.len,(i[o]||0)+c);i[o]=e+(t-e)*function(e){let t=1e4*Math.sin(e);return t-Math.floor(t)}(s+a*n),"x"===r&&(i.clientX=i.plotX)}}}))}))}drawGraph(){this.options.lineWidth?super.drawGraph():this.graph&&(this.graph=this.graph.destroy())}}nh.defaultOptions=th(Qc.defaultOptions,{lineWidth:0,findNearestPointBy:"xy",jitter:{x:0,y:0},marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">\u25cf</span> <span style="font-size: 0.8em"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}}),eh(nh.prototype,{drawTracker:Zc.prototype.drawTracker,sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"]}),Jc(nh,"afterTranslate",(function(){this.applyJitter()})),ba.registerSeriesType("scatter",nh);let{deg2rad:ih}=_,{fireEvent:sh,isNumber:rh,pick:ah,relativeLength:oh}=K;!function(e){e.getCenter=function(){let e,t,n,i=this.options,s=this.chart,r=2*(i.slicedOffset||0),a=s.plotWidth-2*r,o=s.plotHeight-2*r,l=i.center,c=Math.min(a,o),h=i.thickness,u=i.size,d=i.innerSize||0;"string"==typeof u&&(u=parseFloat(u)),"string"==typeof d&&(d=parseFloat(d));let f=[ah(null===l||void 0===l?void 0:l[0],"50%"),ah(null===l||void 0===l?void 0:l[1],"50%"),ah(u&&u<0?void 0:i.size,"100%"),ah(d&&d<0?void 0:i.innerSize||0,"0%")];for(!s.angular||this instanceof Za||(f[3]=0),t=0;t<4;++t)n=f[t],e=t<2||2===t&&/%$/.test(n),f[t]=oh(n,[a,o,c,f[2]][t])+(e?r:0);return f[3]>f[2]&&(f[3]=f[2]),rh(h)&&2*h<f[2]&&h>0&&(f[3]=f[2]-2*h),sh(this,"afterGetCenter",{positions:f}),f},e.getStartAndEndRadians=function(e,t){let n=rh(e)?e:0,i=rh(t)&&t>n&&t-n<360?t:n+360;return{start:ih*(n+-90),end:ih*(i+-90)}}}(v||(v={}));let lh=v,{setAnimation:ch}=Xe,{addEvent:hh,defined:uh,extend:dh,isNumber:fh,pick:ph,relativeLength:mh}=K;class gh extends Fr{getConnectorPath(e){let t=e.dataLabelPosition,n=e.options||{},i=n.connectorShape,s=this.connectorShapes[i]||i;return t&&s.call(this,r(r({},t.computed),{},{alignment:t.alignment}),t.connectorPosition,n)||[]}getTranslate(){return this.sliced&&this.slicedTranslation||{translateX:0,translateY:0}}haloPath(e){let t=this.shapeArgs;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(t.x,t.y,t.r+e,t.r+e,{innerR:t.r-1,start:t.start,end:t.end,borderRadius:t.borderRadius})}constructor(e,t,n){var i;super(e,t,n),this.half=0,null!==(i=this.name)&&void 0!==i||(this.name=e.chart.options.lang.pieSliceName);let s=e=>{this.slice("select"===e.type)};hh(this,"select",s),hh(this,"unselect",s)}isValid(){return fh(this.y)&&this.y>=0}setVisible(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e!==this.visible&&this.update({visible:null!==e&&void 0!==e?e:!this.visible},t,void 0,!1)}slice(e,t,n){let i=this.series;ch(n,i.chart),t=ph(t,!0),this.sliced=this.options.sliced=e=uh(e)?e:!this.sliced,i.options.data[i.data.indexOf(this)]=this.options,this.graphic&&this.graphic.animate(this.getTranslate())}}dh(gh.prototype,{connectorShapes:{fixedOffset:function(e,t,n){let i=t.breakAt,s=t.touchingSliceAt,r=n.softConnector?["C",e.x+("left"===e.alignment?-5:5),e.y,2*i.x-s.x,2*i.y-s.y,i.x,i.y]:["L",i.x,i.y];return[["M",e.x,e.y],r,["L",s.x,s.y]]},straight:function(e,t){let n=t.touchingSliceAt;return[["M",e.x,e.y],["L",n.x,n.y]]},crookedLine:function(e,t,n){let{angle:i=this.angle||0,breakAt:s,touchingSliceAt:r}=t,{series:a}=this,[o,l,c]=a.center,h=c/2,{plotLeft:u,plotWidth:d}=a.chart,f="left"===e.alignment,{x:p,y:m}=e,g=s.x;if(n.crookDistance){let e=mh(n.crookDistance,1);g=f?o+h+(d+u-o-h)*(1-e):u+(o-h)*e}else g=o+(l-m)*Math.tan(i-Math.PI/2);let b=[["M",p,m]];return(f?g<=p&&g>=s.x:g>=p&&g<=s.x)&&b.push(["L",g,m]),b.push(["L",s.x,s.y],["L",r.x,r.y]),b}}});let{getStartAndEndRadians:bh}=lh,{noop:vh}=_,{clamp:yh,extend:xh,fireEvent:Sh,merge:wh,pick:Eh}=K;class _h extends Za{animate(e){let t=this,n=t.points,i=t.startAngleRad;e||n.forEach((function(e){let n=e.graphic,s=e.shapeArgs;n&&s&&(n.attr({r:Eh(e.startR,t.center&&t.center[3]/2),start:i,end:i}),n.animate({r:s.r,start:s.start,end:s.end},t.options.animation))}))}drawEmpty(){let e,t,n=this.startAngleRad,i=this.endAngleRad,s=this.options;0===this.total&&this.center?(e=this.center[0],t=this.center[1],this.graph||(this.graph=this.chart.renderer.arc(e,t,this.center[1]/2,0,n,i).addClass("highcharts-empty-series").add(this.group)),this.graph.attr({d:Tn.arc(e,t,this.center[2]/2,0,{start:n,end:i,innerR:this.center[3]/2})}),this.chart.styledMode||this.graph.attr({"stroke-width":s.borderWidth,fill:s.fillColor||"none",stroke:s.color||"#cccccc"})):this.graph&&(this.graph=this.graph.destroy())}drawPoints(){let e=this.chart.renderer;this.points.forEach((function(t){t.graphic&&t.hasNewShapeType()&&(t.graphic=t.graphic.destroy()),t.graphic||(t.graphic=e[t.shapeType](t.shapeArgs).add(t.series.group),t.delayedRendering=!0)}))}generatePoints(){super.generatePoints(),this.updateTotals()}getX(e,t,n,i){let s=this.center,r=this.radii?this.radii[n.index]||0:s[2]/2,a=i.dataLabelPosition,o=(null===a||void 0===a?void 0:a.distance)||0,l=Math.asin(yh((e-s[1])/(r+o),-1,1));return s[0]+Math.cos(l)*(r+o)*(t?-1:1)+(o>0?(t?-1:1)*(i.padding||0):0)}hasData(){return this.points.some((e=>e.visible))}redrawPoints(){let e,t,n,i,s=this,r=s.chart;this.drawEmpty(),s.group&&!r.styledMode&&s.group.shadow(s.options.shadow),s.points.forEach((function(a){let o={};t=a.graphic,!a.isNull&&t?(i=a.shapeArgs,e=a.getTranslate(),r.styledMode||(n=s.pointAttribs(a,a.selected&&"select")),a.delayedRendering?(t.setRadialReference(s.center).attr(i).attr(e),r.styledMode||t.attr(n).attr({"stroke-linejoin":"round"}),a.delayedRendering=!1):(t.setRadialReference(s.center),r.styledMode||wh(!0,o,n),wh(!0,o,i,e),t.animate(o)),t.attr({visibility:a.visible?"inherit":"hidden"}),t.addClass(a.getClassName(),!0)):t&&(a.graphic=t.destroy())}))}sortByAngle(e,t){e.sort((function(e,n){return void 0!==e.angle&&(n.angle-e.angle)*t}))}translate(e){Sh(this,"translate"),this.generatePoints();let t,n,i,s,r,a,o,l=this.options,c=l.slicedOffset,h=bh(l.startAngle,l.endAngle),u=this.startAngleRad=h.start,d=(this.endAngleRad=h.end)-u,f=this.points,p=l.ignoreHiddenPoint,m=f.length,g=0;for(e||(this.center=e=this.getCenter()),a=0;a<m;a++){o=f[a],t=u+g*d,o.isValid()&&(!p||o.visible)&&(g+=o.percentage/100),n=u+g*d;let l={x:e[0],y:e[1],r:e[2]/2,innerR:e[3]/2,start:Math.round(1e3*t)/1e3,end:Math.round(1e3*n)/1e3};o.shapeType="arc",o.shapeArgs=l,(i=(n+t)/2)>1.5*Math.PI?i-=2*Math.PI:i<-Math.PI/2&&(i+=2*Math.PI),o.slicedTranslation={translateX:Math.round(Math.cos(i)*c),translateY:Math.round(Math.sin(i)*c)},s=Math.cos(i)*e[2]/2,r=Math.sin(i)*e[2]/2,o.tooltipPos=[e[0]+.7*s,e[1]+.7*r],o.half=+(i<-Math.PI/2||i>Math.PI/2),o.angle=i}Sh(this,"afterTranslate")}updateTotals(){let e,t,n=this.points,i=n.length,s=this.options.ignoreHiddenPoint,r=0;for(e=0;e<i;e++)(t=n[e]).isValid()&&(!s||t.visible)&&(r+=t.y);for(e=0,this.total=r;e<i;e++)(t=n[e]).percentage=r>0&&(t.visible||!s)?t.y/r*100:0,t.total=r}}_h.defaultOptions=wh(Za.defaultOptions,{borderRadius:3,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{connectorPadding:5,connectorShape:"crookedLine",crookDistance:void 0,distance:30,enabled:!0,formatter:function(){return this.isNull?void 0:this.name},softConnector:!0,x:0},fillColor:void 0,ignoreHiddenPoint:!0,inactiveOtherPoints:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,stickyTracking:!1,tooltip:{followPointer:!0},borderColor:"#ffffff",borderWidth:1,lineWidth:void 0,states:{hover:{brightness:.1}}}),xh(_h.prototype,{axisTypes:[],directTouch:!0,drawGraph:void 0,drawTracker:Ac.prototype.drawTracker,getCenter:lh.getCenter,getSymbol:vh,invertible:!1,isCartesian:!1,noSharedTooltip:!0,pointAttribs:Ac.prototype.pointAttribs,pointClass:gh,requireSorting:!1,searchPoint:vh,trackerGroups:["group","dataLabelsGroup"]}),ba.registerSeriesType("pie",_h);let{composed:Th,noop:Mh}=_,{distribute:Ch}=Pt,{series:Ah}=ba,{arrayMax:Ph,clamp:Nh,defined:kh,isNumber:Lh,pick:Ih,pushUnique:Rh,relativeLength:Oh}=K;!function(e){let t={radialDistributionY:function(e,t){var n;return((null===(n=t.dataLabelPosition)||void 0===n?void 0:n.top)||0)+e.distributeBox.pos},radialDistributionX:function(e,t,n,i,s){let r=s.dataLabelPosition;return e.getX(n<((null===r||void 0===r?void 0:r.top)||0)+2||n>((null===r||void 0===r?void 0:r.bottom)||0)-2?i:n,t.half,t,s)},justify:function(e,t,n,i){var s;return i[0]+(e.half?-1:1)*(n+((null===(s=t.dataLabelPosition)||void 0===s?void 0:s.distance)||0))},alignToPlotEdges:function(e,t,n,i){let s=e.getBBox().width;return t?s+i:n-s-i},alignToConnectors:function(e,t,n,i){let s,r=0;return e.forEach((function(e){(s=e.dataLabel.getBBox().width)>r&&(r=s)})),t?r+i:n-r-i}};function n(e,t){let n=Math.PI/2,{start:i=0,end:s=0}=e.shapeArgs||{},r=e.angle||0;t>0&&i<n&&s>n&&r>n/2&&r<1.5*n&&(r=r<=n?Math.max(n/2,(i+n)/2):Math.min(1.5*n,(n+s)/2));let{center:a,options:o}=this,l=a[2]/2,c=Math.cos(r),h=Math.sin(r),u=a[0]+c*l,d=a[1]+h*l,f=Math.min((o.slicedOffset||0)+(o.borderWidth||0),t/5);return{natural:{x:u+c*t,y:d+h*t},computed:{},alignment:t<0?"center":e.half?"right":"left",connectorPosition:{angle:r,breakAt:{x:u+c*f,y:d+h*f},touchingSliceAt:{x:u,y:d}},distance:t}}function i(){var e;let t,n,i,s=this,r=s.points,a=s.chart,o=a.plotWidth,l=a.plotHeight,c=a.plotLeft,h=Math.round(a.chartWidth/3),u=s.center,d=u[2]/2,f=u[1],p=[[],[]],m=[0,0,0,0],g=s.dataLabelPositioners,b=0;s.visible&&(null===(e=s.hasDataLabels)||void 0===e?void 0:e.call(s))&&(r.forEach((e=>{(e.dataLabels||[]).forEach((e=>{e.shortened&&(e.attr({width:"auto"}).css({width:"auto",textOverflow:"clip"}),e.shortened=!1)}))})),Ah.prototype.drawDataLabels.apply(s),r.forEach((e=>{(e.dataLabels||[]).forEach(((t,n)=>{var i;let s=u[2]/2,r=t.options,a=Oh((null===r||void 0===r?void 0:r.distance)||0,s);0===n&&p[e.half].push(e),!kh(null===r||void 0===r||null===(i=r.style)||void 0===i?void 0:i.width)&&t.getBBox().width>h&&(t.css({width:Math.round(.7*h)+"px"}),t.shortened=!0),t.dataLabelPosition=this.getDataLabelPosition(e,a),b=Math.max(b,a)}))})),p.forEach(((e,t)=>{let r,h,p,v=e.length,y=[],x=0;v&&(s.sortByAngle(e,t-.5),b>0&&(r=Math.max(0,f-d-b),h=Math.min(f+d+b,a.plotHeight),e.forEach((e=>{(e.dataLabels||[]).forEach((t=>{var n;let i=t.dataLabelPosition;i&&i.distance>0&&(i.top=Math.max(0,f-d-i.distance),i.bottom=Math.min(f+d+i.distance,a.plotHeight),x=t.getBBox().height||21,t.lineHeight=a.renderer.fontMetrics(t.text||t).h+2*t.padding,e.distributeBox={target:((null===(n=t.dataLabelPosition)||void 0===n?void 0:n.natural.y)||0)-i.top+t.lineHeight/2,size:x,rank:e.y},y.push(e.distributeBox))}))})),Ch(y,p=h+x-r,p/5)),e.forEach((r=>{(r.dataLabels||[]).forEach((a=>{let h=a.options||{},f=r.distributeBox,p=a.dataLabelPosition,b=(null===p||void 0===p?void 0:p.natural.y)||0,v=h.connectorPadding||0,x=a.lineHeight||21,S=(x-a.getBBox().height)/2,w=0,E=b,_="inherit";if(p){if(y&&kh(f)&&p.distance>0&&(void 0===f.pos?_="hidden":(i=f.size,E=g.radialDistributionY(r,a))),h.justify)w=g.justify(r,a,d,u);else switch(h.alignTo){case"connectors":w=g.alignToConnectors(e,t,o,c);break;case"plotEdges":w=g.alignToPlotEdges(a,t,o,c);break;default:w=g.radialDistributionX(s,r,E-S,b,a)}if(p.attribs={visibility:_,align:p.alignment},p.posAttribs={x:w+(h.x||0)+({left:v,right:-v}[p.alignment]||0),y:E+(h.y||0)-x/2},p.computed.x=w,p.computed.y=E-S,Ih(h.crop,!0)){let e;w-(n=a.getBBox().width)<v&&1===t?(e=Math.round(n-w+v),m[3]=Math.max(e,m[3])):w+n>o-v&&0===t&&(e=Math.round(w+n-o+v),m[1]=Math.max(e,m[1])),E-i/2<0?m[0]=Math.max(Math.round(i/2-E),m[0]):E+i/2>l&&(m[2]=Math.max(Math.round(E+i/2-l),m[2])),p.sideOverflow=e}}}))})))})),(0===Ph(m)||this.verifyDataLabelOverflow(m))&&(this.placeDataLabels(),this.points.forEach((e=>{(e.dataLabels||[]).forEach((n=>{let{connectorColor:i,connectorWidth:r=1}=n.options||{},o=n.dataLabelPosition;if(Lh(r)){var l;let c;t=n.connector,o&&o.distance>0?(c=!t,t||(n.connector=t=a.renderer.path().addClass("highcharts-data-label-connector  highcharts-color-"+e.colorIndex+(e.className?" "+e.className:"")).add(s.dataLabelsGroup)),a.styledMode||t.attr({"stroke-width":r,stroke:i||e.color||"#666666"}),t[c?"attr":"animate"]({d:e.getConnectorPath(n)}),t.attr({visibility:null===(l=o.attribs)||void 0===l?void 0:l.visibility})):t&&(n.connector=t.destroy())}}))}))))}function s(){this.points.forEach((e=>{(e.dataLabels||[]).forEach((e=>{var t;let n=e.dataLabelPosition;n?(n.sideOverflow&&(e.css({width:Math.max(e.getBBox().width-n.sideOverflow,0)+"px",textOverflow:(null===(t=e.options)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.textOverflow)||"ellipsis"}),e.shortened=!0),e.attr(n.attribs),e[e.moved?"animate":"attr"](n.posAttribs),e.moved=!0):e&&e.attr({y:-9999})})),delete e.distributeBox}),this)}function r(e){let t=this.center,n=this.options,i=n.center,s=n.minSize||80,r=s,a=null!==n.size;return!a&&(null!==i[0]?r=Math.max(t[2]-Math.max(e[1],e[3]),s):(r=Math.max(t[2]-e[1]-e[3],s),t[0]+=(e[3]-e[1])/2),null!==i[1]?r=Nh(r,s,t[2]-Math.max(e[0],e[2])):(r=Nh(r,s,t[2]-e[0]-e[2]),t[1]+=(e[0]-e[2])/2),r<t[2]?(t[2]=r,t[3]=Math.min(n.thickness?Math.max(0,r-2*n.thickness):Math.max(0,Oh(n.innerSize||0,r)),r),this.translate(t),this.drawDataLabels&&this.drawDataLabels()):a=!0),a}e.compose=function(e){if(Wc.compose(Ah),Rh(Th,"PieDataLabel")){let a=e.prototype;a.dataLabelPositioners=t,a.alignDataLabel=Mh,a.drawDataLabels=i,a.getDataLabelPosition=n,a.placeDataLabels=s,a.verifyDataLabelOverflow=r}}}(y||(y={}));let Dh=y;!function(e){e.getCenterOfPoints=function(e){let t=e.reduce(((e,t)=>(e.x+=t.x,e.y+=t.y,e)),{x:0,y:0});return{x:t.x/e.length,y:t.y/e.length}},e.getDistanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},e.getAngleBetweenPoints=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)},e.pointInPolygon=function(e,t){let n,i,{x:s,y:r}=e,a=t.length,o=!1;for(n=0,i=a-1;n<a;i=n++){let[e,a]=t[n],[l,c]=t[i];a>r!=c>r&&s<(l-e)*(r-a)/(c-a)+e&&(o=!o)}return o}}(x||(x={}));let{pointInPolygon:Fh}=x,{addEvent:Bh,getAlignFactor:jh,fireEvent:Vh,objectEach:Gh,pick:Wh}=K;function zh(e){let t,n,i,s,r,a=e.length,o=(e,t)=>!(t.x>=e.x+e.width||t.x+t.width<=e.x||t.y>=e.y+e.height||t.y+t.height<=e.y),l=(e,t)=>{for(let n of e)if(Fh({x:n[0],y:n[1]},t))return!0;return!1},c=!1;for(let u=0;u<a;u++)(t=e[u])&&(t.oldOpacity=t.opacity,t.newOpacity=1,t.absoluteBox=function(e){if(e&&(!e.alignAttr||e.placed)){var t,n;let i=e.box?0:e.padding||0,s=e.alignAttr||{x:e.attr("x"),y:e.attr("y")},{height:r,polygon:a,width:o}=e.getBBox(),l=jh(e.alignValue)*o;return e.width=o,e.height=r,{x:s.x+((null===(t=e.parentGroup)||void 0===t?void 0:t.translateX)||0)+i-l,y:s.y+((null===(n=e.parentGroup)||void 0===n?void 0:n.translateY)||0)+i,width:o-2*i,height:r-2*i,polygon:a}}}(t));e.sort(((e,t)=>(t.labelrank||0)-(e.labelrank||0)));for(let u=0;u<a;++u){var h;s=(n=e[u])&&n.absoluteBox;let t=null===(h=s)||void 0===h?void 0:h.polygon;for(let c=u+1;c<a;++c){r=(i=e[c])&&i.absoluteBox;let a=!1;if(s&&r&&n!==i&&0!==n.newOpacity&&0!==i.newOpacity&&"hidden"!==n.visibility&&"hidden"!==i.visibility){let e=r.polygon;if(t&&e&&t!==e?l(t,e)&&(a=!0):o(s,r)&&(a=!0),a){let e=n.labelrank<i.labelrank?n:i,t=e.text;e.newOpacity=0,(null===t||void 0===t?void 0:t.element.querySelector("textPath"))&&t.hide()}}}}for(let u of e)Uh(u,this)&&(c=!0);c&&Vh(this,"afterHideAllOverlappingLabels")}function Uh(e,t){let n,i=!1;return e&&(n=e.newOpacity,e.oldOpacity!==n&&(e.hasClass("highcharts-data-label")?(e[n?"removeClass":"addClass"]("highcharts-data-label-hidden"),i=!0,e[e.isOld?"animate":"attr"]({opacity:n},void 0,(function(){t.styledMode||e.css({pointerEvents:n?"auto":"none"})})),Vh(t,"afterHideOverlappingLabel")):e.attr({opacity:n})),e.isOld=!0),i}function Hh(){let e=this,t=[];for(let i of e.labelCollectors||[])t=t.concat(i());for(let i of e.yAxis||[])i.stacking&&i.options.stackLabels&&!i.options.stackLabels.allowOverlap&&Gh(i.stacking.stacks,(e=>{Gh(e,(e=>{e.label&&t.push(e.label)}))}));for(let i of e.series||[]){var n;if(i.visible&&null!==(n=i.hasDataLabels)&&void 0!==n&&n.call(i)){let n=n=>{for(let i of n)i.visible&&(i.dataLabels||[]).forEach((n=>{var s,r;let a=n.options||{};n.labelrank=Wh(a.labelrank,i.labelrank,null===(s=i.shapeArgs)||void 0===s?void 0:s.height),(null!==(r=a.allowOverlap)&&void 0!==r?r:Number(a.distance)>0)?(n.oldOpacity=n.opacity,n.newOpacity=1,Uh(n,e)):t.push(n)}))};n(i.nodes||[]),n(i.points)}}this.hideOverlappingLabels(t)}let Xh={compose:function(e){let t=e.prototype;t.hideOverlappingLabels||(t.hideOverlappingLabels=zh,Bh(e,"render",Hh))}},{defaultOptions:Yh}=Se,{noop:qh}=_,{addEvent:Kh,extend:$h,isObject:Zh,merge:Qh,relativeLength:Jh}=K,eu={radius:0,scope:"stack",where:void 0},tu=qh,nu=qh;function iu(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=tu(e,t,n,i,s),{brStart:a=!0,brEnd:o=!0,innerR:l=0,r:c=n,start:h=0,end:u=0}=s;if(s.open||!s.borderRadius)return r;let d=u-h,f=Math.sin(d/2),p=Math.max(Math.min(Jh(s.borderRadius||0,c-l),(c-l)/2,c*f/(1+f)),0),m=Math.min(p,d/Math.PI*2*l),g=r.length-1;for(;g--;)(a||0!==g&&3!==g)&&(o||1!==g&&2!==g)&&function(e,t,n){let i,s,r,a=e[t],o=e[t+1];if("Z"===o[0]&&(o=e[0]),"M"!==a[0]&&"L"!==a[0]||"A"!==o[0]?"A"===a[0]&&("M"===o[0]||"L"===o[0])&&(i=o,s=a):(i=a,s=o,r=!0),i&&s&&s.params){let a=s[1],o=s[5],l=s.params,{start:c,end:h,cx:u,cy:d}=l,f=o?a-n:a+n,p=f?Math.asin(n/f):0,m=o?p:-p,g=Math.cos(p)*f;r?(l.start=c+m,i[1]=u+g*Math.cos(c),i[2]=d+g*Math.sin(c),e.splice(t+1,0,["A",n,n,0,0,1,u+a*Math.cos(l.start),d+a*Math.sin(l.start)])):(l.end=h-m,s[6]=u+a*Math.cos(l.end),s[7]=d+a*Math.sin(l.end),e.splice(t+1,0,["A",n,n,0,0,1,u+g*Math.cos(h),d+g*Math.sin(h)])),s[4]=Math.abs(l.end-l.start)<Math.PI?0:1}}(r,g,g>1?m:p);return r}function su(){if(this.options.borderRadius&&(!this.chart.is3d||!this.chart.is3d())){var e;let{options:t,yAxis:n}=this,i="percent"===t.stacking,s=null===(e=Yh.plotOptions)||void 0===e||null===(e=e[this.type])||void 0===e?void 0:e.borderRadius,r=ru(t.borderRadius,Zh(s)?s:{}),a=n.options.reversed;for(let e of this.points){let{shapeArgs:s}=e;if("roundedRect"===e.shapeType&&s){let{width:o=0,height:l=0,y:c=0}=s,h=c,u=l;if("stack"===r.scope&&e.stackTotal){let s=n.translate(i?100:e.stackTotal,!1,!0,!1,!0),r=n.translate(t.threshold||0,!1,!0,!1,!0),a=this.crispCol(0,Math.min(s,r),0,Math.abs(s-r));h=a.y,u=a.height}let d=(e.negative?-1:1)*(a?-1:1)==-1,f=r.where;!f&&this.is("waterfall")&&Math.abs((e.yBottom||0)-(this.translatedThreshold||0))>this.borderWidth&&(f="all"),f||(f="end");let p=Math.min(Jh(r.radius,o),o/2,"all"===f?l/2:1/0)||0;"end"===f&&(d&&(h-=p),u+=p),$h(s,{brBoxHeight:u,brBoxY:h,r:p})}}}}function ru(e,t){return Zh(e)||(e={radius:e||0}),Qh(eu,t,e)}function au(){let e=ru(this.options.borderRadius);for(let t of this.points){let n=t.shapeArgs;n&&(n.borderRadius=Jh(e.radius,(n.r||0)-(n.innerR||0)))}}function ou(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=nu(e,t,n,i,s),{r:a=0,brBoxHeight:o=i,brBoxY:l=t}=s,c=t-l,h=l+o-(t+i),u=c-a>-.1?0:a,d=h-a>-.1?0:a,f=Math.max(u&&c,0),p=Math.max(d&&h,0),m=[e+u,t],g=[e+n-u,t],b=[e+n,t+u],v=[e+n,t+i-d],y=[e+n-d,t+i],x=[e+d,t+i],S=[e,t+i-d],w=[e,t+u],E=(e,t)=>Math.sqrt(Math.pow(e,2)-Math.pow(t,2));if(f){let e=E(u,u-f);m[0]-=e,g[0]+=e,b[1]=w[1]=t+u-f}if(i<u-f){let s=E(u,u-f-i);b[0]=v[0]=e+n-u+s,y[0]=Math.min(b[0],y[0]),x[0]=Math.max(v[0],x[0]),S[0]=w[0]=e+u-s,b[1]=w[1]=t+i}if(p){let e=E(d,d-p);y[0]+=e,x[0]-=e,v[1]=S[1]=t+i-d+p}if(i<d-p){let s=E(d,d-p-i);b[0]=v[0]=e+n-d+s,g[0]=Math.min(b[0],g[0]),m[0]=Math.max(v[0],m[0]),S[0]=w[0]=e+d-s,v[1]=S[1]=t}return r.length=0,r.push(["M",...m],["L",...g],["A",u,u,0,0,1,...b],["L",...v],["A",d,d,0,0,1,...y],["L",...x],["A",d,d,0,0,1,...S],["L",...w],["A",u,u,0,0,1,...m],["Z"]),r}let{diffObjects:lu,extend:cu,find:hu,merge:uu,pick:du,uniqueKey:fu}=K;!function(e){function t(e,t){let n=e.condition;(n.callback||function(){return this.chartWidth<=du(n.maxWidth,Number.MAX_VALUE)&&this.chartHeight<=du(n.maxHeight,Number.MAX_VALUE)&&this.chartWidth>=du(n.minWidth,0)&&this.chartHeight>=du(n.minHeight,0)}).call(this)&&t.push(e._id)}function n(e,t){let n,i=this.options.responsive,s=this.currentResponsive,r=[];!t&&i&&i.rules&&i.rules.forEach((e=>{void 0===e._id&&(e._id=fu()),this.matchResponsiveRule(e,r)}),this);let a=uu(...r.map((e=>hu((null===i||void 0===i?void 0:i.rules)||[],(t=>t._id===e)))).map((e=>null===e||void 0===e?void 0:e.chartOptions)));a.isResponsiveOptions=!0,r=r.toString()||void 0;let o=null===s||void 0===s?void 0:s.ruleIds;r!==o&&(s&&(this.currentResponsive=void 0,this.updatingResponsive=!0,this.update(s.undoOptions,e,!0),this.updatingResponsive=!1),r?((n=lu(a,this.options,!0,this.collectionsWithUpdate)).isResponsiveOptions=!0,this.currentResponsive={ruleIds:r,mergedOptions:a,undoOptions:n},this.updatingResponsive||this.update(a,e,!0)):this.currentResponsive=void 0)}e.compose=function(e){let i=e.prototype;return i.matchResponsiveRule||cu(i,{matchResponsiveRule:t,setResponsive:n}),e}}(S||(S={}));let pu=S;_.AST=at,_.Axis=ws,_.Chart=ol,_.Color=Ne,_.DataLabel=Wc,_.DataTableCore=la,_.Fx=Oe,_.HTMLElement=Ti,_.Legend=So,_.LegendSymbol=da,_.OverlappingDataLabels=_.OverlappingDataLabels||Xh,_.PlotLineOrBand=Xs,_.Point=Fr,_.Pointer=na,_.RendererRegistry=_t,_.Series=Za,_.SeriesRegistry=ba,_.StackItem=Cl,_.SVGElement=hn,_.SVGRenderer=ui,_.Templating=Et,_.Tick=Hi,_.Time=me,_.Tooltip=br,_.animate=Xe.animate,_.animObject=Xe.animObject,_.chart=ol.chart,_.color=Ne.parse,_.dateFormat=Et.dateFormat,_.defaultOptions=Se.defaultOptions,_.distribute=Pt.distribute,_.format=Et.format,_.getDeferredAnimation=Xe.getDeferredAnimation,_.getOptions=Se.getOptions,_.numberFormat=Et.numberFormat,_.seriesType=ba.seriesType,_.setAnimation=Xe.setAnimation,_.setOptions=Se.setOptions,_.stop=Xe.stop,_.time=Se.defaultTime,_.timers=Oe.timers,function(e,t,n){let i=e.types.pie;if(!t.symbolCustomAttribs.includes("borderRadius")){let s=n.prototype.symbols;Kh(e,"afterColumnTranslate",su,{order:9}),Kh(i,"afterTranslate",au),t.symbolCustomAttribs.push("borderRadius","brBoxHeight","brBoxY","brEnd","brStart"),tu=s.arc,nu=s.roundedRect,s.arc=iu,s.roundedRect=ou}}(_.Series,_.SVGElement,_.SVGRenderer),Yc.compose(_.Series.types.column),Wc.compose(_.Series),Cs.compose(_.Axis),Ti.compose(_.SVGRenderer),So.compose(_.Chart),ks.compose(_.Axis),Xh.compose(_.Chart),Dh.compose(_.Series.types.pie),Xs.compose(_.Chart,_.Axis),na.compose(_.Chart),pu.compose(_.Chart),yl.compose(_.Axis,_.Chart,_.Series),Yl.compose(_.Axis,_.Chart,_.Series),br.compose(_.Pointer),K.extend(_,K);let mu=_;return E.default})(),i._Highcharts=s(),e.exports=i._Highcharts},494:e=>{"use strict";e.exports=function(e,t){return new Promise((function(n,i){var s=new XMLHttpRequest;t&&(s.responseType=t),s.open("GET",e),s.onload=function(){200===s.status?n(s.response):i(Error(s.statusText))},s.onerror=function(){i(Error("Network Error"))},s.send()}))}},520:e=>{e.exports=function(e){var s=e.createGain(),r=s._voltage=function(e){var t=e.createBufferSource(),i=e.createBuffer(1,2,e.sampleRate);return i.getChannelData(0).set(n),t.buffer=i,t.loop=!0,t}(e),a=i(r),o=i(r),l=i(r);return s._startAmount=i(o),s._endAmount=i(l),s._multiplier=i(a),s._multiplier.connect(s),s._startAmount.connect(s),s._endAmount.connect(s),s.value=a.gain,s.startValue=o.gain,s.endValue=l.gain,s.startValue.value=0,s.endValue.value=0,Object.defineProperties(s,t),s};var t={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(e){var t=this._multiplier.gain,n=this._startAmount.gain,i=this._endAmount.gain;this._voltage.start(e),this._decayFrom=this._decayFrom=e+this.attack,this._startedAt=e;var r=this.sustain;t.cancelScheduledValues(e),n.cancelScheduledValues(e),i.cancelScheduledValues(e),i.setValueAtTime(0,e),this.attack?(t.setValueAtTime(0,e),t.linearRampToValueAtTime(1,e+this.attack),n.setValueAtTime(1,e),n.linearRampToValueAtTime(0,e+this.attack)):(t.setValueAtTime(1,e),n.setValueAtTime(0,e)),this.decay&&t.setTargetAtTime(r,this._decayFrom,s(this.decay))}},stop:{value:function(e,t){t&&(e-=this.release);var n=e+this.release;if(this.release){var i=this._multiplier.gain,r=this._startAmount.gain,a=this._endAmount.gain;i.cancelScheduledValues(e),r.cancelScheduledValues(e),a.cancelScheduledValues(e);var o=s(this.release);if(this.attack&&e<this._decayFrom){var l=function(e,t,n,i,s){var r=s-n,a=e+r/(i-n)*(t-e);a<=e&&(a=e);a>=t&&(a=t);return a}(0,1,this._startedAt,this._decayFrom,e);i.linearRampToValueAtTime(l,e),r.linearRampToValueAtTime(1-l,e),r.setTargetAtTime(0,e,o)}a.setTargetAtTime(1,e,o),i.setTargetAtTime(0,e,o)}return this._voltage.stop(n),n}},onended:{get:function(){return this._voltage.onended},set:function(e){this._voltage.onended=e}}},n=new Float32Array([1,1]);function i(e){var t=e.context.createGain();return e.connect(t),t}function s(e){return Math.log(e+1)/Math.log(100)}},578:(e,t,n)=>{"use strict";var i=n(843),s=n(494);function r(e){return function(t){return"string"===typeof t&&e.test(t)}}function a(e,t){return"string"===typeof e?e+t:"function"===typeof e?e(t):t}function o(e,t,n,i){var s=t instanceof ArrayBuffer?l:c(t)?h:function(e){return e&&"function"===typeof e.then}(t)?u:d(t)?f:function(e){return e&&"object"===typeof e}(t)?p:m(t)?g:b(t)?v:y(t)?x:null;return s?s(e,t,n||{}):i?Promise.resolve(i):Promise.reject("Source not valid ("+t+")")}function l(e,t,n){return new Promise((function(n,i){e.decodeAudioData(t,(function(e){n(e)}),(function(){i("Can't decode audio data ("+t.slice(0,30)+"...)")}))}))}o.fetch=s;var c=r(/\.(mp3|wav|ogg)(\?.*)?$/i);function h(e,t,n){var i=a(n.from,t);return o(e,o.fetch(i,"arraybuffer"),n)}function u(e,t,n){return t.then((function(t){return o(e,t,n)}))}var d=Array.isArray;function f(e,t,n){return Promise.all(t.map((function(t){return o(e,t,n,t)})))}function p(e,t,n){var i={},s=Object.keys(t).map((function(s){if(n.only&&-1===n.only.indexOf(s))return null;var r=t[s];return o(e,r,n,r).then((function(e){i[s]=e}))}));return Promise.all(s).then((function(){return i}))}var m=r(/\.json(\?.*)?$/i);function g(e,t,n){var i=a(n.from,t);return o(e,o.fetch(i,"text").then(JSON.parse),n)}var b=r(/^data:audio/);function v(e,t,n){var s=t.indexOf(",");return o(e,i.decode(t.slice(s+1)).buffer,n)}var y=r(/\.js(\?.*)?$/i);function x(e,t,n){var i=a(n.from,t);return o(e,o.fetch(i,"text").then(S),n)}function S(e){var t=e.indexOf("MIDI.Soundfont.");if(t<0)throw Error("Invalid MIDI.js Soundfont format");t=e.indexOf("=",t)+2;var n=e.lastIndexOf(",");return JSON.parse(e.slice(t,n)+"}")}e.exports&&(e.exports=o),"undefined"!==typeof window&&(window.loadAudio=o)},579:(e,t,n)=>{"use strict";e.exports=n(799)},612:(e,t,n)=>{"use strict";var i=n(59),s=n(831),r=n(817),a=n(417),o=n(167);function l(e,t,n){return o(a(r(s(i(e,t,n)))))}e.exports&&(e.exports=l),"undefined"!==typeof window&&(window.SamplePlayer=l)},613:function(e,t,n){var i,s=n(897).default;i=()=>(()=>{var e={67:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SystemLinePosition=void 0,function(e){e[e.MeasureBegin=0]="MeasureBegin",e[e.MeasureEnd=1]="MeasureEnd"}(n||(t.SystemLinePosition=n={}))},98:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalGlissando=void 0;const i=n(9409),s=n(6438),r=n(6452);t.GraphicalGlissando=class{constructor(e){this.Glissando=e,this.staffEntries=[]}calculateLine(e){const t=this.staffEntries[0],n=this.staffEntries[this.staffEntries.length-1],a=t.findGraphicalNoteFromNote(this.Glissando.StartNote),o=n.findGraphicalNoteFromNote(this.Glissando.EndNote);if(!a&&!o)return;const l=t.parentMeasure.ParentStaffLine;let c,h,u,d;if(a&&t.parentMeasure.ParentStaffLine===this.StaffLine)c=a.PositionAndShape.RelativePosition.x+a.parentVoiceEntry.parentStaffEntry.PositionAndShape.RelativePosition.x+a.parentVoiceEntry.parentStaffEntry.parentMeasure.PositionAndShape.RelativePosition.x+e.GlissandoNoteOffset,u=a.PositionAndShape.AbsolutePosition.y;else{c=n.parentMeasure.beginInstructionsWidth-.4;const t=this.Glissando.Direction===s.ColDirEnum.Down?-1:1;u=o.PositionAndShape.AbsolutePosition.y+t*e.GlissandoStafflineStartYDistanceToNote}if(o&&n.parentMeasure.ParentStaffLine===this.StaffLine)h=o.PositionAndShape.RelativePosition.x+o.parentVoiceEntry.parentStaffEntry.PositionAndShape.RelativePosition.x+o.parentVoiceEntry.parentStaffEntry.parentMeasure.PositionAndShape.RelativePosition.x-.5-e.GlissandoNoteOffset,c>h&&(c=h-e.GlissandoStafflineStartMinimumWidth),d=o.PositionAndShape.AbsolutePosition.y;else{if(l.Measures.last().parentSourceMeasure.HasEndLine)return;h=l.PositionAndShape.Size.width,h-c>e.GlissandoStafflineEndOffset&&(c=h-e.GlissandoStafflineEndOffset);const t=this.Glissando.Direction===s.ColDirEnum.Down?1:-1;d=a.PositionAndShape.AbsolutePosition.y+t*e.GlissandoStafflineStartYDistanceToNote}const f=new i.PointF2D(c,u),p=new i.PointF2D(h,d);void 0===this.Width&&(this.Width=e.GlissandoDefaultWidth),this.Line=new r.GraphicalLine(f,p,this.Width)}}},164:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MidiInstrument=t.ClefEnum=t.ClefInstruction=void 0;const i=n(8233),s=n(5364),r=n(8233),a=n(8233),o=n(7307);class l extends s.AbstractNotationInstruction{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.G,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;super(void 0),this.clefType=c.G,this.line=2,this.octaveOffset=0,this.line=n,this.clefType=e,this.octaveOffset=t,this.calcParameters()}static getDefaultClefFromMidiInstrument(e){switch(e){case h.Acoustic_Grand_Piano:case h.Electric_Bass_finger:case h.Electric_Bass_pick:case h.Fretless_Bass:case h.Slap_Bass_1:case h.Slap_Bass_2:case h.Synth_Bass_1:case h.Synth_Bass_2:case h.Contrabass:return new l(c.F,0,4);default:return new l(c.G,0,2)}}static getAllPossibleClefs(){const e=[];for(let t=0;t<=2;t++){const n=new l(c.G,t,2);e.push(n)}for(let t=-2;t<=0;t++){const n=new l(c.F,t,4);e.push(n)}return e}static isSupportedClef(e){switch(e){case c.G:case c.F:case c.C:case c.percussion:case c.TAB:return!0;default:return!1}}get ClefType(){return this.clefType}set ClefType(e){this.clefType=e}get Line(){return this.line}set Line(e){this.line=e}get OctaveOffset(){return this.octaveOffset}set OctaveOffset(e){this.octaveOffset=e}get ClefPitch(){return this.clefPitch}set ClefPitch(e){this.clefPitch=e}get ReferenceCyPosition(){return this.referenceCyPosition}set ReferenceCyPosition(e){this.referenceCyPosition=e}Equals(e){return this===e||!(!this||!e)&&this.clefPitch===e.clefPitch&&this.Line===e.Line}NotEqual(e){return!this.Equals(e)}ToString(){return"ClefType: "+this.clefType}calcParameters(){switch(this.clefType){case c.G:this.clefPitch=new i.Pitch(r.NoteEnum.G,1+this.octaveOffset,a.AccidentalEnum.NONE),this.referenceCyPosition=5-this.line+2;break;case c.F:this.clefPitch=new i.Pitch(r.NoteEnum.F,0+this.octaveOffset,a.AccidentalEnum.NONE),this.referenceCyPosition=5-this.line+1.5;break;case c.C:this.clefPitch=new i.Pitch(r.NoteEnum.C,1+this.octaveOffset,a.AccidentalEnum.NONE),this.referenceCyPosition=5-this.line;break;case c.percussion:this.clefPitch=new i.Pitch(r.NoteEnum.C,2,a.AccidentalEnum.NONE),this.referenceCyPosition=2;break;case c.TAB:this.clefPitch=new i.Pitch(r.NoteEnum.G,0,a.AccidentalEnum.NONE),this.referenceCyPosition=0;break;default:throw new o.ArgumentOutOfRangeException("clefType")}}}var c,h;t.ClefInstruction=l,function(e){e[e.G=0]="G",e[e.F=1]="F",e[e.C=2]="C",e[e.percussion=3]="percussion",e[e.TAB=4]="TAB"}(c||(t.ClefEnum=c={})),function(e){e[e.None=-1]="None",e[e.Acoustic_Grand_Piano=0]="Acoustic_Grand_Piano",e[e.Bright_Acoustic_Piano=1]="Bright_Acoustic_Piano",e[e.Electric_Grand_Piano=2]="Electric_Grand_Piano",e[e.Honky_tonk_Piano=3]="Honky_tonk_Piano",e[e.Electric_Piano_1=4]="Electric_Piano_1",e[e.Electric_Piano_2=5]="Electric_Piano_2",e[e.Harpsichord=6]="Harpsichord",e[e.Clavinet=7]="Clavinet",e[e.Celesta=8]="Celesta",e[e.Glockenspiel=9]="Glockenspiel",e[e.Music_Box=10]="Music_Box",e[e.Vibraphone=11]="Vibraphone",e[e.Marimba=12]="Marimba",e[e.Xylophone=13]="Xylophone",e[e.Tubular_Bells=14]="Tubular_Bells",e[e.Dulcimer=15]="Dulcimer",e[e.Drawbar_Organ=16]="Drawbar_Organ",e[e.Percussive_Organ=17]="Percussive_Organ",e[e.Rock_Organ=18]="Rock_Organ",e[e.Church_Organ=19]="Church_Organ",e[e.Reed_Organ=20]="Reed_Organ",e[e.Accordion=21]="Accordion",e[e.Harmonica=22]="Harmonica",e[e.Tango_Accordion=23]="Tango_Accordion",e[e.Acoustic_Guitar_nylon=24]="Acoustic_Guitar_nylon",e[e.Acoustic_Guitar_steel=25]="Acoustic_Guitar_steel",e[e.Electric_Guitar_jazz=26]="Electric_Guitar_jazz",e[e.Electric_Guitar_clean=27]="Electric_Guitar_clean",e[e.Electric_Guitar_muted=28]="Electric_Guitar_muted",e[e.Overdriven_Guitar=29]="Overdriven_Guitar",e[e.Distortion_Guitar=30]="Distortion_Guitar",e[e.Guitar_harmonics=31]="Guitar_harmonics",e[e.Acoustic_Bass=32]="Acoustic_Bass",e[e.Electric_Bass_finger=33]="Electric_Bass_finger",e[e.Electric_Bass_pick=34]="Electric_Bass_pick",e[e.Fretless_Bass=35]="Fretless_Bass",e[e.Slap_Bass_1=36]="Slap_Bass_1",e[e.Slap_Bass_2=37]="Slap_Bass_2",e[e.Synth_Bass_1=38]="Synth_Bass_1",e[e.Synth_Bass_2=39]="Synth_Bass_2",e[e.Violin=40]="Violin",e[e.Viola=41]="Viola",e[e.Cello=42]="Cello",e[e.Contrabass=43]="Contrabass",e[e.Tremolo_Strings=44]="Tremolo_Strings",e[e.Pizzicato_Strings=45]="Pizzicato_Strings",e[e.Orchestral_Harp=46]="Orchestral_Harp",e[e.Timpani=47]="Timpani",e[e.String_Ensemble_1=48]="String_Ensemble_1",e[e.String_Ensemble_2=49]="String_Ensemble_2",e[e.Synth_Strings_1=50]="Synth_Strings_1",e[e.Synth_Strings_2=51]="Synth_Strings_2",e[e.Choir_Aahs=52]="Choir_Aahs",e[e.Voice_Oohs=53]="Voice_Oohs",e[e.Synth_Voice=54]="Synth_Voice",e[e.Orchestra_Hit=55]="Orchestra_Hit",e[e.Trumpet=56]="Trumpet",e[e.Trombone=57]="Trombone",e[e.Tuba=58]="Tuba",e[e.Muted_Trumpet=59]="Muted_Trumpet",e[e.French_Horn=60]="French_Horn",e[e.Brass_Section=61]="Brass_Section",e[e.Synth_Brass_1=62]="Synth_Brass_1",e[e.Synth_Brass_2=63]="Synth_Brass_2",e[e.Soprano_Sax=64]="Soprano_Sax",e[e.Alto_Sax=65]="Alto_Sax",e[e.Tenor_Sax=66]="Tenor_Sax",e[e.Baritone_Sax=67]="Baritone_Sax",e[e.Oboe=68]="Oboe",e[e.English_Horn=69]="English_Horn",e[e.Bassoon=70]="Bassoon",e[e.Clarinet=71]="Clarinet",e[e.Piccolo=72]="Piccolo",e[e.Flute=73]="Flute",e[e.Recorder=74]="Recorder",e[e.Pan_Flute=75]="Pan_Flute",e[e.Blown_Bottle=76]="Blown_Bottle",e[e.Shakuhachi=77]="Shakuhachi",e[e.Whistle=78]="Whistle",e[e.Ocarina=79]="Ocarina",e[e.Lead_1_square=80]="Lead_1_square",e[e.Lead_2_sawtooth=81]="Lead_2_sawtooth",e[e.Lead_3_calliope=82]="Lead_3_calliope",e[e.Lead_4_chiff=83]="Lead_4_chiff",e[e.Lead_5_charang=84]="Lead_5_charang",e[e.Lead_6_voice=85]="Lead_6_voice",e[e.Lead_7_fifths=86]="Lead_7_fifths",e[e.Lead_8_bass_lead=87]="Lead_8_bass_lead",e[e.Pad_1_new_age=88]="Pad_1_new_age",e[e.Pad_2_warm=89]="Pad_2_warm",e[e.Pad_3_polysynth=90]="Pad_3_polysynth",e[e.Pad_4_choir=91]="Pad_4_choir",e[e.Pad_5_bowed=92]="Pad_5_bowed",e[e.Pad_6_metallic=93]="Pad_6_metallic",e[e.Pad_7_halo=94]="Pad_7_halo",e[e.Pad_8_sweep=95]="Pad_8_sweep",e[e.FX_1_rain=96]="FX_1_rain",e[e.FX_2_soundtrack=97]="FX_2_soundtrack",e[e.FX_3_crystal=98]="FX_3_crystal",e[e.FX_4_atmosphere=99]="FX_4_atmosphere",e[e.FX_5_brightness=100]="FX_5_brightness",e[e.FX_6_goblins=101]="FX_6_goblins",e[e.FX_7_echoes=102]="FX_7_echoes",e[e.FX_8_scifi=103]="FX_8_scifi",e[e.Sitar=104]="Sitar",e[e.Banjo=105]="Banjo",e[e.Shamisen=106]="Shamisen",e[e.Koto=107]="Koto",e[e.Kalimba=108]="Kalimba",e[e.Bag_pipe=109]="Bag_pipe",e[e.Fiddle=110]="Fiddle",e[e.Shanai=111]="Shanai",e[e.Tinkle_Bell=112]="Tinkle_Bell",e[e.Agogo=113]="Agogo",e[e.Steel_Drums=114]="Steel_Drums",e[e.Woodblock=115]="Woodblock",e[e.Taiko_Drum=116]="Taiko_Drum",e[e.Melodic_Tom=117]="Melodic_Tom",e[e.Synth_Drum=118]="Synth_Drum",e[e.Reverse_Cymbal=119]="Reverse_Cymbal",e[e.Guitar_Fret_Noise=120]="Guitar_Fret_Noise",e[e.Breath_Noise=121]="Breath_Noise",e[e.Seashore=122]="Seashore",e[e.Bird_Tweet=123]="Bird_Tweet",e[e.Telephone_Ring=124]="Telephone_Ring",e[e.Helicopter=125]="Helicopter",e[e.Applause=126]="Applause",e[e.Gunshot=127]="Gunshot",e[e.Percussion=128]="Percussion"}(h||(t.MidiInstrument=h={}))},200:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RectangleF2D=void 0;const i=n(6864),s=n(9409);class r{constructor(e,t,n,i){this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=t,this.width=n,this.height=i}static createFromLocationAndSize(e,t){return new r(e.x,e.y,t.width,t.height)}get Location(){return new s.PointF2D(this.x,this.y)}get Size(){return new i.SizeF2D(this.width,this.height)}}t.RectangleF2D=r},242:(e,t)=>{"use strict";var n,i,s;Object.defineProperty(t,"__esModule",{value:!0}),t.PhonicScoreModes=t.MusicSymbolDrawingStyle=t.DrawingMode=void 0,function(e){e[e.All=0]="All",e[e.NoOverlays=1]="NoOverlays",e[e.Leadsheet=2]="Leadsheet"}(n||(t.DrawingMode=n={})),function(e){e[e.Normal=0]="Normal",e[e.Disabled=1]="Disabled",e[e.Selected=2]="Selected",e[e.Clickable=3]="Clickable",e[e.PlaybackSymbols=4]="PlaybackSymbols",e[e.FollowSymbols=5]="FollowSymbols",e[e.QFeedbackNotFound=6]="QFeedbackNotFound",e[e.QFeedbackOk=7]="QFeedbackOk",e[e.QFeedbackPerfect=8]="QFeedbackPerfect",e[e.Debug1=9]="Debug1",e[e.Debug2=10]="Debug2",e[e.Debug3=11]="Debug3"}(i||(t.MusicSymbolDrawingStyle=i={})),function(e){e[e.Following=0]="Following",e[e.Midi=1]="Midi",e[e.Manual=2]="Manual"}(s||(t.PhonicScoreModes=s={}))},298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StaffLineActivitySymbol=void 0;const i=n(7741),s=n(6438);class r extends i.GraphicalObject{constructor(e){super(),this.parentStaffLine=e;const t=e.PositionAndShape;this.boundingBox=new s.BoundingBox(this,t),this.boundingBox.BorderRight=6,this.boundingBox.BorderBottom=4.5,this.boundingBox.BorderLeft=-1.5,this.boundingBox.BorderTop=-1.5}}t.StaffLineActivitySymbol=r},302:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(4127),t),s(n(9536),t),s(n(5984),t),s(n(6030),t),s(n(6302),t),s(n(7631),t),s(n(3186),t),s(n(1538),t)},348:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalStaffEntry=void 0;const i=n(6438),s=n(2561),r=n(7741),a=n(813),o=n(7921);class l extends r.GraphicalObject{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(),this.graphicalChordContainers=[],this.tabStaffEntry=void 0,this.MaxAccidentals=0,this.graphicalInstructions=[],this.ties=[],this.graphicalTies=[],this.lyricsEntries=[],this.parentMeasure=e,this.graphicalVoiceEntries=[],this.sourceStaffEntry=t,n?(this.staffEntryParent=n,this.parentVerticalContainer=n.parentVerticalContainer,this.PositionAndShape=new i.BoundingBox(this,n.PositionAndShape)):this.PositionAndShape=new i.BoundingBox(this,e.PositionAndShape),t&&(this.relInMeasureTimestamp=t.Timestamp),this.FingeringEntries=[]}get GraphicalInstructions(){return this.graphicalInstructions}get GraphicalTies(){return this.graphicalTies}get LyricsEntries(){return this.lyricsEntries}set LyricsEntries(e){this.lyricsEntries=e}getAbsoluteTimestamp(){const e=this.parentMeasure.parentSourceMeasure.AbsoluteTimestamp.clone();return this.relInMeasureTimestamp&&e.Add(this.relInMeasureTimestamp),e}findTieGraphicalNoteFromNote(e){for(const t of this.graphicalVoiceEntries)for(const n of t.notes){const t=n.sourceNote;if(!t.isRest()&&t.Pitch.FundamentalNote===e.Pitch.FundamentalNote&&t.Pitch.Octave===e.Pitch.Octave&&t.getAbsoluteTimestamp().Equals(e.getAbsoluteTimestamp()))return n}}findEndTieGraphicalNoteFromNoteWithStartingSlur(e,t){if(e)for(const n of this.graphicalVoiceEntries)if(n.parentVoiceEntry===e.ParentVoiceEntry)for(const e of n.notes){const n=e.sourceNote;if(n.NoteTie&&-1!==n.NoteSlurs.indexOf(t))return e}}findGraphicalNoteFromGraceNote(e){if(e)for(const t of this.graphicalVoiceEntries)if(t.parentVoiceEntry===e.ParentVoiceEntry)for(const n of t.notes)if(n.sourceNote===e)return n}findGraphicalNoteFromNote(e){if(e)for(const t of this.graphicalVoiceEntries)if(t.parentVoiceEntry===e.ParentVoiceEntry)for(const n of t.notes)if(n.sourceNote===e&&this.getAbsoluteTimestamp().Equals(e.getAbsoluteTimestamp()))return n}getGraphicalNoteDurationFromVoice(e){for(const t of this.graphicalVoiceEntries)if(t.parentVoiceEntry.ParentVoice===e)return t.notes[0].graphicalNoteLength;return new s.Fraction(0,1)}findVoiceEntryGraphicalNotes(e){for(const t of this.graphicalVoiceEntries)if(t.parentVoiceEntry===e)return t.notes}isVoiceEntryPartOfLinkedVoiceEntry(e){if(this.sourceStaffEntry.Link)for(let t=0,n=this.sourceStaffEntry.Link.LinkStaffEntries.length;t<n;++t){const n=this.sourceStaffEntry.Link.LinkStaffEntries[t];if(-1!==n.VoiceEntries.indexOf(e)&&n!==this.sourceStaffEntry)return!0}return!1}findStaffEntryMinNoteLength(){let e=new s.Fraction(Number.MAX_VALUE,1);for(const t of this.graphicalVoiceEntries)for(const n of t.notes){const t=n.graphicalNoteLength;t.lt(e)&&t.GetExpandedNumerator()>0&&(e=t)}return e}findStaffEntryMaxNoteLength(){let e=new s.Fraction(0,1);for(const t of this.graphicalVoiceEntries)for(const n of t.notes){const t=n.graphicalNoteLength;e.lt(t)&&t.GetExpandedNumerator()>0&&(e=t)}return e}findOrCreateGraphicalVoiceEntry(e){for(const n of this.graphicalVoiceEntries)if(n.parentVoiceEntry===e)return n;const t=o.MusicSheetCalculator.symbolFactory.createVoiceEntry(e,this);return this.graphicalVoiceEntries.push(t),t}findOrCreateGraphicalVoiceEntryFromGraphicalNote(e){for(const n of this.graphicalVoiceEntries)if(n===e.parentVoiceEntry)return n;const t=o.MusicSheetCalculator.symbolFactory.createVoiceEntry(e.sourceNote.ParentVoiceEntry,this);return this.graphicalVoiceEntries.push(t),t}addGraphicalNoteToListAtCorrectYPosition(e,t){const n=e.notes;if(0===n.length||t.PositionAndShape.RelativePosition.y<a.CollectionUtil.last(n).PositionAndShape.RelativePosition.y)n.push(t);else for(let i=n.length-1;i>=0;i--){if(n[i].PositionAndShape.RelativePosition.y>t.PositionAndShape.RelativePosition.y){n.splice(i+1,0,t);break}if(0===i){n.splice(0,0,t);break}}}hasOnlyRests(){return this.sourceStaffEntry.hasOnlyRests}getSkylineMin(){var e;const t=null===(e=this.parentMeasure)||void 0===e?void 0:e.ParentStaffLine.SkyBottomLineCalculator;if(!t)return;const[n,i]=this.getAbsoluteStartAndEnd();return t.getSkyLineMinInRange(n,i)}getHighestYAtEntry(){return this.parentMeasure.ParentStaffLine.PositionAndShape.AbsolutePosition.y+this.getSkylineMin()}getLowestYAtEntry(){return this.parentMeasure.ParentStaffLine.PositionAndShape.AbsolutePosition.y+this.getBottomlineMax()}getBottomlineMax(){var e;const t=null===(e=this.parentMeasure)||void 0===e?void 0:e.ParentStaffLine.SkyBottomLineCalculator;if(!t)return;const[n,i]=this.getAbsoluteStartAndEnd();return t.getBottomLineMaxInRange(n,i)}getAbsoluteStartAndEnd(){let e=this.PositionAndShape.AbsolutePosition.x;return e-=this.parentMeasure.ParentStaffLine.PositionAndShape.AbsolutePosition.x,[e,e+this.PositionAndShape.Size.width]}}t.GraphicalStaffEntry=l},363:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(8659),t)},427:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSheet=t.PlaybackSettings=void 0;const s=n(2561),r=n(9024),a=n(6001),o=n(7435),l=n(5534),c=n(8786),h=n(9713),u=n(2683),d=i(n(3065)),f=n(7533);class p{}t.PlaybackSettings=p;class m{constructor(){this.idString="uninitialized",this.sourceMeasures=[],this.repetitions=[],this.dynListStaves=[],this.timestampSortedDynamicExpressionsList=[],this.timestampSortedTempoExpressionsList=[],this.instrumentalGroups=[],this.instruments=[],this.musicPartManager=void 0,this.musicSheetErrors=new c.MusicSheetErrors,this.staves=[],this.transpose=0,this.defaultStartTempoInBpm=0,this.drawErroneousMeasures=!1,this.hasBeenOpenedForTheFirstTime=!1,this.currentEnrolledPosition=new s.Fraction(0,1),this.MeasureWidthFactor=1,this.IgnoreTempoInstructions=!1,this.playbackSettings=new p,this.playbackSettings.rhythm=new s.Fraction(4,4,0,!1),this.userStartTempoInBPM=100,this.pageWidth=120,this.MusicPartManager=new r.MusicPartManager(this),this.hasBPMInfo=!1}static getIndexFromStaff(e){return e.idInMusicSheet}get SourceMeasures(){return this.sourceMeasures}set SourceMeasures(e){this.sourceMeasures=e}get Repetitions(){return this.repetitions}set Repetitions(e){this.repetitions=e}get DynListStaves(){return this.dynListStaves}set TimestampSortedTempoExpressionsList(e){this.timestampSortedTempoExpressionsList=e}get TimestampSortedTempoExpressionsList(){return this.timestampSortedTempoExpressionsList}get TimestampSortedDynamicExpressionsList(){return this.timestampSortedDynamicExpressionsList}get InstrumentalGroups(){return this.instrumentalGroups}get Parts(){return this.instruments}get Instruments(){return this.instruments}get SheetPlaybackSetting(){return this.playbackSettings}set SheetPlaybackSetting(e){this.playbackSettings=e}get DrawErroneousMeasures(){return this.drawErroneousMeasures}set DrawErroneousMeasures(e){this.drawErroneousMeasures=e}get HasBeenOpenedForTheFirstTime(){return this.hasBeenOpenedForTheFirstTime}set HasBeenOpenedForTheFirstTime(e){this.hasBeenOpenedForTheFirstTime=e}InitializeStartTempoInBPM(e){this.userStartTempoInBPM=e}get DefaultStartTempoInBpm(){return this.defaultStartTempoInBpm}set DefaultStartTempoInBpm(e){this.defaultStartTempoInBpm=e,this.InitializeStartTempoInBPM(e)}get Path(){return this.path}set Path(e){this.path=e}get Staves(){return this.staves}get TitleString(){return this.title?this.title.text:""}set TitleString(e){this.Title=new o.Label(e)}get SubtitleString(){return this.subtitle?this.subtitle.text:""}set SubtitleString(e){this.Subtitle=new o.Label(e)}get ComposerString(){return this.composer?this.composer.text:""}set ComposerString(e){this.Composer=new o.Label(e)}get LyricistString(){return this.lyricist?this.lyricist.text:""}set LyricistString(e){this.Lyricist=new o.Label(e)}get CopyrightString(){return this.copyright?this.copyright.text:""}set CopyrightString(e){this.Copyright=new o.Label(e,f.TextAlignmentEnum.CenterBottom,void 0,!0)}get Title(){return this.title}set Title(e){this.title=e}get Subtitle(){return this.subtitle}set Subtitle(e){this.subtitle=e}get Composer(){return this.composer}set Composer(e){this.composer=e}get Lyricist(){return this.lyricist}set Lyricist(e){this.lyricist=e}get Copyright(){return this.copyright}set Copyright(e){this.copyright=e}get Rules(){return this.rules||(d.default.debug("warning: sheet.Rules was undefined. Creating new EngravingRules."),this.rules=new h.EngravingRules),this.rules}set Rules(e){this.rules=e}get SheetErrors(){return this.musicSheetErrors}get SelectionStart(){return this.selectionStart}set SelectionStart(e){this.selectionStart=e.clone(),this.currentEnrolledPosition=e.clone()}get SelectionEnd(){return this.selectionEnd}set SelectionEnd(e){this.selectionEnd=e}set HasBPMInfo(e){this.hasBPMInfo=e}get HasBPMInfo(){return this.hasBPMInfo}addMeasure(e){this.sourceMeasures.push(e),e.measureListIndex=this.sourceMeasures.length-1}checkForInstrumentWithNoVoice(){for(let e=0,t=this.instruments.length;e<t;++e){const t=this.instruments[e];if(0===t.Voices.length){const e=new l.Voice(t,1);t.Voices.push(e)}}}getStaffFromIndex(e){return this.staves[e]}fillStaffList(){let e=0;for(let t=0,n=this.instruments.length;t<n;++t){const n=this.instruments[t];for(let t=0,i=n.Staves.length;t<i;++t){const i=n.Staves[t];i.idInMusicSheet=e,this.staves.push(i),e++}}}get MusicPartManager(){return this.musicPartManager}set MusicPartManager(e){this.musicPartManager=e}getCompleteNumberOfStaves(){let e=0;for(let t=0,n=this.instruments.length;t<n;++t)e+=this.instruments[t].Staves.length;return e}getListOfMeasuresFromIndeces(e,t){const n=[];for(let i=e;i<=t;i++)n.push(this.sourceMeasures[i]);return n}getNextSourceMeasure(e){const t=this.sourceMeasures.indexOf(e);return t===this.sourceMeasures.length-1?e:this.sourceMeasures[t+1]}getFirstSourceMeasure(){return this.sourceMeasures[0]}getLastSourceMeasure(){return this.sourceMeasures[this.sourceMeasures.length-1]}resetAllNoteStates(){const e=this.MusicPartManager.getIterator();for(;!e.EndReached&&e.CurrentVoiceEntries;){for(let t=0,n=e.CurrentVoiceEntries.length;t<n;++t){const n=e.CurrentVoiceEntries[t];for(let e=0,t=n.Notes.length;e<t;++e)n.Notes[e].state=u.NoteState.Normal}e.moveToNext()}}getMusicSheetInstrumentIndex(e){return this.Instruments.indexOf(e)}getGlobalStaffIndexOfFirstStaff(e){const t=this.getMusicSheetInstrumentIndex(e);let n=0;for(let i=0;i<t;i++)n+=this.Instruments[i].Staves.length;return n}setRepetitionNewUserNumberOfRepetitions(e,t){let n=0;for(let i=0;i<this.repetitions.length;i++)if(this.repetitions[i]instanceof a.Repetition){if(e===n){this.repetitions[i].UserNumberOfRepetitions=t;break}n++}}getRepetitionByIndex(e){let t=0;for(let n=0;n<this.repetitions.length;n++)if(this.repetitions[n]instanceof a.Repetition){if(e===t)return this.repetitions[n];t++}}CompareTo(e){return this.Title.text.localeCompare(e.Title.text)}getExpressionsStartTempoInBPM(){if(this.TimestampSortedTempoExpressionsList.length>0){const e=this.TimestampSortedTempoExpressionsList[0];if(e.InstantaneousTempo)return e.InstantaneousTempo.TempoInBpm;if(e.ContinuousTempo)return e.ContinuousTempo.StartTempo}return this.userStartTempoInBPM}get Errors(){return this.musicSheetErrors.measureErrors}get FirstMeasureNumber(){try{return this.getFirstSourceMeasure().MeasureNumber}catch(e){return d.default.info("MusicSheet.FirstMeasureNumber: ",e),0}}get LastMeasureNumber(){try{return this.getLastSourceMeasure().MeasureNumber}catch(e){return d.default.info("MusicSheet.LastMeasureNumber: ",e),0}}get CurrentEnrolledPosition(){return this.currentEnrolledPosition.clone()}set CurrentEnrolledPosition(e){this.currentEnrolledPosition=e.clone()}get Transpose(){return this.transpose}set Transpose(e){this.transpose=e}get FullNameString(){return this.ComposerString+" "+this.TitleString}get IdString(){return this.idString}set IdString(e){this.idString=e}getEnrolledSelectionStartTimeStampWorkaround(){const e=this.MusicPartManager.getIterator(this.SelectionStart);return s.Fraction.createFromFraction(e.CurrentEnrolledTimestamp)}get SheetEndTimestamp(){const e=this.getLastSourceMeasure();return s.Fraction.plus(e.AbsoluteTimestamp,e.Duration)}getSourceMeasureFromTimeStamp(e){for(let t=0,n=this.sourceMeasures.length;t<n;++t){const n=this.sourceMeasures[t];for(let t=0,i=n.VerticalSourceStaffEntryContainers.length;t<i;++t){const i=n.VerticalSourceStaffEntryContainers[t];if(e.Equals(i.getAbsoluteTimestamp()))return n}}return this.findSourceMeasureFromTimeStamp(e)}findSourceMeasureFromTimeStamp(e){for(const t of this.sourceMeasures)if(t.AbsoluteTimestamp.lte(e)&&e.lt(s.Fraction.plus(t.AbsoluteTimestamp,t.Duration)))return t}getVisibleInstruments(){const e=[];for(let t=0,n=this.Instruments.length;t<n;++t){const n=this.Instruments[t];n.Voices.length>0&&n.Voices[0].Visible&&e.push(n)}return e}}t.MusicSheet=m,m.defaultTitle="defaultTitle"},437:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OctaveEnum=t.OctaveShift=void 0;const i=n(8233);var s;t.OctaveShift=class{constructor(e,t){this.numberXml=1,this.setOctaveShiftValue(e,t)}get Type(){return this.octaveValue}set Type(e){this.octaveValue=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get ParentStartMultiExpression(){return this.startMultiExpression}set ParentStartMultiExpression(e){this.startMultiExpression=e}get ParentEndMultiExpression(){return this.endMultiExpression}set ParentEndMultiExpression(e){this.endMultiExpression=e}setOctaveShiftValue(e,t){this.octaveValue=1===t&&"down"===e?s.VA8:1===t&&"up"===e?s.VB8:2===t&&"down"===e?s.MA15:2===t&&"up"===e?s.MB15:s.NONE}static getPitchFromOctaveShift(e,t){if(!e)return;if(e.OctaveShiftApplied)return e;let n=e.Octave;switch(t){case s.VA8:n-=1;break;case s.VB8:n+=1;break;case s.MA15:n-=2;break;case s.MB15:n+=2;break;case s.NONE:default:n+=0}const r=new i.Pitch(e.FundamentalNote,n,e.Accidental);return r.OctaveShiftApplied=!0,r}},function(e){e[e.VA8=0]="VA8",e[e.VB8=1]="VB8",e[e.MA15=2]="MA15",e[e.MB15=3]="MB15",e[e.NONE=4]="NONE"}(s||(t.OctaveEnum=s={}))},469:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceGenerator=void 0;const s=n(4249),r=n(5534),a=n(1336),o=n(1850),l=n(2369),c=n(8365),h=n(5274),u=n(2257),d=n(4268),f=n(2561),p=n(9767),m=n(6030),g=n(7307),b=n(8233),v=n(8233),y=n(6644),x=i(n(3065)),S=n(8233),w=n(813),E=n(4127),_=n(4064),T=n(4236),M=n(5282),C=n(9647),A=n(6362);t.VoiceGenerator=class{constructor(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.openBeams=[],this.beamNumberOffset=0,this.currentOctaveShift=0,this.tupletDict={},this.openTupletNumber=0,this.staff=t,this.instrument=t.ParentInstrument,this.musicSheet=this.instrument.GetMusicSheet,this.slurReader=i,this.pluginManager=e,this.voice=a?new s.LinkedVoice(this.instrument,n,a):new r.Voice(this.instrument,n),this.instrument.Voices.push(this.voice),this.staff.Voices.push(this.voice),this.lyricsReader=new m.LyricsReader(this.musicSheet),this.articulationReader=new E.ArticulationReader(this.musicSheet.Rules)}get openTieDict(){return this.staff.openTieDict}get GetVoice(){return this.voice}get OctaveShift(){return this.currentOctaveShift}set OctaveShift(e){this.currentOctaveShift=e}createVoiceEntry(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.currentVoiceEntry=new a.VoiceEntry(e.clone(),this.voice,t,i,s,r),n&&this.voice.VoiceEntries.push(this.currentVoiceEntry)}read(e,t,n,i,s,r,a,o,l,c,h,d,f,m,g,b,v,y,S,w,E){this.currentStaffEntry=a,this.currentMeasure=o;try{this.currentNote=r?this.addRestNote(e.element("rest"),t,i,n,s,f,m,S):this.addSingleNote(e,t,i,n,s,h,d,f,m,g,b,v,y,S,w),this.currentNote.DotsXml=E;const a=e.elements("lyric");void 0!==this.lyricsReader&&a&&(this.lyricsReader.addLyricEntry(a,this.currentVoiceEntry),this.voice.Parent.HasLyrics=!0);let o=!1;const p=e.element("notations");if(p){this.articulationReader&&this.readArticulations(p,this.currentVoiceEntry,this.currentNote);const t=p.elements("slur"),n=p.elements("slide"),i=p.elements("glissando");void 0!==this.slurReader&&(t.length>0||n.length>0)&&!this.currentNote.ParentVoiceEntry.IsGrace&&(this.slurReader.addSlur(t,this.currentNote),n.length>0&&this.slurReader.addSlur(n,this.currentNote),i.length>0&&this.slurReader.addSlur(i,this.currentNote));const s=p.elements("tuplet");s.length>0&&(this.openTupletNumber=this.addTuplet(e,s),o=!0);const r=p.element("arpeggiate");if(void 0!==r){let e;if(this.currentVoiceEntry.Arpeggio)e=this.currentVoiceEntry.Arpeggio;else{let t=!1;for(const n of this.currentStaffEntry.VoiceEntries)if(n.Arpeggio){t=!0,e=n.Arpeggio;break}if(!t){let t=T.ArpeggioType.ARPEGGIO_DIRECTIONLESS;const n=r.attribute("direction");if(n)switch(n.value){case"up":t=T.ArpeggioType.ROLL_UP;break;case"down":t=T.ArpeggioType.ROLL_DOWN;break;default:t=T.ArpeggioType.ARPEGGIO_DIRECTIONLESS}e=new T.Arpeggio(this.currentVoiceEntry,t),this.currentVoiceEntry.Arpeggio=e}}e.addNote(this.currentNote)}const a=p.elements("tied");a.length>0&&this.addTie(a,l,c,u.TieTypes.SIMPLE);const h=p.element("technical");if(h){const e=h.elements("hammer-on");e.length>0&&this.addTie(e,l,c,u.TieTypes.HAMMERON);const t=h.elements("pull-off");t.length>0&&this.addTie(t,l,c,u.TieTypes.PULLOFF)}}void 0===e.element("time-modification")||o||this.handleTimeModificationNode(e)}catch(e){x.default.warn(e);const t=p.ITextTranslation.translateText("ReaderErrorMessages/NoteError","Ignored erroneous Note.");this.musicSheet.SheetErrors.pushMeasureError(t),this.musicSheet.SheetErrors.pushMeasureError(e)}return this.currentNote}checkForStaffEntryLink(e,t,n,i){const s=new y.StaffEntryLink(this.currentVoiceEntry);s.LinkStaffEntries.push(n),n.Link=s;const r=this.currentVoiceEntry.Timestamp.clone(),a=i.getVerticalContainerByTimestamp(r);return(n=a.StaffEntries[e])||(n=new l.SourceStaffEntry(a,t),a.StaffEntries[e]=n),n.VoiceEntries.push(this.currentVoiceEntry),s.LinkStaffEntries.push(n),n.Link=s,n}checkForOpenBeam(){this.openBeams.length>0&&this.currentNote&&this.handleOpenBeam()}checkOpenTies(){const e=this.openTieDict;for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];f.Fraction.plus(n.StartNote.ParentStaffEntry.Timestamp,n.Duration).lt(n.StartNote.SourceMeasure.Duration)&&delete e[t]}}hasVoiceEntry(){return void 0!==this.currentVoiceEntry}readArticulations(e,t,n){const i=e.element("articulations");i&&this.articulationReader.addArticulationExpression(i,t);const s=e.element("fermata");s&&this.articulationReader.addFermata(s,t);const r=e.element("technical");r&&this.articulationReader.addTechnicalArticulations(r,t,n);const a=e.element("ornaments");a&&this.articulationReader.addOrnament(a,t)}addSingleNote(e,t,n,i,s,r,l,c,h,u,d,m,y,w,E){let T,M,A,P,N=0,k=b.AccidentalEnum.NONE,L=v.NoteEnum.C,I=v.NoteEnum.C,R=0,O=0;const D=e.elements();for(let a=0,o=D.length;a<o;++a){const t=D[a];try{if("pitch"===t.name){const n=t.elements();for(let t=0,i=n.length;t<i;++t){const i=n[t];A=void 0,P=void 0;try{if("step"===i.name){if(L=v.NoteEnum[i.value],void 0===L){const e=p.ITextTranslation.translateText("ReaderErrorMessages/NotePitchError","Invalid pitch while reading note.");throw this.musicSheet.SheetErrors.pushMeasureError(e),new g.MusicSheetReadingException(e,void 0)}}else if("alter"===i.name){if(N=parseFloat(i.value),isNaN(N)){const e=p.ITextTranslation.translateText("ReaderErrorMessages/NoteAlterationError","Invalid alteration while reading note.");throw this.musicSheet.SheetErrors.pushMeasureError(e),new g.MusicSheetReadingException(e,void 0)}k=S.Pitch.AccidentalFromHalfTones(N)}else if("octave"===i.name&&(R=parseInt(i.value,10),isNaN(R))){const e=p.ITextTranslation.translateText("ReaderErrorMessages/NoteOctaveError","Invalid octave value while reading note.");throw this.musicSheet.SheetErrors.pushMeasureError(e),new g.MusicSheetReadingException(e,void 0)}}catch(e){x.default.info("VoiceGenerator.addSingleNote read Step: ",e.message)}}}else if("accidental"===t.name)T=t.value,"natural"===T?k=b.AccidentalEnum.NATURAL:"slash-flat"===T?k=b.AccidentalEnum.SLASHFLAT:"slash-quarter-sharp"===T?k=b.AccidentalEnum.SLASHQUARTERSHARP:"slash-sharp"===T?k=b.AccidentalEnum.SLASHSHARP:"double-slash-flat"===T?k=b.AccidentalEnum.DOUBLESLASHFLAT:"sori"===T?k=b.AccidentalEnum.SORI:"koron"===T&&(k=b.AccidentalEnum.KORON);else if("unpitched"===t.name){const e=t.element("display-step"),n=t.element("display-octave");if(n&&(R=parseInt(n.value,10),O=R-3,l&&(R+=1),1===this.instrument.Staves[0].StafflineCount&&(O+=1)),e){L=v.NoteEnum[e.value.toUpperCase()];let t=0,n=this.musicSheet.Rules.PercussionXMLDisplayStepNoteValueShift;1===this.instrument.Staves[0].StafflineCount&&(n-=3),[I,t]=S.Pitch.lineShiftFromNoteEnum(L,n),O+=t}}else"instrument"===t.name?t.firstAttribute&&(M=t.firstAttribute.value):"notehead"===t.name&&(A=t.value,t.attribute("filled")&&(P="yes"===t.attribute("filled").value))}catch(e){x.default.info("VoiceGenerator.addSingleNote: ",e)}}R-=S.Pitch.OctaveXmlDifference;const F=new S.Pitch(L,R,k,T),B=f.Fraction.createFromFraction(t);let j,V=-1,G=-1;const W=[],z=e.element("notations");if(z){const e=z.element("technical");if(e){const t=e.element("string");t&&(V=parseInt(t.value,10));const n=e.element("fret");n&&(G=parseInt(n.value,10)),e.elements("bend").forEach((function(e){const t=e.element("bend-alter");void 0!==e.element("release")?W.push({bendalter:parseInt(t.value,10),direction:"down"}):W.push({bendalter:parseInt(t.value,10),direction:"up"})}))}}return j=V<0||G<0?new o.Note(this.currentVoiceEntry,this.currentStaffEntry,B,F,this.currentMeasure):new C.TabNote(this.currentVoiceEntry,this.currentStaffEntry,B,F,this.currentMeasure,V,G,W,E),this.addNoteInfo(j,n,c,h,s,I,O,w,w),j.TypeLength=i,j.IsGraceNote=u,j.StemDirectionXml=d,j.TremoloInfo=m,j.PlaybackInstrumentId=M,(void 0!==A&&"normal"!==A||void 0!==P)&&(j.Notehead=new _.Notehead(j,A,P)),d===a.StemDirectionType.None&&(y="#00000000"),this.currentVoiceEntry.Notes.push(j),this.currentVoiceEntry.StemDirectionXml=d,y&&(this.currentVoiceEntry.StemColorXml=y,this.currentVoiceEntry.StemColor=y,j.StemColorXml=y),e.elements("beam")&&!r&&this.createBeam(e,j),j}addRestNote(e,t,n,i,s,r,a,l){const c=f.Fraction.createFromFraction(t),h=e.element("display-step"),u=e.element("display-octave");let d,p,m;h&&u&&(d=v.NoteEnum[h.value.toUpperCase()],p=parseInt(u.value,10),m=new S.Pitch(d,p,b.AccidentalEnum.NONE,void 0,!0));const g=new o.Note(this.currentVoiceEntry,this.currentStaffEntry,c,m,this.currentMeasure,!0);return this.addNoteInfo(g,n,r,a,s,d,p,l,l),g.TypeLength=i,this.currentVoiceEntry.Notes.push(g),this.openBeams.length>0&&this.openBeams.last().ExtendedNoteList.push(g),g}addNoteInfo(e,t,n,i,s,r,a,o,l){e.NoteTypeXml=t,e.PrintObject=n,e.IsCueNote=i,e.NormalNotes=s,e.displayStepUnpitched=r,e.displayOctaveUnpitched=a,e.NoteheadColorXml=o,e.NoteheadColor=o}createBeam(e,t){try{const i=e.element("beam");let s;if(void 0!==i&&i.hasAttributes&&(s=i.attribute("number")),s){var n;let i=parseInt(s.value,10);const r=e.elements("beam"),a=r[0].value;r&&("begin"===a?(i===(null===(n=this.openBeams.last())||void 0===n?void 0:n.BeamNumber)?(this.beamNumberOffset++,i+=this.beamNumberOffset):this.openBeams.last()&&this.handleOpenBeam(),this.openBeams.push(new c.Beam(i,this.beamNumberOffset))):i+=this.beamNumberOffset);let o=!1;if(!(i>0&&i<=this.openBeams.length&&this.openBeams[i-1]))return void x.default.debug("[OSMD] invalid beamnumber");for(let e=0,t=this.openBeams[i-1].Notes.length;e<t;++e){const t=this.openBeams[i-1].Notes[e];this.currentVoiceEntry===t.ParentVoiceEntry&&(o=!0)}o||(this.openBeams[i-1].addNoteToBeam(t),"end"===a&&this.endBeam())}}catch(e){const t=p.ITextTranslation.translateText("ReaderErrorMessages/BeamError","Error while reading beam.");throw this.musicSheet.SheetErrors.pushMeasureError(t),new g.MusicSheetReadingException("",e)}}endBeam(){this.openBeams.pop(),this.beamNumberOffset=Math.max(0,this.beamNumberOffset-1)}handleOpenBeam(){const e=this.openBeams.last();if(0!==e.Notes.length){if(1===e.Notes.length)return e.Notes[0].NoteBeam=void 0,void this.endBeam();if(this.currentNote===w.CollectionUtil.last(e.Notes))this.endBeam();else{const t=w.CollectionUtil.last(e.Notes).ParentStaffEntry,n=this.currentMeasure.getVerticalContainerIndexByTimestamp(t.Timestamp),i=t.VerticalContainerParent.StaffEntries.indexOf(t);if(n<this.currentMeasure.VerticalSourceStaffEntryContainers.length-1){const e=this.currentMeasure.VerticalSourceStaffEntryContainers[n+1].StaffEntries[i];if(e)for(let t=0,n=e.VoiceEntries.length;t<n;++t){const n=e.VoiceEntries[t];if(n.ParentVoice===this.voice){const e=n.Notes[0];e.Length.lte(new f.Fraction(1,8))?(this.openBeams.last().addNoteToBeam(e),this.endBeam()):this.endBeam()}}}else this.endBeam()}}else this.endBeam()}addTuplet(e,t){let n,i=!1;if(void 0!==t&&t.length>1){let s=e.element("time-modification");s&&(s=s.element("actual-notes"));const r=t;for(let t=0,o=r.length;t<o;++t){const o=r[t];if(void 0!==o&&o.attributes()){const t=o.attribute("bracket");t&&"yes"===t.value?(i=!0,n=!0):t&&"no"===t.value&&(n=!1);let r=this.musicSheet.Rules.TupletsRatioed;const l=o.attribute("show-number");l&&"both"===l.value&&this.musicSheet.Rules.TupletsRatioedUseXMLValue&&(r=!0);const c=this.readShowNumberNoneGiven(o),h=o.attribute("type");if(h&&"start"===h.value){let t=1;o.attribute("number")&&(t=parseInt(o.attribute("number").value,10));let a=0;if(s&&(a=parseInt(s.value,10),isNaN(a))){const e=p.ITextTranslation.translateText("ReaderErrorMessages/TupletNoteDurationError","Invalid tuplet note duration.");throw this.musicSheet.SheetErrors.pushMeasureError(e),new g.MusicSheetReadingException(e,void 0)}const l=new d.Tuplet(a,i);l.Ratioed=r,l.BracketedXmlValue=n,l.ShowNumberNoneGivenInXml=c,l.tupletLabelNumberPlacement=A.PlacementEnum.Above;const h=o.attribute("placement");h&&("below"===h.value&&(l.tupletLabelNumberPlacement=A.PlacementEnum.Below),l.PlacementFromXml=!0),this.tupletDict[t]&&(delete this.tupletDict[t],0===Object.keys(this.tupletDict).length?this.openTupletNumber=0:Object.keys(this.tupletDict).length>1&&this.openTupletNumber--),this.tupletDict[t]=l;const u=[];u.push(this.currentNote),l.Notes.push(u),l.Fractions.push(this.getTupletNoteDurationFromType(e)),this.currentNote.NoteTuplet=l,this.openTupletNumber=t}else if("stop"===h.value){let t=1;o.attribute("number")&&(t=parseInt(o.attribute("number").value,10));const n=this.tupletDict[t];if(n){const i=o.attribute("placement");i&&("below"===i.value?n.tupletLabelNumberPlacement=A.PlacementEnum.Below:n.tupletLabelNumberPlacement=A.PlacementEnum.Above,n.PlacementFromXml=!0);const s=[];if(s.push(this.currentNote),n.Notes.push(s),!n.PlacementFromXml){let e=!1;for(const t of n.Notes){for(const i of t)if(!i.isRest()){i.StemDirectionXml===a.StemDirectionType.Down?n.tupletLabelNumberPlacement=A.PlacementEnum.Below:n.tupletLabelNumberPlacement=A.PlacementEnum.Above,e=!0;break}if(e)break}}n.Fractions.push(this.getTupletNoteDurationFromType(e)),this.currentNote.NoteTuplet=n,delete this.tupletDict[t],0===Object.keys(this.tupletDict).length?this.openTupletNumber=0:Object.keys(this.tupletDict).length>1&&this.openTupletNumber--}}}}}else if(t[0]){const s=t[0];if(s.hasAttributes){const t=s.attribute("type").value;let r=1;s.attribute("number")&&(r=parseInt(s.attribute("number").value,10));const o=isNaN(r),l=this.readShowNumberNoneGiven(s),c=s.attribute("bracket");c&&"yes"===c.value?(i=!0,n=!0):c&&"no"===c.value&&(n=!1);let h=this.musicSheet.Rules.TupletsRatioed;const u=s.attribute("show-number");if(u&&"both"===u.value&&this.musicSheet.Rules.TupletsRatioedUseXMLValue&&(h=!0),"start"===t){let t=0,a=e.element("time-modification");if(a&&(a=a.element("actual-notes")),a&&(t=parseInt(a.value,10),isNaN(t))){const e=p.ITextTranslation.translateText("ReaderErrorMessages/TupletNoteDurationError","Invalid tuplet note duration.");throw this.musicSheet.SheetErrors.pushMeasureError(e),new g.MusicSheetReadingException(e)}o&&(this.openTupletNumber++,r=this.openTupletNumber);let c=this.tupletDict[r];c||(c=this.tupletDict[r]=new d.Tuplet(t,i),c.Ratioed=h,c.BracketedXmlValue=n,c.ShowNumberNoneGivenInXml=l,c.tupletLabelNumberPlacement=A.PlacementEnum.Above);const u=s.attribute("placement");u&&("below"===u.value?c.tupletLabelNumberPlacement=A.PlacementEnum.Below:c.tupletLabelNumberPlacement=A.PlacementEnum.Above,c.PlacementFromXml=!0);const f=[];f.push(this.currentNote),c.Notes.push(f),c.Fractions.push(this.getTupletNoteDurationFromType(e)),this.currentNote.NoteTuplet=c,this.openTupletNumber=r}else if("stop"===t){o&&(r=this.openTupletNumber);const t=this.tupletDict[this.openTupletNumber];if(t){const n=s.attribute("placement");n&&("below"===n.value?t.tupletLabelNumberPlacement=A.PlacementEnum.Below:t.tupletLabelNumberPlacement=A.PlacementEnum.Above,t.PlacementFromXml=!0);const i=[];if(i.push(this.currentNote),t.Notes.push(i),!t.PlacementFromXml){let e=!1;for(const n of t.Notes){for(const i of n)if(!i.isRest()){i.StemDirectionXml===a.StemDirectionType.Down?t.tupletLabelNumberPlacement=A.PlacementEnum.Below:t.tupletLabelNumberPlacement=A.PlacementEnum.Above,e=!0;break}if(e)break}}t.Fractions.push(this.getTupletNoteDurationFromType(e)),this.currentNote.NoteTuplet=t,0===Object.keys(this.tupletDict).length?this.openTupletNumber=0:Object.keys(this.tupletDict).length>1&&this.openTupletNumber--,delete this.tupletDict[r]}}}}return this.openTupletNumber}readShowNumberNoneGiven(e){const t=e.attribute("show-number");return!(null===t||void 0===t||!t.value||"none"!==t.value)}handleTimeModificationNode(e){if(this.tupletDict[this.openTupletNumber])try{const t=this.tupletDict[this.openTupletNumber],n=w.CollectionUtil.last(t.Notes);let i;n[0].ParentVoiceEntry.Timestamp.Equals(this.currentVoiceEntry.Timestamp)?i=n:(i=[],t.Notes.push(i),t.Fractions.push(this.getTupletNoteDurationFromType(e))),i.push(this.currentNote),this.currentNote.NoteTuplet=t}catch(e){const t=p.ITextTranslation.translateText("ReaderErrorMessages/TupletNumberError","Invalid tuplet number.");throw this.musicSheet.SheetErrors.pushMeasureError(t),e}else if(this.currentVoiceEntry.Notes.length>0){const e=this.currentVoiceEntry.Notes[0];if(e.NoteTuplet){const t=e.NoteTuplet;w.CollectionUtil.last(t.Notes).push(this.currentNote),this.currentNote.NoteTuplet=t}}}addTie(e,t,n,i){if(e)if(1===e.length){const t=e[0];if(void 0!==t&&t.attributes()){const n=this.getTieDirection(t),s=t.attribute("type").value;try{if("start"===s){const e=this.findCurrentNoteInTieDict(this.currentNote);e<0&&delete this.openTieDict[e];const t=this.getNextAvailableNumberForTie(),s=new h.Tie(this.currentNote,i);this.openTieDict[t]=s,s.TieNumber=t,s.TieDirection=n}else if("stop"===s){const e=this.findCurrentNoteInTieDict(this.currentNote),t=this.openTieDict[e];t&&(t.AddNote(this.currentNote),delete this.openTieDict[e])}}catch(e){const t=p.ITextTranslation.translateText("ReaderErrorMessages/TieError","Error while reading tie.");this.musicSheet.SheetErrors.pushMeasureError(t)}}}else if(2===e.length){const t=this.findCurrentNoteInTieDict(this.currentNote);if(t>=0){const n=this.openTieDict[t];n.AddNote(this.currentNote);for(const t of e)if("start"===t.attribute("type").value){const e=this.getTieDirection(t);n.NoteIndexToTieDirection[n.Notes.length-1]=e}}}}getTieDirection(e){let t=A.PlacementEnum.NotYetDefined;const n=e.attribute("placement");n&&("above"===n.value?t=A.PlacementEnum.Above:"below"===n.value&&(t=A.PlacementEnum.Below));const i=e.attribute("orientation");return i&&("over"===i.value?t=A.PlacementEnum.Above:"under"===i.value&&(t=A.PlacementEnum.Below)),t}getNextAvailableNumberForTie(){const e=Object.keys(this.openTieDict);if(0===e.length)return 1;e.sort(((e,t)=>+e-+t));for(let t=0;t<e.length;t++)if(""+(t+1)!==e[t])return t+1;return+e[e.length-1]+1}findCurrentNoteInTieDict(e){const t=this.openTieDict;for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],s=i.Notes[0],r=e;if(i.Pitch.FundamentalNote===e.Pitch.FundamentalNote&&i.Pitch.Octave===e.Pitch.Octave)return parseInt(n,10);if(void 0!==s.StringNumberTab&&s.StringNumberTab===r.StringNumberTab)return parseInt(n,10)}return-1}getTupletNoteDurationFromType(e){if(e.element("type")){const t=e.element("type");if(t){const n=t.value;try{return M.NoteTypeHandler.getNoteDurationFromType(n)}catch(e){const t=p.ITextTranslation.translateText("ReaderErrorMessages/NoteDurationError","Invalid note duration.");throw this.musicSheet.SheetErrors.pushMeasureError(t),new g.MusicSheetReadingException("",e)}}}}}},474:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MusicPartManagerIterator=void 0;const s=n(2561),r=n(1110),a=n(9288),o=n(5875),l=i(n(3065));class c{constructor(e,t,n){this.currentMeasureIndex=0,this.currentPartIndex=0,this.currentVoiceEntryIndex=-1,this.currentDynamicEntryIndex=0,this.currentTempoEntryIndex=0,this.currentDynamicChangingExpressions=[],this.currentRepetition=void 0,this.endReached=!1,this.frontReached=!1,this.currentTimeStamp=new s.Fraction(0,1),this.currentEnrolledMeasureTimestamp=new s.Fraction(0,1),this.currentRelativeInMeasureTimestamp=new s.Fraction(0,1),this.currentVerticalContainerInMeasureTimestamp=new s.Fraction(0,1),this.jumpResponsibleRepetition=void 0,this.activeDynamicExpressions=[],this.SkipInvisibleNotes=!0;try{this.frontReached=!0,this.musicSheet=e,this.currentBpm=e.userStartTempoInBPM,this.currentVoiceEntries=void 0,this.frontReached=!1;for(const e of this.musicSheet.Repetitions)this.setRepetitionIterationCount(e,1);if(this.activeDynamicExpressions=new Array(this.musicSheet.getCompleteNumberOfStaves()),this.currentMeasure=this.musicSheet.SourceMeasures[0],!t)return;do{this.moveToNext()}while((!this.currentVoiceEntries||this.currentTimeStamp.lt(t))&&!this.endReached);for(let e=0;e<this.activeDynamicExpressions.length;e++)if(this.activeDynamicExpressions[e])if(this.activeDynamicExpressions[e]instanceof o.ContinuousDynamicExpression){const t=this.activeDynamicExpressions[e];this.currentDynamicChangingExpressions.push(new r.DynamicsContainer(t,e))}else{const t=this.activeDynamicExpressions[e];this.currentDynamicChangingExpressions.push(new r.DynamicsContainer(t,e))}this.currentTempoChangingExpression=this.activeTempoExpression}catch(e){l.default.info("MusicPartManagerIterator: "+e)}}get EndReached(){return this.endReached}get FrontReached(){return this.frontReached}get CurrentMeasure(){return this.currentMeasure}get CurrentRepetition(){return this.currentRepetition}get CurrentRepetitionIteration(){return this.CurrentRepetition?this.getRepetitionIterationCount(this.CurrentRepetition):0}get CurrentJumpResponsibleRepetitionIterationBeforeJump(){return this.jumpResponsibleRepetition?this.getRepetitionIterationCount(this.jumpResponsibleRepetition)-1:0}get CurrentBpm(){return this.currentBpm}get CurrentVoiceEntries(){return this.currentVoiceEntries}get CurrentMeasureIndex(){return this.currentMeasureIndex}get CurrentEnrolledTimestamp(){return s.Fraction.plus(this.currentEnrolledMeasureTimestamp,this.currentVerticalContainerInMeasureTimestamp)}get CurrentSourceTimestamp(){return this.currentTimeStamp}get CurrentRelativeInMeasureTimestamp(){return this.currentRelativeInMeasureTimestamp}get JumpOccurred(){return this.backJumpOccurred||this.forwardJumpOccurred}get ActiveTempoExpression(){return this.activeTempoExpression}get ActiveDynamicExpressions(){return this.activeDynamicExpressions}get CurrentTempoChangingExpression(){return this.currentTempoChangingExpression}get JumpResponsibleRepetition(){return this.jumpResponsibleRepetition}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const n=new c(this.musicSheet,null!==e&&void 0!==e?e:this.currentTimeStamp,t);return n.currentVoiceEntryIndex=this.currentVoiceEntryIndex,n.currentMappingPart=this.currentMappingPart,n.currentPartIndex=this.currentPartIndex,n.currentVoiceEntries=this.currentVoiceEntries,n.endReached=this.endReached,n.frontReached=this.frontReached,n}CurrentVisibleVoiceEntries(e){const t=[];if(!this.currentVoiceEntries)return t;if(e){for(const n of this.currentVoiceEntries)n.ParentVoice.Parent.IdString===e.IdString&&this.getVisibleEntries(n,t);return t}for(const n of this.currentVoiceEntries)this.getVisibleEntries(n,t);return t}CurrentAudibleVoiceEntries(e){const t=[];if(!this.currentVoiceEntries)return t;if(e){for(const n of this.currentVoiceEntries)if(n.ParentVoice.Parent.IdString===e.IdString)return this.getAudibleEntries(n,t),t}else for(const n of this.currentVoiceEntries)this.getAudibleEntries(n,t);return t}getCurrentDynamicChangingExpressions(){return this.currentDynamicChangingExpressions}CurrentScoreFollowingVoiceEntries(e){const t=[];if(!this.currentVoiceEntries)return t;if(e){for(const n of this.currentVoiceEntries)if(n.ParentVoice.Parent.IdString===e.IdString)return this.getScoreFollowingEntries(n,t),t}else for(const n of this.currentVoiceEntries)this.getScoreFollowingEntries(n,t);return t}moveToPrevious(){this.frontReached||(this.currentVoiceEntries&&(this.currentVoiceEntries=[]),this.recursiveMoveBack())}moveToPreviousVisibleVoiceEntry(e){for(;!this.frontReached;)if(this.moveToPrevious(),this.checkEntries(e))return}moveToNext(){if(this.forwardJumpOccurred=this.backJumpOccurred=!1,!this.endReached&&(this.frontReached&&(this.frontReached=!1,this.currentVoiceEntryIndex=-1),this.currentVoiceEntries&&(this.currentVoiceEntries=[]),this.recursiveMove(),this.currentMeasure||(this.currentTimeStamp=new s.Fraction(99999,1),this.currentMeasure=this.musicSheet.SourceMeasures.last()),void 0!==this.CurrentTempoChangingExpression&&!this.musicSheet.IgnoreTempoInstructions&&void 0!==this.CurrentTempoChangingExpression.InstantaneousTempo&&!this.musicSheet.IgnoreTempoInstructions)){const e=this.CurrentTempoChangingExpression.InstantaneousTempo.TempoInBpm;e>0&&(this.currentBpm=e)}}moveToNextVisibleVoiceEntry(e){for(;!this.endReached;)if(this.moveToNext(),this.checkEntries(e))return}resetRepetitionIterationCount(e){return this.setRepetitionIterationCount(e,1),1}incrementRepetitionIterationCount(e){return-1===this.repetitionIterationCountDictKeys.indexOf(e)?this.setRepetitionIterationCount(e,1):this.setRepetitionIterationCount(e,this.getRepetitionIterationCount(e)+1)}setRepetitionIterationCount(e,t){const n=this.repetitionIterationCountDictKeys.indexOf(e);return-1===n?(this.repetitionIterationCountDictKeys.push(e),this.repetitionIterationCountDictValues.push(t)):this.repetitionIterationCountDictValues[n]=t,t}getRepetitionIterationCount(e){const t=this.repetitionIterationCountDictKeys.indexOf(e);if(-1!==t)return this.repetitionIterationCountDictValues[t]}handleRepetitionsAtMeasureBegin(){for(let e=0,t=this.currentMeasure.FirstRepetitionInstructions.length;e<t;++e){const t=this.currentMeasure.FirstRepetitionInstructions[e];if(!t.parentRepetition)continue;const n=t.parentRepetition;this.currentRepetition=n,n.StartIndex===this.currentMeasureIndex&&void 0!==this.JumpResponsibleRepetition&&n!==this.JumpResponsibleRepetition&&n.StartIndex>=this.JumpResponsibleRepetition.StartIndex&&n.EndIndex<=this.JumpResponsibleRepetition.EndIndex&&this.resetRepetitionIterationCount(n)}}handleRepetitionsAtMeasureEnd(){for(let e=0,t=this.currentMeasure.LastRepetitionInstructions.length;e<t;++e){const t=this.currentMeasure.LastRepetitionInstructions[e],n=t.parentRepetition;if(n){if(n.BackwardJumpInstructions.indexOf(t)>-1&&this.getRepetitionIterationCount(n)<n.UserNumberOfRepetitions)return this.doBackJump(n),void(this.backJumpOccurred=!0);if(t===n.forwardJumpInstruction){void 0!==this.JumpResponsibleRepetition&&n!==this.JumpResponsibleRepetition&&n.StartIndex>=this.JumpResponsibleRepetition.StartIndex&&n.EndIndex<=this.JumpResponsibleRepetition.EndIndex&&this.resetRepetitionIterationCount(n);const e=n.getForwardJumpTargetForIteration(this.getRepetitionIterationCount(n));if(e>=0)return this.currentMeasureIndex=e,this.currentMeasure=this.musicSheet.SourceMeasures[this.currentMeasureIndex],this.currentVoiceEntryIndex=-1,this.jumpResponsibleRepetition=n,void(this.forwardJumpOccurred=!0);-2===e&&(this.endReached=!0)}}}this.currentMeasureIndex++,void 0!==this.JumpResponsibleRepetition&&this.currentMeasureIndex>this.JumpResponsibleRepetition.EndIndex&&(this.jumpResponsibleRepetition=void 0)}doBackJump(e){this.currentMeasureIndex=e.getBackwardJumpTarget(),this.currentMeasure=this.musicSheet.SourceMeasures[this.currentMeasureIndex],this.currentVoiceEntryIndex=-1,this.incrementRepetitionIterationCount(e),this.jumpResponsibleRepetition=e}activateCurrentRhythmInstructions(){if(void 0!==this.currentMeasure&&this.currentMeasure.FirstInstructionsStaffEntries.length>0&&void 0!==this.currentMeasure.FirstInstructionsStaffEntries[0]){const e=this.currentMeasure.FirstInstructionsStaffEntries[0].Instructions;for(let t=0,n=e.length;t<n;++t){const n=e[t];n instanceof a.RhythmInstruction&&(this.musicSheet.SheetPlaybackSetting.rhythm=n.Rhythm)}}}activateCurrentDynamicOrTempoInstructions(){const e=this.musicSheet.TimestampSortedDynamicExpressionsList;for(;this.currentDynamicEntryIndex>0&&(this.currentDynamicEntryIndex>=e.length||e[this.currentDynamicEntryIndex].parMultiExpression().AbsoluteTimestamp.gte(this.CurrentSourceTimestamp));)this.currentDynamicEntryIndex--;for(;this.currentDynamicEntryIndex<e.length&&e[this.currentDynamicEntryIndex].parMultiExpression().AbsoluteTimestamp.lt(this.CurrentSourceTimestamp);)this.currentDynamicEntryIndex++;for(;this.currentDynamicEntryIndex<e.length&&e[this.currentDynamicEntryIndex].parMultiExpression().AbsoluteTimestamp.Equals(this.CurrentSourceTimestamp);){const t=e[this.currentDynamicEntryIndex],n=t.staffNumber;this.CurrentSourceTimestamp.Equals(t.parMultiExpression().AbsoluteTimestamp)&&(t.continuousDynamicExpression?this.activeDynamicExpressions[n]=t.continuousDynamicExpression:t.instantaneousDynamicExpression&&(this.activeDynamicExpressions[n]=t.instantaneousDynamicExpression)),this.currentDynamicEntryIndex++}this.currentDynamicChangingExpressions.length=0;for(let n=0;n<this.activeDynamicExpressions.length;n++)if(this.activeDynamicExpressions[n]){let e,t;if(this.activeDynamicExpressions[n]instanceof o.ContinuousDynamicExpression){const i=this.activeDynamicExpressions[n];e=i.StartMultiExpression.AbsoluteTimestamp,t=i.EndMultiExpression.AbsoluteTimestamp,this.CurrentSourceTimestamp.gte(e)&&this.CurrentSourceTimestamp.lte(t)&&this.currentDynamicChangingExpressions.push(new r.DynamicsContainer(i,n))}else{const e=this.activeDynamicExpressions[n];this.CurrentSourceTimestamp.Equals(e.ParentMultiExpression.AbsoluteTimestamp)&&this.currentDynamicChangingExpressions.push(new r.DynamicsContainer(e,n))}}const t=this.musicSheet.TimestampSortedTempoExpressionsList;for(;this.currentTempoEntryIndex>0&&(this.currentTempoEntryIndex>=t.length||t[this.currentTempoEntryIndex].AbsoluteTimestamp.gte(this.CurrentSourceTimestamp));)this.currentTempoEntryIndex--;for(;this.currentTempoEntryIndex<t.length&&t[this.currentTempoEntryIndex].AbsoluteTimestamp.lt(this.CurrentSourceTimestamp);)this.currentTempoEntryIndex++;for(;this.currentTempoEntryIndex<t.length&&t[this.currentTempoEntryIndex].AbsoluteTimestamp.Equals(this.CurrentSourceTimestamp);)this.activeTempoExpression=t[this.currentTempoEntryIndex],this.currentTempoEntryIndex++;if(this.currentTempoChangingExpression=void 0,this.activeTempoExpression){let e=this.activeTempoExpression.AbsoluteTimestamp;this.activeTempoExpression.ContinuousTempo&&(e=this.activeTempoExpression.ContinuousTempo.AbsoluteEndTimestamp),(this.CurrentSourceTimestamp.gte(this.activeTempoExpression.AbsoluteTimestamp)||this.CurrentSourceTimestamp.lte(e))&&(this.currentTempoChangingExpression=this.activeTempoExpression)}}recursiveMoveBack(){if(this.currentVoiceEntryIndex>0){this.currentVoiceEntryIndex--;const e=this.currentMeasure.VerticalSourceStaffEntryContainers[this.currentVoiceEntryIndex];this.currentVoiceEntries=this.getVoiceEntries(e),this.currentVerticalContainerInMeasureTimestamp=e.Timestamp,this.currentRelativeInMeasureTimestamp=this.currentVerticalContainerInMeasureTimestamp,this.currentTimeStamp=s.Fraction.plus(this.currentMeasure.AbsoluteTimestamp,this.currentVerticalContainerInMeasureTimestamp),this.activateCurrentDynamicOrTempoInstructions();const t=this.musicSheet.SelectionEnd;return t&&this.currentTimeStamp.lt(t)&&(this.endReached=!1),void(this.currentMeasureIndex=this.musicSheet.SourceMeasures.indexOf(this.CurrentMeasure))}if(0!==this.currentVoiceEntryIndex||0===this.currentMeasureIndex)this.frontReached=!0,this.currentTimeStamp=new s.Fraction(-1,1);else{const e=this.musicSheet.SourceMeasures[this.currentMeasureIndex-1];this.currentMeasureIndex--,this.currentMeasure=this.musicSheet.SourceMeasures[this.currentMeasureIndex];const t=e.VerticalSourceStaffEntryContainers[e.VerticalSourceStaffEntryContainers.length-1];this.currentVoiceEntries=this.getVoiceEntries(t),this.currentVerticalContainerInMeasureTimestamp=t.Timestamp,this.currentVoiceEntryIndex=e.VerticalSourceStaffEntryContainers.length-1,this.currentRelativeInMeasureTimestamp=this.currentVerticalContainerInMeasureTimestamp,this.currentTimeStamp=s.Fraction.plus(this.currentMeasure.AbsoluteTimestamp,t.Timestamp),this.activateCurrentDynamicOrTempoInstructions();const n=this.musicSheet.SelectionEnd;n&&this.currentTimeStamp.lt(n)&&(this.endReached=!1)}}recursiveMove(){if(this.currentVoiceEntryIndex++,0===this.currentVoiceEntryIndex&&(this.handleRepetitionsAtMeasureBegin(),this.activateCurrentRhythmInstructions()),this.currentVoiceEntryIndex>=0&&this.currentVoiceEntryIndex<this.currentMeasure.VerticalSourceStaffEntryContainers.length){const e=this.currentMeasure.VerticalSourceStaffEntryContainers[this.currentVoiceEntryIndex];this.currentVoiceEntries=this.getVoiceEntries(e),this.currentVerticalContainerInMeasureTimestamp=e.Timestamp,this.currentRelativeInMeasureTimestamp=this.currentVerticalContainerInMeasureTimestamp,this.currentTimeStamp=s.Fraction.plus(this.currentMeasure.AbsoluteTimestamp,this.currentVerticalContainerInMeasureTimestamp);const t=this.musicSheet.SelectionEnd;return t&&this.currentTimeStamp.gte(t)&&(this.endReached=!0),void this.activateCurrentDynamicOrTempoInstructions()}if(this.currentEnrolledMeasureTimestamp.Add(this.currentMeasure.Duration),this.handleRepetitionsAtMeasureEnd(),this.currentMeasureIndex>=0&&this.currentMeasureIndex<this.musicSheet.SourceMeasures.length)return this.currentMeasure=this.musicSheet.SourceMeasures[this.currentMeasureIndex],this.currentTimeStamp=s.Fraction.plus(this.currentMeasure.AbsoluteTimestamp,this.currentVerticalContainerInMeasureTimestamp),this.currentVoiceEntryIndex=-1,void this.recursiveMove();this.currentVerticalContainerInMeasureTimestamp=new s.Fraction,this.currentMeasure=void 0,this.currentVoiceEntries=void 0,this.endReached=!0}checkEntries(e){const t=this.CurrentVisibleVoiceEntries();if(t.length>0){if(!e)return!0;for(let e=0,n=t.length;e<n;++e)if(t[e].Notes[0].Pitch)return!0}return!1}getVisibleEntries(e,t){if(e.ParentVoice.Visible){let n=!1;for(const t of e.Notes)if(t.PrintObject){n=!0;break}if(!n&&this.SkipInvisibleNotes)return;t.push(e)}}getAudibleEntries(e,t){e.ParentVoice.Audible&&t.push(e)}getScoreFollowingEntries(e,t){e.ParentVoice.Following&&e.ParentVoice.Parent.Following&&t.push(e)}getVoiceEntries(e){const t=[];for(const n of e.StaffEntries)if(n)for(const e of n.VoiceEntries)t.push(e);return t}}t.MusicPartManagerIterator=c},512:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSymbol=void 0,function(e){e[e.Unused_first_Symbol=0]="Unused_first_Symbol",e[e.BLACK_HEAD=1]="BLACK_HEAD",e[e.UPWARDS_TAIL=2]="UPWARDS_TAIL",e[e.DOWNWARDS_TAIL=3]="DOWNWARDS_TAIL",e[e.UPWARDS_DOUBLE_TAIL=4]="UPWARDS_DOUBLE_TAIL",e[e.DOWNWARDS_DOUBLE_TAIL=5]="DOWNWARDS_DOUBLE_TAIL",e[e.UPWARDS_TRIPLE_TAIL=6]="UPWARDS_TRIPLE_TAIL",e[e.DOWNWARDS_TRIPLE_TAIL=7]="DOWNWARDS_TRIPLE_TAIL",e[e.UPWARDS_QUAD_TAIL=8]="UPWARDS_QUAD_TAIL",e[e.DOWNWARDS_QUAD_TAIL=9]="DOWNWARDS_QUAD_TAIL",e[e.ROUND_HEAD=10]="ROUND_HEAD",e[e.WHITE_HEAD=11]="WHITE_HEAD",e[e.G_CLEF=12]="G_CLEF",e[e.F_CLEF=13]="F_CLEF",e[e.C_CLEF=14]="C_CLEF",e[e.BREVE=15]="BREVE",e[e.BREVE_REST=16]="BREVE_REST",e[e.COMMON_TIME=17]="COMMON_TIME",e[e.CUT_TIME=18]="CUT_TIME",e[e.WHOLE_REST=19]="WHOLE_REST",e[e.HALF_REST=20]="HALF_REST",e[e.QUARTER_REST=21]="QUARTER_REST",e[e.EIGHTH_REST=22]="EIGHTH_REST",e[e.SIXTEENTH_REST=23]="SIXTEENTH_REST",e[e.THIRTYSECOND_REST=24]="THIRTYSECOND_REST",e[e.SIXTYFOURTH_REST=25]="SIXTYFOURTH_REST",e[e.FLAT=26]="FLAT",e[e.SHARP=27]="SHARP",e[e.NATURAL=28]="NATURAL",e[e.DOUBLE_FLAT=29]="DOUBLE_FLAT",e[e.DOUBLE_SHARP=30]="DOUBLE_SHARP",e[e.ZERO=31]="ZERO",e[e.ONE=32]="ONE",e[e.TWO=33]="TWO",e[e.THREE=34]="THREE",e[e.FOUR=35]="FOUR",e[e.FIVE=36]="FIVE",e[e.SIX=37]="SIX",e[e.SEVEN=38]="SEVEN",e[e.EIGHT=39]="EIGHT",e[e.NINE=40]="NINE",e[e.DOT=41]="DOT",e[e.FERMATA=42]="FERMATA",e[e.INVERTED_FERMATA=43]="INVERTED_FERMATA",e[e.SPICCATO=44]="SPICCATO",e[e.TENUTO=45]="TENUTO",e[e.MARCATO=46]="MARCATO",e[e.MARCATISSIMO=47]="MARCATISSIMO",e[e.INVERTED_MARCATISSIMO=48]="INVERTED_MARCATISSIMO",e[e.P=49]="P",e[e.F=50]="F",e[e.S=51]="S",e[e.Z=52]="Z",e[e.M=53]="M",e[e.R=54]="R",e[e.SEGNO=55]="SEGNO",e[e.CODA=56]="CODA",e[e.DRUM_CLEF=57]="DRUM_CLEF",e[e.G_CLEF_SUB8=58]="G_CLEF_SUB8",e[e.G_CLEF_SUPER8=59]="G_CLEF_SUPER8",e[e.G_CLEF_SUB15=60]="G_CLEF_SUB15",e[e.G_CLEF_SUPER15=61]="G_CLEF_SUPER15",e[e.F_CLEF_SUB8=62]="F_CLEF_SUB8",e[e.F_CLEF_SUPER8=63]="F_CLEF_SUPER8",e[e.F_CLEF_SUB15=64]="F_CLEF_SUB15",e[e.F_CLEF_SUPER15=65]="F_CLEF_SUPER15",e[e.DOWN_BOW=66]="DOWN_BOW",e[e.MORDENT=67]="MORDENT",e[e.INVERTED_MORDENT=68]="INVERTED_MORDENT",e[e.TURN=69]="TURN",e[e.INVERTED_TURN=70]="INVERTED_TURN",e[e.LEFTHAND_PIZZICATO=71]="LEFTHAND_PIZZICATO",e[e.RELEASE_PED=72]="RELEASE_PED",e[e.ENGAGE_PED=73]="ENGAGE_PED",e[e.VA8=74]="VA8",e[e.VB8=75]="VB8",e[e.TRILL=76]="TRILL",e[e.MA15=77]="MA15",e[e.MB15=78]="MB15",e[e.HIGH=79]="HIGH",e[e.PLAY=80]="PLAY",e[e.MIC=81]="MIC",e[e.SNAP_PIZZICATO=82]="SNAP_PIZZICATO",e[e.NATURAL_HARMONIC=83]="NATURAL_HARMONIC",e[e.EditPen=84]="EditPen",e[e.PEDAL_BRACKET=85]="PEDAL_BRACKET",e[e.PEDAL_MIXED=86]="PEDAL_MIXED",e[e.PEDAL_SYMBOL=87]="PEDAL_SYMBOL"}(n||(t.MusicSymbol=n={}))},599:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(6888),t),s(n(3902),t)},624:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OSMDOptions=t.SkyBottomLineBatchCalculatorBackendType=t.BackendType=t.FillEmptyMeasuresWithWholeRests=t.AlignRestOption=t.CursorType=void 0;const i=n(4146);var s,r,a,o,l;!function(e){e[e.Standard=0]="Standard",e[e.ThinLeft=1]="ThinLeft",e[e.ShortThinTopLeft=2]="ShortThinTopLeft",e[e.CurrentArea=3]="CurrentArea",e[e.CurrentAreaLeft=4]="CurrentAreaLeft"}(s||(t.CursorType=s={})),function(e){e[e.Never=0]="Never",e[e.Always=1]="Always",e[e.Auto=2]="Auto"}(r||(t.AlignRestOption=r={})),function(e){e[e.No=0]="No",e[e.YesVisible=1]="YesVisible",e[e.YesInvisible=2]="YesInvisible"}(a||(t.FillEmptyMeasuresWithWholeRests=a={})),function(e){e[e.SVG=0]="SVG",e[e.Canvas=1]="Canvas"}(o||(t.BackendType=o={})),function(e){e[e.Plain=0]="Plain",e[e.WebGL=1]="WebGL"}(l||(t.SkyBottomLineBatchCalculatorBackendType=l={})),t.OSMDOptions=class{static OSMDOptionsStandard(){return{autoResize:!0,backend:"svg",drawingParameters:i.DrawingParametersEnum.default}}static BackendTypeFromString(e){return e&&"canvas"===e.toLowerCase()?o.Canvas:o.SVG}}},649:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LyricWord=void 0,t.LyricWord=class{constructor(){this.syllables=[]}get Syllables(){return this.syllables}containsVoiceEntry(e){for(let t=0,n=this.Syllables.length;t<n;++t)if(this.Syllables[t].Parent===e)return!0;return!1}findLyricEntryInVoiceEntry(e){for(let t=0,n=this.Syllables.length;t<n;++t){const n=this.Syllables[t];if(n.Parent===e)return n}}}},735:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlainSkyBottomLineBatchCalculatorBackend=void 0;const i=n(5479),s=n(3667);class r extends s.SkyBottomLineBatchCalculatorBackend{constructor(e,t){super(e,t)}getPreferredRenderingConfiguration(e,t){return{elementWidth:Math.ceil(e),numColumns:6,numRows:6}}onInitialize(e){}calculateFromCanvas(e,t,n,s,r){const a=e.width,o=t.getImageData(0,0,e.width,e.height),{elementWidth:l,elementHeight:c,numColumns:h}=r,u=[];for(let d=0;d<n.length;++d){const e=n[d],t=Math.floor(e.getVFStave().getWidth()),r=Math.max(Math.ceil(e.PositionAndShape.Size.width*s),1),f=d%h*l,p=f+t,m=Math.floor(d/h)*c,g=m+c,b=new Array(Math.max(r,t)).fill(0),v=new Array(Math.max(r,t)).fill(0);for(let n=f;n<p;++n){b[n-f]=0;for(let e=m;e<g;++e){const t=e*a*4+4*n;if(o.data[t+3]>0){b[n-f]=e-m;break}}v[n-f]=c;for(let e=g-1;e>=m;e--){const t=e*a*4+4*n;if(o.data[t+3]>0){v[n-f]=e-m;break}}}const y=Math.max(...b),x=Math.min(...v);for(let n=0;n<t;++n)b[n]=0===b[n]?y:b[n],v[n]=v[n]===c?x:v[n];u.push(new i.SkyBottomLineCalculationResult(b,v))}return u}}t.PlainSkyBottomLineBatchCalculatorBackend=r},806:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowMusicSheetCalculator=void 0;const s=n(7921),r=n(3753),a=n(5748),o=n(1327),l=n(5054),c=n(7785),h=i(n(3206));var u=h.default.Flow;const d=i(n(3065)),f=n(9479),p=n(2395),m=n(7751),g=n(9310),b=n(7809),v=n(7533),y=n(4022),x=n(2400),S=n(9161),w=n(624),E=n(7506),_=n(5282),T=n(6014),M=n(4980),C=n(6659),A=n(6954),P=n(7109),N=n(512),k=n(813),L=n(1216);class I extends s.MusicSheetCalculator{constructor(e){var t,n,i,a,o,l,u,d;super(),this.beamsNeedUpdate=!1,this.rules=e,s.MusicSheetCalculator.symbolFactory=new r.VexFlowGraphicalSymbolFactory,s.MusicSheetCalculator.TextMeasurer=new c.VexFlowTextMeasurer(this.rules),s.MusicSheetCalculator.stafflineNoteCalculator=new E.VexflowStafflineNoteCalculator(this.rules),"gonville"===(null===(t=this.rules.DefaultVexFlowNoteFont)||void 0===t?void 0:t.toLowerCase())?h.default.Flow.DEFAULT_FONT_STACK=[null===(n=h.default.Flow.Fonts)||void 0===n?void 0:n.Gonville,null===(i=h.default.Flow.Fonts)||void 0===i?void 0:i.Bravura,null===(a=h.default.Flow.Fonts)||void 0===a?void 0:a.Custom]:"petaluma"===(null===(o=this.rules.DefaultVexFlowNoteFont)||void 0===o?void 0:o.toLowerCase())&&(h.default.Flow.DEFAULT_FONT_STACK=[null===(l=h.default.Flow.Fonts)||void 0===l?void 0:l.Petaluma,null===(u=h.default.Flow.Fonts)||void 0===u?void 0:u.Gonville,null===(d=h.default.Flow.Fonts)||void 0===d?void 0:d.Bravura])}clearRecreatedObjects(){super.clearRecreatedObjects(),s.MusicSheetCalculator.stafflineNoteCalculator=new E.VexflowStafflineNoteCalculator(this.rules);for(const e of this.graphicalMusicSheet.MeasureList)for(const t of e)null===t||void 0===t||t.clean()}formatMeasures(){for(const e of this.graphicalMusicSheet.MeasureList)if(e&&e[0]){e.find((e=>null===e||void 0===e?void 0:e.isVisible())).format();for(const t of e){for(const e of t.staffEntries)e.calculateXPosition();t.finalizeBeams()}}this.beamsNeedUpdate=!1}calculateMeasureXLayout(e){const t=[];for(const s of e)(null===s||void 0===s?void 0:s.isVisible())&&t.push(s);if(0===t.length)return 0;e=t;const n=[],i=new u.Formatter({softmaxFactor:this.rules.SoftmaxFactorVexFlow});let r=e[0].staffEntries.length,a=1;for(const s of e){if(!s)continue;let e=0;for(const n of s.staffEntries)e+=n.setMaxAccidentals();s.parentSourceMeasure.ImplicitMeasure&&(r=Math.max(s.staffEntries.length,r),a=Math.max(s.staffEntries.length+e,a));const t=s.vfVoices,o=[];for(const i in t)if(t.hasOwnProperty(i)){const e=t[i];s.hasOnlyRests&&!e.ticksUsed.equals(e.totalTicks)&&(e.ticksUsed=e.totalTicks),o.push(e),n.push(e)}0!==o.length?i.joinVoices(o):d.default.debug("Found a measure with no voices. Continuing anyway.",t)}let o=12;const l=e[0].parentSourceMeasure;if(n.length>0){if(o=i.preCalculateMinTotalWidth(n)/f.unitInPixels*this.rules.VoiceSpacingMultiplierVexflow+this.rules.VoiceSpacingAddendVexflow+.3*r,null!==l&&void 0!==l&&l.ImplicitMeasure){o=l.Duration.RealValue/l.ActiveTimeSignature.RealValue*o;let e=0;const t=l.measureListIndex;if(t>1)for(const n of this.graphicalMusicSheet.MeasureList[t-1]){const t=null===n||void 0===n?void 0:n.parentSourceMeasure.endingBarStyleEnum;if(t===A.SystemLinesEnum.ThinBold||t===A.SystemLinesEnum.DotsThinBold){e=this.rules.PickupMeasureRepetitionSpacing;break}}o+=e,r>1?o+=.3*a*1.5:t>1&&1===r&&(o+=this.rules.PickupMeasureSpacingSingleNoteAddend),o*=this.rules.PickupMeasureWidthMultiplier}s.MusicSheetCalculator.setMeasuresMinStaffEntriesWidth(e,o);const t=(e,t)=>{i.formatToStave(n,t.getVFStave())},c=(e,t)=>{i.formatToStave(n,t.getVFStave(),{align_rests:!0,context:void 0})};for(const n of e){if(this.rules.AlignRests===w.AlignRestOption.Never)n.formatVoices=t;else if(this.rules.AlignRests===w.AlignRestOption.Always)n.formatVoices=c;else if(this.rules.AlignRests===w.AlignRestOption.Auto){let e=!1;for(const t of n.staffEntries){let n=0,i=0;for(const s of t.graphicalVoiceEntries)if(s.parentVoiceEntry.IsGrace||s&&s.notes&&s.notes[0]&&s.notes[0].sourceNote&&s.notes[0].sourceNote.PrintObject&&n++,s&&s.notes&&s.notes[0]&&s.notes[0].sourceNote&&s.notes[0].sourceNote.isRest()&&s.notes[0].sourceNote.PrintObject&&i++,n>1&&i>=1){e=!0;break}if(e)break}n.formatVoices=e?c:t}if(n===e[0]){const e=n;e.formatVoices(o*f.unitInPixels,e)}}}for(const s of e)if(s)for(const e of s.staffEntries)e.calculateXPosition();for(const s of e){if(!s)continue;const e=s.vfVoices,t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(e[n]);0!==t.length?i.joinVoices(t):d.default.debug("Found a measure with no voices. Continuing anyway.",e)}return o}calculateElongationFactor(e,t,n,i,s,r,o,l){let c=s,h=0;for(const u of e){const e=u.GraphicalLabel.Label.textAlignment;let d=o,f=l;if(u instanceof p.GraphicalLyricEntry&&u.ParentLyricWord){u.LyricsEntry.SyllableIndex>0&&(d=this.rules.BetweenSyllableMinimumDistance,v.TextAlignment.IsCenterAligned(e)&&(d+=1));const t=u.ParentLyricWord.GetLyricWord.Syllables;t.length>1&&u.LyricsEntry.SyllableIndex<t.length-1&&(void 0===this.dashSpace&&(this.dashSpace=1.5),f-=this.dashSpace)}const m=u instanceof p.GraphicalLyricEntry?u.GraphicalLabel.PositionAndShape:u.PositionAndShape,g=m.Size.width;let b,y,x,S,w=t.PositionAndShape.RelativePosition.x+m.BorderLeft;u instanceof C.GraphicalChordSymbolContainer&&u.PositionAndShape.Parent.DataObject instanceof a.GraphicalMeasure&&(w=this.rules.ChordSymbolWholeMeasureRestXOffset+m.BorderMarginLeft+u.PositionAndShape.Parent.DataObject.beginInstructionsWidth),void 0!==n[h]&&n[h].extend,n[h]&&(y=w-n[h].xPosition);const E=i*s;v.TextAlignment.IsCenterAligned(e)?(f/=4,x=E-w,S=g/2-f,n[h]&&(b=n[h].labelWidth/2+g/2+d)):v.TextAlignment.IsLeft(e)&&(x=E-w,S=g-f,n[h]&&(b=n[h].labelWidth+d));let _=1;const T=S/x;let M=1;u instanceof p.GraphicalLyricEntry&&u.LyricsEntry?n[h]&&(M=b/y,n[h].sourceNoteDuration.Denominator>4&&(M*=1.1)):n[h]&&(M=b/y),_=Math.max(T,M),c=Math.max(c,_);let A=Math.max(b-y||0,0);n[h]&&(A+=n[h].cumulativeOverlap),n[h]={cumulativeOverlap:A,extend:u instanceof p.GraphicalLyricEntry&&u.LyricsEntry.extend,labelWidth:g,measureNumber:r,sourceNoteDuration:u instanceof p.GraphicalLyricEntry&&u.LyricsEntry&&u.LyricsEntry.Parent.Notes[0].Length,text:u instanceof p.GraphicalLyricEntry?u.LyricsEntry.Text:u.GraphicalLabel.Label.text,xPosition:w},h++}return c}calculateElongationFactorFromStaffEntries(e,t,n,i){let s=n;const r={},a={};for(const o of e)o.LyricsEntries.length>0&&this.rules.RenderLyrics&&(s=this.calculateElongationFactor(o.LyricsEntries,o,r,t,s,i,this.rules.HorizontalBetweenLyricsDistance,this.rules.LyricOverlapAllowedIntoNextMeasure)),o.graphicalChordContainers.length>0&&this.rules.RenderChordSymbols&&(s=this.calculateElongationFactor(o.graphicalChordContainers,o,a,t,s,i,this.rules.ChordSymbolXSpacing,this.rules.ChordOverlapAllowedIntoNextMeasure));return s}calculateMeasureWidthFromStaffEntries(e,t){let n=1;for(const i of e)i&&0!==i.staffEntries.length&&i.isVisible()&&(n=this.calculateElongationFactorFromStaffEntries(i.staffEntries,t,n,i.MeasureNumber));return n=Math.min(n,this.rules.MaximumLyricsElongationFactor),t*n}createGraphicalTie(e,t,n,i,s){return new l.GraphicalTie(e,i,s)}updateStaffLineBorders(e){e.SkyBottomLineCalculator.updateStaffLineBorders()}graphicalMeasureCreatedCalculations(e){e.rules=this.rules,e.graphicalMeasureCreatedCalculations()}layoutVoiceEntry(e,t,n,i){for(let r=0;r<t.length;r++)t[r]=s.MusicSheetCalculator.stafflineNoteCalculator.positionNote(t[r])}layoutStaffEntry(e){e.parentMeasure.layoutStaffEntry(e)}initGraphicalMeasuresCreation(){}layoutArticulationMarks(e,t,n){}layoutGraphicalTie(e,t,n){const i=e.StartNote,s=e.EndNote;let r,a,o=0;i&&i.vfnote&&i.vfnote.length>=2&&(r=i.vfnote[0],o=i.vfnote[1]);let l=0;if(s&&s.vfnote&&s.vfnote.length>=2&&(a=s.vfnote[0],l=s.vfnote[1]),t){if(r){const t=new u.StaveTie({first_indices:[o],first_note:r});i.parentVoiceEntry.parentStaffEntry.parentMeasure.addStaveTie(t,e)}if(a){const t=new u.StaveTie({last_indices:[l],last_note:a});s.parentVoiceEntry.parentStaffEntry.parentMeasure.addStaveTie(t,e)}}else if(r||a){let t;if(n)if("S"===e.Tie.Type){const n=e.StartNote.sourceNote,i=e.EndNote.sourceNote;let s=1;n.FretNumber>i.FretNumber&&(s=-1),t=new u.TabSlide({first_indices:[o],first_note:r,last_indices:[l],last_note:a},s)}else t=new u.TabTie({first_indices:[o],first_note:r,last_indices:[l],last_note:a},e.Tie.Type);else{t=new u.StaveTie({first_indices:[o],first_note:r,last_indices:[l],last_note:a});const n=e.Tie.getTieDirection(i.sourceNote);n===M.PlacementEnum.Below?t.setDirection(1):n===M.PlacementEnum.Above&&t.setDirection(-1)}s.parentVoiceEntry.parentStaffEntry.parentMeasure.addStaveTie(t,e)}}calculateDynamicExpressionsForMultiExpression(e,t,n){if(t<this.rules.MinMeasureToDrawIndex||t>this.rules.MaxMeasureToDrawIndex)return;const i=e.AbsoluteTimestamp,s=this.graphicalMusicSheet.MeasureList[t],r=s[n].ParentStaffLine,a=s[n],o=e.StartingContinuousDynamic,l=void 0!==o&&!o.IsStartOfSoftAccent,c=this.getRelativePositionInStaffLineFromTimestamp(i,n,r,null===r||void 0===r?void 0:r.isPartOfMultiStaffInstrument(),void 0,l);if(c.x<=0&&(c.x=a.beginInstructionsWidth+this.rules.RhythmRightMargin),e.InstantaneousDynamic){const t=new b.VexFlowInstantaneousDynamicExpression(e.InstantaneousDynamic,r,a);this.calculateGraphicalInstantaneousDynamicExpression(t,c,i),this.dynamicExpressionMap.set(i.RealValue,t.PositionAndShape)}if(o){const t=new x.VexFlowContinuousDynamicExpression(o,r,a.parentSourceMeasure);if(t.StartMeasure=a,t.IsSoftAccent=e.StartingContinuousDynamic.IsStartOfSoftAccent,!t.IsVerbal&&o.EndMultiExpression)try{this.calculateGraphicalContinuousDynamic(t,c),t.updateSkyBottomLine()}catch(e){}else t.IsVerbal?this.calculateGraphicalVerbalContinuousDynamic(t,c):d.default.warn("This continuous dynamic is not covered. measure"+e.SourceMeasureParent.MeasureNumber)}}createMetronomeMark(e){var t;const n=e.ParentMultiTempoExpression.SourceMeasureParent.MeasureNumber,i=Math.max(e.StaffNumber-1,0),s=this.graphicalMusicSheet.findGraphicalMeasureByMeasureNumber(n,i),r=s===this.graphicalMusicSheet.MeasureList[0][0];if(s.hasMetronomeMark)return;const a=s.getVFStave();let o="q";if(e.beatUnit){const t=_.NoteTypeHandler.getNoteDurationFromType(e.beatUnit);o=T.VexFlowConverter.durations(t,!1)[0]}let l=this.rules.MetronomeMarkYShift,c=!1;for(const f of e.parentMeasure.TempoExpressions){var h;const e=(null===(h=f.InstantaneousTempo)||void 0===h?void 0:h.TempoType)===S.TempoType.metronomeMark;if(f.getPlacementOfFirstEntry()===M.PlacementEnum.Above&&!e){c=!0;break}}c&&(l-=1.4);const u=null===(t=this.graphicalMusicSheet.MeasureList[0][0].ParentStaffLine)||void 0===t?void 0:t.SkyLine;a.setTempo({bpm:e.TempoInBpm,dots:e.dotted,duration:o},l*f.unitInPixels);const d=r?this.rules.MetronomeMarkXShift*f.unitInPixels:0;a.getModifiers()[a.getModifiers().length-1].setShiftX(d),s.hasMetronomeMark=!0,u&&(u[0]=Math.min(u[0],-4.5+l))}calculateRehearsalMark(e){const t=e.rehearsalExpression;if(!t)return;const n=this.graphicalMusicSheet.MeasureList[0][0].MeasureNumber,i=Math.max(e.MeasureNumber-n,0);for(const s of this.graphicalMusicSheet.MeasureList[i]){const n=null===s||void 0===s?void 0:s.getVFStave();if(!n||!s.isVisible())continue;let i=-this.rules.RehearsalMarkYOffsetDefault-this.rules.RehearsalMarkYOffset;s.parentSourceMeasure.isReducedToMultiRest&&(i+=this.rules.RehearsalMarkYOffsetAddedForRehearsalMarks);let r=this.rules.RehearsalMarkXOffsetDefault+this.rules.RehearsalMarkXOffset;e.IsSystemStartMeasure&&(r+=this.rules.RehearsalMarkXOffsetSystemStartMeasure);const a=this.rules.RehearsalMarkFontSize;return void n.setSection(t.label,i,r,a)}}calculateSingleOctaveShift(e,t,n,i){var s;const r=t.OctaveShiftStart,a=r.ParentStartMultiExpression.Timestamp,o=null===(s=r.ParentEndMultiExpression)||void 0===s?void 0:s.Timestamp,l=this.rules.MinMeasureToDrawIndex,c=this.rules.MaxMeasureToDrawIndex;let h,u,f=this.graphicalMusicSheet.MeasureList[n][i].ParentStaffLine;if(f||(f=this.graphicalMusicSheet.MeasureList[l][i].ParentStaffLine),h=r.ParentEndMultiExpression?this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentEndMultiExpression.SourceMeasureParent,i):this.graphicalMusicSheet.getLastGraphicalMeasureFromIndex(i,!0),h.MeasureNumber>c+1&&(h=this.graphicalMusicSheet.getLastGraphicalMeasureFromIndex(i,!0)),u=r.ParentEndMultiExpression?this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentStartMultiExpression.SourceMeasureParent,i):this.graphicalMusicSheet.MeasureList[l][i],u.MeasureNumber<l+1&&(u=this.graphicalMusicSheet.MeasureList[l][i]),u.MeasureNumber<l+1||u.MeasureNumber>c+1||h.MeasureNumber<l+1||h.MeasureNumber>c+1)return;let p=h.ParentStaffLine;if(p||(p=f),h&&f&&p){const e=new g.VexFlowOctaveShift(r,f.PositionAndShape);if(!e.startNote){let t;for(const e of u.staffEntries)if(e){t=e;break}if(!t)return;if(e.setStartNote(t),!e.startNote)return}if(!e.endNote){let t;for(let e=h.staffEntries.length-1;e>=0;e++)if(h.staffEntries[e]){t=h.staffEntries[e];break}if(!t)return void(e.graphicalEndAtMeasureEnd=!0);if(e.setEndNote(t),!e.endNote)return}let t=u.findGraphicalStaffEntryFromTimestamp(a);t||(t=u.staffEntries[0]);let n=h.findGraphicalStaffEntryFromTimestamp(o);if(n||(n=h.staffEntries[h.staffEntries.length-1]),e.setStartNote(t),p!==f){e.endsOnDifferentStaffLine=!0;let s=this.findLastStafflineMeasure(f);void 0===s&&(s=h);const a=s.staffEntries[s.staffEntries.length-1];e.setEndNote(a),e.graphicalEndAtMeasureEnd=!0,e.endMeasure=s;const o=p.ParentMusicSystem.Id-f.ParentMusicSystem.Id;if(o>0)for(let e=f.ParentMusicSystem.Id;e<p.ParentMusicSystem.Id;e++){const t=e+1,s=this.musicSystems[t];let a;for(const e of s.StaffLines)if(e.ParentStaff.idInMusicSheet===i){a=e;break}if(!a)continue;const l=a.Measures[0],c=new g.VexFlowOctaveShift(r,l.PositionAndShape);let u=this.findLastStafflineMeasure(a);e<o-1&&(c.endsOnDifferentStaffLine=!0,c.graphicalEndAtMeasureEnd=!0,c.endMeasure=u);const f=l.staffEntries[0];let p=u.staffEntries[u.staffEntries.length-1];h.ParentStaffLine===a&&(u=h,p=n),1===p.graphicalVoiceEntries.length&&1===p.graphicalVoiceEntries[0].notes.length&&p.graphicalVoiceEntries[0].notes[0].sourceNote.isWholeMeasureNote()&&(c.graphicalEndAtMeasureEnd=!0,c.endMeasure=u);const m="VexFlowMusicSheetCalculator.calculateSingleOctaveShift: ";f||d.default.warn(m+"no firstNote found"),p||d.default.warn(m+"no lastNote found"),c.setStartNote(f),c.setEndNote(p),a.OctaveShifts.push(c),this.calculateOctaveShiftSkyBottomLine(f,p,c,a)}this.calculateOctaveShiftSkyBottomLine(t,a,e,f)}else e.setEndNote(n),this.calculateOctaveShiftSkyBottomLine(t,n,e,f);f.OctaveShifts.push(e)}else d.default.warn("End measure or staffLines for octave shift are undefined! This should not happen!")}findLastStafflineMeasure(e){for(let t=e.Measures.length-1;t>=0;t--){const n=e.Measures[t];if(n.staffEntries.length>0)return n}}calculateSinglePedal(e,t,n,i){var s;const r=t.PedalStart,a=r.ParentStartMultiExpression.Timestamp,o=null===(s=r.ParentEndMultiExpression)||void 0===s?void 0:s.Timestamp,l=this.rules.MinMeasureToDrawIndex,c=this.rules.MaxMeasureToDrawIndex;let h,u,f=this.graphicalMusicSheet.MeasureList[n][i].ParentStaffLine;if(f||(f=this.graphicalMusicSheet.MeasureList[l][i].ParentStaffLine),h=r.ParentEndMultiExpression?this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentEndMultiExpression.SourceMeasureParent,i):this.graphicalMusicSheet.getLastGraphicalMeasureFromIndex(i,!0),h.MeasureNumber>c+1&&(h=this.graphicalMusicSheet.getLastGraphicalMeasureFromIndex(i,!0)),r.ParentEndMultiExpression?u=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentStartMultiExpression.SourceMeasureParent,i):(u=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(r.ParentStartMultiExpression.SourceMeasureParent,i),u||(u=this.graphicalMusicSheet.MeasureList[l][i])),u.MeasureNumber<l+1&&(u=this.graphicalMusicSheet.MeasureList[l][i]),u.parentSourceMeasure.measureListIndex<l||u.parentSourceMeasure.measureListIndex>c||h.parentSourceMeasure.measureListIndex<l||h.parentSourceMeasure.measureListIndex>c)return;let p=h.ParentStaffLine;if(p||(p=f),h&&f&&p){let e=!1;f!==p&&(e=!0);const t=new P.VexFlowPedal(r,f.PositionAndShape,!1,e);t.setEndsStave(h,o);let n=u.findGraphicalStaffEntryFromTimestamp(a);n||(n=u.staffEntries[0]);let s=h.findGraphicalStaffEntryFromTimestamp(o);if(s||(s=h.staffEntries[h.staffEntries.length-1]),!t.setStartNote(n))return;if(t.setBeginsStave(t.startNote.isRest(),a),p!==f)if(t.pedalSymbol===N.MusicSymbol.PEDAL_SYMBOL){t.setEndNote(s),t.setEndMeasure(h),t.ReleaseText=" ",t.CalculateBoundingBox(),this.calculatePedalSkyBottomLine(t.startVfVoiceEntry,t.endVfVoiceEntry,t,f);const e=p.Measures[0],n=new P.VexFlowPedal(r,e.PositionAndShape);t.setEndsStave(h,o);const i=e.staffEntries[0];if(!n.setStartNote(i))return;n.setEndNote(s),n.setEndMeasure(h),t.setEndMeasure(h),p.Pedals.push(n),n.CalculateBoundingBox(),n.DepressText=" ",this.calculatePedalSkyBottomLine(n.startVfVoiceEntry,n.endVfVoiceEntry,n,p)}else{let e=this.findLastStafflineMeasure(f);void 0===e&&(e=h);const n=e.staffEntries[e.staffEntries.length-1];t.setEndNote(n),t.setEndMeasure(h),t.ChangeEnd=!1;const a=p.ParentMusicSystem.Id-f.ParentMusicSystem.Id;if(a>0){let e=1;for(let n=f.ParentMusicSystem.Id;n<p.ParentMusicSystem.Id;n++){const l=this.musicSystems[n+1].StaffLines[i],c=l.Measures[0];let u=!1,d=!1;e<a?u=!0:d=!0,e++;const f=new P.VexFlowPedal(r,c.PositionAndShape,!0,u);t.setEndsStave(h,o),f.ChangeBegin=!1,f.ChangeEnd=!!d&&r.ChangeEnd;let p=this.findLastStafflineMeasure(l);const m=c.staffEntries[0];let g=p.staffEntries[p.staffEntries.length-1];if(h.ParentStaffLine===l?(p=h,f.setEndMeasure(h),g=s):f.setEndMeasure(l.Measures.last()),!f.setStartNote(m))break;f.setEndNote(g),t.setEndMeasure(h),l.Pedals.push(f),f.CalculateBoundingBox(),this.calculatePedalSkyBottomLine(f.startVfVoiceEntry,f.endVfVoiceEntry,f,l)}}t.CalculateBoundingBox(),this.calculatePedalSkyBottomLine(t.startVfVoiceEntry,t.endVfVoiceEntry,t,f)}else t.setEndNote(s),t.setEndMeasure(h),t.CalculateBoundingBox(),this.calculatePedalSkyBottomLine(t.startVfVoiceEntry,t.endVfVoiceEntry,t,f);f.Pedals.push(t)}else d.default.warn("End measure or staffLines for pedal are undefined! This should not happen!")}calculatePedalSkyBottomLine(e,t,n,i){let s=null===t||void 0===t?void 0:t.PositionAndShape;s||(s=n.endMeasure.PositionAndShape);const r=h.default.Flow.PedalMarking.Styles,a=n.getPedalMarking(),o=a.line+3+(i.StaffLines.length-1),l=a.render_options.text_margin_right/10;let c,u=e.PositionAndShape.AbsolutePosition.x-l;a.style!==r.MIXED&&a.style!==r.MIXED_OPEN_END&&a.style!==r.TEXT||(u-=1);let d=i.StaffLines.length-1;for(const h of i.Pedals){const e=h.getPedalMarking().line+3+(i.StaffLines.length-1);d=Math.max(e,d)}if(n.EndSymbolPositionAndShape){const e=a.render_options.glyph_point_size/20;c=u+3.4;const t=s.AbsolutePosition.x-l,r=t+1.5;d=Math.max(i.SkyBottomLineCalculator.getBottomLineMaxInRange(u,c),d),d=Math.max(o+2*e,d);const h=i.SkyBottomLineCalculator.getBottomLineMaxInRange(t,r);n.DepressText||(d=Math.max(d,h)),n.setLine(d-3-(i.StaffLines.length-1)),i.SkyBottomLineCalculator.updateBottomLineInRange(u,c,d+e),i.SkyBottomLineCalculator.updateBottomLineInRange(t,r,d+e)}else{var f;const e=a.render_options.bracket_height/10;if(a.EndsStave)c=t?t.parentStaffEntry.parentMeasure.PositionAndShape.AbsolutePosition.x+t.parentStaffEntry.parentMeasure.PositionAndShape.Size.width-l:s.AbsolutePosition.x+s.Size.width;else switch(a.style){case r.BRACKET_OPEN_END:case r.BRACKET_OPEN_BOTH:case r.MIXED_OPEN_END:c=s.AbsolutePosition.x+s.BorderRight-l;break;default:c=s.AbsolutePosition.x+s.BorderLeft-l}const h=null===t||void 0===t||null===(f=t.parentStaffEntry)||void 0===f?void 0:f.vfClefBefore;if(h&&(c+=h.getWidth()/10),d=Math.max(i.SkyBottomLineCalculator.getBottomLineMaxInRange(u,c),d),d===1/0)return;if(d=Math.max(d,o+e),n.setLine(d-3-(i.StaffLines.length-1)),u>c){const e=c;c=u,u=e}i.SkyBottomLineCalculator.updateBottomLineInRange(u,c,d+e)}for(const h of i.Pedals){const e=h,t=e.getPedalMarking();if(d>t.line+3+(i.StaffLines.length-1)){var p;const n=t.render_options.text_margin_right/10;let s,o=e.startVfVoiceEntry.PositionAndShape.AbsolutePosition.x-n;e.setLine(d-3-(i.StaffLines.length-1));let l=null===(p=e.endVfVoiceEntry)||void 0===p?void 0:p.PositionAndShape;if(l||(l=e.endMeasure.PositionAndShape),e.EndSymbolPositionAndShape){const e=a.render_options.glyph_point_size/20;s=o+3.4;const t=l.AbsolutePosition.x-n,r=t+1.5;i.SkyBottomLineCalculator.updateBottomLineInRange(o,s,d+e),i.SkyBottomLineCalculator.updateBottomLineInRange(t,r,d+e)}else{var m;const c=t.render_options.bracket_height/10;if(t.EndsStave)s=l.AbsolutePosition.x+l.Size.width-n;else switch(a.style){case r.BRACKET_OPEN_END:case r.BRACKET_OPEN_BOTH:case r.MIXED_OPEN_END:s=l.AbsolutePosition.x+l.BorderRight-n;break;default:s=l.AbsolutePosition.x+l.BorderLeft-n}const h=null===(m=e.endVfVoiceEntry)||void 0===m||null===(m=m.parentStaffEntry)||void 0===m?void 0:m.vfClefBefore;if(h&&(s+=h.getWidth()/10),o>s){const e=o;o=s,s=e}i.SkyBottomLineCalculator.updateBottomLineInRange(o,s,d+c)}}}}calculateOctaveShiftSkyBottomLine(e,t,n,i){if(!t)return void d.default.warn("octaveshift: no endStaffEntry");let s=t.PositionAndShape;n.graphicalEndAtMeasureEnd&&(s=t.parentMeasure.PositionAndShape);let r=e.PositionAndShape.Size.width,a=s.Size.width;e.hasOnlyRests()?r=-r:r/=2,n.graphicalEndAtMeasureEnd||(t.hasOnlyRests()?a*=2:a/=2,e===t&&(a*=2));let o=e.PositionAndShape.AbsolutePosition.x-r,l=s.AbsolutePosition.x+a;if(o>l){const e=o;o=l,l=e}n.PositionAndShape.Size.width=l-o;const c=n.getTextBracket(),h=c.font.size/10;if(c.position===u.TextBracket.Positions.TOP){const e=Math.ceil(i.SkyBottomLineCalculator.getSkyLineMinInRange(o,l));if(e===1/0)return;c.start.getStave().options.top_text_position=Math.abs(e),i.SkyBottomLineCalculator.updateSkyLineInRange(o,l,e-2*h)}else{const e=i.SkyBottomLineCalculator.getBottomLineMaxInRange(o,l);if(e===1/0)return;c.start.getStave().options.bottom_text_position=e,i.SkyBottomLineCalculator.updateBottomLineInRange(o,l,e+1.5*h)}}calculateWordRepetitionInstruction(e,t){let n;const i=this.graphicalMusicSheet.MeasureList[t];for(let s=0,r=i.length;s<r;++s){const e=i[s];if(e&&e.ParentStaffLine&&e.ParentStaff.isVisible()){n=e;break}}n&&n.addWordRepetition(e)}calculateSkyBottomLines(){const e=k.CollectionUtil.flat(this.musicSystems.map((e=>e.StaffLines)));let t=0;for(const n of e)for(const e of n.Measures)e&&t++;if(this.rules.AlwaysSetPreferredSkyBottomLineBackendAutomatically&&this.rules.setPreferredSkyBottomLineBackendAutomatically(t),t>=this.rules.SkyBottomLineBatchMinMeasures)new o.SkyBottomLineBatchCalculator(e,this.rules.PreferredSkyBottomLineBatchCalculatorBackend).calculateLines();else for(const n of e)n.SkyBottomLineCalculator.calculateLines()}calculateExpressionAlignements(){for(const t of this.musicSystems)for(const n of t.StaffLines)try{n.AlignmentManager.alignDynamicExpressions(),n.AbstractExpressions.forEach((e=>{e.updateSkyBottomLine()}))}catch(e){}}handleTiedGraphicalNote(e,t,n,i,s,r,a,o){}handleBeam(e,t,n){e.parentVoiceEntry.parentStaffEntry.parentMeasure.handleBeam(e,t)}handleVoiceEntryLyrics(e,t,n){e.LyricsEntries.forEach(((e,i)=>{const s=new p.GraphicalLyricEntry(i,t,this.rules.LyricsHeight,this.rules.StaffHeight);if(t.LyricsEntries.push(s),s.GraphicalLabel.setLabelPositionAndShapeBorders(),i.Word){const e=i.Word.Syllables.indexOf(i);let t=n.indexOf(i.Word);if(-1===t&&(n.push(i.Word),t=n.indexOf(i.Word)),0===this.graphicalLyricWords.length||t>this.graphicalLyricWords.length-1){const t=new m.GraphicalLyricWord(i.Word);s.ParentLyricWord=t,t.GraphicalLyricsEntries[e]=s,this.graphicalLyricWords.push(t)}else{const i=this.graphicalLyricWords[t];s.ParentLyricWord=i,i.GraphicalLyricsEntries[e]=s,i.isFilled()&&(n.splice(t,1),this.graphicalLyricWords.splice(this.graphicalLyricWords.indexOf(i),1))}}}))}handleVoiceEntryOrnaments(e,t,n){}handleVoiceEntryArticulations(e,t,n){}handleVoiceEntryTechnicalInstructions(e,t,n){}handleTuplet(e,t,n){e.parentVoiceEntry.parentStaffEntry.parentMeasure.handleTuplet(e,t)}findIndexGraphicalSlurFromSlur(e,t){for(let n=0;n<e.length;n++)if(e[n].slur===t)return n;return-1}indexOfGraphicalGlissFromGliss(e,t){for(let n=0;n<e.length;n++)if(e[n].Glissando===t)return n;return-1}calculateSlurs(){const e={};for(const t of this.graphicalMusicSheet.MeasureList[0])e[t.ParentStaff.idInMusicSheet]=[];for(const t of this.musicSystems)for(const n of t.StaffLines){const t=e[n.ParentStaff.idInMusicSheet];for(let e=0;e<t.length;e++){const i=t[e],s=new y.GraphicalSlur(i.slur,this.rules);n.addSlurToStaffline(s),t[e]=s}for(const e of n.Measures)for(const i of e.staffEntries){for(const e of i.graphicalVoiceEntries)for(const s of e.notes)for(const e of s.sourceNote.NoteSlurs)if(e.EndNote&&e.StartNote){if(e.StartNote===s.sourceNote){const i=new y.GraphicalSlur(e,this.rules);t.push(i),n.addSlurToStaffline(i)}if(e.EndNote===s.sourceNote){const n=this.findIndexGraphicalSlurFromSlur(t,e);if(n>=0){const e=t[n];-1===e.staffEntries.indexOf(i)&&e.staffEntries.push(i),t.splice(n,1)}}}for(const e of t)-1===e.staffEntries.indexOf(i)&&e.staffEntries.push(i)}}for(const t of this.musicSystems)for(const e of t.StaffLines){const t=e.GraphicalSlurs.sort(y.GraphicalSlur.Compare);for(const e of t)e.slur.isCrossed()||e.calculateCurve(this.rules)}}calculateGlissandi(){const e={};for(const t of this.graphicalMusicSheet.MeasureList[0])e[t.ParentStaff.idInMusicSheet]=[];for(const t of this.musicSystems)for(const n of t.StaffLines){const t=e[n.ParentStaff.idInMusicSheet];for(let e=0;e<t.length;e++){const i=t[e],s=new L.VexFlowGlissando(i.Glissando);n.addGlissandoToStaffline(s),t[e]=s}for(const e of n.Measures)for(const i of e.staffEntries){for(const e of i.graphicalVoiceEntries)for(const s of e.notes){const e=s.sourceNote.NoteGlissando;if(null!==e&&void 0!==e&&e.EndNote&&null!==e&&void 0!==e&&e.StartNote){if(e.StartNote===s.sourceNote){const i=new L.VexFlowGlissando(e);t.push(i),n.addGlissandoToStaffline(i)}if(e.EndNote===s.sourceNote){const n=this.indexOfGraphicalGlissFromGliss(t,e);if(n>=0){const e=t[n];-1===e.staffEntries.indexOf(i)&&e.staffEntries.push(i),t.splice(n,1)}}}}for(const e of t)-1===e.staffEntries.indexOf(i)&&e.staffEntries.push(i)}}for(const t of this.musicSystems)for(const e of t.StaffLines)for(const t of e.GraphicalGlissandi)if(e.ParentStaff.isTab){const e=t.Glissando.StartNote,n=t.Glissando.EndNote,i=t.staffEntries[0].findGraphicalNoteFromNote(e),s=t.staffEntries.last().findGraphicalNoteFromNote(n);if(!i&&!s)return;let r,a,o,l,c=1;e.FretNumber>n.FretNumber&&(c=-1),i&&i.vfnote&&i.vfnote.length>=2&&(o=i.vfnote[0],r=[0]),s&&s.vfnote&&s.vfnote.length>=2&&(l=s.vfnote[0],a=[0]);const h=new u.TabSlide({first_indices:r,first_note:o,last_indices:a,last_note:l},c),d=null===i||void 0===i?void 0:i.parentVoiceEntry.parentStaffEntry.parentMeasure;d&&(d.vfTies.push(h),t.vfTie=h);const f=null===s||void 0===s?void 0:s.parentVoiceEntry.parentStaffEntry.parentMeasure;f&&(f.vfTies.push(h),t.vfTie=h)}}}t.VexFlowMusicSheetCalculator=I},813:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionUtil=void 0,Array.prototype.last||Object.defineProperty(Array.prototype,"last",{enumerable:!1,writable:!0,value:function(){return this[this.length-1]}}),Array.prototype.clear||Object.defineProperty(Array.prototype,"clear",{enumerable:!1,writable:!0,value:function(){this.length=0}}),Array.prototype.contains||Object.defineProperty(Array.prototype,"contains",{enumerable:!1,writable:!0,value:function(e){return-1!==this.indexOf(e)}}),t.CollectionUtil=class{static contains2(e,t){for(let n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}static last(e){return e[e.length-1]}static flat(e){return[].concat(...e)}static removeDictElementIfTrue(e,t,n){const i=[];t.forEach((function(t,s){n(e,t,s)&&i.push(t)}));for(let s=0;s<i.length;s++)t.remove(i[s])}static getLastElement(e){return e[e.length-1]}static binarySearch(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length-1,r=1,a=-1;for(;i<=s&&(r=Math.floor((i+s)/2),r!==a);){const o=n(e[r],t);if(0===o)return r;o<0&&(i=r+1),0<o&&(s=r),a=r}return-r}}},899:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(9490),t),s(n(1974),t),s(n(8927),t),s(n(1083),t),s(n(6438),t),s(n(995),t),s(n(2683),t),s(n(242),t),s(n(3661),t),s(n(9713),t),s(n(6659),t),s(n(953),t),s(n(1066),t),s(n(6711),t),s(n(98),t),s(n(5023),t),s(n(3361),t),s(n(8254),t),s(n(6452),t),s(n(2395),t),s(n(7751),t),s(n(1519),t),s(n(5748),t),s(n(1888),t),s(n(8724),t),s(n(3430),t),s(n(7741),t),s(n(2768),t),s(n(973),t),s(n(4022),t),s(n(348),t),s(n(9760),t),s(n(5054),t),s(n(4548),t),s(n(7225),t),s(n(7921),t),s(n(1932),t),s(n(512),t),s(n(5221),t),s(n(7066),t),s(n(8033),t),s(n(7624),t),s(n(8713),t),s(n(2779),t),s(n(2919),t),s(n(298),t),s(n(4284),t),s(n(67),t),s(n(6954),t),s(n(6723),t),s(n(7499),t)},953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalComment=void 0,t.GraphicalComment=class{constructor(e,t){this.label=e,this.settings=t}}},973:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalRectangle=void 0;const i=n(6438),s=n(7741);class r extends s.GraphicalObject{constructor(e,t,n,s){super(),this.boundingBox=new i.BoundingBox(this,n),this.boundingBox.RelativePosition=e,this.boundingBox.BorderRight=t.x-e.x,this.boundingBox.BorderBottom=t.y-e.y,this.style=s}}t.GraphicalRectangle=r},995:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Clickable=void 0;const i=n(7741);class s extends i.GraphicalObject{}t.Clickable=s},1066:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalContinuousDynamicExpression=void 0;const s=n(6452),r=n(5875),a=n(9409),o=n(9490),l=n(6362),c=i(n(3065));class h extends o.AbstractGraphicalExpression{constructor(e,t,n){super(t,e,n),this.lines=[],this.isSplittedPart=!1,this.notToBeRemoved=!1}get StartMeasure(){return this.startMeasure}set StartMeasure(e){this.startMeasure=e}get EndMeasure(){return this.endMeasure}set EndMeasure(e){this.endMeasure=e}get EndStaffLine(){return this.endMeasure?this.endMeasure.ParentStaffLine:void 0}get IsSplittedPart(){return this.isSplittedPart}set IsSplittedPart(e){this.isSplittedPart=e}get IsVerbal(){return this.ContinuousDynamic.Label&&this.ContinuousDynamic.Label.length>0}get NotToBeRemoved(){return this.notToBeRemoved}set NotToBeRemoved(e){this.notToBeRemoved=e}get Lines(){return this.lines}get ContinuousDynamic(){return this.SourceExpression}updateSkyBottomLine(){var e;const t=this.parentStaffLine.SkyBottomLineCalculator,n=this.IsVerbal?this.label.PositionAndShape.RelativePosition.x+this.label.PositionAndShape.BorderMarginLeft:0,i=this.IsVerbal?this.label.PositionAndShape.RelativePosition.x+this.label.PositionAndShape.BorderMarginRight:0;switch(!this.IsSoftAccent&&!this.IsVerbal&&this.lines.length<2&&c.default.warn("Not enough lines for SkyBottomLine calculation"),this.IsVerbal||this.ContinuousDynamic.DynamicType!==r.ContDynamicEnum.crescendo&&this.ContinuousDynamic.DynamicType!==r.ContDynamicEnum.diminuendo&&c.default.warn("GraphicalContinuousDynamicExpression.updateSkyBottomLine(): unhandled continuous dynamic type. start measure: "+(null===(e=this.startMeasure)||void 0===e?void 0:e.MeasureNumber)),this.Placement){case l.PlacementEnum.Above:if(this.IsSoftAccent)t.updateSkyLineWithWedge(this.lines[0].Start,this.lines[0].End),t.updateSkyLineWithWedge(this.lines[2].End,this.lines[2].Start),t.updateSkyLineWithLine(this.lines[0].End,this.lines[2].End,this.lines[0].End.y);else if(this.IsVerbal){const e=this.label.PositionAndShape.BorderMarginTop+this.label.PositionAndShape.RelativePosition.y;t.updateSkyLineInRange(n,i,e)}else this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?t.updateSkyLineWithWedge(this.lines[0].Start,this.lines[0].End):this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.diminuendo&&t.updateSkyLineWithWedge(this.lines[0].End,this.lines[0].Start);break;case l.PlacementEnum.Below:if(this.IsVerbal){const e=this.label.PositionAndShape.BorderMarginBottom+this.label.PositionAndShape.RelativePosition.y;t.updateBottomLineInRange(n,i,e)}else this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?t.updateBottomLineWithWedge(this.lines[1].Start,this.lines[1].End):this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.diminuendo&&t.updateBottomLineWithWedge(this.lines[1].End,this.lines[1].Start);break;default:c.default.error("Placement for GraphicalContinuousDynamicExpression is unknown")}}createCrescendoLines(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth;const r=new a.PointF2D(e,n),o=new a.PointF2D(t,n-i/2),l=new a.PointF2D(t,n+i/2);this.addWedgeLines(r,o,l,s)}createFirstHalfCrescendoLines(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeMeasureEndOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth;const r=new a.PointF2D(e,n),o=new a.PointF2D(t,n-i/2),l=new a.PointF2D(t,n+i/2);this.addWedgeLines(r,o,l,s)}createSecondHalfCrescendoLines(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeMeasureBeginOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeOpeningLength,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.rules.WedgeLineWidth;const o=new a.PointF2D(e,n-i/2),l=new a.PointF2D(e,n+i/2),c=new a.PointF2D(t,n-s/2),h=new a.PointF2D(t,n+s/2);this.addDoubleLines(o,c,l,h,r)}recalculateCrescendoLines(e,t,n){const i=Math.abs(this.lines[0].Start.y-this.lines[1].Start.y)>1e-4;this.lines.clear(),i?this.createSecondHalfCrescendoLines(e,t,n):this.isSplittedPart?this.createFirstHalfCrescendoLines(e,t,n):this.createCrescendoLines(e,t,n)}createDiminuendoLines(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth;const r=new a.PointF2D(e,n-i/2),o=new a.PointF2D(e,n+i/2),l=new a.PointF2D(t,n);this.addWedgeLines(l,r,o,s)}createFirstHalfDiminuendoLines(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeMeasureEndOpeningLength,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.rules.WedgeLineWidth;const o=new a.PointF2D(e,n-i/2),l=new a.PointF2D(e,n+i/2),c=new a.PointF2D(t,n-s/2),h=new a.PointF2D(t,n+s/2);this.addDoubleLines(o,c,l,h,r)}createSecondHalfDiminuendoLines(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeMeasureBeginOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth;const r=new a.PointF2D(e,n-i/2),o=new a.PointF2D(e,n+i/2),l=new a.PointF2D(t,n);this.addWedgeLines(l,r,o,s)}recalculateDiminuendoLines(e,t,n){const i=Math.abs(this.lines[0].End.y-this.lines[1].End.y)>1e-4;this.lines.clear(),i?this.createFirstHalfDiminuendoLines(e,t,n):this.isSplittedPart?this.createSecondHalfDiminuendoLines(e,t,n):this.createDiminuendoLines(e,t,n)}createFirstHalfLines(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeMeasureEndOpeningLength,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.rules.WedgeLineWidth;this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?this.createFirstHalfCrescendoLines(e,t,n,s,a):this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.diminuendo&&this.createFirstHalfDiminuendoLines(e,t,n,i,s,a)}createSecondHalfLines(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeMeasureBeginOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeOpeningLength,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.rules.WedgeLineWidth;this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?this.createSecondHalfCrescendoLines(e,t,n,i,s,a):this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.diminuendo&&this.createSecondHalfDiminuendoLines(e,t,n,i,a)}createLines(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.rules.WedgeOpeningLength,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.rules.WedgeLineWidth;this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?this.createCrescendoLines(e,t,n,i,s):this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.diminuendo&&this.createDiminuendoLines(e,t,n,i,s)}calcPsi(){this.IsVerbal?this.PositionAndShape.calculateBoundingBox():(this.PositionAndShape.RelativePosition=this.lines[0].Start,this.PositionAndShape.BorderMarginTop=this.lines[0].End.y-this.lines[0].Start.y,this.PositionAndShape.BorderMarginBottom=this.lines[1].End.y-this.lines[1].Start.y,this.PositionAndShape.Center.y=(this.PositionAndShape.BorderMarginTop+this.PositionAndShape.BorderMarginBottom)/2,this.IsSoftAccent?(this.PositionAndShape.BorderMarginLeft=0,this.PositionAndShape.BorderMarginRight=this.lines[3].Start.x-this.lines[0].Start.x):this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?(this.PositionAndShape.BorderMarginLeft=0,this.PositionAndShape.BorderMarginRight=this.lines[0].End.x-this.lines[0].Start.x):(this.PositionAndShape.BorderMarginLeft=this.lines[0].End.x-this.lines[0].Start.x,this.PositionAndShape.BorderMarginRight=0))}cleanUp(){this.lines.clear()}shiftYPosition(e){this.IsVerbal?(this.PositionAndShape.RelativePosition.y+=e,this.PositionAndShape.calculateBoundingBox()):(this.lines[0].Start.y+=e,this.lines[0].End.y+=e,this.lines[1].End.y+=e)}squeeze(e){this.IsVerbal||Math.abs(this.lines[0].End.x-this.lines[0].Start.x)<Math.abs(e)||(this.ContinuousDynamic.DynamicType===r.ContDynamicEnum.crescendo?e>0?this.lines[0].Start.x+=e:(this.lines[0].End.x+=e,this.lines[1].End.x+=e):e<0?this.lines[0].Start.x+=e:(this.lines[0].End.x+=e,this.lines[1].End.x+=e),this.calcPsi())}addWedgeLines(e,t,n,i){const r=new s.GraphicalLine(e,t,i),a=new s.GraphicalLine(e,n,i);this.rules.DefaultColorMusic&&(r.colorHex=this.rules.DefaultColorMusic,a.colorHex=this.rules.DefaultColorMusic),this.lines.push(r),this.lines.push(a)}addDoubleLines(e,t,n,i,r){const a=new s.GraphicalLine(e,t,r),o=new s.GraphicalLine(n,i,r);this.rules.DefaultColorMusic&&(a.colorHex=this.rules.DefaultColorMusic,o.colorHex=this.rules.DefaultColorMusic),this.lines.push(a),this.lines.push(o)}}t.GraphicalContinuousDynamicExpression=h},1083:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignmentManager=void 0;const i=n(2400),s=n(9409);t.AlignmentManager=class{constructor(e){this.parentStaffline=e,this.rules=this.parentStaffline.ParentMusicSystem.rules}alignDynamicExpressions(){const e=[];let t=new Array;for(let i=0;i<this.parentStaffline.AbstractExpressions.length-1;i++){var n,s;const r=this.parentStaffline.AbstractExpressions[i],a=this.parentStaffline.AbstractExpressions[i+1];if((null===r||void 0===r||null===(n=r.SourceExpression)||void 0===n?void 0:n.Placement)===(null===a||void 0===a||null===(s=a.SourceExpression)||void 0===s?void 0:s.Placement)){const n=this.getDistance(r.PositionAndShape,a.PositionAndShape);Math.abs(n.x)<this.rules.DynamicExpressionMaxDistance?(-1===t.indexOf(r)&&t.push(r),t.push(a)):(e.push(t),t=new Array)}}e.push(t);for(const r of e)if(r.length>0){const e=r.map((e=>e.PositionAndShape.Center.y)),t=Math.max(...e);for(let n=0;n<r.length;n++){const s=r[n],a=e[n]-t;if(s instanceof i.VexFlowContinuousDynamicExpression?(s.shiftYPosition(-a),s.calcPsi()):(s.PositionAndShape.RelativePosition.y-=.8*a,s.PositionAndShape.calculateBoundingBox()),s.squeeze){const e=n<r.length-1?r[n+1]:void 0,t=n>0?r[n-1]:void 0;if(e){const t=this.getOverlap(s.PositionAndShape,e.PositionAndShape);s.squeeze(-(t.x+this.rules.DynamicExpressionSpacer))}if(t){const e=this.getOverlap(t.PositionAndShape,s.PositionAndShape);s.squeeze(e.x+this.rules.DynamicExpressionSpacer)}}}}}getDistance(e,t){const n=e.RelativePosition.x+e.BorderMarginRight,i=t.RelativePosition.x+t.BorderMarginLeft,r=e.RelativePosition.y+e.BorderMarginBottom,a=t.RelativePosition.y+t.BorderMarginTop;return new s.PointF2D(i-n,a-r)}getOverlap(e,t){return new s.PointF2D(e.RelativePosition.x+e.BorderMarginRight-(t.RelativePosition.x+t.BorderMarginLeft),e.RelativePosition.y+e.BorderMarginBottom-(t.RelativePosition.y+t.BorderMarginTop))}}},1110:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicsContainer=void 0;const i=n(5875),s=n(2148);t.DynamicsContainer=class{constructor(e,t){e instanceof i.ContinuousDynamicExpression?this.continuousDynamicExpression=e:e instanceof s.InstantaneousDynamicExpression&&(this.instantaneousDynamicExpression=e),this.staffNumber=t}static Compare(e,t){return e.parMultiExpression().AbsoluteTimestamp.CompareTo(t.parMultiExpression().AbsoluteTimestamp)}parMultiExpression(){return this.continuousDynamicExpression?this.continuousDynamicExpression.StartMultiExpression:this.instantaneousDynamicExpression?this.instantaneousDynamicExpression.ParentMultiExpression:void 0}}},1112:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnknownExpression=void 0;const i=n(6362),s=n(7533);class r extends i.AbstractExpression{constructor(e,t,n,i){super(t),this.label=e,this.staffNumber=i,void 0===n&&(n=s.TextAlignmentEnum.LeftBottom),this.textAlignment=n}get Label(){return this.label}get Placement(){return this.placement}set Placement(e){this.placement=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get TextAlignment(){return this.textAlignment}}t.UnknownExpression=r},1121:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(9024),t),s(n(474),t)},1216:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowGlissando=void 0;const i=n(98);class s extends i.GraphicalGlissando{}t.VexFlowGlissando=s},1272:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstrumentReader=void 0;const s=n(469),r=n(2369),a=n(164),o=n(4543),l=n(9288),c=n(2561),h=n(9767),u=n(7307),d=n(164),f=n(9288),p=n(4543),m=i(n(3065)),g=n(164),b=n(9536),v=n(5984),y=n(3186),x=n(1336),S=n(5282),w=n(6954);t.InstrumentReader=class{constructor(e,t,n,i){this.voiceGeneratorsDict={},this.staffMainVoiceGeneratorDict={},this.divisions=0,this.currentClefNumber=1,this.currentXmlMeasureIndex=0,this.activeKeyHasBeenInitialized=!1,this.abstractInstructions=[],this.repetitionInstructionReader=t,this.xmlMeasureList=n,this.musicSheet=i.GetMusicSheet,this.instrument=i,this.activeClefs=new Array(i.Staves.length),this.activeClefsHaveBeenInitialized=new Array(i.Staves.length);for(let s=0;s<i.Staves.length;s++)this.activeClefsHaveBeenInitialized[s]=!1;this.createExpressionGenerators(i.Staves.length),this.slurReader=new y.SlurReader(this.musicSheet),this.pluginManager=e}get ActiveKey(){return this.activeKey}get MaxTieNoteFraction(){return this.maxTieNoteFraction}get ActiveRhythm(){return this.activeRhythm}set ActiveRhythm(e){this.activeRhythm=e}readNextXmlMeasure(e,t,n){if(this.currentXmlMeasureIndex>=this.xmlMeasureList.length)return!1;this.currentMeasure=e,this.followingMultirestMeasures=Math.max(this.followingMultirestMeasures-1,0),this.inSourceMeasureInstrumentIndex=this.musicSheet.getGlobalStaffIndexOfFirstStaff(this.instrument),this.repetitionInstructionReader&&this.repetitionInstructionReader.prepareReadingMeasure(e,this.currentXmlMeasureIndex);let i=new c.Fraction(0,1),s=new c.Fraction(0,1),r=!1;this.maxTieNoteFraction=new c.Fraction(0,1);let a=!1;try{var o;const g=this.xmlMeasureList[this.currentXmlMeasureIndex],v=g.elements();let y;e.Rules.UseXMLMeasureNumbers&&!Number.isInteger(e.MeasureNumberXML)&&(y=parseInt(null===(o=g.attribute("number"))||void 0===o?void 0:o.value,10),Number.isInteger(y)&&(e.MeasureNumberXML=y));const x=g.attribute("osmdWidthFactor");if(x){const t=Number.parseFloat(x.value);"number"!=typeof t||isNaN(t)?m.default.info("xml parse: osmdWidthFactor invalid for measure ".concat(y)):e.WidthFactor=t}let S;for(let o=0;o<v.length;o++){const g=v[o];if(o>0&&(S=v[o-1]),"print"===g.name){const t=g.attribute("new-system");"yes"===(null===t||void 0===t?void 0:t.value)&&(e.printNewSystemXml=!0);const n=g.attribute("new-page");"yes"===(null===n||void 0===n?void 0:n.value)&&(e.printNewPageXml=!0)}else if("attributes"===g.name){const t=g.element("divisions");if(t&&(this.divisions=parseInt(t.value,10),isNaN(this.divisions))){const e=h.ITextTranslation.translateText("ReaderErrorMessages/DivisionError","Invalid divisions value at Instrument: ");if(m.default.debug("InstrumentReader.readNextXmlMeasure",e),this.divisions=this.readDivisionsFromNotes(),!(this.divisions>0))throw r=!0,new u.MusicSheetReadingException(e+this.instrument.Name);this.musicSheet.SheetErrors.push(e+this.instrument.Name)}if(!g.element("divisions")&&0===this.divisions&&0===this.currentXmlMeasureIndex){const e=h.ITextTranslation.translateText("ReaderErrorMessages/DivisionError","Invalid divisions value at Instrument: ");if(this.divisions=this.readDivisionsFromNotes(),!(this.divisions>0))throw r=!0,new u.MusicSheetReadingException(e+this.instrument.Name);this.musicSheet.SheetErrors.push(e+this.instrument.Name)}this.addAbstractInstruction(g,n,S,i.clone()),i.Equals(new c.Fraction(0,1))&&this.isAttributesNodeAtBeginOfMeasure(this.xmlMeasureList[this.currentXmlMeasureIndex],g)&&this.saveAbstractInstructionList(this.instrument.Staves.length,!0),this.isAttributesNodeAtEndOfMeasure(this.xmlMeasureList[this.currentXmlMeasureIndex],g,i)&&this.saveClefInstructionAtEndOfMeasure();const s=g.elements("staff-details");for(const e of s){const t=e.element("staff-lines");if(t){let n=1;const i=e.attribute("number");i&&(n=parseInt(i.value,10)),this.instrument.Staves[n-1].StafflineCount=parseInt(t.value,10)}}const a=g.element("measure-style");if(a){const t=a.element("multiple-rest");if(t){const n=t.value;let i=0;try{i=Number.parseInt(n,10),void 0!==e.multipleRestMeasures&&i!==e.multipleRestMeasures?e.multipleRestMeasures=0:(e.multipleRestMeasures=i,this.currentMultirestStartMeasure=e,this.followingMultirestMeasures=i+1)}catch(e){console.log("multirest parse error: "+e)}}}}else if("note"===g.name){var l;let e=!0;"no"===(null===(l=g.attribute("print-object"))||void 0===l?void 0:l.value)&&(e=!1);const r=this.getNoteStaff(g);this.currentStaff=this.instrument.Staves[r-1];const o=void 0!==g.element("chord");if(g.element("voice")){const e=parseInt(g.element("voice").value,10);this.currentVoiceGenerator=this.getOrCreateVoiceGenerator(e,r-1)}else o&&this.currentVoiceGenerator||(this.currentVoiceGenerator=this.getOrCreateVoiceGenerator(1,r-1));let u,f=0,p=new c.Fraction(0,1),b=2;const v=void 0!==g.element("rest");if(g.element("duration")){var d;if(f=parseInt(g.element("duration").value,10),isNaN(f)){const e=h.ITextTranslation.translateText("ReaderErrorMessages/NoteDurationError","Invalid Note Duration.");this.musicSheet.SheetErrors.pushMeasureError(e),m.default.debug("InstrumentReader.readNextXmlMeasure",e);continue}if(p=new c.Fraction(f,4*this.divisions),v&&p.RealValue>(null===(d=this.ActiveRhythm)||void 0===d?void 0:d.Rhythm.RealValue)&&(p=this.ActiveRhythm.Rhythm.clone()),0===f?p=this.getNoteDurationFromTypeNode(g):u=this.getNoteDurationFromTypeNode(g),g.element("time-modification")){p=this.getNoteDurationForTuplet(g);const e=g.element("time-modification");(null===e||void 0===e?void 0:e.element("normal-notes"))&&(b=parseInt(e.element("normal-notes").value,10))}}const y=g.combinedElement("notations"),x=void 0!==g.element("grace")||0===f||o&&a;let S=!1,w=!1;if(x){const e=g.element("grace");e&&e.attributes()&&e.attribute("slash")&&"yes"===e.attribute("slash").value&&(S=!0),p=this.getNoteDurationFromTypeNode(g),y&&y.element("slur")&&(w=!0)}const[E,_]=this.getCueNoteAndNoteTypeXml(g),[T,M,C]=this.getStemDirectionAndColors(g);let A,P=!1;if(y){const e=y.element("ornaments");e&&(A=this.getTremoloInfo(e),P=this.getVibratoStrokes(e))}const N=o?s.clone():i.clone();this.currentStaffEntry=this.currentMeasure.findOrCreateStaffEntry(N,this.inSourceMeasureInstrumentIndex+r-1,this.currentStaff).staffEntry,(!this.currentVoiceGenerator.hasVoiceEntry()||!o&&!x&&!a||x&&!a||x&&!o||!x&&a)&&this.currentVoiceGenerator.createVoiceEntry(N,this.currentStaffEntry,!x,x,S,w),x||o||(s=i.clone(),i.Add(p)),o&&void 0!==this.currentStaffEntry&&this.currentStaffEntry.ParentStaff!==this.currentStaff&&(this.currentStaffEntry=this.currentVoiceGenerator.checkForStaffEntryLink(this.inSourceMeasureInstrumentIndex+r-1,this.currentStaff,this.currentStaffEntry,this.currentMeasure));const k=void 0!==this.currentStaffEntry&&void 0!==this.currentStaffEntry.Timestamp&&this.currentStaffEntry.Timestamp.Equals(new c.Fraction(0,1))&&!this.currentStaffEntry.hasNotes();this.saveAbstractInstructionList(this.instrument.Staves.length,k),this.activeRhythm;const L=g.elements("dot").length;if(this.currentVoiceGenerator.read(g,p,u,_,b,v,this.currentStaffEntry,this.currentMeasure,t,this.maxTieNoteFraction,o,n,e,E,x,T,A,M,C,P,L),void 0!==y&&y.element("dynamics")){const e=this.expressionReaders[this.readExpressionStaffNumber(g)-1];e&&(e.readExpressionParameters(g,this.instrument,this.divisions,i,s,this.currentMeasure.MeasureNumber,!1),e.read(g,this.currentMeasure,s))}a=x}else if("forward"===g.name){const e=parseInt(g.element("duration").value,10);i.Add(new c.Fraction(e,4*this.divisions))}else if("backup"===g.name){const e=parseInt(g.element("duration").value,10);i.Sub(new c.Fraction(e,4*this.divisions)),i.IsNegative()&&(i=new c.Fraction(0,1)),s.Sub(new c.Fraction(e,4*this.divisions)),s.IsNegative()&&(s=new c.Fraction(0,1))}else if("direction"===g.name){const e=g.element("direction-type");let t=Math.min(1,i.RealValue);void 0!==this.activeRhythm&&this.activeRhythm.Rhythm&&(t/=this.activeRhythm.Rhythm.RealValue);let n=!1;if(this.repetitionInstructionReader&&(n=this.repetitionInstructionReader.handleRepetitionInstructionsFromWordsOrSymbols(e,t)),!n){let t=this.expressionReaders[0];const n=this.readExpressionStaffNumber(g)-1;n<this.expressionReaders.length&&(t=this.expressionReaders[n]),t&&(e.element("octave-shift")&&(t.readExpressionParameters(g,this.instrument,this.divisions,i,s,this.currentMeasure.MeasureNumber,!0),t.addOctaveShift(g,this.currentMeasure,s.clone())),e.element("pedal")&&(t.readExpressionParameters(g,this.instrument,this.divisions,i,s,this.currentMeasure.MeasureNumber,!0),t.addPedalMarking(g,this.currentMeasure,i.clone())),t.readExpressionParameters(g,this.instrument,this.divisions,i,s,this.currentMeasure.MeasureNumber,!1),t.read(g,this.currentMeasure,i,s.clone()))}}else if("barline"===g.name){var f;this.repetitionInstructionReader&&this.repetitionInstructionReader.handleLineRepetitionInstructions(g)&&(this.currentMeasure.HasEndLine=!0);const e=g.attribute("location"),t=null!==(f=null===e||void 0===e?void 0:e.value)&&void 0!==f?f:"right";if(o===v.length-1||"right"===t){var p;const e=null===(p=g.element("bar-style"))||void 0===p?void 0:p.value;e&&(this.currentMeasure.endingBarStyleXml=e,this.currentMeasure.endingBarStyleEnum=w.SystemLinesEnumHelper.xmlBarlineStyleToSystemLinesEnum(e))}}else if("sound"===g.name)try{if(g.attribute("tempo")){const e=parseFloat(g.attribute("tempo").value);0===this.currentXmlMeasureIndex&&(this.musicSheet.DefaultStartTempoInBpm=e,this.musicSheet.HasBPMInfo=!0)}}catch(e){m.default.debug("InstrumentReader.readTempoInstruction",e)}else if("harmony"===g.name){const e=this.getNoteStaff(g);this.currentStaff=this.instrument.Staves[e-1];const t=i.clone();this.currentStaffEntry=this.currentMeasure.findOrCreateStaffEntry(t,this.inSourceMeasureInstrumentIndex+e-1,this.currentStaff).staffEntry,this.currentStaffEntry.ChordContainers.push(b.ChordSymbolReader.readChordSymbol(g,this.musicSheet,this.activeKey))}}for(const e in this.voiceGeneratorsDict)this.voiceGeneratorsDict.hasOwnProperty(e)&&this.voiceGeneratorsDict[e].checkForOpenBeam();if(this.currentXmlMeasureIndex===this.xmlMeasureList.length-1){for(let e=0;e<this.instrument.Staves.length;e++)this.activeClefsHaveBeenInitialized[e]||this.createDefaultClefInstruction(this.musicSheet.getGlobalStaffIndexOfFirstStaff(this.instrument)+e);this.activeKeyHasBeenInitialized||this.createDefaultKeyInstruction();for(let e=0;e<this.expressionReaders.length;e++){const t=this.expressionReaders[e];t&&t.closeOpenExpressions(this.currentMeasure,i)}}this.musicSheet.HasBPMInfo?0===e.TempoInBPM&&this.previousMeasure&&(this.currentMeasure.TempoInBPM=this.previousMeasure.TempoInBPM):this.currentMeasure.TempoInBPM=120}catch(e){if(r)throw new u.MusicSheetReadingException(e.Message);const t=h.ITextTranslation.translateText("ReaderErrorMessages/MeasureError","Error while reading Measure.");this.musicSheet.SheetErrors.pushMeasureError(t),m.default.debug("InstrumentReader.readNextXmlMeasure",t,e)}return this.previousMeasure=this.currentMeasure,this.currentXmlMeasureIndex+=1,!0}getStemDirectionAndColors(e){let t,n=x.StemDirectionType.Undefined;const i=e.element("stem");if(i){n=this.getStemDirectionType(i);const e=i.attribute("color");e&&(t=this.parseXmlColor(e.value))}let s=this.getNoteHeadColorXml(e);const r=this.getNoteColorXml(e);return r&&!s&&(s=r),r&&!t&&(t=r),[n,t,s]}parseXmlColor(e){return e}doCalculationsAfterDurationHasBeenSet(){for(const e in this.voiceGeneratorsDict)this.voiceGeneratorsDict.hasOwnProperty(e)&&this.voiceGeneratorsDict[e].checkOpenTies()}getOrCreateVoiceGenerator(e,t){const n=this.instrument.Staves[t];let i=this.voiceGeneratorsDict[e];if(i)-1===n.Voices.indexOf(i.GetVoice)&&n.Voices.push(i.GetVoice);else{const r=this.staffMainVoiceGeneratorDict[t];r?(i=new s.VoiceGenerator(this.pluginManager,n,e,this.slurReader,r.GetVoice),n.Voices.push(i.GetVoice),this.voiceGeneratorsDict[e]=i):(i=new s.VoiceGenerator(this.pluginManager,n,e,this.slurReader),n.Voices.push(i.GetVoice),this.voiceGeneratorsDict[e]=i,this.staffMainVoiceGeneratorDict[t]=i)}return i}createExpressionGenerators(e){this.expressionReaders=new Array(e);for(let t=0;t<e;t++)this.expressionReaders[t]=new v.ExpressionReader(this.musicSheet,this.instrument,t+1)}createDefaultClefInstruction(e){let t;t=this.musicSheet.SourceMeasures.length>0?this.musicSheet.SourceMeasures[0]:this.currentMeasure;const n=new a.ClefInstruction(d.ClefEnum.G,0,2);let i;t.FirstInstructionsStaffEntries[e]?(i=t.FirstInstructionsStaffEntries[e],i.removeFirstInstructionOfTypeClefInstruction()):(i=new r.SourceStaffEntry(void 0,void 0),t.FirstInstructionsStaffEntries[e]=i),n.Parent=i,i.Instructions.splice(0,0,n)}createDefaultKeyInstruction(){let e;e=this.musicSheet.SourceMeasures.length>0?this.musicSheet.SourceMeasures[0]:this.currentMeasure;const t=new o.KeyInstruction(void 0,0,p.KeyEnum.major);for(let n=this.inSourceMeasureInstrumentIndex;n<this.inSourceMeasureInstrumentIndex+this.instrument.Staves.length;n++)if(e.FirstInstructionsStaffEntries[n]){const i=e.FirstInstructionsStaffEntries[n];t.Parent=i,i.removeFirstInstructionOfTypeKeyInstruction(),i.Instructions[0]instanceof a.ClefInstruction?i.Instructions.splice(1,0,t):i.Instructions.splice(0,0,t)}else{const i=new r.SourceStaffEntry(void 0,void 0);e.FirstInstructionsStaffEntries[n]=i,t.Parent=i,i.Instructions.push(t)}}isAttributesNodeAtBeginOfMeasure(e,t){const n=e.elements(),i=n.indexOf(t);if(i>0&&"backup"===n[i-1].name)return!0;let s=-1;for(let r=0;r<n.length;r++)if("note"===n[r].name){s=r;break}return i<s&&s>0||s<0}isAttributesNodeAtEndOfMeasure(e,t,n){var i;if(n.Equals(null===(i=this.ActiveRhythm)||void 0===i?void 0:i.Rhythm))return!0;const s=e.elements().slice();let r=0;for(let o=0;o<s.length;o++)if(s[o]===t){r=o;break}let a=0;for(let o=r;o<s.length;o++)if("note"===s[o].name){a=o;break}return r>a}getNoteDurationFromTypeNode(e){const t=e.element("type");if(t){const e=t.value;return S.NoteTypeHandler.getNoteDurationFromType(e)}return new c.Fraction(0,4*this.divisions)}addAbstractInstruction(e,t,n,i){if(e.element("divisions")&&1===e.elements().length)return;const s=e.element("transpose");if(s){const e=s.element("chromatic");e&&(this.instrument.PlaybackTranspose=parseInt(e.value,10))}const r=e.elements("clef");let u;if(r.length>0)for(let o=0,l=r.length;o<l;++o){const t=r[o];let n=d.ClefEnum.G,s=2,l=1,c=0;const f=t.element("line");if(f)try{s=parseInt(f.value,10)}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/ClefLineError","Invalid clef line. Using default."),this.musicSheet.SheetErrors.pushMeasureError(u),s=2,m.default.debug("InstrumentReader.addAbstractInstruction",u,e)}const p=t.element("sign");if(p)try{n=d.ClefEnum[p.value],a.ClefInstruction.isSupportedClef(n)||(u=h.ITextTranslation.translateText("ReaderErrorMessages/ClefError","Unsupported clef. Using default."),this.musicSheet.SheetErrors.pushMeasureError(u),n=d.ClefEnum.G,s=2),n===d.ClefEnum.TAB&&(c=-1)}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/ClefError","Invalid clef. Using default."),this.musicSheet.SheetErrors.pushMeasureError(u),n=d.ClefEnum.G,s=2,m.default.debug("InstrumentReader.addAbstractInstruction",u,e)}const g=t.element("clef-octave-change");if(g)try{c=parseInt(g.value,10)}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/ClefOctaveError","Invalid clef octave. Using default."),this.musicSheet.SheetErrors.pushMeasureError(u),c=0}if(t.hasAttributes&&t.attribute("number"))try{l=parseInt(t.attribute("number").value,10),l>this.currentClefNumber&&(l=this.currentClefNumber),this.currentClefNumber=l+1}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/ClefError","Invalid clef. Using default."),this.musicSheet.SheetErrors.pushMeasureError(u),l=1,this.currentClefNumber=l+1}const b=new a.ClefInstruction(n,c,s);this.abstractInstructions.push([l,b,i])}if(void 0!==e.element("key")&&this.instrument.MidiInstrumentId!==g.MidiInstrument.Percussion){let t=0;const n=e.element("key").element("fifths");if(n)try{t=parseInt(n.value,10)}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/KeyError","Invalid key. Set to default."),this.musicSheet.SheetErrors.pushMeasureError(u),t=0,m.default.debug("InstrumentReader.addAbstractInstruction",u,e)}let s=p.KeyEnum.none,r=e.element("key");if(r&&(r=r.element("mode")),r)try{s=p.KeyEnum[r.value]}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/KeyError","Invalid key/mode. Set to default."),this.musicSheet.SheetErrors.pushMeasureError(u),s=p.KeyEnum.major,m.default.debug("InstrumentReader.addAbstractInstruction",u,e)}const a=new o.KeyInstruction(void 0,t,s);this.abstractInstructions.push([1,a,i])}if(e.element("time")){const t=e.element("time");let n=f.RhythmSymbolEnum.NONE,s=!0;if(void 0!==t&&t.hasAttributes){const e=t.attribute("symbol");e&&("common"===e.value?n=f.RhythmSymbolEnum.COMMON:"cut"===e.value&&(n=f.RhythmSymbolEnum.CUT));const i=t.attribute("print-object");i&&"no"===i.value&&(s=!1)}let r=0,a=0;const o=t&&void 0!==t.element("senza-misura"),d=e.elements("time"),p=[],g=[];for(let e=0,i=d.length;e<i;++e){const t=d[e];p.push.apply(p,t.elements("beats")),g.push.apply(g,t.elements("beat-type"))}if(o)this.abstractInstructions.push([1,new l.RhythmInstruction(new c.Fraction(4,4,0,!1),f.RhythmSymbolEnum.NONE),i]);else{try{if(void 0!==p&&p.length>0&&void 0!==g&&p.length===g.length){const e=p.length,t=new Array(e);let n=0;for(let i=0;i<e;i++){const e=p[i].value;let s=0,r=0;if(-1!==e.indexOf("+")){const t=e.split("+");for(let e=0,n=t.length;e<n;++e)s+=parseInt(t[e],10)}else s=parseInt(e,10);r=parseInt(g[i].value,10),n=Math.max(n,r),t[i]=new c.Fraction(s,r,0,!1)}for(let i=0;i<e;i++)t[i].Denominator===n?r+=t[i].Numerator:r+=n/t[i].Denominator*t[i].Numerator;a=n}else r=parseInt(e.element("time").element("beats").value,10),a=parseInt(e.element("time").element("beat-type").value,10)}catch(e){u=h.ITextTranslation.translateText("ReaderErrorMessages/RhythmError","Invalid rhythm. Set to default."),this.musicSheet.SheetErrors.pushMeasureError(u),r=4,a=4,m.default.debug("InstrumentReader.addAbstractInstruction",u,e)}const t=new l.RhythmInstruction(new c.Fraction(r,a,0,!1),n);t.PrintObject=s,this.abstractInstructions.push([1,t,i])}}}saveAbstractInstructionList(e,t){for(let n=this.abstractInstructions.length-1;n>=0;n--){const i=this.abstractInstructions[n],s=i[0],c=i[1],h=i[2];if(c instanceof a.ClefInstruction){const e=c;if(0===this.currentXmlMeasureIndex||s<=this.activeClefs.length&&e!==this.activeClefs[s-1])if(t||void 0===this.currentStaffEntry||this.currentStaffEntry.hasNotes()||s-1!==this.instrument.Staves.indexOf(this.currentStaffEntry.ParentStaff))if(t){if(0!==h.RealValue)continue;let t;if(this.currentMeasure){const i=e,o=this.inSourceMeasureInstrumentIndex+s-1,l=this.currentMeasure.FirstInstructionsStaffEntries[o];if(0===this.currentXmlMeasureIndex)if(l)if(void 0===this.currentMeasure.FirstInstructionsStaffEntries[o]||l.Instructions[0]instanceof a.ClefInstruction){const e=new r.SourceStaffEntry(void 0,void 0);this.currentMeasure.LastInstructionsStaffEntries[o]=e,i.Parent=e,e.Instructions.push(i)}else t=l,i.Parent=t,t.removeFirstInstructionOfTypeClefInstruction(),t.Instructions.splice(0,0,i),this.activeClefsHaveBeenInitialized[s-1]=!0;else t=new r.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[o]=t,i.Parent=t,t.Instructions.push(i),this.activeClefsHaveBeenInitialized[s-1]=!0;else if(this.activeClefsHaveBeenInitialized[s-1]){let e=this.previousMeasure;this.followingMultirestMeasures>0&&this.currentMeasure.Rules.RenderMultipleRestMeasures&&(e=this.currentMultirestStartMeasure);const t=new r.SourceStaffEntry(void 0,void 0);e.LastInstructionsStaffEntries[o]=t,i.Parent=t,t.Instructions.push(i)}else{const e=this.musicSheet.SourceMeasures[0];e.FirstInstructionsStaffEntries[o]?(t=e.FirstInstructionsStaffEntries[o],t.removeFirstInstructionOfTypeClefInstruction()):t=new r.SourceStaffEntry(void 0,void 0),i.Parent=t,t.Instructions.splice(0,0,i),this.activeClefsHaveBeenInitialized[s-1]=!0}this.activeClefs[s-1]=e,this.abstractInstructions.splice(n,1)}}else{let t;const i=this.activeRhythm.Rhythm;i.RealValue>0&&h.RealValue/i.RealValue>.9&&i.RealValue!==h.RealValue&&(this.currentMeasure.LastInstructionsStaffEntries[s-1]||(this.currentMeasure.LastInstructionsStaffEntries[s-1]=new r.SourceStaffEntry(void 0,this.instrument.Staves[s-1])),t=this.currentMeasure.LastInstructionsStaffEntries[s-1]),t&&(e.Parent=t,t.Instructions.push(e),this.activeClefs[s-1]=e,this.abstractInstructions.splice(n,1))}else{const t=e,i=this.currentStaffEntry;if(h&&Math.abs(h.RealValue-i.Timestamp.RealValue)>.01)continue;t.Parent=i,i.removeFirstInstructionOfTypeClefInstruction(),i.Instructions.push(t),this.activeClefs[s-1]=e,this.abstractInstructions.splice(n,1)}else s<=this.activeClefs.length&&e===this.activeClefs[s-1]&&this.abstractInstructions.splice(n,1)}if(c instanceof o.KeyInstruction){const t=c;if(this.activeKey&&this.activeKey.Key===t.Key)this.abstractInstructions.splice(n,1);else{let i;if(this.activeKey=t,this.abstractInstructions.splice(n,1),this.activeKeyHasBeenInitialized?i=this.currentMeasure:(this.activeKeyHasBeenInitialized=!0,i=this.currentXmlMeasureIndex>0?this.musicSheet.SourceMeasures[0]:this.currentMeasure),i)for(let n=this.inSourceMeasureInstrumentIndex;n<this.inSourceMeasureInstrumentIndex+e;n++){const e=t;if(i.FirstInstructionsStaffEntries[n]){const t=i.FirstInstructionsStaffEntries[n];e.Parent=t,t.removeFirstInstructionOfTypeKeyInstruction(),0===t.Instructions.length?t.Instructions.push(e):t.Instructions[0]instanceof a.ClefInstruction?t.Instructions.splice(1,0,e):t.Instructions.splice(0,0,e)}else{const t=new r.SourceStaffEntry(void 0,void 0);i.FirstInstructionsStaffEntries[n]=t,e.Parent=t,t.Instructions.push(e)}}}}if(c instanceof l.RhythmInstruction){const t=c;if(this.activeRhythm&&this.activeRhythm===t)this.abstractInstructions.splice(n,1);else if(this.activeRhythm=t,this.abstractInstructions.splice(n,1),this.currentMeasure)for(let n=this.inSourceMeasureInstrumentIndex;n<this.inSourceMeasureInstrumentIndex+e;n++){const e=t;let i;this.currentMeasure.FirstInstructionsStaffEntries[n]?(i=this.currentMeasure.FirstInstructionsStaffEntries[n],i.removeFirstInstructionOfTypeRhythmInstruction()):(i=new r.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[n]=i),e.Parent=i,i.Instructions.push(e)}}}}saveClefInstructionAtEndOfMeasure(){for(let e=this.abstractInstructions.length-1;e>=0;e--){const t=this.abstractInstructions[e][0],n=this.abstractInstructions[e][1];if(n instanceof a.ClefInstruction){const i=n;if(!this.activeClefs[t-1]||i.ClefType!==this.activeClefs[t-1].ClefType||i.ClefType===this.activeClefs[t-1].ClefType&&i.Line!==this.activeClefs[t-1].Line){const n=new r.SourceStaffEntry(void 0,void 0);this.currentMeasure.LastInstructionsStaffEntries[this.inSourceMeasureInstrumentIndex+t-1]=n;const s=i;s.Parent=n,n.Instructions.push(s),this.activeClefs[t-1]=i,this.abstractInstructions.splice(e,1)}}}}getNoteDurationForTuplet(e){const t=e.element("duration"),n=Number.parseInt(t.value,10);return new c.Fraction(n,4*this.divisions)}readExpressionStaffNumber(e){let t=1;if(e.element("staff")){const n=e.element("staff");if(n)try{t=parseInt(n.value,10)}catch(e){const n=h.ITextTranslation.translateText("ReaderErrorMessages/ExpressionStaffError","Invalid Expression staff number. Set to default.");this.musicSheet.SheetErrors.pushMeasureError(n),t=1,m.default.debug("InstrumentReader.readExpressionStaffNumber",n,e)}}return t}readDivisionsFromNotes(){let e=0,t=this.currentXmlMeasureIndex,n=!1;for(;!n;){const i=this.xmlMeasureList[t].elements();for(let t=0,s=i.length;t<s;++t){const s=i[t];if("note"===s.name&&!s.element("time-modification")){const t=s.element("duration"),n=s.element("type");if(void 0!==t&&n){const i=n.value;let s=0;try{s=parseInt(t.value,10)}catch(e){m.default.debug("InstrumentReader.readDivisionsFromNotes",e);continue}switch(i){case"1024th":e=s/4*1024;break;case"512th":e=s/4*512;break;case"256th":e=s/4*256;break;case"128th":e=s/4*128;break;case"64th":e=s/4*64;break;case"32nd":e=s/4*32;break;case"16th":e=s/4*16;break;case"eighth":e=s/4*8;break;case"quarter":e=s/4*4;break;case"half":e=s/4*2;break;case"whole":e=s/4;break;case"breve":e=s/4/2;break;case"long":e=s/4/4;break;case"maxima":e=s/4/8}}}if(e>0){n=!0;break}}if(0===e&&(t++,t===this.xmlMeasureList.length)){const e=h.ITextTranslation.translateText("ReaderErrorMEssages/DivisionsError","Invalid divisions value at Instrument: ");throw new u.MusicSheetReadingException(e+this.instrument.Name)}}return e}getCueNoteAndNoteTypeXml(e){let t=!1;e.element("cue")&&(t=!0);const n=e.element("type");let i=S.NoteType.UNDEFINED;if(n){const e=n.attribute("size");"cue"===(null===e||void 0===e?void 0:e.value)&&(t=!0),i=S.NoteTypeHandler.StringToNoteType(n.value)}return[t,i]}getStemDirectionType(e){switch(e.value){case"down":return x.StemDirectionType.Down;case"up":return x.StemDirectionType.Up;case"double":return x.StemDirectionType.Double;case"none":return x.StemDirectionType.None;default:return x.StemDirectionType.Undefined}}getNoteHeadColorXml(e){const t=e.element("notehead");if(t){const e=t.attribute("color");if(e)return this.parseXmlColor(e.value)}return null}getNoteColorXml(e){const t=e.attribute("color");return t?this.parseXmlColor(t.value):null}getTremoloInfo(e){let t,n;const i=e.element("tremolo");if(i){const e=i.attribute("type");if(e){if("single"===e.value){const e=parseInt(i.value,10);e>0&&(t=e)}else t=0;"unmeasured"===e.value&&(n=!0)}}return{tremoloStrokes:t,tremoloUnmeasured:n}}getVibratoStrokes(e){const t=e.element("wavy-line");if(void 0!==t){const e=t.attribute("type");if(e&&"start"===e.value)return!0}return!1}getNoteStaff(e){let t=1;return this.instrument.Staves.length>1&&e.element("staff")&&(t=parseInt(e.element("staff").value,10),isNaN(t)&&(m.default.debug("InstrumentReader.readNextXmlMeasure.get staff number"),t=1)),t}}},1325:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MappingSourceMusicPart=void 0,t.MappingSourceMusicPart=class{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.repetitionRun=-1,this.sourceMusicPart=e,this.parentPartListEntry=n,this.startTimestamp=t.clone(),this.repetitionRun=i,this.parentRepetition=n,this.isEnding=s}get IsRepetition(){return void 0!==this.parentRepetition}get IsEnding(){return this.isEnding}get IsLastRepetitionRun(){return this.IsRepetition&&this.repetitionRun+1===this.parentRepetition.UserNumberOfRepetitions}get RepetitionRun(){return this.repetitionRun}get ParentPartListEntry(){return this.parentPartListEntry}get SourceMusicPart(){return this.sourceMusicPart}get StartTimestamp(){return this.startTimestamp}CompareTo(e){return e?this.startTimestamp.CompareTo(e.startTimestamp):1}}},1327:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SkyBottomLineBatchCalculator=void 0;const s=n(5955),r=n(735),a=n(3508),o=i(n(3065)),l=n(813);t.SkyBottomLineBatchCalculator=class{constructor(e,t){const n=new Map;for(const i of e){const e=i.ParentMusicSystem.rules;(()=>{if(n.has(e))return n.get(e);{const t=[];return n.set(e,t),t}})().push({skyBottomLineCalculator:i.SkyBottomLineCalculator,measures:i.Measures})}this.batches=new Map;for(const[i,c]of n.entries()){const e=l.CollectionUtil.flat(c.map((e=>e.measures))),n=(()=>{if(t===s.SkyBottomLineBatchCalculatorBackendType.Plain)return new r.PlainSkyBottomLineBatchCalculatorBackend(i,e).initialize();try{return new a.WebGLSkyBottomLineBatchCalculatorBackend(i,e).initialize()}catch(n){return o.default.info("Couldn't create WebGLBackend for Skyline. Using fallback."),new r.PlainSkyBottomLineBatchCalculatorBackend(i,e).initialize()}})();n.initialize(),this.batches.set(i,{backend:n,entries:c})}}calculateLines(){for(const[,{backend:e,entries:t}]of this.batches){const n=e.calculateLines();let i=0;for(const{skyBottomLineCalculator:e,measures:s}of t){const t=i+s.length;e.updateLines(n.slice(i,t)),i=t}}}}},1336:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StemDirectionType=t.ArticulationEnum=t.VoiceEntry=void 0;const i=n(2561),s=n(1850),r=n(8233),a=n(8215),o=n(8233),l=n(3263);class c{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(this.notes=[],this.articulations=[],this.technicalInstructions=[],this.lyricsEntries=new l.Dictionary,this.wantedStemDirection=u.Undefined,this.stemDirectionXml=u.Undefined,this.stemDirection=u.Undefined,this.timestamp=e,this.parentVoice=t,this.parentSourceStaffEntry=n,this.isGrace=i,this.graceAfterMainNote=!1,this.graceNoteSlash=s,this.graceSlur=r,void 0!==n){const e=n.VoiceEntries;-1===e.indexOf(this)&&e.push(this)}}get ParentSourceStaffEntry(){return this.parentSourceStaffEntry}get ParentVoice(){return this.parentVoice}get Timestamp(){return this.timestamp}set Timestamp(e){this.timestamp=e}get Notes(){return this.notes}get IsGrace(){return this.isGrace}set IsGrace(e){this.isGrace=e}get GraceAfterMainNote(){return this.graceAfterMainNote}set GraceAfterMainNote(e){this.graceAfterMainNote=e}get GraceNoteSlash(){return this.graceNoteSlash}set GraceNoteSlash(e){this.graceNoteSlash=e}get GraceSlur(){return this.graceSlur}set GraceSlur(e){this.graceSlur=e}get Articulations(){return this.articulations}set Articulations(e){this.articulations=e}get TechnicalInstructions(){return this.technicalInstructions}get LyricsEntries(){return this.lyricsEntries}get Arpeggio(){return this.arpeggio}set Arpeggio(e){this.arpeggio=e}get OrnamentContainer(){return this.ornamentContainer}set OrnamentContainer(e){this.ornamentContainer=e}set WantedStemDirection(e){this.wantedStemDirection=e}get WantedStemDirection(){return this.wantedStemDirection}set StemDirectionXml(e){this.stemDirectionXml=e}get StemDirectionXml(){return this.stemDirectionXml}set StemDirection(e){this.stemDirection=e}get StemDirection(){return this.stemDirection}get StemColorXml(){return this.stemColorXml}set StemColorXml(e){this.stemColorXml=e}get StemColor(){return this.stemColor}set StemColor(e){this.stemColor=e}hasArticulation(e){for(const t of this.articulations)if(t.Equals(e))return!0;return!1}static isSupportedArticulation(e){switch(e){case h.accent:case h.strongaccent:case h.softaccent:case h.invertedstrongaccent:case h.staccato:case h.staccatissimo:case h.spiccato:case h.tenuto:case h.fermata:case h.invertedfermata:case h.breathmark:case h.caesura:case h.lefthandpizzicato:case h.naturalharmonic:case h.snappizzicato:case h.upbow:case h.downbow:case h.bend:return!0;default:return!1}}hasTie(){for(let e=0,t=this.Notes.length;e<t;++e)if(this.Notes[e].NoteTie)return!0;return!1}hasSlur(){for(let e=0,t=this.Notes.length;e<t;++e)if(this.Notes[e].NoteSlurs.length>0)return!0;return!1}isStaccato(){for(const e of this.Articulations)if(e.articulationEnum===h.staccato)return!0;return!1}isAccent(){for(const e of this.Articulations)if(e.articulationEnum===h.accent||e.articulationEnum===h.strongaccent)return!0;return!1}getVerseNumberForLyricEntry(e){let t="1";return this.lyricsEntries.forEach(((n,i)=>{e===i&&(t=n)})),t}createVoiceEntriesForOrnament(e,t){e||(e=this);const n=[];if(!e.ornamentContainer)return;const s=this.notes[0],r=s.Length,l=e.ParentVoice,c=e.Timestamp;let h=i.Fraction.createFromFraction(c);switch(e.ornamentContainer.GetOrnament){case a.OrnamentEnum.Trill:{const a=new i.Fraction(r.Numerator,8*r.Denominator),u=s.Pitch.getTransposedPitch(1);let d=t.getAlterationForPitch(u);e.OrnamentContainer.AccidentalAbove!==o.AccidentalEnum.NONE&&(d=e.ornamentContainer.AccidentalAbove);for(let e=0;e<8;e++)h=i.Fraction.plus(c,new i.Fraction(e*a.Numerator,a.Denominator)),e%2==0?this.createBaseVoiceEntry(h,a,l,s,n):this.createAlteratedVoiceEntry(h,a,l,s.SourceMeasure,u,d,n);break}case a.OrnamentEnum.Turn:{const e=new i.Fraction(r.Numerator,4*r.Denominator),a=s.Pitch.getTransposedPitch(-1),o=t.getAlterationForPitch(a),c=s.Pitch.getTransposedPitch(1),u=t.getAlterationForPitch(c);this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,c,u,n),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,n),h.Add(e),this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,a,o,n),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,n);break}case a.OrnamentEnum.InvertedTurn:{const e=new i.Fraction(r.Numerator,4*r.Denominator),a=s.Pitch.getTransposedPitch(-1),o=t.getAlterationForPitch(a),c=s.Pitch.getTransposedPitch(1),u=t.getAlterationForPitch(c);this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,a,o,n),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,n),h.Add(e),this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,c,u,n),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,n);break}case a.OrnamentEnum.DelayedTurn:{const e=new i.Fraction(r.Numerator,2*r.Denominator),a=s.Pitch.getTransposedPitch(-1),o=t.getAlterationForPitch(a),u=s.Pitch.getTransposedPitch(1),d=t.getAlterationForPitch(u);this.createBaseVoiceEntry(h,e,l,s,n),h=i.Fraction.plus(c,e),e.Denominator=8*r.Denominator,this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,u,d,n),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,n),h.Add(e),this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,a,o,n),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,n);break}case a.OrnamentEnum.DelayedInvertedTurn:{const e=new i.Fraction(r.Numerator,2*r.Denominator),a=s.Pitch.getTransposedPitch(-1),o=t.getAlterationForPitch(a),u=s.Pitch.getTransposedPitch(1),d=t.getAlterationForPitch(u);this.createBaseVoiceEntry(h,e,l,s,n),h=i.Fraction.plus(c,e),e.Denominator=8*r.Denominator,this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,a,o,n),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,n),h.Add(e),this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,u,d,n),h.Add(e),this.createBaseVoiceEntry(h,e,l,s,n);break}case a.OrnamentEnum.Mordent:{const e=new i.Fraction(r.Numerator,4*r.Denominator),a=s.Pitch.getTransposedPitch(1),o=t.getAlterationForPitch(a);this.createBaseVoiceEntry(h,e,l,s,n),h.Add(e),this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,a,o,n),e.Denominator=2*r.Denominator,h=i.Fraction.plus(c,e),this.createBaseVoiceEntry(h,e,l,s,n);break}case a.OrnamentEnum.InvertedMordent:{const e=new i.Fraction(r.Numerator,4*r.Denominator),a=s.Pitch.getTransposedPitch(-1),o=t.getAlterationForPitch(a);this.createBaseVoiceEntry(h,e,l,s,n),h.Add(e),this.createAlteratedVoiceEntry(h,e,l,s.SourceMeasure,a,o,n),e.Denominator=2*r.Denominator,h=i.Fraction.plus(c,e),this.createBaseVoiceEntry(h,e,l,s,n);break}default:throw new RangeError}return n}createBaseVoiceEntry(e,t,n,i,a){const o=new c(e,n,i.ParentStaffEntry),l=new r.Pitch(i.Pitch.FundamentalNote,i.Pitch.Octave,i.Pitch.Accidental),h=new s.Note(o,void 0,t,l,i.SourceMeasure);o.Notes.push(h),a.push(o)}createAlteratedVoiceEntry(e,t,n,i,a,o,l){const h=new c(e,n,void 0),u=new r.Pitch(a.FundamentalNote,a.Octave,o),d=new s.Note(h,void 0,t,u,i);h.Notes.push(d),l.push(h)}}var h,u;t.VoiceEntry=c,function(e){e[e.accent=0]="accent",e[e.strongaccent=1]="strongaccent",e[e.softaccent=2]="softaccent",e[e.marcatoup=3]="marcatoup",e[e.marcatodown=4]="marcatodown",e[e.invertedstrongaccent=5]="invertedstrongaccent",e[e.staccato=6]="staccato",e[e.staccatissimo=7]="staccatissimo",e[e.spiccato=8]="spiccato",e[e.tenuto=9]="tenuto",e[e.fermata=10]="fermata",e[e.invertedfermata=11]="invertedfermata",e[e.breathmark=12]="breathmark",e[e.caesura=13]="caesura",e[e.lefthandpizzicato=14]="lefthandpizzicato",e[e.naturalharmonic=15]="naturalharmonic",e[e.snappizzicato=16]="snappizzicato",e[e.upbow=17]="upbow",e[e.downbow=18]="downbow",e[e.scoop=19]="scoop",e[e.plop=20]="plop",e[e.doit=21]="doit",e[e.falloff=22]="falloff",e[e.stress=23]="stress",e[e.unstress=24]="unstress",e[e.detachedlegato=25]="detachedlegato",e[e.otherarticulation=26]="otherarticulation",e[e.bend=27]="bend"}(h||(t.ArticulationEnum=h={})),function(e){e[e.Undefined=-1]="Undefined",e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.None=2]="None",e[e.Double=3]="Double"}(u||(t.StemDirectionType=u={}))},1519:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalMarkedArea=void 0,t.GraphicalMarkedArea=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.systemRectangle=e,this.labelRectangle=t,this.label=n,this.settings=i}}},1538:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TempoSorter=t.TemposCalculator=void 0;const i=n(2561),s=n(899),r=n(6362),a=n(9161),o=n(5332);class l{calculate(e){l.processTempoExpressions(e)}static processTempoExpressions(e){const t=[];for(let i=0,s=e.SourceMeasures;i<s.length;i++){const e=s[i];e.TempoExpressions.sort(c.Compare);for(let n=0,i=e.TempoExpressions;n<i.length;n++){const e=i[n];null!=e.InstantaneousTempo&&e.InstantaneousTempo.TempoType===a.TempoType.none&&(e.InstantaneousTempo.TempoType=a.TempoType.inst),t.push(e)}}t.sort(c.Compare);const n=l.cleanExpListStartingEntry(e,t),r=[];let o=null,h=n;for(let i=0,s=t;i<s.length;i++){const e=s[i];if(null===o||e.AbsoluteTimestamp!==o.AbsoluteTimestamp){if(null!=e.InstantaneousTempo&&0===e.InstantaneousTempo.TempoInBpm){const t=e.InstantaneousTempo;if(t.isMetronomeMark&&(t.TempoInBpm=h),t instanceof a.InstantaneousTempoExpression&&t.TempoType!==a.TempoType.change&&(t.TempoInBpm=a.InstantaneousTempoExpression.getDefaultValueForInstTempo(t.InstTempo)),t.TempoType===a.TempoType.change)switch(t.ChangeSubType){case a.ChangeSubType.atempo:t.TempoInBpm=h;break;case a.ChangeSubType.doppioMovimento:t.TempoInBpm=2*h;break;case a.ChangeSubType.tempoprimo:t.TempoInBpm=n}h=t.TempoInBpm}}else null==o&&e.AbsoluteTimestamp!==o.AbsoluteTimestamp||(null!=o.InstantaneousTempo&&null!=e.InstantaneousTempo&&e.clearInstantaneousTempo(),null!=e.ContinuousTempo&&(null===o.ContinuousTempo&&o.addExpression(e.ContinuousTempo,""),e.clearContinuousTempo()));if(null===e.InstantaneousTempo&&null===e.ContinuousTempo){const t=e.SourceMeasureParent.TempoExpressions.indexOf(e);t>=0&&e.SourceMeasureParent.TempoExpressions.splice(t,1)}else r.push(e),o=e}h=n;for(let a=0;a<r.length;a++){const t=r[a];if(null!=t.InstantaneousTempo&&(h=t.InstantaneousTempo.TempoInBpm),null!=t.ContinuousTempo){const n=t.ContinuousTempo;n.StartTempo=h;const o=t.SourceMeasureParent.measureListIndex;let l=o;const c=Math.min(o+e.Rules.TempoChangeMeasureValidity,e.SourceMeasures.length-1);for(;l<=c;){const t=e.SourceMeasures[l],n=t.endingBarStyleEnum===s.SystemLinesEnum.ThinBold;if(t.endsWithLineRepetition()||n||l===e.SourceMeasures.length-1)break;if(l>o&&t.beginsWithRepetition()){l--;break}l++}const u=e.SourceMeasures[l];let d,f=i.Fraction.plus(u.AbsoluteTimestamp,i.Fraction.minus(u.Duration,new i.Fraction(1,64)));a<r.length-1&&(d=r[a+1].AbsoluteTimestamp,d.RealValue<f.RealValue&&(f=d)),n.AbsoluteEndTimestamp=f;let p=n.StartTempo*(1-e.Rules.TempoContinousFactor)*n.getTempoFactor();p*=Math.pow(Math.max(.6,Math.min(n.AbsoluteTimeSpan,2)/2),1/4),n.EndTempo=n.StartTempo+p}}e.TimestampSortedTempoExpressionsList=r,r[0]&&(e.DefaultStartTempoInBpm=r[0].InstantaneousTempo.TempoInBpm)}static cleanExpListStartingEntry(e,t){if(0!==t.length&&t[0].AbsoluteTimestamp.Equals(new i.Fraction(0,1))||(t=[new o.MultiTempoExpression(e.SourceMeasures[0],new i.Fraction(0,1))].concat(t)),!t[0].InstantaneousTempo){const e=new a.InstantaneousTempoExpression("*generated",r.PlacementEnum.Above,1,0,t[0],!0);t[0].addExpression(e,"")}const n=t[0].InstantaneousTempo;return 0!==n.TempoInBpm||(0===n.TempoInBpm&&e.DefaultStartTempoInBpm>0&&(n.TempoInBpm=e.DefaultStartTempoInBpm),0===n.TempoInBpm&&(n.TempoInBpm=a.InstantaneousTempoExpression.getDefaultValueForInstTempo[a.InstTempo.moderato])),n.TempoInBpm}}t.TemposCalculator=l;class c{static Compare(e,t){let n=0;if(n=c.CompareNumber(e.AbsoluteTimestamp.RealValue,t.AbsoluteTimestamp.RealValue),0!==n)return n;const i=c.calcSortPriority(e),s=c.calcSortPriority(t);return n=c.CompareNumber(i,s),n}static calcSortPriority(e){if(null!=e.InstantaneousTempo){switch(e.InstantaneousTempo.TempoType){case a.TempoType.metronomeMark:return 1;case a.TempoType.inst:return 2;case a.TempoType.change:switch(e.InstantaneousTempo.ChangeSubType){case a.ChangeSubType.atempo:case a.ChangeSubType.doppioMovimento:return 3;case a.ChangeSubType.tempoprimo:return 4}}return 5}return 9}static CompareNumber(e,t){return e<t?-1:e===t?0:1}}t.TempoSorter=c},1645:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.AlignmentType=t.RepetitionInstructionEnum=t.RepetitionInstruction=t.RepetitionInstructionComparer=void 0,t.RepetitionInstructionComparer=class{static Compare(e,t){if(void 0!==e.parentRepetition&&t.parentRepetition){if(e.alignment===i.End&&t.alignment===i.End){if(e.parentRepetition.StartIndex<t.parentRepetition.StartIndex)return 1;if(e.parentRepetition.StartIndex>t.parentRepetition.StartIndex)return-1}if(e.alignment===i.Begin&&t.alignment===i.Begin){if(e.parentRepetition.EndIndex<t.parentRepetition.EndIndex)return 1;if(e.parentRepetition.EndIndex>t.parentRepetition.EndIndex)return-1}}return 0}},t.RepetitionInstruction=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.End,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.endingIndices=void 0,this.measureIndex=e,r&&(this.endingIndices=r.slice()),this.type=t,this.alignment=n,this.parentRepetition=s}CompareTo(e){const t=e;if(this.measureIndex>t.measureIndex)return 1;if(this.measureIndex<t.measureIndex)return-1;if(this.alignment===i.Begin){if(t.alignment===i.End)return-1;switch(this.type){case n.Ending:return 1;case n.StartLine:return t.type===n.Ending?-1:1;case n.Coda:case n.Segno:return t.type===n.Coda?1:-1}}else{if(t.alignment===i.Begin)return 1;switch(this.type){case n.Ending:return-1;case n.Fine:case n.ToCoda:return t.type===n.Ending?1:-1;case n.ForwardJump:switch(t.type){case n.Ending:case n.Fine:case n.ToCoda:return 1}return-1;case n.DalSegnoAlFine:case n.DaCapoAlFine:case n.DalSegnoAlCoda:case n.DaCapoAlCoda:case n.DaCapo:case n.DalSegno:case n.BackJumpLine:return 1}}return 0}equals(e){if(this.measureIndex!==e.measureIndex||this.type!==e.type||this.alignment!==e.alignment)return!1;if(this.endingIndices===e.endingIndices)return!0;if(!this.endingIndices||!e.endingIndices||this.endingIndices.length!==e.endingIndices.length)return!1;for(let t=0;t<this.endingIndices.length;t++)if(this.endingIndices[t]!==e.endingIndices[t])return!1;return!0}},function(e){e[e.StartLine=0]="StartLine",e[e.ForwardJump=1]="ForwardJump",e[e.BackJumpLine=2]="BackJumpLine",e[e.Ending=3]="Ending",e[e.DaCapo=4]="DaCapo",e[e.DalSegno=5]="DalSegno",e[e.Fine=6]="Fine",e[e.ToCoda=7]="ToCoda",e[e.DalSegnoAlFine=8]="DalSegnoAlFine",e[e.DaCapoAlFine=9]="DaCapoAlFine",e[e.DalSegnoAlCoda=10]="DalSegnoAlCoda",e[e.DaCapoAlCoda=11]="DaCapoAlCoda",e[e.Coda=12]="Coda",e[e.Segno=13]="Segno",e[e.None=14]="None"}(n||(t.RepetitionInstructionEnum=n={})),function(e){e[e.Begin=0]="Begin",e[e.End=1]="End"}(i||(t.AlignmentType=i={}))},1710:(e,t,n)=>{e.exports=function e(t,n,i){function s(a,o){if(!n[a]){if(!t[a]){if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return s(t[a][1][e]||e)}),c,c.exports,e,t,n,i)}return n[a].exports}for(var r=void 0,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(e,t,n){"use strict";var i=e("./utils"),s=e("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,s,a,o,l,c,h=[],u=0,d=e.length,f=d,p="string"!==i.getTypeOf(e);u<e.length;)f=d-u,s=p?(t=e[u++],n=u<d?e[u++]:0,u<d?e[u++]:0):(t=e.charCodeAt(u++),n=u<d?e.charCodeAt(u++):0,u<d?e.charCodeAt(u++):0),a=t>>2,o=(3&t)<<4|n>>4,l=1<f?(15&n)<<2|s>>6:64,c=2<f?63&s:64,h.push(r.charAt(a)+r.charAt(o)+r.charAt(l)+r.charAt(c));return h.join("")},n.decode=function(e){var t,n,i,a,o,l,c=0,h=0;if("data:"===e.substr(0,5))throw new Error("Invalid base64 input, it looks like a data url.");var u,d=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===r.charAt(64)&&d--,e.charAt(e.length-2)===r.charAt(64)&&d--,d%1!=0)throw new Error("Invalid base64 input, bad content length.");for(u=s.uint8array?new Uint8Array(0|d):new Array(0|d);c<e.length;)t=r.indexOf(e.charAt(c++))<<2|(a=r.indexOf(e.charAt(c++)))>>4,n=(15&a)<<4|(o=r.indexOf(e.charAt(c++)))>>2,i=(3&o)<<6|(l=r.indexOf(e.charAt(c++))),u[h++]=t,64!==o&&(u[h++]=n),64!==l&&(u[h++]=i);return u}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var i=e("./external"),s=e("./stream/DataWorker"),r=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function o(e,t,n,i,s){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=i,this.compressedContent=s}o.prototype={getContentWorker:function(){var e=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,n){return e.pipe(new r).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var i=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var i=e("./utils"),s=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==i.getTypeOf(e)?function(e,t,n){var i=s,r=0+n;e^=-1;for(var a=0;a<r;a++)e=e>>>8^i[255&(e^t[a])];return~e}(0|t,e,e.length):function(e,t,n){var i=s,r=0+n;e^=-1;for(var a=0;a<r;a++)e=e>>>8^i[255&(e^t.charCodeAt(a))];return~e}(0|t,e,e.length):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var i;i="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:i}},{lie:37}],7:[function(e,t,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,s=e("pako"),r=e("./utils"),a=e("./stream/GenericWorker"),o=i?"uint8array":"array";function l(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",r.inherits(l,a),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(r.transformTo(o,e.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function i(e,t){var n,i="";for(n=0;n<t;n++)i+=String.fromCharCode(255&e),e>>>=8;return i}function s(e,t,n,s,a,h){var u,d,f=e.file,p=e.compression,m=h!==o.utf8encode,g=r.transformTo("string",h(f.name)),b=r.transformTo("string",o.utf8encode(f.name)),v=f.comment,y=r.transformTo("string",h(v)),x=r.transformTo("string",o.utf8encode(v)),S=b.length!==f.name.length,w=x.length!==v.length,E="",_="",T="",M=f.dir,C=f.date,A={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(A.crc32=e.crc32,A.compressedSize=e.compressedSize,A.uncompressedSize=e.uncompressedSize);var P=0;t&&(P|=8),m||!S&&!w||(P|=2048);var N=0,k=0;M&&(N|=16),"UNIX"===a?(k=798,N|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(f.unixPermissions,M)):(k=20,N|=function(e){return 63&(e||0)}(f.dosPermissions)),u=C.getUTCHours(),u<<=6,u|=C.getUTCMinutes(),u<<=5,u|=C.getUTCSeconds()/2,d=C.getUTCFullYear()-1980,d<<=4,d|=C.getUTCMonth()+1,d<<=5,d|=C.getUTCDate(),S&&(_=i(1,1)+i(l(g),4)+b,E+="up"+i(_.length,2)+_),w&&(T=i(1,1)+i(l(y),4)+x,E+="uc"+i(T.length,2)+T);var L="";return L+="\n\0",L+=i(P,2),L+=p.magic,L+=i(u,2),L+=i(d,2),L+=i(A.crc32,4),L+=i(A.compressedSize,4),L+=i(A.uncompressedSize,4),L+=i(g.length,2),L+=i(E.length,2),{fileRecord:c.LOCAL_FILE_HEADER+L+g+E,dirRecord:c.CENTRAL_FILE_HEADER+i(k,2)+L+i(y.length,2)+"\0\0\0\0"+i(N,4)+i(s,4)+g+E+y}}var r=e("../utils"),a=e("../stream/GenericWorker"),o=e("../utf8"),l=e("../crc32"),c=e("../signature");function h(e,t,n,i){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(h,a),h.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-i-1))/n:100}}))},h.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=s(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=s(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+i(e.crc32,4)+i(e.compressedSize,4)+i(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,s=function(e,t,n,s,a){var o=r.transformTo("string",a(s));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(e,2)+i(e,2)+i(t,4)+i(n,4)+i(o.length,2)+o}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:s,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},h.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},h.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var i=e("../compressions"),s=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var r=new s(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach((function(e,n){a++;var s=function(e,t){var n=e||t,s=i[n];if(!s)throw new Error(n+" is not a valid compression method !");return s}(n.options.compression,t.compression),o=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(s,o).withStreamInfo("file",{name:e,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(r)})),r.entriesCount=a}catch(e){r.error(e)}return r}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new i;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(i.prototype=e("./object")).loadAsync=e("./load"),i.support=e("./support"),i.defaults=e("./defaults"),i.version="3.10.1",i.loadAsync=function(e,t){return(new i).loadAsync(e,t)},i.external=e("./external"),t.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var i=e("./utils"),s=e("./external"),r=e("./utf8"),a=e("./zipEntries"),o=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new s.Promise((function(t,n){var i=e.decompressed.getContentWorker().pipe(new o);i.on("error",(function(e){n(e)})).on("end",(function(){i.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=i.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),l.isNode&&l.isStream(e)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new a(t);return n.load(e),n})).then((function(e){var n=[s.Promise.resolve(e)],i=e.files;if(t.checkCRC32)for(var r=0;r<i.length;r++)n.push(c(i[r]));return s.Promise.all(n)})).then((function(e){for(var s=e.shift(),r=s.files,a=0;a<r.length;a++){var o=r[a],l=o.fileNameStr,c=i.resolve(o.fileNameStr);n.file(c,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders}),o.dir||(n.file(c).unsafeOriginalName=l)}return s.zipComment.length&&(n.comment=s.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var i=e("../utils"),s=e("../stream/GenericWorker");function r(e,t){s.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}i.inherits(r,s),r.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},r.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var i=e("readable-stream").Readable;function s(e,t,n){i.call(this,t),this._helper=e;var s=this;e.on("data",(function(e,t){s.push(e)||s._helper.pause(),n&&n(t)})).on("error",(function(e){s.emit("error",e)})).on("end",(function(){s.push(null)}))}e("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},t.exports=s},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function i(e,t,n){var i,s=r.getTypeOf(t),o=r.extend(n||{},l);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(e=m(e)),o.createFolders&&(i=p(e))&&g.call(this,i,!0);var u,b="string"===s&&!1===o.binary&&!1===o.base64;n&&void 0!==n.binary||(o.binary=!b),(t instanceof c&&0===t.uncompressedSize||o.dir||!t||0===t.length)&&(o.base64=!1,o.binary=!0,t="",o.compression="STORE",s="string"),u=t instanceof c||t instanceof a?t:d.isNode&&d.isStream(t)?new f(e,t):r.prepareContent(e,t,o.binary,o.optimizedBinaryString,o.base64);var v=new h(e,u,o);this.files[e]=v}var s=e("./utf8"),r=e("./utils"),a=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),h=e("./zipObject"),u=e("./generate"),d=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),p=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||i.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function b(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,i;for(t in this.files)i=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,i)},filter:function(e){var t=[];return this.forEach((function(n,i){e(n,i)&&t.push(i)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,i.call(this,e,t,n),this;if(b(e)){var s=e;return this.filter((function(e,t){return!t.dir&&s.test(e)}))}var r=this.files[this.root+e];return r&&!r.dir?r:null},folder:function(e){if(!e)return this;if(b(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=g.call(this,t),i=this.clone();return i.root=n.name,i},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=r.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");r.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var i=n.comment||this.comment||"";t=u.generateWorker(this,n,i)}catch(e){(t=new a("error")).error(e)}return new o(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var i=e("./DataReader");function s(e){i.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(s,i),s.prototype.byteAt=function(e){return this.data[this.zero+e]},s.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),i=e.charCodeAt(2),s=e.charCodeAt(3),r=this.length-4;0<=r;--r)if(this.data[r]===t&&this.data[r+1]===n&&this.data[r+2]===i&&this.data[r+3]===s)return r-this.zero;return-1},s.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),i=e.charCodeAt(2),s=e.charCodeAt(3),r=this.readData(4);return t===r[0]&&n===r[1]&&i===r[2]&&s===r[3]},s.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=s},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var i=e("../utils");function s(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=s},{"../utils":32}],19:[function(e,t,n){"use strict";var i=e("./Uint8ArrayReader");function s(e){i.call(this,e)}e("../utils").inherits(s,i),s.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var i=e("./DataReader");function s(e){i.call(this,e)}e("../utils").inherits(s,i),s.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},s.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},s.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},s.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=s},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var i=e("./ArrayReader");function s(e){i.call(this,e)}e("../utils").inherits(s,i),s.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var i=e("../utils"),s=e("../support"),r=e("./ArrayReader"),a=e("./StringReader"),o=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=i.getTypeOf(e);return i.checkSupport(t),"string"!==t||s.uint8array?"nodebuffer"===t?new o(e):s.uint8array?new l(i.transformTo("uint8array",e)):new r(i.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK\x03\x04",n.CENTRAL_FILE_HEADER="PK\x01\x02",n.CENTRAL_DIRECTORY_END="PK\x05\x06",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,n){"use strict";var i=e("./GenericWorker"),s=e("../utils");function r(e){i.call(this,"ConvertWorker to "+e),this.destType=e}s.inherits(r,i),r.prototype.processChunk=function(e){this.push({data:s.transformTo(this.destType,e.data),meta:e.meta})},t.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var i=e("./GenericWorker"),s=e("../crc32");function r(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(r,i),r.prototype.processChunk=function(e){this.streamInfo.crc32=s(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var i=e("../utils"),s=e("./GenericWorker");function r(e){s.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}i.inherits(r,s),r.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}s.prototype.processChunk.call(this,e)},t.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var i=e("../utils"),s=e("./GenericWorker");function r(e){s.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=i.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}i.inherits(r,s),r.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function i(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=i},{}],29:[function(e,t,n){"use strict";var i=e("../utils"),s=e("./ConvertWorker"),r=e("./GenericWorker"),a=e("../base64"),o=e("../support"),l=e("../external"),c=null;if(o.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function h(e,t,n){var a=t;switch(t){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=t,this._mimeType=n,i.checkSupport(a),this._worker=e.pipe(new s(a)),e.lock()}catch(e){this._worker=new r("error"),this._worker.error(e)}}h.prototype={accumulate:function(e){return function(e,t){return new l.Promise((function(n,s){var r=[],o=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,n){r.push(e),t&&t(n)})).on("error",(function(e){r=[],s(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return i.newBlob(i.transformTo("arraybuffer",t),n);case"base64":return a.encode(t);default:return i.transformTo(e,t)}}(l,function(e,t){var n,i=0,s=null,r=0;for(n=0;n<t.length;n++)r+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(s=new Uint8Array(r),n=0;n<t.length;n++)s.set(t[n],i),i+=t[n].length;return s;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(o,r),c);n(e)}catch(e){s(e)}r=[]})).resume()}))}(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){i.delay(t,arguments,n)})),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(i.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=0===new Blob([i],{type:"application/zip"}).size}catch(e){try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),n.blob=0===s.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var i=e("./utils"),s=e("./support"),r=e("./nodejsUtils"),a=e("./stream/GenericWorker"),o=new Array(256),l=0;l<256;l++)o[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){a.call(this,"utf-8 decode"),this.leftOver=null}function h(){a.call(this,"utf-8 encode")}o[254]=o[254]=1,n.utf8encode=function(e){return s.nodebuffer?r.newBufferFrom(e,"utf-8"):function(e){var t,n,i,r,a,o=e.length,l=0;for(r=0;r<o;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<o&&56320==(64512&(i=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=s.uint8array?new Uint8Array(l):new Array(l),r=a=0;a<l;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<o&&56320==(64512&(i=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return s.nodebuffer?i.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,s,r,a=e.length,l=new Array(2*a);for(t=n=0;t<a;)if((s=e[t++])<128)l[n++]=s;else if(4<(r=o[s]))l[n++]=65533,t+=r-1;else{for(s&=2===r?31:3===r?15:7;1<r&&t<a;)s=s<<6|63&e[t++],r--;1<r?l[n++]=65533:s<65536?l[n++]=s:(s-=65536,l[n++]=55296|s>>10&1023,l[n++]=56320|1023&s)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),i.applyFromCharCode(l)}(e=i.transformTo(s.uint8array?"uint8array":"array",e))},i.inherits(c,a),c.prototype.processChunk=function(e){var t=i.transformTo(s.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var r=t;(t=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),t.set(r,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}(t),l=t;a!==t.length&&(s.uint8array?(l=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(l=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,i.inherits(h,a),h.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var i=e("./support"),s=e("./base64"),r=e("./nodejsUtils"),a=e("./external");function o(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(e),i.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,n){var i=[],s=0,r=e.length;if(r<=n)return String.fromCharCode.apply(null,e);for(;s<r;)"array"===t||"nodebuffer"===t?i.push(String.fromCharCode.apply(null,e.slice(s,Math.min(s+n,r)))):i.push(String.fromCharCode.apply(null,e.subarray(s,Math.min(s+n,r)))),s+=n;return i.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,r.allocBuffer(1)).length}catch(e){return!1}}()}};function h(e){var t=65536,i=n.getTypeOf(e),s=!0;if("uint8array"===i?s=c.applyCanBeUsed.uint8array:"nodebuffer"===i&&(s=c.applyCanBeUsed.nodebuffer),s)for(;1<t;)try{return c.stringifyByChunk(e,i,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function u(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=h;var d={};d.string={string:o,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,r.allocBuffer(e.length))}},d.array={string:h,array:o,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(e)}},d.arraybuffer={string:function(e){return h(new Uint8Array(e))},array:function(e){return u(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:o,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return r.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:h,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:o,nodebuffer:function(e){return r.newBufferFrom(e)}},d.nodebuffer={string:h,array:function(e){return u(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return u(e,new Uint8Array(e.length))},nodebuffer:o},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var i=n.getTypeOf(t);return d[i][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],i=0;i<t.length;i++){var s=t[i];"."===s||""===s&&0!==i&&i!==t.length-1||(".."===s?n.pop():n.push(s))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":i.nodebuffer&&r.isBuffer(e)?"nodebuffer":i.uint8array&&e instanceof Uint8Array?"uint8array":i.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!i[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,i="";for(n=0;n<(e||"").length;n++)i+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return i},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,r,o,c){return a.Promise.resolve(t).then((function(e){return i.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise((function(t,n){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.onerror=function(e){n(e.target.error)},i.readAsArrayBuffer(e)})):e})).then((function(t){var h=n.getTypeOf(t);return h?("arraybuffer"===h?t=n.transformTo("uint8array",t):"string"===h&&(c?t=s.decode(t):r&&!0!==o&&(t=function(e){return l(e,i.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var i=e("./reader/readerFor"),s=e("./utils"),r=e("./signature"),a=e("./zipEntry"),o=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(t)+", expected "+s.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4)===t;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",n=s.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,i=this.zip64EndOfCentralSize-44;0<i;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=t-n;if(0<i)this.isSignature(t,r.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(e){this.reader=i(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var i=e("./reader/readerFor"),s=e("./utils"),r=e("./compressedObject"),a=e("./crc32"),o=e("./utf8"),l=e("./compressions"),c=e("./support");function h(e,t){this.options=e,this.loadOptions=t}h.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,i,s=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<s;)t=e.readInt(2),n=e.readInt(2),i=e.readData(n),this.extraFields[t]={id:t,length:n,value:i};e.setIndex(s)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=s.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var r=s.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(r)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=i(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=i(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function i(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var s=e("./stream/StreamHelper"),r=e("./stream/DataWorker"),a=e("./utf8"),o=e("./compressedObject"),l=e("./stream/GenericWorker");i.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var i="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var r=!this._dataBinary;r&&!i&&(t=t.pipe(new a.Utf8EncodeWorker)),!r&&i&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new s(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),o.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof l?this._data:new r(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},u=0;u<c.length;u++)i.prototype[c[u]]=h;t.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,i){(function(e){"use strict";var n,i,s=e.MutationObserver||e.WebKitMutationObserver;if(s){var r=0,a=new s(h),o=e.document.createTextNode("");a.observe(o,{characterData:!0}),n=function(){o.data=r=++r%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){h(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(h,0)};else{var l=new e.MessageChannel;l.port1.onmessage=h,n=function(){l.port2.postMessage(0)}}var c=[];function h(){var e,t;i=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}i=!1}t.exports=function(e){1!==c.push(e)||i||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var i=e("immediate");function s(){}var r={},a=["REJECTED"],o=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==s&&f(this,e)}function h(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function u(e,t,n){i((function(){var i;try{i=t(n)}catch(i){return r.reject(e,i)}i===e?r.reject(e,new TypeError("Cannot resolve promise with itself")):r.resolve(e,i)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function f(e,t){var n=!1;function i(t){n||(n=!0,r.reject(e,t))}function s(t){n||(n=!0,r.resolve(e,t))}var a=p((function(){t(s,i)}));"error"===a.status&&i(a.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(s);return this.state!==l?u(n,this.state===o?e:t,this.outcome):this.queue.push(new h(n,e,t)),n},h.prototype.callFulfilled=function(e){r.resolve(this.promise,e)},h.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},h.prototype.callRejected=function(e){r.reject(this.promise,e)},h.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},r.resolve=function(e,t){var n=p(d,t);if("error"===n.status)return r.reject(e,n.value);var i=n.value;if(i)f(e,i);else{e.state=o,e.outcome=t;for(var s=-1,a=e.queue.length;++s<a;)e.queue[s].callFulfilled(t)}return e},r.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,i=e.queue.length;++n<i;)e.queue[n].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:r.resolve(new this(s),e)},c.reject=function(e){var t=new this(s);return r.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,i=!1;if(!n)return this.resolve([]);for(var a=new Array(n),o=0,l=-1,c=new this(s);++l<n;)h(e[l],l);return c;function h(e,s){t.resolve(e).then((function(e){a[s]=e,++o!==n||i||(i=!0,r.resolve(c,a))}),(function(e){i||(i=!0,r.reject(c,e))}))}},c.race=function(e){if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,n=!1;if(!t)return this.resolve([]);for(var i,a=-1,o=new this(s);++a<t;)i=e[a],this.resolve(i).then((function(e){n||(n=!0,r.resolve(o,e))}),(function(e){n||(n=!0,r.reject(o,e))}));return o}},{immediate:36}],38:[function(e,t,n){"use strict";var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var i=e("./zlib/deflate"),s=e("./utils/common"),r=e("./utils/strings"),a=e("./zlib/messages"),o=e("./zlib/zstream"),l=Object.prototype.toString;function c(e){if(!(this instanceof c))return new c(e);this.options=s.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(0!==n)throw new Error(a[n]);if(t.header&&i.deflateSetHeader(this.strm,t.header),t.dictionary){var h;if(h="string"==typeof t.dictionary?r.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,0!==(n=i.deflateSetDictionary(this.strm,h)))throw new Error(a[n]);this._dict_set=!0}}function h(e,t){var n=new c(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}c.prototype.push=function(e,t){var n,a,o=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=r.string2buf(e):"[object ArrayBuffer]"===l.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new s.Buf8(c),o.next_out=0,o.avail_out=c),1!==(n=i.deflate(o,a))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(r.buf2binstring(s.shrinkBuf(o.output,o.next_out))):this.onData(s.shrinkBuf(o.output,o.next_out)))}while((0<o.avail_in||0===o.avail_out)&&1!==n);return 4===a?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),!(o.avail_out=0))},c.prototype.onData=function(e){this.chunks.push(e)},c.prototype.onEnd=function(e){0===e&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=c,n.deflate=h,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,h(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var i=e("./zlib/inflate"),s=e("./utils/common"),r=e("./utils/strings"),a=e("./zlib/constants"),o=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),h=Object.prototype.toString;function u(e){if(!(this instanceof u))return new u(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(o[n]);this.header=new c,i.inflateGetHeader(this.strm,this.header)}function d(e,t){var n=new u(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}u.prototype.push=function(e,t){var n,o,l,c,u,d,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?f.input=r.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(p),f.next_out=0,f.avail_out=p),(n=i.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(d="string"==typeof m?r.string2buf(m):"[object ArrayBuffer]"===h.call(m)?new Uint8Array(m):m,n=i.inflateSetDictionary(this.strm,d)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==a.Z_STREAM_END&&(0!==f.avail_in||o!==a.Z_FINISH&&o!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=r.utf8border(f.output,f.next_out),c=f.next_out-l,u=r.buf2string(f.output,l),f.next_out=c,f.avail_out=p-c,c&&s.arraySet(f.output,f.output,l,c,0),this.onData(u)):this.onData(s.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(o=a.Z_FINISH),o===a.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):o!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(f.avail_out=0))},u.prototype.onData=function(e){this.chunks.push(e)},u.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=u,n.inflate=d,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var s={arraySet:function(e,t,n,i,s){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),s);else for(var r=0;r<i;r++)e[s+r]=t[n+r]},flattenChunks:function(e){var t,n,i,s,r,a;for(t=i=0,n=e.length;t<n;t++)i+=e[t].length;for(a=new Uint8Array(i),t=s=0,n=e.length;t<n;t++)r=e[t],a.set(r,s),s+=r.length;return a}},r={arraySet:function(e,t,n,i,s){for(var r=0;r<i;r++)e[s+r]=t[n+r]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,s)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,r))},n.setTyped(i)},{}],42:[function(e,t,n){"use strict";var i=e("./common"),s=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(e){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){r=!1}for(var a=new i.Buf8(256),o=0;o<256;o++)a[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function l(e,t){if(t<65537&&(e.subarray&&r||!e.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,s,r,a,o=e.length,l=0;for(r=0;r<o;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<o&&56320==(64512&(s=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(s-56320),r++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(l),r=a=0;a<l;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<o&&56320==(64512&(s=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(s-56320),r++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,s=t.length;n<s;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,i,s,r,o=t||e.length,c=new Array(2*o);for(n=i=0;n<o;)if((s=e[n++])<128)c[i++]=s;else if(4<(r=a[s]))c[i++]=65533,n+=r-1;else{for(s&=2===r?31:3===r?15:7;1<r&&n<o;)s=s<<6|63&e[n++],r--;1<r?c[i++]=65533:s<65536?c[i++]=s:(s-=65536,c[i++]=55296|s>>10&1023,c[i++]=56320|1023&s)}return l(c,i)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,i){for(var s=65535&e,r=e>>>16&65535,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;r=r+(s=s+t[i++]|0)|0,--a;);s%=65521,r%=65521}return s|r<<16}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,s){var r=i,a=s+n;e^=-1;for(var o=s;o<a;o++)e=e>>>8^r[255&(e^t[o])];return~e}},{}],46:[function(e,t,n){"use strict";var i,s=e("../utils/common"),r=e("./trees"),a=e("./adler32"),o=e("./crc32"),l=e("./messages"),c=-2,h=258,u=262,d=113;function f(e,t){return e.msg=l[t],t}function p(e){return(e<<1)-(4<e?9:0)}function m(e){for(var t=e.length;0<=--t;)e[t]=0}function g(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(s.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function b(e,t){r._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,g(e.strm)}function v(e,t){e.pending_buf[e.pending++]=t}function y(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function x(e,t){var n,i,s=e.max_chain_length,r=e.strstart,a=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-u?e.strstart-(e.w_size-u):0,c=e.window,d=e.w_mask,f=e.prev,p=e.strstart+h,m=c[r+a-1],g=c[r+a];e.prev_length>=e.good_match&&(s>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(n=t)+a]===g&&c[n+a-1]===m&&c[n]===c[r]&&c[++n]===c[r+1]){r+=2,n++;do{}while(c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&r<p);if(i=h-(p-r),r=p-h,a<i){if(e.match_start=t,o<=(a=i))break;m=c[r+a-1],g=c[r+a]}}}while((t=f[t&d])>l&&0!=--s);return a<=e.lookahead?a:e.lookahead}function S(e){var t,n,i,r,l,c,h,d,f,p,m=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=m+(m-u)){for(s.arraySet(e.window,e.window,m,m,0),e.match_start-=m,e.strstart-=m,e.block_start-=m,t=n=e.hash_size;i=e.head[--t],e.head[t]=m<=i?i-m:0,--n;);for(t=n=m;i=e.prev[--t],e.prev[t]=m<=i?i-m:0,--n;);r+=m}if(0===e.strm.avail_in)break;if(c=e.strm,h=e.window,d=e.strstart+e.lookahead,p=void 0,(f=r)<(p=c.avail_in)&&(p=f),n=0===p?0:(c.avail_in-=p,s.arraySet(h,c.input,c.next_in,p,d),1===c.state.wrap?c.adler=a(c.adler,h,p,d):2===c.state.wrap&&(c.adler=o(c.adler,h,p,d)),c.next_in+=p,c.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=3)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+3-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<u&&0!==e.strm.avail_in)}function w(e,t){for(var n,i;;){if(e.lookahead<u){if(S(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-u&&(e.match_length=x(e,n)),e.match_length>=3)if(i=r._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function E(e,t){for(var n,i,s;;){if(e.lookahead<u){if(S(e),e.lookahead<u&&0===t)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-u&&(e.match_length=x(e,n),e.match_length<=5&&(1===e.strategy||3===e.match_length&&4096<e.strstart-e.match_start)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){for(s=e.strstart+e.lookahead-3,i=r._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=s&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=r._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=r._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function _(e,t,n,i,s){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=s}function T(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(1146),this.dyn_dtree=new s.Buf16(122),this.bl_tree=new s.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(16),this.heap=new s.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function M(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:d,e.adler=2===t.wrap?0:1,t.last_flush=0,r._tr_init(t),0):f(e,c)}function C(e){var t=M(e);return 0===t&&function(e){e.window_size=2*e.w_size,m(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0}(e.state),t}function A(e,t,n,i,r,a){if(!e)return c;var o=1;if(-1===t&&(t=6),i<0?(o=0,i=-i):15<i&&(o=2,i-=16),r<1||9<r||8!==n||i<8||15<i||t<0||9<t||a<0||4<a)return f(e,c);8===i&&(i=9);var l=new T;return(e.state=l).strm=e,l.wrap=o,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new s.Buf8(2*l.w_size),l.head=new s.Buf16(l.hash_size),l.prev=new s.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new s.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,C(e)}i=[new _(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(S(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-u&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(b(e,!1),e.strm.avail_out),1)})),new _(4,4,8,4,w),new _(4,5,16,8,w),new _(4,6,32,32,w),new _(4,4,16,16,E),new _(8,16,32,32,E),new _(8,16,128,128,E),new _(8,32,128,256,E),new _(32,128,258,1024,E),new _(32,258,258,4096,E)],n.deflateInit=function(e,t){return A(e,t,8,15,8,0)},n.deflateInit2=A,n.deflateReset=C,n.deflateResetKeep=M,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?c:(e.state.gzhead=t,0):c},n.deflate=function(e,t){var n,s,a,l;if(!e||!e.state||5<t||t<0)return e?f(e,c):c;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||666===s.status&&4!==t)return f(e,0===e.avail_out?-5:c);if(s.strm=e,n=s.last_flush,s.last_flush=t,42===s.status)if(2===s.wrap)e.adler=0,v(s,31),v(s,139),v(s,8),s.gzhead?(v(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),v(s,255&s.gzhead.time),v(s,s.gzhead.time>>8&255),v(s,s.gzhead.time>>16&255),v(s,s.gzhead.time>>24&255),v(s,9===s.level?2:2<=s.strategy||s.level<2?4:0),v(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(v(s,255&s.gzhead.extra.length),v(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=o(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(v(s,0),v(s,0),v(s,0),v(s,0),v(s,0),v(s,9===s.level?2:2<=s.strategy||s.level<2?4:0),v(s,3),s.status=d);else{var u=8+(s.w_bits-8<<4)<<8;u|=(2<=s.strategy||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(u|=32),u+=31-u%31,s.status=d,y(s,u),0!==s.strstart&&(y(s,e.adler>>>16),y(s,65535&e.adler)),e.adler=1}if(69===s.status)if(s.gzhead.extra){for(a=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),g(e),a=s.pending,s.pending!==s.pending_buf_size));)v(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){a=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),g(e),a=s.pending,s.pending===s.pending_buf_size)){l=1;break}l=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,v(s,l)}while(0!==l);s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),0===l&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){a=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),g(e),a=s.pending,s.pending===s.pending_buf_size)){l=1;break}l=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,v(s,l)}while(0!==l);s.gzhead.hcrc&&s.pending>a&&(e.adler=o(e.adler,s.pending_buf,s.pending-a,a)),0===l&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&g(e),s.pending+2<=s.pending_buf_size&&(v(s,255&e.adler),v(s,e.adler>>8&255),e.adler=0,s.status=d)):s.status=d),0!==s.pending){if(g(e),0===e.avail_out)return s.last_flush=-1,0}else if(0===e.avail_in&&p(t)<=p(n)&&4!==t)return f(e,-5);if(666===s.status&&0!==e.avail_in)return f(e,-5);if(0!==e.avail_in||0!==s.lookahead||0!==t&&666!==s.status){var x=2===s.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(S(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,n=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(s,t):3===s.strategy?function(e,t){for(var n,i,s,a,o=e.window;;){if(e.lookahead<=h){if(S(e),e.lookahead<=h&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&0<e.strstart&&(i=o[s=e.strstart-1])===o[++s]&&i===o[++s]&&i===o[++s]){a=e.strstart+h;do{}while(i===o[++s]&&i===o[++s]&&i===o[++s]&&i===o[++s]&&i===o[++s]&&i===o[++s]&&i===o[++s]&&i===o[++s]&&s<a);e.match_length=h-(a-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=r._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=r._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(s,t):i[s.level].func(s,t);if(3!==x&&4!==x||(s.status=666),1===x||3===x)return 0===e.avail_out&&(s.last_flush=-1),0;if(2===x&&(1===t?r._tr_align(s):5!==t&&(r._tr_stored_block(s,0,0,!1),3===t&&(m(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),g(e),0===e.avail_out))return s.last_flush=-1,0}return 4!==t?0:s.wrap<=0?1:(2===s.wrap?(v(s,255&e.adler),v(s,e.adler>>8&255),v(s,e.adler>>16&255),v(s,e.adler>>24&255),v(s,255&e.total_in),v(s,e.total_in>>8&255),v(s,e.total_in>>16&255),v(s,e.total_in>>24&255)):(y(s,e.adler>>>16),y(s,65535&e.adler)),g(e),0<s.wrap&&(s.wrap=-s.wrap),0!==s.pending?0:1)},n.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&103!==t&&t!==d&&666!==t?f(e,c):(e.state=null,t===d?f(e,-3):0):c},n.deflateSetDictionary=function(e,t){var n,i,r,o,l,h,u,d,f=t.length;if(!e||!e.state)return c;if(2===(o=(n=e.state).wrap)||1===o&&42!==n.status||n.lookahead)return c;for(1===o&&(e.adler=a(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===o&&(m(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new s.Buf8(n.w_size),s.arraySet(d,t,f-n.w_size,n.w_size,0),t=d,f=n.w_size),l=e.avail_in,h=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,S(n);n.lookahead>=3;){for(i=n.strstart,r=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+3-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--r;);n.strstart=i,n.lookahead=2,S(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=h,e.input=u,e.avail_in=l,n.wrap=o,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,i,s,r,a,o,l,c,h,u,d,f,p,m,g,b,v,y,x,S,w,E,_,T,M;n=e.state,i=e.next_in,T=e.input,s=i+(e.avail_in-5),r=e.next_out,M=e.output,a=r-(t-e.avail_out),o=r+(e.avail_out-257),l=n.dmax,c=n.wsize,h=n.whave,u=n.wnext,d=n.window,f=n.hold,p=n.bits,m=n.lencode,g=n.distcode,b=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{p<15&&(f+=T[i++]<<p,p+=8,f+=T[i++]<<p,p+=8),y=m[f&b];t:for(;;){if(f>>>=x=y>>>24,p-=x,0==(x=y>>>16&255))M[r++]=65535&y;else{if(!(16&x)){if(!(64&x)){y=m[(65535&y)+(f&(1<<x)-1)];continue t}if(32&x){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}S=65535&y,(x&=15)&&(p<x&&(f+=T[i++]<<p,p+=8),S+=f&(1<<x)-1,f>>>=x,p-=x),p<15&&(f+=T[i++]<<p,p+=8,f+=T[i++]<<p,p+=8),y=g[f&v];n:for(;;){if(f>>>=x=y>>>24,p-=x,!(16&(x=y>>>16&255))){if(!(64&x)){y=g[(65535&y)+(f&(1<<x)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(w=65535&y,p<(x&=15)&&(f+=T[i++]<<p,(p+=8)<x&&(f+=T[i++]<<p,p+=8)),l<(w+=f&(1<<x)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(f>>>=x,p-=x,(x=r-a)<w){if(h<(x=w-x)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(_=d,(E=0)===u){if(E+=c-x,x<S){for(S-=x;M[r++]=d[E++],--x;);E=r-w,_=M}}else if(u<x){if(E+=c+u-x,(x-=u)<S){for(S-=x;M[r++]=d[E++],--x;);if(E=0,u<S){for(S-=x=u;M[r++]=d[E++],--x;);E=r-w,_=M}}}else if(E+=u-x,x<S){for(S-=x;M[r++]=d[E++],--x;);E=r-w,_=M}for(;2<S;)M[r++]=_[E++],M[r++]=_[E++],M[r++]=_[E++],S-=3;S&&(M[r++]=_[E++],1<S&&(M[r++]=_[E++]))}else{for(E=r-w;M[r++]=M[E++],M[r++]=M[E++],M[r++]=M[E++],2<(S-=3););S&&(M[r++]=M[E++],1<S&&(M[r++]=M[E++]))}break}}break}}while(i<s&&r<o);i-=S=p>>3,f&=(1<<(p-=S<<3))-1,e.next_in=i,e.next_out=r,e.avail_in=i<s?s-i+5:5-(i-s),e.avail_out=r<o?o-r+257:257-(r-o),n.hold=f,n.bits=p}},{}],49:[function(e,t,n){"use strict";var i=e("../utils/common"),s=e("./adler32"),r=e("./crc32"),a=e("./inffast"),o=e("./inftrees"),l=-2;function c(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function h(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function u(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):l}function d(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,u(e)):l}function f(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?l:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,d(e))):l}function p(e,t){var n,i;return e?(i=new h,(e.state=i).window=null,0!==(n=f(e,t))&&(e.state=null),n):l}var m,g,b=!0;function v(e){if(b){var t;for(m=new i.Buf32(512),g=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,g,0,e.work,{bits:5}),b=!1}e.lencode=m,e.lenbits=9,e.distcode=g,e.distbits=5}function y(e,t,n,s){var r,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new i.Buf8(a.wsize)),s>=a.wsize?(i.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(s<(r=a.wsize-a.wnext)&&(r=s),i.arraySet(a.window,t,n-s,r,a.wnext),(s-=r)?(i.arraySet(a.window,t,n-s,s,0),a.wnext=s,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0}n.inflateReset=d,n.inflateReset2=f,n.inflateResetKeep=u,n.inflateInit=function(e){return p(e,15)},n.inflateInit2=p,n.inflate=function(e,t){var n,h,u,d,f,p,m,g,b,x,S,w,E,_,T,M,C,A,P,N,k,L,I,R,O=0,D=new i.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return l;12===(n=e.state).mode&&(n.mode=13),f=e.next_out,u=e.output,m=e.avail_out,d=e.next_in,h=e.input,p=e.avail_in,g=n.hold,b=n.bits,x=p,S=m,L=0;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(2&n.wrap&&35615===g){D[n.check=0]=255&g,D[1]=g>>>8&255,n.check=r(n.check,D,2,0),b=g=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&g)<<8)+(g>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&g)){e.msg="unknown compression method",n.mode=30;break}if(b-=4,k=8+(15&(g>>>=4)),0===n.wbits)n.wbits=k;else if(k>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<k,e.adler=n.check=1,n.mode=512&g?10:12,b=g=0;break;case 2:for(;b<16;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(n.flags=g,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=g>>8&1),512&n.flags&&(D[0]=255&g,D[1]=g>>>8&255,n.check=r(n.check,D,2,0)),b=g=0,n.mode=3;case 3:for(;b<32;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}n.head&&(n.head.time=g),512&n.flags&&(D[0]=255&g,D[1]=g>>>8&255,D[2]=g>>>16&255,D[3]=g>>>24&255,n.check=r(n.check,D,4,0)),b=g=0,n.mode=4;case 4:for(;b<16;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}n.head&&(n.head.xflags=255&g,n.head.os=g>>8),512&n.flags&&(D[0]=255&g,D[1]=g>>>8&255,n.check=r(n.check,D,2,0)),b=g=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}n.length=g,n.head&&(n.head.extra_len=g),512&n.flags&&(D[0]=255&g,D[1]=g>>>8&255,n.check=r(n.check,D,2,0)),b=g=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p<(w=n.length)&&(w=p),w&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,h,d,w,k)),512&n.flags&&(n.check=r(n.check,h,w,d)),p-=w,d+=w,n.length-=w),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break e;for(w=0;k=h[d+w++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k)),k&&w<p;);if(512&n.flags&&(n.check=r(n.check,h,w,d)),p-=w,d+=w,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break e;for(w=0;k=h[d+w++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k)),k&&w<p;);if(512&n.flags&&(n.check=r(n.check,h,w,d)),p-=w,d+=w,k)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(g!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}b=g=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;b<32;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}e.adler=n.check=c(g),b=g=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=f,e.avail_out=m,e.next_in=d,e.avail_in=p,n.hold=g,n.bits=b,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){g>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}switch(n.last=1&g,b-=1,3&(g>>>=1)){case 0:n.mode=14;break;case 1:if(v(n),n.mode=20,6!==t)break;g>>>=2,b-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}g>>>=2,b-=2;break;case 14:for(g>>>=7&b,b-=7&b;b<32;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if((65535&g)!=(g>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&g,b=g=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(w=n.length){if(p<w&&(w=p),m<w&&(w=m),0===w)break e;i.arraySet(u,h,d,w,f),p-=w,d+=w,m-=w,f+=w,n.length-=w;break}n.mode=12;break;case 17:for(;b<14;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(n.nlen=257+(31&g),g>>>=5,b-=5,n.ndist=1+(31&g),g>>>=5,b-=5,n.ncode=4+(15&g),g>>>=4,b-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}n.lens[F[n.have++]]=7&g,g>>>=3,b-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,I={bits:n.lenbits},L=o(0,n.lens,0,19,n.lencode,0,n.work,I),n.lenbits=I.bits,L){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;M=(O=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,C=65535&O,!((T=O>>>24)<=b);){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(C<16)g>>>=T,b-=T,n.lens[n.have++]=C;else{if(16===C){for(R=T+2;b<R;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(g>>>=T,b-=T,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}k=n.lens[n.have-1],w=3+(3&g),g>>>=2,b-=2}else if(17===C){for(R=T+3;b<R;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}b-=T,k=0,w=3+(7&(g>>>=T)),g>>>=3,b-=3}else{for(R=T+7;b<R;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}b-=T,k=0,w=11+(127&(g>>>=T)),g>>>=7,b-=7}if(n.have+w>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;w--;)n.lens[n.have++]=k}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,I={bits:n.lenbits},L=o(1,n.lens,0,n.nlen,n.lencode,0,n.work,I),n.lenbits=I.bits,L){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,I={bits:n.distbits},L=o(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,I),n.distbits=I.bits,L){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=p&&258<=m){e.next_out=f,e.avail_out=m,e.next_in=d,e.avail_in=p,n.hold=g,n.bits=b,a(e,S),f=e.next_out,u=e.output,m=e.avail_out,d=e.next_in,h=e.input,p=e.avail_in,g=n.hold,b=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;M=(O=n.lencode[g&(1<<n.lenbits)-1])>>>16&255,C=65535&O,!((T=O>>>24)<=b);){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(M&&!(240&M)){for(A=T,P=M,N=C;M=(O=n.lencode[N+((g&(1<<A+P)-1)>>A)])>>>16&255,C=65535&O,!(A+(T=O>>>24)<=b);){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}g>>>=A,b-=A,n.back+=A}if(g>>>=T,b-=T,n.back+=T,n.length=C,0===M){n.mode=26;break}if(32&M){n.back=-1,n.mode=12;break}if(64&M){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&M,n.mode=22;case 22:if(n.extra){for(R=n.extra;b<R;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}n.length+=g&(1<<n.extra)-1,g>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;M=(O=n.distcode[g&(1<<n.distbits)-1])>>>16&255,C=65535&O,!((T=O>>>24)<=b);){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(!(240&M)){for(A=T,P=M,N=C;M=(O=n.distcode[N+((g&(1<<A+P)-1)>>A)])>>>16&255,C=65535&O,!(A+(T=O>>>24)<=b);){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}g>>>=A,b-=A,n.back+=A}if(g>>>=T,b-=T,n.back+=T,64&M){e.msg="invalid distance code",n.mode=30;break}n.offset=C,n.extra=15&M,n.mode=24;case 24:if(n.extra){for(R=n.extra;b<R;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}n.offset+=g&(1<<n.extra)-1,g>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===m)break e;if(w=S-m,n.offset>w){if((w=n.offset-w)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}E=w>n.wnext?(w-=n.wnext,n.wsize-w):n.wnext-w,w>n.length&&(w=n.length),_=n.window}else _=u,E=f-n.offset,w=n.length;for(m<w&&(w=m),m-=w,n.length-=w;u[f++]=_[E++],--w;);0===n.length&&(n.mode=21);break;case 26:if(0===m)break e;u[f++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===p)break e;p--,g|=h[d++]<<b,b+=8}if(S-=m,e.total_out+=S,n.total+=S,S&&(e.adler=n.check=n.flags?r(n.check,u,S,f-S):s(n.check,u,S,f-S)),S=m,(n.flags?g:c(g))!==n.check){e.msg="incorrect data check",n.mode=30;break}b=g=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===p)break e;p--,g+=h[d++]<<b,b+=8}if(g!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}b=g=0}n.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;default:return l}return e.next_out=f,e.avail_out=m,e.next_in=d,e.avail_in=p,n.hold=g,n.bits=b,(n.wsize||S!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&y(e,e.output,e.next_out,S-e.avail_out)?(n.mode=31,-4):(x-=e.avail_in,S-=e.avail_out,e.total_in+=x,e.total_out+=S,n.total+=S,n.wrap&&S&&(e.adler=n.check=n.flags?r(n.check,u,S,e.next_out-S):s(n.check,u,S,e.next_out-S)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==x&&0===S||4===t)&&0===L&&(L=-5),L)},n.inflateEnd=function(e){if(!e||!e.state)return l;var t=e.state;return t.window&&(t.window=null),e.state=null,0},n.inflateGetHeader=function(e,t){var n;return e&&e.state&&2&(n=e.state).wrap?((n.head=t).done=!1,0):l},n.inflateSetDictionary=function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?l:11===n.mode&&s(1,t,i,0)!==n.check?-3:y(e,t,i,i)?(n.mode=31,-4):(n.havedict=1,0):l},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var i=e("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,c,h,u,d){var f,p,m,g,b,v,y,x,S,w=d.bits,E=0,_=0,T=0,M=0,C=0,A=0,P=0,N=0,k=0,L=0,I=null,R=0,O=new i.Buf16(16),D=new i.Buf16(16),F=null,B=0;for(E=0;E<=15;E++)O[E]=0;for(_=0;_<l;_++)O[t[n+_]]++;for(C=w,M=15;1<=M&&0===O[M];M--);if(M<C&&(C=M),0===M)return c[h++]=20971520,c[h++]=20971520,d.bits=1,0;for(T=1;T<M&&0===O[T];T++);for(C<T&&(C=T),E=N=1;E<=15;E++)if(N<<=1,(N-=O[E])<0)return-1;if(0<N&&(0===e||1!==M))return-1;for(D[1]=0,E=1;E<15;E++)D[E+1]=D[E]+O[E];for(_=0;_<l;_++)0!==t[n+_]&&(u[D[t[n+_]]++]=_);if(v=0===e?(I=F=u,19):1===e?(I=s,R-=257,F=r,B-=257,256):(I=a,F=o,-1),E=T,b=h,P=_=L=0,m=-1,g=(k=1<<(A=C))-1,1===e&&852<k||2===e&&592<k)return 1;for(;;){for(y=E-P,S=u[_]<v?(x=0,u[_]):u[_]>v?(x=F[B+u[_]],I[R+u[_]]):(x=96,0),f=1<<E-P,T=p=1<<A;c[b+(L>>P)+(p-=f)]=y<<24|x<<16|S,0!==p;);for(f=1<<E-1;L&f;)f>>=1;if(0!==f?(L&=f-1,L+=f):L=0,_++,0==--O[E]){if(E===M)break;E=t[n+u[_]]}if(C<E&&(L&g)!==m){for(0===P&&(P=C),b+=T,N=1<<(A=E-P);A+P<M&&!((N-=O[A+P])<=0);)A++,N<<=1;if(k+=1<<A,1===e&&852<k||2===e&&592<k)return 1;c[m=L&g]=C<<24|A<<16|b-h}}return 0!==L&&(c[b+L]=E-P<<24|64<<16),d.bits=C,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var i=e("../utils/common");function s(e){for(var t=e.length;0<=--t;)e[t]=0}var r=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],c=new Array(576);s(c);var h=new Array(60);s(h);var u=new Array(512);s(u);var d=new Array(256);s(d);var f=new Array(29);s(f);var p,m,g,b=new Array(30);function v(e,t,n,i,s){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=s,this.has_stree=e&&e.length}function y(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function x(e){return e<256?u[e]:u[256+(e>>>7)]}function S(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function w(e,t,n){e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,S(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function E(e,t,n){w(e,n[2*t],n[2*t+1])}function _(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function T(e,t,n){var i,s,r=new Array(16),a=0;for(i=1;i<=15;i++)r[i]=a=a+n[i-1]<<1;for(s=0;s<=t;s++){var o=e[2*s+1];0!==o&&(e[2*s]=_(r[o]++,o))}}function M(e){var t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function C(e){8<e.bi_valid?S(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function A(e,t,n,i){var s=2*t,r=2*n;return e[s]<e[r]||e[s]===e[r]&&i[t]<=i[n]}function P(e,t,n){for(var i=e.heap[n],s=n<<1;s<=e.heap_len&&(s<e.heap_len&&A(t,e.heap[s+1],e.heap[s],e.depth)&&s++,!A(t,i,e.heap[s],e.depth));)e.heap[n]=e.heap[s],n=s,s<<=1;e.heap[n]=i}function N(e,t,n){var i,s,o,l,c=0;if(0!==e.last_lit)for(;i=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],s=e.pending_buf[e.l_buf+c],c++,0===i?E(e,s,t):(E(e,(o=d[s])+256+1,t),0!==(l=r[o])&&w(e,s-=f[o],l),E(e,o=x(--i),n),0!==(l=a[o])&&w(e,i-=b[o],l)),c<e.last_lit;);E(e,256,t)}function k(e,t){var n,i,s,r=t.dyn_tree,a=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=573,n=0;n<l;n++)0!==r[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):r[2*n+1]=0;for(;e.heap_len<2;)r[2*(s=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[s]=0,e.opt_len--,o&&(e.static_len-=a[2*s+1]);for(t.max_code=c,n=e.heap_len>>1;1<=n;n--)P(e,r,n);for(s=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],P(e,r,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,r[2*s]=r[2*n]+r[2*i],e.depth[s]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,r[2*n+1]=r[2*i+1]=s,e.heap[1]=s++,P(e,r,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,i,s,r,a,o,l=t.dyn_tree,c=t.max_code,h=t.stat_desc.static_tree,u=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,m=0;for(r=0;r<=15;r++)e.bl_count[r]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<573;n++)p<(r=l[2*l[2*(i=e.heap[n])+1]+1]+1)&&(r=p,m++),l[2*i+1]=r,c<i||(e.bl_count[r]++,a=0,f<=i&&(a=d[i-f]),o=l[2*i],e.opt_len+=o*(r+a),u&&(e.static_len+=o*(h[2*i+1]+a)));if(0!==m){do{for(r=p-1;0===e.bl_count[r];)r--;e.bl_count[r]--,e.bl_count[r+1]+=2,e.bl_count[p]--,m-=2}while(0<m);for(r=p;0!==r;r--)for(i=e.bl_count[r];0!==i;)c<(s=e.heap[--n])||(l[2*s+1]!==r&&(e.opt_len+=(r-l[2*s+1])*l[2*s],l[2*s+1]=r),i--)}}(e,t),T(r,c,e.bl_count)}function L(e,t,n){var i,s,r=-1,a=t[1],o=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)s=a,a=t[2*(i+1)+1],++o<l&&s===a||(o<c?e.bl_tree[2*s]+=o:0!==s?(s!==r&&e.bl_tree[2*s]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,r=s,c=(o=0)===a?(l=138,3):s===a?(l=6,3):(l=7,4))}function I(e,t,n){var i,s,r=-1,a=t[1],o=0,l=7,c=4;for(0===a&&(l=138,c=3),i=0;i<=n;i++)if(s=a,a=t[2*(i+1)+1],!(++o<l&&s===a)){if(o<c)for(;E(e,s,e.bl_tree),0!=--o;);else 0!==s?(s!==r&&(E(e,s,e.bl_tree),o--),E(e,16,e.bl_tree),w(e,o-3,2)):o<=10?(E(e,17,e.bl_tree),w(e,o-3,3)):(E(e,18,e.bl_tree),w(e,o-11,7));r=s,c=(o=0)===a?(l=138,3):s===a?(l=6,3):(l=7,4)}}s(b);var R=!1;function O(e,t,n,s){w(e,0+(s?1:0),3),function(e,t,n){C(e),S(e,n),S(e,~n),i.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n)}n._tr_init=function(e){R||(function(){var e,t,n,i,s,l=new Array(16);for(i=n=0;i<28;i++)for(f[i]=n,e=0;e<1<<r[i];e++)d[n++]=i;for(d[n-1]=i,i=s=0;i<16;i++)for(b[i]=s,e=0;e<1<<a[i];e++)u[s++]=i;for(s>>=7;i<30;i++)for(b[i]=s<<7,e=0;e<1<<a[i]-7;e++)u[256+s++]=i;for(t=0;t<=15;t++)l[t]=0;for(e=0;e<=143;)c[2*e+1]=8,e++,l[8]++;for(;e<=255;)c[2*e+1]=9,e++,l[9]++;for(;e<=279;)c[2*e+1]=7,e++,l[7]++;for(;e<=287;)c[2*e+1]=8,e++,l[8]++;for(T(c,287,l),e=0;e<30;e++)h[2*e+1]=5,h[2*e]=_(e,5);p=new v(c,r,257,286,15),m=new v(h,a,0,30,15),g=new v(new Array(0),o,0,19,7)}(),R=!0),e.l_desc=new y(e.dyn_ltree,p),e.d_desc=new y(e.dyn_dtree,m),e.bl_desc=new y(e.bl_tree,g),e.bi_buf=0,e.bi_valid=0,M(e)},n._tr_stored_block=O,n._tr_flush_block=function(e,t,n,i){var s,r,a=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),k(e,e.l_desc),k(e,e.d_desc),a=function(e){var t;for(L(e,e.dyn_ltree,e.l_desc.max_code),L(e,e.dyn_dtree,e.d_desc.max_code),k(e,e.bl_desc),t=18;3<=t&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),s=e.opt_len+3+7>>>3,(r=e.static_len+3+7>>>3)<=s&&(s=r)):s=r=n+5,n+4<=s&&-1!==t?O(e,t,n,i):4===e.strategy||r===s?(w(e,2+(i?1:0),3),N(e,c,h)):(w(e,4+(i?1:0),3),function(e,t,n,i){var s;for(w(e,t-257,5),w(e,n-1,5),w(e,i-4,4),s=0;s<i;s++)w(e,e.bl_tree[2*l[s]+1],3);I(e,e.dyn_ltree,t-1),I(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),N(e,e.dyn_ltree,e.dyn_dtree)),M(e),i&&C(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(d[n]+256+1)]++,e.dyn_dtree[2*x(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){w(e,2,3),E(e,256,c),function(e){16===e.bi_valid?(S(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,i){(function(e){!function(e){"use strict";if(!e.setImmediate){var t,n,i,s,r=1,a={},o=!1,l=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,t="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){u(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",d,!1):e.attachEvent("onmessage",d),function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){u(e.data)},function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(n=l.documentElement,function(e){var t=l.createElement("script");t.onreadystatechange=function(){u(e),t.onreadystatechange=null,n.removeChild(t),t=null},n.appendChild(t)}):function(e){setTimeout(u,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var n=new Array(arguments.length-1),i=0;i<n.length;i++)n[i]=arguments[i+1];var s={callback:e,args:n};return a[r]=s,t(r),r++},c.clearImmediate=h}function h(e){delete a[e]}function u(e){if(o)setTimeout(u,0,e);else{var t=a[e];if(t){o=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),o=!1}}}}function d(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&u(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},1745:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(7307),t),s(n(9252),t),s(n(7586),t),s(n(7435),t),s(n(427),t),s(n(5294),t),s(n(7456),t),s(n(4076),t),s(n(1121),t),s(n(6352),t),s(n(899),t),s(n(2870),t)},1846:function(e,t,n){"use strict";var i,s=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(6119),a=n(4831),o=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},e}(),l=function(){function e(){this.key=null,this.value=null}return e.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},e}(),c=function(e){function t(t){var n=e.call(this,t)||this;return n.head=new l,n.tail=new l,n.head.next=n.tail,n.tail.prev=n.head,n}return s(t,e),t.prototype.appendToTail=function(e){var t=this.tail.prev;t.next=e,e.prev=t,e.next=this.tail,this.tail.prev=e},t.prototype.getLinkedDictionaryPair=function(e){if(!a.isUndefined(e)){var t="$"+this.toStr(e);return this.table[t]}},t.prototype.getValue=function(e){var t=this.getLinkedDictionaryPair(e);if(!a.isUndefined(t))return t.value},t.prototype.remove=function(t){var n=this.getLinkedDictionaryPair(t);if(!a.isUndefined(n))return e.prototype.remove.call(this,t),n.unlink(),n.value},t.prototype.clear=function(){e.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},t.prototype.replace=function(e,t){var n="$"+this.toStr(t.key);t.next=e.next,t.prev=e.prev,this.remove(e.key),t.prev.next=t,t.next.prev=t,this.table[n]=t,++this.nElements},t.prototype.setValue=function(e,t){if(!a.isUndefined(e)&&!a.isUndefined(t)){var n=this.getLinkedDictionaryPair(e),i=new o(e,t),s="$"+this.toStr(e);return a.isUndefined(n)?(this.appendToTail(i),this.table[s]=i,void++this.nElements):(this.replace(n,i),n.value)}},t.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(t)})),e},t.prototype.values=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),e},t.prototype.forEach=function(e){for(var t=this.head.next;t.next;){if(!1===e(t.key,t.value))return;t=t.next}},t}(r.default);t.default=c},1850:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Appearance=t.Note=void 0;const i=n(2561);var s;t.Note=class{constructor(e,t,n,i,s,r){this.slurs=[],this.playbackInstrumentId=void 0,this.notehead=void 0,this.printObject=!0,this.voiceEntry=e,this.parentStaffEntry=t,this.length=n,this.pitch=i,this.sourceMeasure=s,this.isRestFlag=null!==r&&void 0!==r&&r,this.halfTone=i?i.getHalfTone():0}get NoteAsString(){return this.pitch.toString()}ToStringShort(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return!this.Pitch||this.isRest()?"rest":null===(e=this.Pitch)||void 0===e?void 0:e.ToStringShort(t)}get ToStringShortGet(){return this.ToStringShort(0)}get ParentVoiceEntry(){return this.voiceEntry}set ParentVoiceEntry(e){this.voiceEntry=e}get ParentStaffEntry(){return this.parentStaffEntry}get ParentStaff(){return this.parentStaffEntry.ParentStaff}get Length(){return this.length}set Length(e){this.length=e}get SourceMeasure(){return this.sourceMeasure}get TypeLength(){return this.typeLength}set TypeLength(e){this.typeLength=e}get NoteTypeXml(){return this.noteTypeXml}set NoteTypeXml(e){this.noteTypeXml=e}get NormalNotes(){return this.normalNotes}set NormalNotes(e){this.normalNotes=e}get Pitch(){return this.pitch}get NoteBeam(){return this.beam}set NoteBeam(e){this.beam=e}set Notehead(e){this.notehead=e}get Notehead(){return this.notehead}get NoteTuplet(){return this.tuplet}set NoteTuplet(e){this.tuplet=e}get NoteGlissando(){return this.glissando}set NoteGlissando(e){this.glissando=e}get NoteTie(){return this.tie}set NoteTie(e){this.tie=e}get NoteSlurs(){return this.slurs}set NoteSlurs(e){this.slurs=e}get PlaybackInstrumentId(){return this.playbackInstrumentId}set PlaybackInstrumentId(e){this.playbackInstrumentId=e}get PrintObject(){return this.printObject}set PrintObject(e){this.printObject=e}get Arpeggio(){return this.arpeggio}set Arpeggio(e){this.arpeggio=e}get IsCueNote(){return this.isCueNote}set IsCueNote(e){this.isCueNote=e}get StemDirectionXml(){return this.stemDirectionXml}set StemDirectionXml(e){this.stemDirectionXml=e}get TremoloStrokes(){var e;return null===(e=this.TremoloInfo)||void 0===e?void 0:e.tremoloStrokes}get StemColorXml(){return this.stemColorXml}set StemColorXml(e){this.stemColorXml=e}get NoteheadColorXml(){return this.noteheadColorXml}set NoteheadColorXml(e){this.noteheadColorXml=e}get NoteheadColor(){return this.noteheadColor}set NoteheadColor(e){this.noteheadColor=e}get NoteheadColorCurrentlyRendered(){return this.noteheadColorCurrentlyRendered}set NoteheadColorCurrentlyRendered(e){this.noteheadColorCurrentlyRendered=e}isRest(){return this.isRestFlag}isWholeRest(){return this.isRest()&&this.Length.RealValue===this.sourceMeasure.ActiveTimeSignature.RealValue}isWholeMeasureNote(){return this.Length.RealValue===this.sourceMeasure.ActiveTimeSignature.RealValue}ToString(){return this.pitch?this.Pitch.ToString()+", length: "+this.length.toString():"rest note, length: "+this.length.toString()}getAbsoluteTimestamp(){return i.Fraction.plus(this.voiceEntry.Timestamp,this.sourceMeasure.AbsoluteTimestamp)}isDuplicateSlur(e){for(let t=0,n=this.slurs.length;t<n;++t){const n=this.slurs[t];if(void 0!==n.StartNote&&void 0!==n.EndNote&&void 0!==e.StartNote&&e.StartNote===n.StartNote&&n.EndNote===this&&e.PlacementXml===n.PlacementXml)return!0}return!1}hasTabEffects(){return!1}},function(e){e[e.Normal=0]="Normal",e[e.Grace=1]="Grace",e[e.Cue=2]="Cue"}(s||(t.Appearance=s={}))},1888:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PagePlacementEnum=t.GraphicalMusicPage=void 0;const i=n(6438),s=n(7741),r=n(9409);class a extends s.GraphicalObject{constructor(e){super(),this.musicSystems=[],this.labels=[],this.parent=e,this.boundingBox=new i.BoundingBox(this,void 0)}get MusicSystems(){return this.musicSystems}set MusicSystems(e){this.musicSystems=e}get Labels(){return this.labels}set Labels(e){this.labels=e}get Parent(){return this.parent}set Parent(e){this.parent=e}get PageNumber(){return this.pageNumber}set PageNumber(e){this.pageNumber=e}setMusicPageAbsolutePosition(e,t){return new r.PointF2D(0,0)}}var o;t.GraphicalMusicPage=a,function(e){e[e.Down=0]="Down",e[e.Right=1]="Right",e[e.RightDown=2]="RightDown"}(o||(t.PagePlacementEnum=o={}))},1902:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowBackend=t.VexFlowBackends=void 0;var s=i(n(3206)).default.Flow;t.VexFlowBackends=class{},t.VexFlowBackend=class{getInnerElement(){return this.inner}getCanvas(){return this.canvas}getRenderElement(){let e=this.canvas;return this.getVexflowBackendType()===s.Renderer.Backends.CANVAS&&(e=this.inner),e}getRenderer(){return this.renderer}removeAllChildrenFromContainer(e){for(;0!==e.children.length;)e.removeChild(e.children.item(0))}removeFromContainer(e){const t=this.getRenderElement();for(let n=0;n<e.children.length;n++)if(e.children.item(n)===t){e.removeChild(t);break}}resize(e,t){this.renderer.resize(e,t),this.width=e,this.height=t}}},1910:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Staff=void 0,t.Staff=class{constructor(e,t){this.isTab=!1,this.voices=[],this.volume=1,this.stafflineCount=5,this.hasLyrics=!1,this.openTieDict={},this.parentInstrument=e,this.id=t,this.audible=!0,this.Visible=!0,this.following=!0}get ParentInstrument(){return this.parentInstrument}set ParentInstrument(e){this.parentInstrument=e}get Voices(){return this.voices}get Id(){return this.id}get Volume(){return this.volume}set Volume(e){this.volume=e}get StafflineCount(){return this.stafflineCount}set StafflineCount(e){this.stafflineCount=e}isVisible(){return this.Visible&&this.ParentInstrument.Visible}}},1932:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSheetDrawer=void 0;const i=n(6438),s=n(2683),r=n(6452),a=n(200),o=n(9409),l=n(8254),c=n(7435),h=n(7533),u=n(7307),d=n(4284),f=n(512),p=n(242),m=n(7499),g=n(298);t.MusicSheetDrawer=class{constructor(e,t){this.drawableBoundingBoxElement="None",this.skyLineVisible=!1,this.bottomLineVisible=!1,this.phonicScoreMode=p.PhonicScoreModes.Manual,this.textMeasurer=e,this.splitScreenLineColor=-1,this.drawingParameters=t,this.rules=t.Rules}set Mode(e){this.phonicScoreMode=e}drawSheet(e){if(this.graphicalMusicSheet=e,this.rules=e.ParentMusicSheet.Rules,this.drawSplitScreenLine(),this.drawingParameters.drawCursors)for(const n of e.Cursors){if(!n)continue;const e=new i.BoundingBox(n);e.AbsolutePosition=n.Start,e.BorderBottom=n.End.y-n.Start.y,e.BorderRight=n.Width/2,e.BorderLeft=-n.Width/2,this.isVisible(e)&&this.drawLineAsVerticalRectangle(n,s.GraphicalLayers.Cursor)}this.drawingParameters.drawScrollIndicator&&this.drawScrollIndicator();const t=Math.min(this.graphicalMusicSheet.MusicPages.length,this.rules.MaxPageToDrawNumber);for(let n=0;n<t;n++){const e=this.graphicalMusicSheet.MusicPages[n];this.drawPage(e)}}drawLineAsHorizontalRectangle(e,t){let n=new a.RectangleF2D(e.Start.x,e.End.y-e.Width/2,e.End.x-e.Start.x,e.Width);n=this.applyScreenTransformationForRect(n),this.renderRectangle(n,t,e.styleId,e.colorHex)}drawLineAsVerticalRectangle(e,t){const n=e.Start,i=e.Width;let s=new a.RectangleF2D(n.x-i/2,n.y,i,e.End.y-n.y);s=this.applyScreenTransformationForRect(s),this.renderRectangle(s,t,e.styleId)}drawLineAsHorizontalRectangleWithOffset(e,t,n){const i=new o.PointF2D(e.Start.x+t.x,e.Start.y+t.y),s=new o.PointF2D(e.End.x+t.x,e.End.y+t.y),r=e.Width;let l=new a.RectangleF2D(i.x,s.y-r/2,s.x-i.x,r);l=this.applyScreenTransformationForRect(l),this.renderRectangle(l,n,e.styleId)}drawLineAsVerticalRectangleWithOffset(e,t,n){const i=new o.PointF2D(e.Start.x+t.x,e.Start.y+t.y),s=new o.PointF2D(e.End.x+t.x,e.End.y+t.y),r=e.Width;let l=new a.RectangleF2D(i.x,i.y,r,s.y-i.y);l=this.applyScreenTransformationForRect(l),this.renderRectangle(l,n,e.styleId)}drawRectangle(e,t){const n=e.PositionAndShape;let i=new a.RectangleF2D(n.AbsolutePosition.x,n.AbsolutePosition.y,n.BorderRight,n.BorderBottom);i=this.applyScreenTransformationForRect(i),this.renderRectangle(i,t,e.style)}calculatePixelDistance(e){throw new Error("not implemented")}drawLabel(e,t){if(!this.isVisible(e.PositionAndShape))return;const n=e.Label;if(""===n.text.trim())return;const i=this.applyScreenTransformation(e.PositionAndShape.AbsolutePosition),s=this.calculatePixelDistance(n.fontHeight),r=this.calculatePixelDistance(e.PositionAndShape.Size.width),a=Math.ceil(r),o=Math.ceil(s*(.2+e.TextLines.length));switch(n.textAlignment){case h.TextAlignmentEnum.LeftTop:break;case h.TextAlignmentEnum.LeftCenter:i.y-=o/2;break;case h.TextAlignmentEnum.LeftBottom:i.y-=o;break;case h.TextAlignmentEnum.CenterTop:i.x-=a/2;break;case h.TextAlignmentEnum.CenterCenter:i.x-=a/2,i.y-=o/2;break;case h.TextAlignmentEnum.CenterBottom:i.x-=a/2,i.y-=o;break;case h.TextAlignmentEnum.RightTop:i.x-=a;break;case h.TextAlignmentEnum.RightCenter:i.x-=a,i.y-=o/2;break;case h.TextAlignmentEnum.RightBottom:i.x-=a,i.y-=o;break;default:throw new u.ArgumentOutOfRangeException("")}return this.renderLabel(e,t,a,o,s,i)}applyScreenTransformation(e){throw new Error("not implemented")}applyScreenTransformations(e){const t=[];for(const n of e)t.push(this.applyScreenTransformation(n));return t}applyScreenTransformationForRect(e){throw new Error("not implemented")}drawSplitScreenLine(){}renderRectangle(e,t,n){throw new Error("not implemented")}drawScrollIndicator(){}drawSelectionStartSymbol(e){}drawSelectionEndSymbol(e){}renderLabel(e,t,n,i,s,r){throw new Error("not implemented")}renderSystemToScreen(e,t,n){}drawMeasure(e){throw new Error("not implemented")}drawSkyLine(e){}drawBottomLine(e){}drawInstrumentBrace(e,t){}drawGroupBracket(e,t){}isVisible(e){return!0}drawMusicSystem(e){const t=this.getSystemAbsBoundingRect(e),n=this.getSytemBoundingBoxInPixels(t);this.drawMusicSystemComponents(e,n,t)}getSytemBoundingBoxInPixels(e){const t=this.applyScreenTransformationForRect(e);return t.x=Math.round(t.x),t.y=Math.round(t.y),t}getSystemAbsBoundingRect(e){const t=e.PositionAndShape.BoundingRectangle;return new a.RectangleF2D(e.PositionAndShape.AbsolutePosition.x+e.PositionAndShape.BorderLeft-1,e.PositionAndShape.AbsolutePosition.y+e.PositionAndShape.BorderTop-1,t.width+6,t.height+2)}drawMusicSystemComponents(e,t,n){const i=this.graphicalMusicSheet.SelectionStartSymbol,r=this.graphicalMusicSheet.SelectionEndSymbol;this.drawingParameters.drawSelectionStartSymbol&&void 0!==i&&this.isVisible(i.PositionAndShape)&&this.drawSelectionStartSymbol(i),this.drawingParameters.drawSelectionEndSymbol&&void 0!==r&&this.isVisible(r.PositionAndShape)&&this.drawSelectionEndSymbol(r);for(const s of e.StaffLines)this.drawStaffLine(s),this.rules.RenderLyrics&&(s.LyricsDashes.length>0&&this.drawDashes(s.LyricsDashes),s.LyricLines.length>0&&this.drawLyricLines(s.LyricLines,s));for(const s of e.SystemLines)this.drawSystemLineObject(s);if(this.rules.RenderSystemLabelsAfterFirstPage||e.Parent===e.Parent.Parent.MusicPages[0])for(const l of e.Labels)l.SVGNode=this.drawLabel(l,s.GraphicalLayers.Notes);const a=this.graphicalMusicSheet.ParentMusicSheet.Instruments,o=a.filter((e=>e.isVisible())).length;for(const s of e.InstrumentBrackets)this.drawInstrumentBrace(s,e);if(a.length>0)if(o>1)for(const s of e.GroupBrackets)this.drawGroupBracket(s,e);else for(const s of e.GroupBrackets)s.Visible=!1;if(!this.leadSheet)for(const l of e.MeasureNumberLabels)l.SVGNode=this.drawLabel(l,s.GraphicalLayers.Notes);for(const s of e.StaffLines)this.drawStaffLineSymbols(s);this.drawingParameters.drawMarkedAreas&&this.drawMarkedAreas(e),this.drawingParameters.drawComments&&this.drawComment(e)}activateSystemRendering(e,t,n,i){return!0}drawSystemLineObject(e){}drawStaffLine(e){for(const t of e.Measures)this.drawMeasure(t);this.rules.RenderLyrics&&e.LyricsDashes.length>0&&this.drawDashes(e.LyricsDashes),this.drawOctaveShifts(e),this.drawPedals(e),this.drawExpressions(e),this.skyLineVisible&&this.drawSkyLine(e),this.bottomLineVisible&&this.drawBottomLine(e)}drawLyricLines(e,t){t.LyricLines.forEach((e=>{e.Start.y+=t.PositionAndShape.AbsolutePosition.y,e.End.y+=t.PositionAndShape.AbsolutePosition.y,e.Start.x+=t.PositionAndShape.AbsolutePosition.x,e.End.x+=t.PositionAndShape.AbsolutePosition.x,this.drawGraphicalLine(e,this.rules.LyricUnderscoreLineWidth,e.colorHex)}))}drawExpressions(e){}drawGraphicalLine(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"black";return this.drawLine(e.Start,e.End,n,t)}drawLine(e,t){}drawDashes(e){e.forEach((e=>{var t;e.SVGNode=this.drawLabel(e,s.GraphicalLayers.Notes),null===(t=e.SVGNode)||void 0===t||t.classList.add("dash")}))}drawOctaveShifts(e){}drawStaffLines(e){if(e.StaffLines){const t=e.PositionAndShape.AbsolutePosition;for(let n=0;n<5;n++)this.drawLineAsHorizontalRectangleWithOffset(e.StaffLines[n],t,s.GraphicalLayers.Notes)}}drawInstantaneousDynamic(e){throw new Error("not implemented")}drawContinuousDynamic(e){throw new Error("not implemented")}drawSymbol(e,t,n){arguments.length>4&&void 0!==arguments[4]||s.GraphicalLayers.Notes}get leadSheet(){return this.graphicalMusicSheet.LeadSheet}set leadSheet(e){this.graphicalMusicSheet.LeadSheet=e}drawPage(e){if(this.isVisible(e.PositionAndShape)){for(const t of e.MusicSystems)this.isVisible(t.PositionAndShape)&&this.drawMusicSystem(t);if(e===e.Parent.MusicPages[0])for(const t of e.Labels)t.SVGNode=this.drawLabel(t,s.GraphicalLayers.Notes);this.drawableBoundingBoxElement&&this.drawBoundingBoxes(e.PositionAndShape,0,this.drawableBoundingBoxElement)}}drawBoundingBoxes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=e.DataObject.constructor.name;let r=!1;if("all"===n?r=!0:"VexFlowStaffEntry"===n?r=e.DataObject instanceof m.VexFlowStaffEntry:"VexFlowMeasure"===n?r=e.DataObject instanceof m.VexFlowMeasure:"VexFlowGraphicalNote"===n?r=e.DataObject instanceof m.VexFlowGraphicalNote:"VexFlowVoiceEntry"===n?r=e.DataObject instanceof m.VexFlowVoiceEntry:"GraphicalLabel"===n?r=e.DataObject instanceof l.GraphicalLabel:"VexFlowStaffLine"===n?r=e.DataObject instanceof m.VexFlowStaffLine:"SystemLine"===n?r=e.DataObject instanceof d.SystemLine:"StaffLineActivitySymbol"===n?r=e.DataObject instanceof g.StaffLineActivitySymbol:"VexFlowContinuousDynamicExpression"===n&&(r=e.DataObject instanceof m.VexFlowContinuousDynamicExpression),r||s===n){let n;i&&(n=s),this.drawBoundingBox(e,void 0,!0,n,t)}t++,e.ChildElements.forEach((e=>this.drawBoundingBoxes(e,t,n)))}drawBoundingBox(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=new a.RectangleF2D(e.AbsolutePosition.x+e.BorderMarginLeft,e.AbsolutePosition.y+e.BorderMarginTop,e.BorderMarginRight-e.BorderMarginLeft,e.BorderMarginBottom-e.BorderMarginTop);n&&(this.drawLineAsHorizontalRectangle(new r.GraphicalLine(new o.PointF2D(e.AbsolutePosition.x-1,e.AbsolutePosition.y),new o.PointF2D(e.AbsolutePosition.x+1,e.AbsolutePosition.y),.1,s.OutlineAndFillStyleEnum.BaseWritingColor,t),u-1),this.drawLineAsVerticalRectangle(new r.GraphicalLine(new o.PointF2D(e.AbsolutePosition.x,e.AbsolutePosition.y-1),new o.PointF2D(e.AbsolutePosition.x,e.AbsolutePosition.y+1),.1,s.OutlineAndFillStyleEnum.BaseWritingColor,t),u-1)),d=this.applyScreenTransformationForRect(d);const f=this.renderRectangle(d,s.GraphicalLayers.Background,u,t,.5);if(i){const e=new c.Label(i),t=new l.GraphicalLabel(e,.8,h.TextAlignmentEnum.CenterCenter,this.rules);t.setLabelPositionAndShapeBorders(),this.renderLabel(t,u,d.width,d.height,d.height,new o.PointF2D(d.x,d.y+12))}return f}drawMarkedAreas(e){for(const t of e.GraphicalMarkedAreas)t&&(t.systemRectangle&&this.drawRectangle(t.systemRectangle,s.GraphicalLayers.Background),t.settings&&(t.settings.SVGNode=this.drawLabel(t.settings,s.GraphicalLayers.Comment)),t.labelRectangle&&this.drawRectangle(t.labelRectangle,s.GraphicalLayers.Background),t.label&&(t.label.SVGNode=this.drawLabel(t.label,s.GraphicalLayers.Comment)))}drawComment(e){for(const t of e.GraphicalComments)t&&(t.settings&&(t.settings.SVGNode=this.drawLabel(t.settings,s.GraphicalLayers.Comment)),t.label&&(t.label.SVGNode=this.drawLabel(t.label,s.GraphicalLayers.Comment)))}drawStaffLineSymbols(e){const t=e.ParentStaff.ParentInstrument,n=e.PositionAndShape.AbsolutePosition.x,i=e.PositionAndShape.AbsolutePosition.y+2,a=e.PositionAndShape.BorderRight;t.highlight&&this.drawingParameters.drawHighlights&&this.drawLineAsHorizontalRectangle(new r.GraphicalLine(new o.PointF2D(n,i),new o.PointF2D(n+a,i),4,s.OutlineAndFillStyleEnum.Highlighted),s.GraphicalLayers.Highlight);let l=p.MusicSymbolDrawingStyle.Disabled,c=f.MusicSymbol.PLAY,h=this.drawingParameters.drawActivitySymbols;switch(this.phonicScoreMode){case p.PhonicScoreModes.Midi:c=f.MusicSymbol.PLAY,this.midiPlaybackAvailable&&e.ParentStaff.audible&&(l=p.MusicSymbolDrawingStyle.PlaybackSymbols);break;case p.PhonicScoreModes.Following:c=f.MusicSymbol.MIC,e.ParentStaff.following&&(l=p.MusicSymbolDrawingStyle.FollowSymbols);break;default:h=!1}if(h){const e=new o.PointF2D(n+a+2,i);this.drawSymbol(c,l,e)}if(this.drawingParameters.drawErrors)for(const u of e.Measures){const e=u.PositionAndShape,t=e.AbsolutePosition.x,n=e.AbsolutePosition.y+2;u.hasError&&this.graphicalMusicSheet.ParentMusicSheet.DrawErroneousMeasures&&this.drawLineAsHorizontalRectangle(new r.GraphicalLine(new o.PointF2D(t,n),new o.PointF2D(t+e.BorderRight,n),4,s.OutlineAndFillStyleEnum.ErrorUnderlay),s.GraphicalLayers.MeasureError)}}}},1974:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractGraphicalInstruction=void 0;const i=n(7741);class s extends i.GraphicalObject{constructor(e){super(),this.parent=e}get Parent(){return this.parent}set Parent(e){this.parent=e}}t.AbstractGraphicalInstruction=s},2002:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER",e[e.INSIDE_AT_END=2]="INSIDE_AT_END",e[e.INSIDE_AT_START=3]="INSIDE_AT_START"}(n||(n={}));var i=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t={}),this.rootIds=e,this.nodes=t,this.initRootIds(),this.initNodes()}return e.prototype.initRootIds=function(){for(var e=0,t=this.rootIds;e<t.length;e++){var n=t[e];this.createEmptyNodeIfNotExist(n)}},e.prototype.initNodes=function(){for(var e in this.nodes)if(this.nodes.hasOwnProperty(e))for(var t=0,n=this.nodes[e];t<n.length;t++){var i=n[t];this.createEmptyNodeIfNotExist(i)}},e.prototype.createEmptyNodeIfNotExist=function(e){this.nodes[e]||(this.nodes[e]=[])},e.prototype.getRootIds=function(){return this.rootIds.slice()},e.prototype.getNodes=function(){var e={};for(var t in this.nodes)this.nodes.hasOwnProperty(t)&&(e[t]=this.nodes[t].slice());return e},e.prototype.getObject=function(){return{rootIds:this.getRootIds(),nodes:this.getNodes()}},e.prototype.toObject=function(){return this.getObject()},e.prototype.flatten=function(){for(var e=[],t=0;t<this.rootIds.length;t++){var n=this.rootIds[t];e.push({id:n,level:0,hasParent:!1,childrenCount:0}),o(n,this.nodes,e,0)}for(var i=0,s=e;i<s.length;i++){var r=s[i];r.childrenCount=(a=r.id,this.nodes[a]?this.nodes[a].length:0)}var a;return e;function o(e,t,n,i){if(void 0===i&&(i=0),e&&t&&n&&t[e]){i++;for(var s=t[e],r=0;r<s.length;r++){var a=s[r];n.push({id:a,level:i,hasParent:!0}),o(a,t,n,i)}i--}}},e.prototype.moveIdBeforeId=function(e,t){return this.moveId(e,t,n.BEFORE)},e.prototype.moveIdAfterId=function(e,t){return this.moveId(e,t,n.AFTER)},e.prototype.moveIdIntoId=function(e,t,i){return void 0===i&&(i=!0),i?this.moveId(e,t,n.INSIDE_AT_START):this.moveId(e,t,n.INSIDE_AT_END)},e.prototype.swapRootIdWithRootId=function(e,t){var n=this.findRootId(e),i=this.findRootId(t);this.swapRootPositionWithRootPosition(n,i)},e.prototype.swapRootPositionWithRootPosition=function(e,t){var n=this.rootIds[t];this.rootIds[t]=this.rootIds[e],this.rootIds[e]=n},e.prototype.deleteId=function(e){this.rootDeleteId(e),this.nodeAndSubNodesDelete(e),this.nodeRefrencesDelete(e)},e.prototype.insertIdBeforeId=function(e,t){var n=this.findRootId(e);for(var i in n>-1&&this.insertIdIntoRoot(t,n),this.nodes)if(this.nodes.hasOwnProperty(i)){var s=this.findNodeId(i,e);s>-1&&this.insertIdIntoNode(i,t,s)}},e.prototype.insertIdAfterId=function(e,t){var n=this.findRootId(e);for(var i in n>-1&&this.insertIdIntoRoot(t,n+1),this.nodes)if(this.nodes.hasOwnProperty(i)){var s=this.findNodeId(i,e);s>-1&&this.insertIdIntoNode(i,t,s+1)}},e.prototype.insertIdIntoId=function(e,t){this.nodeInsertAtEnd(e,t),this.nodes[t]=[]},e.prototype.insertIdIntoRoot=function(e,t){if(void 0===t)this.rootInsertAtEnd(e);else if(t<0){var n=this.rootIds.length;this.rootIds.splice(t+n+1,0,e)}else this.rootIds.splice(t,0,e);this.nodes[e]=this.nodes[e]||[]},e.prototype.insertIdIntoNode=function(e,t,n){if(this.nodes[e]=this.nodes[e]||[],this.nodes[t]=this.nodes[t]||[],void 0===n)this.nodeInsertAtEnd(e,t);else if(n<0){var i=this.nodes[e].length;this.nodes[e].splice(n+i+1,0,t)}else this.nodes[e].splice(n,0,t)},e.prototype.moveId=function(e,t,i){var s=e,r=this.findRootId(s);for(var a in this.nodes[t],this.nodes)if(this.nodes.hasOwnProperty(a)){this.findNodeId(a,t);break}var o=t,l=this.findRootId(o);for(var a in this.nodes[t],this.nodes)if(this.nodes.hasOwnProperty(a)){this.findNodeId(a,t);break}if(r>-1){if(l>-1)switch(this.rootDelete(r),l>r&&l--,i){case n.BEFORE:this.insertIdIntoRoot(s,l);break;case n.AFTER:this.insertIdIntoRoot(s,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(o,s);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(o,s)}else for(var a in this.rootDelete(r),this.nodes)if(this.nodes.hasOwnProperty(a)&&(c=this.findNodeId(a,o))>-1){switch(i){case n.BEFORE:this.insertIdIntoNode(a,s,c);break;case n.AFTER:this.insertIdIntoNode(a,s,c+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(o,s);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(o,s)}break}}else if(l>-1){for(var a in this.nodes)if(this.nodes.hasOwnProperty(a)&&(c=this.findNodeId(a,s))>-1){this.nodeDeleteAtIndex(a,c);break}switch(i){case n.BEFORE:this.insertIdIntoRoot(s,l);break;case n.AFTER:this.insertIdIntoRoot(s,l+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(o,s);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(o,s)}}else{for(var a in this.nodes)if(this.nodes.hasOwnProperty(a)&&(c=this.findNodeId(a,s))>-1){this.nodeDeleteAtIndex(a,c);break}for(var a in this.nodes){var c;if(this.nodes.hasOwnProperty(a)&&(c=this.findNodeId(a,o))>-1){switch(i){case n.BEFORE:this.insertIdIntoNode(a,s,c);break;case n.AFTER:this.insertIdIntoNode(a,s,c+1);break;case n.INSIDE_AT_START:this.nodeInsertAtStart(o,s);break;case n.INSIDE_AT_END:this.nodeInsertAtEnd(o,s)}break}}}},e.prototype.swapArrayElements=function(e,t,n){var i=e[t];return e[t]=e[n],e[n]=i,e},e.prototype.rootDeleteId=function(e){var t=this.findRootId(e);t>-1&&this.rootDelete(t)},e.prototype.nodeAndSubNodesDelete=function(e){for(var t=[],n=0;n<this.nodes[e].length;n++){var i=this.nodes[e][n];this.nodeAndSubNodesDelete(i),t.push(e)}for(this.nodeDelete(e),n=0;n<t.length;n++)this.nodeDelete(t[n])},e.prototype.nodeRefrencesDelete=function(e){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t))for(var n=0;n<this.nodes[t].length;n++)this.nodes[t][n]===e&&this.nodeDeleteAtIndex(t,n)},e.prototype.nodeDelete=function(e){delete this.nodes[e]},e.prototype.findRootId=function(e){return this.rootIds.indexOf(e)},e.prototype.findNodeId=function(e,t){return this.nodes[e].indexOf(t)},e.prototype.findNode=function(e){return this.nodes[e]},e.prototype.nodeInsertAtStart=function(e,t){this.nodes[e].unshift(t)},e.prototype.nodeInsertAtEnd=function(e,t){this.nodes[e].push(t)},e.prototype.rootDelete=function(e){this.rootIds.splice(e,1)},e.prototype.nodeDeleteAtIndex=function(e,t){this.nodes[e].splice(t,1)},e.prototype.rootInsertAtStart=function(e){this.rootIds.unshift(e)},e.prototype.rootInsertAtEnd=function(e){this.rootIds.push(e)},e}();t.default=i},2083:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4538),s=function(){function e(){this.list=new i.default}return e.prototype.push=function(e){return this.list.add(e,0)},e.prototype.add=function(e){return this.list.add(e,0)},e.prototype.pop=function(){return this.list.removeElementAtIndex(0)},e.prototype.peek=function(){return this.list.first()},e.prototype.size=function(){return this.list.size()},e.prototype.contains=function(e,t){return this.list.contains(e,t)},e.prototype.isEmpty=function(){return this.list.isEmpty()},e.prototype.clear=function(){this.list.clear()},e.prototype.forEach=function(e){this.list.forEach(e)},e}();t.default=s},2091:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4831),s=n(4713),r=n(6119),a=function(){function e(e){this.dictionary=new r.default(e)}return e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.add=function(e){return!this.contains(e)&&!i.isUndefined(e)&&(this.dictionary.setValue(e,e),!0)},e.prototype.intersection=function(e){var t=this;this.forEach((function(n){return e.contains(n)||t.remove(n),!0}))},e.prototype.union=function(e){var t=this;e.forEach((function(e){return t.add(e),!0}))},e.prototype.difference=function(e){var t=this;e.forEach((function(e){return t.remove(e),!0}))},e.prototype.isSubsetOf=function(e){if(this.size()>e.size())return!1;var t=!0;return this.forEach((function(n){return!!e.contains(n)||(t=!1,!1)})),t},e.prototype.remove=function(e){return!!this.contains(e)&&(this.dictionary.remove(e),!0)},e.prototype.forEach=function(e){this.dictionary.forEach((function(t,n){return e(n)}))},e.prototype.toArray=function(){return this.dictionary.values()},e.prototype.isEmpty=function(){return this.dictionary.isEmpty()},e.prototype.size=function(){return this.dictionary.size()},e.prototype.clear=function(){this.dictionary.clear()},e.prototype.toString=function(){return s.toString(this.toArray())},e}();t.default=a},2148:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicEnum=t.InstantaneousDynamicExpression=void 0;const s=n(6362),r=n(6990),a=n(7307),o=i(n(3065)),l=n(3263);class c extends s.AbstractExpression{static staticConstructor(){c.dynamicToRelativeVolumeDict.setValue(h.ffffff,1),c.dynamicToRelativeVolumeDict.setValue(h.fffff,126/127),c.dynamicToRelativeVolumeDict.setValue(h.ffff,125/127),c.dynamicToRelativeVolumeDict.setValue(h.fff,124/127),c.dynamicToRelativeVolumeDict.setValue(h.ff,122/127),c.dynamicToRelativeVolumeDict.setValue(h.f,108/127),c.dynamicToRelativeVolumeDict.setValue(h.mf,76/127),c.dynamicToRelativeVolumeDict.setValue(h.sf,.5),c.dynamicToRelativeVolumeDict.setValue(h.sfp,.5),c.dynamicToRelativeVolumeDict.setValue(h.sfpp,.5),c.dynamicToRelativeVolumeDict.setValue(h.fp,.5),c.dynamicToRelativeVolumeDict.setValue(h.rf,.5),c.dynamicToRelativeVolumeDict.setValue(h.rfz,.5),c.dynamicToRelativeVolumeDict.setValue(h.sfz,.5),c.dynamicToRelativeVolumeDict.setValue(h.sffz,.5),c.dynamicToRelativeVolumeDict.setValue(h.fz,.5),c.dynamicToRelativeVolumeDict.setValue(h.mp,60/127),c.dynamicToRelativeVolumeDict.setValue(h.p,28/127),c.dynamicToRelativeVolumeDict.setValue(h.pp,12/127),c.dynamicToRelativeVolumeDict.setValue(h.ppp,10/127),c.dynamicToRelativeVolumeDict.setValue(h.pppp,7/127),c.dynamicToRelativeVolumeDict.setValue(h.ppppp,5/127),c.dynamicToRelativeVolumeDict.setValue(h.pppppp,4/127)}constructor(e,t,n,i,s){super(n),this.parentMeasure=s,this.dynamicEnum=h[e.toLowerCase()],this.soundDynamic=t,this.staffNumber=i}get ParentMultiExpression(){return this.multiExpression}set ParentMultiExpression(e){this.multiExpression=e}get DynEnum(){return this.dynamicEnum}set DynEnum(e){this.dynamicEnum=e}get SoundDynamic(){return this.soundDynamic}set SoundDynamic(e){this.soundDynamic=e}get Placement(){return this.placement}set Placement(e){this.placement=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get Length(){return Math.abs(this.length)<1e-4&&(this.length=this.calculateLength()),this.length}get MidiVolume(){return 127*this.Volume}get Volume(){return c.dynamicToRelativeVolumeDict.getValue(this.dynamicEnum)}static isInputStringInstantaneousDynamic(e){return!!e&&c.isStringInStringList(c.listInstantaneousDynamics,e)}getDynamicExpressionSymbol(e){switch(e){case"p":return r.DynamicExpressionSymbolEnum.p;case"f":return r.DynamicExpressionSymbolEnum.f;case"s":return r.DynamicExpressionSymbolEnum.s;case"z":return r.DynamicExpressionSymbolEnum.z;case"m":return r.DynamicExpressionSymbolEnum.m;case"r":return r.DynamicExpressionSymbolEnum.r;default:throw new a.InvalidEnumArgumentException("unknown DynamicExpressionSymbolEnum: "+e)}}calculateLength(){return o.default.debug("[Andrea] instantaneousDynamicExpression: not implemented: calculateLength!"),0}}var h;t.InstantaneousDynamicExpression=c,c.dynamicToRelativeVolumeDict=new l.Dictionary,c.listInstantaneousDynamics=["pppppp","ppppp","pppp","ppp","pp","p","ffffff","fffff","ffff","fff","ff","f","mf","mp","sf","sff","sp","spp","fp","rf","rfz","sfz","sffz","fz"],function(e){e[e.pppppp=0]="pppppp",e[e.ppppp=1]="ppppp",e[e.pppp=2]="pppp",e[e.ppp=3]="ppp",e[e.pp=4]="pp",e[e.p=5]="p",e[e.mp=6]="mp",e[e.mf=7]="mf",e[e.f=8]="f",e[e.ff=9]="ff",e[e.fff=10]="fff",e[e.ffff=11]="ffff",e[e.fffff=12]="fffff",e[e.ffffff=13]="ffffff",e[e.sf=14]="sf",e[e.sff=15]="sff",e[e.sfp=16]="sfp",e[e.sfpp=17]="sfpp",e[e.fp=18]="fp",e[e.rf=19]="rf",e[e.rfz=20]="rfz",e[e.sfz=21]="sfz",e[e.sffz=22]="sffz",e[e.fz=23]="fz",e[e.other=24]="other"}(h||(t.DynamicEnum=h={})),c.staticConstructor()},2221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContinuousTempoType=t.ContinuousTempoExpression=void 0;const i=n(2561),s=n(9147);class r extends s.AbstractTempoExpression{constructor(e,t,n,i){super(e,t,n,i),this.setTempoType()}static isInputStringContinuousTempo(e){return!!e&&(e.endsWith(".")&&(e=e.substring(0,e.length-1)),r.isStringInStringList(r.listContinuousTempoFaster,e)||r.isStringInStringList(r.listContinuousTempoSlower,e))}static isIncreasingTempo(e){return e<=a.piuMosso}static isDecreasingTempo(e){return e>=a.allargando&&e<=a.ritenuto}get TempoType(){return this.tempoType}set TempoType(e){this.tempoType=e}get StartTempo(){return this.startTempo}set StartTempo(e){this.startTempo=e}get EndTempo(){return this.endTempo}set EndTempo(e){this.endTempo=e}get AbsoluteStartTimestamp(){return i.Fraction.plus(this.parentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.parentMultiTempoExpression.Timestamp)}get AbsoluteEndTimestamp(){return this.absoluteEndTimestamp}set AbsoluteEndTimestamp(e){this.absoluteEndTimestamp=e,this.AbsoluteTimeSpan=i.Fraction.minus(this.AbsoluteEndTimestamp,this.AbsoluteStartTimestamp).RealValue}get AbsoluteTimestamp(){return this.ParentMultiTempoExpression.AbsoluteTimestamp}getAbsoluteFloatTimestamp(){return this.ParentMultiTempoExpression.AbsoluteTimestamp.RealValue}getInterpolatedTempo(e){const t=i.Fraction.plus(this.parentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.parentMultiTempoExpression.Timestamp);if(e.lt(t))return-1;if(this.absoluteEndTimestamp.lt(e))return-2;const n=i.Fraction.minus(e,t).RealValue/i.Fraction.minus(this.absoluteEndTimestamp,t).RealValue;return Math.max(0,Math.min(250,this.startTempo+(this.endTempo-this.startTempo)*n))}setTempoType(){r.isStringInStringList(r.listContinuousTempoFaster,this.label)?this.tempoType=a.accelerando:r.isStringInStringList(r.listContinuousTempoSlower,this.label)&&(this.tempoType=a.ritardando)}getTempoFactor(){return arguments.length>0&&void 0!==arguments[0]||this.Label,1}}var a;t.ContinuousTempoExpression=r,r.listContinuousTempoFaster=["accelerando","accel","piu mosso","poco piu","stretto"],r.listContinuousTempoSlower=["poco meno","meno mosso","piu lento","calando","allargando","rallentando","ritardando","ritenuto","ritard.","ritard","rit.","rit","riten.","riten"],function(e){e[e.accelerando=0]="accelerando",e[e.stretto=1]="stretto",e[e.stringendo=2]="stringendo",e[e.mosso=3]="mosso",e[e.piuMosso=4]="piuMosso",e[e.allargando=5]="allargando",e[e.calando=6]="calando",e[e.menoMosso=7]="menoMosso",e[e.rallentando=8]="rallentando",e[e.ritardando=9]="ritardando",e[e.ritard=10]="ritard",e[e.rit=11]="rit",e[e.ritenuto=12]="ritenuto",e[e.rubato=13]="rubato",e[e.precipitando=14]="precipitando"}(a||(t.ContinuousTempoType=a={}))},2257:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(4434),t),s(n(4146),t),s(n(2570),t),s(n(5951),t),s(n(7533),t),s(n(2514),t)},2317:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LyricsEntry=void 0;const i=n(2570);t.LyricsEntry=class{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;this.text=e,this.word=n,this.parent=i,this.verseNumber=t,s>=0&&(this.syllableIndex=s)}get Text(){return this.text}set Text(e){this.text=e}get Word(){return this.word}get Parent(){return this.parent}set Parent(e){this.parent=e}get VerseNumber(){return this.verseNumber}get SyllableIndex(){return this.syllableIndex}get IsTranslation(){return this.VerseNumber.endsWith("translation")}get IsChorus(){return this.VerseNumber.startsWith("chorus")}get FontStyle(){return this.IsChorus||this.IsTranslation?i.FontStyles.Italic:i.FontStyles.Regular}}},2338:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4831),s=n(6119),r=n(4713),a=function(){function e(e,t,n){void 0===n&&(n=!1),this.dict=new s.default(e),this.equalsF=t||i.defaultEquals,this.allowDuplicate=n}return e.prototype.getValue=function(e){var t=this.dict.getValue(e);return i.isUndefined(t)?[]:r.copy(t)},e.prototype.setValue=function(e,t){if(i.isUndefined(e)||i.isUndefined(t))return!1;var n=this.dict.getValue(e);return i.isUndefined(n)?(this.dict.setValue(e,[t]),!0):!(!this.allowDuplicate&&r.contains(n,t,this.equalsF)||(n.push(t),0))},e.prototype.remove=function(e,t){if(i.isUndefined(t)){var n=this.dict.remove(e);return!i.isUndefined(n)}var s=this.dict.getValue(e);return!(i.isUndefined(s)||!r.remove(s,t,this.equalsF)||(0===s.length&&this.dict.remove(e),0))},e.prototype.keys=function(){return this.dict.keys()},e.prototype.values=function(){for(var e=[],t=0,n=this.dict.values();t<n.length;t++)for(var i=0,s=n[t];i<s.length;i++){var r=s[i];e.push(r)}return e},e.prototype.containsKey=function(e){return this.dict.containsKey(e)},e.prototype.clear=function(){this.dict.clear()},e.prototype.size=function(){return this.dict.size()},e.prototype.isEmpty=function(){return this.dict.isEmpty()},e}();t.default=a},2369:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceStaffEntry=void 0;const i=n(2561),s=n(164),r=n(4543),a=n(9288);t.SourceStaffEntry=class{constructor(e,t){this.voiceEntries=[],this.instructions=[],this.chordSymbolContainers=[],this.verticalContainerParent=e,this.parentStaff=t}get ParentStaff(){return this.parentStaff}get VerticalContainerParent(){return this.verticalContainerParent}get Timestamp(){if(this.VerticalContainerParent)return this.VerticalContainerParent.Timestamp}get AbsoluteTimestamp(){if(this.VerticalContainerParent)return i.Fraction.plus(this.VerticalContainerParent.ParentMeasure.AbsoluteTimestamp,this.VerticalContainerParent.Timestamp)}get VoiceEntries(){return this.voiceEntries}set VoiceEntries(e){this.voiceEntries=e}get Link(){return this.staffEntryLink}set Link(e){this.staffEntryLink=e}get Instructions(){return this.instructions}set Instructions(e){this.instructions=e}get ChordContainers(){return this.chordSymbolContainers}set ChordContainers(e){this.chordSymbolContainers=e}removeAllInstructionsOfTypeClefInstruction(){let e=0,t=0;for(;e<this.instructions.length;)this.instructions[e]instanceof s.ClefInstruction?(this.instructions.splice(e,1),t++):e++;return t}removeFirstInstructionOfTypeClefInstruction(){for(let e=0;e<this.instructions.length;e++)if(this.instructions[e]instanceof s.ClefInstruction)return this.instructions.splice(e,1),!0;return!1}removeAllInstructionsOfTypeKeyInstruction(){let e=0,t=0;for(;e<this.instructions.length;)this.instructions[e]instanceof r.KeyInstruction?(this.instructions.splice(e,1),t++):e++;return t}removeFirstInstructionOfTypeKeyInstruction(){for(let e=0;e<this.instructions.length;e++)if(this.instructions[e]instanceof r.KeyInstruction)return this.instructions.splice(e,1),!0;return!1}removeAllInstructionsOfTypeRhythmInstruction(){let e=0,t=0;for(;e<this.instructions.length;)this.instructions[e]instanceof a.RhythmInstruction?(this.instructions.splice(e,1),t++):e++;return t}removeFirstInstructionOfTypeRhythmInstruction(){for(let e=0;e<this.instructions.length;e++)if(this.instructions[e]instanceof a.RhythmInstruction)return this.instructions.splice(e,1),!0;return!1}calculateMinNoteLength(){let e=new i.Fraction(Number.MAX_VALUE,1);for(let t=0,n=this.VoiceEntries.length;t<n;++t){const n=this.VoiceEntries[t];for(let t=0,i=n.Notes.length;t<i;++t){const i=n.Notes[t];i.Length.lt(e)&&(e=i.Length)}}return e}calculateMaxNoteLength(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=new i.Fraction(0,1);for(let n=0,s=this.VoiceEntries.length;n<s;++n){const s=this.VoiceEntries[n];for(let n=0,r=s.Notes.length;n<r;++n){const r=s.Notes[n];if(e&&r.NoteTie){const e=i.Fraction.createFromFraction(r.Length);let n=!1;for(const t of r.NoteTie.Notes)t!==r?n&&e.Add(t.Length):n=!0;t.lt(e)&&(t=e)}else t.lt(r.Length)&&(t=r.Length)}}return t}hasNotes(){for(let e=0,t=this.VoiceEntries.length;e<t;++e)if(this.VoiceEntries[e].Notes.length>0)return!0;return!1}hasTie(){for(let e=0,t=this.VoiceEntries.length;e<t;++e)if(this.VoiceEntries[e].hasTie())return!0;return!1}findLinkedNotes(e){for(let t=0,n=this.voiceEntries.length;t<n;++t){const n=this.voiceEntries[t];for(let t=0,i=n.Notes.length;t<i;++t){const i=n.Notes[t];i.ParentStaffEntry===this&&e.push(i)}}}get hasOnlyRests(){for(const e of this.voiceEntries)for(const t of e.Notes)if(!t.isRest())return!1;return!0}}},2395:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalLyricEntry=void 0;const i=n(8254),s=n(7435),r=n(9409),a=n(7533);t.GraphicalLyricEntry=class{constructor(e,t,n,o){this.lyricsEntry=e,this.graphicalStaffEntry=t;const l=t.parentMeasure.parentSourceMeasure.Rules.LyricsAlignmentStandard;e.Text.length>=4&&e.Parent.Notes[0].Length.Denominator>4&&a.TextAlignmentEnum.LeftBottom;const c=new s.Label(e.Text),h=this.graphicalStaffEntry.parentMeasure.parentSourceMeasure.Rules;this.graphicalLabel=new i.GraphicalLabel(c,n,l,h,t.PositionAndShape),this.graphicalLabel.Label.colorDefault=h.DefaultColorLyrics,this.graphicalLabel.PositionAndShape.RelativePosition=new r.PointF2D(0,o),this.graphicalLabel.setLabelPositionAndShapeBorders(),this.graphicalLabel.PositionAndShape.Size.width<h.LyricsExtraXShiftForShortLyricsWidthThreshold&&(this.graphicalLabel.PositionAndShape.RelativePosition.x+=h.LyricsExtraXShiftForShortLyrics,this.graphicalLabel.CenteringXShift=h.LyricsExtraXShiftForShortLyrics),l===a.TextAlignmentEnum.LeftBottom&&(this.graphicalLabel.PositionAndShape.RelativePosition.x-=1)}hasDashFromLyricWord(){if(!this.ParentLyricWord)return!1;const e=this.ParentLyricWord.GraphicalLyricsEntries.indexOf(this);return this.ParentLyricWord.GraphicalLyricsEntries.length>1&&e<this.ParentLyricWord.GraphicalLyricsEntries.length-1}get LyricsEntry(){return this.lyricsEntry}get ParentLyricWord(){return this.graphicalLyricWord}set ParentLyricWord(e){this.graphicalLyricWord=e}get GraphicalLabel(){return this.graphicalLabel}set GraphicalLabel(e){this.graphicalLabel=e}get StaffEntryParent(){return this.graphicalStaffEntry}set StaffEntryParent(e){this.graphicalStaffEntry=e}}},2400:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowContinuousDynamicExpression=void 0;const i=n(1066),s=n(8254),r=n(7435),a=n(7533),o=n(2570);class l extends i.GraphicalContinuousDynamicExpression{constructor(e,t,n,i){if(super(e,t,n),this.IsVerbal){const t=new r.Label(e.Label);this.label=new s.GraphicalLabel(t,i||this.rules.ContinuousDynamicTextHeight,a.TextAlignmentEnum.LeftCenter,this.rules,this.PositionAndShape),this.label.Label.fontStyle=o.FontStyles.Italic,this.label.setLabelPositionAndShapeBorders(),this.PositionAndShape.calculateBoundingBox(),e.ColorXML&&this.rules.ExpressionsUseXMLColor&&(this.label.ColorXML=e.ColorXML)}}}t.VexFlowContinuousDynamicExpression=l},2514:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TieTypes=void 0,function(e){e.SIMPLE="",e.HAMMERON="H",e.PULLOFF="P",e.SLIDE="S",e.TAPPING="T"}(n||(t.TieTypes=n={}))},2552:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(9735),t),s(n(2257),t),s(n(599),t)},2561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Fraction=void 0;class n{static max(e,t){return e.RealValue>t.RealValue?e:t}static Equal(e,t){return e.wholeValue===t.wholeValue&&e.Denominator===t.Denominator&&e.Numerator===t.Numerator}static createFromFraction(e){return new n(e.numerator,e.denominator,e.wholeValue,!1)}static plus(e,t){const n=e.clone();return n.Add(t),n}static minus(e,t){const n=e.clone();return n.Sub(t),n}static multiply(e,t){return new n((e.wholeValue*e.denominator+e.numerator)*(t.wholeValue*t.denominator+t.numerator),e.denominator*t.denominator)}static greatestCommonDenominator(e,t){if(0===e)return t;if(1===t)return 1;for(;Math.abs(t)>=1&&Math.abs(e)>=1;)e>t?e-=t:t-=e;const n=Math.round(e);return Math.max(n,1)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.numerator=0,this.denominator=1,this.wholeValue=0,this.numerator=e,this.denominator=t,this.wholeValue=n,i&&this.simplify(),this.setRealValue()}toString(){let e=this.numerator+"/"+this.denominator;return 0!==this.wholeValue&&(e=this.wholeValue+" "+e),e}clone(){return new n(this.numerator,this.denominator,this.wholeValue,!1)}get Numerator(){return this.numerator}set Numerator(e){this.numerator!==e&&(this.numerator=e,this.simplify(),this.setRealValue())}get Denominator(){return this.denominator}set Denominator(e){this.denominator!==e&&(this.denominator=e,0!==this.numerator&&this.simplify(),this.setRealValue())}get WholeValue(){return this.wholeValue}set WholeValue(e){this.wholeValue!==e&&(this.wholeValue=e,this.setRealValue())}GetExpandedNumerator(){return this.wholeValue*this.denominator+this.numerator}calculateNumberOfNeededDots(){let e=1,t=2;const n=this.GetExpandedNumerator();for(;t<n;)e++,t=Math.pow(2,e);return Math.min(3,e-1)}IsNegative(){return this.realValue<0}get RealValue(){return this.realValue}expand(e){this.numerator*=e,this.denominator*=e,0!==this.wholeValue&&(this.numerator+=this.wholeValue*this.denominator,this.wholeValue=0)}Add(e){return this.numerator=(this.wholeValue*this.denominator+this.numerator)*e.denominator+(e.wholeValue*e.denominator+e.numerator)*this.denominator,this.denominator=this.denominator*e.denominator,this.wholeValue=0,this.simplify(),this.setRealValue(),this}Sub(e){return this.numerator=(this.wholeValue*this.denominator+this.numerator)*e.denominator-(e.wholeValue*e.denominator+e.numerator)*this.denominator,this.denominator=this.denominator*e.denominator,this.wholeValue=0,this.simplify(),this.setRealValue(),this}Quantize(e){if(this.denominator<=e)return this;const t=new n(this.numerator+1,this.denominator,this.wholeValue);for(;t.Denominator>e;)t.Numerator++;if(this.numerator>this.denominator){const i=new n(this.numerator-1,this.denominator,this.wholeValue);for(;i.Denominator>e;)i.Numerator--;if(i.Denominator<t.Denominator)return i}return t}Equals(e){return this.realValue===(null===e||void 0===e?void 0:e.realValue)}CompareTo(e){const t=this.realValue-e.realValue;return t?t<0?-1:1:0}lt(e){return this.realValue<e.realValue}lte(e){return this.realValue<=e.realValue}gt(e){return!this.lte(e)}gte(e){return!this.lt(e)}setRealValue(){this.realValue=this.wholeValue+this.numerator/this.denominator}simplify(){if(0===this.numerator)return void(this.denominator=1);const e=n.greatestCommonDenominator(Math.abs(this.numerator),Math.abs(this.denominator));this.numerator/=e,this.denominator/=e;const t=Math.floor(this.numerator/this.denominator);if(0!==t&&(this.wholeValue+=t,this.numerator-=t*this.denominator,0===this.numerator&&(this.denominator=1)),this.denominator>n.maximumAllowedNumber){const e=this.denominator/n.maximumAllowedNumber;this.numerator=Math.round(this.numerator/e),this.denominator=Math.round(this.denominator/e)}if(this.numerator>n.maximumAllowedNumber){const e=this.numerator/n.maximumAllowedNumber;this.numerator=Math.round(this.numerator/e),this.denominator=Math.round(this.denominator/e)}}isOnBeat(e){const t=this.distanceFromBeat(e);return Math.abs(t)<n.FloatInaccuracyTolerance}distanceFromBeat(e){const t=new n(1,e.Denominator);return this.RealValue%t.RealValue}}t.Fraction=n,n.maximumAllowedNumber=46340,n.FloatInaccuracyTolerance=1e-4},2570:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.FontStyles=void 0,function(e){e[e.Regular=0]="Regular",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic",e[e.BoldItalic=3]="BoldItalic",e[e.Underlined=4]="Underlined"}(n||(t.FontStyles=n={}))},2683:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoColorSet=t.NoteState=t.GraphicalLayers=t.StyleSets=t.OUTLINE_AND_FILL_STYLE_DICT=t.OutlineAndFillStyleEnum=void 0;const i=n(3263);var s,r,a,o,l;!function(e){e[e.BaseWritingColor=0]="BaseWritingColor",e[e.FollowingCursor=1]="FollowingCursor",e[e.AlternativeFollowingCursor=2]="AlternativeFollowingCursor",e[e.PlaybackCursor=3]="PlaybackCursor",e[e.Highlighted=4]="Highlighted",e[e.ErrorUnderlay=5]="ErrorUnderlay",e[e.Selected=6]="Selected",e[e.SelectionSymbol=7]="SelectionSymbol",e[e.DebugColor1=8]="DebugColor1",e[e.DebugColor2=9]="DebugColor2",e[e.DebugColor3=10]="DebugColor3",e[e.SplitScreenDivision=11]="SplitScreenDivision",e[e.GreyTransparentOverlay=12]="GreyTransparentOverlay",e[e.MarkedArea1=13]="MarkedArea1",e[e.MarkedArea2=14]="MarkedArea2",e[e.MarkedArea3=15]="MarkedArea3",e[e.MarkedArea4=16]="MarkedArea4",e[e.MarkedArea5=17]="MarkedArea5",e[e.MarkedArea6=18]="MarkedArea6",e[e.MarkedArea7=19]="MarkedArea7",e[e.MarkedArea8=20]="MarkedArea8",e[e.MarkedArea9=21]="MarkedArea9",e[e.MarkedArea10=22]="MarkedArea10",e[e.Comment1=23]="Comment1",e[e.Comment2=24]="Comment2",e[e.Comment3=25]="Comment3",e[e.Comment4=26]="Comment4",e[e.Comment5=27]="Comment5",e[e.Comment6=28]="Comment6",e[e.Comment7=29]="Comment7",e[e.Comment8=30]="Comment8",e[e.Comment9=31]="Comment9",e[e.Comment10=32]="Comment10"}(s||(t.OutlineAndFillStyleEnum=s={})),t.OUTLINE_AND_FILL_STYLE_DICT=new i.Dictionary,t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.BaseWritingColor,"Thistle"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.FollowingCursor,"Aqua"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.AlternativeFollowingCursor,"Azure"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.PlaybackCursor,"Bisque"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Highlighted,"CadetBlue"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.ErrorUnderlay,"DarkBlue"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Selected,"DarkGoldenRod"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.SelectionSymbol,"BlanchedAlmond"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.DebugColor1,"Chartreuse"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.DebugColor2,"DarkGreen"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.DebugColor3,"DarkOrange"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.SplitScreenDivision,"FireBrick"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.GreyTransparentOverlay,"DarkSalmon"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea1,"DarkSeaGreen"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea2,"DarkOrchid"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea3,"Aquamarine"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea4,"DarkKhaki"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea5,"ForestGreen"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea6,"AliceBlue"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea7,"DeepPink"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea8,"Coral"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea9,"DarkOliveGreen"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.MarkedArea10,"Chocolate"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment1,"DodgerBlue"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment2,"Blue"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment3,"Beige"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment4,"Crimson"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment5,"Fuchsia"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment6,"Brown"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment7,"BlanchedAlmond"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment8,"CornflowerBlue"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment9,"Cornsilk"),t.OUTLINE_AND_FILL_STYLE_DICT.setValue(s.Comment10,"DarkGrey"),function(e){e[e.MarkedArea=0]="MarkedArea",e[e.Comment=1]="Comment"}(r||(t.StyleSets=r={})),function(e){e[e.Background=0]="Background",e[e.Highlight=1]="Highlight",e[e.MeasureError=2]="MeasureError",e[e.SelectionSymbol=3]="SelectionSymbol",e[e.Cursor=4]="Cursor",e[e.PSI_Debug=5]="PSI_Debug",e[e.Notes=6]="Notes",e[e.Comment=7]="Comment",e[e.Debug_above=8]="Debug_above"}(a||(t.GraphicalLayers=a={})),function(e){e[e.Normal=0]="Normal",e[e.Selected=1]="Selected",e[e.Follow_Confirmed=2]="Follow_Confirmed",e[e.QFeedback_NotFound=3]="QFeedback_NotFound",e[e.QFeedback_OK=4]="QFeedback_OK",e[e.QFeedback_Perfect=5]="QFeedback_Perfect",e[e.Debug1=6]="Debug1",e[e.Debug2=7]="Debug2",e[e.Debug3=8]="Debug3"}(o||(t.NoteState=o={})),function(e){e.C="#d82c6b",e.D="#F89D15",e.E="#FFE21A",e.F="#4dbd5c",e.G="#009D96",e.A="#43469d",e.B="#76429c",e.Rest="#000000"}(l||(t.AutoColorSet=l={}))},2768:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalOctaveShift=void 0;const i=n(7741),s=n(437),r=n(6438),a=n(512),o=n(7307);class l extends i.GraphicalObject{constructor(e,t){super(),this.getOctaveShift=e,this.setSymbol(),this.PositionAndShape=new r.BoundingBox(this,t)}setSymbol(){switch(this.getOctaveShift.Type){case s.OctaveEnum.VA8:this.octaveSymbol=a.MusicSymbol.VA8;break;case s.OctaveEnum.VB8:this.octaveSymbol=a.MusicSymbol.VB8;break;case s.OctaveEnum.MA15:this.octaveSymbol=a.MusicSymbol.MA15;break;case s.OctaveEnum.MB15:this.octaveSymbol=a.MusicSymbol.MB15;break;default:throw new o.ArgumentOutOfRangeException("")}}}t.GraphicalOctaveShift=l},2774:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PSMath=void 0;class n{static log(e,t){return Math.log(t)/Math.log(e)}static log10(e){return n.log(10,e)}static meanSimple(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}static meanWeighted(e,t){if(e.length!==t.length||0===e.length)return 0;let n=0,i=0;for(let s=0;s<e.length;s++){const r=t[s];n+=e[s]*r,i+=r}return n/i}}t.PSMath=n},2779:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SkyBottomLineCalculator=void 0,n(9409);const s=n(9479),r=i(n(3065)),a=n(5479),o=n(9834);t.SkyBottomLineCalculator=class{constructor(e){this.mStaffLineParent=e,this.mRules=e.ParentMusicSystem.rules}updateLines(e){const t=this.StaffLineParent.Measures;if(e.length!==t.length)if(r.default.warn("SkyBottomLineCalculator: lengths of calculation result array and measure array do not match"),e.length<t.length)for(;e.length<t.length;)e.push(new a.SkyBottomLineCalculationResult([],[]));else e=e.slice(0,t.length);const n=Math.max(Math.ceil(this.StaffLineParent.PositionAndShape.Size.width*this.SamplingUnit),1);this.mSkyLine=[],this.mBottomLine=[];for(const{skyLine:s,bottomLine:r}of e)this.mSkyLine.push(...s),this.mBottomLine.push(...r);const i=this.mSkyLine.length/n,o=[],l=[];for(let s=0;s<this.mSkyLine.length&&o.length!==n;s+=i){const e=Math.min(this.mSkyLine.length,s+i);let t=this.mSkyLine.slice(s,e+1);o.push(Math.min(...t)),t=this.mBottomLine.slice(s,e+1),l.push(Math.max(...t))}this.mSkyLine=o,this.mBottomLine=l,this.mSkyLine.length!==n&&r.default.debug("SkyLine calculation was not correct (".concat(this.mSkyLine.length," instead of ").concat(n,")"));const c=Math.max(...this.mSkyLine);this.mSkyLine=this.mSkyLine.map((e=>(e-c)/s.unitInPixels+this.StaffLineParent.TopLineOffset));const h=Math.min(...this.mBottomLine);this.mBottomLine=this.mBottomLine.map((e=>(e-h)/s.unitInPixels+this.StaffLineParent.BottomLineOffset))}calculateLines(){const e=this.mRules.SamplingUnit,t=[],n=new o.CanvasVexFlowBackend(this.mRules);for(const i of this.StaffLineParent.Measures){i.PositionAndShape.calculateAbsolutePositionsRecursive(0,0);const s=i.getVFStave();let o=s.getWidth();o>0||i.IsExtraGraphicalMeasure||(r.default.warn("SkyBottomLineCalculator: width not > 0 in measure "+i.MeasureNumber),o=50),n.initializeHeadless(o);const l=n.getContext(),c=n.getCanvas();o=c.width;const h=c.height;s.setY(s.y+100);const u=s.getWidth();s.setWidth(o),i.format(),s.setWidth(u);try{i.draw(l)}catch(e){r.default.warn("SkyBottomLineCalculator.calculateLines.draw",e)}const d=l.getImageData(0,0,o,h),f=4,p=Math.max(Math.ceil(i.PositionAndShape.Size.width*e),1),m=new Array(p),g=new Array(p);for(let e=0;e<o;e++){for(let t=0;t<h;t++){const n=t*o*f+e*f;if(d.data[n+3]>0){m[e]=t;break}}for(let t=h;t>0;t--){const n=t*o*f+e*f;if(d.data[n+3]>0){g[e]=t;break}}}for(let e=0;e<m.length;e++)void 0===m[e]&&(m[e]=Math.max(this.findPreviousValidNumber(e,m),this.findNextValidNumber(e,m)));for(let e=0;e<g.length;e++)void 0===g[e]&&(g[e]=Math.max(this.findPreviousValidNumber(e,g),this.findNextValidNumber(e,g)));t.push(new a.SkyBottomLineCalculationResult(m,g)),n.clear()}this.updateLines(t)}updateSkyLineWithLine(e,t,n){const i=Math.floor(e.x*this.SamplingUnit),s=Math.ceil(t.x*this.SamplingUnit);for(let r=i+1;r<Math.min(s,this.SkyLine.length);r++)this.SkyLine[r]=n}updateSkyLineWithWedge(e,t){let n=Math.floor(e.x*this.SamplingUnit),i=Math.ceil(t.x*this.SamplingUnit),s=(t.y-e.y)/(t.x-e.x);i-n<=1&&(i++,s=0),n<0&&(n=0),n>=this.BottomLine.length&&(n=this.BottomLine.length-1),i<0&&(i=0),i>=this.BottomLine.length&&(i=this.BottomLine.length),this.SkyLine[n]=e.y;for(let r=n+1;r<Math.min(i,this.SkyLine.length);r++)this.SkyLine[r]=this.SkyLine[r-1]+s/this.SamplingUnit}updateBottomLineWithWedge(e,t){let n=Math.floor(e.x*this.SamplingUnit),i=Math.ceil(t.x*this.SamplingUnit),s=(t.y-e.y)/(t.x-e.x);i-n<=1&&(i++,s=0),n<0&&(n=0),n>=this.BottomLine.length&&(n=this.BottomLine.length-1),i<0&&(i=0),i>=this.BottomLine.length&&(i=this.BottomLine.length),this.BottomLine[n]=e.y;for(let r=n+1;r<i;r++)this.BottomLine[r]=this.BottomLine[r-1]+s/this.SamplingUnit}updateSkyLineInRange(e,t,n){this.updateInRange(this.mSkyLine,e,t,n)}updateBottomLineInRange(e,t,n){this.updateInRange(this.BottomLine,e,t,n)}resetSkyLineInRange(e,t){this.updateInRange(this.SkyLine,e,t)}resetBottomLineInRange(e,t){this.setInRange(this.BottomLine,e,t)}setSkyLineWithValue(e){this.SkyLine.forEach((t=>e))}setBottomLineWithValue(e){this.BottomLine.forEach((t=>e))}getLeftIndexForPointX(e,t){const n=Math.floor(e*this.SamplingUnit);return n<0?0:n>=t?t-1:n}getRightIndexForPointX(e,t){const n=Math.ceil(e*this.SamplingUnit);return n<0?0:n>=t?t-1:n}updateStaffLineBorders(){this.mStaffLineParent.PositionAndShape.BorderTop=this.getSkyLineMin(),this.mStaffLineParent.PositionAndShape.BorderMarginTop=this.getSkyLineMin(),this.mStaffLineParent.PositionAndShape.BorderBottom=this.getBottomLineMax(),this.mStaffLineParent.PositionAndShape.BorderMarginBottom=this.getBottomLineMax()}getSkyLineMin(){return Math.min(...this.SkyLine.filter((e=>!isNaN(e))))}getSkyLineMinAtPoint(e){const t=Math.round(e*this.SamplingUnit);return this.mSkyLine[t]}getSkyLineMinInRange(e,t){return this.getMinInRange(this.SkyLine,e,t)}getBottomLineMax(){return Math.max(...this.BottomLine.filter((e=>!isNaN(e))))}getBottomLineMaxAtPoint(e){const t=Math.round(e*this.SamplingUnit);return this.mBottomLine[t]}getBottomLineMaxInRange(e,t){return this.getMaxInRange(this.BottomLine,e,t)}getBottomLineMaxInBoundingBox(e){const t=Math.floor(e.AbsolutePosition.x+e.BorderLeft),n=Math.ceil(e.AbsolutePosition.x+e.BorderRight);return this.getMaxInRange(this.mBottomLine,t,n)}updateWithBoundingBoxRecursively(e){if(e.ChildElements&&e.ChildElements.length>0)this.updateWithBoundingBoxRecursively(e);else{const t=e.BorderTop+e.AbsolutePosition.y,n=e.BorderBottom+e.AbsolutePosition.y;if(t<0){const n=Math.floor(e.AbsolutePosition.x+e.BorderLeft),i=Math.ceil(e.AbsolutePosition.x+e.BorderRight);this.updateInRange(this.mSkyLine,n,i,t)}else if(n>this.StaffLineParent.StaffHeight){const t=Math.floor(e.AbsolutePosition.x+e.BorderLeft),i=Math.ceil(e.AbsolutePosition.x+e.BorderRight);this.updateInRange(this.mBottomLine,t,i,n)}}}findPreviousValidNumber(e,t){for(let n=e;n>=0;n--)if(!isNaN(t[n]))return t[n];return 0}findNextValidNumber(e,t){if(e>=t.length)return t[e-1];for(let n=e;n<t.length;n++)if(!isNaN(t[n]))return t[n];return 0}drawPixel(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF0000FF";const i=t.getContext(),s=i.fillStyle;i.fillStyle=n,i.fillRect(e.x,e.y,2,2),i.fillStyle=s}updateInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t=Math.floor(t*this.SamplingUnit),(n=Math.ceil(n*this.SamplingUnit))<t)throw new Error("start index of line is greater than the end index");t<0&&(t=0),n>e.length&&(n=e.length);for(let s=t;s<n;s++)e[s]=Math.abs(i)>Math.abs(e[s])?i:e[s]}setInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t=Math.floor(t*this.SamplingUnit),(n=Math.ceil(n*this.SamplingUnit))<t)throw new Error("start index of line is greater then the end index");t<0&&(t=0),n>e.length&&(n=e.length);for(let s=t;s<n;s++)e[s]=i}getMinInRange(e,t,n){return t=Math.floor(t*this.SamplingUnit),n=Math.ceil(n*this.SamplingUnit),e?(t<0&&(t=0),t>=e.length&&(t=e.length-1),n<0&&(n=0),n>=e.length&&(n=e.length),t>=0&&n<=e.length?Math.min(...e.slice(t,n+1)):void 0):Number.MAX_VALUE}getMaxInRange(e,t,n){return t=Math.floor(t*this.SamplingUnit),n=Math.ceil(n*this.SamplingUnit),e?(t<0&&(t=0),t>=e.length&&(t=e.length-1),n<0&&(n=0),n>=e.length&&(n=e.length),t>=0&&n<=e.length?Math.max(...e.slice(t,n+1)):void 0):Number.MIN_VALUE}get SamplingUnit(){return this.mRules.SamplingUnit}get StaffLineParent(){return this.mStaffLineParent}get SkyLine(){return this.mSkyLine}get BottomLine(){return this.mBottomLine}}},2870:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(5678),t),s(n(8900),t),s(n(6703),t),s(n(6332),t),s(n(9767),t),s(n(9990),t),s(n(4864),t),s(n(7791),t),s(n(5377),t)},2909:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4831),s=n(6119),r=n(2091),a=function(){function e(e){this.toStrF=e||i.defaultToString,this.dictionary=new s.default(this.toStrF),this.nElements=0}return e.prototype.add=function(e,t){if(void 0===t&&(t=1),i.isUndefined(e)||t<=0)return!1;if(this.contains(e))this.dictionary.getValue(e).copies+=t;else{var n={value:e,copies:t};this.dictionary.setValue(e,n)}return this.nElements+=t,!0},e.prototype.count=function(e){return this.contains(e)?this.dictionary.getValue(e).copies:0},e.prototype.contains=function(e){return this.dictionary.containsKey(e)},e.prototype.remove=function(e,t){if(void 0===t&&(t=1),i.isUndefined(e)||t<=0)return!1;if(this.contains(e)){var n=this.dictionary.getValue(e);return t>n.copies?this.nElements-=n.copies:this.nElements-=t,n.copies-=t,n.copies<=0&&this.dictionary.remove(e),!0}return!1},e.prototype.toArray=function(){for(var e=[],t=0,n=this.dictionary.values();t<n.length;t++)for(var i=n[t],s=i.value,r=i.copies,a=0;a<r;a++)e.push(s);return e},e.prototype.toSet=function(){for(var e=new r.default(this.toStrF),t=0,n=this.dictionary.values();t<n.length;t++){var i=n[t].value;e.add(i)}return e},e.prototype.forEach=function(e){this.dictionary.forEach((function(t,n){for(var i=n.value,s=n.copies,r=0;r<s;r++)if(!1===e(i))return!1;return!0}))},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},e}();t.default=a},2919:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StaffLine=void 0;const i=n(6438),s=n(7741),r=n(298),a=n(9409),o=n(2779);class l extends s.GraphicalObject{constructor(e,t){super(),this.measures=[],this.staffLines=new Array(5),this.octaveShifts=[],this.lyricLines=[],this.lyricsDashes=[],this.abstractExpressions=[],this.graphicalSlurs=[],this.graphicalGlissandi=[],this.Pedals=[],this.parentMusicSystem=e,this.parentStaff=t,this.boundingBox=new i.BoundingBox(this,e.PositionAndShape),this.skyBottomLine=new o.SkyBottomLineCalculator(this),this.staffHeight=this.parentMusicSystem.rules.StaffHeight,this.topLineOffset=0,this.bottomLineOffset=4,this.calculateStaffLineOffsets()}calculateStaffLineOffsets(){if(this.ParentStaff.isTab)5===this.ParentStaff.StafflineCount?this.staffHeight=this.bottomLineOffset=6*this.ParentStaff.ParentInstrument.GetMusicSheet.Rules.TabStaffInterlineHeight:this.staffHeight=this.bottomLineOffset=this.ParentStaff.ParentInstrument.GetMusicSheet.Rules.TabStaffInterlineHeight*this.ParentStaff.StafflineCount;else switch(this.ParentStaff.StafflineCount){case 4:this.bottomLineOffset=1;break;case 3:this.topLineOffset=1,this.bottomLineOffset=1;break;case 2:this.topLineOffset=2,this.bottomLineOffset=1;break;case 1:this.topLineOffset=2,this.bottomLineOffset=2}}get Measures(){return this.measures}set Measures(e){this.measures=e}get StaffLines(){return this.staffLines}set StaffLines(e){this.staffLines=e}get NextStaffLine(){const e=this.parentMusicSystem.StaffLines.indexOf(this);return e!==this.parentMusicSystem.StaffLines.length?this.parentMusicSystem.StaffLines[e+1]:void 0}get LyricLines(){return this.lyricLines}get AbstractExpressions(){return this.abstractExpressions}set AbstractExpressions(e){this.abstractExpressions=e}set LyricLines(e){this.lyricLines=e}get LyricsDashes(){return this.lyricsDashes}set LyricsDashes(e){this.lyricsDashes=e}get ParentMusicSystem(){return this.parentMusicSystem}set ParentMusicSystem(e){this.parentMusicSystem=e}get ParentStaff(){return this.parentStaff}set ParentStaff(e){this.parentStaff=e}get SkyBottomLineCalculator(){return this.skyBottomLine}get SkyLine(){return this.skyBottomLine.SkyLine}get BottomLine(){return this.skyBottomLine.BottomLine}get OctaveShifts(){return this.octaveShifts}set OctaveShifts(e){this.octaveShifts=e}get StaffHeight(){return this.staffHeight}get TopLineOffset(){return this.topLineOffset}get BottomLineOffset(){return this.bottomLineOffset}get GraphicalSlurs(){return this.graphicalSlurs}get GraphicalGlissandi(){return this.graphicalGlissandi}addSlurToStaffline(e){this.graphicalSlurs.push(e)}addGlissandoToStaffline(e){this.graphicalGlissandi.push(e),e.StaffLine=this}addActivitySymbolClickArea(){const e=new r.StaffLineActivitySymbol(this),t=this.PositionAndShape;e.PositionAndShape.RelativePosition=new a.PointF2D(t.RelativePosition.x+t.BorderRight+.5,t.RelativePosition.y+.5),e.PositionAndShape.Parent=this.parentMusicSystem.PositionAndShape}isPartOfMultiStaffInstrument(){return this.parentStaff.ParentInstrument.Staves.length>1}findClosestStaffEntry(e){let t;for(let n=0,i=this.Measures.length;n<i;++n){const i=this.Measures[n];for(let n=0,s=i.staffEntries.length;n<s;++n){const s=i.staffEntries[n];Math.abs(s.PositionAndShape.RelativePosition.x-e+i.PositionAndShape.RelativePosition.x)<5&&(t=s)}}return t}}t.StaffLine=l},3065:function(e,t,n){var i,s;!function(){"use strict";i=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},r=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(){for(var n=this.getLevel(),s=0;s<i.length;s++){var r=i[s];this[r]=s<n?e:this.methodFactory(r,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function h(i,s,r){return function(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?o:void 0!==console[i]?a(console,i):void 0!==console.log?a(console,"log"):e)}(i)||c.apply(this,arguments)}function u(e,n){var a,o,c,u=this,d="loglevel";function f(){var e;if(typeof window!==t&&d){try{e=window.localStorage[d]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,i=encodeURIComponent(d),s=n.indexOf(i+"=");-1!==s&&(e=/^([^;]+)/.exec(n.slice(s+i.length+1))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}function p(e){var t=e;if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=u.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?d+=":"+e:"symbol"==typeof e&&(d=void 0),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||h,u.getLevel=function(){return null!=c?c:null!=o?o:a},u.setLevel=function(e,n){return c=p(e),!1!==n&&function(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&d){try{return void(window.localStorage[d]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+n+";"}catch(e){}}}(c),l.call(u)},u.setDefaultLevel=function(e){o=p(e),f()||u.setLevel(e,!1)},u.resetLevel=function(){c=null,function(){if(typeof window!==t&&d){try{window.localStorage.removeItem(d)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),l.call(u)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)},u.rebuild=function(){if(r!==u&&(a=p(r.getLevel())),l.call(u),r===u)for(var e in s)s[e].rebuild()},a=p(r?r.getLevel():"WARN");var m=f();null!=m&&(c=p(m)),l.call(u)}(r=new u).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=s[e];return t||(t=s[e]=new u(e,r.methodFactory)),t};var d=typeof window!==t?window.log:void 0;return r.noConflict=function(){return typeof window!==t&&window.log===r&&(window.log=d),r},r.getLoggers=function(){return s},r.default=r,r},void 0===(s=i.call(t,n,t,e))||(e.exports=s)}()},3109:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowInstrumentBracket=void 0;var s=i(n(3206)).default.Flow;const r=n(7741),a=n(6438),o=n(9479);class l extends r.GraphicalObject{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(),this.Visible=!0,this.PositionAndShape=new a.BoundingBox(this,e.ParentMusicSystem.PositionAndShape);const i=e.Measures[0],r=t.Measures[0];this.addConnector(i.getVFStave(),r.getVFStave(),s.StaveConnector.type.BRACKET,n)}draw(e){this.Visible&&this.vexflowConnector.setContext(e).draw();const t=this.vexflowConnector,n=t.top_stave.getYForLine(0),i=t.bottom_stave.getYForLine(t.bottom_stave.getNumLines()-1)+t.thickness;this.PositionAndShape.AbsolutePosition.x=(t.top_stave.getX()-2+t.x_shift)/o.unitInPixels,this.PositionAndShape.AbsolutePosition.y=n/o.unitInPixels,this.PositionAndShape.Size.height=(i-n)/o.unitInPixels,this.PositionAndShape.Size.width=12/o.unitInPixels}addConnector(e,t,n,i){this.vexflowConnector=new s.StaveConnector(e,t).setType(n).setXShift(-5*i)}}t.VexFlowInstrumentBracket=l},3123:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TechnicalInstruction=t.TechnicalInstructionType=void 0,function(e){e[e.Fingering=0]="Fingering",e[e.String=1]="String"}(n||(t.TechnicalInstructionType=n={})),t.TechnicalInstruction=class{}},3173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AJAX=void 0,t.AJAX=class{static ajax(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e3;const i=e.indexOf(".mxl")>-1?"text/plain; charset=x-user-defined":"application/xml";if(XMLHttpRequest)t=new XMLHttpRequest;else{if(!ActiveXObject)return Promise.reject(new Error("XMLHttp not supported."));t=new ActiveXObject("Microsoft.XMLHTTP")}return t.timeout=n,new Promise(((n,s)=>{t.onreadystatechange=()=>{t.readyState===XMLHttpRequest.DONE&&(200===t.status||0===t.status&&t.responseText?n(t.responseText):s(new Error("Could not retrieve requested URL "+t.status)))},t.ontimeout=e=>{s(new Error("Server request Timeout"))},t.overrideMimeType(i),t.open("GET",e,!0),t.send()}))}}},3186:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SlurReader=void 0;const s=n(6229),r=i(n(3065)),a=n(9767),o=n(4980),l=n(7718);t.SlurReader=class{constructor(e){this.openSlurDict={},this.musicSheet=e}addSlur(e,t){try{if(e)for(const n of e)if(n.attributes().length>0){const i=n.attribute("type").value;let a=1;try{n.attribute("number")&&(a=parseInt(n.attribute("number").value,10))}catch(e){r.default.debug("VoiceGenerator.addSlur number: ",e)}let c=o.PlacementEnum.NotYetDefined;const h=n.attribute("placement");h&&h.value&&("above"===h.value?c=o.PlacementEnum.Above:"below"===h.value&&(c=o.PlacementEnum.Below));const u=n.attribute("orientation");if(u&&u.value&&("over"===u.value?c=o.PlacementEnum.Above:"under"===u.value&&(c=o.PlacementEnum.Below)),"start"===i){let e=this.openSlurDict[a];e||(e=new s.Slur,this.openSlurDict[a]=e),e.StartNote=t,e.PlacementXml=c}else if("stop"===i){const e=this.openSlurDict[a];if(e){const i=n.name;if("slide"===i||"glissando"===i){const n=e.StartNote,i=new l.Glissando(n);i.AddNote(t),i.EndNote=t,t.NoteGlissando=i,delete this.openSlurDict[a]}else e.EndNote=t,t.isDuplicateSlur(e)||(t.NoteSlurs.push(e),e.StartNote.NoteSlurs.push(e)),delete this.openSlurDict[a]}}}}catch(e){const t=a.ITextTranslation.translateText("ReaderErrorMessages/SlurError","Error while reading slur.");this.musicSheet.SheetErrors.pushMeasureError(t)}}}},3206:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ut});const i=()=>{};i.L=(e,t)=>{if(!t)return;const n=Array.prototype.slice.call(t).join(" ");window.console.log(e+": "+n)},i.MakeException=e=>class extends Error{constructor(t,n){super(t),this.name=e,this.message=t,this.data=n}},i.RERR=i.RuntimeError=class{constructor(e,t){this.code=e,this.message=t}toString(){return"[RuntimeError] "+this.code+":"+this.message}},i.Merge=(e,t)=>{for(const n in t)e[n]=t[n];return e},i.Min=Math.min,i.Max=Math.max,i.forEach=(e,t)=>{for(let n=0;n<e.length;n++)t(e[n],n)},i.RoundN=(e,t)=>e%t>=t/2?parseInt(e/t,10)*t+t:parseInt(e/t,10)*t,i.MidLine=(e,t)=>{let n=t+(e-t)/2;return n%2>0&&(n=i.RoundN(10*n,5)/10),n},i.SortAndUnique=(e,t,n)=>{if(e.length>1){const i=[];let s;e.sort(t);for(let t=0;t<e.length;++t)0!==t&&n(e[t],s)||i.push(e[t]),s=e[t];return i}return e},i.Contains=(e,t)=>{let n=e.length;for(;n--;)if(e[n]===t)return!0;return!1},i.getCanvasContext=e=>{if(!e)throw new i.RERR("BadArgument","Invalid canvas selector: "+e);const t=document.getElementById(e);if(!t||!t.getContext)throw new i.RERR("UnsupportedBrowserError","This browser does not support HTML5 Canvas");return t.getContext("2d")},i.drawDot=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#55";e.save(),e.setFillStyle(i),e.beginPath(),e.arc(t,n,3,0,2*Math.PI,!0),e.closePath(),e.fill(),e.restore()},i.BM=(e,t)=>{const n=(new Date).getTime();t();const s=(new Date).getTime()-n;i.L(e+s+"ms")},i.StackTrace=()=>(new Error).stack,i.W=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const s=t.join(" ");window.console.log("Warning: ",s,i.StackTrace())},(i.Prefix=e=>i.Prefix.prefix+e).prefix="vf-";class r{static GCD(e,t){if("number"!=typeof e||"number"!=typeof t)throw new i.RERR("BadArgument","Invalid numbers: ".concat(e,", ").concat(t));let n;for(;0!==t;)n=t,t=e%t,e=n;return e}static LCM(e,t){return e*t/r.GCD(e,t)}static LCMM(e){if(0===e.length)return 0;if(1===e.length)return e[0];if(2===e.length)return r.LCM(e[0],e[1]);{const t=e[0];return e.shift(),r.LCM(t,r.LCMM(e))}}constructor(e,t){this.set(e,t)}set(e,t){return this.numerator=void 0===e?1:e,this.denominator=void 0===t?1:t,this}value(){return this.numerator/this.denominator}simplify(){let e=this.numerator,t=this.denominator;const n=r.GCD(e,t);return e/=n,t/=n,t<0&&(t=-t,e=-e),this.set(e,t)}add(e,t){let n,i;e instanceof r?(n=e.numerator,i=e.denominator):(n=void 0!==e?e:0,i=void 0!==t?t:1);const s=r.LCM(this.denominator,i),a=s/this.denominator,o=s/i,l=this.numerator*a+n*o;return this.set(l,s)}subtract(e,t){let n,i;e instanceof r?(n=e.numerator,i=e.denominator):(n=void 0!==e?e:0,i=void 0!==t?t:1);const s=r.LCM(this.denominator,i),a=s/this.denominator,o=s/i,l=this.numerator*a-n*o;return this.set(l,s)}multiply(e,t){let n,i;return e instanceof r?(n=e.numerator,i=e.denominator):(n=void 0!==e?e:1,i=void 0!==t?t:1),this.set(this.numerator*n,this.denominator*i)}divide(e,t){let n,i;return e instanceof r?(n=e.numerator,i=e.denominator):(n=void 0!==e?e:1,i=void 0!==t?t:1),this.set(this.numerator*i,this.denominator*n)}equals(e){const t=r.__compareA.copy(e).simplify(),n=r.__compareB.copy(this).simplify();return t.numerator===n.numerator&&t.denominator===n.denominator}greaterThan(e){const t=r.__compareB.copy(this);return t.subtract(e),t.numerator>0}greaterThanEquals(e){const t=r.__compareB.copy(this);return t.subtract(e),t.numerator>=0}lessThan(e){return!this.greaterThanEquals(e)}lessThanEquals(e){return!this.greaterThan(e)}clone(){return new r(this.numerator,this.denominator)}copy(e){return"number"==typeof e?this.set(e||0,1):this.set(e.numerator,e.denominator)}quotient(){return Math.floor(this.numerator/this.denominator)}fraction(){return this.numerator%this.denominator}abs(){return this.denominator=Math.abs(this.denominator),this.numerator=Math.abs(this.numerator),this}toString(){return this.numerator+"/"+this.denominator}toSimplifiedString(){return r.__tmp.copy(this).simplify().toString()}toMixedString(){let e="";const t=this.quotient(),n=r.__tmp.copy(this);return t<0?n.abs().fraction():n.fraction(),0!==t?(e+=t,0!==n.numerator&&(e+=" "+n.toSimplifiedString())):e=0===n.numerator?"0":n.toSimplifiedString(),e}parse(e){const t=e.split("/"),n=parseInt(t[0],10),i=t[1]?parseInt(t[1],10):1;return this.set(n,i)}}r.__compareA=new r,r.__compareB=new r,r.__tmp=new r;const a=i.MakeException("RegistryError");function o(e,t,n,i,s){e[t][n]||(e[t][n]={}),e[t][n][i]=s}class l{static get INDEXES(){return["type"]}constructor(){this.clear()}static enableDefaultRegistry(e){l.defaultRegistry=e}static getDefaultRegistry(){return l.defaultRegistry}static disableDefaultRegistry(){l.defaultRegistry=null}clear(){return this.index={id:{},type:{},class:{}},this}updateIndex(e){let{id:t,name:n,value:i,oldValue:s}=e;const r=this.getElementById(t);null!==s&&this.index[n][s]&&delete this.index[n][s][t],null!==i&&o(this.index,n,i,r.getAttribute("id"),r)}register(e,t){if(!(t=t||e.getAttribute("id")))throw new a("Can't add element without `id` attribute to registry",e);return e.setAttribute("id",t),o(this.index,"id",t,t,e),l.INDEXES.forEach((n=>{this.updateIndex({id:t,name:n,value:e.getAttribute(n),oldValue:null})})),e.onRegister(this),this}getElementById(e){return this.index.id[e]?this.index.id[e][e]:null}getElementsByAttribute(e,t){const n=this.index[e];return n&&n[t]?Object.keys(n[t]).map((e=>n[t][e])):[]}getElementsByType(e){return this.getElementsByAttribute("type",e)}getElementsByClass(e){return this.getElementsByAttribute("class",e)}onUpdate(e){let{id:t,name:n,value:i,oldValue:s}=e;return function(e,t){return e.filter((e=>e===t)).length>0}(l.INDEXES.concat(["id","class"]),n)?(this.updateIndex({id:t,name:n,value:i,oldValue:s}),this):this}}l.defaultRegistry=null;class c{static newID(){return"auto"+c.ID++}constructor(){let{type:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.attrs={id:c.newID(),el:null,type:e||"Base",classes:{}},this.boundingBox=null,this.context=null,this.rendered=!1,l.getDefaultRegistry()&&l.getDefaultRegistry().register(this)}setStyle(e){return this.style=e,this}getStyle(){return this.style}applyStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.context,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getStyle();return t?(e.save(),t.shadowColor&&e.setShadowColor(t.shadowColor),t.shadowBlur&&e.setShadowBlur(t.shadowBlur),t.fillStyle&&e.setFillStyle(t.fillStyle),t.strokeStyle&&e.setStrokeStyle(t.strokeStyle),t.lineWidth&&e.setLineWidth(t.lineWidth),this):this}restoreStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.context;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getStyle())?(e.restore(),this):this}drawWithStyle(){this.checkContext(),this.applyStyle(),this.draw(),this.restoreStyle()}hasClass(e){return!0===this.attrs.classes[e]}addClass(e){return this.attrs.classes[e]=!0,this.registry&&this.registry.onUpdate({id:this.getAttribute("id"),name:"class",value:e,oldValue:null}),this}removeClass(e){return delete this.attrs.classes[e],this.registry&&this.registry.onUpdate({id:this.getAttribute("id"),name:"class",value:null,oldValue:e}),this}onRegister(e){return this.registry=e,this}isRendered(){return this.rendered}setRendered(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.rendered=e,this}getAttributes(){return this.attrs}getAttribute(e){return this.attrs[e]}setAttribute(e,t){const n=this.attrs.id,i=this.attrs[e];return this.attrs[e]=t,this.registry&&this.registry.onUpdate({id:n,name:e,value:t,oldValue:i}),this}getContext(){return this.context}setContext(e){return this.context=e,this}getBoundingBox(){return this.boundingBox}checkContext(){if(!this.context)throw new i.RERR("NoContext","No rendering context attached to instance");return this.context}}c.ID=1e3;class h{constructor(e,t,n,i){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.addPoint(e,t),this.addPoint(n,i)}width(){return this.x2-this.x1}height(){return this.y2-this.y1}addPoint(e,t){null!=e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),null!=t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))}addX(e){this.addPoint(e,null)}addY(e){this.addPoint(null,e)}addQuadraticCurve(e,t,n,i,s,r){const a=e+2/3*(n-e),o=t+2/3*(i-t),l=a+1/3*(s-e),c=o+1/3*(r-t);this.addBezierCurve(e,t,a,o,l,c,s,r)}addBezierCurve(e,t,n,i,s,r,a,o){const l=[e,t],c=[n,i],h=[s,r],u=[a,o];let d;this.addPoint(l[0],l[1]),this.addPoint(u[0],u[1]);const f=(e,t)=>Math.pow(1-e,3)*l[t]+3*Math.pow(1-e,2)*e*c[t]+3*(1-e)*Math.pow(e,2)*h[t]+Math.pow(e,3)*u[t];for(d=0;d<=1;d++){const e=6*l[d]-12*c[d]+6*h[d],t=-3*l[d]+9*c[d]-9*h[d]+3*u[d],n=3*c[d]-3*l[d];if(0===t){if(0===e)continue;const t=-n/e;0<t&&t<1&&(0===d&&this.addX(f(t,d)),1===d&&this.addY(f(t,d)));continue}const i=Math.pow(e,2)-4*n*t;if(i<0)continue;const s=(-e+Math.sqrt(i))/(2*t);0<s&&s<1&&(0===d&&this.addX(f(s,d)),1===d&&this.addY(f(s,d)));const r=(-e-Math.sqrt(i))/(2*t);0<r&&r<1&&(0===d&&this.addX(f(r,d)),1===d&&this.addY(f(r,d)))}}}class u{static copy(e){return new u(e.x,e.y,e.w,e.h)}constructor(e,t,n,i){this.x=e,this.y=t,this.w=n,this.h=i}getX(){return this.x}getY(){return this.y}getW(){return this.w}getH(){return this.h}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setW(e){return this.w=e,this}setH(e){return this.h=e,this}move(e,t){this.x+=e,this.y+=t}clone(){return u.copy(this)}mergeWith(e,t){const n=e,i=this.x<n.x?this.x:n.x,s=this.y<n.y?this.y:n.y,r=Math.max(this.x+this.w,n.x+n.w)-i,a=Math.max(this.y+this.h,n.y+n.h)-s;return this.x=i,this.y=s,this.w=r,this.h=a,t&&this.draw(t),this}draw(e,t,n){t||(t=0),n||(n=0),e.rect(this.x+t,this.y+n,this.w,this.h),e.stroke()}}const d={glyphs:{v0:{x_min:0,x_max:514.5,ha:525,o:"m 236 648 b 246 648 238 648 242 648 b 288 646 261 648 283 648 b 472 513 364 634 428 587 b 514 347 502 464 514 413 b 462 163 514 272 499 217 b 257 44 409 83 333 44 b 50 163 181 44 103 83 b 0 347 14 217 0 272 b 40 513 0 413 12 464 b 236 648 87 591 155 638 m 277 614 b 253 616 273 616 261 616 b 242 616 247 616 243 616 b 170 499 193 609 181 589 b 159 348 163 446 159 398 b 166 222 159 308 161 266 b 201 91 174 138 183 106 b 257 76 215 81 235 76 b 311 91 277 76 299 81 b 347 222 330 106 338 138 b 353 348 352 266 353 308 b 344 499 353 398 351 446 b 277 614 333 587 322 606 m 257 -1 l 258 -1 l 255 -1 l 257 -1 m 257 673 l 258 673 l 255 673 l 257 673 "},v1:{x_min:-1.359375,x_max:344.359375,ha:351,o:"m 126 637 l 129 638 l 198 638 l 266 638 l 269 635 b 274 631 272 634 273 632 l 277 627 l 277 395 b 279 156 277 230 277 161 b 329 88 281 123 295 106 b 344 69 341 81 344 79 b 337 55 344 62 343 59 l 333 54 l 197 54 l 61 54 l 58 55 b 50 69 53 59 50 62 b 65 88 50 79 53 81 b 80 97 72 91 74 93 b 117 156 103 113 112 129 b 117 345 117 161 117 222 l 117 528 l 100 503 l 38 406 b 14 383 24 384 23 383 b -1 398 5 383 -1 390 b 4 415 -1 403 1 409 b 16 437 5 416 10 426 l 72 539 l 100 596 b 121 632 119 631 119 631 b 126 637 122 634 125 635 m 171 -1 l 172 -1 l 170 -1 l 171 -1 m 171 673 l 172 673 l 170 673 l 171 673 "},v2:{x_min:-1.359375,x_max:458.6875,ha:468,o:"m 197 648 b 216 648 201 648 208 648 b 258 646 232 648 253 648 b 419 546 333 637 393 599 b 432 489 428 528 432 509 b 356 342 432 440 405 384 b 235 278 322 313 288 295 b 69 170 166 256 107 217 b 69 169 69 170 69 169 b 69 169 69 169 69 169 b 74 173 69 169 72 170 b 209 222 112 204 163 222 b 310 195 247 222 274 215 b 371 179 332 184 352 179 b 396 181 379 179 387 179 b 428 202 409 184 423 194 b 442 212 431 209 436 212 b 458 197 450 212 458 206 b 441 148 458 190 449 165 b 299 44 409 84 353 44 b 288 45 295 44 292 44 b 250 61 274 45 268 49 b 122 99 212 86 164 99 b 73 91 104 99 88 97 b 28 63 53 84 34 72 b 14 54 25 56 20 54 b 1 62 9 54 4 56 l -1 65 l -1 79 b 0 99 -1 91 0 95 b 2 113 1 102 2 108 b 164 309 20 197 81 272 b 285 470 232 341 277 398 b 287 487 287 476 287 481 b 171 595 287 551 239 595 b 155 595 166 595 160 595 b 142 592 145 594 142 594 b 145 589 142 592 142 591 b 179 527 168 576 179 551 b 132 455 179 496 163 467 b 104 451 122 452 112 451 b 27 530 62 451 27 487 b 29 555 27 538 27 546 b 197 648 44 601 115 639 m 228 -1 l 230 -1 l 227 -1 l 228 -1 m 228 673 l 230 673 l 227 673 l 228 673 "},v3:{x_min:-1.359375,x_max:409.6875,ha:418,o:"m 174 648 b 191 648 176 648 183 648 b 225 648 204 648 220 648 b 402 523 317 638 389 588 b 404 503 404 517 404 510 b 402 484 404 495 404 488 b 264 373 389 437 334 394 b 257 370 259 371 257 371 b 257 370 257 370 257 370 b 264 369 258 370 261 369 b 409 202 359 334 409 267 b 318 72 409 152 381 104 b 200 43 281 52 240 43 b 23 113 134 43 69 68 b 0 169 6 129 0 149 b 77 249 0 210 29 249 l 77 249 b 152 174 125 249 152 212 b 103 102 152 145 137 116 b 103 102 103 102 103 102 b 147 94 103 101 132 95 b 153 94 149 94 151 94 b 265 206 219 94 265 141 b 264 226 265 213 265 219 b 147 355 253 299 204 353 b 126 371 133 356 126 362 b 147 388 126 383 132 388 b 254 474 196 391 238 424 b 259 502 258 484 259 494 b 182 592 259 544 228 582 b 156 595 175 595 166 595 b 115 592 142 595 129 594 l 111 591 l 115 588 b 152 524 141 574 152 549 b 92 449 152 491 130 458 b 76 448 87 448 81 448 b -1 530 32 448 -1 488 b 20 581 -1 548 5 566 b 174 648 55 619 108 641 m 204 -1 l 205 -1 l 202 -1 l 204 -1 m 204 673 l 205 673 l 202 673 l 204 673 "},v4:{x_min:0,x_max:468.21875,ha:478,o:"m 174 637 b 232 638 175 638 189 638 b 277 638 245 638 259 638 l 378 638 l 381 635 b 389 623 386 632 389 627 b 382 609 389 617 386 613 b 366 589 381 606 372 598 l 313 528 l 245 451 l 209 410 l 155 348 l 84 267 b 59 240 72 252 59 240 b 59 240 59 240 59 240 b 151 238 59 238 68 238 l 242 238 l 242 303 b 243 371 242 369 242 370 b 289 426 245 374 254 385 l 303 441 l 317 456 l 338 483 l 360 506 l 371 520 b 386 527 375 526 381 527 b 400 519 392 527 397 524 b 401 440 401 516 401 514 b 401 377 401 423 401 402 l 401 238 l 426 238 b 453 237 449 238 450 238 b 465 217 461 234 465 226 b 460 202 465 212 464 206 b 426 197 454 197 453 197 l 401 197 l 401 180 b 451 88 402 129 412 109 b 468 69 465 81 468 79 b 461 55 468 62 466 59 l 458 54 l 321 54 l 185 54 l 182 55 b 175 69 176 59 175 62 b 191 88 175 79 176 81 b 240 180 230 109 240 129 l 240 197 l 125 197 b 73 195 104 195 87 195 b 8 197 10 195 9 197 b 0 212 2 199 0 205 b 0 212 0 212 0 212 b 20 242 0 219 0 219 b 163 610 104 344 163 492 b 174 637 163 628 166 634 m 234 -1 l 235 -1 l 232 -1 l 234 -1 m 234 673 l 235 673 l 232 673 l 234 673 "},v5:{x_min:0,x_max:409.6875,ha:418,o:"m 47 637 b 53 638 49 638 50 638 b 69 634 55 638 61 637 b 210 610 114 619 161 610 b 363 634 259 610 311 619 b 382 638 372 637 378 638 b 392 634 386 638 389 637 b 397 623 396 630 397 627 b 393 610 397 620 396 616 b 298 505 368 552 338 520 b 212 494 277 498 246 494 b 65 517 163 494 106 502 b 61 517 62 517 61 517 b 61 517 61 517 61 517 b 51 408 61 517 51 412 b 51 408 51 408 51 408 b 51 408 51 408 51 408 b 61 412 53 408 55 409 b 125 434 80 421 103 430 b 185 441 145 440 166 441 b 409 244 310 441 409 353 b 401 191 409 227 406 209 b 197 43 375 105 287 43 b 159 47 183 43 171 44 b 23 123 112 56 61 86 b 0 180 6 140 0 159 b 76 260 0 220 31 260 b 92 259 81 260 87 259 b 152 183 132 251 152 216 b 100 112 152 152 134 122 b 95 111 98 112 95 111 b 95 111 95 111 95 111 b 129 98 95 109 119 101 b 148 97 136 97 141 97 b 264 235 206 97 261 158 b 265 248 265 240 265 244 b 210 398 265 312 243 373 b 179 408 201 406 194 408 b 174 408 178 408 176 408 b 53 369 130 408 88 394 b 34 359 39 359 38 359 b 17 374 24 359 17 365 b 39 628 17 384 38 625 b 47 637 40 631 43 635 m 204 -1 l 205 -1 l 202 -1 l 204 -1 m 204 673 l 205 673 l 202 673 l 204 673 "},v6:{x_min:0,x_max:475.03125,ha:485,o:"m 255 648 b 274 648 259 648 266 648 b 314 646 288 648 307 648 b 450 555 374 637 438 594 b 454 530 453 546 454 538 b 375 451 454 485 416 451 b 328 467 359 451 343 455 b 300 526 310 483 300 503 b 352 598 300 557 319 589 b 356 599 355 598 356 599 b 352 602 356 599 355 601 b 288 616 330 612 308 616 b 210 584 257 616 230 605 b 164 433 189 559 174 508 b 160 374 163 415 160 381 b 160 374 160 374 160 374 b 160 374 160 374 160 374 b 168 377 160 374 164 376 b 258 395 200 390 228 395 b 366 367 294 395 328 387 b 475 223 436 333 475 283 b 472 197 475 215 473 206 b 349 65 462 141 419 95 b 259 43 317 51 288 43 b 167 69 230 43 200 52 b 4 290 80 113 20 195 b 0 349 1 309 0 328 b 20 467 0 391 6 433 b 255 648 58 563 155 637 m 269 363 b 257 363 265 363 261 363 b 210 345 236 363 220 356 b 186 226 196 324 186 272 b 187 198 186 216 186 206 b 213 95 191 151 202 112 b 257 76 221 83 238 76 b 270 77 261 76 266 76 b 321 156 299 81 310 99 b 329 229 326 183 329 206 b 321 301 329 252 326 274 b 269 363 311 342 298 359 m 236 -1 l 238 -1 l 235 -1 l 236 -1 m 236 673 l 238 673 l 235 673 l 236 673 "},v7:{x_min:0,x_max:442.359375,ha:451,o:"m 147 648 b 166 649 153 649 160 649 b 313 598 217 649 273 630 b 340 587 323 588 328 587 l 341 587 b 412 628 367 587 390 601 b 427 638 416 635 421 638 b 439 632 431 638 435 637 b 442 623 441 630 442 628 b 430 569 442 616 439 603 b 352 369 408 492 377 410 b 300 259 325 324 313 298 b 273 84 283 205 273 140 b 265 55 273 65 272 59 l 261 54 l 181 54 l 99 54 l 96 55 b 91 61 95 56 92 59 l 89 63 l 89 77 b 147 263 89 133 111 202 b 261 401 176 313 212 355 b 378 541 315 449 349 489 l 382 548 l 375 544 b 240 495 333 512 285 495 b 129 535 198 495 160 509 b 84 560 108 552 95 560 b 76 559 81 560 78 560 b 31 487 59 555 43 530 b 14 470 27 473 24 470 b 1 477 8 470 4 471 l 0 480 l 0 553 l 0 627 l 1 630 b 16 638 4 635 9 638 b 23 635 17 638 20 637 b 49 626 36 626 39 626 b 96 638 59 626 80 630 b 104 639 99 638 102 639 b 117 644 107 641 112 642 b 147 648 125 645 137 648 m 220 -1 l 221 -1 l 219 -1 l 220 -1 m 220 673 l 221 673 l 219 673 l 220 673 "},v8:{x_min:0,x_max:488.640625,ha:499,o:"m 217 648 b 245 649 225 648 235 649 b 453 516 343 649 430 595 b 458 478 455 503 458 491 b 412 370 458 440 441 398 b 411 369 412 369 411 369 b 415 365 411 367 412 367 b 488 231 462 331 488 281 b 472 165 488 208 483 186 b 243 43 434 86 338 43 b 63 104 178 43 112 62 b 0 233 20 140 0 186 b 73 365 0 283 24 331 l 77 369 l 72 374 b 29 476 42 406 29 441 b 217 648 29 557 103 635 m 258 605 b 242 606 253 605 247 606 b 157 552 198 606 157 580 b 160 541 157 548 159 544 b 319 413 176 503 242 452 l 337 403 l 338 406 b 359 476 352 428 359 452 b 258 605 359 537 318 595 m 138 326 b 130 330 134 328 130 330 b 130 330 130 330 130 330 b 107 305 127 330 112 313 b 84 231 91 281 84 256 b 243 86 84 156 151 86 b 249 87 245 86 246 87 b 347 156 303 88 347 120 b 344 172 347 162 345 167 b 156 319 325 227 257 281 b 138 326 151 322 144 324 m 243 -1 l 245 -1 l 242 -1 l 243 -1 m 243 673 l 245 673 l 242 673 l 243 673 "},v9:{x_min:0,x_max:475.03125,ha:485,o:"m 191 646 b 212 649 198 648 205 649 b 255 644 227 649 243 646 b 458 448 348 616 428 539 b 475 342 469 415 475 378 b 460 244 475 308 469 274 b 193 44 421 124 303 44 b 91 69 157 44 122 51 b 19 161 43 97 19 126 b 21 181 19 167 20 174 b 98 241 32 220 65 241 b 170 186 129 241 160 223 b 172 166 171 179 172 173 b 121 94 172 134 152 102 b 117 93 118 94 117 93 b 121 90 117 93 118 91 b 185 76 142 80 164 76 b 270 119 220 76 251 91 b 308 259 287 145 300 194 b 313 317 310 277 313 310 b 313 317 313 317 313 317 b 313 317 313 317 313 317 b 304 315 313 317 308 316 b 216 295 273 302 245 295 b 145 308 193 295 170 299 b 19 398 88 327 42 360 b 0 469 5 420 0 444 b 24 551 0 496 8 526 b 191 646 54 596 125 637 m 227 614 b 215 616 224 616 220 616 b 202 614 210 616 206 616 b 152 535 174 610 163 592 b 144 463 147 509 144 485 b 152 391 144 440 147 417 b 216 328 163 344 179 328 b 280 391 253 328 269 344 b 288 463 285 417 288 440 b 280 535 288 485 285 509 b 227 614 269 594 258 610 m 236 -1 l 238 -1 l 235 -1 l 236 -1 m 236 673 l 238 673 l 235 673 l 236 673 "},va:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -8 -1 b -1 0 -5 -1 -4 0 b 16 -11 5 0 13 -4 b 83 -186 17 -12 47 -90 l 148 -358 l 148 -363 b 127 -385 148 -376 138 -385 b 112 -378 122 -385 118 -383 b 54 -226 110 -374 114 -385 b 0 -81 24 -147 0 -81 b -55 -226 -1 -81 -25 -147 b -114 -378 -115 -385 -111 -374 b -129 -385 -119 -383 -123 -385 b -149 -363 -140 -385 -149 -376 l -149 -358 l -84 -186 b -19 -11 -49 -90 -19 -12 b -8 -1 -17 -8 -12 -4 "},vb:{x_min:0,x_max:428.75,ha:438,o:"m 262 186 b 273 186 266 186 272 186 b 274 186 273 186 274 186 b 285 186 274 186 280 186 b 428 48 375 181 428 122 b 386 -68 428 12 416 -29 b 155 -187 329 -145 236 -187 b 12 -111 92 -187 38 -162 b 0 -51 4 -91 0 -72 b 262 186 0 58 122 179 "},vc:{x_min:0,x_max:447.8125,ha:457,o:"m 0 86 l 0 173 l 223 173 l 447 173 l 447 86 l 447 0 l 223 0 l 0 0 l 0 86 "},vf:{x_min:0,x_max:370.21875,ha:378,o:"m 0 0 l 0 277 l 61 277 l 122 277 l 122 0 l 122 -278 l 61 -278 l 0 -278 l 0 0 m 246 -1 l 246 277 l 308 277 l 370 277 l 370 -1 l 370 -278 l 308 -278 l 246 -278 l 246 -1 "},v10:{x_min:0,x_max:559.421875,ha:571,o:"m 5 127 b 14 127 6 127 9 127 b 51 126 25 127 43 127 b 175 98 93 122 138 112 l 186 94 b 279 51 210 86 255 65 b 285 47 280 51 283 48 b 319 27 291 44 311 31 l 326 22 b 359 0 332 19 352 4 l 367 -6 b 371 -9 368 -6 370 -8 l 379 -15 b 387 -22 383 -18 386 -20 l 398 -30 l 411 -40 l 417 -47 l 427 -55 l 434 -61 b 441 -66 436 -62 439 -65 l 446 -72 l 453 -77 l 462 -87 b 558 -188 490 -113 549 -176 b 559 -195 559 -191 559 -194 b 548 -205 559 -201 555 -205 b 541 -204 547 -205 544 -205 b 534 -198 539 -201 536 -199 l 525 -191 b 481 -162 518 -187 490 -167 b 472 -155 477 -159 472 -156 b 468 -152 470 -155 469 -154 b 461 -149 466 -152 464 -151 b 428 -130 454 -145 441 -137 b 371 -99 413 -122 372 -99 b 363 -95 371 -99 367 -98 b 353 -91 357 -94 353 -91 b 348 -90 353 -91 352 -91 b 332 -81 343 -87 341 -86 b 27 -12 230 -37 127 -13 b 0 -5 4 -11 2 -11 b 0 58 0 -2 0 27 b 0 122 0 88 0 120 b 5 127 1 124 4 126 "},v11:{x_min:-155.171875,x_max:153.8125,ha:157,o:"m -137 353 b -130 353 -136 353 -133 353 b -112 349 -125 353 -119 352 b -100 342 -110 347 -104 344 b 0 317 -69 326 -35 317 b 111 349 38 317 76 328 b 129 353 117 352 123 353 b 153 327 142 353 153 344 b 144 302 153 320 153 317 b 27 6 93 226 50 113 b 21 -13 24 -11 24 -11 b 0 -26 17 -22 8 -26 b -24 -12 -9 -26 -19 -22 b -28 5 -24 -9 -27 -2 b -145 302 -53 117 -95 224 b -155 327 -155 317 -155 320 b -137 353 -155 340 -148 349 "},v18:{x_min:0,x_max:323.9375,ha:331,o:"m 217 535 b 225 537 220 537 221 537 b 245 524 235 537 242 533 l 246 521 l 247 390 l 247 258 l 273 265 b 306 270 288 269 299 270 b 322 259 315 270 319 267 b 323 208 323 256 323 233 b 322 158 323 184 323 159 b 288 140 318 148 315 147 b 247 130 254 131 247 130 b 247 65 247 130 247 104 b 247 20 247 51 247 36 l 247 -88 l 273 -81 b 306 -76 289 -77 299 -76 b 318 -81 311 -76 315 -77 b 323 -123 323 -87 323 -86 l 323 -138 l 323 -154 b 318 -195 323 -191 323 -190 b 269 -210 314 -199 315 -199 b 249 -216 259 -213 250 -216 l 247 -216 l 247 -349 l 246 -483 l 245 -487 b 225 -499 242 -495 234 -499 b 206 -487 219 -499 210 -495 l 205 -483 l 205 -355 l 205 -227 l 204 -227 l 181 -233 l 138 -244 b 117 -249 127 -247 117 -249 b 115 -385 115 -249 115 -256 l 115 -523 l 114 -526 b 95 -538 110 -534 102 -538 b 74 -526 87 -538 78 -534 l 73 -523 l 73 -391 b 72 -260 73 -269 73 -260 b 72 -260 72 -260 72 -260 b 19 -273 61 -263 23 -273 b 0 -260 10 -273 4 -267 b 0 -209 0 -256 0 -256 l 0 -162 l 1 -158 b 61 -134 5 -148 5 -148 l 73 -131 l 73 -22 b 72 86 73 79 73 86 b 72 86 72 86 72 86 b 19 74 61 83 23 74 b 0 86 10 74 4 79 b 0 137 0 90 0 90 l 0 184 l 1 188 b 61 212 5 198 5 198 l 73 215 l 73 348 l 73 481 l 74 485 b 95 498 78 492 87 498 b 103 495 98 498 100 496 b 114 485 107 494 111 489 l 115 481 l 115 353 l 115 226 l 121 226 b 159 235 123 227 141 231 l 198 247 l 205 248 l 205 384 l 205 521 l 206 524 b 217 535 209 528 212 533 m 205 9 b 205 119 205 70 205 119 l 205 119 b 182 113 204 119 194 116 l 138 102 b 117 97 127 99 117 97 b 115 -12 115 97 115 91 l 115 -122 l 121 -120 b 159 -111 123 -119 141 -115 l 198 -101 l 205 -98 l 205 9 "},v1b:{x_min:0,x_max:559.421875,ha:571,o:"m 544 204 b 548 204 545 204 547 204 b 559 194 555 204 559 199 b 559 190 559 192 559 191 b 530 156 559 188 556 184 b 462 86 510 134 481 104 b 453 76 458 81 454 77 l 446 70 l 441 65 b 434 59 439 63 436 61 l 427 54 b 409 37 426 51 416 44 b 392 23 398 29 394 26 b 387 19 389 22 387 20 b 379 13 386 19 383 16 l 371 8 l 367 5 l 359 -1 l 337 -16 b 285 -48 319 -29 298 -41 l 279 -52 b 186 -95 255 -66 210 -87 l 175 -99 b 23 -129 127 -117 68 -129 b 17 -129 20 -129 19 -129 b 1 -123 2 -129 2 -129 b 0 -49 0 -122 0 -83 b 0 4 0 -22 0 1 b 27 11 2 9 4 9 b 185 31 78 12 145 20 b 198 34 186 31 193 33 b 314 73 234 44 277 58 b 349 88 328 79 340 84 b 353 90 352 90 353 90 b 363 94 353 90 357 93 b 371 98 367 97 371 98 b 428 129 372 98 413 120 b 461 148 441 136 454 144 b 468 151 464 149 466 151 b 472 154 469 152 470 154 b 481 161 473 155 477 158 b 525 190 490 166 518 186 l 534 197 b 540 201 536 198 539 199 b 544 204 541 202 544 204 "},v1d:{x_min:0,x_max:619.3125,ha:632,o:"m 274 184 b 307 186 285 186 296 186 b 616 22 465 186 597 116 b 619 -1 617 13 619 5 b 308 -187 619 -104 483 -187 b 0 -1 133 -187 0 -102 b 5 36 0 11 1 23 b 274 184 29 115 141 176 m 289 161 b 272 162 284 162 277 162 b 171 41 209 162 171 108 b 205 -73 171 5 182 -34 b 345 -163 243 -133 298 -163 b 436 -98 385 -163 420 -142 b 446 -43 443 -80 446 -62 b 289 161 446 47 377 147 "},v1e:{x_min:-402.890625,x_max:401.53125,ha:410,o:"m -219 173 b -213 174 -217 174 -215 174 b -202 173 -209 174 -205 173 b -114 86 -200 172 -179 151 b -28 0 -66 37 -28 0 b 40 84 -28 0 2 37 b 117 174 111 173 110 172 b 122 174 118 174 119 174 b 132 173 125 174 129 173 b 295 11 134 172 171 134 l 307 -1 l 336 34 b 374 76 366 72 368 74 b 381 77 375 77 378 77 b 401 56 392 77 401 68 b 400 48 401 54 401 51 b 223 -172 397 41 230 -166 b 210 -176 220 -174 215 -176 b 201 -174 206 -176 204 -176 b 112 -87 198 -173 178 -152 b 27 0 65 -38 27 0 b -42 -86 27 0 -4 -38 b -118 -174 -112 -174 -111 -173 b -123 -176 -119 -176 -121 -176 b -133 -174 -126 -176 -130 -174 b -296 -12 -136 -173 -172 -137 l -308 0 l -337 -34 b -375 -77 -367 -73 -370 -76 b -382 -79 -377 -79 -379 -79 b -402 -58 -393 -79 -402 -69 b -401 -49 -402 -55 -402 -52 b -224 172 -398 -43 -228 167 b -219 173 -223 172 -220 173 "},v1f:{x_min:-340.28125,x_max:338.921875,ha:346,o:"m -32 520 b -29 521 -31 520 -31 521 b -23 519 -27 521 -24 520 b -20 513 -21 517 -20 516 b -21 506 -20 512 -20 509 b -31 474 -23 502 -27 488 l -53 402 l -66 352 l -68 349 l -57 349 b -32 351 -51 349 -40 351 b 123 370 19 352 74 359 b 137 371 127 370 133 371 b 170 356 152 371 164 366 b 171 355 170 355 170 355 b 216 366 174 355 183 358 b 280 378 268 377 266 377 b 287 378 283 378 284 378 b 332 349 307 378 322 369 b 338 319 336 341 338 330 b 332 301 338 310 336 302 b 242 280 329 299 246 280 b 242 280 242 280 242 280 b 235 288 236 280 235 283 b 235 292 235 290 235 291 b 236 302 236 297 236 299 b 220 337 236 316 230 330 l 216 340 l 210 335 b 159 276 189 322 172 301 b 118 149 152 265 156 274 b 81 34 84 36 85 36 b -8 13 78 33 -4 13 b -8 13 -8 13 -8 13 b -14 20 -12 15 -14 15 b -8 44 -14 24 -12 31 b -2 66 -5 55 -2 65 b -2 66 -2 66 -2 66 l -2 66 b -43 41 -2 66 -21 55 b -114 4 -98 8 -98 8 b -144 0 -123 0 -134 0 b -242 99 -197 0 -242 43 b -242 109 -242 102 -242 105 b -212 219 -240 122 -242 116 b -185 312 -197 270 -185 312 l -185 312 b -189 312 -185 312 -186 312 b -259 312 -200 312 -227 312 b -321 310 -291 312 -310 310 b -334 312 -330 310 -334 312 b -340 319 -338 313 -340 316 b -336 326 -340 322 -338 324 b -291 337 -334 326 -314 331 l -247 347 l -210 348 b -172 348 -190 348 -172 348 b -168 363 -172 348 -171 355 b -145 442 -151 424 -145 441 b -133 452 -144 444 -140 446 l -77 489 b -32 520 -53 506 -32 520 m 57 334 b 53 335 55 335 54 335 b 44 334 50 335 49 335 b -70 316 8 326 -28 320 b -78 309 -78 316 -78 316 b -108 202 -80 305 -88 274 b -141 81 -136 112 -141 93 b -140 74 -141 79 -141 77 b -117 49 -137 59 -127 49 b -107 52 -114 49 -110 51 b 16 127 -106 54 14 126 b 42 217 16 127 42 215 b 49 241 42 222 44 229 b 73 320 53 251 73 317 b 57 334 73 327 65 333 "},v20:{x_min:-571.671875,x_max:570.3125,ha:582,o:"m -559 351 b -551 352 -556 352 -553 352 b -530 338 -543 352 -533 348 b -529 169 -530 337 -529 291 l -529 1 l -507 27 l -441 112 b -382 174 -394 169 -390 174 b -378 174 -381 174 -379 174 b -281 86 -370 174 -375 179 b -196 0 -234 37 -196 0 b -126 84 -196 0 -164 37 b -50 174 -55 173 -57 172 b -44 174 -49 174 -47 174 b -35 173 -42 174 -38 173 b 53 86 -32 172 -12 151 b 138 0 100 37 138 0 b 208 84 140 0 170 37 b 284 174 279 173 279 172 b 289 174 285 174 288 174 b 300 173 294 174 298 173 b 462 11 303 172 340 134 l 475 -1 l 503 34 b 541 76 534 72 536 74 b 548 77 544 77 545 77 b 570 56 560 77 570 68 b 567 48 570 54 568 51 b 392 -172 564 41 397 -166 b 378 -176 387 -174 382 -176 b 368 -174 375 -176 371 -176 b 280 -87 367 -173 347 -152 b 194 0 234 -38 194 0 b 126 -86 194 0 163 -38 b 49 -174 54 -174 55 -173 b 44 -176 47 -176 46 -176 b 34 -174 40 -176 36 -174 b -54 -87 31 -173 10 -152 b -140 0 -102 -38 -140 0 b -209 -86 -140 0 -171 -38 b -285 -174 -280 -174 -279 -173 b -291 -176 -287 -176 -288 -176 b -300 -174 -294 -176 -298 -174 b -464 -11 -303 -173 -374 -102 l -476 0 l -506 -37 b -539 -76 -528 -65 -537 -74 b -551 -80 -543 -79 -547 -80 b -570 -68 -558 -80 -566 -76 l -571 -65 l -571 136 b -570 340 -571 331 -571 337 b -559 351 -568 344 -564 348 "},v22:{x_min:0,x_max:432.828125,ha:442,o:"m 209 186 b 213 187 210 187 212 187 b 216 187 215 187 216 187 b 224 174 216 186 220 180 b 420 -1 269 105 338 43 b 432 -12 431 -8 432 -9 b 421 -23 432 -15 432 -16 b 228 -180 345 -70 264 -137 b 219 -188 221 -188 221 -188 l 219 -188 b 208 -177 215 -188 215 -188 b 10 1 163 -106 93 -44 b 0 11 0 6 0 8 b 10 22 0 13 0 15 b 202 179 87 69 167 136 b 209 186 206 183 209 186 "},v23:{x_min:0,x_max:133.390625,ha:136,o:"m 54 66 b 65 68 58 68 61 68 b 122 37 88 68 110 56 b 133 -1 130 26 133 12 b 104 -58 133 -23 123 -44 b 66 -69 92 -65 78 -69 b 10 -38 44 -69 23 -58 b 0 -1 2 -27 0 -13 b 54 66 0 30 20 61 "},v25:{x_min:0,x_max:318.5,ha:325,o:"m 20 376 b 167 377 23 377 96 377 b 296 376 231 377 294 377 b 318 347 311 371 318 359 b 296 316 318 333 311 320 b 159 315 294 315 227 315 b 21 316 91 315 24 315 b 0 345 6 320 0 333 b 20 376 0 359 6 371 "},v26:{x_min:-21.78125,x_max:483.1875,ha:493,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 383 20 616 20 616 l 20 148 l 21 151 b 140 199 59 183 102 199 b 206 179 164 199 187 192 l 210 176 l 210 396 l 210 617 l 212 621 b 231 632 216 628 223 632 b 250 620 239 632 247 628 b 251 383 251 616 251 616 l 251 148 l 254 151 b 370 199 291 183 332 199 b 415 191 385 199 400 197 b 483 84 458 176 483 134 b 461 0 483 58 476 29 b 332 -142 439 -40 411 -72 l 255 -215 b 231 -229 240 -229 239 -229 b 216 -223 224 -229 220 -227 b 210 -158 210 -217 210 -223 b 210 -120 210 -148 210 -136 l 210 -29 l 205 -34 b 100 -142 182 -65 159 -88 l 23 -215 b -1 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 201 l -21 616 l -20 620 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 m 341 131 b 328 133 337 133 332 133 b 322 133 326 133 323 133 b 257 87 296 129 273 113 l 251 80 l 251 -37 l 251 -156 l 255 -152 b 375 81 328 -72 375 20 l 375 83 b 341 131 375 113 367 126 "},v27:{x_min:0,x_max:432.828125,ha:442,o:"m 208 184 b 213 187 209 186 212 187 b 224 176 217 187 221 183 b 245 147 225 172 235 159 b 419 -1 288 90 347 38 b 431 -8 424 -4 431 -8 b 432 -12 432 -9 432 -11 b 430 -18 432 -13 432 -16 b 364 -61 424 -20 383 -47 b 225 -183 307 -102 250 -152 b 223 -187 224 -184 223 -187 b 220 -188 221 -188 220 -188 b 208 -176 216 -188 210 -184 b 187 -148 205 -173 197 -159 b 12 0 144 -90 84 -38 b 0 11 4 5 0 8 b 16 24 0 13 4 18 b 183 158 83 69 141 115 b 208 184 194 169 198 173 m 183 105 b 176 113 181 109 176 113 b 172 109 176 113 175 112 b 92 45 149 90 117 62 l 88 41 l 102 31 b 247 -105 160 -6 210 -55 l 254 -115 l 257 -112 l 269 -102 b 340 -45 287 -87 319 -61 l 344 -43 l 330 -33 b 183 105 272 6 221 54 "},v28:{x_min:-73.5,x_max:72.140625,ha:74,o:"m -72 252 l -73 254 l 0 254 l 72 254 l 70 252 b 0 -1 70 248 0 -1 b -72 252 -1 -1 -72 248 "},v29:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m 175 273 b 182 274 178 273 181 274 b 202 262 190 274 198 269 b 204 158 204 259 204 259 l 204 56 l 250 112 b 303 174 296 172 298 172 b 308 174 304 174 307 174 b 318 173 313 174 317 173 b 481 11 322 172 357 134 l 494 -1 l 522 34 b 560 76 553 72 555 74 b 567 77 563 77 564 77 b 589 56 579 77 589 68 b 586 48 589 54 588 51 b 411 -172 583 41 416 -166 b 397 -176 406 -174 401 -176 b 387 -174 393 -176 390 -176 b 299 -87 386 -173 366 -152 b 213 0 253 -38 213 0 b 208 -6 213 0 210 -2 l 204 -12 l 204 -147 b 204 -210 204 -173 204 -194 b 198 -292 204 -297 204 -287 b 183 -299 194 -297 189 -299 b 164 -287 175 -299 167 -295 b 163 -174 163 -284 163 -284 l 161 -63 l 119 -117 b 65 -176 76 -170 73 -176 b 61 -176 63 -176 62 -176 b -35 -87 51 -174 57 -180 b -121 0 -83 -38 -121 0 b -190 -86 -122 0 -152 -38 b -266 -174 -261 -174 -259 -173 b -272 -176 -268 -176 -270 -176 b -281 -174 -276 -176 -280 -174 b -371 -86 -284 -173 -304 -152 b -457 0 -417 -38 -457 0 l -457 0 b -477 -26 -457 0 -470 -16 b -548 -227 -524 -88 -548 -161 b -536 -303 -548 -254 -544 -280 b -533 -317 -534 -309 -533 -313 b -553 -338 -533 -330 -541 -338 b -577 -315 -566 -338 -571 -333 b -590 -227 -586 -287 -590 -258 b -518 -9 -590 -154 -564 -77 b -465 56 -509 2 -504 8 l -402 134 b -363 174 -374 170 -371 174 b -359 174 -362 174 -360 174 b -262 86 -351 174 -356 179 b -176 0 -216 37 -176 0 b -107 84 -176 0 -145 37 b -31 174 -36 173 -38 172 b -25 174 -29 174 -28 174 b -16 173 -23 174 -19 173 b 147 11 -13 172 35 123 l 157 -1 l 160 1 l 163 4 l 163 130 b 164 260 163 256 163 258 b 175 273 166 266 170 270 "},v2a:{x_min:-21.78125,x_max:366.140625,ha:374,o:"m 276 1378 b 284 1379 279 1379 281 1379 b 306 1360 292 1379 298 1374 b 352 1247 326 1326 343 1286 b 366 1139 362 1213 366 1175 b 347 1009 366 1093 359 1049 l 344 1002 l 347 992 b 352 971 348 986 351 977 b 366 863 362 936 366 899 b 347 732 366 818 359 773 l 344 725 l 347 716 b 352 695 348 710 351 700 b 366 588 362 659 366 623 b 223 262 366 464 314 345 b 189 233 212 252 212 252 b 35 76 126 183 73 129 b -1 16 20 56 2 27 b -19 4 -4 9 -12 4 l -21 4 l -21 137 l -21 270 l -17 270 b 186 344 59 281 134 308 b 319 606 270 399 319 499 b 317 650 319 620 319 635 l 315 659 l 314 655 b 223 537 288 607 258 570 b 189 509 212 528 212 528 b 35 352 126 459 73 405 b -1 292 20 333 2 303 b -19 280 -4 285 -12 280 l -21 280 l -21 413 l -21 546 l -17 546 b 186 620 59 557 134 584 b 319 882 270 675 319 775 b 317 925 319 896 319 911 l 315 935 l 314 931 b 223 813 288 884 258 846 b 189 785 212 805 212 805 b 35 628 126 735 73 681 b -1 569 20 609 2 580 b -19 556 -4 562 -12 556 l -21 556 l -21 689 l -21 823 l -17 823 b 202 907 68 835 152 867 b 319 1157 280 968 319 1061 b 270 1338 319 1218 303 1281 b 262 1358 264 1349 262 1353 b 262 1364 262 1360 262 1363 b 276 1378 265 1371 269 1376 "},v2c:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -413 173 b -408 174 -412 174 -409 174 b -397 173 -404 174 -400 173 b -308 86 -394 172 -374 151 b -223 0 -261 37 -223 0 b -153 84 -223 0 -191 37 b -77 174 -83 173 -84 172 b -72 174 -76 174 -74 174 b -62 173 -68 174 -63 173 b 25 86 -59 172 -39 151 b 112 0 73 37 111 0 b 181 84 112 0 144 37 b 257 174 251 173 251 172 b 262 174 258 174 261 174 b 273 173 266 174 270 173 b 436 9 276 172 347 101 l 447 -1 l 477 36 b 522 79 511 79 513 79 l 522 79 b 552 51 533 79 539 73 b 596 -112 582 6 596 -51 b 567 -262 596 -161 586 -213 b 539 -322 558 -287 544 -316 b 524 -327 534 -326 529 -327 b 504 -315 515 -327 507 -323 b 503 -308 503 -312 503 -309 b 511 -285 503 -302 504 -297 b 555 -113 540 -227 555 -169 b 544 -34 555 -86 551 -59 b 522 19 540 -16 530 8 l 521 22 l 481 -26 l 405 -122 b 353 -176 366 -172 362 -176 b 349 -176 352 -176 351 -176 b 253 -87 341 -176 347 -180 b 167 0 206 -38 167 0 b 99 -86 167 0 136 -38 b 21 -174 27 -174 28 -173 b 17 -176 20 -176 19 -176 b 6 -174 13 -176 9 -174 b -81 -87 4 -173 -14 -152 b -167 0 -129 -38 -167 0 b -236 -86 -167 0 -198 -38 b -313 -174 -307 -174 -306 -173 b -318 -176 -314 -176 -315 -176 b -328 -174 -321 -176 -325 -174 b -491 -12 -330 -173 -367 -137 l -503 0 l -530 -34 b -570 -77 -562 -73 -564 -76 b -577 -79 -571 -79 -574 -79 b -597 -58 -588 -79 -597 -69 b -596 -49 -597 -55 -597 -52 b -417 172 -593 -43 -423 167 b -413 173 -417 172 -415 173 "},v2d:{x_min:0,x_max:438.28125,ha:447,o:"m 212 190 b 219 191 213 191 216 191 b 236 176 225 191 228 190 b 419 18 277 105 341 49 b 436 5 431 13 434 11 b 438 -1 438 4 438 1 b 424 -16 438 -8 432 -13 b 356 -49 409 -20 379 -36 b 234 -180 306 -83 258 -133 b 219 -192 230 -188 224 -192 b 200 -176 213 -192 206 -187 b 9 -15 157 -102 89 -45 b 0 0 2 -12 0 -6 b 16 18 0 9 2 12 b 200 176 93 48 159 104 b 212 190 205 186 208 188 m 239 113 b 236 117 238 116 238 117 b 230 108 235 117 234 115 b 92 -15 196 58 140 8 b 88 -18 91 -16 88 -18 b 92 -20 88 -18 91 -19 b 198 -116 130 -43 166 -74 b 200 -117 200 -117 200 -117 b 201 -117 200 -117 201 -117 b 264 -43 212 -98 242 -62 b 345 15 288 -19 321 4 b 348 18 347 16 348 16 b 344 20 348 18 347 19 b 239 113 307 41 266 79 "},v2f:{x_min:-1.359375,x_max:680.5625,ha:694,o:"m 597 1042 b 604 1042 600 1042 602 1042 b 642 1002 627 1042 642 1022 b 619 966 642 988 635 974 b 439 927 574 942 503 927 l 426 927 l 426 921 b 430 838 428 893 430 866 b 345 480 430 696 398 560 b 179 391 307 423 249 391 b 156 392 171 391 164 392 b 138 394 149 394 142 394 b 103 434 115 396 103 416 b 129 471 103 451 111 466 b 141 474 133 473 137 474 b 172 459 153 474 164 469 b 181 455 175 456 176 455 b 187 456 182 455 185 455 b 253 520 212 460 234 483 b 315 836 294 605 315 714 b 311 928 315 867 314 898 b 302 945 310 943 311 942 b 245 953 283 950 262 953 b 130 891 193 953 149 931 b 84 860 119 870 102 860 b 36 905 61 860 39 877 b 36 910 36 907 36 909 b 80 970 36 931 50 949 b 249 1017 125 1000 187 1017 b 322 1009 273 1017 299 1014 l 341 1003 b 436 991 372 995 406 991 b 577 1031 495 991 545 1004 b 597 1042 583 1038 590 1041 m 416 360 b 424 360 419 360 421 360 b 481 309 454 360 479 338 b 503 145 484 280 495 199 b 585 -185 525 16 555 -106 b 630 -245 596 -213 613 -237 l 634 -247 l 638 -245 b 647 -244 641 -245 645 -244 b 680 -278 666 -244 680 -262 b 664 -308 680 -290 675 -301 b 638 -312 658 -310 650 -312 b 613 -309 631 -312 623 -310 b 477 -201 555 -303 502 -260 b 417 -2 460 -159 434 -72 b 416 5 417 1 416 5 b 416 5 416 5 416 5 b 411 -5 415 5 413 0 b 359 -97 397 -33 377 -70 b 353 -106 355 -102 353 -105 b 359 -112 353 -108 355 -109 b 409 -130 375 -123 390 -129 b 426 -134 420 -130 421 -131 b 431 -147 428 -137 431 -141 b 420 -162 431 -152 427 -159 b 382 -169 409 -166 396 -169 b 323 -155 363 -169 341 -165 l 317 -152 l 314 -155 b 62 -303 240 -240 148 -295 b 36 -305 55 -305 44 -305 b 23 -303 29 -305 24 -305 b -1 -273 6 -299 -1 -287 b 31 -240 -1 -256 10 -240 b 36 -240 32 -240 34 -240 b 42 -241 38 -241 39 -241 b 134 -204 63 -241 99 -226 b 367 288 265 -115 357 81 b 375 330 368 313 370 320 b 416 360 383 347 400 358 m 360 -359 b 379 -359 363 -359 371 -359 b 424 -360 396 -359 416 -359 b 646 -502 536 -373 624 -430 b 649 -527 649 -510 649 -519 b 530 -673 649 -578 604 -635 l 521 -677 l 529 -681 b 653 -811 592 -714 637 -762 b 660 -853 658 -827 660 -839 b 645 -911 660 -873 656 -892 b 426 -1021 608 -981 519 -1021 b 283 -989 377 -1021 328 -1011 b 235 -949 249 -972 239 -964 b 234 -936 234 -946 234 -941 b 234 -928 234 -934 234 -931 l 235 -925 l 234 -927 l 225 -934 b 87 -982 186 -966 138 -982 b 80 -982 85 -982 83 -982 b 55 -981 70 -981 58 -981 b 17 -943 32 -981 17 -964 b 54 -904 17 -921 35 -904 b 78 -914 62 -904 72 -909 l 83 -918 l 88 -918 b 190 -831 122 -918 166 -881 b 269 -506 242 -727 269 -612 b 268 -462 269 -492 269 -477 b 266 -449 266 -458 266 -452 b 265 -444 266 -445 266 -444 b 257 -446 264 -444 261 -445 b 132 -545 196 -470 152 -505 b 88 -573 122 -563 104 -573 b 39 -523 63 -573 39 -553 b 63 -476 39 -505 44 -494 b 360 -359 136 -408 235 -369 m 419 -424 b 393 -423 411 -423 406 -423 l 375 -423 l 377 -426 b 379 -439 377 -427 378 -434 b 383 -510 382 -463 383 -487 b 314 -811 383 -609 360 -710 b 266 -893 296 -850 285 -870 b 264 -898 265 -896 264 -898 l 264 -898 b 264 -898 264 -898 264 -898 b 268 -898 264 -898 266 -898 b 273 -898 270 -898 272 -898 b 300 -909 283 -898 291 -900 b 426 -957 340 -941 385 -957 b 476 -949 443 -957 460 -954 b 547 -853 522 -931 547 -893 b 485 -745 547 -816 526 -775 b 397 -707 460 -727 432 -714 b 366 -675 375 -703 366 -692 b 396 -642 366 -657 377 -645 b 530 -557 455 -637 511 -601 b 536 -527 534 -548 536 -537 b 419 -424 536 -480 490 -437 "},v30:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 276 1900 b 284 1901 279 1900 281 1901 b 306 1883 291 1901 298 1896 b 367 1686 347 1825 367 1757 b 343 1558 367 1643 359 1600 l 338 1549 l 343 1537 b 367 1411 359 1497 367 1454 b 343 1282 367 1367 359 1324 l 338 1272 l 343 1261 b 367 1135 359 1221 367 1178 b 343 1007 367 1090 359 1047 l 338 996 l 343 985 b 367 859 359 945 367 902 b 343 731 367 814 359 771 l 338 720 l 343 709 b 367 582 359 667 367 626 b 289 362 367 503 340 426 b 239 312 276 345 259 330 b 29 77 152 237 76 152 b -1 18 14 54 2 30 b -19 4 -4 11 -12 4 l -21 4 l -21 133 l -20 260 l -13 262 b 98 299 17 269 62 284 b 111 305 103 302 110 305 b 167 334 123 310 156 327 b 319 595 264 391 319 491 b 313 659 319 616 318 638 b 310 667 311 664 311 667 b 307 663 310 667 308 666 b 240 588 289 637 269 614 b 16 331 141 505 62 413 b -1 294 8 316 1 302 b -19 280 -4 287 -12 280 l -21 280 l -21 408 l -20 537 l -13 538 b 98 576 17 545 62 560 b 111 581 103 578 110 581 b 167 610 123 587 156 603 b 319 871 264 667 319 767 b 313 935 319 892 318 913 b 310 942 311 941 311 942 b 307 939 310 942 308 941 b 240 864 289 913 269 889 b 16 607 141 781 62 689 b -1 570 8 592 1 578 b -19 556 -4 563 -12 556 l -21 556 l -21 684 l -20 813 l -13 814 b 98 852 17 821 62 836 b 111 857 103 855 110 857 b 167 886 123 863 156 880 b 319 1147 264 943 319 1043 b 313 1211 319 1168 318 1189 b 310 1218 311 1217 311 1218 b 307 1215 310 1218 308 1217 b 240 1140 289 1188 269 1165 b 16 884 141 1057 62 966 b -1 846 8 868 1 855 b -19 832 -4 839 -12 832 l -21 832 l -21 960 l -20 1089 l -13 1090 b 98 1128 17 1097 62 1111 b 111 1134 103 1131 110 1134 b 167 1163 123 1139 156 1156 b 319 1424 264 1220 319 1320 b 313 1486 319 1444 318 1465 b 310 1494 311 1493 311 1494 b 307 1492 310 1494 308 1493 b 240 1417 289 1464 269 1442 b 16 1160 141 1333 62 1242 b -1 1121 8 1145 1 1131 b -19 1109 -4 1115 -12 1109 l -21 1109 l -21 1236 l -20 1365 l -13 1367 b 98 1404 17 1374 62 1388 b 111 1410 103 1407 110 1410 b 250 1508 172 1437 215 1467 b 319 1701 296 1564 319 1633 b 270 1859 319 1757 303 1814 b 262 1882 265 1868 262 1875 b 276 1900 262 1890 266 1896 "},v31:{x_min:0,x_max:386.5625,ha:394,o:"m 0 173 l 0 347 l 193 347 l 386 347 l 386 173 l 386 0 l 193 0 l 0 0 l 0 173 "},v33:{x_min:-423.3125,x_max:421.9375,ha:431,o:"m -10 276 b -2 277 -8 277 -5 277 b 17 265 5 277 13 273 b 19 163 19 260 19 260 l 19 68 l 39 45 b 277 -95 122 -34 200 -81 b 289 -97 281 -97 285 -97 b 378 0 332 -97 371 -54 b 378 11 378 4 378 6 b 302 83 378 55 345 83 b 242 66 283 83 262 77 b 208 56 231 59 219 56 b 148 120 175 56 148 81 b 200 186 148 151 164 172 b 261 198 220 194 240 198 b 420 45 341 198 411 137 b 421 22 421 37 421 29 b 257 -198 421 -86 347 -188 b 242 -198 251 -198 247 -198 b 20 -105 181 -198 95 -163 l 19 -104 l 19 -183 b 19 -216 19 -195 19 -206 b 12 -273 19 -272 17 -267 b -2 -278 8 -277 2 -278 b -21 -266 -10 -278 -19 -274 b -23 -165 -23 -263 -23 -262 l -23 -69 l -44 -47 b -250 86 -117 23 -183 66 b -295 94 -270 93 -284 94 b -315 91 -302 94 -308 94 b -381 5 -356 81 -381 43 b -355 -56 -381 -16 -372 -40 b -299 -81 -338 -73 -319 -81 b -246 -68 -283 -81 -265 -77 b -212 -58 -234 -61 -223 -58 b -168 -77 -196 -58 -179 -65 b -151 -122 -156 -90 -151 -105 b -179 -174 -151 -141 -160 -162 b -239 -195 -194 -184 -217 -192 b -257 -197 -245 -195 -250 -197 b -423 -5 -349 -197 -423 -113 b -423 0 -423 -4 -423 -1 b -277 194 -420 97 -362 173 b -247 197 -268 197 -258 197 b -24 104 -185 197 -100 162 l -23 102 l -23 181 b -21 265 -23 260 -23 260 b -10 276 -20 269 -14 274 "},v34:{x_min:0,x_max:622.03125,ha:635,o:"m 398 417 b 406 419 401 419 404 419 b 427 398 417 419 427 409 b 427 391 427 395 427 392 b 34 -274 424 385 38 -272 b 20 -280 29 -278 25 -280 b 0 -259 9 -280 0 -270 b 0 -252 0 -256 0 -254 b 393 413 2 -247 389 410 b 398 417 394 415 397 416 m 592 417 b 600 419 594 419 597 419 b 622 398 611 419 622 409 b 620 391 622 395 620 392 b 227 -274 617 385 231 -272 b 213 -280 223 -278 219 -280 b 193 -259 202 -280 193 -270 b 194 -252 193 -256 193 -254 b 586 413 196 -247 582 410 b 592 417 588 415 590 416 "},v36:{x_min:-1.359375,x_max:1064.390625,ha:1086,o:"m 296 692 b 314 694 302 694 307 694 b 386 685 337 694 366 689 b 548 498 480 660 548 580 b 548 481 548 492 548 487 b 455 395 541 426 499 395 b 370 462 420 395 383 417 b 362 496 364 477 362 488 b 377 514 362 509 367 514 b 393 501 386 514 390 510 b 432 474 397 484 413 474 b 470 487 445 474 458 478 b 491 530 484 496 491 510 b 490 544 491 534 491 539 b 333 660 479 606 411 657 l 323 662 l 315 646 b 269 524 285 591 269 556 b 321 431 269 492 287 466 b 349 395 338 413 343 408 b 363 342 359 378 363 362 b 359 312 363 333 362 322 b 285 158 348 266 318 206 b 281 152 283 155 281 152 b 281 152 281 152 281 152 b 287 154 283 152 284 152 b 318 155 298 154 308 155 b 461 98 371 155 419 136 l 464 97 l 483 112 b 503 129 494 120 503 127 b 504 130 503 129 504 129 b 503 138 504 131 503 134 b 500 180 500 152 500 166 b 553 326 500 238 518 288 b 604 366 560 331 592 358 b 649 381 617 376 632 381 b 696 362 665 381 681 374 b 724 302 714 347 724 324 b 695 238 724 278 714 255 b 660 210 691 234 662 212 b 579 148 658 209 582 151 b 579 148 579 148 579 148 b 596 106 579 144 589 119 b 622 77 604 88 609 83 b 657 69 632 72 645 69 b 748 112 688 69 721 84 b 755 123 754 117 755 120 b 755 127 755 124 755 126 b 751 165 752 137 751 151 b 758 219 751 183 754 202 b 894 387 774 290 820 347 b 896 390 896 388 896 388 b 891 398 896 391 895 392 b 622 560 827 477 730 535 b 600 580 605 564 600 569 b 617 596 600 591 607 596 b 628 595 622 596 624 596 b 1057 248 846 552 1020 412 b 1064 191 1061 229 1064 209 b 922 0 1064 94 1005 9 b 902 -1 916 -1 909 -1 b 774 76 847 -1 800 26 b 769 83 770 81 770 83 b 769 81 769 83 769 83 b 627 -1 733 29 677 -1 b 548 27 597 -1 570 8 b 515 88 537 37 525 61 l 513 95 l 510 93 l 453 45 b 390 0 396 0 396 0 b 390 0 390 0 390 0 b 374 15 381 0 377 4 b 268 105 359 69 314 105 b 250 104 262 105 257 105 l 243 102 l 234 90 b 155 1 201 49 159 2 b 147 -1 152 0 149 -1 b 130 15 138 -1 130 6 b 132 20 130 18 132 19 b 136 31 133 22 134 27 b 220 131 149 74 178 109 b 231 137 225 134 230 136 b 302 278 280 202 302 244 b 265 335 302 299 295 309 b 209 442 234 363 213 402 b 209 455 209 446 209 451 b 279 648 209 502 232 564 l 285 659 l 283 659 b 176 627 238 653 210 645 b 57 477 111 594 66 538 b 55 459 55 471 55 464 b 72 409 55 437 61 415 b 93 403 78 405 87 403 b 152 467 123 403 151 431 b 168 488 153 483 157 488 b 185 462 181 488 185 483 l 185 460 b 137 344 183 409 168 369 b 78 322 119 328 98 322 b 13 360 50 322 25 335 b -1 426 4 380 -1 402 b 89 610 -1 488 32 559 b 296 692 147 659 210 685 m 926 348 b 921 353 924 351 922 353 b 914 348 920 353 918 351 b 823 167 857 306 823 237 b 828 124 823 154 826 138 b 890 31 837 79 862 40 b 896 31 892 31 894 31 b 956 104 916 31 940 59 b 970 191 965 129 970 159 b 966 241 970 208 969 224 b 926 348 959 277 945 313 m 627 326 b 619 326 624 326 622 326 b 598 316 611 326 604 323 b 568 215 579 288 568 255 b 568 208 568 213 568 210 b 571 183 570 195 570 184 l 571 183 b 594 201 571 183 582 191 l 634 231 b 660 259 653 247 656 248 b 664 278 662 266 664 272 b 627 326 664 299 649 320 "},v38:{x_min:-1.359375,x_max:651.96875,ha:665,o:"m 389 644 b 405 645 394 645 400 645 b 504 566 450 645 492 613 b 507 541 506 557 507 549 b 480 471 507 514 498 489 l 477 467 l 483 470 b 609 591 539 485 586 531 b 613 601 611 595 613 599 b 631 609 619 607 624 609 b 651 588 641 609 651 602 b 200 -946 651 584 204 -941 b 182 -957 197 -953 190 -957 b 163 -945 174 -957 166 -953 b 161 -939 161 -942 161 -942 b 217 -743 161 -931 170 -904 b 272 -555 247 -639 272 -555 b 272 -555 272 -555 272 -555 b 264 -560 272 -555 268 -557 b 140 -603 227 -589 182 -603 b 36 -567 102 -603 65 -592 b -1 -487 12 -548 -1 -517 b 17 -427 -1 -466 5 -445 b 103 -380 38 -395 70 -380 b 191 -433 137 -380 172 -398 b 205 -484 201 -448 205 -466 b 178 -553 205 -509 196 -535 l 175 -557 l 182 -555 b 307 -435 236 -539 284 -494 b 372 -213 308 -430 372 -215 b 372 -213 372 -213 372 -213 b 364 -219 372 -213 368 -216 b 240 -262 328 -247 283 -262 b 137 -226 202 -262 166 -249 b 99 -145 112 -206 99 -176 b 118 -84 99 -124 106 -104 b 204 -38 138 -54 171 -38 b 292 -91 238 -38 273 -56 b 306 -141 302 -106 306 -124 b 279 -212 306 -167 296 -194 l 276 -215 l 281 -213 b 408 -93 336 -198 385 -151 b 473 129 409 -88 473 127 b 473 129 473 129 473 129 b 465 122 473 129 469 126 b 341 80 428 94 383 80 b 236 115 303 80 266 91 b 200 195 213 136 200 165 b 217 256 200 217 206 238 b 304 303 239 287 272 303 b 393 249 338 303 374 285 b 406 199 402 234 406 217 b 379 129 406 173 397 148 l 377 126 l 382 127 b 509 248 436 142 485 190 b 574 470 510 254 574 469 b 574 470 574 470 574 470 b 566 464 574 470 570 467 b 442 421 529 435 484 421 b 337 458 404 421 367 433 b 300 537 313 478 300 508 b 389 644 300 585 334 635 "},v39:{x_min:-171.5,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 553 20 616 20 614 b 20 491 20 503 20 491 l 20 491 b 153 535 47 501 149 535 b 174 514 167 535 174 524 b 164 496 174 508 171 501 b 92 470 164 495 132 484 l 20 445 l 20 390 b 20 363 20 378 20 370 b 20 333 20 340 20 333 l 20 333 b 153 377 47 344 149 377 b 174 356 167 377 174 367 b 164 338 174 349 171 342 b 92 312 164 338 132 326 l 20 288 l 20 219 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b -1 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 b -21 30 -21 -212 -21 -212 b -21 273 -21 163 -21 273 b -84 252 -21 273 -50 263 b -152 230 -133 234 -145 230 b -157 231 -155 230 -156 231 b -171 252 -166 234 -171 244 b -160 270 -171 259 -167 266 b -27 316 -159 270 -93 294 l -21 319 l -21 374 b -21 431 -21 406 -21 431 b -84 409 -21 431 -50 421 b -152 388 -133 392 -145 388 b -157 390 -155 388 -156 388 b -171 409 -166 392 -171 401 b -160 428 -171 417 -167 424 b -27 474 -159 428 -93 451 l -21 476 l -21 546 b -20 620 -21 614 -21 616 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},v3b:{x_min:0,x_max:484.5625,ha:494,o:"m 228 245 b 239 247 234 247 239 247 b 243 247 240 247 242 247 b 303 238 257 247 287 242 b 484 -2 417 208 484 104 b 412 -177 484 -65 461 -127 b 243 -248 363 -226 303 -248 b 6 -63 138 -248 36 -180 b 0 -1 1 -41 0 -20 b 228 245 0 127 98 240 m 255 181 b 240 183 247 183 245 183 b 232 181 238 183 235 183 b 142 152 200 180 168 170 l 138 149 l 190 97 l 242 44 l 294 97 l 345 149 l 340 152 b 255 181 315 169 284 180 m 147 -54 l 197 -1 l 147 51 l 95 104 l 91 99 b 62 -1 72 70 62 34 b 66 -43 62 -15 63 -29 b 91 -101 72 -63 80 -84 l 95 -106 l 147 -54 m 393 99 b 389 104 390 102 389 104 b 337 51 389 104 366 80 l 285 -1 l 337 -54 l 389 -106 l 393 -101 b 421 -1 412 -72 421 -36 b 393 99 421 34 412 69 m 294 -98 b 242 -45 265 -69 242 -45 b 190 -98 242 -45 219 -69 l 138 -151 l 142 -154 b 242 -184 172 -174 206 -184 b 340 -154 276 -184 311 -174 l 345 -151 l 294 -98 "},v3c:{x_min:0,x_max:450.53125,ha:460,o:"m 189 302 b 204 303 193 302 198 303 b 303 224 250 303 292 270 b 306 199 304 216 306 208 b 279 129 306 173 296 147 l 276 126 l 281 127 b 408 249 337 142 385 190 b 412 259 409 254 412 258 b 430 267 417 265 423 267 b 450 247 441 267 450 259 b 200 -605 450 242 204 -599 b 182 -616 197 -612 190 -616 b 163 -602 174 -616 166 -610 b 161 -598 161 -601 161 -601 b 217 -402 161 -589 170 -562 b 272 -213 247 -298 272 -213 b 272 -213 272 -213 272 -213 b 264 -219 272 -213 268 -216 b 140 -262 227 -247 182 -262 b 36 -226 102 -262 65 -249 b 0 -145 12 -206 0 -176 b 17 -84 0 -124 5 -104 b 103 -38 38 -54 70 -38 b 191 -91 137 -38 172 -56 b 205 -141 201 -106 205 -124 b 178 -212 205 -167 196 -194 l 175 -215 l 182 -213 b 307 -93 236 -198 284 -151 b 372 129 308 -88 372 127 b 372 129 372 129 372 129 b 364 122 372 129 368 126 b 240 80 328 94 283 80 b 137 115 202 80 166 91 b 99 194 111 136 99 165 b 189 302 99 244 133 292 "},v3e:{x_min:0,x_max:406.96875,ha:415,o:"m 21 183 b 28 183 24 183 25 183 b 42 181 34 183 39 183 b 127 108 47 179 47 179 b 202 41 168 72 202 41 b 279 108 204 41 238 72 b 357 177 321 145 356 176 b 375 183 363 181 370 183 b 406 151 392 183 406 169 b 404 137 406 147 405 141 b 322 62 401 131 398 129 b 251 0 284 27 251 0 b 322 -63 251 -1 284 -29 b 404 -138 398 -130 401 -133 b 406 -152 405 -142 406 -148 b 375 -184 406 -170 392 -184 b 357 -179 370 -184 363 -183 b 279 -109 356 -177 321 -147 b 202 -43 238 -73 204 -43 b 127 -109 202 -43 168 -73 b 49 -179 85 -147 50 -177 b 31 -184 43 -183 36 -184 b 0 -152 13 -184 0 -170 b 2 -138 0 -148 0 -142 b 83 -63 5 -133 8 -130 b 155 0 122 -29 155 -1 b 83 62 155 0 122 27 b 8 129 43 97 10 127 b 0 151 2 136 0 144 b 21 183 0 165 8 177 "},v3f:{x_min:-24.5,x_max:317.140625,ha:324,o:"m -24 -147 l -24 -5 l -20 -5 b -1 -19 -12 -5 -4 -11 b 58 -123 6 -43 31 -86 b 196 -278 93 -173 134 -219 b 317 -570 274 -356 317 -460 b 294 -713 317 -617 308 -666 l 289 -724 l 294 -735 b 317 -873 308 -780 317 -827 b 235 -1132 317 -963 288 -1054 b 209 -1165 228 -1140 224 -1146 b 189 -1177 204 -1172 196 -1177 b 171 -1164 182 -1177 175 -1172 b 168 -1154 170 -1161 168 -1159 b 181 -1132 168 -1149 172 -1142 b 269 -891 238 -1064 269 -975 b 269 -881 269 -886 269 -884 b 262 -814 269 -857 265 -827 b 258 -800 261 -811 259 -806 b 142 -628 240 -731 198 -667 b -8 -589 112 -606 47 -589 b -20 -589 -13 -589 -19 -589 l -24 -589 l -24 -449 l -24 -308 l -20 -308 b -1 -322 -12 -308 -4 -313 b 58 -424 6 -345 31 -388 b 194 -580 93 -476 136 -523 b 259 -660 221 -606 245 -635 b 261 -663 259 -662 261 -663 b 264 -656 262 -663 262 -660 b 269 -587 268 -632 269 -610 b 264 -521 269 -566 268 -544 b 262 -512 264 -517 262 -513 b 258 -498 261 -509 259 -503 b 142 -326 240 -428 198 -365 b -8 -287 112 -303 47 -288 b -20 -287 -13 -287 -19 -287 l -24 -287 l -24 -147 "},v40:{x_min:-1.359375,x_max:436.921875,ha:446,o:"m 213 205 b 217 205 215 205 216 205 b 234 194 224 205 234 199 b 236 187 234 194 235 190 l 245 167 l 261 129 l 270 106 b 355 -61 294 54 329 -13 b 420 -163 381 -105 402 -138 b 436 -188 435 -184 436 -184 b 436 -191 436 -190 436 -190 b 421 -206 436 -201 431 -206 l 421 -206 l 416 -206 l 405 -201 b 217 -158 347 -172 283 -158 b 31 -201 153 -158 88 -172 l 20 -206 l 14 -206 l 14 -206 b 0 -191 5 -206 0 -201 b -1 -188 0 -190 -1 -190 b 14 -163 -1 -186 0 -184 b 95 -34 36 -136 72 -77 b 166 106 119 8 148 68 l 175 129 l 183 148 l 200 188 b 213 205 205 199 208 202 "},v41:{x_min:-1.359375,x_max:556.6875,ha:568,o:"m 294 322 b 318 323 299 322 308 323 b 360 320 334 323 352 322 b 526 217 430 310 490 273 b 543 166 537 202 543 184 b 447 70 543 117 503 70 b 445 70 447 70 446 70 b 359 159 394 72 359 113 b 368 201 359 173 362 187 b 442 245 382 229 412 245 b 455 244 446 245 451 245 b 460 244 458 244 460 244 b 460 244 460 244 460 244 b 454 248 460 244 458 245 b 325 291 417 276 372 291 b 285 287 313 291 299 290 b 144 -2 183 269 144 190 b 281 -290 144 -208 179 -280 b 304 -291 289 -291 298 -291 b 524 -105 412 -291 506 -212 b 541 -84 526 -88 530 -84 b 556 -101 551 -84 556 -90 b 549 -138 556 -111 553 -122 b 334 -322 521 -237 435 -310 b 302 -324 323 -323 313 -324 b 13 -101 172 -324 54 -234 b -1 -1 4 -68 -1 -34 b 294 322 -1 161 121 303 "},v42:{x_min:-348.4375,x_max:24.5,ha:25,o:"m -330 155 b -322 156 -329 156 -326 156 b -315 156 -319 156 -317 156 b -298 147 -311 155 -308 154 b -19 30 -224 98 -122 55 l 2 26 b 24 -1 17 22 24 13 b 2 -27 24 -15 17 -23 l -19 -31 b -298 -148 -122 -56 -224 -99 b -322 -158 -313 -158 -315 -158 b -348 -131 -338 -158 -348 -145 b -344 -117 -348 -127 -347 -122 b -328 -104 -341 -112 -338 -111 b -127 -8 -269 -65 -202 -33 b -106 0 -115 -4 -106 -1 b -127 6 -106 0 -115 2 b -328 102 -202 31 -269 63 b -344 116 -338 109 -341 111 b -348 130 -347 120 -348 124 b -330 155 -348 141 -341 152 "},v43:{x_min:-442.359375,x_max:441,ha:450,o:"m -31 487 b -1 488 -21 488 -10 488 b 434 104 216 488 397 330 b 441 27 438 79 441 47 b 439 12 441 20 439 15 b 419 0 435 4 427 0 b 404 5 413 0 408 1 b 398 30 400 11 398 13 b 0 351 390 213 213 351 b -59 348 -20 351 -39 349 b -400 30 -251 324 -393 191 b -405 5 -400 13 -401 11 b -420 0 -409 1 -415 0 b -441 12 -428 0 -436 4 b -442 27 -441 15 -442 20 b -435 104 -442 47 -439 79 b -31 487 -401 316 -235 474 m -13 131 b -1 133 -9 133 -5 133 b 51 105 19 133 39 123 b 61 70 58 95 61 83 b 51 34 61 58 58 45 b -1 6 39 16 19 6 b -46 27 -17 6 -34 13 b -62 69 -57 38 -62 54 b -13 131 -62 98 -44 124 "},v44:{x_min:-21.78125,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 383 20 616 20 616 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b 0 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 201 l -21 616 l -20 620 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},v45:{x_min:-402.890625,x_max:401.53125,ha:410,o:"m -10 273 b -4 274 -9 273 -6 274 b 16 262 4 274 12 269 b 17 158 17 259 17 259 l 17 56 l 62 112 b 117 174 110 172 110 172 b 122 174 118 174 119 174 b 132 173 125 174 129 173 b 295 11 134 172 171 134 l 307 -1 l 336 34 b 374 76 366 72 368 74 b 381 77 375 77 378 77 b 401 56 392 77 401 68 b 400 48 401 54 401 51 b 223 -172 397 41 230 -166 b 210 -176 220 -174 215 -176 b 201 -174 206 -176 204 -176 b 112 -87 198 -173 178 -152 b 27 0 65 -38 27 0 b 21 -6 27 0 24 -2 l 17 -12 l 17 -147 b 17 -210 17 -173 17 -194 b 10 -292 17 -297 16 -287 b -2 -299 6 -297 2 -299 b -21 -287 -10 -299 -19 -295 b -24 -174 -23 -284 -23 -284 l -24 -63 l -66 -117 b -121 -176 -110 -170 -114 -176 b -125 -176 -122 -176 -123 -176 b -296 -12 -134 -174 -125 -184 l -308 0 l -337 -34 b -375 -77 -367 -73 -370 -76 b -382 -79 -377 -79 -379 -79 b -402 -58 -393 -79 -402 -69 b -401 -49 -402 -55 -402 -52 b -224 170 -398 -43 -231 165 b -212 174 -221 173 -216 174 b -202 173 -208 174 -205 174 b -39 11 -200 172 -151 122 l -28 -1 l -25 1 l -24 4 l -24 130 b -23 260 -24 256 -24 258 b -10 273 -20 266 -16 270 "},v46:{x_min:0,x_max:627.46875,ha:640,o:"m 306 190 b 314 191 308 191 311 191 b 326 184 318 191 322 190 l 336 173 b 510 52 377 127 442 80 b 515 49 513 51 515 49 b 611 16 537 40 579 24 b 627 0 624 13 627 9 b 607 -18 627 -11 624 -13 b 330 -181 490 -49 389 -109 b 314 -192 323 -190 319 -192 b 306 -191 311 -192 308 -192 b 294 -177 302 -188 302 -188 b 257 -140 287 -170 265 -148 b 19 -18 193 -84 114 -44 b 0 0 2 -13 0 -11 b 16 16 0 9 2 13 b 110 49 47 24 89 40 b 117 52 111 49 114 51 b 145 65 126 56 130 58 b 281 163 200 93 245 124 b 300 186 288 170 291 174 b 306 190 300 187 303 188 m 317 137 b 313 142 315 141 314 142 b 308 137 313 142 311 141 b 161 4 276 84 220 33 b 155 0 159 1 155 0 b 163 -4 155 0 159 -2 b 308 -138 220 -34 276 -84 b 313 -142 311 -141 313 -142 b 317 -138 314 -142 315 -141 b 464 -4 351 -84 406 -34 b 470 0 468 -2 470 0 b 464 4 470 0 468 1 b 317 137 406 33 351 84 "},v47:{x_min:-24.5,x_max:315.78125,ha:322,o:"m -24 -145 l -24 -5 l -20 -5 b 1 -26 -10 -5 -6 -9 b 175 -241 31 -86 96 -166 b 314 -548 259 -323 304 -420 b 315 -589 315 -555 315 -571 b 314 -630 315 -606 315 -623 b 298 -730 311 -664 306 -699 l 295 -742 l 296 -748 b 314 -850 304 -778 311 -813 b 315 -892 315 -857 315 -874 b 314 -932 315 -909 315 -925 b 298 -1032 311 -967 306 -1002 l 295 -1045 l 296 -1050 b 314 -1153 304 -1081 311 -1115 b 315 -1193 315 -1160 315 -1177 b 314 -1235 315 -1211 315 -1228 b 217 -1526 306 -1338 270 -1444 b 201 -1533 213 -1532 208 -1533 b 182 -1522 193 -1533 185 -1529 b 179 -1514 181 -1518 179 -1517 b 189 -1489 179 -1508 182 -1501 b 266 -1217 240 -1403 266 -1308 b 262 -1156 266 -1196 265 -1177 b 110 -907 247 -1043 190 -950 b 0 -889 87 -895 50 -889 l -1 -889 l -24 -889 l -24 -749 l -24 -610 l -20 -610 b 1 -631 -10 -610 -6 -614 b 175 -846 31 -691 96 -771 b 259 -956 213 -884 236 -914 b 265 -966 262 -961 264 -966 b 265 -966 265 -966 265 -966 b 265 -953 265 -964 265 -959 b 266 -920 266 -943 266 -932 b 262 -853 266 -898 265 -873 b 110 -605 247 -741 190 -648 b 0 -587 87 -592 50 -587 l -1 -587 l -24 -587 l -24 -448 l -24 -308 l -20 -308 b 1 -328 -10 -308 -6 -312 b 175 -544 31 -388 96 -469 b 259 -655 213 -581 236 -612 b 265 -663 262 -659 264 -663 b 265 -663 265 -663 265 -663 b 265 -650 265 -663 265 -657 b 266 -617 266 -641 266 -630 b 262 -551 266 -595 265 -570 b 110 -303 247 -438 190 -345 b 0 -284 87 -290 50 -284 l -1 -284 l -24 -284 l -24 -145 "},v49:{x_min:0,x_max:630.203125,ha:643,o:"m 308 204 b 314 205 310 205 313 205 b 326 201 319 205 323 204 b 355 154 328 199 338 180 b 401 83 362 142 392 95 l 409 72 b 431 41 412 66 424 49 b 619 -174 498 -51 570 -134 b 630 -192 626 -180 630 -186 b 626 -202 630 -195 628 -199 b 616 -206 623 -205 620 -206 b 552 -188 608 -206 592 -202 b 310 -155 488 -169 392 -155 b 268 -156 295 -155 281 -155 b 77 -188 197 -161 126 -173 b 13 -206 35 -202 20 -206 b 9 -206 12 -206 10 -206 b 0 -191 2 -202 0 -197 b 8 -176 0 -186 2 -180 b 204 49 58 -136 138 -43 l 220 72 l 227 83 b 295 188 245 108 281 166 b 308 204 299 197 304 202 m 315 147 b 314 147 315 147 314 147 b 314 147 314 147 314 147 b 306 129 314 145 310 138 l 296 105 b 281 72 292 97 284 77 l 274 56 b 181 -123 247 -4 212 -72 l 174 -134 l 176 -133 b 314 -123 215 -127 272 -123 b 451 -133 356 -123 413 -127 l 454 -134 l 449 -123 b 353 56 417 -72 381 -4 l 347 72 b 332 105 344 77 336 97 l 322 129 b 315 147 318 138 315 145 "},v4a:{x_min:70.78125,x_max:378.390625,ha:315,o:"m 246 373 b 254 373 249 373 251 373 b 372 324 303 373 360 351 b 378 302 377 317 378 309 b 338 251 378 278 362 255 b 328 249 334 249 332 249 b 283 294 303 249 283 270 b 288 315 283 301 284 308 b 289 319 289 317 289 319 b 289 319 289 319 289 319 b 283 320 289 320 287 320 b 270 322 279 322 274 322 b 206 288 242 322 215 308 b 206 283 206 287 206 285 b 257 223 206 267 230 238 b 284 206 272 213 277 210 b 351 90 328 173 351 130 b 340 47 351 74 348 59 b 205 -30 314 -2 264 -30 b 182 -29 198 -30 190 -30 b 84 15 147 -24 103 -5 b 70 48 74 24 70 36 b 108 99 70 70 85 94 b 121 102 112 101 117 102 b 167 56 147 102 167 80 b 159 31 167 48 164 40 l 156 26 l 157 26 b 190 20 167 22 178 20 b 220 26 201 20 212 22 b 258 65 243 34 258 51 b 257 70 258 66 258 69 b 204 126 249 94 234 109 b 114 258 148 158 114 209 b 125 302 114 273 118 288 b 246 373 147 342 193 370 "},v4b:{x_min:0,x_max:503.609375,ha:514,o:"m 274 430 b 277 430 276 430 277 430 b 310 394 296 430 310 415 b 308 383 310 391 308 387 b 306 367 307 381 307 374 b 236 120 298 305 272 210 b 40 -273 189 -5 125 -134 b 20 -287 35 -283 27 -287 b 5 -281 14 -287 9 -285 b 0 -267 1 -277 0 -273 b 9 -242 0 -262 2 -255 b 246 395 137 -12 232 242 b 274 430 249 416 257 427 m 468 430 b 472 430 469 430 470 430 b 503 394 490 430 503 415 b 502 383 503 391 503 387 b 499 367 502 381 500 374 b 431 120 491 305 465 210 b 234 -273 382 -5 318 -134 b 213 -287 228 -283 220 -287 b 198 -281 208 -287 202 -285 b 193 -267 194 -277 193 -273 b 202 -242 193 -262 196 -255 b 439 395 330 -12 426 242 b 468 430 442 416 451 427 "},v4d:{x_min:-311.6875,x_max:310.328125,ha:317,o:"m -9 388 b -2 390 -8 390 -5 390 b 5 388 1 390 4 390 b 19 378 10 387 16 383 b 23 333 23 371 23 371 b 24 298 23 299 24 298 b 81 276 34 298 65 285 b 213 91 145 240 190 177 b 224 24 217 76 224 36 b 257 24 224 24 235 24 b 299 19 292 24 292 24 b 310 -1 306 15 310 6 b 299 -23 310 -11 306 -19 b 257 -27 292 -27 292 -27 b 224 -29 235 -27 224 -29 b 213 -95 224 -40 217 -80 b 81 -280 190 -181 145 -244 b 24 -301 65 -290 34 -301 b 23 -335 24 -301 23 -303 l 23 -340 b 17 -381 23 -374 23 -374 b -1 -391 13 -388 5 -391 b -21 -381 -9 -391 -17 -388 b -27 -340 -27 -374 -27 -374 l -27 -335 b -28 -301 -27 -303 -27 -301 b -85 -280 -38 -301 -69 -290 b -217 -95 -149 -244 -194 -181 b -228 -29 -221 -80 -228 -40 b -259 -27 -228 -29 -238 -27 b -300 -23 -294 -27 -294 -27 b -311 -2 -307 -19 -311 -11 b -294 23 -311 8 -304 19 b -259 24 -291 23 -284 24 b -228 24 -239 24 -228 24 b -217 91 -228 36 -221 76 b -85 276 -194 177 -149 240 b -28 298 -69 285 -38 298 b -27 333 -27 298 -27 299 b -27 371 -27 362 -27 369 b -9 388 -24 378 -17 385 m -27 136 b -28 247 -27 197 -28 247 b -61 216 -31 247 -53 226 b -123 33 -95 172 -121 98 l -125 24 l -76 24 l -27 24 l -27 136 m 29 242 b 24 247 27 245 24 247 b 23 136 24 247 23 197 l 23 24 l 72 24 l 121 24 l 119 33 b 29 242 115 116 77 206 m -27 -140 l -27 -27 l -76 -27 l -125 -27 l -123 -36 b -61 -220 -121 -102 -95 -176 b -28 -251 -53 -230 -31 -251 b -27 -140 -28 -251 -27 -201 m 119 -36 l 121 -27 l 72 -27 l 23 -27 l 23 -140 b 24 -251 23 -201 24 -251 b 57 -220 27 -251 49 -230 b 119 -36 91 -176 117 -102 "},v4e:{x_min:0,x_max:239.5625,ha:244,o:"m 10 460 b 20 462 13 462 14 462 b 39 449 28 462 35 458 l 40 446 l 40 326 b 40 205 40 259 40 205 b 127 227 40 205 80 215 b 220 249 196 244 213 249 b 227 247 224 249 225 248 b 238 237 231 245 235 241 l 239 233 l 239 -106 l 239 -448 l 238 -451 b 219 -463 234 -459 225 -463 b 198 -451 210 -463 202 -459 l 197 -448 l 197 -324 b 197 -201 197 -248 197 -201 b 110 -223 196 -201 157 -210 b 17 -245 42 -240 24 -245 b 10 -242 13 -245 13 -244 b 0 -233 6 -241 2 -237 l 0 -230 l 0 108 l 0 446 l 0 449 b 10 460 2 453 6 458 m 197 22 b 197 70 197 41 197 58 b 196 116 197 113 197 116 l 196 116 b 118 97 196 116 160 106 l 40 77 l 40 -18 b 40 -112 40 -69 40 -112 l 119 -93 l 197 -73 l 197 22 "},v51:{x_min:-1.359375,x_max:455.96875,ha:465,o:"m 352 541 b 357 542 353 542 355 542 b 377 530 364 542 372 537 l 378 526 l 378 394 l 379 262 l 404 266 b 436 270 420 269 430 270 b 450 265 443 270 446 269 b 455 220 455 259 455 260 l 455 208 l 455 161 l 454 156 b 411 140 449 147 447 147 b 378 133 393 137 379 134 b 378 68 378 133 378 106 b 378 22 378 54 378 38 l 379 -87 l 404 -83 b 436 -79 420 -80 430 -79 b 450 -84 443 -79 446 -80 b 455 -129 455 -90 455 -88 l 455 -141 l 455 -188 l 454 -192 b 413 -209 449 -202 447 -202 b 382 -215 398 -212 383 -215 l 378 -215 l 378 -345 l 378 -380 b 375 -485 378 -484 378 -480 b 357 -494 371 -491 364 -494 b 340 -485 351 -494 344 -491 b 336 -383 337 -480 336 -484 l 336 -349 l 336 -223 l 334 -223 b 291 -231 334 -223 314 -227 l 247 -240 l 247 -371 l 246 -503 l 245 -506 b 225 -519 242 -514 234 -519 b 206 -506 219 -519 210 -514 l 205 -503 l 205 -376 l 205 -248 l 160 -256 l 115 -265 l 115 -396 l 115 -527 l 114 -531 b 95 -544 110 -539 102 -544 b 76 -531 87 -544 78 -539 l 73 -527 l 73 -399 b 73 -273 73 -330 73 -273 b 49 -277 73 -273 61 -274 b 17 -281 32 -280 24 -281 b 4 -276 10 -281 8 -280 b -1 -234 0 -269 -1 -272 b 0 -219 -1 -229 0 -224 l 0 -170 l 1 -167 b 10 -158 2 -163 6 -159 b 49 -149 13 -156 16 -155 l 73 -145 l 73 -34 b 73 76 73 26 73 76 b 49 72 73 76 61 74 b 17 68 32 69 24 68 b 4 73 10 68 8 69 b -1 115 0 80 -1 77 b 0 130 -1 120 0 124 l 0 179 l 1 181 b 10 191 2 186 6 190 b 49 199 13 192 16 194 l 73 204 l 73 338 b 73 374 73 352 73 365 b 77 483 73 484 73 477 b 95 492 81 489 88 492 b 111 483 100 492 107 489 b 115 378 115 477 115 483 l 115 342 b 117 212 115 223 115 212 b 204 229 117 212 200 227 l 205 229 l 205 365 l 205 502 l 206 505 b 225 517 210 513 219 517 b 245 505 234 517 242 513 l 246 502 l 247 369 l 247 237 l 249 237 b 336 254 253 238 336 254 b 337 390 336 254 337 302 l 337 526 l 338 530 b 352 541 341 535 347 539 m 336 15 b 336 126 336 102 336 126 l 336 126 b 291 117 336 126 315 122 l 247 109 l 247 -1 l 247 -112 l 249 -112 b 336 -95 253 -111 336 -95 b 336 15 336 -95 336 -56 m 205 -120 b 205 -55 205 -120 205 -93 b 205 -9 205 -41 205 -24 l 205 101 l 160 93 l 115 84 l 115 -26 b 115 -83 115 -49 115 -69 b 117 -137 115 -133 115 -137 b 205 -120 118 -137 204 -120 "},v52:{x_min:-10.890625,x_max:298.078125,ha:294,o:"m 138 473 b 142 474 140 473 141 474 b 164 459 148 474 153 470 b 191 402 183 442 191 423 b 181 353 191 388 187 371 b 178 349 179 352 178 349 b 179 348 178 348 179 348 b 185 349 181 348 182 348 b 255 376 210 355 234 363 b 272 381 264 381 266 381 b 298 355 287 381 298 370 b 288 330 298 348 298 345 b 171 34 238 254 194 141 b 166 13 168 16 168 16 b 144 1 161 5 152 1 b 121 15 134 1 125 5 b 115 33 119 18 117 24 b 0 330 91 145 49 252 b -10 355 -9 345 -10 348 b 13 381 -10 371 0 381 b 31 376 19 381 25 380 b 132 345 61 358 103 345 l 136 345 l 137 355 b 145 378 138 359 142 370 b 152 415 149 394 152 405 b 137 452 152 427 148 438 b 133 464 134 458 133 460 b 138 473 133 467 134 470 "},v53:{x_min:0,x_max:902.421875,ha:921,o:"m 17 240 b 24 241 19 241 21 241 b 32 240 28 241 31 241 b 46 229 38 238 43 234 b 50 88 50 223 50 237 b 50 -1 50 63 50 34 b 50 -90 50 -36 50 -65 b 46 -231 50 -238 50 -224 b 25 -242 42 -238 34 -242 b 0 -224 14 -242 4 -235 b 0 2 0 -222 0 -108 b 0 223 0 112 0 220 b 17 240 2 230 9 237 m 110 240 b 118 241 111 241 114 241 b 126 240 121 241 123 241 b 142 223 133 237 140 230 b 144 123 144 220 144 205 b 144 29 144 45 144 29 b 144 29 144 29 144 29 b 393 183 166 106 264 167 b 450 186 412 184 431 186 b 756 29 600 186 732 120 b 756 29 756 29 756 29 b 758 123 758 29 758 45 b 760 227 758 226 758 223 b 784 241 766 237 774 241 b 804 229 792 241 800 237 b 809 88 808 223 809 237 l 809 -1 l 809 -90 b 804 -231 809 -238 808 -224 b 784 -242 800 -238 792 -242 b 762 -231 775 -242 766 -238 b 758 -124 756 -224 758 -231 b 756 -30 758 -47 758 -30 b 756 -30 756 -30 756 -30 b 509 -184 736 -108 637 -169 b 450 -187 488 -187 469 -187 b 144 -30 300 -187 168 -122 b 144 -30 144 -30 144 -30 b 144 -124 144 -30 144 -47 b 140 -231 144 -231 144 -224 b 118 -242 134 -238 126 -242 b 92 -224 107 -242 96 -235 b 92 2 92 -222 92 -108 b 92 223 92 112 92 220 b 110 240 95 230 102 237 m 432 161 b 413 162 426 162 420 162 b 313 41 351 162 313 109 b 347 -73 313 5 323 -34 b 487 -163 385 -133 439 -163 b 578 -97 526 -163 562 -142 b 588 -43 585 -80 588 -62 b 432 161 588 47 518 147 m 868 240 b 876 241 869 241 872 241 b 884 240 879 241 882 241 b 898 229 890 238 894 234 b 902 88 902 223 902 237 l 902 -1 l 902 -90 b 898 -231 902 -238 902 -224 b 876 -242 892 -238 884 -242 b 852 -224 865 -242 854 -235 b 850 2 850 -222 850 -108 b 852 223 850 112 850 220 b 868 240 853 230 860 237 "},v54:{x_min:-24.5,x_max:317.140625,ha:324,o:"m -24 -161 l -24 -5 l -20 -5 b 0 -24 -9 -5 -2 -12 b 171 -315 21 -124 84 -233 b 317 -660 268 -406 317 -531 b 187 -1014 317 -782 274 -909 b 161 -1034 172 -1034 171 -1034 b 141 -1013 149 -1034 141 -1025 b 152 -991 141 -1004 142 -1002 b 266 -682 228 -899 266 -788 b 174 -430 266 -588 236 -498 b -23 -317 136 -388 66 -348 b -24 -161 -23 -316 -24 -285 "},v55:{x_min:0,x_max:551.25,ha:563,o:"m 289 644 b 304 645 294 645 299 645 b 404 566 349 645 392 613 b 406 541 405 557 406 549 b 379 471 406 514 397 489 l 377 467 l 382 470 b 509 591 438 485 485 531 b 513 601 510 595 513 599 b 530 609 518 607 524 609 b 551 588 540 609 551 602 b 200 -605 551 584 204 -599 b 182 -616 197 -612 190 -616 b 163 -602 174 -616 166 -610 b 161 -598 161 -601 161 -601 b 217 -402 161 -589 170 -562 b 272 -213 247 -298 272 -213 b 272 -213 272 -213 272 -213 b 264 -219 272 -213 268 -216 b 140 -262 227 -247 182 -262 b 36 -226 102 -262 65 -249 b 0 -145 12 -206 0 -176 b 17 -84 0 -124 5 -104 b 103 -38 38 -54 70 -38 b 191 -91 137 -38 172 -56 b 205 -141 201 -106 205 -124 b 178 -212 205 -167 196 -194 l 175 -215 l 182 -213 b 307 -93 236 -198 284 -151 b 372 129 308 -88 372 127 b 372 129 372 129 372 129 b 364 122 372 129 368 126 b 240 80 328 94 283 80 b 137 115 202 80 166 91 b 99 195 112 136 99 165 b 118 256 99 217 106 238 b 204 303 138 287 171 303 b 292 249 238 303 273 285 b 306 199 302 234 306 217 b 279 129 306 173 296 148 l 276 126 l 281 127 b 408 248 336 142 385 190 b 473 470 409 254 473 469 b 473 470 473 470 473 470 b 465 464 473 470 469 467 b 341 421 428 435 383 421 b 236 458 303 421 266 433 b 200 537 212 478 200 508 b 289 644 200 585 234 635 "},v58:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 259 1553 b 265 1553 261 1553 264 1553 b 288 1540 272 1553 277 1550 b 367 1351 340 1493 367 1424 b 336 1221 367 1308 357 1263 l 332 1211 l 333 1208 b 367 1077 356 1170 367 1124 b 336 945 367 1032 357 986 l 332 935 l 333 932 b 367 800 356 893 367 848 b 336 669 367 756 357 710 l 332 659 l 333 656 b 367 523 356 617 367 571 b 345 412 367 485 360 446 b 231 273 322 356 284 310 b -1 19 121 195 27 93 b -17 4 -4 11 -10 5 l -21 4 l -21 134 l -21 265 l -17 265 b 133 291 20 265 96 278 b 318 537 245 328 318 433 b 307 603 318 559 315 582 b 303 614 304 612 304 614 b 298 609 302 614 300 613 b 231 549 281 589 258 567 b -1 295 121 471 27 369 b -17 280 -4 287 -10 281 l -21 280 l -21 410 l -21 541 l -17 541 b 133 567 20 541 96 555 b 318 813 245 605 318 709 b 307 880 318 835 315 859 b 303 891 304 888 304 891 b 298 885 302 891 300 888 b 231 825 281 866 258 843 b -1 571 121 748 27 645 b -17 556 -4 563 -10 557 l -21 556 l -21 687 l -21 817 l -17 817 b 133 843 20 817 96 830 b 318 1089 245 881 318 985 b 307 1156 318 1111 315 1134 b 303 1167 304 1164 304 1167 b 298 1161 302 1167 300 1164 b 231 1102 281 1140 258 1120 b -1 848 121 1024 27 921 b -17 832 -4 839 -10 834 l -21 832 l -21 963 l -21 1093 l -17 1093 b 114 1113 12 1093 78 1103 b 313 1314 215 1142 289 1218 b 318 1364 317 1331 318 1347 b 255 1511 318 1422 295 1478 b 243 1532 247 1519 243 1525 b 259 1553 243 1540 250 1550 "},v59:{x_min:0,x_max:464.140625,ha:474,o:"m 0 0 l 0 347 l 76 347 l 153 347 l 153 0 l 153 -348 l 76 -348 l 0 -348 l 0 0 m 308 -1 l 308 347 l 386 347 l 464 347 l 464 -1 l 464 -348 l 386 -348 l 308 -348 l 308 -1 "},v5a:{x_min:-171.5,x_max:170.140625,ha:174,o:"m -6 566 b 0 567 -5 567 -2 567 b 14 556 6 567 12 563 b 92 285 14 555 50 433 b 170 13 166 33 170 19 b 168 13 170 13 170 13 b 161 1 168 8 167 4 l 159 0 l 122 0 l 84 0 l 81 1 b 21 195 76 5 78 -5 b -32 381 -8 297 -32 381 b -87 197 -32 381 -57 298 b -141 8 -115 94 -140 9 b -155 0 -142 2 -149 0 b -171 15 -163 0 -171 5 b -14 556 -171 18 -24 528 b -6 566 -14 560 -10 564 "},v5b:{x_min:-441,x_max:439.640625,ha:449,o:"m -428 -2 b -421 0 -427 -1 -424 0 b -406 -6 -416 0 -409 -2 b -400 -31 -401 -12 -400 -15 b -1 -352 -392 -215 -215 -352 b 58 -349 19 -352 38 -351 b 398 -31 250 -326 392 -192 b 404 -6 398 -15 400 -12 b 419 -1 408 -2 413 -1 b 439 -13 427 -1 435 -5 b 439 -29 439 -16 439 -22 b 434 -105 439 -48 438 -80 b 0 -489 397 -333 213 -489 b -68 -484 -23 -489 -44 -488 b -441 -36 -280 -452 -436 -263 b -441 -30 -441 -34 -441 -31 b -428 -2 -441 -11 -439 -5 m -13 -9 b -1 -8 -9 -8 -5 -8 b 50 -36 19 -8 39 -19 b 61 -72 57 -47 61 -59 b 50 -106 61 -84 57 -97 b -1 -134 39 -124 19 -134 b -46 -115 -17 -134 -34 -129 b -62 -72 -57 -102 -62 -87 b -13 -9 -62 -44 -44 -16 "},v5c:{x_min:0,x_max:447.8125,ha:457,o:"m 0 -87 l 0 0 l 223 0 l 447 0 l 447 -87 l 447 -174 l 223 -174 l 0 -174 l 0 -87 "},v5d:{x_min:-1.359375,x_max:592.078125,ha:604,o:"m 280 692 b 295 694 283 692 289 694 b 310 692 300 694 307 692 b 357 630 340 684 357 657 b 336 580 357 612 351 594 b 311 538 321 566 311 549 b 352 492 311 512 330 492 b 366 495 357 492 362 492 b 397 553 390 503 397 517 b 415 603 397 576 402 591 b 460 623 427 617 443 623 b 509 599 479 623 498 614 b 522 559 518 587 522 573 b 494 506 522 538 513 519 b 451 495 481 498 473 496 b 415 488 432 495 426 494 b 394 449 404 483 394 464 b 394 448 394 448 394 448 l 394 440 l 397 433 b 428 409 404 420 413 413 b 438 408 431 408 435 408 b 479 431 450 408 462 415 b 528 455 495 448 510 455 b 548 452 534 455 541 453 b 592 391 577 442 592 416 b 549 331 592 365 577 340 b 528 327 541 328 534 327 b 479 351 510 327 495 335 b 438 374 464 367 450 374 b 417 369 431 374 424 373 b 394 333 402 360 394 348 b 400 312 394 326 396 319 b 451 287 408 294 420 288 b 513 258 484 285 499 278 b 522 223 519 247 522 234 b 461 159 522 190 496 159 b 449 161 457 159 453 159 b 397 229 416 167 397 191 b 366 288 397 265 390 278 b 352 290 362 290 357 290 b 315 262 336 290 321 280 b 311 245 313 256 311 251 b 334 204 311 233 318 220 b 355 170 348 190 351 184 b 357 152 356 166 357 159 b 355 136 357 147 356 140 b 295 88 345 104 321 88 b 232 152 264 88 232 112 b 255 204 232 174 238 186 b 279 244 273 222 279 231 l 279 245 b 238 290 279 270 259 290 b 224 288 234 290 228 290 b 193 229 200 278 193 265 b 141 161 193 191 174 167 b 129 159 137 159 133 159 b 68 223 93 159 68 190 b 77 258 68 234 70 247 b 138 287 91 278 106 285 b 185 302 166 287 175 291 b 196 333 193 312 196 323 b 174 369 196 347 187 360 b 152 374 166 373 159 374 b 111 351 140 374 126 367 b 62 327 95 335 80 327 b 51 328 58 327 54 327 b -1 391 16 334 -1 363 b 53 455 -1 420 17 449 b 62 455 57 455 59 455 b 111 431 80 455 95 448 b 152 408 127 415 140 408 b 161 409 155 408 159 408 b 193 433 176 413 186 420 l 196 440 l 196 448 b 196 451 196 449 196 449 b 190 471 196 459 194 463 b 137 495 182 489 167 495 l 134 495 l 134 495 b 68 560 95 495 68 521 b 129 623 68 596 95 623 b 144 621 134 623 138 623 b 193 553 175 614 193 589 b 224 495 193 517 200 503 b 238 492 228 492 234 492 b 279 538 259 492 279 512 b 254 580 279 549 269 566 b 232 630 239 594 232 612 b 280 692 232 657 250 684 m 307 456 b 295 458 303 458 299 458 b 230 391 258 458 230 426 b 236 360 230 381 231 371 b 295 324 249 337 272 324 b 353 360 318 324 341 337 b 360 391 357 370 360 381 b 307 456 360 421 340 451 "},v60:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m -367 173 b -362 174 -366 174 -364 174 b -351 173 -357 174 -353 173 b -262 86 -348 172 -328 151 b -176 0 -216 37 -176 0 b -107 84 -176 0 -145 37 b -31 174 -36 173 -38 172 b -25 174 -29 174 -28 174 b -16 173 -23 174 -19 173 b 72 86 -13 172 6 151 b 157 0 119 37 157 0 b 227 84 159 0 189 37 b 303 174 298 173 296 172 b 308 174 304 174 307 174 b 318 173 313 174 317 173 b 481 11 322 172 357 134 l 494 -1 l 522 34 b 560 76 553 72 555 74 b 567 77 563 77 564 77 b 589 56 579 77 589 68 b 586 48 589 54 588 51 b 411 -172 583 41 416 -166 b 397 -176 406 -174 401 -176 b 387 -174 393 -176 390 -176 b 299 -87 386 -173 366 -152 b 213 0 253 -38 213 0 b 144 -86 213 0 182 -38 b 68 -174 73 -174 74 -173 b 62 -176 66 -176 65 -176 b 53 -174 59 -176 55 -174 b -35 -87 50 -173 29 -152 b -121 0 -83 -38 -121 0 b -190 -86 -122 0 -152 -38 b -266 -174 -261 -174 -259 -173 b -272 -176 -268 -176 -270 -176 b -281 -174 -276 -176 -280 -174 b -371 -86 -284 -173 -304 -152 b -457 0 -417 -38 -457 0 l -457 0 b -477 -26 -457 0 -470 -16 b -548 -227 -524 -88 -548 -161 b -536 -303 -548 -254 -544 -280 b -533 -317 -534 -309 -533 -313 b -553 -338 -533 -330 -541 -338 b -577 -315 -566 -338 -571 -333 b -590 -227 -586 -287 -590 -258 b -518 -9 -590 -154 -564 -77 b -465 56 -509 2 -504 8 l -402 134 b -367 173 -375 169 -372 172 "},v62:{x_min:46.28125,x_max:669.671875,ha:563,o:"m 183 376 b 189 376 185 376 187 376 b 212 374 197 376 208 376 b 265 337 234 369 253 355 b 274 317 268 331 273 320 b 274 316 274 317 274 316 b 280 323 276 316 276 319 b 311 358 288 337 299 348 b 319 366 315 360 318 365 b 356 376 326 373 340 376 b 382 371 364 376 374 374 b 428 337 400 366 417 352 b 436 317 431 331 436 320 b 438 316 436 317 436 316 b 442 323 438 316 439 319 b 475 358 451 337 462 348 b 483 366 477 360 481 365 b 518 376 488 373 503 376 b 544 373 528 376 536 376 b 604 285 579 360 604 326 b 597 249 604 273 601 258 b 543 63 596 247 544 70 b 541 54 543 61 541 55 b 540 44 540 51 540 47 b 552 23 540 33 545 23 b 552 23 552 23 552 23 b 647 126 586 29 627 72 b 658 138 651 136 653 138 b 660 138 660 138 660 138 b 669 129 666 137 669 136 b 654 88 669 122 665 109 b 562 -12 631 43 602 9 l 549 -19 b 521 -27 540 -24 530 -27 b 447 30 490 -27 458 -4 b 443 58 445 38 443 48 b 450 93 443 72 446 84 b 504 278 453 97 504 272 b 507 288 506 283 506 287 b 509 298 507 292 509 295 b 491 326 509 310 502 320 b 487 327 490 327 488 327 b 479 324 484 327 483 326 b 441 270 462 316 443 288 b 435 249 441 265 436 254 b 398 127 434 248 419 195 b 362 4 379 61 362 5 b 328 -1 359 -1 362 -1 b 314 -1 323 -1 319 -1 b 302 -1 310 -1 306 -1 b 266 4 266 -1 269 -1 b 265 6 265 5 265 5 b 303 144 265 13 272 34 b 343 278 325 216 343 276 b 344 288 343 281 344 285 b 345 298 345 291 345 295 b 330 326 345 310 340 320 b 323 327 328 327 325 327 b 317 324 322 327 321 326 b 279 270 300 316 281 288 b 273 249 279 265 274 254 b 236 127 272 248 255 195 b 200 4 216 61 200 5 b 164 -1 197 -1 198 -1 b 151 -1 161 -1 156 -1 b 140 -1 147 -1 142 -1 b 103 4 104 -1 106 -1 b 103 6 103 5 103 5 b 141 144 103 13 108 34 b 181 278 161 216 179 276 b 182 288 181 281 181 285 b 183 298 182 291 183 295 b 168 324 183 310 178 320 b 160 327 166 326 163 327 b 141 320 156 327 151 324 b 69 230 112 305 85 272 b 57 215 65 217 62 215 b 55 215 57 215 55 215 b 46 224 49 215 46 217 b 59 260 46 231 50 242 b 151 363 81 306 112 341 b 161 369 155 365 160 367 b 183 376 166 371 174 374 "},v68:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -533 324 b -525 327 -530 326 -528 327 b -504 305 -514 327 -504 317 b -504 305 -504 305 -504 305 b -513 284 -504 299 -504 299 b -556 112 -541 226 -556 167 b -545 33 -556 84 -552 58 b -524 -20 -541 15 -532 -9 l -522 -23 l -491 15 l -413 111 b -355 174 -367 169 -363 174 b -351 174 -353 174 -352 174 b -254 86 -343 174 -348 179 b -168 -1 -208 37 -168 -1 b -100 84 -168 -1 -137 37 b -23 173 -28 173 -29 172 b -19 174 -21 174 -20 174 b -8 173 -14 174 -10 173 b 155 11 -5 172 43 123 l 166 -1 l 168 1 l 170 4 l 170 130 b 171 260 170 256 170 258 b 191 274 175 269 183 274 b 205 267 196 274 201 272 b 212 158 212 262 210 273 l 212 56 l 257 112 b 311 173 304 172 304 172 b 317 174 313 174 314 174 b 326 173 319 174 323 173 b 490 11 329 172 366 134 l 502 -1 l 530 34 b 568 76 560 72 563 74 b 575 77 570 77 573 77 b 596 56 586 77 596 68 b 594 48 596 54 596 51 b 417 -172 592 41 424 -166 b 405 -176 415 -174 409 -176 b 396 -174 401 -176 398 -176 b 307 -87 393 -173 372 -152 b 221 -1 259 -38 221 -1 b 216 -6 221 -1 219 -2 l 212 -12 l 212 -147 b 212 -210 212 -173 212 -194 b 205 -292 212 -297 210 -287 b 191 -299 201 -297 196 -299 b 172 -287 183 -299 175 -295 b 170 -174 171 -284 171 -284 l 170 -63 l 127 -117 b 73 -176 84 -170 80 -176 b 68 -176 72 -176 70 -176 b -27 -87 59 -174 65 -180 b -114 0 -74 -38 -112 0 b -182 -86 -114 0 -145 -38 b -258 -174 -253 -174 -253 -173 b -264 -176 -259 -176 -262 -176 b -274 -174 -268 -176 -272 -174 b -438 -11 -277 -173 -348 -102 l -449 0 l -479 -37 b -524 -80 -513 -80 -514 -80 l -524 -80 b -553 -52 -534 -80 -540 -74 b -597 109 -583 -8 -597 48 b -560 280 -597 165 -585 224 b -533 324 -548 310 -540 322 "},v6c:{x_min:-1.359375,x_max:193.28125,ha:197,o:"m 78 233 b 87 233 81 233 84 233 b 187 140 132 233 174 195 b 193 102 190 127 193 115 b 43 -113 193 22 136 -62 b 27 -119 36 -116 31 -119 b 19 -108 21 -119 19 -115 b 29 -97 19 -102 20 -101 b 102 13 73 -72 102 -27 b 92 51 102 26 98 40 l 91 54 l 84 54 b 8 104 53 54 21 74 b -1 142 1 116 -1 130 b 78 233 -1 187 31 227 "},v6d:{x_min:-590.71875,x_max:589.359375,ha:601,o:"m 544 335 b 553 337 548 337 551 337 b 575 313 563 337 570 330 b 589 226 583 285 589 256 b 517 8 589 152 563 76 b 464 -58 507 -4 503 -9 l 401 -136 b 362 -176 372 -172 370 -176 b 357 -176 360 -176 359 -176 b 261 -87 349 -174 355 -180 b 175 0 215 -38 175 0 b 106 -86 175 0 144 -38 b 29 -174 35 -174 36 -173 b 24 -176 28 -176 27 -176 b 14 -174 21 -176 17 -174 b -73 -87 12 -173 -8 -152 b -159 0 -121 -38 -159 0 b -228 -86 -160 0 -190 -38 b -304 -174 -299 -174 -298 -173 b -310 -176 -306 -176 -308 -176 b -319 -174 -314 -176 -318 -174 b -483 -12 -323 -173 -359 -137 l -495 0 l -524 -34 b -562 -77 -553 -73 -556 -76 b -568 -79 -564 -79 -566 -79 b -590 -58 -581 -79 -590 -69 b -588 -49 -590 -55 -589 -52 b -412 170 -585 -43 -417 165 b -398 174 -408 173 -402 174 b -389 173 -394 174 -392 174 b -300 86 -387 172 -366 151 b -215 -1 -254 37 -215 -1 b -145 84 -215 -1 -183 37 b -69 173 -74 173 -76 172 b -63 174 -68 174 -66 174 b -54 173 -61 174 -57 173 b 34 86 -51 172 -31 151 b 119 -1 81 37 119 -1 b 189 84 121 -1 151 37 b 265 173 259 173 258 172 b 270 174 266 174 269 174 b 280 173 274 174 279 173 b 370 84 283 172 303 151 b 455 -1 416 37 455 -1 l 455 -1 b 476 24 455 -1 469 15 b 547 226 522 87 547 159 b 534 302 547 252 543 278 b 532 317 533 308 532 313 b 544 335 532 326 536 333 "},v6f:{x_min:-80.3125,x_max:78.9375,ha:81,o:"m 63 191 b 69 192 65 192 66 192 b 77 188 72 192 76 191 b 78 183 78 187 78 186 b 74 158 78 179 77 172 l 66 115 b 9 -161 49 30 10 -158 b -10 -187 6 -172 -1 -181 b -34 -194 -17 -191 -25 -194 b -80 -147 -58 -194 -80 -174 b -80 -141 -80 -144 -80 -142 b 9 70 -80 -134 -73 -117 l 49 163 b 63 191 59 188 61 190 "},v70:{x_min:0,x_max:436.921875,ha:446,o:"m 213 190 b 217 191 215 191 216 191 b 231 184 223 191 228 188 b 249 154 240 167 246 159 b 419 18 292 91 348 45 b 436 -1 435 11 436 8 b 424 -16 436 -9 434 -13 b 308 -87 394 -26 340 -59 b 231 -186 276 -117 257 -142 b 219 -192 228 -191 225 -192 b 198 -174 209 -192 208 -191 b 47 -33 161 -113 110 -63 b 10 -16 34 -26 17 -19 b 0 -1 2 -13 0 -9 b 17 18 0 8 1 11 b 198 173 95 48 156 101 b 213 190 206 187 208 188 "},v72:{x_min:-423.3125,x_max:421.9375,ha:431,o:"m -262 197 b -247 197 -257 197 -253 197 b -118 162 -210 197 -163 184 b 40 45 -61 134 -13 98 b 277 -95 119 -33 200 -81 b 289 -97 281 -97 285 -97 b 378 0 332 -97 371 -55 b 378 11 378 4 378 6 b 302 83 378 55 345 83 b 242 66 283 83 262 77 b 208 56 231 59 219 56 b 148 120 175 56 148 81 b 201 186 148 151 164 172 b 261 198 220 194 240 198 b 420 45 341 198 411 136 b 421 22 421 37 421 29 b 245 -199 421 -93 338 -199 b 238 -198 243 -199 240 -199 b -44 -47 148 -194 50 -141 b -250 86 -114 22 -183 66 b -295 94 -270 91 -283 94 b -315 91 -302 94 -307 94 b -381 4 -356 81 -381 43 b -355 -56 -381 -18 -372 -40 b -298 -81 -338 -73 -319 -81 b -246 -68 -283 -81 -265 -77 b -212 -58 -234 -61 -223 -58 b -178 -69 -200 -58 -189 -62 b -151 -122 -160 -81 -151 -101 b -171 -167 -151 -138 -157 -155 b -239 -195 -185 -181 -213 -192 b -257 -197 -245 -197 -250 -197 b -423 -5 -352 -197 -423 -109 b -412 65 -423 16 -419 40 b -262 197 -389 137 -329 188 "},v74:{x_min:-206.890625,x_max:428.75,ha:438,o:"m 389 -351 b 394 -351 390 -351 393 -351 b 428 -385 413 -351 428 -367 b 428 -394 428 -388 428 -391 b 394 -428 426 -406 421 -410 l 332 -473 l 269 -516 l 205 -560 l 141 -603 l 77 -648 l 13 -692 l -50 -737 l -114 -780 l -145 -802 b -171 -813 -157 -810 -163 -813 b -175 -813 -172 -813 -174 -813 b -206 -777 -194 -811 -206 -795 b -202 -760 -206 -771 -205 -766 b -87 -675 -197 -752 -206 -757 l -34 -639 l 83 -557 l 145 -514 l 209 -470 l 272 -427 b 389 -351 375 -356 381 -352 "},v75:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -137 381 b -130 383 -134 383 -133 383 b -111 371 -122 383 -114 378 b -55 224 -110 370 -85 305 b 0 80 -25 145 -1 80 b 54 224 0 80 24 145 b 112 377 114 384 110 373 b 127 384 118 381 122 384 b 148 362 138 384 148 374 l 148 356 l 83 183 b 16 9 47 88 17 11 b -1 0 12 2 5 0 b -14 5 -5 0 -10 1 b -84 183 -19 9 -13 -6 l -149 356 l -149 362 b -137 381 -149 371 -145 378 "},v78:{x_min:0,x_max:193.28125,ha:197,o:"m 85 514 b 95 517 88 517 89 517 b 114 505 103 517 110 513 l 115 502 l 115 376 b 115 249 115 306 115 249 b 141 258 117 249 127 252 l 167 266 l 172 266 b 190 254 181 265 187 262 l 193 251 l 193 202 l 193 188 b 187 147 193 149 191 152 b 147 130 183 142 182 141 l 115 119 l 115 9 b 115 -99 115 -51 115 -99 b 141 -91 115 -99 127 -95 b 171 -81 166 -81 167 -81 l 171 -81 b 191 -94 181 -81 189 -87 b 193 -142 191 -97 193 -120 b 191 -195 193 -167 191 -194 b 125 -227 187 -205 187 -204 l 115 -230 l 115 -366 l 115 -503 l 114 -506 b 95 -519 110 -514 102 -519 b 74 -506 87 -519 78 -514 l 73 -503 l 73 -374 b 73 -245 73 -260 73 -245 b 73 -245 73 -245 73 -245 b 55 -252 72 -245 63 -249 l 32 -260 b 19 -263 27 -262 23 -263 b 4 -256 13 -263 8 -260 b 0 -215 0 -251 0 -254 b 0 -199 0 -210 0 -206 l 0 -152 l 1 -149 b 8 -140 2 -145 5 -141 b 42 -127 9 -140 24 -133 l 73 -116 l 73 -5 b 73 23 73 4 73 15 b 73 105 73 70 73 105 b 49 97 73 105 61 101 b 17 88 32 91 23 88 b 4 95 10 88 8 91 b 0 137 0 101 0 98 b 0 151 0 141 0 145 l 0 199 l 1 202 b 43 224 5 212 5 212 l 73 234 l 73 367 l 73 502 l 74 505 b 85 514 77 509 81 513 "},v79:{x_min:-1.359375,x_max:899.703125,ha:918,o:"m 307 349 b 332 351 315 351 323 351 b 443 340 367 351 408 347 b 741 47 607 306 720 195 b 744 0 743 31 744 16 b 660 -303 744 -90 713 -206 b 28 -755 534 -531 304 -695 b 14 -756 23 -755 19 -756 b -1 -741 4 -756 -1 -750 b 21 -720 -1 -731 1 -728 b 567 -56 337 -601 548 -344 b 568 -11 568 -41 568 -24 b 442 285 568 129 525 233 b 325 319 406 308 367 319 b 93 177 232 319 137 266 b 84 154 91 170 84 155 b 84 154 84 154 84 154 b 88 156 84 154 85 155 b 159 177 110 170 134 177 b 257 134 194 177 231 162 b 294 41 281 108 294 73 b 171 -97 294 -24 246 -90 b 156 -98 166 -97 161 -98 b 6 74 73 -98 6 -22 b 6 80 6 76 6 79 b 307 349 10 223 141 340 m 839 215 b 845 216 841 216 842 216 b 862 213 852 216 860 215 b 899 163 887 206 899 184 b 872 117 899 145 890 127 b 847 111 865 112 856 111 b 808 130 833 111 818 117 b 796 162 800 140 796 151 b 839 215 796 187 812 212 m 839 -112 b 845 -112 841 -112 842 -112 b 862 -115 852 -112 860 -113 b 899 -165 887 -122 899 -144 b 872 -210 899 -183 890 -201 b 847 -217 865 -215 856 -217 b 808 -198 833 -217 818 -210 b 796 -165 800 -188 796 -177 b 839 -112 796 -140 812 -116 "},v7a:{x_min:-1.359375,x_max:386.5625,ha:394,o:"m 249 535 b 257 537 251 537 253 537 b 276 524 266 537 273 533 l 277 521 l 279 419 l 279 316 l 304 323 b 337 328 319 326 330 328 b 353 316 347 328 349 324 b 355 266 355 315 355 290 b 353 215 355 241 355 217 b 319 198 349 206 347 205 b 279 187 284 190 279 188 b 279 156 279 187 279 174 b 279 136 279 151 279 144 l 279 84 l 289 87 l 330 98 b 367 105 352 102 362 105 b 378 101 372 105 375 104 b 386 61 385 95 386 94 b 386 40 386 55 386 48 l 386 -5 l 385 -8 b 374 -19 383 -12 378 -18 b 291 -40 372 -19 347 -26 b 279 -43 284 -41 279 -43 b 279 -83 279 -43 279 -59 b 279 -95 279 -87 279 -91 l 279 -145 l 304 -140 b 337 -133 321 -136 330 -133 b 349 -140 343 -133 347 -136 b 355 -181 355 -145 355 -142 l 355 -197 l 355 -210 b 349 -252 355 -249 355 -247 b 300 -269 345 -258 347 -258 b 280 -274 291 -272 281 -273 l 279 -274 l 277 -378 l 277 -483 l 276 -487 b 257 -499 273 -495 265 -499 b 238 -487 249 -499 242 -495 l 236 -483 l 236 -384 l 236 -285 l 235 -285 l 212 -291 l 170 -301 b 148 -308 159 -305 148 -306 b 147 -415 147 -308 147 -313 l 147 -523 l 145 -526 b 126 -538 141 -534 133 -538 b 106 -526 118 -538 110 -534 l 104 -523 l 104 -420 b 103 -317 104 -326 104 -317 b 103 -317 103 -317 103 -317 b 50 -330 92 -322 54 -330 b 31 -317 42 -330 35 -326 b 29 -267 29 -315 29 -315 l 29 -219 l 32 -216 b 92 -192 36 -206 36 -206 l 104 -190 l 104 -138 b 103 -87 104 -91 104 -87 b 103 -87 103 -87 103 -87 b 88 -91 103 -87 96 -88 l 49 -101 b 17 -106 32 -105 23 -106 b 6 -102 13 -106 10 -105 b -1 -62 0 -97 -1 -95 b 0 -41 -1 -56 0 -49 l 0 4 l 1 6 b 10 16 2 11 6 15 b 91 37 12 18 38 24 l 104 41 l 104 93 b 103 144 104 140 104 144 b 103 144 103 144 103 144 b 50 131 92 141 54 131 b 31 144 42 131 35 137 b 29 195 29 147 29 148 l 29 242 l 32 245 b 92 269 36 255 36 255 l 104 273 l 104 377 l 104 481 l 106 485 b 126 498 110 492 118 498 b 134 495 129 498 132 496 b 145 485 138 494 142 489 l 147 481 l 147 383 l 147 283 l 152 284 b 190 294 155 285 171 290 l 230 303 l 236 305 l 236 413 l 236 521 l 238 524 b 249 535 240 528 243 533 m 236 126 b 235 177 236 154 236 177 l 235 177 b 213 172 235 177 225 174 l 170 161 b 147 155 157 158 147 155 b 147 124 147 155 147 142 b 147 102 147 117 147 111 l 147 52 l 153 54 l 228 72 l 236 74 l 236 126 m 236 -105 b 235 -54 236 -65 236 -54 l 235 -54 b 231 -55 235 -54 234 -54 b 172 -69 227 -55 204 -62 l 149 -76 l 147 -76 l 147 -127 l 147 -179 l 152 -177 b 190 -167 155 -177 171 -173 l 230 -158 l 236 -156 l 236 -105 "},v7c:{x_min:0,x_max:300.8125,ha:307,o:"m 49 505 b 53 506 50 505 51 506 b 70 496 58 506 62 503 b 81 485 73 492 78 488 l 96 473 l 111 459 l 122 449 l 134 438 l 182 396 l 255 330 b 292 291 292 298 292 298 l 292 290 l 292 284 l 283 270 b 209 36 234 197 209 113 b 288 -170 209 -44 235 -119 b 299 -184 295 -179 299 -181 b 300 -191 300 -187 300 -188 b 285 -206 300 -199 294 -206 b 280 -206 283 -206 281 -206 b 247 -201 270 -202 259 -201 b 176 -222 223 -201 197 -208 b 114 -340 136 -249 114 -292 b 172 -471 114 -384 134 -433 b 185 -492 182 -481 185 -487 b 181 -502 185 -496 183 -499 b 171 -508 176 -505 174 -508 b 152 -498 166 -508 160 -503 b 0 -284 65 -428 12 -352 b 0 -260 0 -278 0 -270 b 1 -238 0 -252 0 -242 b 148 -140 16 -177 73 -140 b 209 -148 167 -140 189 -142 b 215 -149 212 -148 215 -149 b 215 -149 215 -149 215 -149 l 215 -149 b 201 -136 215 -148 209 -142 l 157 -97 l 96 -41 b 17 34 21 24 17 29 b 17 37 17 36 17 36 b 17 38 17 37 17 38 b 25 56 17 44 17 44 b 110 298 81 131 110 219 b 46 474 110 367 88 431 b 38 491 40 480 38 487 b 49 505 38 498 42 502 "},v7d:{x_min:-1.359375,x_max:436.921875,ha:446,o:"m 213 205 b 217 205 215 205 216 205 b 234 194 224 205 234 199 b 236 187 234 194 235 190 l 245 167 l 261 129 l 270 106 b 355 -61 294 54 329 -13 b 420 -163 381 -105 402 -138 b 436 -188 435 -184 436 -184 b 436 -191 436 -190 436 -190 b 421 -206 436 -201 431 -206 l 421 -206 l 416 -206 l 405 -201 b 217 -158 347 -172 283 -158 b 31 -201 153 -158 88 -172 l 20 -206 l 14 -206 l 14 -206 b 0 -191 5 -206 0 -201 b -1 -188 0 -190 -1 -190 b 14 -163 -1 -186 0 -184 b 95 -34 36 -136 72 -77 b 166 106 119 8 148 68 l 175 129 l 183 148 l 200 188 b 213 205 205 199 208 202 "},v7f:{x_min:0,x_max:367.5,ha:375,o:"m 0 124 l 0 187 l 61 187 l 122 187 l 122 138 l 122 91 l 153 61 l 183 30 l 213 61 l 243 91 l 243 138 l 243 187 l 306 187 l 367 187 l 367 124 l 367 61 l 321 61 l 274 61 l 243 30 l 213 0 l 243 -31 l 274 -62 l 321 -62 l 367 -62 l 367 -124 l 367 -188 l 306 -188 l 243 -188 l 243 -140 l 243 -93 l 213 -62 l 183 -31 l 153 -62 l 122 -93 l 122 -140 l 122 -188 l 61 -188 l 0 -188 l 0 -124 l 0 -62 l 46 -62 l 92 -62 l 123 -31 l 153 0 l 123 30 l 92 61 l 46 61 l 0 61 l 0 124 "},v80:{x_min:29.9375,x_max:420.578125,ha:371,o:"m 115 345 b 221 347 117 345 166 347 b 411 345 306 347 409 345 b 420 330 416 342 420 335 b 415 319 420 326 419 321 b 178 118 397 303 179 118 b 178 117 178 118 178 117 b 181 117 178 117 178 117 b 189 117 182 117 185 117 b 193 117 190 117 191 117 b 247 98 215 117 232 111 b 296 75 266 83 280 76 b 302 75 299 75 300 75 b 322 91 311 75 315 79 b 322 91 322 91 322 91 b 322 91 322 91 322 91 b 319 91 322 91 321 91 b 313 90 318 90 315 90 b 283 107 300 90 288 97 b 277 126 279 114 277 121 b 319 167 277 149 295 167 b 319 167 319 167 319 167 b 362 118 347 167 362 147 b 355 82 362 108 359 96 b 311 33 349 65 340 55 b 224 1 284 12 253 1 b 194 5 213 1 204 2 b 168 18 183 8 178 11 b 110 36 151 30 130 36 b 57 15 88 36 68 29 b 47 11 54 12 51 11 b 31 20 40 11 34 13 b 29 26 31 22 29 25 b 68 66 29 36 39 45 b 285 250 73 71 281 248 b 285 250 285 250 285 250 b 231 252 285 252 261 252 b 137 250 190 252 141 250 b 93 227 122 248 110 241 b 78 220 88 222 83 220 b 66 227 74 220 70 222 b 63 234 65 229 63 231 b 85 291 63 241 69 252 b 115 345 108 342 108 344 "},v81:{x_min:0,x_max:428.75,ha:438,o:"m 262 186 b 273 186 266 186 272 186 b 274 186 273 186 274 186 b 285 186 274 186 280 186 b 428 48 375 181 428 122 b 386 -68 428 12 416 -29 b 155 -187 329 -145 236 -187 b 12 -111 92 -187 38 -162 b 0 -51 4 -91 0 -72 b 262 186 0 58 122 179 m 366 131 b 352 134 362 133 357 134 b 219 81 321 134 269 115 b 47 -111 126 23 50 -62 b 47 -112 47 -111 47 -112 b 77 -136 47 -129 58 -136 b 264 -45 118 -136 194 -101 b 382 109 336 12 382 76 b 366 131 382 120 377 129 "},v83:{x_min:-1.359375,x_max:847.96875,ha:865,o:"m 488 1499 b 495 1500 490 1500 492 1500 b 541 1465 507 1500 521 1490 b 679 1078 622 1372 679 1210 b 677 1050 679 1068 677 1060 b 477 642 668 893 604 764 l 443 609 l 431 596 l 431 592 l 438 562 l 449 508 l 460 458 b 481 355 475 390 481 355 b 481 355 481 355 481 355 b 490 356 481 355 485 355 b 528 358 495 356 511 358 b 558 356 540 358 552 356 b 839 95 699 338 808 237 b 847 22 845 72 847 47 b 631 -303 847 -113 766 -242 b 620 -309 623 -308 620 -309 l 620 -310 b 631 -359 620 -310 626 -333 l 646 -435 l 660 -496 b 672 -588 668 -535 672 -563 b 664 -653 672 -610 669 -630 b 383 -875 630 -792 509 -875 b 201 -810 321 -875 257 -855 b 129 -680 151 -768 129 -730 b 274 -530 129 -592 200 -530 b 351 -553 300 -530 326 -538 b 412 -669 393 -582 412 -626 b 287 -805 412 -735 366 -800 l 279 -805 l 285 -809 b 383 -830 318 -823 351 -830 b 586 -718 464 -830 540 -789 b 626 -584 612 -678 626 -631 b 619 -528 626 -566 623 -548 b 612 -495 619 -526 616 -510 b 577 -324 590 -387 577 -324 b 577 -324 577 -324 577 -324 b 568 -326 575 -324 571 -324 b 528 -334 558 -328 537 -333 b 465 -338 506 -337 485 -338 b 24 -11 269 -338 87 -206 b -1 145 8 41 -1 93 b 96 442 -1 249 32 351 b 322 714 166 541 236 626 l 352 745 l 345 782 l 332 843 l 315 921 b 303 984 310 950 304 978 b 295 1082 298 1017 295 1049 b 413 1426 295 1208 336 1329 b 488 1499 436 1456 477 1496 m 549 1301 b 541 1301 547 1301 544 1301 b 411 1207 500 1301 447 1263 b 355 1004 374 1152 355 1079 b 359 942 355 984 356 963 b 371 881 362 927 363 917 l 385 818 b 392 782 389 799 392 784 l 392 782 b 434 828 393 782 424 816 b 607 1165 534 941 594 1060 b 608 1193 608 1175 608 1183 b 597 1270 608 1224 604 1254 b 549 1301 589 1286 571 1299 m 398 528 b 393 555 396 542 393 553 b 392 555 393 555 393 555 b 317 470 390 555 347 505 b 190 298 266 408 212 334 b 127 70 148 227 127 148 b 155 -77 127 19 137 -30 b 468 -303 209 -216 333 -303 b 519 -299 484 -303 502 -302 b 568 -284 541 -295 568 -287 l 568 -284 b 563 -263 568 -284 566 -274 l 534 -120 l 511 -13 l 496 61 l 480 133 b 469 187 472 176 469 187 b 468 188 469 187 469 188 b 416 162 462 188 430 172 b 337 13 364 126 337 69 b 413 -124 337 -40 363 -93 b 428 -144 424 -131 428 -137 b 428 -149 428 -145 428 -148 b 409 -166 426 -161 419 -166 b 394 -162 405 -166 400 -165 b 240 77 302 -122 240 -27 l 240 77 b 430 342 240 197 315 301 l 436 344 l 426 394 l 398 528 m 548 194 b 526 195 540 195 532 195 b 519 195 524 195 521 195 l 514 195 l 518 177 l 539 79 l 552 15 l 566 -48 l 594 -187 l 605 -240 b 612 -266 609 -254 611 -266 b 612 -266 612 -266 612 -266 b 641 -248 613 -266 630 -256 b 744 -98 692 -212 730 -156 b 751 -40 749 -79 751 -59 b 548 194 751 76 665 181 "},v84:{x_min:25.859375,x_max:164.6875,ha:168,o:"m 34 369 b 40 370 35 370 38 370 b 59 353 49 370 50 367 b 164 40 122 254 155 158 b 164 0 164 33 164 16 b 164 -40 164 -16 164 -34 b 59 -353 155 -158 122 -254 b 40 -371 53 -366 47 -371 b 34 -370 38 -371 36 -370 b 25 -358 28 -367 25 -363 b 31 -337 25 -352 27 -347 b 92 0 72 -234 92 -117 b 31 335 92 116 72 233 b 25 356 27 345 25 352 b 34 369 25 363 28 366 "},v86:{x_min:-571.671875,x_max:570.3125,ha:582,o:"m -386 173 b -381 174 -385 174 -383 174 b -370 173 -377 174 -372 173 b -281 86 -367 172 -347 151 b -196 0 -235 37 -196 0 b -126 84 -196 0 -164 37 b -50 174 -55 173 -57 172 b -44 174 -49 174 -47 174 b -35 173 -42 174 -38 173 b 53 86 -32 172 -12 151 b 138 0 100 37 138 0 b 208 84 140 0 170 37 b 284 174 279 173 277 172 b 289 174 285 174 288 174 b 299 173 294 174 298 173 b 462 11 303 172 338 134 l 475 -1 l 503 34 b 541 76 534 72 536 74 b 548 77 544 77 545 77 b 570 56 560 77 570 68 b 567 48 570 54 568 51 b 392 -172 564 41 397 -166 b 378 -176 387 -174 382 -176 b 368 -174 374 -176 371 -176 b 280 -87 367 -173 345 -152 b 194 0 234 -38 194 0 b 125 -86 194 0 163 -38 b 49 -174 54 -174 55 -173 b 43 -176 47 -176 46 -176 b 34 -174 40 -176 36 -174 b -54 -87 31 -173 10 -152 b -140 0 -102 -38 -140 0 b -209 -86 -141 0 -171 -38 b -285 -174 -280 -174 -279 -173 b -291 -176 -287 -176 -289 -176 b -300 -174 -295 -176 -299 -174 b -464 -12 -304 -173 -340 -137 l -476 0 l -504 -34 b -543 -77 -534 -73 -537 -76 b -549 -79 -545 -79 -547 -79 b -571 -58 -562 -79 -571 -69 b -568 -49 -571 -55 -570 -52 b -392 172 -566 -43 -396 167 b -386 173 -390 172 -387 173 "},v8a:{x_min:-170.140625,x_max:168.78125,ha:172,o:"m -160 567 b -122 567 -159 567 -149 567 l -87 567 l -84 566 b -74 553 -78 563 -77 560 b -20 366 -73 551 -49 466 b 31 186 8 267 31 186 b 85 371 31 186 55 269 b 140 559 114 473 138 557 b 153 567 141 564 148 567 b 168 559 159 567 166 564 b 168 555 168 557 168 557 b 92 281 168 548 159 513 b 14 13 50 134 14 13 b 0 0 14 6 6 0 b -17 15 -8 0 -17 8 b -93 283 -17 15 -51 136 b -170 552 -166 533 -170 548 b -170 553 -170 552 -170 552 b -160 567 -170 560 -167 564 "},v8b:{x_min:0,x_max:319.859375,ha:326,o:"m 149 508 b 159 509 152 509 155 509 b 186 494 170 509 181 503 b 190 440 190 487 190 488 l 190 430 l 190 377 l 242 377 l 251 377 b 303 373 298 377 296 377 b 319 345 314 367 319 356 b 304 319 319 335 314 324 b 250 315 296 315 299 315 l 242 315 l 190 315 l 190 262 l 190 252 b 186 198 190 204 190 205 b 159 183 179 188 170 183 b 132 198 148 183 138 188 b 127 252 127 205 127 204 l 127 262 l 127 315 l 76 315 l 68 315 b 14 319 20 315 21 315 b 0 347 4 324 0 335 b 14 373 0 356 4 367 b 68 377 21 377 20 377 l 76 377 l 127 377 l 127 430 l 127 440 b 132 494 127 488 127 487 b 149 508 136 501 142 505 "},v8c:{x_min:-330.75,x_max:329.390625,ha:336,o:"m -133 483 b -117 484 -127 484 -122 484 b 31 373 -51 484 9 440 b 35 348 34 365 35 356 b -25 285 35 313 10 285 b -87 331 -55 285 -76 302 b -167 402 -100 376 -133 402 b -191 398 -175 402 -183 401 b -227 341 -215 388 -227 369 b -225 320 -227 334 -227 327 b -13 74 -209 230 -125 133 b 6 65 -4 70 5 66 l 9 63 l 10 65 b 117 231 12 68 40 112 l 189 341 l 242 424 b 268 460 262 456 264 458 b 283 464 273 463 277 464 b 308 438 296 464 308 453 l 308 437 b 287 396 308 430 308 428 l 95 98 l 59 43 l 58 41 l 65 37 b 253 -156 151 -8 217 -77 b 281 -285 272 -199 281 -244 b 148 -481 281 -381 231 -463 b 115 -485 137 -484 126 -485 b -32 -376 51 -485 -9 -442 b -36 -349 -35 -366 -36 -358 b 25 -287 -36 -315 -12 -287 b 85 -333 54 -287 74 -302 b 166 -403 99 -377 133 -403 b 190 -399 174 -403 182 -402 b 225 -342 215 -390 225 -370 b 224 -322 225 -335 225 -328 b 12 -76 208 -231 125 -134 b -8 -66 2 -72 -6 -68 l -10 -65 l -12 -66 b -118 -231 -13 -68 -42 -113 l -190 -342 l -243 -426 b -269 -462 -264 -458 -265 -458 b -284 -466 -274 -464 -279 -466 b -310 -440 -298 -466 -310 -455 l -310 -438 b -288 -398 -310 -430 -308 -430 l -96 -99 l -59 -44 l -59 -43 l -66 -38 b -281 284 -198 33 -281 158 l -281 284 b -133 483 -281 392 -220 474 m 254 177 b 266 179 258 177 262 179 b 319 149 287 179 307 167 b 329 115 326 140 329 127 b 319 79 329 102 326 90 b 268 51 307 61 287 51 b 221 72 250 51 234 58 b 205 115 210 84 205 99 b 254 177 205 142 223 170 m -281 -54 b -269 -52 -277 -52 -273 -52 b -223 -73 -253 -52 -235 -59 b -206 -116 -212 -84 -206 -101 b -216 -151 -206 -129 -209 -141 b -269 -179 -228 -170 -249 -179 b -314 -159 -285 -179 -302 -173 b -330 -116 -325 -147 -330 -131 b -281 -54 -330 -88 -313 -61 "},v8d:{x_min:-1.359375,x_max:255.890625,ha:261,o:"m 118 514 b 127 517 121 517 122 517 b 147 505 136 517 142 513 l 148 502 l 148 403 b 148 306 148 351 148 306 b 174 315 149 306 160 310 l 200 324 l 205 323 b 223 312 213 323 220 319 l 225 308 l 225 260 b 225 245 225 255 225 249 b 220 204 225 208 224 209 b 179 188 216 199 215 199 l 148 177 l 148 124 l 148 70 l 189 84 b 236 98 219 94 230 98 b 247 94 240 98 243 97 b 255 52 254 88 255 87 b 255 33 255 47 255 40 l 254 -12 l 253 -15 b 249 -22 253 -18 250 -20 l 245 -24 l 196 -41 l 148 -58 l 148 -108 b 148 -158 148 -136 148 -158 b 174 -148 148 -158 160 -154 b 204 -140 198 -140 200 -140 l 204 -140 b 224 -152 213 -140 221 -145 b 225 -201 224 -155 225 -177 b 224 -254 225 -226 224 -251 b 157 -284 220 -262 220 -262 l 148 -288 l 148 -395 l 148 -503 l 147 -506 b 127 -519 142 -514 134 -519 b 107 -506 119 -519 111 -514 l 106 -503 l 106 -403 b 106 -303 106 -316 106 -303 b 104 -303 104 -303 104 -303 b 88 -310 104 -303 96 -306 l 63 -319 b 51 -322 59 -320 55 -322 b 36 -315 46 -322 40 -319 b 31 -273 32 -309 31 -312 b 31 -258 31 -269 31 -263 l 31 -210 l 34 -206 b 40 -198 35 -204 38 -199 b 74 -186 42 -197 57 -191 l 106 -173 l 106 -123 b 106 -97 106 -112 106 -104 b 106 -72 106 -76 106 -72 b 104 -72 106 -72 106 -72 b 20 -99 89 -79 23 -99 b 0 -84 10 -99 2 -93 b -1 -37 0 -81 -1 -59 b 0 11 -1 -15 0 9 b 58 40 4 22 2 22 l 106 56 l 106 109 b 106 123 106 115 106 119 b 106 162 106 147 106 162 b 81 155 106 162 93 159 b 50 147 65 149 55 147 b 36 152 43 147 40 148 b 31 194 32 158 31 156 b 31 209 31 198 31 204 l 31 256 l 34 260 b 76 281 38 269 38 269 l 106 292 l 106 396 l 106 502 l 107 505 b 118 514 110 509 114 513 "},v8f:{x_min:-21.78125,x_max:362.0625,ha:369,o:"m 302 1031 b 308 1032 304 1032 307 1032 b 330 1016 318 1032 325 1027 b 362 867 351 970 362 920 b 340 738 362 824 353 780 l 336 727 l 340 717 b 362 591 355 677 362 634 b 257 323 362 496 325 401 b 204 272 243 306 227 290 b 20 56 129 206 66 133 b -1 18 12 44 0 22 b -19 4 -4 9 -12 4 l -21 4 l -21 140 l -21 276 l -12 277 b 167 333 61 288 127 309 b 319 598 262 388 319 491 b 311 664 319 620 317 642 l 310 673 l 304 664 b 204 548 279 620 250 587 b 20 333 129 483 66 409 b -1 292 12 320 0 298 b -19 280 -4 285 -12 280 l -21 280 l -21 416 l -21 552 l -12 553 b 167 609 61 564 127 585 b 319 874 264 666 319 770 b 294 992 319 914 311 954 b 288 1011 288 1004 288 1007 b 302 1031 288 1021 294 1028 "},v90:{x_min:-171.5,x_max:483.1875,ha:493,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 495 20 616 20 616 b 20 373 20 427 20 373 b 115 410 20 373 63 390 l 210 448 l 210 531 b 212 620 210 614 210 616 b 231 632 215 628 223 632 b 246 627 236 632 242 631 b 251 541 251 620 251 628 l 251 463 l 315 489 b 387 514 368 509 381 514 b 393 513 390 514 392 514 b 406 494 402 510 406 502 b 397 476 406 487 404 480 b 323 446 396 474 363 462 l 251 417 l 251 283 l 251 148 l 254 151 b 370 199 291 183 332 199 b 415 191 385 199 400 197 b 483 84 458 176 483 134 b 461 0 483 58 476 29 b 332 -142 439 -40 411 -72 l 255 -215 b 231 -229 240 -229 239 -229 b 216 -223 224 -229 220 -227 b 210 -158 210 -217 210 -223 b 210 -120 210 -148 210 -136 l 210 -29 l 205 -34 b 100 -142 182 -65 159 -88 l 23 -215 b -1 -229 9 -229 6 -229 b -19 -217 -9 -229 -16 -224 l -20 -215 l -21 48 l -21 310 l -83 287 b -152 262 -133 266 -145 262 b -157 263 -153 262 -155 262 b -171 283 -166 266 -171 274 b -161 301 -171 290 -167 297 b -91 328 -160 302 -129 315 l -21 356 l -21 487 l -20 617 l -19 621 b -8 631 -17 626 -12 630 m 210 288 b 210 401 210 351 210 401 b 114 365 209 401 167 384 l 20 327 l 20 238 l 20 148 l 21 151 b 140 199 59 183 102 199 b 206 180 164 199 187 192 l 209 177 b 209 177 209 177 209 177 b 210 288 210 177 210 199 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 m 341 131 b 328 133 337 133 332 133 b 322 133 326 133 323 133 b 257 87 296 129 273 113 l 251 80 l 251 -37 l 251 -156 l 255 -152 b 375 81 328 -72 375 20 l 375 83 b 341 131 375 113 367 126 "},v92:{x_min:0,x_max:598.890625,ha:611,o:"m 62 181 b 77 183 66 183 72 183 b 91 181 83 183 88 183 b 202 131 100 180 106 177 l 299 87 l 394 131 b 517 183 499 181 502 183 b 519 183 517 183 518 183 b 598 104 567 183 598 144 b 577 49 598 84 592 65 b 518 15 567 38 563 37 b 484 0 499 6 484 0 b 518 -16 484 -1 499 -8 b 577 -51 563 -38 567 -40 b 598 -105 592 -66 598 -86 b 519 -184 598 -145 567 -184 b 517 -184 518 -184 517 -184 b 394 -133 502 -184 499 -183 l 299 -88 l 202 -133 b 81 -184 99 -183 95 -184 b 77 -184 80 -184 78 -184 b 0 -105 29 -184 0 -145 b 20 -51 0 -86 5 -66 b 80 -16 29 -40 34 -38 b 114 -1 98 -8 114 -1 b 80 15 114 0 98 6 b 20 49 34 37 29 38 b 0 104 6 65 0 84 b 62 181 0 140 23 174 m 88 134 b 74 136 85 134 80 136 b 68 134 72 136 69 136 b 46 104 54 130 46 117 b 55 81 46 95 49 88 b 149 34 59 76 53 80 b 224 -1 190 15 224 0 b 144 -38 224 -1 187 -18 b 54 -84 59 -79 58 -79 b 46 -105 49 -90 46 -98 b 76 -137 46 -122 58 -137 b 78 -137 77 -137 77 -137 b 194 -86 87 -137 76 -141 b 298 -36 250 -58 298 -36 b 298 -36 298 -36 298 -36 b 402 -84 299 -36 345 -58 b 518 -137 522 -141 510 -137 b 521 -137 519 -137 519 -137 b 551 -105 539 -137 551 -122 b 541 -83 551 -98 548 -90 b 447 -36 537 -77 544 -81 b 374 -1 406 -16 374 -1 b 447 34 374 0 406 15 b 541 81 544 80 537 76 b 551 104 548 88 551 97 b 521 136 551 120 539 136 b 518 136 519 136 519 136 b 517 136 518 136 517 136 l 517 136 b 402 83 511 136 511 136 b 298 34 345 56 299 34 b 298 34 298 34 298 34 b 194 84 298 34 250 56 b 88 134 137 111 89 133 "},v93:{x_min:0,x_max:438.28125,ha:447,o:"m 212 205 b 219 205 213 205 216 205 b 239 183 228 205 231 204 b 421 -163 298 40 363 -83 b 438 -191 434 -180 438 -186 b 436 -197 438 -192 438 -195 b 424 -206 434 -204 431 -206 b 406 -201 420 -206 415 -205 b 216 -156 347 -172 281 -156 b 23 -205 148 -156 80 -173 b 14 -206 20 -206 17 -206 b 0 -191 6 -206 0 -201 b 6 -176 0 -187 1 -183 b 202 192 63 -104 142 45 b 212 205 205 199 208 202 m 264 48 l 249 81 l 243 94 l 242 91 b 89 -126 208 36 137 -66 b 81 -138 85 -133 81 -138 b 81 -138 81 -138 81 -138 b 81 -138 81 -138 81 -138 b 95 -133 81 -138 87 -136 b 280 -94 156 -108 221 -94 b 334 -98 299 -94 317 -95 b 343 -99 338 -99 343 -99 b 343 -99 343 -99 343 -99 b 338 -94 343 -99 341 -97 b 264 48 318 -58 287 1 "},v94:{x_min:-149.71875,x_max:148.359375,ha:151,o:"m -9 215 b 0 217 -6 217 -4 217 b 19 205 8 217 14 213 b 20 142 20 202 20 201 l 20 84 l 23 84 b 144 -27 81 74 129 30 b 148 -66 147 -40 148 -54 b 36 -213 148 -134 103 -197 b 0 -219 24 -217 12 -219 b -145 -104 -68 -219 -129 -173 b -149 -68 -148 -91 -149 -79 b -24 84 -149 6 -98 74 l -21 84 l -21 142 b -19 205 -20 201 -20 202 b -9 215 -17 209 -13 213 m -21 -15 b -23 41 -21 37 -21 41 b -23 41 -23 41 -23 41 b -76 11 -35 40 -62 26 b -108 -65 -98 -11 -108 -38 b -1 -176 -108 -122 -65 -176 b 107 -65 63 -176 107 -122 b 74 11 107 -38 96 -11 b 20 41 61 26 32 41 b 20 -15 20 41 20 15 b 19 -74 20 -72 20 -72 b 0 -87 14 -83 6 -87 b -19 -74 -8 -87 -16 -83 b -21 -15 -20 -72 -20 -72 "},v95:{x_min:0,x_max:406.96875,ha:415,o:"m 55 181 b 70 183 61 183 66 183 b 111 170 85 183 99 179 b 160 130 115 167 137 149 l 202 95 l 245 130 b 319 181 299 176 302 179 b 334 183 325 183 330 183 b 406 109 375 183 406 148 b 401 81 406 99 405 91 b 348 24 394 65 390 59 b 318 -1 332 11 318 0 b 348 -26 318 -1 332 -12 b 401 -83 390 -61 394 -66 b 406 -111 405 -93 406 -101 b 334 -184 406 -149 375 -184 b 319 -183 330 -184 325 -184 b 245 -131 302 -180 299 -177 l 202 -97 l 160 -131 b 85 -183 107 -177 103 -180 b 70 -184 80 -184 76 -184 b 0 -111 31 -184 0 -149 b 4 -83 0 -101 1 -93 b 58 -26 10 -66 16 -61 b 88 -1 74 -12 88 -1 b 58 24 88 0 74 11 b 10 69 23 54 17 59 b 0 109 2 81 0 95 b 55 181 0 142 21 173 m 83 133 b 72 136 78 136 76 136 b 57 131 66 136 61 134 b 46 109 49 126 46 117 b 50 93 46 104 47 98 b 107 45 51 91 77 70 b 160 0 137 20 160 0 b 107 -47 160 -1 137 -22 b 50 -94 77 -72 51 -93 b 46 -111 47 -99 46 -105 b 59 -134 46 -120 50 -130 b 72 -137 62 -136 68 -137 b 83 -136 76 -137 80 -136 b 144 -84 84 -134 107 -116 b 202 -36 176 -58 202 -36 b 261 -84 202 -36 230 -58 b 323 -136 299 -116 321 -134 b 334 -137 326 -136 330 -137 b 345 -134 338 -137 343 -136 b 360 -111 355 -130 360 -120 b 355 -94 360 -105 359 -99 b 299 -47 353 -93 329 -72 b 245 0 269 -22 245 -1 b 299 45 245 0 269 20 b 355 93 329 70 353 91 b 360 109 359 98 360 104 b 345 133 360 119 355 129 b 334 136 343 134 338 136 b 323 134 330 136 326 134 b 261 83 321 133 299 115 b 202 34 230 56 202 34 b 144 83 202 34 176 56 b 83 133 106 115 84 133 "},v97:{x_min:-228.671875,x_max:227.3125,ha:232,o:"m -217 487 l -213 488 l 0 488 l 212 488 l 216 487 b 225 476 220 484 224 480 l 227 473 l 227 244 l 227 15 l 225 12 b 206 0 223 4 215 0 b 197 1 204 0 200 0 b 187 12 193 4 189 6 l 186 15 l 186 138 l 186 262 l -1 262 l -187 262 l -187 138 l -187 15 l -189 12 b -208 0 -193 4 -200 0 b -227 12 -216 0 -223 4 l -228 15 l -228 244 l -228 473 l -227 476 b -217 487 -225 480 -221 484 "},v9a:{x_min:-21.78125,x_max:367.5,ha:375,o:"m 230 1031 b 238 1032 232 1032 235 1032 b 259 1014 245 1032 251 1027 b 367 662 330 906 367 782 b 364 602 367 641 367 621 b 232 317 352 488 304 384 b 57 120 155 245 103 187 b -1 18 31 84 6 40 b -19 4 -4 11 -12 4 l -21 4 l -21 159 l -21 315 l -16 315 b 96 335 10 315 62 324 b 315 695 227 380 315 527 b 313 738 315 709 314 724 b 224 991 304 825 273 916 b 216 1013 219 999 216 1007 b 230 1031 216 1021 220 1028 "},v9b:{x_min:-24.5,x_max:313.0625,ha:319,o:"m -24 -133 l -24 -5 l -20 -5 b -1 -19 -12 -5 -4 -11 b 142 -213 13 -61 74 -144 b 258 -376 196 -269 230 -315 b 313 -605 295 -449 313 -528 b 292 -742 313 -652 306 -699 b 288 -752 289 -748 288 -752 b 288 -752 288 -752 288 -752 b 292 -764 289 -753 291 -757 b 313 -907 306 -811 313 -860 b 292 -1045 313 -954 306 -1002 b 288 -1054 289 -1050 288 -1054 b 288 -1054 288 -1054 288 -1054 b 292 -1067 289 -1054 291 -1060 b 313 -1210 306 -1113 313 -1161 b 292 -1346 313 -1257 306 -1304 b 288 -1357 289 -1353 288 -1357 b 288 -1357 288 -1357 288 -1357 b 292 -1368 289 -1357 291 -1363 b 313 -1512 306 -1415 313 -1464 b 292 -1648 313 -1560 306 -1605 b 288 -1660 289 -1654 288 -1660 b 288 -1660 288 -1660 288 -1660 b 292 -1671 289 -1660 291 -1665 b 313 -1814 306 -1719 313 -1766 b 250 -2040 313 -1897 291 -1977 b 232 -2062 238 -2057 236 -2059 b 221 -2065 230 -2063 225 -2065 b 200 -2045 210 -2065 201 -2057 b 200 -2043 200 -2044 200 -2044 b 208 -2026 200 -2037 202 -2034 b 269 -1826 249 -1966 269 -1897 b 153 -1544 269 -1726 230 -1625 b -9 -1472 115 -1506 58 -1481 b -21 -1471 -14 -1471 -19 -1471 l -24 -1471 l -24 -1343 l -24 -1215 l -20 -1215 b -1 -1229 -12 -1215 -4 -1221 b 142 -1424 13 -1270 74 -1353 b 257 -1582 196 -1478 228 -1524 b 264 -1594 261 -1589 264 -1594 l 264 -1594 b 265 -1582 264 -1594 264 -1589 b 270 -1525 268 -1562 270 -1544 b 153 -1243 270 -1424 228 -1321 b -9 -1170 115 -1203 58 -1178 b -21 -1168 -14 -1170 -19 -1168 l -24 -1168 l -24 -1041 l -24 -913 l -20 -913 b -1 -927 -12 -913 -4 -918 b 142 -1121 13 -967 74 -1050 b 257 -1281 196 -1175 228 -1221 b 264 -1292 261 -1286 264 -1292 l 264 -1292 b 265 -1279 264 -1292 264 -1286 b 270 -1222 268 -1261 270 -1242 b 153 -941 270 -1121 228 -1018 b -9 -867 115 -900 58 -875 b -21 -866 -14 -867 -19 -866 l -24 -866 l -24 -738 l -24 -610 l -20 -610 b -1 -624 -12 -610 -4 -616 b 142 -818 13 -664 74 -749 b 257 -978 196 -873 228 -918 b 264 -989 261 -984 264 -989 l 264 -989 b 265 -977 264 -989 264 -984 b 270 -920 268 -959 270 -939 b 153 -638 270 -818 228 -716 b -9 -564 115 -598 58 -573 b -21 -563 -14 -564 -19 -563 l -24 -563 l -24 -435 l -24 -308 l -20 -308 b -1 -322 -12 -308 -4 -313 b 142 -516 13 -363 74 -446 b 257 -675 196 -571 228 -616 b 264 -687 261 -681 264 -687 l 264 -687 b 265 -674 264 -687 264 -681 b 270 -617 268 -656 270 -637 b 153 -335 270 -516 228 -413 b -9 -262 115 -295 58 -270 b -21 -260 -14 -262 -19 -260 l -24 -260 l -24 -133 "},v9c:{x_min:-166.0625,x_max:-25.859375,ha:0,o:"m -49 369 b -42 370 -46 369 -44 370 b -27 360 -36 370 -29 366 b -25 355 -27 359 -25 358 b -32 335 -25 351 -28 347 b -92 52 -66 248 -87 159 b -93 -1 -93 43 -93 20 b -92 -54 -93 -23 -93 -45 b -32 -337 -85 -162 -66 -251 b -25 -355 -27 -349 -25 -352 b -42 -371 -25 -365 -32 -371 b -61 -353 -50 -371 -51 -369 b -163 -63 -119 -262 -153 -165 b -166 -1 -166 -37 -166 -31 b -163 62 -166 30 -166 36 b -61 352 -153 163 -119 260 b -49 369 -54 365 -51 366 "},v9e:{x_min:0,x_max:607.0625,ha:619,o:"m 243 631 b 250 632 246 632 249 632 b 270 620 259 632 268 628 l 272 616 l 272 201 l 272 -212 l 270 -216 b 251 -229 268 -224 259 -229 b 227 -215 243 -229 240 -229 l 151 -142 b 32 -16 81 -80 53 -49 b 0 84 9 18 0 52 b 111 199 0 149 42 199 b 137 197 119 199 127 198 b 228 151 168 191 197 177 l 231 148 l 231 383 b 232 620 231 616 231 616 b 243 631 234 624 238 630 m 168 131 b 152 133 163 133 157 133 b 107 102 130 133 111 120 b 106 86 107 97 106 91 b 111 41 106 73 108 56 b 227 -152 125 -13 171 -90 l 231 -156 l 231 -37 l 231 80 l 225 87 b 168 131 210 111 190 126 m 347 631 b 353 632 348 632 351 632 b 374 620 363 632 371 628 b 375 383 375 616 375 616 l 375 148 l 377 151 b 492 199 415 183 454 199 b 537 191 507 199 522 197 b 607 84 582 176 607 134 b 583 0 607 58 598 29 b 455 -142 562 -40 533 -72 l 378 -215 b 355 -229 364 -229 362 -229 b 334 -216 345 -229 337 -224 l 333 -212 l 333 201 l 333 616 l 334 620 b 347 631 337 624 341 630 m 465 131 b 451 133 461 133 455 133 b 445 133 449 133 446 133 b 379 87 419 129 396 113 l 375 80 l 375 -37 l 375 -156 l 378 -152 b 499 81 451 -72 499 20 l 499 83 b 465 131 499 113 490 126 "},va3:{x_min:58.53125,x_max:228.671875,ha:294,o:"m 138 371 b 142 373 140 371 141 373 b 178 342 149 373 156 366 b 228 251 217 297 228 278 b 228 244 228 248 228 247 b 176 147 227 212 212 184 b 123 73 152 122 132 93 b 121 62 122 70 121 66 b 145 13 121 48 129 31 b 153 -2 151 6 153 1 b 149 -9 153 -5 152 -6 b 144 -11 148 -11 145 -11 b 129 -1 140 -11 136 -8 b 61 87 89 37 68 68 b 58 113 59 95 58 105 b 110 215 58 144 74 177 b 163 287 134 240 155 269 b 166 299 166 291 166 295 b 141 348 166 313 157 330 b 133 360 134 356 133 358 b 133 363 133 362 133 362 b 138 371 133 367 136 370 "},va5:{x_min:0,x_max:349.8125,ha:357,o:"m 88 302 b 103 303 93 302 98 303 b 202 224 149 303 191 270 b 205 199 204 216 205 208 b 178 129 205 173 196 147 l 175 126 l 182 127 b 307 249 236 142 284 190 b 313 259 308 254 311 258 b 329 267 317 265 323 267 b 349 247 340 267 349 259 b 201 -263 349 242 204 -258 b 182 -273 197 -270 190 -273 b 163 -260 174 -273 166 -269 b 161 -256 161 -259 161 -258 b 217 -59 161 -248 170 -220 b 272 129 247 43 272 127 b 272 129 272 129 272 129 b 264 122 272 129 268 126 b 140 80 227 94 183 80 b 36 115 102 80 65 91 b 0 194 10 136 0 165 b 88 302 0 244 32 292 "},va9:{x_min:-24.5,x_max:314.421875,ha:321,o:"m -24 -145 l -24 -5 l -20 -5 b 0 -23 -9 -5 -2 -12 b 27 -87 4 -38 14 -66 b 138 -220 53 -136 88 -177 b 235 -328 179 -255 208 -288 b 314 -592 287 -409 314 -501 b 292 -732 314 -639 307 -687 l 289 -742 l 294 -756 b 314 -896 307 -802 314 -849 b 292 -1035 314 -943 307 -991 l 289 -1045 l 294 -1057 b 314 -1197 307 -1104 314 -1152 b 292 -1338 314 -1246 307 -1292 l 289 -1347 l 294 -1360 b 314 -1500 307 -1407 314 -1454 b 273 -1689 314 -1565 300 -1628 b 250 -1712 265 -1710 261 -1712 b 228 -1691 236 -1712 228 -1704 l 228 -1685 l 234 -1675 b 270 -1507 258 -1621 270 -1564 b 98 -1193 270 -1381 209 -1261 b 40 -1174 76 -1179 58 -1174 b -10 -1189 24 -1174 8 -1178 b -20 -1192 -14 -1192 -16 -1192 l -24 -1192 l -24 -1052 l -24 -913 l -20 -913 b 0 -931 -9 -913 -2 -920 b 27 -995 4 -946 14 -974 b 138 -1128 53 -1043 88 -1085 b 257 -1275 190 -1172 228 -1220 b 262 -1283 259 -1279 262 -1283 l 262 -1283 b 269 -1249 264 -1282 268 -1260 b 270 -1206 270 -1233 270 -1220 b 98 -891 270 -1075 206 -957 b 40 -871 76 -877 58 -871 b -10 -886 24 -871 8 -875 b -20 -889 -14 -889 -16 -889 l -24 -889 l -24 -749 l -24 -610 l -20 -610 b 0 -628 -9 -610 -2 -617 b 27 -692 4 -644 14 -671 b 138 -825 53 -741 88 -782 b 257 -973 190 -870 228 -917 b 262 -981 259 -977 262 -981 l 262 -981 b 269 -946 264 -979 268 -957 b 270 -903 270 -931 270 -917 b 98 -588 270 -774 206 -655 b 40 -569 76 -574 58 -569 b -10 -584 24 -569 8 -574 b -20 -587 -14 -587 -16 -587 l -24 -587 l -24 -448 l -24 -308 l -20 -308 b 0 -326 -9 -308 -2 -315 b 27 -390 4 -341 14 -369 b 138 -523 53 -438 88 -480 b 257 -670 190 -567 228 -614 b 262 -678 259 -674 262 -678 b 262 -678 262 -678 262 -678 b 269 -644 264 -677 268 -656 b 270 -601 270 -628 270 -614 b 98 -285 270 -471 206 -352 b 40 -266 76 -273 58 -266 b -10 -281 24 -266 8 -272 b -20 -284 -14 -284 -16 -284 l -24 -284 l -24 -145 "},vaa:{x_min:-1.359375,x_max:752.703125,ha:768,o:"m 490 985 b 504 986 495 986 500 986 b 604 907 551 986 593 954 b 607 884 607 900 607 892 b 581 813 607 857 597 831 l 578 810 l 583 811 b 710 932 638 827 687 873 b 714 943 711 936 713 942 b 730 952 720 949 725 952 b 752 931 741 952 752 943 b 200 -946 752 927 204 -941 b 182 -957 197 -953 190 -957 b 163 -945 174 -957 166 -953 b 161 -939 161 -942 161 -942 b 217 -743 161 -931 170 -904 b 272 -555 247 -639 272 -555 b 272 -555 272 -555 272 -555 b 264 -560 272 -555 268 -557 b 140 -603 227 -589 182 -603 b 36 -567 102 -603 65 -592 b -1 -487 12 -548 -1 -517 b 17 -427 -1 -466 5 -445 b 103 -380 38 -395 70 -380 b 191 -433 137 -380 172 -398 b 205 -484 201 -448 205 -466 b 178 -553 205 -509 196 -535 l 175 -557 l 182 -555 b 307 -435 236 -539 284 -494 b 372 -213 308 -430 372 -215 b 372 -213 372 -213 372 -213 b 364 -219 372 -213 368 -216 b 240 -262 328 -247 283 -262 b 137 -226 202 -262 166 -249 b 99 -145 112 -206 99 -176 b 118 -84 99 -124 106 -104 b 204 -38 138 -54 171 -38 b 292 -91 238 -38 273 -56 b 306 -141 302 -106 306 -124 b 279 -212 306 -167 296 -194 l 276 -215 l 281 -213 b 408 -93 336 -198 385 -151 b 473 129 409 -88 473 127 b 473 129 473 129 473 129 b 465 122 473 129 469 126 b 341 80 428 94 383 80 b 236 115 303 80 266 91 b 200 195 213 136 200 165 b 217 256 200 217 206 238 b 304 303 239 287 272 303 b 393 249 338 303 374 285 b 406 199 402 234 406 217 b 379 129 406 173 397 148 l 377 126 l 382 127 b 509 248 436 142 485 190 b 574 470 510 254 574 469 b 574 470 574 470 574 470 b 566 464 574 470 570 467 b 442 421 529 435 484 421 b 337 458 404 421 367 433 b 300 538 314 477 300 508 b 318 598 300 559 306 580 b 404 645 340 630 372 645 b 494 592 439 645 475 627 b 507 541 502 577 507 559 b 480 471 507 516 498 489 l 477 467 l 483 470 b 608 589 537 485 586 531 b 675 811 611 595 675 810 b 675 811 675 811 675 811 b 666 806 675 811 671 809 b 543 763 628 777 585 763 b 438 799 504 763 468 775 b 401 878 412 820 401 849 b 490 985 401 928 434 977 "},vab:{x_min:0,x_max:272.21875,ha:278,o:"m 243 631 b 250 632 246 632 249 632 b 270 620 259 632 268 628 l 272 616 l 272 201 l 272 -212 l 270 -216 b 251 -229 268 -224 259 -229 b 227 -215 243 -229 240 -229 l 151 -142 b 32 -16 81 -80 53 -49 b 0 84 9 18 0 52 b 111 199 0 149 42 199 b 137 197 119 199 127 198 b 228 151 168 191 197 177 l 231 148 l 231 383 b 232 620 231 616 231 616 b 243 631 234 624 238 630 m 168 131 b 152 133 163 133 157 133 b 107 102 130 133 111 120 b 106 86 107 97 106 91 b 111 41 106 73 108 56 b 227 -152 125 -13 171 -90 l 231 -156 l 231 -37 l 231 80 l 225 87 b 168 131 210 111 190 126 "},vad:{x_min:0,x_max:873.828125,ha:892,o:"m 0 0 l 0 703 l 81 703 l 164 703 l 164 0 l 164 -705 l 81 -705 l 0 -705 l 0 0 m 225 0 l 225 703 l 246 703 l 268 703 l 268 366 l 268 30 l 274 36 b 314 79 284 44 302 63 b 413 302 357 137 392 213 b 432 327 419 324 421 327 b 449 306 443 327 447 322 b 611 115 457 195 529 115 b 651 122 624 115 638 117 b 728 316 705 140 724 188 b 729 388 728 342 729 366 b 671 635 729 533 711 602 b 581 662 649 652 616 662 b 477 637 545 662 510 653 l 475 635 l 477 634 b 503 627 488 632 495 631 b 545 556 532 612 545 584 b 491 480 545 524 526 491 b 465 474 481 476 473 474 b 379 563 417 474 379 516 b 389 602 379 576 382 588 b 541 691 409 641 479 681 b 582 694 555 692 568 694 b 865 462 714 694 834 598 b 873 392 871 440 873 416 b 865 317 873 367 871 341 b 639 84 839 194 748 101 b 612 83 630 83 620 83 b 511 116 577 83 543 94 b 504 120 509 119 506 120 b 504 120 504 120 504 120 b 469 59 504 120 488 93 l 432 -1 l 469 -61 b 504 -122 488 -94 504 -122 b 504 -122 504 -122 504 -122 b 511 -117 506 -122 509 -120 b 612 -84 543 -95 577 -84 b 665 -91 630 -84 647 -87 b 869 -338 771 -122 850 -216 b 873 -392 872 -356 873 -374 b 798 -595 873 -469 847 -539 b 581 -695 741 -662 660 -695 b 406 -626 517 -695 454 -671 b 381 -563 389 -607 381 -585 b 465 -477 381 -519 413 -477 b 545 -559 514 -477 545 -519 b 503 -628 545 -587 532 -613 b 477 -635 495 -632 488 -634 l 475 -637 l 477 -638 b 581 -663 510 -655 545 -663 b 671 -637 616 -663 649 -653 b 729 -391 711 -603 729 -534 b 728 -317 729 -367 728 -344 b 623 -117 722 -173 698 -124 b 611 -116 619 -116 615 -116 b 449 -308 528 -116 457 -198 b 432 -328 447 -323 443 -328 b 413 -303 421 -328 419 -326 b 314 -80 392 -215 357 -138 b 274 -37 302 -65 284 -45 l 268 -31 l 268 -367 l 268 -705 l 246 -705 l 225 -705 l 225 0 "},vb1:{x_min:78.9375,x_max:485.921875,ha:417,o:"m 362 378 b 378 380 367 380 372 380 b 472 348 415 380 453 367 b 485 315 481 338 485 327 b 462 273 485 298 477 281 b 439 267 454 269 446 267 b 398 290 424 267 409 274 b 344 319 385 309 364 319 b 281 269 315 319 289 301 b 279 262 280 266 279 262 b 276 256 279 260 277 258 b 274 249 276 254 274 251 b 238 127 273 248 257 192 b 201 4 217 61 201 5 b 166 -1 198 -1 200 -1 b 153 -1 163 -1 157 -1 b 141 -1 148 -1 144 -1 b 104 4 106 -1 107 -1 b 104 6 104 5 104 5 b 142 144 104 13 110 34 b 182 278 164 219 181 276 b 183 288 182 281 182 285 b 185 302 185 292 185 298 b 164 330 185 317 176 328 b 159 330 163 330 161 330 b 102 302 140 330 119 320 b 91 294 95 295 93 294 b 88 294 91 294 89 294 b 78 303 83 294 78 298 b 81 312 78 306 78 309 b 200 373 106 347 160 373 b 215 371 205 373 209 371 b 266 335 235 367 254 353 b 269 331 268 333 269 331 b 269 331 269 331 269 331 b 273 335 269 331 270 334 b 362 378 298 359 330 376 "},vb3:{x_min:0,x_max:227.3125,ha:232,o:"m 91 213 b 100 215 93 215 96 215 b 227 58 167 215 224 144 b 227 52 227 56 227 54 b 61 -201 227 -43 164 -138 b 29 -216 44 -212 36 -216 b 23 -210 27 -216 24 -213 b 21 -205 21 -208 21 -206 b 34 -192 21 -201 25 -197 b 122 -55 89 -161 122 -106 b 104 6 122 -33 117 -12 l 103 9 l 96 9 b 4 79 57 9 17 38 b 0 112 1 90 0 101 b 91 213 0 163 36 209 "},vb4:{x_min:-597.53125,x_max:596.171875,ha:608,o:"m -533 324 b -525 327 -530 326 -528 327 b -504 305 -514 327 -504 317 b -504 305 -504 305 -504 305 b -513 284 -504 299 -504 299 b -556 112 -541 226 -556 167 b -545 33 -556 84 -552 58 b -524 -20 -541 15 -532 -9 l -522 -23 l -491 15 l -413 111 b -355 174 -367 169 -363 174 b -351 174 -353 174 -352 174 b -254 86 -343 174 -348 179 b -168 -1 -208 37 -168 -1 b -100 84 -168 -1 -137 37 b -23 173 -28 173 -29 172 b -19 174 -21 174 -20 174 b -8 173 -14 174 -10 173 b 80 86 -5 172 13 151 b 166 -1 127 37 166 -1 b 235 84 166 -1 197 37 b 311 173 306 173 304 172 b 317 174 313 174 314 174 b 326 173 319 174 323 173 b 490 11 329 172 366 134 l 502 -1 l 530 34 b 568 76 560 72 563 74 b 575 77 570 77 573 77 b 596 56 586 77 596 68 b 594 48 596 54 596 51 b 417 -172 592 41 424 -166 b 405 -176 415 -174 409 -176 b 396 -174 401 -176 398 -176 b 307 -87 393 -173 372 -152 b 221 -1 259 -38 221 -1 b 152 -86 221 -1 190 -38 b 76 -176 81 -174 83 -173 b 70 -176 74 -176 73 -176 b 61 -174 66 -176 62 -174 b -27 -87 58 -173 38 -152 b -114 -1 -74 -38 -112 -1 b -182 -86 -114 -1 -145 -38 b -258 -176 -253 -174 -253 -173 b -264 -176 -259 -176 -262 -176 b -274 -174 -268 -176 -272 -174 b -438 -11 -277 -173 -348 -102 l -449 0 l -479 -37 b -524 -80 -513 -80 -514 -80 l -524 -80 b -553 -52 -534 -80 -540 -74 b -597 109 -583 -8 -597 48 b -560 280 -597 165 -585 224 b -533 324 -548 310 -540 322 "},vb6:{x_min:0,x_max:556.6875,ha:568,o:"m 289 545 b 298 546 292 545 295 546 b 318 533 306 546 315 541 b 319 428 319 530 319 528 l 319 327 l 334 327 b 526 223 412 326 485 285 b 543 172 537 206 543 190 b 447 76 543 122 503 76 b 445 76 446 76 446 76 b 359 165 394 77 359 119 b 368 205 359 179 362 192 b 441 251 382 233 412 251 b 455 249 446 251 451 251 b 460 248 458 249 460 248 b 460 248 460 248 460 248 b 454 254 460 249 458 251 b 334 295 419 280 378 294 l 319 295 l 319 4 l 319 -287 l 321 -285 b 328 -285 322 -285 325 -285 b 524 -99 424 -277 507 -198 b 541 -79 526 -84 530 -79 b 556 -97 551 -79 556 -84 b 548 -133 556 -105 553 -117 b 334 -317 521 -233 434 -306 b 322 -319 329 -317 323 -317 l 319 -319 l 319 -424 b 319 -471 319 -444 319 -459 b 313 -541 319 -544 318 -535 b 298 -548 308 -545 303 -548 b 279 -534 289 -548 281 -542 b 277 -424 277 -531 277 -530 l 277 -317 l 273 -317 b 13 -95 153 -305 51 -217 b 0 2 4 -62 0 -29 b 182 295 0 126 66 238 b 274 324 210 309 249 320 l 277 324 l 277 427 b 279 533 277 528 277 530 b 289 545 281 538 285 542 m 277 2 b 277 291 277 161 277 291 b 268 288 277 291 273 290 b 144 1 179 265 144 184 b 276 -284 144 -199 175 -267 l 277 -285 l 277 2 "},vb7:{x_min:-176.9375,x_max:251.8125,ha:257,o:"m -8 631 b -1 632 -6 632 -4 632 b 19 620 8 632 16 628 b 20 503 20 616 20 614 b 20 391 20 442 20 391 b 84 424 20 391 49 406 l 147 456 l 152 456 b 153 456 153 456 153 456 b 175 435 166 456 175 446 b 172 427 175 433 174 430 b 92 380 170 420 172 421 l 20 342 l 20 245 l 20 148 l 21 151 b 137 199 59 183 99 199 b 182 191 152 199 167 197 b 251 84 227 176 251 134 b 228 0 251 58 243 29 b 100 -142 206 -40 178 -72 l 23 -215 b 0 -229 9 -229 6 -229 b -20 -216 -9 -229 -17 -224 b -21 54 -21 -212 -21 -212 b -21 322 -21 201 -21 322 b -85 290 -21 322 -50 308 l -148 256 l -153 256 b -155 256 -155 256 -155 256 b -176 277 -167 256 -176 266 b -174 285 -176 280 -175 283 b -93 333 -171 294 -174 292 l -21 370 l -21 494 b -20 620 -21 616 -21 616 b -8 631 -17 624 -13 630 m 110 131 b 96 133 106 133 100 133 b 89 133 93 133 91 133 b 24 87 63 129 40 113 l 20 80 l 20 -37 l 20 -156 l 23 -152 b 144 81 96 -72 144 20 l 144 83 b 110 131 144 113 134 126 "},vb9:{x_min:-122.5,x_max:121.140625,ha:124,o:"m -16 145 b 0 147 -10 147 -5 147 b 121 -1 66 147 121 77 b 114 -49 121 -16 118 -33 b -1 -148 95 -112 47 -148 b -85 -106 -31 -148 -61 -134 b -122 -1 -110 -76 -122 -38 b -16 145 -122 68 -81 134 m 12 111 b 0 113 8 113 4 113 b -68 22 -29 113 -61 73 b -70 0 -69 15 -70 6 b -13 -113 -70 -49 -47 -98 b -1 -115 -9 -115 -5 -115 b 63 -40 24 -115 53 -83 b 68 -1 66 -27 68 -15 b 12 111 68 48 46 97 "},vba:{x_min:-118.421875,x_max:597.53125,ha:381,o:"m 460 574 b 464 574 461 574 462 574 b 488 574 470 574 481 574 b 500 573 491 574 498 574 b 594 503 543 570 588 538 b 597 488 596 498 597 494 b 528 417 597 449 564 417 b 502 423 519 417 510 419 b 465 481 477 434 465 458 b 488 528 465 499 472 516 b 490 530 490 530 490 530 b 490 530 490 530 490 530 b 468 517 488 530 475 523 b 349 340 419 485 377 420 b 347 330 348 334 347 330 b 383 328 347 328 363 328 b 428 326 423 328 424 328 b 442 302 438 320 442 312 b 430 281 442 294 438 285 b 385 276 424 277 426 276 l 377 276 l 332 276 l 330 269 b 178 -117 303 126 250 -9 b 1 -249 129 -194 69 -237 b -20 -251 -6 -251 -13 -251 b -114 -187 -65 -251 -100 -227 b -118 -156 -117 -177 -118 -166 b -51 -84 -118 -116 -91 -84 b -31 -87 -46 -84 -39 -86 b 16 -152 0 -95 16 -124 b -12 -205 16 -173 8 -194 b -16 -208 -14 -206 -16 -208 b -14 -208 -16 -208 -14 -208 b -9 -206 -14 -208 -12 -208 b 74 -124 23 -197 54 -166 b 172 224 98 -79 125 22 b 185 276 178 252 183 274 b 185 276 185 276 185 276 b 141 276 185 276 181 276 b 91 280 96 276 96 276 b 77 302 83 285 77 294 b 91 326 77 312 83 320 b 148 328 95 328 96 328 l 198 330 l 202 341 b 460 574 249 473 351 566 "},vbf:{x_min:-53.078125,x_max:513.140625,ha:485,o:"m 185 383 b 196 384 187 383 191 384 b 277 334 230 384 259 365 b 288 301 281 324 288 306 b 288 297 288 298 288 297 b 294 302 289 297 291 299 b 394 370 323 338 367 367 b 404 371 398 370 401 371 b 510 272 453 371 498 328 b 513 237 513 262 513 251 b 507 172 513 217 511 192 b 326 -34 487 59 412 -26 b 314 -36 322 -36 318 -36 b 274 -24 298 -36 283 -31 l 265 -16 b 224 44 246 -1 232 20 b 223 49 224 47 223 49 b 223 49 223 49 223 49 b 149 -197 221 48 149 -194 b 149 -198 149 -197 149 -198 b 170 -210 149 -202 155 -205 b 187 -215 174 -210 175 -212 b 204 -231 201 -219 204 -222 b 197 -245 204 -240 202 -242 l 194 -248 l 76 -248 l -42 -248 l -46 -245 b -53 -231 -51 -242 -53 -240 b -35 -215 -53 -222 -49 -217 b -13 -210 -21 -212 -20 -212 b -6 -208 -10 -209 -8 -208 b 0 -206 -6 -208 -2 -206 b 25 -188 13 -201 21 -195 b 163 280 28 -183 163 276 b 166 291 163 283 164 287 b 167 302 167 295 167 299 b 155 324 167 315 161 324 b 155 324 155 324 155 324 b 65 230 125 322 85 280 b 53 215 61 217 58 215 b 51 215 53 215 51 215 b 42 224 46 215 42 217 b 57 263 42 231 47 244 b 140 360 77 305 104 337 b 152 370 144 365 149 369 b 185 383 157 376 172 381 m 374 306 b 366 308 371 308 368 308 b 300 273 348 308 321 294 b 284 254 288 262 287 259 b 280 242 283 249 281 245 b 257 169 279 240 270 213 l 236 98 l 236 93 b 251 48 238 77 243 61 b 279 27 258 37 272 27 b 281 27 279 27 280 27 b 291 31 281 27 287 30 b 396 170 334 52 378 109 b 406 247 402 197 406 224 b 401 277 406 259 405 270 b 374 306 397 290 383 303 "},vc3:{x_min:-10.890625,x_max:299.4375,ha:294,o:"m 136 460 b 142 462 137 462 140 462 b 166 449 152 462 161 456 b 171 428 168 446 168 445 b 288 131 194 322 238 209 b 298 115 295 120 296 117 b 299 106 298 112 299 109 b 273 81 299 91 287 81 b 255 86 268 81 261 83 b 155 116 225 104 183 116 l 152 116 l 149 108 b 141 83 148 102 144 91 b 134 48 137 69 134 58 b 149 9 134 34 140 24 b 153 -1 152 5 153 1 b 149 -9 153 -5 152 -6 b 144 -11 148 -11 147 -11 b 122 2 138 -11 133 -6 b 95 61 104 20 95 38 b 107 108 95 74 99 90 b 108 113 107 111 108 112 b 107 113 108 113 108 113 b 102 113 106 113 104 113 b 31 86 76 108 53 98 b 14 80 24 81 20 80 b -10 106 0 80 -10 91 b 0 131 -10 115 -9 116 b 115 430 49 209 91 317 b 136 460 119 451 123 456 "},vd0:{x_min:-10.890625,x_max:299.4375,ha:294,o:"m 44 174 b 51 174 47 174 49 174 b 68 173 55 174 61 174 l 287 112 l 551 40 b 615 20 617 22 609 23 b 626 0 622 16 626 8 b 615 -22 626 -9 622 -18 b 613 -23 613 -23 613 -23 b 613 -23 613 -23 613 -23 b 287 -113 613 -24 597 -29 l 68 -174 b 53 -176 61 -176 57 -176 b 39 -172 47 -176 43 -174 b 27 -151 31 -167 27 -159 b 39 -129 27 -141 31 -133 b 230 -74 43 -124 20 -131 l 370 -36 l 468 -9 b 498 0 484 -4 498 -1 b 468 8 498 0 484 2 l 370 34 l 230 73 b 40 126 28 129 43 124 b 27 149 31 131 27 140 b 44 174 27 161 34 170 m 205 110 l 205 300 b 205 330 245 330 245 300 l 245 300 l 245 -300 b 245 -330 205 -330 205 -300 l 205 -300 l 205 110 l 345 90 m 345 90 l 345 330 b 345 360 385 360 385 330 l 385 330 l 385 -270 b 385 -300 345 -300 345 -270 l 345 -270 l 345 90 "},vd1:{x_min:-20,x_max:320,ha:257,o:"m -8 200 b -8 210 8 200 16 200 l 20 148 -199 l 23 -615 b 0 -629 9 -629 6 -629 l -21 -612 l -21 -201 l -21 216 l -20 200 m 16 200 l 310 0 l 240 0 l 16 140 l 16 -120 l 240 0 l 310 0 l 16 -200 "},vd2:{x_min:0,x_max:430.75,ha:386,o:"m 0 200 l 0 -200 l 430 -200 l 430 200 l 0 200 "},vd3:{x_min:0,x_max:430.75,ha:386,o:"m 0 200 l 0 -200 l 430 -200 l 430 200 l 0 200 l 50 150 l 380 150 l 380 -150 l 50 -150 l 50 150 "},vd4:{x_min:0,x_max:430.75,ha:360,o:"m 0 150 l 0 -150 l 430 -150 l 430 150 l 0 150 "},vd5:{x_min:0,x_max:430.75,ha:360,o:"m 0 150 l 0 -150 l 430 -150 l 430 150 l 0 150 l 50 100 l 380 100 l 380 -100 l 50 -100 l 50 100"},vd6:{x_min:0,x_max:430.75,ha:360,o:"m -146 537 b -138 538 -143 538 -141 538 b -118 525 -129 538 -121 533 b -117 390 -117 522 -117 521 b -115 259 -117 268 -117 259 b -115 259 -115 259 -115 259 b -59 272 -104 263 -62 272 b -39 259 -50 272 -42 267 b -37 209 -38 257 -37 233 b -39 159 -37 185 -38 162 b -85 138 -43 149 -44 149 l -117 131 l -117 21 b -115 -88 -117 -80 -117 -88 b -115 -88 -115 -88 -115 -88 b -59 -75 -104 -84 -62 -75 b -44 -81 -52 -75 -48 -77 b -38 -124 -38 -87 -38 -85 b -38 -138 -38 -124 -38 -138 b -38 -152 -38 -138 -38 -152 b -44 -195 -38 -191 -38 -190 b -85 -209 -48 -200 -48 -200 l -117 -217 l -117 -349 b -118 -486 -117 -481 -117 -482 b -138 -499 -121 -494 -129 -499 b -153 -493 -143 -499 -149 -497 b -159 -415 -158 -487 -159 -496 b -159 -355 -159 -398 -159 -379 b -159 -227 -159 -284 -159 -227 b -205 -238 -159 -227 -180 -232 b -250 -249 -230 -244 -250 -249 b -251 -386 -251 -249 -251 -311 b -252 -525 -251 -521 -251 -522 b -272 -538 -255 -534 -264 -538 b -287 -532 -277 -538 -283 -536 b -293 -452 -292 -527 -293 -536 b -293 -391 -293 -436 -293 -415 b -294 -260 -293 -269 -293 -260 b -294 -260 -294 -260 -294 -260 b -348 -272 -306 -264 -345 -272 b -368 -259 -357 -272 -365 -267 b -369 -209 -369 -257 -369 -233 b -368 -159 -369 -185 -369 -162 b -323 -139 -364 -149 -362 -148 l -293 -131 l -293 -22 b -294 87 -293 80 -293 87 b -294 87 -294 87 -294 87 b -348 75 -306 84 -345 75 b -368 88 -357 75 -365 80 b -369 138 -369 91 -369 114 b -368 188 -369 162 -369 186 b -323 209 -364 198 -362 199 l -293 216 l -293 349 b -292 486 -293 481 -293 482 b -272 499 -288 494 -280 499 b -257 493 -266 499 -261 497 b -251 414 -251 487 -251 496 b -251 354 -251 398 -251 378 b -251 226 -251 284 -251 226 b -205 238 -250 226 -230 231 b -159 249 -180 244 -159 249 b -159 385 -159 249 -159 310 b -157 525 -159 521 -159 522 b -146 537 -156 530 -151 535 z m -159 11 b -159 120 -159 98 -159 120 l -159 120 b -175 116 -160 120 -167 119 b -221 105 -184 114 -204 109 l -251 98 l -251 -12 b -251 -121 -251 -72 -251 -121 b -205 -110 -250 -121 -230 -116 b -159 -99 -180 -104 -159 -99 b -159 11 -159 -99 -159 -49 z m 89 517 b 97 519 92 518 94 519 b 117 505 106 519 114 513 b 119 376 119 502 119 501 l 119 249 l 145 258 b 176 267 169 266 172 267 b 177 267 176 267 177 267 b 196 255 186 267 192 263 l 197 252 l 197 205 b 197 181 197 195 197 187 b 193 149 197 153 197 153 b 152 131 190 144 187 143 l 119 120 l 119 10 b 119 -100 119 -62 119 -100 b 145 -91 120 -100 131 -96 b 173 -82 159 -86 171 -82 b 176 -81 174 -81 175 -81 b 196 -94 185 -81 193 -87 b 198 -151 197 -97 198 -125 b 197 -194 198 -172 197 -192 b 153 -218 193 -203 192 -204 l 119 -230 l 119 -367 l 118 -504 l 117 -507 b 97 -519 113 -514 105 -519 b 82 -512 92 -519 87 -517 b 76 -434 77 -507 76 -516 b 76 -374 76 -418 76 -398 b 76 -245 76 -303 76 -245 b 52 -254 76 -245 65 -249 b 19 -263 34 -260 25 -263 b 6 -257 13 -263 10 -261 b 0 -214 0 -251 0 -253 b 0 -200 0 -210 0 -205 b 0 -188 0 -196 0 -192 b 6 -143 0 -147 0 -149 b 46 -126 10 -139 10 -139 l 76 -115 l 76 -5 b 76 106 76 56 76 106 b 51 98 76 106 64 102 b 18 89 34 92 25 89 b 6 95 13 89 10 91 b 0 139 0 101 0 99 b 0 153 0 143 0 148 b 0 179 0 163 0 172 b 44 225 0 215 3 211 l 76 236 l 76 369 b 78 505 76 501 76 502 b 89 517 80 510 85 515 z "},vd7:{x_min:0,x_max:430.75,ha:360,o:"m 283 633 b 291 634 286 634 289 634 b 311 621 300 634 308 629 b 313 505 313 618 313 617 b 313 393 313 443 313 393 b 378 425 313 393 343 407 l 443 458 l 448 458 b 449 458 449 458 449 458 b 471 437 462 458 471 448 b 469 429 471 434 470 432 b 387 382 466 421 469 423 l 313 344 l 313 247 l 313 150 l 315 152 b 433 201 353 184 394 201 b 479 193 448 201 464 198 b 549 86 524 177 549 135 b 526 1 549 59 541 29 b 395 -143 504 -39 475 -71 b 316 -214 351 -182 341 -191 b 292 -229 302 -228 300 -229 b 272 -216 283 -229 275 -224 b 271 55 271 -212 271 -212 b 270 323 271 203 270 323 b 205 291 270 323 241 308 l 140 258 l 135 258 b 134 258 135 258 134 258 b 112 279 121 258 112 267 b 114 287 112 281 113 284 b 196 334 117 295 114 293 l 271 371 l 271 495 b 272 621 271 617 271 618 b 283 633 274 626 279 631 z m 404 133 b 391 134 400 134 395 134 b 384 134 388 134 386 134 b 318 88 358 130 335 114 l 313 81 l 313 -37 l 313 -156 l 316 -152 b 439 83 391 -71 439 22 l 439 84 b 404 133 439 115 430 128 z m -8 633 l -8 633 b 0 634 -6 634 -3 634 b 20 621 8 634 17 629 b 21 384 21 618 21 617 l 21 150 l 24 152 b 141 201 62 184 102 201 b 187 193 157 201 172 198 b 257 86 232 177 257 135 b 234 1 257 59 250 29 b 103 -143 212 -39 183 -71 b 24 -214 60 -182 49 -191 b 0 -229 10 -228 8 -229 b -20 -216 -9 -229 -17 -224 l -21 -212 l -21 203 l -21 618 l -20 621 b -8 633 -18 626 -13 631 z m 113 133 l 113 133 b 99 134 109 134 103 134 b 93 134 97 134 94 134 b 26 88 66 130 43 114 l 21 81 l 21 -37 l 21 -156 l 25 -152 b 148 83 99 -71 148 22 l 148 84 b 113 133 148 115 138 128 z "},rwl:{x_min:0,x_max:737.71875,ha:753,o:"m 9 13 b 208 15 10 15 51 15 b 368 15 251 15 304 15 l 726 15 l 729 12 b 737 -1 735 9 737 4 b 729 -15 737 -6 735 -11 l 726 -16 l 660 -16 l 592 -16 l 592 -95 l 592 -174 l 368 -174 l 144 -174 l 144 -95 l 144 -16 l 77 -16 l 9 -16 l 6 -15 b 0 -1 1 -11 0 -6 b 9 13 0 5 2 11 "},rhl:{x_min:0,x_max:737.71875,ha:753,o:"m 144 94 l 144 173 l 368 173 l 592 173 l 592 94 l 592 15 l 660 15 l 726 15 l 729 12 b 737 -1 735 9 737 4 b 729 -15 737 -6 735 -11 l 726 -16 l 368 -16 l 9 -16 l 6 -15 b 0 -1 1 -11 0 -6 b 6 12 0 4 1 9 l 9 15 l 77 15 l 144 15 l 144 94 "}},cssFontWeight:"normal",ascender:1903,underlinePosition:-125,cssFontStyle:"normal",boundingBox:{yMin:-2065.375,xMin:-695.53125,yMax:1901.578125,xMax:1159.671875},resolution:1e3,descender:-2066,familyName:"VexFlow-18",lineHeight:4093,underlineThickness:50};function f(e,t,n,i,s,r){let a,o,l,c=0;function h(){return t+e[c++]*i}function u(){return n+e[c++]*s}for(;c<e.length;)switch(a=e[c++],a){case"m":case"l":r[a](h(),u());break;case"q":o=h(),l=u(),r.q(h(),u(),o,l);break;case"b":o=h(),l=u(),r.b(h(),u(),h(),u(),o,l)}}class p extends c{static loadMetrics(e,t,n){const s=e.glyphs[t];if(!s)throw new i.RERR("BadGlyph","Glyph ".concat(t," does not exist in font."));const r=s.x_min,a=s.x_max,o=s.ha;let l;if(s.o)return n?s.cached_outline?l=s.cached_outline:(l=s.o.split(" "),s.cached_outline=l):(s.cached_outline&&delete s.cached_outline,l=s.o.split(" ")),{x_min:r,x_max:a,ha:o,outline:l};throw new i.RERR("BadGlyph","Glyph ".concat(t," has no outline defined."))}static renderGlyph(e,t,n,i,s,r){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";const o=72*i/(100*d.resolution),l=p.loadMetrics(d,s,!r);p.renderOutline(e,l.outline,o,t,n,a)}static renderOutline(e,t,n,s,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";e.beginPath(),e.moveTo(s,r),f(t,s,r,n,-n,{m:e.moveTo.bind(e),l:e.lineTo.bind(e),q:e.quadraticCurveTo.bind(e),b:e.bezierCurveTo.bind(e)}),{class:i.Prefix("notehead")}.id=a,e.fill()}static getOutlineBoundingBox(e,t,n,i){const s=new h;return f(e,n,i,t,-t,{m:s.addPoint.bind(s),l:s.addPoint.bind(s),q:s.addQuadraticCurve.bind(s),b:s.addBezierCurve.bind(s)}),new u(s.x1,s.y1,s.width(),s.height())}constructor(e,t,n){super(),this.setAttribute("type","Glyph"),this.code=e,this.point=t,this.options={cache:!0,font:d},this.metrics=null,this.x_shift=0,this.y_shift=0,this.originShift={x:0,y:0},n?this.setOptions(n):this.reset()}setOptions(e){i.Merge(this.options,e),this.reset()}setPoint(e){return this.point=e,this}setStave(e){return this.stave=e,this}setXShift(e){return this.x_shift=e,this}setYShift(e){return this.y_shift=e,this}reset(){this.scale=72*this.point/(100*this.options.font.resolution),this.metrics=p.loadMetrics(this.options.font,this.code,this.options.cache),this.bbox=p.getOutlineBoundingBox(this.metrics.outline,this.scale,0,0)}getMetrics(){if(!this.metrics)throw new i.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));return{x_min:this.metrics.x_min*this.scale,x_max:this.metrics.x_max*this.scale,width:this.bbox.getW(),height:this.bbox.getH()}}setOriginX(e){const{bbox:t}=this,n=(e-Math.abs(t.getX()/t.getW()))*t.getW();this.originShift.x=-n}setOriginY(e){const{bbox:t}=this,n=(e-Math.abs(t.getY()/t.getH()))*t.getH();this.originShift.y=-n}setOrigin(e,t){this.setOriginX(e),this.setOriginY(t)}render(e,t,n){if(!this.metrics)throw new i.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));const s=this.metrics.outline,r=this.scale;this.setRendered(),this.applyStyle(e),p.renderOutline(e,s,r,t+this.originShift.x,n+this.originShift.y),this.restoreStyle(e)}renderToStave(e){if(this.checkContext(),!this.metrics)throw new i.RuntimeError("BadGlyph","Glyph ".concat(this.code," is not initialized."));if(!this.stave)throw new i.RuntimeError("GlyphError","No valid stave");const t=this.metrics.outline,n=this.scale;this.setRendered(),this.applyStyle(),p.renderOutline(this.context,t,n,e+this.x_shift,this.stave.getYForGlyphs()+this.y_shift),this.restoreStyle()}}const m={STEM_WIDTH:1.5,STEM_HEIGHT:35,STAVE_LINE_THICKNESS:1,RESOLUTION:16384,DEFAULT_NOTATION_FONT_SCALE:39,DEFAULT_TABLATURE_FONT_SCALE:39,SLASH_NOTEHEAD_WIDTH:15,TEXT_HEIGHT_OFFSET_HACK:1,IsKerned:!0,clefProperties:e=>{if(!e)throw new i.RERR("BadArgument","Invalid clef: "+e);const t=m.clefProperties.values[e];if(!t)throw new i.RERR("BadArgument","Invalid clef: "+e);return t}};m.clefProperties.values={treble:{line_shift:0},bass:{line_shift:6},tenor:{line_shift:4},alto:{line_shift:3},soprano:{line_shift:1},percussion:{line_shift:0},"mezzo-soprano":{line_shift:2},"baritone-c":{line_shift:5},"baritone-f":{line_shift:5},subbass:{line_shift:7},french:{line_shift:-1}},m.keyProperties=(e,t,n)=>{void 0===t&&(t="treble");const r={octave_shift:0};"object"==typeof n&&i.Merge(r,n);const a=e.split("/");if(a.length<2)throw new i.RERR("BadArguments","Key must have note + octave and an optional glyph: ".concat(e));const o=a[0].toUpperCase(),l=m.keyProperties.note_values[o];if(!l)throw new i.RERR("BadArguments","Invalid key name: "+o);l.octave&&(a[1]=l.octave);let c=parseInt(a[1],10);c-=r.octave_shift;let h=(7*c-28+l.index)/2;h+=m.clefProperties(t).line_shift;let u=0;h<=0&&2*h%2==0&&(u=1),h>=6&&2*h%2==0&&(u=-1);const d=void 0!==l.int_val?12*c+l.int_val:null,f=l.code,p=l.shift_right;let g={};if(a.length>2&&a[2]){const e=a[2].toUpperCase();g=m.keyProperties.customNoteHeads[e]||{}}return s({key:o,octave:c,line:h,int_value:d,accidental:l.accidental,code:f,stroke:u,shift_right:p,displaced:!1},g)},m.keyProperties.note_values={C:{index:0,int_val:0,accidental:null},CN:{index:0,int_val:0,accidental:"n"},"C#":{index:0,int_val:1,accidental:"#"},"C##":{index:0,int_val:2,accidental:"##"},CB:{index:0,int_val:-1,accidental:"b"},CBB:{index:0,int_val:-2,accidental:"bb"},D:{index:1,int_val:2,accidental:null},DN:{index:1,int_val:2,accidental:"n"},"D#":{index:1,int_val:3,accidental:"#"},"D##":{index:1,int_val:4,accidental:"##"},DB:{index:1,int_val:1,accidental:"b"},DBB:{index:1,int_val:0,accidental:"bb"},E:{index:2,int_val:4,accidental:null},EN:{index:2,int_val:4,accidental:"n"},"E#":{index:2,int_val:5,accidental:"#"},"E##":{index:2,int_val:6,accidental:"##"},EB:{index:2,int_val:3,accidental:"b"},EBB:{index:2,int_val:2,accidental:"bb"},F:{index:3,int_val:5,accidental:null},FN:{index:3,int_val:5,accidental:"n"},"F#":{index:3,int_val:6,accidental:"#"},"F##":{index:3,int_val:7,accidental:"##"},FB:{index:3,int_val:4,accidental:"b"},FBB:{index:3,int_val:3,accidental:"bb"},G:{index:4,int_val:7,accidental:null},GN:{index:4,int_val:7,accidental:"n"},"G#":{index:4,int_val:8,accidental:"#"},"G##":{index:4,int_val:9,accidental:"##"},GB:{index:4,int_val:6,accidental:"b"},GBB:{index:4,int_val:5,accidental:"bb"},A:{index:5,int_val:9,accidental:null},AN:{index:5,int_val:9,accidental:"n"},"A#":{index:5,int_val:10,accidental:"#"},"A##":{index:5,int_val:11,accidental:"##"},AB:{index:5,int_val:8,accidental:"b"},ABB:{index:5,int_val:7,accidental:"bb"},B:{index:6,int_val:11,accidental:null},BN:{index:6,int_val:11,accidental:"n"},"B#":{index:6,int_val:12,accidental:"#"},"B##":{index:6,int_val:13,accidental:"##"},BB:{index:6,int_val:10,accidental:"b"},BBB:{index:6,int_val:9,accidental:"bb"},R:{index:6,int_val:9,rest:!0},X:{index:6,accidental:"",octave:4,code:"v3e",shift_right:5.5}},m.keyProperties.customNoteHeads={D0:{code:"v27",shift_right:0,stem_up_x_offset:0,stem_down_x_offset:0,stem_up_y_offset:-1,stem_down_y_offset:0},D1:{code:"v2d",shift_right:-.5},D2:{code:"v22",shift_right:-.5},D3:{code:"v70",shift_right:-.5},T0:{code:"v49",shift_right:-2,stem_up_y_offset:-4,stem_down_y_offset:4},T1:{code:"v93",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},T2:{code:"v40",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},T3:{code:"v7d",shift_right:.5,stem_up_y_offset:-4,stem_down_y_offset:4},TI:{code:"v11",shift_right:0,stem_up_y_shift:5,stem_down_y_shift:5,stem_up_x_offset:6,stem_down_x_offset:4},X0:{code:"v92",stem_up_x_offset:-2,stem_down_x_offset:0,stem_up_y_offset:4,stem_down_y_offset:4},X1:{code:"v95",shift_right:-.5,stem_up_y_offset:4,stem_down_y_offset:4},X2:{code:"v3e",shift_right:.5,stem_up_y_offset:4,stem_down_y_offset:4},X3:{code:"v3b",shift_right:0,stem_up_x_offset:-1.2,stem_down_x_offset:0,stem_up_y_offset:-1,stem_down_y_offset:2},S1:{code:"vd3",shift_right:0},S2:{code:"vd2",shift_right:0},R1:{code:"vd5",shift_right:0},R2:{code:"vd4",shift_right:0},rwl:{code:"rwl",shift_right:0},rhl:{code:"rhl",shift_right:0}},m.integerToNote=e=>{if(void 0===e)throw new i.RERR("BadArguments","Undefined integer for integerToNote");if(e<-2)throw new i.RERR("BadArguments","integerToNote requires integer > -2: ".concat(e));const t=m.integerToNote.table[e];if(!t)throw new i.RERR("BadArguments","Unknown note value for integer: ".concat(e));return t},m.integerToNote.table={0:"C",1:"C#",2:"D",3:"D#",4:"E",5:"F",6:"F#",7:"G",8:"G#",9:"A",10:"A#",11:"B"},m.tabToGlyph=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null,s=0,r=0;if("X"===e.toString().toUpperCase()){i="v7f",n&&(i="v3e");const e=new p(i,m.DEFAULT_TABLATURE_FONT_SCALE*t).getMetrics();s=e.width,r=-e.height/2}else s=m.textWidth(e.toString());return{text:e,code:i,getWidth:()=>s*t,shift_y:r}},m.textWidth=e=>7*e.toString().length,m.articulationCodes=e=>m.articulationCodes.articulations[e],m.articulationCodes.articulations={"a.":{code:"v23",between_lines:!0},av:{code:"v28",between_lines:!0},"a>":{code:"v42",between_lines:!0},"a-":{code:"v25",between_lines:!0},"a^":{code:"va",between_lines:!1},"a+":{code:"v8b",between_lines:!1},ao:{code:"v94",between_lines:!1},ah:{code:"vb9",between_lines:!1},"a@a":{code:"v43",between_lines:!1},"a@u":{code:"v5b",between_lines:!1},"a|":{code:"v75",between_lines:!1},am:{code:"v97",between_lines:!1},"a,":{code:"vb3",between_lines:!1}},m.accidentalCodes=e=>m.accidentalCodes.accidentals[e],m.accidentalCodes.accidentals={"#":{code:"v18",parenRightPaddingAdjustment:-1},"##":{code:"v7f",parenRightPaddingAdjustment:-1},b:{code:"v44",parenRightPaddingAdjustment:-2},bb:{code:"v26",parenRightPaddingAdjustment:-2},n:{code:"v4e",parenRightPaddingAdjustment:-1},"{":{code:"v9c",parenRightPaddingAdjustment:-1},"}":{code:"v84",parenRightPaddingAdjustment:-1},db:{code:"v9e",parenRightPaddingAdjustment:-1},d:{code:"vab",parenRightPaddingAdjustment:0},bbs:{code:"v90",parenRightPaddingAdjustment:-1},"++":{code:"v51",parenRightPaddingAdjustment:-1},"+":{code:"v78",parenRightPaddingAdjustment:-1},"+-":{code:"v8d",parenRightPaddingAdjustment:-1},"++-":{code:"v7a",parenRightPaddingAdjustment:-1},bs:{code:"vb7",parenRightPaddingAdjustment:-1},bss:{code:"v39",parenRightPaddingAdjustment:-1},o:{code:"vd0",parenRightPaddingAdjustment:-1},k:{code:"vd1",parenRightPaddingAdjustment:-1},ashs:{code:"vd6",parenRightPaddingAdjustment:-1},afhf:{code:"vd7",parenRightPaddingAdjustment:-1}},m.accidentalColumnsTable={1:{a:[1],b:[1]},2:{a:[1,2]},3:{a:[1,3,2],b:[1,2,1],second_on_bottom:[1,2,3]},4:{a:[1,3,4,2],b:[1,2,3,1],spaced_out_tetrachord:[1,2,1,2]},5:{a:[1,3,5,4,2],b:[1,2,4,3,1],spaced_out_pentachord:[1,2,3,2,1],very_spaced_out_pentachord:[1,2,1,2,1]},6:{a:[1,3,5,6,4,2],b:[1,2,4,5,3,1],spaced_out_hexachord:[1,3,2,1,3,2],very_spaced_out_hexachord:[1,2,1,2,1,2]}},m.ornamentCodes=e=>m.ornamentCodes.ornaments[e],m.ornamentCodes.ornaments={mordent:{code:"v1e"},mordent_inverted:{code:"v45"},turn:{code:"v72"},turn_inverted:{code:"v33"},tr:{code:"v1f"},upprall:{code:"v60"},downprall:{code:"vb4"},prallup:{code:"v6d"},pralldown:{code:"v2c"},upmordent:{code:"v29"},downmordent:{code:"v68"},lineprall:{code:"v20"},prallprall:{code:"v86"}},m.keySignature=e=>{const t=m.keySignature.keySpecs[e];if(!t)throw new i.RERR("BadKeySignature","Bad key signature spec: '".concat(e,"'"));if(!t.acc)return[];const n=m.keySignature.accidentalList(t.acc),s=[];for(let i=0;i<t.num;++i){const e=n[i];s.push({type:t.acc,line:e})}return s},m.keySignature.keySpecs={C:{acc:null,num:0},Am:{acc:null,num:0},F:{acc:"b",num:1},Dm:{acc:"b",num:1},Bb:{acc:"b",num:2},Gm:{acc:"b",num:2},Eb:{acc:"b",num:3},Cm:{acc:"b",num:3},Ab:{acc:"b",num:4},Fm:{acc:"b",num:4},Db:{acc:"b",num:5},Bbm:{acc:"b",num:5},Gb:{acc:"b",num:6},Ebm:{acc:"b",num:6},Cb:{acc:"b",num:7},Abm:{acc:"b",num:7},G:{acc:"#",num:1},Em:{acc:"#",num:1},D:{acc:"#",num:2},Bm:{acc:"#",num:2},A:{acc:"#",num:3},"F#m":{acc:"#",num:3},E:{acc:"#",num:4},"C#m":{acc:"#",num:4},B:{acc:"#",num:5},"G#m":{acc:"#",num:5},"F#":{acc:"#",num:6},"D#m":{acc:"#",num:6},"C#":{acc:"#",num:7},"A#m":{acc:"#",num:7}},m.unicode={sharp:String.fromCharCode(parseInt("266F",16)),flat:String.fromCharCode(parseInt("266D",16)),natural:String.fromCharCode(parseInt("266E",16)),triangle:String.fromCharCode(parseInt("25B3",16)),"o-with-slash":String.fromCharCode(parseInt("00F8",16)),degrees:String.fromCharCode(parseInt("00B0",16)),circle:String.fromCharCode(parseInt("25CB",16))},m.keySignature.accidentalList=e=>({b:[2,.5,2.5,1,3,1.5,3.5],"#":[0,1.5,-.5,1,2.5,.5,2]}[e]),m.parseNoteDurationString=e=>{if("string"!=typeof e)return null;const t=/(\d*\/?\d+|[a-z])(d*)([nrhms]|$)/.exec(e);if(!t)return null;const n=t[1],i=t[2].length;let s=t[3];return 0===s.length&&(s="n"),{duration:n,dots:i,type:s}},m.parseNoteStruct=e=>{const t=e.duration,n=m.parseNoteDurationString(t);if(!n)return null;let i=m.durationToTicks(n.duration);if(null==i)return null;let s=e.type;const r=[];if(s){if(!m.getGlyphProps.validTypes[s])return null}else s=n.type||"n",void 0!==e.keys&&e.keys.forEach(((e,t)=>{const n=e.split("/");n&&3===n.length&&(r[t]=n[2])}));const a=e.dots?e.dots:n.dots;if("number"!=typeof a)return null;let o=i;for(let l=0;l<a;l++){if(o<=1)return null;o/=2,i+=o}return{duration:n.duration,type:s,customTypes:r,dots:a,ticks:i}},m.sanitizeDuration=e=>{const t=m.durationAliases[e];if(void 0!==t&&(e=t),void 0===m.durationToTicks.durations[e])throw new i.RERR("BadArguments","The provided duration is not valid: ".concat(e));return e},m.durationToFraction=e=>(new r).parse(m.sanitizeDuration(e)),m.durationToNumber=e=>m.durationToFraction(e).value(),m.durationToTicks=e=>{e=m.sanitizeDuration(e);const t=m.durationToTicks.durations[e];return void 0===t?null:t},m.durationToTicks.durations={"1/2":2*m.RESOLUTION,1:m.RESOLUTION/1,2:m.RESOLUTION/2,4:m.RESOLUTION/4,8:m.RESOLUTION/8,16:m.RESOLUTION/16,32:m.RESOLUTION/32,64:m.RESOLUTION/64,128:m.RESOLUTION/128,256:m.RESOLUTION/256},m.durationAliases={w:"1",h:"2",q:"4",b:"256"},m.getGlyphProps=(e,t)=>{e=m.sanitizeDuration(e);const n=m.getGlyphProps.duration_codes[e];if(void 0===n)return null;t||(t="n");let i=n.type[t];if(void 0===i){const e=m.keyProperties.customNoteHeads[t.toUpperCase()];if(void 0===e)return null;i=s({code_head:e.code},e)}return s(s({},n.common),i)},m.getGlyphProps.validTypes={n:{name:"note"},r:{name:"rest"},h:{name:"harmonic"},m:{name:"muted"},s:{name:"slash"}},m.getGlyphProps.duration_codes={"1/2":{common:{getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"v53",e).getMetrics().width},stem:!1,stem_offset:0,flag:!1,stem_up_extension:-m.STEM_HEIGHT,stem_down_extension:-m.STEM_HEIGHT,tabnote_stem_up_extension:-m.STEM_HEIGHT,tabnote_stem_down_extension:-m.STEM_HEIGHT,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v53"},h:{code_head:"v59"},m:{code_head:"vf",stem_offset:0},r:{code_head:"v31",rest:!0,position:"B/5",dot_shiftY:.5},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},1:{common:{getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"v1d",e).getMetrics().width},stem:!1,stem_offset:0,flag:!1,stem_up_extension:-m.STEM_HEIGHT,stem_down_extension:-m.STEM_HEIGHT,tabnote_stem_up_extension:-m.STEM_HEIGHT,tabnote_stem_down_extension:-m.STEM_HEIGHT,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v1d"},h:{code_head:"v46"},m:{code_head:"v92",stem_offset:-3},r:{code_head:"v5c",rest:!0,position:"D/5",dot_shiftY:.5},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},2:{common:{getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"v81",e).getMetrics().width},stem:!0,stem_offset:0,flag:!1,stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"v81"},h:{code_head:"v2d"},m:{code_head:"v95",stem_offset:-3},r:{code_head:"vc",stem:!1,rest:!0,position:"B/4",dot_shiftY:-.5},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},4:{common:{getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"vb",e).getMetrics().width},stem:!0,stem_offset:0,flag:!1,stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e",stem_offset:-3},r:{code_head:"v7c",stem:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1.5,line_below:1.5},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},8:{common:{getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"vb",e).getMetrics().width},stem:!0,stem_offset:0,flag:!0,beam_count:1,code_flag_upstem:"v54",code_flag_downstem:"v9a",stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"va5",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1,line_below:1},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},16:{common:{beam_count:2,getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"vb",e).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v3f",code_flag_downstem:"v8f",stem_up_extension:0,stem_down_extension:0,tabnote_stem_up_extension:0,tabnote_stem_down_extension:0,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v3c",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-.5,line_above:1,line_below:2},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},32:{common:{beam_count:3,getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"vb",e).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v47",code_flag_downstem:"v2a",stem_up_extension:9,stem_down_extension:9,tabnote_stem_up_extension:8,tabnote_stem_down_extension:5,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v55",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-1.5,line_above:2,line_below:2},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},64:{common:{beam_count:4,getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"vb",e).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"va9",code_flag_downstem:"v58",stem_up_extension:13,stem_down_extension:13,tabnote_stem_up_extension:12,tabnote_stem_down_extension:9,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"v38",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:-1.5,line_above:2,line_below:3},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}},128:{common:{beam_count:5,getWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.DEFAULT_NOTATION_FONT_SCALE;return new p(this.code_head||"vb",e).getMetrics().width},stem:!0,stem_offset:0,flag:!0,code_flag_upstem:"v9b",code_flag_downstem:"v30",stem_up_extension:22,stem_down_extension:22,tabnote_stem_up_extension:21,tabnote_stem_down_extension:18,dot_shiftY:0,line_above:0,line_below:0},type:{n:{code_head:"vb"},h:{code_head:"v22"},m:{code_head:"v3e"},r:{code_head:"vaa",stem:!1,flag:!1,rest:!0,position:"B/4",dot_shiftY:1.5,line_above:3,line_below:3},s:{getWidth:()=>m.SLASH_NOTEHEAD_WIDTH,position:"B/4"}}}},m.smufl={},m.smufl.to_code_points={bracketTop:"v1b",bracketBottom:"v10",barlineTick:"v6f",segno:"v8c",coda:"v4d",gClef:"v83",cClef:"vad",fClef:"v79",unpitchedPercussionClef1:"v59","6stringTabClef":"v2f",timeSig0:"v0",timeSig1:"v1",timeSig2:"v2",timeSig3:"v3",timeSig4:"v4",timeSig5:"v5",timeSig6:"v6",timeSig7:"v7",timeSig8:"v8",timeSig9:"v9",timeSigCommon:"v41",timeSigCutCommon:"vb6",noteheadDoubleWhole:"v53",noteheadWhole:"v1d",noteheadHalf:"v81",noteheadBlack:"vb",noteheadXWhole:"v92",noteheadXHalf:"v95",noteheadXBlack:"v3e",noteheadCircleX:"v3b",noteheadTriangleUpWhole:"v49",noteheadTriangleUpHalf:"v93",noteheadTriangleUpBlack:"v40",noteheadDiamondWhole:"v46",noteheadDiamondHalf:"v2d",noteheadDiamondBlack:"v22",augmentationDot:"v23",tremolo1:"v74",flag8thUp:"v54",flag8thDown:"v9a",flag16thUp:"v3f",flag16thDown:"v8f",flag32ndUp:"v47",flag32ndDown:"v2a",flag64thUp:"va9",flag64thDown:"v58",flag128thUp:"v9b",flag128thDown:"v30",accidentalFlat:"v44",accidentalNatural:"v4e",accidentalSharp:"v18",accidentalDoubleSharp:"v7f",accidentalDoubleFlat:"v26",accidentalParensLeft:"v9c",accidentalParensRight:"v84",accidentalQuarterToneFlatStein:"vab",accidentalThreeQuarterTonesFlatZimmermann:"v9e",accidentalQuarterToneSharpStein:"v78",accidentalThreeQuarterTonesSharpStein:"v51",accidentalBuyukMucennebFlat:"v39",accidentalBakiyeFlat:"vb7",accidentalKomaSharp:"v51",accidentalKucukMucennebSharp:"v8d",accidentalKoron:"vd1",accidentalSori:"vd0",articAccentAbove:"v42",articAccentBelow:"v42",articTenutoAbove:"v25",articTenutoBelow:"v25",articStaccatoAbove:"v23",articStaccatoBelow:"v23",articStaccatissimoAbove:"v28",articMarcatoAbove:"va",fermataAbove:"v43",fermataBelow:"v5b",breathMarkComma:"v6c",breathMarkUpbow:"v8a",caesura:"v34",caesuraCurved:"v4b",restMaxima:"v59",restDoubleWhole:"v31",restWhole:"v5c",restHalf:"vc",restQuarter:"v7c",rest8th:"va5",rest16th:"v3c",rest32nd:"v55",rest64th:"v38",rest128th:"vaa",dynamicPiano:"vbf",dynamicMezzo:"v62",dynamicForte:"vba",dynamicRinforzando:"vba",dynamicSforzando:"v4a",dynamicZ:"v80",ornamentTrill:"v1f",ornamentTurn:"v72",ornamentTurnSlash:"v33",ornamentMordent:"v45",ornamentMordentInverted:"v1e",ornamentTremblement:"v86",ornamentPrecompAppoggTrill:"v20",ornamentPrecompSlideTrillDAnglebert:"v60",ornamentPrecompSlideTrillBach:"v29",ornamentPrecompTrillSuffixDandrieu:"v6d",ornamentPrecompDoubleCadenceUpperPrefix:"vb4",ornamentPrecompDoubleCadenceUpperPrefixTurn:"v68",ornamentPrecompTrillLowerSuffix:"v2c",stringsDownBow:"v94",stringsUpBow:"v75",stringsHarmonic:"vb9",pluckedSnapPizzicatoAbove:"v94",pluckedLeftHandPizzicato:"v8b",keyboardPedalPed:"v36",keyboardPedalUp:"v5d",pictChokeCymbal:"vb3",wiggleArpeggiatoUp:"va3",arrowheadBlackUp:"vc3",arrowheadBlackDown:"v52"},m.TIME4_4={num_beats:4,beat_value:4,resolution:m.RESOLUTION};class g{static get WIDTH(){return 600}static get HEIGHT(){return 400}static get CANVAS_BROWSER_SIZE_LIMIT(){return 32767}static SanitizeCanvasDims(e,t){return Math.max(e,t)>this.CANVAS_BROWSER_SIZE_LIMIT&&(i.W("Canvas dimensions exceed browser limit. Cropping to "+this.CANVAS_BROWSER_SIZE_LIMIT),e>this.CANVAS_BROWSER_SIZE_LIMIT&&(e=this.CANVAS_BROWSER_SIZE_LIMIT),t>this.CANVAS_BROWSER_SIZE_LIMIT&&(t=this.CANVAS_BROWSER_SIZE_LIMIT)),[e,t]}constructor(e){this.vexFlowCanvasContext=e,e.canvas?this.canvas=e.canvas:this.canvas={width:g.WIDTH,height:g.HEIGHT}}clear(){this.vexFlowCanvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}openGroup(){}closeGroup(){}add(){}setFont(e,t,n){return this.vexFlowCanvasContext.font=(n||"")+" "+t+"pt "+e,this}setRawFont(e){return this.vexFlowCanvasContext.font=e,this}setFillStyle(e){return this.vexFlowCanvasContext.fillStyle=e,this}setBackgroundFillStyle(e){return this.background_fillStyle=e,this}setStrokeStyle(e){return this.vexFlowCanvasContext.strokeStyle=e,this}setShadowColor(e){return this.vexFlowCanvasContext.shadowColor=e,this}setShadowBlur(e){return this.vexFlowCanvasContext.shadowBlur=e,this}setLineWidth(e){return this.vexFlowCanvasContext.lineWidth=e,this}setLineCap(e){return this.vexFlowCanvasContext.lineCap=e,this}setLineDash(e){return this.vexFlowCanvasContext.lineDash=e,this}scale(e,t){return this.vexFlowCanvasContext.scale(parseFloat(e),parseFloat(t))}resize(e,t){return[e,t]=this.SanitizeCanvasDims(parseInt(e,10),parseInt(t,10)),this.vexFlowCanvasContext.resize(e,t)}rect(e,t,n,i){return this.vexFlowCanvasContext.rect(e,t,n,i)}fillRect(e,t,n,i){return this.vexFlowCanvasContext.fillRect(e,t,n,i)}clearRect(e,t,n,i){return this.vexFlowCanvasContext.clearRect(e,t,n,i)}beginPath(){return this.vexFlowCanvasContext.beginPath()}moveTo(e,t){return this.vexFlowCanvasContext.moveTo(e,t)}lineTo(e,t){return this.vexFlowCanvasContext.lineTo(e,t)}bezierCurveTo(e,t,n,i,s,r){return this.vexFlowCanvasContext.bezierCurveTo(e,t,n,i,s,r)}quadraticCurveTo(e,t,n,i){return this.vexFlowCanvasContext.quadraticCurveTo(e,t,n,i)}arc(e,t,n,i,s,r){return this.vexFlowCanvasContext.arc(e,t,n,i,s,r)}glow(){return this.vexFlowCanvasContext.glow()}fill(){return this.vexFlowCanvasContext.fill()}stroke(){return this.vexFlowCanvasContext.stroke()}closePath(){return this.vexFlowCanvasContext.closePath()}measureText(e){return this.vexFlowCanvasContext.measureText(e)}fillText(e,t,n){return this.vexFlowCanvasContext.fillText(e,t,n)}save(){return this.vexFlowCanvasContext.save()}restore(){return this.vexFlowCanvasContext.restore()}}class b{constructor(e){this.element=e,this.paper=Raphael(e),this.path="",this.pen={x:0,y:0},this.lineWidth=1,this.state={scale:{x:1,y:1},font_family:"Arial",font_size:8,font_weight:800},this.attributes={"stroke-width":.3,fill:"black",stroke:"black",font:"10pt Arial"},this.background_attributes={"stroke-width":0,fill:"white",stroke:"white",font:"10pt Arial"},this.shadow_attributes={width:0,color:"black"},this.state_stack=[]}openGroup(){}closeGroup(){}add(){}setFont(e,t,n){return this.state.font_family=e,this.state.font_size=t,this.state.font_weight=n,this.attributes.font=(this.state.font_weight||"")+" "+this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this}setRawFont(e){return this.attributes.font=e,this}setFillStyle(e){return this.attributes.fill=e,this}setBackgroundFillStyle(e){return this.background_attributes.fill=e,this.background_attributes.stroke=e,this}setStrokeStyle(e){return this.attributes.stroke=e,this}setShadowColor(e){return this.shadow_attributes.color=e,this}setShadowBlur(e){return this.shadow_attributes.width=e,this}setLineWidth(e){this.attributes["stroke-width"]=e,this.lineWidth=e}setLineDash(){return this}setLineCap(){return this}scale(e,t){return this.state.scale={x:e,y:t},this.attributes.transform="S"+e+","+t+",0,0",this.attributes.scale=e+","+t+",0,0",this.attributes.font=this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this.background_attributes.transform="S"+e+","+t+",0,0",this.background_attributes.font=this.state.font_size*this.state.scale.x+"pt "+this.state.font_family,this}clear(){this.paper.clear()}resize(e,t){return this.element.style.width=e,this.paper.setSize(e,t),this}setViewBox(e){this.paper.canvas.setAttribute("viewBox",e)}rect(e,t,n,i){return i<0&&(t+=i,i=-i),this.paper.rect(e,t,n-.5,i-.5).attr(this.attributes).attr("fill","none").attr("stroke-width",this.lineWidth),this}fillRect(e,t,n,i){return i<0&&(t+=i,i=-i),this.paper.rect(e,t,n-.5,i-.5).attr(this.attributes),this}clearRect(e,t,n,i){return i<0&&(t+=i,i=-i),this.paper.rect(e,t,n-.5,i-.5).attr(this.background_attributes),this}beginPath(){return this.path="",this.pen.x=0,this.pen.y=0,this}moveTo(e,t){return this.path+="M"+e+","+t,this.pen.x=e,this.pen.y=t,this}lineTo(e,t){return this.path+="L"+e+","+t,this.pen.x=e,this.pen.y=t,this}bezierCurveTo(e,t,n,i,s,r){return this.path+="C"+e+","+t+","+n+","+i+","+s+","+r,this.pen.x=s,this.pen.y=r,this}quadraticCurveTo(e,t,n,i){return this.path+="Q"+e+","+t+","+n+","+i,this.pen.x=n,this.pen.y=i,this}arc(e,t,n,i,s,r){function a(e){for(;e<0;)e+=2*Math.PI;for(;e>2*Math.PI;)e-=2*Math.PI;return e}if((i=a(i))>(s=a(s))){const e=i;i=s,s=e,r=!r}const o=s-i;return o>Math.PI?(this.arcHelper(e,t,n,i,i+o/2,r),this.arcHelper(e,t,n,i+o/2,s,r)):this.arcHelper(e,t,n,i,s,r),this}arcHelper(e,t,n,i,s,r){const a=e+n*Math.cos(i),o=t+n*Math.sin(i),l=e+n*Math.cos(s),c=t+n*Math.sin(s);let h=0,u=0;r?(u=1,s-i<Math.PI&&(h=1)):s-i>Math.PI&&(h=1),this.path+="M"+a+","+o+",A"+n+","+n+",0,"+h+","+u+","+l+","+c+"M"+this.pen.x+","+this.pen.y}glow(){const e=this.paper.set();if(this.shadow_attributes.width>0){const t=this.shadow_attributes,n=t.width/2;for(let i=1;i<=n;i++)e.push(this.paper.path(this.path).attr({stroke:t.color,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/n*i).toFixed(3),opacity:+((t.opacity||.3)/n).toFixed(3),transform:this.attributes.transform,scale:this.attributes.scale}))}return e}fill(){const e=this.paper.path(this.path).attr(this.attributes).attr("stroke-width",0);return this.glow(e),this}stroke(){const e=this.lineWidth*(this.state.scale.x+this.state.scale.y)/2,t=this.paper.path(this.path).attr(this.attributes).attr("fill","none").attr("stroke-width",e);return this.glow(t),this}closePath(){return this.path+="Z",this}measureText(e){const t=this.paper.text(0,0,e).attr(this.attributes).attr("fill","none").attr("stroke","none"),n=t.getBBox();return t.remove(),{width:n.width,height:n.height}}fillText(e,t,n){return this.paper.text(t+this.measureText(e).width/2,n-this.state.font_size/(2.25*this.state.scale.y),e).attr(this.attributes),this}save(){return this.state_stack.push({state:{font_family:this.state.font_family},attributes:{font:this.attributes.font,fill:this.attributes.fill,stroke:this.attributes.stroke,"stroke-width":this.attributes["stroke-width"]},shadow_attributes:{width:this.shadow_attributes.width,color:this.shadow_attributes.color}}),this}restore(){const e=this.state_stack.pop();return this.state.font_family=e.state.font_family,this.attributes.font=e.attributes.font,this.attributes.fill=e.attributes.fill,this.attributes.stroke=e.attributes.stroke,this.attributes["stroke-width"]=e.attributes["stroke-width"],this.shadow_attributes.width=e.shadow_attributes.width,this.shadow_attributes.color=e.shadow_attributes.color,this}}const v={path:{x:!0,y:!0,width:!0,height:!0},rect:{},text:{width:!0,height:!0}};{const e={"font-family":!0,"font-weight":!0,"font-style":!0,"font-size":!0};i.Merge(v.rect,e),i.Merge(v.path,e)}class y{constructor(e){this.element=e,this.svgNS="http://www.w3.org/2000/svg";const t=this.create("svg");this.element.appendChild(t),this.svg=t,this.groups=[this.svg],this.parent=this.svg,this.path="",this.pen={x:NaN,y:NaN},this.lineWidth=1,this.state={scale:{x:1,y:1},"font-family":"Arial","font-size":"8pt","font-weight":"normal"},this.attributes={"stroke-width":.3,fill:"black",stroke:"black","stroke-dasharray":"none","font-family":"Arial","font-size":"10pt","font-weight":"normal","font-style":"normal"},this.background_attributes={"stroke-width":0,fill:"white",stroke:"white","stroke-dasharray":"none","font-family":"Arial","font-size":"10pt","font-weight":"normal","font-style":"normal"},this.shadow_attributes={width:0,color:"black"},this.state_stack=[],this.iePolyfill()}create(e){return document.createElementNS(this.svgNS,e)}openGroup(e,t,n){const s=this.create("g");return this.groups.push(s),this.parent.appendChild(s),this.parent=s,e&&s.setAttribute("class",i.Prefix(e)),t&&s.setAttribute("id",i.Prefix(t)),n&&n.pointerBBox&&s.setAttribute("pointer-events","bounding-box"),s}closeGroup(){this.groups.pop(),this.parent=this.groups[this.groups.length-1]}add(e){this.parent.appendChild(e)}iePolyfill(){"undefined"!=typeof navigator&&(this.ie=/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/rv:11\.0/i.test(navigator.userAgent)||/Trident/i.test(navigator.userAgent))}setFont(e,t,n){let s=!1,r=!1,a="normal";"string"==typeof n&&(-1!==n.indexOf("italic")&&(n=n.replace(/italic/g,""),r=!0),-1!==n.indexOf("bold")&&(n=n.replace(/bold/g,""),s=!0),n=n.replace(/ /g,"")),a=r?"italic":a;const o={"font-family":e,"font-size":t+"pt","font-weight":n=void 0===(n=s?"bold":n)||""===n?"normal":n,"font-style":a};return this.fontSize=Number(t),i.Merge(this.attributes,o),i.Merge(this.state,o),this}setRawFont(e){const t=(e=e.trim()).split(" ");return this.attributes["font-family"]=t[1],this.state["font-family"]=t[1],this.attributes["font-size"]=t[0],this.state["font-size"]=t[0],this.fontSize=Number(t[0].match(/\d+/)),this}setFillStyle(e){return this.attributes.fill=e,this}setBackgroundFillStyle(e){return this.background_attributes.fill=e,this.background_attributes.stroke=e,this}setStrokeStyle(e){return this.attributes.stroke=e,this}setShadowColor(e){return this.shadow_attributes.color=e,this}setShadowBlur(e){return this.shadow_attributes.width=e,this}setLineWidth(e){this.attributes["stroke-width"]=e,this.lineWidth=e}setLineDash(e){if("[object Array]"===Object.prototype.toString.call(e))return e=e.join(", "),this.attributes["stroke-dasharray"]=e,this;throw new i.RERR("ArgumentError","lineDash must be an array of integers.")}setLineCap(e){return this.attributes["stroke-linecap"]=e,this}resize(e,t){this.width=e,this.height=t,this.element.style.width=e;const n={width:e,height:t};return this.applyAttributes(this.svg,n),this.scale(this.state.scale.x,this.state.scale.y),this}scale(e,t){this.state.scale={x:e,y:t};const n=this.width/e,i=this.height/t;return this.setViewBox(0,0,n,i),this}setViewBox(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){const[e]=t;this.svg.setAttribute("viewBox",e)}else{const[e,n,i,s]=t,r=e+" "+n+" "+i+" "+s;this.svg.setAttribute("viewBox",r)}}applyAttributes(e,t){const n=v[e.nodeName];return Object.keys(t).forEach((i=>{n&&n[i]||e.setAttributeNS(null,i,t[i])})),e}clear(){for(;this.svg.lastChild;)this.svg.removeChild(this.svg.lastChild);this.scale(this.state.scale.x,this.state.scale.y)}rect(e,t,n,s,r){s<0&&(t+=s,s*=-1);const a=this.create("rect");return void 0===r&&(r={fill:"none","stroke-width":this.lineWidth,stroke:this.attributes.stroke}),i.Merge(r,{x:e,y:t,width:n,height:s}),this.applyAttributes(a,r),this.add(a),this}fillRect(e,t,n,i){return i<0&&(t+=i,i*=-1),this.rect(e,t,n,i,this.attributes),this}clearRect(e,t,n,i){return this.rect(e,t,n,i,this.background_attributes),this}beginPath(){return this.path="",this.pen.x=NaN,this.pen.y=NaN,this}moveTo(e,t){return this.path+="M"+e+" "+t,this.pen.x=e,this.pen.y=t,this}lineTo(e,t){return this.path+="L"+e+" "+t,this.pen.x=e,this.pen.y=t,this}bezierCurveTo(e,t,n,i,s,r){return this.path+="C"+e+" "+t+","+n+" "+i+","+s+" "+r,this.pen.x=s,this.pen.y=r,this}quadraticCurveTo(e,t,n,i){return this.path+="Q"+e+" "+t+","+n+" "+i,this.pen.x=n,this.pen.y=i,this}arc(e,t,n,i,s,r){function a(e){for(;e<0;)e+=2*Math.PI;for(;e>2*Math.PI;)e-=2*Math.PI;return e}if((i=a(i))>(s=a(s))){const e=i;i=s,s=e,r=!r}const o=s-i;return o>Math.PI?(this.arcHelper(e,t,n,i,i+o/2,r),this.arcHelper(e,t,n,i+o/2,s,r)):this.arcHelper(e,t,n,i,s,r),this}arcHelper(e,t,n,i,s,r){const a=e+n*Math.cos(i),o=t+n*Math.sin(i),l=e+n*Math.cos(s),c=t+n*Math.sin(s);let h=0,u=0;r?(u=1,s-i<Math.PI&&(h=1)):s-i>Math.PI&&(h=1),this.path+="M"+a+" "+o+" A"+n+" "+n+" 0 "+h+" "+u+" "+l+" "+c,isNaN(this.pen.x)||isNaN(this.pen.y)||(this.peth+="M"+this.pen.x+" "+this.pen.y)}closePath(){return this.path+="Z",this}glow(){if(this.shadow_attributes.width>0){const e=this.shadow_attributes,t=e.width/2;for(let n=1;n<=t;n++){const i={stroke:e.color,"stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(.4*e.width/t*n).toFixed(3),opacity:+((e.opacity||.3)/t).toFixed(3)},s=this.create("path");i.d=this.path,this.applyAttributes(s,i),this.add(s)}}return this}fill(e){this.glow();const t=this.create("path");let n=e;return void 0===e?(i.Merge(e={},this.attributes),e.stroke="none",n=e):(n=e,i.Merge(n,this.attributes),e.class&&(n.class=e.class),e.id&&(n.id=e.id)),e.d=this.path,this.applyAttributes(t,e),this.add(t),this}stroke(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;this.glow();const t=this.create("path"),n={};return i.Merge(n,this.attributes),e&&i.Merge(n,e),n.fill="none",n["stroke-width"]=this.lineWidth,n.d=this.path,this.applyAttributes(t,n),this.add(t),this}measureText(e){const t=this.create("text");if("function"!=typeof t.getBBox)return{x:0,y:0,width:0,height:0};t.textContent=e,this.applyAttributes(t,this.attributes),this.svg.appendChild(t);let n=t.getBBox();return this.ie&&""!==e&&"italic"===this.attributes["font-style"]&&(n=this.ieMeasureTextFix(n,e)),this.svg.removeChild(t),n}ieMeasureTextFix(e){const t=1.196*Number(this.fontSize)+1.9598,n=e.width-t,i=e.height-1.5;return{x:e.x,y:e.y,width:n,height:i}}fillText(e,t,n){if(!e||e.length<=0)return;const s={};i.Merge(s,this.attributes),s.stroke="none",s.x=t,s.y=n;const r=this.create("text");r.textContent=e,this.applyAttributes(r,s),this.add(r)}save(){return this.state_stack.push({state:{"font-family":this.state["font-family"],"font-weight":this.state["font-weight"],"font-style":this.state["font-style"],"font-size":this.state["font-size"],scale:this.state.scale},attributes:{"font-family":this.attributes["font-family"],"font-weight":this.attributes["font-weight"],"font-style":this.attributes["font-style"],"font-size":this.attributes["font-size"],fill:this.attributes.fill,stroke:this.attributes.stroke,"stroke-width":this.attributes["stroke-width"],"stroke-dasharray":this.attributes["stroke-dasharray"]},shadow_attributes:{width:this.shadow_attributes.width,color:this.shadow_attributes.color},lineWidth:this.lineWidth}),this}restore(){const e=this.state_stack.pop();return this.state["font-family"]=e.state["font-family"],this.state["font-weight"]=e.state["font-weight"],this.state["font-style"]=e.state["font-style"],this.state["font-size"]=e.state["font-size"],this.state.scale=e.state.scale,this.attributes["font-family"]=e.attributes["font-family"],this.attributes["font-weight"]=e.attributes["font-weight"],this.attributes["font-style"]=e.attributes["font-style"],this.attributes["font-size"]=e.attributes["font-size"],this.attributes.fill=e.attributes.fill,this.attributes.stroke=e.attributes.stroke,this.attributes["stroke-width"]=e.attributes["stroke-width"],this.attributes["stroke-dasharray"]=e.attributes["stroke-dasharray"],this.shadow_attributes.width=e.shadow_attributes.width,this.shadow_attributes.color=e.shadow_attributes.color,this.lineWidth=e.lineWidth,this}}let x=null;class S{static get Backends(){return{CANVAS:1,RAPHAEL:2,SVG:3,VML:4}}static get LineEndType(){return{NONE:1,UP:2,DOWN:3}}static get USE_CANVAS_PROXY(){return!1}static get lastContext(){return x}static set lastContext(e){x=e}static buildContext(e,t,n,i,s){const r=new S(e,t);n&&i&&r.resize(n,i),s||(s="#FFF");const a=r.getContext();return a.setBackgroundFillStyle(s),S.lastContext=a,a}static getCanvasContext(e,t,n,i){return S.buildContext(e,S.Backends.CANVAS,t,n,i)}static getRaphaelContext(e,t,n,i){return S.buildContext(e,S.Backends.RAPHAEL,t,n,i)}static getSVGContext(e,t,n,i){return S.buildContext(e,S.Backends.SVG,t,n,i)}static bolsterCanvasContext(e){return S.USE_CANVAS_PROXY?new g(e):(e.vexFlowCanvasContext=e,["clear","setFont","setRawFont","setFillStyle","setBackgroundFillStyle","setStrokeStyle","setShadowColor","setShadowBlur","setLineWidth","setLineCap","setLineDash","openGroup","closeGroup","getGroup"].forEach((t=>{e[t]=e[t]||g.prototype[t]})),e)}static drawDashedLine(e,t,n,i,s,r){e.beginPath();const a=i-t,o=s-n,l=Math.atan2(o,a);let c=t,h=n;e.moveTo(t,n);let u=0,d=!0;for(;!(a<0?c<=i:c>=i)||!(o<0?h<=s:h>=s);){const t=r[u++%r.length],n=c+Math.cos(l)*t;c=a<0?Math.max(i,n):Math.min(i,n);const f=h+Math.sin(l)*t;h=o<0?Math.max(s,f):Math.min(s,f),d?e.lineTo(c,h):e.moveTo(c,h),d=!d}e.closePath(),e.stroke()}constructor(e,t){if(this.elementId=e,!this.elementId)throw new i.RERR("BadArgument","Invalid id for renderer.");if(this.element=document.getElementById(e),this.element||(this.element=e),this.ctx=null,this.paper=null,this.backend=t,this.backend===S.Backends.CANVAS){if(!this.element.getContext)throw new i.RERR("BadElement","Can't get canvas context from element: ".concat(e));this.ctx=S.bolsterCanvasContext(this.element.getContext("2d",{willReadFrequently:!0}))}else if(this.backend===S.Backends.RAPHAEL)this.ctx=new b(this.element);else{if(this.backend!==S.Backends.SVG)throw new i.RERR("InvalidBackend","No support for backend: ".concat(this.backend));this.ctx=new y(this.element)}}resize(e,t){if(this.backend===S.Backends.CANVAS){if(!this.element.getContext)throw new i.RERR("BadElement","Can't get canvas context from element: ".concat(this.elementId));[e,t]=g.SanitizeCanvasDims(e,t);const n=window.devicePixelRatio||1;this.element.width=e*n,this.element.height=t*n,this.element.style.width=e+"px",this.element.style.height=t+"px",this.ctx=S.bolsterCanvasContext(this.element.getContext("2d",{willReadFrequently:!0})),this.ctx.scale(n,n)}else this.ctx.resize(e,t);return this}getContext(){return this.ctx}}class w extends c{static get CATEGORY(){return"stem"}static get UP(){return 1}static get DOWN(){return-1}static get WIDTH(){return m.STEM_WIDTH}static get HEIGHT(){return m.STEM_HEIGHT}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.setAttribute("type","Stem"),this.x_begin=e.x_begin||0,this.x_end=e.x_end||0,this.y_top=e.y_top||0,this.y_bottom=e.y_bottom||0,this.stem_extension=e.stem_extension||0,this.stem_direction=e.stem_direction||0,this.hide=e.hide||!1,this.isStemlet=e.isStemlet||!1,this.stemletHeight=e.stemletHeight||0,this.renderHeightAdjustment=0,this.setOptions(e)}setOptions(e){this.stem_up_y_offset=e.stem_up_y_offset||0,this.stem_down_y_offset=e.stem_down_y_offset||0}setNoteHeadXBounds(e,t){return this.x_begin=e,this.x_end=t,this}setDirection(e){this.stem_direction=e}setExtension(e){this.stem_extension=e}getExtension(){return this.stem_extension}setYBounds(e,t){this.y_top=e,this.y_bottom=t}getCategory(){return w.CATEGORY}getHeight(){const e=this.stem_direction===w.UP?this.stem_up_y_offset:this.stem_down_y_offset;return(this.y_bottom-this.y_top)*this.stem_direction+(w.HEIGHT-e+this.stem_extension)*this.stem_direction}getBoundingBox(){throw new i.RERR("NotImplemented","getBoundingBox() not implemented.")}getExtents(){const e=this.stem_direction===w.UP,t=[this.y_top,this.y_bottom],n=w.HEIGHT+this.stem_extension,i=(e?Math.min:Math.max)(...t),s=(e?Math.max:Math.min)(...t);return{topY:i+n*-this.stem_direction,baseY:s}}setVisibility(e){return this.hide=!e,this}setStemlet(e,t){return this.isStemlet=e,this.stemletHeight=t,this}draw(){if(this.setRendered(),this.hide)return;const e=this.checkContext();let t,n;const s=this.stem_direction;s===w.DOWN?(t=this.x_begin,n=this.y_top+this.stem_down_y_offset):(t=this.x_end,n=this.y_bottom-this.stem_up_y_offset);const r=this.getHeight();!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];w.DEBUG&&i.L("Vex.Flow.Stem",t)}("Rendering stem - ","Top Y: ",this.y_top,"Bottom Y: ",this.y_bottom);const a=this.isStemlet?r-this.stemletHeight*this.stem_direction:0;if(e.save(),this.applyStyle(e),e.beginPath(),e.setLineWidth(w.WIDTH),e.moveTo(t,n-a),e.lineTo(t,n-r-this.renderHeightAdjustment*s),e.svg){const t={class:i.Prefix("stem")};this.id&&(t.id=this.id),e.stroke(t)}else e.stroke();this.restoreStyle(e),e.restore()}}class E extends c{static get LOCATION_TOP(){return 1}static get LOCATION_BOTTOM(){return-1}static get NESTING_OFFSET(){return 15}constructor(e,t){if(super(),this.setAttribute("type","Tuplet"),!e||!e.length)throw new i.RuntimeError("BadArguments","No notes provided for tuplet.");this.options=i.Merge({},t),this.notes=e,this.num_notes="num_notes"in this.options?this.options.num_notes:e.length,this.options.beats_occupied&&this.beatsOccupiedDeprecationWarning(),this.notes_occupied=this.options.notes_occupied||this.options.beats_occupied||2,"bracketed"in this.options?this.bracketed=this.options.bracketed:this.bracketed=e.some((e=>null===e.beam)),this.ratioed="ratioed"in this.options?this.options.ratioed:Math.abs(this.notes_occupied-this.num_notes)>1,this.point=28,this.y_pos=16,this.x_pos=100,this.width=200,this.location=this.options.location||E.LOCATION_TOP,de.AlignRestsToNotes(e,!0,!0),this.resolveGlyphs(),this.attach()}attach(){for(let e=0;e<this.notes.length;e++)this.notes[e].setTuplet(this)}detach(){for(let e=0;e<this.notes.length;e++)this.notes[e].resetTuplet(this)}setBracketed(e){return this.bracketed=!!e,this}setRatioed(e){return this.ratioed=!!e,this}setTupletLocation(e){if(e){if(e!==E.LOCATION_TOP&&e!==E.LOCATION_BOTTOM)throw new i.RERR("BadArgument","Invalid tuplet location: "+e)}else e=E.LOCATION_TOP;return this.location=e,this}getNotes(){return this.notes}getNoteCount(){return this.num_notes}beatsOccupiedDeprecationWarning(){const e=["beats_occupied has been deprecated as an ","option for tuplets. Please use notes_occupied ","instead. Calls to getBeatsOccupied and ","setBeatsOccupied should now be routed to ","getNotesOccupied and setNotesOccupied instead"].join("");console&&console.warn?console.warn(e):console&&console.log(e)}getBeatsOccupied(){return this.beatsOccupiedDeprecationWarning(),this.getNotesOccupied()}setBeatsOccupied(e){return this.beatsOccupiedDeprecationWarning(),this.setNotesOccupied(e)}getNotesOccupied(){return this.notes_occupied}setNotesOccupied(e){this.detach(),this.notes_occupied=e,this.resolveGlyphs(),this.attach()}resolveGlyphs(){this.numerator_glyphs=[];let e=this.num_notes;for(;e>=1;)this.numerator_glyphs.unshift(new p("v"+e%10,this.point)),e=parseInt(e/10,10);for(this.denom_glyphs=[],e=this.notes_occupied;e>=1;)this.denom_glyphs.unshift(new p("v"+e%10,this.point)),e=parseInt(e/10,10)}getNestedTupletCount(){const e=this.location,t=this.notes[0];let n=s(t,e),i=s(t,e);function s(e,t){return e.tupletStack.filter((e=>e.location===t)).length}return this.notes.forEach((t=>{const r=s(t,e);n=r>n?r:n,i=r<i?r:i})),n-i}getYPosition(){const e=this.getNestedTupletCount()*E.NESTING_OFFSET*-this.location,t=this.options.y_offset||0,n=this.notes[0];let i;if(this.location===E.LOCATION_TOP){i=n.getStave().getYForLine(0)-15;for(let e=0;e<this.notes.length;++e){const t=this.notes[e].getStemDirection()===w.UP?this.notes[e].getStemExtents().topY-10:this.notes[e].getStemExtents().baseY-20;t<i&&(i=t)}}else{i=n.getStave().getYForLine(4)+20;for(let e=0;e<this.notes.length;++e){const t=this.notes[e].getStemDirection()===w.UP?this.notes[e].getStemExtents().baseY+20:this.notes[e].getStemExtents().topY+10;t>i&&(i=t)}}return i+e+t}draw(){this.checkContext(),this.setRendered();const e=this.notes[0],t=this.notes[this.notes.length-1];this.bracketed?(this.x_pos=e.getTieLeftX()-5,this.width=t.getTieRightX()-this.x_pos+5):(this.x_pos=e.getStemX(),this.width=t.getStemX()-this.x_pos),this.y_pos=this.getYPosition();const n=(e,t)=>e+t.getMetrics().width;let i=this.numerator_glyphs.reduce(n,0);this.ratioed&&(i=this.denom_glyphs.reduce(n,i),i+=.32*this.point);const s=this.x_pos+this.width/2-i/2;if(this.bracketed){const e=this.width/2-i/2-5;e>0&&(this.context.fillRect(this.x_pos,this.y_pos,e,1),this.context.fillRect(this.x_pos+this.width/2+i/2+5,this.y_pos,e,1),this.context.fillRect(this.x_pos,this.y_pos+(this.location===E.LOCATION_BOTTOM),1,10*this.location),this.context.fillRect(this.x_pos+this.width,this.y_pos+(this.location===E.LOCATION_BOTTOM),1,10*this.location))}let r=0;if(!1!==this.RenderTupletNumber&&this.numerator_glyphs.forEach((e=>{e.render(this.context,s+r,this.y_pos+this.point/3-2),r+=e.getMetrics().width})),this.ratioed){const e=s+r+.16*this.point,t=.06*this.point;this.context.beginPath(),this.context.arc(e,this.y_pos-.08*this.point,t,0,2*Math.PI,!0),this.context.closePath(),this.context.fill(),this.context.beginPath(),this.context.arc(e,this.y_pos+.12*this.point,t,0,2*Math.PI,!0),this.context.closePath(),this.context.fill(),r+=.32*this.point,this.denom_glyphs.forEach((e=>{e.render(this.context,s+r,this.y_pos+this.point/3-2),r+=e.getMetrics().width}))}}}function _(e){let t=0;return e.forEach((e=>{e.keyProps&&e.keyProps.forEach((e=>{t+=e.line-3}))})),t>=0?w.DOWN:w.UP}const T="L",M="B";class C extends c{static getDefaultBeamGroups(e){e&&"c"!==e||(e="4/4");const t={"1/2":["1/2"],"2/2":["1/2"],"3/2":["1/2"],"4/2":["1/2"],"1/4":["1/4"],"2/4":["1/4"],"3/4":["1/4"],"4/4":["1/4"],"1/8":["1/8"],"2/8":["2/8"],"3/8":["3/8"],"4/8":["2/8"],"1/16":["1/16"],"2/16":["2/16"],"3/16":["3/16"],"4/16":["2/16"]}[e];if(void 0!==t)return t.map((e=>(new r).parse(e)));{const t=parseInt(e.split("/")[0],10),n=parseInt(e.split("/")[1],10);if(t%3==0)return[new r(3,n)];if(n>4)return[new r(2,n)];if(n<=4)return[new r(1,n)]}return[new r(1,4)]}static applyAndGetBeams(e,t,n){return C.generateBeams(e.getTickables(),{groups:n,stem_direction:t})}static generateBeams(e,t){t||(t={}),t.groups&&t.groups.length||(t.groups=[new r(2,8)]);const n=t.groups.map((e=>{if(!e.multiply)throw new i.RuntimeError("InvalidBeamGroups","The beam groups must be an array of Vex.Flow.Fractions");return e.clone().multiply(m.RESOLUTION,1)})),s=e;let a=0,o=[],l=[];function c(){n.length-1>a?a+=1:a=0}!function(){let e=[];s.forEach((t=>{if(e=[],t.shouldIgnoreTicks())return o.push(l),void(l=e);l.push(t);const i=n[a].clone(),s=l.reduce(((e,t)=>t.getTicks().clone().add(e)),new r(0,1)),h=m.durationToNumber(t.duration)<8;h&&t.tuplet&&(i.numerator*=2),s.greaterThan(i)?(h||e.push(l.pop()),o.push(l),l=e,c()):s.equals(i)&&(o.push(l),l=e,c())})),l.length>0&&o.push(l)}(),function(){const e=[];o.forEach((n=>{let i=[];n.forEach(((n,s,r)=>{const a=0===s||s===r.length-1,o=r[s-1],l=!t.beam_rests&&n.isRest(),c=t.beam_rests&&t.beam_middle_only&&n.isRest()&&a;let h=!1;if(t.maintain_stem_directions&&o&&!n.isRest()&&!o.isRest()){const e=o.getStemDirection();h=n.getStemDirection()!==e}const u=parseInt(n.duration,10)<8;l||c||h||u?(i.length>0&&e.push(i),i=h?[n]:[]):i.push(n)})),i.length>0&&e.push(i)})),o=e}(),o.forEach((e=>{let n;if(t.maintain_stem_directions){const t=function(e){for(let t=0;t<e.length;t++){const n=e[t];if(!n.isRest())return n}return!1}(e);n=t?t.getStemDirection():w.UP}else n=t.stem_direction?t.stem_direction:_(e);!function(e,t){e.forEach((e=>{e.setStemDirection(t)}))}(e,n)}));const h=o.filter((e=>{if(e.length>1){let t=!0;return e.forEach((e=>{e.getIntrinsicTicks()>=m.durationToTicks("4")&&(t=!1)})),t}return!1})),u=function(){const e=[];return o.forEach((t=>{let n=null;t.forEach((t=>{t.tuplet&&n!==t.tuplet&&(n=t.tuplet,e.push(n))}))})),e}(),d=[];return h.forEach((e=>{const n=new C(e);t.show_stemlets&&(n.render_options.show_stemlets=!0),t.secondary_breaks&&(n.render_options.secondary_break_ticks=m.durationToTicks(t.secondary_breaks)),!0===t.flat_beams&&(n.render_options.flat_beams=!0,n.render_options.flat_beam_offset=t.flat_beam_offset),d.push(n)})),u.forEach((e=>{const t=e.notes[0].stem_direction===w.DOWN?E.LOCATION_BOTTOM:E.LOCATION_TOP;e.setTupletLocation(t);let n=!1;for(let i=0;i<e.notes.length;i++)if(null===e.notes[i].beam){n=!0;break}e.setBracketed(n)})),d}constructor(e,t){if(super(),this.setAttribute("type","Beam"),!e||e==[])throw new i.RuntimeError("BadArguments","No notes provided for beam.");if(1===e.length)throw new i.RuntimeError("BadArguments","Too few notes for beam.");if(this.ticks=e[0].getIntrinsicTicks(),this.ticks>=m.durationToTicks("4"))throw new i.RuntimeError("BadArguments","Beams can only be applied to notes shorter than a quarter note.");let n,s;for(this.stem_direction=w.UP,n=0;n<e.length;++n)if(s=e[n],s.hasStem()){this.stem_direction=s.getStemDirection();break}let r=this.stem_direction;for(t&&"stavenotes"===e[0].getCategory()?r=_(e):t&&"tabnotes"===e[0].getCategory()&&(r=e.reduce(((e,t)=>e+t.stem_direction),0)>-1?w.UP:w.DOWN),n=0;n<e.length;++n)s=e[n],t&&(s.setStemDirection(r),this.stem_direction=r),s.setBeam(this);this.postFormatted=!1,this.notes=e,this.beam_count=this.getBeamCount(),this.break_on_indices=[],this.render_options={beam_width:5,max_slope:.25,min_slope:-.25,slope_iterations:20,slope_cost:100,show_stemlets:!1,stemlet_extension:7,partial_beam_length:10,flat_beams:!1,min_flat_beam_offset:15}}getNotes(){return this.notes}getBeamCount(){return this.notes.map((e=>e.getGlyph().beam_count)).reduce(((e,t)=>t>e?t:e))}breakSecondaryAt(e){return this.break_on_indices=e,this}getSlopeY(e,t,n,i){return n+(e-t)*i}calculateSlope(){const{notes:e,stem_direction:t,render_options:{max_slope:n,min_slope:i,slope_iterations:s,slope_cost:r}}=this,a=e[0],o=((e,t)=>{const n=e.getStemExtents().topY,i=e.getStemX();return(t.getStemExtents().topY-n)/(t.getStemX()-i)})(a,e[e.length-1]),l=(n-i)/s;let c=Number.MAX_VALUE,h=0,u=0;for(let d=i;d<=n;d+=l){let n=0,i=0;for(let r=1;r<e.length;++r){const s=e[r],o=this.getSlopeY(s.getStemX(),a.getStemX(),a.getStemExtents().topY,d)+i,l=s.getStemExtents().topY;if(l*t<o*t){const e=Math.abs(l-o);i+=e*-t,n+=e*r}else n+=(l-o)*t}const s=o/2,l=r*Math.abs(s-d)+Math.abs(n);l<c&&(c=l,h=d,u=i)}this.slope=h,this.y_shift=u}calculateFlatSlope(){const{notes:e,stem_direction:t,render_options:{beam_width:n,min_flat_beam_offset:i,flat_beam_offset:s}}=this;let r=0,a=0,o=0,l=0;for(let d=0;d<e.length;d++){const n=e[d],i=n.getStemExtents().topY;r+=i,t===w.DOWN&&l<i?(l=i,a=Math.max(...n.getYs()),o=n.getBeamCount()):t===w.UP&&(0===l||l>i)&&(l=i,a=Math.min(...n.getYs()),o=n.getBeamCount())}let c=r/e.length;const h=i+o*(1.5*n),u=a+h*-t;t===w.DOWN&&c<u?c=a+h:t===w.UP&&c>u&&(c=a-h),s+this.render_options.flat_beam_offset_per_beam>0?(t===w.DOWN&&c>s&&!this.render_options.flat_beams||t===w.UP&&c<s&&!this.render_options.flat_beams)&&(this.render_options.flat_beam_offset=c):this.render_options.flat_beam_offset=c,this.slope=0,this.y_shift=0}getBeamYToDraw(){let e=this.notes[0].getStemExtents().topY;if(this.render_options.flat_beams&&this.render_options.flat_beam_offset+this.render_options.flat_beam_offset_per_beam>0){let t=this.render_options.flat_beam_offset;this.render_options.flat_beam_offset_per_beam&&(t+=this.render_options.flat_beam_offset_per_beam*this.getBeamCount());let n=this.notes[0].note_heads[0].y;const i=this.stem_direction>0?Math.min:Math.max;for(const e of this.notes)for(const t of e.note_heads)n=i(n,t.y);e=n+t*-this.stem_direction}return e}applyStemExtensions(){const{notes:e,slope:t,y_shift:n,stem_direction:i,beam_count:s,render_options:{show_stemlets:r,stemlet_extension:a,beam_width:o}}=this,l=e[0],c=this.getBeamYToDraw(),h=l.getStemX();for(let u=0;u<e.length;++u){const l=e[u],d=l.getStemX(),{topY:f}=l.getStemExtents(),p=this.getSlopeY(d,h,c,t)+n,m=l.getStem().getExtension(),g=i===w.UP?f-p:p-f;if(l.stem.setExtension(m+g),l.stem.renderHeightAdjustment=-w.WIDTH/2,l.isRest()&&r){const e=(s-1)*o*1.5+o;l.stem.setVisibility(!0).setStemlet(!0,e+a)}}}lookupBeamDirection(e,t,n,i){if("4"===e)return T;const s=""+m.durationToNumber(e)/2,r=t<m.durationToTicks(s),a=i<m.durationToTicks(s),o=n<m.durationToTicks(s);return r&&a&&o?M:r&&!a&&o?T:!r&&a&&o?"R":this.lookupBeamDirection(s,t,n,i)}getBeamLines(e){const t=m.durationToTicks(e),n=[];let i=!1,s=null;const r=this.render_options.partial_beam_length;let a=!1,o=0;for(let c=0;c<this.notes.length;++c){const l=this.notes[c];o+=l.ticks.value();let h=!1;parseInt(e,10)>=8&&(h=-1!==this.break_on_indices.indexOf(c),this.render_options.secondary_break_ticks&&o>=this.render_options.secondary_break_ticks&&(o=0,h=!0));const u=l.getIntrinsicTicks()<t,d=l.getStemX()-w.WIDTH/2,f=this.notes[c-1],p=this.notes[c+1],m=p&&p.getIntrinsicTicks()<t,g=f&&f.getIntrinsicTicks()<t,b=f&&p&&u&&!g&&!m;if(u)if(i)s=n[n.length-1],s.end=d,h&&(i=!1,p&&!m&&null===s.end&&(s.end=s.start-r));else{if(s={start:d,end:null,start_note:l},i=!0,b){const t=f.getIntrinsicTicks(),n=p.getIntrinsicTicks(),i=l.getIntrinsicTicks(),a=this.lookupBeamDirection(e,t,i,n);[T,M].includes(a)?s.end=s.start-r:s.end=s.start+r}else m?h&&(s.end=s.start-r,i=!1):s.end=(a||0===c)&&p?s.start+r:s.start-r;n.push(s)}else i=!1;a=h}const l=n[n.length-1];return l&&null===l.end&&(l.end=l.start-r),n}drawStems(){this.notes.forEach((e=>{e.getStem()&&(this.context.openGroup("stem",e.getAttribute("id")+"-stem"),e.getStem().setContext(this.context).draw(),this.context.closeGroup())}),this)}drawBeamLines(){this.checkContext();const e=["4","8","16","32","64"],t=this.notes[0];let n=this.getBeamYToDraw();const i=t.getStemX(),s=this.render_options.beam_width*this.stem_direction,r={};for(const a of this.notes)r[a.getAttribute("id")]=0;for(let a=0;a<e.length;++a){const t=e[a],o=this.getBeamLines(t);for(let e=0;e<o.length;++e){const t=o[e],a=t.start,l=t.start_note.getAttribute("id"),c=r[l];r[l]++;const h=this.getSlopeY(a,i,n,this.slope),u=t.end,d=this.getSlopeY(u,i,n,this.slope),f=l;this.context.openGroup("beam","".concat(f,"-beam").concat(c)),this.context.beginPath(),this.context.moveTo(a,h),this.context.lineTo(a,h+s),this.context.lineTo(u+1,d+s),this.context.lineTo(u+1,d),this.context.closePath(),this.context.fill(),this.context.closeGroup()}n+=1.5*s}}preFormat(){return this}postFormat(){this.postFormatted||("tabnotes"===this.notes[0].getCategory()||this.render_options.flat_beams?this.calculateFlatSlope():this.calculateSlope(),this.applyStemExtensions(),this.postFormatted=!0)}draw(){this.checkContext(),this.setRendered(),this.unbeamable||(this.postFormatted||this.postFormat(),this.drawStems(),this.applyStyle(),this.drawBeamLines(),this.restoreStyle())}}class A extends c{static get Mode(){return{STRICT:1,SOFT:2,FULL:3}}constructor(e){if(super(),this.setAttribute("type","Voice"),"string"==typeof e){const t=e.match(/(\d+)\/(\d+)/);t&&(e={num_beats:t[1],beat_value:t[2],resolution:m.RESOLUTION})}this.time=i.Merge({num_beats:4,beat_value:4,resolution:m.RESOLUTION},e),this.totalTicks=new r(this.time.num_beats*(this.time.resolution/this.time.beat_value),1),this.resolutionMultiplier=1,this.tickables=[],this.ticksUsed=new r(0,1),this.smallestTickCount=this.totalTicks.clone(),this.largestTickWidth=0,this.stave=null,this.mode=A.Mode.STRICT,this.voiceGroup=null}getTotalTicks(){return this.totalTicks}getTicksUsed(){return this.ticksUsed}getLargestTickWidth(){return this.largestTickWidth}getSmallestTickCount(){return this.smallestTickCount}getTickables(){return this.tickables}getMode(){return this.mode}setMode(e){return this.mode=e,this}getResolutionMultiplier(){return this.resolutionMultiplier}getActualResolution(){return this.resolutionMultiplier*this.time.resolution}setStave(e){return this.stave=e,this.boundingBox=null,this}getBoundingBox(){let e,t,n,s;if(!this.boundingBox){if(!this.stave)throw new i.RERR("NoStave","Can't get bounding box without stave.");for(e=this.stave,t=null,s=0;s<this.tickables.length;++s)this.tickables[s].setStave(e),n=this.tickables[s].getBoundingBox(),n&&(t=t?t.mergeWith(n):n);this.boundingBox=t}return this.boundingBox}getVoiceGroup(){if(!this.voiceGroup)throw new i.RERR("NoVoiceGroup","No voice group for voice.");return this.voiceGroup}setVoiceGroup(e){return this.voiceGroup=e,this}setStrict(e){return this.mode=e?A.Mode.STRICT:A.Mode.SOFT,this}isComplete(){return this.mode!==A.Mode.STRICT&&this.mode!==A.Mode.FULL||this.ticksUsed.equals(this.totalTicks)}addTickable(e){if(!e.shouldIgnoreTicks()){const t=e.getTicks();if(e.startTicks=this.ticksUsed.value(),this.ticksUsed.add(t),e.endTicks=this.ticksUsed.value(),(this.mode===A.Mode.STRICT||this.mode===A.Mode.FULL)&&this.ticksUsed.greaterThan(this.totalTicks))throw this.ticksUsed.subtract(t),new i.RERR("BadArgument","Too many ticks.");t.lessThan(this.smallestTickCount)&&(this.smallestTickCount=t.clone()),this.resolutionMultiplier=this.ticksUsed.denominator,this.totalTicks.add(0,this.ticksUsed.denominator)}return this.tickables.push(e),e.setVoice(this),this}addTickables(e){for(let t=0;t<e.length;++t)this.addTickable(e[t]);return this}preFormat(){return this.preFormatted||(this.tickables.forEach((e=>{e.getStave()||e.setStave(this.stave)})),this.preFormatted=!0),this}draw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.context,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.stave;this.setRendered();let n=null;for(let s=0;s<this.tickables.length;++s){const r=this.tickables[s];if(t&&r.setStave(t),!r.getStave())throw new i.RuntimeError("MissingStave","The voice cannot draw tickables without staves.");if(0===s&&(n=r.getBoundingBox()),s>0&&n){const e=r.getBoundingBox();e&&n.mergeWith(e)}r.setContext(e),r.drawWithStyle()}this.boundingBox=n}}function P(e,t,n,s,r){if(t!==N.type.BOLD_DOUBLE_LEFT&&t!==N.type.BOLD_DOUBLE_RIGHT)throw new i.RERR("InvalidConnector","A REPEAT_BEGIN or REPEAT_END type must be provided.");let a=3,o=3.5;t===N.type.BOLD_DOUBLE_RIGHT&&(a=-5,o=3),e.fillRect(n+a,s,1,r-s),e.fillRect(n-2,s,o,r-s)}class N extends c{static get type(){return{SINGLE_RIGHT:0,SINGLE_LEFT:1,SINGLE:1,DOUBLE:2,BRACE:3,BRACKET:4,BOLD_DOUBLE_LEFT:5,BOLD_DOUBLE_RIGHT:6,THIN_DOUBLE:7,NONE:8}}static get typeString(){return{singleRight:N.type.SINGLE_RIGHT,singleLeft:N.type.SINGLE_LEFT,single:N.type.SINGLE,double:N.type.DOUBLE,brace:N.type.BRACE,bracket:N.type.BRACKET,boldDoubleLeft:N.type.BOLD_DOUBLE_LEFT,boldDoubleRight:N.type.BOLD_DOUBLE_RIGHT,thinDouble:N.type.THIN_DOUBLE,none:N.type.NONE}}constructor(e,t){super(),this.setAttribute("type","StaveConnector"),this.thickness=m.STAVE_LINE_THICKNESS,this.width=3,this.top_stave=e,this.bottom_stave=t,this.type=N.type.DOUBLE,this.font={family:"times",size:16,weight:"normal"},this.x_shift=0,this.texts=[]}setType(e){return(e="string"==typeof e?N.typeString[e]:e)>=N.type.SINGLE_RIGHT&&e<=N.type.NONE&&(this.type=e),this}setText(e,t){return this.texts.push({content:e,options:i.Merge({shift_x:0,shift_y:0},t)}),this}setFont(e){i.Merge(this.font,e)}setXShift(e){if("number"!=typeof e)throw i.RERR("InvalidType","x_shift must be a Number");return this.x_shift=e,this}draw(){const e=this.checkContext();this.setRendered();let t=this.top_stave.getYForLine(0),n=this.bottom_stave.getYForLine(this.bottom_stave.getNumLines()-1)+this.thickness,s=this.width,r=this.top_stave.getX();(this.type===N.type.SINGLE_RIGHT||this.type===N.type.BOLD_DOUBLE_RIGHT||this.type===N.type.THIN_DOUBLE)&&(r=this.top_stave.getX()+this.top_stave.width);let a=n-t;switch(this.type){case N.type.SINGLE:case N.type.SINGLE_LEFT:case N.type.SINGLE_RIGHT:s=1;break;case N.type.DOUBLE:r-=this.width+2;break;case N.type.BRACE:{s=12;const i=this.top_stave.getX()-2+this.x_shift,r=t,o=i,l=n,c=i-s,h=r+a/2,u=c-.9*s,d=r+.2*a,f=i+1.1*s,p=h-.135*a,m=f,g=h+.135*a,b=u,v=l-.2*a,y=c-s,x=v,S=i+.4*s,w=h+.135*a,E=S,_=h-.135*a,T=y,M=d;e.beginPath(),e.moveTo(i,r),e.bezierCurveTo(u,d,f,p,c,h),e.bezierCurveTo(m,g,b,v,o,l),e.bezierCurveTo(y,x,S,w,c,h),e.bezierCurveTo(E,_,T,M,i,r),e.fill(),e.stroke();break}case N.type.BRACKET:t-=4,n+=4,a=n-t,p.renderGlyph(e,r-5,t-3,40,"v1b",!0),p.renderGlyph(e,r-5,n+3,40,"v10",!0),r-=this.width+2;break;case N.type.BOLD_DOUBLE_LEFT:P(e,this.type,r+this.x_shift,t,n);break;case N.type.BOLD_DOUBLE_RIGHT:P(e,this.type,r,t,n);break;case N.type.THIN_DOUBLE:s=1;break;case N.type.NONE:break;default:throw new i.RERR("InvalidType","The provided StaveConnector.type (".concat(this.type,") is invalid"))}this.type!==N.type.BRACE&&this.type!==N.type.BOLD_DOUBLE_LEFT&&this.type!==N.type.BOLD_DOUBLE_RIGHT&&this.type!==N.type.NONE&&e.fillRect(r,t,s,a),this.type===N.type.THIN_DOUBLE&&e.fillRect(r-3,t,s,a),e.save(),e.lineWidth=2,e.setFont(this.font.family,this.font.size,this.font.weight);for(let i=0;i<this.texts.length;i++){const t=this.texts[i],n=e.measureText(""+t.content).width,s=this.top_stave.getX()-n-24+t.options.shift_x,r=(this.top_stave.getYForLine(0)+this.bottom_stave.getBottomLineY())/2+t.options.shift_y;e.fillText(""+t.content,s,r+4)}e.restore()}}class k extends c{constructor(){super(),this.setAttribute("type","Tickable"),this.ticks=new r(0,1),this.intrinsicTicks=0,this.tickMultiplier=new r(1,1),this.width=0,this.x_shift=0,this.voice=null,this.tickContext=null,this.modifierContext=null,this.modifiers=[],this.preFormatted=!1,this.postFormatted=!1,this.tuplet=null,this.tupletStack=[],this.align_center=!1,this.center_x_shift=0,this.ignore_ticks=!1,this.formatterMetrics={freedom:{left:0,right:0},duration:"",iterations:0,space:{used:0,mean:0,deviation:0}}}reset(){return this}getTicks(){return this.ticks}shouldIgnoreTicks(){return this.ignore_ticks}getWidth(){return this.width}getFormatterMetrics(){return this.formatterMetrics}setXShift(e){this.x_shift=e}getCenterXShift(){return this.isCenterAligned()?this.center_x_shift:0}isCenterAligned(){return this.align_center}setCenterAlignment(e){return this.align_center=e,this}getVoice(){if(!this.voice)throw new i.RERR("NoVoice","Tickable has no voice.");return this.voice}setVoice(e){this.voice=e}getTuplet(){return this.tuplet}resetTuplet(e){let t,n;if(e){const i=this.tupletStack.indexOf(e);return-1!==i&&(this.tupletStack.splice(i,1),t=e.getNoteCount(),n=e.getNotesOccupied(),this.applyTickMultiplier(t,n)),this}for(;this.tupletStack.length;)t=(e=this.tupletStack.pop()).getNoteCount(),n=e.getNotesOccupied(),this.applyTickMultiplier(t,n);return this}setTuplet(e){if(e){this.tupletStack.push(e);const t=e.getNoteCount(),n=e.getNotesOccupied();this.applyTickMultiplier(n,t)}return this.tuplet=e,this}addToModifierContext(e){this.modifierContext=e,this.preFormatted=!1}addModifier(e){return this.modifiers.push(e),this.preFormatted=!1,this}getModifiers(){return this.modifiers}setTickContext(e){this.tickContext=e,this.preFormatted=!1}preFormat(){this.preFormatted||(this.width=0,this.modifierContext&&(this.modifierContext.preFormat(),this.width+=this.modifierContext.getWidth()))}postFormat(){return this.postFormatted||(this.postFormatted=!0),this}getIntrinsicTicks(){return this.intrinsicTicks}setIntrinsicTicks(e){this.intrinsicTicks=e,this.ticks=this.tickMultiplier.clone().multiply(this.intrinsicTicks)}getTickMultiplier(){return this.tickMultiplier}applyTickMultiplier(e,t){this.tickMultiplier.multiply(e,t),this.ticks=this.tickMultiplier.clone().multiply(this.intrinsicTicks)}setDuration(e){const t=e.numerator*(m.RESOLUTION/e.denominator);this.ticks=this.tickMultiplier.clone().multiply(t),this.intrinsicTicks=this.ticks.value()}}class L extends k{static get CATEGORY(){return"note"}static get STAVEPADDING(){return 12}static plotMetrics(e,t,n){const s=t.getMetrics(),r=t.getAbsoluteX()-s.modLeftPx-s.extraLeftPx,a=t.getAbsoluteX()-s.extraLeftPx,o=t.getAbsoluteX(),l=t.getAbsoluteX()+s.noteWidth,c=t.getAbsoluteX()+s.noteWidth+s.extraRightPx,h=t.getAbsoluteX()+s.noteWidth+s.extraRightPx+s.modRightPx,u=h+t.getFormatterMetrics().freedom.right,d=h-r;e.save(),e.setFont("Arial",8,""),e.fillText(Math.round(d)+"px",r+t.getXShift(),n);const f=n+7;function p(n,i,s){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f;e.beginPath(),e.setStrokeStyle(s),e.setFillStyle(s),e.setLineWidth(3),e.moveTo(n+t.getXShift(),r),e.lineTo(i+t.getXShift(),r),e.stroke()}p(r,a,"red"),p(a,o,"#999"),p(o,l,"green"),p(l,c,"#999"),p(c,h,"red"),p(h,u,"#DD0"),p(r-t.getXShift(),r,"#BBB"),i.drawDot(e,o+t.getXShift(),f,"blue");const m=t.getFormatterMetrics();if(m.iterations>0){const i=m.space.deviation,s=i>=0?"+":"";e.setFillStyle("red"),e.fillText(s+Math.round(i),o+t.getXShift(),n-10)}e.restore()}constructor(e){if(super(),this.setAttribute("type","Note"),!e)throw new i.RuntimeError("BadArguments","Note must have valid initialization data to identify duration and type.");const t=m.parseNoteStruct(e);if(!t)throw new i.RuntimeError("BadArguments","Invalid note initialization object: ".concat(JSON.stringify(e)));if(this.duration=t.duration,this.dots=t.dots,this.noteType=t.type,this.customTypes=t.customTypes,e.duration_override?this.setDuration(e.duration_override):this.setIntrinsicTicks(t.ticks),this.modifiers=[],this.glyph=m.getGlyphProps(this.duration,this.noteType),this.customGlyphs=this.customTypes.map((e=>m.getGlyphProps(this.duration,e))),this.positions&&("object"!=typeof this.positions||!this.positions.length))throw new i.RuntimeError("BadArguments","Note keys must be array type.");this.playNote=null,this.tickContext=null,this.modifierContext=null,this.ignore_ticks=!1,this.width=0,this.extraLeftPx=0,this.extraRightPx=0,this.x_shift=0,this.left_modPx=0,this.right_modPx=0,this.voice=null,this.preFormatted=!1,this.ys=[],e.align_center&&this.setCenterAlignment(e.align_center),this.stave=null,this.render_options={annotation_spacing:5,stave_padding:L.STAVEPADDING}}getPlayNote(){return this.playNote}setPlayNote(e){return this.playNote=e,this}isRest(){return!1}addStroke(e,t){return t.setNote(this),t.setIndex(e),this.modifiers.push(t),this.setPreFormatted(!1),this}getStave(){return this.stave}setStave(e){return this.stave=e,this.setYs([e.getYForLine(0)]),this.context=this.stave.context,this}getCategory(){return L.CATEGORY}setContext(e){return this.context=e,this}getExtraLeftPx(){return this.extraLeftPx}getExtraRightPx(){return this.extraRightPx}setExtraLeftPx(e){return this.extraLeftPx=e,this}setExtraRightPx(e){return this.extraRightPx=e,this}shouldIgnoreTicks(){return this.ignore_ticks}getLineNumber(){return 0}getLineForRest(){return 0}getGlyph(){return this.glyph}getGlyphWidth(){return this.glyph.getWidth(this.render_options.glyph_font_scale)}setYs(e){return this.ys=e,this}getYs(){if(0===this.ys.length)throw new i.RERR("NoYValues","No Y-values calculated for this note.");return this.ys}getYForTopText(e){if(!this.stave)throw new i.RERR("NoStave","No stave attached to this note.");return this.stave.getYForTopText(e)}getBoundingBox(){return null}getVoice(){if(!this.voice)throw new i.RERR("NoVoice","Note has no voice.");return this.voice}setVoice(e){return this.voice=e,this.preFormatted=!1,this}getTickContext(){return this.tickContext}setTickContext(e){return this.tickContext=e,this.preFormatted=!1,this}getDuration(){return this.duration}isDotted(){return this.dots>0}hasStem(){return!1}getDots(){return this.dots}getNoteType(){return this.noteType}setBeam(){return this}setModifierContext(e){return this.modifierContext=e,this}addModifier(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.setNote(this),e.setIndex(t),this.modifiers.push(e),this.setPreFormatted(!1),this}getModifierStartXY(){if(!this.preFormatted)throw new i.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");return{x:this.getAbsoluteX(),y:this.ys[0]}}getMetrics(){if(!this.preFormatted)throw new i.RERR("UnformattedNote","Can't call getMetrics on an unformatted note.");let e=0,t=0;null!=this.modifierContext&&(e=this.modifierContext.state.left_shift,t=this.modifierContext.state.right_shift);const n=this.getWidth();return{width:n,noteWidth:n-e-t-this.extraLeftPx-this.extraRightPx,left_shift:this.x_shift,modLeftPx:e,modRightPx:t,extraLeftPx:this.extraLeftPx,extraRightPx:this.extraRightPx}}setWidth(e){this.width=e}getWidth(){if(!this.preFormatted)throw new i.RERR("UnformattedNote","Can't call GetWidth on an unformatted note.");return this.width+(this.modifierContext?this.modifierContext.getWidth():0)}setXShift(e){return this.x_shift=e,this}getXShift(){return this.x_shift}getX(){if(!this.tickContext)throw new i.RERR("NoTickContext","Note needs a TickContext assigned for an X-Value");return this.tickContext.getX()+this.x_shift}getAbsoluteX(){if(!this.tickContext)throw new i.RERR("NoTickContext","Note needs a TickContext assigned for an X-Value");let e=this.tickContext.getX();return this.stave&&(e+=this.stave.getNoteStartX()+this.render_options.stave_padding),this.isCenterAligned()&&(e+=this.getCenterXShift()),e}setPreFormatted(e){if(this.preFormatted=e,this.preFormatted){const e=this.tickContext.getExtraPx();this.left_modPx=Math.max(this.left_modPx,e.left),this.right_modPx=Math.max(this.right_modPx,e.right)}}}class I extends L{static get CATEGORY(){return"notehead"}constructor(e){if(super(e),this.setAttribute("type","NoteHead"),this.index=e.index,this.x_shift=e.x_shift||0,this.x=(e.x||0)+this.x_shift,this.y=e.y||0,this.note_type=e.note_type,this.duration=e.duration,this.displaced=e.displaced||!1,this.stem_direction=e.stem_direction||B.STEM_UP,this.line=e.line,this.glyph=m.getGlyphProps(this.duration,this.note_type),!this.glyph)throw new i.RuntimeError("BadArguments","No glyph found for duration '".concat(this.duration,"' and type '").concat(this.note_type,"'"));this.glyph_code=this.glyph.code_head,this.x_shift_ledger_rest=0,this.y_shift_ledger_rest=0,this.x_shift=e.x_shift||0,this.glyph.rest&&(this.line>5||this.line<0)&&(this.isLedgerLinedRest=!0,"h"===this.duration?(e.custom_glyph_code="rhl",this.x_shift_ledger_rest-=4):"w"===this.duration&&(e.custom_glyph_code="rwl",this.x_shift_ledger_rest-=4,this.y_shift_ledger_rest=-5)),e.custom_glyph_code&&(this.custom_glyph=!0,this.glyph_code=e.custom_glyph_code,this.stem_up_x_offset=e.stem_up_x_offset||0,this.stem_down_x_offset=e.stem_down_x_offset||0,this.stem_up_y_shift=e.stem_up_y_shift||0,this.stem_down_y_shift=e.stem_down_y_shift||0),this.style=e.style,this.slashed=e.slashed,i.Merge(this.render_options,{glyph_font_scale:e.glyph_font_scale||m.DEFAULT_NOTATION_FONT_SCALE,stroke_px:3}),this.setWidth(this.glyph.getWidth(this.render_options.glyph_font_scale))}getCategory(){return I.CATEGORY}getWidth(){return this.width}isDisplaced(){return!0===this.displaced}getGlyph(){return this.glyph}setX(e){return this.x=e,this}getY(){return this.y}setY(e){return this.y=e,this}getLine(){return this.line}setLine(e){return this.line=e,this}getAbsoluteX(){const e=this.preFormatted?super.getAbsoluteX():this.x,t=w.WIDTH/2;return e+(this.displaced?(this.width-t)*this.stem_direction:0)}getBoundingBox(){if(!this.preFormatted)throw new i.RERR("UnformattedNote","Can't call getBoundingBox on an unformatted note.");const e=this.stave.getSpacingBetweenLines(),t=e/2,n=this.y-t;return new m.BoundingBox(this.getAbsoluteX(),n,this.width,e)}setStave(e){const t=this.getLine();return this.stave=e,this.setY(e.getYForNote(t)),this.context=this.stave.context,this}preFormat(){if(this.preFormatted)return this;const e=this.getWidth()+this.extraLeftPx+this.extraRightPx;return this.setWidth(e),this.setPreFormatted(!0),this}draw(){this.checkContext(),this.setRendered();const e=this.context;let t=this.getAbsoluteX(),n=this.y;this.custom_glyph&&(t+=this.x_shift_ledger_rest,this.stem_direction===w.UP?(t+=this.stem_up_x_offset,n+=this.stem_up_y_shift||0):this.stem_direction===w.DOWN&&(t+=this.stem_down_x_offset,n+=this.stem_down_y_shift||0),n+=this.y_shift_ledger_rest),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];I.DEBUG&&i.L("Vex.Flow.NoteHead",t)}("Drawing note head '",this.note_type,this.duration,"' at",t,n);const s=this.stem_direction,r=this.render_options.glyph_font_scale;if(this.style&&this.applyStyle(e),"s"===this.note_type){const i=this.stave.getSpacingBetweenLines();!function(e,t,n,i,s,r){const a=m.SLASH_NOTEHEAD_WIDTH;e.save(),e.setLineWidth(m.STEM_WIDTH);let o=!1;if(m.durationToNumber(t)>2&&(o=!0),o||(n-=m.STEM_WIDTH/2*s),e.beginPath(),e.moveTo(n,i+r),e.lineTo(n,i+1),e.lineTo(n+a,i-r),e.lineTo(n+a,i),e.lineTo(n,i+r),e.closePath(),o?e.fill():e.stroke(),m.durationToFraction(t).equals(.5)){const t=[-3,-1,a+1,a+3];for(let s=0;s<t.length;s++)e.beginPath(),e.moveTo(n+t[s],i-10),e.lineTo(n+t[s],i+11),e.stroke()}e.restore()}(e,this.duration,t,n,s,i)}else p.renderGlyph(e,t,n,r,this.glyph_code,this.id);this.style&&this.restoreStyle(e)}}class R extends L{constructor(e){super(e),this.setAttribute("type","StemmableNote"),this.stem=null,this.stemExtensionOverride=null,this.beam=null,this.renderFlag=!0}getStem(){return this.stem}setStem(e){return this.stem=e,this}buildStem(){const e=new w;return this.setStem(e),this}buildFlag(){const{glyph:e,beam:t}=this,n=null===t&&this.renderFlag;if(e&&e.flag&&n){const t=this.getStemDirection()===w.DOWN?e.code_flag_downstem:e.code_flag_upstem;this.flag=new p(t,this.render_options.glyph_font_scale)}}getTopGlyph(){return this.getStemDirection()===w.DOWN?this.customGlyphs[this.customGlyphs.length-1]:this.customGlyphs[0]}getStemLength(){return w.HEIGHT+this.getStemExtension()}getBeamCount(){const e=this.getGlyph();return e?e.beam_count:0}getStemMinumumLength(){let e=m.durationToFraction(this.duration).value()<=1?0:20;switch(this.duration){case"8":null==this.beam&&(e=35);break;case"16":e=null==this.beam?35:25;break;case"32":e=null==this.beam?45:35;break;case"64":e=null==this.beam?50:40;break;case"128":e=null==this.beam?55:45}return e}getStemDirection(){return this.stem_direction}setStemDirection(e){if(e||(e=w.UP),e!==w.UP&&e!==w.DOWN)throw new i.RERR("BadArgument","Invalid stem direction: ".concat(e));if(this.stem_direction=e,this.stem){this.stem.setDirection(e),this.stem.setExtension(this.getStemExtension());const t=this.getTopGlyph()||this.getGlyph();this.stem.setOptions({stem_up_y_offset:t.stem_up_y_offset,stem_down_y_offset:t.stem_down_y_offset})}return this.reset(),this.flag&&this.renderFlag&&this.buildFlag(),this.beam=null,this.preFormatted&&this.preFormat(),this}getStemX(){const e=this.getAbsoluteX()+this.x_shift,t=this.getAbsoluteX()+this.x_shift+this.getGlyphWidth();return this.stem_direction===w.DOWN?e:t}getCenterGlyphX(){return this.getAbsoluteX()+this.x_shift+this.getGlyphWidth()/2}getStemExtension(){const e=this.getGlyph();return null!=this.stemExtensionOverride?this.stemExtensionOverride:e?1===this.getStemDirection()?e.stem_up_extension:e.stem_down_extension:0}setStemLength(e){return this.stemExtensionOverride=e-w.HEIGHT,this}getStemExtents(){return this.stem.getExtents()}setBeam(e){return this.beam=e,this}getYForTopText(e){const t=this.getStemExtents();return this.hasStem()?Math.min(this.stave.getYForTopText(e),t.topY-this.render_options.annotation_spacing*(e+1)):this.stave.getYForTopText(e)}getYForBottomText(e){const t=this.getStemExtents();return this.hasStem()?Math.max(this.stave.getYForTopText(e),t.baseY+this.render_options.annotation_spacing*e):this.stave.getYForBottomText(e)}hasFlag(){return this.renderFlag&&m.getGlyphProps(this.duration).flag&&!this.beam}postFormat(){return this.beam&&this.beam.postFormat(),this.postFormatted=!0,this}drawStem(e){this.checkContext(),this.setRendered(),this.setStem(new w(e)),this.stem.setContext(this.context).draw()}}class O extends c{static get CATEGORY(){return"none"}static get Position(){return{LEFT:1,RIGHT:2,ABOVE:3,BELOW:4}}static get PositionString(){return{above:O.Position.ABOVE,below:O.Position.BELOW,left:O.Position.LEFT,right:O.Position.RIGHT}}constructor(){super(),this.setAttribute("type","Modifier"),this.width=0,this.note=null,this.index=null,this.text_line=0,this.position=O.Position.LEFT,this.modifier_context=null,this.x_shift=0,this.y_shift=0,this.spacingFromNextModifier=0}getCategory(){return O.CATEGORY}getWidth(){return this.width}setWidth(e){return this.width=e,this}getNote(){return this.note}setNote(e){return this.note=e,this}getIndex(){return this.index}setIndex(e){return this.index=e,this}getModifierContext(){return this.modifier_context}setModifierContext(e){return this.modifier_context=e,this}getPosition(){return this.position}setPosition(e){return this.position="string"==typeof e?O.PositionString[e]:e,this}setTextLine(e){return this.text_line=e,this}setYShift(e){return this.y_shift=e,this}setSpacingFromNextModifier(e){this.spacingFromNextModifier=e}getSpacingFromNextModifier(){return this.spacingFromNextModifier}setXShift(e){this.x_shift=0,this.position===O.Position.LEFT?this.x_shift-=e:this.x_shift+=e}getXShift(){return this.x_shift}draw(){throw this.checkContext(),new i.RERR("MethodNotImplemented","draw() not implemented for this modifier.")}alignSubNotesWithNote(e,t){const n=t.getTickContext(),i=n.getExtraPx(),s=n.getX()-i.left-i.extraLeft+this.getSpacingFromNextModifier();e.forEach((e=>{const n=e.getTickContext();e.setStave(t.stave),n.setXOffset(s)}))}}class D extends O{static get CATEGORY(){return"dots"}static format(e,t){const n=t.right_shift;if(!e||0===e.length)return!1;const i=[],s={};for(let u=0;u<e.length;++u){const t=e[u],n=t.getNote();let r,a;"function"==typeof n.getKeyProps?(r=n.getKeyProps()[t.getIndex()],a=r.displaced?n.getExtraRightPx():0):(r={line:.5},a=0);const o=n.getAttribute("id");i.push({line:r.line,note:n,note_id:o,dot:t}),s[o]=Math.max(s[o]||a,a)}i.sort(((e,t)=>t.line-e.line));let r=n,a=0,o=null,l=null,c=null,h=0;for(let u=0;u<i.length;++u){const{dot:e,note:t,note_id:n,line:d}=i[u];d===o&&t===l||(r=s[n]),t.isRest()||d===o||(.5===Math.abs(d%1)?h=0:(h=.5,null==l||l.isRest()||o-d!=.5?d+h===c&&(h=-.5):h=-.5)),t.isRest()?e.dot_shiftY+=-h:e.dot_shiftY=-h,c=d+h,e.setXShift(r),r+=e.getWidth()+1,a=r>a?r:a,o=d,l=t}return t.right_shift+=a,!0}constructor(){super(),this.setAttribute("type","Dot"),this.note=null,this.index=null,this.position=O.Position.RIGHT,this.radius=2,this.setWidth(5),this.dot_shiftY=0}getCategory(){return D.CATEGORY}setNote(e){this.note=e,"gracenotes"===this.note.getCategory()&&(this.radius*=.5,this.setWidth(3))}setDotShiftY(e){return this.dot_shiftY=e,this}draw(){if(this.checkContext(),this.setRendered(),!this.note||null===this.index)throw new i.RERR("NoAttachedNote","Can't draw dot without a note and index.");const e=this.note.stave.options.spacing_between_lines_px,t=this.note.getModifierStartXY(this.position,this.index,{forceFlagRight:!0});"tabnotes"===this.note.getCategory()&&(t.y=this.note.getStemExtents().baseY);const n=t.x+this.x_shift+this.width-this.radius,s=t.y+this.y_shift+this.dot_shiftY*e,r=this.context;r.beginPath(),r.arc(n,s,this.radius,0,2*Math.PI,!1),r.fill()}}function F(e,t,n){if(e.note.shiftRestVerticalDisabled)return;const i=(t.isrest?0:1)*n;e.line+=i,e.maxLine+=i,e.minLine+=i,e.note.setKeyLine(0,e.note.getKeyLine(0)+i)}class B extends R{static get CATEGORY(){return"stavenotes"}static get STEM_UP(){return w.UP}static get STEM_DOWN(){return w.DOWN}static get DEFAULT_LEDGER_LINE_OFFSET(){return 3}static format(e,t){if(!e||e.length<2)return!1;const n=[],s=e[0].stagger_same_whole_notes;for(let i=0;i<e.length;i++){const t=e[i].getKeyProps(),s=t[0].line;let r=t[t.length-1].line;const a=e[i].getStemDirection(),o=e[i].getStemLength()/10,l=e[i].getStemMinumumLength()/10;let c;e[i].isRest()?(c=s+e[i].glyph.line_above,r=s-e[i].glyph.line_below):(c=1===a?t[t.length-1].line+o:t[t.length-1].line,r=1===a?t[0].line:t[0].line-o),n.push({line:t[0].line,maxLine:c,minLine:r,isrest:e[i].isRest(),stemDirection:a,stemMax:o,stemMin:l,voice_shift:e[i].getVoiceShiftWidth(),is_displaced:e[i].isDisplaced(),note:e[i]})}const r=n.length;let a=n[0];const o=r>2?n[1]:null;let l=r>2?n[2]:n[1];2!==r||-1!==a.stemDirection||1!==l.stemDirection||a.isrest||l.isRest||(a=n[1],l=n[0]);const c=Math.max(a.voice_shift,l.voice_shift);let h,u=0;if(2===r){const e=a.stemDirection===l.stemDirection?0:.5;if(a.stemDirection===l.stemDirection&&a.minLine<=l.maxLine&&(a.isrest||(h=Math.abs(a.line-(l.maxLine+.5)),h=Math.max(h,a.stemMin),a.minLine=a.line-h,a.note.setStemLength(10*h))),a.minLine<=l.maxLine+e)if(a.isrest)F(a,l,1),a.note.hasLedgerLinedRest&&(a.note.shiftRestVerticalDisabled=!0);else if(l.isrest)F(l,a,-1),l.note.hasLedgerLinedRest&&(l.note.shiftRestVerticalDisabled=!0);else{u=c;const e=Math.abs(a.line-l.line);let t=0,n=0;"h"===a.note.duration?t++:"w"===a.note.duration&&n++,"h"===l.note.duration?t++:"w"===l.note.duration&&n++;let i=1===t||1===n||a.note.dots!==l.note.dots;if(s&&(i=i||2===n),0===e&&i){if(l.note.setXShift(u),a.note.dots>0){let e=0;for(const t of a.note.modifiers)if(t instanceof D&&(e++,t.setYShift(-10*(l.maxLine-a.line+1)),e===a.note.dots))break}}else e<1&&e>0?l.note.setXShift(u):a.note.voice!==l.note.voice&&a.stemDirection===l.stemDirection&&(a.line>l.line?1===a.stemDirection?l.note.renderFlag=!1:a.note.renderFlag=!1:l.line>a.line?1===l.stemDirection?a.note.renderFlag=!1:l.note.renderFlag=!1:1===l.stemDirection&&(l.stemDirection=-1,l.note.setStemDirection(-1)))}return!0}return null!==o&&o.minLine<l.maxLine+.5&&(o.isrest||(h=Math.abs(o.line-(l.maxLine+.5)),h=Math.max(h,o.stemMin),o.minLine=o.line-h,o.note.setStemLength(10*h))),o.isrest&&!a.isrest&&!l.isrest&&(a.minLine<=o.maxLine||o.minLine<=l.maxLine)?(o.maxLine-o.minLine<a.minLine-l.maxLine?function(e,t,n){const s=e.line-i.MidLine(t.minLine,n.maxLine);e.note.setKeyLine(0,e.note.getKeyLine(0)-s),e.line-=s,e.maxLine-=s,e.minLine-=s}(o,a,l):(u=c+3,o.note.setXShift(u)),!0):a.isrest&&o.isrest&&l.isrest?(F(a,o,1),F(l,o,-1),!0):(o.isrest&&a.isrest&&o.minLine<=l.maxLine&&F(o,l,1),o.isrest&&l.isrest&&a.minLine<=o.maxLine&&F(o,a,-1),a.isrest&&a.minLine<=o.maxLine&&F(a,o,1),l.isrest&&o.minLine<=l.maxLine&&F(l,o,-1),(!a.isrest&&!o.isrest&&a.minLine<=o.maxLine+.5||!o.isrest&&!l.isrest&&o.minLine<=l.maxLine)&&(u=c+3,o.note.setXShift(u)),!0)}static formatByY(e,t){let n=!0;for(let i=0;i<e.length;i++)n=n&&null!=e[i].getStave();if(!n)throw new i.RERR("Stave Missing","All notes must have a stave - Vex.Flow.ModifierContext.formatMultiVoice!");let s=0;for(let i=0;i<e.length-1;i++){let t=e[i],n=e[i+1];t.maxLine<n.maxLine&&(t=e[i+1],n=e[i]);const r=t.getKeyProps(),a=n.getKeyProps(),o=.5,l=t.getStave().getYForLine(5-r[0].line+o);n.getStave().getYForLine(5-a[a.length-1].line-o)-l<0&&t.voice===n.voice&&(s=t.getVoiceShiftWidth()+2,n.setXShift(s))}t.right_shift+=s}static postFormat(e){return!!e&&(e.forEach((e=>e.postFormat())),!0)}constructor(e){if(super(e),this.setAttribute("type","StaveNote"),this.keys=e.keys,this.clef=e.clef,this.octave_shift=e.octave_shift,this.beam=null,this.glyph=m.getGlyphProps(this.duration,this.noteType),!this.glyph)throw new i.RuntimeError("BadArguments","Invalid note initialization data (No glyph found): ".concat(JSON.stringify(e)));this.displaced=!1,this.dot_shiftY=0,this.addDotsCount=0,this.keyProps=[],this.use_default_head_x=!1,this.paddingRight=0,this.note_heads=[],this.modifiers=[],i.Merge(this.render_options,{glyph_font_scale:e.glyph_font_scale||m.DEFAULT_NOTATION_FONT_SCALE,stroke_px:e.stroke_px||B.DEFAULT_LEDGER_LINE_OFFSET}),this.calculateKeyProps(),this.buildStem(),e.auto_stem?this.autoStem():this.setStemDirection(e.stem_direction),this.reset(),this.buildFlag()}reset(){super.reset();const e=this.note_heads.map((e=>e.getStyle())),t=[];this.note_heads.forEach((e=>t.push(e.note_type))),this.buildNoteHeads(),this.note_heads.forEach(((n,i)=>{n.setStyle(e[i]),t[i]&&(n.note_type=t[i])})),this.stave&&this.note_heads.forEach((e=>e.setStave(this.stave))),this.calcExtraPx()}setBeam(e){return this.beam=e,this.calcExtraPx(),this}getCategory(){return B.CATEGORY}buildStem(){this.setStem(new w({hide:!!this.isRest()})),this.stem.id=i.Prefix("".concat(this.getAttribute("id"),"-stem"))}buildNoteHeads(){this.note_heads=[];const e=this.getStemDirection(),t=this.getKeys();let n,s,r,a=null,o=null,l=!1;e===w.UP?(n=0,s=t.length,r=1):e===w.DOWN&&(n=t.length-1,s=-1,r=-1);for(let c=n;c!==s;c+=r){const t=this.keyProps[c],n=t.line;null===a?a=n:(o=Math.abs(a-n),0===o||.5===o?l=!l:(l=!1,this.use_default_head_x=!0)),a=n;const s=new I({duration:this.duration,note_type:this.noteType,displaced:l,stem_direction:e,custom_glyph_code:t.code,glyph_font_scale:this.render_options.glyph_font_scale,x_shift:t.shift_right,stem_up_x_offset:t.stem_up_x_offset,stem_down_x_offset:t.stem_down_x_offset,stem_up_y_shift:t.stem_up_y_shift,stem_down_y_shift:t.stem_down_y_shift,line:t.line});s.isLedgerLinedRest&&(this.hasLedgerLinedRest=!0),s.id=this.stem.id=i.Prefix("".concat(this.getAttribute("id"),"-stem").concat(c)),this.note_heads[c]=s}}autoStem(){this.minLine=this.keyProps[0].line,this.maxLine=this.keyProps[this.keyProps.length-1].line;const e=(this.minLine+this.maxLine)/2<3?w.UP:w.DOWN;this.setStemDirection(e)}calculateKeyProps(){let e=null;for(let t=0;t<this.keys.length;++t){const n=this.keys[t];this.glyph.rest&&(this.glyph.position=n);const s={octave_shift:this.octave_shift||0},r=m.keyProperties(n,this.clef,s);if(!r)throw new i.RuntimeError("BadArguments","Invalid key for note properties: ".concat(n));"R"===r.key&&("1"===this.duration||"w"===this.duration?r.line=4:r.line=3);const a=r.line;null===e?e=a:Math.abs(e-a)<1&&(this.displaced=!0,r.displaced=!0,this.keyProps.length>0&&(this.keyProps[t-1].displaced=!0)),e=a,this.keyProps.push(r)}e=-1/0,this.keyProps.forEach((t=>{t.line<e&&i.W("Unsorted keys in note will be sorted. See https://github.com/0xfe/vexflow/issues/104 for details."),e=t.line})),this.keyProps.sort(((e,t)=>e.line-t.line))}getBoundingBox(){if(!this.preFormatted)throw new i.RERR("UnformattedNote","Can't call getBoundingBox on an unformatted note.");const{width:e,modLeftPx:t,extraLeftPx:n}=this.getMetrics(),s=this.getAbsoluteX()-t-n-this.paddingRight;let r=0,a=0;const o=this.getStave().getSpacingBetweenLines()/2,l=2*o;if(this.isRest()){const e=this.ys[0],t=m.durationToFraction(this.duration);t.equals(1)||t.equals(2)?(r=e-o,a=e+o):(r=e-this.glyph.line_above*l,a=e+this.glyph.line_below*l)}else if(this.glyph.stem){const e=this.getStemExtents();e.baseY+=o*this.stem_direction,r=Math.min(e.topY,e.baseY),a=Math.max(e.topY,e.baseY)}else{r=null,a=null;for(let e=0;e<this.ys.length;++e){const t=this.ys[e];0===e?(r=t,a=t):(r=Math.min(t,r),a=Math.max(t,a))}r-=o,a+=o}return new u(s,r,e,a-r)}getLineNumber(e){if(!this.keyProps.length)throw new i.RERR("NoKeyProps","Can't get bottom note line, because note is not initialized properly.");let t=this.keyProps[0].line;for(let n=0;n<this.keyProps.length;n++){const i=this.keyProps[n].line;e?i>t&&(t=i):i<t&&(t=i)}return t}isRest(){return this.glyph.rest}isChord(){return!this.isRest()&&this.keys.length>1}hasStem(){return this.glyph.stem}hasFlag(){return super.hasFlag()&&!this.isRest()&&this.renderFlag}getStemX(){return"r"===this.noteType?this.getCenterGlyphX():super.getStemX()+w.WIDTH/(2*-this.getStemDirection())}getYForTopText(e){const t=this.getStemExtents();return Math.min(this.stave.getYForTopText(e),t.topY-this.render_options.annotation_spacing*(e+1))}getYForBottomText(e){const t=this.getStemExtents();return Math.max(this.stave.getYForTopText(e),t.baseY+this.render_options.annotation_spacing*e)}setStave(e){super.setStave(e);const t=this.note_heads.map((t=>(t.setStave(e),t.getY())));if(this.setYs(t),this.stem){const{y_top:e,y_bottom:t}=this.getNoteHeadBounds();this.stem.setYBounds(e,t)}return this}getKeys(){return this.keys}getKeyProps(){return this.keyProps}isDisplaced(){return this.displaced}setNoteDisplaced(e){return this.displaced=e,this}getTieRightX(){let e=this.getAbsoluteX();return e+=this.getGlyphWidth()+this.x_shift+this.extraRightPx,this.modifierContext&&(e+=this.modifierContext.getExtraRightPx()),e}getTieLeftX(){let e=this.getAbsoluteX();return e+=this.x_shift-this.extraLeftPx,e}getLineForRest(){let e=this.keyProps[0].line;if(this.keyProps.length>1){const t=this.keyProps[this.keyProps.length-1].line,n=Math.max(e,t),s=Math.min(e,t);e=i.MidLine(n,s)}return e}getModifierStartXY(e,t,n){if(n=n||{},!this.preFormatted)throw new i.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");if(0===this.ys.length)throw new i.RERR("NoYValues","No Y-Values calculated for this note.");const{ABOVE:s,BELOW:r,LEFT:a,RIGHT:o}=O.Position;let l=0;return e===a?l=-2:e===o?(l=this.getGlyphWidth()+this.x_shift+2,this.stem_direction===w.UP&&this.hasFlag()&&(n.forceFlagRight||((e,t)=>t===(e.getStemDirection()===w.UP?e.keyProps.length-1:0))(this,t))&&(l+=this.flag.getMetrics().width)):e!==r&&e!==s||(l=this.getGlyphWidth()/2),{x:this.getAbsoluteX()+l,y:this.ys[t]}}setStyle(e){super.setStyle(e),this.note_heads.forEach((t=>t.setStyle(e))),this.stem&&this.stem.setStyle(e)}setStemStyle(e){this.stem&&this.getStem().setStyle(e)}getStemStyle(){return this.stem.getStyle()}setLedgerLineStyle(e){this.ledgerLineStyle=e}getLedgerLineStyle(){return this.ledgerLineStyle}setFlagStyle(e){this.flagStyle=e}getFlagStyle(){return this.flagStyle}setKeyStyle(e,t){return this.note_heads[e].setStyle(t),this}setKeyLine(e,t){return this.keyProps[e].line=t,this.reset(),this}getKeyLine(e){return this.keyProps[e].line}addToModifierContext(e){this.setModifierContext(e);for(let t=0;t<this.modifiers.length;++t)this.modifierContext.addModifier(this.modifiers[t]);return this.modifierContext.addModifier(this),this.setPreFormatted(!1),this}addModifier(e,t){return t.setNote(this),t.setIndex(e),this.modifiers.push(t),this.setPreFormatted(!1),this}addAccidental(e,t){return this.addModifier(e,t)}addArticulation(e,t){return this.addModifier(e,t)}addAnnotation(e,t){return this.addModifier(e,t)}addDot(e){const t=new D;return t.setDotShiftY(this.glyph.dot_shiftY),this.addDotsCount++,this.addModifier(e,t)}addDotToAll(){for(let e=0;e<this.keys.length;++e)this.addDot(e);return this}getAccidentals(){return this.modifierContext.getModifiers("accidentals")}getDots(){return this.modifierContext.getModifiers("dots")}getVoiceShiftWidth(){return this.getGlyphWidth()*(this.displaced?2:1)}calcExtraPx(){this.setExtraLeftPx(this.displaced&&this.stem_direction===w.DOWN?this.getGlyphWidth():0),this.setExtraRightPx(!this.hasFlag()&&this.displaced&&this.stem_direction===w.UP?this.getGlyphWidth():0)}preFormat(){if(this.preFormatted)return;this.modifierContext&&this.modifierContext.preFormat();let e=this.getGlyphWidth()+this.extraLeftPx+this.extraRightPx+this.paddingRight;this.renderFlag&&this.glyph.flag&&null===this.beam&&this.stem_direction===w.UP&&(e+=this.getGlyphWidth()),this.setWidth(e),this.setPreFormatted(!0)}getNoteHeadBounds(){let e=null,t=null,n=null,i=null,s=this.stave.getNumLines(),r=1,a=!1,o=!1,l=s,c=r;return this.note_heads.forEach((h=>{const u=h.getLine(),d=h.getY();(null===e||d<e)&&(e=d),(null===t||d>t)&&(t=d),null===i&&h.isDisplaced()&&(i=h.getAbsoluteX()),null!==n||h.isDisplaced()||(n=h.getAbsoluteX()),s=u>s?u:s,r=u<r?u:r,h.isDisplaced()?(a=!1===a?u:Math.max(u,a),o=!1===o?u:Math.min(u,o)):(l=Math.max(u,l),c=Math.min(u,c))}),this),{y_top:e,y_bottom:t,displaced_x:i,non_displaced_x:n,highest_line:s,lowest_line:r,highest_displaced_line:a,lowest_displaced_line:o,highest_non_displaced_line:l,lowest_non_displaced_line:c}}getNoteHeadBeginX(){return this.getAbsoluteX()+this.x_shift}getNoteHeadEndX(){return this.getNoteHeadBeginX()+this.getGlyphWidth()}drawLedgerLines(){const{stave:e,glyph:t,render_options:{stroke_px:n},context:r}=this,a=t.getWidth()+2*n,o=2*(t.getWidth()+n)-w.WIDTH/2;if(this.isRest())return;if(!r)throw new i.RERR("NoCanvasContext","Can't draw without a canvas context.");const{highest_line:l,lowest_line:c,highest_displaced_line:h,highest_non_displaced_line:u,lowest_displaced_line:d,lowest_non_displaced_line:f,displaced_x:p,non_displaced_x:m}=this.getNoteHeadBounds(),g=Math.min(p,m),b=(e,t,i)=>{let s;s=i&&t?g-n:t?m-n:p-n;const l=t&&i?o:a;r.beginPath(),r.moveTo(s,e),r.lineTo(s+l,e),r.stroke()},v=s(s({},e.getStyle()||{}),this.getLedgerLineStyle()||{});this.applyStyle(r,v);const y=l>=6||c<=0;y&&r.openGroup("ledgers",this.getAttribute("id")+"ledgers");for(let i=6;i<=l;++i){const t=null!==m&&i<=u,n=null!==p&&i<=h;b(e.getYForNote(i),t,n)}for(let i=0;i>=c;--i){const t=null!==m&&i>=f,n=null!==p&&i>=d;b(e.getYForNote(i),t,n)}y&&r.closeGroup(),this.restoreStyle(r,v)}drawModifiers(){if(!this.context)throw new i.RERR("NoCanvasContext","Can't draw without a canvas context.");const e=this.context;e.openGroup("modifiers");for(let t=0;t<this.modifiers.length;t++){const n=this.modifiers[t],i=this.note_heads[n.getIndex()],s=i.getStyle();i.applyStyle(e,s),n.setContext(e),n.drawWithStyle(),i.restoreStyle(e,s)}e.closeGroup()}drawFlag(){const{stem:e,beam:t,context:n}=this;if(!n)throw new i.RERR("NoCanvasContext","Can't draw without a canvas context.");const s=null===t&&this.renderFlag;if(this.getGlyph().flag&&s){const{y_top:t,y_bottom:i}=this.getNoteHeadBounds(),s=e.getHeight(),r=this.getStemX(),a=this.getStemDirection()===w.DOWN?t-s+2:i-s-2;n.openGroup("flag",null,{pointerBBox:!0}),this.applyStyle(n,this.getFlagStyle()||!1),this.flag.render(n,r,a),this.restoreStyle(n,this.getFlagStyle()||!1),n.closeGroup()}}drawNoteHeads(){this.note_heads.forEach((e=>{this.context.openGroup("notehead",null,{pointerBBox:!0}),e.setContext(this.context).draw(),this.context.closeGroup()}))}drawStem(e){if(!this.context)throw new i.RERR("NoCanvasContext","Can't draw without a canvas context.");e&&this.setStem(new w(e)),this.stem.id=i.Prefix("".concat(this.getAttribute("id"),"-stem")),this.stem&&(this.context.openGroup("stem",null,{pointerBBox:!0}),this.stem.setContext(this.context).draw(),this.context.closeGroup())}draw(){if(!this.context)throw new i.RERR("NoCanvasContext","Can't draw without a canvas context.");if(!this.stave)throw new i.RERR("NoStave","Can't draw without a stave.");if(0===this.ys.length)throw new i.RERR("NoYValues","Can't draw note without Y values.");const e=this.getNoteHeadBeginX(),t=this.hasStem()&&!this.beam;if(this.note_heads.forEach((t=>t.setX(e))),this.stem){const e=this.getStemX();this.stem.setNoteHeadXBounds(e,e)}!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];B.DEBUG&&i.L("Vex.Flow.StaveNote",t)}("Rendering ",this.isChord()?"chord :":"note :",this.keys),this.drawLedgerLines(),this.applyStyle(),this.setAttribute("el",this.context.openGroup("stavenote",this.getAttribute("id"))),this.context.openGroup("note",null,{pointerBBox:!0}),t&&this.drawStem(),this.drawNoteHeads(),this.drawFlag(),this.context.closeGroup(),this.drawModifiers(),this.context.closeGroup(),this.restoreStyle(),this.setRendered()}}class j extends O{static get CATEGORY(){return"frethandfinger"}static format(e,t){const{left_shift:n,right_shift:i}=t;if(!e||0===e.length)return!1;const s=[];let r=null,a=0,o=0;for(let p=0;p<e.length;++p){const t=e[p],l=t.getNote(),c=t.getPosition(),h=l.getKeyProps()[t.getIndex()];if(l!==r){for(let e=0;e<l.keys.length;++e){const t=l.getKeyProps()[e];0===n&&(a=t.displaced?l.getExtraLeftPx():a),0===i&&(o=t.displaced?l.getExtraRightPx():o)}r=l}s.push({note:l,num:t,pos:c,line:h.line,shiftL:a,shiftR:o})}s.sort(((e,t)=>t.line-e.line));let l=0,c=0,h=0,u=0,d=null,f=null;for(let p=0;p<s.length;++p){let e=0;const{note:t,pos:r,num:a,line:m,shiftL:g,shiftR:b}=s[p];m===d&&t===f||(l=n+g,c=i+b);const v=a.getWidth()+1;r===O.Position.LEFT?(a.setXShift(n+l),e=n+v,h=e>h?e:h):r===O.Position.RIGHT&&(a.setXShift(c),e=o+v,u=e>u?e:u),d=m,f=t}return t.left_shift+=h,t.right_shift+=u,!0}constructor(e){super(),this.setAttribute("type","FretHandFinger"),this.note=null,this.index=null,this.finger=e,this.width=7,this.position=O.Position.LEFT,this.x_shift=0,this.y_shift=0,this.x_offset=0,this.y_offset=0,this.font={family:"sans-serif",size:9,weight:"bold"}}getCategory(){return j.CATEGORY}setFretHandFinger(e){return this.finger=e,this}setOffsetX(e){return this.x_offset=e,this}setOffsetY(e){return this.y_offset=e,this}draw(){if(this.checkContext(),!this.note||null==this.index)throw new i.RERR("NoAttachedNote","Can't draw string number without a note and index.");this.setRendered();const e=this.context,t=this.note.getModifierStartXY(this.position,this.index);let n=t.x+this.x_shift+this.x_offset,s=t.y+this.y_shift+this.y_offset+5;switch(this.position){case O.Position.ABOVE:n-=4,s-=12;break;case O.Position.BELOW:n-=2,s+=10;break;case O.Position.LEFT:n-=this.width;break;case O.Position.RIGHT:n+=1;break;default:throw new i.RERR("InvalidPostion","The position ".concat(this.position," does not exist"))}e.save(),e.setFont(this.font.family,this.font.size,this.font.weight),e.fillText(""+this.finger,n,s),e.restore()}}class V{static get NUM_TONES(){return 12}static get roots(){return["c","d","e","f","g","a","b"]}static get root_values(){return[0,2,4,5,7,9,11]}static get root_indices(){return{c:0,d:1,e:2,f:3,g:4,a:5,b:6}}static get canonical_notes(){return["c","c#","d","d#","e","f","f#","g","g#","a","a#","b"]}static get diatonic_intervals(){return["unison","m2","M2","m3","M3","p4","dim5","p5","m6","M6","b7","M7","octave"]}static get diatonic_accidentals(){return{unison:{note:0,accidental:0},m2:{note:1,accidental:-1},M2:{note:1,accidental:0},m3:{note:2,accidental:-1},M3:{note:2,accidental:0},p4:{note:3,accidental:0},dim5:{note:4,accidental:-1},p5:{note:4,accidental:0},m6:{note:5,accidental:-1},M6:{note:5,accidental:0},b7:{note:6,accidental:-1},M7:{note:6,accidental:0},octave:{note:7,accidental:0}}}static get intervals(){return{u:0,unison:0,m2:1,b2:1,min2:1,S:1,H:1,2:2,M2:2,maj2:2,T:2,W:2,m3:3,b3:3,min3:3,M3:4,3:4,maj3:4,4:5,p4:5,"#4":6,b5:6,aug4:6,dim5:6,5:7,p5:7,"#5":8,b6:8,aug5:8,6:9,M6:9,maj6:9,b7:10,m7:10,min7:10,dom7:10,M7:11,maj7:11,8:12,octave:12}}static get scales(){return{major:[2,2,1,2,2,2,1],dorian:[2,1,2,2,2,1,2],mixolydian:[2,2,1,2,2,1,2],minor:[2,1,2,2,1,2,2]}}static get scaleTypes(){return{M:V.scales.major,m:V.scales.minor}}static get accidentals(){return["bb","b","n","#","##"]}static get noteValues(){return{c:{root_index:0,int_val:0},cn:{root_index:0,int_val:0},"c#":{root_index:0,int_val:1},"c##":{root_index:0,int_val:2},cb:{root_index:0,int_val:11},cbb:{root_index:0,int_val:10},d:{root_index:1,int_val:2},dn:{root_index:1,int_val:2},"d#":{root_index:1,int_val:3},"d##":{root_index:1,int_val:4},db:{root_index:1,int_val:1},dbb:{root_index:1,int_val:0},e:{root_index:2,int_val:4},en:{root_index:2,int_val:4},"e#":{root_index:2,int_val:5},"e##":{root_index:2,int_val:6},eb:{root_index:2,int_val:3},ebb:{root_index:2,int_val:2},f:{root_index:3,int_val:5},fn:{root_index:3,int_val:5},"f#":{root_index:3,int_val:6},"f##":{root_index:3,int_val:7},fb:{root_index:3,int_val:4},fbb:{root_index:3,int_val:3},g:{root_index:4,int_val:7},gn:{root_index:4,int_val:7},"g#":{root_index:4,int_val:8},"g##":{root_index:4,int_val:9},gb:{root_index:4,int_val:6},gbb:{root_index:4,int_val:5},a:{root_index:5,int_val:9},an:{root_index:5,int_val:9},"a#":{root_index:5,int_val:10},"a##":{root_index:5,int_val:11},ab:{root_index:5,int_val:8},abb:{root_index:5,int_val:7},b:{root_index:6,int_val:11},bn:{root_index:6,int_val:11},"b#":{root_index:6,int_val:0},"b##":{root_index:6,int_val:1},bb:{root_index:6,int_val:10},bbb:{root_index:6,int_val:9}}}isValidNoteValue(e){return!(null==e||e<0||e>=V.NUM_TONES)}isValidIntervalValue(e){return this.isValidNoteValue(e)}getNoteParts(e){if(!e||e.length<1)throw new i.RERR("BadArguments","Invalid note name: "+e);if(e.length>3)throw new i.RERR("BadArguments","Invalid note name: "+e);const t=e.toLowerCase(),n=/^([cdefgab])(b|bb|n|#|##)?$/.exec(t);if(null!=n)return{root:n[1],accidental:n[2]};throw new i.RERR("BadArguments","Invalid note name: "+e)}getKeyParts(e){if(!e||e.length<1)throw new i.RERR("BadArguments","Invalid key: "+e);const t=e.toLowerCase(),n=/^([cdefgab])(b|#)?(mel|harm|m|M)?$/.exec(t);if(null!=n){const e=n[1],t=n[2];let i=n[3];return i||(i="M"),{root:e,accidental:t,type:i}}throw new i.RERR("BadArguments","Invalid key: ".concat(e))}getNoteValue(e){const t=V.noteValues[e];if(null==t)throw new i.RERR("BadArguments","Invalid note name: ".concat(e));return t.int_val}getIntervalValue(e){const t=V.intervals[e];if(null==t)throw new i.RERR("BadArguments","Invalid interval name: ".concat(e));return t}getCanonicalNoteName(e){if(!this.isValidNoteValue(e))throw new i.RERR("BadArguments","Invalid note value: ".concat(e));return V.canonical_notes[e]}getCanonicalIntervalName(e){if(!this.isValidIntervalValue(e))throw new i.RERR("BadArguments","Invalid interval value: ".concat(e));return V.diatonic_intervals[e]}getRelativeNoteValue(e,t,n){if(null==n&&(n=1),1!==n&&-1!==n)throw new i.RERR("BadArguments","Invalid direction: ".concat(n));let s=(e+n*t)%V.NUM_TONES;return s<0&&(s+=V.NUM_TONES),s}getRelativeNoteName(e,t){const n=this.getNoteParts(e),s=this.getNoteValue(n.root);let r=t-s;if(Math.abs(r)>V.NUM_TONES-3){let n=1;r>0&&(n=-1);const a=(t+1+(s+1))%V.NUM_TONES*n;if(Math.abs(a)>2)throw new i.RERR("BadArguments","Notes not related: ".concat(e,", ").concat(t,")"));r=a}if(Math.abs(r)>2)throw new i.RERR("BadArguments","Notes not related: ".concat(e,", ").concat(t,")"));let a=n.root;if(r>0)for(let i=1;i<=r;++i)a+="#";else if(r<0)for(let i=-1;i>=r;--i)a+="b";return a}getScaleTones(e,t){const n=[e];let i=e;for(let s=0;s<t.length;s+=1)i=this.getRelativeNoteValue(i,t[s]),i!==e&&n.push(i);return n}getIntervalBetween(e,t,n){if(null==n&&(n=1),1!==n&&-1!==n)throw new i.RERR("BadArguments","Invalid direction: ".concat(n));if(!this.isValidNoteValue(e)||!this.isValidNoteValue(t))throw new i.RERR("BadArguments","Invalid notes: ".concat(e,", ").concat(t));let s=1===n?t-e:e-t;return s<0&&(s+=V.NUM_TONES),s}createScaleMap(e){const t=this.getKeyParts(e),n=V.scaleTypes[t.type];let s=t.root;if(t.accidental&&(s+=t.accidental),!n)throw new i.RERR("BadArguments","Unsupported key type: "+e);const r=this.getScaleTones(this.getNoteValue(s),n),a=V.root_indices[t.root],o={};for(let i=0;i<V.roots.length;++i){const e=(a+i)%V.roots.length,t=V.roots[e];let n=this.getRelativeNoteName(t,r[i]);1===n.length&&(n+="n"),o[t]=n}return o}}function G(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];z.DEBUG&&i.L("Vex.Flow.Accidental",t)}const W=e=>e.getMetrics().width;class z extends O{static get CATEGORY(){return"accidentals"}static format(e,t){var n=this;const i=t.left_shift+1;if(!e||0===e.length)return;const s=[];let r,a=null,o=0;for(let m=0;m<e.length;++m){const t=e[m],n=t.getNote(),i=n.getStave(),l=n.getKeyProps()[t.getIndex()];if(n!==a){for(let e=0;e<n.keys.length;++e)r=n.getKeyProps()[e],o=r.displaced?n.getExtraLeftPx():o;a=n}if(null!==i){const e=i.options.spacing_between_lines_px,n=i.getYForLine(l.line),r=Math.round(n/e*2)/2;s.push({y:n,line:r,shift:o,acc:t,lineSpace:e})}else s.push({line:l.line,shift:o,acc:t})}s.sort(((e,t)=>t.line-e.line));const l=[];let c=0,h=null;for(let m=0;m<s.length;m++){const e=s[m];null!==h&&h===e.line||l.push({line:e.line,flatLine:!0,dblSharpLine:!0,numAcc:0,width:0}),"b"!==e.acc.type&&"bb"!==e.acc.type&&(l[l.length-1].flatLine=!1),"##"!==e.acc.type&&(l[l.length-1].dblSharpLine=!1),l[l.length-1].numAcc++,l[l.length-1].width+=e.acc.getWidth()+3,c=e.shift>c?e.shift:c,h=e.line}let u=0;for(let b=0;b<l.length;b++){let e=!1;const t=b;let i=b;for(;i+1<l.length&&!e;)this.checkCollision(l[i],l[i+1])?i++:e=!0;const s=e=>l[t+e],r=e=>e.map(s),a=(e,t)=>{const[n,i]=r([e,t]).map((e=>e.line));return n-i},o=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.map(r).every((e=>!n.checkCollision(...e)))},c=i-t+1;let h,d,f=this.checkCollision(l[t],l[i])?"a":"b";switch(c){case 3:"a"===f&&.5===a(1,2)&&.5!==a(0,1)&&(f="second_on_bottom");break;case 4:o([0,2],[1,3])&&(f="spaced_out_tetrachord");break;case 5:"b"===f&&o([1,3])&&(f="spaced_out_pentachord",o([0,2],[2,4])&&(f="very_spaced_out_pentachord"));break;case 6:o([0,3],[1,4],[2,5])&&(f="spaced_out_hexachord"),o([0,2],[2,4],[1,3],[3,5])&&(f="very_spaced_out_hexachord")}if(c>=7){let e=2,t=!0;for(;!0===t;){t=!1;for(let n=0;n+e<l.length;n++)if(this.checkCollision(l[n],l[n+e])){t=!0,e++;break}}for(h=b;h<=i;h++)d=(h-b)%e+1,l[h].column=d,u=u>d?u:d}else for(h=b;h<=i;h++)d=m.accidentalColumnsTable[c][f][h-b],l[h].column=d,u=u>d?u:d;b=i}const d=[],f=[];for(let m=0;m<=u;m++)d[m]=0,f[m]=0;d[0]=c+i,f[0]=c+i,l.forEach((e=>{e.width>d[e.column]&&(d[e.column]=e.width)}));for(let m=1;m<d.length;m++)f[m]=d[m]+f[m-1];const p=f[f.length-1];let g=0;l.forEach((e=>{let t=0;const n=g+e.numAcc;for(;g<n;g++){const n=f[e.column-1]+t;s[g].acc.setXShift(n),t+=s[g].acc.getWidth()+3,G("Line, accCount, shift: ",e.line,g,n)}})),t.left_shift+=p}static checkCollision(e,t){let n=t.line-e.line,i=3;n>0?(i=t.flatLine||t.dblSharpLine?2.5:3,e.dblSharpLine&&(n-=.5)):(i=e.flatLine||e.dblSharpLine?2.5:3,t.dblSharpLine&&(n-=.5));const s=Math.abs(n)<i;return G("Line_1, Line_2, Collision: ",e.line,t.line,s),s}static applyAccidentals(e,t){const n=[],i={};e.forEach((e=>{const t=new r(0,1);e.getTickables().forEach((e=>{if(e.shouldIgnoreTicks())return;const s=i[t.value()];s?s.push(e):(n.push(t.value()),i[t.value()]=[e]),t.add(e.getTicks())}))}));const s=new V;t||(t="C");const a=s.createScaleMap(t);n.forEach((e=>{const t=i[e],n=[],r=e=>{e.isRest()||e.shouldIgnoreTicks()||(e.keys.forEach(((t,i)=>{const r=s.getNoteParts(t.split("/")[0]),o=r.accidental||"n",l=r.root+o,c=a[r.root]===l,h=n.indexOf(l)>-1;if(!c||c&&h){a[r.root]=l;const t=new z(o);e.addAccidental(i,t),n.push(l)}})),e.getModifiers().forEach((e=>{"gracenotegroups"===e.getCategory()&&e.getGraceNotes().forEach(r)})))};t.forEach(r)}))}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.setAttribute("type","Accidental"),G("New accidental: ",e),this.note=null,this.index=null,this.type=e,this.position=O.Position.LEFT,this.render_options={font_scale:38,stroke_px:3,parenLeftPadding:2,parenRightPadding:2},this.accidental=m.accidentalCodes(this.type),!this.accidental)throw new i.RERR("ArgumentError","Unknown accidental type: ".concat(e));this.cautionary=!1,this.parenLeft=null,this.parenRight=null,this.reset()}reset(){const e=this.render_options.font_scale;this.glyph=new p(this.accidental.code,e),this.glyph.setOriginX(1),this.cautionary&&(this.parenLeft=new p(m.accidentalCodes("{").code,e),this.parenRight=new p(m.accidentalCodes("}").code,e),this.parenLeft.setOriginX(1),this.parenRight.setOriginX(1))}getCategory(){return z.CATEGORY}getWidth(){const e=this.cautionary?W(this.parenLeft)+W(this.parenRight)+this.render_options.parenLeftPadding+this.render_options.parenRightPadding:0;return W(this.glyph)+e}setNote(e){if(!e)throw new i.RERR("ArgumentError","Bad note value: ".concat(e));this.note=e,"gracenotes"===this.note.getCategory()&&(this.render_options.font_scale=25,this.reset())}setAsCautionary(){return this.cautionary=!0,this.render_options.font_scale=28,this.reset(),this}draw(){const{context:e,type:t,position:n,note:s,index:r,cautionary:a,x_shift:o,y_shift:l,glyph:c,parenLeft:h,parenRight:u,render_options:{parenLeftPadding:d,parenRightPadding:f}}=this;if(this.checkContext(),!s||null==r)throw new i.RERR("NoAttachedNote","Can't draw accidental without a note and index.");const p=s.getModifierStartXY(n,r);let m=p.x+o;const g=p.y+l;G("Rendering: ",t,m,g),a?(u.render(e,m,g),m-=W(u),m-=f,m-=this.accidental.parenRightPaddingAdjustment,c.render(e,m,g),m-=W(c),m-=d,h.render(e,m,g)):c.render(e,m,g),this.setRendered()}}class U extends O{static get CATEGORY(){return"notesubgroup"}static format(e,t){if(!e||0===e.length)return!1;let n=0;for(let i=0;i<e.length;++i){const t=e[i];t.preFormat(),n+=t.getWidth()}return t.left_shift+=n,!0}constructor(e){return super(),this.setAttribute("type","NoteSubGroup"),this.note=null,this.index=null,this.position=O.Position.LEFT,this.subNotes=e,this.subNotes.forEach((e=>{e.ignore_ticks=!1})),this.width=0,this.preFormatted=!1,this.formatter=new de,this.voice=new A({num_beats:4,beat_value:4,resolution:m.RESOLUTION}).setStrict(!1),this.voice.addTickables(this.subNotes),this}getCategory(){return U.CATEGORY}preFormat(){this.preFormatted||(this.formatter.joinVoices([this.voice]).format([this.voice],0),this.setWidth(this.formatter.getMinTotalWidth()),this.preFormatted=!0)}setNote(e){this.note=e}setWidth(e){this.width=e}getWidth(){return this.width}draw(){this.checkContext();const e=this.getNote();if(!e||null===this.index)throw new i.RuntimeError("NoAttachedNote","Can't draw notes without a parent note and parent note index.");this.setRendered(),this.alignSubNotesWithNote(this.subNotes,e),this.subNotes.forEach((e=>e.setContext(this.context).drawWithStyle()))}}class H extends c{constructor(e,t){super(),this.setAttribute("type","StaveTie"),this.notes=e,this.context=null,this.text=t,this.direction=null,this.render_options={cp1:8,cp2:12,text_shift_x:0,first_x_shift:0,last_x_shift:0,y_shift:7,tie_spacing:0,font:{family:"Arial",size:10,style:""}},this.font=this.render_options.font,this.setNotes(e)}setFont(e){return this.font=e,this}setDirection(e){return this.direction=e,this}setNotes(e){if(!e.first_note&&!e.last_note)throw new i.RuntimeError("BadArguments","Tie needs to have either first_note or last_note set.");if(e.first_indices||(e.first_indices=[0]),e.last_indices||(e.last_indices=[0]),e.first_indices.length!==e.last_indices.length)throw new i.RuntimeError("BadArguments","Tied notes must have similar index sizes");return this.first_note=e.first_note,this.first_indices=e.first_indices,this.last_note=e.last_note,this.last_indices=e.last_indices,this}isPartial(){return!this.first_note||!this.last_note}renderTie(e){if(0===e.first_ys.length||0===e.last_ys.length)throw new i.RERR("BadArguments","No Y-values to render");const t=this.context;let n=this.render_options.cp1,s=this.render_options.cp2;Math.abs(e.last_x_px-e.first_x_px)<10&&(n=2,s=8);const r=this.render_options.first_x_shift,a=this.render_options.last_x_shift,o=this.render_options.y_shift*e.direction;for(let l=0;l<this.first_indices.length;++l){const c=(e.last_x_px+a+(e.first_x_px+r))/2,h=e.first_ys[this.first_indices[l]]+o,u=e.last_ys[this.last_indices[l]]+o;if(isNaN(h)||isNaN(u))throw new i.RERR("BadArguments","Bad indices for tie rendering.");const d=(h+u)/2+n*e.direction,f=(h+u)/2+s*e.direction;let p;this.first_note&&(p=this.first_note.getAttribute("id")+"-tie"),this.setAttribute("el",t.openGroup("stavetie",p)),t.beginPath(),t.moveTo(e.first_x_px+r,h),t.quadraticCurveTo(c,d,e.last_x_px+a,u),t.quadraticCurveTo(c,f,e.first_x_px+r,h),t.closePath(),t.fill(),t.closeGroup()}}renderText(e,t){if(!this.text)return;let n=(e+t)/2;n-=this.context.measureText(this.text).width/2,this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.style),this.context.fillText(this.text,n+this.render_options.text_shift_x,(this.first_note||this.last_note).getStave().getYForTopText()-1),this.context.restore()}draw(){this.checkContext(),this.setRendered();const e=this.first_note,t=this.last_note;let n,i,s,r,a;return e?(n=e.getTieRightX()+this.render_options.tie_spacing,a=e.getStemDirection(),s=e.getYs()):(n=t.getStave().getTieStartX(),s=t.getYs(),this.first_indices=this.last_indices),t?(i=t.getTieLeftX()+this.render_options.tie_spacing,a=t.getStemDirection(),r=t.getYs()):(i=e.getStave().getTieEndX(),r=e.getYs(),this.last_indices=this.first_indices),this.direction&&(a=this.direction),this.renderTie({first_x_px:n,last_x_px:i,first_ys:s,last_ys:r,direction:a}),this.renderText(n,i),!0}}class X extends H{static createHammeron(e){return new X(e,"H")}static createPulloff(e){return new X(e,"P")}constructor(e,t){super(e,t),this.setAttribute("type","TabTie"),this.render_options.cp1=9,this.render_options.cp2=11,this.render_options.y_shift=3,this.setNotes(e)}draw(){this.checkContext(),this.setRendered();const e=this.first_note,t=this.last_note;let n,i,s,r;return e?(n=e.getTieRightX()+this.render_options.tie_spacing,s=e.getYs()):(n=t.getStave().getTieStartX(),s=t.getYs(),this.first_indices=this.last_indices),t?(i=t.getTieLeftX()+this.render_options.tie_spacing,r=t.getYs()):(i=e.getStave().getTieEndX(),r=e.getYs(),this.last_indices=this.first_indices),this.renderTie({first_x_px:n,last_x_px:i,first_ys:s,last_ys:r,direction:-1}),this.renderText(n,i),!0}}class Y extends O{static get CATEGORY(){return"gracenotegroups"}static format(e,t){if(!e||0===e.length)return!1;const n=[];let i=null,s=0;for(let o=0;o<e.length;++o){const t=e[o],r=t.getNote(),a=r.getCategory()===B.CATEGORY;let l=0;if(a&&null!==t.spacing&&void 0!==t.spacing&&(l=t.spacing),a&&r!==i){for(let e=0;e<r.keys.length;++e)s=r.getKeyProps()[e].displaced?r.getExtraLeftPx():s;i=r}n.push({shift:s,gracenote_group:t,spacing:l})}let r,a=n[0].shift;for(let o=0;o<n.length;++o){const e=n[o].gracenote_group;e.preFormat(),r=e.getWidth()+n[o].spacing,a=Math.max(r,a)}for(let o=0;o<n.length;++o){const e=n[o].gracenote_group;r=e.getWidth()+n[o].spacing,e.setSpacingFromNextModifier(a-Math.min(r,a))}return t.left_shift+=a,!0}constructor(e,t){return super(),this.setAttribute("type","GraceNoteGroup"),this.note=null,this.index=null,this.position=O.Position.LEFT,this.grace_notes=e,this.width=0,this.preFormatted=!1,this.show_slur=t,this.slur=null,this.formatter=new de,this.voice=new A({num_beats:4,beat_value:4,resolution:m.RESOLUTION}).setStrict(!1),this.render_options={slur_y_shift:0},this.beams=[],this.voice.addTickables(this.grace_notes),this}getCategory(){return Y.CATEGORY}preFormat(){this.preFormatted||(this.formatter.joinVoices([this.voice]).format([this.voice],0),this.setWidth(this.formatter.getMinTotalWidth()),this.preFormatted=!0)}beamNotes(e){if((e=e||this.grace_notes).length>1){const t=new C(e);t.render_options.beam_width=3,t.render_options.partial_beam_length=4,this.beams.push(t)}return this}setNote(e){this.note=e}setWidth(e){this.width=e}getWidth(){return this.width}getGraceNotes(){return this.grace_notes}draw(){this.checkContext();const e=this.getNote();if(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Y.DEBUG&&i.L("Vex.Flow.GraceNoteGroup",t)}("Drawing grace note group for:",e),!e||null===this.index)throw new i.RuntimeError("NoAttachedNote","Can't draw grace note without a parent note and parent note index.");if(this.setRendered(),this.alignSubNotesWithNote(this.getGraceNotes(),e),this.grace_notes.forEach((e=>{e.setContext(this.context).draw()})),this.beams.forEach((e=>{e.setContext(this.context).draw()})),this.show_slur){const t=this.getNote().getCategory()===B.CATEGORY,n=t?H:X;this.slur=new n({last_note:this.grace_notes[0],first_note:e,first_indices:[0],last_indices:[0]}),this.slur.render_options.cp2=12,this.slur.render_options.y_shift=(t?7:5)+this.render_options.slur_y_shift,this.slur.setContext(this.context).draw()}}}class q extends O{static get CATEGORY(){return"strokes"}static get Type(){return{BRUSH_DOWN:1,BRUSH_UP:2,ROLL_DOWN:3,ROLL_UP:4,RASQUEDO_DOWN:5,RASQUEDO_UP:6,ARPEGGIO_DIRECTIONLESS:7}}static format(e,t){const n=t.left_shift;if(!e||0===e.length)return this;const i=e.map((e=>{const t=e.getNote();if(t instanceof B){const{line:n,displaced:i}=t.getKeyProps()[e.getIndex()];return{line:n,shift:i?t.getExtraLeftPx():0,stroke:e}}{const{str:n}=t.getPositions()[e.getIndex()];return{line:n,shift:0,stroke:e}}})),s=n,r=i.reduce(((e,t)=>{let{stroke:n,shift:i}=t;return n.setXShift(s+i),Math.max(n.getWidth()+0,e)}),0);return t.left_shift+=r,!0}constructor(e,t){super(),this.setAttribute("type","Stroke"),this.note=null,this.options=i.Merge({},t),this.all_voices=!("all_voices"in this.options)||this.options.all_voices,this.note_end=null,this.index=null,this.type=e,this.position=O.Position.LEFT,this.render_options={font_scale:38,stroke_px:3,stroke_spacing:10},this.font={family:"serif",size:10,weight:"bold italic"},this.setXShift(0),this.setWidth(10)}getCategory(){return q.CATEGORY}getPosition(){return this.position}addEndNote(e){return this.note_end=e,this}draw(){if(this.checkContext(),this.setRendered(),!this.note||null==this.index)throw new i.RERR("NoAttachedNote","Can't draw stroke without a note and index.");const e=this.note.getModifierStartXY(this.position,this.index);let t=this.note.getYs(),n=e.y,s=e.y;const r=e.x-5,a=this.note.stave.options.spacing_between_lines_px,o=this.getModifierContext().getModifiers(this.note.getCategory());for(let f=0;f<o.length;f++){t=o[f].getYs();for(let e=0;e<t.length;e++)(this.note===o[f]||this.all_voices)&&(n=i.Min(n,t[e]),s=i.Max(s,t[e]))}let l,c,h,u,d;switch(this.type){case q.Type.BRUSH_DOWN:l="vc3",c=-3,h=n-a/2+10,s+=a/2;break;case q.Type.BRUSH_UP:l="v11",c=.5,h=s+a/2,n-=a/2;break;case q.Type.ROLL_DOWN:case q.Type.RASQUEDO_DOWN:l="vc3",c=-3,u=this.x_shift+c-2,this.note instanceof B?(n+=1.5*a,s+=(s-n)%2!=0?.5*a:a,h=n-a,d=s+a+2):(n+=1.5*a,s+=a,h=n-.75*a,d=s+.25*a);break;case q.Type.ROLL_UP:case q.Type.RASQUEDO_UP:l="v52",c=-4,u=this.x_shift+c-1,this.note instanceof B?(h=a/2,n+=.5*a,(s-n)%2==0&&(s+=a/2),h=s+.5*a,d=n-1.25*a):(n+=.25*a,s+=.5*a,h=s+.25*a,d=n-a);break;case q.Type.ARPEGGIO_DIRECTIONLESS:n+=.5*a,s+=a;break;default:throw new i.RERR("InvalidType","The stroke type ".concat(this.type," does not exist"))}if(this.type===q.Type.BRUSH_DOWN||this.type===q.Type.BRUSH_UP)this.context.fillRect(r+this.x_shift,n,1,s-n);else if(this.note instanceof B)for(let i=n;i<=s;i+=a)p.renderGlyph(this.context,r+this.x_shift-4,i,this.render_options.font_scale,"va3");else{let e;for(e=n;e<=s;e+=10)p.renderGlyph(this.context,r+this.x_shift-4,e,this.render_options.font_scale,"va3");this.type===q.Type.RASQUEDO_DOWN&&(d=e+.25*a)}this.type!==q.Type.ARPEGGIO_DIRECTIONLESS&&(p.renderGlyph(this.context,r+this.x_shift+c,h,this.render_options.font_scale,l),this.type!==q.Type.RASQUEDO_DOWN&&this.type!==q.Type.RASQUEDO_UP||(this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight),this.context.fillText("R",r+u,d),this.context.restore()))}}class K extends O{static get CATEGORY(){return"stringnumber"}static format(e,t){const n=t.left_shift,i=t.right_shift;if(!e||0===e.length)return this;const s=[];let r,a,o,l,c,h=null,u=0,d=0;for(r=0;r<e.length;++r)for(a=e[r],o=a.getNote(),r=0;r<e.length;++r){a=e[r],o=a.getNote(),l=a.getPosition();const t=o.getKeyProps()[a.getIndex()];if(o!==h){for(let e=0;e<o.keys.length;++e)c=o.getKeyProps()[e],0===n&&(u=c.displaced?o.getExtraLeftPx():u),0===i&&(d=c.displaced?o.getExtraRightPx():d);h=o}s.push({pos:l,note:o,num:a,line:t.line,shiftL:u,shiftR:d})}s.sort(((e,t)=>t.line-e.line));let f=0,p=0,m=0,g=0,b=null,v=null;for(r=0;r<s.length;++r){let e=0;o=s[r].note,l=s[r].pos,a=s[r].num;const t=s[r].line,c=s[r].shiftL,h=s[r].shiftR;t===b&&o===v||(f=n+c,p=i+h);const d=a.getWidth()+1;l===O.Position.LEFT?(a.setXShift(n),e=u+d,m=e>m?e:m):l===O.Position.RIGHT&&(a.setXShift(p),e+=d,g=e>g?e:g),b=t,v=o}return t.left_shift+=m,t.right_shift+=g,!0}constructor(e){super(),this.setAttribute("type","StringNumber"),this.note=null,this.last_note=null,this.index=null,this.string_number=e,this.setWidth(20),this.position=O.Position.ABOVE,this.x_shift=0,this.y_shift=0,this.x_offset=0,this.y_offset=0,this.dashed=!0,this.leg=S.LineEndType.NONE,this.radius=8,this.font={family:"sans-serif",size:10,weight:"bold"}}getCategory(){return K.CATEGORY}getNote(){return this.note}setNote(e){return this.note=e,this}getIndex(){return this.index}setIndex(e){return this.index=e,this}setLineEndType(e){return e>=S.LineEndType.NONE&&e<=S.LineEndType.DOWN&&(this.leg=e),this}setStringNumber(e){return this.string_number=e,this}setOffsetX(e){return this.x_offset=e,this}setOffsetY(e){return this.y_offset=e,this}setLastNote(e){return this.last_note=e,this}setDashed(e){return this.dashed=e,this}draw(){const e=this.checkContext();if(!this.note||null==this.index)throw new i.RERR("NoAttachedNote","Can't draw string number without a note and index.");this.setRendered();const t=this.note.stave.options.spacing_between_lines_px,n=this.note.getModifierStartXY(this.position,this.index);let s=n.x+this.x_shift+this.x_offset,r=n.y+this.y_shift+this.y_offset;switch(this.position){case O.Position.ABOVE:case O.Position.BELOW:{const e=this.note.getStemExtents();let i=e.topY,s=e.baseY+2;this.note.stem_direction===B.STEM_DOWN&&(i=e.baseY,s=e.topY-2),r=this.position===O.Position.ABOVE?this.note.hasStem()?i-1.75*t:n.y-1.75*t:this.note.hasStem()?s+1.5*t:n.y+1.75*t,r+=this.y_shift+this.y_offset;break}case O.Position.LEFT:s-=this.radius/2+5;break;case O.Position.RIGHT:s+=this.radius/2+6;break;default:throw new i.RERR("InvalidPosition","The position ".concat(this.position," is invalid"))}e.save(),e.beginPath(),e.arc(s,r,this.radius,0,2*Math.PI,!1),e.lineWidth=1.5,e.stroke(),e.setFont(this.font.family,this.font.size,this.font.weight);const a=s-e.measureText(this.string_number).width/2;if(e.fillText(""+this.string_number,a,r+4.5),null!=this.last_note){const t=this.last_note.getStemX()-this.note.getX()+5;let n,i;switch(e.strokeStyle="#000000",e.lineCap="round",e.lineWidth=.6,this.dashed?S.drawDashedLine(e,s+10,r,s+t,r,[3,3]):S.drawDashedLine(e,s+10,r,s+t,r,[3,0]),this.leg){case S.LineEndType.UP:n=-10,i=this.dashed?[3,3]:[3,0],S.drawDashedLine(e,s+t,r,s+t,r+n,i);break;case S.LineEndType.DOWN:n=10,i=this.dashed?[3,3]:[3,0],S.drawDashedLine(e,s+t,r,s+t,r+n,i)}}e.restore()}}class $ extends k{static getNextContext(e){const t=e.tContexts,n=t.indexOf(e);return t[n+1]}constructor(){super(),this.setAttribute("type","TickContext"),this.currentTick=new r(0,1),this.maxTicks=new r(0,1),this.minTicks=null,this.padding=3,this.x=0,this.xBase=0,this.xOffset=0,this.tickables=[],this.notePx=0,this.extraLeftPx=0,this.extraRightPx=0,this.tContexts=[]}getX(){return this.x}setX(e){return this.x=e,this.xBase=e,this.xOffset=0,this}getXBase(){return this.xBase}setXBase(e){this.xBase=e,this.x=e+this.xOffset}getXOffset(){return this.xOffset}setXOffset(e){this.xOffset=e,this.x=this.xBase+e}getWidth(){return this.width+2*this.padding}setPadding(e){return this.padding=e,this}getMaxTicks(){return this.maxTicks}getMinTicks(){return this.minTicks}getTickables(){return this.tickables}getCenterAlignedTickables(){return this.tickables.filter((e=>e.isCenterAligned()))}getMetrics(){const{width:e,notePx:t,extraLeftPx:n,extraRightPx:i}=this;return{width:e,notePx:t,extraLeftPx:n,extraRightPx:i}}getCurrentTick(){return this.currentTick}setCurrentTick(e){this.currentTick=e,this.preFormatted=!1}getExtraPx(){let e=0,t=0,n=0,i=0;for(let s=0;s<this.tickables.length;s++){n=Math.max(this.tickables[s].extraLeftPx||0,n),i=Math.max(this.tickables[s].extraRightPx||0,i);const r=this.tickables[s].modifierContext;r&&null!=r&&(e=Math.max(e,r.state.left_shift),t=Math.max(t,r.state.right_shift))}return{left:e,right:t,extraLeft:n,extraRight:i}}addTickable(e){if(!e)throw new i.RERR("BadArgument","Invalid tickable added.");if(!e.shouldIgnoreTicks()){this.ignore_ticks=!1;const t=e.getTicks();t.greaterThan(this.maxTicks)&&(this.maxTicks=t.clone()),(null==this.minTicks||t.lessThan(this.minTicks))&&(this.minTicks=t.clone())}return e.setTickContext(this),this.tickables.push(e),this.preFormatted=!1,this}preFormat(){if(this.preFormatted)return this;for(let e=0;e<this.tickables.length;++e){const t=this.tickables[e];t.preFormat();const n=t.getMetrics();this.extraLeftPx=Math.max(this.extraLeftPx,n.extraLeftPx+n.modLeftPx),this.extraRightPx=Math.max(this.extraRightPx,n.extraRightPx+n.modRightPx),this.notePx=Math.max(this.notePx,n.noteWidth),this.width=this.notePx+this.extraLeftPx+this.extraRightPx}return this}postFormat(){return this.postFormatted||(this.postFormatted=!0),this}}const{ABOVE:Z,BELOW:Q}=O.Position,J=(e,t)=>.5*e(t/.5),ee=(e,t)=>t===Z?e<=5:e>=1,te=(e,t)=>ee(e,t)?t===Z?Math.ceil:Math.floor:Math.round,ne=e=>{const t=e.getCategory();return"stavenotes"===t||"gracenotes"===t};class ie extends O{static get CATEGORY(){return"articulations"}static get INITIAL_OFFSET(){return-.5}static format(e,t){if(!e||0===e.length)return!1;const n=(e,t,n)=>J(te(t,n),e.glyph.getMetrics().height/10+.5);e.filter((e=>e.getPosition()===Z)).forEach((e=>{e.setTextLine(t.top_text_line),t.top_text_line+=n(e,t.top_text_line,Z)})),e.filter((e=>e.getPosition()===Q)).forEach((e=>{e.setTextLine(t.text_line),t.text_line+=n(e,t.text_line,Q)}));const i=e.map((e=>e.getWidth())).reduce(((e,t)=>Math.max(t,e)));return t.left_shift+=i/2,t.right_shift+=i/2,!0}static easyScoreHook(e,t,n){let{articulations:i}=e;if(!i)return;const s={staccato:"a.",tenuto:"a-"};i.split(",").map((e=>e.trim().split("."))).map((e=>{let[t,i]=e;const r={type:s[t]};return i&&(r.position=O.PositionString[i]),n.getFactory().Articulation(r)})).map((e=>t.addModifier(0,e)))}constructor(e){if(super(),this.setAttribute("type","Articulation"),this.note=null,this.index=null,this.type=e,this.position=Q,this.render_options={font_scale:38},this.breathMarkDistance=.8,this.articulation=m.articulationCodes(this.type),"abr"===this.type&&(this.articulation={code:"v6c",between_lines:!1}),!this.articulation)throw new i.RERR("ArgumentError","Articulation not found: ".concat(this.type));this.glyph=new p(this.articulation.code,this.render_options.font_scale),this.setWidth(this.glyph.getMetrics().width)}getCategory(){return ie.CATEGORY}draw(){const{note:e,index:t,position:n,glyph:s,articulation:{between_lines:r},text_line:a,context:o}=this;if(this.checkContext(),!e||null==t)throw new i.RERR("NoAttachedNote","Can't draw Articulation without a note and index.");this.setRendered();const l=e.getStave(),c=l.getSpacingBetweenLines(),h="tabnotes"===e.getCategory();let{x:u}=e.getModifierStartXY(n,t);if("abr"===this.type){let t=0;const n=e.getTickContext(),i=$.getNextContext(n),s=n.getX();if(i&&i.x>n.x)t=(i.getX()-s)*this.breathMarkDistance;else{const n=e.getStave();t=(n.getX()+n.getWidth()-s+n.start_x)*this.breathMarkDistance}if(u+=t,u>l.end_x){const e=l.start_x+s;u=e+(l.end_x-e)*this.breathMarkDistance}}const d=this.getXShift();d&&(u+=d);const f=!r||h,p=((e,t)=>{const n=t===Z&&e.getStemDirection()===w.UP||t===Q&&e.getStemDirection()===w.DOWN;return ne(e)?e.hasStem()&&n?.5:1:e.hasStem()&&n?1:0})(e,n);let m={[Z]:()=>{s.setOrigin(.5,1);const t=((e,t)=>{const n=e.getStave(),s=e.getStemDirection(),{topY:r,baseY:a}=e.getStemExtents();if(ne(e))return e.hasStem()?s===w.UP?r:a:Math.min(...e.getYs());if("tabnotes"===e.getCategory())return e.hasStem()&&s===w.UP?r:n.getYForTopText(t);throw new i.RERR("UnknownCategory","Only can get the top and bottom ys of stavenotes and tabnotes")})(e,a)-(a+p)*c;return f?Math.min(l.getYForTopText(ie.INITIAL_OFFSET),t):t},[Q]:()=>{s.setOrigin(.5,0);const t=((e,t)=>{const n=e.getStave(),s=e.getStemDirection(),{topY:r,baseY:a}=e.getStemExtents();if(ne(e))return e.hasStem()?s===w.UP?a:r:Math.max(...e.getYs());if("tabnotes"===e.getCategory())return e.hasStem()?s===w.UP?n.getYForBottomText(t):r:n.getYForBottomText(t);throw new i.RERR("UnknownCategory","Only can get the top and bottom ys of stavenotes and tabnotes")})(e,a)+(a+p)*c;return f?Math.max(l.getYForBottomText(ie.INITIAL_OFFSET),t):t}}[n]();if(this.y_shift&&(m+=this.y_shift),!h){const i=n===Z?-1:1,a=h?e.positions[t].str:e.getKeyProps()[t].line,o=(e.getYs()[t]-m)/c+a,l=((e,t,n,i)=>{const s=J(te(t,n),t);return e&&ee(s,n)&&s%1==0?s+.5*-i:s})(r,o,n,i);ee(l,n)&&s.setOrigin(.5,.5),m+=Math.abs(l-o)*c*i}!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ie.DEBUG&&i.L("Vex.Flow.Articulation",t)}("Rendering articulation at (x: ".concat(u,", y: ").concat(m,")")),s.render(o,u,m)}}class se extends O{static get CATEGORY(){return"ornaments"}static format(e,t){if(!e||0===e.length)return!1;let n=0;for(let i=0;i<e.length;++i){const s=e[i],r=2;n=Math.max(s.getWidth(),n),s.getPosition()===O.Position.ABOVE?(s.setTextLine(t.top_text_line),t.top_text_line+=r):(s.setTextLine(t.text_line),t.text_line+=r)}return t.left_shift+=n/2,t.right_shift+=n/2,!0}constructor(e){if(super(),this.setAttribute("type","Ornament"),this.note=null,this.index=null,this.type=e,this.position=O.Position.ABOVE,this.delayed=!1,this.accidentalUpper=null,this.accidentalLower=null,this.render_options={font_scale:38,accidentalLowerPadding:3,accidentalUpperPadding:3},this.ornament=m.ornamentCodes(this.type),!this.ornament)throw new i.RERR("ArgumentError","Ornament not found: '".concat(this.type,"'"));this.glyph=new p(this.ornament.code,this.render_options.font_scale),this.glyph.setOrigin(.5,1)}getCategory(){return se.CATEGORY}setDelayed(e){return this.delayed=e,this}setUpperAccidental(e){const t=this.render_options.font_scale/1.3;return this.accidentalUpper=new p(m.accidentalCodes(e).code,t),this.accidentalUpper.setOrigin(.5,1),this}setLowerAccidental(e){const t=this.render_options.font_scale/1.3;return this.accidentalLower=new p(m.accidentalCodes(e).code,t),this.accidentalLower.setOrigin(.5,1),this}draw(){if(this.checkContext(),!this.note||null==this.index)throw new i.RERR("NoAttachedNote","Can't draw Ornament without a note and index.");this.setRendered();const e=this.context,t=this.note.getStemDirection(),n=this.note.getStave(),s=this.note.getStem().getExtents();let r=t===B.STEM_DOWN?s.baseY:s.topY;"tabnotes"===this.note.getCategory()&&(this.note.hasStem()?t===B.STEM_DOWN&&(r=n.getYForTopText(this.text_line)):r=n.getYForTopText(this.text_line));const a=t===B.STEM_DOWN,o=n.getSpacingBetweenLines();let l=1;!a&&this.note.beam&&(l+=.5);const c=r-o*(this.text_line+l);let h=this.note.getModifierStartXY(this.position,this.index).x,u=Math.min(n.getYForTopText(this.text_line),c);if(u+=this.y_shift,this.delayed){let e=0;if(void 0!==this.delayXShift)e=this.delayXShift;else{e+=this.glyph.getMetrics().width/2;const t=$.getNextContext(this.note.getTickContext());e+=t?.5*(t.getX()-h):.5*(n.x+n.width-h),this.delayXShift=e}h+=e}!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];se.DEBUG&&i.L("Vex.Flow.Ornament",t)}("Rendering ornament: ",this.ornament,h,u),this.accidentalLower&&(this.accidentalLower.render(e,h,u),u-=this.accidentalLower.getMetrics().height,u-=this.render_options.accidentalLowerPadding),this.glyph.render(e,h,u),u-=this.glyph.getMetrics().height,this.accidentalUpper&&(u-=this.render_options.accidentalUpperPadding,this.accidentalUpper.render(e,h,u))}}class re extends O{static get CATEGORY(){return"annotations"}static get Justify(){return{LEFT:1,CENTER:2,RIGHT:3,CENTER_STEM:4}}static get JustifyString(){return{left:re.Justify.LEFT,right:re.Justify.RIGHT,center:re.Justify.CENTER,centerStem:re.Justify.CENTER_STEM}}static get VerticalJustify(){return{TOP:1,CENTER:2,BOTTOM:3,CENTER_STEM:4}}static get VerticalJustifyString(){return{above:re.VerticalJustify.TOP,top:re.VerticalJustify.TOP,below:re.VerticalJustify.BOTTOM,bottom:re.VerticalJustify.BOTTOM,center:re.VerticalJustify.CENTER,centerStem:re.VerticalJustify.CENTER_STEM}}static format(e,t){if(!e||0===e.length)return!1;let n=0;for(let i=0;i<e.length;++i){const s=e[i];n=Math.max(s.getWidth(),n),s.getPosition()===O.Position.ABOVE?(s.setTextLine(t.top_text_line),t.top_text_line++):(s.setTextLine(t.text_line),t.text_line++)}return t.left_shift+=n/2,t.right_shift+=n/2,!0}constructor(e){super(),this.setAttribute("type","Annotation"),this.note=null,this.index=null,this.text=e,this.justification=re.Justify.CENTER,this.vert_justification=re.VerticalJustify.TOP,this.font={family:"Arial",size:10,weight:""},this.setWidth(m.textWidth(e))}getCategory(){return re.CATEGORY}setFont(e,t,n){return this.font={family:e,size:t,weight:n},this}setVerticalJustification(e){return this.vert_justification="string"==typeof e?re.VerticalJustifyString[e]:e,this}getJustification(){return this.justification}setJustification(e){return this.justification="string"==typeof e?re.JustifyString[e]:e,this}draw(){if(this.checkContext(),!this.note)throw new i.RERR("NoNoteForAnnotation","Can't draw text annotation without an attached note.");this.setRendered();const e=this.note.getModifierStartXY(O.Position.ABOVE,this.index);this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight);const t=this.context.measureText(this.text).width,n=this.context.measureText("m").width;let s,r,a,o;s=this.justification===re.Justify.LEFT?e.x:this.justification===re.Justify.RIGHT?e.x-t:this.justification===re.Justify.CENTER?e.x-t/2:this.note.getStemX()-t/2;const l=this.note.hasStem(),c=this.note.getStave();if(l&&(a=this.note.getStem().getExtents(),o=c.getSpacingBetweenLines()),this.vert_justification===re.VerticalJustify.BOTTOM){if(r=c.getYForBottomText(this.text_line+m.TEXT_HEIGHT_OFFSET_HACK),l){const e=1===this.note.getStemDirection()?a.baseY:a.topY;r=Math.max(r,e+o*(this.text_line+2))}}else if(this.vert_justification===re.VerticalJustify.CENTER){const e=this.note.getYForTopText(this.text_line)-1;r=e+(c.getYForBottomText(this.text_line)-e)/2+n/2}else if(this.vert_justification===re.VerticalJustify.TOP)r=Math.min(c.getYForTopText(this.text_line),this.note.getYs()[0]-10),l&&(r=Math.min(r,a.topY-5-o*this.text_line));else{const e=this.note.getStemExtents();r=e.topY+(e.baseY-e.topY)/2+n/2}!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];re.DEBUG&&i.L("Vex.Flow.Annotation",t)}("Rendering annotation: ",this.text,s,r),this.context.fillText(this.text,s,r),this.context.restore()}}class ae extends O{static get CATEGORY(){return"bends"}static get UP(){return 0}static get DOWN(){return 1}static format(e,t){if(!e||0===e.length)return!1;let n=0;const i=t.top_text_line;for(let s=0;s<e.length;++s){const t=e[s];t.setXShift(n),n=t.getWidth(),t.setTextLine(i)}return t.right_shift+=n,t.top_text_line+=1,!0}constructor(e,t,n){super(),this.setAttribute("type","Bend"),this.text=e,this.x_shift=0,this.release=t||!1,this.font="10pt Arial",this.render_options={line_width:1.5,line_style:"#777777",bend_width:8,release_width:8},n?this.phrase=n:(this.phrase=[{type:ae.UP,text:this.text}],this.release&&this.phrase.push({type:ae.DOWN,text:""})),this.updateWidth()}getCategory(){return ae.CATEGORY}setXShift(e){this.x_shift=e,this.updateWidth()}setFont(e){return this.font=e,this}getText(){return this.text}updateWidth(){const e=this;function t(t){let n;return n=e.context?e.context.measureText(t).width:m.textWidth(t),n}let n=0;for(let s=0;s<this.phrase.length;++s){const e=this.phrase[s];if("width"in e)n+=e.width;else{const s=e.type===ae.UP?this.render_options.bend_width:this.render_options.release_width;e.width=i.Max(s,t(e.text))+3,e.draw_width=e.width/2,n+=e.width}}return this.setWidth(n+this.x_shift),this}draw(){if(this.checkContext(),!this.note||null==this.index)throw new i.RERR("NoNoteForBend","Can't draw bend without a note or index.");this.setRendered();const e=this.note.getModifierStartXY(O.Position.RIGHT,this.index);e.x+=3,e.y+=.5;const t=this.x_shift,n=this.context,s=this.note.getStave().getYForTopText(this.text_line)+3,r=this.note.getStave().getYForTopText(this.text_line)-1,a=this;function o(e,t,i,s){const r=e+i,o=t;n.save(),n.beginPath(),n.setLineWidth(a.render_options.line_width),n.setStrokeStyle(a.render_options.line_style),n.setFillStyle(a.render_options.line_style),n.moveTo(e,t),n.quadraticCurveTo(r,o,e+i,s),n.stroke(),n.restore()}function l(e,t,i,s){n.save(),n.beginPath(),n.setLineWidth(a.render_options.line_width),n.setStrokeStyle(a.render_options.line_style),n.setFillStyle(a.render_options.line_style),n.moveTo(e,s),n.quadraticCurveTo(e+i,s,e+i,t),n.stroke(),n.restore()}function c(e,t,i){const s=i||1;n.beginPath(),n.moveTo(e,t),n.lineTo(e-4,t+4*s),n.lineTo(e+4,t+4*s),n.closePath(),n.fill()}function h(e,t){n.save(),n.setRawFont(a.font);const i=e-n.measureText(t).width/2;n.fillText(t,i,r),n.restore()}let u=null,d=0;for(let i=0;i<this.phrase.length;++i){const n=this.phrase[i];0===i&&(n.draw_width_unmodified=n.draw_width,n.draw_width+=t),d=n.draw_width+(u?u.draw_width:0)-(1===i?t:0),n.type===ae.UP&&(u&&u.type===ae.UP&&c(e.x,s),o(e.x,e.y,d,s)),n.type===ae.DOWN&&(u&&u.type===ae.UP&&l(e.x,e.y,d,s),u&&u.type===ae.DOWN&&(c(e.x,e.y,-1),l(e.x,e.y,d,s)),null===u&&(d=n.draw_width,l(e.x,e.y,d,s))),h(e.x+d,n.text),u=n,u.x=e.x,e.x+=d}u.type===ae.UP?c(u.x+d,s):u.type===ae.DOWN&&c(u.x+d,e.y,-1);for(let i=0;i<this.phrase.length;++i){const e=this.phrase[i];e.draw_width_unmodified&&(e.draw_width=e.draw_width_unmodified)}}}class oe extends O{static get CATEGORY(){return"vibratos"}static format(e,t,n){if(!e||0===e.length)return!1;let i=t.top_text_line,s=0,r=t.right_shift-7;const a=n.getModifiers(ae.CATEGORY);a&&a.length>0&&i--;for(let o=0;o<e.length;++o){const t=e[o];t.setXShift(r),t.setTextLine(i),s+=t.getWidth(),r+=s}return t.right_shift+=s,t.top_text_line+=1,!0}constructor(){super(),this.setAttribute("type","Vibrato"),this.position=O.Position.RIGHT,this.render_options={harsh:!1,vibrato_width:20,wave_height:6,wave_width:4,wave_girth:2},this.setVibratoWidth(this.render_options.vibrato_width)}getCategory(){return oe.CATEGORY}setHarsh(e){return this.render_options.harsh=e,this}setVibratoWidth(e){return this.render_options.vibrato_width=e,this.setWidth(e),this}draw(){const e=this.checkContext();if(!this.note)throw new i.RERR("NoNoteForVibrato","Can't draw vibrato without an attached note.");this.setRendered();const t=this.note.getModifierStartXY(O.Position.RIGHT,this.index).x+this.x_shift,n=this.note.getYForTopText(this.text_line)+2;oe.renderVibrato(e,t,n,this.render_options)}static renderVibrato(e,t,n,i){const{harsh:s,vibrato_width:r,wave_width:a,wave_girth:o,wave_height:l}=i,c=r/a;let h;if(e.beginPath(),s){for(e.moveTo(t,n+o+1),h=0;h<c/2;++h)e.lineTo(t+a,n-l/2),t+=a,e.lineTo(t+a,n+l/2),t+=a;for(h=0;h<c/2;++h)e.lineTo(t-a,n-l/2+o+1),t-=a,e.lineTo(t-a,n+l/2+o+1),t-=a;e.fill()}else{for(e.moveTo(t,n+o),h=0;h<c/2;++h)e.quadraticCurveTo(t+a/2,n-l/2,t+a,n),t+=a,e.quadraticCurveTo(t+a/2,n+l/2,t+a,n),t+=a;for(h=0;h<c/2;++h)e.quadraticCurveTo(t-a/2,n+l/2+o,t-a,n+o),t-=a,e.quadraticCurveTo(t-a/2,n-l/2+o,t-a,n+o),t-=a;e.fill()}}}function le(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ce.DEBUG&&i.L("Vex.Flow.ModifierContext",t)}class ce{constructor(){this.modifiers={},this.preFormatted=!1,this.postFormatted=!1,this.width=0,this.spacing=0,this.state={left_shift:0,right_shift:0,text_line:0,top_text_line:0},this.PREFORMAT=[B,D,j,z,q,Y,U,K,ie,se,re,ae,oe],this.POSTFORMAT=[B]}addModifier(e){const t=e.getCategory();return this.modifiers[t]||(this.modifiers[t]=[]),this.modifiers[t].push(e),e.setModifierContext(this),this.preFormatted=!1,this}getModifiers(e){return this.modifiers[e]}getWidth(){return this.width}getExtraLeftPx(){return this.state.left_shift}getExtraRightPx(){return this.state.right_shift}getState(){return this.state}getMetrics(){if(!this.formatted)throw new i.RERR("UnformattedModifier","Unformatted modifier has no metrics.");return{width:this.state.left_shift+this.state.right_shift+this.spacing,spacing:this.spacing,extra_left_px:this.state.left_shift,extra_right_px:this.state.right_shift}}preFormat(){this.preFormatted||(this.PREFORMAT.forEach((e=>{le("Preformatting ModifierContext: ",e.CATEGORY),e.format(this.getModifiers(e.CATEGORY),this.state,this)})),this.width=this.state.left_shift+this.state.right_shift,this.preFormatted=!0)}postFormat(){this.postFormatted||this.POSTFORMAT.forEach((e=>{le("Postformatting ModifierContext: ",e.CATEGORY),e.postFormat(this.getModifiers(e.CATEGORY),this)}))}}function he(e,t,n,s){let r=t;for(n+=1;n<e.length;n+=1){const t=e[n];if(!t.isRest()&&!t.shouldIgnoreTicks()){r=t.getLineForRest();break}}if(s&&t!==r){const e=Math.max(t,r),n=Math.min(t,r);r=i.MidLine(e,n)}return r}function ue(e,t,n){if(!e||!e.length)throw new i.RERR("BadArgument","No voices to format");e[0].getTotalTicks();const s=e.reduce(((e,t)=>{if(t.getMode()===A.Mode.STRICT&&!t.isComplete())throw new i.RERR("IncompleteVoice","Voice does not have enough notes.");return Math.max(e,r.LCM(e,t.getResolutionMultiplier()))}),1),a={},o=[],l=[];return e.forEach((e=>{const i=new r(0,s);e.getTickables().forEach((e=>{const s=i.numerator;if(!a[s]){const e=new t;l.push(e),a[s]=e}n(e,a[s]),o.push(s),i.add(e.getTicks())}))})),{map:a,array:l,list:i.SortAndUnique(o,((e,t)=>e-t),((e,t)=>e===t)),resolutionMultiplier:s}}class de{static SimpleFormat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{paddingBetween:n=10}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.reduce(((e,t)=>{t.addToModifierContext(new ce);const i=(new $).addTickable(t).preFormat(),s=i.getExtraPx();return i.setX(e+s.left),e+i.getWidth()+s.right+n}),t)}static plotDebugging(e,t,n,i,s){const r=n+L.STAVEPADDING,a=t.contextGaps;e.save(),e.setFont("Arial",8,""),a.gaps.forEach((t=>{var n,a,o;n=r+t.x1,a=r+t.x2,o="#aaa",e.beginPath(),e.setStrokeStyle(o),e.setFillStyle(o),e.setLineWidth(1),e.fillRect(n,i,a-n,s-i),e.fillText(Math.round(t.x2-t.x1),r+t.x1,s+12)})),e.fillText(Math.round(a.total)+"px",r-20,s+12),e.setFillStyle("red"),e.fillText("Loss: "+t.lossHistory.map((e=>Math.round(e))),r-20,s+22),e.restore()}static FormatAndDraw(e,t,n,s){const r={auto_beam:!1,align_rests:!1};"object"==typeof s?i.Merge(r,s):"boolean"==typeof s&&(r.auto_beam=s);const a=new A(m.TIME4_4).setMode(A.Mode.SOFT).addTickables(n),o=r.auto_beam?C.applyAndGetBeams(a):[];return(new de).joinVoices([a],{align_rests:r.align_rests}).formatToStave([a],t,{align_rests:r.align_rests,stave:t}),a.setStave(t).draw(e,t),o.forEach((t=>t.setContext(e).draw())),a.getBoundingBox()}static FormatAndDrawTab(e,t,n,s,r,a,o){const l={auto_beam:a,align_rests:!1};"object"==typeof o?i.Merge(l,o):"boolean"==typeof o&&(l.auto_beam=o);const c=new A(m.TIME4_4).setMode(A.Mode.SOFT).addTickables(r),h=new A(m.TIME4_4).setMode(A.Mode.SOFT).addTickables(s),u=l.auto_beam?C.applyAndGetBeams(c):[];(new de).joinVoices([c],{align_rests:l.align_rests}).joinVoices([h]).formatToStave([c,h],n,{align_rests:l.align_rests}),c.draw(e,n),h.draw(e,t),u.forEach((t=>t.setContext(e).draw())),new N(n,t).setContext(e).draw()}static AlignRestsToNotes(e,t,n){return e.forEach(((i,s)=>{if(i instanceof B&&i.isRest()){if(i.tuplet&&!n)return;const r=i.getGlyph().position.toUpperCase();if("R/4"!==r&&"B/4"!==r)return;if(t||null!=i.beam){const t=i.getKeyProps()[0];if(0===s)t.line=he(e,t.line,s,!1),i.setKeyLine(0,t.line);else if(s>0&&s<e.length){let n;const r=e[s-1];r.isRest()&&r.getKeyProps?(n=r.getKeyProps()[0].line,t.line=n):(n=r.getLineForRest(),t.line=he(e,n,s,!0)),i.setKeyLine(0,t.line)}}}})),this}constructor(){this.minTotalWidth=0,this.hasMinTotalWidth=!1,this.totalTicks=new r(0,1),this.tickContexts=null,this.modiferContexts=null,this.contextGaps={total:0,gaps:[]},this.voices=[]}alignRests(e,t){if(!e||!e.length)throw new i.RERR("BadArgument","No voices to format rests");e.forEach((e=>de.AlignRestsToNotes(e.getTickables(),t)))}preCalculateMinTotalWidth(e){if(this.hasMinTotalWidth)return this.minTotalWidth;if(!this.tickContexts){if(!e)throw new i.RERR("BadArgument","'voices' required to run preCalculateMinTotalWidth");this.createTickContexts(e)}const{list:t,map:n}=this.tickContexts;return this.minTotalWidth=t.map((e=>{const t=n[e];return t.preFormat(),t.getWidth()})).reduce(((e,t)=>e+t),0),this.hasMinTotalWidth=!0,this.minTotalWidth}getMinTotalWidth(){if(!this.hasMinTotalWidth)throw new i.RERR("NoMinTotalWidth","Call 'preCalculateMinTotalWidth' or 'preFormat' before calling 'getMinTotalWidth'");return this.minTotalWidth}createModifierContexts(e){const t=ue(e,ce,((e,t)=>e.addToModifierContext(t)));return this.modiferContexts=t,t}createTickContexts(e){const t=ue(e,$,((e,t)=>t.addTickable(e)));return t.array.forEach((e=>{e.tContexts=t.array})),this.totalTicks=e[0].getTicksUsed().clone(),this.tickContexts=t,t}preFormat(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;const s=this.tickContexts,{list:r,map:a,resolutionMultiplier:o}=s;n&&i&&n.forEach((e=>e.setStave(i).preFormat()));let l=0,c=0;const h=e/2;if(this.minTotalWidth=0,r.forEach((e=>{const n=a[e];t&&n.setContext(t),n.preFormat();const i=n.getWidth();this.minTotalWidth+=i;const s=n.getMetrics();l=l+c+s.extraLeftPx,n.setX(l),c=i-s.extraLeftPx})),this.minTotalWidth=l+c,this.hasMinTotalWidth=!0,e<=0)return;const u=e-this.minTotalWidth;let d=this.totalTicks.value();0===d&&(d=1);const f=u/(d*o);let p=0;r.forEach(((e,t)=>{const n=r[t-1]||0,i=a[e];p+=(e-n)*f,i.setX(i.getX()+p),i.getCenterAlignedTickables().forEach((e=>{e.center_x_shift=h-i.getX()}))})),1!==r.length&&(this.justifyWidth=e,this.lossHistory=[],this.evaluate())}evaluate(){const e=this.justifyWidth;this.contextGaps={total:0,gaps:[]},this.tickContexts.list.forEach(((e,t)=>{if(0===t)return;const n=this.tickContexts.list[t-1],i=this.tickContexts.map[n],s=this.tickContexts.map[e],r=i.getMetrics(),a=i.getX()+r.width,o=s.getX(),l=o-a;this.contextGaps.total+=l,this.contextGaps.gaps.push({x1:a,x2:o}),s.getFormatterMetrics().freedom.left=l,i.getFormatterMetrics().freedom.right=l}));const t=this.durationStats={};this.voices.forEach((n=>{n.getTickables().forEach(((n,i,s)=>{const r=n.getTicks().clone().simplify().toString(),a=n.getMetrics(),o=n.getFormatterMetrics(),l=n.getX()+a.noteWidth+a.modRightPx+a.extraRightPx;let c=0;if(i<s.length-1){const e=s[i+1],t=e.getMetrics();c=e.getX()-t.modLeftPx-t.extraLeftPx-l,o.space.used=e.getX()-n.getX(),e.getFormatterMetrics().freedom.left=c}else c=e-l,o.space.used=e-n.getX();o.freedom.right=c,function(e,n){const i=t[e];void 0===i?t[e]={mean:n,count:1}:(i.count+=1,i.mean=(i.mean+n)/2)}(r,o.space.used)}))}));let n=0;return this.voices.forEach((e=>{e.getTickables().forEach((e=>{const i=e.getTicks().clone().simplify().toString(),s=e.getFormatterMetrics();s.iterations+=1,s.space.deviation=s.space.used-t[i].mean,s.duration=i,s.space.mean=t[i].mean,n+=Math.pow(t[i].mean,2)}))})),this.totalCost=Math.sqrt(n),this.lossHistory.push(this.totalCost),this}tune(){let e=0;return this.tickContexts.list.forEach(((t,n,i)=>{const s=this.tickContexts.map[t],r=n>0?this.tickContexts.map[i[n-1]]:null,a=n<i.length-1?this.tickContexts.map[i[n+1]]:null;!function(e,t,n,i){e.setX(e.getX()+i),e.getFormatterMetrics().freedom.left+=i,e.getFormatterMetrics().freedom.right-=i,t&&(t.getFormatterMetrics().freedom.right+=i),n&&(n.getFormatterMetrics().freedom.left-=i)}(s,r,a,e);const o=-s.getTickables().map((e=>e.getFormatterMetrics().space.deviation)).reduce(((e,t)=>e+t));o>0?e=-Math.min(s.getFormatterMetrics().freedom.right,Math.abs(o)):o<0&&(e=a?Math.min(a.getFormatterMetrics().freedom.right,Math.abs(o)):0);const l=Math.min(5,Math.abs(e));e=e>0?l:-l})),this.evaluate()}postFormat(){const e=e=>e.list.forEach((t=>e.map[t].postFormat()));return e(this.modiferContexts),e(this.tickContexts),this}joinVoices(e){return this.createModifierContexts(e),this.hasMinTotalWidth=!1,this}format(e,t,n){const s={align_rests:!1,context:null,stave:null};return i.Merge(s,n),this.voices=e,this.alignRests(e,s.align_rests),this.createTickContexts(e),this.preFormat(t,s.context,e,s.stave),s.stave&&this.postFormat(),this}formatToStave(e,t,n){const s=t.getNoteEndX()-t.getNoteStartX()-10;!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];de.DEBUG&&i.L("Vex.Flow.Formatter",t)}("Formatting voices to width: ",s);const r={context:t.getContext()};return i.Merge(r,n),this.format(e,s,r)}}class fe extends c{static get Position(){return{LEFT:1,RIGHT:2,ABOVE:3,BELOW:4,BEGIN:5,END:6}}constructor(){super(),this.setAttribute("type","StaveModifier"),this.padding=10,this.position=fe.Position.ABOVE,this.layoutMetrics=null}getPosition(){return this.position}setPosition(e){return this.position=e,this}getStave(){return this.stave}setStave(e){return this.stave=e,this}getWidth(){return this.width}setWidth(e){return this.width=e,this}getX(){return this.x}setX(e){return this.x=e,this}getCategory(){return""}makeSpacer(e){return{getContext:()=>!0,setStave(){},renderToStave(){},getMetrics:()=>({width:e})}}placeGlyphOnLine(e,t,n){e.setYShift(t.getYForLine(n)-t.getYForGlyphs())}getPadding(e){return void 0!==e&&e<2?0:this.padding}setPadding(e){return this.padding=e,this}setLayoutMetrics(e){return this.layoutMetrics=e,this}getLayoutMetrics(){return this.layoutMetrics}}class pe extends fe{static get CATEGORY(){return"barlines"}static get type(){return{SINGLE:1,DOUBLE:2,END:3,REPEAT_BEGIN:4,REPEAT_END:5,REPEAT_BOTH:6,NONE:7,DOUBLE_HEAVY:8}}static get typeString(){return{single:pe.type.SINGLE,double:pe.type.DOUBLE,doubleheavy:pe.type.DOUBLE_HEAVY,end:pe.type.END,repeatBegin:pe.type.REPEAT_BEGIN,repeatEnd:pe.type.REPEAT_END,repeatBoth:pe.type.REPEAT_BOTH,none:pe.type.NONE}}constructor(e){super(),this.setAttribute("type","Barline"),this.thickness=m.STAVE_LINE_THICKNESS;const t=pe.type;this.widths={},this.widths[t.SINGLE]=5,this.widths[t.DOUBLE]=5,this.widths[t.DOUBLE_HEAVY]=5,this.widths[t.END]=5,this.widths[t.REPEAT_BEGIN]=5,this.widths[t.REPEAT_END]=5,this.widths[t.REPEAT_BOTH]=5,this.widths[t.NONE]=5,this.paddings={},this.paddings[t.SINGLE]=0,this.paddings[t.DOUBLE]=0,this.paddings[t.DOUBLE_HEAVY]=0,this.paddings[t.END]=0,this.paddings[t.REPEAT_BEGIN]=15,this.paddings[t.REPEAT_END]=15,this.paddings[t.REPEAT_BOTH]=15,this.paddings[t.NONE]=0,this.layoutMetricsMap={},this.layoutMetricsMap[t.SINGLE]={xMin:0,xMax:1,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.DOUBLE]={xMin:-3,xMax:1,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.DOUBLE_HEAVY]={xMin:-5,xMax:4,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.END]={xMin:-5,xMax:1,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.REPEAT_END]={xMin:-10,xMax:1,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.REPEAT_BEGIN]={xMin:-2,xMax:10,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.REPEAT_BOTH]={xMin:-10,xMax:10,paddingLeft:5,paddingRight:5},this.layoutMetricsMap[t.NONE]={xMin:0,xMax:0,paddingLeft:5,paddingRight:5},this.setPosition(fe.Position.BEGIN),this.setType(e)}getCategory(){return pe.CATEGORY}getType(){return this.type}setType(e){return this.type="string"==typeof e?pe.typeString[e]:e,this.setWidth(this.widths[this.type]),this.setPadding(this.paddings[this.type]),this.setLayoutMetrics(this.layoutMetricsMap[this.type]),this}draw(e){switch(e.checkContext(),this.setRendered(),this.type){case pe.type.SINGLE:this.drawVerticalBar(e,this.x,!1);break;case pe.type.DOUBLE:this.drawVerticalBar(e,this.x,!0);break;case pe.type.DOUBLE_HEAVY:this.drawVerticalBar(e,this.x,!0,!0);break;case pe.type.END:this.drawVerticalEndBar(e,this.x);break;case pe.type.REPEAT_BEGIN:this.drawRepeatBar(e,this.x,!0),e.getX()!==this.x&&this.drawVerticalBar(e,e.getX());break;case pe.type.REPEAT_END:this.drawRepeatBar(e,this.x,!1);break;case pe.type.REPEAT_BOTH:this.drawRepeatBar(e,this.x,!1),this.drawRepeatBar(e,this.x,!0)}}drawVerticalBar(e,t,n,i){e.checkContext();const s=e.getTopLineTopY(),r=e.getBottomLineBottomY();let a=1,o=1,l=t-3,c=t;i&&(a=3,o=3,l=t-5,c=t),n&&e.context.fillRect(l,s,a,r-s),e.context.fillRect(c,s,o,r-s)}drawVerticalEndBar(e,t){e.checkContext();const n=e.getTopLineTopY(),i=e.getBottomLineBottomY();e.context.fillRect(t-5,n,1,i-n),e.context.fillRect(t-2,n,3,i-n)}drawRepeatBar(e,t,n){e.checkContext();const i=e.getTopLineTopY(),s=e.getBottomLineBottomY();let r=3;n||(r=-5),e.context.fillRect(t+r,i,1,s-i),e.context.fillRect(t-2,i,3,s-i),n?r+=4:r-=4;const a=t+r+1;let o=(e.getNumLines()-1)*e.getSpacingBetweenLines();o=o/2-e.getSpacingBetweenLines()/2;let l=i+o+1;e.context.beginPath(),e.context.arc(a,l,2,0,2*Math.PI,!1),e.context.fill(),l+=e.getSpacingBetweenLines(),e.context.beginPath(),e.context.arc(a,l,2,0,2*Math.PI,!1),e.context.fill()}}class me extends fe{static get CATEGORY(){return"repetitions"}static get type(){return{NONE:1,CODA_LEFT:2,CODA_RIGHT:3,SEGNO_LEFT:4,SEGNO_RIGHT:5,DC:6,DC_AL_CODA:7,DC_AL_FINE:8,DS:9,DS_AL_CODA:10,DS_AL_FINE:11,FINE:12,TO_CODA:13}}constructor(e,t,n){super(),this.setAttribute("type","Repetition"),this.symbol_type=e,this.x=t,this.x_shift=0,this.y_shift=n,this.font={family:"times",size:12,weight:"bold italic"}}getCategory(){return me.CATEGORY}setShiftX(e){return this.x_shift=e,this}setShiftY(e){return this.y_shift=e,this}setX(e){return this.x=e,this}draw(e,t){switch(this.setRendered(),this.symbol_type){case me.type.CODA_RIGHT:this.drawCodaFixed(e,t+e.width);break;case me.type.CODA_LEFT:this.drawSymbolText(e,t,"Coda",!0);break;case me.type.SEGNO_LEFT:this.drawSignoFixed(e,t);break;case me.type.SEGNO_RIGHT:this.drawSignoFixed(e,t+e.width);break;case me.type.DC:this.drawSymbolText(e,t,"D.C.",!1);break;case me.type.DC_AL_CODA:this.drawSymbolText(e,t,"D.C. al",!0);break;case me.type.DC_AL_FINE:this.drawSymbolText(e,t,"D.C. al Fine",!1);break;case me.type.DS:this.drawSymbolText(e,t,"D.S.",!1);break;case me.type.DS_AL_CODA:this.drawSymbolText(e,t,"D.S. al",!0);break;case me.type.DS_AL_FINE:this.drawSymbolText(e,t,"D.S. al Fine",!1);break;case me.type.FINE:this.drawSymbolText(e,t,"Fine",!1);break;case me.type.TO_CODA:this.drawSymbolText(e,t,"To",!0)}return this}drawCodaFixed(e,t){const n=e.getYForTopText(e.options.num_lines)+this.y_shift;return p.renderGlyph(e.context,this.x+t+this.x_shift,n+25,40,"v4d",!0),this}drawSignoFixed(e,t){const n=e.getYForTopText(e.options.num_lines)+this.y_shift;return p.renderGlyph(e.context,this.x+t+this.x_shift,n+25,30,"v8c",!0),this}drawSymbolText(e,t,n,i){const s=e.checkContext();s.save(),s.setFont(this.font.family,this.font.size,this.font.weight);let r=0+this.x_shift,a=t+this.x_shift;if(this.symbol_type===me.type.CODA_LEFT?(r=this.x+this.x_shift,a=r+s.measureText(n).width+12):(this.x_shift=-(r+s.measureText(n).width+12+e.options.vertical_bar_width+12),r=this.x+this.x_shift+e.options.vertical_bar_width,a=r+s.measureText(n).width+12),this.xShiftAsPercentOfStaveWidth){const t=e.width*this.xShiftAsPercentOfStaveWidth;this.symbol_type!==me.type.DC_AL_FINE&&this.symbol_type!==me.type.FINE&&this.symbol_type!==me.type.DC&&this.symbol_type!==me.type.DS_AL_FINE&&this.symbol_type!==me.type.DS&&this.symbol_type!==me.type.FINE||(r+=t)}const o=e.getYForTopText(e.options.num_lines)+this.y_shift+25;return i&&p.renderGlyph(s,a,o,40,"v4d",!0),s.fillText(n,r,o+5),s.restore(),this}}class ge extends fe{static get CATEGORY(){return"stavesection"}constructor(e,t,n){super(),this.setAttribute("type","StaveSection"),this.setWidth(16),this.section=e,this.x=t,this.shift_x=0,this.shift_y=n,this.font={family:"sans-serif",size:12,weight:"bold"}}getCategory(){return ge.CATEGORY}setStaveSection(e){return this.section=e,this}setShiftX(e){return this.shift_x=e,this}setShiftY(e){return this.shift_y=e,this}draw(e,t){const n=e.checkContext();this.setRendered(),n.save(),n.lineWidth=2,n.setFont(this.font.family,this.font.size,this.font.weight);const i=n.measureText(""+this.section),s=i.width;let r=i.height;!r&&i.emHeightAscent>=0&&(r=i.emHeightAscent+2),r||(r=i.fontBoundingBoxAscent+3);let a=s+6;a<18&&(a=18);const o=r+this.font.size/10,l=e.getYForTopText(3)+19-1.15*o+this.shift_y;let c=this.x+t;return n.beginPath(),n.lineWidth=2,n.rect(c,l+r/4,a,o),n.stroke(),c+=(a-s)/2,n.fillText(""+this.section,c,l+o),n.restore(),this}}class be extends fe{static get CATEGORY(){return"stavetempo"}constructor(e,t,n){super(),this.setAttribute("type","StaveTempo"),this.tempo=e,this.position=O.Position.ABOVE,this.x=t,this.shift_x=10,this.shift_y=n,this.font={family:"times",size:14,weight:"bold"},this.render_options={glyph_font_scale:30}}getCategory(){return be.CATEGORY}setTempo(e){return this.tempo=e,this}setShiftX(e){return this.shift_x=e,this}setShiftY(e){return this.shift_y=e,this}draw(e,t){const n=e.checkContext();this.setRendered(),n.openGroup("stavetempo");const i=this.render_options,s=i.glyph_font_scale/38,r=this.tempo.name,a=this.tempo.duration,o=this.tempo.dots,l=this.tempo.bpm,c=this.font;let h=this.x+this.shift_x+t;const u=e.getYForTopText(1)+this.shift_y;if(n.save(),r&&(n.setFont(c.family,c.size,c.weight),n.fillText(r,h,u),h+=n.measureText(r).width),a&&l){n.setFont(c.family,c.size,"normal"),r&&(h+=n.measureText(" ").width,n.fillText("(",h,u),h+=n.measureText("(").width);const e=m.getGlyphProps(a);if(h+=3*s,p.renderGlyph(n,h,u,i.glyph_font_scale,e.code_head),h+=e.getWidth()*s,e.stem){let t=30;e.beam_count&&(t+=3*(e.beam_count-1)),t*=s;const r=u-t;n.fillRect(h-s,r,s,t),e.flag&&(p.renderGlyph(n,h,r,i.glyph_font_scale,e.code_flag_upstem),o||(h+=6*s))}for(let t=0;t<o;t++)h+=6*s,n.beginPath(),n.arc(h,u+2*s,2*s,0,2*Math.PI,!1),n.fill();n.openGroup("bpm"),n.fillText(" = "+l+(r?")":""),h+3*s,u),n.closeGroup()}return n.closeGroup(),n.restore(),this}}class ve extends L{static get Justification(){return{LEFT:1,CENTER:2,RIGHT:3}}static get GLYPHS(){return{segno:{code:"v8c",point:40,x_shift:0,y_shift:-10},tr:{code:"v1f",point:40,x_shift:0,y_shift:0},mordent_upper:{code:"v1e",point:40,x_shift:0,y_shift:0},mordent_lower:{code:"v45",point:40,x_shift:0,y_shift:0},f:{code:"vba",point:40,x_shift:0,y_shift:0},p:{code:"vbf",point:40,x_shift:0,y_shift:0},m:{code:"v62",point:40,x_shift:0,y_shift:0},s:{code:"v4a",point:40,x_shift:0,y_shift:0},z:{code:"v80",point:40,x_shift:0,y_shift:0},coda:{code:"v4d",point:40,x_shift:0,y_shift:-8},pedal_open:{code:"v36",point:40,x_shift:0,y_shift:0},pedal_close:{code:"v5d",point:40,x_shift:0,y_shift:3},caesura_straight:{code:"v34",point:40,x_shift:0,y_shift:2},caesura_curved:{code:"v4b",point:40,x_shift:0,y_shift:2},breath:{code:"v6c",point:40,x_shift:0,y_shift:0},tick:{code:"v6f",point:50,x_shift:0,y_shift:0},turn:{code:"v72",point:40,x_shift:0,y_shift:0},turn_inverted:{code:"v33",point:40,x_shift:0,y_shift:0},mordent:{code:"v1e",point:40,x_shift:0,y_shift:0}}}constructor(e){if(super(e),this.setAttribute("type","TextNote"),this.text=e.text,this.superscript=e.superscript,this.subscript=e.subscript,this.glyph_type=e.glyph,this.glyph=null,this.font={family:"Arial",size:12,weight:""},e.font&&(this.font=e.font),this.glyph_type){const e=ve.GLYPHS[this.glyph_type];if(!e)throw new i.RERR("Invalid glyph type: "+this.glyph_type);this.glyph=new p(e.code,e.point,{cache:!1}),e.width?this.setWidth(e.width):this.setWidth(this.glyph.getMetrics().width),this.glyph_struct=e}else this.setWidth(m.textWidth(this.text));this.line=e.line||0,this.smooth=e.smooth||!1,this.ignore_ticks=e.ignore_ticks||!1,this.justification=ve.Justification.LEFT}setJustification(e){return this.justification=e,this}setLine(e){return this.line=e,this}preFormat(){this.checkContext(),this.preFormatted||(this.smooth?this.setWidth(0):this.glyph||this.setWidth(this.context.measureText(this.text).width),this.justification===ve.Justification.CENTER?this.extraLeftPx=this.width/2:this.justification===ve.Justification.RIGHT&&(this.extraLeftPx=this.width),this.setPreFormatted(!0))}draw(){if(this.checkContext(),!this.stave)throw new i.RERR("NoStave","Can't draw without a stave.");this.setRendered();const e=this.context;let t,n=this.getAbsoluteX();if(this.justification===ve.Justification.CENTER?n-=this.getWidth()/2:this.justification===ve.Justification.RIGHT&&(n-=this.getWidth()),this.glyph)t=this.stave.getYForLine(this.line+-3),this.glyph.render(this.context,n+this.glyph_struct.x_shift,t+this.glyph_struct.y_shift);else{t=this.stave.getYForLine(this.line+-3),this.applyStyle(e),e.setFont(this.font.family,this.font.size,this.font.weight),e.fillText(this.text,n,t);const i=e.measureText("M").width,s=e.measureText(this.text).width;this.superscript&&(e.setFont(this.font.family,this.font.size/1.3,this.font.weight),e.fillText(this.superscript,n+s+2,t-i/2.2)),this.subscript&&(e.setFont(this.font.family,this.font.size/1.3,this.font.weight),e.fillText(this.subscript,n+s+2,t+i/2.2-1)),this.restoreStyle(e)}}}class ye extends fe{static get CATEGORY(){return"stavetext"}constructor(e,t,n){super(),this.setAttribute("type","StaveText"),this.setWidth(16),this.text=e,this.position=t,this.options={shift_x:0,shift_y:0,justification:ve.Justification.CENTER},i.Merge(this.options,n),this.font={family:"times",size:16,weight:"normal"}}getCategory(){return ye.CATEGORY}setStaveText(e){return this.text=e,this}setShiftX(e){return this.shift_x=e,this}setShiftY(e){return this.shift_y=e,this}setFont(e){i.Merge(this.font,e)}setText(e){this.text=e}draw(e){const t=e.checkContext();this.setRendered(),t.save(),t.lineWidth=2,t.setFont(this.font.family,this.font.size,this.font.weight);const n=t.measureText(""+this.text).width;let s,r;const a=fe.Position,o=ve.Justification;switch(this.position){case a.LEFT:case a.RIGHT:r=(e.getYForLine(0)+e.getBottomLineY())/2+this.options.shift_y,s=this.position===a.LEFT?e.getX()-n-24+this.options.shift_x:e.getX()+e.getWidth()+24+this.options.shift_x;break;case a.ABOVE:case a.BELOW:s=e.getX()+this.options.shift_x,this.options.justification===o.CENTER?s+=e.getWidth()/2-n/2:this.options.justification===o.RIGHT&&(s+=e.getWidth()-n),r=this.position===a.ABOVE?e.getYForTopText(2)+this.options.shift_y:e.getYForBottomText(2)+this.options.shift_y;break;default:throw new i.RERR("InvalidPosition","Value Must be in Modifier.Position.")}return t.fillText(""+this.text,s,r+4),t.restore(),this}}class xe extends fe{static get CATEGORY(){return"clefs"}static get types(){return{treble:{code:"v83",line:3},bass:{code:"v79",line:1},alto:{code:"vad",line:2},tenor:{code:"vad",line:1},percussion:{code:"v59",line:2},soprano:{code:"vad",line:4},"mezzo-soprano":{code:"vad",line:3},"baritone-c":{code:"vad",line:0},"baritone-f":{code:"v79",line:2},subbass:{code:"v79",line:0},french:{code:"v83",line:4},tab:{code:"v2f"}}}static get sizes(){return{default:{point:40,width:26},small:{point:32,width:20}}}static get annotations(){return{"8va":{code:"v8",sizes:{default:{point:20,attachments:{treble:{line:-1.2,x_shift:11}}},small:{point:18,attachments:{treble:{line:-.4,x_shift:8}}}}},"8vb":{code:"v8",sizes:{default:{point:20,attachments:{treble:{line:6.3,x_shift:10},bass:{line:4,x_shift:1}}},small:{point:18,attachments:{treble:{line:5.8,x_shift:6},bass:{line:3.5,x_shift:.5}}}}}}}constructor(e,t,n){super(),this.setAttribute("type","Clef"),this.setPosition(fe.Position.BEGIN),this.setType(e,t,n),this.setWidth(xe.sizes[this.size].width),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];xe.DEBUG&&i.L("Vex.Flow.Clef",t)}("Creating clef:",e)}getCategory(){return xe.CATEGORY}setType(e,t,n){if(this.type=e,this.clef=xe.types[e],this.size=void 0===t?"default":t,this.clef.point=xe.sizes[this.size].point,this.glyph=new p(this.clef.code,this.clef.point),void 0!==n){const e=xe.annotations[n];this.annotation={code:e.code,point:e.sizes[this.size].point,line:e.sizes[this.size].attachments[this.type].line,x_shift:e.sizes[this.size].attachments[this.type].x_shift},this.attachment=new p(this.annotation.code,this.annotation.point),this.attachment.metrics.x_max=0,this.attachment.setXShift(this.annotation.x_shift)}else this.annotation=void 0;return this}getWidth(){if("tab"===this.type&&!this.stave)throw new i.RERR("ClefError","Can't get width without stave.");return this.width}setStave(e){if(this.stave=e,"tab"!==this.type)return this;let t,n;const s=this.stave.getOptions().num_lines;switch(s){case 8:t=55,n=14;break;case 7:t=47,n=8;break;case 6:t=40,n=1;break;case 5:t=30,n=-6;break;case 4:t=23,n=-12;break;case 3:t=16,n=-18;break;default:throw new i.RERR("ClefError","Invalid number of lines: ".concat(s))}return this.glyph.setPoint(t),this.glyph.setYShift(n),this}draw(){if(!this.x)throw new i.RERR("ClefError","Can't draw clef without x.");if(!this.stave)throw new i.RERR("ClefError","Can't draw clef without stave.");this.setRendered(),this.glyph.setStave(this.stave),this.glyph.setContext(this.stave.context),void 0!==this.clef.line&&this.placeGlyphOnLine(this.glyph,this.stave,this.clef.line),this.stave.context.openGroup("clef"),this.glyph.renderToStave(this.x),void 0!==this.annotation&&(this.placeGlyphOnLine(this.attachment,this.stave,this.annotation.line),this.attachment.setStave(this.stave),this.attachment.setContext(this.stave.context),this.attachment.renderToStave(this.x)),this.stave.context.closeGroup()}}class Se extends fe{static get CATEGORY(){return"keysignatures"}static get accidentalSpacing(){return{"#":{above:6,below:4},b:{above:4,below:7},n:{above:4,below:1},"##":{above:6,below:4},bb:{above:4,below:7},db:{above:4,below:7},d:{above:4,below:7},bbs:{above:4,below:7},"++":{above:6,below:4},"+":{above:6,below:4},"+-":{above:6,below:4},"++-":{above:6,below:4},bs:{above:4,below:10},bss:{above:4,below:10}}}constructor(e,t,n){super(),this.setAttribute("type","KeySignature"),this.setKeySig(e,t,n),this.setPosition(fe.Position.BEGIN),this.glyphFontScale=38,this.glyphs=[],this.xPositions=[],this.paddingForced=!1}getCategory(){return Se.CATEGORY}convertToGlyph(e,t){const n=m.accidentalCodes(e.type),i=new p(n.code,this.glyphFontScale);let s=1;if("n"===e.type&&t){const n=Se.accidentalSpacing[t.type];n&&(s=t.line>=e.line?n.above:n.below)}this.placeGlyphOnLine(i,this.stave,e.line),this.glyphs.push(i);const r=this.xPositions[this.xPositions.length-1],a=i.getMetrics().width+s;this.xPositions.push(r+a),this.width+=a}cancelKey(e){return this.formatted=!1,this.cancelKeySpec=e,this}convertToCancelAccList(e){const t=m.keySignature(e),n=this.accList.length>0&&t.length>0&&t[0].type!==this.accList[0].type,i=n?t.length:t.length-this.accList.length;if(i<1)return;const s=[];for(let r=0;r<i;r++){let e=r;n||(e=t.length-i+r);const a=t[e];s.push({type:"n",line:a.line})}return this.accList=s.concat(this.accList),{accList:s,type:t[0].type}}addToStave(e){return this.paddingForced=!0,e.addModifier(this),this}convertAccLines(e,t){let n,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.accList,r=0;switch(e){case"soprano":"#"===t?n=[2.5,.5,2,0,1.5,-.5,1]:r=-1;break;case"mezzo-soprano":"b"===t?n=[0,2,.5,2.5,1,3,1.5]:r=1.5;break;case"alto":r=.5;break;case"tenor":"#"===t?n=[3,1,2.5,.5,2,0,1.5]:r=-.5;break;case"baritone-f":case"baritone-c":"b"===t?n=[.5,2.5,1,3,1.5,3.5,2]:r=2;break;case"bass":case"french":r=1}if(void 0!==n)for(i=0;i<s.length;++i)s[i].line=n[i];else if(0!==r)for(i=0;i<s.length;++i)s[i].line+=r}getPadding(e){return this.formatted||this.format(),0===this.glyphs.length||!this.paddingForced&&e<2?0:this.padding}getWidth(){return this.formatted||this.format(),this.width}setKeySig(e,t,n){return this.formatted=!1,this.keySpec=e,this.cancelKeySpec=t,this.alterKeySpec=n,this}alterKey(e){return this.formatted=!1,this.alterKeySpec=e,this}convertToAlterAccList(e){const t=Math.min(e.length,this.accList.length);for(let n=0;n<t;++n)e[n]&&(this.accList[n].type=e[n])}format(){if(!this.stave)throw new i.RERR("KeySignatureError","Can't draw key signature without stave.");this.width=0,this.glyphs=[],this.xPositions=[0],this.accList=m.keySignature(this.keySpec);const e=this.accList,t=e.length>0?e[0].type:null;let n;if(this.cancelKeySpec&&(n=this.convertToCancelAccList(this.cancelKeySpec)),this.alterKeySpec&&this.convertToAlterAccList(this.alterKeySpec),this.accList.length>0){const i=(this.position===fe.Position.END?this.stave.endClef:this.stave.clef)||this.stave.clef;n&&this.convertAccLines(i,n.type,n.accList),this.convertAccLines(i,t,e);for(let e=0;e<this.accList.length;++e)this.convertToGlyph(this.accList[e],this.accList[e+1])}this.formatted=!0}draw(){if(!this.x)throw new i.RERR("KeySignatureError","Can't draw key signature without x.");if(!this.stave)throw new i.RERR("KeySignatureError","Can't draw key signature without stave.");if(this.formatted||this.format(),this.setRendered(),this.glyphs.length>0){const e=this.stave.context.openGroup("keysignature");for(let t=0;t<this.glyphs.length;t++){const e=this.glyphs[t],n=this.x+this.xPositions[t];e.setStave(this.stave),e.setContext(this.stave.context),e.renderToStave(n)}this.hidden&&e&&e.setAttribute("visibility","hidden"),this.stave.context.closeGroup()}}}class we extends fe{static get CATEGORY(){return"timesignatures"}static get glyphs(){return{C:{code:"v41",point:40,line:2},"C|":{code:"vb6",point:40,line:2}}}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(super(),this.setAttribute("type","TimeSignature"),this.validate_args=n,null===e)return;const i=t;this.point=40,this.topLine=2,this.bottomLine=4,this.setPosition(fe.Position.BEGIN),this.setTimeSig(e),this.setWidth(this.timeSig.glyph.getMetrics().width),this.setPadding(i)}getCategory(){return we.CATEGORY}parseTimeSpec(e){if("C"===e||"C|"===e){const{line:t,code:n,point:i}=we.glyphs[e];return{line:t,num:!1,glyph:new p(n,i)}}this.validate_args&&(e=>{const t=e.split("/").filter((e=>""!==e));if(2!==t.length)throw new i.RERR("BadTimeSignature","Invalid time spec: ".concat(e,'. Must be in the form "<numerator>/<denominator>"'));t.forEach((t=>{if(isNaN(Number(t)))throw new i.RERR("BadTimeSignature","Invalid time spec: ".concat(e,". Must contain two valid numbers."))}))})(e);const[t,n]=e.split("/").map((e=>e.split("")));return{num:!0,glyph:this.makeTimeSignatureGlyph(t,n)}}makeTimeSignatureGlyph(e,t){const n=new p("v0",this.point);n.topGlyphs=[],n.botGlyphs=[];let i=0;for(let h=0;h<e.length;++h){const t=e[h],s=new p("v"+t,this.point);n.topGlyphs.push(s),i+=s.getMetrics().width}let s=0;for(let h=0;h<t.length;++h){const e=t[h],i=new p("v"+e,this.point);n.botGlyphs.push(i),s+=i.getMetrics().width}const r=i>s?i:s,a=n.getMetrics().x_min;n.getMetrics=()=>({x_min:a,x_max:a+r,width:r});const o=(r-i)/2,l=(r-s)/2,c=this;return n.renderToStave=function(e){let t=e+o;for(let n=0;n<this.topGlyphs.length;++n){const e=this.topGlyphs[n];p.renderOutline(this.context,e.metrics.outline,e.scale,t+e.x_shift,this.stave.getYForLine(c.topLine)),t+=e.getMetrics().width}t=e+l;for(let n=0;n<this.botGlyphs.length;++n){const e=this.botGlyphs[n];c.placeGlyphOnLine(e,this.stave,e.line),p.renderOutline(this.context,e.metrics.outline,e.scale,t+e.x_shift,this.stave.getYForLine(c.bottomLine)),t+=e.getMetrics().width}},n}getTimeSig(){return this.timeSig}setTimeSig(e){return this.timeSig=this.parseTimeSpec(e),this}draw(){if(!this.x)throw new i.RERR("TimeSignatureError","Can't draw time signature without x.");if(!this.stave)throw new i.RERR("TimeSignatureError","Can't draw time signature without stave.");this.setRendered(),this.timeSig.glyph.setStave(this.stave),this.timeSig.glyph.setContext(this.stave.context),this.placeGlyphOnLine(this.timeSig.glyph,this.stave,this.timeSig.line);const e=this.stave.context.openGroup("timesignature");this.timeSig.glyph.renderToStave(this.x),this.hidden&&e&&e.setAttribute("visibility","hidden"),this.stave.context.closeGroup("timesignature")}}class Ee extends fe{static get CATEGORY(){return"voltas"}static get type(){return{NONE:1,BEGIN:2,MID:3,END:4,BEGIN_END:5}}constructor(e,t,n,i){super(),this.setAttribute("type","Volta"),this.volta=e,this.x=n,this.y_shift=i,this.number=t,this.font={family:"sans-serif",size:9,weight:"bold"}}getCategory(){return Ee.CATEGORY}setShiftY(e){return this.y_shift=e,this}draw(e,t){const n=e.checkContext();this.setRendered();let i=e.width-t;const s=e.getYForTopText(e.options.num_lines)+this.y_shift,r=1.5*e.options.spacing_between_lines_px;switch(this.volta){case Ee.type.BEGIN:n.fillRect(this.x+t,s,1,r);break;case Ee.type.END:i-=5,n.fillRect(this.x+t+i,s,1,r);break;case Ee.type.BEGIN_END:i-=3,n.fillRect(this.x+t,s,1,r),n.fillRect(this.x+t+i,s,1,r)}return this.volta!==Ee.type.BEGIN&&this.volta!==Ee.type.BEGIN_END||(n.save(),n.setFont(this.font.family,this.font.size,this.font.weight),n.fillText(this.number,this.x+t+5,s+15),n.restore()),n.fillRect(this.x+t,s,i,1),this}}class _e extends c{constructor(e,t,n,s){super(),this.setAttribute("type","Stave"),this.x=e,this.y=t,this.width=n,this.formatted=!1,this.setStartX(e+5),this.end_x=e+n,this.modifiers=[],this.measure=0,this.clef="treble",this.endClef=void 0,this.font={family:"sans-serif",size:8,weight:""},this.options={vertical_bar_width:10,glyph_spacing_px:10,num_lines:5,fill_style:"#999999",left_bar:!0,right_bar:!0,spacing_between_lines_px:10,space_above_staff_ln:4,space_below_staff_ln:4,top_text_position:1},this.bounds={x:this.x,y:this.y,w:this.width,h:0},i.Merge(this.options,s),this.resetLines();const r=pe.type;this.addModifier(new pe(this.options.left_bar?r.SINGLE:r.NONE)),this.addEndModifier(new pe(this.options.right_bar?r.SINGLE:r.NONE))}space(e){return this.options.spacing_between_lines_px*e}resetLines(){this.options.line_config=[];for(let e=0;e<this.options.num_lines;e++)this.options.line_config.push({visible:!0});this.height=(this.options.num_lines+this.options.space_above_staff_ln)*this.options.spacing_between_lines_px,this.options.bottom_text_position=this.options.num_lines}formatBegModifiers(e){let t=0;e.forEach((e=>{e.getNoteStartX()>t&&(t=e.getNoteStartX())})),e.forEach((e=>{e.setNoteStartX(t)})),t=0,e.forEach((e=>{e.getModifiers(fe.Position.BEGIN,pe.CATEGORY).forEach((e=>{e.getType()==pe.type.REPEAT_BEGIN&&e.getX()>t&&(t=e.getX())}))})),e.forEach((e=>{e.getModifiers(fe.Position.BEGIN,pe.CATEGORY).forEach((e=>{e.getType()==pe.type.REPEAT_BEGIN&&e.setX(t)}))})),t=0,e.forEach((e=>{e.getModifiers(fe.Position.BEGIN,we.CATEGORY).forEach((e=>{e.getX()>t&&(t=e.getX())}))})),e.forEach((e=>{e.getModifiers(fe.Position.BEGIN,we.CATEGORY).forEach((e=>{e.setX(t)}))}))}getOptions(){return this.options}setNoteStartX(e){return this.formatted||this.format(),this.setStartX(e),this}setStartX(e){this.start_x=e}getNoteStartX(){return this.formatted||this.format(),this.start_x}getNoteEndX(){return this.formatted||this.format(),this.end_x}getTieStartX(){return this.start_x}getTieEndX(){return this.x+this.width}getX(){return this.x}getNumLines(){return this.options.num_lines}setNumLines(e){return this.options.num_lines=parseInt(e,10),this.resetLines(),this}setY(e){return this.y=e,this}getTopLineTopY(){return this.getYForLine(0)-m.STAVE_LINE_THICKNESS/2}getBottomLineBottomY(){return this.getYForLine(this.getNumLines()-1)+m.STAVE_LINE_THICKNESS/2}setX(e){const t=e-this.x;this.formatted=!1,this.x=e,this.start_x+=t,this.end_x+=t;for(let n=0;n<this.modifiers.length;n++){const e=this.modifiers[n];void 0!==e.x&&(e.x+=t)}return this}setWidth(e){return this.formatted=!1,this.width=e,this.end_x=this.x+e,this}getWidth(){return this.width}getStyle(){return s({fillStyle:this.options.fill_style,strokeStyle:this.options.fill_style,lineWidth:m.STAVE_LINE_THICKNESS},this.style||{})}setMeasure(e){return this.measure=e,this}getModifierXShift(){if("number"!=typeof(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0))throw new i.RERR("InvalidIndex","Must be of number type");if(this.formatted||this.format(),1===this.getModifiers(fe.Position.BEGIN).length)return 0;let e=this.start_x-this.x;const t=this.modifiers[0];return t.getType()===pe.type.REPEAT_BEGIN&&e>t.getWidth()&&(e-=t.getWidth()),e}setRepetitionTypeLeft(e,t){return this.modifiers.push(new me(e,this.x,t)),this}setRepetitionTypeRight(e,t){return this.modifiers.push(new me(e,this.x,t)),this}setVoltaType(e,t,n){return this.modifiers.push(new Ee(e,t,this.x,n)),this}setSection(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12;const s=new ge(e,this.x+n,t);return s.font.size=i,this.modifiers.push(s),this}setTempo(e,t){return this.modifiers.push(new be(e,this.x,t)),this}setText(e,t,n){return this.modifiers.push(new ye(e,t,n)),this}getHeight(){return this.height}getSpacingBetweenLines(){return this.options.spacing_between_lines_px}getBoundingBox(){return new u(this.x,this.y,this.width,this.getBottomY()-this.y)}getBottomY(){const e=this.options,t=e.spacing_between_lines_px;return this.getYForLine(e.num_lines)+e.space_below_staff_ln*t}getBottomLineY(){return this.getYForLine(this.options.num_lines)}getYForLine(e){const t=this.options,n=t.spacing_between_lines_px,i=t.space_above_staff_ln;return this.y+e*n+i*n}getLineForY(e){const t=this.options,n=t.spacing_between_lines_px,i=t.space_above_staff_ln;return(e-this.y)/n-i}getYForTopText(e){const t=e||0;return this.getYForLine(-t-this.options.top_text_position)}getYForBottomText(e){const t=e||0;return this.getYForLine(this.options.bottom_text_position+t)}getYForNote(e){const t=this.options,n=t.spacing_between_lines_px,i=t.space_above_staff_ln;return this.y+i*n+5*n-e*n}getYForGlyphs(){return this.getYForLine(3)}addModifier(e,t){return void 0!==t&&e.setPosition(t),e.setStave(this),this.formatted=!1,this.modifiers.push(e),this}addEndModifier(e){return this.addModifier(e,fe.Position.END),this}setBegBarType(e){const{SINGLE:t,REPEAT_BEGIN:n,NONE:i}=pe.type;return e!==t&&e!==n&&e!==i||(this.modifiers[0].setType(e),this.formatted=!1),this}setEndBarType(e){return e!==pe.type.REPEAT_BEGIN&&(this.modifiers[1].setType(e),this.formatted=!1),this}setClef(e,t,n,i){void 0===i&&(i=fe.Position.BEGIN),i===fe.Position.END?this.endClef=e:this.clef=e;const s=this.getModifiers(i,xe.CATEGORY);return 0===s.length?this.addClef(e,t,n,i):s[0].setType(e,t,n),this}setEndClef(e,t,n){return this.setClef(e,t,n,fe.Position.END),this}setKeySignature(e,t,n){void 0===n&&(n=fe.Position.BEGIN);const i=this.getModifiers(n,Se.CATEGORY);return 0===i.length?this.addKeySignature(e,t,n):i[0].setKeySig(e,t),this}setEndKeySignature(e,t){return this.setKeySignature(e,t,fe.Position.END),this}setTimeSignature(e,t,n){void 0===n&&(n=fe.Position.BEGIN);const i=this.getModifiers(n,we.CATEGORY);return 0===i.length?this.addTimeSignature(e,t,n):i[0].setTimeSig(e),this}setEndTimeSignature(e,t){return this.setTimeSignature(e,t,fe.Position.END),this}addKeySignature(e,t,n){return void 0===n&&(n=fe.Position.BEGIN),this.addModifier(new Se(e,t).setPosition(n),n),this}addClef(e,t,n,i){return void 0===i||i===fe.Position.BEGIN?this.clef=e:i===fe.Position.END&&(this.endClef=e),this.addModifier(new xe(e,t,n),i),this}addEndClef(e,t,n){return this.addClef(e,t,n,fe.Position.END),this}addTimeSignature(e,t,n){return this.addModifier(new we(e,t),n),this}addEndTimeSignature(e,t){return this.addTimeSignature(e,t,fe.Position.END),this}addTrebleGlyph(){return this.addClef("treble"),this}getModifiers(e,t){return void 0===e&&void 0===t?this.modifiers:this.modifiers.filter((n=>!(void 0!==e&&e!==n.getPosition()||void 0!==t&&t!==n.getCategory())))}sortByCategory(e,t){for(let n=e.length-1;n>=0;n--)for(let i=0;i<n;i++)if(t[e[i].getCategory()]>t[e[i+1].getCategory()]){const t=e[i];e[i]=e[i+1],e[i+1]=t}}format(){const e=this.modifiers[0],t=this.modifiers[1],n=this.getModifiers(fe.Position.BEGIN),i=this.getModifiers(fe.Position.END);let s,r,a;this.sortByCategory(n,{barlines:0,clefs:1,keysignatures:2,timesignatures:3}),this.sortByCategory(i,{timesignatures:0,keysignatures:1,barlines:2,clefs:3}),n.length>1&&e.getType()===pe.type.REPEAT_BEGIN&&(n.push(n.splice(0,1)[0]),n.splice(0,0,new pe(pe.type.SINGLE))),i.indexOf(t)>0&&i.splice(0,0,new pe(pe.type.NONE));let o=0,l=this.x;for(let u=0;u<n.length;u++){a=n[u],r=a.getPadding(u+o),s=a.getWidth(),isNaN(s)&&(a.setWidth(10),s=10),l+=r;const e=a.getX();e>l?l=e:a.setX(l),l+=s,r+s===0&&o--}l>this.start_x&&this.setStartX(l),l=this.x+this.width;const c={left:0,right:0,paddingRight:0,paddingLeft:0};let h=0;for(let u=0;u<i.length;u++){a=i[u],h="barlines"===a.getCategory()?u:h,c.right=0,c.left=0,c.paddingRight=0,c.paddingLeft=0;const e=a.getLayoutMetrics();e?(0!==u&&(c.right=e.xMax||0,c.paddingRight=e.paddingRight||0),c.left=-e.xMin||0,c.paddingLeft=e.paddingLeft||0,u===i.length-1&&(c.paddingLeft=0)):(c.paddingRight=a.getPadding(u-h)||0,0!==u&&(c.right=a.getWidth()||0),0===u&&(c.left=a.getWidth()||0)),l-=c.paddingRight,l-=c.right,a.setX(l),l-=c.left,l-=c.paddingLeft}this.end_x=1===i.length?this.x+this.width:l,this.formatted=!0}draw(){this.checkContext(),this.setRendered(),this.formatted||this.format();const e=this.options.num_lines,t=this.width,n=this.x;let i;for(let s=0;s<e;s++)i=this.getYForLine(s),this.applyStyle(),this.options.line_config[s].visible&&(this.context.beginPath(),this.context.moveTo(n,i),this.context.lineTo(n+t,i),this.context.stroke()),this.restoreStyle();for(let s=0;s<this.modifiers.length;s++)"function"==typeof this.modifiers[s].draw&&(this.modifiers[s].applyStyle(this.context),this.modifiers[s].draw(this,this.getModifierXShift(s)),this.modifiers[s].restoreStyle(this.context));if(this.measure>0){this.context.save(),this.context.setFont(this.font.family,this.font.size,this.font.weight);const e=this.context.measureText(""+this.measure).width;i=this.getYForTopText(0)+3,this.context.fillText(""+this.measure,this.x-e/2,i),this.context.restore()}return this}drawVertical(e,t){this.drawVerticalFixed(this.x+e,t)}drawVerticalFixed(e,t){this.checkContext();const n=this.getYForLine(0),i=this.getYForLine(this.options.num_lines-1);t&&this.context.fillRect(e-3,n,1,i-n+1),this.context.fillRect(e,n,1,i-n+1)}drawVerticalBar(e){this.drawVerticalBarFixed(this.x+e,!1)}drawVerticalBarFixed(e){this.checkContext();const t=this.getYForLine(0),n=this.getYForLine(this.options.num_lines-1);this.context.fillRect(e,t,1,n-t+1)}getConfigForLines(){return this.options.line_config}setConfigForLine(e,t){if(e>=this.options.num_lines||e<0)throw new i.RERR("StaveConfigError","The line number must be within the range of the number of lines in the Stave.");if(void 0===t.visible)throw new i.RERR("StaveConfigError","The line configuration object is missing the 'visible' property.");if("boolean"!=typeof t.visible)throw new i.RERR("StaveConfigError","The line configuration objects 'visible' property must be true or false.");return this.options.line_config[e]=t,this}setConfigForLines(e){if(e.length!==this.options.num_lines)throw new i.RERR("StaveConfigError","The length of the lines configuration array must match the number of lines in the Stave");for(const t in e)e[t]||(e[t]=this.options.line_config[t]),i.Merge(this.options.line_config[t],e[t]);return this.options.line_config=e,this}}class Te extends _e{constructor(e,t,n,s){const r={spacing_between_lines_px:13,num_lines:6,top_text_position:1};i.Merge(r,s),super(e,t,n,r),this.setAttribute("type","TabStave")}getYForGlyphs(){return this.getYForLine(2.5)}addTabGlyph(){return this.addClef("tab"),this}}class Me extends R{static get CATEGORY(){return"tabnotes"}constructor(e,t){if(super(e),this.setAttribute("type","TabNote"),this.ghost=!1,this.positions=e.positions,i.Merge(this.render_options,{glyph_font_scale:m.DEFAULT_TABLATURE_FONT_SCALE,draw_stem:t,draw_dots:t,draw_stem_through_stave:!1,y_shift:0,scale:1,font:"10pt Arial"}),this.glyph=m.getGlyphProps(this.duration,this.noteType),!this.glyph)throw new i.RuntimeError("BadArguments","Invalid note initialization data (No glyph found): ".concat(JSON.stringify(e)));this.buildStem(),e.stem_direction?this.setStemDirection(e.stem_direction):this.setStemDirection(w.UP),this.ghost=!1,this.updateWidth()}reset(){this.stave&&this.setStave(this.stave)}getCategory(){return Me.CATEGORY}setGhost(e){return this.ghost=e,this.updateWidth(),this}hasStem(){return this.render_options.draw_stem}getStemExtension(){const e=this.getGlyph();return null!=this.stem_extension_override?this.stem_extension_override:e?1===this.getStemDirection()?e.tabnote_stem_up_extension:e.tabnote_stem_down_extension:0}addDot(){const e=new D;return this.dots+=1,this.addModifier(e,0)}updateWidth(){this.glyphs=[],this.width=0;for(let t=0;t<this.positions.length;++t){var e;let n=this.positions[t].fret;this.ghost&&(n="("+n+")");const i=null!==(e=this.render_options.fretScale)&&void 0!==e?e:this.render_options.scale,s=m.tabToGlyph(n,i,this.render_options.TabUseXNoteheadAlternativeGlyph);"x"===n&&(s.isXGlyph=!0),this.glyphs.push(s),this.width=Math.max(s.getWidth(),this.width)}this.glyph.getWidth=()=>this.width}setStave(e){let t;if(super.setStave(e),this.context=e.context,this.context){const e=this.context;for(this.width=0,t=0;t<this.glyphs.length;++t){const n=this.glyphs[t],i=""+n.text;"X"!==i.toUpperCase()&&(e.save(),e.setRawFont(this.render_options.font),n.width=e.measureText(i).width,e.restore(),n.getWidth=()=>n.width),this.width=Math.max(n.getWidth(),this.width)}this.glyph.getWidth=()=>this.width}const n=this.positions.map((t=>{let{str:n}=t;return e.getYForLine(n-1)}));return this.setYs(n),this.stem&&this.stem.setYBounds(this.getStemY(),this.getStemY()),this}getPositions(){return this.positions}addToModifierContext(e){this.setModifierContext(e);for(let t=0;t<this.modifiers.length;++t)this.modifierContext.addModifier(this.modifiers[t]);return this.modifierContext.addModifier(this),this.preFormatted=!1,this}getTieRightX(){let e=this.getAbsoluteX();return e+=this.glyph.getWidth()/2,e+=-this.width/2+this.width+2,e}getTieLeftX(){let e=this.getAbsoluteX();return e+=this.glyph.getWidth()/2,e-=this.width/2+2,e}getModifierStartXY(e,t){if(!this.preFormatted)throw new i.RERR("UnformattedNote","Can't call GetModifierStartXY on an unformatted note");if(0===this.ys.length)throw new i.RERR("NoYValues","No Y-Values calculated for this note.");let n=0;return e===O.Position.LEFT?n=-2:e===O.Position.RIGHT?n=this.width+2:e!==O.Position.BELOW&&e!==O.Position.ABOVE||(n=this.glyph.getWidth()/2),{x:this.getAbsoluteX()+n,y:this.ys[t]}}getLineForRest(){return this.positions[0].str}preFormat(){this.preFormatted||(this.modifierContext&&this.modifierContext.preFormat(),this.setPreFormatted(!0))}getStemX(){return this.getCenterGlyphX()}getStemY(){const e=this.stave.getNumLines()-.5,t=w.UP===this.stem_direction?-.5:e;return this.stave.getYForLine(t)}getStemExtents(){return this.stem.getExtents()}drawFlag(){const{beam:e,glyph:t,context:n,stem:i,stem_direction:s,render_options:{draw_stem:r,glyph_font_scale:a}}=this,o=null==e&&r;if(t.flag&&o){const e=this.getStemX()+1,r=this.getStemY()-i.getHeight(),o=s===w.DOWN?t.code_flag_downstem:t.code_flag_upstem;p.renderGlyph(n,e,r,a,o)}}drawModifiers(){this.modifiers.forEach((e=>{("dots"!==e.getCategory()||this.render_options.draw_dots)&&(e.setContext(this.context),e.drawWithStyle())}))}drawStemThrough(){const e=this.getStemX(),t=this.getStemY(),n=this.context,i=this.render_options.draw_stem_through_stave;if(this.render_options.draw_stem&&i){const i=function(e,t){const n=[];let i=[];for(let s=1;s<=e;s++)t.indexOf(s)>-1?(n.push(i),i=[]):i.push(s);return i.length>0&&n.push(i),n}(this.stave.getNumLines(),this.positions.map((e=>e.str))),s=function(e,t,n,i){const s=1!==i,r=-1!==i,a=n.getSpacingBetweenLines(),o=n.getNumLines(),l=[];return t.forEach((t=>{const c=t.indexOf(o)>-1,h=t.indexOf(1)>-1;if(s&&h||r&&c)return;1===t.length&&t.push(t[0]);const u=[];t.forEach(((t,s,r)=>{const l=1===t,c=t===o;let h=n.getYForLine(t-1);0!==s||l?s!==r.length-1||c||(h+=a/2-1):h-=a/2-1,u.push(h),1===i&&l?u.push(e-2):-1===i&&c&&u.push(e+2)})),l.push(u.sort(((e,t)=>e-t)))})),l}(t,i,this.getStave(),this.getStemDirection());n.save(),n.setLineWidth(w.WIDTH),s.forEach((t=>{0!==t.length&&(n.beginPath(),n.moveTo(e,t[0]),n.lineTo(e,t[t.length-1]),n.stroke(),n.closePath())})),n.restore()}}drawPositions(){const e=this.context,t=this.getAbsoluteX(),n=this.ys;for(let i=0;i<this.positions.length;++i){const s=n[i]+this.render_options.y_shift,r=this.glyphs[i];let a=r.getWidth();0===a&&r.text&&r.text.toString()&&r.text.toString().length&&(a=7*r.text.toString().length);let o=this.glyph.getWidth();0===o&&(o=a);const l=t+o/2-a/2;if(this.BackgroundColor?(e.save(),e.setFillStyle(this.BackgroundColor),e.setLineWidth(0),e.fillRect(l-2,s-3,a+4,6),e.restore()):e.clearRect(l-2,s-3,a+4,6),r.code)p.renderGlyph(e,l,s,this.render_options.glyph_font_scale*this.render_options.scale,r.code);else{e.save(),e.setRawFont(this.render_options.font);const t=r.text.toString();e.fillText(t,l,s+5*this.render_options.scale),e.restore()}}}draw(){if(this.checkContext(),!this.stave)throw new i.RERR("NoStave","Can't draw without a stave.");if(0===this.ys.length)throw new i.RERR("NoYValues","Can't draw note without Y values.");this.setRendered();const e=null==this.beam&&this.render_options.draw_stem;this.context.openGroup("tabnote",this.getAttribute("id"),{pointerBBox:!0}),this.drawPositions(),this.drawStemThrough();const t=this.getStemX();this.stem.setNoteHeadXBounds(t,t),e&&(this.context.openGroup("stem",null,{pointerBBox:!0}),this.stem.setContext(this.context).draw(),this.context.closeGroup()),this.drawFlag(),this.drawModifiers(),this.context.closeGroup()}}class Ce extends c{constructor(e){super(),this.setAttribute("type","VibratoBracket"),this.start=e.start,this.stop=e.stop,this.line=1,this.render_options={harsh:!1,wave_height:6,wave_width:4,wave_girth:2}}setLine(e){return this.line=e,this}setHarsh(e){return this.render_options.harsh=e,this}draw(){const e=this.context;this.setRendered();const t=this.start?this.start.getStave().getYForTopText(this.line):this.stop.getStave().getYForTopText(this.line),n=this.start?this.start.getAbsoluteX():this.stop.getStave().getTieStartX(),s=this.stop?this.stop.getAbsoluteX()-this.stop.getWidth()-5:this.start.getStave().getTieEndX()-10;this.render_options.vibrato_width=s-n,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Ce.DEBUG&&i.L("Vex.Flow.VibratoBracket",t)}("Rendering VibratoBracket: start_x:",n,"stop_x:",s,"y:",t),oe.renderVibrato(e,n,t,this.render_options)}}let Ae;class Pe extends c{constructor(e,t){super(),this.setAttribute("type","MultiMeasureRest"),this.render_options={show_number:!0,number_line:-.5,number_glyph_point:40,padding_left:void 0,padding_right:void 0,line:2,spacing_between_lines_px:10,line_thickness:void 0,serif_thickness:2,use_symbols:!1,symbol_spacing:void 0,semibrave_rest_glyph_scale:m.DEFAULT_NOTATION_FONT_SCALE},i.Merge(this.render_options,t),this.number_of_measures=e,this.xs={left:NaN,right:NaN}}getXs(){return this.xs}setStave(e){return this.stave=e,this}getStave(){return this.stave}drawLine(e,t,n,i){const s=this.stave.getYForLine(this.render_options.line),r=.1*(n-t);t+=r,n-=r;const a=this.render_options.serif_thickness;let o=.25*i;isNaN(this.render_options.line_thickness)||(o=.5*this.render_options.line_thickness),e.save(),e.beginPath(),e.moveTo(t,s-i),e.lineTo(t+a,s-i),e.lineTo(t+a,s-o),e.lineTo(n-a,s-o),e.lineTo(n-a,s-i),e.lineTo(n,s-i),e.lineTo(n,s+i),e.lineTo(n-a,s+i),e.lineTo(n-a,s+o),e.lineTo(t+a,s+o),e.lineTo(t+a,s+i),e.lineTo(t,s+i),e.closePath(),e.fill()}drawSymbols(e,t,n,i){const s=Math.floor(this.number_of_measures/4),r=this.number_of_measures%4,a=Math.floor(r/2),o=r%2,l=function(){if(!Ae){const e=new I({duration:"w",note_type:"r"});Ae={glyph_font_scale:e.render_options.glyph_font_scale,glyph_code:e.glyph_code,width:e.getWidth()}}return Ae}(),c=l.width*(this.render_options.semibrave_rest_glyph_scale/l.glyph_font_scale),h={2:{width:.5*c,height:i},1:{width:c}};let u=1.35*c;isNaN(this.render_options.symbol_spacing)||(u=this.render_options.symbol_spacing);let d=t+.5*(n-t)-.5*(s*h[2].width+a*h[2].width+o*h[1].width+(s+a+o-1)*u);const f=this.stave.getYForLine(this.render_options.line-1),m=this.stave.getYForLine(this.render_options.line),g=this.stave.getYForLine(this.render_options.line+1);e.save(),e.setStrokeStyle("none"),e.setLineWidth(0);for(let p=0;p<s;++p)e.fillRect(d,m-h[2].height,h[2].width,h[2].height),e.fillRect(d,g-h[2].height,h[2].width,h[2].height),d+=h[2].width+u;for(let p=0;p<a;++p)e.fillRect(d,m-h[2].height,h[2].width,h[2].height),d+=h[2].width+u;for(let b=0;b<o;++b)p.renderGlyph(e,d,f,this.render_options.semibrave_rest_glyph_scale,l.glyph_code),d+=h[1].width+u;e.restore()}draw(){this.checkContext(),this.setRendered();const e=this.context,t=this.stave,n=this.render_options.spacing_between_lines_px;let i=t.getNoteStartX(),s=t.getNoteEndX();const r=t.getModifiers(fe.Position.BEGIN);if(1===r.length&&"barlines"===r[0].getCategory()&&(i-=r[0].getWidth()),isNaN(this.render_options.padding_left)||(i=t.getX()+this.render_options.padding_left),isNaN(this.render_options.padding_right)||(s=t.getX()+t.getWidth()-this.render_options.padding_right),this.xs.left=i,this.xs.right=s,this.render_options.use_symbols?this.drawSymbols(e,i,s,n):this.drawLine(e,i,s,n),this.render_options.show_number){const n="/"+this.number_of_measures,r=new we(null,void 0,!1);r.point=this.render_options.number_glyph_point,r.setTimeSig(n),r.setStave(t),r.x=i+.5*(s-i)-.5*r.timeSig.glyph.getMetrics().width,r.bottomLine=this.render_options.number_line,r.setContext(e).draw()}}}class Ne extends L{static get CATEGORY(){return"clefnote"}constructor(e,t,n){super({duration:"b"}),this.setAttribute("type","ClefNote"),this.setType(e,t,n),this.ignore_ticks=!0}setType(e,t,n){return this.type=e,this.clef_obj=new xe(e,t,n),this.clef=this.clef_obj.clef,this.glyph=new p(this.clef.code,this.clef.point),this.setWidth(this.glyph.getMetrics().width),this}getClef(){return this.clef}setContext(e){return this.context=e,this.glyph.setContext(this.context),this}getBoundingBox(){return super.getBoundingBox()}addToModifierContext(){return this}getCategory(){return Ne.CATEGORY}preFormat(){return this.setPreFormatted(!0),this}draw(){if(!this.stave)throw new i.RERR("NoStave","Can't draw without a stave.");this.glyph.getContext()||this.glyph.setContext(this.context),this.setRendered();const e=this.getAbsoluteX();if(this.glyph.setStave(this.stave),this.glyph.setYShift(this.stave.getYForLine(this.clef.line)-this.stave.getYForGlyphs()),this.glyph.renderToStave(e),void 0!==this.clef_obj.annotation){const t=new p(this.clef_obj.annotation.code,this.clef_obj.annotation.point);t.getContext()||t.setContext(this.context),t.setStave(this.stave),t.setYShift(this.stave.getYForLine(this.clef_obj.annotation.line)-this.stave.getYForGlyphs()),t.setXShift(this.clef_obj.annotation.x_shift),t.renderToStave(e)}}}class ke extends L{constructor(e,t,n){super({duration:"b"}),this.setAttribute("type","KeySigNote"),this.keySignature=new Se(e,t,n),this.ignore_ticks=!0}getBoundingBox(){return super.getBoundingBox()}addToModifierContext(){return this}preFormat(){return this.setPreFormatted(!0),this.keySignature.setStave(this.stave),this.keySignature.format(),this.setWidth(this.keySignature.width),this}draw(){this.stave.checkContext(),this.setRendered(),this.keySignature.x=this.getAbsoluteX(),this.keySignature.setContext(this.context),this.keySignature.draw()}}class Le extends L{constructor(e,t){super({duration:"b"}),this.setAttribute("type","TimeSigNote");const n=new we(e,t);this.timeSig=n.getTimeSig(),this.setWidth(this.timeSig.glyph.getMetrics().width),this.ignore_ticks=!0}getBoundingBox(){return super.getBoundingBox()}addToModifierContext(){return this}preFormat(){return this.setPreFormatted(!0),this}draw(){this.stave.checkContext(),this.setRendered(),this.timeSig.glyph.getContext()||this.timeSig.glyph.setContext(this.context),this.timeSig.glyph.setStave(this.stave),this.timeSig.glyph.setYShift(this.stave.getYForLine(this.timeSig.line)-this.stave.getYForGlyphs()),this.timeSig.glyph.renderToStave(this.getAbsoluteX())}}class Ie extends X{static get SLIDE_UP(){return 1}static get SLIDE_DOWN(){return-1}static createSlideUp(e){return new Ie(e,Ie.SLIDE_UP)}static createSlideDown(e){return new Ie(e,Ie.SLIDE_DOWN)}constructor(e,t){if(super(e,"sl."),this.setAttribute("type","TabSlide"),!t){const n=e.first_note.getPositions()[0].fret,i=e.last_note.getPositions()[0].fret;t=parseInt(n,10)>parseInt(i,10)?Ie.SLIDE_DOWN:Ie.SLIDE_UP}this.slide_direction=t,this.render_options.cp1=11,this.render_options.cp2=14,this.render_options.y_shift=.5,this.setFont({font:"Times",size:10,style:"bold italic"}),this.setNotes(e)}renderTie(e){if(0===e.first_ys.length||0===e.last_ys.length)throw new i.RERR("BadArguments","No Y-values to render");const t=this.context,n=e.first_x_px,s=e.first_ys,r=e.last_x_px,a=this.slide_direction;if(a!==Ie.SLIDE_UP&&a!==Ie.SLIDE_DOWN)throw new i.RERR("BadSlide","Invalid slide direction");for(let o=0;o<this.first_indices.length;++o){const e=s[this.first_indices[o]]+this.render_options.y_shift;if(isNaN(e))throw new i.RERR("BadArguments","Bad indices for slide rendering.");t.beginPath(),t.moveTo(n,e+3*a),t.lineTo(r,e-3*a),t.closePath(),t.stroke()}this.setRendered()}}class Re extends B{static get CATEGORY(){return"gracenotes"}static get LEDGER_LINE_OFFSET(){return 2}static get SCALE(){return.66}constructor(e){super(Object.assign(e,{glyph_font_scale:m.DEFAULT_NOTATION_FONT_SCALE*Re.SCALE,stroke_px:Re.LEDGER_LINE_OFFSET})),this.setAttribute("type","GraceNote"),this.slash=e.slash,this.slur=!0,this.buildNoteHeads(),this.width=3}getStemExtension(){if(null!=this.stem_extension_override)return this.stem_extension_override;const e=this.getGlyph();if(e){let t=super.getStemExtension();if(e.stem){const e=this.getStaveNoteScale();t=(w.HEIGHT+t)*e-w.HEIGHT}return t}return 0}getCategory(){return Re.CATEGORY}getStaveNoteScale(){return this.render_options.glyph_font_scale/m.DEFAULT_NOTATION_FONT_SCALE}draw(){super.draw(),this.setRendered();const e=this.stem;if(this.slash&&e){const t=this.getStaveNoteScale(),n=t/.66;let i;const s=this.beam;if(s)s.postFormatted||s.postFormat(),i=this.calcBeamedNotesSlashBBox(8*n,8*n,{stem:6*n,beam:5*n});else{const s=this.getStemDirection(),r=this.getNoteHeadBounds(),a=e.getHeight();let o=this.getAbsoluteX(),l=s===m.Stem.DOWN?r.y_top-a:r.y_bottom-a;const c=s===m.Stem.DOWN?this.glyph.stem_down_extension:this.glyph.stem_up_extension;let h=m.STEM_HEIGHT;h-=h/2.8,h+=c,l+=h*t*s;const u=s===m.Stem.UP?{x1:1,y1:0,x2:13,y2:-9}:{x1:-4,y1:1,x2:13,y2:9};o+=u.x1*n,l+=u.y1*n,i={x1:o,y1:l,x2:o+u.x2*n,y2:l+u.y2*n}}const r=this.context;r.save(),r.setLineWidth(1*n),r.beginPath(),r.moveTo(i.x1,i.y1),r.lineTo(i.x2,i.y2),r.closePath(),r.stroke(),r.restore()}}calcBeamedNotesSlashBBox(e,t,n){const i=this.beam,s=i.slope,r=i.notes[i.notes.length-1]===this?-1:1,a=Math.atan(s*r),o=Math.cos(a)*t,l=Math.sin(a)*t;e*=this.getStemDirection();const c=Math.atan((l-e)/o),h=Math.cos(c)*n.stem*r,u=Math.sin(c)*n.stem,d=Math.cos(c)*n.beam*r,f=Math.sin(c)*n.beam,p=this.getStemX(),m=i.notes[0].getStemX(),g=this.beam.getBeamYToDraw()+(p-m)*s;return{x1:p-h,y1:g+e-u,x2:p+o*r+d,y2:g+l+f}}}class Oe extends Me{static get CATEGORY(){return"gracetabnotes"}constructor(e){super(e,!1),this.setAttribute("type","GraceTabNote"),i.Merge(this.render_options,{y_shift:.3,scale:.6,font:"7.5pt Arial"}),this.updateWidth()}getCategory(){return Oe.CATEGORY}draw(){super.draw(),this.setRendered()}}class De{static get names(){return{standard:"E/5,B/4,G/4,D/4,A/3,E/3",dagdad:"D/5,A/4,G/4,D/4,A/3,D/3",dropd:"E/5,B/4,G/4,D/4,A/3,D/3",eb:"Eb/5,Bb/4,Gb/4,Db/4,Ab/3,Db/3",standardBanjo:"D/5,B/4,G/4,D/4,G/5"}}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"E/5,B/4,G/4,D/4,A/3,E/3,B/2,E/2";this.setTuning(e)}noteToInteger(e){return m.keyProperties(e).int_value}setTuning(e){De.names[e]&&(e=De.names[e]),this.tuningString=e,this.tuningValues=[],this.numStrings=0;const t=e.split(/\s*,\s*/);if(0===t.length)throw new i.RERR("BadArguments","Invalid tuning string: "+e);this.numStrings=t.length;for(let n=0;n<this.numStrings;++n)this.tuningValues[n]=this.noteToInteger(t[n])}getValueForString(e){const t=parseInt(e,10);if(t<1||t>this.numStrings)throw new i.RERR("BadArguments","String number must be between 1 and ".concat(this.numStrings,":").concat(e));return this.tuningValues[t-1]}getValueForFret(e,t){const n=this.getValueForString(t),s=parseInt(e,10);if(s<0)throw new i.RERR("BadArguments","Fret number must be 0 or higher: "+e);return n+s}getNoteForFret(e,t){const n=this.getValueForFret(e,t),i=Math.floor(n/12),s=n%12;return m.integerToNote(s)+"/"+i}}class Fe extends c{static get type(){return{CRESC:1,DECRESC:2}}static FormatByTicksAndDraw(e,t,n,s,r,a){const o=t.pixelsPerTick;if(null==o)throw new i.RuntimeError("BadArguments","A valid Formatter must be provide to draw offsets by ticks.");const l=o*a.left_shift_ticks,c=o*a.right_shift_ticks,h={height:a.height,y_shift:a.y_shift,left_shift_px:l,right_shift_px:c};new Fe({first_note:n.first_note,last_note:n.last_note},s).setContext(e).setRenderOptions(h).setPosition(r).draw()}constructor(e,t){super(),this.setAttribute("type","StaveHairpin"),this.notes=e,this.hairpin=t,this.position=O.Position.BELOW,this.render_options={height:10,y_shift:0,left_shift_px:0,right_shift_px:0},this.setNotes(e)}setPosition(e){return e!==O.Position.ABOVE&&e!==O.Position.BELOW||(this.position=e),this}setRenderOptions(e){return null!=e.height&&null!=e.y_shift&&null!=e.left_shift_px&&null!=e.right_shift_px&&(this.render_options=e),this}setNotes(e){if(!e.first_note&&!e.last_note)throw new i.RuntimeError("BadArguments","Hairpin needs to have either first_note or last_note set.");return this.first_note=e.first_note,this.last_note=e.last_note,this}renderHairpin(e){const t=this.checkContext();let n=this.render_options.y_shift+20,i=e.first_y;this.position===O.Position.ABOVE&&(n=30-n,i=e.first_y-e.staff_height);const s=this.render_options.left_shift_px,r=this.render_options.right_shift_px;switch(t.beginPath(),this.hairpin){case Fe.type.CRESC:t.moveTo(e.last_x+r,i+n),t.lineTo(e.first_x+s,i+this.render_options.height/2+n),t.lineTo(e.last_x+r,i+this.render_options.height+n);break;case Fe.type.DECRESC:t.moveTo(e.first_x+s,i+n),t.lineTo(e.last_x+r,i+this.render_options.height/2+n),t.lineTo(e.first_x+s,i+this.render_options.height+n)}t.stroke(),t.closePath()}draw(){this.checkContext(),this.setRendered();const e=this.first_note,t=this.last_note,n=e.getModifierStartXY(this.position,0),i=t.getModifierStartXY(this.position,0);return this.renderHairpin({first_x:n.x,last_x:i.x,first_y:e.getStave().y+e.getStave().height,last_y:t.getStave().y+t.getStave().height,staff_height:e.getStave().height}),!0}}class Be extends c{static get Position(){return{NEAR_HEAD:1,NEAR_TOP:2}}static get PositionString(){return{nearHead:Be.Position.NEAR_HEAD,nearTop:Be.Position.NEAR_TOP}}constructor(e,t,n){super(),this.setAttribute("type","Curve"),this.render_options={spacing:2,thickness:2,x_shift:0,y_shift:10,position:Be.Position.NEAR_HEAD,position_end:Be.Position.NEAR_HEAD,invert:!1,cps:[{x:0,y:10},{x:0,y:10}]},i.Merge(this.render_options,n),this.setNotes(e,t)}setNotes(e,t){if(!e&&!t)throw new i.RuntimeError("BadArguments","Curve needs to have either first_note or last_note set.");return this.from=e,this.to=t,this}isPartial(){return!this.from||!this.to}renderCurve(e){const t=this.context,n=this.render_options.cps,i=this.render_options.x_shift,s=this.render_options.y_shift*e.direction,r=e.first_x+i,a=e.first_y+s,o=e.last_x-i,l=e.last_y+s,c=this.render_options.thickness,h=(o-r)/(n.length+2);t.beginPath(),t.moveTo(r,a),t.bezierCurveTo(r+h+n[0].x,a+n[0].y*e.direction,o-h+n[1].x,l+n[1].y*e.direction,o,l),t.bezierCurveTo(o-h+n[1].x,l+(n[1].y+c)*e.direction,r+h+n[0].x,a+(n[0].y+c)*e.direction,r,a),t.stroke(),t.closePath(),t.fill()}draw(){this.checkContext(),this.setRendered();const e=this.from,t=this.to;let n,i,s,r,a,o="baseY",l="baseY";function c(e){return"string"==typeof e?Be.PositionString[e]:e}const h=c(this.render_options.position),u=c(this.render_options.position_end);return h===Be.Position.NEAR_TOP&&(o="topY",l="topY"),u===Be.Position.NEAR_HEAD?l="baseY":u===Be.Position.NEAR_TOP&&(l="topY"),e?(n=e.getTieRightX(),a=e.getStemDirection(),s=e.getStemExtents()[o]):(n=t.getStave().getTieStartX(),s=t.getStemExtents()[o]),t?(i=t.getTieLeftX(),a=t.getStemDirection(),r=t.getStemExtents()[l]):(i=e.getStave().getTieEndX(),r=e.getStemExtents()[l]),this.renderCurve({first_x:n,last_x:i,first_y:s,last_y:r,direction:a*(!0===this.render_options.invert?-1:1)}),!0}}function je(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Ve.DEBUG&&i.L("Vex.Flow.TextDynamics",t)}class Ve extends L{static get GLYPHS(){return{f:{code:"vba",width:12},p:{code:"vbf",width:14},m:{code:"v62",width:17},s:{code:"v4a",width:10},z:{code:"v80",width:12},r:{code:"vb1",width:12}}}constructor(e){super(e),this.setAttribute("type","TextDynamics"),this.sequence=e.text.toLowerCase(),this.line=e.line||0,this.glyphs=[],i.Merge(this.render_options,{glyph_font_size:40}),je("New Dynamics Text: ",this.sequence)}setLine(e){return this.line=e,this}preFormat(){let e=0;return this.sequence.split("").forEach((t=>{const n=Ve.GLYPHS[t];if(!n)throw new i.RERR("Invalid dynamics character: "+t);const s=this.render_options.glyph_font_size,r=new p(n.code,s);this.glyphs.push(r),e+=n.width})),this.setWidth(e),this.preFormatted=!0,this}draw(){this.setRendered();const e=this.getAbsoluteX(),t=this.stave.getYForLine(this.line+-3);je("Rendering Dynamics: ",this.sequence);let n=e;this.glyphs.forEach(((e,i)=>{const s=this.sequence[i];e.render(this.context,n,t),n+=Ve.GLYPHS[s].width}))}}function Ge(e,t,n,i,s,r,a){e.beginPath(),e.moveTo(t,n),e.lineTo(i,s),e.lineTo(r,a),e.lineTo(t,n),e.closePath(),e.fill()}class We extends c{static get TextVerticalPosition(){return{TOP:1,BOTTOM:2}}static get TextJustification(){return{LEFT:1,CENTER:2,RIGHT:3}}constructor(e){super(),this.setAttribute("type","StaveLine"),this.notes=e,this.text="",this.font={family:"Arial",size:10,weight:""},this.render_options={padding_left:4,padding_right:3,line_width:1,line_dash:null,rounded_end:!0,color:null,draw_start_arrow:!1,draw_end_arrow:!1,arrowhead_length:10,arrowhead_angle:Math.PI/8,text_position_vertical:We.TextVerticalPosition.TOP,text_justification:We.TextJustification.CENTER},this.setNotes(e)}setFont(e){return this.font=e,this}setText(e){return this.text=e,this}setNotes(e){if(!e.first_note&&!e.last_note)throw new i.RuntimeError("BadArguments","Notes needs to have either first_note or last_note set.");if(e.first_indices||(e.first_indices=[0]),e.last_indices||(e.last_indices=[0]),e.first_indices.length!==e.last_indices.length)throw new i.RuntimeError("BadArguments","Connected notes must have similar index sizes");return this.first_note=e.first_note,this.first_indices=e.first_indices,this.last_note=e.last_note,this.last_indices=e.last_indices,this}applyLineStyle(){const e=this.checkContext(),t=this.render_options;t.line_dash&&e.setLineDash(t.line_dash),t.line_width&&e.setLineWidth(t.line_width),t.rounded_end?e.setLineCap("round"):e.setLineCap("square")}applyFontStyle(){const e=this.checkContext();this.font&&e.setFont(this.font.family,this.font.size,this.font.weight),this.render_options.color&&(e.setStrokeStyle(this.render_options.color),e.setFillStyle(this.render_options.color))}draw(){const e=this.checkContext();this.setRendered();const t=this.first_note,n=this.last_note,i=this.render_options;let s,r;e.save(),this.applyLineStyle(),this.first_indices.forEach(((a,o)=>{const l=this.last_indices[o];s=t.getModifierStartXY(2,a),r=n.getModifierStartXY(1,l);const c=s.y>r.y;s.x+=t.getMetrics().modRightPx+i.padding_left,r.x-=n.getMetrics().modLeftPx+i.padding_right;const h=t.getGlyph().getWidth();t.getKeyProps()[a].displaced&&1===t.getStemDirection()&&(s.x+=h+i.padding_left),n.getKeyProps()[l].displaced&&-1===n.getStemDirection()&&(r.x-=h+i.padding_right),s.y+=c?-3:1,r.y+=c?2:0,function(e,t,n,i){const s=i.draw_start_arrow&&i.draw_end_arrow,r=t.x,a=t.y,o=n.x,l=n.y,c=Math.sqrt((o-r)*(o-r)+(l-a)*(l-a)),h=(c-i.arrowhead_length/3)/c;let u,d,f,p;i.draw_end_arrow||s?(u=Math.round(r+(o-r)*h),d=Math.round(a+(l-a)*h)):(u=o,d=l),i.draw_start_arrow||s?(f=r+(o-r)*(1-h),p=a+(l-a)*(1-h)):(f=r,p=a),i.color&&(e.setStrokeStyle(i.color),e.setFillStyle(i.color)),e.beginPath(),e.moveTo(f,p),e.lineTo(u,d),e.stroke(),e.closePath();const m=Math.atan2(l-a,o-r),g=Math.abs(i.arrowhead_length/Math.cos(i.arrowhead_angle));let b,v,y,x,S,w;(i.draw_end_arrow||s)&&(b=m+Math.PI+i.arrowhead_angle,y=o+Math.cos(b)*g,x=l+Math.sin(b)*g,v=m+Math.PI-i.arrowhead_angle,S=o+Math.cos(v)*g,w=l+Math.sin(v)*g,Ge(e,y,x,o,l,S,w)),(i.draw_start_arrow||s)&&(b=m+i.arrowhead_angle,y=r+Math.cos(b)*g,x=a+Math.sin(b)*g,v=m-i.arrowhead_angle,S=r+Math.cos(v)*g,w=a+Math.sin(v)*g,Ge(e,y,x,r,a,S,w))}(e,s,r,this.render_options)})),e.restore();const a=e.measureText(this.text).width,o=i.text_justification;let l,c=0;o===We.TextJustification.LEFT?c=s.x:o===We.TextJustification.CENTER?c=(r.x-s.x)/2+s.x-a/2:o===We.TextJustification.RIGHT&&(c=r.x-a);const h=i.text_position_vertical;return h===We.TextVerticalPosition.TOP?l=t.getStave().getYForTopText():h===We.TextVerticalPosition.BOTTOM&&(l=t.getStave().getYForBottomText(m.TEXT_HEIGHT_OFFSET_HACK)),e.save(),this.applyFontStyle(),e.fillText(this.text,c,l),e.restore(),this}}function ze(e,t,n,i,s){const r=Ue.GLYPHS[e];new p(r.code,s).render(t,n+r.x_shift,i+r.y_shift)}class Ue extends c{static get GLYPHS(){return{pedal_depress:{code:"v36",x_shift:-10,y_shift:0},pedal_release:{code:"v5d",x_shift:-2,y_shift:3}}}static get Styles(){return{TEXT:1,BRACKET:2,MIXED:3,MIXED_OPEN_END:4,BRACKET_OPEN_BEGIN:5,BRACKET_OPEN_END:6,BRACKET_OPEN_BOTH:7}}static get StylesString(){return{text:Ue.Styles.TEXT,bracket:Ue.Styles.BRACKET,mixed:Ue.Styles.MIXED,mixed_open_end:Ue.Styles.MIXED_OPEN_END,bracket_open_begin:Ue.Styles.BRACKET_OPEN_BEGIN,bracket_open_end:Ue.Styles.BRACKET_OPEN_END,bracket_open_both:Ue.Styles.BRACKET_OPEN_BOTH}}static createSustain(e){return new Ue(e)}static createSostenuto(e){const t=new Ue(e);return t.setStyle(Ue.Styles.MIXED),t.setCustomText("Sost. Ped."),t}static createUnaCorda(e){const t=new Ue(e);return t.setStyle(Ue.Styles.TEXT),t.setCustomText("una corda","tre corda"),t}constructor(e){super(),this.setAttribute("type","PedalMarking"),this.EndsStave=!1,this.ChangeBegin=!1,this.ChangeEnd=!1,this.notes=e,this.style=Ue.TEXT,this.line=0,this.custom_depress_text="",this.custom_release_text="",this.font={family:"Times New Roman",size:12,weight:"italic bold"},this.render_options={bracket_height:10,text_margin_right:6,bracket_line_width:1,glyph_point_size:40,color:"black"}}setEndStave(e){if(this.endStave=e,this.endStaveAddedWidth=0,this.startMargin=0,this.endMargin=0,Array.isArray(this.endStave.modifiers))for(let t=0;t<this.endStave.modifiers.length;t++){let e=this.endStave.modifiers[t];e&&e.position===fe.Position.END&&e.width&&(this.endStaveAddedWidth+=e.width)}}setCustomText(e,t){return this.custom_depress_text=e||"",this.custom_release_text=t||"",this}setStyle(e){if(e<1&&e>3)throw new i.RERR("InvalidParameter","The style must be one found in PedalMarking.Styles");return this.style=e,this}setLine(e){return this.line=e,this}drawBracketed(){const e=this.context;let t,n,i=!1;const s=this;this.notes.forEach(((r,a,o)=>{i=!i;let l=0;if(r?(l=r.getNoteHeadBeginX(),this.BeginsStave&&(l=r.getStave().getNoteStartX())):l=this.endStave.end_x+this.endStaveAddedWidth,this.EndsStave)i?this.ChangeBegin&&(l=r.getAbsoluteX()):(l=r?this.ChangeEnd?r.getAbsoluteX():r.getStave().end_x+this.endStaveAddedWidth-s.render_options.text_margin_right:this.endStave.end_x+this.endStaveAddedWidth-s.render_options.text_margin_right,this.endMargin=-s.render_options.text_margin_right);else if(r)if(i)this.ChangeBegin&&(l=r.getAbsoluteX());else switch(s.style){case Ue.Styles.BRACKET_OPEN_END:case Ue.Styles.BRACKET_OPEN_BOTH:case Ue.Styles.MIXED_OPEN_END:l=r.getNoteHeadEndX();break;default:this.ChangeEnd?l=r.getAbsoluteX():(l=r.getNoteHeadBeginX()-s.render_options.text_margin_right,this.startMargin=-s.render_options.text_margin_right)}let c=this.endStave;r&&(c=r.getStave());let h=c.getYForBottomText(s.line+3);n&&n>h&&(h=n);const u=o[a+1]===r,d=o[a-1]===r;let f=0;if(i)if(f=d?5:0,s.style!==Ue.Styles.MIXED&&s.style!==Ue.Styles.MIXED_OPEN_END||d)e.beginPath(),s.style===Ue.Styles.BRACKET_OPEN_BEGIN||s.style===Ue.Styles.BRACKET_OPEN_BOTH?e.moveTo(l+f,h):(this.ChangeBegin&&(l+=5),e.moveTo(l,h-s.render_options.bracket_height),this.ChangeBegin&&(l+=5),e.lineTo(l+f,h)),e.stroke(),e.closePath();else if(s.custom_depress_text){const t=e.measureText(s.custom_depress_text).width;e.fillText(s.custom_depress_text,l-t/2,h),f=t/2+s.render_options.text_margin_right}else ze("pedal_depress",e,l,h,s.render_options.glyph_point_size),f=20+s.render_options.text_margin_right;else f=u&&!this.EndsStave?-5:0,e.beginPath(),e.moveTo(t,n),e.lineTo(l+f,h),s.style!==Ue.Styles.BRACKET_OPEN_END&&s.style!==Ue.Styles.MIXED_OPEN_END&&s.style!==Ue.Styles.BRACKET_OPEN_BOTH&&(this.ChangeEnd&&(l+=5),e.lineTo(l,h-s.render_options.bracket_height)),e.stroke(),e.closePath();t=l+f,n=h}))}drawText(){const e=this.context;let t=!1;const n=this,i=n.render_options.glyph_point_size;this.notes.forEach((s=>{if(!s)return;t=!t;const r=s.getStave(),a=s.getAbsoluteX(),o=r.getYForBottomText(n.line+3);let l=0;t?n.custom_depress_text?(l=e.measureText(n.custom_depress_text).width,e.fillText(n.custom_depress_text,a-l/2,o)):ze("pedal_depress",e,a,o,i):n.custom_release_text?(l=e.measureText(n.custom_release_text).width,e.fillText(n.custom_release_text,a-l/2,o)):ze("pedal_release",e,a,o,i)}))}draw(){const e=this.checkContext();this.setRendered(),e.save(),e.setStrokeStyle(this.render_options.color),e.setFillStyle(this.render_options.color),e.setFont(this.font.family,this.font.size,this.font.weight),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Ue.DEBUG&&i.L("Vex.Flow.PedalMarking",t)}("Rendering Pedal Marking"),this.style===Ue.Styles.BRACKET||this.style===Ue.Styles.MIXED||this.style===Ue.Styles.MIXED_OPEN_END||this.style===Ue.Styles.BRACKET_OPEN_BEGIN||this.style===Ue.Styles.BRACKET_OPEN_END||this.style===Ue.Styles.BRACKET_OPEN_BOTH?(e.setLineWidth(this.render_options.bracket_line_width),this.drawBracketed()):this.style===Ue.Styles.TEXT&&this.drawText(),e.restore()}}class He extends c{static get Positions(){return{TOP:1,BOTTOM:-1}}static get PositionString(){return{top:He.Positions.TOP,bottom:He.Positions.BOTTOM}}constructor(e){let{start:t,stop:n,text:i="",superscript:s="",position:r=He.Positions.TOP}=e;super(),this.setAttribute("type","TextBracket"),this.start=t,this.stop=n,this.text=i,this.superscript=s,this.position="string"==typeof r?He.PositionString[r]:r,this.line=1,this.font={family:"Serif",size:15,weight:"italic"},this.render_options={dashed:!0,dash:[5],color:"black",line_width:1,show_bracket:!0,bracket_height:8,underline_superscript:!0}}applyStyle(e){return e.setFont(this.font.family,this.font.size,this.font.weight),e.setStrokeStyle(this.render_options.color),e.setFillStyle(this.render_options.color),e.setLineWidth(this.render_options.line_width),this}setDashed(e,t){return this.render_options.dashed=e,t&&(this.render_options.dash=t),this}setFont(e){return this.font=s(s({},this.font),e),this}setLine(e){return this.line=e,this}draw(){const e=this.context;this.setRendered();let t=0;switch(this.position){case He.Positions.TOP:t=this.start.getStave().getYForTopText(this.line);break;case He.Positions.BOTTOM:t=this.start.getStave().getYForBottomText(this.line+m.TEXT_HEIGHT_OFFSET_HACK);break;default:throw new i.RERR("InvalidPosition","The position ".concat(this.position," is invalid"))}const n={x:this.start.getAbsoluteX(),y:t},s={x:this.stop.getAbsoluteX(),y:t};!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];He.DEBUG&&i.L("Vex.Flow.TextBracket",t)}("Rendering TextBracket: start:",n,"stop:",s,"y:",t);const r=this.render_options.bracket_height*this.position;e.save(),this.applyStyle(e),e.fillText(this.text,n.x,n.y);let a=e.measureText(this.text).width;a>0||(a=10*this.text.length);let o=e.measureText("M").width;o>0||(o=20);const l=n.y-o/2.5;e.setFont(this.font.family,this.font.size/1.4,this.font.weight),e.fillText(this.superscript,n.x+a+1,l);let c=e.measureText(this.superscript).width;c>0||(c=12,this.superscript.includes("m")&&(c+=5));let h=e.measureText("M").width;h>0||(h=10);let u=n.x,d=l,f=s.x+this.stop.getGlyph().getWidth();this.position===He.Positions.TOP?(u+=a+c+5,d-=h/2.7):this.position===He.Positions.BOTTOM&&(d+=h/2.7,u+=a+2,this.render_options.underline_superscript||(u+=c)),this.render_options.dashed?(f<u+5&&this.position===He.Positions.TOP?f=u+5:f<u+c&&this.position===He.Positions.BOTTOM&&(f=u+c),S.drawDashedLine(e,u,d,f,d,this.render_options.dash),this.render_options.show_bracket&&S.drawDashedLine(e,f,d+1*this.position,f,d+r,this.render_options.dash)):(e.beginPath(),e.moveTo(u,d),e.lineTo(f,d),this.render_options.show_bracket&&e.lineTo(f,d+r),e.stroke(),e.closePath()),e.restore()}}class Xe extends L{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe.type.SINGLE;super({duration:"b"}),this.setAttribute("type","BarNote"),this.metrics={widths:{}};const t=pe.type;this.metrics.widths={[t.SINGLE]:8,[t.DOUBLE]:12,[t.END]:15,[t.REPEAT_BEGIN]:14,[t.REPEAT_END]:14,[t.REPEAT_BOTH]:18,[t.NONE]:0},this.ignore_ticks=!0,this.setType(e)}getType(){return this.type}setType(e){return this.type="string"==typeof e?pe.typeString[e]:e,this.setWidth(this.metrics.widths[this.type]),this}getBoundingBox(){return super.getBoundingBox()}addToModifierContext(){return this}preFormat(){return this.setPreFormatted(!0),this}draw(){if(this.checkContext(),!this.stave)throw new i.RERR("NoStave","Can't draw without a stave.");!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Xe.DEBUG&&i.L("Vex.Flow.BarNote",t)}("Rendering bar line at: ",this.getAbsoluteX());const e=new pe(this.type);e.setX(this.getAbsoluteX()),e.draw(this.stave),this.setRendered()}}class Ye extends R{constructor(e){if(!e)throw new i.RuntimeError("BadArguments","Ghost note must have valid initialization data to identify duration.");let t;if("string"==typeof e)t={duration:e};else{if("object"!=typeof e)throw new i.RuntimeError("BadArguments","Ghost note must have valid initialization data to identify duration.");t=e}super(t),this.setAttribute("type","GhostNote"),this.setWidth(0)}isRest(){return!0}setStave(e){super.setStave(e)}addToModifierContext(){return this}preFormat(){return this.setPreFormatted(!0),this}draw(){if(!this.stave)throw new i.RERR("NoStave","Can't draw without a stave.");this.setRendered();for(let e=0;e<this.modifiers.length;++e){const t=this.modifiers[e];t.setContext(this.context),t.drawWithStyle()}}}class qe extends O{static get CATEGORY(){return"tremolo"}static get YOFFSETSTEMUP(){return-9}static get YOFFSETSTEMDOWN(){return-21}static get XOFFSETSTEMUP(){return 6}static get XOFFSETSTEMDOWN(){return-2}constructor(e){super(),this.setAttribute("type","Tremolo"),this.num=e,this.note=null,this.index=null,this.position=O.Position.CENTER,this.code="v74",this.y_spacing_scale=1,this.extra_stroke_scale=1,this.y_offset_for_beam=5}getCategory(){return qe.CATEGORY}draw(){if(this.checkContext(),!this.note||null==this.index)throw new i.RERR("NoAttachedNote","Can't draw Tremolo without a note and index.");this.setRendered();const e=this.note.getStemDirection();this.y_spacing=4*e*this.y_spacing_scale;let t=this.note.getModifierStartXY(this.position,this.index).x,n=this.note.stem.getExtents().topY,s="gracenotes"===this.note.getCategory()?Re.SCALE:1;s*=this.extra_stroke_scale,n+=e<0?qe.YOFFSETSTEMDOWN*s:qe.YOFFSETSTEMUP*s,this.note.beam&&(n+=this.y_offset_for_beam*e),this.font={family:"Arial",size:16*s,weight:""},this.render_options={font_scale:35*s,stroke_px:3,stroke_spacing:10*s},t+=e<0?qe.XOFFSETSTEMDOWN:qe.XOFFSETSTEMUP;for(let i=0;i<this.num;++i)p.renderGlyph(this.context,t,n,this.render_options.font_scale,this.code),n+=this.y_spacing}}class Ke extends L{constructor(e){super(e),this.setAttribute("type","Crescendo"),this.decrescendo=!1,this.line=e.line||0,this.height=15,i.Merge(this.render_options,{extend_left:0,extend_right:0,y_shift:0})}setLine(e){return this.line=e,this}setHeight(e){return this.height=e,this}setDecrescendo(e){return this.decrescendo=e,this}preFormat(){return this.preFormatted=!0,this}draw(){this.checkContext(),this.setRendered();const e=this.getTickContext(),t=$.getNextContext(e),n=this.getAbsoluteX(),s=t?t.getX():this.stave.x+this.stave.width,r=this.stave.getYForLine(this.line+-3)+1;!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Ke.DEBUG&&i.L("Vex.Flow.Crescendo",t)}("Drawing ",this.decrescendo?"decrescendo ":"crescendo ",this.height,"x",n-s),function(e,t){const n=t.begin_x,i=t.end_x,s=t.y,r=t.height/2;e.beginPath(),t.reverse?(e.moveTo(n,s-r),e.lineTo(i,s),e.lineTo(n,s+r)):(e.moveTo(i,s-r),e.lineTo(n,s),e.lineTo(i,s+r)),e.stroke(),e.closePath()}(this.context,{begin_x:n-this.render_options.extend_left,end_x:s+this.render_options.extend_right,y:r+this.render_options.y_shift,height:this.height,reverse:this.decrescendo})}}const $e=i.MakeException("ParserError");function Ze(e){return void 0!==e.matchedString?e.matchedString:e.results?Ze(e.results):1===e.length?Ze(e[0]):0===e.length?null:e.map(Ze)}class Qe{constructor(e){this.grammar=e}parse(e){this.line=e,this.pos=0,this.errorPos=-1;const t=this.expect(this.grammar.begin());return t.errorPos=this.errorPos,t}matchFail(e){-1===this.errorPos&&(this.errorPos=this.pos),this.pos=e}matchSuccess(){this.errorPos=-1}matchToken(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?new RegExp("^(("+e+"))"):new RegExp("^(("+e+")\\s*)"),n=this.line.slice(this.pos).match(t);return null!==n?{success:!0,matchedString:n[2],incrementPos:n[1].length,pos:this.pos}:{success:!1,pos:this.pos}}expectOne(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[],i=this.pos;let s=!0,r=!1;t=!0===t||!0===e.maybe;for(let l=0;l<e.expect.length;l++){const t=e.expect[l],i=this.pos,a=this.expect(t);if(a.success){if(n.push(a),r=!0,e.or)break}else if(s=!1,!e.or){this.pos=i;break}}const a=e.or&&r||s,o=a||!0===t;return t&&!a&&(this.pos=i),o?this.matchSuccess():this.matchFail(i),{success:o,results:n,numMatches:a?1:0}}expectOneOrMore(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=[],i=this.pos;let s=0,r=!0;do{const t=this.expectOne(e);t.success?(s++,n.push(t.results)):r=!1}while(r);const a=s>0||!0===t;return!t||s>0||(this.pos=i),a?this.matchSuccess():this.matchFail(i),{success:a,results:n,numMatches:s}}expectZeroOrMore(e){return this.expectOneOrMore(e,!0)}expect(e){let t;if(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Qe.DEBUG&&i.L("Vex.Flow.Parser",t)}("Evaluating rules:",e),!e)throw new $e("Invalid Rule: "+e,e);const n=e.bind(this.grammar)();if(n.token)t=this.matchToken(n.token,!0===n.noSpace),t.success&&(this.pos+=t.incrementPos);else{if(!n.expect)throw new $e("Bad grammar! No `token` or `expect` property",n);t=n.oneOrMore?this.expectOneOrMore(n):n.zeroOrMore?this.expectZeroOrMore(n):this.expectOne(n)}return t.matches=[],t.results&&t.results.forEach((e=>t.matches.push(Ze(e)))),n.run&&t.success&&n.run(t),t}}function Je(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];rt.DEBUG&&i.L("Vex.Flow.EasyScore",t)}const et=i.MakeException("EasyScoreError");class tt{constructor(e){this.builder=e}begin(){return this.LINE}LINE(){return{expect:[this.PIECE,this.PIECES,this.EOL]}}PIECE(){return{expect:[this.CHORDORNOTE,this.PARAMS],run:()=>this.builder.commitPiece()}}PIECES(){return{expect:[this.COMMA,this.PIECE],zeroOrMore:!0}}PARAMS(){return{expect:[this.DURATION,this.TYPE,this.DOTS,this.OPTS]}}CHORDORNOTE(){return{expect:[this.CHORD,this.SINGLENOTE],or:!0}}CHORD(){return{expect:[this.LPAREN,this.NOTES,this.RPAREN],run:e=>this.builder.addChord(e.matches[1])}}NOTES(){return{expect:[this.NOTE],oneOrMore:!0}}NOTE(){return{expect:[this.NOTENAME,this.ACCIDENTAL,this.OCTAVE]}}SINGLENOTE(){return{expect:[this.NOTENAME,this.ACCIDENTAL,this.OCTAVE],run:e=>this.builder.addSingleNote(e.matches[0],e.matches[1],e.matches[2])}}ACCIDENTAL(){return{expect:[this.ACCIDENTALS],maybe:!0}}DOTS(){return{expect:[this.DOT],zeroOrMore:!0,run:e=>this.builder.setNoteDots(e.matches[0])}}TYPE(){return{expect:[this.SLASH,this.MAYBESLASH,this.TYPES],maybe:!0,run:e=>this.builder.setNoteType(e.matches[2])}}DURATION(){return{expect:[this.SLASH,this.DURATIONS],maybe:!0,run:e=>this.builder.setNoteDuration(e.matches[1])}}OPTS(){return{expect:[this.LBRACKET,this.KEYVAL,this.KEYVALS,this.RBRACKET],maybe:!0}}KEYVALS(){return{expect:[this.COMMA,this.KEYVAL],zeroOrMore:!0}}KEYVAL(){return{expect:[this.KEY,this.EQUALS,this.VAL],run:e=>this.builder.addNoteOption(e.matches[0],e.matches[2].slice(1,-1))}}VAL(){return{expect:[this.SVAL,this.DVAL],or:!0}}KEY(){return{token:"[a-zA-Z][a-zA-Z0-9]*"}}DVAL(){return{token:'["][^"]*["]'}}SVAL(){return{token:"['][^']*[']"}}NOTENAME(){return{token:"[a-gA-G]"}}OCTAVE(){return{token:"[0-9]+"}}ACCIDENTALS(){return{token:"bbs|bb|bss|bs|b|db|d|##|#|n|\\+\\+-|\\+-|\\+\\+|\\+|k|o"}}DURATIONS(){return{token:"[0-9whq]+"}}TYPES(){return{token:"[rRsSxX]"}}LPAREN(){return{token:"[(]"}}RPAREN(){return{token:"[)]"}}COMMA(){return{token:"[,]"}}DOT(){return{token:"[.]"}}SLASH(){return{token:"[/]"}}MAYBESLASH(){return{token:"[/]?"}}EQUALS(){return{token:"[=]"}}LBRACKET(){return{token:"\\["}}RBRACKET(){return{token:"\\]"}}EOL(){return{token:"$"}}}class nt{constructor(e){this.factory=e,this.commitHooks=[],this.reset()}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={stem:"auto",clef:"treble"},this.elements={notes:[],accidentals:[]},this.rollingDuration="8",this.resetPiece(),Object.assign(this.options,e)}getFactory(){return this.factory}getElements(){return this.elements}addCommitHook(e){this.commitHooks.push(e)}resetPiece(){Je("resetPiece"),this.piece={chord:[],duration:this.rollingDuration,dots:0,type:void 0,options:{}}}setNoteDots(e){Je("setNoteDots:",e),e&&(this.piece.dots=e.length)}setNoteDuration(e){Je("setNoteDuration:",e),this.rollingDuration=this.piece.duration=e||this.rollingDuration}setNoteType(e){Je("setNoteType:",e),e&&(this.piece.type=e)}addNoteOption(e,t){Je("addNoteOption: key:",e,"value:",t),this.piece.options[e]=t}addNote(e,t,n){Je("addNote:",e,t,n),this.piece.chord.push({key:e,accid:t,octave:n})}addSingleNote(e,t,n){Je("addSingleNote:",e,t,n),this.addNote(e,t,n)}addChord(e){Je("startChord"),"object"!=typeof e[0]?this.addSingleNote(e[0]):e.forEach((e=>{e&&this.addNote(...e)})),Je("endChord")}commitPiece(){Je("commitPiece");const{factory:e}=this;if(!e)return;const t=s(s({},this.options),this.piece.options),{stem:n,clef:i}=t,r="auto"===n.toLowerCase(),a=r||"up"!==n.toLowerCase()?B.STEM_DOWN:B.STEM_UP,{chord:o,duration:l,dots:c,type:h}=this.piece,u=o.map((e=>e.key+"/"+e.octave)),d=e.StaveNote({keys:u,duration:l,dots:c,type:h,clef:i,auto_stem:r});r||d.setStemDirection(a);const f=o.map((e=>e.accid||null));f.forEach(((t,n)=>{t&&d.addAccidental(n,e.Accidental({type:t}))}));for(let s=0;s<c;s++)d.addDotToAll();this.commitHooks.forEach((e=>e(t,d,this))),this.elements.notes.push(d),this.elements.accidentals.concat(f),this.resetPiece()}}function it(e,t){let{id:n}=e;void 0!==n&&t.setAttribute("id",n)}function st(e,t){e.class&&e.class.split(/\s*,\s*/).forEach((e=>t.addClass(e)))}class rt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setOptions(e),this.defaults={clef:"treble",time:"4/4",stem:"auto"}}set(e){return Object.assign(this.defaults,e),this}setOptions(e){return this.options=s({factory:null,builder:null,commitHooks:[it,st,ie.easyScoreHook],throwOnError:!1},e),this.factory=this.options.factory,this.builder=this.options.builder||new nt(this.factory),this.grammar=new tt(this.builder),this.parser=new Qe(this.grammar),this.options.commitHooks.forEach((e=>this.addCommitHook(e))),this}setContext(e){return this.factory&&this.factory.setContext(e),this}parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.builder.reset(t);const n=this.parser.parse(e);if(!n.success&&this.options.throwOnError)throw new et("Error parsing line: "+e,n);return n}beam(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.factory.Beam({notes:e,options:t}),e}tuplet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.factory.Tuplet({notes:e,options:t}),e}notes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=s({clef:this.defaults.clef,stem:this.defaults.stem},t),this.parse(e,t),this.builder.getElements().notes}voice(e,t){return t=s({time:this.defaults.time},t),this.factory.Voice(t).addTickables(e)}addCommitHook(e){return this.builder.addCommitHook(e)}}const at=i.MakeException("FactoryError");function ot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n=t.options;return(e=Object.assign(t,e)).options=Object.assign(n,e.options),e}class lt{constructor(e){!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];lt.DEBUG&&i.L("Vex.Flow.Factory",t)}("New factory: ",e);const t={stave:{space:10},renderer:{context:null,elementId:"",backend:S.Backends.SVG,width:500,height:200,background:"#FFF"},font:{face:"Arial",point:10,style:""}};this.options=t,this.setOptions(e)}static newFromElementId(e){return new lt({renderer:{elementId:e,width:arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,height:arguments.length>2&&void 0!==arguments[2]?arguments[2]:200}})}reset(){this.renderQ=[],this.systems=[],this.staves=[],this.voices=[],this.stave=null}getOptions(){return this.options}setOptions(e){for(const t of["stave","renderer","font"])Object.assign(this.options[t],e[t]);(null!==this.options.renderer.elementId||this.options.renderer.context)&&this.initRenderer(),this.reset()}initRenderer(){const{elementId:e,backend:t,width:n,height:i,background:s}=this.options.renderer;if(""===e)throw new at("HTML DOM element not set in Factory");this.context=S.buildContext(e,t,n,i,s)}getContext(){return this.context}setContext(e){return this.context=e,this}getStave(){return this.stave}getVoices(){return this.voices}space(e){return this.options.stave.space*e}Stave(e){e=ot(e,{x:0,y:0,width:this.options.renderer.width-this.space(1),options:{spacing_between_lines_px:this.options.stave.space}});const t=new _e(e.x,e.y,e.width,e.options);return this.staves.push(t),t.setContext(this.context),this.stave=t,t}TabStave(e){e=ot(e,{x:0,y:0,width:this.options.renderer.width-this.space(1),options:{spacing_between_lines_px:1.3*this.options.stave.space}});const t=new Te(e.x,e.y,e.width,e.options);return this.staves.push(t),t.setContext(this.context),this.stave=t,t}StaveNote(e){const t=new B(e);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}GhostNote(e){const t=new Ye(e);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}TextNote(e){const t=new ve(e);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}BarNote(e){e=ot(e,{type:"single",options:{}});const t=new Xe(e.type);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}ClefNote(e){e=ot(e,{type:"treble",options:{size:"default"}});const t=new Ne(e.type,e.options.size,e.options.annotation);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}TimeSigNote(e){e=ot(e,{time:"4/4",options:{}});const t=new Le(e.time);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}KeySigNote(e){const t=new ke(e.key,e.cancelKey,e.alterKey);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}TabNote(e){const t=new Me(e);return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}GraceNote(e){const t=new Re(e);return this.stave&&t.setStave(this.stave),t.setContext(this.context),t}GraceNoteGroup(e){const t=new Y(e.notes,e.slur);return t.setContext(this.context),t}Accidental(e){e=ot(e,{type:null,options:{}});const t=new z(e.type);return t.setContext(this.context),t}Annotation(e){e=ot(e,{text:"p",vJustify:"below",hJustify:"center",fontFamily:"Times",fontSize:14,fontWeight:"bold italic",options:{}});const t=new re(e.text);return t.setJustification(e.hJustify),t.setVerticalJustification(e.vJustify),t.setFont(e.fontFamily,e.fontSize,e.fontWeight),t.setContext(this.context),t}Articulation(e){e=ot(e,{type:"a.",position:"above",options:{}});const t=new ie(e.type);return t.setPosition(e.position),t.setContext(this.context),t}TextDynamics(e){e=ot(e,{text:"p",duration:"q",dots:0,line:0,options:{}});const t=new Ve({text:e.text,line:e.line,duration:e.duration,dots:e.dots});return this.stave&&t.setStave(this.stave),t.setContext(this.context),this.renderQ.push(t),t}Fingering(e){e=ot(e,{number:"0",position:"left",options:{}});const t=new j(e.number);return t.setPosition(e.position),t.setContext(this.context),t}StringNumber(e){e=ot(e,{number:"0",position:"left",options:{}});const t=new K(e.number);return t.setPosition(e.position),t.setContext(this.context),t}TickContext(){return(new $).setContext(this.context)}ModifierContext(){return new ce}MultiMeasureRest(e){const t=new Pe(e.number_of_measures,e);return t.setContext(this.context),this.renderQ.push(t),t}Voice(e){e=ot(e,{time:"4/4",options:{}});const t=new A(e.time);return this.voices.push(t),t}StaveConnector(e){e=ot(e,{top_stave:null,bottom_stave:null,type:"double",options:{}});const t=new N(e.top_stave,e.bottom_stave);return t.setType(e.type).setContext(this.context),this.renderQ.push(t),t}Formatter(){return new de}Tuplet(e){e=ot(e,{notes:[],options:{}});const t=new E(e.notes,e.options).setContext(this.context);return this.renderQ.push(t),t}Beam(e){e=ot(e,{notes:[],options:{autoStem:!1,secondaryBeamBreaks:[]}});const t=new C(e.notes,e.options.autoStem).setContext(this.context);return t.breakSecondaryAt(e.options.secondaryBeamBreaks),this.renderQ.push(t),t}Curve(e){e=ot(e,{from:null,to:null,options:{}});const t=new Be(e.from,e.to,e.options).setContext(this.context);return this.renderQ.push(t),t}StaveTie(e){e=ot(e,{from:null,to:null,first_indices:[0],last_indices:[0],text:null,options:{direction:void 0}});const t=new H({first_note:e.from,last_note:e.to,first_indices:e.first_indices,last_indices:e.last_indices},e.text);return e.options.direction&&t.setDirection(e.options.direction),t.setContext(this.context),this.renderQ.push(t),t}StaveLine(e){e=ot(e,{from:null,to:null,first_indices:[0],last_indices:[0],options:{}});const t=new We({first_note:e.from,last_note:e.to,first_indices:e.first_indices,last_indices:e.last_indices});return e.options.text&&t.setText(e.options.text),e.options.font&&t.setFont(e.options.font),t.setContext(this.context),this.renderQ.push(t),t}VibratoBracket(e){e=ot(e,{from:null,to:null,options:{harsh:!1}});const t=new Ce({start:e.from,stop:e.to});return e.options.line&&t.setLine(e.options.line),e.options.harsh&&t.setHarsh(e.options.harsh),t.setContext(this.context),this.renderQ.push(t),t}TextBracket(e){e=ot(e,{from:null,to:null,text:"",options:{superscript:"",position:1}});const t=new He({start:e.from,stop:e.to,text:e.text,superscript:e.options.superscript,position:e.options.position});return e.options.line&&t.setLine(e.options.line),e.options.font&&t.setFont(e.options.font),t.setContext(this.context),this.renderQ.push(t),t}System(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.factory=this;const t=new ht(e).setContext(this.context);return this.systems.push(t),t}EasyScore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.factory=this,new rt(e)}PedalMarking(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=ot(e,{notes:[],options:{style:"mixed"}});const t=new Ue(e.notes);return t.setStyle(Ue.StylesString[e.options.style]),t.setContext(this.context),this.renderQ.push(t),t}NoteSubGroup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=ot(e,{notes:[],options:{}});const t=new U(e.notes);return t.setContext(this.context),t}draw(){this.systems.forEach((e=>e.setContext(this.context).format())),this.staves.forEach((e=>e.setContext(this.context).draw())),this.voices.forEach((e=>e.setContext(this.context).draw())),this.renderQ.forEach((e=>{e.isRendered()||e.setContext(this.context).draw()})),this.systems.forEach((e=>e.setContext(this.context).draw())),this.reset()}}function ct(e,t){const n=t.options;return(e=Object.assign(t,e)).options=Object.assign(n,e.options),e}class ht extends c{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.setAttribute("type","System"),this.setOptions(e),this.parts=[]}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=ct(e,{x:10,y:10,width:500,connector:null,spaceBetweenStaves:12,factory:null,debugFormatter:!1,formatIterations:0,options:{}}),this.factory=this.options.factory||new lt({renderer:{el:null}})}setContext(e){return super.setContext(e),this.factory.setContext(e),this}addConnector(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"double";return this.connector=this.factory.StaveConnector({top_stave:this.parts[0].stave,bottom_stave:this.parts[this.parts.length-1].stave,type:e}),this.connector}addStave(e){return(e=ct(e,{stave:null,voices:[],spaceAbove:0,spaceBelow:0,debugNoteMetrics:!1,options:{left_bar:!1}})).stave||(e.stave=this.factory.Stave({x:this.options.x,y:this.options.y,width:this.options.width,options:e.options})),e.voices.forEach((t=>t.setContext(this.context).setStave(e.stave).getTickables().forEach((t=>t.setStave(e.stave))))),this.parts.push(e),e.stave}format(){const e=new de;this.formatter=e;let t=this.options.y,n=0,i=[];const s=[];this.parts.forEach((r=>{t+=r.stave.space(r.spaceAbove),r.stave.setY(t),e.joinVoices(r.voices),t+=r.stave.space(r.spaceBelow),t+=r.stave.space(this.options.spaceBetweenStaves),r.debugNoteMetrics&&(s.push({y:t,voice:r.voices[0]}),t+=15),i=i.concat(r.voices),n=Math.max(n,r.stave.getNoteStartX())})),this.parts.forEach((e=>e.stave.setNoteStartX(n)));const r=this.options.width-(n-this.options.x)-L.STAVEPADDING;e.format(i,r);for(let a=0;a<this.options.formatIterations;a++)e.tune();this.startX=n,this.debugNoteMetricsYs=s,this.lastY=t}draw(){const e=this.checkContext();this.setRendered(),this.options.debugFormatter&&de.plotDebugging(e,this.formatter,this.startX,this.options.y,this.lastY),this.debugNoteMetricsYs.forEach((t=>{t.voice.getTickables().forEach((n=>L.plotMetrics(e,n,t.y)))}))}}(i.Flow=m).Element=c,i.Flow.Fraction=r,i.Flow.Renderer=S,i.Flow.Formatter=de,i.Flow.Music=V,i.Flow.Glyph=p,i.Flow.Stave=_e,i.Flow.StaveNote=B,i.Flow.StaveModifier=fe,i.Flow.StaveTempo=be,i.Flow.Voice=A,i.Flow.Accidental=z,i.Flow.Beam=C,i.Flow.StaveTie=H,i.Flow.TabStave=Te,i.Flow.TabNote=Me,i.Flow.Bend=ae,i.Flow.Vibrato=oe,i.Flow.VibratoBracket=Ce,i.Flow.Note=L,i.Flow.ModifierContext=ce,i.Flow.MultiMeasureRest=Pe,i.Flow.TickContext=$,i.Flow.Articulation=ie,i.Flow.Annotation=re,i.Flow.Barline=pe,i.Flow.NoteHead=I,i.Flow.StaveConnector=N,i.Flow.ClefNote=Ne,i.Flow.KeySignature=Se,i.Flow.KeySigNote=ke,i.Flow.TimeSignature=we,i.Flow.TimeSigNote=Le,i.Flow.Stem=w,i.Flow.TabTie=X,i.Flow.Clef=xe,i.Flow.Dot=D,i.Flow.Modifier=O,i.Flow.TabSlide=Ie,i.Flow.Tuplet=E,i.Flow.GraceNote=Re,i.Flow.GraceTabNote=Oe,i.Flow.Tuning=De,i.Flow.KeyManager=class{constructor(e){this.music=new V,this.setKey(e)}setKey(e){return this.key=e,this.reset(),this}getKey(){return this.key}reset(){if(this.keyParts=this.music.getKeyParts(this.key),this.keyString=this.keyParts.root,this.keyParts.accidental&&(this.keyString+=this.keyParts.accidental),!V.scaleTypes[this.keyParts.type])throw new i.RERR("BadArguments","Unsupported key type: ".concat(this.key));this.scale=this.music.getScaleTones(this.music.getNoteValue(this.keyString),V.scaleTypes[this.keyParts.type]),this.scaleMap={},this.scaleMapByValue={},this.originalScaleMapByValue={};const e=V.root_indices[this.keyParts.root];for(let t=0;t<V.roots.length;++t){const n=(e+t)%V.roots.length,i=V.roots[n],s=this.music.getRelativeNoteName(i,this.scale[t]);this.scaleMap[i]=s,this.scaleMapByValue[this.scale[t]]=s,this.originalScaleMapByValue[this.scale[t]]=s}return this}getAccidental(e){const t=this.music.getKeyParts(e).root,n=this.music.getNoteParts(this.scaleMap[t]);return{note:this.scaleMap[t],accidental:n.accidental}}selectNote(e){e=e.toLowerCase();const t=this.music.getNoteParts(e),n=this.scaleMap[t.root],i=this.music.getNoteParts(n);if(n===e)return{note:n,accidental:t.accidental,change:!1};const s=this.scaleMapByValue[this.music.getNoteValue(e)];if(null!=s)return{note:s,accidental:this.music.getNoteParts(s).accidental,change:!1};const r=this.originalScaleMapByValue[this.music.getNoteValue(e)];return null!=r?(this.scaleMap[i.root]=r,delete this.scaleMapByValue[this.music.getNoteValue(n)],this.scaleMapByValue[this.music.getNoteValue(e)]=r,{note:r,accidental:this.music.getNoteParts(r).accidental,change:!0}):i.root===e?(delete this.scaleMapByValue[this.music.getNoteValue(this.scaleMap[t.root])],this.scaleMapByValue[this.music.getNoteValue(i.root)]=i.root,this.scaleMap[i.root]=i.root,{note:i.root,accidental:null,change:!0}):(delete this.scaleMapByValue[this.music.getNoteValue(this.scaleMap[t.root])],this.scaleMapByValue[this.music.getNoteValue(e)]=e,delete this.scaleMap[i.root],this.scaleMap[i.root]=e,{note:e,accidental:t.accidental,change:!0})}},i.Flow.StaveHairpin=Fe,i.Flow.BoundingBox=u,i.Flow.Stroke=q,i.Flow.TextNote=ve,i.Flow.Curve=Be,i.Flow.TextDynamics=Ve,i.Flow.StaveLine=We,i.Flow.Ornament=se,i.Flow.PedalMarking=Ue,i.Flow.TextBracket=He,i.Flow.FretHandFinger=j,i.Flow.Repetition=me,i.Flow.BarNote=Xe,i.Flow.GhostNote=Ye,i.Flow.NoteSubGroup=U,i.Flow.GraceNoteGroup=Y,i.Flow.Tremolo=qe,i.Flow.StringNumber=K,i.Flow.Crescendo=Ke,i.Flow.Volta=Ee,i.Flow.Font=d,i.Flow.System=ht,i.Flow.Factory=lt,i.Flow.Parser=Qe,i.Flow.EasyScore=rt,i.Flow.Registry=l;const ut=i},3236:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalSourceStaffEntryContainer=void 0;const i=n(2561);t.VerticalSourceStaffEntryContainer=class{constructor(e,t,n){this.staffEntries=[],this.comments=[],this.timestamp=t,this.staffEntries=new Array(n),this.parentMeasure=e}$get$(e){return this.staffEntries[e]}$set$(e,t){this.staffEntries[e]=t}get Timestamp(){return this.timestamp}set Timestamp(e){this.timestamp=e}get StaffEntries(){return this.staffEntries}set StaffEntries(e){this.staffEntries=e}get Comments(){return this.comments}set Comments(e){this.comments=e}get ParentMeasure(){return this.parentMeasure}set ParentMeasure(e){this.parentMeasure=e}getAbsoluteTimestamp(){return i.Fraction.plus(this.timestamp,this.parentMeasure.AbsoluteTimestamp)}}},3253:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pedal=void 0,t.Pedal=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.ChangeEnd=!1,this.ChangeBegin=!1,this.EndsStave=!1,this.BeginsStave=!1,this.line=e,this.sign=t}get IsLine(){return this.line}get IsSign(){return this.sign}}},3263:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4713);t.arrays=i;var s=n(2909);t.Bag=s.default;var r=n(9924);t.BSTree=r.default;var a=n(4041);t.BSTreeKV=a.default;var o=n(6119);t.Dictionary=o.default;var l=n(4589);t.Heap=l.default;var c=n(1846);t.LinkedDictionary=c.default;var h=n(4538);t.LinkedList=h.default;var u=n(2338);t.MultiDictionary=u.default;var d=n(9281);t.FactoryDictionary=d.default;var f=n(9281);t.DefaultDictionary=f.default;var p=n(3288);t.Queue=p.default;var m=n(8464);t.PriorityQueue=m.default;var g=n(2091);t.Set=g.default;var b=n(2083);t.Stack=b.default;var v=n(2002);t.MultiRootTree=v.default;var y=n(4831);t.util=y},3288:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4538),s=function(){function e(){this.list=new i.default}return e.prototype.enqueue=function(e){return this.list.add(e)},e.prototype.add=function(e){return this.list.add(e)},e.prototype.dequeue=function(){if(0!==this.list.size()){var e=this.list.first();return this.list.removeElementAtIndex(0),e}},e.prototype.peek=function(){if(0!==this.list.size())return this.list.first()},e.prototype.size=function(){return this.list.size()},e.prototype.contains=function(e,t){return this.list.contains(e,t)},e.prototype.isEmpty=function(){return this.list.size()<=0},e.prototype.clear=function(){this.list.clear()},e.prototype.forEach=function(e){this.list.forEach(e)},e}();t.default=s},3361:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalInstantaneousTempoExpression=void 0;const i=n(9490);class s extends i.AbstractGraphicalExpression{constructor(e,t){super(t.PositionAndShape.Parent.DataObject,e,e.parentMeasure),this.label=t}get GraphicalLabel(){return this.label}updateSkyBottomLine(){}}t.GraphicalInstantaneousTempoExpression=s},3430:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalNote=void 0;const i=n(8233),s=n(7741),r=n(7921),a=n(6438);class o extends s.GraphicalObject{constructor(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;super(),this.DrawnAccidental=i.AccidentalEnum.NONE,this.lineShift=0,this.sourceNote=e,this.parentVoiceEntry=t,this.PositionAndShape=new a.BoundingBox(this,t.PositionAndShape),this.graphicalNoteLength=s||e.Length,this.numberOfDots=this.calculateNumberOfNeededDots(this.graphicalNoteLength),this.rules=n,this.rules.addGraphicalNoteToNoteMap(e,this)}Transpose(e,t,n,i){let s=this.sourceNote.Pitch;return r.MusicSheetCalculator.transposeCalculator&&(s=r.MusicSheetCalculator.transposeCalculator.transposePitch(this.sourceNote.Pitch,e,n)),s}calculateNumberOfNeededDots(e){return this.sourceNote&&this.sourceNote.NoteTuplet?0:e.calculateNumberOfNeededDots()}get ParentMusicPage(){var e;return null===(e=this.parentVoiceEntry.parentStaffEntry.parentMeasure.ParentMusicSystem)||void 0===e?void 0:e.Parent}static FromNote(e,t){return t.NoteToGraphicalNoteMap.getValue(e.NoteToGraphicalNoteObjectId)}ToStringShort(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===(e=this.sourceNote)||void 0===e?void 0:e.ToStringShort(t)}get ToStringShortGet(){return this.ToStringShort(0)}getLyricsSVGs(){const e=[];for(const i of null===(t=this.parentVoiceEntry)||void 0===t?void 0:t.parentStaffEntry.LyricsEntries){var t,n;e.push(null===(n=i.GraphicalLabel)||void 0===n?void 0:n.SVGNode)}return e}setColor(e,t){}setVisible(e){}}t.GraphicalNote=o},3457:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceMusicPart=void 0;const i=n(7551),s=n(2561);class r extends i.PartListEntry{constructor(e,t,n){super(e),this.musicSheet=e,this.startIndex=t,this.endIndex=n}get MeasuresCount(){return this.endIndex-this.startIndex+1}get StartIndex(){return this.startIndex}get EndIndex(){return this.endIndex}get ParentRepetition(){return this.parentRepetition}set ParentRepetition(e){this.parentRepetition=e}get AbsoluteTimestamp(){return s.Fraction.createFromFraction(this.musicSheet.SourceMeasures[this.startIndex].AbsoluteTimestamp)}setStartIndex(e){this.startIndex=e}setEndIndex(e){this.endIndex=e}}t.SourceMusicPart=r},3508:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLSkyBottomLineBatchCalculatorBackend=void 0;const s=n(5479),r=n(3667),a=i(n(5340)),o=i(n(5166)),l=i(n(3065)),c=n(813);function h(e,t,n){const i=e.createShader(t);if(!i)throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: Could not create a WebGL shader"),new Error("Could not create a WebGL shader");if(e.shaderSource(i,n),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw l.default.warn("Shader compilation failed\n"+e.getShaderInfoLog(i)),e.deleteShader(i),new Error("WebGL shader compilation failed");return i}class u extends r.SkyBottomLineBatchCalculatorBackend{constructor(e,t){super(e,t)}getPreferredRenderingConfiguration(e,t){const n=Math.min(4096,function(){const e=document.createElement("canvas").getContext("webgl");return e.getParameter(e.MAX_TEXTURE_SIZE)}()),i=Math.ceil(e);return{elementWidth:i,numColumns:Math.min(5,Math.floor(n/i)),numRows:Math.min(5,Math.floor(n/t))}}onInitialize(e){const{elementWidth:t,elementHeight:n,numColumns:i,numRows:s}=e,r=document.createElement("canvas");r.width=t*i,r.height=s;const u=r.getContext("webgl");if(!u)throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: No WebGL support"),new Error("No WebGL support");this.gl=u;const d=function(e,t,n){const i=e.createProgram();if(!i)throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: Could not create a WebGL program"),new Error("Could not create a WebGL program");if(e.attachShader(i,t),e.attachShader(i,n),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: WebGL program link failed\n"+e.getProgramInfoLog(i)),e.deleteProgram(i),new Error("WebGL program link failed");return i}(u,h(u,u.VERTEX_SHADER,a.default),h(u,u.FRAGMENT_SHADER,function(e,t){let n=e;for(const[i,s]of Object.entries(t)){const e=new RegExp("#define ".concat(i," .*"));n=n.replace(e,"#define ".concat(i," ").concat(s))}return n}(o.default,{NUM_ROWS:s,ELEMENT_HEIGHT:n})));!function(e,t){const n=e.createBuffer();if(!n)throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: WebGL buffer creation failed"),new Error("WebGL buffer creation failed");e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array(c.CollectionUtil.flat([[-1,-1],[1,-1],[1,1],[-1,-1],[1,1],[-1,1]])),e.STATIC_DRAW),e.useProgram(t);const i=e.getAttribLocation(t,"a_position");e.enableVertexAttribArray(i),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0)}(u,d),this.texture=function(e,t){const n=e.createTexture();if(!n)throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: WebGL texture creation failed"),new Error("WebGL texture creation failed");e.activeTexture(e.TEXTURE0+0),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);const i=e.getUniformLocation(t,"u_image");if(!i)throw l.default.warn("WebGLSkyBottomLineCalculatorBackend: WebGL invalid uniform name"),new Error("WebGL invalid uniform name");return e.uniform1i(i,0),n}(u,d)}calculateFromCanvas(e,t,n,i,r){const a=this.gl,{elementWidth:o,elementHeight:l,numColumns:c}=r;a.viewport(0,0,a.canvas.width,a.canvas.height),a.bindTexture(a.TEXTURE_2D,this.texture),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,e),a.drawArrays(a.TRIANGLES,0,6);const h=new Uint8Array(a.canvas.width*a.canvas.height*4);a.readPixels(0,0,a.canvas.width,a.canvas.height,a.RGBA,a.UNSIGNED_BYTE,h);const u=[];for(let d=0;d<n.length;++d){const e=n[d],t=Math.floor(e.getVFStave().getWidth()),r=Math.max(Math.ceil(e.PositionAndShape.Size.width*i),1),a=d%c*o*4,f=Math.floor(d/c)*o*c*4,p=new Array(Math.max(r,t)).fill(0),m=new Array(Math.max(r,t)).fill(0);for(let n=0;n<t;++n){const e=h[4*n+a+f],t=h[4*n+a+f+1],i=h[4*n+a+f+2],s=e+256*Math.floor(i/16),r=t+i%16*256;p[n]=s,m[n]=r}const g=Math.max(...p),b=Math.min(...m);for(let n=0;n<t;++n)p[n]=0===p[n]?g:p[n],m[n]=m[n]===l?b:m[n];u.push(new s.SkyBottomLineCalculationResult(p,m))}return u}}t.WebGLSkyBottomLineBatchCalculatorBackend=u},3661:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DrawingParameters=void 0;const i=n(9713),s=n(6362),r=n(4146);t.DrawingParameters=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.DrawingParametersEnum.default,t=arguments.length>1?arguments[1]:void 0;this.drawCursors=!0,this.drawTitle=!0,this.drawSubtitle=!0,this.drawLyricist=!0,this.drawComposer=!0,this.drawCopyright=!1,this.drawCredits=!0,this.drawPartNames=!0,this.fingeringPosition=s.PlacementEnum.Left,this.drawHiddenNotes=!1,this.rules=t,this.rules||(this.rules=new i.EngravingRules),this.DrawingParametersEnum=e}set DrawingParametersEnum(e){switch(this.drawingParametersEnum=e,e){case r.DrawingParametersEnum.allon:this.setForAllOn();break;case r.DrawingParametersEnum.thumbnail:this.setForThumbnail();break;case r.DrawingParametersEnum.leadsheet:this.setForLeadsheet();break;case r.DrawingParametersEnum.compact:this.setForCompactMode();break;case r.DrawingParametersEnum.compacttight:this.setForCompactTightMode();break;case r.DrawingParametersEnum.default:default:this.setForDefault()}}get DrawingParametersEnum(){return this.drawingParametersEnum}setForAllOn(){this.drawHighlights=!0,this.drawErrors=!0,this.drawSelectionStartSymbol=!0,this.drawSelectionEndSymbol=!0,this.drawCursors=!0,this.drawActivitySymbols=!0,this.drawScrollIndicator=!0,this.drawComments=!0,this.drawMarkedAreas=!0,this.DrawTitle=!0,this.DrawSubtitle=!0,this.DrawComposer=!0,this.DrawLyricist=!0,this.drawCredits=!0,this.DrawPartNames=!0,this.drawHiddenNotes=!0,this.rules.CompactMode=!1}setForDefault(){this.rules.loadDefaultValues(),this.setForAllOn(),this.drawHiddenNotes=!1}setForThumbnail(){this.drawHighlights=!1,this.drawErrors=!1,this.drawSelectionStartSymbol=!1,this.drawSelectionStartSymbol=!1,this.drawCursors=!1,this.drawActivitySymbols=!1,this.drawScrollIndicator=!1,this.drawComments=!0,this.drawMarkedAreas=!0,this.drawHiddenNotes=!1}setForCompactMode(){this.rules.CompactMode=!0,this.DrawCredits=!1,this.drawHiddenNotes=!1}setForCompactTightMode(){this.setForCompactMode(),this.DrawPartNames=!1,this.rules.VoiceSpacingMultiplierVexflow=.65,this.rules.VoiceSpacingAddendVexflow=2,this.rules.MinSkyBottomDistBetweenStaves=1,this.rules.MinSkyBottomDistBetweenSystems=1,this.rules.BetweenStaffDistance=2.5,this.rules.StaffDistance=3.5,this.rules.MinimumDistanceBetweenSystems=1,this.rules.PageBottomMargin=0,this.rules.PageLeftMargin=2,this.rules.PageRightMargin=2}setForLeadsheet(){this.drawHighlights=!1,this.drawErrors=!1,this.drawSelectionStartSymbol=!0,this.drawSelectionEndSymbol=!0,this.drawCursors=!0,this.drawActivitySymbols=!1,this.drawScrollIndicator=!0,this.drawComments=!0,this.drawMarkedAreas=!0}get DrawCredits(){return this.drawCredits}set DrawCredits(e){this.drawCredits=e,this.DrawComposer=e,this.DrawTitle=e,this.DrawSubtitle=e,this.DrawLyricist=e,this.DrawCopyright=e}get DrawTitle(){return this.drawTitle}set DrawTitle(e){this.drawTitle=e,this.rules.RenderTitle=e,e||(this.DrawSubtitle=!1)}get DrawSubtitle(){return this.drawSubtitle}set DrawSubtitle(e){this.drawSubtitle=e,this.rules.RenderSubtitle=e,e&&(this.DrawTitle=!0)}get DrawComposer(){return this.drawComposer}set DrawComposer(e){this.drawComposer=e,this.rules.RenderComposer=e}get DrawLyricist(){return this.drawLyricist}set DrawLyricist(e){this.drawLyricist=e,this.rules.RenderLyricist=e}get DrawCopyright(){return this.drawCopyright}set DrawCopyright(e){this.drawCopyright=e,this.rules.RenderCopyright=e}get DrawPartNames(){return this.drawPartNames}set DrawPartNames(e){this.drawPartNames=e,this.rules.RenderPartNames=e,this.rules.RenderPartNames||(this.rules.RenderPartAbbreviations=!1)}get FingeringPosition(){return this.fingeringPosition}set FingeringPosition(e){this.fingeringPosition=e,this.rules.FingeringPosition=e}get Rules(){return this.rules}set Rules(e){this.rules=e}}},3667:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SkyBottomLineBatchCalculatorBackend=void 0;const r=n(9834),a=i(n(3065));t.SkyBottomLineBatchCalculatorBackend=class{constructor(e,t){this.elementHeight=300,this.canvas=new r.CanvasVexFlowBackend(e),this.measures=t,this.maxWidth=Math.max(...this.measures.map((e=>{let t=e.getVFStave().getWidth();return t>0||e.IsExtraGraphicalMeasure||(a.default.warn("SkyBottomLineBatchCalculatorBackend: width not > 0 in measure "+e.MeasureNumber),t=50),t}))),this.samplingUnit=e.SamplingUnit}initialize(){if(this.tableConfiguration=s(s({},this.getPreferredRenderingConfiguration(this.maxWidth,this.elementHeight)),{},{elementHeight:this.elementHeight}),this.tableConfiguration.numRows<1||this.tableConfiguration.numColumns<1)throw a.default.warn("SkyBottomLineBatchCalculatorBackend: numRows or numColumns in tableConfiguration is 0"),new Error("numRows or numColumns in tableConfiguration is 0");this.tableConfiguration.elementWidth<this.maxWidth&&a.default.warn("SkyBottomLineBatchCalculatorBackend: elementWidth in tableConfiguration is less than the width of widest measure");const e=this.tableConfiguration.elementWidth*this.tableConfiguration.numColumns,t=this.elementHeight*this.tableConfiguration.numRows;return this.canvas.initializeHeadless(e,t),this.onInitialize(this.tableConfiguration),this}calculateLines(){const{numColumns:e,numRows:t,elementWidth:n}=this.tableConfiguration,i=this.elementHeight,s=e*t,r=this.canvas.getContext(),o=r,l=this.canvas.getCanvas(),c=[];for(let h=0;h<this.measures.length;h+=s){r.clear();const t=this.measures.slice(h,h+s);for(let s=0;s<t.length;++s){const l=t[s],c=l.getVFStave(),h=s%e,u=Math.floor(s/e);let d=c.getWidth();d>0||l.IsExtraGraphicalMeasure||(d=50),d=Math.floor(d),l.PositionAndShape.calculateAbsolutePositionsRecursive(0,0);const f=0;c.setX(f);const p=c.y+100;c.setY(p);const m=c.getWidth();c.setWidth(d),l.format(),c.setWidth(m);try{o.translate(h*n,u*i),l.draw(r),o.translate(-h*n,-u*i)}catch(e){a.default.warn("SkyBottomLineBatchCalculatorBackend.calculateLines.draw",e)}}const u=this.calculateFromCanvas(l,r,t,this.samplingUnit,this.tableConfiguration);c.push(...u)}return c}}},3753:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowGraphicalSymbolFactory=void 0;var s=i(n(3206)).default.Flow;const r=n(4332),a=n(5246),o=n(6670),l=n(437),c=n(9635),h=n(6659),u=n(4134),d=n(6014),f=n(6173),p=n(5866),m=n(3849),g=n(6362);t.VexFlowGraphicalSymbolFactory=class{createMusicSystem(e,t){return new r.VexFlowMusicSystem(e,t)}createStaffLine(e,t){return new p.VexFlowStaffLine(e,t)}createGraphicalMeasure(e,t){return new a.VexFlowMeasure(t,e,void 0)}createMultiRestMeasure(e,t,n){return new m.VexFlowMultiRestMeasure(t,e,n)}createTabStaffMeasure(e,t){return new f.VexFlowTabMeasure(t,e)}createExtraGraphicalMeasure(e){const t=new a.VexFlowMeasure(e.ParentStaff,void 0,e);return t.IsExtraGraphicalMeasure=!0,t.ExtraGraphicalMeasurePreviousMeasure=e.Measures.last(),t}createStaffEntry(e,t){return new o.VexFlowStaffEntry(t,e,void 0)}createVoiceEntry(e,t){return new u.VexFlowVoiceEntry(e,t)}createNote(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.OctaveEnum.NONE,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;return new c.VexFlowGraphicalNote(e,t,n,i,s,r)}createGraceNote(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.OctaveEnum.NONE;return new c.VexFlowGraphicalNote(e,t,n,s,i)}addGraphicalAccidental(e,t){e.setAccidental(t)}addFermataAtTiedEndNote(e,t){}createInStaffClef(e,t){const n=e,i=d.VexFlowConverter.Clef(t,"small");n.vfClefBefore=new s.ClefNote(i.type,i.size,i.annotation)}createChordSymbols(e,t,n,i){const s=t.parentMeasure.parentSourceMeasure.Rules;let r=0;const a=s.ChordSymbolXSpacing;for(const o of e.ChordContainers){if(!o)continue;let e=t.PositionAndShape;1===t.graphicalVoiceEntries.length&&1===t.graphicalVoiceEntries[0].notes.length&&t.graphicalVoiceEntries[0].notes[0].sourceNote.isWholeRest()&&(e=t.parentMeasure.PositionAndShape,r+=t.parentMeasure.beginInstructionsWidth,r+=s.ChordSymbolWholeMeasureRestXOffset);const l=new h.GraphicalChordSymbolContainer(o,e,s.ChordSymbolTextHeight,n,i,s),c=l.GetChordSymbolContainer.Placement,u=l.GraphicalLabel;c===g.PlacementEnum.Below?u.PositionAndShape.RelativePosition.y=s.StaffHeight+s.ChordSymbolYOffset:u.PositionAndShape.RelativePosition.y-=s.ChordSymbolYOffset,u.setLabelPositionAndShapeBorders();let d=0;u.PositionAndShape.Size.width<s.ChordSymbolExtraXShiftWidthThreshold&&(d=s.ChordSymbolExtraXShiftForShortChordSymbols),u.PositionAndShape.RelativePosition.x+=r+d,u.setLabelPositionAndShapeBorders(),l.PositionAndShape.calculateBoundingBox(),t.graphicalChordContainers.push(l),r+=u.PositionAndShape.Size.width+a}}createGraphicalTechnicalInstruction(e,t){}}},3849:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowMultiRestMeasure=void 0;var s=i(n(3206)).default.Flow;const r=n(5246);class a extends r.VexFlowMeasure{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(e,t,n),this.minimumStaffEntriesWidth=-1,n?this.rules=n.ParentMusicSystem.rules:t&&(this.rules=t.Rules),this.resetLayout(),this.multiRestElement=new s.MultiMeasureRest(t.multipleRestMeasures,{})}draw(e){var t,n;const i=e.openGroup();i&&(null!==(t=i.classList)&&void 0!==t&&t.add("vf-measure"),null!==(n=i.classList)&&void 0!==n&&n.add("multi"),i.id="".concat(this.MeasureNumber)),this.stave.setContext(e).draw(),this.multiRestElementSVG=e.openGroup("multirest"),this.multiRestElement.setStave(this.stave),this.multiRestElement.setContext(e),this.multiRestElement.draw(),this.multiRestElement.id="vf-multi".concat(this.MeasureNumber),e.closeGroup(),e.closeGroup();for(const s of this.connectors)s.setContext(e).draw()}format(){for(const t of this.staffEntries){var e;const n=this.PositionAndShape.Size.width-this.beginInstructionsWidth;t.PositionAndShape.RelativePosition.x=this.PositionAndShape.Size.width/2+this.beginInstructionsWidth/3,t.PositionAndShape.RelativePosition.y=0;const i=null===(e=t.graphicalVoiceEntries[0])||void 0===e||null===(e=e.notes[0])||void 0===e?void 0:e.PositionAndShape;i.BorderLeft=-n/3,i.BorderRight=n/3,i.BorderTop=1,i.BorderBottom=3,t.PositionAndShape.calculateBoundingBox()}}getVoicesWithinMeasure(){return[]}getGraphicalVoiceEntriesPerVoice(e){return[]}getRestFilledVexFlowStaveNotesPerVoice(e){return[]}handleBeam(e,t){}handleTuplet(e,t){}finalizeBeams(){}finalizeTuplets(){}layoutStaffEntry(e){}graphicalMeasureCreatedCalculations(){}createArticulations(){}createOrnaments(){}createFingerings(e){}getVFStave(){return this.stave}}t.VexFlowMultiRestMeasure=a},3902:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IXmlElement=void 0;class n{constructor(e){if(this.hasAttributes=!1,!e)throw new Error("IXmlElement: expected Element, got undefined");this.elem=e,this.name=e.nodeName.toLowerCase(),e.hasAttributes()&&(this.hasAttributes=!0,this.firstAttribute=e.attributes[0]),this.hasElements=e.hasChildNodes(),1===e.childNodes.length&&e.childNodes[0].nodeType===Node.TEXT_NODE?this.value=e.childNodes[0].nodeValue:this.value=""}attribute(e){return this.elem.attributes.getNamedItem(e)}attributes(){if(!this.attrs){const e=this.elem.attributes,t=[];for(let n=0;n<e.length;n+=1)t.push(e[n]);this.attrs=t}return this.attrs}element(e){const t=this.elem.childNodes;for(let i=0,s=t.length;i<s;i+=1){const s=t[i];if(s.nodeType===Node.ELEMENT_NODE&&s.nodeName.toLowerCase()===e)return new n(s)}}elements(e){const t=this.elem.childNodes,i=[],s=!e;s||(e=e.toLowerCase());for(let r=0;r<t.length;r+=1){const a=t[r];a.nodeType!==Node.ELEMENT_NODE||!s&&a.nodeName.toLowerCase()!==e||i.push(new n(a))}return i}combinedElement(e){const t=this.elem.childNodes;if(t.length>0){let i;for(let n=0,s=t.length;n<s;n+=1){const s=t[n];if(s.nodeType===Node.ELEMENT_NODE&&s.nodeName.toLowerCase()===e)if(i){const e=s.childNodes;for(let t=0,n=e.length;t<n;t+=1){const n=e[t];i.appendChild(n.cloneNode(!0))}}else i=s}if(i)return new n(i)}}}t.IXmlElement=n},4022:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalSlur=void 0;const s=n(9409),r=n(6711),a=n(6362),o=n(6904),l=n(4249),c=n(2561),h=n(1336);var u=i(n(3206)).default.Flow;class d extends r.GraphicalCurve{constructor(e,t){super(),this.staffEntries=[],this.slur=e,this.rules=t}static Compare(e,t){if(e.staffEntries.length<1)return-1;if(t.staffEntries.length<1)return 1;const n=c.Fraction.minus(e.staffEntries[e.staffEntries.length-1].getAbsoluteTimestamp(),e.staffEntries[0].getAbsoluteTimestamp()),i=c.Fraction.minus(t.staffEntries[t.staffEntries.length-1].getAbsoluteTimestamp(),t.staffEntries[0].getAbsoluteTimestamp());return n.RealValue>i.RealValue?1:i.RealValue>n.RealValue?-1:0}calculateCurve(e){const t=this.staffEntries[0],n=this.staffEntries[this.staffEntries.length-1];let i=t.findGraphicalNoteFromNote(this.slur.StartNote);!i&&this.graceStart&&(i=t.findGraphicalNoteFromGraceNote(this.slur.StartNote)),i||(i=t.findEndTieGraphicalNoteFromNoteWithStartingSlur(this.slur.StartNote,this.slur));let r=n.findGraphicalNoteFromNote(this.slur.EndNote);!r&&this.graceEnd&&(r=n.findGraphicalNoteFromGraceNote(this.slur.EndNote));const l=t.parentMeasure.ParentStaffLine,c=l.SkyBottomLineCalculator;this.calculatePlacement(c,l);const h=this.calculateStartAndEnd(i,r,l,e,c),u=h.startX,d=h.endX;let f=h.startY,p=h.endY;const m=e.SlurTangentMinAngle,g=e.SlurTangentMaxAngle;let b;if(this.placement===a.PlacementEnum.Above){f-=e.SlurNoteHeadYOffset,p-=e.SlurNoteHeadYOffset;const t=new s.PointF2D(this.staffEntries[0].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[0].PositionAndShape.RelativePosition.x,f);i?t.x+=this.staffEntries[0].PositionAndShape.BorderRight:t.x=this.staffEntries[0].parentMeasure.beginInstructionsWidth,this.graceStart&&(t.x+=n.PositionAndShape.RelativePosition.x);const a=new s.PointF2D(this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].PositionAndShape.RelativePosition.x,p);if(r?a.x+=this.staffEntries[this.staffEntries.length-1].PositionAndShape.BorderLeft:a.x=this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.Size.width,this.graceEnd&&(a.x+=n.staffEntryParent.PositionAndShape.RelativePosition.x),b=this.calculateTopPoints(t,a,l,c),0===b.length){const e=new s.PointF2D((a.x-t.x)/2+t.x,(a.y-t.y)/2+t.y);b.push(e)}const h=Math.atan((p-f)/(d-u)),v=new s.PointF2D(0,0);let y=new s.PointF2D(d-u,-(p-f));const x=o.Matrix2D.getRotationMatrix(h),S=x.getTransposeMatrix();y=x.vectorMultiplication(y);const w=this.calculateTranslatedAndRotatedPointListAbove(b,u,f,x),E=this.calculateMaxLeftSlope(w,v,y),_=this.calculateMaxRightSlope(w,v,y),T=v.y-v.x*E,M=y.y-y.x*_,C=new s.PointF2D;let A=!1;Math.abs(Math.abs(E)-Math.abs(_))<1e-4?(C.x=y.x/2,C.y=0,A=!0):(C.x=(M-T)/(E-_),C.y=E*C.x+T);const P=this.calculateHeightWidthRatio(y.x,w),N=0,k=0;let L=m,I=-m;if(!A){const e=this.calculateAngles(m,E,_,g);L=e.startAngle,I=e.endAngle}const R=this.calculateControlPoints(y.x,L,I,w,P,f,p);let O=R.startControlPoint,D=R.endControlPoint;O=S.vectorMultiplication(O),O.x+=u,O.y=-O.y+f,D=S.vectorMultiplication(D),D.x+=u,D.y=-D.y+f,this.bezierStartPt=new s.PointF2D(u,f-N),this.bezierStartControlPt=new s.PointF2D(O.x,O.y-N),this.bezierEndControlPt=new s.PointF2D(D.x,D.y-k),this.bezierEndPt=new s.PointF2D(d,p-k);const F=l.SkyLine.length,B=c.getLeftIndexForPointX(this.bezierStartPt.x,F),j=c.getLeftIndexForPointX(this.bezierEndPt.x,F),V=this.bezierEndPt.x-this.bezierStartPt.x,G=c.SamplingUnit;for(let e=B;e<j;e++){const t=e/G-this.bezierStartPt.x,n=this.calculateCurvePointAtIndex(Math.abs(t)/V);let i=c.getLeftIndexForPointX(n.x,F);i>=B&&(l.SkyLine[i]=Math.min(l.SkyLine[i],n.y)),i++,i<F&&(l.SkyLine[i]=Math.min(l.SkyLine[i],n.y))}}else{f+=e.SlurNoteHeadYOffset,p+=e.SlurNoteHeadYOffset;const t=new s.PointF2D(this.staffEntries[0].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[0].PositionAndShape.RelativePosition.x,f);i?t.x+=this.staffEntries[0].PositionAndShape.BorderRight:t.x=this.staffEntries[0].parentMeasure.beginInstructionsWidth,this.graceStart&&(t.x+=n.PositionAndShape.RelativePosition.x);const a=new s.PointF2D(this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].PositionAndShape.RelativePosition.x,p);if(r?a.x+=this.staffEntries[this.staffEntries.length-1].PositionAndShape.BorderLeft:a.x=this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.RelativePosition.x+this.staffEntries[this.staffEntries.length-1].parentMeasure.PositionAndShape.Size.width,this.graceEnd&&(a.x+=n.staffEntryParent.PositionAndShape.RelativePosition.x),b=this.calculateBottomPoints(t,a,l,c),0===b.length){const e=new s.PointF2D((a.x-t.x)/2+t.x,(a.y-t.y)/2+t.y);b.push(e)}const h=Math.atan((p-f)/(d-u)),v=new s.PointF2D(0,0);let y=new s.PointF2D(d-u,p-f);const x=o.Matrix2D.getRotationMatrix(-h),S=x.getTransposeMatrix();y=x.vectorMultiplication(y);const w=this.calculateTranslatedAndRotatedPointListBelow(b,u,f,x),E=this.calculateMaxLeftSlope(w,v,y),_=this.calculateMaxRightSlope(w,v,y),T=v.y-v.x*E,M=y.y-y.x*_,C=new s.PointF2D;let A=!1;Math.abs(Math.abs(E)-Math.abs(_))<1e-4?(C.x=y.x/2,C.y=0,A=!0):(C.x=(M-T)/(E-_),C.y=E*C.x+T);const P=this.calculateHeightWidthRatio(y.x,w),N=0,k=0;let L=m,I=-m;if(!A){const e=this.calculateAngles(m,E,_,g);L=e.startAngle,I=e.endAngle}const R=this.calculateControlPoints(y.x,L,I,w,P,f,p);let O=R.startControlPoint,D=R.endControlPoint;O=S.vectorMultiplication(O),O.x+=u,O.y+=f,D=S.vectorMultiplication(D),D.x+=u,D.y+=f,this.bezierStartPt=new s.PointF2D(u,f+N),this.bezierStartControlPt=new s.PointF2D(O.x,O.y+N),this.bezierEndControlPt=new s.PointF2D(D.x,D.y+k),this.bezierEndPt=new s.PointF2D(d,p+k);const F=l.BottomLine.length,B=c.getLeftIndexForPointX(this.bezierStartPt.x,F),j=c.getLeftIndexForPointX(this.bezierEndPt.x,F),V=this.bezierEndPt.x-this.bezierStartPt.x,G=c.SamplingUnit;for(let e=B;e<j;e++){const t=e/G-this.bezierStartPt.x,n=this.calculateCurvePointAtIndex(Math.abs(t)/V);let i=c.getLeftIndexForPointX(n.x,F);i>=B&&(l.BottomLine[i]=Math.max(l.BottomLine[i],n.y)),i++,i<F&&(l.BottomLine[i]=Math.max(l.BottomLine[i],n.y))}}}calculateStartAndEnd(e,t,n,i,s){let r=0,o=0,l=0,c=0;if(e){r=e.PositionAndShape.RelativePosition.x+e.parentVoiceEntry.parentStaffEntry.PositionAndShape.RelativePosition.x+e.parentVoiceEntry.parentStaffEntry.parentMeasure.PositionAndShape.RelativePosition.x,this.graceStart&&(r+=e.parentVoiceEntry.parentStaffEntry.staffEntryParent.PositionAndShape.RelativePosition.x);const t=e.parentVoiceEntry;this.placement===a.PlacementEnum.Above?(o=t.PositionAndShape.RelativePosition.y+t.PositionAndShape.BorderTop,this.rules.SlurPlacementUseSkyBottomLine&&(o=Math.min(c,t.parentStaffEntry.getSkylineMin()))):(o=t.PositionAndShape.RelativePosition.y+t.PositionAndShape.BorderBottom,this.rules.SlurPlacementUseSkyBottomLine&&(o=Math.max(c,t.parentStaffEntry.getBottomlineMax()))),t.parentVoiceEntry.StemDirection===h.StemDirectionType.Down&&this.placement===a.PlacementEnum.Below&&(r-=.5),t.parentVoiceEntry.StemDirection===h.StemDirectionType.Up&&this.placement===a.PlacementEnum.Above&&(r+=.5)}else r=0;if(t){l=t.PositionAndShape.RelativePosition.x+t.parentVoiceEntry.parentStaffEntry.PositionAndShape.RelativePosition.x+t.parentVoiceEntry.parentStaffEntry.parentMeasure.PositionAndShape.RelativePosition.x,this.graceEnd&&(l+=t.parentVoiceEntry.parentStaffEntry.staffEntryParent.PositionAndShape.RelativePosition.x);const e=t.parentVoiceEntry;let n;for(const i of e.parentVoiceEntry.Articulations)if(n=i.placement,i.placement===a.PlacementEnum.NotYetDefined)for(const e of t.vfnote[0].modifiers)if(e.getCategory()===u.Articulation.CATEGORY){e.position===u.Modifier.Position.ABOVE?(i.placement=a.PlacementEnum.Above,n=a.PlacementEnum.Above):e.position===u.Modifier.Position.BELOW&&(i.placement=a.PlacementEnum.Below,n=a.PlacementEnum.Below);break}this.placement===a.PlacementEnum.Above?(c=e.PositionAndShape.RelativePosition.y+e.PositionAndShape.BorderTop,this.rules.SlurPlacementUseSkyBottomLine&&(c=Math.min(c,e.parentStaffEntry.getSkylineMin())),n===a.PlacementEnum.Above&&(c-=this.rules.SlurEndArticulationYOffset)):(c=e.PositionAndShape.RelativePosition.y+e.PositionAndShape.BorderBottom,this.rules.SlurPlacementUseSkyBottomLine&&(c=Math.max(c,e.parentStaffEntry.getBottomlineMax())),n===a.PlacementEnum.Below&&(c+=this.rules.SlurEndArticulationYOffset)),e.parentVoiceEntry.StemDirection===h.StemDirectionType.Down&&this.placement===a.PlacementEnum.Below&&(l-=.5),e.parentVoiceEntry.StemDirection===h.StemDirectionType.Up&&this.placement===a.PlacementEnum.Above&&(l+=.5)}else l=n.PositionAndShape.Size.width;return e||t||(o=-1.5,c=-1.5),e||(o=this.placement===a.PlacementEnum.Above?c-1:c+1),t||(c=this.placement===a.PlacementEnum.Above?o-1:o+1),this.slur.startNoteHasMoreStartingSlurs()&&this.slur.isSlurLonger()&&(this.placement===a.PlacementEnum.Above?o-=i.SlursStartingAtSameStaffEntryYOffset:o+=i.SlursStartingAtSameStaffEntryYOffset),this.slur.endNoteHasMoreEndingSlurs()&&this.slur.isSlurLonger()&&(this.placement===a.PlacementEnum.Above?c-=i.SlursStartingAtSameStaffEntryYOffset:c+=i.SlursStartingAtSameStaffEntryYOffset),this.placement===a.PlacementEnum.Above?(o=Math.min(o,1.5),c=Math.min(c,1.5)):(o=Math.max(o,n.StaffHeight-1.5),c=Math.max(c,n.StaffHeight-1.5)),{startX:r,startY:o,endX:l,endY:c}}calculatePlacement(e,t){if(this.rules.SlurPlacementFromXML&&this.slur.PlacementXml!==a.PlacementEnum.NotYetDefined)return void(this.placement=this.slur.PlacementXml);for(let r=0,o=this.staffEntries.length;r<o;++r)if(this.staffEntries[r].parentMeasure.hasMultipleVoices())return void(this.slur.StartNote.ParentVoiceEntry.ParentVoice instanceof l.LinkedVoice||this.slur.EndNote.ParentVoiceEntry.ParentVoice instanceof l.LinkedVoice?this.placement=a.PlacementEnum.Below:this.placement=a.PlacementEnum.Above);for(let r=0,o=this.staffEntries.length;r<o;++r)if(this.staffEntries[r].LyricsEntries.length>0)return void(this.placement=a.PlacementEnum.Above);const n=this.staffEntries[0],i=this.staffEntries[this.staffEntries.length-1],s=n.graphicalVoiceEntries[0].parentVoiceEntry.StemDirection;if(s===i.graphicalVoiceEntries[0].parentVoiceEntry.StemDirection)this.placement=s===h.StemDirectionType.Up?a.PlacementEnum.Below:a.PlacementEnum.Above,this.rules.SlurPlacementAtStems&&(this.placement=s===h.StemDirectionType.Up?a.PlacementEnum.Above:a.PlacementEnum.Below);else{let s=n.PositionAndShape.BorderLeft+n.PositionAndShape.RelativePosition.x+n.parentMeasure.PositionAndShape.RelativePosition.x,r=i.PositionAndShape.BorderRight+i.PositionAndShape.RelativePosition.x+i.parentMeasure.PositionAndShape.RelativePosition.x;this.graceStart&&(s+=i.PositionAndShape.RelativePosition.x),this.graceEnd&&(r+=i.staffEntryParent.PositionAndShape.RelativePosition.x);const o=-1*e.getSkyLineMinInRange(s,r),l=e.getBottomLineMaxInRange(s,r)-t.StaffHeight;this.placement=l>o?a.PlacementEnum.Above:a.PlacementEnum.Below}}calculateTopPoints(e,t,n,i){const r=[];let a=i.getRightIndexForPointX(e.x,n.SkyLine.length),o=i.getLeftIndexForPointX(t.x,n.SkyLine.length);a<0&&(a=0),o>=n.SkyLine.length&&(o=n.SkyLine.length-1);for(let l=a;l<o;l++){const e=n.SkyLine[l];if(0!==e){const t=new s.PointF2D((.5+l)/i.SamplingUnit,e);r.push(t)}}return r}calculateBottomPoints(e,t,n,i){const r=[];let a=i.getRightIndexForPointX(e.x,n.BottomLine.length),o=i.getLeftIndexForPointX(t.x,n.BottomLine.length);a<0&&(a=0),o>=n.BottomLine.length&&(o=n.BottomLine.length-1);for(let l=a;l<o;l++){const e=n.BottomLine[l];if(0!==e){const t=new s.PointF2D((.5+l)/i.SamplingUnit,e);r.push(t)}}return r}calculateMaxLeftSlope(e,t,n){let i=-Number.MAX_VALUE;const s=t.x,r=t.y;for(let a=0;a<e.length;a++)Math.abs(e[a].y-Number.MAX_VALUE)<1e-4||Math.abs(e[a].y- -Number.MAX_VALUE)<1e-4||(i=Math.max(i,(e[a].y-r)/(e[a].x-s)));return i=Math.max(i,Math.abs(n.y-r)/(n.x-s)),i=Math.min(i,5.6713),i}calculateMaxRightSlope(e,t,n){let i=Number.MAX_VALUE;const s=n.x,r=n.y;for(let a=0;a<e.length;a++)Math.abs(e[a].y-Number.MAX_VALUE)<1e-4||Math.abs(e[a].y- -Number.MAX_VALUE)<1e-4||(i=Math.min(i,(r-e[a].y)/(s-e[a].x)));return i=Math.min(i,(r-t.y)/(s-t.x)),i=Math.max(i,-5.6713),i}getPointListMaxY(e){let t=-Number.MAX_VALUE;for(let n=0,i=e.length;n<i;++n){const i=e[n];Math.abs(i.y- -Number.MAX_VALUE)<1e-4||Math.abs(i.y-Number.MAX_VALUE)<1e-4||(t=Math.max(t,i.y))}return t}calculateTranslatedAndRotatedPointListAbove(e,t,n,i){const r=[];for(let a=0;a<e.length;a++){if(Math.abs(e[a].y-Number.MAX_VALUE)<1e-4||Math.abs(e[a].y- -Number.MAX_VALUE)<1e-4)continue;let o=new s.PointF2D(e[a].x-t,-(e[a].y-n));o=i.vectorMultiplication(o),r.push(o)}return r}calculateTranslatedAndRotatedPointListBelow(e,t,n,i){const r=[];for(let a=0;a<e.length;a++){if(Math.abs(e[a].y-Number.MAX_VALUE)<1e-4||Math.abs(e[a].y- -Number.MAX_VALUE)<1e-4)continue;let o=new s.PointF2D(e[a].x-t,e[a].y-n);o=i.vectorMultiplication(o),r.push(o)}return r}calculateHeightWidthRatio(e,t){return 0===t.length?0:Math.max(0,this.getPointListMaxY(t))/e}calculateControlPoints(e,t,n,i,r,a,o){let l=this.rules.SlurHeightFactor,c=1;const h=this.rules.SlurHeightFlattenLongSlursCutoffAngle,u=this.rules.SlurHeightFlattenLongSlursCutoffWidth;t>h&&e>u&&(c+=e/70*this.rules.SlurHeightFlattenLongSlursFactorByWidth,c*=1+t/30*this.rules.SlurHeightFlattenLongSlursFactorByAngle,l/=c);const f=Math.min(.5,Math.max(.1,1.7*t/80*l*Math.pow(Math.max(r,.05),.4))),p=Math.min(.5,Math.max(.1,1.7*-n/80*l*Math.pow(Math.max(r,.05),.4))),m=new s.PointF2D;m.x=e*f*Math.cos(t*d.degreesToRadiansFactor),m.y=e*f*Math.sin(t*d.degreesToRadiansFactor);const g=new s.PointF2D;g.x=e-e*p*Math.cos(n*d.degreesToRadiansFactor),g.y=-e*p*Math.sin(n*d.degreesToRadiansFactor);let b=m.y-g.y;for(;this.rules.SlurMaximumYControlPointDistance&&Math.abs(b)>this.rules.SlurMaximumYControlPointDistance;)b<0?(m.y+=1,g.y-=1):(m.y-=1,g.y+=1),b=m.y-g.y;return{startControlPoint:m,endControlPoint:g}}calculateAngles(e,t,n,i){let s=Math.atan(t)/d.degreesToRadiansFactor;t>0?s+=20:s-=20;let r=Math.atan(n)/d.degreesToRadiansFactor;return n<0?r-=20:r+=20,{startAngle:Math.min(Math.max(e,s),i),endAngle:Math.max(Math.min(-e,r),-i)}}}t.GraphicalSlur=d,d.degreesToRadiansFactor=Math.PI/180},4041:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4831),s=n(3288),r=function(){function e(e){this.root=null,this.compare=e||i.defaultCompare,this.nElements=0}return e.prototype.add=function(e){return!i.isUndefined(e)&&null!==this.insertNode(this.createNode(e))&&(this.nElements++,!0)},e.prototype.clear=function(){this.root=null,this.nElements=0},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.size=function(){return this.nElements},e.prototype.contains=function(e){return!i.isUndefined(e)&&null!==this.searchNode(this.root,e)},e.prototype.search=function(e){var t=this.searchNode(this.root,e);if(null!==t)return t.element},e.prototype.remove=function(e){var t=this.searchNode(this.root,e);return null!==t&&(this.removeNode(t),this.nElements--,!0)},e.prototype.inorderTraversal=function(e){this.inorderTraversalAux(this.root,e,{stop:!1})},e.prototype.preorderTraversal=function(e){this.preorderTraversalAux(this.root,e,{stop:!1})},e.prototype.postorderTraversal=function(e){this.postorderTraversalAux(this.root,e,{stop:!1})},e.prototype.levelTraversal=function(e){this.levelTraversalAux(this.root,e)},e.prototype.minimum=function(){if(!this.isEmpty()&&null!==this.root)return this.minimumAux(this.root).element},e.prototype.maximum=function(){if(!this.isEmpty()&&null!==this.root)return this.maximumAux(this.root).element},e.prototype.forEach=function(e){this.inorderTraversal(e)},e.prototype.toArray=function(){var e=[];return this.inorderTraversal((function(t){return e.push(t),!0})),e},e.prototype.height=function(){return this.heightAux(this.root)},e.prototype.searchNode=function(e,t){for(var n=1;null!==e&&0!==n;)(n=this.compare(t,e.element))<0?e=e.leftCh:n>0&&(e=e.rightCh);return e},e.prototype.transplant=function(e,t){null===e.parent?this.root=t:e===e.parent.leftCh?e.parent.leftCh=t:e.parent.rightCh=t,null!==t&&(t.parent=e.parent)},e.prototype.removeNode=function(e){if(null===e.leftCh)this.transplant(e,e.rightCh);else if(null===e.rightCh)this.transplant(e,e.leftCh);else{var t=this.minimumAux(e.rightCh);t.parent!==e&&(this.transplant(t,t.rightCh),t.rightCh=e.rightCh,t.rightCh.parent=t),this.transplant(e,t),t.leftCh=e.leftCh,t.leftCh.parent=t}},e.prototype.inorderTraversalAux=function(e,t,n){null===e||n.stop||(this.inorderTraversalAux(e.leftCh,t,n),n.stop||(n.stop=!1===t(e.element),n.stop||this.inorderTraversalAux(e.rightCh,t,n)))},e.prototype.levelTraversalAux=function(e,t){var n=new s.default;for(null!==e&&n.enqueue(e),e=n.dequeue()||null;null!=e;){if(!1===t(e.element))return;null!==e.leftCh&&n.enqueue(e.leftCh),null!==e.rightCh&&n.enqueue(e.rightCh),e=n.dequeue()||null}},e.prototype.preorderTraversalAux=function(e,t,n){null===e||n.stop||(n.stop=!1===t(e.element),n.stop||(this.preorderTraversalAux(e.leftCh,t,n),n.stop||this.preorderTraversalAux(e.rightCh,t,n)))},e.prototype.postorderTraversalAux=function(e,t,n){null===e||n.stop||(this.postorderTraversalAux(e.leftCh,t,n),n.stop||(this.postorderTraversalAux(e.rightCh,t,n),n.stop||(n.stop=!1===t(e.element))))},e.prototype.minimumAux=function(e){for(;null!=e&&null!==e.leftCh;)e=e.leftCh;return e},e.prototype.maximumAux=function(e){for(;null!=e&&null!==e.rightCh;)e=e.rightCh;return e},e.prototype.heightAux=function(e){return null===e?-1:Math.max(this.heightAux(e.leftCh),this.heightAux(e.rightCh))+1},e.prototype.insertNode=function(e){for(var t=null,n=this.root;null!==n;){var i=this.compare(e.element,n.element);if(0===i)return null;i<0?(t=n,n=n.leftCh):(t=n,n=n.rightCh)}return e.parent=t,null===t?this.root=e:this.compare(e.element,t.element)<0?t.leftCh=e:t.rightCh=e,e},e.prototype.createNode=function(e){return{element:e,leftCh:null,rightCh:null,parent:null}},e}();t.default=r},4064:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.NoteHeadShape=t.Notehead=void 0;const s=i(n(3065));class r{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.sourceNote=e,this.setShapeFromXml(t,n)}setShapeFromXml(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.shape=r.ShapeTypeXmlToShape(e);let n=t;void 0===n&&(this.sourceNote?n=this.sourceNote.Length.Denominator>2:(s.default.warn("notehead: sourceNote and filledXmlAttribute undefined."),n=!0)),this.filled=n}get SourceNote(){return this.sourceNote}get Shape(){return this.shape}get Filled(){return this.filled}static ShapeTypeXmlToShape(e){switch(e.toLowerCase()){case"normal":return a.NORMAL;case"x":return a.X;case"slash":return a.SLASH;case"diamond":return a.DIAMOND;case"square":case"la":return a.SQUARE;case"do":case"triangle":return a.TRIANGLE;case"inverted triangle":return a.TRIANGLE_INVERTED;case"rectangle":return a.RECTANGLE;case"circle-x":return a.CIRCLEX;default:return s.default.info("unsupported/unhandled xml notehead '"+e+"'. Using normal notehead."),a.NORMAL}}}var a;t.Notehead=r,function(e){e[e.CIRCLEX=0]="CIRCLEX",e[e.DIAMOND=1]="DIAMOND",e[e.NORMAL=2]="NORMAL",e[e.RECTANGLE=3]="RECTANGLE",e[e.SLASH=4]="SLASH",e[e.SQUARE=5]="SQUARE",e[e.TRIANGLE=6]="TRIANGLE",e[e.TRIANGLE_INVERTED=7]="TRIANGLE_INVERTED",e[e.X=8]="X"}(a||(t.NoteHeadShape=a={}))},4076:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(1325),t),s(n(7551),t),s(n(6001),t),s(n(3457),t)},4127:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ArticulationReader=void 0;const s=n(1336),r=i(n(3065)),a=n(3123),o=n(8215),l=n(6362),c=n(8233),h=n(9003),u=n(9019),d=n(8045);t.ArticulationReader=class{constructor(e){this.rules=e}getAccEnumFromString(e){switch(e){case"sharp":return c.AccidentalEnum.SHARP;case"flat":return c.AccidentalEnum.FLAT;case"natural":return c.AccidentalEnum.NATURAL;case"double-sharp":case"sharp-sharp":return c.AccidentalEnum.DOUBLESHARP;case"double-flat":case"flat-flat":return c.AccidentalEnum.DOUBLEFLAT;case"triple-sharp":return c.AccidentalEnum.TRIPLESHARP;case"triple-flat":return c.AccidentalEnum.TRIPLEFLAT;case"quarter-sharp":return c.AccidentalEnum.QUARTERTONESHARP;case"quarter-flat":return c.AccidentalEnum.QUARTERTONEFLAT;case"three-quarters-sharp":return c.AccidentalEnum.THREEQUARTERSSHARP;case"three-quarters-flat":return c.AccidentalEnum.THREEQUARTERSFLAT;case"slash-quarter-sharp":return c.AccidentalEnum.SLASHQUARTERSHARP;case"slash-sharp":return c.AccidentalEnum.SLASHSHARP;case"double-slash-flat":return c.AccidentalEnum.DOUBLESLASHFLAT;case"sori":return c.AccidentalEnum.SORI;case"koron":return c.AccidentalEnum.KORON;default:return c.AccidentalEnum.NONE}}addArticulationExpression(e,t){if(void 0!==e&&e.elements().length>0){const a=e.elements();for(let o=0,c=a.length;o<c;++o){const c=a[o];let f=c.name;try{f=f.replace("-","");const e=s.ArticulationEnum[f];if(s.VoiceEntry.isSupportedArticulation(e)){var n;let r=l.PlacementEnum.NotYetDefined;const a=null===(n=c.attribute("placement"))||void 0===n?void 0:n.value;"above"===a?r=l.PlacementEnum.Above:"below"===a&&(r=l.PlacementEnum.Below);const o=new h.Articulation(e,r);if("staccato"===f)t.Articulations.length>0&&t.Articulations[0].articulationEnum!==s.ArticulationEnum.staccato&&t.Articulations.splice(0,0,o);else if("breathmark"===f)r===l.PlacementEnum.NotYetDefined&&(o.placement=l.PlacementEnum.Above);else if("strongaccent"===f){var i;const e=null===c||void 0===c||null===(i=c.attribute("type"))||void 0===i?void 0:i.value;"up"===e?o.articulationEnum=s.ArticulationEnum.marcatoup:"down"===e&&(o.articulationEnum=s.ArticulationEnum.marcatodown)}else if(e===s.ArticulationEnum.softaccent){const e=t.ParentSourceStaffEntry.ParentStaff.Id-1;r===l.PlacementEnum.NotYetDefined&&(r=l.PlacementEnum.Above,e>0&&(r=l.PlacementEnum.Below));const n=t.ParentSourceStaffEntry.VerticalContainerParent.ParentMeasure,i=new u.MultiExpression(n,t.Timestamp);i.StartingContinuousDynamic=new d.ContinuousDynamicExpression(d.ContDynamicEnum.crescendo,r,e,n,-1),i.StartingContinuousDynamic.IsStartOfSoftAccent=!0,i.StartingContinuousDynamic.StartMultiExpression=i,i.StartingContinuousDynamic.EndMultiExpression=i,i.EndingContinuousDynamic=new d.ContinuousDynamicExpression(d.ContDynamicEnum.diminuendo,r,e,n,-1),i.EndingContinuousDynamic.StartMultiExpression=i,i.EndingContinuousDynamic.EndMultiExpression=i,n.StaffLinkedExpressions[e].push(i)}t.hasArticulation(o)||t.Articulations.push(o)}}catch(e){const t="Invalid note articulation.";return void r.default.debug("addArticulationExpression",t,e)}}}}addFermata(e,t){var n;let i=s.ArticulationEnum.fermata;e.attributes().length>0&&e.attribute("type")&&"inverted"===e.attribute("type").value&&(i=s.ArticulationEnum.invertedfermata);let r=l.PlacementEnum.Above;"below"===(null===(n=e.attribute("placement"))||void 0===n?void 0:n.value)&&(r=l.PlacementEnum.Below),t.Articulations.push(new h.Articulation(i,r))}addTechnicalArticulations(e,t,n){const i={bend:s.ArticulationEnum.bend,"down-bow":s.ArticulationEnum.downbow,"open-string":s.ArticulationEnum.naturalharmonic,"snap-pizzicato":s.ArticulationEnum.snappizzicato,stopped:s.ArticulationEnum.lefthandpizzicato,"up-bow":s.ArticulationEnum.upbow,harmonic:s.ArticulationEnum.naturalharmonic};for(const s in i){if(!i.hasOwnProperty(s))continue;const n=i[s],a=e.element(s);if(a){var r,o;let e;"above"===(null===(r=a.attribute("placement"))||void 0===r?void 0:r.value)&&(e=l.PlacementEnum.Above),"below"===(null===(o=a.attribute("placement"))||void 0===o?void 0:o.value)&&(e=l.PlacementEnum.Below);const i=new h.Articulation(n,e);t.hasArticulation(i)||t.Articulations.push(i)}}const c=e.elements("fingering");for(const s of c){const e=this.createTechnicalInstruction(s,n);e.type=a.TechnicalInstructionType.Fingering,n.Fingering||(n.Fingering=e),t.TechnicalInstructions.push(e)}const u=e.element("string");if(u){const e=this.createTechnicalInstruction(u,n);e.type=a.TechnicalInstructionType.String,n.StringInstruction=e,t.TechnicalInstructions.push(e)}}createTechnicalInstruction(e,t){const n=new a.TechnicalInstruction;n.sourceNote=t,n.value=e.value;const i=e.attribute("placement");return this.rules.FingeringPositionFromXML&&(n.placement=this.getPlacement(i)),n}getPlacement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.PlacementEnum.NotYetDefined;if(t!==l.PlacementEnum.NotYetDefined)return t;if(!e)return l.PlacementEnum.NotYetDefined;switch(e.value){case"above":return l.PlacementEnum.Above;case"below":return l.PlacementEnum.Below;case"left":return l.PlacementEnum.Left;case"right":return l.PlacementEnum.Right;default:return l.PlacementEnum.NotYetDefined}}addOrnament(e,t){if(e){let n;const i={"delayed-inverted-turn":o.OrnamentEnum.DelayedInvertedTurn,"delayed-turn":o.OrnamentEnum.DelayedTurn,"inverted-mordent":o.OrnamentEnum.InvertedMordent,"inverted-turn":o.OrnamentEnum.InvertedTurn,mordent:o.OrnamentEnum.Mordent,"trill-mark":o.OrnamentEnum.Trill,turn:o.OrnamentEnum.Turn};for(const t in i){if(!i.hasOwnProperty(t))continue;const s=e.element(t);if(s){n=new o.OrnamentContainer(i[t]);const e=s.attribute("placement");e&&"below"===e.value&&(n.placement=l.PlacementEnum.Below)}}if(n){const i=e.elements("accidental-mark");if(i){let e=l.PlacementEnum.Below,t=c.AccidentalEnum.NONE;const s=i;for(let i=0,r=s.length;i<r;++i){const r=s[i];let a=r.value;t=this.getAccEnumFromString(a);const o=r.attribute("placement");r.hasAttributes&&o&&(a=o.value,"above"===a?e=l.PlacementEnum.Above:"below"===a&&(e=l.PlacementEnum.Below)),e===l.PlacementEnum.Above?n.AccidentalAbove=t:e===l.PlacementEnum.Below&&(n.AccidentalBelow=t)}}t.OrnamentContainer=n}}}}},4134:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowVoiceEntry=void 0;const i=n(4548),s=n(9479),r=n(4434);class a extends i.GraphicalVoiceEntry{constructor(e,t,n){super(e,t,n)}applyBordersFromVexflow(){var e;const t=this.vfStaveNote;if(!t.getNoteHeadBeginX)return;const n=t.getBoundingBox(),i=t.getNoteHeadBeginX()-n.x;this.PositionAndShape.RelativePosition.y=n.y/s.unitInPixels,this.PositionAndShape.BorderTop=0,this.PositionAndShape.BorderBottom=n.h/s.unitInPixels;const r=(t.width-(null!==(e=t.paddingRight)&&void 0!==e?e:0))/2;this.PositionAndShape.BorderLeft=-(i+r)/s.unitInPixels,this.PositionAndShape.BorderRight=(n.w-i)/s.unitInPixels}set vfStaveNote(e){this.mVexFlowStaveNote=e}get vfStaveNote(){return this.mVexFlowStaveNote}applyCustomNoteheads(){const e=this.vfStaveNote;if(e)for(let t=0;t<this.notes.length;t++){const n=this.notes[t].sourceNote;e.note_heads&&n.CustomNoteheadVFCode&&(e.note_heads[t].glyph_code=n.CustomNoteheadVFCode)}}color(){const e=this.rules.DefaultColorNotehead,t=this.rules.DefaultColorRest,n=this.rules.DefaultColorStem,i="#00000000";let s,a;const o=this.vfStaveNote;for(let f=0;f<this.notes.length;f++){const n=this.notes[f];if(a=n.sourceNote.NoteheadColor,s=a,this.rules.ColoringMode===r.ColoringModes.AutoColoring||this.rules.ColoringMode===r.ColoringModes.CustomColorSet)if(n.sourceNote.isRest())s=this.rules.ColoringSetCurrent.getValue(-1);else{const e=n.sourceNote.Pitch.FundamentalNote;s=this.rules.ColoringSetCurrent.getValue(e)}if(n.sourceNote.PrintObject?s&&"#000000"!==s||(s=this.rules.DefaultColorNotehead):s=i,!a&&this.rules.ColoringMode===r.ColoringModes.XML&&n.sourceNote.PrintObject&&(!n.sourceNote.isRest()&&e?s=e:n.sourceNote.isRest()&&t&&(s=t)),s&&n.sourceNote.PrintObject)n.sourceNote.NoteheadColorCurrentlyRendered=s;else if(!s)continue;if(this.rules.ColoringEnabled&&n.sourceNote.NoteBeam&&this.rules.ColorBeams){var l;const e=n.sourceNote.NoteBeam.Notes;let t=!0;for(let n=0;n<e.length;n++)e[n].NoteheadColorCurrentlyRendered!==s&&(t=!1);t&&(null===o||void 0===o||null===(l=o.beam)||void 0===l?void 0:l.setStyle)&&o.beam.setStyle({fillStyle:s,strokeStyle:s})}if(o){if(o.note_heads){const e=o.note_heads[f];e&&e.setStyle({fillStyle:s,strokeStyle:s})}o.setLedgerLineStyle&&(s===i?o.setLedgerLineStyle({fillStyle:s,strokeStyle:s,lineWidth:this.rules.LedgerLineWidth}):o.setLedgerLineStyle({fillStyle:this.rules.LedgerLineColorDefault,lineWidth:this.rules.LedgerLineWidth,strokeStyle:this.rules.LedgerLineColorDefault}))}}let c=n,h=!1;this.rules.ColoringEnabled&&(c=this.parentVoiceEntry.StemColor,c&&"#000000"!==c||(c=n),this.rules.ColorStemsLikeNoteheads&&s&&(c=s,h=!0));let u=!0;for(const r of this.parentVoiceEntry.Notes)if(r.PrintObject){u=!1;break}u&&(c=i);const d={fillStyle:c,strokeStyle:c};o&&o.setStemStyle&&(!u&&h&&(this.parentVoiceEntry.StemColor=c),o.setStemStyle(d),o.flag&&o.setFlagStyle&&this.rules.ColorFlags&&o.setFlagStyle(d))}}t.VexFlowVoiceEntry=a},4146:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DrawingParametersEnum=void 0,function(e){e.allon="allon",e.compact="compact",e.compacttight="compacttight",e.default="default",e.leadsheet="leadsheet",e.preview="preview",e.thumbnail="thumbnail"}(n||(t.DrawingParametersEnum=n={}))},4236:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ArpeggioType=t.Arpeggio=void 0,t.Arpeggio=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.ARPEGGIO_DIRECTIONLESS;this.parentVoiceEntry=e,this.type=t,this.notes=[]}addNote(e){this.notes.push(e),e.Arpeggio=this}},function(e){e[e.BRUSH_DOWN=1]="BRUSH_DOWN",e[e.BRUSH_UP=2]="BRUSH_UP",e[e.ROLL_DOWN=3]="ROLL_DOWN",e[e.ROLL_UP=4]="ROLL_UP",e[e.RASQUEDO_DOWN=5]="RASQUEDO_DOWN",e[e.RASQUEDO_UP=6]="RASQUEDO_UP",e[e.ARPEGGIO_DIRECTIONLESS=7]="ARPEGGIO_DIRECTIONLESS"}(n||(t.ArpeggioType=n={}))},4249:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedVoice=void 0;const i=n(5534);class s extends i.Voice{constructor(e,t,n){super(e,t),this.master=n}get Master(){return this.master}}t.LinkedVoice=s},4268:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tuplet=void 0,t.Tuplet=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.PlacementFromXml=!1,this.RenderTupletNumber=!0,this.notes=[],this.fractions=[],this.tupletLabelNumber=e,this.bracket=t}shouldBeBracketed(e,t,n){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3])return arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e&&void 0!==this.BracketedXmlValue)return this.BracketedXmlValue;const i=this.Notes[0][0].NoteBeam;if(!i)return!0;for(const s of this.Notes)if(s[0].NoteBeam!==i)return!0;return this.Bracket||3===this.TupletLabelNumber&&n||3!==this.TupletLabelNumber&&t}get TupletLabelNumber(){return this.tupletLabelNumber}set TupletLabelNumber(e){this.tupletLabelNumber=e}get Notes(){return this.notes}set Notes(e){this.notes=e}get Fractions(){return this.fractions}set Fractions(e){this.fractions=e}get Bracket(){return this.bracket}set Bracket(e){this.bracket=e}getNoteIndex(e){for(let t=this.notes.length-1;t>=0;t--)for(let n=0;n<this.notes[t].length;n++)if(e===this.notes[t][n])return t;return 0}}},4284:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemLine=void 0;const i=n(6954),s=n(6438),r=n(7741);class a extends r.GraphicalObject{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;super(),this.lineType=e,this.linePosition=t,this.parentMusicSystem=n,this.topMeasure=i,this.bottomMeasure=r,this.parentTopStaffLine=null===i||void 0===i?void 0:i.ParentStaffLine,this.boundingBox=new s.BoundingBox(this,n.PositionAndShape)}static getObjectWidthForLineType(e,t){switch(t){case i.SystemLinesEnum.SingleThin:return e.SystemThinLineWidth;case i.SystemLinesEnum.DoubleThin:return 2*e.SystemThinLineWidth+e.DistanceBetweenVerticalSystemLines;case i.SystemLinesEnum.ThinBold:return e.SystemThinLineWidth+e.SystemBoldLineWidth+e.DistanceBetweenVerticalSystemLines;case i.SystemLinesEnum.BoldThinDots:case i.SystemLinesEnum.DotsThinBold:return e.SystemThinLineWidth+e.SystemBoldLineWidth+e.DistanceBetweenVerticalSystemLines+e.SystemDotWidth+e.DistanceBetweenDotAndLine;case i.SystemLinesEnum.DotsBoldBoldDots:return 2*e.SystemBoldLineWidth+2*e.SystemDotWidth+2*e.DistanceBetweenDotAndLine+e.DistanceBetweenVerticalSystemLines;default:return 0}}}t.SystemLine=a},4332:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowMusicSystem=void 0;const i=n(5221),s=n(6954),r=n(4284),a=n(6014),o=n(3109),l=n(7098);class c extends i.MusicSystem{constructor(e,t){super(e),this.rules=t}calculateBorders(e){if(0===this.staffLines.length)return;const t=this.calcBracketsWidth();this.boundingBox.BorderLeft=-t,this.boundingBox.BorderMarginLeft=-t,this.boundingBox.XBordersHaveBeenSet=!0;const n=this.staffLines[0].SkyBottomLineCalculator.getSkyLineMin();this.boundingBox.BorderTop=n,this.boundingBox.BorderMarginTop=n;const i=this.staffLines[this.staffLines.length-1],s=i.SkyBottomLineCalculator.getBottomLineMax()+i.PositionAndShape.RelativePosition.y;this.boundingBox.BorderBottom=s,this.boundingBox.BorderMarginBottom=s,this.boundingBox.XBordersHaveBeenSet=!0,this.boundingBox.YBordersHaveBeenSet=!0}createSystemLine(e,t,n,i,o,l){let c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;const h=l;let u=!1;if(c&&(u=!0,c.lineTo(l,a.VexFlowConverter.line(n,i)),c.addMeasureLine(n,i),n===s.SystemLinesEnum.DotsBoldBoldDots)){const e=c.ParentStaffLine.Measures.indexOf(c)+1,t=c.ParentStaffLine.Measures[e],n=l.ParentStaffLine.Measures[e];t&&n&&(t.lineTo(n,a.VexFlowConverter.line(s.SystemLinesEnum.BoldThinDots,i)),t.addMeasureLine(s.SystemLinesEnum.BoldThinDots,i))}return h&&h.addMeasureLine(n,i,u),new r.SystemLine(n,i,this,l,c)}createInstrumentBracket(e,t){const n=e,i=t,s=new l.VexFlowInstrumentBrace(n,i);this.InstrumentBrackets.push(s)}createGroupBracket(e,t,n){const i=e,s=t;if(0===n){const e=new o.VexFlowInstrumentBracket(i,s,n);this.GroupBrackets.push(e)}else{const e=new l.VexFlowInstrumentBrace(i,s,n);this.GroupBrackets.push(e)}}}t.VexFlowMusicSystem=c},4356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtil=void 0,t.StringUtil=class{static StringContainsSeparatedWord(e,t){return new RegExp("( |^)"+t+"([ .]|$)",arguments.length>2&&void 0!==arguments[2]&&arguments[2]?"i":void 0).test(e)}}},4387:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceMeasure=void 0;const i=n(2561),s=n(3236),r=n(2369),a=n(1645),o=n(1336),l=n(164),c=n(4543),h=n(6954);t.SourceMeasure=class{constructor(e,t){this.printNewSystemXml=!1,this.printNewPageXml=!1,this.IsSystemStartMeasure=!1,this.WidthFactor=1,this.hasLyrics=!1,this.hasMoodExpressions=!1,this.allRests=!1,this.isReducedToMultiRest=!1,this.multipleRestMeasureNumber=0,this.staffLinkedExpressions=[],this.tempoExpressions=[],this.verticalSourceStaffEntryContainers=[],this.graphicalMeasureErrors=[],this.firstRepetitionInstructions=[],this.lastRepetitionInstructions=[],this.completeNumberOfStaves=e,this.implicitMeasure=!1,this.hasEndLine=!1,this.endingBarStyleXml="",this.endingBarStyleEnum=h.SystemLinesEnum.SingleThin,this.firstInstructionsStaffEntries=new Array(e),this.lastInstructionsStaffEntries=new Array(e),this.rules=t,this.TempoInBPM=0;for(let n=0;n<e;n++)this.graphicalMeasureErrors.push(!1),this.staffLinkedExpressions.push([])}get MeasureNumber(){return this.measureNumber}set MeasureNumber(e){this.measureNumber=e}getPrintedMeasureNumber(){return this.rules.UseXMLMeasureNumbers&&Number.isInteger(this.MeasureNumberXML)?(this.MeasureNumberPrinted=this.MeasureNumberXML,this.MeasureNumberPrinted):(this.MeasureNumberPrinted=this.MeasureNumber,this.MeasureNumberPrinted)}get AbsoluteTimestamp(){return this.absoluteTimestamp}set AbsoluteTimestamp(e){this.absoluteTimestamp=e}get CompleteNumberOfStaves(){return this.completeNumberOfStaves}get Duration(){return this.duration}set Duration(e){this.duration=e}get ActiveTimeSignature(){return this.activeTimeSignature}set ActiveTimeSignature(e){this.activeTimeSignature=e}get ImplicitMeasure(){return this.implicitMeasure}set ImplicitMeasure(e){this.implicitMeasure=e}get HasEndLine(){return this.hasEndLine}set HasEndLine(e){this.hasEndLine=e}get StaffLinkedExpressions(){return this.staffLinkedExpressions}get TempoExpressions(){return this.tempoExpressions}get VerticalSourceStaffEntryContainers(){return this.verticalSourceStaffEntryContainers}get FirstInstructionsStaffEntries(){return this.firstInstructionsStaffEntries}get LastInstructionsStaffEntries(){return this.lastInstructionsStaffEntries}get FirstRepetitionInstructions(){return this.firstRepetitionInstructions}get LastRepetitionInstructions(){return this.lastRepetitionInstructions}getErrorInMeasure(e){return this.graphicalMeasureErrors[e]}setErrorInGraphicalMeasure(e,t){this.graphicalMeasureErrors[e]=t}getNextMeasure(e){return e[this.measureListIndex+1]}getPreviousMeasure(e){if(this.measureListIndex>1)return e[this.measureListIndex-1]}get Rules(){return this.rules}get VerticalMeasureList(){return this.verticalMeasureList}set VerticalMeasureList(e){this.verticalMeasureList=e}get TempoInBPM(){return this.tempoInBPM}set TempoInBPM(e){this.tempoInBPM=e}findOrCreateStaffEntry(e,t,n){let i,a;for(const s of this.verticalSourceStaffEntryContainers)if(s.Timestamp.Equals(e)){a=s;break}if(a)return a.StaffEntries[t]?i=a.StaffEntries[t]:(i=new r.SourceStaffEntry(a,n),a.StaffEntries[t]=i),{createdNewContainer:!1,staffEntry:i};const o=this.verticalSourceStaffEntryContainers[this.verticalSourceStaffEntryContainers.length-1];if(0===this.verticalSourceStaffEntryContainers.length||o.Timestamp.lt(e)){const a=new s.VerticalSourceStaffEntryContainer(this,e.clone(),this.completeNumberOfStaves);this.verticalSourceStaffEntryContainers.push(a),i=new r.SourceStaffEntry(a,n),a.StaffEntries[t]=i}else for(let l=this.verticalSourceStaffEntryContainers.length-1;l>=0;l--){if(this.verticalSourceStaffEntryContainers[l].Timestamp.lt(e)){const a=new s.VerticalSourceStaffEntryContainer(this,e.clone(),this.completeNumberOfStaves);this.verticalSourceStaffEntryContainers.splice(l+1,0,a),i=new r.SourceStaffEntry(a,n),a.StaffEntries[t]=i;break}if(0===l){const a=new s.VerticalSourceStaffEntryContainer(this,e.clone(),this.completeNumberOfStaves);this.verticalSourceStaffEntryContainers.splice(l,0,a),i=new r.SourceStaffEntry(a,n),a.StaffEntries[t]=i;break}}return{createdNewContainer:!0,staffEntry:i}}findOrCreateVoiceEntry(e,t){let n,i=!1;for(const s of e.VoiceEntries)if(s.ParentVoice===t){n=s;break}return n||(n=new o.VoiceEntry(e.Timestamp,t,e),i=!0),{createdVoiceEntry:i,voiceEntry:n}}getPreviousSourceStaffEntryFromIndex(e,t){for(let n=t-1;n>=0;n--)if(this.verticalSourceStaffEntryContainers[n][e])return this.verticalSourceStaffEntryContainers[n][e]}getVerticalContainerIndexByTimestamp(e){for(let t=0,n=this.VerticalSourceStaffEntryContainers.length;t<n;++t)if(this.VerticalSourceStaffEntryContainers[t].Timestamp.Equals(e))return t;return-1}getVerticalContainerByTimestamp(e){for(let t=0,n=this.VerticalSourceStaffEntryContainers.length;t<n;++t){const n=this.VerticalSourceStaffEntryContainers[t];if(n.Timestamp.Equals(e))return n}}checkForEmptyVerticalContainer(e){let t=0;for(let n=0;n<this.completeNumberOfStaves;n++)this.verticalSourceStaffEntryContainers[e][n]||t++;t===this.completeNumberOfStaves&&this.verticalSourceStaffEntryContainers.splice(e,1)}reverseCheck(e,t){let n=new i.Fraction(0,1);const s=[];for(let r=0;r<e.Instruments.length;r++){let t=new i.Fraction(0,1);const n=e.getGlobalStaffIndexOfFirstStaff(e.Instruments[r]);for(let s=0;s<e.Instruments[r].Staves.length;s++){const e=this.getLastSourceStaffEntryForInstrument(n+s);if(void 0!==e&&!e.hasTie())for(let r=this.verticalSourceStaffEntryContainers.indexOf(e.VerticalContainerParent)-1;r>=0;r--){const e=this.verticalSourceStaffEntryContainers[r][n+s];if(void 0!==e&&e.hasTie()&&t.lt(i.Fraction.plus(e.Timestamp,e.calculateMaxNoteLength()))){t=i.Fraction.plus(e.Timestamp,e.calculateMaxNoteLength());break}}}s.push(t)}for(let i=0,r=s.length;i<r;++i){const e=s[i];n.lt(e)&&(n=e)}return i.Fraction.max(n,t)}calculateInstrumentsDuration(e,t){const n=[];for(let s=0;s<e.Instruments.length;s++){let r=new i.Fraction(0,1);const a=e.getGlobalStaffIndexOfFirstStaff(e.Instruments[s]);for(let t=0;t<e.Instruments[s].Staves.length;t++){const e=this.getLastSourceStaffEntryForInstrument(a+t);if(void 0!==e&&e.Timestamp){const t=e.calculateMaxNoteLength(!1);r.lt(i.Fraction.plus(e.Timestamp,t))&&(r=i.Fraction.plus(e.Timestamp,t))}}r.lt(t[s])&&(r=t[s]),n.push(r)}return n}getEntriesPerStaff(e){const t=[];for(const n of this.VerticalSourceStaffEntryContainers){const i=n.StaffEntries[e];i&&t.push(i)}return t}hasBeginInstructions(){for(let e=0,t=this.FirstInstructionsStaffEntries.length;e<t;e++){const t=this.FirstInstructionsStaffEntries[e];if(void 0!==t&&t.Instructions.length>0)return!0}return!1}beginsWithRepetition(){return this.beginsWithLineRepetition()||this.beginsWithWordRepetition()}beginsWithLineRepetition(){for(let e=0,t=this.FirstRepetitionInstructions.length;e<t;++e){const t=this.FirstRepetitionInstructions[e];if(t.type===a.RepetitionInstructionEnum.StartLine)return!0;if(void 0!==t.parentRepetition&&t===t.parentRepetition.startMarker&&!t.parentRepetition.FromWords)return!0}return!1}endsWithLineRepetition(){for(let e=0,t=this.LastRepetitionInstructions.length;e<t;++e){const t=this.LastRepetitionInstructions[e];if(t.type===a.RepetitionInstructionEnum.BackJumpLine)return!0;const n=t.parentRepetition;if(n&&!n.FromWords)for(let e=0,i=n.BackwardJumpInstructions.length;e<i;++e)if(t===n.BackwardJumpInstructions[e])return!0}return!1}beginsWithWordRepetition(){for(let e=0,t=this.FirstRepetitionInstructions.length;e<t;++e){const t=this.FirstRepetitionInstructions[e];if(void 0!==t.parentRepetition&&t===t.parentRepetition.startMarker&&t.parentRepetition.FromWords)return!0}return!1}endsWithWordRepetition(){for(let e=0,t=this.LastRepetitionInstructions.length;e<t;++e){const t=this.LastRepetitionInstructions[e],n=t.parentRepetition;if(n&&n.FromWords){for(let e=0,i=n.BackwardJumpInstructions.length;e<i;++e)if(t===n.BackwardJumpInstructions[e])return!0;if(t===n.forwardJumpInstruction)return!0}}return!1}beginsRepetitionEnding(){for(const e of this.FirstRepetitionInstructions)if(e.type===a.RepetitionInstructionEnum.Ending&&e.alignment===a.AlignmentType.Begin)return!0;return!1}endsRepetitionEnding(){for(const e of this.LastRepetitionInstructions)if(e.type===a.RepetitionInstructionEnum.Ending&&e.alignment===a.AlignmentType.End)return!0;return!1}getKeyInstruction(e){if(this.FirstInstructionsStaffEntries[e]){const t=this.FirstInstructionsStaffEntries[e];for(let e=0,n=t.Instructions.length;e<n;++e){const n=t.Instructions[e];if(n instanceof c.KeyInstruction)return n}}}getLastSourceStaffEntryForInstrument(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(let i=this.verticalSourceStaffEntryContainers.length-1;i>=0;i--)if(t=this.verticalSourceStaffEntryContainers[i].StaffEntries[e],t&&(!n||t.VoiceEntries.length>0))return t}canBeReducedToMultiRest(){var e,t;if(this.firstRepetitionInstructions.length>0||this.lastRepetitionInstructions.length>0)return!1;let n=!0,i=!1;for(const s of this.verticalSourceStaffEntryContainers)if(s)for(const e of s.StaffEntries)if(e&&e.ParentStaff.isVisible()){if(e.ChordContainers.length>0)return!1;e.ParentStaff.hasLyrics&&(i=!0);for(const t of e.VoiceEntries){for(const e of t.Notes)if(!e.isRest()){n=!1;break}if(!n)break}}if(!n||i||this.hasMoodExpressions||this.tempoExpressions.length>0)return!1;for(const s of this.staffLinkedExpressions)if(s.length>0)return!1;for(const s of this.lastInstructionsStaffEntries)for(let e=0,t=null===s||void 0===s?void 0:s.Instructions.length;e<t;++e)if(s.Instructions[e]instanceof l.ClefInstruction)return!1;return(null===(e=this.Duration)||void 0===e?void 0:e.RealValue)===(null===(t=this.ActiveTimeSignature)||void 0===t?void 0:t.RealValue)}}},4434:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ColoringModes=void 0,function(e){e[e.XML=0]="XML",e[e.AutoColoring=1]="AutoColoring",e[e.CustomColorSet=2]="CustomColorSet"}(n||(t.ColoringModes=n={}))},4538:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4831),s=n(4713),r=function(){function e(){this.firstNode=null,this.lastNode=null,this.nElements=0}return e.prototype.add=function(e,t){if(i.isUndefined(t)&&(t=this.nElements),t<0||t>this.nElements||i.isUndefined(e))return!1;var n=this.createNode(e);if(0===this.nElements||null===this.lastNode)this.firstNode=n,this.lastNode=n;else if(t===this.nElements)this.lastNode.next=n,this.lastNode=n;else if(0===t)n.next=this.firstNode,this.firstNode=n;else{var s=this.nodeAtIndex(t-1);if(null===s)return!1;n.next=s.next,s.next=n}return this.nElements++,!0},e.prototype.first=function(){if(null!==this.firstNode)return this.firstNode.element},e.prototype.last=function(){if(null!==this.lastNode)return this.lastNode.element},e.prototype.elementAtIndex=function(e){var t=this.nodeAtIndex(e);if(null!==t)return t.element},e.prototype.indexOf=function(e,t){var n=t||i.defaultEquals;if(i.isUndefined(e))return-1;for(var s=this.firstNode,r=0;null!==s;){if(n(s.element,e))return r;r++,s=s.next}return-1},e.prototype.contains=function(e,t){return this.indexOf(e,t)>=0},e.prototype.remove=function(e,t){var n=t||i.defaultEquals;if(this.nElements<1||i.isUndefined(e))return!1;for(var s=null,r=this.firstNode;null!==r;){if(n(r.element,e))return null===s?(this.firstNode=r.next,r===this.lastNode&&(this.lastNode=null)):r===this.lastNode?(this.lastNode=s,s.next=r.next,r.next=null):(s.next=r.next,r.next=null),this.nElements--,!0;s=r,r=r.next}return!1},e.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},e.prototype.equals=function(t,n){var s=n||i.defaultEquals;return t instanceof e&&this.size()===t.size()&&this.equalsAux(this.firstNode,t.firstNode,s)},e.prototype.equalsAux=function(e,t,n){for(;null!==e&&null!==t;){if(!n(e.element,t.element))return!1;e=e.next,t=t.next}return!0},e.prototype.removeElementAtIndex=function(e){if(!(e<0||e>=this.nElements||null===this.firstNode||null===this.lastNode)){var t;if(1===this.nElements)t=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var n=this.nodeAtIndex(e-1);null===n?(t=this.firstNode.element,this.firstNode=this.firstNode.next):n.next===this.lastNode&&(t=this.lastNode.element,this.lastNode=n),null!==n&&null!==n.next&&(t=n.next.element,n.next=n.next.next)}return this.nElements--,t}},e.prototype.forEach=function(e){for(var t=this.firstNode;null!==t&&!1!==e(t.element);)t=t.next},e.prototype.reverse=function(){for(var e=null,t=this.firstNode,n=null;null!==t;)n=t.next,t.next=e,e=t,t=n;n=this.firstNode,this.firstNode=this.lastNode,this.lastNode=n},e.prototype.toArray=function(){for(var e=[],t=this.firstNode;null!==t;)e.push(t.element),t=t.next;return e},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){return s.toString(this.toArray())},e.prototype.nodeAtIndex=function(e){if(e<0||e>=this.nElements)return null;if(e===this.nElements-1)return this.lastNode;for(var t=this.firstNode,n=0;n<e&&null!==t;n++)t=t.next;return t},e.prototype.createNode=function(e){return{element:e,next:null}},e}();t.default=r},4543:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyEnum=t.NoteEnumToHalfToneLink=t.KeyInstruction=void 0;const i=n(5364),s=n(8233),r=n(8233);class a extends i.AbstractNotationInstruction{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.major;super(e),this.isTransposedBy=0,this.Key=t,this.keyTypeOriginal=t,this.mode=n,this.alteratedNotes=this.calcAlteratedNotes()}static copy(e){const t=new a(e.parent,e.Key,e.Mode);return t.keyTypeOriginal=e.keyTypeOriginal,t}static getAllPossibleMajorKeyInstructions(){const e=[];for(let t=-7;t<7;t++){const n=new a(void 0,t,o.major);e.push(n)}return e}get Key(){return this.keyType}set Key(e){this.keyType=e,this.alteratedNotes=this.calcAlteratedNotes()}get Mode(){return this.mode}set Mode(e){this.mode=e}get AlteratedNotes(){return this.alteratedNotes}calcAlteratedNotes(){const e=[];if(this.keyType>0)for(let t=0;t<this.keyType;t++)e.push(a.sharpPositionList[t]);else if(this.keyType<0)for(let t=0;t<-this.keyType;t++)e.push(a.flatPositionList[t]);return e}willAlterateNote(e){return this.alteratedNotes.indexOf(e)>=0}getAlterationForPitch(e){return this.keyType>0&&this.alteratedNotes.indexOf(e.FundamentalNote)<=this.keyType?r.AccidentalEnum.SHARP:this.keyType<0&&this.alteratedNotes.indexOf(e.FundamentalNote)<=Math.abs(this.keyType)?r.AccidentalEnum.FLAT:r.AccidentalEnum.NONE}ToString(){return"Key: "+this.keyType+this.mode}OperatorEquals(e){const t=this;return t===e||!(!t||!e)&&t.Key===e.Key&&t.Mode===e.Mode}OperatorNotEqual(e){return!this.OperatorEquals(e)}}var o;t.KeyInstruction=a,a.sharpPositionList=[s.NoteEnum.F,s.NoteEnum.C,s.NoteEnum.G,s.NoteEnum.D,s.NoteEnum.A,s.NoteEnum.E,s.NoteEnum.B],a.flatPositionList=[s.NoteEnum.B,s.NoteEnum.E,s.NoteEnum.A,s.NoteEnum.D,s.NoteEnum.G,s.NoteEnum.C,s.NoteEnum.F],t.NoteEnumToHalfToneLink=class{constructor(e,t){this.note=e,this.halfTone=t}},function(e){e[e.major=0]="major",e[e.minor=1]="minor",e[e.none=2]="none",e[e.dorian=3]="dorian",e[e.phrygian=4]="phrygian",e[e.lydian=5]="lydian",e[e.mixolydian=6]="mixolydian",e[e.aeolian=7]="aeolian",e[e.ionian=8]="ionian",e[e.locrian=9]="locrian"}(o||(t.KeyEnum=o={}))},4548:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalVoiceEntry=void 0;const i=n(7741),s=n(6438),r=n(9713);class a extends i.GraphicalObject{constructor(e,t,n){super(),this.parentVoiceEntry=e,this.parentStaffEntry=t,this.PositionAndShape=new s.BoundingBox(this,t?t.PositionAndShape:void 0,!0),this.notes=[],this.rules=n||(t?t.parentMeasure.parentSourceMeasure.Rules:new r.EngravingRules)}sort(){return this.notes.sort(((e,t)=>{var n,i,s,r;return(null!==(n=null===(i=t.sourceNote.Pitch)||void 0===i?void 0:i.getHalfTone())&&void 0!==n?n:0)-(null!==(s=null===(r=e.sourceNote.Pitch)||void 0===r?void 0:r.getHalfTone())&&void 0!==s?s:0)})),this.notes}sortForVexflow(){return this.notes.sort(((e,t)=>{var n,i,s;return(null!==(n=null===(i=e.sourceNote.Pitch)||void 0===i?void 0:i.getHalfTone())&&void 0!==n?n:0)-(null!==(s=t.sourceNote.Pitch.getHalfTone())&&void 0!==s?s:0)})),this.notes}applyCustomNoteheads(){}color(){}}t.GraphicalVoiceEntry=a},4589:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4831),s=n(4713),r=function(){function e(e){this.data=[],this.compare=e||i.defaultCompare}return e.prototype.leftChildIndex=function(e){return 2*e+1},e.prototype.rightChildIndex=function(e){return 2*e+2},e.prototype.parentIndex=function(e){return Math.floor((e-1)/2)},e.prototype.minIndex=function(e,t){return t>=this.data.length?e>=this.data.length?-1:e:this.compare(this.data[e],this.data[t])<=0?e:t},e.prototype.siftUp=function(e){for(var t=this.parentIndex(e);e>0&&this.compare(this.data[t],this.data[e])>0;)s.swap(this.data,t,e),e=t,t=this.parentIndex(e)},e.prototype.siftDown=function(e){for(var t=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e));t>=0&&this.compare(this.data[e],this.data[t])>0;)s.swap(this.data,t,e),e=t,t=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e))},e.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},e.prototype.add=function(e){return!i.isUndefined(e)&&(this.data.push(e),this.siftUp(this.data.length-1),!0)},e.prototype.removeRoot=function(){if(this.data.length>0){var e=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),e}},e.prototype.contains=function(e){var t=i.compareToEquals(this.compare);return s.contains(this.data,e,t)},e.prototype.size=function(){return this.data.length},e.prototype.isEmpty=function(){return this.data.length<=0},e.prototype.clear=function(){this.data.length=0},e.prototype.forEach=function(e){s.forEach(this.data,e)},e}();t.default=r},4713:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4831);function s(e,t,n){for(var s=n||i.defaultEquals,r=e.length,a=0;a<r;a++)if(s(e[a],t))return a;return-1}t.indexOf=s,t.lastIndexOf=function(e,t,n){for(var s=n||i.defaultEquals,r=e.length-1;r>=0;r--)if(s(e[r],t))return r;return-1},t.contains=function(e,t,n){return s(e,t,n)>=0},t.remove=function(e,t,n){var i=s(e,t,n);return!(i<0||(e.splice(i,1),0))},t.frequency=function(e,t,n){for(var s=n||i.defaultEquals,r=e.length,a=0,o=0;o<r;o++)s(e[o],t)&&a++;return a},t.equals=function(e,t,n){var s=n||i.defaultEquals;if(e.length!==t.length)return!1;for(var r=e.length,a=0;a<r;a++)if(!s(e[a],t[a]))return!1;return!0},t.copy=function(e){return e.concat()},t.swap=function(e,t,n){if(t<0||t>=e.length||n<0||n>=e.length)return!1;var i=e[t];return e[t]=e[n],e[n]=i,!0},t.toString=function(e){return"["+e.toString()+"]"},t.forEach=function(e,t){for(var n=0,i=e;n<i.length;n++)if(!1===t(i[n]))return}},4831:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.prototype.hasOwnProperty;function i(e){return"function"==typeof e}function s(e){return void 0===e}function r(e){return"[object String]"===Object.prototype.toString.call(e)}t.has=function(e,t){return n.call(e,t)},t.defaultCompare=function(e,t){return e<t?-1:e===t?0:1},t.defaultEquals=function(e,t){return e===t},t.defaultToString=function(e){return null===e?"COLLECTION_NULL":s(e)?"COLLECTION_UNDEFINED":r(e)?"$s"+e:"$o"+e.toString()},t.makeString=function(e,n){if(void 0===n&&(n=","),null===e)return"COLLECTION_NULL";if(s(e))return"COLLECTION_UNDEFINED";if(r(e))return e.toString();var i="{",a=!0;for(var o in e)t.has(e,o)&&(a?a=!1:i+=n,i=i+o+":"+e[o]);return i+"}"},t.isFunction=i,t.isUndefined=s,t.isString=r,t.reverseCompareFunction=function(e){return s(e)||!i(e)?function(e,t){return e<t?1:e===t?0:-1}:function(t,n){return-1*e(t,n)}},t.compareToEquals=function(e){return function(t,n){return 0===e(t,n)}}},4864:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4980:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(6362),t),s(n(9147),t),s(n(6990),t),s(n(2148),t),s(n(9161),t),s(n(9803),t),s(n(9019),t),s(n(5332),t),s(n(9157),t),s(n(1112),t)},5023:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalInstantaneousDynamicExpression=void 0;const s=n(9490),r=n(6362),a=i(n(3065));class o extends s.AbstractGraphicalExpression{constructor(e,t,n){super(t,e,n.parentSourceMeasure),this.mInstantaneousDynamicExpression=e,this.mMeasure=n}updateSkyBottomLine(){const e=this.parentStaffLine.SkyBottomLineCalculator,t=this.PositionAndShape.RelativePosition.x+this.PositionAndShape.BorderMarginLeft,n=this.PositionAndShape.RelativePosition.x+this.PositionAndShape.BorderMarginRight;let i=0;switch(this.Placement){case r.PlacementEnum.Above:i=this.PositionAndShape.RelativePosition.y+this.PositionAndShape.BorderMarginTop,e.updateSkyLineInRange(t,n,i);break;case r.PlacementEnum.Below:i=this.PositionAndShape.RelativePosition.y+this.PositionAndShape.BorderMarginBottom,e.updateBottomLineInRange(t,n,i);break;default:a.default.error("Placement for GraphicalInstantaneousDynamicExpression is unknown")}}}t.GraphicalInstantaneousDynamicExpression=o},5054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalTie=void 0,t.GraphicalTie=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.tie=e,this.startNote=t,this.endNote=n}get SVGElement(){return this.vfTie.getAttribute("el")}get GetTie(){return this.tie}get StartNote(){return this.startNote}get Tie(){return this.tie}set StartNote(e){this.startNote=e}get EndNote(){return this.endNote}set EndNote(e){this.endNote=e}}},5166:e=>{"use strict";e.exports="precision mediump float;\nuniform sampler2D u_image;\nvarying vec4 v_position;\n\n#define NUM_ROWS 5\n#define ELEMENT_HEIGHT 300\n\nvoid main() {\n    const float halfPixel = 1.0 / float(ELEMENT_HEIGHT * 2);\n\n    vec2 absolutePosition = (v_position.xy + vec2(1.0)) / vec2(2.0);\n    float absX = absolutePosition.x;\n    float absY = absolutePosition.y;\n\n    int skyLine = 0;\n    for (int i = 0; i < ELEMENT_HEIGHT; ++i) {\n        float ratioY = float(i) / float(ELEMENT_HEIGHT);\n        float relY = (ratioY - 0.5 + halfPixel) / float(NUM_ROWS);\n        float x = absX;\n        float y = absY + relY;\n\n        float currentAlpha = texture2D(u_image, vec2(x, y)).a;\n        if (currentAlpha > 0.0) {\n            skyLine = i;\n            break;\n        }\n    }\n\n    int bottomLine = ELEMENT_HEIGHT;\n    for (int i = ELEMENT_HEIGHT - 1; i >= 0; --i) {\n        float ratioY = float(i) / float(ELEMENT_HEIGHT);\n        float relY = (ratioY - 0.5 + halfPixel) / float(NUM_ROWS);\n        float x = absX;\n        float y = absY + relY;\n\n        float currentAlpha = texture2D(u_image, vec2(x, y)).a;\n        if (currentAlpha > 0.0) {\n            bottomLine = i;\n            break;\n        }\n    }\n\n    int r = skyLine;\n    if (r > 256) {\n        r -= 256;\n    }\n    int g = bottomLine;\n    if (g > 256) {\n        g -= 256;\n    }\n    int b = (skyLine / 256 * 16) + (bottomLine / 256);\n\n    gl_FragColor = vec4(float(r) / 255.0, float(g) / 255.0, float(b) / 255.0, 1.0);\n}\n"},5221:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSystem=void 0;const i=n(9252),s=n(6438),r=n(2561),a=n(7533),o=n(8254),l=n(7741),c=n(9409),h=n(6954),u=n(3263),d=n(67),f=n(7435);class p extends l.GraphicalObject{constructor(e){super(),this.needsToBeRedrawn=!0,this.staffLines=[],this.graphicalMeasures=[],this.labels=new u.Dictionary,this.measureNumberLabels=[],this.objectsToRedraw=[],this.instrumentBrackets=[],this.groupBrackets=[],this.graphicalMarkedAreas=[],this.graphicalComments=[],this.systemLines=[],this.breaksPage=!1,this.id=e,this.boundingBox=new s.BoundingBox(this),this.maxLabelLength=0}get Parent(){return this.parent}set Parent(e){if(this.parent){const e=this.parent.MusicSystems.indexOf(this,0);e>-1&&this.parent.MusicSystems.splice(e,1)}this.parent=e,this.boundingBox.Parent=e.PositionAndShape}get NextSystem(){const e=this.Parent.MusicSystems.indexOf(this);return e!==this.Parent.MusicSystems.length?this.Parent.MusicSystems[e+1]:void 0}get StaffLines(){return this.staffLines}set StaffLines(e){this.staffLines=e}get GraphicalMeasures(){return this.graphicalMeasures}get MeasureNumberLabels(){return this.measureNumberLabels}get Labels(){return this.labels.values()}get ObjectsToRedraw(){return this.objectsToRedraw}get InstrumentBrackets(){return this.instrumentBrackets}get GroupBrackets(){return this.groupBrackets}get GraphicalMarkedAreas(){return this.graphicalMarkedAreas}get GraphicalComments(){return this.graphicalComments}get SystemLines(){return this.systemLines}get Id(){return this.id}createSystemLeftLine(e,t,n){let i=-e/2;n&&(i=this.maxLabelLength+t-e/2);const s=this.staffLines[0].Measures[0];let r;this.staffLines.length>1&&(r=this.staffLines[this.staffLines.length-1].Measures[0]);const a=this.createSystemLine(i,e,h.SystemLinesEnum.SingleThin,d.SystemLinePosition.MeasureBegin,this,s,r);this.SystemLines.push(a),a.PositionAndShape.RelativePosition=new c.PointF2D(i,0),a.PositionAndShape.BorderLeft=0,a.PositionAndShape.BorderRight=e,a.PositionAndShape.BorderTop=a.PositionAndShape.Parent.BorderTop,a.PositionAndShape.BorderBottom=a.PositionAndShape.Parent.BorderBottom,this.createLinesForSystemLine(a)}createVerticalLineForMeasure(e,t,n,i,s,r){const a=r.ParentStaffLine,o=new c.PointF2D(a.PositionAndShape.RelativePosition.x,a.PositionAndShape.RelativePosition.y),l=a.ParentStaff.ParentInstrument.Staves;if(a.ParentStaff===l[0]){let h;l.length>1&&(h=this.getBottomStaffLine(a).Measures[s]);const u=this.createSystemLine(e,t,n,i,this,r,h),d=o.x+e;u.PositionAndShape.RelativePosition=new c.PointF2D(d,0),u.PositionAndShape.BorderLeft=0,u.PositionAndShape.BorderRight=t,this.SystemLines.push(u)}}setYPositionsToVerticalLineObjectsAndCreateLines(e){}calculateBorders(e){}alignBeginInstructions(){}GetLeftBorderAbsoluteXPosition(){return this.StaffLines[0].PositionAndShape.AbsolutePosition.x+this.StaffLines[0].Measures[0].beginInstructionsWidth}GetRightBorderAbsoluteXPosition(){return this.StaffLines[0].PositionAndShape.AbsolutePosition.x+this.StaffLines[0].StaffLines[0].End.x}AddGraphicalMeasures(e){for(let t=0,n=e.length;t<n;++t)e[t].ParentMusicSystem=this;this.graphicalMeasures.push(e)}GetSystemsFirstTimeStamp(){return this.graphicalMeasures[0][0].parentSourceMeasure.AbsoluteTimestamp}GetSystemsLastTimeStamp(){const e=this.graphicalMeasures[this.graphicalMeasures.length-1][0].parentSourceMeasure;return r.Fraction.plus(e.AbsoluteTimestamp,e.Duration)}createInstrumentBrackets(e,t){for(let n=0,i=e.length;n<i;++n){const t=e[n];if(t.Staves.length>1){let e,n;for(let i=0,s=this.staffLines.length;i<s;++i){const s=this.staffLines[i];s.ParentStaff===t.Staves[0]&&s.ParentStaff.Visible&&(e=s),s.ParentStaff===t.Staves[t.Staves.length-1]&&s.ParentStaff.Visible&&(n=s)}e&&n&&this.createInstrumentBracket(e,n)}}}createGroupBrackets(e,t,n){for(let i=0,s=e.length;i<s;++i){const s=e[i];if(s.InstrumentalGroups.length<1)continue;const r=this.findFirstVisibleInstrumentInInstrumentalGroup(s),a=this.findLastVisibleInstrumentInInstrumentalGroup(s);if(!r||!a)continue;let o,l;for(let e=0,t=this.staffLines.length;e<t;++e){const t=this.staffLines[e];t.ParentStaff===r.Staves[0]&&(o=t),t.ParentStaff===a.Staves[0]&&(l=t)}o&&l&&this.createGroupBracket(o,l,n),s.InstrumentalGroups.length<1||this.createGroupBrackets(s.InstrumentalGroups,t,n+1)}}createMusicSystemLabel(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=t;for(let h=0,u=this.staffLines.length;h<u;++h){var r,l;const n=this.staffLines[h].ParentStaff.ParentInstrument;let s;if(i)s=n.NameLabel,this.rules.RenderPartNames&&(null===(r=s)||void 0===r?void 0:r.print)||(s=new f.Label("",n.NameLabel.textAlignment,n.NameLabel.font),t=0);else{if(!this.rules.RenderPartAbbreviations||!this.rules.RenderPartNames||1===this.staffLines.length||!n.PartAbbreviation||""===n.PartAbbreviation)return;const e=n.PartAbbreviation;s=new f.Label(e,n.NameLabel.textAlignment,n.NameLabel.font)}if(null!==n&&void 0!==n&&null!==(l=n.NameLabel)&&void 0!==l&&l.print){const t=new o.GraphicalLabel(s,e,a.TextAlignmentEnum.LeftCenter,this.rules,this.boundingBox);t.setLabelPositionAndShapeBorders(),this.labels.setValue(n,t)}else t=0}this.maxLabelLength=0;const c=this.labels.values();for(let a=0,o=c.length;a<o;++a){const e=c[a];e.Label.print&&e.PositionAndShape.Size.width>this.maxLabelLength&&(this.maxLabelLength=e.PositionAndShape.Size.width,t=s)}this.updateMusicSystemStaffLineXPosition(t)}setMusicSystemLabelsYPosition(){this.labels.forEach(((e,t)=>{let n=0,i=0;for(let s=0;s<this.staffLines.length;s++)if(this.staffLines[s].ParentStaff.ParentInstrument===e){for(let t=s;t<this.staffLines.length;t++){const s=this.staffLines[t];if(s.ParentStaff.ParentInstrument!==e)break;n+=s.PositionAndShape.RelativePosition.y,i++}break}i>0&&(t.PositionAndShape.RelativePosition=new c.PointF2D(0,n/i+2))}))}checkStaffEntriesForStaffEntryLink(){let e=!1,t=!1;for(let n=0;n<this.staffLines.length-1;n++){for(let t=0,i=this.staffLines[n].Measures.length;t<i;++t){const i=this.staffLines[n].Measures[t];for(let t=0,n=i.staffEntries.length;t<n;++t)i.staffEntries[t].sourceStaffEntry.Link&&(e=!0)}for(let e=0,i=this.staffLines[n+1].Measures.length;e<i;++e){const i=this.staffLines[n+1].Measures[e];for(let e=0,n=i.staffEntries.length;e<n;++e)i.staffEntries[e].sourceStaffEntry.Link&&(t=!0)}}return!(!e||!t)}getBottomStaffLine(e){const t=e.ParentStaff.ParentInstrument.Staves;let n;for(let s=t.length-1;s>=0;s--){var i;if(null!==(i=t[s])&&void 0!==i&&i.Visible){n=t[s];break}}for(const s of e.ParentMusicSystem.staffLines)if(s.ParentStaff===n)return s}createSystemLine(e,t,n,i,s,r){throw new Error("not implemented")}createLinesForSystemLine(e){}calcBracketsWidth(){let e=0;for(let t=0,n=this.GroupBrackets.length;t<n;++t){const n=this.GroupBrackets[t];e=Math.max(e,n.PositionAndShape.Size.width)}for(let t=0,n=this.InstrumentBrackets.length;t<n;++t){const n=this.InstrumentBrackets[t];e=Math.max(e,n.PositionAndShape.Size.width)}return e}createInstrumentBracket(e,t){}createGroupBracket(e,t,n){}findFirstVisibleInstrumentInInstrumentalGroup(e){for(let t=0,n=e.InstrumentalGroups.length;t<n;++t){const n=e.InstrumentalGroups[t];if(!(n instanceof i.Instrument))return this.findFirstVisibleInstrumentInInstrumentalGroup(n);if(n.isVisible())return n}}findLastVisibleInstrumentInInstrumentalGroup(e){let t;for(let n=e.InstrumentalGroups.length-1;n>=0;n--){if(t=e.InstrumentalGroups[n],!(t instanceof i.Instrument))return this.findLastVisibleInstrumentInInstrumentalGroup(t);if(t.isVisible())return t}}updateMusicSystemStaffLineXPosition(e){for(let t=0,n=this.StaffLines.length;t<n;++t){const n=this.StaffLines[t],i=n.PositionAndShape.RelativePosition;i.x=this.maxLabelLength+e,n.PositionAndShape.RelativePosition=i,n.PositionAndShape.BorderRight=this.boundingBox.Size.width-this.maxLabelLength-e;for(let e=0;e<n.StaffLines.length;e++){const t=new c.PointF2D(n.PositionAndShape.Size.width,n.StaffLines[e].End.y);n.StaffLines[e].End=t}}}}t.MusicSystem=p},5246:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StavePositionEnum=t.VexFlowMeasure=void 0;var s=i(n(3206)).default.Flow;const r=n(5748),a=n(6954),o=n(164),l=n(6014),c=n(8365);var h=s.NoteSubGroup;const u=i(n(3065)),d=n(9479),f=n(1645),p=n(67),m=n(1336),g=n(4134),b=n(2561),v=n(9713),y=n(3123),x=n(6362),S=n(5282);class w extends r.GraphicalMeasure{constructor(e,t,n){super(e,t,n),this.octaveOffset=3,this.vfVoices={},this.vfTies=[],this.vfRepetitionWords=[],this.hasMetronomeMark=!1,this.connectors=[],this.beams={},this.autoVfBeams=[],this.autoTupletVfBeams=[],this.vfbeams={},this.tuplets={},this.vftuplets={},this.minimumStaffEntriesWidth=-1,this.rules=n?n.ParentMusicSystem.rules:t?t.Rules:new v.EngravingRules,this.resetLayout()}setAbsoluteCoordinates(e,t){this.stave.setX(e).setY(t)}resetLayout(){this.stave=new s.Stave(0,0,0,{fill_style:this.rules.StaffLineColor,space_above_staff_ln:0,space_below_staff_ln:0}),this.InitiallyActiveClef&&(this.stave.clef=l.VexFlowConverter.Clef(this.InitiallyActiveClef).type),this.stave.MeasureNumber=this.MeasureNumber,this.hasMetronomeMark=!1,this.ParentStaff&&this.setLineNumber(this.ParentStaff.StafflineCount),this.stave.setBegBarType(s.Barline.type.NONE),this.parentSourceMeasure&&this.parentSourceMeasure.endingBarStyleEnum===a.SystemLinesEnum.None&&this.stave.setEndBarType(s.Barline.type.NONE),this.updateInstructionWidth()}clean(){this.vfTies.length=0,this.connectors=[],this.resetLayout()}getLineWidth(e){switch(e){case a.SystemLinesEnum.BoldThinDots:case a.SystemLinesEnum.DotsThinBold:return 10/d.unitInPixels;case a.SystemLinesEnum.DotsBoldBoldDots:return 10/d.unitInPixels+this.rules.RepeatEndStartPadding;default:return 0}}addClefAtBegin(e){if(this.rules.RenderClefsAtBeginningOfStaffline){if(this.octaveOffset=e.OctaveOffset,e.ClefType===o.ClefEnum.TAB)this.stave.addClef("tab",void 0,void 0,void 0);else{const t=l.VexFlowConverter.Clef(e,"default");this.stave.addClef(t.type,t.size,t.annotation,s.StaveModifier.Position.BEGIN)}this.updateInstructionWidth()}}setLineNumber(e){5!==e&&(0===e?(this.stave.setNumLines(0),this.stave.getBottomLineY=function(){return this.getYForLine(this.options.num_lines)}):1===e?(this.stave.options.line_config=[{visible:!1},{visible:!1},{visible:!0},{visible:!1},{visible:!1}],this.stave.getBottomLineY=function(){return this.getYForLine(2)}):2===e?(this.stave.options.line_config=[{visible:!1},{visible:!1},{visible:!0},{visible:!0},{visible:!1}],this.stave.getBottomLineY=function(){return this.getYForLine(3)}):3===e?(this.stave.options.line_config=[{visible:!1},{visible:!0},{visible:!0},{visible:!0},{visible:!1}],this.stave.getBottomLineY=function(){return this.getYForLine(2)}):(this.stave.setNumLines(e),this.stave.getBottomLineY=function(){return this.getYForLine(this.options.num_lines)}))}addKeyAtBegin(e,t,n){var i;if(this.rules.RenderKeySignatures&&this.ShowKeySignature&&(!this.isTabMeasure||this.rules.TabKeySignatureRendered||this.rules.TabKeySignatureSpacingAdded)&&(null===(i=this.parentSourceMeasure)||void 0===i||!i.isReducedToMultiRest||this.rules.MultipleRestMeasureAddKeySignature)){if(this.stave.setKeySignature(l.VexFlowConverter.keySignature(e),l.VexFlowConverter.keySignature(t),void 0),this.isTabMeasure&&!this.rules.TabKeySignatureRendered){const e=this.stave.getModifiers();for(const t of e)if(t instanceof s.KeySignature){t.setStyle({fillStyle:"#00000000"}),t.hidden=!0;break}}this.updateInstructionWidth()}}addRhythmAtBegin(e){if(this.isTabMeasure&&!this.rules.TabTimeSignatureRendered&&!this.rules.TabTimeSignatureSpacingAdded)return;const t=l.VexFlowConverter.TimeSignature(e);this.stave.addModifier(t,s.StaveModifier.Position.BEGIN),(!this.ShowTimeSignature||this.isTabMeasure&&!this.rules.TabTimeSignatureRendered)&&(t.setStyle({fillStyle:"#00000000"}),t.hidden=!0),this.updateInstructionWidth()}addClefAtEnd(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.isTabMeasure)return;const n=l.VexFlowConverter.Clef(e,"small");if(t||!this.stave.endClef){this.stave.setEndClef(n.type,n.size,n.annotation);for(const e of this.stave.getModifiers())if(t){const t=e.originalStrokeStyle,n=e.originalFillStyle;e.getStyle()&&(t&&n?(e.getStyle().strokeStyle=t,e.getStyle().fillStyle=n):(e.getStyle().strokeStyle=null,e.getStyle().fillStyle=null))}else if("clefs"===e.getCategory()&&e.getPosition()===s.StaveModifier.Position.END&&e.type===n.type){const t="#12345600",n=e.getStyle();n&&(e.originalStrokeStyle=n.strokeStyle,e.originalFillStyle=n.fillStyle),e.setStyle({strokeStyle:t,fillStyle:t})}return this.parentSourceMeasure.hasEndClef=!0,this.updateInstructionWidth()}}addMeasureLine(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(t){case p.SystemLinePosition.MeasureBegin:e===a.SystemLinesEnum.BoldThinDots&&(n||(this.stave.modifiers[0].draw=function(e){switch(e.checkContext(),this.setRendered(),this.type){case s.Barline.type.SINGLE:this.drawVerticalBar(e,this.x,!1);break;case s.Barline.type.DOUBLE:this.drawVerticalBar(e,this.x,!0);break;case s.Barline.type.END:this.drawVerticalEndBar(e,this.x);break;case s.Barline.type.REPEAT_BEGIN:this.drawRepeatBar(e,this.x,!0);break;case s.Barline.type.REPEAT_END:this.drawRepeatBar(e,this.x,!1);break;case s.Barline.type.REPEAT_BOTH:this.drawRepeatBar(e,this.x,!1),this.drawRepeatBar(e,this.x,!0)}}),this.stave.setBegBarType(s.Barline.type.REPEAT_BEGIN));break;case p.SystemLinePosition.MeasureEnd:switch(e){case a.SystemLinesEnum.DotsBoldBoldDots:this.stave.setEndBarType(s.Barline.type.REPEAT_BOTH);break;case a.SystemLinesEnum.DotsThinBold:this.stave.setEndBarType(s.Barline.type.REPEAT_END);break;case a.SystemLinesEnum.DoubleThin:this.stave.setEndBarType(s.Barline.type.DOUBLE);break;case a.SystemLinesEnum.ThinBold:this.stave.setEndBarType(s.Barline.type.END);break;case a.SystemLinesEnum.DoubleBold:this.stave.setEndBarType(8);break;case a.SystemLinesEnum.None:this.stave.setEndBarType(s.Barline.type.NONE)}}}addMeasureNumber(){const e=this.MeasureNumber.toString(),t=E.ABOVE;this.stave.setText(e,t,{justification:1,shift_x:0,shift_y:0})}addWordRepetition(e){let t,n=s.StaveModifier.Position.END;const i=this.beginInstructionsWidth;switch(e.type){case f.RepetitionInstructionEnum.Segno:t=s.Repetition.type.SEGNO_LEFT,n=s.StaveModifier.Position.LEFT;break;case f.RepetitionInstructionEnum.Coda:t=s.Repetition.type.CODA_LEFT,n=s.StaveModifier.Position.LEFT;break;case f.RepetitionInstructionEnum.DaCapo:t=s.Repetition.type.DC;break;case f.RepetitionInstructionEnum.DalSegno:t=s.Repetition.type.DS;break;case f.RepetitionInstructionEnum.Fine:t=s.Repetition.type.FINE;break;case f.RepetitionInstructionEnum.ToCoda:t=s.Repetition.type.TO_CODA;break;case f.RepetitionInstructionEnum.DaCapoAlFine:t=s.Repetition.type.DC_AL_FINE;break;case f.RepetitionInstructionEnum.DaCapoAlCoda:t=s.Repetition.type.DC_AL_CODA;break;case f.RepetitionInstructionEnum.DalSegnoAlFine:t=s.Repetition.type.DS_AL_FINE;break;case f.RepetitionInstructionEnum.DalSegnoAlCoda:t=s.Repetition.type.DS_AL_CODA}if(t){const e=new s.Repetition(t,i,-this.rules.RepetitionSymbolsYOffset);return e.xShiftAsPercentOfStaveWidth=this.rules.RepetitionEndInstructionXShiftAsPercentOfStaveWidth,void this.stave.addModifier(e,n)}this.addVolta(e)}addVolta(e){let t=s.Volta.type.BEGIN;if(e.type===f.RepetitionInstructionEnum.Ending){switch(e.alignment){case f.AlignmentType.Begin:t=this.parentSourceMeasure.endsRepetitionEnding()?s.Volta.type.BEGIN_END:s.Volta.type.BEGIN;break;case f.AlignmentType.End:if(this.parentSourceMeasure.beginsRepetitionEnding())return;t=s.Volta.type.END}const i=this.ParentStaffLine.SkyBottomLineCalculator,r=this.PositionAndShape.AbsolutePosition.x+this.PositionAndShape.BorderMarginLeft+.4,a=Math.max(this.PositionAndShape.AbsolutePosition.x+this.PositionAndShape.BorderMarginRight,r+.4),o=i.getSkyLineMinInRange(r,a)-2;let l,c=-6.1+this.rules.VoltaOffset,h=this.rules.VoltaOffset;o<c&&(h+=o-c,c=o);const u=this.parentSourceMeasure.MeasureNumber;for(let e=0;e<this.ParentStaffLine.Measures.length;e++){var n;const t=this.ParentStaffLine.Measures[e];t instanceof w&&(t.MeasureNumber!==u-1&&t.MeasureNumber+(null===(n=t.parentSourceMeasure)||void 0===n?void 0:n.multipleRestMeasures)!==u||(l=t))}if(l){const e=l.stave.getModifiers();for(let t=0;t<e.length;t++){const n=e[t];if(n.hasOwnProperty("volta")){const e=l.ParentStaffLine.SkyBottomLineCalculator,t=l.PositionAndShape.AbsolutePosition.x+l.PositionAndShape.BorderMarginLeft+.4,i=Math.max(l.PositionAndShape.AbsolutePosition.x+l.PositionAndShape.BorderMarginRight,t+.4),s=e.getSkyLineMinInRange(t,i);s<=c?(h+=s-c,c=s):(n.y_shift=h*d.unitInPixels,l.ParentStaffLine.SkyBottomLineCalculator.updateSkyLineInRange(t,i,c))}}}h*=10,this.stave.setVoltaType(t,e.endingIndices[0],h),i.updateSkyLineInRange(r,a,c)}}setWidth(e){super.setWidth(e),this.stave.setWidth(e*d.unitInPixels)}layoutSymbols(){}draw(e){var t;const n=e.openGroup();n&&(null!==(t=n.classList)&&void 0!==t&&t.add("vf-measure"),n.id="".concat(this.MeasureNumber)),this.stave.setContext(e).draw();for(const i in this.vfVoices)this.vfVoices.hasOwnProperty(i)&&(e.save(),this.vfVoices[i].draw(e,this.stave),e.restore());for(const i in this.vfbeams)if(this.vfbeams.hasOwnProperty(i))for(const t of this.vfbeams[i])t.setContext(e).draw();if(this.autoVfBeams)for(const i of this.autoVfBeams)i.setContext(e).draw();if(!this.isTabMeasure||this.rules.TupletNumbersInTabs){if(this.autoTupletVfBeams)for(const t of this.autoTupletVfBeams)t.setContext(e).draw();for(const t in this.vftuplets)if(this.vftuplets.hasOwnProperty(t))for(let n=0;n<this.tuplets[t].length;n++){const i=this.tuplets[t][n][0],s=this.vftuplets[t][n];s&&(!i.RenderTupletNumber||i.ShowNumberNoneGivenInXml&&this.rules.TupletNumberUseShowNoneXMLValue?s.RenderTupletNumber=!1:s.RenderTupletNumber=!0,s.setContext(e).draw())}}for(const i of this.vfTies)i instanceof s.TabSlide||(i.setContext(e),i.draw());e.closeGroup();for(const i of this.connectors)e.openGroup("connector"),i.setContext(e).draw(),e.closeGroup();this.correctNotePositions()}format(){this.formatVoices&&this.formatVoices((this.PositionAndShape.Size.width-this.beginInstructionsWidth-this.endInstructionsWidth)*d.unitInPixels,this)}correctNotePositions(){if(this.isTabMeasure)for(const e of this.getVoicesWithinMeasure())for(const t of e.VoiceEntries)for(const e of t.Notes){const t=e,n=this.rules.GNote(e);t.StringNumberTab>=0&&(n.parentVoiceEntry.PositionAndShape.RelativePosition.y=(t.StringNumberTab-1)*this.rules.TabStaffInterlineHeightForBboxes)}else for(const e of this.getVoicesWithinMeasure())for(const t of e.VoiceEntries)for(const e of t.Notes){if(e.isRest())continue;const t=this.rules.GNote(e);if(null===t||void 0===t||!t.vfnote)return;const n=t.vfnote[0];let i=0;t.parentVoiceEntry.parentVoiceEntry.StemDirection===m.StemDirectionType.Up&&"w"!==t.vfnote[0].getDuration()?i+=3.5:i+=.5,i+=-t.notehead(n).line+t.parentVoiceEntry.notes.last().notehead().line,t.PositionAndShape.RelativePosition.y=i}}getVoicesWithinMeasure(){const e=[];for(const t of this.staffEntries)for(const n of t.graphicalVoiceEntries)-1===e.indexOf(n.parentVoiceEntry.ParentVoice)&&e.push(n.parentVoiceEntry.ParentVoice);return e}getGraphicalVoiceEntriesPerVoice(e){const t=[];for(const n of this.staffEntries)for(const i of n.graphicalVoiceEntries)i.parentVoiceEntry.ParentVoice===e&&t.push(i);return t}getRestFilledVexFlowStaveNotesPerVoice(e){let t,n=this.getGraphicalVoiceEntriesPerVoice(e);for(let r=0;r<n.length;r++){const e=n[r],i=e.notes[0].sourceNote.getAbsoluteTimestamp();let s=new b.Fraction;for(const t of e.notes){const e=b.Fraction.plus(t.sourceNote.getAbsoluteTimestamp(),t.sourceNote.Length);s.lt(e)&&(s=e)}if(t){const e=b.Fraction.minus(i,t);if(e.RealValue>0){u.default.trace("Ghost Found in between (measure ".concat(this.MeasureNumber,")"));const t=this.createGhostGves(e);n.splice(r,0,...t),r+=t.length}}else{const e=b.Fraction.minus(i,this.parentSourceMeasure.AbsoluteTimestamp);if(e.RealValue>0){u.default.trace("Ghost Found at start (measure ".concat(this.MeasureNumber,")"));const t=this.createGhostGves(e);n.splice(0,0,...t),r+=t.length}}t=s}const i=b.Fraction.plus(this.parentSourceMeasure.AbsoluteTimestamp,this.parentSourceMeasure.Duration),s=b.Fraction.minus(i,t);if(s.RealValue>0){u.default.trace("Ghost Found at end (measure ".concat(this.MeasureNumber,")"));const e=this.createGhostGves(s);n=n.concat(e)}return n}createGhostGves(e){const t=l.VexFlowConverter.GhostNotes(e),n=[];for(const i of t){const e=new g.VexFlowVoiceEntry(void 0,void 0,this.rules);e.vfStaveNote=i,n.push(e)}return n}handleBeam(e,t){const n=e.sourceNote.ParentVoiceEntry.ParentVoice.VoiceId;let i,s=this.beams[n];s||(s=this.beams[n]=[]);for(const a of s)a[0]===t&&(i=a);i||(i=[t,[]],s.push(i));const r=e.parentVoiceEntry;i[1].indexOf(r)<0&&i[1].push(r)}handleTuplet(e,t){const n=e.sourceNote.ParentVoiceEntry.ParentVoice.VoiceId;t=e.sourceNote.NoteTuplet;let i,s=this.tuplets[n];s||(s=this.tuplets[n]=[]);for(const a of s)a[0]===t&&(i=a);i||(i=[t,[]],s.push(i));const r=e.parentVoiceEntry;i[1].indexOf(r)<0&&i[1].push(r)}finalizeBeams(){if(this.vfbeams={},this.isTabMeasure&&!this.rules.TabBeamsRendered)return;const e=[];for(const t in this.beams)if(this.beams.hasOwnProperty(t)){let n=this.vfbeams[t];n||(n=this.vfbeams[t]=[]);for(const i of this.beams[t]){let t=!1;for(const e of i[0].Notes)if(e.Length.RealValue>=new b.Fraction(1,4).RealValue&&(!e.TypeLength||e.TypeLength.RealValue>.125)){t=!0;break}if(t){u.default.debug("Beam between note >= quarter, likely tremolo, currently unsupported. continuing.");continue}const r=[],a=i[0],o=i[1];let l=!0;for(const e of o)e.parentVoiceEntry.ParentVoice===a.Notes[0].ParentVoiceEntry.ParentVoice&&(l=e.parentVoiceEntry.WantedStemDirection===m.StemDirectionType.Undefined);let c,h=!1;const d=[];for(const n of o){const t=n.vfStaveNote;t&&(r.push(t),e.push(t)),n.parentVoiceEntry.IsGrace&&(h=!0),n.parentVoiceEntry.StemColor&&this.rules.ColoringEnabled&&d.push(n.parentVoiceEntry.StemColor)}if(r.length>1){const e=new s.Beam(r,l);if(h&&(e.render_options.beam_width=3,e.render_options.partial_beam_length=4),d.length>=2&&this.rules.ColorBeams){c=d[0];for(const e of d)if(e!==c){c=void 0;break}e.setStyle({fillStyle:c,strokeStyle:c})}this.rules.FlatBeams&&(e.render_options.flat_beams=!0,e.render_options.flat_beam_offset=this.rules.FlatBeamOffset,e.render_options.flat_beam_offset_per_beam=this.rules.FlatBeamOffsetPerBeam),n.push(e)}else u.default.debug("Warning! Beam with no notes!")}}this.rules.AutoBeamNotes&&this.autoBeamNotes(e)}autoBeamNotes(e){if(!this.rules.AutoBeamTabs&&this.isTabMeasure)return;let t,n=60,i=[],r=[],a=[];this.autoTupletVfBeams=[];const o=[];this.autoVfBeams=[];let l=this.parentSourceMeasure.ActiveTimeSignature;l||(l=this.parentSourceMeasure.Duration);for(const d of this.staffEntries)for(const h of d.graphicalVoiceEntries){const u=h.vfStaveNote,f=h.notes[0],p={vfStaveNote:u,sourceNote:f.sourceNote},m=d.relInMeasureTimestamp.isOnBeat(l),g=r.length>=2,v=f.sourceNote.Length.RealValue-new b.Fraction(1,4).RealValue>-b.Fraction.FloatInaccuracyTolerance,y=h.parentVoiceEntry.IsGrace||v||e.contains(u);if(y||m){if(g){for(const e of r)i.push(e);o.push(i.slice()),i=[]}if(r=[],y)continue}const x=h.notes[0].sourceNote.NoteTuplet;if(x){let e=!1;for(const t of x.Notes){for(const n of t)if(n.NoteTypeXml>=S.NoteType.QUARTER||n.ParentVoiceEntry.IsGrace||n.isRest()&&!this.rules.AutoBeamOptions.beam_rests){e=!0;break}if(e)break}if(t){if(t!==x){if(a.length>1){const e=[];for(const n of a)e.push(n.vfStaveNote);const t=new s.Beam(e,!0);this.rules.FlatBeams&&(t.render_options.flat_beams=!0,t.render_options.flat_beam_offset=this.rules.FlatBeamOffset,t.render_options.flat_beam_offset_per_beam=this.rules.FlatBeamOffsetPerBeam),this.autoTupletVfBeams.push(t);const i=new c.Beam(n++);i.AutoGenerated=!0;for(const n of a)i.addNoteToBeam(n.sourceNote)}a=[],t=x}}else t=x;e||a.push(p)}else t=void 0,r.push(p)}if(a.length>=2){const e=[];for(const n of a)e.push(n.vfStaveNote);const t=new s.Beam(e,!0);this.rules.FlatBeams&&(t.render_options.flat_beams=!0,t.render_options.flat_beam_offset=this.rules.FlatBeamOffset,t.render_options.flat_beam_offset_per_beam=this.rules.FlatBeamOffsetPerBeam),this.autoTupletVfBeams.push(t);const i=new c.Beam(n++);i.AutoGenerated=!0;for(const n of a)i.addNoteToBeam(n.sourceNote)}if(r.length>=2){for(const e of r)i.push(e);o.push(i)}const h=this.rules.AutoBeamOptions,u={beam_middle_only:h.beam_middle_rests_only,beam_rests:h.beam_rests,maintain_stem_directions:h.maintain_stem_directions};if(h.groups&&h.groups.length){const e=[];for(const t of h.groups)e.push(new s.Fraction(t[0],t[1]));u.groups=e}for(const c of o){const e=[];for(const n of c)e.push(n.vfStaveNote);const t=s.Beam.generateBeams(e,u);for(const n of t)this.rules.FlatBeams&&(n.render_options.flat_beams=!0,n.render_options.flat_beam_offset=this.rules.FlatBeamOffset,n.render_options.flat_beam_offset_per_beam=this.rules.FlatBeamOffsetPerBeam),this.autoVfBeams.push(n)}}finalizeTuplets(){this.vftuplets={};for(const e in this.tuplets)if(this.tuplets.hasOwnProperty(e)){let t=this.vftuplets[e];t||(t=this.vftuplets[e]=[]);for(const n of this.tuplets[e]){const e=[],i=n[1];for(const t of i)e.push(t.vfStaveNote);if(e.length>1){const i=n[0],r=i.Notes[0][0].NormalNotes,a=i.shouldBeBracketed(this.rules.TupletsBracketedUseXMLValue,this.rules.TupletsBracketed,this.rules.TripletsBracketed,this.isTabMeasure,this.rules.TabTupletsBracketed);let o=s.Tuplet.LOCATION_TOP;i.tupletLabelNumberPlacement===x.PlacementEnum.Below&&(o=s.Tuplet.LOCATION_BOTTOM);let l=0;if(this.isTabMeasure&&(l=10*this.rules.TabTupletYOffsetBottom,o===s.Tuplet.LOCATION_TOP)){l=-10*this.rules.TabTupletYOffsetTop;const e=i.Notes[0][0];(null===e||void 0===e?void 0:e.hasTabEffects())&&(l-=10*this.rules.TabTupletYOffsetEffects)}const c=new s.Tuplet(e,{bracketed:a,location:o,notes_occupied:r,num_notes:i.TupletLabelNumber,ratioed:i.Ratioed,y_offset:l});t.push(c)}else u.default.debug("Warning! Tuplet with no notes! Trying to ignore, but this is a serious problem.")}}}layoutStaffEntry(e){}graphicalMeasureCreatedCalculations(){let e,t=[];const n=[];for(const r of this.staffEntries){e=!1,t=[];for(const i of r.graphicalVoiceEntries)if(i.parentVoiceEntry.IsGrace)t.push(i),n.push(i),e||(e=i.parentVoiceEntry.GraceSlur);else if(i.vfStaveNote=l.VexFlowConverter.StaveNote(i),t.length>0){const n=[];for(let e=0;e<t.length;e++){const i=t[e];i.GraceSlash=i.parentVoiceEntry.GraceNoteSlash,e>0&&(i.GraceSlash=!1);const s=l.VexFlowConverter.StaveNote(i);i.vfStaveNote=s,n.push(s)}const r=new s.GraceNoteGroup(n,e);let a=this.rules.GraceNoteGroupXMargin;n.length>1&&(a/=3),r.spacing=10*a,i.vfStaveNote.addModifier(0,r),t=[]}}if(t.length>0)for(const s of t)s.vfStaveNote=l.VexFlowConverter.StaveNote(s),s.parentVoiceEntry.GraceAfterMainNote=!0;this.finalizeBeams(),this.finalizeTuplets();const i=this.getVoicesWithinMeasure();if(this.rules.RenderFingerings)for(const s of this.staffEntries)s.setModifierXOffsets();for(const r of i){if(!r)continue;this.vfVoices[r.VoiceId]=new s.Voice({beat_value:this.parentSourceMeasure.ActiveTimeSignature.Denominator,num_beats:this.parentSourceMeasure.ActiveTimeSignature.Numerator,resolution:s.RESOLUTION}).setMode(s.Voice.Mode.SOFT);const e=this.getRestFilledVexFlowStaveNotesPerVoice(r);for(const t of e){if(t.parentVoiceEntry&&t.parentVoiceEntry.IsGrace&&!t.parentVoiceEntry.GraceAfterMainNote)continue;const e=t;if(0===e.vfStaveNote.getTicks().denominator&&(e.vfStaveNote.getTicks().denominator=1),0===t.notes.length||!t.notes[0]||!t.notes[0].sourceNote.PrintObject){this.vfVoices[r.VoiceId].addTickable(e.vfStaveNote);continue}const n=e.parentStaffEntry;if(n&&n.vfClefBefore){const t=new h([n.vfClefBefore]);e.vfStaveNote.getCategory&&"stavenotes"===e.vfStaveNote.getCategory()&&e.vfStaveNote.addModifier(0,t)}t.parentVoiceEntry&&this.rules.RenderFingerings&&(this.rules.FingeringPosition!==x.PlacementEnum.Left&&this.rules.FingeringPosition!==x.PlacementEnum.Right||this.createFingerings(t),this.createStringNumber(t)),this.createArpeggio(t),this.vfVoices[r.VoiceId].addTickable(e.vfStaveNote)}}this.setStemDirectionFromVexFlow();for(const s of n)this.createFingerings(s),this.createStringNumber(s),this.createArpeggio(s);this.createArticulations(),this.createOrnaments()}createArpeggio(e){if(e.parentVoiceEntry&&e.parentVoiceEntry.Arpeggio){const t=e.parentVoiceEntry.Arpeggio;if(e.notes&&e.notes.length>1){const n=l.VexFlowConverter.StrokeTypeFromArpeggioType(t.type),i=new s.Stroke(n,{all_voices:this.rules.ArpeggiosGoAcrossVoices});this.rules.RenderArpeggios&&e.vfStaveNote.addStroke(0,i)}else u.default.debug("[OSMD] arpeggio in measure ".concat(this.MeasureNumber," could not be drawn.\n                voice entry had less than two notes, arpeggio is likely between voice entries, not currently supported in Vexflow."))}}setStemDirectionFromVexFlow(){for(const e of this.staffEntries)for(const t of e.graphicalVoiceEntries)for(const e of t.notes){const n=e.vfnote;if(n&&n[0])switch(n[0].getStemDirection()){case s.Stem.UP:t.parentVoiceEntry.StemDirection=m.StemDirectionType.Up;break;case s.Stem.DOWN:t.parentVoiceEntry.StemDirection=m.StemDirectionType.Down}}}createArticulations(){for(let e=0,t=this.staffEntries.length;e<t;++e){const t=this.staffEntries[e].graphicalVoiceEntries;for(const e of t){const t=e.vfStaveNote;l.VexFlowConverter.generateArticulations(t,e.notes[0],this.rules)}}}createOrnaments(){for(let e=0,t=this.staffEntries.length;e<t;++e){const t=this.staffEntries[e].graphicalVoiceEntries;for(const e in t)if(t.hasOwnProperty(e)){const n=t[e].vfStaveNote,i=t[e].notes[0].sourceNote.ParentVoiceEntry.OrnamentContainer;i&&l.VexFlowConverter.generateOrnaments(n,i)}}}createFingerings(e){const t=e;let n=0;for(const s of e.notes)s.sourceNote.Fingering&&n++;const i=[];for(const s of e.parentVoiceEntry.TechnicalInstructions)s.type===y.TechnicalInstructionType.Fingering&&i.push(s);if(i.length>n){let t=0;for(const n of e.notes)if(n.sourceNote.Fingering)t++;else{if(t>i.length-1)break;n.sourceNote.Fingering=i[t],t++}}let r=-1;for(const a of e.notes){const i=a.sourceNote.Fingering;if(!i){r++;continue}r++;let o=this.rules.FingeringPosition;this.rules.FingeringPositionGrace===x.PlacementEnum.AboveOrBelow&&(this.isUpperStaffOfInstrument()?o=x.PlacementEnum.Above:this.isLowerStaffOfInstrument()&&(o=x.PlacementEnum.Below)),i.placement!==x.PlacementEnum.NotYetDefined&&(o=i.placement);let l,c=this.rules.FingeringOffsetX;switch(o){default:case x.PlacementEnum.Left:l=s.StaveModifier.Position.LEFT,c-=a.baseFingeringXOffset*d.unitInPixels;break;case x.PlacementEnum.Right:l=s.StaveModifier.Position.RIGHT,c+=a.baseFingeringXOffset*d.unitInPixels;break;case x.PlacementEnum.Above:l=s.StaveModifier.Position.ABOVE;break;case x.PlacementEnum.Below:l=s.StaveModifier.Position.BELOW;break;case x.PlacementEnum.NotYetDefined:const t=e.parentStaffEntry.sourceStaffEntry.ParentStaff;e.notes.length>1||e.parentStaffEntry.graphicalVoiceEntries.length>1?l=s.StaveModifier.Position.LEFT:0===t.idInMusicSheet?(l=s.StaveModifier.Position.ABOVE,o=x.PlacementEnum.Above):(l=s.StaveModifier.Position.BELOW,o=x.PlacementEnum.Below)}const h=new s.FretHandFinger(i.value);if(h.setPosition(l),h.setOffsetX(c),o===x.PlacementEnum.Above||o===x.PlacementEnum.Below){const e=o===x.PlacementEnum.Above?-1:1,a=o===x.PlacementEnum.Above?r:n-1-r;if(this.rules.FingeringInsideStafflines&&n>1){const t=h.getWidth()/2,i=2.5*n;h.setOffsetY(e*(a+i)*t)}else if(!this.rules.FingeringInsideStafflines){const n=new s.StringNumber(i.value);n.radius=0,n.setPosition(l),n.setOffsetY(e*a*n.getWidth()*2/3),t.vfStaveNote.addModifier(r,n);continue}}t.vfStaveNote.addModifier(r,h)}}createStringNumber(e){if(!this.rules.RenderStringNumbersClassical)return;const t=e;e.notes.forEach(((n,i)=>{const r=n.sourceNote.StringInstruction;if(r){let a=r.value;switch(a){case"1":a="I";break;case"2":a="II";break;case"3":a="III";break;case"4":a="IV";break;case"5":a="V";break;case"6":a="VI"}const o=new s.StringNumber(a);o.radius=0;const l=-this.rules.StringNumberOffsetY;e.notes.length>1||e.parentStaffEntry.graphicalVoiceEntries.length>1?(o.setOffsetX(13*n.baseStringNumberXOffset),o.setPosition(s.Modifier.Position.RIGHT)):o.setPosition(s.Modifier.Position.ABOVE),o.setOffsetY(l),t.vfStaveNote.addModifier(i,o)}}))}lineTo(e,t){const n=new s.StaveConnector(e.getVFStave(),this.stave);n.setType(t),this.connectors.push(n)}getVFStave(){return this.stave}updateInstructionWidth(){let e=0,t=0;const n=this.stave.getModifiers();for(const i of n)i.getPosition()===E.BEGIN?e+=i.getWidth()+i.getPadding(void 0):i.getPosition()===E.END&&(t+=i.getWidth()+i.getPadding(void 0));this.beginInstructionsWidth=(null!==e&&void 0!==e?e:0)/d.unitInPixels,this.endInstructionsWidth=(null!==t&&void 0!==t?t:0)/d.unitInPixels}addStaveTie(e,t){this.vfTies.push(e),t.vfTie=e,t.Tie.TieDirection===x.PlacementEnum.Below&&e.setDirection(1)}}var E;t.VexFlowMeasure=w,function(e){e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.ABOVE=3]="ABOVE",e[e.BELOW=4]="BELOW",e[e.BEGIN=5]="BEGIN",e[e.END=6]="END"}(E||(t.StavePositionEnum=E={}))},5274:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Tie=void 0;const s=n(2561),r=n(6362),a=i(n(3065));t.Tie=class{constructor(e,t){this.notes=[],this.TieNumber=1,this.TieDirection=r.PlacementEnum.NotYetDefined,this.NoteIndexToTieDirection={},this.AddNote(e),this.type=t}getTieDirection(e){if(!e)return this.TieDirection;for(let t=0;t<this.Notes.length;t++)if(this.Notes[t]===e)return this.NoteIndexToTieDirection[t]||this.TieDirection;return a.default.debug("tie.getTieDuration note not in tie.Notes"),this.TieDirection}get Notes(){return this.notes}get Type(){return this.type}get StartNote(){return this.notes[0]}get Duration(){const e=new s.Fraction;for(const t of this.notes)e.Add(t.Length);return e}get Pitch(){return this.StartNote.Pitch}AddNote(e){this.notes.push(e),e.NoteTie=this}}},5282:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoteTypeHandler=t.NoteType=void 0;const i=n(2561),s=n(9767),r=n(7307);var a;!function(e){e[e.UNDEFINED=0]="UNDEFINED",e[e._1024th=1]="_1024th",e[e._512th=2]="_512th",e[e._256th=3]="_256th",e[e._128th=4]="_128th",e[e._64th=5]="_64th",e[e._32nd=6]="_32nd",e[e._16th=7]="_16th",e[e.EIGTH=8]="EIGTH",e[e.QUARTER=9]="QUARTER",e[e.HALF=10]="HALF",e[e.WHOLE=11]="WHOLE",e[e.BREVE=12]="BREVE",e[e.LONG=13]="LONG",e[e.MAXIMA=14]="MAXIMA"}(a||(t.NoteType=a={}));class o{static NoteTypeToString(e){return this.NoteTypeXmlValues[e]}static StringToNoteType(e){const t=this.NoteTypeXmlValues.indexOf(e);return-1!==t?t:a.UNDEFINED}static getNoteDurationFromType(e){switch(e){case"1024th":return new i.Fraction(1,1024);case"512th":return new i.Fraction(1,512);case"256th":return new i.Fraction(1,256);case"128th":return new i.Fraction(1,128);case"64th":return new i.Fraction(1,64);case"32th":case"32nd":return new i.Fraction(1,32);case"16th":return new i.Fraction(1,16);case"eighth":return new i.Fraction(1,8);case"quarter":return new i.Fraction(1,4);case"half":return new i.Fraction(1,2);case"whole":return new i.Fraction(1,1);case"breve":return new i.Fraction(2,1);case"long":return new i.Fraction(4,1);case"maxima":return new i.Fraction(8,1);default:{const e=s.ITextTranslation.translateText("ReaderErrorMessages/NoteDurationError","Invalid note duration.");throw new r.MusicSheetReadingException(e)}}}}t.NoteTypeHandler=o,o.NoteTypeXmlValues=["","1024th","512th","256th","128th","64th","32nd","16th","eigth","quarter","half","whole","breve","long","maxima"]},5294:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SubInstrument=void 0;const s=n(164),r=i(n(3065));class a{constructor(e){this.parentInstrument=e,this.fixedKey=-1,this.name=this.parseMidiInstrument(this.parentInstrument.Name),this.midiInstrumentID=a.midiInstrument[this.name],this.volume=1}get ParentInstrument(){return this.parentInstrument}static isPianoInstrument(e){return e===s.MidiInstrument.Acoustic_Grand_Piano||e===s.MidiInstrument.Bright_Acoustic_Piano||e===s.MidiInstrument.Electric_Grand_Piano||e===s.MidiInstrument.Electric_Piano_1||e===s.MidiInstrument.Electric_Piano_2}setMidiInstrument(e){this.midiInstrumentID=a.midiInstrument[this.parseMidiInstrument(e)]}parseMidiInstrument(e){try{if(e){const t=e.toLowerCase().trim();for(const e in a.midiInstrument)if(-1!==t.indexOf(e))return e}if(this.parentInstrument.Name){const e=this.parentInstrument.Name.toLowerCase().trim();for(const t in a.midiInstrument)if(-1!==e.indexOf(t))return t}}catch(e){r.default.error("Error parsing MIDI Instrument. Default to Grand Piano.")}return"unnamed"}}t.SubInstrument=a,a.midiInstrument={alt:s.MidiInstrument.Synth_Voice,alto:s.MidiInstrument.Synth_Voice,banjo:s.MidiInstrument.Banjo,bariton:s.MidiInstrument.Synth_Voice,baritone:s.MidiInstrument.Synth_Voice,bass:s.MidiInstrument.Synth_Voice,blockfloete:s.MidiInstrument.Recorder,brass:s.MidiInstrument.Trombone,bratsche:s.MidiInstrument.Viola,cello:s.MidiInstrument.Cello,clarinet:s.MidiInstrument.Clarinet,contrabass:s.MidiInstrument.Contrabass,drums:s.MidiInstrument.Percussion,flute:s.MidiInstrument.Flute,floete:s.MidiInstrument.Flute,frenchhorn:s.MidiInstrument.French_Horn,gitarre:s.MidiInstrument.Acoustic_Guitar_nylon,guitar:s.MidiInstrument.Acoustic_Guitar_nylon,harfe:s.MidiInstrument.Orchestral_Harp,harp:s.MidiInstrument.Orchestral_Harp,klarinette:s.MidiInstrument.Clarinet,klavier:s.MidiInstrument.Acoustic_Grand_Piano,kontrabass:s.MidiInstrument.Contrabass,oboe:s.MidiInstrument.Oboe,organ:s.MidiInstrument.Church_Organ,orgel:s.MidiInstrument.Church_Organ,orgue:s.MidiInstrument.Church_Organ,percussion:s.MidiInstrument.Percussion,piano:s.MidiInstrument.Acoustic_Grand_Piano,piccolo:s.MidiInstrument.Piccolo,posaune:s.MidiInstrument.Trombone,recorder:s.MidiInstrument.Recorder,sax:s.MidiInstrument.Tenor_Sax,schlagwerk:s.MidiInstrument.Percussion,schlagzeug:s.MidiInstrument.Percussion,sopran:s.MidiInstrument.Synth_Voice,steeldrum:s.MidiInstrument.Steel_Drums,streicher:s.MidiInstrument.String_Ensemble_1,strings:s.MidiInstrument.String_Ensemble_1,tenor:s.MidiInstrument.Synth_Voice,tpt:s.MidiInstrument.Trumpet,trombone:s.MidiInstrument.Trombone,trompete:s.MidiInstrument.Trumpet,trumpet:s.MidiInstrument.Trumpet,tuba:s.MidiInstrument.Tuba,unnamed:s.MidiInstrument.Acoustic_Grand_Piano,viola:s.MidiInstrument.Viola,violin:s.MidiInstrument.Violin,"violon-c":s.MidiInstrument.Cello,"violon.":s.MidiInstrument.Violin,voice:s.MidiInstrument.Synth_Voice,woodblock:s.MidiInstrument.Woodblock}},5332:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TempoExpressionEntry=t.MultiTempoExpression=void 0;const i=n(2561),s=n(9161),r=n(6362),a=n(2570),o=n(2221);t.MultiTempoExpression=class{constructor(e,t){this.expressions=[],this.sourceMeasure=e,this.timestamp=t}get Timestamp(){return this.timestamp}get AbsoluteTimestamp(){return i.Fraction.plus(this.sourceMeasure.AbsoluteTimestamp,this.timestamp)}get SourceMeasureParent(){return this.sourceMeasure}set SourceMeasureParent(e){this.sourceMeasure=e}get InstantaneousTempo(){return this.instantaneousTempo}get ContinuousTempo(){return this.continuousTempo}get EntriesList(){return this.expressions}get CombinedExpressionsText(){return this.combinedExpressionsText}set CombinedExpressionsText(e){this.combinedExpressionsText=e}getPlacementOfFirstEntry(){let e=r.PlacementEnum.Above;return this.expressions.length>0&&(this.expressions[0].Expression instanceof s.InstantaneousTempoExpression||this.expressions[0].Expression instanceof o.ContinuousTempoExpression)&&(e=this.expressions[0].Expression.Placement),e}getFontstyleOfFirstEntry(){let e=a.FontStyles.Regular;return this.expressions[0].Expression instanceof s.InstantaneousTempoExpression?e=a.FontStyles.Bold:this.expressions[0].Expression instanceof o.ContinuousTempoExpression&&(e=a.FontStyles.Italic),e}addExpression(e,t){if(this.checkIfAlreadyExists(e))return;e instanceof s.InstantaneousTempoExpression?this.instantaneousTempo=e:e instanceof o.ContinuousTempoExpression&&(this.continuousTempo=e);const n=new l;n.prefix=t,n.Expression=e,n.label=e.Label,this.expressions.push(n)}CompareTo(e){return this.Timestamp.RealValue>e.Timestamp.RealValue?1:this.Timestamp.RealValue<e.Timestamp.RealValue?-1:0}checkIfAlreadyExists(e){for(const t of this.expressions)if(t.label===e.Label)return!0;return!1}clearInstantaneousTempo(){this.instantaneousTempo=void 0}clearContinuousTempo(){this.continuousTempo=void 0}};class l{get Expression(){return this.expression}set Expression(e){this.expression=e}}t.TempoExpressionEntry=l},5340:e=>{"use strict";e.exports="attribute vec4 a_position;\nvarying vec4 v_position;\n\nvoid main() {\n    gl_Position = a_position;\n    v_position = a_position;\n}\n"},5364:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractNotationInstruction=void 0,t.AbstractNotationInstruction=class{constructor(e){this.printObject=!0,this.parent=e}get Parent(){return this.parent}set Parent(e){this.parent=e}get PrintObject(){return this.printObject}set PrintObject(e){this.printObject=e}}},5377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5468:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowSlur=t.CurvePositionEnum=void 0;var s,r=i(n(3206)).default.Flow;!function(e){e[e.NEAR_HEAD=1]="NEAR_HEAD",e[e.NEAR_TOP=2]="NEAR_TOP"}(s||(t.CurvePositionEnum=s={}));class a{constructor(e){this.vfStartNote=void 0,this.vfEndNote=void 0,this.parentSlur=e}static createFromVexflowSlur(e){return new a(e.parentSlur)}get vfSlur(){return this.parentSlur}curve_Options(){return{cps:[{x:0,y:10},{x:0,y:10}],invert:!1,position:s.NEAR_TOP,position_end:s.NEAR_TOP,spacing:2,thickness:2,x_shift:0,y_shift:10}}createVexFlowCurve(){this.vfCurve=new r.Curve(this.vfStartNote,this.vfEndNote,void 0)}}t.VexFlowSlur=a},5479:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkyBottomLineCalculationResult=void 0,t.SkyBottomLineCalculationResult=class{constructor(e,t){this.skyLine=e,this.bottomLine=t}}},5534:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Voice=void 0,t.Voice=class{constructor(e,t){this.voiceEntries=[],this.volume=1,this.parent=e,this.visible=!0,this.audible=!0,this.following=!0,this.voiceId=t}get VoiceEntries(){return this.voiceEntries}get Parent(){return this.parent}get Visible(){return this.visible}set Visible(e){this.visible=e}get Audible(){return this.audible}set Audible(e){this.audible=e}get Following(){return this.following}set Following(e){this.following=e}get VoiceId(){return this.voiceId}get Volume(){return this.volume}set Volume(e){this.volume=e}}},5678:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5748:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalMeasure=void 0;const i=n(7741),s=n(2561),r=n(6438),a=n(9409);class o extends i.GraphicalObject{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(),this.hasOnlyRests=!1,this.measureNumber=-1,this.ShowTimeSignature=!0,this.ShowKeySignature=!0,this.isTabMeasure=!1,this.parentStaff=e,this.parentSourceMeasure=t,this.parentStaffLine=n,n?(this.parentStaff=n.ParentStaff,this.PositionAndShape=new r.BoundingBox(this,n.PositionAndShape)):this.PositionAndShape=new r.BoundingBox(this),this.PositionAndShape.BorderBottom=4,this.parentSourceMeasure&&(this.measureNumber=this.parentSourceMeasure.MeasureNumber),this.staffEntries=[]}get ParentStaff(){return this.parentStaff}get ParentMusicSystem(){return this.parentMusicSystem}set ParentMusicSystem(e){this.parentMusicSystem=e}get MeasureNumber(){return this.measureNumber}get FirstInstructionStaffEntry(){return this.firstInstructionStaffEntry}set FirstInstructionStaffEntry(e){this.firstInstructionStaffEntry=e}get LastInstructionStaffEntry(){return this.lastInstructionStaffEntry}set LastInstructionStaffEntry(e){this.lastInstructionStaffEntry=e}get ParentStaffLine(){return this.parentStaffLine}set ParentStaffLine(e){this.parentStaffLine=e,this.parentStaffLine&&(this.PositionAndShape.Parent=this.parentStaffLine.PositionAndShape)}resetLayout(){throw new Error("not implemented")}getLineWidth(e){throw new Error("not implemented")}addClefAtBegin(e){throw new Error("not implemented")}addKeyAtBegin(e,t,n){throw new Error("not implemented")}addRhythmAtBegin(e){throw new Error("not implemented")}addClefAtEnd(e){throw new Error("not implemented")}setPositionInStaffline(e){this.PositionAndShape.RelativePosition=new a.PointF2D(e,0)}setWidth(e){this.PositionAndShape.BorderRight=e}layoutSymbols(){throw new Error("not implemented")}findGraphicalStaffEntryFromTimestamp(e){for(let n=0,i=this.staffEntries.length;n<i;++n){var t;const i=this.staffEntries[n];if(null!==(t=i.relInMeasureTimestamp)&&void 0!==t&&t.Equals(e))return i}}findGraphicalStaffEntryFromVerticalContainerTimestamp(e){for(let t=0,n=this.staffEntries.length;t<n;++t){const n=this.staffEntries[t];if(n.sourceStaffEntry.VerticalContainerParent.getAbsoluteTimestamp().Equals(e))return n}}hasSameDurationWithSourceMeasureParent(){const e=new s.Fraction(0,1);for(let t=0,n=this.staffEntries.length;t<n;++t){const n=this.staffEntries[t];e.Add(n.findStaffEntryMinNoteLength())}return e.Equals(this.parentSourceMeasure.Duration)}hasMultipleVoices(){if(0===this.staffEntries.length)return!1;const e=[];for(let t=0,n=this.staffEntries.length;t<n;++t){const n=this.staffEntries[t];for(let t=0,i=n.sourceStaffEntry.VoiceEntries.length;t<i;++t){const i=n.sourceStaffEntry.VoiceEntries[t];e.indexOf(i.ParentVoice)<0&&e.push(i.ParentVoice)}}return e.length>1}isVisible(){return this.ParentStaff.isVisible()}isMultiRestMeasure(){return void 0!==this.multiRestElement}getGraphicalMeasureDurationFromStaffEntries(){let e=new s.Fraction(0,1);const t=[];for(let n=0,i=this.staffEntries.length;n<i;++n){const e=this.staffEntries[n];for(let n=0,i=e.sourceStaffEntry.VoiceEntries.length;n<i;++n){const i=e.sourceStaffEntry.VoiceEntries[n];t.indexOf(i.ParentVoice)<0&&t.push(i.ParentVoice)}}for(let n=0,i=t.length;n<i;++n){const i=t[n],r=new s.Fraction(0,1);for(const e of this.staffEntries)for(const t of e.graphicalVoiceEntries)t.parentVoiceEntry.ParentVoice===i&&t.notes.length>0&&r.Add(t.notes[0].graphicalNoteLength);e.lt(r)&&(e=s.Fraction.createFromFraction(r))}return e}addGraphicalStaffEntry(e){this.staffEntries.push(e)}addGraphicalStaffEntryAtTimestamp(e){if(e)if(0===this.staffEntries.length||this.staffEntries[this.staffEntries.length-1].relInMeasureTimestamp.lt(e.relInMeasureTimestamp))this.staffEntries.push(e);else for(let t=this.staffEntries.length-1;t>=0;t--){if(this.staffEntries[t].relInMeasureTimestamp.lt(e.relInMeasureTimestamp)){this.staffEntries.splice(t+1,0,e);break}0===t&&this.staffEntries.splice(t,0,e)}}isPianoRightHand(){return this.isUpperStaffOfInstrument()}isPianoLeftHand(){return this.isLowerStaffOfInstrument()}isUpperStaffOfInstrument(){return 1===this.parentStaff.ParentInstrument.Staves.length||this.ParentStaff===this.parentStaff.ParentInstrument.Staves[0]}isLowerStaffOfInstrument(){return 1!==this.parentStaff.ParentInstrument.Staves.length&&this.ParentStaff===this.ParentStaff.ParentInstrument.Staves.last()}beginsWithLineRepetition(){const e=this.parentSourceMeasure;return!!e&&e.beginsWithLineRepetition()}endsWithLineRepetition(){const e=this.parentSourceMeasure;return!!e&&e.endsWithLineRepetition()}beginsWithWordRepetition(){const e=this.parentSourceMeasure;return!!e&&e.beginsWithWordRepetition()}endsWithWordRepetition(){const e=this.parentSourceMeasure;return!!e&&e.endsWithWordRepetition()}getTransposedHalftones(){return this.parentStaff.ParentInstrument.GetMusicSheet.Transpose+this.parentStaff.ParentInstrument.Transpose}}t.GraphicalMeasure=o},5749:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSymbolModuleFactory=void 0;const i=n(7631),s=n(6302);t.MusicSymbolModuleFactory=class{static createRepetitionInstructionReader(){return new i.RepetitionInstructionReader}static createRepetitionCalculator(){return new s.RepetitionCalculator}}},5824:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalUnknownExpression=void 0;const s=n(9490),r=n(6362),a=i(n(3065));class o extends s.AbstractGraphicalExpression{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;super(e,new r.AbstractExpression(n),i),this.label=t,this.sourceMultiExpression=s}updateSkyBottomLine(){const e=this.parentStaffLine.SkyBottomLineCalculator,t=this.label.PositionAndShape.RelativePosition.x+this.label.PositionAndShape.BorderMarginLeft,n=this.label.PositionAndShape.RelativePosition.x+this.label.PositionAndShape.BorderMarginRight;switch(this.Placement){case r.PlacementEnum.Above:const i=this.label.PositionAndShape.BorderMarginTop+this.label.PositionAndShape.RelativePosition.y;e.updateSkyLineInRange(t,n,i);break;case r.PlacementEnum.Below:const s=this.label.PositionAndShape.BorderMarginBottom+this.label.PositionAndShape.RelativePosition.y;e.updateBottomLineInRange(t,n,s);break;default:a.default.error("Placement for GraphicalUnknownExpression is unknown")}}}t.GraphicalUnknownExpression=o},5866:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowStaffLine=void 0;const i=n(2919),s=n(1083);class r extends i.StaffLine{constructor(e,t){super(e,t),this.slursInVFStaffLine=[],this.alignmentManager=new s.AlignmentManager(this)}get SlursInVFStaffLine(){return this.slursInVFStaffLine}addVFSlurToVFStaffline(e){this.slursInVFStaffLine.push(e)}get AlignmentManager(){return this.alignmentManager}}t.VexFlowStaffLine=r},5875:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContDynamicEnum=t.ContinuousDynamicExpression=void 0;const i=n(6362),s=n(2561);class r extends i.AbstractExpression{constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";super(t),this.parentMeasure=i,this.NumberXml=s,this.dynamicType=e,this.label=r,this.staffNumber=n,this.startVolume=-1,this.endVolume=-1,""!==r&&this.setType()}get DynamicType(){return this.dynamicType}set DynamicType(e){this.dynamicType=e}get StartMultiExpression(){return this.startMultiExpression}set StartMultiExpression(e){this.startMultiExpression=e}get EndMultiExpression(){return this.endMultiExpression}set EndMultiExpression(e){this.endMultiExpression=e}get Placement(){return this.placement}set Placement(e){this.placement=e}get StartVolume(){return this.startVolume}set StartVolume(e){this.startVolume=e}get EndVolume(){return this.endVolume}set EndVolume(e){this.endVolume=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get Label(){return this.label}set Label(e){this.label=e,this.setType()}static isInputStringContinuousDynamic(e){return!!e&&(r.isStringInStringList(r.listContinuousDynamicIncreasing,e)||r.isStringInStringList(r.listContinuousDynamicDecreasing,e))}getInterpolatedDynamic(e){const t=this.StartMultiExpression.AbsoluteTimestamp;let n;if(n=this.EndMultiExpression?this.EndMultiExpression.AbsoluteTimestamp:s.Fraction.plus(this.startMultiExpression.SourceMeasureParent.AbsoluteTimestamp,this.startMultiExpression.SourceMeasureParent.Duration),e.lt(t))return-1;if(n.lt(e))return-2;const i=s.Fraction.minus(e,t).RealValue/s.Fraction.minus(n,t).RealValue;return Math.max(0,Math.min(99.9,this.startVolume+(this.endVolume-this.startVolume)*i))}isWedge(){return!this.label}setType(){r.isStringInStringList(r.listContinuousDynamicIncreasing,this.label)?this.dynamicType=a.crescendo:r.isStringInStringList(r.listContinuousDynamicDecreasing,this.label)&&(this.dynamicType=a.diminuendo)}}var a;t.ContinuousDynamicExpression=r,r.listContinuousDynamicIncreasing=["crescendo","cresc","cresc.","cres."],r.listContinuousDynamicDecreasing=["decrescendo","decresc","decr.","diminuendo","dim.","dim"],function(e){e[e.crescendo=0]="crescendo",e[e.diminuendo=1]="diminuendo"}(a||(t.ContDynamicEnum=a={}))},5951:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Fonts=void 0,function(e){e[e.TimesNewRoman=0]="TimesNewRoman",e[e.Kokila=1]="Kokila"}(n||(t.Fonts=n={}))},5955:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(3173),t),s(n(6597),t),s(n(624),t),s(n(7103),t)},5984:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionReader=void 0;const s=n(2561),r=n(5332),a=n(5875),o=n(2221),l=n(2148),c=n(437),h=n(9019),u=n(9161),d=n(9803),f=n(1112),p=n(6362),m=n(7533),g=n(9767),b=i(n(3065)),v=n(2570),y=n(9157),x=n(3253);t.ExpressionReader=class{constructor(e,t,n){this.openContinuousDynamicExpressions=[],this.musicSheet=e,this.staffNumber=n,this.globalStaffIndex=e.getGlobalStaffIndexOfFirstStaff(t)+(n-1),this.initialize()}readExpressionParameters(e,t,n,i,r,a,o){this.initialize(),this.divisions=n;const l=e.element("offset");if(void 0!==l&&!o)try{this.offsetDivisions=parseInt(l.value,10)}catch(e){const t="ReaderErrorMessages/ExpressionOffsetError, Invalid expression offset -> set to default.";b.default.debug("ExpressionReader.readExpressionParameters",t,e),this.musicSheet.SheetErrors.pushMeasureError(t),this.offsetDivisions=0}this.directionTimestamp=s.Fraction.createFromFraction(i);let c,h=new s.Fraction(Math.abs(this.offsetDivisions),4*n);this.offsetDivisions>0?i.RealValue>0?(h=s.Fraction.multiply(s.Fraction.minus(i,r),h),this.directionTimestamp=s.Fraction.plus(h,i)):this.directionTimestamp=s.Fraction.createFromFraction(h):this.offsetDivisions<0&&(i.RealValue>0?(h=s.Fraction.multiply(s.Fraction.minus(i,r),h),this.directionTimestamp=s.Fraction.minus(i,h)):this.directionTimestamp=s.Fraction.createFromFraction(h));const u=e.element("direction-type");let d;if(u&&(d=u.element("wedge"),d)){const e=d.attribute("default-y");e&&(c=this.readPosition(e))}this.WedgeYPosXml=c;const f=e.attribute("placement");if(f)try{const e=f.value;"below"===e?this.placement=p.PlacementEnum.Below:"above"===e&&(this.placement=p.PlacementEnum.Above)}catch(e){const t=g.ITextTranslation.translateText("ReaderErrorMessages/ExpressionPlacementError","Invalid expression placement -> set to default.");b.default.debug("ExpressionReader.readExpressionParameters",t,e),this.musicSheet.SheetErrors.pushMeasureError(t),this.placement=p.PlacementEnum.Below}if(this.placement===p.PlacementEnum.NotYetDefined)try{if(u){const e=u.element("dynamics");if(e){const t=e.attribute("default-y");t&&this.readExpressionPlacement(t,"read dynamics y pos")}if(d){const e=d.attribute("default-y");e&&this.readExpressionPlacement(e,"read wedge y pos")}const t=u.element("words");if(t){const e=t.attribute("default-y");e&&this.readExpressionPlacement(e,"read words y pos")}const n=u.element("rehearsal");if(n){const e=n.attribute("default-y");e&&this.readExpressionPlacement(e,"read rehearsal pos")}}}catch(e){const t=g.ITextTranslation.translateText("ReaderErrorMessages/ExpressionPlacementError","Invalid expression placement. Set to default.");b.default.debug("ExpressionReader.readExpressionParameters",t,e),this.musicSheet.SheetErrors.pushMeasureError(t),this.placement=p.PlacementEnum.Below}this.placement===p.PlacementEnum.NotYetDefined&&(t.Staves.length>1?this.placement=p.PlacementEnum.Below:t.HasLyrics?this.placement=p.PlacementEnum.Above:this.placement=p.PlacementEnum.Below)}read(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=!1,a=!1;const o=n.clone(),l=e.element("offset");if(null!==l&&void 0!==l&&l.value){const e=Number.parseInt(l.value,10);o.Add(new s.Fraction(e,4*this.divisions))}const c=e.element("sound");if(c){const e=c.attribute("tempo"),n=c.attribute("dynamics");if(e){const n=e.value.match(/^(\d+)(\.\d+)?$/);(null===n||void 0===n?void 0:n.length)>0?this.soundTempo=Math.round(Number.parseFloat(e.value)):(b.default.info("invalid xml tempo: "+e.value),this.soundTempo=100),t.TempoInBPM=this.soundTempo,0===this.musicSheet.DefaultStartTempoInBpm&&(this.musicSheet.DefaultStartTempoInBpm=this.soundTempo),this.musicSheet.HasBPMInfo=!0,r=!0}if(n){const e=n.value.match(/\d+/);this.soundDynamic=void 0!==e?parseInt(e[0],10):100,a=!0}}const h=e.elements("direction-type");for(const d of h){let l=d.element("metronome");if(l){const e=l.element("beat-unit"),n=void 0!==l.element("beat-unit-dot"),i=l.element("per-minute");if(void 0!==e&&i){l.hasAttributes&&void 0!==l.attribute("default-x")&&(this.directionTimestamp=s.Fraction.createFromFraction(o));const r=parseFloat(i.value);this.createNewTempoExpressionIfNeeded(t);const a=new u.InstantaneousTempoExpression(void 0,this.placement,this.staffNumber,r,this.currentMultiTempoExpression,!0);a.parentMeasure=t,this.soundTempo=r,t.TempoInBPM=this.soundTempo*(n?1.5:1),0===this.musicSheet.DefaultStartTempoInBpm&&(this.musicSheet.DefaultStartTempoInBpm=this.soundTempo),this.musicSheet.HasBPMInfo=!0,a.dotted=n,a.beatUnit=e.value,this.currentMultiTempoExpression.addExpression(a,""),this.currentMultiTempoExpression.CombinedExpressionsText="test"}}else if(l=d.element("dynamics"),l){const n=void 0!==e.element("notations");this.interpretInstantaneousDynamics(l,t,o,n)}else if(l=d.element("words"),l)if(r){this.createNewTempoExpressionIfNeeded(t),this.currentMultiTempoExpression.CombinedExpressionsText=l.value;const e=new u.InstantaneousTempoExpression(l.value,this.placement,this.staffNumber,this.soundTempo,this.currentMultiTempoExpression);this.currentMultiTempoExpression.addExpression(e,"")}else a||this.interpretWords(l,t,o);else l=d.element("wedge"),l?this.interpretWedge(e,l,t,i,t.MeasureNumber):(l=d.element("rehearsal"),l&&this.interpretRehearsalMark(l,t,n,t.MeasureNumber))}}closeOpenExpressions(e,t){for(const n of this.openContinuousDynamicExpressions)this.createNewMultiExpressionIfNeeded(e,n.NumberXml,t),this.closeOpenContinuousDynamic(n,e,t);this.openContinuousTempoExpression&&this.closeOpenContinuousTempo(s.Fraction.plus(e.AbsoluteTimestamp,t))}addOctaveShift(e,t,n){let i=1;const s=e.element("staff");if(s)try{i=parseInt(s.value,10)}catch(e){const t=g.ITextTranslation.translateText("ReaderErrorMessages/OctaveShiftStaffError","Invalid octave shift staff number. Set to default");this.musicSheet.SheetErrors.pushMeasureError(t),i=1,b.default.debug("ExpressionReader.addOctaveShift",t,e)}const r=e.element("direction-type");if(r){const s=r.element("octave-shift"),o=this.readPlacement(e);if(void 0!==s&&s.hasAttributes)try{const e=this.readNumber(s);if(s.attribute("size")){var a;const r=parseInt(s.attribute("size").value,10);let l=0;8===r?l=1:15===r&&(l=2);let h=null===(a=s.attribute("type"))||void 0===a?void 0:a.value;if(h||(o===p.PlacementEnum.Above?h="down":o===p.PlacementEnum.Below&&(h="up")),"up"===h||"down"===h){const n=new c.OctaveShift(h,l);n.StaffNumber=i,this.getMultiExpression=this.createNewMultiExpressionIfNeeded(t,e),this.getMultiExpression.OctaveShiftStart=n,n.ParentStartMultiExpression=this.getMultiExpression,this.openOctaveShift=n}else"stop"===h?this.openOctaveShift&&(this.getMultiExpression=this.createNewMultiExpressionIfNeeded(t,this.openOctaveShift.numberXml,n),this.getMultiExpression.OctaveShiftEnd=this.openOctaveShift,this.openOctaveShift.ParentEndMultiExpression=this.getMultiExpression,this.openOctaveShift=void 0):h||b.default.debug("octave-shift missing type in xml")}}catch(e){const t=g.ITextTranslation.translateText("ReaderErrorMessages/OctaveShiftError","Error while reading octave shift.");this.musicSheet.SheetErrors.pushMeasureError(t),b.default.debug("ExpressionReader.addOctaveShift",t,e)}}}addPedalMarking(e,t,n){const i=e.element("direction-type");if(i){const o=i.element("pedal");if(void 0!==o&&o.hasAttributes){let i=!1,l=!1;try{var s,r,a;switch("yes"===(null===(s=o.attribute("line"))||void 0===s?void 0:s.value)?l=!0:"no"===(null===(r=o.attribute("line"))||void 0===r?void 0:r.value)?(l=!1,i=!0):"yes"===(null===(a=o.attribute("sign"))||void 0===a?void 0:a.value)?i=!0:(i=!1,l=!0),o.attribute("type").value){case"start":this.openPedal&&this.openPedal.IsLine&&this.endOpenPedal(t),this.createNewMultiExpressionIfNeeded(t,-1),this.openPedal=new x.Pedal(l,i),this.getMultiExpression.PedalStart=this.openPedal,this.openPedal.ParentStartMultiExpression=this.getMultiExpression;break;case"stop":this.openPedal&&this.endOpenPedal(t,n);break;case"change":this.openPedal&&this.openPedal.IsLine&&(this.openPedal.ChangeEnd=!0,this.createNewMultiExpressionIfNeeded(t,-1),this.getMultiExpression.PedalEnd=this.openPedal,this.openPedal.ParentEndMultiExpression=this.getMultiExpression,this.createNewMultiExpressionIfNeeded(t,-1),this.openPedal=new x.Pedal(l,i),this.openPedal.ChangeBegin=!0,this.getMultiExpression.PedalStart=this.openPedal,this.openPedal.ParentStartMultiExpression=this.getMultiExpression)}}catch(e){const t=g.ITextTranslation.translateText("ReaderErrorMessages/PedalError","Error while reading pedal.");this.musicSheet.SheetErrors.pushMeasureError(t),b.default.debug("ExpressionReader.addPedalMarking",t,e)}}}}endOpenPedal(e,t){this.createNewMultiExpressionIfNeeded(e,-1,t),this.getMultiExpression.PedalEnd=this.openPedal,this.openPedal.ParentEndMultiExpression=this.getMultiExpression,this.openPedal=void 0}initialize(){this.placement=p.PlacementEnum.NotYetDefined,this.soundTempo=0,this.soundDynamic=0,this.offsetDivisions=0}readPlacement(e){var t;const n=null===(t=e.attribute("placement"))||void 0===t?void 0:t.value;return"above"===n?p.PlacementEnum.Above:"below"===n?p.PlacementEnum.Below:p.PlacementEnum.NotYetDefined}readExpressionPlacement(e,t){try{const t=this.readPosition(e);t<0?this.placement=p.PlacementEnum.Below:t>0&&(this.placement=p.PlacementEnum.Above)}catch(e){b.default.debug("ExpressionReader.readExpressionParameters",t,e)}}readPosition(e){try{const t=parseInt(e.value,10);return t<0?this.placement=p.PlacementEnum.Below:t>0&&(this.placement=p.PlacementEnum.Above),t}catch(e){b.default.debug("ExpressionReader.readExpressionParameters",e)}}interpretInstantaneousDynamics(e,t,n,i){if(e.hasElements){var r;e.hasAttributes&&e.attribute("default-x")&&(this.directionTimestamp=s.Fraction.createFromFraction(n));const c=this.readNumber(e);let h=null===(r=e.elements()[0])||void 0===r?void 0:r.name;if("other-dynamics"===h&&(h=e.elements()[0].value),h){var a;if(null!==(a=t.Rules)&&void 0!==a&&a.IgnoreRepeatedDynamics){var o;let t;try{t=l.DynamicEnum[h]}catch(e){const t=g.ITextTranslation.translateText("ReaderErrorMessages/DynamicError","Error while reading dynamic.");return void this.musicSheet.SheetErrors.pushMeasureError(t)}if((null===(o=this.activeInstantaneousDynamic)||void 0===o?void 0:o.DynEnum)===t)return}i?this.createNewMultiExpressionIfNeeded(t,c,s.Fraction.createFromFraction(n)):this.createNewMultiExpressionIfNeeded(t,c);const r=new l.InstantaneousDynamicExpression(h,this.soundDynamic,this.placement,this.staffNumber,t);r.InMeasureTimestamp=n.clone(),this.getMultiExpression.addExpression(r,""),this.initialize(),this.activeInstantaneousDynamic?this.activeInstantaneousDynamic.DynEnum=r.DynEnum:this.activeInstantaneousDynamic=new l.InstantaneousDynamicExpression(h,0,p.PlacementEnum.NotYetDefined,1,t)}}}interpretWords(e,t,n){const i=e.value;if(t.Rules.IgnoreBracketsWords&&(/^\(\s*\)$/.test(i)||/^\[\s*\]$/.test(i)))return;let r;const a=e.attribute("font-style");let o,l,c;a&&(o=a.value,"italic"===o&&(r=v.FontStyles.Italic));const h=e.attribute("font-weight");h&&(l=h.value,"bold"===l&&(r=v.FontStyles.Bold,"italic"===o&&(r=v.FontStyles.BoldItalic)));const u=e.attribute("color");let d;if(u&&(c=u.value),t.Rules.PlaceWordsInsideStafflineFromXml){var f;const t=null===(f=e.attribute("default-y"))||void 0===f?void 0:f.value;(null===t||void 0===t?void 0:t.length)>0&&(d=Number.parseInt(t,10))}if(i.length>0){if(e.hasAttributes&&e.attribute("default-x")&&(this.directionTimestamp=s.Fraction.createFromFraction(n)),this.checkIfWordsNodeIsRepetitionInstruction(i))return;this.fillMultiOrTempoExpression(i,t,n,r,c,d),this.initialize()}}readNumber(e){var t;let n=1;const i=null===(t=e.attribute("number"))||void 0===t?void 0:t.value;return i&&(n=Number.parseInt(i,10)),n}interpretWedge(e,t,n,i,r){var o;void 0!==t&&t.hasAttributes&&t.attribute("default-x")&&(this.directionTimestamp=s.Fraction.createFromFraction(i));const l=this.readNumber(t),c=null===(o=t.attribute("type"))||void 0===o||null===(o=o.value)||void 0===o?void 0:o.toLowerCase();this.lastWedge&&this.lastWedge.parentMeasure.MeasureNumberXML===n.MeasureNumberXML&&this.lastWedge.StaffNumber===this.staffNumber&&this.placement===this.lastWedge.Placement&&void 0!==this.WedgeYPosXml&&this.lastWedge.YPosXml===this.WedgeYPosXml&&this.lastWedge.StartMultiExpression.Timestamp.Equals(this.directionTimestamp)&&this.lastWedge.DynamicType===a.ContDynamicEnum[c]||("stop"===c?(this.createNewMultiExpressionIfNeeded(n,l,i),this.getMultiExpression.EndOffsetFraction=new s.Fraction(this.offsetDivisions,4*this.divisions)):this.createNewMultiExpressionIfNeeded(n,l),this.addWedge(t,n,i),this.initialize())}interpretRehearsalMark(e,t,n,i){t.rehearsalExpression=new y.RehearsalExpression(e.value,this.placement)}createNewMultiExpressionIfNeeded(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;n||(n=this.directionTimestamp);let i=this.getMultiExpression;return(!i||i&&(i.SourceMeasureParent!==e||i.numberXml!==t||i.SourceMeasureParent===e&&!i.Timestamp.Equals(n)))&&(this.getMultiExpression=i=new h.MultiExpression(e,s.Fraction.createFromFraction(n)),this.getMultiExpression.numberXml=t,e.StaffLinkedExpressions[this.globalStaffIndex].push(i)),i}createNewTempoExpressionIfNeeded(e){this.currentMultiTempoExpression&&this.currentMultiTempoExpression.SourceMeasureParent===e&&this.currentMultiTempoExpression.Timestamp===this.directionTimestamp||(this.currentMultiTempoExpression=new r.MultiTempoExpression(e,s.Fraction.createFromFraction(this.directionTimestamp)),e.TempoExpressions.push(this.currentMultiTempoExpression))}addWedge(e,t,n){if(void 0!==e&&e.hasAttributes){const i=this.readNumber(e),s=e.attribute("type").value.toLowerCase();try{if("crescendo"===s||"diminuendo"===s){const e=new a.ContinuousDynamicExpression(a.ContDynamicEnum[s],this.placement,this.staffNumber,t,i);this.lastWedge=e,this.lastWedge.YPosXml=this.WedgeYPosXml,this.openContinuousDynamicExpressions.push(e);let n=this.getMultiExpression;n||(n=this.createNewMultiExpressionIfNeeded(t,i)),n.StartingContinuousDynamic=e,e.StartMultiExpression=n,void 0!==this.activeInstantaneousDynamic&&this.activeInstantaneousDynamic.StaffNumber===e.StaffNumber&&(this.activeInstantaneousDynamic=void 0)}else if("stop"===s)for(const e of this.openContinuousDynamicExpressions)e.NumberXml===i&&this.closeOpenContinuousDynamic(e,t,n)}catch(e){const t="ReaderErrorMessages/WedgeError, Error while reading Crescendo / Diminuendo.";this.musicSheet.SheetErrors.pushMeasureError(t),b.default.debug("ExpressionReader.addWedge",t,e)}}}fillMultiOrTempoExpression(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(!e)return;const a=e.trim();this.createExpressionFromString("",a,t,n,e,i,s,r)}createExpressionFromString(e,t,n,i,s,r,l){let c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;const h=u.InstantaneousTempoExpression.isInputStringInstantaneousTempo(t),p=o.ContinuousTempoExpression.isInputStringContinuousTempo(t);if(h||p){if(n.TempoExpressions.length>0)for(let e=0,i=n.TempoExpressions.length;e<i;++e){const i=n.TempoExpressions[e];if(i.Timestamp===this.directionTimestamp&&void 0!==i.InstantaneousTempo&&-1!==i.InstantaneousTempo.Label.indexOf(t))return!1}if(this.createNewTempoExpressionIfNeeded(n),this.currentMultiTempoExpression.CombinedExpressionsText=s,h){const n=new u.InstantaneousTempoExpression(t,this.placement,this.staffNumber,this.soundTempo,this.currentMultiTempoExpression);return n.ColorXML=l,this.currentMultiTempoExpression.addExpression(n,e),!0}if(p){const n=new o.ContinuousTempoExpression(t,this.placement,this.staffNumber,this.currentMultiTempoExpression);return n.ColorXML=l,this.currentMultiTempoExpression.addExpression(n,e),!0}}if(a.ContinuousDynamicExpression.isInputStringContinuousDynamic(t)){const s=new a.ContinuousDynamicExpression(void 0,this.placement,this.staffNumber,n,-1,t);s.ColorXML=l;const r=this.getMultiExpression;return r&&this.closeOpenContinuousDynamic(r.StartingContinuousDynamic,n,i),this.createNewMultiExpressionIfNeeded(n,-1),void 0!==this.activeInstantaneousDynamic&&this.activeInstantaneousDynamic.StaffNumber===s.StaffNumber&&(this.activeInstantaneousDynamic=void 0),this.openContinuousDynamicExpressions.push(s),s.StartMultiExpression=this.getMultiExpression,this.getMultiExpression.addExpression(s,e),!0}if(d.MoodExpression.isInputStringMood(t)){const i=this.createNewMultiExpressionIfNeeded(n,-1);n.hasMoodExpressions=!0;const s=new d.MoodExpression(t,this.placement,this.staffNumber);return s.fontStyle=r,s.ColorXML=l,i.addExpression(s,e),!0}const g=this.createNewMultiExpressionIfNeeded(n,-1,i);if(n.TempoExpressions.length>0)for(let a=0,o=n.TempoExpressions.length;a<o;++a){const e=n.TempoExpressions[a];if(e.Timestamp===this.directionTimestamp&&void 0!==e.InstantaneousTempo&&e.EntriesList.length>0&&!this.hasDigit(t)&&this.globalStaffIndex>0){if(e.EntriesList[0].label.indexOf(t)>=0)return!1;break}}let b=m.TextAlignmentEnum.CenterBottom;this.musicSheet.Rules.CompactMode&&(b=m.TextAlignmentEnum.LeftBottom);const v=new f.UnknownExpression(t,this.placement,b,this.staffNumber);return v.fontStyle=r,v.ColorXML=l,v.defaultYXml=c,v.parentMeasure=n,g.addExpression(v,e),!1}closeOpenContinuousDynamic(e,t,n){if(!e)return;const i=e.NumberXml;e.EndMultiExpression=this.createNewMultiExpressionIfNeeded(t,i,n),e.StartMultiExpression.EndingContinuousDynamic=e,this.openContinuousDynamicExpressions=this.openContinuousDynamicExpressions.filter((t=>t!==e))}closeOpenContinuousTempo(e){this.openContinuousTempoExpression.AbsoluteEndTimestamp=e,this.openContinuousTempoExpression=void 0}checkIfWordsNodeIsRepetitionInstruction(e){return"coda"===(e=e.trim().toLowerCase())||"tocoda"===e||"to coda"===e||"fine"===e||"d.c."===e||"dacapo"===e||"da capo"===e||"d.s."===e||"dalsegno"===e||"dal segno"===e||"d.c. al fine"===e||"d.s. al fine"===e||"d.c. al coda"===e||"d.s. al coda"===e}hasDigit(e){return/\d/.test(e)}}},6001:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RepetitionEndingPart=t.Repetition=void 0;const s=n(3457),r=n(2561),a=n(7551),o=i(n(3065));class l extends a.PartListEntry{constructor(e,t){super(e),this.backwardJumpInstructions=[],this.endingParts=[],this.endingIndexDict={},this.userNumberOfRepetitions=0,this.visibles=[],this.fromWords=!1,this.repetitonIterationOrder=[],this.numberOfEndings=1,this.musicSheet2=e,this.virtualOverallRepetition=t}get BackwardJumpInstructions(){return this.backwardJumpInstructions}get EndingIndexDict(){return this.endingIndexDict}get EndingParts(){return this.endingParts}get Visibles(){return this.visibles}set Visibles(e){this.visibles=e}get DefaultNumberOfRepetitions(){let e=2;return this.virtualOverallRepetition&&(e=1),Math.max(e,Object.keys(this.endingIndexDict).length,this.checkRepetitionForMultipleLyricVerses())}get UserNumberOfRepetitions(){return this.userNumberOfRepetitions}set UserNumberOfRepetitions(e){this.userNumberOfRepetitions=e,this.repetitonIterationOrder=[];const t=this.userNumberOfRepetitions-this.NumberOfEndings;for(let n=1;n<=this.userNumberOfRepetitions;n++)n<=t?this.repetitonIterationOrder.push(1):this.repetitonIterationOrder.push(n-t)}getForwardJumpTargetForIteration(e){const t=this.repetitonIterationOrder[e-1];return this.endingIndexDict[t]?this.endingIndexDict[t].part.StartIndex:-1}getBackwardJumpTarget(){return this.startMarker.measureIndex}SetEndingStartIndex(e,t){const n=new c(new s.SourceMusicPart(this.musicSheet2,t,t));this.endingParts.push(n);for(const i of e)try{this.endingIndexDict[i]=n,n.endingIndices.push(i),this.numberOfEndings<i&&(this.numberOfEndings=i)}catch(e){o.default.error("Repetition: Exception.",e)}}setEndingEndIndex(e,t){this.endingIndexDict[e]&&this.endingIndexDict[e].part.setEndIndex(t)}get NumberOfEndings(){return this.numberOfEndings}get FromWords(){return this.fromWords}set FromWords(e){this.fromWords=e}get AbsoluteTimestamp(){return r.Fraction.createFromFraction(this.musicSheet2.SourceMeasures[this.startMarker.measureIndex].AbsoluteTimestamp)}get StartIndex(){return this.startMarker.measureIndex}get EndIndex(){if(0===this.BackwardJumpInstructions.length)return this.StartIndex;let e=this.backwardJumpInstructions[this.backwardJumpInstructions.length-1].measureIndex;return this.endingIndexDict[this.NumberOfEndings]&&(e=Math.max(this.endingIndexDict[this.NumberOfEndings].part.EndIndex,e)),e}checkRepetitionForMultipleLyricVerses(){let e=0;const t=this.StartIndex,n=this.EndIndex;for(let i=t;i<=n;i++){const t=this.musicSheet2.SourceMeasures[i];for(let n=0;n<t.CompleteNumberOfStaves;n++)for(const i of t.VerticalSourceStaffEntryContainers[n].StaffEntries)if(i){let t=0;for(const e of i.VoiceEntries)t+=Object.keys(e.LyricsEntries).length;e=Math.max(e,t)}}return e}get FirstSourceMeasureNumber(){return this.getFirstSourceMeasure().MeasureNumber}get LastSourceMeasureNumber(){return this.getLastSourceMeasure().MeasureNumber}}t.Repetition=l;class c{constructor(e){this.endingIndices=[],this.part=e}ToString(){return this.endingIndices.join(", ")}}t.RepetitionEndingPart=c},6014:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowConverter=void 0;var s=i(n(3206)).default.Flow;const r=n(164),a=n(8233),o=n(2561),l=n(9288),c=n(4543),h=n(8233),u=n(8233),d=n(6954),f=n(2570),p=n(5951),m=n(2683),g=i(n(3065)),b=n(1336),v=n(67),y=n(8215),x=n(4064),S=n(9479),w=n(4236),E=n(9647),_=n(6362);class T{static durations(e,t){const n=[],i=e.clone();for(;i.RealValue>1e-4;){const e=i.RealValue;if(e>=2)n.push("1/2"),i.Sub(new o.Fraction(2,1));else if(e>=1)n.push("w"),i.Sub(new o.Fraction(1,1));else if(e<1&&e>=.5){if(t&&e>.5)return["w"];n.push("h"),i.Sub(new o.Fraction(1,2))}else if(e<.5&&e>=.25){if(t&&e>.25)return["h"];n.push("q"),i.Sub(new o.Fraction(1,4))}else if(e<.25&&e>=.125){if(t&&e>.125)return["q"];n.push("8"),i.Sub(new o.Fraction(1,8))}else if(e<.125&&e>=.0625){if(t&&e>.0625)return["8"];n.push("16"),i.Sub(new o.Fraction(1,16))}else if(e<.0625&&e>=.03125){if(t&&e>.03125)return["16"];n.push("32"),i.Sub(new o.Fraction(1,32))}else if(e<.03125&&e>=.015625){if(t&&e>.015625)return["32"];n.push("64"),i.Sub(new o.Fraction(1,64))}else{if(t)return["64"];n.push("128"),i.Sub(new o.Fraction(1,128))}}return n}static pitch(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=s;void 0===s&&(o=3),t&&void 0===s&&(o=0,n.ClefType===r.ClefEnum.F&&(o=2),n.ClefType===r.ClefEnum.C&&(o=2));const l=u.NoteEnum[e.FundamentalNote].toLowerCase(),c=a.Pitch.accidentalVexflow(e.Accidental),h=e.Octave-n.OctaveOffset+o;let d="";return i&&(d=this.NoteHeadCode(i)),[l+"n/"+h+d,c,n]}static restToNotePitch(e,t){let n=e.Octave;switch(t){case r.ClefEnum.C:case r.ClefEnum.F:n+=2;case r.ClefEnum.G:}return new a.Pitch(e.FundamentalNote,n,h.AccidentalEnum.NONE)}static NoteHeadCode(e){const t=e.Filled?"2":"1";switch(e.Shape){case x.NoteHeadShape.NORMAL:return"";case x.NoteHeadShape.DIAMOND:return"/D"+t;case x.NoteHeadShape.TRIANGLE:return"/T"+t;case x.NoteHeadShape.TRIANGLE_INVERTED:return"/TI";case x.NoteHeadShape.X:return"/X"+t;case x.NoteHeadShape.CIRCLEX:return"/X3";case x.NoteHeadShape.RECTANGLE:return"/R"+t;case x.NoteHeadShape.SQUARE:return"/S"+t;case x.NoteHeadShape.SLASH:default:return""}}static GhostNotes(e){const t=[],n=T.durations(e,!1);for(const i of n)t.push(new s.GhostNote({duration:i}));return t}static StaveNote(e){var t;e.sortForVexflow();const n=e.notes,i=e.parentStaffEntry.parentMeasure.parentSourceMeasure.Rules,l=n[0];let c=[];const h=[],u=l.graphicalNoteLength,d=void 0!==l.sourceNote.NoteTuplet;let f,p=T.durations(u,d)[0];void 0!==l.sourceNote.TypeLength&&l.sourceNote.TypeLength!==u&&0!==l.sourceNote.TypeLength.RealValue&&(p=T.durations(l.sourceNote.TypeLength,d)[0],l.numberOfDots=l.sourceNote.DotsXml);let m,g,v=l.numberOfDots,y=!1,w=0,E=!1;for(const s of n){if(v<s.numberOfDots&&(v=s.numberOfDots),s.sourceNote.isRest()){if(E=!0,s.sourceNote.Pitch){c=[s.vfpitch[0]];break}{var _;c=["b/4"];const e=null===(_=s.parentVoiceEntry)||void 0===_?void 0:_.parentVoiceEntry;if(e){var M,C,A;const t=null===(M=s.parentVoiceEntry)||void 0===M?void 0:M.parentStaffEntry.parentMeasure.staffEntries;let n,i,r=-1;for(let s=0;s<t.length;s++){var P;if((null===(P=t[s])||void 0===P||null===(P=P.graphicalVoiceEntries[0])||void 0===P?void 0:P.parentVoiceEntry)===e){r=s;break}}if(r>=1&&t.length-1>=r+1&&(n=null===(C=t[r-1])||void 0===C||null===(C=C.graphicalVoiceEntries[0])||void 0===C?void 0:C.parentVoiceEntry,i=null===(A=t[r+1])||void 0===A||null===(A=A.graphicalVoiceEntries[0])||void 0===A?void 0:A.parentVoiceEntry,n&&i)){var N;const e=n.Notes[0],t=i.Notes[0];if(null!==(N=e.NoteBeam)&&void 0!==N&&N.Notes.includes(t)){const e=n.Notes.last().Pitch,t=s.Clef();c=[T.pitch(T.restToNotePitch(e.getTransposedPitch(-2),t.ClefType),!1,t)[0]]}}}}if((s.sourceNote.IsWholeMeasureRest||u.RealValue===s.sourceNote.SourceMeasure.ActiveTimeSignature.RealValue)&&(c=["d/5"],1===e.parentStaffEntry.parentMeasure.ParentStaff.StafflineCount&&(c=["b/4"]),p="w",v=0,y=!0,w=i.WholeRestXShiftVexflow*S.unitInPixels),s.sourceNote.ParentStaff.Voices.length>1){const e=s.parentVoiceEntry.parentStaffEntry.graphicalVoiceEntries,t=s.parentVoiceEntry.parentVoiceEntry.ParentVoice.VoiceId;let n,o;for(const r of e)for(const e of r.notes){if(e===s||e.sourceNote.isRest()||!e.sourceNote.PrintObject)continue;const r=e.parentVoiceEntry.parentVoiceEntry.WantedStemDirection,a=1===t||5===t,l=a?1:-1,c=e.sourceNote.Pitch.getHalfTone();(!n||1===l&&c>n||-1===l&&c<n)&&(n=c,o=0,a&&r===b.StemDirectionType.Up?o+=7:a||r!==b.StemDirectionType.Down?o+=a?1:2:o+=7,p.includes("8")||r===b.StemDirectionType.Up&&-1===l&&(o+=1),e.sourceNote.NoteBeam&&(o+=1),p.includes("w")&&(o/=2),o+=.5*Math.ceil(i.RestCollisionYPadding),o*=l,s.lineShift=o)}if(n>0){let e=3;const t=s.Clef();switch(t.ClefType){case r.ClefEnum.F:e=5;break;case r.ClefEnum.C:e=4}m=a.Pitch.fromHalftone(n),c=[T.pitch(m,!0,t,void 0,e)[0]]}}break}const t=s.vfpitch;c.push(t[0]),h.push(t[1]),f||(f=T.Clef(t[2]).type)}for(let s=0,r=v;s<r;++s)p+="d";1===n.length&&(null===(t=n[0].sourceNote.Notehead)||void 0===t?void 0:t.Shape)===x.NoteHeadShape.SLASH&&(p+="s"),E&&(p+="r");const k={align_center:y,auto_stem:!0,clef:f,duration:p,keys:c,slash:e.GraceSlash},L=e.notes[0].sourceNote;if(L.IsCueNote&&(k.glyph_font_scale=s.DEFAULT_NOTATION_FONT_SCALE*s.GraceNote.SCALE,k.stroke_px=s.GraceNote.LEDGER_LINE_OFFSET),e.parentVoiceEntry.IsGrace||e.notes[0].sourceNote.IsCueNote)g=new s.GraceNote(k);else{g=new s.StaveNote(k),g.stagger_same_whole_notes=i.StaggerSameWholeNotes;const t=e.parentStaffEntry.LyricsEntries;let r=!0,a=0;if(t.length>0&&i.RenderLyrics&&i.LyricsUseXPaddingForLongLyrics){const t=e.parentStaffEntry.parentMeasure,n=[];for(let r=t.staffEntries.indexOf(e.parentStaffEntry)+1;r<t.staffEntries.length;r++){const e=t.staffEntries[r];e.graphicalVoiceEntries[0]&&n.push(e)}let i,s=e.parentStaffEntry.relInMeasureTimestamp.clone();for(const l of n){const t=l.relInMeasureTimestamp.clone();if(i=o.Fraction.minus(t,e.parentVoiceEntry.Timestamp),i.RealValue>.25){r=!1;break}if(l.LyricsEntries.length>0)break;a+=32*o.Fraction.minus(t,s).RealValue,s=t}}if(i.RenderLyrics&&i.LyricsUseXPaddingForLongLyrics&&t.length>0&&r){let s=!1,r=0;for(const e of n)if(e.sourceNote.Length.RealValue<=.125){s=!0;break}let o=!1;for(const n of t){const t=i.LyricsXPaddingWidthThreshold;let l=n.GraphicalLabel.PositionAndShape.Size.width;if(n.hasDashFromLyricWord()&&(l+=.5),l>t){r+=l-t;const n=e.parentStaffEntry,c=n.parentMeasure.staffEntries,h=c.indexOf(n)===c.length-1;h&&(a+=i.LyricsXPaddingReductionForLastNoteInMeasure),s||(a+=i.LyricsXPaddingReductionForLongNotes),!i.LyricsXPaddingForLastNoteInMeasure&&h||l>t+a&&(o=!0,r-=a);break}}o&&(g.paddingRight=10*i.LyricsXPaddingFactorForLongLyrics*r)}}const I=e.notes[0].lineShift;if(0!==I&&(g.getKeyProps()[0].line+=I),n.length>1)for(let s=0;s<n.length;s++){var R;(null===(R=n[s].sourceNote.Notehead)||void 0===R?void 0:R.Shape)===x.NoteHeadShape.SLASH&&(g.note_heads[s].note_type="s")}if(g.getKeyProps().forEach(((t,n)=>{let{line:i}=t;return e.notes[n].staffLine=i})),(i.LedgerLineWidth||i.LedgerLineStrokeStyle)&&(g.ledgerLineStyle||(g.ledgerLineStyle={}),i.LedgerLineWidth&&(g.ledgerLineStyle.lineWidth=i.LedgerLineWidth),i.LedgerLineStrokeStyle&&(g.ledgerLineStyle.strokeStyle=i.LedgerLineStrokeStyle)),i.ColoringEnabled){const t=i.DefaultColorStem;let n=e.parentVoiceEntry.StemColor;!n&&t&&(n=t);const s={fillStyle:n,strokeStyle:n};n&&(g.setStemStyle(s),g.flag&&i.ColorFlags&&g.setFlagStyle(s))}if(g.x_shift=w,e.parentVoiceEntry.IsGrace&&e.notes[0].sourceNote.NoteBeam&&(e.parentVoiceEntry.WantedStemDirection=e.notes[0].sourceNote.NoteBeam.Notes[0].ParentVoiceEntry.WantedStemDirection),e.parentVoiceEntry)switch(e.parentVoiceEntry.WantedStemDirection){case b.StemDirectionType.Up:g.setStemDirection(s.Stem.UP),e.parentVoiceEntry.StemDirection=b.StemDirectionType.Up;break;case b.StemDirectionType.Down:g.setStemDirection(s.Stem.DOWN),e.parentVoiceEntry.StemDirection=b.StemDirectionType.Down}for(let r=0,a=n.length;r<a;r+=1){if(n[r].setIndex(g,r),h[r]){if("###"===h[r]){g.addAccidental(r,new s.Accidental("##")),g.addAccidental(r,new s.Accidental("#"));continue}if("bbs"===h[r]){g.addAccidental(r,new s.Accidental("bb")),g.addAccidental(r,new s.Accidental("b"));continue}g.addAccidental(r,new s.Accidental(h[r]))}const e=n[r].sourceNote.TremoloStrokes;if(e>0){const t=new s.Tremolo(e);t.extra_stroke_scale=i.TremoloStrokeScale,t.y_spacing_scale=i.TremoloYSpacingScale,g.addModifier(r,t)}}if(.25===L.Length.RealValue&&L.Notehead&&!1===L.Notehead.Filled){const e=g.getKeyProps();for(let t=0;t<e.length;t++)e[t].code="v81"}for(let s=0,r=v;s<r;++s)g.addDotToAll();return g}static generateArticulations(e,t,n){if(e&&"GhostNote"!==e.getAttribute("type"))for(const i of t.sourceNote.ParentVoiceEntry.Articulations){let r,a=s.Modifier.Position.ABOVE;if(e.getStemDirection()===s.Stem.UP&&(a=s.Modifier.Position.BELOW,n.ArticulationAboveNoteForStemUp)){const e=t.parentVoiceEntry.parentStaffEntry.parentMeasure,n=null===e||void 0===e?void 0:e.ParentStaff,i=null===n||void 0===n?void 0:n.ParentInstrument.Staves;(1===i.length||2===i.length&&n!==i[1])&&(a=s.Modifier.Position.ABOVE)}const o=i.articulationEnum;switch(n.ArticulationPlacementFromXML&&(i.placement===_.PlacementEnum.Above?a=s.Modifier.Position.ABOVE:i.placement===_.PlacementEnum.Below&&(a=s.Modifier.Position.BELOW)),o){case b.ArticulationEnum.accent:{r=new s.Articulation("a>");const e=t.sourceNote.NoteSlurs;for(const i of e)i.StartNote===t.sourceNote&&(i.PlacementXml===_.PlacementEnum.Above?r.setYShift(10*-n.SlurStartArticulationYOffsetOfArticulation):i.PlacementXml===_.PlacementEnum.Below&&r.setYShift(10*n.SlurStartArticulationYOffsetOfArticulation));break}case b.ArticulationEnum.breathmark:r=new s.Articulation("abr"),i.placement===_.PlacementEnum.Above&&(a=s.Modifier.Position.ABOVE),r.breathMarkDistance=n.BreathMarkDistance;break;case b.ArticulationEnum.downbow:r=new s.Articulation("am"),void 0===i.placement&&(a=s.Modifier.Position.ABOVE,i.placement=_.PlacementEnum.Above);break;case b.ArticulationEnum.fermata:r=new s.Articulation("a@a"),a=s.Modifier.Position.ABOVE,i.placement=_.PlacementEnum.Above;break;case b.ArticulationEnum.marcatodown:r=new s.Articulation("a|");break;case b.ArticulationEnum.marcatoup:r=new s.Articulation("a^"),a=s.Modifier.Position.ABOVE;break;case b.ArticulationEnum.invertedfermata:{const e=t.sourceNote.ParentVoiceEntry;if(e!==t.sourceNote.ParentVoiceEntry.ParentSourceStaffEntry.VoiceEntries.last()){e.Articulations=e.Articulations.slice(e.Articulations.indexOf(i)),e.ParentSourceStaffEntry.VoiceEntries.last().Articulations.push(i);continue}r=new s.Articulation("a@u"),a=s.Modifier.Position.BELOW,i.placement=_.PlacementEnum.Below;break}case b.ArticulationEnum.lefthandpizzicato:r=new s.Articulation("a+");break;case b.ArticulationEnum.naturalharmonic:r=new s.Articulation("ah");break;case b.ArticulationEnum.snappizzicato:r=new s.Articulation("ao");break;case b.ArticulationEnum.staccatissimo:r=new s.Articulation("av");break;case b.ArticulationEnum.staccato:r=new s.Articulation("a.");break;case b.ArticulationEnum.tenuto:r=new s.Articulation("a-");break;case b.ArticulationEnum.upbow:r=new s.Articulation("a|"),void 0===i.placement&&(a=s.Modifier.Position.ABOVE,i.placement=_.PlacementEnum.Above);break;case b.ArticulationEnum.strongaccent:r=new s.Articulation("a^")}r&&(r.setPosition(a),e.addModifier(0,r))}}static generateOrnaments(e,t){let n,i=s.Modifier.Position.ABOVE;switch(t.placement===_.PlacementEnum.Below&&(i=s.Modifier.Position.BELOW),t.GetOrnament){case y.OrnamentEnum.DelayedInvertedTurn:n=new s.Ornament("turn_inverted"),n.setDelayed(!0);break;case y.OrnamentEnum.DelayedTurn:n=new s.Ornament("turn"),n.setDelayed(!0);break;case y.OrnamentEnum.InvertedMordent:n=new s.Ornament("mordent"),n.setDelayed(!1);break;case y.OrnamentEnum.InvertedTurn:n=new s.Ornament("turn_inverted"),n.setDelayed(!1);break;case y.OrnamentEnum.Mordent:n=new s.Ornament("mordent_inverted"),n.setDelayed(!1);break;case y.OrnamentEnum.Trill:n=new s.Ornament("tr"),n.setDelayed(!1);break;case y.OrnamentEnum.Turn:n=new s.Ornament("turn"),n.setDelayed(!1);break;default:return void g.default.warn("unhandled OrnamentEnum type: "+t.GetOrnament)}n&&(t.AccidentalBelow!==h.AccidentalEnum.NONE&&n.setLowerAccidental(a.Pitch.accidentalVexflow(t.AccidentalBelow)),t.AccidentalAbove!==h.AccidentalEnum.NONE&&n.setUpperAccidental(a.Pitch.accidentalVexflow(t.AccidentalAbove)),n.setPosition(i),e.addModifier(0,n))}static StrokeTypeFromArpeggioType(e){switch(e){case w.ArpeggioType.ARPEGGIO_DIRECTIONLESS:return s.Stroke.Type.ARPEGGIO_DIRECTIONLESS;case w.ArpeggioType.BRUSH_DOWN:return s.Stroke.Type.BRUSH_UP;case w.ArpeggioType.BRUSH_UP:return s.Stroke.Type.BRUSH_DOWN;case w.ArpeggioType.RASQUEDO_DOWN:return s.Stroke.Type.RASQUEDO_UP;case w.ArpeggioType.RASQUEDO_UP:return s.Stroke.Type.RASQUEDO_DOWN;case w.ArpeggioType.ROLL_DOWN:return s.Stroke.Type.ROLL_UP;case w.ArpeggioType.ROLL_UP:return s.Stroke.Type.ROLL_DOWN;default:return s.Stroke.Type.ARPEGGIO_DIRECTIONLESS}}static CreateTabNote(e){const t=[],n=e.notes.reverse(),i=[],r=e.notes[0].graphicalNoteLength,a=void 0!==e.notes[0].sourceNote.NoteTuplet;let o=T.durations(r,a)[0],l=0,c=!1;const h=e.parentStaffEntry.parentMeasure.parentSourceMeasure.Rules;let u=!1;for(const p of e.notes){var d;const n=p.sourceNote;let r={str:n.StringNumberTab,fret:n.FretNumber};p.sourceNote instanceof E.TabNote||(g.default.info("invalid tab note: ".concat(p.sourceNote.Pitch.ToString()," in measure ").concat(e.parentStaffEntry.parentMeasure.MeasureNumber,", likely missing XML string+fret number.")),r={str:1,fret:0}),h.TabUseXNoteheadShapeForTabNote&&(null===(d=p.sourceNote.Notehead)||void 0===d?void 0:d.Shape)===x.NoteHeadShape.X&&(r.fret="x",u=!0),t.push(r),n.BendArray&&n.BendArray.forEach((function(e){let t;const n=e.bendalter-r.fret;t=n>1?"Full":1===n?"1/2":"1/4","up"===e.direction?i.push({type:s.Bend.UP,text:t,width:10}):i.push({type:s.Bend.DOWN,text:t,width:10})})),n.VibratoStroke&&(c=!0),l<p.numberOfDots&&(l=p.numberOfDots)}for(let s=0,p=l;s<p;++s)o+="d";const f=new s.TabNote({duration:o,positions:t});u&&(f.render_options.scale=h.TabXNoteheadScale,f.render_options.TabUseXNoteheadAlternativeGlyph=h.TabUseXNoteheadAlternativeGlyph,f.updateWidth()),h.UsePageBackgroundColorForTabNotes&&(f.BackgroundColor=h.PageBackgroundColor);for(let s=0,p=n.length;s<p;s+=1)n[s].setIndex(f,s);return i.forEach((function(e){e.type===s.Bend.UP?f.addModifier(new s.Bend(e.text,!1)):f.addModifier(new s.Bend(e.text,!0))})),c&&f.addModifier(new s.Vibrato),f}static Clef(e){let t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";switch("default"!==i&&"small"!==i&&(g.default.warn('Invalid VexFlow clef size "'.concat(i,'" specified. Using "default".')),i="default"),e.ClefType){case r.ClefEnum.G:switch(e.Line){case 1:t="french";break;case 2:t="treble";break;default:t="treble",g.default.error("Clef ".concat(r.ClefEnum[e.ClefType]," on line ").concat(e.Line,' not supported by VexFlow. Using default value "').concat(t,'".'))}break;case r.ClefEnum.F:switch(e.Line){case 4:t="bass";break;case 3:t="baritone-f";break;case 5:t="subbass";break;default:t="bass",g.default.error("Clef ".concat(r.ClefEnum[e.ClefType]," on line ").concat(e.Line,' not supported by VexFlow. Using default value "').concat(t,'".'))}break;case r.ClefEnum.C:switch(e.Line){case 3:t="alto";break;case 4:t="tenor";break;case 1:t="soprano";break;case 2:t="mezzo-soprano";break;default:t="alto",g.default.error("Clef ".concat(r.ClefEnum[e.ClefType]," on line ").concat(e.Line,' not supported by VexFlow. Using default value "').concat(t,'".'))}break;case r.ClefEnum.percussion:t="percussion";break;case r.ClefEnum.TAB:t="treble";break;default:g.default.info("bad clef type: "+e.ClefType),t="treble"}return 1===e.OctaveOffset&&"bass"!==t?n="8va":-1===e.OctaveOffset&&(n="8vb"),{type:t,size:i,annotation:n}}static TimeSignature(e){let t;switch(e.SymbolEnum){case l.RhythmSymbolEnum.NONE:t=e.Rhythm.Numerator+"/"+e.Rhythm.Denominator;break;case l.RhythmSymbolEnum.COMMON:t="C";break;case l.RhythmSymbolEnum.CUT:t="C|"}return new s.TimeSignature(t)}static keySignature(e){if(!e)return;let t;switch(e.Mode){case c.KeyEnum.minor:t=T.minorMap[e.Key]+"m";break;case c.KeyEnum.major:case c.KeyEnum.none:t=T.majorMap[e.Key];break;default:t="C"}return t}static line(e,t){switch(e){case d.SystemLinesEnum.SingleThin:return t===v.SystemLinePosition.MeasureBegin?s.StaveConnector.type.SINGLE:s.StaveConnector.type.SINGLE_RIGHT;case d.SystemLinesEnum.DoubleThin:return s.StaveConnector.type.THIN_DOUBLE;case d.SystemLinesEnum.ThinBold:return s.StaveConnector.type.BOLD_DOUBLE_RIGHT;case d.SystemLinesEnum.BoldThinDots:return s.StaveConnector.type.BOLD_DOUBLE_LEFT;case d.SystemLinesEnum.DotsThinBold:case d.SystemLinesEnum.DotsBoldBoldDots:return s.StaveConnector.type.BOLD_DOUBLE_RIGHT;case d.SystemLinesEnum.None:return s.StaveConnector.type.NONE}}static font(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.FontStyles.Regular,n=(arguments.length>2&&void 0!==arguments[2]||p.Fonts.TimesNewRoman,arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0),i="normal",s="normal",r="'".concat((arguments.length>3?arguments[3]:void 0).DefaultFontFamily,"'");switch(t){case f.FontStyles.Bold:s="bold";break;case f.FontStyles.Italic:i="italic";break;case f.FontStyles.BoldItalic:i="italic",s="bold";case f.FontStyles.Underlined:}return p.Fonts.Kokila,n&&"default"!==n&&(r="'".concat(n,"'")),i+" "+s+" "+Math.floor(e)+"px "+r}static fontStyle(e){switch(e){case f.FontStyles.Bold:return"bold";case f.FontStyles.Italic:return"italic";case f.FontStyles.BoldItalic:return"italic bold";default:return"normal"}}static style(e){return m.OUTLINE_AND_FILL_STYLE_DICT.getValue(e)}}t.VexFlowConverter=T,T.majorMap={"-1":"F","-2":"Bb","-3":"Eb","-4":"Ab","-5":"Db","-6":"Gb","-7":"Cb","-8":"Fb",0:"C",1:"G",2:"D",3:"A",4:"E",5:"B",6:"F#",7:"C#",8:"G#"},T.minorMap={"-1":"D","-2":"G","-3":"C","-4":"F","-5":"Bb","-6":"Eb","-7":"Ab","-8":"Db",0:"A",1:"E",2:"B",3:"F#",4:"C#",5:"G#",6:"D#",7:"A#",8:"E#"}},6030:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LyricsReader=void 0;const i=n(649),s=n(2317),r=n(9767);t.LyricsReader=class{constructor(e){this.openLyricWords={},this.musicSheet=e}addLyricEntry(e,t){if(e){const a=e;for(let o=0,l=a.length;o<l;++o){const l=a[o];try{let e="single";if(l.element("text")){let r=l.element("text");if(l.element("syllabic")&&(e=l.element("syllabic").value),r){var n;let a="";const o=l.elements();for(const e of o)"text"!==e.name&&"elision"!==e.name||(a+=e.value);if(a=a.replace("  "," "),void 0!==l.element("elision")&&"-"===a){const t=l.elements();let n,i,s=0;for(let e=0;e<t.length;e++)if("elision"===t[e].name){s=e;break}if(s>0)for(let e=s;e<t.length;e++){const s=t[e];"text"===s.name&&(n=s),"syllabic"===s.name&&(i=s)}void 0!==n&&i&&(r=n,e="middle")}let c,h="1";if(void 0!==l.attributes()&&l.attribute("number")&&(h=l.attribute("number").value),"single"===e||"end"===e){if(this.openLyricWords[h]){this.currentLyricWord=this.openLyricWords[h];const e=this.currentLyricWord.Syllables.length;c=new s.LyricsEntry(a,h,this.currentLyricWord,t,e),this.currentLyricWord.Syllables.push(c),delete this.openLyricWords[h],this.currentLyricWord=void 0}else c=new s.LyricsEntry(a,h,void 0,t);c.extend=void 0!==l.element("extend")}else if("begin"===e)this.openLyricWords[h]&&(delete this.openLyricWords[h],this.currentLyricWord=void 0),this.currentLyricWord=new i.LyricWord,this.openLyricWords[h]=this.currentLyricWord,c=new s.LyricsEntry(a,h,this.currentLyricWord,t,0),this.currentLyricWord.Syllables.push(c);else if("middle"===e)if(this.openLyricWords[h]){this.currentLyricWord=this.openLyricWords[h];const e=this.currentLyricWord.Syllables.length;c=new s.LyricsEntry(a,h,this.currentLyricWord,t,e),this.currentLyricWord.Syllables.push(c)}else c=new s.LyricsEntry(a,h,void 0,t);c&&(t.LyricsEntries[h]||(t.LyricsEntries.setValue(h,c),null!==(n=t.ParentSourceStaffEntry)&&void 0!==n&&null!==(n=n.VerticalContainerParent)&&void 0!==n&&n.ParentMeasure&&(t.ParentSourceStaffEntry.VerticalContainerParent.ParentMeasure.hasLyrics=!0)),t.ParentVoice.Parent.LyricVersesNumbers.includes(h)||t.ParentVoice.Parent.LyricVersesNumbers.push(h))}}}catch(e){const t=r.ITextTranslation.translateText("ReaderErrorMessages/LyricError","Error while reading lyric entry.");this.musicSheet.SheetErrors.pushMeasureError(t);continue}}}}}},6119:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4831),s=function(){function e(e){this.table={},this.nElements=0,this.toStr=e||i.defaultToString}return e.prototype.getValue=function(e){var t=this.table["$"+this.toStr(e)];if(!i.isUndefined(t))return t.value},e.prototype.setValue=function(e,t){if(!i.isUndefined(e)&&!i.isUndefined(t)){var n,s="$"+this.toStr(e),r=this.table[s];return i.isUndefined(r)?(this.nElements++,n=void 0):n=r.value,this.table[s]={key:e,value:t},n}},e.prototype.remove=function(e){var t="$"+this.toStr(e),n=this.table[t];if(!i.isUndefined(n))return delete this.table[t],this.nElements--,n.value},e.prototype.keys=function(){var e=[];for(var t in this.table)if(i.has(this.table,t)){var n=this.table[t];e.push(n.key)}return e},e.prototype.values=function(){var e=[];for(var t in this.table)if(i.has(this.table,t)){var n=this.table[t];e.push(n.value)}return e},e.prototype.forEach=function(e){for(var t in this.table)if(i.has(this.table,t)){var n=this.table[t];if(!1===e(n.key,n.value))return}},e.prototype.containsKey=function(e){return!i.isUndefined(this.getValue(e))},e.prototype.clear=function(){this.table={},this.nElements=0},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){var e="{";return this.forEach((function(t,n){e+="\n\t"+t+" : "+n})),e+"\n}"},e}();t.default=s},6173:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowTabMeasure=void 0;var s=i(n(3206)).default.Flow;const r=n(5246),a=n(6014),o=i(n(3065)),l=n(164);class c extends r.VexFlowMeasure{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0),this.isTabMeasure=!0}resetLayout(){var e;const t=null!==(e=this.ParentStaff.StafflineCount)&&void 0!==e?e:6;this.stave=new s.TabStave(0,0,0,{space_above_staff_ln:0,space_below_staff_ln:0,num_lines:t}),this.updateInstructionWidth()}graphicalMeasureCreatedCalculations(){for(let t=0,n=this.staffEntries.length;t<n;++t){const e=this.staffEntries[t];for(const t of e.graphicalVoiceEntries)if(t.notes[0].sourceNote.isRest()){const e=a.VexFlowConverter.GhostNotes(t.notes[0].sourceNote.Length);t.vfStaveNote=e[0],t.vfGhostNotes=e}else t.vfStaveNote=a.VexFlowConverter.CreateTabNote(t)}this.finalizeTuplets();const e=this.getVoicesWithinMeasure();for(const t of e){if(!t)continue;this.vfVoices[t.VoiceId]=new s.Voice({beat_value:this.parentSourceMeasure.Duration.Denominator,num_beats:this.parentSourceMeasure.Duration.Numerator,resolution:s.RESOLUTION}).setMode(s.Voice.Mode.SOFT);const e=this.getRestFilledVexFlowStaveNotesPerVoice(t);for(const n of e){if(n.parentVoiceEntry&&n.parentVoiceEntry.IsGrace&&!n.parentVoiceEntry.GraceAfterMainNote)continue;const e=n;if(0!==n.notes.length&&n.notes[0]&&n.notes[0].sourceNote.PrintObject){if(n.parentVoiceEntry&&n.parentVoiceEntry.Arpeggio){const t=n.parentVoiceEntry.Arpeggio;if(n.notes&&n.notes.length>1){const n=a.VexFlowConverter.StrokeTypeFromArpeggioType(t.type),i=new s.Stroke(n,{all_voices:this.rules.ArpeggiosGoAcrossVoices});this.rules.RenderArpeggios&&e.vfStaveNote.addStroke(0,i)}else o.default.debug("[OSMD] arpeggio in measure ".concat(this.MeasureNumber," could not be drawn.\n                        voice entry had less than two notes, arpeggio is likely between voice entries, not currently supported in Vexflow."))}if(e.vfGhostNotes)for(const n of e.vfGhostNotes)this.vfVoices[t.VoiceId].addTickable(n);else this.vfVoices[t.VoiceId].addTickable(e.vfStaveNote)}else if(e.vfGhostNotes)for(const n of e.vfGhostNotes)this.vfVoices[t.VoiceId].addTickable(n);else this.vfVoices[t.VoiceId].addTickable(e.vfStaveNote)}}}addClefAtBegin(e){e.ClefType===l.ClefEnum.TAB&&super.addClefAtBegin(e)}draw(e){super.draw(e);const t=this.parentSourceMeasure;t.multipleRestMeasures&&this.rules.RenderMultipleRestMeasures&&(this.multiRestElement=new s.MultiMeasureRest(t.multipleRestMeasures,{}),this.multiRestElement.setStave(this.stave),this.multiRestElement.setContext(e),this.multiRestElement.draw())}}t.VexFlowTabMeasure=c},6229:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Slur=void 0;const i=n(2561);t.Slur=class{constructor(){}get StartNote(){return this.startNote}set StartNote(e){this.startNote=e}get EndNote(){return this.endNote}set EndNote(e){this.endNote=e}startNoteHasMoreStartingSlurs(){if(!this.startNote)return!1;for(let e=0,t=this.startNote.NoteSlurs.length;e<t;++e){const t=this.startNote.NoteSlurs[e];if(t!==this&&t.StartNote===this.startNote)return!0}return!1}endNoteHasMoreEndingSlurs(){if(!this.endNote)return!1;for(let e=0,t=this.endNote.NoteSlurs.length;e<t;++e){const t=this.endNote.NoteSlurs[e];if(t!==this&&t.EndNote===this.endNote)return!0}return!1}isCrossed(){return this.startNote.ParentStaffEntry.ParentStaff!==this.endNote.ParentStaffEntry.ParentStaff}isSlurLonger(){if(!this.endNote||!this.startNote)return!1;const e=i.Fraction.minus(this.endNote.getAbsoluteTimestamp(),this.startNote.getAbsoluteTimestamp());for(let t=0,n=this.startNote.NoteSlurs.length;t<n;++t){const n=this.startNote.NoteSlurs[t];if(n!==this&&void 0!==n.EndNote&&void 0!==n.StartNote&&-1===i.Fraction.minus(n.EndNote.getAbsoluteTimestamp(),n.StartNote.getAbsoluteTimestamp()).CompareTo(e))return!0}for(let t=0,n=this.endNote.NoteSlurs.length;t<n;++t){const n=this.endNote.NoteSlurs[t];if(n!==this&&void 0!==n.EndNote&&void 0!==n.StartNote&&i.Fraction.minus(n.EndNote.getAbsoluteTimestamp(),n.StartNote.getAbsoluteTimestamp()).CompareTo(e))return!0}return!1}}},6302:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RepetitionCalculator=void 0;const i=n(1645),s=n(1645),r=n(7307);t.RepetitionCalculator=class{constructor(){this.repetitionInstructions=[]}calculateRepetitions(e,t){this.musicSheet=e,this.repetitionInstructions=t;const n=this.musicSheet.SourceMeasures;for(let i=0,s=this.repetitionInstructions.length;i<s;++i){const e=this.repetitionInstructions[i];this.currentMeasureIndex=e.measureIndex,this.currentMeasure=n[this.currentMeasureIndex],this.handleRepetitionInstructions(e)}for(let i=0,r=this.musicSheet.SourceMeasures.length;i<r;++i){const e=this.musicSheet.SourceMeasures[i];e.FirstRepetitionInstructions.length>1&&e.FirstRepetitionInstructions.sort(s.RepetitionInstructionComparer.Compare),e.LastRepetitionInstructions.length>1&&e.LastRepetitionInstructions.sort(s.RepetitionInstructionComparer.Compare)}}handleRepetitionInstructions(e){if(!this.currentMeasure)return!1;switch(e.type){case i.RepetitionInstructionEnum.StartLine:this.currentMeasure.FirstRepetitionInstructions.push(e);break;case i.RepetitionInstructionEnum.BackJumpLine:this.currentMeasure.LastRepetitionInstructions.push(e);break;case i.RepetitionInstructionEnum.Ending:if(e.alignment===i.AlignmentType.Begin)this.currentMeasure.FirstRepetitionInstructions.push(e);else for(let t=0,n=e.endingIndices.length;t<n;++t)this.currentMeasure.LastRepetitionInstructions.push(e);break;case i.RepetitionInstructionEnum.Segno:this.currentMeasure.FirstRepetitionInstructions.push(e);break;case i.RepetitionInstructionEnum.Fine:case i.RepetitionInstructionEnum.ToCoda:case i.RepetitionInstructionEnum.Coda:case i.RepetitionInstructionEnum.DaCapo:case i.RepetitionInstructionEnum.DalSegno:case i.RepetitionInstructionEnum.DalSegnoAlFine:case i.RepetitionInstructionEnum.DaCapoAlFine:case i.RepetitionInstructionEnum.DalSegnoAlCoda:case i.RepetitionInstructionEnum.DaCapoAlCoda:this.currentMeasure.LastRepetitionInstructions.push(e);break;case i.RepetitionInstructionEnum.None:break;default:throw new r.ArgumentOutOfRangeException("currentRepetitionInstruction")}return!0}}},6332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6352:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(1272),t),s(n(9099),t),s(n(5749),t),s(n(469),t),s(n(302),t),s(n(7503),t)},6362:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PlacementEnum=t.AbstractExpression=void 0,t.AbstractExpression=class{constructor(e){this.placement=e}static isStringInStringList(e,t){for(let n=0,i=e.length;n<i;++n){const i=e[n];if(t.toLowerCase()===i.toLowerCase().trim())return!0}return!1}get Placement(){return this.placement}static PlacementEnumFromString(e){switch(e.toLowerCase()){case"above":return n.Above;case"below":return n.Below;case"aboveorbelow":case"abovebelow":return n.AboveOrBelow;case"left":return n.Left;case"right":return n.Right;default:return n.NotYetDefined}}},function(e){e[e.Above=0]="Above",e[e.Below=1]="Below",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.NotYetDefined=4]="NotYetDefined",e[e.AboveOrBelow=5]="AboveOrBelow"}(n||(t.PlacementEnum=n={}))},6438:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ColDirEnum=t.BoundingBox=void 0;const s=i(n(3065)),r=n(7307),a=n(9409),o=n(6864),l=n(200),c=n(7741);var h;t.BoundingBox=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.isSymbol=!1,this.relativePositionHasBeenSet=!1,this.xBordersHaveBeenSet=!1,this.yBordersHaveBeenSet=!1,this.absolutePosition=new a.PointF2D,this.relativePosition=new a.PointF2D,this.size=new o.SizeF2D,this.marginSize=new o.SizeF2D,this.upperLeftCorner=new a.PointF2D,this.upperLeftMarginCorner=new a.PointF2D,this.borderLeft=0,this.borderRight=0,this.borderTop=0,this.borderBottom=0,this.borderMarginLeft=0,this.borderMarginRight=0,this.borderMarginTop=0,this.borderMarginBottom=0,this.childElements=[],this.parent=t,this.dataObject=e,this.isSymbol=n,this.xBordersHaveBeenSet=!1,this.yBordersHaveBeenSet=!1,t&&(this.Parent=t)}get RelativePositionHasBeenSet(){return this.relativePositionHasBeenSet}get XBordersHaveBeenSet(){return this.xBordersHaveBeenSet}set XBordersHaveBeenSet(e){this.xBordersHaveBeenSet=e}get YBordersHaveBeenSet(){return this.yBordersHaveBeenSet}set YBordersHaveBeenSet(e){this.yBordersHaveBeenSet=e}get AbsolutePosition(){return this.absolutePosition}set AbsolutePosition(e){this.absolutePosition=e}get RelativePosition(){return this.relativePosition}set RelativePosition(e){this.relativePosition=e,this.relativePositionHasBeenSet=!0}get Size(){return this.size}set Size(e){this.size=e}get MarginSize(){return this.marginSize}get UpperLeftCorner(){return this.upperLeftCorner}get UpperLeftMarginCorner(){return this.upperLeftMarginCorner}get BorderLeft(){return this.borderLeft}set BorderLeft(e){this.borderLeft=e,this.calculateRectangle()}get BorderRight(){return this.borderRight}set BorderRight(e){this.borderRight=e,this.calculateRectangle()}get BorderTop(){return this.borderTop}set BorderTop(e){this.borderTop=e,this.calculateRectangle()}get BorderBottom(){return this.borderBottom}set BorderBottom(e){this.borderBottom=e,this.calculateRectangle()}get BorderMarginLeft(){return this.borderMarginLeft>this.borderLeft?this.borderLeft:this.borderMarginLeft}set BorderMarginLeft(e){this.borderMarginLeft=e,this.calculateMarginRectangle()}get BorderMarginRight(){return this.borderMarginRight<this.borderRight?this.borderRight:this.borderMarginRight}set BorderMarginRight(e){this.borderMarginRight=e,this.calculateMarginRectangle()}get BorderMarginTop(){return this.borderMarginTop>this.borderTop?this.borderTop:this.borderMarginTop}set BorderMarginTop(e){this.borderMarginTop=e,this.calculateMarginRectangle()}get BorderMarginBottom(){return this.borderMarginBottom<this.borderBottom?this.borderBottom:this.borderMarginBottom}set BorderMarginBottom(e){this.borderMarginBottom=e,this.calculateMarginRectangle()}get BoundingRectangle(){return this.boundingRectangle}get BoundingMarginRectangle(){return this.boundingMarginRectangle}get ChildElements(){return this.childElements}set ChildElements(e){this.childElements=e}get Parent(){return this.parent}set Parent(e){if(this.parent){const e=this.parent.ChildElements.indexOf(this,0);e>-1&&this.parent.ChildElements.splice(e,1)}this.parent=e,this.parent.ChildElements.indexOf(this)>-1?s.default.error("BoundingBox of "+this.dataObject.constructor.name+" already in children list of "+this.parent.dataObject.constructor.name+"'s BoundingBox"):this.parent.ChildElements.push(this)}get DataObject(){return this.dataObject}get Center(){return new a.PointF2D(this.RelativePosition.x+(this.BorderMarginRight+this.BorderMarginLeft),this.RelativePosition.y+(this.BorderMarginBottom+this.BorderMarginTop))}setAbsolutePositionFromParent(){this.parent?(this.absolutePosition.x=this.parent.AbsolutePosition.x+this.relativePosition.x,this.absolutePosition.y=this.parent.AbsolutePosition.y+this.relativePosition.y):this.absolutePosition=this.relativePosition}calculateAbsolutePosition(){this.absolutePosition.x=this.relativePosition.x,this.absolutePosition.y=this.relativePosition.y;let e=this.parent;for(;e;)this.absolutePosition.x+=e.relativePosition.x,this.absolutePosition.y+=e.relativePosition.y,e=e.parent}calculateAbsolutePositionsRecursiveWithoutTopelement(){this.absolutePosition.x=0,this.absolutePosition.y=0;for(let e=0,t=this.ChildElements.length;e<t;++e)this.ChildElements[e].calculateAbsolutePositionsRecursive(this.absolutePosition.x,this.absolutePosition.y)}calculateAbsolutePositionsRecursive(e,t){this.absolutePosition.x=this.relativePosition.x+e,this.absolutePosition.y=this.relativePosition.y+t;for(let n=0,i=this.ChildElements.length;n<i;++n)this.ChildElements[n].calculateAbsolutePositionsRecursive(this.absolutePosition.x,this.absolutePosition.y)}calculateAbsolutePositionsOfChildren(){for(let e=0,t=this.ChildElements.length;e<t;++e)this.ChildElements[e].calculateAbsolutePositionsRecursive(this.absolutePosition.x,this.absolutePosition.y)}calculateBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===this.childElements.length)return;for(let c=0,h=this.ChildElements.length;c<h;++c){const t=this.ChildElements[c];let n=!0;for(const i of e){const e=t.DataObject;if(e.isInstanceOfClass&&e.isInstanceOfClass(i)){n=!1;break}}n&&t.calculateBoundingBox(e)}let t=Number.MAX_VALUE,n=Number.MIN_VALUE,i=Number.MAX_VALUE,s=Number.MIN_VALUE,r=Number.MAX_VALUE,a=Number.MIN_VALUE,o=Number.MAX_VALUE,l=Number.MIN_VALUE;this.isSymbol&&(t=this.borderLeft,n=this.borderRight,i=this.borderTop,s=this.borderBottom,r=this.borderMarginLeft,a=this.borderMarginRight,o=this.borderMarginTop,l=this.borderMarginBottom);for(let c=0,h=this.ChildElements.length;c<h;++c){const e=this.ChildElements[c];t=Math.min(t,e.relativePosition.x+e.borderLeft),n=Math.max(n,e.relativePosition.x+e.borderRight),i=Math.min(i,e.relativePosition.y+e.borderTop),s=Math.max(s,e.relativePosition.y+e.borderBottom),r=Math.min(r,e.relativePosition.x+e.borderMarginLeft),a=Math.max(a,e.relativePosition.x+e.borderMarginRight),o=Math.min(o,e.relativePosition.y+e.borderMarginTop),l=Math.max(l,e.relativePosition.y+e.borderMarginBottom)}this.borderLeft=t,this.borderRight=n,this.borderTop=i,this.borderBottom=s,this.borderMarginLeft=r,this.borderMarginRight=a,this.borderMarginTop=o,this.borderMarginBottom=l,this.calculateRectangle(),this.calculateMarginRectangle(),this.xBordersHaveBeenSet=!0,this.yBordersHaveBeenSet=!0}calculateTopBottomBorders(){if(0===this.childElements.length)return;for(let s=0,r=this.ChildElements.length;s<r;++s)this.ChildElements[s].calculateTopBottomBorders();let e=Number.MAX_VALUE,t=Number.MIN_VALUE,n=Number.MAX_VALUE,i=Number.MIN_VALUE;this.yBordersHaveBeenSet&&(e=this.borderTop,t=this.borderBottom,n=this.borderMarginTop,i=this.borderMarginBottom);for(let s=0,r=this.ChildElements.length;s<r;++s){const r=this.ChildElements[s];e=Math.min(e,r.relativePosition.y+r.borderTop),t=Math.max(t,r.relativePosition.y+r.borderBottom),n=Math.min(n,r.relativePosition.y+r.borderMarginTop),i=Math.max(i,r.relativePosition.y+r.borderMarginBottom)}this.borderTop=e,this.borderBottom=t,this.borderMarginTop=n,this.borderMarginBottom=i,this.calculateRectangle(),this.calculateMarginRectangle()}computeNonOverlappingPositionWithMargin(e,t,n){this.RelativePosition=new a.PointF2D(n.x,n.y),this.setAbsolutePositionFromParent();let i=0,s=!1;do{switch(t){case h.Left:case h.Right:i=this.relativePosition.x,e.calculateMarginPositionAlongDirection(this,t),s=Math.abs(i-this.relativePosition.x)>.001;break;case h.Up:case h.Down:i=this.relativePosition.y,e.calculateMarginPositionAlongDirection(this,t),s=Math.abs(i-this.relativePosition.y)>.001;break;default:throw new r.ArgumentOutOfRangeException("direction")}}while(s)}collisionDetection(e){const t=Math.min(this.AbsolutePosition.x+this.borderRight,e.absolutePosition.x+e.borderRight)-Math.max(this.AbsolutePosition.x+this.borderLeft,e.absolutePosition.x+e.borderLeft),n=Math.min(this.AbsolutePosition.y+this.borderBottom,e.absolutePosition.y+e.borderBottom)-Math.max(this.AbsolutePosition.y+this.borderTop,e.absolutePosition.y+e.borderTop);return t>=0&&n>=0}liesInsideBorders(e){const t=this.AbsolutePosition.x+this.borderLeft<=e.absolutePosition.x+e.borderLeft&&e.absolutePosition.x+e.borderLeft<=this.AbsolutePosition.x+this.borderRight,n=this.AbsolutePosition.x+this.borderLeft<=e.absolutePosition.x+e.borderRight&&e.absolutePosition.x+e.borderRight<=this.AbsolutePosition.x+this.borderRight;if(t&&n){const t=this.AbsolutePosition.y+this.borderTop<=e.absolutePosition.y+e.borderTop&&e.absolutePosition.y+e.borderTop<=this.AbsolutePosition.y+this.borderBottom,n=this.AbsolutePosition.y+this.borderTop<=e.absolutePosition.y+e.borderBottom&&e.absolutePosition.y+e.borderBottom<=this.AbsolutePosition.y+this.borderBottom;if(t&&n)return!0}return!1}pointLiesInsideBorders(e){return this.AbsolutePosition.x+this.borderLeft<=e.x&&e.x<=this.AbsolutePosition.x+this.borderRight&&this.AbsolutePosition.y+this.borderTop<=e.y&&e.y<=this.AbsolutePosition.y+this.borderBottom}marginCollisionDetection(e){const t=Math.min(this.AbsolutePosition.x+this.borderMarginRight,e.absolutePosition.x+e.borderMarginRight)-Math.max(this.AbsolutePosition.x+this.borderMarginLeft,e.absolutePosition.x+e.borderMarginLeft),n=Math.min(this.AbsolutePosition.y+this.borderMarginBottom,e.absolutePosition.y+e.borderMarginBottom)-Math.max(this.AbsolutePosition.y+this.borderMarginTop,e.absolutePosition.y+e.borderMarginTop);return t>0&&n>0}liesInsideMargins(e){const t=this.AbsolutePosition.x+this.borderMarginLeft<=e.absolutePosition.x+e.borderMarginLeft&&e.absolutePosition.x+e.borderMarginLeft<=this.AbsolutePosition.x+this.borderMarginRight,n=this.AbsolutePosition.x+this.borderMarginLeft<=e.absolutePosition.x+e.borderMarginRight&&e.absolutePosition.x+e.borderMarginRight<=this.AbsolutePosition.x+this.borderMarginRight;if(t&&n){const t=this.AbsolutePosition.y+this.borderMarginTop<=e.absolutePosition.y+e.borderMarginTop&&e.absolutePosition.y+e.borderMarginTop<=this.AbsolutePosition.y+this.borderMarginBottom,n=this.AbsolutePosition.y+this.borderMarginTop<=e.absolutePosition.y+e.borderMarginBottom&&e.absolutePosition.y+e.borderMarginBottom<=this.AbsolutePosition.y+this.borderMarginBottom;if(t&&n)return!0}return!1}pointLiesInsideMargins(e){return this.AbsolutePosition.x+this.borderMarginLeft<=e.x&&e.x<=this.AbsolutePosition.x+this.borderMarginRight&&this.AbsolutePosition.y+this.borderMarginTop<=e.y&&e.y<=this.AbsolutePosition.y+this.borderMarginBottom}computeNonOverlappingPosition(e,t,n){this.RelativePosition=new a.PointF2D(n.x,n.y),this.setAbsolutePositionFromParent();let i=0,s=!1;do{switch(t){case h.Left:case h.Right:i=this.relativePosition.x,e.calculatePositionAlongDirection(this,t),s=Math.abs(i-this.relativePosition.x)>1e-4;break;case h.Up:case h.Down:i=this.relativePosition.y,e.calculatePositionAlongDirection(this,t),s=Math.abs(i-this.relativePosition.y)>1e-4;break;default:throw new r.ArgumentOutOfRangeException("direction")}}while(s)}getClickedObjectOfType(e){const t=this.dataObject;if(this.pointLiesInsideBorders(e)&&t)return t;for(let n=0,i=this.childElements.length;n<i;++n){const t=this.childElements[n].getClickedObjectOfType(e);if(t)return t}}getObjectsInRegion(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.GraphicalObject.name,i=[];for(const s of this.childElements)i=i.concat(s.getObjectsInRegion(e,t,n));return this.dataObject&&this.dataObject.isInstanceOfClass(n)&&(t?e.liesInsideBorders(this)&&i.push(this.dataObject):e.collisionDetection(this)&&i.push(this.dataObject)),i}calculateRectangle(){this.upperLeftCorner=new a.PointF2D(this.BorderLeft,this.BorderTop),this.size=new o.SizeF2D(this.BorderRight-this.BorderLeft,this.BorderBottom-this.BorderTop),this.boundingRectangle=l.RectangleF2D.createFromLocationAndSize(this.upperLeftCorner,this.size)}calculateMarginRectangle(){this.upperLeftMarginCorner=new a.PointF2D(this.BorderMarginLeft,this.BorderMarginTop),this.marginSize=new o.SizeF2D(this.BorderMarginRight-this.BorderMarginLeft,this.BorderMarginBottom-this.BorderMarginTop),this.boundingMarginRectangle=l.RectangleF2D.createFromLocationAndSize(this.upperLeftMarginCorner,this.marginSize)}calculateMarginPositionAlongDirection(e,t){if(this!==e){if(this.isSymbol&&this.marginCollisionDetection(e)){let n=0;switch(t){case h.Left:return n=this.absolutePosition.x+this.borderMarginLeft-(e.absolutePosition.x+e.borderMarginRight),e.relativePosition.x+=n,void(e.absolutePosition.x+=n);case h.Right:return n=this.absolutePosition.x+this.borderMarginRight-(e.absolutePosition.x+e.borderMarginLeft),e.relativePosition.x+=n,void(e.absolutePosition.x+=n);case h.Up:return n=this.absolutePosition.y+this.borderMarginTop-(e.absolutePosition.y+e.borderMarginBottom),e.relativePosition.y+=n,void(e.absolutePosition.y+=n);case h.Down:return n=this.absolutePosition.y+this.borderMarginBottom-(e.absolutePosition.y+e.borderMarginTop),e.relativePosition.y+=n,void(e.absolutePosition.y+=n);default:throw new r.ArgumentOutOfRangeException("direction")}}for(let n=0,i=this.ChildElements.length;n<i;++n)this.ChildElements[n].calculateMarginPositionAlongDirection(e,t)}}calculatePositionAlongDirection(e,t){if(this!==e){if(this.isSymbol&&this.collisionDetection(e)){let n;switch(t){case h.Left:return n=this.absolutePosition.x+this.borderLeft-(e.absolutePosition.x+e.borderRight),e.relativePosition.x+=n,void(e.absolutePosition.x+=n);case h.Right:return n=this.absolutePosition.x+this.borderRight-(e.absolutePosition.x+e.borderLeft),e.relativePosition.x+=n,void(e.absolutePosition.x+=n);case h.Up:return n=this.absolutePosition.y+this.borderTop-(e.absolutePosition.y+e.borderBottom),e.relativePosition.y+=n,void(e.absolutePosition.y+=n);case h.Down:return n=this.absolutePosition.y+this.borderBottom-(e.absolutePosition.y+e.borderTop),e.relativePosition.y+=n,void(e.absolutePosition.y+=n);default:throw new r.ArgumentOutOfRangeException("direction")}}for(let n=0,i=this.ChildElements.length;n<i;++n)this.ChildElements[n].calculatePositionAlongDirection(e,t)}}},function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Up=2]="Up",e[e.Down=3]="Down",e[e.NotYetDefined=4]="NotYetDefined"}(h||(t.ColDirEnum=h={}))},6452:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalLine=void 0;const i=n(2683);t.GraphicalLine=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.OutlineAndFillStyleEnum.BaseWritingColor,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.start=e,this.end=t,this.width=n,this.styleId=s,this.colorHex=r}get Start(){return this.start}set Start(e){this.start=e}get End(){return this.end}set End(e){this.end=e}get Width(){return this.width}set Width(e){this.width=e}}},6597:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cursor=void 0;const i=n(2561),r=n(624);t.Cursor=class{constructor(e,t,n){this.hidden=!0,this.currentPageNumber=1,this.skipInvisibleNotes=!0,this.container=e,this.openSheetMusicDisplay=t,this.rules=this.openSheetMusicDisplay.EngravingRules,this.cursorOptions=n;let i=0;for(this.cursorElementId="cursorImg-0";document.getElementById(this.cursorElementId);)i++,this.cursorElementId="cursorImg-".concat(i);const s=document.createElement("img");s.id=this.cursorElementId,s.style.position="absolute",!0===this.cursorOptions.follow?(this.wantedZIndex="-1",s.style.zIndex=this.wantedZIndex):(this.wantedZIndex="-2",s.style.zIndex=this.wantedZIndex),this.cursorElement=s,this.container.appendChild(s)}adjustToBackgroundColor(){let e;e=this.rules.PageBackgroundColor?"1":this.wantedZIndex,this.cursorElement.style.zIndex=e}init(e,t){this.manager=e,this.graphic=t,this.reset(),this.hidden=!0,this.hide()}show(){this.hidden=!1,this.update(),this.adjustToBackgroundColor()}resetIterator(){if(!this.openSheetMusicDisplay.Sheet||!this.openSheetMusicDisplay.Sheet.SourceMeasures)return void console.log("OSMD.Cursor.resetIterator(): sheet or measures were null/undefined.");const e=this.openSheetMusicDisplay.Sheet.SourceMeasures.length-1;let t=this.rules.MinMeasureToDrawIndex;t=Math.min(t,e);let n=this.rules.MaxMeasureToDrawIndex;if(n=Math.min(n,e),this.openSheetMusicDisplay.Sheet&&this.openSheetMusicDisplay.Sheet.SourceMeasures.length>t&&(this.openSheetMusicDisplay.Sheet.SelectionStart=this.openSheetMusicDisplay.Sheet.SourceMeasures[t].AbsoluteTimestamp),this.openSheetMusicDisplay.Sheet&&this.openSheetMusicDisplay.Sheet.SourceMeasures.length>n){const e=this.openSheetMusicDisplay.Sheet.SourceMeasures[n];this.openSheetMusicDisplay.Sheet.SelectionEnd=i.Fraction.plus(e.AbsoluteTimestamp,e.Duration)}this.iterator=this.manager.getIterator(),this.iterator.SkipInvisibleNotes=this.skipInvisibleNotes}getStaffEntryFromVoiceEntry(e){const t=e.ParentSourceStaffEntry.VerticalContainerParent.ParentMeasure.measureListIndex,n=e.ParentSourceStaffEntry.ParentStaff.idInMusicSheet;return this.graphic.findGraphicalStaffEntryFromMeasureList(n,t,e.ParentSourceStaffEntry)}update(){var e;if(this.hidden||void 0===this.hidden||null===this.hidden)return;this.updateCurrentPage();const t=this.iterator;let n,i=t.CurrentVisibleVoiceEntries(),s=t.CurrentMeasureIndex,r=0,a=0,o=0;if(0!==i.length||t.FrontReached||t.EndReached||(t.moveToPrevious(),i=t.CurrentVisibleVoiceEntries(),t.moveToNext()),t.FrontReached&&0===i.length){t.moveToNext(),i=t.CurrentVisibleVoiceEntries();const e=this.findVisibleGraphicalMeasure(t.CurrentMeasureIndex);r=e.PositionAndShape.AbsolutePosition.x,n=e.ParentMusicSystem,t.moveToPrevious()}else if(t.EndReached||!t.CurrentVoiceEntries||0===i.length){t.moveToPrevious(),i=t.CurrentVisibleVoiceEntries(),s=t.CurrentMeasureIndex;const e=this.findVisibleGraphicalMeasure(t.CurrentMeasureIndex);r=e.PositionAndShape.AbsolutePosition.x+e.PositionAndShape.Size.width,n=e.ParentMusicSystem,t.moveToNext()}else if(t.CurrentMeasure.isReducedToMultiRest){const e=this.findVisibleGraphicalMeasure(t.CurrentMeasureIndex),i=e.parentSourceMeasure.multipleRestMeasures,s=t.CurrentMeasure.multipleRestMeasureNumber/(i+1),a=e.PositionAndShape.Size.width-e.beginInstructionsWidth;r=e.PositionAndShape.AbsolutePosition.x+e.beginInstructionsWidth+s*a,n=e.ParentMusicSystem}else{const e=i.map((e=>this.getStaffEntryFromVoiceEntry(e))).sort(((e,t)=>{var n,i;return(null===e||void 0===e||null===(n=e.PositionAndShape)||void 0===n||null===(n=n.AbsolutePosition)||void 0===n?void 0:n.x)<=(null===t||void 0===t||null===(i=t.PositionAndShape)||void 0===i||null===(i=i.AbsolutePosition)||void 0===i?void 0:i.x)?-1:1}))[0];e&&(r=e.PositionAndShape.AbsolutePosition.x,n=e.parentMeasure.ParentMusicSystem)}if(null===(e=n)||void 0===e||!e.StaffLines[0])return;a=n.PositionAndShape.AbsolutePosition.y+n.StaffLines[0].PositionAndShape.RelativePosition.y;let l=n.PositionAndShape.AbsolutePosition.y;const c=n.StaffLines[n.StaffLines.length-1];c&&(l+=c.PositionAndShape.RelativePosition.y+c.StaffHeight),o=l-a;const h=this.findVisibleGraphicalMeasure(s);if(!h)return;const u=h.PositionAndShape;if(this.updateWidthAndStyle(u,r,a,o),this.openSheetMusicDisplay.FollowCursor&&this.cursorOptions.follow)if(this.openSheetMusicDisplay.EngravingRules.RenderSingleHorizontalStaffline)this.cursorElement.scrollIntoView({behavior:"smooth",inline:"center"});else{const e=this.cursorElement.getBoundingClientRect().top;this.cursorElement.scrollIntoView({behavior:e<1e3?"smooth":"auto",block:"center"})}this.cursorElement.style.display=""}findVisibleGraphicalMeasure(e){for(let t=0;t<this.graphic.NumberOfStaves;t++){const e=this.graphic.findGraphicalMeasure(this.iterator.CurrentMeasureIndex,t);if(null!==e&&void 0!==e&&e.ParentStaff.isVisible())return e}}updateWidthAndStyle(e,t,n,i){const s=this.cursorElement;let a=0;switch(this.cursorOptions.type){case r.CursorType.ThinLeft:s.style.top=10*n*this.openSheetMusicDisplay.zoom+"px",s.style.left=10*(t-1.5)*this.openSheetMusicDisplay.zoom+"px",s.height=10*i*this.openSheetMusicDisplay.zoom,a=5*this.openSheetMusicDisplay.zoom;break;case r.CursorType.ShortThinTopLeft:s.style.top=10*(n-2.5)*this.openSheetMusicDisplay.zoom+"px",s.style.left=10*t*this.openSheetMusicDisplay.zoom+"px",s.height=15*this.openSheetMusicDisplay.zoom,a=5*this.openSheetMusicDisplay.zoom;break;case r.CursorType.CurrentArea:s.style.top=10*e.AbsolutePosition.y*this.openSheetMusicDisplay.zoom+"px",s.style.left=10*e.AbsolutePosition.x*this.openSheetMusicDisplay.zoom+"px",s.height=10*i*this.openSheetMusicDisplay.zoom,a=10*e.Size.width*this.openSheetMusicDisplay.zoom;break;case r.CursorType.CurrentAreaLeft:s.style.top=10*e.AbsolutePosition.y*this.openSheetMusicDisplay.zoom+"px",s.style.left=10*e.AbsolutePosition.x*this.openSheetMusicDisplay.zoom+"px",s.height=10*i*this.openSheetMusicDisplay.zoom,a=10*(t-e.AbsolutePosition.x)*this.openSheetMusicDisplay.zoom;break;default:s.style.top=10*n*this.openSheetMusicDisplay.zoom+"px",s.style.left=10*(t-1.5)*this.openSheetMusicDisplay.zoom+"px",s.height=10*i*this.openSheetMusicDisplay.zoom,a=30*this.openSheetMusicDisplay.zoom}s.width=a,this.cursorOptionsRendered!==this.cursorOptions&&this.updateStyle(a,this.cursorOptions)}hide(){this.cursorElement.style.display="none",this.hidden=!0}previous(){this.iterator.moveToPreviousVisibleVoiceEntry(!1),this.update()}next(){this.iterator.moveToNextVisibleVoiceEntry(!1),this.update()}reset(){this.resetIterator(),this.update()}updateStyle(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;void 0!==t&&(this.cursorOptions=t);const n=document.createElement("canvas");n.width=this.cursorElement.width,n.height=1;const i=n.getContext("2d");i.globalAlpha=this.cursorOptions.alpha;const a=i.createLinearGradient(0,0,this.cursorElement.width,0);switch(this.cursorOptions.type){case r.CursorType.ThinLeft:case r.CursorType.ShortThinTopLeft:case r.CursorType.CurrentArea:case r.CursorType.CurrentAreaLeft:a.addColorStop(1,this.cursorOptions.color);break;default:a.addColorStop(0,"white"),a.addColorStop(.2,this.cursorOptions.color),a.addColorStop(.8,this.cursorOptions.color),a.addColorStop(1,"white")}i.fillStyle=a,i.fillRect(0,0,e,1),this.cursorOptionsRendered=s({},this.cursorOptions),this.cursorElement.src=n.toDataURL("image/png")}get Iterator(){return this.iterator}get Hidden(){return this.hidden}VoicesUnderCursor(e){return this.iterator.CurrentVisibleVoiceEntries(e)}NotesUnderCursor(e){const t=this.VoicesUnderCursor(e),n=[];return t.forEach((e=>{n.push.apply(n,e.Notes)})),n}GNotesUnderCursor(e){const t=this.VoicesUnderCursor(e),n=[];return t.forEach((e=>{n.push(...e.Notes.map((e=>this.rules.GNote(e))))})),n}updateCurrentPage(){let e=this.iterator.currentTimeStamp;e.RealValue<0&&(e=new i.Fraction(0,0));for(const t of this.graphic.MusicPages)if(t.MusicSystems.last().GetSystemsLastTimeStamp().gt(e)){const e=t.PageNumber;return e!==this.currentPageNumber&&(this.container.removeChild(this.cursorElement),this.container=document.getElementById("osmdCanvasPage"+e),this.container.appendChild(this.cursorElement)),this.currentPageNumber=e}return 1}get SkipInvisibleNotes(){return this.skipInvisibleNotes}set SkipInvisibleNotes(e){this.skipInvisibleNotes=e,this.iterator.SkipInvisibleNotes=e}get CursorOptions(){return this.cursorOptions}set CursorOptions(e){this.cursorOptions=e}Dispose(){this.hide(),this.container.removeChild(this.cursorElement),this.rules=void 0,this.openSheetMusicDisplay=void 0,this.cursorOptions=void 0}nextMeasure(){const e=this.Iterator.CurrentMeasure;let t=this.Iterator.currentTimeStamp.RealValue;this.next();let n=0;for(;this.Iterator.CurrentMeasure===e&&this.Iterator.currentTimeStamp.RealValue!==t&&n<999;)t=this.Iterator.currentTimeStamp.RealValue,this.next(),n++}previousMeasure(){const e=this.Iterator.CurrentMeasure;let t=this.Iterator.currentTimeStamp.RealValue;this.previous();let n=0;for(;this.Iterator.CurrentMeasure===e&&this.Iterator.currentTimeStamp.RealValue!==t&&n<999;)t=this.Iterator.currentTimeStamp.RealValue,this.previous(),n++;for(n=0;0!==this.Iterator.CurrentRelativeInMeasureTimestamp.RealValue&&n<999;)this.previous(),n++}}},6644:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StaffEntryLink=void 0,t.StaffEntryLink=class{constructor(e){this.linkStaffEntries=[],this.voiceEntry=e}get GetVoiceEntry(){return this.voiceEntry}get LinkStaffEntries(){return this.linkStaffEntries}set LinkStaffEntries(e){this.linkStaffEntries=e}}},6659:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalChordSymbolContainer=void 0;const i=n(7435),s=n(8254),r=n(9719),a=n(6438),o=n(7741),l=n(9409),c=n(4980);class h extends o.GraphicalObject{constructor(e,t,n,i,s,r){super(),this.chordSymbolContainer=e,this.boundingBox=new a.BoundingBox(this,t),this.rules=r,this.calculateLabel(n,s,i)}get GetChordSymbolContainer(){return this.chordSymbolContainer}get GraphicalLabel(){return this.graphicalLabel}calculateLabel(e,t,n){const a=r.ChordSymbolContainer.calculateChordText(this.chordSymbolContainer,t,n),o=this.GetChordSymbolContainer.Placement===c.PlacementEnum.Above?this.rules.ChordSymbolTextAlignmentTop:this.rules.ChordSymbolTextAlignmentBottom;this.graphicalLabel=new s.GraphicalLabel(new i.Label(a),e,o,this.rules,this.boundingBox),this.graphicalLabel.PositionAndShape.RelativePosition=new l.PointF2D(this.rules.ChordSymbolRelativeXOffset,0),this.graphicalLabel.Label.colorDefault=this.rules.DefaultColorChordSymbol}}t.GraphicalChordSymbolContainer=h},6670:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowStaffEntry=void 0;const i=n(348),s=n(9479),r=n(8233);class a extends i.GraphicalStaffEntry{constructor(e,t,n){super(e,t,n)}calculateXPosition(){const e=this.parentMeasure.getVFStave();let t=0;for(const n of this.graphicalVoiceEntries)if(n.vfStaveNote){if(n.vfStaveNote.setStave(e),!n.vfStaveNote.preFormatted)continue;n.applyBordersFromVexflow();let i=!1,r=this.PositionAndShape;n.notes[0].sourceNote.isWholeRest()&&!this.hasOnlyRests()&&(i=!0,r=n.PositionAndShape),this.parentMeasure.ParentStaff.isTab?r.RelativePosition.x=(n.vfStaveNote.getAbsoluteX()+n.vfStaveNote.glyph.getWidth())/s.unitInPixels:(r.RelativePosition.x=n.vfStaveNote.getBoundingBox().getX()/s.unitInPixels,i&&(r.RelativePosition.x-=e.getNoteStartX()/s.unitInPixels,r.RelativePosition.x-=1.3));const a=n.notes[0].sourceNote;a.isRest()&&a.Length.RealValue===this.parentMeasure.parentSourceMeasure.ActiveTimeSignature.RealValue&&(r.RelativePosition.x+=this.parentMeasure.parentSourceMeasure.Rules.WholeRestXShiftVexflow-.1,n.PositionAndShape.BorderLeft=-.7,n.PositionAndShape.BorderRight=.7),n.PositionAndShape.BorderLeft<t&&(t=n.PositionAndShape.BorderLeft)}this.PositionAndShape.RelativePosition.x-=t,this.PositionAndShape.calculateBoundingBox()}setMaxAccidentals(){for(const e of this.graphicalVoiceEntries)for(const t of e.notes)if(t.DrawnAccidental!==r.AccidentalEnum.NONE)return this.MaxAccidentals=1;return this.MaxAccidentals=0}setModifierXOffsets(){let e=[];for(const s of this.graphicalVoiceEntries)e=e.concat(s.notes);const t=e.map((e=>e.staffLine)),n=this.calculateModifierXOffsets(t,1),i=this.calculateModifierXOffsets(t,.5);e.forEach(((e,t)=>{e.baseFingeringXOffset=i[t],e.baseStringNumberXOffset=n[t]}))}calculateModifierXOffsets(e,t){const n=[];for(let i=0;i<e.length;i++){let s=0,r=!0;for(;r;)for(let a=i;a>=0;a--){if(Math.abs(e[i]-e[a])<=t&&s===n[a]){s++,r=!0;break}r=!1}n.push(s)}return n}}t.VexFlowStaffEntry=a},6703:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6711:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalCurve=void 0;const i=n(9409);class s{constructor(){s.tPow3=new Array(s.bezierCurveStepSize),s.oneMinusTPow3=new Array(s.bezierCurveStepSize),s.bezierFactorOne=new Array(s.bezierCurveStepSize),s.bezierFactorTwo=new Array(s.bezierCurveStepSize);for(let e=0;e<s.bezierCurveStepSize;e++){const t=e/s.bezierCurveStepSize;s.tPow3[e]=Math.pow(t,3),s.oneMinusTPow3[e]=Math.pow(1-t,3),s.bezierFactorOne[e]=3*Math.pow(1-t,2)*t,s.bezierFactorTwo[e]=3*(1-t)*Math.pow(t,2)}}calculateCurvePointAtIndex(e){const t=Math.round(e*s.bezierCurveStepSize);return t<0||t>=s.bezierCurveStepSize?new i.PointF2D:new i.PointF2D(s.oneMinusTPow3[t]*this.bezierStartPt.x+s.bezierFactorOne[t]*this.bezierStartControlPt.x+s.bezierFactorTwo[t]*this.bezierEndControlPt.x+s.tPow3[t]*this.bezierEndPt.x,s.oneMinusTPow3[t]*this.bezierStartPt.y+s.bezierFactorOne[t]*this.bezierStartControlPt.y+s.bezierFactorTwo[t]*this.bezierEndControlPt.y+s.tPow3[t]*this.bezierEndPt.y)}}t.GraphicalCurve=s,s.bezierCurveStepSize=1e3},6723:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VerticalGraphicalStaffEntryContainer=void 0,t.VerticalGraphicalStaffEntryContainer=class{constructor(e,t){this.staffEntries=[],this.absoluteTimestamp=t,this.staffEntries=new Array(e)}get Index(){return this.index}set Index(e){this.index=e}get AbsoluteTimestamp(){return this.absoluteTimestamp}get StaffEntries(){return this.staffEntries}set StaffEntries(e){this.staffEntries=e}static compareByTimestamp(e,t){const n=e.absoluteTimestamp.RealValue,i=t.absoluteTimestamp.RealValue;return n<i?-1:n>i?1:0}getFirstNonNullStaffEntry(){for(let e=0,t=this.staffEntries.length;e<t;++e){const t=this.staffEntries[e];if(t)return t}}}},6864:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeF2D=void 0,t.SizeF2D=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.width=e,this.height=t}}},6873:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(813),t),s(n(2774),t)},6888:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MXLHelper=void 0;const s=n(3902),r=i(n(1710)),a=i(n(3065));t.MXLHelper=class{static MXLtoIXmlElement(e){return this.MXLtoXMLstring(e).then((e=>{const t=(new DOMParser).parseFromString(e,"text/xml"),n=new s.IXmlElement(t.documentElement);return Promise.resolve(n)}),(e=>{throw new Error("extractSheetFromMxl: "+e.message)}))}static MXLtoXMLstring(e){const t=new r.default;return t.loadAsync(e).then((async e=>{let n=await t.file("META-INF/container.xml").async("text");if(!n.startsWith("<")){const e=await t.file("META-INF/container.xml").async("uint8array");n=new TextDecoder("utf-8").decode(e)}if(!n.startsWith("<")){const e=await t.file("META-INF/container.xml").async("uint8array");n=new TextDecoder("utf-16").decode(e)}const i=(new DOMParser).parseFromString(n,"text/xml").getElementsByTagName("rootfile")[0].getAttribute("full-path"),s=await t.file(i).async("text");if(!s.substring(0,1).startsWith("<")){const e=await t.file(i).async("uint8array");return new TextDecoder("utf-16").decode(e)}return s}),(e=>{throw a.default.error(e),e}))}}},6904:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Matrix2D=void 0;const i=n(9409);class s{constructor(){this.matrix=[];for(let e=0;e<2;e++){this.matrix[e]=[];for(let t=0;t<2;t++)this.matrix[e][t]=0}}static getRotationMatrix(e){const t=new s,n=Math.cos(e),i=Math.sin(e);return t.matrix[0][0]=n,t.matrix[0][1]=-i,t.matrix[1][0]=i,t.matrix[1][1]=n,t}scalarMultiplication(e){for(let t=0;t<2;t++)for(let n=0;n<2;n++)this.matrix[t][n]*=e}getTransposeMatrix(){const e=new s;for(let t=0;t<2;t++)for(let n=0;n<2;n++)e.matrix[t][n]=this.matrix[n][t];return e}vectorMultiplication(e){const t=new i.PointF2D;return t.x=e.x*this.matrix[0][0]+e.y*this.matrix[0][1],t.y=e.x*this.matrix[1][0]+e.y*this.matrix[1][1],t}}t.Matrix2D=s},6954:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SystemLinesEnumHelper=t.SystemLinesEnum=void 0,function(e){e[e.SingleThin=0]="SingleThin",e[e.DoubleThin=1]="DoubleThin",e[e.ThinBold=2]="ThinBold",e[e.BoldThinDots=3]="BoldThinDots",e[e.DotsThinBold=4]="DotsThinBold",e[e.DotsBoldBoldDots=5]="DotsBoldBoldDots",e[e.None=6]="None",e[e.Dotted=7]="Dotted",e[e.Dashed=8]="Dashed",e[e.Bold=9]="Bold",e[e.BoldThin=10]="BoldThin",e[e.DoubleBold=11]="DoubleBold",e[e.Tick=12]="Tick",e[e.Short=13]="Short"}(n||(t.SystemLinesEnum=n={})),t.SystemLinesEnumHelper=class{static xmlBarlineStyleToSystemLinesEnum(e){return"regular"===e?n.SingleThin:"dotted"===e?n.Dotted:"dashed"===e?n.Dashed:"heavy"===e?n.Bold:"light-light"===e?n.DoubleThin:"light-heavy"===e?n.ThinBold:"heavy-light"===e?n.BoldThin:"heavy-heavy"===e?n.DoubleBold:"tick"===e?n.Tick:"short"===e?n.Short:"none"===e?n.None:n.SingleThin}}},6990:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicExpressionSymbolEnum=void 0,function(e){e[e.p=0]="p",e[e.f=1]="f",e[e.s=2]="s",e[e.z=3]="z",e[e.m=4]="m",e[e.r=5]="r"}(n||(t.DynamicExpressionSymbolEnum=n={}))},7066:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeasureBuildParameters=t.SystemBuildParameters=t.MusicSystemBuilder=void 0;const i=n(1888),s=n(9288),r=n(4543),a=n(164),o=n(9409),l=n(6452),c=n(6954),h=n(7921),u=n(164),d=n(813),f=n(67);t.MusicSystemBuilder=class{constructor(){this.musicSystems=[],this.globalSystemIndex=0,this.leadSheet=!1}initialize(e,t,n){this.leadSheet=e.LeadSheet,this.graphicalMusicSheet=e,this.rules=this.graphicalMusicSheet.ParentMusicSheet.Rules,this.measureList=t,this.numberOfVisibleStaffLines=n,this.activeRhythm=new Array(this.numberOfVisibleStaffLines),this.activeKeys=new Array(this.numberOfVisibleStaffLines),this.activeClefs=new Array(this.numberOfVisibleStaffLines),this.initializeActiveInstructions(this.measureList[0])}buildMusicSystems(){const e=this.getFullPageSystemWidth();let t=!1;for(this.measureListIndex=0,this.currentSystemParams=new p,this.currentSystemParams.currentSystem=this.initMusicSystem();this.measureListIndex<this.measureList.length;){var n;const r=this.measureList[this.measureListIndex];if(!r||!r[0]){this.measureListIndex++;continue}for(let e=0,t=r.length;e<t;++e)r[e].resetLayout();const a=r[0].parentSourceMeasure,o=a.HasEndLine,l=o&&this.rules.NewPartAndSystemAfterFinalBarline,c=this.currentSystemParams.IsSystemStartMeasure();a.IsSystemStartMeasure=c;const h=a===this.graphicalMusicSheet.ParentMusicSheet.getFirstSourceMeasure();let u=this.rules.MeasureLeftMargin,d=0;const f=this.getMeasureStartLine();if(u+=this.getLineWidth(r[0],f,c),!this.leadSheet){let e=!1;t&&this.rules.ShowRhythmAgainAfterPartEndOrFinalBarline&&(e=!0),u+=this.addBeginInstructions(r,c,h||e),d+=this.addEndInstructions(r)}let p=0;for(let e=0;e<this.numberOfVisibleStaffLines;e++)p=Math.max(p,r[e].minimumStaffEntriesWidth);const m=this.getMeasureEndLine();d+=this.getLineWidth(r[0],m,c);let g,b=this.rules.MeasureLeftMargin;if(this.measureListIndex+1<this.measureList.length){var i,s;const e=this.measureList[this.measureListIndex+1];g=null===(i=e[0])||void 0===i?void 0:i.parentSourceMeasure,(null===(s=g)||void 0===s?void 0:s.hasBeginInstructions())&&(b+=this.addBeginInstructions(e,!1,!1))}let v=u+d+p;(null===(n=r[0])||void 0===n||null===(n=n.parentSourceMeasure)||void 0===n?void 0:n.multipleRestMeasures)&&(v=this.rules.MultipleRestMeasureDefaultWidth);const y=this.currentSystemParams.systemMeasures.length,x=this.currentSystemParams.currentWidth+v+b<e,S=this.rules.NewPageAtXMLNewPageAttribute&&a.printNewPageXml,w=S||this.rules.NewSystemAtXMLNewPageAttribute&&a.printNewPageXml||this.rules.NewSystemAtXMLNewSystemAttribute&&a.printNewSystemXml||y===this.rules.RenderXMeasuresPerLineAkaSystem&&y>0;if(c||x&&!w){if(this.addMeasureToSystem(r,f,m,v,u,p,d),this.updateActiveClefs(a,r),this.measureListIndex++,l){if(this.rules.MaxSystemToDrawNumber===this.musicSystems.length)return this.finalizeCurrentSystem(r,!this.rules.StretchLastSystemLine,!1),this.musicSystems;this.finalizeCurrentAndCreateNewSystem(r,!this.rules.StretchLastSystemLine,!1)}t=o}else{if(this.rules.MaxSystemToDrawNumber===this.musicSystems.length)return this.finalizeCurrentSystem(r,!1,!0,S),this.musicSystems;this.finalizeCurrentAndCreateNewSystem(r,!1,!0,S)}}if(this.currentSystemParams.systemMeasures.length>0){if(this.rules.MaxSystemToDrawNumber===this.musicSystems.length)return this.finalizeCurrentSystem(this.measureList[this.measureList.length-1],!this.rules.StretchLastSystemLine,!1),this.musicSystems;this.finalizeCurrentAndCreateNewSystem(this.measureList[this.measureList.length-1],!this.rules.StretchLastSystemLine,!1)}return this.musicSystems}calculateSystemYLayout(){for(const e of this.musicSystems)this.optimizeDistanceBetweenStaffLines(e);this.calculateMusicSystemsRelativePositions()}setMeasureWidth(e,t,n,i){for(let s=0,r=e.length;s<r;++s){const r=e[s];r.setWidth(t),n>0&&(r.beginInstructionsWidth=n),i>0&&(r.endInstructionsWidth=i)}}finalizeCurrentAndCreateNewSystem(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.finalizeCurrentSystem(e,t,n,i),this.currentSystemParams=new p,void 0!==e&&this.measureListIndex<this.measureList.length&&(this.currentSystemParams.currentSystem=this.initMusicSystem())}finalizeCurrentSystem(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.currentSystemParams.currentSystem.breaksPage=i,this.adaptRepetitionLineWithIfNeeded(),void 0!==e&&n&&this.checkAndCreateExtraInstructionMeasure(e),this.stretchMusicSystem(t)}adaptRepetitionLineWithIfNeeded(){const e=this.currentSystemParams.systemMeasures;if(e.length>=1){const t=this.currentSystemParams.currentSystem.GraphicalMeasures[this.currentSystemParams.currentSystem.GraphicalMeasures.length-1];let n=0;const i=e[e.length-1];i.endLine===c.SystemLinesEnum.DotsBoldBoldDots&&(i.endLine=c.SystemLinesEnum.DotsThinBold,n=t[0].getLineWidth(c.SystemLinesEnum.DotsBoldBoldDots)/2-t[0].getLineWidth(c.SystemLinesEnum.DotsThinBold)),this.currentSystemParams.currentSystemFixWidth-=n;for(let e=0,s=t.length;e<s;++e)t[e].endInstructionsWidth-=n}}addMeasureToSystem(e,t,n,i,s,r,a){this.currentSystemParams.systemMeasures.push({beginLine:t,endLine:n}),this.setMeasureWidth(e,i,s,a),this.addStaveMeasuresToSystem(e),this.currentSystemParams.currentWidth+=i,this.currentSystemParams.currentSystemFixWidth+=s+a,this.currentSystemParams.currentSystemVarWidth+=r,this.currentSystemParams.systemMeasureIndex++}initMusicSystem(){const e=h.MusicSheetCalculator.symbolFactory.createMusicSystem(this.globalSystemIndex++,this.rules);return this.musicSystems.push(e),this.layoutSystemStaves(e),e.createMusicSystemLabel(this.rules.InstrumentLabelTextHeight,this.rules.SystemLabelsRightMargin,this.rules.LabelMarginBorderFactor,1===this.musicSystems.length),e}getFullPageSystemWidth(){return this.graphicalMusicSheet.ParentMusicSheet.pageWidth-this.rules.PageLeftMargin-this.rules.PageRightMargin-this.rules.SystemLeftMargin-this.rules.SystemRightMargin}layoutSystemStaves(e){const t=this.getFullPageSystemWidth(),n=e.PositionAndShape;n.BorderLeft=0,n.BorderRight=t,n.BorderTop=0;const i=[],s=this.graphicalMusicSheet.ParentMusicSheet.Instruments;for(let o=0,l=s.length;o<l;++o){const e=s[o];if(e.isVisible()&&0!==e.Voices.length)for(let t=0,n=e.Staves.length;t<n;++t){const n=e.Staves[t];(null===n||void 0===n?void 0:n.Visible)&&i.push(n)}}let r=!1;if(this.leadSheet)for(let o=0,l=i.length;o<l;++o)if(i[o].ParentInstrument.LyricVersesNumbers.length>1){r=!0;break}let a=0;for(let o=0;o<i.length;o++)if(this.addStaffLineToMusicSystem(e,a,i[o]),a+=this.rules.StaffHeight,o+1<i.length){let e=0;e=this.leadSheet&&!r?2.5:i[o].ParentInstrument===i[o+1].ParentInstrument?this.rules.BetweenStaffDistance:this.rules.StaffDistance,a+=e}n.BorderBottom=a}addStaffLineToMusicSystem(e,t,n){if(e){const i=h.MusicSheetCalculator.symbolFactory.createStaffLine(e,n);e.StaffLines.push(i);const s=i.PositionAndShape,r=new o.PointF2D;r.x=0,s.BorderRight=e.PositionAndShape.Size.width,r.y=t,s.RelativePosition=r,s.BorderLeft=0,s.BorderTop=0,s.BorderBottom=this.rules.StaffHeight;for(let e=0;e<5;e++){const t=new o.PointF2D;t.x=0,t.y=e*this.rules.StaffHeight/4;const n=new o.PointF2D;n.x=i.PositionAndShape.Size.width,n.y=e*this.rules.StaffHeight/4,this.leadSheet&&(t.y=n.y=0),i.StaffLines[e]=new l.GraphicalLine(t,n,this.rules.StaffLineWidth)}}}initializeActiveInstructions(e){const t=this.graphicalMusicSheet.ParentMusicSheet.getFirstSourceMeasure();if(t){this.visibleStaffIndices=this.graphicalMusicSheet.getVisibleStavesIndicesFromSourceMeasure(e);for(let e=0,n=this.visibleStaffIndices.length;e<n;e++){const n=this.visibleStaffIndices[e],i=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(t,n);this.activeClefs[e]=t.FirstInstructionsStaffEntries[n].Instructions[0],i.InitiallyActiveClef=this.activeClefs[e];const s=t.FirstInstructionsStaffEntries[n].Instructions[1];if(s){let t=r.KeyInstruction.copy(s);t=this.transposeKeyInstruction(t,i),this.activeKeys[e]=t}const a=t.FirstInstructionsStaffEntries[n].Instructions[2];this.activeRhythm[e]=a}}}transposeKeyInstruction(e,t){const n=t.getTransposedHalftones();return n!==e.isTransposedBy&&t.ParentStaff.ParentInstrument.MidiInstrumentId!==u.MidiInstrument.Percussion&&void 0!==h.MusicSheetCalculator.transposeCalculator&&h.MusicSheetCalculator.transposeCalculator.transposeKey(e,n),e}addBeginInstructions(e,t,n){const i=e.length;if(0===i)return 0;let s=0;const r=e[0].parentSourceMeasure,a=[];for(let o=0;o<i;++o){const i=e[o];i&&a.push(i.getVFStave());const l=this.visibleStaffIndices[o],c=r.FirstInstructionsStaffEntries[l],h=this.AddInstructionsAtMeasureBegin(c,i,o,n,t);s=Math.max(s,h)}return a[0].formatBegModifiers(a),s}addEndInstructions(e){const t=e.length;if(0===t)return 0;let n=.5;const i=e[0].parentSourceMeasure;for(let s=0;s<t;s++){const t=e[s],r=this.visibleStaffIndices[s],a=i.LastInstructionsStaffEntries[r],o=this.addInstructionsAtMeasureEnd(a,t,e);n=Math.max(n,o)}return n}AddInstructionsAtMeasureBegin(e,t,n,i,o){let l,c,h,u=0;if(e)for(let g=0,b=e.Instructions.length;g<b;++g){const t=e.Instructions[g];t instanceof a.ClefInstruction?l=t:t instanceof r.KeyInstruction?c=t:t instanceof s.RhythmInstruction&&(h=t)}t.InitiallyActiveClef=null!==l&&void 0!==l?l:this.activeClefs[n],o&&(l||(l=this.activeClefs[n]),c||(c=r.KeyInstruction.copy(this.activeKeys[n])),i&&!h&&(h=this.activeRhythm[n]));let d=!1,f=!1,p=!1;if(l?(t.addClefAtBegin(l),d=!0):l=this.activeClefs[n],c){c=this.transposeKeyInstruction(c,t);const e=o?void 0:this.activeKeys[n];t.addKeyAtBegin(c,e,l),f=!0}if(void 0!==h&&h.PrintObject&&this.rules.RenderTimeSignatures){let e=!0;const n=t.MeasureNumber-1-this.rules.MinMeasureToDrawIndex;if(t.MeasureNumber-1>=0&&this.measureList[n]){var m;const t=null===(m=this.measureList[n][0])||void 0===m?void 0:m.parentSourceMeasure;(null===t||void 0===t?void 0:t.ImplicitMeasure)&&(null===t||void 0===t?void 0:t.RhythmPrinted)&&(e=!1)}e&&(t.addRhythmAtBegin(h),t.parentSourceMeasure.RhythmPrinted=h,p=!0)}return(d||f||p)&&(u+=t.beginInstructionsWidth,p&&(u+=this.rules.RhythmRightMargin)),u}addInstructionsAtMeasureEnd(e,t,n){if(!e||!e.Instructions||0===e.Instructions.length)return 0;for(let i=0,s=e.Instructions.length;i<s;++i){const s=e.Instructions[i];if(s instanceof a.ClefInstruction){const e=s;t.addClefAtEnd(e);for(const i of n)i!==t&&i.addClefAtEnd(e,!1)}}return this.rules.MeasureRightMargin+t.endInstructionsWidth}updateActiveClefs(e,t){for(let n=0,i=t.length;n<i;n++){const t=this.visibleStaffIndices[n],i=e.FirstInstructionsStaffEntries[t];if(i)for(let e=0,c=i.Instructions.length;e<c;++e){const t=i.Instructions[e];t instanceof a.ClefInstruction?this.activeClefs[n]=t:t instanceof r.KeyInstruction?this.activeKeys[n]=t:t instanceof s.RhythmInstruction&&(this.activeRhythm[n]=t)}const o=e.getEntriesPerStaff(t);for(let e=0,s=o.length;e<s;++e){const t=o[e];if(t.Instructions)for(let e=0,i=t.Instructions.length;e<i;++e){const i=t.Instructions[e];i instanceof a.ClefInstruction&&(this.activeClefs[n]=i)}}const l=e.LastInstructionsStaffEntries[t];if(l){const e=l.Instructions;for(let t=0,i=e.length;t<i;++t){const i=e[t];i instanceof a.ClefInstruction&&(this.activeClefs[n]=i)}}}}checkAndCreateExtraInstructionMeasure(e){const t=e[0].parentSourceMeasure.FirstInstructionsStaffEntries,n=[];for(let s=0,r=e.length;s<r;++s){const i=e[s];n.push(t[i.ParentStaff.idInMusicSheet])}let i=0;for(let a=0,o=n.length;a<o;++a){const e=n[a];if(!e)continue;const t=e.Instructions;let o,l;for(let n=0,i=t.length;n<i;++n){const e=t[n];e instanceof r.KeyInstruction&&e.Key!==this.activeKeys[a].Key&&(o=e),e instanceof s.RhythmInstruction&&e!==this.activeRhythm[a]&&(l=e)}if(void 0!==o||l){const e=this.addExtraInstructionMeasure(a,o,l);i=Math.max(i,e)}}i>0&&(this.currentSystemParams.systemMeasures.push({beginLine:c.SystemLinesEnum.None,endLine:c.SystemLinesEnum.None}),this.currentSystemParams.currentWidth+=i,this.currentSystemParams.currentSystemFixWidth+=i)}addExtraInstructionMeasure(e,t,n){const i=this.currentSystemParams.currentSystem,s=h.MusicSheetCalculator.symbolFactory.createExtraGraphicalMeasure(i.StaffLines[e]);[].push(s),t&&s.addKeyAtBegin(t,this.activeKeys[e],this.activeClefs[e]),void 0!==n&&n.PrintObject&&s.addRhythmAtBegin(n),s.PositionAndShape.BorderLeft=0,s.PositionAndShape.BorderTop=0,s.PositionAndShape.BorderBottom=this.rules.StaffHeight;const r=this.rules.MeasureLeftMargin+s.beginInstructionsWidth+this.rules.MeasureRightMargin;return s.PositionAndShape.BorderRight=r,i.StaffLines[e].Measures.push(s),r}addStaveMeasuresToSystem(e){if(e[0]){const t=[];for(let i=0;i<e.length;i++)t.push(e[i]);const n=this.currentSystemParams.currentSystem;for(let e=0;e<this.numberOfVisibleStaffLines;e++){const i=t[e];n.StaffLines[e].Measures.push(i),i.ParentStaffLine=n.StaffLines[e]}n.AddGraphicalMeasures(t)}}getMeasureStartLine(){if(this.thisMeasureBeginsLineRepetition()){const e=0===this.measureListIndex;if(e&&this.rules.RepetitionAllowFirstMeasureBeginningRepeatBarline)return c.SystemLinesEnum.BoldThinDots;const t=this.currentSystemParams.IsSystemStartMeasure();if(this.previousMeasureEndsLineRepetition()&&!t)return c.SystemLinesEnum.DotsBoldBoldDots;if(!e)return c.SystemLinesEnum.BoldThinDots}return c.SystemLinesEnum.None}getMeasureEndLine(){let e;try{if(e=this.measureList[this.measureListIndex][0].parentSourceMeasure,this.rules.RenderMultipleRestMeasures&&e.multipleRestMeasures>1){const t=Math.min(this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length-1,e.measureListIndex+e.multipleRestMeasures-1);e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t]}}finally{}return this.nextMeasureBeginsLineRepetition()&&this.thisMeasureEndsLineRepetition()?c.SystemLinesEnum.DotsBoldBoldDots:this.thisMeasureEndsLineRepetition()?c.SystemLinesEnum.DotsThinBold:this.nextMeasureHasKeyInstructionChange()||this.thisMeasureEndsWordRepetition()||this.nextMeasureBeginsWordRepetition()?c.SystemLinesEnum.DoubleThin:e&&void 0!==e.endingBarStyleEnum?e.endingBarStyleEnum:c.SystemLinesEnum.SingleThin}getLineWidth(e,t,n){let i=e.getLineWidth(t);return t===c.SystemLinesEnum.DotsBoldBoldDots&&(i/=2),n&&t===c.SystemLinesEnum.BoldThinDots&&(i+=this.rules.DistanceBetweenLastInstructionAndRepetitionBarline),i}previousMeasureEndsLineRepetition(){if(0===this.measureListIndex)return!1;for(let e=0,t=this.measureList[this.measureListIndex-1].length;e<t;++e)if(this.measureList[this.measureListIndex-1][e].endsWithLineRepetition())return!0;return!1}thisMeasureBeginsLineRepetition(){for(let e=0,t=this.measureList[this.measureListIndex].length;e<t;++e)if(this.measureList[this.measureListIndex][e].beginsWithLineRepetition())return!0;return!1}nextMeasureBeginsLineRepetition(){const e=this.measureListIndex+1;if(e>=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length||!this.measureList[e])return!1;for(let t=0,n=this.measureList[e].length;t<n;++t)if(this.measureList[e][t].beginsWithLineRepetition())return!0;return!1}thisMeasureEndsLineRepetition(){for(let t=0,n=this.measureList[this.measureListIndex].length;t<n;++t){var e;const n=this.measureList[this.measureListIndex][t];if(n.endsWithLineRepetition())return!0;if(null!==(e=n.parentSourceMeasure)&&void 0!==e&&e.isReducedToMultiRest){const e=this.graphicalMusicSheet.ParentMusicSheet;let t=n.parentSourceMeasure;const i=e.SourceMeasures.indexOf(t);let s=t.multipleRestMeasureNumber;for(let n=i+1;n<e.SourceMeasures.length;n++){const i=e.SourceMeasures[n];if(!(i.multipleRestMeasureNumber>=s))break;t=i,s=i.multipleRestMeasureNumber}return t.endsWithLineRepetition()}}return!1}nextMeasureBeginsWordRepetition(){const e=this.measureListIndex+1;if(e>=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length||e>this.measureList.length-1)return!1;for(let t=0,n=this.measureList[e].length;t<n;++t)if(this.measureList[e][t].beginsWithWordRepetition())return!0;return!1}thisMeasureEndsWordRepetition(){for(let e=0,t=this.measureList[this.measureListIndex].length;e<t;++e)if(this.measureList[this.measureListIndex][e].endsWithWordRepetition())return!0;return!1}nextMeasureHasKeyInstructionChange(){return void 0!==this.getNextMeasureKeyInstruction()}getNextMeasureKeyInstruction(){if(this.measureListIndex<this.measureList.length-1)for(let t=0;t<this.measureList[this.measureListIndex].length;t++){var e;const n=null===(e=this.measureList[this.measureListIndex+1][t])||void 0===e?void 0:e.parentSourceMeasure;if(!n)return;return n.getKeyInstruction(this.visibleStaffIndices[t])}}calculateXScalingFactor(e,t){return Math.abs(t-0)<1e-5||Math.abs(e-0)<1e-5?1:(this.currentSystemParams.currentSystem.StaffLines[0].PositionAndShape.Size.width-e)/t}stretchMusicSystem(e){let t=this.calculateXScalingFactor(this.currentSystemParams.currentSystemFixWidth,this.currentSystemParams.currentSystemVarWidth);e&&(t=Math.min(t,this.rules.LastSystemMaxScalingFactor));const n=this.currentSystemParams.currentSystem;for(let i=0,s=n.StaffLines.length;i<s;++i){const e=n.StaffLines[i];let s=0;for(let i=0;i<e.Measures.length;i++){const r=e.Measures[i];r.setPositionInStaffline(s);const a=r.beginInstructionsWidth;if(r.setWidth(a+r.minimumStaffEntriesWidth*t+r.endInstructionsWidth),i<this.currentSystemParams.systemMeasures.length){const e=this.currentSystemParams.systemMeasures[i].beginLine,t=r.getLineWidth(c.SystemLinesEnum.BoldThinDots);if(e===c.SystemLinesEnum.BoldThinDots){let a=s;0===i&&(a=s+r.beginInstructionsWidth-t),n.createVerticalLineForMeasure(a,t,e,f.SystemLinePosition.MeasureBegin,i,r)}}if(r.staffEntriesScaleFactor=t,r.layoutSymbols(),!(i+1<this.currentSystemParams.systemMeasures.length&&this.currentSystemParams.systemMeasures[i+1].beginLine===c.SystemLinesEnum.BoldThinDots)){let e=c.SystemLinesEnum.SingleThin;i<this.currentSystemParams.systemMeasures.length&&(e=this.currentSystemParams.systemMeasures[i].endLine);const t=r.getLineWidth(e);let s=r.PositionAndShape.RelativePosition.x+r.PositionAndShape.BorderRight-t;e===c.SystemLinesEnum.DotsBoldBoldDots&&(s-=t/2),n.createVerticalLineForMeasure(s,t,e,f.SystemLinePosition.MeasureEnd,i,r)}s=r.PositionAndShape.RelativePosition.x+r.PositionAndShape.BorderRight}}e&&this.decreaseMusicSystemBorders()}decreaseMusicSystemBorders(){const e=this.currentSystemParams.currentSystem,t=d.CollectionUtil.last(e.StaffLines[0].Measures).PositionAndShape,n=t.RelativePosition.x+t.Size.width;for(let i=0,s=e.StaffLines.length;i<s;++i){const t=e.StaffLines[i];t.PositionAndShape.BorderRight=n;for(let e=0,i=t.StaffLines.length;e<i;++e){const i=t.StaffLines[e];i.End=new o.PointF2D(n,i.End.y)}}e.PositionAndShape.BorderRight=n+this.currentSystemParams.maxLabelLength+this.rules.SystemLabelsRightMargin}updateStaffLinesRelativePosition(e,t,n){for(let i=t;i<e.StaffLines.length;i++)e.StaffLines[i].PositionAndShape.RelativePosition.y=n;e.PositionAndShape.BorderBottom+=n}createMusicPage(){const e=new i.GraphicalMusicPage(this.graphicalMusicSheet);return this.graphicalMusicSheet.MusicPages.push(e),e.PageNumber=this.graphicalMusicSheet.MusicPages.length,e.PositionAndShape.BorderLeft=0,e.PositionAndShape.BorderRight=this.graphicalMusicSheet.ParentMusicSheet.pageWidth,e.PositionAndShape.BorderTop=0,e.PositionAndShape.BorderBottom=this.rules.PageHeight,e.PositionAndShape.RelativePosition=new o.PointF2D(0,0),e}addSystemToPage(e,t){e.MusicSystems.push(t),t.Parent=e}optimizeDistanceBetweenStaffLines(e){if(!e.checkStaffEntriesForStaffEntryLink())for(let i=0;i<e.StaffLines.length-1;i++){const t=e.StaffLines[i].BottomLine,n=e.StaffLines[i+1].SkyLine;let s=0;for(let e=0;e<t.length;e++){const i=t[e],r=Math.max(0,e-6),a=Math.min(n.length-1,e+6);let o=0;for(let e=r;e<=a;e++)o=Math.min(o,n[e]);const l=i-o;s=Math.max(l,s)}s+=this.rules.MinSkyBottomDistBetweenStaves,s=Math.max(s,this.rules.StaffHeight+this.rules.MinimumStaffLineDistance);const r=s+e.StaffLines[i].PositionAndShape.RelativePosition.y;this.updateStaffLinesRelativePosition(e,i+1,r)}const t=e.StaffLines[0];e.PositionAndShape.BorderTop=t.PositionAndShape.RelativePosition.y+t.PositionAndShape.BorderTop;const n=e.StaffLines[e.StaffLines.length-1];e.PositionAndShape.BorderBottom=n.PositionAndShape.RelativePosition.y+n.PositionAndShape.BorderBottom}calculateMusicSystemsRelativePositions(){let e=this.createMusicPage(),t=0,n=this.musicSystems[0],i=0;for(let s=0;s<this.musicSystems.length;s++)if(n=this.musicSystems[s],0===e.MusicSystems.length){this.addSystemToPage(e,n),t=this.rules.CompactMode?this.rules.PageTopMarginNarrow:this.rules.PageTopMargin,1===this.graphicalMusicSheet.MusicPages.length&&this.rules.RenderTitle&&(t+=this.rules.TitleTopDistance+this.rules.SheetTitleHeight+this.rules.TitleBottomDistance);const s=new o.PointF2D(this.rules.PageLeftMargin+this.rules.SystemLeftMargin,t);n.PositionAndShape.RelativePosition=s,t+n.PositionAndShape.BorderBottom>this.rules.PageHeight-this.rules.PageBottomMargin&&(i++,i<=4&&console.log("warning: could not fit a single system on page ".concat(e.PageNumber," and measure number ").concat(n.GraphicalMeasures[0][0].MeasureNumber,'.\n                            The PageFormat may be too small for this sheet."\n                            Will not give further warnings for all pages, only total.')))}else{const i=this.musicSystems[s-1],r=i.StaffLines[i.StaffLines.length-1],a=r.PositionAndShape;let l=this.findRequiredDistanceWithSkyBottomLine(i,n);l+=this.rules.MinSkyBottomDistBetweenSystems,l=Math.max(l,this.rules.MinimumDistanceBetweenSystems+r.StaffHeight);const c=t+a.RelativePosition.y+l,h=c+n.PositionAndShape.BorderMarginBottom;if(this.rules.NewPageAtXMLNewPageAttribute&&i.breaksPage||!(h<this.rules.PageHeight-this.rules.PageBottomMargin)){e=this.createMusicPage(),s-=1;continue}{this.addSystemToPage(e,n),t=c;const i=new o.PointF2D(this.rules.PageLeftMargin+this.rules.SystemLeftMargin,t);n.PositionAndShape.RelativePosition=i}}i>0&&console.log("total amount of pages that couldn't fit a single music system: ".concat(i," of ").concat(e.PageNumber))}findRequiredDistanceWithSkyBottomLine(e,t){const n=e.StaffLines[e.StaffLines.length-1],i=t.StaffLines[0],s=n.BottomLine,r=i.SkyLine,a=n.PositionAndShape,o=i.PositionAndShape,l=1/this.rules.SamplingUnit;let c=0;for(let h=0;h<s.length;h++){const e=s[h],t=h+Math.round((a.RelativePosition.x-o.RelativePosition.x)*l);if(t<0)continue;if(t>=r.length)break;const n=Math.max(0,t-6),i=Math.min(r.length-1,t+6);let u=0;for(let s=n;s<=i;s++)u=Math.min(u,r[s]);const d=e-u;c=Math.max(d,c)}return 0===c&&(c=a.BorderBottom-o.BorderTop),c}};class p{constructor(){this.systemMeasures=[],this.systemMeasureIndex=0,this.currentWidth=0,this.currentSystemFixWidth=0,this.currentSystemVarWidth=0,this.maxLabelLength=0}IsSystemStartMeasure(){return 0===this.systemMeasureIndex}}t.SystemBuildParameters=p,t.MeasureBuildParameters=class{}},7098:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowInstrumentBrace=void 0;var s=i(n(3206)).default.Flow;const r=n(3109);class a extends r.VexFlowInstrumentBracket{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this.vexflowConnector.setType(s.StaveConnector.type.BRACE)}}t.VexFlowInstrumentBrace=a},7103:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenSheetMusicDisplay=void 0;const s=n(3902),r=n(806),a=n(9099),o=n(8724),l=n(7921),c=n(9479),h=n(9436),u=n(9834),d=n(6597),f=n(6888),p=n(3173),m=i(n(3065)),g=n(3661),b=n(4146),v=n(4434),y=n(624),x=n(9713),S=n(6362),w=n(3263),E=n(2683),_=n(8233),T=n(1538);class M{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.OSMDOptions.OSMDOptionsStandard();if(this.version="1.9.3-release",this.cursorsOptions=[],this.cursors=[],this.zoom=1,this.zoomUpdated=!1,this.loadUrlTimeout=5e3,"string"==typeof e?this.container=document.getElementById(e):e&&"appendChild"in e&&(this.container=e),!this.container)throw new Error("Please pass a valid div container to OpenSheetMusicDisplay");void 0===t.autoResize&&(t.autoResize=!0),this.backendType=y.BackendType.SVG,this.setOptions(t)}get cursor(){return this.cursors[0]}get Cursor(){return this.cursor}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Untitled Score";if(this.reset(),"string"==typeof e){const t=e,n=this;if(t.startsWith("PK\x03\x04"))return m.default.debug("[OSMD] This is a zip file, unpack it first: "+t),f.MXLHelper.MXLtoXMLstring(t).then((e=>n.load(e)),(e=>{throw m.default.debug(e),new Error("OpenSheetMusicDisplay: Invalid MXL file")}));if(t.startsWith("\uf7ef\uf7bb\uf7bf"))return m.default.debug("[OSMD] UTF with BOM detected, truncate first 3 bytes and pass along: "+t),n.load(t.substring(3));let i=t;if(/^\s/.test(i)&&(i=i.trim()),i.startsWith("<?xml")){const t=this.OnXMLRead(i);m.default.debug("[OSMD] Finally parsing XML content, length: "+t.length),e=(new DOMParser).parseFromString(t,"application/xml")}else{if(i.length<2083)return m.default.debug("[OSMD] Retrieve the file at the given URL: "+i),p.AJAX.ajax(i,this.loadUrlTimeout).then((e=>n.load(e)),(e=>{throw e}));console.error("[OSMD] osmd.load(string): Could not process string. Did not find <?xml at beginning.")}}if(!e||!e.nodeName)return Promise.reject(new Error("OpenSheetMusicDisplay: The document which was provided is invalid"));const n=e,i=n.childNodes;let r;m.default.debug("[OSMD] load(), Document url: "+n.URL);for(let s=0,a=i.length;s<a;s+=1){const e=i[s];if(e.nodeType===Node.ELEMENT_NODE&&"score-partwise"===e.nodeName.toLowerCase()){r=e;break}}if(!r)return console.error("Could not parse MusicXML, no valid partwise element found"),Promise.reject(new Error("OpenSheetMusicDisplay: Document is not a valid 'partwise' MusicXML"));const o=new s.IXmlElement(r),l=new T.TemposCalculator,c=new a.MusicSheetReader([l],this.rules);return this.sheet=c.createMusicSheet(o,t),void 0===this.sheet?Promise.reject(new Error("given music sheet was incomplete or could not be loaded.")):(m.default.info("[OSMD] Loaded sheet ".concat(this.sheet.TitleString," successfully.")),this.needBackendUpdate=!0,this.updateGraphic(),Promise.resolve({}))}updateGraphic(){const e=new r.VexFlowMusicSheetCalculator(this.rules);this.graphic=new o.GraphicalMusicSheet(this.sheet,e),this.drawingParameters.drawCursors&&this.cursors.forEach((e=>{e.init(this.sheet.MusicPartManager,this.graphic)})),this.drawingParameters.DrawingParametersEnum===b.DrawingParametersEnum.leadsheet&&(this.graphic.LeadSheet=!0)}render(){var e;if(!this.graphic)throw new Error("OSMD: load() needs to be called before render()");null!==(e=this.drawer)&&void 0!==e&&e.clear(),this.Sheet.SourceMeasures[0].ImplicitMeasure&&(this.rules.MinMeasureToDrawNumber>1&&(this.rules.MinMeasureToDrawIndex=this.rules.MinMeasureToDrawNumber),this.rules.MaxMeasureToDrawNumber>0&&(this.rules.MaxMeasureToDrawIndex=this.rules.MaxMeasureToDrawNumber));let t=this.container.offsetWidth;this.rules.RenderSingleHorizontalStaffline&&(t=this.rules.SheetMaximumWidth),this.sheet.pageWidth=t/this.zoom/10,this.rules.PageFormat&&!this.rules.PageFormat.IsUndefined?(this.rules.PageHeight=this.sheet.pageWidth/this.rules.PageFormat.aspectRatio,m.default.debug("[OSMD] PageHeight: "+this.rules.PageHeight)):(m.default.debug("[OSMD] endless/undefined pageformat, id: "+this.rules.PageFormat.idString),this.rules.PageHeight=100001),this.graphic.reCalculate(),this.drawingParameters.drawCursors&&(this.graphic.Cursors.length=0),this.createOrRefreshRenderBackend(),this.needBackendUpdate=!1,this.drawer.setZoom(this.zoom),this.drawer.drawSheet(this.graphic),this.enableOrDisableCursors(this.drawingParameters.drawCursors),this.drawingParameters.drawCursors&&this.cursors.forEach((e=>{e.update()})),this.zoomUpdated=!1,this.rules.RenderCount++}createOrRefreshRenderBackend(){if(this.drawer&&this.drawer.Backends){this.drawer.Backends[0]&&this.drawer.Backends[0].removeAllChildrenFromContainer(this.container);for(const e of this.drawer.Backends)e.free();this.drawer.Backends.clear()}this.drawingParameters.Rules=this.rules,this.drawer=new c.VexFlowMusicSheetDrawer(this.drawingParameters),this.drawer.drawableBoundingBoxElement=this.DrawBoundingBox,this.drawer.bottomLineVisible=this.drawBottomLine,this.drawer.skyLineVisible=this.drawSkyLine;let e,t=this.container.offsetWidth;this.rules.RenderSingleHorizontalStaffline&&(t=10*(this.EngravingRules.PageLeftMargin+this.graphic.MusicPages[0].PositionAndShape.Size.width+this.EngravingRules.PageRightMargin)*this.zoom);const n=32767;for(const i of this.graphic.MusicPages){if(i.PageNumber>this.rules.MaxPageToDrawNumber)break;const s=this.createBackend(this.backendType,i),r=" exceeds CanvasBackend limit of 32767. Cutting off score.";s.getOSMDBackendType()===y.BackendType.Canvas&&t>n&&(m.default.warn("[OSMD] Warning: width of "+t+r),t=n),this.rules.PageFormat&&!this.rules.PageFormat.IsUndefined?e=t/this.rules.PageFormat.aspectRatio:(e=i.PositionAndShape.Size.height,e+=this.rules.PageBottomMargin,s.getOSMDBackendType()===y.BackendType.Canvas&&(e+=.1),e+=i.PositionAndShape.BorderTop,this.rules.RenderTitle&&(e+=this.rules.TitleTopDistance),e*=10*this.zoom),s.getOSMDBackendType()===y.BackendType.Canvas&&e>n&&(m.default.warn("[OSMD] Warning: height of "+e+r),e=Math.min(e,n)),s.resize(t,e),s.clear(),s.getContext().setFillStyle(this.rules.DefaultColorMusic),s.getContext().setStrokeStyle(this.rules.DefaultColorMusic),this.drawer.Backends.push(s),this.graphic.drawer=this.drawer}}exportSVG(){for(const t of null===(e=this.drawer)||void 0===e?void 0:e.Backends){var e;t instanceof h.SvgVexFlowBackend&&t.export()}}IsReadyToRender(){return void 0!==this.graphic}clear(){var e;null!==(e=this.drawer)&&void 0!==e&&e.clear(),this.reset()}setOptions(e){if(this.rules||(this.rules=new x.EngravingRules),this.drawingParameters||e.drawingParameters?e.drawingParameters&&(this.drawingParameters?this.drawingParameters.DrawingParametersEnum=b.DrawingParametersEnum[e.drawingParameters.toLowerCase()]:this.drawingParameters=new g.DrawingParameters(b.DrawingParametersEnum[e.drawingParameters],this.rules)):this.drawingParameters=new g.DrawingParameters(b.DrawingParametersEnum.default,this.rules),null==e)return void m.default.warn("warning: osmd.setOptions() called without an options parameter, has no effect.\nexample usage: osmd.setOptions({drawCredits: false, drawPartNames: false})");this.OnXMLRead=function(e){return e},e.onXMLRead&&(this.OnXMLRead=e.onXMLRead);let t=!this.drawer||!this.drawer.Backends||this.drawer.Backends.length<1;if(void 0!==e.backend){const n=y.OSMDOptions.BackendTypeFromString(e.backend);t=t||this.backendType!==n,this.backendType=n}this.needBackendUpdate=t,void 0!==e.autoBeam&&(this.rules.AutoBeamNotes=e.autoBeam);const n=e.autoBeamOptions;if(n&&(void 0===n.maintain_stem_directions&&(n.maintain_stem_directions=!1),this.rules.AutoBeamOptions=n,n.groups&&n.groups.length))for(const i of n.groups)if(2!==i.length)throw new Error("Each fraction in autoBeamOptions.groups must be of length 2, e.g. [3,4] for beaming three fourths");void 0!==e.percussionOneLineCutoff&&(this.rules.PercussionOneLineCutoff=e.percussionOneLineCutoff),0!==this.rules.PercussionOneLineCutoff&&void 0!==e.percussionForceVoicesOneLineCutoff&&(this.rules.PercussionForceVoicesOneLineCutoff=e.percussionForceVoicesOneLineCutoff),void 0!==e.alignRests&&(this.rules.AlignRests=e.alignRests),void 0!==e.coloringMode&&this.setColoringMode(e),void 0!==e.coloringEnabled&&(this.rules.ColoringEnabled=e.coloringEnabled),void 0!==e.colorStemsLikeNoteheads&&(this.rules.ColorStemsLikeNoteheads=e.colorStemsLikeNoteheads),e.disableCursor&&(this.drawingParameters.drawCursors=!1),e.drawHiddenNotes&&(this.drawingParameters.drawHiddenNotes=!0),void 0!==e.drawCredits&&(this.drawingParameters.DrawCredits=e.drawCredits),void 0!==e.drawComposer&&(this.drawingParameters.DrawComposer=e.drawComposer),void 0!==e.drawTitle&&(this.drawingParameters.DrawTitle=e.drawTitle),void 0!==e.drawSubtitle&&(this.drawingParameters.DrawSubtitle=e.drawSubtitle),void 0!==e.drawLyricist&&(this.drawingParameters.DrawLyricist=e.drawLyricist),void 0!==e.drawMetronomeMarks&&(this.rules.MetronomeMarksDrawn=e.drawMetronomeMarks),void 0!==e.drawPartNames&&(this.drawingParameters.DrawPartNames=e.drawPartNames,e.drawPartAbbreviations||(this.rules.RenderPartAbbreviations=e.drawPartNames)),void 0!==e.drawPartAbbreviations&&(this.rules.RenderPartAbbreviations=e.drawPartAbbreviations),!1===e.drawFingerings&&(this.rules.RenderFingerings=!1),void 0!==e.drawMeasureNumbers&&(this.rules.RenderMeasureNumbers=e.drawMeasureNumbers),e.drawMeasureNumbersOnlyAtSystemStart&&(this.rules.RenderMeasureNumbersOnlyAtSystemStart=e.drawMeasureNumbersOnlyAtSystemStart),void 0!==e.drawLyrics&&(this.rules.RenderLyrics=e.drawLyrics),void 0!==e.drawTimeSignatures&&(this.rules.RenderTimeSignatures=e.drawTimeSignatures),void 0!==e.drawSlurs&&(this.rules.RenderSlurs=e.drawSlurs),void 0!==e.measureNumberInterval&&(this.rules.MeasureNumberLabelOffset=e.measureNumberInterval),void 0!==e.useXMLMeasureNumbers&&(this.rules.UseXMLMeasureNumbers=e.useXMLMeasureNumbers),void 0!==e.fingeringPosition&&(this.rules.FingeringPosition=S.AbstractExpression.PlacementEnumFromString(e.fingeringPosition)),void 0!==e.fingeringInsideStafflines&&(this.rules.FingeringInsideStafflines=e.fingeringInsideStafflines),void 0!==e.newSystemFromXML&&(this.rules.NewSystemAtXMLNewSystemAttribute=e.newSystemFromXML),void 0!==e.newSystemFromNewPageInXML&&(this.rules.NewSystemAtXMLNewPageAttribute=e.newSystemFromNewPageInXML),void 0!==e.newPageFromXML&&(this.rules.NewPageAtXMLNewPageAttribute=e.newPageFromXML),void 0!==e.fillEmptyMeasuresWithWholeRest&&(this.rules.FillEmptyMeasuresWithWholeRest=e.fillEmptyMeasuresWithWholeRest),void 0!==e.followCursor&&(this.FollowCursor=e.followCursor),void 0!==e.setWantedStemDirectionByXml&&(this.rules.SetWantedStemDirectionByXml=e.setWantedStemDirectionByXml),e.darkMode?(this.rules.applyDefaultColorMusic("#FFFFFF"),this.rules.PageBackgroundColor="#000000",this.rules.DarkModeEnabled=!0):!1===e.darkMode&&(this.rules.applyDefaultColorMusic("#000000"),this.rules.PageBackgroundColor=void 0,this.rules.DarkModeEnabled=!1),e.defaultColorMusic&&this.rules.applyDefaultColorMusic(e.defaultColorMusic),e.defaultColorNotehead&&(this.rules.DefaultColorNotehead=e.defaultColorNotehead),e.defaultColorRest&&(this.rules.DefaultColorRest=e.defaultColorRest),e.defaultColorStem&&(this.rules.DefaultColorStem=e.defaultColorStem),e.defaultColorLabel&&(this.rules.DefaultColorLabel=e.defaultColorLabel),e.defaultColorTitle&&(this.rules.DefaultColorTitle=e.defaultColorTitle),e.defaultFontFamily&&(this.rules.DefaultFontFamily=e.defaultFontFamily),e.defaultFontStyle&&(this.rules.DefaultFontStyle=e.defaultFontStyle),e.drawUpToMeasureNumber>=0&&(this.rules.MaxMeasureToDrawIndex=Math.max(e.drawUpToMeasureNumber-1,0),this.rules.MaxMeasureToDrawNumber=e.drawUpToMeasureNumber),e.drawFromMeasureNumber>=0&&(this.rules.MinMeasureToDrawIndex=Math.max(e.drawFromMeasureNumber-1,0),this.rules.MinMeasureToDrawNumber=e.drawFromMeasureNumber),e.drawUpToPageNumber&&(this.rules.MaxPageToDrawNumber=e.drawUpToPageNumber),e.drawUpToSystemNumber&&(this.rules.MaxSystemToDrawNumber=e.drawUpToSystemNumber),e.tupletsRatioed&&(this.rules.TupletsRatioed=!0),e.tupletsBracketed&&(this.rules.TupletsBracketed=!0),e.tripletsBracketed&&(this.rules.TripletsBracketed=!0),e.autoResize?(this.resizeHandlerAttached||this.autoResize(),this.autoResizeEnabled=!0):!1===e.autoResize&&(this.autoResizeEnabled=!1),void 0!==e.pageFormat&&this.setPageFormat(e.pageFormat),void 0!==e.pageBackgroundColor&&(this.rules.PageBackgroundColor=e.pageBackgroundColor),void 0!==e.renderSingleHorizontalStaffline&&(this.rules.RenderSingleHorizontalStaffline=e.renderSingleHorizontalStaffline),void 0!==e.spacingFactorSoftmax&&(this.rules.SoftmaxFactorVexFlow=e.spacingFactorSoftmax),void 0!==e.spacingBetweenTextLines&&(this.rules.SpacingBetweenTextLines=e.spacingBetweenTextLines),void 0!==e.stretchLastSystemLine&&(this.rules.StretchLastSystemLine=e.stretchLastSystemLine),void 0!==e.autoGenerateMultipleRestMeasuresFromRestMeasures&&(this.rules.AutoGenerateMultipleRestMeasuresFromRestMeasures=e.autoGenerateMultipleRestMeasuresFromRestMeasures),void 0!==e.cursorsOptions?this.cursorsOptions=e.cursorsOptions:this.cursorsOptions=[{type:y.CursorType.Standard,color:this.EngravingRules.DefaultColorCursor,alpha:.5,follow:!0}],void 0!==e.preferredSkyBottomLineBatchCalculatorBackend&&(this.rules.PreferredSkyBottomLineBatchCalculatorBackend=e.preferredSkyBottomLineBatchCalculatorBackend),void 0!==e.skyBottomLineBatchMinMeasures&&(this.rules.SkyBottomLineBatchMinMeasures=e.skyBottomLineBatchMinMeasures)}setColoringMode(e){if(e.coloringMode===v.ColoringModes.XML)return void(this.rules.ColoringMode=v.ColoringModes.XML);const t=[_.NoteEnum.C,_.NoteEnum.D,_.NoteEnum.E,_.NoteEnum.F,_.NoteEnum.G,_.NoteEnum.A,_.NoteEnum.B];let n;if(e.coloringMode===v.ColoringModes.CustomColorSet){if(!e.coloringSetCustom||8!==e.coloringSetCustom.length)throw new Error("Invalid amount of colors: With coloringModes.customColorSet, you have to provide a coloringSetCustom parameter (array) with 8 strings (C to B, rest note).");for(const t of e.coloringSetCustom)if(!/^\#[0-9a-fA-F]{6}$/.test(t))throw new Error("One of the color strings in options.coloringSetCustom was not a valid HTML Hex color:\n"+t);n=e.coloringSetCustom}else if(e.coloringMode===v.ColoringModes.AutoColoring){n=[];const e=Object.keys(E.AutoColorSet);for(let t=0;t<e.length;t++)n.push(E.AutoColorSet[e[t]])}const i=new w.Dictionary;for(let s=0;s<t.length;s++)i.setValue(t[s],n[s]);i.setValue(-1,n.last()),this.rules.ColoringSetCurrent=i,this.rules.ColoringMode=e.coloringMode}setLogLevel(e){switch(e){case"trace":m.default.setLevel(m.default.levels.TRACE);break;case"debug":m.default.setLevel(m.default.levels.DEBUG);break;case"info":m.default.setLevel(m.default.levels.INFO);break;case"warn":m.default.setLevel(m.default.levels.WARN);break;case"error":m.default.setLevel(m.default.levels.ERROR);break;case"silent":m.default.setLevel(m.default.levels.SILENT);break;default:m.default.warn("Could not set log level to ".concat(e,". Using warn instead.")),m.default.setLevel(m.default.levels.WARN)}}getLogLevel(){return m.default.getLevel()}reset(){this.drawingParameters.drawCursors&&this.cursors.forEach((e=>{e.hide()})),this.sheet=void 0,this.graphic=void 0,this.zoom=1,this.rules.RenderCount=0}autoResize(){const e=this;this.handleResize((()=>{}),(()=>{var t;(null===(t=this.graphic)||void 0===t?void 0:t.GetCalculator)instanceof r.VexFlowMusicSheetCalculator&&(this.graphic.GetCalculator.beamsNeedUpdate=!0),e.IsReadyToRender()&&e.renderAndScrollBack()}))}renderAndScrollBack(){const e=window.scrollY/document.body.scrollHeight;this.render();const t=document.body.scrollHeight*e;window.scrollTo({top:t,behavior:"instant"})}handleResize(e,t){let n,i;const s=this;function r(){s.AutoResizeEnabled&&(n=(new Date).getTime(),i||(e(),n=(new Date).getTime(),i=window.setTimeout(a,200)))}function a(){i=void 0,window.clearTimeout(i),(new Date).getTime()-n<200?i=window.setTimeout(a,200):t()}window.attachEvent?window.attachEvent("onresize",r):window.addEventListener("resize",r),this.resizeHandlerAttached=!0,window.setTimeout(e,0),window.setTimeout(t,1)}enableOrDisableCursors(e){if(this.drawingParameters.drawCursors=e,e)for(let a=0;a<this.cursorsOptions.length;a++){var t,n,i,s,r;const e=null===(t=null===(n=this.cursors[a])||void 0===n?void 0:n.Hidden)||void 0===t||t,o=null===(i=this.cursors[a])||void 0===i?void 0:i.Iterator;null===(s=this.cursors[a])||void 0===s||s.hide();let l=null===(r=this.drawer)||void 0===r?void 0:r.Backends[0];if(l&&this.rules.RestoreCursorAfterRerender&&this.cursors[a]){const e=this.cursors[a].updateCurrentPage();l=this.drawer.Backends[e-1]}l&&l.getRenderElement()&&(this.cursors[a]=new d.Cursor(l.getRenderElement(),this,this.cursorsOptions[a])),this.sheet&&this.graphic&&this.cursors[a]&&this.cursors[a].init(this.sheet.MusicPartManager,this.graphic),this.rules.RestoreCursorAfterRerender&&(this.cursors[a].hidden=e,o&&(this.cursors[a].iterator=o,this.cursors[a].update()))}else this.cursors.forEach((e=>{e.hide()}))}createBackend(e,t){let n;return n=void 0===e||e===y.BackendType.SVG?new h.SvgVexFlowBackend(this.rules):new u.CanvasVexFlowBackend(this.rules),n.graphicalMusicPage=t,n.initialize(this.container,this.zoom),n}static StringToPageFormat(e){let t=x.PageFormat.UndefinedPageFormat;if(e.match("^[0-9]+x[0-9]+$")){const n=e.split("x"),i=Number.parseInt(n[0],10),s=Number.parseInt(n[1],10);i>0&&i<32768&&s>0&&s<32768&&(t=new x.PageFormat(i,s,"customPageFormat".concat(e)))}return e=(e=(e=e.replace(" ","_")).replace("Landscape","L")).replace("Portrait","P"),M.PageFormatStandards.hasOwnProperty(e)?(t=M.PageFormatStandards[e],t):t}setPageFormat(e){const t=M.StringToPageFormat(e);this.needBackendUpdate=!t.Equals(this.rules.PageFormat),this.rules.PageFormat=t}setCustomPageFormat(e,t){if(e>0&&t>0){const n=new x.PageFormat(e,t);this.rules.PageFormat=n}}set DrawSkyLine(e){this.drawSkyLine=e,this.drawer&&(this.drawer.skyLineVisible=e)}get DrawSkyLine(){return this.drawer.skyLineVisible}set DrawBottomLine(e){this.drawBottomLine=e,this.drawer&&(this.drawer.bottomLineVisible=e)}get DrawBottomLine(){return this.drawer.bottomLineVisible}set DrawBoundingBox(e){this.setDrawBoundingBox(e,!0)}get DrawBoundingBox(){return this.drawBoundingBox}setDrawBoundingBox(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.drawBoundingBox=e,this.drawer&&(this.drawer.drawableBoundingBoxElement=e),t&&this.renderAndScrollBack()}get AutoResizeEnabled(){return this.autoResizeEnabled}set AutoResizeEnabled(e){this.autoResizeEnabled=e}get Zoom(){return this.zoom}set Zoom(e){var t;this.zoom=e,this.zoomUpdated=!0,(null===(t=this.graphic)||void 0===t?void 0:t.GetCalculator)instanceof r.VexFlowMusicSheetCalculator&&(this.graphic.GetCalculator.beamsNeedUpdate=this.zoomUpdated)}set FollowCursor(e){this.followCursor=e}get FollowCursor(){return this.followCursor}set TransposeCalculator(e){l.MusicSheetCalculator.transposeCalculator=e}get TransposeCalculator(){return l.MusicSheetCalculator.transposeCalculator}get Sheet(){return this.sheet}get Drawer(){return this.drawer}get GraphicSheet(){return this.graphic}get DrawingParameters(){return this.drawingParameters}get EngravingRules(){return this.rules}get Version(){return this.version}}t.OpenSheetMusicDisplay=M,M.PageFormatStandards={A3_L:new x.PageFormat(420,297,"A3_L"),A3_P:new x.PageFormat(297,420,"A3_P"),A4_L:new x.PageFormat(297,210,"A4_L"),A4_P:new x.PageFormat(210,297,"A4_P"),A5_L:new x.PageFormat(210,148,"A5_L"),A5_P:new x.PageFormat(148,210,"A5_P"),A6_L:new x.PageFormat(148,105,"A6_L"),A6_P:new x.PageFormat(105,148,"A6_P"),Endless:x.PageFormat.UndefinedPageFormat,Letter_L:new x.PageFormat(279.4,215.9,"Letter_L"),Letter_P:new x.PageFormat(215.9,279.4,"Letter_P")}},7109:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowPedal=void 0;const s=i(n(3206)),r=n(6438),a=n(7824),o=n(512);class l extends a.GraphicalPedal{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];switch(super(e,t),this.vfStyle=s.default.Flow.PedalMarking.Styles.BRACKET,this.ChangeBegin=!1,this.ChangeEnd=!1,this.line=-3,this.EndSymbolPositionAndShape=void 0,this.ChangeBegin=e.ChangeBegin,this.ChangeEnd=e.ChangeEnd,this.pedalSymbol){case o.MusicSymbol.PEDAL_SYMBOL:this.vfStyle=s.default.Flow.PedalMarking.Styles.TEXT,this.EndSymbolPositionAndShape=new r.BoundingBox(this,t);break;case o.MusicSymbol.PEDAL_MIXED:this.vfStyle=n&&i?s.default.Flow.PedalMarking.Styles.BRACKET_OPEN_BOTH:n?s.default.Flow.PedalMarking.Styles.BRACKET_OPEN_BEGIN:i?s.default.Flow.PedalMarking.Styles.MIXED_OPEN_END:s.default.Flow.PedalMarking.Styles.MIXED;break;case o.MusicSymbol.PEDAL_BRACKET:default:this.vfStyle=n&&i?s.default.Flow.PedalMarking.Styles.BRACKET_OPEN_BOTH:n?s.default.Flow.PedalMarking.Styles.BRACKET_OPEN_BEGIN:i?s.default.Flow.PedalMarking.Styles.BRACKET_OPEN_END:s.default.Flow.PedalMarking.Styles.BRACKET}}setStartNote(e){if(!e)return!1;for(const t of e.graphicalVoiceEntries){const e=t;if(null!==e&&void 0!==e&&e.vfStaveNote)return this.startNote=e.vfStaveNote,this.startVfVoiceEntry=e,!0}return!1}setEndNote(e){if(!e)return!1;for(const t of e.graphicalVoiceEntries){const e=t;if(null!==e&&void 0!==e&&e.vfStaveNote)return this.endNote=e.vfStaveNote,this.endVfVoiceEntry=e,!0}return!1}setEndMeasure(e){this.endMeasure=e}CalculateBoundingBox(){}setLine(e){this.line=e}getPedalMarking(){const e=new s.default.Flow.PedalMarking([this.startNote,this.endNote]);return this.endMeasure&&e.setEndStave(this.endMeasure.getVFStave()),e.setStyle(this.vfStyle),e.setLine(this.line),e.setCustomText(this.DepressText,this.ReleaseText),this.endVfVoiceEntry&&!this.getPedal.EndsStave||(e.EndsStave=!0),this.getPedal.BeginsStave&&(e.BeginsStave=!0),e.ChangeBegin=this.ChangeBegin,e.ChangeEnd=this.ChangeEnd,e}setEndsStave(e,t){(null===t||void 0===t?void 0:t.gte(e.parentSourceMeasure.Duration))&&(this.getPedal.EndsStave=!0)}setBeginsStave(e,t){e&&0===t.RealValue&&(this.getPedal.BeginsStave=!0)}}t.VexFlowPedal=l},7225:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7307:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidEnumArgumentException=t.ArgumentOutOfRangeException=t.MusicSheetReadingException=void 0,t.MusicSheetReadingException=class{constructor(e,t){this.message=e,t&&(this.message+=" "+t.toString())}},t.ArgumentOutOfRangeException=class{constructor(e){this.message=e}},t.InvalidEnumArgumentException=class{constructor(e){this.message=e}}},7435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Label=void 0;const i=n(7533);t.Label=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.TextAlignmentEnum.CenterBottom,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.IsCreditLabel=!1,this.text=e,this.print=s,this.textAlignment=t,this.font=n,this.fontFamily=void 0}ToString(){return this.text}}},7456:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(4236),t),s(n(8365),t),s(n(9719),t),s(n(7718),t),s(n(4249),t),s(n(1850),t),s(n(4064),t),s(n(5282),t),s(n(8215),t),s(n(4387),t),s(n(2369),t),s(n(1910),t),s(n(6644),t),s(n(5274),t),s(n(4268),t),s(n(3236),t),s(n(5534),t),s(n(1336),t),s(n(9184),t),s(n(1850),t),s(n(5282),t),s(n(4387),t),s(n(2369),t),s(n(3236),t),s(n(5274),t)},7499:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(1083),t),s(n(9834),t),s(n(9436),t),s(n(1902),t),s(n(2400),t),s(n(6014),t),s(n(1216),t),s(n(9635),t),s(n(3753),t),s(n(7809),t),s(n(7098),t),s(n(3109),t),s(n(5246),t),s(n(3849),t),s(n(806),t),s(n(9479),t),s(n(4332),t),s(n(9310),t),s(n(5468),t),s(n(6670),t),s(n(5866),t),s(n(7506),t),s(n(6173),t),s(n(7785),t),s(n(4134),t)},7503:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReaderPluginManager=void 0;const s=i(n(3065));t.ReaderPluginManager=class{constructor(){this.voiceMeasureReadPlugins=[]}addVoiceMeasureReadPlugin(e){this.voiceMeasureReadPlugins.push(e)}processVoiceMeasureReadPlugins(e,t,n){for(const i of this.voiceMeasureReadPlugins)try{i.measureReadCalculations(e,t,n)}catch(e){s.default.info("VoiceGenerator.addSingleNote: ",e)}}}},7506:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexflowStafflineNoteCalculator=void 0;const i=n(8233),s=n(9635),r=n(3263),a=n(164),o=n(1336);class l{constructor(e){this.staffPitchListMapping=new r.Dictionary,this.baseLineNote=i.NoteEnum.B,this.baseLineOctave=1,this.rules=e}trackNote(e){if(!(e instanceof s.VexFlowGraphicalNote)||e.Clef().ClefType!==a.ClefEnum.percussion||e.sourceNote.isRest()||0===this.rules.PercussionOneLineCutoff||-1===this.rules.PercussionForceVoicesOneLineCutoff)return;const t=e.parentVoiceEntry.parentStaffEntry.sourceStaffEntry.ParentStaff.idInMusicSheet;let n;this.staffPitchListMapping.containsKey(t)||this.staffPitchListMapping.setValue(t,new Array),n=this.staffPitchListMapping.getValue(t);const i=e.sourceNote.Pitch;l.findOrInsert(n,i)}static PitchIndexOf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n>e.length-1)return-1;for(let i=n;i<e.length;i++){const n=e[i];if(t.OperatorEquals(n))return i}return-1}static findOrInsert(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(t.OperatorEquals(i))return n;if(t.OperatorFundamentalLessThan(i))return e.splice(n,0,t),n}return e.push(t),e.length-1}positionNote(e){const t=e.parentVoiceEntry.parentStaffEntry.sourceStaffEntry.ParentStaff.idInMusicSheet;if(!(e instanceof s.VexFlowGraphicalNote)||e.sourceNote.isRest()||!this.staffPitchListMapping.containsKey(t))return e;const n=this.staffPitchListMapping.getValue(t),r=this.rules.PercussionUseXMLDisplayStep&&void 0!==e.sourceNote.displayStepUnpitched;if(n.length>this.rules.PercussionOneLineCutoff&&!r&&!this.rules.PercussionUseCajon2NoteSystem)return e;const a=e,c=e.sourceNote.Pitch;let h=this.baseLineNote,u=this.baseLineOctave;if(this.rules.PercussionUseCajon2NoteSystem?c.FundamentalNote===i.NoteEnum.C&&(h=i.NoteEnum.G,u=1):this.rules.PercussionUseXMLDisplayStep&&void 0!==e.sourceNote.displayStepUnpitched&&(h=e.sourceNote.displayStepUnpitched,u=e.sourceNote.displayOctaveUnpitched+this.rules.PercussionOneLineXMLDisplayStepOctaveOffset),n.length<=this.rules.PercussionForceVoicesOneLineCutoff)a.setAccidental(new i.Pitch(h,u,c.Accidental));else{const e=l.PitchIndexOf(n,c);if(e>-1){const t=Math.ceil(n.length/2);if(!this.rules.PercussionUseXMLDisplayStep)if(e>=t)switch(u=2,(e-t)%5){case 1:h=i.NoteEnum.E;break;case 2:h=i.NoteEnum.G;break;case 3:h=i.NoteEnum.B;break;case 4:h=i.NoteEnum.D,u=3;break;default:h=i.NoteEnum.C}else switch(e%5){case 1:h=i.NoteEnum.F;break;case 2:h=i.NoteEnum.D;break;case 3:h=i.NoteEnum.B,u=0;break;case 4:h=i.NoteEnum.G,u=0;break;default:h=i.NoteEnum.A}const s=new i.Pitch(h,u,c.Accidental);a.setAccidental(s);const r=a.parentVoiceEntry.parentVoiceEntry;!this.rules.SetWantedStemDirectionByXml&&r.Notes.length<2&&(s.Octave>this.baseLineOctave||s.FundamentalNote===this.baseLineNote&&s.Octave===this.baseLineOctave?a.parentVoiceEntry.parentVoiceEntry.WantedStemDirection=o.StemDirectionType.Up:a.parentVoiceEntry.parentVoiceEntry.WantedStemDirection=o.StemDirectionType.Down)}}return a}getStafflineUniquePositionCount(e){return this.staffPitchListMapping.containsKey(e)?this.staffPitchListMapping.getValue(e).length:0}}t.VexflowStafflineNoteCalculator=l},7533:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TextAlignment=t.TextAlignmentEnum=void 0,function(e){e[e.LeftTop=0]="LeftTop",e[e.LeftCenter=1]="LeftCenter",e[e.LeftBottom=2]="LeftBottom",e[e.CenterTop=3]="CenterTop",e[e.CenterCenter=4]="CenterCenter",e[e.CenterBottom=5]="CenterBottom",e[e.RightTop=6]="RightTop",e[e.RightCenter=7]="RightCenter",e[e.RightBottom=8]="RightBottom"}(n||(t.TextAlignmentEnum=n={})),t.TextAlignment=class{static IsLeft(e){return e===n.LeftTop||e===n.LeftCenter||e===n.LeftBottom}static IsCenterAligned(e){return e===n.CenterTop||e===n.CenterCenter||e===n.CenterBottom}static IsRight(e){return e===n.RightTop||e===n.RightCenter||e===n.RightBottom}}},7551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PartListEntry=void 0,t.PartListEntry=class{constructor(e){this.enrolledTimestamps=[],this.visible=!0,this.musicSheet=e}get Visible(){return this.visible}set Visible(e){this.visible=e}getFirstSourceMeasure(){return this.musicSheet.SourceMeasures[this.startIndex]}getLastSourceMeasure(){return this.musicSheet.SourceMeasures[this.endIndex]}}},7586:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstrumentalGroup=void 0,t.InstrumentalGroup=class{constructor(e,t,n){this.instrumentalGroups=[],this.name=e,this.musicSheet=t,this.parent=n}get InstrumentalGroups(){return this.instrumentalGroups}get Parent(){return this.parent}get Name(){return this.name}set Name(e){this.name=e}get GetMusicSheet(){return this.musicSheet}}},7624:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionEndSymbol=void 0;const i=n(7741),s=n(2683),r=n(9409),a=n(6438),o=n(6452),l=n(813);class c extends i.GraphicalObject{constructor(e,t){super();const n=t,i=e.PositionAndShape.AbsolutePosition.y,c=l.CollectionUtil.last(e.StaffLines).PositionAndShape.RelativePosition.y+4;this.verticalLine=new o.GraphicalLine(new r.PointF2D(n,i),new r.PointF2D(n,i+c),.4,s.OutlineAndFillStyleEnum.SelectionSymbol);for(let s=0,a=e.StaffLines.length;s<a;++s){const t=e.StaffLines[s],a=new r.PointF2D(n,i+t.PositionAndShape.RelativePosition.y),o=new Array(3);a.y-=.2,o[0].x=a.x-3,o[0].y=a.y+1.2,o[1].x=a.x-2,o[1].y=a.y+.4,o[2].x=a.x-2,o[2].y=a.y+2,this.arrows.push(o);const l=new Array(8),c=.8;a.x-=.1,a.y+=.3;const h=.2;l[0].x=a.x-2,l[0].y=a.y+1.5-h,l[1].x=a.x-1,l[1].y=a.y+1.5-h,l[2].x=a.x-1,l[2].y=a.y+2.5,l[3].x=a.x-2,l[3].y=a.y+2.5,l[4].x=l[0].x,l[4].y=l[0].y-c,l[5].x=l[4].x+c+1,l[5].y=l[4].y,l[6].x=l[5].x,l[6].y=l[3].y+c,l[7].x=l[3].x,l[7].y=l[6].y,this.arrowlines.push(l)}this.boundingBox=new a.BoundingBox(this),this.boundingBox.AbsolutePosition=new r.PointF2D(n,i),this.boundingBox.BorderLeft=-.4,this.boundingBox.BorderRight=4,this.boundingBox.BorderBottom=c}}t.SelectionEndSymbol=c},7631:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RepetitionInstructionReader=void 0;const i=n(1645),s=n(1645),r=n(4356);t.RepetitionInstructionReader=class{set MusicSheet(e){this.musicSheet=e,this.xmlMeasureList=new Array(this.musicSheet.Instruments.length),this.repetitionInstructions=[]}prepareReadingMeasure(e,t){this.currentMeasureIndex=t}handleLineRepetitionInstructions(e){let t=!1;if(e.elements().length>0){let s="",r=!1,a="",o="",l="";const c=[],h=e.element("bar-style");h&&(l=h.value),s=e.attributes().length>0&&e.attribute("location")?e.attribute("location").value:"right";const u=e.elements();for(let e=0,t=u.length;e<t;++e){const t=u[e];if("repeat"===t.name&&t.hasAttributes)r=!0,a=t.attribute("direction").value;else if("ending"===t.name&&t.hasAttributes&&void 0!==t.attribute("type")&&t.attribute("number")){var n;if("no"===(null===(n=t.attribute("print-object"))||void 0===n?void 0:n.value))continue;o=t.attribute("type").value;let e=t.attribute("number").value;t.value&&(e=t.value);const i=e.split("[,+]");for(let t=0,n=i.length;t<n;++t){const e=i[t],n=e.match("[0-9]");if(-1!==e.search("-")&&2===n.length){const e=parseInt(n[0],10),t=parseInt(n[1],10);for(let n=e;n<=t;n++)c.push(n)}else for(let t=0,i=n.length;t<i;++t){const e=n[t];c.push(parseInt(e,10))}}}}if("light-heavy"!==l||0!==c.length||r||(t=!0),r||c.length>0)if("left"===s){if("start"===o){const e=new i.RepetitionInstruction(this.currentMeasureIndex,i.RepetitionInstructionEnum.Ending,i.AlignmentType.Begin,void 0,c);this.addInstruction(this.repetitionInstructions,e)}if("forward"===a){const e=new i.RepetitionInstruction(this.currentMeasureIndex,i.RepetitionInstructionEnum.StartLine);this.addInstruction(this.repetitionInstructions,e)}}else{if("stop"===o){const e=new i.RepetitionInstruction(this.currentMeasureIndex,i.RepetitionInstructionEnum.Ending,i.AlignmentType.End,void 0,c);this.addInstruction(this.repetitionInstructions,e)}if("backward"===a){const e=new i.RepetitionInstruction(this.currentMeasureIndex,i.RepetitionInstructionEnum.BackJumpLine);this.addInstruction(this.repetitionInstructions,e)}}}return t}handleRepetitionInstructionsFromWordsOrSymbols(e,t){const n=e.element("words"),s=this.currentMeasureIndex;if(n){const e="d\\s?\\.s\\.",t=n.value.trim().toLowerCase();if(r.StringUtil.StringContainsSeparatedWord(t,e+" al fine",!0)){const e=new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.DalSegnoAlFine);return this.addInstruction(this.repetitionInstructions,e),!0}const a="d\\.\\s?c\\.";if(r.StringUtil.StringContainsSeparatedWord(t,a+" al coda",!0)){const e=new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.DaCapoAlCoda);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,a+" al fine",!0)){const e=new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.DaCapoAlFine);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,a+" al coda",!0)){const e=new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.DaCapoAlCoda);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,a)||r.StringUtil.StringContainsSeparatedWord(t,"da\\s?capo",!0)){const e=new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.DaCapo);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,e,!0)||r.StringUtil.StringContainsSeparatedWord(t,"dal\\s?segno",!0)){let e;return e=r.StringUtil.StringContainsSeparatedWord(t,"al\\s?coda",!0)?new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.DalSegnoAlCoda):new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.DalSegno),this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,"to\\s?coda",!0)||r.StringUtil.StringContainsSeparatedWord(t,"a (la )?coda",!0)){const e=new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.ToCoda);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,"fine",!0)){const e=new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.Fine);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,"coda",!0)){const e=new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.Coda);return this.addInstruction(this.repetitionInstructions,e),!0}if(r.StringUtil.StringContainsSeparatedWord(t,"segno",!0)){const e=new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.Segno);return this.addInstruction(this.repetitionInstructions,e),!0}}else{if(e.element("segno")){const e=new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.Segno);return this.addInstruction(this.repetitionInstructions,e),!0}if(e.element("coda")){const e=new i.RepetitionInstruction(s,i.RepetitionInstructionEnum.Coda);return this.addInstruction(this.repetitionInstructions,e),!0}}return!1}removeRedundantInstructions(){let e=0,t=0,n=0,r=0;for(let s=0;s<this.repetitionInstructions.length;s++){const a=this.repetitionInstructions[s];switch(a.type){case i.RepetitionInstructionEnum.Coda:n>0&&this.findInstructionInPreviousMeasure(s,a.measureIndex,i.RepetitionInstructionEnum.ToCoda)&&(a.type=i.RepetitionInstructionEnum.None);break;case i.RepetitionInstructionEnum.Segno:if(e-r>0){let e=!1;for(let s=0,r=this.repetitionInstructions.length;s<r;++s){const r=this.repetitionInstructions[s];if(a.measureIndex-r.measureIndex==1)switch(r.type){case i.RepetitionInstructionEnum.BackJumpLine:r.type=n-t>0?i.RepetitionInstructionEnum.DalSegnoAlCoda:i.RepetitionInstructionEnum.DalSegno,a.type=i.RepetitionInstructionEnum.None,e=!0;break;case i.RepetitionInstructionEnum.DalSegno:case i.RepetitionInstructionEnum.DalSegnoAlFine:case i.RepetitionInstructionEnum.DalSegnoAlCoda:a.type=i.RepetitionInstructionEnum.None,e=!0}if(e)break}if(e)break;a.type=n-t>0?i.RepetitionInstructionEnum.DalSegnoAlCoda:i.RepetitionInstructionEnum.DalSegno,a.alignment=i.AlignmentType.End,a.measureIndex--}}if(this.backwardSearchForPreviousIdenticalInstruction(s,a)||a.type===i.RepetitionInstructionEnum.None)this.repetitionInstructions.splice(s,1),s--;else switch(a.type){case i.RepetitionInstructionEnum.Fine:break;case i.RepetitionInstructionEnum.ToCoda:n++;break;case i.RepetitionInstructionEnum.Coda:t++;break;case i.RepetitionInstructionEnum.Segno:e++;break;case i.RepetitionInstructionEnum.DalSegnoAlFine:case i.RepetitionInstructionEnum.DalSegnoAlCoda:r++}}this.repetitionInstructions.sort(s.RepetitionInstructionComparer.Compare)}findInstructionInPreviousMeasure(e,t,n){for(let i=e-1;i>=0;i--){const e=this.repetitionInstructions[i];if(t-e.measureIndex==1&&e.type===n)return!0}return!1}backwardSearchForPreviousIdenticalInstruction(e,t){for(let n=e-1;n>=0;n--)if(this.repetitionInstructions[n].equals(t))return!0;return!1}addInstruction(e,t){let n=!0;for(let i=0,s=e.length;i<s;++i){const s=e[i];if(t.equals(s)){n=!1;break}}n&&e.push(t)}}},7718:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Glissando=void 0;const i=n(2561),s=n(6438);t.Glissando=class{constructor(e){this.notes=[],this.XMLNumber=1,this.AddNote(e),this.StartNote=e,this.Direction=s.ColDirEnum.NotYetDefined}get Notes(){return this.notes}get Duration(){const e=new i.Fraction;for(const t of this.notes)e.Add(t.Length);return e}get Pitch(){return this.StartNote.Pitch}AddNote(e){this.notes.push(e),e.NoteGlissando=this,2===this.notes.length&&(this.notes[0].Pitch.getHalfTone()<this.notes[1].Pitch.getHalfTone()?this.Direction=s.ColDirEnum.Up:this.Direction=s.ColDirEnum.Down)}}},7741:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalObject=void 0;const i=n(7791);class s extends i.AClassHierarchyTrackable{get PositionAndShape(){return this.boundingBox}set PositionAndShape(e){this.boundingBox=e}}t.GraphicalObject=s},7751:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalLyricWord=void 0,t.GraphicalLyricWord=class{constructor(e){this.graphicalLyricsEntries=[],this.lyricWord=e,this.initialize()}get GetLyricWord(){return this.lyricWord}get GraphicalLyricsEntries(){return this.graphicalLyricsEntries}set GraphicalLyricsEntries(e){this.graphicalLyricsEntries=e}isFilled(){for(let e=0;e<this.graphicalLyricsEntries.length;e++)if(!this.graphicalLyricsEntries[e])return!1;return!0}initialize(){for(let e=0;e<this.lyricWord.Syllables.length;e++)this.graphicalLyricsEntries.push(void 0)}}},7785:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowTextMeasurer=void 0;const i=n(6014);t.VexFlowTextMeasurer=class{constructor(e){this.fontSize=20,this.fontSizeStandard=this.fontSize;const t=document.createElement("canvas");this.context=t.getContext("2d"),this.rules=e}computeTextWidthToHeightRatio(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.fontSize;return this.context.font=i.VexFlowConverter.font(r,n,t,this.rules,s),this.context.measureText(e).width/r}setFontSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.fontSizeStandard;return this.fontSize=e,e}}},7791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AClassHierarchyTrackable=void 0,t.AClassHierarchyTrackable=class{isInstanceOfClass(e){let t=this.constructor.prototype;for(;t;){if(e===t.constructor.name)return!0;t=t.__proto__}return!1}}},7809:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowInstantaneousDynamicExpression=void 0;const i=n(5023),s=n(2148),r=n(8254),a=n(7435),o=n(7533),l=n(2570);class c extends i.GraphicalInstantaneousDynamicExpression{constructor(e,t,n){super(e,t,n);const i=new a.Label(this.Expression);this.label=new r.GraphicalLabel(i,this.rules.ContinuousDynamicTextHeight,o.TextAlignmentEnum.CenterCenter,this.rules,this.PositionAndShape),this.label.Label.fontStyle=l.FontStyles.BoldItalic,this.label.setLabelPositionAndShapeBorders(),this.PositionAndShape.calculateBoundingBox()}get InstantaneousDynamic(){return this.mInstantaneousDynamicExpression}get Expression(){return s.DynamicEnum[this.mInstantaneousDynamicExpression.DynEnum]}}t.VexFlowInstantaneousDynamicExpression=c},7824:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalPedal=void 0;const i=n(7741),s=n(6438),r=n(512);class a extends i.GraphicalObject{constructor(e,t){super(),this.getPedal=e,this.setSymbol(),this.PositionAndShape=new s.BoundingBox(this,t)}setSymbol(){!this.getPedal.IsLine&&this.getPedal.IsSign?this.pedalSymbol=r.MusicSymbol.PEDAL_SYMBOL:this.getPedal.IsLine&&this.getPedal.IsSign?this.pedalSymbol=r.MusicSymbol.PEDAL_MIXED:this.pedalSymbol=r.MusicSymbol.PEDAL_BRACKET}}t.GraphicalPedal=a},7921:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSheetCalculator=void 0;const s=n(8724),r=n(2561),a=n(1850),o=n(5748),l=n(164),c=n(437),h=n(1336),u=n(7066),d=n(9409),f=n(2369),p=n(8254),m=n(7533),g=n(4543),b=n(3123),v=n(4249),y=n(6438),x=n(8033),S=n(8927),w=n(164),E=i(n(3065)),_=n(3263),T=n(6452),M=n(7435),C=n(3236),A=n(6362),P=n(3361),N=n(9161),k=n(2221),L=n(5875),I=n(1066),R=n(624),O=n(5824),D=n(5534),F=n(9647);class B{constructor(){this.staffEntriesWithGraphicalTies=[],this.staffEntriesWithOrnaments=[],this.staffEntriesWithChordSymbols=[],this.staffLinesWithLyricWords=[],this.graphicalLyricWords=[],this.abstractNotImplementedErrorMessage="abstract, not implemented",this.dynamicExpressionMap=new Map}static get TextMeasurer(){return B.textMeasurer}static set TextMeasurer(e){B.textMeasurer=e}get leadSheet(){return this.graphicalMusicSheet.LeadSheet}static setMeasuresMinStaffEntriesWidth(e,t){for(let n=0,i=e.length;n<i;++n){const i=e[n];i&&(i.minimumStaffEntriesWidth=t)}}initialize(e){this.graphicalMusicSheet=e,this.rules=e.ParentMusicSheet.Rules,this.rules.clearMusicSheetObjects(),this.prepareGraphicalMusicSheet()}prepareGraphicalMusicSheet(){const e=this.graphicalMusicSheet.ParentMusicSheet;this.staffEntriesWithGraphicalTies=[],this.staffEntriesWithOrnaments=[],this.staffEntriesWithChordSymbols=[],this.staffLinesWithLyricWords=[],this.graphicalMusicSheet.Initialize();const t=this.graphicalMusicSheet.MeasureList,n=this.createAccidentalCalculators(),i=this.graphicalMusicSheet.initializeActiveClefs(),s=[],r=e.getCompleteNumberOfStaves(),a=[];for(let l=0;l<r;l++)a.push(void 0);for(let l=0,c=e.SourceMeasures.length;l<c;++l){const r=e.SourceMeasures[l],o=this.createGraphicalMeasuresForSourceMeasure(r,n,s,a,i);if(t.push(o),r.multipleRestMeasures>0&&this.rules.RenderMultipleRestMeasures){r.isReducedToMultiRest=!0,r.multipleRestMeasureNumber=1;const n=r.multipleRestMeasures-1;l+=n;for(let i=1;i<=n;i++){const n=e.SourceMeasures.indexOf(r)+i;if(n>=e.SourceMeasures.length)break;const s=e.SourceMeasures[n];s.multipleRestMeasureNumber=i+1,s.isReducedToMultiRest=!0,t.push([void 0])}}}if(this.rules.AutoGenerateMultipleRestMeasuresFromRestMeasures&&this.rules.RenderMultipleRestMeasures){let r,o=0;for(let l=0,c=e.SourceMeasures.length;l<c;++l){const c=e.SourceMeasures[l];if(!c.isReducedToMultiRest&&c.canBeReducedToMultiRest())if(o>0){r.isReducedToMultiRest=!0,r.multipleRestMeasureNumber=1,o++,c.multipleRestMeasureNumber=o,c.isReducedToMultiRest=!0;for(let e=0;e<t[l].length;e++)t[l][e]=void 0}else r=c,o=1;else if(o>1){r.multipleRestMeasures=o;const e=this.createGraphicalMeasuresForSourceMeasure(r,n,s,a,i);t[r.measureListIndex]=e,o=0,r=void 0}else o=0,r=void 0}if(o>1){r.multipleRestMeasures=o,r.isReducedToMultiRest=!0;const e=this.createGraphicalMeasuresForSourceMeasure(r,n,s,a,i);t[r.measureListIndex]=e,o=0,r=void 0}}const o=i.map((e=>e.ClefType===l.ClefEnum.percussion));this.handleStaffEntries(o),this.calculateVerticalContainersList(),this.setIndicesToVerticalGraphicalContainers()}calculate(){this.musicSystems=[],this.clearSystemsAndMeasures(),this.clearRecreatedObjects(),this.createGraphicalTies(),this.calculateSheetLabelBoundingBoxes(),this.calculateXLayout(this.graphicalMusicSheet,this.maxInstrNameLabelLength()),this.graphicalMusicSheet.MusicPages.length=0,this.calculateMusicSystems(),s.GraphicalMusicSheet.transformRelativeToAbsolutePosition(this.graphicalMusicSheet)}calculateXLayout(e,t){if(this.graphicalMusicSheet.MeasureList.length>0){let e,t=0,i=1;for(let n=0;n<this.graphicalMusicSheet.MeasureList.length;n++){e=this.graphicalMusicSheet.MeasureList[n];let s=this.calculateMeasureXLayout(e);s=this.calculateMeasureWidthFromStaffEntries(e,s),s>t&&(t=s);const r=this.graphicalMusicSheet.ParentMusicSheet.MeasureWidthFactor;for(const t of e)if(null!==t&&void 0!==t&&t.parentSourceMeasure.WidthFactor){i=t.parentSourceMeasure.WidthFactor;break}s*=r*i,B.setMeasuresMinStaffEntriesWidth(e,s)}if(this.rules.FixedMeasureWidth){let i=t;this.rules.FixedMeasureWidthFixedValue&&(i=this.rules.FixedMeasureWidthFixedValue);for(let t=0;t<this.graphicalMusicSheet.MeasureList.length;t++){var n;e=this.graphicalMusicSheet.MeasureList[t],!this.rules.FixedMeasureWidthUseForPickupMeasures&&(null===(n=e[0])||void 0===n?void 0:n.parentSourceMeasure.ImplicitMeasure)||B.setMeasuresMinStaffEntriesWidth(e,i)}}}}calculateMeasureWidthFromStaffEntries(e,t){throw new Error(this.abstractNotImplementedErrorMessage)}formatMeasures(){throw new Error(this.abstractNotImplementedErrorMessage)}calculateMeasureXLayout(e){throw new Error(this.abstractNotImplementedErrorMessage)}initGraphicalMeasuresCreation(){throw new Error(this.abstractNotImplementedErrorMessage)}handleBeam(e,t,n){throw new Error(this.abstractNotImplementedErrorMessage)}handleTiedGraphicalNote(e,t,n,i,s,r,a,o){throw new Error(this.abstractNotImplementedErrorMessage)}handleVoiceEntryLyrics(e,t,n){throw new Error(this.abstractNotImplementedErrorMessage)}handleVoiceEntryOrnaments(e,t,n){throw new Error(this.abstractNotImplementedErrorMessage)}handleVoiceEntryArticulations(e,t,n){throw new Error(this.abstractNotImplementedErrorMessage)}handleVoiceEntryTechnicalInstructions(e,t,n){throw new Error(this.abstractNotImplementedErrorMessage)}handleTuplet(e,t,n){throw new Error(this.abstractNotImplementedErrorMessage)}layoutVoiceEntry(e,t,n,i){throw new Error(this.abstractNotImplementedErrorMessage)}layoutStaffEntry(e){throw new Error(this.abstractNotImplementedErrorMessage)}createGraphicalTie(e,t,n,i,s){throw new Error(this.abstractNotImplementedErrorMessage)}updateStaffLineBorders(e){throw new Error(this.abstractNotImplementedErrorMessage)}calculateMeasureNumberPlacement(e){const t=e.StaffLines[0];if(!t||!t.Measures[0])return void E.default.warn("calculateMeasureNumberPlacement: measure undefined for system.Id "+e.Id);let n=t.Measures[0].MeasureNumber,i=0;for(let s=0;s<t.Measures.length;s++){const r=t.Measures[s];let a=this.rules.RenderMeasureNumbersOnlyAtSystemStart&&s>1;if(1===s&&t.Measures[0].parentSourceMeasure.ImplicitMeasure&&(a=!1),a)return;0!==r.MeasureNumber&&1!==r.MeasureNumber||(n=r.MeasureNumber),i=r!==t.Measures[0]&&this.rules.MeasureNumberLabelXOffset?this.rules.MeasureNumberLabelXOffset:0;const o=this.rules.UseXMLMeasureNumbers&&1===r.MeasureNumber&&1!==r.parentSourceMeasure.getPrintedMeasureNumber();((r.MeasureNumber===n||r.MeasureNumber>=n+this.rules.MeasureNumberLabelOffset)&&!r.parentSourceMeasure.ImplicitMeasure||o)&&((1!==r.MeasureNumber||1===r.MeasureNumber&&r!==t.Measures[0]||o)&&this.calculateSingleMeasureNumberPlacement(r,t,e,i),n=r.MeasureNumber)}}calculateSingleMeasureNumberPlacement(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=e.parentSourceMeasure.getPrintedMeasureNumber().toString(),r=new M.Label(s),a=new p.GraphicalLabel(r,this.rules.MeasureNumberLabelHeight,m.TextAlignmentEnum.LeftBottom,this.rules),o=t.SkyBottomLineCalculator;a.setLabelPositionAndShapeBorders(),a.PositionAndShape.Parent=n.PositionAndShape;const l=t.PositionAndShape.RelativePosition.x+e.PositionAndShape.RelativePosition.x-a.PositionAndShape.BorderMarginLeft+i;let c,h=l,u=l-a.PositionAndShape.BorderLeft+a.PositionAndShape.BorderRight;h-=t.PositionAndShape.RelativePosition.x,u-=t.PositionAndShape.RelativePosition.x;const f=h+.5,g=u-.5,b=o.getSkyLineMinInRange(f,g);if(e===t.Measures[0]){let t=0;if(n.GroupBrackets.length>0)for(const e of n.GroupBrackets)t=Math.min(t,e.PositionAndShape.BorderTop);else e.ParentStaff.ParentInstrument.Parent&&(t=-1);c=Math.min(b,t)}else c=b;c=Math.min(0,c),a.PositionAndShape.RelativePosition=new d.PointF2D(l,c),n.MeasureNumberLabels.push(a)}calculateMeasureNumberSkyline(e){const t=e.StaffLines[0];for(const n of e.MeasureNumberLabels){let e=n.PositionAndShape.RelativePosition.x,i=e-n.PositionAndShape.BorderLeft+n.PositionAndShape.BorderRight;e-=t.PositionAndShape.RelativePosition.x,i-=t.PositionAndShape.RelativePosition.x,t.SkyBottomLineCalculator.updateSkyLineInRange(e,i,n.PositionAndShape.RelativePosition.y+n.PositionAndShape.BorderMarginTop)}}layoutGraphicalTie(e,t,n){throw new Error(this.abstractNotImplementedErrorMessage)}calculateSingleStaffLineLyricsPosition(e,t){let n=0,i=this.rules.StaffHeight;const s=new Map,r=[],a=e.SkyBottomLineCalculator;let o=e.Measures.length;for(let c=0;c<o;++c){const t=e.Measures[c],o=t.PositionAndShape.RelativePosition,l=t.staffEntries.length;for(let e=0;e<l;++e){const l=t.staffEntries[e],c=l.LyricsEntries.length;for(let e=0;e<c;++e){const t=l.LyricsEntries[e].LyricsEntry;s[t.VerseNumber]=t.IsChorus}if(c>0){r.push(l),n=Math.max(n,l.LyricsEntries.length);const e=l.PositionAndShape.RelativePosition.x+o.x;let t=Number.MAX_VALUE,s=Number.MIN_VALUE;for(let n=0;n<l.LyricsEntries.length;n++){const i=l.LyricsEntries[n].GraphicalLabel;t=Math.min(t,e+i.PositionAndShape.BorderMarginLeft),s=Math.max(s,e+i.PositionAndShape.BorderMarginRight)}const c=a.getBottomLineMaxInRange(t,s);i=Math.max(i,c+this.rules.LyricsYMarginToBottomLine)}}}let l=0;o=r.length;for(const c of r){const e=[];let n=!0;for(let t=0;t<c.LyricsEntries.length;t++)n&&(n=c.LyricsEntries[t].LyricsEntry.IsChorus);for(const i of t)s[i]===n&&e.push(i);for(let t=0;t<c.LyricsEntries.length;t++){const n=c.LyricsEntries[t],s=n.GraphicalLabel,r=n.LyricsEntry.VerseNumber,a=e.indexOf(r),o=i+this.rules.LyricsHeight+this.rules.VerticalBetweenLyricsDistance+this.rules.LyricsYOffsetToStaffHeight+(this.rules.VerticalBetweenLyricsDistance+this.rules.LyricsHeight)*a,h=s.PositionAndShape.RelativePosition.x;s.PositionAndShape.RelativePosition=new d.PointF2D(h,o),s.Label.fontStyle=n.LyricsEntry.FontStyle,l=Math.max(l,o)}}if(r.length>0){const t=e.PositionAndShape.Size.width;let n=r[0].PositionAndShape.RelativePosition.x+r[0].PositionAndShape.BorderMarginLeft+r[0].parentMeasure.PositionAndShape.RelativePosition.x;n=n>t?t:n,a.updateBottomLineInRange(n,t,l)}return r}calculateLyricsExtendsAndDashes(e){for(let t=0,n=e.length;t<n;++t){const n=e[t];for(let e=0;e<n.LyricsEntries.length;e++){const t=n.LyricsEntries[e];t.ParentLyricWord&&t.ParentLyricWord.GraphicalLyricsEntries[t.ParentLyricWord.GraphicalLyricsEntries.length-1]!==t&&this.calculateSingleLyricWord(t),t.LyricsEntry.extend&&this.calculateLyricExtend(t)}}}calculateSingleOctaveShift(e,t,n,i){throw new Error(this.abstractNotImplementedErrorMessage)}calculateWordRepetitionInstruction(e,t){throw new Error(this.abstractNotImplementedErrorMessage)}calculateMoodAndUnknownExpression(e,t,n){var i;const s=e.AbsoluteTimestamp,r=this.graphicalMusicSheet.MeasureList[t];let a=new d.PointF2D;const o=null===(i=e.UnknownList[0])||void 0===i?void 0:i.defaultYXml;if(e.MoodList.length>0||e.UnknownList.length>0){var l;let t="";for(let n=0,s=e.EntriesList.length;n<s;++n){const i=e.EntriesList[n];""!==i.prefix&&(t+=""===t?i.prefix:" "+i.prefix),t+=""===t?i.label:" "+i.label}const i=r[n].ParentStaffLine;if(!i)return void E.default.debug("MusicSheetCalculator.calculateMoodAndUnknownExpression: staffLine undefined. Returning.");a=this.getRelativePositionInStaffLineFromTimestamp(s,n,i,null===i||void 0===i?void 0:i.isPartOfMultiStaffInstrument()),Math.abs(a.x-0)<1e-4&&(a.x=r[n].beginInstructionsWidth+this.rules.RhythmRightMargin);const c=this.rules.UnknownTextHeight,h=e.getPlacementOfFirstEntry(),u=this.calculateLabel(i,a,t,e.getFontstyleOfFirstEntry(),h,c),d=e.getColorXMLOfFirstEntry();if(this.rules.ExpressionsUseXMLColor&&d&&(u.ColorXML=d),this.rules.PlaceWordsInsideStafflineFromXml&&o<0&&o>-50){let e=o/10;e+=this.rules.PlaceWordsInsideStafflineYOffset,u.PositionAndShape.RelativePosition.y=e}const f=new O.GraphicalUnknownExpression(i,u,h,null===(l=r[n])||void 0===l?void 0:l.parentSourceMeasure,e);i.AbstractExpressions.push(f)}}clearRecreatedObjects(){for(let e=0,t=this.staffEntriesWithGraphicalTies.length;e<t;++e)this.staffEntriesWithGraphicalTies[e].GraphicalTies.length=0;this.staffEntriesWithGraphicalTies.length=0}handleStaffEntryLink(e,t){E.default.debug("handleStaffEntryLink not implemented")}calculateMusicSystems(){if(!this.graphicalMusicSheet.MeasureList)return;const e=this.graphicalMusicSheet.MeasureList;if(!e)return;this.rules.MinMeasureToDrawIndex>e.length-1&&(E.default.debug("minimum measure to draw index out of range. resetting min measure index to limit."),this.rules.MinMeasureToDrawIndex=e.length-1);const t=[];for(let s=this.rules.MinMeasureToDrawIndex,r=e.length;s<r&&s<=this.rules.MaxMeasureToDrawIndex;++s){const n=[];for(let t=0,i=e[s].length;t<i;++t){const i=e[s][t];if(null!==i&&void 0!==i&&i.isVisible()&&(n.push(i),this.rules.ColoringEnabled))for(const e of i.staffEntries)for(const t of e.graphicalVoiceEntries)t.applyCustomNoteheads(),t.color()}t.push(n)}let n=0;for(let s=0,r=t.length;s<r;++s){const e=t[s];n=Math.max(e.length,n);break}if(0===n)return;const i=new u.MusicSystemBuilder;if(i.initialize(this.graphicalMusicSheet,t,n),this.musicSystems=i.buildMusicSystems(),this.formatMeasures(),this.leadSheet||(this.optimizeRestPlacement(),this.calculateStaffEntryArticulationMarks(),this.rules.RenderSlurs&&this.calculateTieCurves()),this.calculateSkyBottomLines(),this.calculateTupletNumbers(),this.rules.RenderMeasureNumbers)for(let s=0,r=this.musicSystems.length;s<r;++s){const e=this.musicSystems[s];this.calculateMeasureNumberPlacement(e)}if(this.rules.RenderFingerings&&this.calculateFingerings(),!this.leadSheet&&this.rules.RenderSlurs&&this.calculateSlurs(),this.calculateGlissandi(),this.rules.RenderMeasureNumbers)for(let s=0,r=this.musicSystems.length;s<r;++s){const e=this.musicSystems[s];this.calculateMeasureNumberSkyline(e)}this.leadSheet||this.calculateOrnaments(),this.calculateChordSymbols(),this.leadSheet||(this.calculateDynamicExpressions(),this.calculateMoodAndUnknownExpressions(),this.calculateExpressionAlignements(),this.calculateOctaveShifts(),this.rules.RenderPedals&&this.calculatePedals(),this.calculateWordRepetitionInstructions()),this.calculateRepetitionEndings(),this.leadSheet||this.calculateTempoExpressions(),this.calculateRehearsalMarks(),this.calculateLyricsPosition();for(let s=0,r=this.musicSystems.length;s<r;++s){const e=this.musicSystems[s];for(let t=0,n=e.StaffLines.length;t<n;++t){const n=e.StaffLines[t];this.updateStaffLineBorders(n)}}i.calculateSystemYLayout(),this.calculateComments(),this.calculateMarkedAreas();for(let s=0,r=this.graphicalMusicSheet.MusicPages.length;s<r;++s){const e=this.graphicalMusicSheet.MusicPages[s];for(let n=0,i=e.MusicSystems.length;n<i;++n){const t=0===s&&0===n,i=e.MusicSystems[n];i.setMusicSystemLabelsYPosition(),this.leadSheet?i===i.Parent.MusicSystems[0]&&i.createSystemLeftLine(this.rules.SystemThinLineWidth,this.rules.SystemLabelsRightMargin,t):(i.setYPositionsToVerticalLineObjectsAndCreateLines(this.rules),i.createSystemLeftLine(this.rules.SystemThinLineWidth,this.rules.SystemLabelsRightMargin,t),i.createInstrumentBrackets(this.graphicalMusicSheet.ParentMusicSheet.Instruments,this.rules.StaffHeight),i.createGroupBrackets(this.graphicalMusicSheet.ParentMusicSheet.InstrumentalGroups,this.rules.StaffHeight,0),i.alignBeginInstructions()),i.calculateBorders(this.rules)}const t=e.MusicSystems[0].PositionAndShape.BorderTop;for(let n=0,i=e.MusicSystems.length;n<i;++n){const i=e.MusicSystems[n];i.PositionAndShape.RelativePosition=new d.PointF2D(i.PositionAndShape.RelativePosition.x,i.PositionAndShape.RelativePosition.y-t)}e.PositionAndShape.calculateTopBottomBorders(),e===this.graphicalMusicSheet.MusicPages[0]&&this.calculatePageLabels(e),e.PositionAndShape.calculateTopBottomBorders()}}calculateMarkedAreas(){}calculateComments(){}calculateChordSymbols(){for(const e of this.musicSystems)for(const t of e.StaffLines){const n=t.SkyBottomLineCalculator;let i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;if(this.rules.ChordSymbolYAlignment&&"staffline"===this.rules.ChordSymbolYAlignmentScope){const e=[];for(const n of t.Measures)e.push(...n.staffEntries);const{minOffset:r,maxOffset:a}=this.calculateAlignedChordSymbolsOffset(e,n);i=r,s=a}for(let r=0;r<t.Measures.length;r++){const a=t.Measures[r];if(this.rules.ChordSymbolYAlignment&&"measure"===this.rules.ChordSymbolYAlignmentScope){const{minOffset:e,maxOffset:t}=this.calculateAlignedChordSymbolsOffset(a.staffEntries,n);i=e,s=t}let l;for(const t of a.staffEntries)if(t.graphicalChordContainers&&0!==t.graphicalChordContainers.length)for(let c=0;c<t.graphicalChordContainers.length;c++){const h=t.graphicalChordContainers[c];if(0===t.graphicalVoiceEntries.length&&t.relInMeasureTimestamp.RealValue>0){let e=0;0===a.staffEntries[0].relInMeasureTimestamp.RealValue&&(e=a.staffEntries[0].PositionAndShape.RelativePosition.x,1===a.MeasureNumber&&(e+=this.rules.ChordSymbolWholeMeasureRestXOffsetMeasure1));let n=e+(a.PositionAndShape.Size.width-a.endInstructionsWidth-e)*(t.relInMeasureTimestamp.RealValue/a.parentSourceMeasure.Duration.RealValue)+h.PositionAndShape.BorderMarginLeft;l&&(n=Math.max(n,l.PositionAndShape.RelativePosition.x+l.GraphicalLabel.PositionAndShape.Size.width+this.rules.ChordSymbolXSpacing)),h.PositionAndShape.RelativePosition.x=n,h.PositionAndShape.Parent=a.staffEntries[0].PositionAndShape.Parent}const u=h.PositionAndShape,d=u.Parent;if(d.DataObject instanceof o.GraphicalMeasure&&0===t.relInMeasureTimestamp.RealValue&&(u.RelativePosition.x=Math.max(a.beginInstructionsWidth,u.RelativePosition.x),1===a.MeasureNumber&&u.RelativePosition.x>3&&(u.RelativePosition.x+=this.rules.ChordSymbolWholeMeasureRestXOffsetMeasure1)),0===t.PositionAndShape.RelativePosition.x){const n=e.GraphicalMeasures[r];for(const e of n){let n=!1;for(const i of e.staffEntries)if(i.relInMeasureTimestamp===t.relInMeasureTimestamp&&0!==i.PositionAndShape.RelativePosition.x){u.RelativePosition.x=i.PositionAndShape.RelativePosition.x,n=!0;break}if(n)break}}const f=u.BorderMarginLeft+d.AbsolutePosition.x+u.RelativePosition.x,p=u.BorderMarginRight+d.AbsolutePosition.x+u.RelativePosition.x,m=h.GetChordSymbolContainer.Placement;m===A.PlacementEnum.Below?(!this.rules.ChordSymbolYAlignment||s<0)&&(s=n.getBottomLineMaxInRange(f,p)):m===A.PlacementEnum.Above&&(!this.rules.ChordSymbolYAlignment||i>0)&&(i=n.getSkyLineMinInRange(f,p));let g=0;0===c?(g+=this.rules.ChordSymbolYOffset,g+=.1):g+=this.rules.ChordSymbolYPadding,m!==A.PlacementEnum.Below&&(g*=-1);const b=h.GraphicalLabel;m===A.PlacementEnum.Below?(b.PositionAndShape.RelativePosition.y=s+g,b.setLabelPositionAndShapeBorders(),b.PositionAndShape.calculateBoundingBox(),n.updateBottomLineInRange(f,p,s+b.PositionAndShape.BorderMarginBottom+this.rules.ChordSymbolBottomMargin)):(b.PositionAndShape.RelativePosition.y=i+g,b.setLabelPositionAndShapeBorders(),b.PositionAndShape.calculateBoundingBox(),n.updateSkyLineInRange(f,p,i+b.PositionAndShape.BorderMarginTop)),l=h}}}}calculateAlignedChordSymbolsOffset(e,t){let n=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER;for(const s of e)for(const e of s.graphicalChordContainers){const s=e.PositionAndShape,r=s.Parent;let a=s.BorderMarginLeft+r.AbsolutePosition.x,l=s.BorderMarginRight+r.AbsolutePosition.x;r.DataObject instanceof o.GraphicalMeasure&&(a+=r.DataObject.beginInstructionsWidth,l+=r.DataObject.beginInstructionsWidth);const c=e.GetChordSymbolContainer.Placement;c===A.PlacementEnum.Above?n=Math.min(n,t.getSkyLineMinInRange(a,l)):c===A.PlacementEnum.Below&&(i=Math.max(i,t.getBottomLineMaxInRange(a,l)))}return{minOffset:n,maxOffset:i}}layoutMeasureWithWholeRest(e,t,n){}layoutBeams(e){}layoutArticulationMarks(e,t,n){}layoutOrnament(e,t,n){}calculateRestNotePlacementWithinGraphicalBeam(e,t,n,i,s){}calculateTupletNumbers(){if(!this.rules.TupletNumberLimitConsecutiveRepetitions)return;let e,t,n,i=-1,s=0;const r={};for(const a of this.graphicalMusicSheet.ParentMusicSheet.Instruments)for(const o of a.Voices){s=0,r[o.VoiceId]={};for(const a of o.VoiceEntries)if(a.Notes.length>0){const l=a.Notes[0];if(!l.NoteTuplet||l.NoteTuplet.shouldBeBracketed(this.rules.TupletsBracketedUseXMLValue,this.rules.TupletsBracketed,this.rules.TripletsBracketed)){i=-1,s=0,t=void 0,e=void 0;continue}if(l.NoteTuplet===n)continue;let c=l.TypeLength;if(c||(E.default.warn("note missing TypeLength"),c=l.NoteTuplet.Fractions[0]),l.NoteTuplet!==t&&r[o.VoiceId][l.NoteTuplet.TupletLabelNumber]&&r[o.VoiceId][l.NoteTuplet.TupletLabelNumber][c.RealValue]){l.NoteTuplet.RenderTupletNumber=!1,n=l.NoteTuplet;continue}l.NoteTuplet.TupletLabelNumber===i&&c.Equals(e)&&!l.NoteTuplet.Bracket||(i=l.NoteTuplet.TupletLabelNumber,e=c,s=0),t=l.NoteTuplet,s++,s<=this.rules.TupletNumberMaxConsecutiveRepetitions&&(l.NoteTuplet.RenderTupletNumber=!0),s>this.rules.TupletNumberMaxConsecutiveRepetitions&&(l.NoteTuplet.RenderTupletNumber=!1,this.rules.TupletNumberAlwaysDisableAfterFirstMax&&(r[o.VoiceId][i]||(r[o.VoiceId][i]={}),r[o.VoiceId][i][c.RealValue]=!0)),n=t}}}calculateSlurs(){}calculateGlissandi(){}calculateDynamicExpressionsForMultiExpression(e,t,n){}calculateGraphicalVerbalContinuousDynamic(e,t){const n=e.Label,i=t.x+n.PositionAndShape.BorderMarginLeft,s=t.x+n.PositionAndShape.BorderMarginRight,r=e.ContinuousDynamic.Placement,a=e.ParentStaffLine.SkyBottomLineCalculator;let o;r===A.PlacementEnum.Below?(o=a.getBottomLineMaxInRange(i,s),n.PositionAndShape.RelativePosition=new d.PointF2D(t.x,o-n.PositionAndShape.BorderMarginTop)):(o=a.getSkyLineMinInRange(i,s),n.PositionAndShape.RelativePosition=new d.PointF2D(t.x,o-n.PositionAndShape.BorderMarginBottom))}calculateGraphicalContinuousDynamic(e,t){const n=e.IsSoftAccent,i=e.ParentStaffLine.ParentStaff.idInMusicSheet,s=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(e.ContinuousDynamic.EndMultiExpression.SourceMeasureParent,i);if(!s)return void E.default.warn("MusicSheetCalculator.calculateGraphicalContinuousDynamic: No endMeasure found");e.EndMeasure=s;const a=e.ParentStaffLine,o=s.ParentStaffLine,l=o&&a===o;let c=!1;o?c=null===o||void 0===o?void 0:o.isPartOfMultiStaffInstrument():a&&(c=null===a||void 0===a?void 0:a.isPartOfMultiStaffInstrument());const h=r.Fraction.createFromFraction(e.ContinuousDynamic.EndMultiExpression.AbsoluteTimestamp),u=this.graphicalMusicSheet.GetVerticalContainerFromTimestamp(h),d=u.getFirstNonNullStaffEntry().parentMeasure,f=d.PositionAndShape.AbsolutePosition.x+d.PositionAndShape.BorderRight;let p=new r.Fraction(0,0,0);for(const r of u.StaffEntries){var m;const e=null===r||void 0===r||null===(m=r.sourceStaffEntry)||void 0===m?void 0:m.calculateMaxNoteLength(!1);(null===e||void 0===e?void 0:e.gt(p))&&(p=e)}const g=!n&&e.ContinuousDynamic.DynamicType===L.ContDynamicEnum.diminuendo,b=this.getRelativePositionInStaffLineFromTimestamp(h,i,o,c,0,g),v=r.Fraction.plus(h,p).clone();e.ContinuousDynamic.EndMultiExpression.EndOffsetFraction&&this.rules.UseEndOffsetForExpressions&&v.Add(e.ContinuousDynamic.EndMultiExpression.EndOffsetFraction);const y=this.getRelativePositionInStaffLineFromTimestamp(v,i,o,c,0,e.ContinuousDynamic.DynamicType===L.ContDynamicEnum.diminuendo),x=this.rules.SoftAccentWedgePadding,S=u.getFirstNonNullStaffEntry().PositionAndShape.Size.width,w=this.rules.SoftAccentSizeFactor;n?(t.x-=S/2*w+x,b.x=t.x+S/2*w):y.x>b.x&&y.x<f?b.x+=(y.x-b.x)/this.rules.WedgeEndDistanceBetweenTimestampsFactor:b.x=f-this.rules.WedgeHorizontalMargin;const _=this.dynamicExpressionMap.get(e.ContinuousDynamic.StartMultiExpression.AbsoluteTimestamp.RealValue);_&&_.DataObject.ParentStaffLine===a&&(t.x=_.RelativePosition.x+this.rules.WedgeHorizontalMargin,t.x+=_.BorderMarginRight);const T=a.ParentMusicSystem,M=T.StaffLines.indexOf(a),C=a.SkyBottomLineCalculator,P=e.ContinuousDynamic.Placement;let N;l&&b.x-t.x<this.rules.WedgeMinLength&&!n&&(b.x=t.x+this.rules.WedgeMinLength);const k=t.x;let R=o.Measures[0].beginInstructionsWidth-this.rules.WedgeHorizontalMargin-2,O=0,D=0;const F=[];if(l)O=b.x;else{O=a.PositionAndShape.Size.width,D=b.x;const t=[a,o],n=e.StartMeasure;let r=n,l=0,c=n.parentSourceMeasure.measureListIndex;for(;r!==s&&l<1e3;){const n=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[c],s=this.graphicalMusicSheet.getGraphicalMeasureFromSourceMeasureAndIndex(n,i);if(s){r=s;const n=r.ParentStaffLine;if(!t.includes(n)){t.push(n);const i=new I.GraphicalContinuousDynamicExpression(e.ContinuousDynamic,n,n.Measures[0].parentSourceMeasure);i.IsSplittedPart=!0,F.push(i)}}c++,l++}N=new I.GraphicalContinuousDynamicExpression(e.ContinuousDynamic,o,s.parentSourceMeasure),N.IsSplittedPart=!0,e.IsSplittedPart=!0}n&&(R=b.x+x,D=R+S/2*w);let B=0,j=0;if(P===A.PlacementEnum.Below){let t=0;if(M<T.StaffLines.length-1&&(t=M+1),t>M){const e=T.StaffLines[t].PositionAndShape.RelativePosition.y-a.PositionAndShape.RelativePosition.y-this.rules.StaffHeight;B=this.rules.StaffHeight+e/2}else B=this.rules.WedgePlacementBelowY;B-=this.rules.WedgeOpeningLength/2,l||(j=B);let n=C.getBottomLineMaxInRange(k,O);n>B&&(B=n);const i=!1;if(M<T.StaffLines.length-1){const n=a.findClosestStaffEntry(O),s=a.findClosestStaffEntry(k);if(s&&n&&(s.parentVerticalContainer,i)){const n=T.StaffLines[t],i=n.SkyBottomLineCalculator.getSkyLineMinInRange(k,O),s=n.PositionAndShape.RelativePosition.y-a.PositionAndShape.RelativePosition.y+i;B=s-this.rules.WedgeOpeningLength>this.rules.StaffHeight?s-this.rules.WedgeVerticalMargin:this.rules.StaffHeight+this.rules.WedgeOpeningLength,e.NotToBeRemoved=!0}}l||(n=o.SkyBottomLineCalculator.getBottomLineMaxInRange(R,D),n>j&&(j=n),j+=this.rules.WedgeOpeningLength/2,j+=this.rules.WedgeVerticalMargin),i||(B+=this.rules.WedgeOpeningLength/2,B+=this.rules.WedgeVerticalMargin)}else if(P===A.PlacementEnum.Above){if(1===a.ParentStaff.ParentInstrument.Staves.length)B=this.rules.WedgePlacementAboveY;else{let e=0;M>0&&(e=M-1);const t=T.StaffLines[e];B=-(a.PositionAndShape.RelativePosition.y-t.PositionAndShape.RelativePosition.y-this.rules.StaffHeight)/2}B+=this.rules.WedgeOpeningLength/2,l||(j=B);let e=C.getSkyLineMinInRange(k,O);e<B&&(B=e);const t=!1;if(a.ParentStaff.ParentInstrument.Staves.length>1&&M>0){const e=a.findClosestStaffEntry(k),n=a.findClosestStaffEntry(O);if(e&&n){e.parentVerticalContainer;const n=M-1;if(t){const e=T.StaffLines[n];if(e){const t=e.SkyBottomLineCalculator.getBottomLineMaxInRange(k,O);B=(a.PositionAndShape.RelativePosition.y-e.PositionAndShape.RelativePosition.y-t-this.rules.StaffHeight)/2+this.rules.StaffHeight}}}}l||(e=o.SkyBottomLineCalculator.getSkyLineMinInRange(R,D),e<j&&(j=e),j-=this.rules.WedgeOpeningLength/2),t||(B-=this.rules.WedgeOpeningLength/2,B-=this.rules.WedgeVerticalMargin),l||(j-=this.rules.WedgeVerticalMargin)}if(e.Lines.clear(),n)e.createFirstHalfCrescendoLines(k,O,B),e.createSecondHalfDiminuendoLines(R,D,B),e.calcPsi();else if(l&&!n)e.createLines(k,O,B),e.calcPsi();else{e.createFirstHalfLines(k,O,B),e.calcPsi();for(let t=0;t<F.length;t++){const n=F[t],i=n.ParentStaffLine;let s=j;if(P===A.PlacementEnum.Below){const e=o.SkyBottomLineCalculator.getBottomLineMaxInRange(R,O);e>s&&(s=e),s+=this.rules.WedgeOpeningLength/2,s+=this.rules.WedgeVerticalMargin}else if(P===A.PlacementEnum.Above){const e=i.SkyBottomLineCalculator.getSkyLineMinInRange(R,D);e<j&&(s=e),s-=this.rules.WedgeOpeningLength/2}e.ContinuousDynamic.DynamicType===L.ContDynamicEnum.crescendo?n.createSecondHalfCrescendoLines(0,i.PositionAndShape.Size.width,s):n.createFirstHalfDiminuendoLines(0,i.PositionAndShape.Size.width,s),n.calcPsi()}N.createSecondHalfLines(R,D,j),N.calcPsi()}this.dynamicExpressionMap.set(h.RealValue,e.PositionAndShape)}calculateGraphicalInstantaneousDynamicExpression(e,t,n){const i=e.ParentStaffLine;if(!i)return;const s=t.x+e.PositionAndShape.BorderMarginLeft,r=t.x+e.PositionAndShape.BorderMarginRight,a=i.SkyBottomLineCalculator;let o=0;if(e.Placement===A.PlacementEnum.Above){const n=a.getSkyLineMinInRange(s,r);if(i.isPartOfMultiStaffInstrument()&&i.ParentStaff!==i.ParentStaff.ParentInstrument.Staves[0]){const t=i.ParentMusicSystem.StaffLines[i.ParentMusicSystem.StaffLines.indexOf(i)-1];if(t){const s=(null===i||void 0===i?void 0:i.PositionAndShape.RelativePosition.y)-t.PositionAndShape.RelativePosition.y-this.rules.StaffHeight;o=n>-s/2?-s/2:n-e.PositionAndShape.BorderMarginBottom}}else o=n-e.PositionAndShape.BorderMarginBottom;e.PositionAndShape.RelativePosition=new d.PointF2D(t.x,o)}else if(e.Placement===A.PlacementEnum.Below){const n=a.getBottomLineMaxInRange(s,r),l=i.ParentStaff.ParentInstrument.Staves[i.ParentStaff.ParentInstrument.Staves.length-1];if(i.isPartOfMultiStaffInstrument()&&i.ParentStaff!==l){const t=i.ParentMusicSystem.StaffLines[i.ParentMusicSystem.StaffLines.indexOf(i)+1];if(t){const s=t.PositionAndShape.RelativePosition.y-i.PositionAndShape.RelativePosition.y-this.rules.StaffHeight;o=n+e.PositionAndShape.BorderMarginBottom<this.rules.StaffHeight+s/2?this.rules.StaffHeight+s/2:n-e.PositionAndShape.BorderMarginTop}}else o=n-e.PositionAndShape.BorderMarginTop;e.PositionAndShape.RelativePosition=new d.PointF2D(t.x,o)}e.updateSkyBottomLine()}calcGraphicalRepetitionEndingsRecursively(e){}layoutSingleRepetitionEnding(e,t,n,i,s,r){}calculateLabel(e,t,n,i,s,r){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:m.TextAlignmentEnum.CenterBottom,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;const l=new M.Label(n,a);l.fontStyle=i,l.fontHeight=r;const c=new p.GraphicalLabel(l,r,l.textAlignment,this.rules,e.PositionAndShape),h=1.1;s===A.PlacementEnum.Below&&(c.Label.textAlignment=m.TextAlignmentEnum.LeftTop),c.setLabelPositionAndShapeBorders(),c.PositionAndShape.BorderMarginBottom*=h,c.PositionAndShape.BorderMarginTop*=h,c.PositionAndShape.BorderMarginLeft*=h,c.PositionAndShape.BorderMarginRight*=h;let u,f=t.x+c.PositionAndShape.BorderMarginLeft,g=t.x+c.PositionAndShape.BorderMarginRight;g>e.PositionAndShape.Size.width&&(g=e.PositionAndShape.Size.width-this.rules.MeasureRightMargin,f=g-c.PositionAndShape.MarginSize.width,t.x=f-c.PositionAndShape.BorderMarginLeft);const b=e.SkyBottomLineCalculator;return u=s===A.PlacementEnum.Below?b.getBottomLineMaxInRange(f,g)+o:b.getSkyLineMinInRange(f,g)-o,c.PositionAndShape.RelativePosition=new d.PointF2D(t.x,u),s===A.PlacementEnum.Below?b.updateBottomLineInRange(f,g,c.PositionAndShape.BorderMarginBottom+u):b.updateSkyLineInRange(f,g,c.PositionAndShape.BorderMarginTop+u),c}calculateTempoExpressionsForMultiTempoExpression(e,t,n){const i=r.Fraction.plus(e.AbsoluteTimestamp,t.Timestamp),s=this.graphicalMusicSheet.MeasureList[n];let a=new d.PointF2D;if(t.ContinuousTempo||t.InstantaneousTempo){if(this.rules.MinMeasureToDrawIndex>0)return;if(!s[0])return;let e=s[0].ParentStaffLine,n=s[0].PositionAndShape.RelativePosition.x,r=0;for(let t=0;t<s.length;t++)if(s[t].ParentStaffLine&&0!==s[t].ParentStaffLine.Measures.length&&s[t].ParentStaffLine.Measures.length>0){e=s[t].ParentStaffLine,n=s[t].PositionAndShape.RelativePosition.x,r=t;break}if(a=this.getRelativePositionInStaffLineFromTimestamp(i,r,e,e.isPartOfMultiStaffInstrument(),n),t.EntriesList.length>0&&t.EntriesList[0].Expression instanceof N.InstantaneousTempoExpression&&(t.EntriesList[0].Expression.Placement=A.PlacementEnum.Above,e.Measures[0].staffEntries.length>0&&0===Math.abs(a.x-e.Measures[0].staffEntries[0].PositionAndShape.RelativePosition.x)&&e.ParentMusicSystem===this.musicSystems[0])){const t=e.Measures[0].FirstInstructionStaffEntry;if(t){const e=t.GraphicalInstructions.last();a.x=e.PositionAndShape.RelativePosition.x}this.rules.CompactMode&&(a.x=e.PositionAndShape.RelativePosition.x+e.Measures[0].PositionAndShape.RelativePosition.x)}for(const i of t.EntriesList){let n=m.TextAlignmentEnum.CenterBottom;this.rules.CompactMode&&(n=m.TextAlignmentEnum.LeftBottom);const s=this.calculateLabel(e,a,i.label,t.getFontstyleOfFirstEntry(),i.Expression.Placement,this.rules.UnknownTextHeight,n,this.rules.TempoYSpacing);if(i.Expression.ColorXML&&this.rules.ExpressionsUseXMLColor&&(s.ColorXML=i.Expression.ColorXML),i.Expression instanceof N.InstantaneousTempoExpression){for(const t of e.AbstractExpressions)t instanceof P.GraphicalInstantaneousTempoExpression&&(t.SourceExpression.Label,i.Expression.Label);if(new P.GraphicalInstantaneousTempoExpression(i.Expression,s).ParentStaffLine||E.default.warn("Adding staffline didn't work"),this.rules.MetronomeMarksDrawn&&i.Expression.TempoType===N.TempoType.metronomeMark){this.createMetronomeMark(i.Expression);continue}}else if(i.Expression instanceof k.ContinuousTempoExpression){for(const t of e.AbstractExpressions)t instanceof P.GraphicalInstantaneousTempoExpression&&(t.SourceExpression.Label,i.Expression.Label);e.AbstractExpressions.push(new P.GraphicalInstantaneousTempoExpression(i.Expression,s))}}}}createMetronomeMark(e){throw new Error(this.abstractNotImplementedErrorMessage)}graphicalMeasureCreatedCalculations(e){}clearSystemsAndMeasures(){for(let e=0,t=this.graphicalMusicSheet.MusicPages.length;e<t;++e){const t=this.graphicalMusicSheet.MusicPages[e];for(let e=0,n=t.MusicSystems.length;e<n;++e){const n=t.MusicSystems[e];for(let e=0,t=n.StaffLines.length;e<t;++e){const t=n.StaffLines[e];t.ParentStaff.Visible||t.Measures.clear();for(let e=0,n=t.Measures.length;e<n;++e){const n=t.Measures[e];if(n.FirstInstructionStaffEntry){const e=n.PositionAndShape.ChildElements.indexOf(n.FirstInstructionStaffEntry.PositionAndShape);e>-1&&n.PositionAndShape.ChildElements.splice(e,1),n.FirstInstructionStaffEntry=void 0,n.beginInstructionsWidth=0}if(n.LastInstructionStaffEntry){const e=n.PositionAndShape.ChildElements.indexOf(n.LastInstructionStaffEntry.PositionAndShape);e>-1&&n.PositionAndShape.ChildElements.splice(e,1),n.LastInstructionStaffEntry=void 0,n.endInstructionsWidth=0}}t.Measures=[],t.PositionAndShape.ChildElements=[]}n.StaffLines.length=0,n.PositionAndShape.ChildElements=[]}t.MusicSystems=[],t.PositionAndShape.ChildElements=[]}this.graphicalMusicSheet.MusicPages=[]}handleVoiceEntry(e,t,n,i,s,r,a,o,l){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:void 0,u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:void 0;e.StemDirectionXml!==h.StemDirectionType.Undefined&&this.rules.SetWantedStemDirectionByXml&&void 0!==e.StemDirectionXml?e.WantedStemDirection=e.StemDirectionXml:this.calculateStemDirectionFromVoices(e);const d=t.findOrCreateGraphicalVoiceEntry(e);d.octaveShiftValue=o;const f=t.tabStaffEntry;let p;f&&(p=f.findOrCreateGraphicalVoiceEntry(e));for(let h=0,m=e.Notes.length;h<m;++h){const i=e.Notes[h];if(!i)continue;if(void 0!==u&&void 0!==u.Link&&void 0!==c&&c.indexOf(i)>-1)continue;let l;if(e.IsGrace?l=B.symbolFactory.createGraceNote(i,d,s,this.rules,o):(l=B.symbolFactory.createNote(i,d,s,o,this.rules,void 0),B.stafflineNoteCalculator.trackNote(l)),i.Pitch&&this.checkNoteForAccidental(l,n,s,o),this.resetYPositionForLeadSheet(l.PositionAndShape),t.addGraphicalNoteToListAtCorrectYPosition(d,l),l.PositionAndShape.calculateBoundingBox(),this.leadSheet||(void 0!==i.NoteBeam&&i.PrintObject&&(i instanceof F.TabNote&&!this.rules.TabBeamsRendered||this.handleBeam(l,i.NoteBeam,a)),void 0!==i.NoteTuplet&&i.PrintObject&&this.handleTuplet(l,i.NoteTuplet,r)),p){const e=B.symbolFactory.createNote(i,p,s,o,this.rules,void 0);f.addGraphicalNoteToListAtCorrectYPosition(p,e),e.PositionAndShape.calculateBoundingBox(),this.leadSheet||i.NoteTuplet&&this.handleTuplet(e,i.NoteTuplet,r)}}return e.Articulations.length>0&&this.handleVoiceEntryArticulations(e.Articulations,e,t),e.TechnicalInstructions.length>0&&this.handleVoiceEntryTechnicalInstructions(e.TechnicalInstructions,e,t),e.LyricsEntries.size()>0&&this.handleVoiceEntryLyrics(e,t,i),e.OrnamentContainer&&this.handleVoiceEntryOrnaments(e.OrnamentContainer,e,t),o}resetYPositionForLeadSheet(e){this.leadSheet&&(e.RelativePosition=new d.PointF2D(e.RelativePosition.x,0))}layoutVoiceEntries(e,t){if(e.PositionAndShape.RelativePosition=new d.PointF2D(0,0),!this.leadSheet)for(const n of e.graphicalVoiceEntries){const t=n.notes;if(0===t.length)continue;const i=t[0].sourceNote.ParentVoiceEntry,s=void 0!==t[0].sourceNote.Pitch;this.layoutVoiceEntry(i,t,e,s)}}maxInstrNameLabelLength(){let e=0;for(const n of this.graphicalMusicSheet.ParentMusicSheet.Instruments){var t;if(null!==(t=n.NameLabel)&&void 0!==t&&t.print&&n.Voices.length>0&&n.Voices[0].Visible){let t=n.NameLabel;this.rules.RenderPartNames||(t=new M.Label("",t.textAlignment,t.font));const i=new p.GraphicalLabel(t,this.rules.InstrumentLabelTextHeight,m.TextAlignmentEnum.LeftCenter,this.rules);i.setLabelPositionAndShapeBorders(),e=Math.max(e,i.PositionAndShape.MarginSize.width)}}return this.rules.RenderPartNames?e:0}calculateSheetLabelBoundingBoxes(){const e=this.graphicalMusicSheet.ParentMusicSheet,t=this.rules.DefaultColorTitle;if(void 0!==e.Title&&this.rules.RenderTitle){const n=new p.GraphicalLabel(e.Title,this.rules.SheetTitleHeight,m.TextAlignmentEnum.CenterBottom,this.rules);n.Label.IsCreditLabel=!0,n.Label.colorDefault=t,this.graphicalMusicSheet.Title=n,n.setLabelPositionAndShapeBorders()}else this.rules.RenderTitle||(this.graphicalMusicSheet.Title=void 0);if(void 0!==e.Subtitle&&this.rules.RenderSubtitle){const n=new p.GraphicalLabel(e.Subtitle,this.rules.SheetSubtitleHeight,m.TextAlignmentEnum.CenterCenter,this.rules);n.Label.IsCreditLabel=!0,n.Label.colorDefault=t,this.graphicalMusicSheet.Subtitle=n,n.setLabelPositionAndShapeBorders()}else this.rules.RenderSubtitle||(this.graphicalMusicSheet.Subtitle=void 0);if(void 0!==e.Composer&&this.rules.RenderComposer){const n=new p.GraphicalLabel(e.Composer,this.rules.SheetComposerHeight,m.TextAlignmentEnum.RightCenter,this.rules);n.Label.IsCreditLabel=!0,n.Label.colorDefault=t,this.graphicalMusicSheet.Composer=n,n.setLabelPositionAndShapeBorders()}else this.rules.RenderComposer||(this.graphicalMusicSheet.Composer=void 0);if(void 0!==e.Lyricist&&this.rules.RenderLyricist){const n=new p.GraphicalLabel(e.Lyricist,this.rules.SheetAuthorHeight,m.TextAlignmentEnum.LeftCenter,this.rules);n.Label.IsCreditLabel=!0,n.Label.colorDefault=t,this.graphicalMusicSheet.Lyricist=n,n.setLabelPositionAndShapeBorders()}else this.rules.RenderLyricist||(this.graphicalMusicSheet.Lyricist=void 0);if(void 0!==e.Copyright&&this.rules.RenderCopyright){const n=new p.GraphicalLabel(e.Copyright,this.rules.SheetCopyrightHeight,m.TextAlignmentEnum.CenterBottom,this.rules);n.Label.IsCreditLabel=!0,n.Label.colorDefault=t,this.graphicalMusicSheet.Copyright=n,n.setLabelPositionAndShapeBorders()}else this.rules.RenderCopyright||(this.graphicalMusicSheet.Copyright=void 0)}checkMeasuresForWholeRestNotes(){for(let e=0,t=this.musicSystems.length;e<t;++e){const t=this.musicSystems[e];for(let e=0,n=t.StaffLines.length;e<n;++e){const n=t.StaffLines[e];for(let e=0,t=n.Measures.length;e<t;++e){const t=n.Measures[e];if(1===t.staffEntries.length){const e=t.staffEntries[0];if(e.graphicalVoiceEntries.length>0&&1===e.graphicalVoiceEntries[0].notes.length){const n=e.graphicalVoiceEntries[0].notes[0];!n.sourceNote.Pitch&&new r.Fraction(1,2).lt(n.sourceNote.Length)&&this.layoutMeasureWithWholeRest(n,e,t)}}}}}}optimizeRestNotePlacement(e,t){if(0===e.graphicalVoiceEntries.length)return;const n=e.graphicalVoiceEntries[0].notes;if(0===n.length)return;const i=n[0],s=i.sourceNote.isRest();if(2===e.graphicalVoiceEntries.length){let t=!1;const n=e.graphicalVoiceEntries[1].notes;n.length>0&&(t=n[0].sourceNote.isRest()),s&&t?this.calculateTwoRestNotesPlacementWithCollisionDetection(e):(s||t)&&this.calculateRestNotePlacementWithCollisionDetectionFromGraphicalNote(e)}else if(s&&e!==t.staffEntries[0]&&e!==t.staffEntries[t.staffEntries.length-1]){const n=t.staffEntries.indexOf(e),s=t.staffEntries[n-1],r=t.staffEntries[n+1];if(1===s.graphicalVoiceEntries.length){const t=s.graphicalVoiceEntries[0].notes[0];if(void 0!==t.sourceNote.NoteBeam&&1===r.graphicalVoiceEntries.length){const n=r.graphicalVoiceEntries[0].notes[0];void 0!==n.sourceNote.NoteBeam&&t.sourceNote.NoteBeam===n.sourceNote.NoteBeam&&(this.calculateRestNotePlacementWithinGraphicalBeam(e,i,t,r,n),e.PositionAndShape.calculateBoundingBox())}}}}getRelativePositionInStaffLineFromTimestamp(e,t,n,i){let s,a,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=new d.PointF2D;const h=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length,u=this.graphicalMusicSheet.GetInterpolatedIndexInVerticalContainers(e),f=Math.min(Math.floor(u),h-1),p=Math.min(Math.ceil(u),h-1);if(f<0||t<0)return c;if(s=this.getFirstLeftNotNullStaffEntryFromContainer(f,t,i),a=this.getFirstRightNotNullStaffEntryFromContainer(p,t,i),s&&a){let t=s.parentMeasure.PositionAndShape.RelativePosition.x;o>0&&(t=o);let i=s.PositionAndShape.RelativePosition.x+t,h=a.PositionAndShape.RelativePosition.x+a.parentMeasure.PositionAndShape.RelativePosition.x;const u=e.RealValue>a.getAbsoluteTimestamp().RealValue;o>0?h=a.PositionAndShape.RelativePosition.x+t:l&&(s.getAbsoluteTimestamp().RealValue===e.RealValue||u)&&(i=s.PositionAndShape.RelativePosition.x+s.PositionAndShape.BorderLeft+t,h=i);let f=0;if(s!==a){const t=s.getAbsoluteTimestamp(),n=a.getAbsoluteTimestamp();f=r.Fraction.minus(e,t).RealValue/r.Fraction.minus(n,t).RealValue}s.parentMeasure.ParentStaffLine!==a.parentMeasure.ParentStaffLine&&(s.parentMeasure.ParentStaffLine===n?h=n.PositionAndShape.Size.width:i=n.PositionAndShape.RelativePosition.x),c=new d.PointF2D(i+(h-i)*f,0)}return c}getRelativeXPositionFromTimestamp(e){const t=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length,n=this.graphicalMusicSheet.GetInterpolatedIndexInVerticalContainers(e),i=Math.max(0,Math.min(Math.round(n),t-1)),s=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].getFirstNonNullStaffEntry();return s.PositionAndShape.RelativePosition.x+s.parentMeasure.PositionAndShape.RelativePosition.x}calculatePageLabels(e){this.rules.RenderSingleHorizontalStaffline&&(e.PositionAndShape.calculateBoundingBox([o.GraphicalMeasure.name]),this.graphicalMusicSheet.ParentMusicSheet.pageWidth=e.PositionAndShape.Size.width);let t=10,n=-1;if(e.MusicSystems.length>0){const i=e.MusicSystems[0];t=i.PositionAndShape.RelativePosition.y+i.PositionAndShape.BorderTop;const s=e.MusicSystems[e.MusicSystems.length-1];n=s.PositionAndShape.RelativePosition.y+s.PositionAndShape.BorderBottom}const i=this.graphicalMusicSheet.Title;if(i&&this.rules.RenderTitle){i.PositionAndShape.Parent=e.PositionAndShape;const t=new d.PointF2D;t.x=this.graphicalMusicSheet.ParentMusicSheet.pageWidth/2,this.rules.RenderSingleHorizontalStaffline&&(t.x=Math.max(t.x,i.PositionAndShape.Size.width)),t.y=this.rules.TitleTopDistance+this.rules.SheetTitleHeight,i.PositionAndShape.RelativePosition=t,e.Labels.push(i)}if(this.graphicalMusicSheet.Subtitle&&this.rules.RenderTitle&&this.rules.RenderSubtitle){var s;const t=this.graphicalMusicSheet.Subtitle;t.PositionAndShape.Parent=e.PositionAndShape;const n=new d.PointF2D;n.x=this.graphicalMusicSheet.ParentMusicSheet.pageWidth/2,this.rules.RenderSingleHorizontalStaffline&&(n.x=i.PositionAndShape.RelativePosition.x),n.y=this.rules.TitleTopDistance+this.rules.SheetTitleHeight+this.rules.SheetMinimumDistanceBetweenTitleAndSubtitle;const r=null===(s=t.TextLines)||void 0===s?void 0:s.length;r>1&&(n.y+=t.PositionAndShape.BorderBottom*(r-1)/r),t.PositionAndShape.RelativePosition=n,e.Labels.push(t)}const r=this.graphicalMusicSheet.Composer;let a;if(r&&this.rules.RenderComposer){var l;r.PositionAndShape.Parent=e.PositionAndShape,r.setLabelPositionAndShapeBorders();const n=new d.PointF2D;n.x=this.graphicalMusicSheet.ParentMusicSheet.pageWidth-this.rules.PageRightMargin,n.y=t,n.y-=this.rules.SystemComposerDistance;const i=null===(l=r.TextLines)||void 0===l?void 0:l.length;i>1&&(n.y-=r.PositionAndShape.BorderBottom*(i-1)/i),a=n.y,r.PositionAndShape.RelativePosition=n,e.Labels.push(r)}const c=this.graphicalMusicSheet.Lyricist;if(c&&this.rules.RenderLyricist){c.PositionAndShape.Parent=e.PositionAndShape,c.setLabelPositionAndShapeBorders();const n=new d.PointF2D;n.x=this.rules.PageLeftMargin,n.y=t,n.y-=this.rules.SystemLyricistDistance,n.y+=c.PositionAndShape.BorderBottom,n.y=Math.min(n.y,null!==a&&void 0!==a?a:Number.MAX_SAFE_INTEGER),c.PositionAndShape.RelativePosition=n,e.Labels.push(c)}const h=this.graphicalMusicSheet.Copyright;if(h&&this.rules.RenderCopyright){h.PositionAndShape.Parent=e.PositionAndShape,h.setLabelPositionAndShapeBorders();const t=new d.PointF2D;t.x=e.PositionAndShape.Size.width/2,t.y=n+this.rules.SheetCopyrightMargin,t.y-=h.PositionAndShape.BorderTop,h.PositionAndShape.RelativePosition=t,e.Labels.push(h)}this.rules.RenderSingleHorizontalStaffline&&(e.PositionAndShape.calculateBoundingBox([o.GraphicalMeasure.name]),this.graphicalMusicSheet.ParentMusicSheet.pageWidth=e.PositionAndShape.Size.width)}createGraphicalTies(){for(let e=0;e<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;e++){const t=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e];for(let n=0;n<t.CompleteNumberOfStaves;n++)for(let i=0;i<t.VerticalSourceStaffEntryContainers.length;i++){const s=t.VerticalSourceStaffEntryContainers[i].StaffEntries[n];if(s){const t=this.graphicalMusicSheet.findGraphicalStaffEntryFromMeasureList(n,e,s);t&&(t.GraphicalTies.clear(),t.ties.clear());for(let i=0,r=s.VoiceEntries.length;i<r;++i){const r=s.VoiceEntries[i];for(let i=0,s=r.Notes.length;i<s;++i){const s=r.Notes[i];if(s.NoteTie){const i=s.NoteTie;if(s===s.NoteTie.Notes.last())continue;if(t)for(const e of t.GraphicalTies)e.Tie;this.handleTie(i,t,n,e)}}}this.setTieDirections(t)}}}}handleTie(e,t,n,i){if(!t)return;t.ties.push(e);let s,r,a,o=t;for(let l=1;l<e.Notes.length;l++)if(s=o.findTieGraphicalNoteFromNote(e.Notes[l-1]),r=this.graphicalMusicSheet.GetGraphicalFromSourceStaffEntry(e.Notes[l].ParentStaffEntry),r){if(a=r.findTieGraphicalNoteFromNote(e.Notes[l]),void 0!==s&&void 0!==a&&r){if(!s.sourceNote.PrintObject||!a.sourceNote.PrintObject)continue;const t=this.createGraphicalTie(e,o,r,s,a);o.GraphicalTies.push(t),this.staffEntriesWithGraphicalTies.indexOf(o)>=0&&this.staffEntriesWithGraphicalTies.push(o)}o=r}}setTieDirections(e){if(!e)return;const t=e.ties;if(1===t.length){const e=t[0];if(e.TieDirection===A.PlacementEnum.NotYetDefined){const t=e.Notes[0].ParentVoiceEntry.ParentVoice.VoiceId;2!==t&&6!==t||(e.TieDirection=A.PlacementEnum.Below)}}if(t.length>1){let e;for(const n of t){const t=n.Notes[0];(!e||t.Pitch.getHalfTone()>e.Pitch.getHalfTone())&&(e=t)}for(const n of t)n.TieDirection===A.PlacementEnum.NotYetDefined&&(n.Notes[0]===e?n.TieDirection=A.PlacementEnum.Above:n.TieDirection=A.PlacementEnum.Below)}}createAccidentalCalculators(){const e=[],t=this.graphicalMusicSheet.ParentMusicSheet.getFirstSourceMeasure();if(t)for(let n=0;n<t.CompleteNumberOfStaves;n++){const i=new S.AccidentalCalculator;if(e.push(i),i.Transpose=this.graphicalMusicSheet.ParentMusicSheet.Transpose,t.FirstInstructionsStaffEntries[n])for(let e=0,s=t.FirstInstructionsStaffEntries[n].Instructions.length;e<s;++e){const s=t.FirstInstructionsStaffEntries[n].Instructions[e];if(s instanceof g.KeyInstruction){const e=s;i.ActiveKeyInstruction=e}}}return e}calculateVerticalContainersList(){const e=this.graphicalMusicSheet.MeasureList[0].length;for(let t=0;t<this.graphicalMusicSheet.MeasureList.length;t++)for(let n=0;n<e;n++){const e=this.graphicalMusicSheet.MeasureList[t][n];if(e)for(let t=0,i=e.staffEntries.length;t<i;++t){const i=e.staffEntries[t],s=this.graphicalMusicSheet.getOrCreateVerticalContainer(i.getAbsoluteTimestamp());s&&(s.StaffEntries[n]=i,i.parentVerticalContainer=s)}}}setIndicesToVerticalGraphicalContainers(){for(let e=0;e<this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length;e++)this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[e].Index=e}createGraphicalMeasuresForSourceMeasure(e,t,n,i,s){this.initGraphicalMeasuresCreation();const r=[],a=[],o=[],l=[];let c=!0;for(let h=0;h<e.CompleteNumberOfStaves;h++){const u=this.createGraphicalMeasure(e,o,a,t[h],s,i,n,h,l);c=c&&u.hasOnlyRests,r.push(u)}return e.allRests=c,e.VerticalMeasureList=r,r}createGraphicalMeasure(e,t,n,i,s,o,u,d,p){const m=this.graphicalMusicSheet.ParentMusicSheet.getStaffFromIndex(d);let b;if(s[d].ClefType===l.ClefEnum.TAB||m.isTab)m.isTab=!0,b=B.symbolFactory.createTabStaffMeasure(e,m);else if(e.multipleRestMeasures&&this.rules.RenderMultipleRestMeasures)b=B.symbolFactory.createMultiRestMeasure(e,m);else{if(e.multipleRestMeasureNumber>1)return;b=B.symbolFactory.createGraphicalMeasure(e,m)}if(b.hasError=e.getErrorInMeasure(d),e.FirstInstructionsStaffEntries[d])for(let r=0,a=e.FirstInstructionsStaffEntries[d].Instructions.length;r<a;++r){const t=e.FirstInstructionsStaffEntries[d].Instructions[r];if(t instanceof g.KeyInstruction){const e=g.KeyInstruction.copy(t),n=b.getTransposedHalftones();0!==n&&b.ParentStaff.ParentInstrument.MidiInstrumentId!==w.MidiInstrument.Percussion&&B.transposeCalculator&&B.transposeCalculator.transposeKey(e,n),i.ActiveKeyInstruction=e}}const v=[];for(let a=0,l=e.StaffLinkedExpressions[d].length;a<l;++a){const t=e.StaffLinkedExpressions[d][a];let n;if(t.OctaveShiftStart?n=t.OctaveShiftStart:t.OctaveShiftEnd&&(n=t.OctaveShiftEnd),n){var y;v.push(t);const i=n;let s=null===i||void 0===i||null===(y=i.ParentEndMultiExpression)||void 0===y?void 0:y.AbsoluteTimestamp;null!==i&&void 0!==i&&i.ParentEndMultiExpression||(s=r.Fraction.plus(e.AbsoluteTimestamp,e.Duration)),o[d]=new x.OctaveShiftParams(i,i.ParentStartMultiExpression.AbsoluteTimestamp,s)}}for(let r=0;r<e.VerticalSourceStaffEntryContainers.length;r++){const a=e.VerticalSourceStaffEntryContainers[r].StaffEntries[d];if(a){var S;for(let t=0,n=a.Instructions.length;t<n;++t){var E;const e=a.Instructions[t];e instanceof l.ClefInstruction&&(null===(E=s[d])||void 0===E?void 0:E.ClefType)!==l.ClefEnum.TAB&&(s[d]=e)}const e=B.symbolFactory.createStaffEntry(a,b);r<b.staffEntries.length?b.addGraphicalStaffEntryAtTimestamp(e):b.addGraphicalStaffEntry(e);const h=[];a.Link&&(a.findLinkedNotes(h),this.handleStaffEntryLink(e,p));let f=c.OctaveEnum.NONE;if(o[d]&&o[d].getAbsoluteStartTimestamp.lte(a.AbsoluteTimestamp)&&a.AbsoluteTimestamp.lte(o[d].getAbsoluteEndTimestamp)&&(f=o[d].getOpenOctaveShift.Type),f===c.OctaveEnum.NONE)for(const t of v){var _,T;let e;if(t.OctaveShiftStart?e=t.OctaveShiftStart:t.OctaveShiftEnd&&(e=t.OctaveShiftEnd),null!==(_=e)&&void 0!==_&&null!==(_=_.ParentStartMultiExpression)&&void 0!==_&&_.AbsoluteTimestamp.lte(a.AbsoluteTimestamp)&&(null===(T=e.ParentEndMultiExpression)||void 0===T||!T.AbsoluteTimestamp.lt(a.AbsoluteTimestamp))){f=e.Type;break}}for(let r=0,o=a.VoiceEntries.length;r<o;++r){const o=a.VoiceEntries[r];f=this.handleVoiceEntry(o,e,i,u,s[d],t,n,f,d,h,a)}if(a.Instructions.length>0){const t=a.Instructions[0];B.symbolFactory.createInStaffClef(e,t)}this.rules.RenderChordSymbols&&(null===(S=a.ChordContainers)||void 0===S?void 0:S.length)>0&&(a.ParentStaff.ParentInstrument.HasChordSymbols=!0,B.symbolFactory.createChordSymbols(a,e,i.ActiveKeyInstruction,this.graphicalMusicSheet.ParentMusicSheet.Transpose))}}if(i.doCalculationsAtEndOfMeasure(),e.LastInstructionsStaffEntries[d]){const t=e.LastInstructionsStaffEntries[d];for(let e=0,n=t.Instructions.length;e<n;++e){var M;const n=t.Instructions[e];n instanceof l.ClefInstruction&&(null===(M=s[d])||void 0===M?void 0:M.ClefType)!==l.ClefEnum.TAB&&(s[d]=n)}}for(let r=0,a=e.StaffLinkedExpressions[d].length;r<a;++r){const t=e.StaffLinkedExpressions[d][r];void 0!==t.OctaveShiftEnd&&void 0!==o[d]&&t.OctaveShiftEnd===o[d].getOpenOctaveShift&&(o[d]=void 0)}for(const r of b.staffEntries)for(const e of r.graphicalVoiceEntries)this.setBeamNotesWantedStemDirections(e.parentVoiceEntry);if(this.rules.FillEmptyMeasuresWithWholeRest>=1&&0===b.staffEntries.length){const t=new f.SourceStaffEntry(new C.VerticalSourceStaffEntryContainer(b.parentSourceMeasure,b.parentSourceMeasure.AbsoluteTimestamp,b.parentSourceMeasure.CompleteNumberOfStaves),m);if(0===m.Voices.length){const e=new D.Voice(b.ParentStaff.ParentInstrument,-1);m.Voices.push(e)}const n=new h.VoiceEntry(new r.Fraction(0,1),m.Voices[0],t);let i=e.Duration;0===i.RealValue&&(i=e.ActiveTimeSignature.clone());const s=new a.Note(n,t,i,void 0,e,!0);s.IsWholeMeasureRest=!0,s.PrintObject=this.rules.FillEmptyMeasuresWithWholeRest===R.FillEmptyMeasuresWithWholeRests.YesVisible,n.Notes.push(s);const o=B.symbolFactory.createStaffEntry(t,b);b.addGraphicalStaffEntry(o),o.relInMeasureTimestamp=n.Timestamp;const u=B.symbolFactory.createVoiceEntry(n,o);o.graphicalVoiceEntries.push(u);const d=B.symbolFactory.createNote(s,u,new l.ClefInstruction,c.OctaveEnum.NONE,this.rules);B.stafflineNoteCalculator.trackNote(d),u.notes.push(d)}b.hasOnlyRests=!0;for(const r of b.staffEntries)if(b.hasOnlyRests=r.hasOnlyRests(),!b.hasOnlyRests)break;return b}checkNoteForAccidental(e,t,n,i){let s=e.sourceNote.Pitch;const r=e.parentVoiceEntry.parentStaffEntry.parentMeasure.getTransposedHalftones();0!==r&&e.sourceNote.ParentStaffEntry.ParentStaff.ParentInstrument.MidiInstrumentId!==w.MidiInstrument.Percussion&&(s=e.Transpose(t.ActiveKeyInstruction,n,r,i),e.sourceNote.TransposedPitch=s),e.sourceNote.halfTone=s.getHalfTone(),t.checkAccidental(e,s)}handleStaffEntries(e){for(let t=0,n=this.graphicalMusicSheet.MeasureList.length;t<n;++t){const n=this.graphicalMusicSheet.MeasureList[t];for(let t=0,i=n.length;t<i;++t){const i=n[t];if(i){this.rules.PercussionOneLineCutoff>0&&!this.rules.PercussionUseCajon2NoteSystem&&e[t]&&(-1===this.rules.PercussionOneLineCutoff||B.stafflineNoteCalculator.getStafflineUniquePositionCount(t)<this.rules.PercussionOneLineCutoff)&&(i.ParentStaff.StafflineCount=1);for(const e of i.staffEntries)void 0!==e.parentMeasure&&e.graphicalVoiceEntries.length>0&&e.graphicalVoiceEntries[0].notes.length>0&&(this.layoutVoiceEntries(e,t),this.layoutStaffEntry(e));this.graphicalMeasureCreatedCalculations(i)}}}}calculateSkyBottomLines(){}calculateExpressionAlignements(){}calculateStaffEntryArticulationMarks(){for(let e=0,t=this.musicSystems.length;e<t;++e){const t=this.musicSystems[e];for(let e=0,n=t.StaffLines.length;e<n;++e){const n=t.StaffLines[e];for(let e=0,t=n.Measures.length;e<t;++e){const t=n.Measures[e];for(let e=0,n=t.staffEntries.length;e<n;++e){const n=t.staffEntries[e];for(let e=0,t=n.sourceStaffEntry.VoiceEntries.length;e<t;++e){const t=n.sourceStaffEntry.VoiceEntries[e];t.Articulations.length>0&&this.layoutArticulationMarks(t.Articulations,t,n)}}}}}}calculateOrnaments(){for(let e=0,t=this.musicSystems.length;e<t;++e){const t=this.musicSystems[e];for(let e=0,n=t.StaffLines.length;e<n;++e){const n=t.StaffLines[e];for(let e=0,t=n.Measures.length;e<t;++e){const t=n.Measures[e];for(let e=0,n=t.staffEntries.length;e<n;++e){const n=t.staffEntries[e];for(let e=0,t=n.sourceStaffEntry.VoiceEntries.length;e<t;++e){const t=n.sourceStaffEntry.VoiceEntries[e];if(t.OrnamentContainer){if(t.hasTie()&&!n.relInMeasureTimestamp.Equals(t.Timestamp))continue;this.layoutOrnament(t.OrnamentContainer,t,n),-1===this.staffEntriesWithOrnaments.indexOf(n)&&this.staffEntriesWithOrnaments.push(n)}}}}}}}getFingeringPlacement(e){let t=this.rules.FingeringPosition;return t!==A.PlacementEnum.NotYetDefined&&t!==A.PlacementEnum.AboveOrBelow||(t=e.isUpperStaffOfInstrument()?A.PlacementEnum.Above:A.PlacementEnum.Below),t}calculateFingerings(){if(this.rules.FingeringPosition!==A.PlacementEnum.Left&&this.rules.FingeringPosition!==A.PlacementEnum.Right)for(const n of this.musicSystems)for(const i of n.StaffLines)for(const n of i.Measures){if(n.isTabMeasure&&!this.rules.TabFingeringsRendered)continue;const s=this.getFingeringPlacement(n);for(const r of n.staffEntries){r.FingeringEntries=[];const a=i.SkyBottomLineCalculator,o=r.PositionAndShape.RelativePosition.x+n.PositionAndShape.RelativePosition.x,l=[];for(const e of r.graphicalVoiceEntries)if(!e.parentVoiceEntry.IsGrace)for(const t of e.parentVoiceEntry.TechnicalInstructions)t.type===b.TechnicalInstructionType.Fingering&&l.push(t);if(l.length>0){let n;s===A.PlacementEnum.Below&&l.reverse();for(const i of r.graphicalVoiceEntries)for(const s of i.notes){var e,t;(!n||(null===(e=s.sourceNote.Pitch)||void 0===e?void 0:e.getHalfTone())>(null===(t=n.Pitch)||void 0===t?void 0:t.getHalfTone()))&&(n=s.sourceNote)}l[0].sourceNote===n&&s===A.PlacementEnum.Above&&l.reverse()}for(let e=0;e<l.length;e++){const t=l[e],n=s===A.PlacementEnum.Above?m.TextAlignmentEnum.CenterBottom:m.TextAlignmentEnum.CenterTop,c=new M.Label(t.value,n),h=new p.GraphicalLabel(c,this.rules.FingeringTextSize,c.textAlignment,this.rules,i.PositionAndShape);t.fontFamily&&(c.fontFamily=t.fontFamily);const u=o+h.PositionAndShape.BorderMarginLeft,d=o+h.PositionAndShape.BorderMarginRight;let f;f=s===A.PlacementEnum.Above?a.getSkyLineMinInRange(u,d):a.getBottomLineMaxInRange(u,d);let g=0;0===e?(g+=this.rules.FingeringOffsetY,s===A.PlacementEnum.Above&&(g+=.1)):g+=this.rules.FingeringPaddingY,s===A.PlacementEnum.Above&&(g*=-1),h.PositionAndShape.RelativePosition.y+=f+g,h.PositionAndShape.RelativePosition.x=o,h.setLabelPositionAndShapeBorders(),h.PositionAndShape.calculateBoundingBox(),r.FingeringEntries.push(h);const b=h.PositionAndShape.RelativePosition.x+h.PositionAndShape.BorderLeft,v=b-h.PositionAndShape.BorderLeft+h.PositionAndShape.BorderRight;s===A.PlacementEnum.Above?a.updateSkyLineInRange(b,v,h.PositionAndShape.RelativePosition.y+h.PositionAndShape.BorderTop):s===A.PlacementEnum.Below&&a.updateBottomLineInRange(b,v,h.PositionAndShape.RelativePosition.y+h.PositionAndShape.BorderBottom)}}}}optimizeRestPlacement(){for(let e=0,t=this.musicSystems.length;e<t;++e){const t=this.musicSystems[e];for(let e=0,n=t.StaffLines.length;e<n;++e){const n=t.StaffLines[e];for(let e=0,t=n.Measures.length;e<t;++e){const t=n.Measures[e];for(let e=0,n=t.staffEntries.length;e<n;++e){const n=t.staffEntries[e];this.optimizeRestNotePlacement(n,t)}}}}}calculateTwoRestNotesPlacementWithCollisionDetection(e){const t=e.graphicalVoiceEntries[0].notes[0],n=e.graphicalVoiceEntries[1].notes[0];n.PositionAndShape.RelativePosition=new d.PointF2D(0,2.5),e.PositionAndShape.calculateAbsolutePositionsRecursiveWithoutTopelement(),t.PositionAndShape.computeNonOverlappingPositionWithMargin(e.PositionAndShape,y.ColDirEnum.Up,new d.PointF2D(0,n.PositionAndShape.RelativePosition.y));const i=t.PositionAndShape.RelativePosition;i.y-=1,t.PositionAndShape.RelativePosition=i,e.PositionAndShape.calculateBoundingBox()}calculateRestNotePlacementWithCollisionDetectionFromGraphicalNote(e){let t,n;e.graphicalVoiceEntries[0].notes[0].sourceNote.isRest()?(t=e.graphicalVoiceEntries[0].notes[0],n=e.graphicalVoiceEntries[1].notes):(n=e.graphicalVoiceEntries[0].notes,t=e.graphicalVoiceEntries[1].notes[0]);let i=!1;e.PositionAndShape.calculateAbsolutePositionsRecursiveWithoutTopelement();for(let s=0,r=n.length;s<r;++s){const e=n[s];if(t.PositionAndShape.marginCollisionDetection(e.PositionAndShape)){i=!0;break}}if(i)if(t.sourceNote.ParentVoiceEntry.ParentVoice instanceof v.LinkedVoice){const e=n[0].PositionAndShape.BorderMarginBottom+n[0].PositionAndShape.RelativePosition.y;t.PositionAndShape.RelativePosition=new d.PointF2D(0,e-t.PositionAndShape.BorderMarginTop+.5)}else{const e=n[n.length-1],i=e.PositionAndShape.BorderMarginTop+e.PositionAndShape.RelativePosition.y;if(n[0].sourceNote.ParentVoiceEntry.ParentVoice instanceof v.LinkedVoice)t.PositionAndShape.RelativePosition=new d.PointF2D(0,i-t.PositionAndShape.BorderMarginBottom-.5);else{const e=n[0].PositionAndShape.BorderMarginBottom+n[0].PositionAndShape.RelativePosition.y;t.PositionAndShape.RelativePosition=e<2?new d.PointF2D(0,e-t.PositionAndShape.BorderMarginTop+.5):new d.PointF2D(0,i-t.PositionAndShape.BorderMarginBottom-0)}}e.PositionAndShape.calculateBoundingBox()}calculateTieCurves(){for(const e of this.musicSystems)for(const t of e.StaffLines)for(const e of t.Measures)for(const t of e.staffEntries)for(const n of t.GraphicalTies)if(void 0!==n.StartNote&&n.StartNote.parentVoiceEntry.parentStaffEntry===t){const t=n.StartNote.parentVoiceEntry.parentStaffEntry.parentMeasure.ParentStaffLine!==n.EndNote.parentVoiceEntry.parentStaffEntry.parentMeasure.ParentStaffLine;this.layoutGraphicalTie(n,t,e.ParentStaff.isTab)}}calculateLyricsPosition(){const e=new _.Dictionary;for(let t=0,n=this.graphicalMusicSheet.ParentMusicSheet.Instruments.length;t<n;++t){const e=this.graphicalMusicSheet.ParentMusicSheet.Instruments[t];e.HasLyrics&&e.LyricVersesNumbers.length>0&&e.LyricVersesNumbers.sort()}for(let t=0,n=this.musicSystems.length;t<n;++t){const n=this.musicSystems[t];for(let t=0,i=n.StaffLines.length;t<i;++t){const i=n.StaffLines[t],s=this.calculateSingleStaffLineLyricsPosition(i,i.ParentStaff.ParentInstrument.LyricVersesNumbers);e.setValue(i,s),this.calculateLyricsExtendsAndDashes(e.getValue(i))}}for(let t=0,n=this.musicSystems.length;t<n;++t){const n=this.musicSystems[t];for(let t=0,i=n.StaffLines.length;t<i;++t){const i=n.StaffLines[t];this.calculateLyricsExtendsAndDashes(e.getValue(i))}}}calculateSingleLyricWord(e){const t=e.ParentLyricWord,n=t.GraphicalLyricsEntries.indexOf(e);let i;if(n>=0&&(i=t.GraphicalLyricsEntries[n+1]),!i)return;const s=e.StaffEntryParent.parentMeasure.ParentStaffLine,r=i.StaffEntryParent.parentMeasure.ParentStaffLine,a=e.StaffEntryParent,o=i.StaffEntryParent;if(e.StaffEntryParent.parentMeasure.ParentStaffLine===i.StaffEntryParent.parentMeasure.ParentStaffLine){const t=a.parentMeasure.PositionAndShape.RelativePosition.x+a.PositionAndShape.RelativePosition.x+e.GraphicalLabel.PositionAndShape.RelativePosition.x+e.GraphicalLabel.PositionAndShape.BorderMarginRight-e.GraphicalLabel.CenteringXShift,n=o.parentMeasure.PositionAndShape.RelativePosition.x+o.PositionAndShape.RelativePosition.x+e.GraphicalLabel.PositionAndShape.RelativePosition.x+i.GraphicalLabel.PositionAndShape.BorderMarginLeft,r=e.GraphicalLabel.PositionAndShape.RelativePosition.y;let l=1;n-t>3*this.rules.MinimumDistanceBetweenDashes&&(l=Math.floor((n-t)/this.rules.MinimumDistanceBetweenDashes)-1),1===l?this.calculateSingleDashForLyricWord(s,t,n,r):this.calculateDashes(s,t,n,r)}else{const t=a.parentMeasure.PositionAndShape.RelativePosition.x+a.PositionAndShape.RelativePosition.x+e.GraphicalLabel.PositionAndShape.BorderMarginRight,n=s.Measures[s.Measures.length-1],l=n.PositionAndShape.RelativePosition.x+n.PositionAndShape.Size.width;let c=e.GraphicalLabel.PositionAndShape.RelativePosition.y;if(this.calculateDashes(s,t,l,c),r&&r.Measures[0]&&o.parentMeasure.ParentStaffLine&&(o!==o.parentMeasure.staffEntries[0]||o.parentMeasure!==o.parentMeasure.ParentStaffLine.Measures[0])){const e=r.Measures[0].staffEntries[0].PositionAndShape.RelativePosition.x,t=o.parentMeasure.PositionAndShape.RelativePosition.x+o.PositionAndShape.RelativePosition.x+i.GraphicalLabel.PositionAndShape.BorderMarginLeft;c=i.GraphicalLabel.PositionAndShape.RelativePosition.y,this.calculateDashes(r,e,t,c)}}}calculateDashes(e,t,n,i){let s=n-t;if(s<3*this.rules.MinimumDistanceBetweenDashes)this.calculateSingleDashForLyricWord(e,t,n,i);else{const r=Math.floor(s/this.rules.MinimumDistanceBetweenDashes)-1,a=s/(r+1);let o=0;for(t+=a,n-=a;o<=Math.floor(r/2)&&n>t;)s=this.calculateRightAndLeftDashesForLyricWord(e,t,n,i),t+=a,n-=a,o++;s>2*a&&this.calculateSingleDashForLyricWord(e,t,n,i)}}calculateSingleDashForLyricWord(e,t,n,i){const s=new M.Label("-");s.colorDefault=this.rules.DefaultColorLyrics;let r=this.rules.LyricsHeight;n-t<.8&&(r*=.8,i-=.1*r);const a=new p.GraphicalLabel(s,r,m.TextAlignmentEnum.CenterBottom,this.rules);a.setLabelPositionAndShapeBorders(),e.LyricsDashes.push(a),-1===this.staffLinesWithLyricWords.indexOf(e)&&this.staffLinesWithLyricWords.push(e),a.PositionAndShape.Parent=e.PositionAndShape;const o=new d.PointF2D(t+(n-t)/2,i);a.PositionAndShape.RelativePosition=o}calculateLyricExtend(e){let t=e.GraphicalLabel.PositionAndShape.RelativePosition.y;const n=e.StaffEntryParent,i=n.parentMeasure.ParentStaffLine;let s,r;const a=n.parentMeasure.ParentStaff.idInMusicSheet;for(let o=n.parentVerticalContainer.Index+1;o<this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length;++o){const e=this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[o].StaffEntries[a];if(e){if(e.hasOnlyRests())break;if(e.LyricsEntries.length>0)break;s=e,r=s.parentMeasure.ParentStaffLine,r||(r=n.parentMeasure.ParentStaffLine)}}if(s&&r)if(i===r&&s.parentMeasure.ParentStaffLine){const r=n.parentMeasure.PositionAndShape.RelativePosition.x+n.PositionAndShape.RelativePosition.x+e.GraphicalLabel.PositionAndShape.BorderMarginRight,a=s.parentMeasure.PositionAndShape.RelativePosition.x+s.PositionAndShape.RelativePosition.x+s.PositionAndShape.BorderMarginRight;t-=e.GraphicalLabel.PositionAndShape.Size.height/4,this.calculateSingleLyricWordWithUnderscore(i,r,a,t)}else{const a=i.Measures[i.Measures.length-1].PositionAndShape,o=n.parentMeasure.PositionAndShape.RelativePosition.x+n.PositionAndShape.RelativePosition.x+e.GraphicalLabel.PositionAndShape.BorderMarginRight,l=a.RelativePosition.x+a.Size.width;if(t-=e.GraphicalLabel.PositionAndShape.Size.height/4,this.calculateSingleLyricWordWithUnderscore(i,o,l,t),!s)return;if(s.parentMeasure.ParentStaffLine&&s.parentMeasure.staffEntries&&(s!==s.parentMeasure.staffEntries[0]||s.parentMeasure!==s.parentMeasure.ParentStaffLine.Measures[0])){const e=r.Measures[0].staffEntries[0].PositionAndShape.RelativePosition.x,n=s.parentMeasure.PositionAndShape.RelativePosition.x+s.PositionAndShape.RelativePosition.x+s.PositionAndShape.BorderMarginRight;this.calculateSingleLyricWordWithUnderscore(r,e,n,t)}}}calculateSingleLyricWordWithUnderscore(e,t,n,i){const s=new d.PointF2D(t,i),r=new d.PointF2D(n,i),a=new T.GraphicalLine(s,r,this.rules.LyricUnderscoreLineWidth);a.colorHex=this.rules.DefaultColorLyrics,e.LyricLines.push(a),-1===this.staffLinesWithLyricWords.indexOf(e)&&this.staffLinesWithLyricWords.push(e)}calculateRightAndLeftDashesForLyricWord(e,t,n,i){const s=new M.Label("-");s.colorDefault=this.rules.DefaultColorLyrics;const r=new p.GraphicalLabel(s,this.rules.LyricsHeight,m.TextAlignmentEnum.CenterBottom,this.rules);r.setLabelPositionAndShapeBorders(),e.LyricsDashes.push(r),-1===this.staffLinesWithLyricWords.indexOf(e)&&this.staffLinesWithLyricWords.push(e),r.PositionAndShape.Parent=e.PositionAndShape;const a=new d.PointF2D(t,i);r.PositionAndShape.RelativePosition=a;const o=new M.Label("-"),l=new p.GraphicalLabel(o,this.rules.LyricsHeight,m.TextAlignmentEnum.CenterBottom,this.rules);l.setLabelPositionAndShapeBorders(),e.LyricsDashes.push(l),l.PositionAndShape.Parent=e.PositionAndShape;const c=new d.PointF2D(n,i);return l.PositionAndShape.RelativePosition=c,l.PositionAndShape.RelativePosition.x-r.PositionAndShape.RelativePosition.x}calculateDynamicExpressions(){const e=Math.min(this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length-1,this.rules.MaxMeasureToDrawIndex);for(let t=Math.min(this.rules.MinMeasureToDrawIndex,this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length);t<=e;t++){const e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t];this.dynamicExpressionMap.clear();for(let n=0;n<e.StaffLinkedExpressions.length;n++)if(this.graphicalMusicSheet.MeasureList[t]&&this.graphicalMusicSheet.MeasureList[t][n]&&this.graphicalMusicSheet.MeasureList[t][n].ParentStaff.isVisible())for(let i=0;i<e.StaffLinkedExpressions[n].length;i++)(void 0!==e.StaffLinkedExpressions[n][i].InstantaneousDynamic||void 0!==e.StaffLinkedExpressions[n][i].StartingContinuousDynamic&&e.StaffLinkedExpressions[n][i].StartingContinuousDynamic.StartMultiExpression===e.StaffLinkedExpressions[n][i]&&0===e.StaffLinkedExpressions[n][i].UnknownList.length)&&this.calculateDynamicExpressionsForMultiExpression(e.StaffLinkedExpressions[n][i],t,n)}this.dynamicExpressionMap.clear()}calculateOctaveShifts(){for(let e=0;e<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;e++){const t=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e];for(let n=0;n<t.StaffLinkedExpressions.length;n++)if(this.graphicalMusicSheet.MeasureList[e]&&this.graphicalMusicSheet.MeasureList[e][n]&&this.graphicalMusicSheet.MeasureList[e][n].ParentStaff.isVisible())for(let i=0;i<t.StaffLinkedExpressions[n].length;i++)t.StaffLinkedExpressions[n][i].OctaveShiftStart&&this.calculateSingleOctaveShift(t,t.StaffLinkedExpressions[n][i],e,n)}}calculatePedals(){for(let e=0;e<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;e++){const t=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e];for(let n=0;n<t.StaffLinkedExpressions.length;n++)if(this.graphicalMusicSheet.MeasureList[e]&&this.graphicalMusicSheet.MeasureList[e][n]&&this.graphicalMusicSheet.MeasureList[e][n].ParentStaff.isVisible())for(let i=0;i<t.StaffLinkedExpressions[n].length;i++)t.StaffLinkedExpressions[n][i].PedalStart&&this.calculateSinglePedal(t,t.StaffLinkedExpressions[n][i],e,n)}}getFirstLeftNotNullStaffEntryFromContainer(e,t,n){if(this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[e].StaffEntries[t])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[e].StaffEntries[t];for(let i=e-1;i>=0;i--)if(this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].StaffEntries[t])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].StaffEntries[t]}getFirstRightNotNullStaffEntryFromContainer(e,t,n){if(this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[e].StaffEntries[t])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[e].StaffEntries[t];for(let i=e+1;i<this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers.length;i++)if(this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].StaffEntries[t])return this.graphicalMusicSheet.VerticalGraphicalStaffEntryContainers[i].StaffEntries[t]}calculateWordRepetitionInstructions(){for(let e=0;e<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;e++){const t=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e];for(let n=0,i=t.FirstRepetitionInstructions.length;n<i;++n){const i=t.FirstRepetitionInstructions[n];this.calculateWordRepetitionInstruction(i,e)}for(let n=0,i=t.LastRepetitionInstructions.length;n<i;++n){const i=t.LastRepetitionInstructions[n];this.calculateWordRepetitionInstruction(i,e)}}}calculateRepetitionEndings(){const e=this.graphicalMusicSheet.ParentMusicSheet;for(let t=0,n=e.Repetitions.length;t<n;++t){const n=e.Repetitions[t];this.calcGraphicalRepetitionEndingsRecursively(n)}}calculateTempoExpressions(){const e=Math.min(this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length-1,this.rules.MaxMeasureToDrawIndex);for(let t=this.rules.MinMeasureToDrawIndex;t<=e;t++){const e=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[t];for(let n=0;n<e.TempoExpressions.length;n++)this.calculateTempoExpressionsForMultiTempoExpression(e,e.TempoExpressions[n],t)}}calculateRehearsalMarks(){if(this.rules.RenderRehearsalMarks)for(const e of this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures)this.calculateRehearsalMark(e)}calculateRehearsalMark(e){throw new Error(this.abstractNotImplementedErrorMessage)}calculateMoodAndUnknownExpressions(){for(let e=0;e<this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures.length;e++){const t=this.graphicalMusicSheet.ParentMusicSheet.SourceMeasures[e];for(let n=0;n<t.StaffLinkedExpressions.length;n++)if(this.graphicalMusicSheet.MeasureList[e]&&this.graphicalMusicSheet.MeasureList[e][n]&&this.graphicalMusicSheet.MeasureList[e][n].ParentStaff.isVisible())for(let i=0;i<t.StaffLinkedExpressions[n].length;i++)(t.StaffLinkedExpressions[n][i].MoodList.length>0||t.StaffLinkedExpressions[n][i].UnknownList.length>0)&&this.calculateMoodAndUnknownExpression(t.StaffLinkedExpressions[n][i],e,n)}}calculateStemDirectionFromVoices(e){if(void 0!==e.ParentSourceStaffEntry.Link)return e===e.ParentSourceStaffEntry.VoiceEntries[0]?void(e.WantedStemDirection=h.StemDirectionType.Up):void(e.WantedStemDirection=h.StemDirectionType.Down);e.ParentVoice instanceof v.LinkedVoice?e.WantedStemDirection=h.StemDirectionType.Down:e.ParentSourceStaffEntry.VoiceEntries.length>1&&(e.WantedStemDirection=h.StemDirectionType.Up)}setBeamNotesWantedStemDirections(e){if(!(e.Notes.length>0))return;const t=e.Notes[0].NoteBeam;if(t)for(const n of t.Notes)if(n.ParentVoiceEntry.WantedStemDirection!==h.StemDirectionType.Undefined&&n.ParentVoiceEntry.ParentSourceStaffEntry.ParentStaff.Id===e.ParentSourceStaffEntry.ParentStaff.Id){e.WantedStemDirection=n.ParentVoiceEntry.WantedStemDirection;break}}}t.MusicSheetCalculator=B},8033:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OctaveShiftParams=void 0,t.OctaveShiftParams=class{constructor(e,t,n){this.getOpenOctaveShift=e,this.getAbsoluteStartTimestamp=t,this.getAbsoluteEndTimestamp=n}}},8045:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(5875),t),s(n(2221),t),s(n(437),t),s(n(6229),t)},8156:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(5955),t),s(n(1745),t),s(n(6873),t),s(n(2552),t),s(n(363),t)},8215:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrnamentEnum=t.OrnamentContainer=void 0;const i=n(8233),s=n(6362);var r;t.OrnamentContainer=class{constructor(e){this.placement=s.PlacementEnum.Above,this.accidentalAbove=i.AccidentalEnum.NONE,this.accidentalBelow=i.AccidentalEnum.NONE,this.ornament=e}get GetOrnament(){return this.ornament}get AccidentalAbove(){return this.accidentalAbove}set AccidentalAbove(e){this.accidentalAbove=e}get AccidentalBelow(){return this.accidentalBelow}set AccidentalBelow(e){this.accidentalBelow=e}},function(e){e[e.Trill=0]="Trill",e[e.Turn=1]="Turn",e[e.InvertedTurn=2]="InvertedTurn",e[e.DelayedTurn=3]="DelayedTurn",e[e.DelayedInvertedTurn=4]="DelayedInvertedTurn",e[e.Mordent=5]="Mordent",e[e.InvertedMordent=6]="InvertedMordent"}(r||(t.OrnamentEnum=r={}))},8233:(e,t)=>{"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.Pitch=t.AccidentalEnum=t.NoteEnum=void 0,function(e){e[e.C=0]="C",e[e.D=2]="D",e[e.E=4]="E",e[e.F=5]="F",e[e.G=7]="G",e[e.A=9]="A",e[e.B=11]="B"}(n||(t.NoteEnum=n={})),function(e){e[e.SHARP=0]="SHARP",e[e.FLAT=1]="FLAT",e[e.NONE=2]="NONE",e[e.NATURAL=3]="NATURAL",e[e.DOUBLESHARP=4]="DOUBLESHARP",e[e.DOUBLEFLAT=5]="DOUBLEFLAT",e[e.TRIPLESHARP=6]="TRIPLESHARP",e[e.TRIPLEFLAT=7]="TRIPLEFLAT",e[e.QUARTERTONESHARP=8]="QUARTERTONESHARP",e[e.QUARTERTONEFLAT=9]="QUARTERTONEFLAT",e[e.SLASHFLAT=10]="SLASHFLAT",e[e.THREEQUARTERSSHARP=11]="THREEQUARTERSSHARP",e[e.THREEQUARTERSFLAT=12]="THREEQUARTERSFLAT",e[e.SLASHQUARTERSHARP=13]="SLASHQUARTERSHARP",e[e.SLASHSHARP=14]="SLASHSHARP",e[e.DOUBLESLASHFLAT=15]="DOUBLESLASHFLAT",e[e.SORI=16]="SORI",e[e.KORON=17]="KORON"}(i||(t.AccidentalEnum=i={}));class s{static getNoteEnumString(e){switch(e){case n.C:return"C";case n.D:return"D";case n.E:return"E";case n.F:return"F";case n.G:return"G";case n.A:return"A";case n.B:return"B";default:return""}}static lineShiftFromNoteEnum(e,t){if(0===t)return[e,0];const n=s.pitchEnumValues,i=n.indexOf(e);let r=0,a=(i+t)%n.length;return i+t>n.length-1&&(r=1),a<0&&(a=n.length+a,r=-1),[n[a],r]}static CalculateTransposedHalfTone(e,t){const n=e.fundamentalNote+e.AccidentalHalfTones+t;return s.WrapAroundCheck(n,12)}static WrapAroundCheck(e,t){let n=0;for(;e<0;)e+=t,n--;for(;e>=t;)e-=t,n++;return{overflow:n,halftone:e}}static calcFrequency(e){let t,i=0;if(e instanceof s){const s=e;i=s.octave-1,t=s.fundamentalNote-n.A+s.AccidentalHalfTones}else"number"==typeof e&&(t=e-57);return 440*Math.pow(2,i)*Math.pow(2,t/12)}static calcFractionalKey(e){return Math.log(e/440)/Math.LN10*s.halftoneFactor+57}static fromFrequency(e){const t=s.calcFractionalKey(e)+.5,n=Math.floor(t/12)-s.octXmlDiff,r=Math.floor(t)%12;let a=r,o=i.NONE;return-1===this.pitchEnumValues.indexOf(a)&&(a=r-1,o=i.SHARP),new s(a,n,o)}static fromHalftone(e){const t=Math.floor(e/12)-s.octXmlDiff,n=e%12;let r=n,a=i.NONE;return-1===this.pitchEnumValues.indexOf(r)&&(r=n-1,a=i.SHARP),new s(r,t,a)}static ceiling(e){let t=e%=12;return-1===this.pitchEnumValues.indexOf(t)&&(t=e+1),t}static floor(e){let t=e%=12;return-1===this.pitchEnumValues.indexOf(t)&&(t=e-1),t}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;this.accidental=i.NONE,this.fundamentalNote=e,this.octave=t,this.accidental=n,this.accidentalXml=r,this.halfTone=e+12*(t+s.octXmlDiff)+s.HalfTonesFromAccidental(n),a||(this.frequency=s.calcFrequency(this)),this.OctaveShiftApplied=o}static HalfTonesFromAccidental(e){switch(e){case i.NONE:return 0;case i.SHARP:return 1;case i.FLAT:return-1;case i.NATURAL:return 0;case i.DOUBLESHARP:return 2;case i.DOUBLEFLAT:return-2;case i.TRIPLESHARP:return 3;case i.TRIPLEFLAT:return-3;case i.QUARTERTONESHARP:return.5;case i.QUARTERTONEFLAT:return-.5;case i.SLASHFLAT:return-.51;case i.THREEQUARTERSSHARP:return 1.5;case i.THREEQUARTERSFLAT:return-1.5;case i.SLASHQUARTERSHARP:return.0013;case i.SLASHSHARP:return.0014;case i.DOUBLESLASHFLAT:return-.0015;case i.SORI:return.0016;case i.KORON:return.0017;default:throw new Error("Unhandled AccidentalEnum value")}}static AccidentalFromHalfTones(e){switch(e){case 0:return i.NONE;case 1:return i.SHARP;case-1:return i.FLAT;case 2:return i.DOUBLESHARP;case-2:return i.DOUBLEFLAT;case 3:return i.TRIPLESHARP;case-3:return i.TRIPLEFLAT;case.5:return i.QUARTERTONESHARP;case-.5:return i.QUARTERTONEFLAT;case 1.5:return i.THREEQUARTERSSHARP;case-1.5:return i.THREEQUARTERSFLAT;default:return e>0&&e<1?i.QUARTERTONESHARP:e<0&&e>-1?i.QUARTERTONEFLAT:i.QUARTERTONESHARP}}static accidentalVexflow(e){let t;switch(e){case i.NATURAL:t="n";break;case i.FLAT:t="b";break;case i.SHARP:t="#";break;case i.DOUBLESHARP:t="##";break;case i.TRIPLESHARP:t="###";break;case i.DOUBLEFLAT:t="bb";break;case i.TRIPLEFLAT:t="bbs";break;case i.QUARTERTONESHARP:t="+";break;case i.QUARTERTONEFLAT:t="d";break;case i.SLASHFLAT:t="bs";break;case i.THREEQUARTERSSHARP:t="++";break;case i.THREEQUARTERSFLAT:t="db";break;case i.SLASHQUARTERSHARP:t="+-";break;case i.SLASHSHARP:t="++-";break;case i.DOUBLESLASHFLAT:t="bss";break;case i.SORI:t="o";break;case i.KORON:t="k"}return t}get AccidentalHalfTones(){return s.HalfTonesFromAccidental(this.accidental)}get Octave(){return this.octave}get FundamentalNote(){return this.fundamentalNote}get Accidental(){return this.accidental}get AccidentalXml(){return this.accidentalXml}get Frequency(){return this.frequency}static get OctaveXmlDifference(){return s.octXmlDiff}getHalfTone(){return this.halfTone}getTransposedPitch(e){if(e>12)throw new Error("rewrite this method to handle bigger octave changes or don't use is with bigger octave changes!");return e>0?this.getHigherPitchByTransposeFactor(e):e<0?this.getLowerPitchByTransposeFactor(-e):this}DoEnharmonicChange(){switch(this.accidental){case i.FLAT:case i.DOUBLEFLAT:this.fundamentalNote=this.getPreviousFundamentalNote(this.fundamentalNote),this.accidental=s.AccidentalFromHalfTones(this.halfTone-(this.fundamentalNote+12*(this.octave+s.octXmlDiff)));break;case i.SHARP:case i.DOUBLESHARP:this.fundamentalNote=this.getNextFundamentalNote(this.fundamentalNote),this.accidental=s.AccidentalFromHalfTones(this.halfTone-(this.fundamentalNote+12*(this.octave+s.octXmlDiff)));break;default:return}}ToString(){let e=s.accidentalVexflow(this.accidental);return e||(e=""),"Key: "+s.getNoteEnumString(this.fundamentalNote)+e+", Note: "+this.fundamentalNote+", octave: "+this.octave.toString()}ToStringShort(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=s.accidentalVexflow(this.accidental);t||(t="");const n=this.octave+e;return s.getNoteEnumString(this.fundamentalNote)+t+n}get ToStringShortGet(){return this.ToStringShort(0)}OperatorEquals(e){const t=this;return!(!t||!e)&&t.FundamentalNote===e.FundamentalNote&&t.Octave===e.Octave&&t.Accidental===e.Accidental}OperatorNotEqual(e){return!(this===e)}OperatorFundamentalGreaterThan(e){const t=this;return t.Octave===e.Octave?t.FundamentalNote>e.FundamentalNote:t.Octave>e.Octave}OperatorFundamentalLessThan(e){const t=this;return t.Octave===e.Octave?t.FundamentalNote<e.FundamentalNote:t.Octave<e.Octave}getHigherPitchByTransposeFactor(e){const t=s.pitchEnumValues.indexOf(this.fundamentalNote);let n,r=this.octave;return t+e>s.pitchEnumValues.length-1?(n=s.pitchEnumValues[t+e-s.pitchEnumValues.length],r++):n=s.pitchEnumValues[t+e],new s(n,r,i.NONE)}getLowerPitchByTransposeFactor(e){const t=s.pitchEnumValues.indexOf(this.fundamentalNote);let n,r=this.octave;return t-e<0?(n=s.pitchEnumValues[s.pitchEnumValues.length+t-e],r--):n=s.pitchEnumValues[t-e],new s(n,r,i.NONE)}getNextFundamentalNote(e){let t=s.pitchEnumValues.indexOf(e);return t=(t+1)%s.pitchEnumValues.length,s.pitchEnumValues[t]}getPreviousFundamentalNote(e){const t=s.pitchEnumValues.indexOf(e);return t>0?s.pitchEnumValues[t-1]:s.pitchEnumValues[s.pitchEnumValues.length-1]}}t.Pitch=s,s.pitchEnumValues=[n.C,n.D,n.E,n.F,n.G,n.A,n.B],s.halftoneFactor=12/(Math.LN2/Math.LN10),s.octXmlDiff=3},8254:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalLabel=void 0;const i=n(7533),s=n(6438),r=n(995),a=n(7921);class o extends r.Clickable{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;super(),this.CenteringXShift=0,this.label=e,this.boundingBox=new s.BoundingBox(this,r),this.label.fontHeight=t,this.label.textAlignment=n,this.rules=i}get Label(){return this.label}toString(){return"".concat(this.label.text," (").concat(this.boundingBox.RelativePosition.x,",").concat(this.boundingBox.RelativePosition.y,")")}setLabelPositionAndShapeBorders(){var e,t;if(""===this.Label.text.trim())return;this.TextLines=[];const n=null!==(e=null===(t=this.rules)||void 0===t?void 0:t.LabelMarginBorderFactor)&&void 0!==e?e:.1,s=this.Label.text.split(/[\n\r]+/g),r=s.length;let o=0;for(let i=0;i<r;i++){const e=s[i].trim(),t=a.MusicSheetCalculator.TextMeasurer.computeTextWidthToHeightRatio(e,this.Label.font,this.Label.fontStyle,this.label.fontFamily),n=this.Label.fontHeight*t;o=Math.max(o,n),this.TextLines.push({text:e,xOffset:0,width:n})}for(const a of this.TextLines){let e=0;switch(this.Label.textAlignment){case i.TextAlignmentEnum.RightBottom:case i.TextAlignmentEnum.RightCenter:case i.TextAlignmentEnum.RightTop:e=o-a.width;break;case i.TextAlignmentEnum.CenterBottom:case i.TextAlignmentEnum.CenterCenter:case i.TextAlignmentEnum.CenterTop:e=(o-a.width)/2}a.xOffset=e}let l=this.Label.fontHeight*r;this.rules.SpacingBetweenTextLines>0&&this.TextLines.length>1&&(l+=this.rules.SpacingBetweenTextLines*r/10);const c=this.PositionAndShape;switch(this.Label.textAlignment){case i.TextAlignmentEnum.CenterBottom:c.BorderTop=-l,c.BorderLeft=-o/2,c.BorderBottom=0,c.BorderRight=o/2;break;case i.TextAlignmentEnum.CenterCenter:c.BorderTop=-l/2,c.BorderLeft=-o/2,c.BorderBottom=l/2,c.BorderRight=o/2;break;case i.TextAlignmentEnum.CenterTop:c.BorderTop=0,c.BorderLeft=-o/2,c.BorderBottom=l,c.BorderRight=o/2;break;case i.TextAlignmentEnum.LeftBottom:c.BorderTop=-l,c.BorderLeft=0,c.BorderBottom=0,c.BorderRight=o;break;case i.TextAlignmentEnum.LeftCenter:c.BorderTop=-l/2,c.BorderLeft=0,c.BorderBottom=l/2,c.BorderRight=o;break;case i.TextAlignmentEnum.LeftTop:c.BorderTop=0,c.BorderLeft=0,c.BorderBottom=l,c.BorderRight=o;break;case i.TextAlignmentEnum.RightBottom:c.BorderTop=-l,c.BorderLeft=-o,c.BorderBottom=0,c.BorderRight=0;break;case i.TextAlignmentEnum.RightCenter:c.BorderTop=-l/2,c.BorderLeft=-o,c.BorderBottom=l/2,c.BorderRight=0;break;case i.TextAlignmentEnum.RightTop:c.BorderTop=0,c.BorderLeft=-o,c.BorderBottom=l,c.BorderRight=0}c.BorderMarginTop=c.BorderTop-l*n,c.BorderMarginLeft=c.BorderLeft-l*n,c.BorderMarginBottom=c.BorderBottom+l*n,c.BorderMarginRight=c.BorderRight+l*n}}t.GraphicalLabel=o},8365:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BeamEnum=t.Beam=void 0,t.Beam=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.notes=[],this.extendedNoteList=[],this.BeamNumberOffsetToXML=0,this.AutoGenerated=!1,this.BeamNumber=e,this.BeamNumberOffsetToXML=t}get Notes(){return this.notes}set Notes(e){this.notes=e}get ExtendedNoteList(){return this.extendedNoteList}set ExtendedNoteList(e){this.extendedNoteList=e}addNoteToBeam(e){e&&(e.NoteBeam=this,this.notes.push(e),this.extendedNoteList.push(e))}},function(e){e[e.BeamNone=-1]="BeamNone",e[e.BeamBegin=0]="BeamBegin",e[e.BeamContinue=1]="BeamContinue",e[e.BeamEnd=2]="BeamEnd",e[e.BeamForward=3]="BeamForward",e[e.BeamBackward=4]="BeamBackward"}(n||(t.BeamEnum=n={}))},8464:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4831),s=n(4589),r=function(){function e(e){this.heap=new s.default(i.reverseCompareFunction(e))}return e.prototype.enqueue=function(e){return this.heap.add(e)},e.prototype.add=function(e){return this.heap.add(e)},e.prototype.dequeue=function(){if(0!==this.heap.size()){var e=this.heap.peek();return this.heap.removeRoot(),e}},e.prototype.peek=function(){return this.heap.peek()},e.prototype.contains=function(e){return this.heap.contains(e)},e.prototype.isEmpty=function(){return this.heap.isEmpty()},e.prototype.size=function(){return this.heap.size()},e.prototype.clear=function(){this.heap.clear()},e.prototype.forEach=function(e){this.heap.forEach(e)},e}();t.default=r},8628:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransposeCalculator=void 0;const i=n(9735);class s{transposePitch(e,t,n){let r=i.NoteEnum.C,a=0,o=i.AccidentalEnum.NONE;const l=i.Pitch.CalculateTransposedHalfTone(e,n);let c=l.halftone,h=l.overflow;for(let u=0;u<s.noteEnums.length;u++){const t=s.noteEnums[u];if(t===c){const t=u;return r=s.noteEnums[t],a=e.Octave+h,o=i.AccidentalEnum.NONE,new i.Pitch(r,a,o)}if(t>c)break}for(let u=0;u<s.noteEnums.length;u++)if(s.noteEnums[u]>c){let n=u;const l=i.Pitch.HalfTonesFromAccidental(e.Accidental);for((l>0||0===l&&t.Key>=0)&&n--;n<0;)n+=7,c+=12,h--;for(;n>=7;)n-=7,c-=12,h++;r=s.noteEnums[n],o=i.Pitch.AccidentalFromHalfTones(c-r),a=e.Octave+h;break}return new i.Pitch(r,a,o)}transposeKey(e,t){let n=0,i=0;for(;n<s.keyMapping.length&&(i=s.keyMapping[n],i!==e.keyTypeOriginal);n++);let r=n+t;for(;r>=12;)r-=12;for(;r<0;)r+=12;e.Key=s.keyMapping[r],e.isTransposedBy=t}}t.TransposeCalculator=s,s.keyMapping=[0,-5,2,-3,4,-1,6,1,-4,3,-2,5],s.noteEnums=[i.NoteEnum.C,i.NoteEnum.D,i.NoteEnum.E,i.NoteEnum.F,i.NoteEnum.G,i.NoteEnum.A,i.NoteEnum.B]},8659:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(8628),t)},8705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OSMDColor=void 0;class n{constructor(e,t,n){this.alpha=255,this.red=e,this.green=t,this.blue=n}static get Black(){return new n(0,0,0)}static get DeepSkyBlue(){return new n(0,191,255)}static get Green(){return new n(20,160,20)}static get Magenta(){return new n(255,0,255)}static get Orange(){return new n(255,128,0)}static get Red(){return new n(240,20,20)}static get Disabled(){return new n(225,225,225)}static get DarkBlue(){return new n(0,0,140)}static get Debug1(){return new n(200,0,140)}static get Debug2(){return new n(100,100,200)}static get Debug3(){return new n(0,50,140)}toString(){return"rgb("+this.red+","+this.green+","+this.blue+","+this.alpha+")"}}t.OSMDColor=n},8713:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionStartSymbol=void 0;const i=n(9409),s=n(2683),r=n(6452),a=n(7741),o=n(6438),l=n(813);class c extends a.GraphicalObject{constructor(e,t){super();const n=t,a=e.PositionAndShape.AbsolutePosition.y,c=l.CollectionUtil.last(e.StaffLines).PositionAndShape.RelativePosition.y+4;this.verticalLine=new r.GraphicalLine(new i.PointF2D(n,a),new i.PointF2D(n,a+c),.4,s.OutlineAndFillStyleEnum.SelectionSymbol);for(let s=0,r=e.StaffLines.length;s<r;++s){const t=e.StaffLines[s],r=new i.PointF2D(n,a+t.PositionAndShape.RelativePosition.y),o=new Array(7);o[0].x=r.x+4,o[0].y=r.y+2,o[1].x=r.x+2.5,o[1].y=r.y+.5,o[2].x=r.x+2.5,o[2].y=r.y+1.3,o[3].x=r.x+1,o[3].y=r.y+1.3,o[4].x=r.x+1,o[4].y=r.y+2.7,o[5].x=r.x+2.5,o[5].y=r.y+2.7,o[6].x=r.x+2.5,o[6].y=r.y+3.5,this.arrows.push(o)}this.boundingBox=new o.BoundingBox(this),this.boundingBox.AbsolutePosition=new i.PointF2D(n,a),this.boundingBox.BorderLeft=-.4,this.boundingBox.BorderRight=4,this.boundingBox.BorderBottom=c}}t.SelectionStartSymbol=c},8724:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SystemImageProperties=t.GraphicalMusicSheet=void 0;const s=n(6723),r=n(6452),a=n(348),o=n(9409),l=n(164),c=n(4543),h=n(2561),u=n(6438),d=i(n(3065)),f=n(813),p=n(4548),m=n(7741);t.GraphicalMusicSheet=class{constructor(e,t){this.musicPages=[],this.measureList=[],this.verticalGraphicalStaffEntryContainers=[],this.cursors=[],this.leadSheet=!1,this.musicSheet=e,this.numberOfStaves=this.musicSheet.Staves.length,this.calculator=t,this.calculator.initialize(this)}get ParentMusicSheet(){return this.musicSheet}get GetCalculator(){return this.calculator}get MusicPages(){return this.musicPages}set MusicPages(e){this.musicPages=e}get MeasureList(){return this.measureList}set MeasureList(e){this.measureList=e}get VerticalGraphicalStaffEntryContainers(){return this.verticalGraphicalStaffEntryContainers}set VerticalGraphicalStaffEntryContainers(e){this.verticalGraphicalStaffEntryContainers=e}get Title(){return this.title}set Title(e){this.title=e}get Subtitle(){return this.subtitle}set Subtitle(e){this.subtitle=e}get Composer(){return this.composer}set Composer(e){this.composer=e}get Lyricist(){return this.lyricist}set Lyricist(e){this.lyricist=e}get Copyright(){return this.copyright}set Copyright(e){this.copyright=e}get Cursors(){return this.cursors}get SelectionStartSymbol(){return this.selectionStartSymbol}get SelectionEndSymbol(){return this.selectionEndSymbol}get MinAllowedSystemWidth(){return this.minAllowedSystemWidth}set MinAllowedSystemWidth(e){this.minAllowedSystemWidth=e}get NumberOfStaves(){return this.numberOfStaves}get LeadSheet(){return this.leadSheet}set LeadSheet(e){this.leadSheet=e}static transformRelativeToAbsolutePosition(e){for(let t=0;t<e.MusicPages.length;t++){const n=e.MusicPages[t].setMusicPageAbsolutePosition(t,e.ParentMusicSheet.Rules);e.MusicPages[t].PositionAndShape.calculateAbsolutePositionsRecursive(n.x,n.y)}}Initialize(){this.verticalGraphicalStaffEntryContainers=[],this.musicPages=[],this.measureList=[]}reCalculate(){this.calculator.calculate()}EnforceRedrawOfMusicSystems(){for(let e=0,t=this.musicPages.length;e<t;++e){const t=this.musicPages[e];for(let e=0,n=t.MusicSystems.length;e<n;++e)t.MusicSystems[e].needsToBeRedrawn=!0}}getClickedObject(e){for(let t=0,n=this.MusicPages.length;t<n;++t)return this.MusicPages[t].PositionAndShape.getClickedObjectOfType(e)}findGraphicalMeasure(e,t){for(let i=e;i>=0;i--){var n;const e=null===(n=this.measureList[i])||void 0===n?void 0:n[t];if(e)return e}}findGraphicalMeasureByMeasureNumber(e,t){for(let n=e;n>=0;n--)if(this.MeasureList[n]){const i=this.MeasureList[n][t];if((null===i||void 0===i?void 0:i.MeasureNumber)===e)return i}}findGraphicalStaffEntryFromMeasureList(e,t,n){for(let i=t;i<this.measureList.length;i++){const t=this.measureList[i][e];if(t)for(let e=0,i=t.staffEntries.length;e<i;++e){const i=t.staffEntries[e];if(i.sourceStaffEntry===n)return i}}}findNextGraphicalStaffEntry(e,t,n){const i=n.parentMeasure,s=i.staffEntries.indexOf(n);if(s<i.staffEntries.length-1)return i.staffEntries[s+1];if(t<this.measureList.length-1){const n=this.measureList[t+1][e];if(n.staffEntries.length>0)return n.staffEntries[0]}}getFirstVisibleMeasuresListFromIndices(e,t){const n=[],i=this.measureList[0].length;for(let s=e;s<=t;s++)for(let e=0;e<i;e++)if(this.measureList[s][e].isVisible()){n.push(this.measureList[s][e]);break}return n}orderMeasuresByStaffLine(e){const t=[];let n=[];t.push(n);for(let i=0;i<e.length;i++)0===i?n.push(e[0]):(e[i].ParentStaffLine===e[i-1].ParentStaffLine||(-1===t.indexOf(n)&&t.push(n),n=[],t.push(n)),n.push(e[i]));return t}initializeActiveClefs(){const e=[],t=this.musicSheet.getFirstSourceMeasure();if(t)for(let n=0;n<t.CompleteNumberOfStaves;n++){let i=new l.ClefInstruction;if(t.FirstInstructionsStaffEntries[n])for(let e=0,s=t.FirstInstructionsStaffEntries[n].Instructions.length;e<s;++e){const s=t.FirstInstructionsStaffEntries[n].Instructions[e];s instanceof l.ClefInstruction&&(i=s)}e.push(i)}return e}GetMainKey(){const e=this.musicSheet.getFirstSourceMeasure();if(e)for(let t=0;t<e.CompleteNumberOfStaves;t++)for(let n=0,i=e.FirstInstructionsStaffEntries[t].Instructions.length;n<i;++n){const i=e.FirstInstructionsStaffEntries[t].Instructions[n];if(i instanceof c.KeyInstruction)return i}}getOrCreateVerticalContainer(e){if(0===this.verticalGraphicalStaffEntryContainers.length||f.CollectionUtil.getLastElement(this.verticalGraphicalStaffEntryContainers).AbsoluteTimestamp.lt(e)){const t=new s.VerticalGraphicalStaffEntryContainer(this.numberOfStaves,e);return this.verticalGraphicalStaffEntryContainers.push(t),t}for(let t=this.verticalGraphicalStaffEntryContainers.length-1;t>=0;t--){if(this.verticalGraphicalStaffEntryContainers[t].AbsoluteTimestamp.lt(e)){const n=new s.VerticalGraphicalStaffEntryContainer(this.numberOfStaves,e);return this.verticalGraphicalStaffEntryContainers.splice(t+1,0,n),n}if(this.verticalGraphicalStaffEntryContainers[t].AbsoluteTimestamp.Equals(e))return this.verticalGraphicalStaffEntryContainers[t]}}GetVerticalContainerFromTimestamp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=f.CollectionUtil.binarySearch(this.verticalGraphicalStaffEntryContainers,new s.VerticalGraphicalStaffEntryContainer(0,e),s.VerticalGraphicalStaffEntryContainer.compareByTimestamp,t);if(n>=0)return this.verticalGraphicalStaffEntryContainers[n]}GetInterpolatedIndexInVerticalContainers(e){const t=this.verticalGraphicalStaffEntryContainers;if(1===t.length)return 0;let n,i,s=0,r=t.length-1;if(e.lte(t[t.length-1].AbsoluteTimestamp)){for(;r-s>1;){const n=Math.floor((r+s)/2);if(t[s].AbsoluteTimestamp.Equals(e)){r=s;break}if(t[r].AbsoluteTimestamp.Equals(e)){s=r;break}if(t[n].AbsoluteTimestamp.Equals(e))return this.verticalGraphicalStaffEntryContainers.indexOf(t[n]);e.lt(t[n].AbsoluteTimestamp)?r=n:s=n}if(s===r)return this.verticalGraphicalStaffEntryContainers.indexOf(t[s]);n=t[s].AbsoluteTimestamp,i=t[r].AbsoluteTimestamp}else n=t[t.length-1].AbsoluteTimestamp,i=h.Fraction.plus(this.getLongestStaffEntryDuration(t.length-1),n),r=t.length;const a=i.RealValue-n.RealValue,o=r-(i.RealValue-e.RealValue)/a;return Math.min(o,this.verticalGraphicalStaffEntryContainers.length-1)}getVisibleStavesIndicesFromSourceMeasure(e){const t=[],n=[];for(let i=0,s=e.length;i<s;++i){const n=e[i].ParentStaff.ParentInstrument;-1===t.indexOf(n)&&t.push(n)}for(let i=0,s=t.length;i<s;++i){const e=t[i],s=this.musicSheet.getGlobalStaffIndexOfFirstStaff(e);for(let t=0;t<e.Staves.length;t++)n.push(s+t)}return n}getGraphicalMeasureFromSourceMeasureAndIndex(e,t){for(let i=0;i<this.measureList.length;i++){var n;if((null===(n=this.measureList[i][0])||void 0===n?void 0:n.parentSourceMeasure)===e)return this.measureList[i][t]}}getLastGraphicalMeasureFromIndex(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.measureList.length-1;t&&(n=Math.min(n,this.musicSheet.Rules.MaxMeasureToDrawIndex));let i=this.measureList[n][e];for(;!i&&n>=0;)i=this.measureList[--n][e];return this.measureList[n][e]}getMeasureIndex(e,t,n){for(t=0;t<this.measureList.length;t++)for(let n=0,i=this.measureList[t].length;n<i;++n)if(this.measureList[t][n]===e)return!0;return!1}GetNearestGraphicalObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.GraphicalObject.name,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;const a=[];for(;0===a.length&&n<=i;){const i=new u.BoundingBox(void 0);i.BorderLeft=e.x-n,i.BorderTop=e.y-n,i.BorderRight=e.x+n,i.BorderBottom=e.y+n,i.AbsolutePosition=new o.PointF2D(e.x,e.y),i.calculateAbsolutePosition();for(let e=0,n=this.MusicPages.length;e<n;++e){const n=this.MusicPages[e].PositionAndShape.getObjectsInRegion(i,!1,t);if(n&&0!==n.length)for(let e=0,t=n.length;e<t;++e)r?r(n[e])&&a.push(n[e]):a.push(n[e])}n+=s}let l;for(let o=0,c=a.length;o<c;++o){const t=a[o];(void 0===l||this.CalculateDistance(t.PositionAndShape.AbsolutePosition,e)<this.CalculateDistance(l.PositionAndShape.AbsolutePosition,e))&&(l=t)}if(l)return l}GetNearestVoiceEntry(e){return this.GetNearestGraphicalObject(e,p.GraphicalVoiceEntry.name,5,20,5,(e=>{var t;return void 0!==(null===(t=e.parentStaffEntry)||void 0===t?void 0:t.relInMeasureTimestamp)}))}GetNearestNote(e,t){const n=this.GetNearestVoiceEntry(e);if(!n)return;let i,s=Number.MAX_SAFE_INTEGER;for(const r of n.notes){const t=r.PositionAndShape.AbsolutePosition.y,n=Math.abs(r.PositionAndShape.AbsolutePosition.x-e.x),a=Math.abs(t-e.y);n+a<s&&(i=r,s=n+a)}return i}domToSvg(e){return this.domToSvgTransform(e,!0)}svgToDom(e){return this.domToSvgTransform(e,!1)}svgToOsmd(e){const t=new o.PointF2D(e.x,e.y);return t.x/=10,t.y/=10,t}domToSvgTransform(e,t){const n=this.drawer.Backends[0].getSvgElement(),i=n.createSVGPoint();i.x=e.x,i.y=e.y;let s=n.getScreenCTM();t&&(s=s.inverse());const r=i.matrixTransform(s);return new o.PointF2D(r.x,r.y)}GetClickableLabel(e){const t=new u.BoundingBox;t.BorderLeft=e.x-4,t.BorderTop=e.y-4,t.BorderRight=e.x+4,t.BorderBottom=e.y+4,t.AbsolutePosition=new o.PointF2D(0,0);for(let n=0,i=this.MusicPages.length;n<i;++n){const e=this.MusicPages[n].PositionAndShape.getObjectsInRegion(t);if(1===e.length)for(let t=0,n=e.length;t<n;++t)return e[t]}}GetNearestStaffEntry(e){const t=[],n=new u.BoundingBox(void 0);n.BorderLeft=e.x-10,n.BorderTop=e.y-10,n.BorderRight=e.x+10,n.BorderBottom=e.y+10,n.AbsolutePosition=new o.PointF2D(0,0);for(let s=0,r=this.MusicPages.length;s<r;++s){const e=this.MusicPages[s].PositionAndShape.getObjectsInRegion(n,!1,a.GraphicalStaffEntry.name);if(e&&0!==e.length)for(let n=0,i=e.length;n<i;++n){const i=e[n];t.push(i)}}let i;for(let s=0,r=t.length;s<r;++s){const n=t[s];if(void 0===i)i=n;else{if(!n.relInMeasureTimestamp)continue;this.CalculateDistance(n.PositionAndShape.AbsolutePosition,e)<this.CalculateDistance(i.PositionAndShape.AbsolutePosition,e)&&(i=n)}}if(i)return i}GetNearestObject(e,t){const n=[],i=new u.BoundingBox(void 0);i.BorderLeft=e.x-10,i.BorderTop=e.y-10,i.BorderRight=e.x+10,i.BorderBottom=e.y+10,i.AbsolutePosition=new o.PointF2D(0,0);for(let r=0,a=this.MusicPages.length;r<a;++r){const e=this.MusicPages[r].PositionAndShape.getObjectsInRegion(i,!1,t);if(e&&0!==e.length)for(let t=0,i=e.length;t<i;++t){const i=e[t];n.push(i)}}let s;for(let r=0,a=n.length;r<a;++r){const t=n[r];(void 0===s||this.CalculateDistance(t.PositionAndShape.AbsolutePosition,e)<this.CalculateDistance(s.PositionAndShape.AbsolutePosition,e))&&(s=t)}if(s)return s}GetPossibleCommentAnchor(e){const t=this.GetNearestStaffEntry(e);if(t)return t.sourceStaffEntry}getClickedObjectOfType(e){for(let t=0,n=this.musicPages.length;t<n;++t){const n=this.musicPages[t].PositionAndShape.getClickedObjectOfType(e);if(n)return n}}tryGetTimestampFromPosition(e){const t=this.getClickedObjectOfType(e);if(t)return t.getAbsoluteTimestamp()}tryGetClickableLabel(e){try{return this.GetClickableLabel(e)}catch(t){d.default.info("GraphicalMusicSheet.tryGetClickableObject","positionOnMusicSheet: "+e,t)}}tryGetTimeStampFromPosition(e){try{const t=this.GetNearestStaffEntry(e);if(!t)return;return t.getAbsoluteTimestamp()}catch(t){d.default.info("GraphicalMusicSheet.tryGetTimeStampFromPosition","positionOnMusicSheet: "+e,t)}}getStaffEntry(e){const t=this.VerticalGraphicalStaffEntryContainers[e];let n;try{for(let e=0,i=t.StaffEntries.length;e<i;++e){const i=t.StaffEntries[e];i&&i.sourceStaffEntry.ParentStaff.isVisible()&&(n?i.PositionAndShape&&n.PositionAndShape&&n.PositionAndShape.RelativePosition.x>i.PositionAndShape.RelativePosition.x&&(n=i):n=i)}}catch(e){d.default.info("GraphicalMusicSheet.getStaffEntry",e)}return n}GetPreviousVisibleContainerIndex(e){for(let t=e-1;t>=0;t--){const e=this.verticalGraphicalStaffEntryContainers[t].StaffEntries;for(let n=0,i=e.length;n<i;++n){const i=e[n];if(i&&i.sourceStaffEntry.ParentStaff.isVisible())return t}}return-1}GetNextVisibleContainerIndex(e){for(let t=e+1;t<this.verticalGraphicalStaffEntryContainers.length;++t){const e=this.verticalGraphicalStaffEntryContainers[t].StaffEntries;for(let n=0,i=e.length;n<i;++n){const i=e[n];if(i&&i.sourceStaffEntry.ParentStaff.isVisible())return t}}return-1}findClosestLeftStaffEntry(e,t){let n,i=Math.floor(e);i=Math.min(this.VerticalGraphicalStaffEntryContainers.length-1,i);for(let s=i;s>=0;s--)if(n=this.getStaffEntry(s),n){if(!t)return n;if(n.sourceStaffEntry.ParentStaff.isVisible())return n}}findClosestRightStaffEntry(e,t){let n;for(let i=Math.max(0,Math.ceil(e));i<this.VerticalGraphicalStaffEntryContainers.length;i++)if(n=this.getStaffEntry(i),n){if(!t)return n;if(n.sourceStaffEntry.ParentStaff.isVisible())return n}}calculateCursorLineAtTimestamp(e,t){const n=this.calculateXPositionFromTimestamp(e),i=n[0],s=n[1];if(!s||0===s.StaffLines.length)return;const a=s.PositionAndShape.AbsolutePosition.y,l=f.CollectionUtil.last(s.StaffLines).PositionAndShape.RelativePosition.y+4;return new r.GraphicalLine(new o.PointF2D(i,a),new o.PointF2D(i,a+l),3,t)}calculateXPositionFromTimestamp(e){var t,n,i,s;let r;const a=this.GetInterpolatedIndexInVerticalContainers(e),o=this.findClosestLeftStaffEntry(a,!0),l=this.findClosestRightStaffEntry(a,!0),c=e.RealValue;if(!o&&!l)return[0,void 0];let u,d;if(u=o?null===(t=o.parentMeasure.ParentStaffLine)||void 0===t?void 0:t.ParentMusicSystem:null===(n=l.parentMeasure.ParentStaffLine)||void 0===n?void 0:n.ParentMusicSystem,d=l?null===(i=l.parentMeasure.ParentStaffLine)||void 0===i?void 0:i.ParentMusicSystem:null===(s=o.parentMeasure.ParentStaffLine)||void 0===s?void 0:s.ParentMusicSystem,u===d){let e,t,n;if(r=u,o)if(l)t=o.PositionAndShape.AbsolutePosition.x,n=l.PositionAndShape.AbsolutePosition.x,e=o===l?0:(c-o.getAbsoluteTimestamp().RealValue)/(l.getAbsoluteTimestamp().RealValue-o.getAbsoluteTimestamp().RealValue);else{t=o.PositionAndShape.AbsolutePosition.x,n=r.GetRightBorderAbsoluteXPosition();const i=o.parentMeasure.parentSourceMeasure;e=(c-o.getAbsoluteTimestamp().RealValue)/(h.Fraction.plus(i.AbsoluteTimestamp,i.Duration).RealValue-o.getAbsoluteTimestamp().RealValue)}else t=n=l.PositionAndShape.AbsolutePosition.x,e=0;return e=Math.min(1,Math.max(0,e)),[t+e*(n-t),r]}{const e=l.parentMeasure.parentSourceMeasure.AbsoluteTimestamp.RealValue;let t,n;if(c<e&&u.StaffLines[0]){r=u;const i=o.PositionAndShape.AbsolutePosition.x,s=r.GetRightBorderAbsoluteXPosition();t=(c-o.getAbsoluteTimestamp().RealValue)/(e-o.getAbsoluteTimestamp().RealValue),t=Math.min(1,Math.max(0,t)),n=i+t*(s-i)}else{r=d;const i=l.PositionAndShape.AbsolutePosition.x,s=r.GetLeftBorderAbsoluteXPosition();t=(c-e)/(l.getAbsoluteTimestamp().RealValue-e),t=Math.min(1,Math.max(0,t)),n=s+t*(i-s)}return[n,r]}}GetNumberOfVisibleInstruments(){let e=0;for(let t=0,n=this.musicSheet.Instruments.length;t<n;++t)this.musicSheet.Instruments[t].isVisible()&&e++;return e}GetNumberOfFollowedInstruments(){let e=0;for(let t=0,n=this.musicSheet.Instruments.length;t<n;++t)!0===this.musicSheet.Instruments[t].Following&&e++;return e}GetGraphicalFromSourceStaffEntry(e){var t;if(null===(t=e.VerticalContainerParent.ParentMeasure)||void 0===t||!t.VerticalMeasureList)return;const n=e.VerticalContainerParent.ParentMeasure.VerticalMeasureList[e.ParentStaff.idInMusicSheet];return null===n||void 0===n?void 0:n.findGraphicalStaffEntryFromTimestamp(e.Timestamp)}CalculateDistance(e,t){const n=e.x-t.x,i=e.y-t.y;return n*n+i*i}getLongestStaffEntryDuration(e){let t=new h.Fraction(0,1);for(const n of this.verticalGraphicalStaffEntryContainers[e].StaffEntries){if(!n)continue;const e=n.findStaffEntryMaxNoteLength();t.lt(e)&&(t=e)}return t}},t.SystemImageProperties=class{}},8786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSheetErrors=void 0,t.MusicSheetErrors=class{constructor(){this.measureErrors={},this.errors=[],this.tempErrors=[]}finalizeMeasure(e){let t=this.measureErrors[e];t||(t=[]),this.measureErrors[e]=t.concat(this.tempErrors),this.tempErrors=[]}pushMeasureError(e){this.tempErrors.push(e)}push(e){this.errors.push(e)}}},8900:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8927:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccidentalCalculator=void 0;const i=n(8233),s=n(8233),r=n(3263),a=n(7921);t.AccidentalCalculator=class{constructor(){this.keySignatureNoteAlterationsDict=new r.Dictionary,this.currentAlterationsComparedToKeyInstructionList=[],this.currentInMeasureNoteAlterationsDict=new r.Dictionary}get ActiveKeyInstruction(){return this.activeKeyInstruction}set ActiveKeyInstruction(e){this.activeKeyInstruction=e,this.reactOnKeyInstructionChange()}doCalculationsAtEndOfMeasure(){this.currentInMeasureNoteAlterationsDict.clear(),this.currentAlterationsComparedToKeyInstructionList.clear();for(const e of this.keySignatureNoteAlterationsDict.keys())this.currentInMeasureNoteAlterationsDict.setValue(e,this.keySignatureNoteAlterationsDict.getValue(e))}checkAccidental(e,t){if(!t)return;const n=t.FundamentalNote+12*t.Octave,r=e.sourceNote.NoteTie;if(r&&e.sourceNote!==r.StartNote)return;const o=this.currentAlterationsComparedToKeyInstructionList.indexOf(n)>=0;if(this.currentInMeasureNoteAlterationsDict.containsKey(n))if(o&&this.currentAlterationsComparedToKeyInstructionList.splice(this.currentAlterationsComparedToKeyInstructionList.indexOf(n),1),this.currentInMeasureNoteAlterationsDict.getValue(n)!==t.AccidentalHalfTones){this.keySignatureNoteAlterationsDict.containsKey(n)&&this.keySignatureNoteAlterationsDict.getValue(n)!==t.AccidentalHalfTones?(this.currentAlterationsComparedToKeyInstructionList.push(n),this.currentInMeasureNoteAlterationsDict.setValue(n,t.AccidentalHalfTones)):t.Accidental!==i.AccidentalEnum.NONE&&this.currentInMeasureNoteAlterationsDict.remove(n);const r=this.currentInMeasureNoteAlterationsDict.getValue(n);if(t.Accidental===i.AccidentalEnum.NONE&&(t=.5===Math.abs(r)?new s.Pitch(t.FundamentalNote,t.Octave,i.AccidentalEnum.NONE,void 0,!1,t.OctaveShiftApplied):new s.Pitch(t.FundamentalNote,t.Octave,i.AccidentalEnum.NATURAL,void 0,!1,t.OctaveShiftApplied)),this.isAlterAmbiguousAccidental(t.Accidental)&&!t.AccidentalXml)return;a.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(e,t)}else t.AccidentalXml&&0===this.Transpose&&!o&&a.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(e,t);else if(t.Accidental!==i.AccidentalEnum.NONE){if(o||this.currentAlterationsComparedToKeyInstructionList.push(n),this.currentInMeasureNoteAlterationsDict.setValue(n,t.AccidentalHalfTones),this.isAlterAmbiguousAccidental(t.Accidental)&&!t.AccidentalXml)return;a.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(e,t)}else o&&(t=new s.Pitch(t.FundamentalNote,t.Octave,i.AccidentalEnum.NATURAL,void 0,!1,t.OctaveShiftApplied),this.currentAlterationsComparedToKeyInstructionList.splice(this.currentAlterationsComparedToKeyInstructionList.indexOf(n),1),a.MusicSheetCalculator.symbolFactory.addGraphicalAccidental(e,t))}isAlterAmbiguousAccidental(e){return e===i.AccidentalEnum.SLASHFLAT||e===i.AccidentalEnum.QUARTERTONEFLAT}reactOnKeyInstructionChange(){const e=this.activeKeyInstruction.AlteratedNotes;let t;t=this.activeKeyInstruction.Key>0?i.AccidentalEnum.SHARP:i.AccidentalEnum.FLAT,this.keySignatureNoteAlterationsDict.clear(),this.currentAlterationsComparedToKeyInstructionList.length=0;for(let n=-9;n<9;n++)for(let i=0;i<e.length;i++)this.keySignatureNoteAlterationsDict.setValue(e[i]+12*n,s.Pitch.HalfTonesFromAccidental(t));this.doCalculationsAtEndOfMeasure()}}},9003:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Articulation=void 0,t.Articulation=class{constructor(e,t){this.articulationEnum=e,this.placement=t}Equals(e){return e.articulationEnum===this.articulationEnum&&e.placement===this.placement}}},9019:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MultiExpressionEntry=t.MultiExpression=void 0;const i=n(2561),s=n(2148),r=n(5875),a=n(9803),o=n(1112),l=n(6362),c=n(2570);t.MultiExpression=class{constructor(e,t){this.unknownList=[],this.moodList=[],this.expressions=[],this.sourceMeasure=e,this.timestamp=t}get SourceMeasureParent(){return this.sourceMeasure}set SourceMeasureParent(e){this.sourceMeasure=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get Timestamp(){return this.timestamp}set Timestamp(e){this.timestamp=e}get AbsoluteTimestamp(){return i.Fraction.plus(this.timestamp,this.sourceMeasure.AbsoluteTimestamp)}get InstantaneousDynamic(){return this.instantaneousDynamic}set InstantaneousDynamic(e){this.instantaneousDynamic=e}get EndingContinuousDynamic(){return this.endingContinuousDynamic}set EndingContinuousDynamic(e){this.endingContinuousDynamic=e}get StartingContinuousDynamic(){return this.startingContinuousDynamic}set StartingContinuousDynamic(e){this.startingContinuousDynamic=e}get MoodList(){return this.moodList}get UnknownList(){return this.unknownList}get EntriesList(){return this.expressions}get OctaveShiftStart(){return this.octaveShiftStart}set OctaveShiftStart(e){this.octaveShiftStart=e}get OctaveShiftEnd(){return this.octaveShiftEnd}set OctaveShiftEnd(e){this.octaveShiftEnd=e}get CombinedExpressionsText(){return this.combinedExpressionsText}set CombinedExpressionsText(e){this.combinedExpressionsText=e}getPlacementOfFirstEntry(){let e=l.PlacementEnum.Above;return this.expressions.length>0&&(this.expressions[0].expression instanceof s.InstantaneousDynamicExpression||this.expressions[0].expression instanceof r.ContinuousDynamicExpression||this.expressions[0].expression instanceof a.MoodExpression||this.expressions[0].expression instanceof o.UnknownExpression)&&(e=this.expressions[0].expression.Placement),e}getFontstyleOfFirstEntry(){var e;let t=c.FontStyles.Regular;return this.expressions.length>0&&(this.expressions[0].expression instanceof r.ContinuousDynamicExpression||this.expressions[0].expression instanceof a.MoodExpression?t=c.FontStyles.Italic:this.expressions[0].expression instanceof o.UnknownExpression&&(t=null!==(e=this.expressions[0].expression.fontStyle)&&void 0!==e?e:c.FontStyles.Regular)),t}getColorXMLOfFirstEntry(){let e;return this.expressions.length>=1&&(e=this.expressions[0].expression.ColorXML),e}addExpression(e,t){e instanceof s.InstantaneousDynamicExpression?(this.instantaneousDynamic&&this.removeExpressionFromEntryList(this.InstantaneousDynamic),this.instantaneousDynamic=e,this.instantaneousDynamic.ParentMultiExpression=this):e instanceof r.ContinuousDynamicExpression?this.startingContinuousDynamic=e:e instanceof a.MoodExpression?this.moodList.push(e):e instanceof o.UnknownExpression&&this.unknownList.push(e),this.addExpressionToEntryList(e,t)}CompareTo(e){return this.Timestamp.RealValue>e.Timestamp.RealValue?1:this.Timestamp.RealValue<e.Timestamp.RealValue?-1:0}addExpressionToEntryList(e,t){const n=new h;n.prefix=t,n.expression=e,e instanceof r.ContinuousDynamicExpression||e instanceof a.MoodExpression||e instanceof o.UnknownExpression?n.label=e.Label:n.label="",this.expressions.push(n)}removeExpressionFromEntryList(e){for(let t=0,n=this.expressions.length;t<n;++t)if(this.expressions[t].expression===e){this.expressions.splice(t,1);break}}};class h{}t.MultiExpressionEntry=h},9024:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimestampTransform=t.MusicPartManager=void 0;const i=n(2561),s=n(474);t.MusicPartManager=class{constructor(e){this.musicSheet=e}reInit(){this.init()}init(){this.parts=this.musicSheet.Repetitions.slice(),this.sheetStart=this.musicSheet.SelectionStart=new i.Fraction(0,1),this.sheetEnd=this.musicSheet.SelectionEnd=this.musicSheet.SheetEndTimestamp,this.calcMapping()}getCurrentRepetitionTimestampTransform(e){let t;for(let n=this.timestamps.length-1;n>=0;n--)if(t=this.timestamps[n],e.gte(t.$from))return t;return this.timestamps[0]}absoluteEnrolledToSheetTimestamp(e){if(0===this.timestamps.length)return e;const t=this.getCurrentRepetitionTimestampTransform(e);return i.Fraction.plus(e,i.Fraction.minus(t.to,t.$from))}get Parts(){return this.parts}get MusicSheet(){return this.musicSheet}getIterator(e){return e?new s.MusicPartManagerIterator(this.musicSheet,e,void 0):new s.MusicPartManagerIterator(this.musicSheet,this.musicSheet.SelectionStart,this.musicSheet.SelectionEnd)}setSelectionStart(e){this.musicSheet.SelectionStart=e,this.musicSheet.SelectionEnd=void 0}setSelectionRange(e,t){this.musicSheet.SelectionStart=null!==e&&void 0!==e?e:this.sheetStart,this.musicSheet.SelectionEnd=null!==t&&void 0!==t?t:this.sheetEnd}calcMapping(){const e=[],t=this.getIterator();let n=t.CurrentRepetition,i=new r(t.CurrentEnrolledTimestamp.clone(),t.CurrentSourceTimestamp.clone(),void 0,0);for(e.push(i);!t.EndReached;){if(t.JumpOccurred||n!==t.CurrentRepetition){if(n=t.CurrentRepetition,t.backJumpOccurred){const n=t.JumpResponsibleRepetition;i.nextBackJump=t.CurrentEnrolledTimestamp,i.curRepetition=n,i.curRepetitionIteration=t.CurrentJumpResponsibleRepetitionIterationBeforeJump;for(let t=this.timestamps.length-2;t>=0&&!e[t].to.lt(n.AbsoluteTimestamp)&&!e[t].curRepetition;t--)e[t].nextBackJump=i.nextBackJump,e[t].curRepetition=n,e[t].curRepetitionIteration=i.curRepetitionIteration}i=new r(t.CurrentEnrolledTimestamp.clone(),t.CurrentSourceTimestamp.clone(),void 0,0),e.push(i)}t.moveToNext()}this.timestamps=e}};class r{constructor(e,t,n,i){this.$from=e,this.to=t,this.curRepetition=n,this.curRepetitionIteration=i,this.nextBackJump=void 0,this.nextForwardJump=void 0}}t.TimestampTransform=r},9099:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MusicSheetReader=void 0;const s=n(427),r=n(4387),a=n(2561),o=n(1272),l=n(9252),c=n(9767),h=n(7307),u=i(n(3065)),d=n(9288),f=n(9288),p=n(2369),m=n(7586),g=n(5294),b=n(164),v=n(7435),y=n(5749),x=n(9713),S=n(7503),w=n(7533);t.MusicSheetReader=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new x.EngravingRules;this.completeNumberOfStaves=0,this.pluginManager=new S.ReaderPluginManager,this.afterSheetReadingModules=e||[],this.repetitionInstructionReader=y.MusicSymbolModuleFactory.createRepetitionInstructionReader(),this.repetitionCalculator=y.MusicSymbolModuleFactory.createRepetitionCalculator(),this.rules=t}get PluginManager(){return this.pluginManager}get CompleteNumberOfStaves(){return this.completeNumberOfStaves}static doCalculationsAfterDurationHasBeenSet(e){for(const t of e)t.doCalculationsAfterDurationHasBeenSet()}createMusicSheet(e,t){try{return this._createMusicSheet(e,t)}catch(e){return void u.default.error("MusicSheetReader.CreateMusicSheet",e)}}_removeFromArray(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}trimString(e){return e.replace(/^\s+|\s+$/g,"")}_lastElement(e){return e[e.length-1]}_createMusicSheet(e,t){const n=[];let i=0;this.musicSheet=new s.MusicSheet,this.musicSheet.Path=t,this.musicSheet.Rules=this.rules;const o=e.attribute("osmdMeasureWidthFactor");if(o){const e=Number.parseFloat(o.value);"number"!=typeof e||isNaN(e)?u.default.info("xml parse: osmdMeasureWidthFactor invalid"):this.musicSheet.MeasureWidthFactor=e}if(!e)throw new h.MusicSheetReadingException("Undefined root element");this.pushSheetLabels(e,t);const l=e.element("part-list");if(!l)throw new h.MusicSheetReadingException("Undefined partListNode");const d=e.elements("part"),f=l.elements();this.initializeReading(f,d,n);let p=!0;this.currentFraction=new a.Fraction(0,1);let m=!1,g=e.element("identification");for(g&&(g=g.element("encoding")),g&&(g=g.element("software")),void 0!==g&&"Guitar Pro 5"===g.value&&(m=!0);p;){void 0!==this.currentMeasure&&this.currentMeasure.HasEndLine&&this.rules.NewPartAndSystemAfterFinalBarline&&(i=0),this.currentMeasure=new r.SourceMeasure(this.completeNumberOfStaves,this.musicSheet.Rules);for(const t of n)try{p=p&&t.readNextXmlMeasure(this.currentMeasure,this.currentFraction,m)}catch(e){const t=c.ITextTranslation.translateText("ReaderErrorMessages/InstrumentError","Error while reading instruments.");throw new h.MusicSheetReadingException(t,e)}p&&(this.musicSheet.addMeasure(this.currentMeasure),this.checkIfRhythmInstructionsAreSetAndEqual(n),this.checkSourceMeasureForNullEntries(),i=this.setSourceMeasureDuration(n,i),this.currentMeasure.AbsoluteTimestamp=this.currentFraction.clone(),this.musicSheet.SheetErrors.finalizeMeasure(this.currentMeasure.MeasureNumber),this.currentFraction.Add(this.currentMeasure.Duration),this.previousMeasure=this.currentMeasure)}this.repetitionInstructionReader&&(this.repetitionInstructionReader.removeRedundantInstructions(),this.repetitionCalculator&&this.repetitionCalculator.calculateRepetitions(this.musicSheet,this.repetitionInstructionReader.repetitionInstructions)),this.musicSheet.checkForInstrumentWithNoVoice(),this.musicSheet.fillStaffList();for(let s=0,r=this.afterSheetReadingModules.length;s<r;++s)this.afterSheetReadingModules[s].calculate(this.musicSheet);return this.musicSheet.userStartTempoInBPM=this.musicSheet.userStartTempoInBPM||this.musicSheet.DefaultStartTempoInBpm,this.musicSheet}initializeReading(e,t,n){const i=this.createInstrumentGroups(e);this.completeNumberOfStaves=this.getCompleteNumberOfStavesFromXml(t),0!==t.length&&(this.repetitionInstructionReader.MusicSheet=this.musicSheet,this.currentFraction=new a.Fraction(0,1),this.currentMeasure=void 0,this.previousMeasure=void 0);let s=0;for(const r of t){const t=r.attribute("id");if(t){const a=i[t.value],l=r.elements("measure");let h=1;try{h=this.getInstrumentNumberOfStavesFromXml(r)}catch(e){const t=c.ITextTranslation.translateText("ReaderErrorMessages/InstrumentStavesNumberError","Invalid number of staves at instrument: ");this.musicSheet.SheetErrors.push(t+a.Name);continue}a.createStaves(h),n.push(new o.InstrumentReader(this.pluginManager,this.repetitionInstructionReader,l,a)),this.repetitionInstructionReader&&(this.repetitionInstructionReader.xmlMeasureList[s]=l),s++}}}checkIfRhythmInstructionsAreSetAndEqual(e){const t=[];for(let s=0;s<this.completeNumberOfStaves;s++)if(this.currentMeasure.FirstInstructionsStaffEntries[s]){const e=this.currentMeasure.FirstInstructionsStaffEntries[s].Instructions[this.currentMeasure.FirstInstructionsStaffEntries[s].Instructions.length-1];e instanceof d.RhythmInstruction&&t.push(e)}let n=0,i=-1;for(let s=0,r=t.length;s<r;++s){const e=t[s];if(e.Rhythm.RealValue>n){if(this.areRhythmInstructionsMixed(t)&&e.SymbolEnum!==f.RhythmSymbolEnum.NONE)continue;n=e.Rhythm.RealValue,i=t.indexOf(e)}}if(t.length>0&&t.length<this.completeNumberOfStaves){const n=t[i].clone();for(let e=0;e<this.completeNumberOfStaves;e++)void 0===this.currentMeasure.FirstInstructionsStaffEntries[e]||this._lastElement(this.currentMeasure.FirstInstructionsStaffEntries[e].Instructions)instanceof d.RhythmInstruction||(this.currentMeasure.FirstInstructionsStaffEntries[e].removeAllInstructionsOfTypeRhythmInstruction(),this.currentMeasure.FirstInstructionsStaffEntries[e].Instructions.push(n.clone())),this.currentMeasure.FirstInstructionsStaffEntries[e]||(this.currentMeasure.FirstInstructionsStaffEntries[e]=new p.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[e].Instructions.push(n.clone()));for(let t=0,i=e.length;t<i;++t)e[t].ActiveRhythm=n}if(0===t.length&&this.currentMeasure===this.musicSheet.SourceMeasures[0]){const t=new d.RhythmInstruction(new a.Fraction(4,4,0,!1),f.RhythmSymbolEnum.NONE);for(let e=0;e<this.completeNumberOfStaves;e++)this.currentMeasure.FirstInstructionsStaffEntries[e]?this.currentMeasure.FirstInstructionsStaffEntries[e].removeAllInstructionsOfTypeRhythmInstruction():this.currentMeasure.FirstInstructionsStaffEntries[e]=new p.SourceStaffEntry(void 0,void 0),this.currentMeasure.FirstInstructionsStaffEntries[e].Instructions.push(t);for(let n=0,i=e.length;n<i;++n)e[n].ActiveRhythm=t}for(let s=0,r=t.length;s<r;++s){const e=t[s];if(e.Rhythm.RealValue<n&&this._lastElement(this.currentMeasure.FirstInstructionsStaffEntries[t.indexOf(e)].Instructions)instanceof d.RhythmInstruction){const n=this.currentMeasure.FirstInstructionsStaffEntries[t.indexOf(e)].Instructions;n[n.length-1]=t[i].clone()}Math.abs(e.Rhythm.RealValue-n)<1e-6&&e.SymbolEnum!==f.RhythmSymbolEnum.NONE&&this.areRhythmInstructionsMixed(t)&&(e.SymbolEnum=f.RhythmSymbolEnum.NONE)}}areRhythmInstructionsMixed(e){for(let t=1;t<e.length;t++)if(Math.abs(e[t].Rhythm.RealValue-e[0].Rhythm.RealValue)<1e-6&&e[t].SymbolEnum!==e[0].SymbolEnum)return!0;return!1}setSourceMeasureDuration(e,t){let n=new a.Fraction(0,1);const i=[];for(const o of e){i.push(o.MaxTieNoteFraction);const e=o.ActiveRhythm.Rhythm;n.lt(e)&&(n=new a.Fraction(e.Numerator,e.Denominator,0,!1))}const s=this.currentMeasure.calculateInstrumentsDuration(this.musicSheet,i);let r=new a.Fraction(0,1);for(const a of s)r.lt(a)&&(r=a);a.Fraction.Equal(r,n)?this.checkFractionsForEquivalence(r,n):r.lt(n)&&(r=this.currentMeasure.reverseCheck(this.musicSheet,r),this.checkFractionsForEquivalence(r,n)),this.currentMeasure.ImplicitMeasure=this.checkIfMeasureIsImplicit(r,n),(!this.currentMeasure.ImplicitMeasure||t>0)&&t++,this.currentMeasure.Duration=r,this.currentMeasure.ActiveTimeSignature=n,this.currentMeasure.MeasureNumber=t;for(let o=0;o<s.length;o++){const e=s[o];if(this.currentMeasure.ImplicitMeasure&&e!==r||!a.Fraction.Equal(e,n)&&!this.allInstrumentsHaveSameDuration(s,r)){const e=this.musicSheet.getGlobalStaffIndexOfFirstStaff(this.musicSheet.Instruments[o]);for(let t=0;t<this.musicSheet.Instruments[o].Staves.length;t++)if(!this.graphicalMeasureIsEmpty(e+t)){this.currentMeasure.setErrorInGraphicalMeasure(e+t,!0);const n=c.ITextTranslation.translateText("ReaderErrorMessages/MissingNotesError","Given Notes don't correspond to measure duration.");this.musicSheet.SheetErrors.pushMeasureError(n)}}}return t}checkFractionsForEquivalence(e,t){if(t.Denominator>e.Denominator){const n=t.Denominator/e.Denominator;e.expand(n)}}checkIfMeasureIsImplicit(e,t){return!(this.previousMeasure||!e.lt(t))||!!this.previousMeasure&&a.Fraction.plus(this.previousMeasure.Duration,e).Equals(t)}allInstrumentsHaveSameDuration(e,t){let n=0;for(let i=0,s=e.length;i<s;++i)e[i].Equals(t)&&n++;return n===e.length&&t!==new a.Fraction(0,1)}graphicalMeasureIsEmpty(e){let t=0;for(let n=0;n<this.currentMeasure.VerticalSourceStaffEntryContainers.length;n++)this.currentMeasure.VerticalSourceStaffEntryContainers[n].StaffEntries[e]||t++;return t===this.currentMeasure.VerticalSourceStaffEntryContainers.length}checkSourceMeasureForNullEntries(){for(let e=this.currentMeasure.VerticalSourceStaffEntryContainers.length-1;e>=0;e--)for(let t=this.currentMeasure.VerticalSourceStaffEntryContainers[e].StaffEntries.length-1;t>=0;t--){const n=this.currentMeasure.VerticalSourceStaffEntryContainers[e].StaffEntries[t];if(n)for(let e=n.VoiceEntries.length-1;e>=0;e--){const t=n.VoiceEntries[e];0===t.Notes.length&&(this._removeFromArray(t.ParentVoice.VoiceEntries,t),this._removeFromArray(n.VoiceEntries,t))}void 0!==n&&0===n.VoiceEntries.length&&0===n.ChordContainers.length&&(this.currentMeasure.VerticalSourceStaffEntryContainers[e].StaffEntries[t]=void 0)}for(let e=this.currentMeasure.VerticalSourceStaffEntryContainers.length-1;e>=0;e--){let t=0;for(let n=0,i=this.currentMeasure.VerticalSourceStaffEntryContainers[e].StaffEntries.length;n<i;++n)this.currentMeasure.VerticalSourceStaffEntryContainers[e].StaffEntries[n]||t++;t===this.currentMeasure.VerticalSourceStaffEntryContainers[e].StaffEntries.length&&this._removeFromArray(this.currentMeasure.VerticalSourceStaffEntryContainers,this.currentMeasure.VerticalSourceStaffEntryContainers[e])}}pushSheetLabels(e,t){this.readComposer(e),this.readTitle(e),this.readCopyright(e);try{this.musicSheet.Title&&this.musicSheet.Composer&&this.musicSheet.Subtitle||this.readTitleAndComposerFromCredits(e)}catch(e){u.default.info("MusicSheetReader.pushSheetLabels","readTitleAndComposerFromCredits",e)}try{if(!this.musicSheet.Title){const e=Math.max(0,t.lastIndexOf("/"),t.lastIndexOf("\\")),n=t.substr(e).split(".",1);this.musicSheet.Title=new v.Label(n[0])}}catch(e){u.default.info("MusicSheetReader.pushSheetLabels","read title from file name",e)}}presentAttrsWithValue(e,t){for(const n of e.attributes())if(n.value===t)return!0;return!1}readComposer(e){const t=e.element("identification");if(t){const e=t.elements("creator");for(let t=0,n=e.length;t<n;++t){const n=e[t];if(n.hasAttributes){if(this.presentAttrsWithValue(n,"composer")){this.musicSheet.Composer=new v.Label(this.trimString(n.value));continue}(this.presentAttrsWithValue(n,"lyricist")||this.presentAttrsWithValue(n,"poet"))&&(this.musicSheet.Lyricist=new v.Label(this.trimString(n.value)))}}}}readCopyright(e){const t=e.elements("identification");if(t.length>0){const e=t[0].elements("rights");if(e.length>0)for(let t=0,n=e.length;t<n;++t){const n=e[t];if(n.value){this.musicSheet.Copyright=new v.Label(n.value,w.TextAlignmentEnum.CenterBottom,void 0,!0);break}}}}readTitleAndComposerFromCredits(e){if(this.rules.SheetComposerSubtitleUseLegacyParsing)return void this.readTitleAndComposerFromCreditsLegacy(e);const t=this.computeSystemYCoordinates(e);if(0===t)return;let n,i,s;const r=e.elements("credit");for(let u=0,d=r.length;u<d;++u){const e=r[u];if(!e.attribute("page"))return;if("1"===e.attribute("page").value){let r;if(e){let c=!1,h=!1;const u=e.element("credit-type");"subtitle"===(null===u||void 0===u?void 0:u.value)?c=!0:"composer"===(null===u||void 0===u?void 0:u.value)&&(h=!0);let d=c||h;r=e.elements("credit-words");for(const e of r){var a,o,l;const r=null===(a=e.value)||void 0===a?void 0:a.trim();if("Copyright \xa9"===r)continue;const u=null===(o=e.attribute("justify"))||void 0===o?void 0:o.value;"right"===u?(h=!0,d=!0):"center"===u&&n&&(c=!0,d=!0);const f=null===(l=e.attribute("default-y"))||void 0===l?void 0:l.value,p=null!=f,m=p?parseFloat(f):Number.MIN_VALUE;if(p&&m>t||d)if(n||d){if(h||"right"===u)s?s+="\n"+r:s=r;else if(c||"right"!==u&&"left"!==u)i?i+="\n"+r:i=r;else if("left"===u){this.musicSheet.Lyricist||(this.musicSheet.Lyricist=new v.Label(r));break}}else n=r}}}}if(!this.musicSheet.Title&&n&&(this.musicSheet.Title=new v.Label(this.trimString(n))),!this.musicSheet.Subtitle&&i&&(this.musicSheet.Subtitle=new v.Label(this.trimString(i))),s){var c,h;let e=!1;this.musicSheet.Composer?(null!==(c=s.match("\n"))&&void 0!==c?c:[]).length+1>=(null!==(h=this.musicSheet.Composer.text.match("\n"))&&void 0!==h?h:[]).length+1&&(e=!0):e=!0,e&&(this.musicSheet.Composer=new v.Label(this.trimString(s)))}}readTitleAndComposerFromCreditsLegacy(e){const t=this.computeSystemYCoordinates(e);if(0===t)return;let n,i,s,r=1,a=0;const o=e.elements("credit");for(let u=0,d=o.length;u<d;++u){const e=o[u];if(!e.attribute("page"))return;if("1"===e.attribute("page").value){let o;if(e){var l,c;if(o=e.element("credit-words"),!o.attribute("justify"))break;const u=null===(l=o.attribute("justify"))||void 0===l?void 0:l.value,d=null===(c=o.attribute("default-y"))||void 0===c?void 0:c.value,f=null!=d,p=f?parseFloat(d):Number.MIN_VALUE;let m=!1;const g=e.element("credit-type");if("subtitle"===(null===g||void 0===g?void 0:g.value)&&(m=!0),f&&p>t||m){if(!this.musicSheet.Title&&!m){var h;const e=null===(h=o.attribute("font-size"))||void 0===h?void 0:h.value;if(e){const t=parseFloat(e);r<t&&(r=t,n=o.value)}}switch(this.musicSheet.Subtitle||("right"!==u&&"left"!==u||m)&&(a<p?(a=p,s?(i=s,s=o.value):s=o.value):i?i+="\n"+o.value:i=o.value),u){case"right":this.musicSheet.Composer||(this.musicSheet.Composer=new v.Label(this.trimString(o.value)));break;case"left":this.musicSheet.Lyricist||(this.musicSheet.Lyricist=new v.Label(this.trimString(o.value)))}}}}}!this.musicSheet.Title&&n&&(this.musicSheet.Title=new v.Label(this.trimString(n))),!this.musicSheet.Subtitle&&i&&(this.musicSheet.Subtitle=new v.Label(this.trimString(i)))}computeSystemYCoordinates(e){if(!e.element("defaults"))return 0;let t=0,n=0;try{var i,s;const n=null!==(i=null===(s=e.element("defaults"))||void 0===s||null===(s=s.element("page-layout"))||void 0===s?void 0:s.element("page-height").value)&&void 0!==i?i:"0";t=parseFloat(n)}catch(e){return u.default.info("MusicSheetReader.computeSystemYCoordinates(): couldn't find page height, not reading title/composer."),0}let r=!1;const a=e.elements("part");for(let o=0,l=a.length;o<l;++o){const e=a[o].elements("measure");for(let t=0,i=e.length;t<i;++t){const i=e[t];if(i.element("print")){const e=i.element("print").elements("system-layout");for(let t=0,i=e.length;t<i;++t){const i=e[t];if(i.element("top-system-distance")){const e=i.element("top-system-distance").value;n=parseFloat(e),r=!0;break}}break}}if(r)break}if(e.element("defaults").element("system-layout")&&e.element("defaults").element("system-layout").element("top-system-distance")){const t=e.element("defaults").element("system-layout").element("top-system-distance").value;n=parseFloat(t)}return 0===n?0:t-n}readTitle(e){const t=e.element("work");let n;t&&(n=t.element("work-title"),n&&n.value&&(this.musicSheet.Title=new v.Label(this.trimString(n.value))));const i=e.element("movement-title");let s="";if(i&&(this.musicSheet.Title?s=this.trimString(i.value):this.musicSheet.Title=new v.Label(this.trimString(i.value))),t){const e=t.element("work-number");if(e){const t=e.value;t&&(s=""===s?t:s+", "+t)}}s&&(this.musicSheet.Subtitle=new v.Label(s))}createInstrumentGroups(e){let t=0;const n={};let i;try{const s=e;for(let r=0,a=s.length;r<a;++r){const a=s[r];if("score-part"===a.name){const s=a.attribute("id").value,r=new l.Instrument(t,s,this.musicSheet,i);t++;const o=a.elements();for(let t=0,n=o.length;t<n;++t){const n=o[t];try{if("part-name"===n.name)r.Name=n.value,n.attribute("print-object")&&"no"===n.attribute("print-object").value&&(r.NameLabel.print=!1);else if("part-abbreviation"===n.name)r.PartAbbreviation=n.value;else if("score-instrument"===n.name){const e=new g.SubInstrument(r);e.idString=n.firstAttribute.value,r.SubInstruments.push(e);const t=n.element("instrument-name");t&&(e.name=t.value,e.setMidiInstrument(t.value))}else if("midi-instrument"===n.name){let t=r.getSubInstrument(n.firstAttribute.value);for(let e=0,s=r.SubInstruments.length;e<s;++e){const i=r.SubInstruments[e];if(i.idString===n.value){t=i;break}}const i=n.elements();for(let n=0,s=i.length;n<s;++n){const s=i[n];try{if("midi-channel"===s.name)10===parseInt(s.value,10)&&(r.MidiInstrumentId=b.MidiInstrument.Percussion);else if("midi-program"===s.name)r.SubInstruments.length>0&&r.MidiInstrumentId!==b.MidiInstrument.Percussion&&(t.midiInstrumentID=Math.max(0,parseInt(s.value,10)-1));else if("midi-unpitched"===s.name)t.fixedKey=Math.max(0,parseInt(s.value,10));else if("volume"===s.name)try{const e=parseFloat(s.value);t.volume=e/127}catch(e){u.default.debug("ExpressionReader.readExpressionParameters","read volume",e)}else if("pan"===s.name)try{const e=parseFloat(s.value);t.pan=e/64}catch(e){u.default.debug("ExpressionReader.readExpressionParameters","read pan",e)}}catch(e){u.default.info("MusicSheetReader.createInstrumentGroups midi settings: ",e)}}}}catch(e){u.default.info("MusicSheetReader.createInstrumentGroups: ",e)}}if(0===r.SubInstruments.length){const e=new g.SubInstrument(r);r.SubInstruments.push(e)}n[s]=r,i?(i.InstrumentalGroups.push(r),this.musicSheet.Instruments.push(r)):(this.musicSheet.InstrumentalGroups.push(r),this.musicSheet.Instruments.push(r))}else if("part-group"===a.name&&"start"===a.attribute("type").value){const e=new m.InstrumentalGroup("group",this.musicSheet,i);i?i.InstrumentalGroups.push(e):this.musicSheet.InstrumentalGroups.push(e),i=e}else if("part-group"===a.name&&"stop"===a.attribute("type").value&&i){if(1===i.InstrumentalGroups.length){const e=i.InstrumentalGroups[0];i.Parent?(i.Parent.InstrumentalGroups.push(e),this._removeFromArray(i.Parent.InstrumentalGroups,i)):(this.musicSheet.InstrumentalGroups.push(e),this._removeFromArray(this.musicSheet.InstrumentalGroups,i))}i=i.Parent}}}catch(e){const t=c.ITextTranslation.translateText("ReaderErrorMessages/InstrumentError","Error while reading Instruments");throw new h.MusicSheetReadingException(t,e)}for(let s=0,r=this.musicSheet.Instruments.length;s<r;++s){const e=this.musicSheet.Instruments[s];e.Name||(e.Name="Instr. "+e.IdString)}return n}getCompleteNumberOfStavesFromXml(e){let t=0;for(const n of e){const e=n.elements("measure");if(e.length>0){const n=e[0];if(n){let e=n.element("attributes");e&&(e=e.element("staves")),e?t+=parseInt(e.value,10):t++}}}if(isNaN(t)||t<=0){const e=c.ITextTranslation.translateText("ReaderErrorMessages/StaffError","Invalid number of staves.");throw new h.MusicSheetReadingException(e)}return t}getInstrumentNumberOfStavesFromXml(e){let t=0;const n=e.element("measure");if(n){const e=n.element("attributes");let i;e&&(i=e.element("staves")),t=e&&i?parseInt(i.value,10):1}if(isNaN(t)||t<=0){const e=c.ITextTranslation.translateText("ReaderErrorMessages/StaffError","Invalid number of Staves.");throw new h.MusicSheetReadingException(e)}return t}}},9147:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTempoExpression=void 0;const i=n(6362);class s extends i.AbstractExpression{constructor(e,t,n,i){super(t),this.label=e,this.staffNumber=n,this.parentMultiTempoExpression=i}get Label(){return this.label}set Label(e){this.label=e}get Placement(){return this.placement}set Placement(e){this.placement=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get ParentMultiTempoExpression(){return this.parentMultiTempoExpression}static isStringInStringList(e,t){for(const n of e)if(s.stringContainsSeparatedWord(t.toLowerCase().trim(),n.toLowerCase().trim()))return!0;return!1}static stringContainsSeparatedWord(e,t){return e===t||-1!==e.indexOf(" "+t)||-1!==e.indexOf(t+" ")}}t.AbstractTempoExpression=s},9157:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RehearsalExpression=void 0;const i=n(6362);class s extends i.AbstractExpression{constructor(e,t){super(t),this.label=e}}t.RehearsalExpression=s},9161:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChangeSubType=t.InstTempo=t.TempoType=t.InstantaneousTempoExpression=void 0;const i=n(9147),s=n(2561);class r extends i.AbstractTempoExpression{constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];super(e,t,n,s),this.parentMeasure=s.SourceMeasureParent,this.isMetronomeMark=r,this.setTempoAndTempoType(i)}static getDefaultValueForInstTempo(e){switch(e){case o.larghissimo:return 20;case o.grave:return 30;case o.lento:return 48;case o.largo:return 52;case o.larghetto:return 63;case o.adagio:return 70;case o.adagietto:return 75;case o.andanteModerato:return 88;case o.andante:return 92;case o.andantino:return 96;case o.moderato:return 106;case o.allegretto:return 112;case o.allegroModerato:return 118;case o.allegro:return 130;case o.vivace:return 140;case o.vivacissimo:return 155;case o.allegrissimo:return 170;case o.presto:return 184;case o.prestissimo:return 200;default:return 60}}static isInputStringInstantaneousTempo(e){return!!e&&(r.isStringInStringList(r.listInstantaneousTempoLarghissimo,e)||r.isStringInStringList(r.listInstantaneousTempoGrave,e)||r.isStringInStringList(r.listInstantaneousTempoLento,e)||r.isStringInStringList(r.listInstantaneousTempoLargo,e)||r.isStringInStringList(r.listInstantaneousTempoLarghetto,e)||r.isStringInStringList(r.listInstantaneousTempoAdagio,e)||r.isStringInStringList(r.listInstantaneousTempoAdagietto,e)||r.isStringInStringList(r.listInstantaneousTempoAndanteModerato,e)||r.isStringInStringList(r.listInstantaneousTempoAndante,e)||r.isStringInStringList(r.listInstantaneousTempoAndantino,e)||r.isStringInStringList(r.listInstantaneousTempoModerato,e)||r.isStringInStringList(r.listInstantaneousTempoAllegretto,e)||r.isStringInStringList(r.listInstantaneousTempoAllegroModerato,e)||r.isStringInStringList(r.listInstantaneousTempoAllegro,e)||r.isStringInStringList(r.listInstantaneousTempoVivace,e)||r.isStringInStringList(r.listInstantaneousTempoVivacissimo,e)||r.isStringInStringList(r.listInstantaneousTempoAllegrissimo,e)||r.isStringInStringList(r.listInstantaneousTempoPresto,e)||r.isStringInStringList(r.listInstantaneousTempoPrestissimo,e)||r.isStringInStringList(r.listInstantaneousTempoChangesGeneral,e))}get Label(){return this.label}set Label(e){this.label=e}get Placement(){return this.placement}set Placement(e){this.placement=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get TempoInBpm(){return this.tempoInBpm}set TempoInBpm(e){this.tempoInBpm=e}get ParentMultiTempoExpression(){return this.parentMultiTempoExpression}getAbsoluteTimestamp(){return s.Fraction.plus(this.ParentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.ParentMultiTempoExpression.Timestamp)}getAbsoluteFloatTimestamp(){return s.Fraction.plus(this.ParentMultiTempoExpression.SourceMeasureParent.AbsoluteTimestamp,this.ParentMultiTempoExpression.Timestamp).RealValue}setTempoAndTempoType(e){if(!this.label)return this.tempoInBpm=e,void(this.TempoType=a.metronomeMark);r.isStringInStringList(r.listInstantaneousTempoLarghissimo,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.larghissimo)),this.tempoInBpm=e,this.InstTempo=o.larghissimo,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoGrave,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.grave)),this.tempoInBpm=e,this.InstTempo=o.grave,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoLento,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.lento)),this.tempoInBpm=e,this.InstTempo=o.lento,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoLargo,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.largo)),this.tempoInBpm=e,this.InstTempo=o.largo,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoLarghetto,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.larghetto)),this.tempoInBpm=e,this.InstTempo=o.larghetto,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoAdagio,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.adagio)),this.tempoInBpm=e,this.InstTempo=o.adagio,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoAdagietto,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.adagietto)),this.tempoInBpm=e,this.InstTempo=o.adagietto,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoAndanteModerato,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.andanteModerato)),this.tempoInBpm=e,this.InstTempo=o.andanteModerato,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoAndante,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.andante)),this.tempoInBpm=e,this.InstTempo=o.andante,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoAndantino,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.andantino)),this.tempoInBpm=e,this.InstTempo=o.andantino,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoModerato,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.moderato)),this.tempoInBpm=e,this.InstTempo=o.moderato,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoAllegretto,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.allegretto)),this.tempoInBpm=e,this.InstTempo=o.allegretto,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoAllegroModerato,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.allegroModerato)),this.tempoInBpm=e,this.InstTempo=o.allegroModerato,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoAllegro,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.allegro)),this.tempoInBpm=e,this.InstTempo=o.allegro,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoVivace,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.vivace)),this.tempoInBpm=e,this.InstTempo=o.vivace,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoVivacissimo,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.vivacissimo)),this.tempoInBpm=e,this.InstTempo=o.vivacissimo,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoAllegrissimo,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.allegrissimo)),this.tempoInBpm=e,this.InstTempo=o.allegrissimo,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoPresto,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.presto)),this.tempoInBpm=e,this.InstTempo=o.presto,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoPrestissimo,this.label)?(0===e&&(e=r.getDefaultValueForInstTempo(o.prestissimo)),this.tempoInBpm=e,this.InstTempo=o.prestissimo,this.TempoType=a.inst):r.isStringInStringList(r.listInstantaneousTempoAddons,this.label)?(this.tempoInBpm=0,this.TempoType=a.addon):r.isStringInStringList(r.listInstantaneousTempoChangesGeneral,this.label)&&(this.tempoInBpm=0,this.TempoType=a.change)}}var a,o,l;t.InstantaneousTempoExpression=r,r.listInstantaneousTempoLarghissimo=["Larghissimo","Sehr breit","very, very slow"],r.listInstantaneousTempoGrave=["Grave","Schwer","slow and solemn"],r.listInstantaneousTempoLento=["Lento","Lent","Langsam","slowly"],r.listInstantaneousTempoLargo=["Largo","Breit","broadly"],r.listInstantaneousTempoLarghetto=["Larghetto","Etwas breit","rather broadly"],r.listInstantaneousTempoAdagio=["Adagio","Langsam","Ruhig","slow and stately"],r.listInstantaneousTempoAdagietto=["Adagietto","Ziemlich ruhig","Ziemlich langsam","rather slow"],r.listInstantaneousTempoAndanteModerato=["Andante moderato"],r.listInstantaneousTempoAndante=["Andante","Gehend","Schreitend","at a walking pace"],r.listInstantaneousTempoAndantino=["Andantino","Maestoso"],r.listInstantaneousTempoModerato=["Moderato","M\xe4\xdfig","Mod\xe9r\xe9","moderately"],r.listInstantaneousTempoAllegretto=["Allegretto","Animato","fast"],r.listInstantaneousTempoAllegroModerato=["Allegro moderato"],r.listInstantaneousTempoAllegro=["Allegro","Rapide","Vite","Rasch","Schnell","Fr\xf6hlich"],r.listInstantaneousTempoVivace=["Vivace","Allegro Assai","Lebhaft","Lebendig","lively and fast"],r.listInstantaneousTempoVivacissimo=["Vivacissimo","Sehr lebhaft","Sehr lebendig"],r.listInstantaneousTempoAllegrissimo=["Allegrissimo","very fast"],r.listInstantaneousTempoPresto=["Presto","Sehr schnell","Geschwind"],r.listInstantaneousTempoPrestissimo=["Prestissimo","\xe4u\xdferst schnell"],r.listInstantaneousTempoChangesGeneral=["tempo primo","a tempo","tempo i","rubato","doppio movimento","rallentando","ritardando","ritard.","rit.","ritard","rall...","accelerando","accel"],r.listInstantaneousTempoAddons=["assai","amoroso","cantabile","con brio","con dolore","con espressione","con fuoco","con moto","con spirito","spiritoso","espressivo","giocoso","giusto","grazioso","lesto","lugubre","maestoso","ma non troppo","marcato","molto","morendo","mosso","non tanto","piu","un poco","poco","quasi","risoluto","scherzando","sostenuto","teneramente","tempo giusto","tranquillo","sehr","lieblich","liebevoll","mit Leidenschaft","mit Liebe","amour\xf6s","gesanglich","mit Schwung","mit Feuer","mit Schmerz","mit Ausdruck","mit Bewegung","geistvoll","ausdrucksvoll","freudig","verspielt","angemessen","grazi\xf6s","mit Grazie","flink","beh\xe4nde","traurig","klagend","majest\xe4tisch","aber nicht zu sehr","markant","gem\xe4\xdfigt","viel","sehr","ersterbend","bewegt","nicht zu sehr","mehr","ein wenig","gleichsam","entschlossen","zupackend","heiter","nachdr\xfccklich","getragen","gewichtig","zart","z\xe4rtlich","im angemessenen Zeitma\xdf","ruhig","ein wenig","alla marcia","ad libitum","alla breve"],function(e){e[e.none=0]="none",e[e.metronomeMark=1]="metronomeMark",e[e.inst=2]="inst",e[e.change=3]="change",e[e.addon=4]="addon"}(a||(t.TempoType=a={})),function(e){e[e.larghissimo=0]="larghissimo",e[e.grave=1]="grave",e[e.lento=2]="lento",e[e.largo=3]="largo",e[e.larghetto=4]="larghetto",e[e.adagio=5]="adagio",e[e.adagietto=6]="adagietto",e[e.andanteModerato=7]="andanteModerato",e[e.andante=8]="andante",e[e.andantino=9]="andantino",e[e.moderato=10]="moderato",e[e.allegretto=11]="allegretto",e[e.allegroModerato=12]="allegroModerato",e[e.allegro=13]="allegro",e[e.vivace=14]="vivace",e[e.vivacissimo=15]="vivacissimo",e[e.allegrissimo=16]="allegrissimo",e[e.presto=17]="presto",e[e.prestissimo=18]="prestissimo",e[e.lastRealTempo=19]="lastRealTempo"}(o||(t.InstTempo=o={})),function(e){e[e.none=0]="none",e[e.atempo=1]="atempo",e[e.doppioMovimento=2]="doppioMovimento",e[e.tempoprimo=3]="tempoprimo"}(l||(t.ChangeSubType=l={}))},9184:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(5364),t),s(n(164),t),s(n(4543),t),s(n(1645),t),s(n(9288),t),s(n(3123),t)},9252:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Instrument=void 0;const i=n(7586),s=n(7435),r=n(1910);class a extends i.InstrumentalGroup{constructor(e,t,n,i){super(void 0,n,i),this.Transpose=0,this.voices=[],this.staves=[],this.hasLyrics=!1,this.hasChordSymbols=!1,this.lyricVersesNumbers=[],this.subInstruments=[],this.id=e,this.idString=t,this.nameLabel=new s.Label(t)}get Voices(){return this.voices}get Staves(){return this.staves}get NameLabel(){return this.nameLabel}get HasLyrics(){return this.hasLyrics}set HasLyrics(e){this.hasLyrics=e}get HasChordSymbols(){return this.hasChordSymbols}set HasChordSymbols(e){this.hasChordSymbols=e}get LyricVersesNumbers(){return this.lyricVersesNumbers}set LyricVersesNumbers(e){this.lyricVersesNumbers=e}get Name(){return this.nameLabel.text}set Name(e){this.nameLabel.text=e}get IdString(){return this.idString}get Id(){return this.id}get MidiInstrumentId(){return this.subInstruments[0].midiInstrumentID}set MidiInstrumentId(e){this.subInstruments[0].midiInstrumentID=e}get Volume(){return this.subInstruments[0].volume}set Volume(e){for(let t=0,n=this.subInstruments.length;t<n;++t)this.subInstruments[t].volume=e}get PlaybackTranspose(){return this.playbackTranspose}set PlaybackTranspose(e){this.playbackTranspose=e}get SubInstruments(){return this.subInstruments}getSubInstrument(e){for(let t=0,n=this.subInstruments.length;t<n;++t){const n=this.subInstruments[t];if(n.idString===e)return n}}get PartAbbreviation(){return this.partAbbreviation}set PartAbbreviation(e){this.partAbbreviation=e}get Visible(){return this.voices.length>0&&this.Voices[0].Visible}isVisible(){if(!this.Visible)return!1;for(const e of this.Staves)if(e.Visible)return!0;return!1}set Visible(e){for(let t=0,n=this.Voices.length;t<n;++t)this.Voices[t].Visible=e}get Audible(){let e=!1;for(let t=0,n=this.Voices.length;t<n;++t){const n=this.Voices[t];e=e||n.Audible}return e}set Audible(e){for(let t=0,n=this.Voices.length;t<n;++t)this.Voices[t].Audible=e;for(let t=0,n=this.staves.length;t<n;++t)this.staves[t].audible=e}get Following(){let e=!1;for(let t=0,n=this.Voices.length;t<n;++t){const n=this.Voices[t];e=e||n.Following}return e}set Following(e){for(let t=0,n=this.Voices.length;t<n;++t)this.Voices[t].Following=e;for(let t=0,n=this.staves.length;t<n;++t)this.staves[t].following=e}SetVoiceAudible(e,t){for(let n=0,i=this.Voices.length;n<i;++n){const i=this.Voices[n];if(i.VoiceId===e){i.Audible=t;break}}}SetVoiceFollowing(e,t){for(let n=0,i=this.Voices.length;n<i;++n){const i=this.Voices[n];if(i.VoiceId===e){i.Following=t;break}}}SetStaffAudible(e,t){const n=this.staves[e-1];if(n.audible=t,t)for(let i=0,s=n.Voices.length;i<s;++i)n.Voices[i].Audible=!0;else for(let i=0,s=n.Voices.length;i<s;++i){const t=n.Voices[i];let s=!1;for(let n=0,i=this.Staves.length;n<i;++n){const i=this.Staves[n];if(i.Id!==e&&i.audible)for(let e=0,n=i.Voices.length;e<n;++e)i.Voices[e]===t&&(s=!0)}s||(t.Audible=!1)}}SetStaffFollow(e,t){const n=this.staves[e-1];if(n.following=t,t)for(let i=0,s=n.Voices.length;i<s;++i)n.Voices[i].Following=!0;else for(let i=0,s=n.Voices.length;i<s;++i){const t=n.Voices[i];let s=!1;for(let n=0,i=this.Staves.length;n<i;++n){const i=this.Staves[n];if(i.Id!==e&&i.following)for(let e=0,n=i.Voices.length;e<n;++e)i.Voices[e]===t&&(s=!0)}s||(t.Following=!1)}}areAllVoiceVisible(){for(const e of this.Voices)if(!e.Visible)return!1;return!0}createStaves(e){for(let t=0;t<e;t++)this.staves.push(new r.Staff(this,t+1))}toString(){return"".concat(this.Name," , id: ").concat(this.id,", idstring: ").concat(this.idString)}}t.Instrument=a},9281:function(e,t,n){"use strict";var i,s=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=n(6119),a=n(4831),o=function(e){function t(t,n){var i=e.call(this,n)||this;return i.defaultFactoryFunction=t,i}return s(t,e),t.prototype.setDefault=function(t,n){var i=e.prototype.getValue.call(this,t);return a.isUndefined(i)?(this.setValue(t,n),n):i},t.prototype.getValue=function(e){return this.setDefault(e,this.defaultFactoryFunction())},t}(r.default);t.default=o},9288:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RhythmSymbolEnum=t.RhythmInstruction=void 0;const i=n(5364);class s extends i.AbstractNotationInstruction{constructor(e,t){super(void 0),this.rhythm=e,this.numerator=e.Numerator,this.denominator=e.Denominator,this.symbolEnum=t}get Rhythm(){return this.rhythm}set Rhythm(e){this.rhythm=e}get SymbolEnum(){return this.symbolEnum}set SymbolEnum(e){this.symbolEnum=e}clone(){return new s(this.rhythm.clone(),this.symbolEnum)}OperatorEquals(e){const t=this;return t===e||!(!t||!e)&&t.numerator===e.numerator&&t.denominator===e.denominator}OperatorNotEqual(e){return!(this===e)}ToString(){return"Rhythm: "+this.rhythm.toString()}}var r;t.RhythmInstruction=s,function(e){e[e.NONE=0]="NONE",e[e.COMMON=1]="COMMON",e[e.CUT=2]="CUT"}(r||(t.RhythmSymbolEnum=r={}))},9310:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowOctaveShift=void 0;var s=i(n(3206)).default.Flow;const r=n(2768),a=n(437),o=i(n(3065));class l extends r.GraphicalOctaveShift{constructor(e,t){switch(super(e,t),e.Type){case a.OctaveEnum.VA8:this.position=s.TextBracket.Positions.TOP,this.supscript="va",this.text="8";break;case a.OctaveEnum.MA15:this.position=s.TextBracket.Positions.TOP,this.supscript="ma",this.text="15";break;case a.OctaveEnum.VB8:this.position=s.TextBracket.Positions.BOTTOM,this.supscript="vb",this.text="8";break;case a.OctaveEnum.MB15:this.position=s.TextBracket.Positions.BOTTOM,this.supscript="mb",this.text="15";break;default:o.default.error("Unknown or NONE octaveshift. This should not be called!")}}setStartNote(e){for(const t of e.graphicalVoiceEntries){const e=t;if(null!==e&&void 0!==e&&e.vfStaveNote)return this.startNote=e.vfStaveNote,!0}return!1}setEndNote(e){for(const n of e.graphicalVoiceEntries){var t;const i=n;if(null!==i&&void 0!==i&&i.vfStaveNote)return this.endNote=i.vfStaveNote,this.endMeasure=e.parentMeasure,null!==(t=this.endMeasure)&&void 0!==t&&t.parentSourceMeasure.Rules.OctaveShiftOnWholeMeasureNoteUntilEndOfMeasure&&i.notes[0].sourceNote.isWholeMeasureNote()&&(this.graphicalEndAtMeasureEnd=!0),!0}return!1}getTextBracket(){let e,t=this.endNote;const n=this;this.graphicalEndAtMeasureEnd&&(e={getAbsoluteX:()=>10*(n.endMeasure.PositionAndShape.AbsolutePosition.x+n.endMeasure.PositionAndShape.Size.width),getGlyph:()=>({getWidth:()=>0})}),e&&(t=e);const i=new s.TextBracket({position:this.position,start:this.startNote,stop:t,superscript:this.supscript,text:this.text});return this.endsOnDifferentStaffLine&&(i.render_options.show_bracket=!1),i}}t.VexFlowOctaveShift=l},9409:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointF2D=void 0;class n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.x=0,this.y=0,this.x=e,this.y=t}static get Empty(){return new n}static pointsAreEqual(e,t){return e.x===t.x&&e.y===t.y}ToString(){return"["+this.x+", "+this.y+"]"}}t.PointF2D=n},9436:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SvgVexFlowBackend=void 0;var s=i(n(3206)).default.Flow;const r=n(1902),a=n(6014),o=n(2570),l=n(624),c=i(n(3065));class h extends r.VexFlowBackend{constructor(e){super(),this.rules=e}getVexflowBackendType(){return s.Renderer.Backends.SVG}getOSMDBackendType(){return l.BackendType.SVG}getCanvasSize(){var e;return null===(e=document.getElementById("osmdCanvasPage"+this.graphicalMusicPage.PageNumber))||void 0===e?void 0:e.offsetHeight}initialize(e,t){this.zoom=t,this.canvas=document.createElement("div"),this.canvas.id="osmdCanvasPage"+this.graphicalMusicPage.PageNumber,this.inner=this.canvas,this.inner.style.position="relative",this.canvas.style.zIndex="0",e.appendChild(this.inner),this.renderer=new s.Renderer(this.canvas,this.getVexflowBackendType()),this.ctx=this.renderer.getContext(),this.ctx.svg.id="osmdSvgPage"+this.graphicalMusicPage.PageNumber}getContext(){return this.ctx}getSvgElement(){return this.ctx.svg}removeNode(e){var t;const n=null===(t=this.ctx)||void 0===t?void 0:t.svg;if(!n)return!1;try{n.removeChild(e)}catch(e){return c.default.error(e),!1}return!0}free(){const e=this.ctx.svg;for(;e.lastChild;)e.removeChild(e.lastChild)}clear(){this.ctx&&(this.free(),this.rules.PageBackgroundColor&&(this.ctx.svg.style["background-color"]=this.rules.PageBackgroundColor))}scale(e){this.ctx.scale(e,e)}translate(e,t){}renderText(e,t,n,i,s,r){let l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;this.ctx.save();const h=this.ctx.openGroup("text");l&&(this.ctx.attributes.fill=l,this.ctx.attributes.stroke=l);let u=c;c&&"default"!==c||(u=this.rules.DefaultFontFamily),this.ctx.setFont(u,e,a.VexFlowConverter.fontStyle(t)),this.ctx.attributes["font-size"]="".concat(e,"px"),this.ctx.state["font-size"]="".concat(e,"px");let d="normal",f="normal";switch(t){case o.FontStyles.Bold:d="bold";break;case o.FontStyles.Italic:f="italic";break;case o.FontStyles.BoldItalic:d="bold",f="italic";break;default:d="normal"}return this.ctx.attributes["font-weight"]=d,this.ctx.state["font-weight"]=d,this.ctx.attributes["font-style"]=f,this.ctx.state["font-style"]=f,this.ctx.fillText(i,r.x,r.y+s),this.ctx.closeGroup(),this.ctx.restore(),h}renderRectangle(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.ctx.save();const s=this.ctx.openGroup("rect");return this.ctx.attributes.fill=n||a.VexFlowConverter.style(t),this.ctx.attributes["fill-opacity"]=i,this.ctx.fillRect(e.x,e.y,e.width,e.height),this.ctx.restore(),this.ctx.attributes["fill-opacity"]=1,this.ctx.closeGroup(),s}renderLine(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF0000FF",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,s=arguments.length>4?arguments[4]:void 0;this.ctx.save();const r=this.ctx.openGroup("line",s);return this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(t.x,t.y),this.ctx.attributes.stroke=n,this.ctx.lineWidth=i,this.ctx.stroke(),this.ctx.closeGroup(),this.ctx.restore(),r}renderCurve(e,t,n){let i;t&&n&&(i="".concat(n.getSVGId(),"-slur"));const s=this.ctx.openGroup("curve",i);return this.ctx.beginPath(),this.ctx.moveTo(e[0].x,e[0].y),this.ctx.bezierCurveTo(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y),this.ctx.lineTo(e[7].x,e[7].y),this.ctx.bezierCurveTo(e[6].x,e[6].y,e[5].x,e[5].y,e[4].x,e[4].y),this.ctx.lineTo(e[0].x,e[0].y),this.ctx.closePath(),this.ctx.fill(),this.ctx.closeGroup(),s}renderPath(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const i=this.ctx.openGroup("path",n);let s;this.ctx.beginPath();for(const r of e)s?this.ctx.lineTo(r.x,r.y):(this.ctx.moveTo(r.x,r.y),s=r);return this.ctx.closePath(),t?this.ctx.fill():this.ctx.stroke(),this.ctx.stroke(),this.ctx.closeGroup(),i}export(){const e=this.ctx.svg.cloneNode(!0),t=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),n=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",t);n.replaceChild(e,n.documentElement);const i=(new XMLSerializer).serializeToString(n),s=document.createElement("a");s.href="data:image/svg+xml; charset=utf8, "+encodeURIComponent(i.replace(/></g,">\n\r<")),s.download="opensheetmusicdisplay_download.svg",s.innerHTML=window.location.href+"/download",document.body.appendChild(s)}}t.SvgVexFlowBackend=h},9479:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowMusicSheetDrawer=t.unitInPixels=void 0;const s=i(n(3206)),r=n(1932),a=n(200),o=n(9409),l=n(7785),c=n(2683),h=n(6362),u=n(3361),d=n(5023),f=i(n(3065)),p=n(1066),m=n(3661),g=n(5824),b=n(9436);t.unitInPixels=10;class v extends r.MusicSheetDrawer{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new m.DrawingParameters;super(new l.VexFlowTextMeasurer(e.Rules),e),this.backends=[],this.zoom=1,this.pageIdx=0}get Backends(){return this.backends}drawSheet(e){var n,i,r;"gonville"===this.rules.DefaultVexFlowNoteFont&&(s.default.Flow.DEFAULT_FONT_STACK=[null===(n=s.default.Flow.Fonts)||void 0===n?void 0:n.Gonville,null===(i=s.default.Flow.Fonts)||void 0===i?void 0:i.Bravura,null===(r=s.default.Flow.Fonts)||void 0===r?void 0:r.Custom]),s.default.Flow.STAVE_LINE_THICKNESS=this.rules.StaffLineWidth*t.unitInPixels,s.default.Flow.STEM_WIDTH=this.rules.StemWidth*t.unitInPixels,s.default.Flow.DEFAULT_NOTATION_FONT_SCALE=this.rules.VexFlowDefaultNotationFontScale,s.default.Flow.DEFAULT_TAB_FONT_SCALE=this.rules.VexFlowDefaultTabFontScale,this.pageIdx=0;for(const t of e.MusicPages){if(t.PageNumber>this.rules.MaxPageToDrawNumber)break;const e=this.backends[this.pageIdx];e.graphicalMusicPage=t,e.scale(this.zoom),this.pageIdx+=1}this.pageIdx=0,this.backend=this.backends[0],super.drawSheet(e)}drawPage(e){e&&(this.backend=this.backends[e.PageNumber-1],super.drawPage(e),this.pageIdx+=1)}clear(){for(const e of this.backends)e.clear()}setZoom(e){this.zoom=e}calculatePixelDistance(e){return e*t.unitInPixels}drawStaffLine(e){var t,n,i;const s=this.backend.getContext(),r=s.openGroup();r&&(r.classList.add("staffline"),e.ParentStaff&&(r.id="".concat(null===(t=e.ParentStaff.ParentInstrument)||void 0===t?void 0:t.Name).concat(null===(n=e.ParentStaff.ParentInstrument)||void 0===n?void 0:n.Id,"-").concat(null===(i=e.ParentStaff)||void 0===i?void 0:i.Id))),super.drawStaffLine(e);const a=e.PositionAndShape.AbsolutePosition;this.rules.RenderSlurs&&this.drawSlurs(e,a),this.rules.RenderGlissandi&&this.drawGlissandi(e,a),s.closeGroup()}drawSlurs(e,t){for(const n of e.GraphicalSlurs)n.slur.isCrossed()||this.drawSlur(n,t)}drawGlissandi(e,t){for(const n of e.GraphicalGlissandi)this.drawGlissando(n,t)}drawGlissando(e,t){if(e.StaffLine.ParentStaff.isTab||e.calculateLine(this.rules),e.Line){const n=new o.PointF2D(e.Line.Start.x+t.x,e.Line.Start.y),i=new o.PointF2D(e.Line.End.x+t.x,e.Line.End.y);e.Line.SVGElement=this.drawLine(n,i,e.Color,e.Width)}else{const t=e.vfTie;if(t){const e=this.backend.getContext();t.setContext(e),t.draw()}}}drawSlur(e,t){const n=[],i=new o.PointF2D(e.bezierStartPt.x+t.x,e.bezierStartPt.y+t.y),s=new o.PointF2D(e.bezierStartControlPt.x+t.x,e.bezierStartControlPt.y+t.y),r=new o.PointF2D(e.bezierEndControlPt.x+t.x,e.bezierEndControlPt.y+t.y),a=new o.PointF2D(e.bezierEndPt.x+t.x,e.bezierEndPt.y+t.y);n.push(this.applyScreenTransformation(i)),n.push(this.applyScreenTransformation(s)),n.push(this.applyScreenTransformation(r)),n.push(this.applyScreenTransformation(a)),e.placement===h.PlacementEnum.Above?(i.y-=.05,s.y-=.3,r.y-=.3,a.y-=.05):(i.y+=.05,s.y+=.3,r.y+=.3,a.y+=.05),n.push(this.applyScreenTransformation(i)),n.push(this.applyScreenTransformation(s)),n.push(this.applyScreenTransformation(r)),n.push(this.applyScreenTransformation(a));const l=this.rules.GNote(e.slur.StartNote);e.SVGElement=this.backend.renderCurve(n,!0,l)}drawMeasure(e){e.setAbsoluteCoordinates(e.PositionAndShape.AbsolutePosition.x*t.unitInPixels,e.PositionAndShape.AbsolutePosition.y*t.unitInPixels);try{e.draw(this.backend.getContext())}catch(e){f.default.warn("VexFlowMusicSheetDrawer.drawMeasure",e)}let n=0;for(const t of e.staffEntries)this.drawStaffEntry(t),n=this.drawBuzzRolls(t,n)}drawBuzzRolls(e,t){for(const s of e.graphicalVoiceEntries)for(const e of s.notes){var n;if(null!==(n=e.sourceNote.TremoloInfo)&&void 0!==n&&n.tremoloUnmeasured){var i;const n=this.rules.TremoloBuzzRollThickness,s=.9,r=.5,a=e;let l,c;const h=a.vfnote[0].getStemDirection();let u;if(this.backend instanceof b.SvgVexFlowBackend&&(u=a.getStemSVG()),void 0!==(null===(i=u)||void 0===i?void 0:i.getBbox)){const e=u.getBBox();l=new o.PointF2D(e.x/10,e.y/10),c=e.height/10}else c=a.vfnote[0].getStemLength()/10,l=new o.PointF2D(a.vfnote[0].getStem().x_begin/10,a.vfnote[0].getStem().y_top/10),1===h&&(l.y-=c);let d=l.y+c/3;a.vfnote[0].getBeamCount()>1&&(d=l.y+c/2,-1===h&&(d-=r+.2));const f=l.x-.5,p=d,m=[],g=[new o.PointF2D(0,-n),new o.PointF2D(s-n,0),new o.PointF2D(-s+n,-r),new o.PointF2D(0,-n),new o.PointF2D(s,0),new o.PointF2D(0,n),new o.PointF2D(-s+n,0),new o.PointF2D(s-n,r),new o.PointF2D(0,n),new o.PointF2D(-s,0)];let v=new o.PointF2D(f,p);m.push(v);for(const e of g)v=m.last(),m.push(new o.PointF2D(v.x+e.x,v.y-e.y));this.DrawPath(m,a.ParentMusicPage,!0,"buzzRoll".concat(t)),t++}}return t}drawLine(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000000FF",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2;return e=this.applyScreenTransformation(e),n=this.applyScreenTransformation(n),this.backend.renderLine(e,n,i,s*t.unitInPixels)}DrawOverlayLine(e,n,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FF0000FF",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2,a=arguments.length>5?arguments[5]:void 0;if(!i.PageNumber||i.PageNumber>this.backends.length||i.PageNumber<1)return void console.log("VexFlowMusicSheetDrawer.drawOverlayLine: invalid page number / music page number doesn't correspond to an existing backend.");const o=i.PageNumber-1,l=this.backends[o];return e=this.applyScreenTransformation(e),n=this.applyScreenTransformation(n),a||(a="overlayLine ".concat(e.x,"/").concat(e.y)),l.renderLine(e,n,s,r*t.unitInPixels,a)}DrawPath(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;const s=t.PageNumber-1,r=this.backends[s],a=[];for(const o of e)a.push(this.applyScreenTransformation(o));return r.renderPath(a,n,i)}drawSkyLine(e){const t=e.PositionAndShape.AbsolutePosition,n=e.PositionAndShape.Size.width;this.drawSampledLine(e.SkyLine,t,n)}drawBottomLine(e){const t=new o.PointF2D(e.PositionAndShape.AbsolutePosition.x,e.PositionAndShape.AbsolutePosition.y),n=e.PositionAndShape.Size.width;this.drawSampledLine(e.BottomLine,t,n,"#0000FFFF")}drawSampledLine(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#FF0000FF";const s=[];let r=0;for(let o=0;o<e.length;o++)e[o]!==r&&(s.push(o),r=e[o]);const a=t;if(s.length>0){const t=this.rules.SamplingUnit;let r,l,c=new o.PointF2D(a.x,a.y),h=new o.PointF2D(s[0]/t+a.x,a.y);this.drawLine(c,h,i),e[0]>=0&&(r=new o.PointF2D(s[0]/t+a.x,a.y),l=new o.PointF2D(s[0]/t+a.x,a.y+e[s[0]]),this.drawLine(r,l,i));for(let n=1;n<s.length;n++)c=new o.PointF2D(s[n-1]/t+a.x,a.y+e[s[n-1]]),h=new o.PointF2D(s[n]/t+a.x,a.y+e[s[n-1]]),this.drawLine(c,h,i),r=new o.PointF2D(s[n]/t+a.x,a.y+e[s[n-1]]),l=new o.PointF2D(s[n]/t+a.x,a.y+e[s[n]]),this.drawLine(r,l,i);s[s.length-1]<e.length?(c=new o.PointF2D(s[s.length-1]/t+a.x,a.y+e[s[s.length-1]]),h=new o.PointF2D(a.x+n,a.y+e[s[s.length-1]]),this.drawLine(c,h,i)):(c=new o.PointF2D(s[s.length-1]/t+a.x,a.y),h=new o.PointF2D(a.x+n,a.y),this.drawLine(c,h,i))}else{const e=new o.PointF2D(a.x,a.y),t=new o.PointF2D(a.x+n,a.y);this.drawLine(e,t,i)}}drawStaffEntry(e){if(e.FingeringEntries.length>0)for(const t of e.FingeringEntries)t.SVGNode=this.drawLabel(t,c.GraphicalLayers.Notes);if(void 0!==e.graphicalChordContainers&&e.graphicalChordContainers.length>0)for(const t of e.graphicalChordContainers){const e=t.GraphicalLabel;e.SVGNode=this.drawLabel(e,c.GraphicalLayers.Notes)}this.rules.RenderLyrics&&e.LyricsEntries.length>0&&this.drawLyrics(e.LyricsEntries,c.GraphicalLayers.Notes)}drawLyrics(e,t){e.forEach((e=>{var n;const i=e.GraphicalLabel;i.Label.colorDefault=this.rules.DefaultColorLyrics,i.SVGNode=this.drawLabel(i,t),null===(n=i.SVGNode)||void 0===n||n.classList.add("lyrics")}))}drawInstrumentBrace(e,t){const n=this.backend.getContext();n.openGroup("brace"),e.draw(n),n.closeGroup()}drawGroupBracket(e,t){const n=this.backend.getContext();n.openGroup("bracket"),e.draw(n),n.closeGroup()}drawOctaveShifts(e){for(const t of e.OctaveShifts)if(t){const n=t,i=this.backend.getContext(),s=n.getTextBracket();this.rules.DefaultColorMusic&&(s.render_options.color=this.rules.DefaultColorMusic),s.setContext(i);try{s.draw()}catch(e){f.default.warn(e)}}}drawPedals(e){for(const t of e.Pedals)if(t){const e=t,n=this.backend.getContext(),i=e.getPedalMarking();i.render_options.color=this.rules.DefaultColorMusic,i.setContext(n),i.draw()}}drawExpressions(e){for(const n of e.AbstractExpressions)if(n instanceof d.GraphicalInstantaneousDynamicExpression)this.drawInstantaneousDynamic(n);else if(n instanceof u.GraphicalInstantaneousTempoExpression){var t;if((null===(t=n.SourceExpression.parentMeasure)||void 0===t?void 0:t.MeasureNumber)<=1&&!this.rules.RenderFirstTempoExpression)continue;const e=n.GraphicalLabel;e.SVGNode=this.drawLabel(e,c.GraphicalLayers.Notes)}else if(n instanceof p.GraphicalContinuousDynamicExpression)this.drawContinuousDynamic(n);else if(n instanceof g.GraphicalUnknownExpression){const e=n.Label;e.SVGNode=this.drawLabel(e,c.GraphicalLayers.Notes)}else f.default.warn("Unkown type of expression!")}drawInstantaneousDynamic(e){const t=e.Label;t.SVGNode=this.drawLabel(t,c.GraphicalLayers.Notes)}drawContinuousDynamic(e){if(e.IsVerbal){const t=e.Label;t.SVGNode=this.drawLabel(t,c.GraphicalLayers.Notes)}else for(const n of e.Lines){var t;const i=new o.PointF2D(e.ParentStaffLine.PositionAndShape.AbsolutePosition.x+n.Start.x,e.ParentStaffLine.PositionAndShape.AbsolutePosition.y+n.Start.y),s=new o.PointF2D(e.ParentStaffLine.PositionAndShape.AbsolutePosition.x+n.End.x,e.ParentStaffLine.PositionAndShape.AbsolutePosition.y+n.End.y);n.SVGElement=this.drawLine(i,s,null!==(t=n.colorHex)&&void 0!==t?t:"#000000",n.Width)}}renderLabel(e,n,i,s,r,a){if(!e.Label.print)return;const l=e.Label.fontHeight*t.unitInPixels,{font:c}=e.Label;let h;this.rules.ColoringEnabled&&(h=e.Label.colorDefault,e.ColorXML&&(h=e.ColorXML),h||(h=this.rules.DefaultColorLabel));let u,{fontStyle:d,fontFamily:f}=e.Label;d||(d=this.rules.DefaultFontStyle),f||(f=this.rules.DefaultFontFamily);for(let t=0;t<(null===(p=e.TextLines)||void 0===p?void 0:p.length);t++){var p;const n=e.TextLines[t],i=this.calculatePixelDistance(n.xOffset),s=new o.PointF2D(a.x+i,a.y),f=this.backend.renderText(l,d,c,n.text,r,s,h,e.Label.fontFamily);u?u.appendChild(f):u=f,a.y=a.y+r,e.TextLines.length>1&&(a.y+=this.rules.SpacingBetweenTextLines)}return u}renderRectangle(e,t,n,i,s){return this.backend.renderRectangle(e,n,i,s)}applyScreenTransformation(e){return new o.PointF2D(e.x*t.unitInPixels,e.y*t.unitInPixels)}applyScreenTransformationForRect(e){return new a.RectangleF2D(e.x*t.unitInPixels,e.y*t.unitInPixels,e.width*t.unitInPixels,e.height*t.unitInPixels)}}t.VexFlowMusicSheetDrawer=v},9490:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractGraphicalExpression=void 0;const i=n(7741),s=n(6438);class r extends i.GraphicalObject{constructor(e,t,n){super(),this.expression=t,this.parentMeasure=n,this.boundingBox=new s.BoundingBox(this,e.PositionAndShape),this.parentStaffLine=e,this.parentStaffLine.AbstractExpressions.push(this),this.rules=e.ParentMusicSystem.rules}get Label(){return this.label}get ParentStaffLine(){return this.parentStaffLine}get SourceExpression(){return this.expression}get Placement(){return this.expression.Placement}}t.AbstractGraphicalExpression=r},9536:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ChordSymbolReader=void 0;const s=n(9719),r=n(8233),a=n(9767),o=i(n(3065)),l=n(6362);class c{static readChordSymbol(e,t,n){const i=e.element("root"),h=e.element("kind"),u=e.element("numeral"),d=h.attribute("text");if(!i&&!u)return;let f;const p=e.element("bass");if(p){const n=p.element("bass-step"),i=p.element("bass-alter");let s=r.NoteEnum.C;if(n)try{s=r.NoteEnum[n.value.trim()]}catch(e){const n=a.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return t.SheetErrors.pushMeasureError(n),void o.default.debug("InstrumentReader.readChordSymbol",n,e)}let l=r.AccidentalEnum.NONE;if(i)try{l=r.Pitch.AccidentalFromHalfTones(parseInt(i.value,10))}catch(e){const n=a.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");t.SheetErrors.pushMeasureError(n),o.default.debug("InstrumentReader.readChordSymbol",n,e)}f=new r.Pitch(s,1,l)}const m=[],g=e.elements("degree");for(const l of g)if(l){const n=l.element("degree-value"),i=l.element("degree-alter"),c=l.element("degree-type");if(!n||!i||!c)return;let h,u,d;try{h=parseInt(n.value.trim(),10)}catch(e){const n=a.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return t.SheetErrors.pushMeasureError(n),void o.default.debug("InstrumentReader.readChordSymbol",n,e)}try{u=r.Pitch.AccidentalFromHalfTones(parseInt(i.value,10))}catch(e){const n=a.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return t.SheetErrors.pushMeasureError(n),void o.default.debug("InstrumentReader.readChordSymbol",n,e)}try{d=s.ChordDegreeText[c.value.trim().toLowerCase()]}catch(e){const n=a.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return t.SheetErrors.pushMeasureError(n),void o.default.debug("InstrumentReader.readChordSymbol",n,e)}m.push(new s.Degree(h,u,d))}let b=c.readPlacement(e);if(b!==l.PlacementEnum.Below&&(b=l.PlacementEnum.Above),u){var v;const e=u.element("numeral-root"),n=null===e||void 0===e||null===(v=e.attribute("text"))||void 0===v?void 0:v.value,i=null!==n&&void 0!==n?n:null===e||void 0===e?void 0:e.value,r=new s.ChordSymbolContainer(void 0,s.ChordSymbolEnum.none,f,m,t.Rules,b);return r.NumeralText=i,r}const y=i.element("root-step"),x=i.element("root-alter");if(i&&!y)return;let S;try{S=r.NoteEnum[y.value.trim()]}catch(e){const n=a.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return t.SheetErrors.pushMeasureError(n),void o.default.debug("InstrumentReader.readChordSymbol",n,e)}let w=r.AccidentalEnum.NONE;if(x)try{w=r.Pitch.AccidentalFromHalfTones(parseInt(x.value,10))}catch(e){const n=a.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");t.SheetErrors.pushMeasureError(n),o.default.debug("InstrumentReader.readChordSymbol",n,e)}const E=new r.Pitch(S,1,w);let _,T=h.value.trim().replace("-","");if(d)switch(d.value){case"aug":T="augmented";break;case"dim":T="diminished"}try{_=s.ChordSymbolEnum[T]}catch(e){const n=a.ITextTranslation.translateText("ReaderErrorMessages/ChordSymbolError","Invalid chord symbol");return t.SheetErrors.pushMeasureError(n),void o.default.debug("InstrumentReader.readChordSymbol",n,e)}return new s.ChordSymbolContainer(E,_,f,m,t.Rules,b)}static readPlacement(e){var t;const n=null===(t=e.attribute("placement"))||void 0===t?void 0:t.value;return"above"===n?l.PlacementEnum.Above:"below"===n?l.PlacementEnum.Below:l.PlacementEnum.NotYetDefined}}t.ChordSymbolReader=c},9635:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VexFlowGraphicalNote=void 0;const i=n(3430),s=n(6014),r=n(437),a=n(3849);class o extends i.GraphicalNote{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r.OctaveEnum.NONE;if(super(e,t,arguments.length>4?arguments[4]:void 0,arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0),this.clef=n,this.octaveShift=i,e.Pitch){const t=e.isRest()?e.Pitch:r.OctaveShift.getPitchFromOctaveShift(e.Pitch,i);this.vfpitch=s.VexFlowConverter.pitch(t,e.isRest(),this.clef,this.sourceNote.Notehead),this.vfpitch[1]=void 0}}setAccidental(e){const t=this.drawPitch(e);this.vfpitch=s.VexFlowConverter.pitch(t,this.sourceNote.isRest(),this.clef,this.sourceNote.Notehead),this.DrawnAccidental=t.Accidental}drawPitch(e){return r.OctaveShift.getPitchFromOctaveShift(e,this.octaveShift)}Transpose(e,t,n,i){const a=super.Transpose(e,t,n,i),o=r.OctaveShift.getPitchFromOctaveShift(a,this.octaveShift);return this.vfpitch=s.VexFlowConverter.pitch(o,this.sourceNote.isRest(),this.clef,this.sourceNote.Notehead),this.vfpitch[1]=void 0,o}setIndex(e,t){this.vfnote=[e,t],this.vfnoteIndex=t}notehead(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e||(e=this.vfnote[0]);const t=e.note_heads;return t&&t.length>this.vfnoteIndex&&t[this.vfnoteIndex]?e.note_heads[this.vfnoteIndex]:{line:0}}Clef(){return this.clef}getSVGId(){if(this.vfnote)return this.vfnote[0].getAttribute("id")}setVisible(e){var t,n,i,s,r,a,o,l;let c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const h=null===(t=c.applyToBeams)||void 0===t||t,u=null===(n=c.applyToLedgerLines)||void 0===n||n,d=null===(i=c.applyToNotehead)||void 0===i||i,f=null===(s=c.applyToSlurs)||void 0===s||s,p=null===(r=c.applyToStem)||void 0===r||r,m=null===(a=c.applyToTies)||void 0===a||a,g="visibility",b=e?"visible":"hidden";if(d&&null!==(o=this.getSVGGElement())&&void 0!==o&&o.setAttribute(g,b),p&&null!==(l=this.getStemSVG())&&void 0!==l&&l.setAttribute(g,b),h)for(const v of this.getBeamSVGs())null===v||void 0===v||v.setAttribute(g,b);if(u)for(const v of this.getLedgerLineSVGs())null===v||void 0===v||v.setAttribute(g,b);if(m)for(const v of this.getTieSVGs())null===v||void 0===v||v.setAttribute(g,b);if(f)for(const v of this.getSlurSVGs())null===v||void 0===v||v.setAttribute(g,b)}getSVGGElement(){if(this.vfnote)return this.vfnote[0].getAttribute("el")}getStemSVG(){const e=document.getElementById("vf-"+this.getSVGId()+"-stem");return(null===e||void 0===e?void 0:e.children.length)>0?e.children[0]:e}getBeamSVGs(){const e=[];for(let t=0;;t++){const n=document.getElementById("vf-".concat(this.getSVGId(),"-beam").concat(t));if(!n)break;e.push(n)}return e}getLedgerLineSVGs(){const e=[],t="vf-".concat(this.getSVGId(),"ledgers"),n=document.getElementById(t);if(!n)return[];for(const i of n.childNodes)e.push(i);return e}getTieSVGs(){const e=[],t=document.querySelectorAll("[id='vf-".concat(this.getSVGId(),"-tie']"));for(const n of t)e.push(n);return e}getSlurSVGs(){const e=[],t=document.querySelectorAll("[id='vf-".concat(this.getSVGId(),"-slur']"));for(const n of t)e.push(n);return e}getNoteheadSVGs(){var e;const t=this.getVFNoteSVG(),n=[];if(null!==t&&void 0!==t&&null!==(e=t.children)&&void 0!==e&&e.length)for(const i of t.children)i.classList.contains("vf-notehead")&&n.push(i);return n}getFlagSVG(){var e;const t=this.getVFNoteSVG();if(null!==t&&void 0!==t&&null!==(e=t.children)&&void 0!==e&&e.length)for(const n of t.children)if(n.classList.contains("vf-flag"))return n}getVFNoteSVG(){if(this.parentVoiceEntry.parentStaffEntry.parentMeasure.isMultiRestMeasure())return this.parentVoiceEntry.parentStaffEntry.parentMeasure.multiRestElement;const e=this.getSVGGElement();for(const t of null===e||void 0===e?void 0:e.children)if(t.classList.contains("vf-note"))return t}getModifierSVGs(){var e;const t=this.getSVGGElement(),n=[];if(null!==t&&void 0!==t&&null!==(e=t.children)&&void 0!==e&&e.length)for(const i of null===t||void 0===t?void 0:t.children)i.classList.contains("vf-modifiers")&&n.push(i);return n}setColor(e){var t,n,i,s,r,o,l,c,h,u,d,f;let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const m=null!==(t=p.applyToBeams)&&void 0!==t&&t,g=null===(n=p.applyToFlag)||void 0===n||n,b=null!==(i=p.applyToLedgerLines)&&void 0!==i&&i,v=null!==(s=p.applyToLyrics)&&void 0!==s&&s,y=null===(r=p.applyToModifiers)||void 0===r||r,x=null===(o=p.applyToNoteheads)||void 0===o||o,S=null!==(l=p.applyToSlurs)&&void 0!==l&&l,w=null===(c=p.applyToStem)||void 0===c||c,E=null!==(h=p.applyToTies)&&void 0!==h&&h,_=null===(u=p.applyToMultiRestMeasure)||void 0===u||u,T=null===(d=p.applyToMultiRestMeasureNumber)||void 0===d||d,M=null===(f=p.applyToMultiRestMeasureRestBar)||void 0===f||f;if(m){const t=this.getBeamSVGs();for(const n of t)for(const t of n.children)t.setAttribute("fill",e)}if(g){const t=this.getFlagSVG();if(t)for(const n of t.children)n.setAttribute("fill",e)}if(b){const t=this.getLedgerLineSVGs();for(const n of t)n.setAttribute("stroke",e)}if(v){const t=this.getLyricsSVGs();for(const n of t)for(const t of n.children)t.setAttribute("stroke",e),t.setAttribute("fill",e)}if(_&&this.parentVoiceEntry.parentStaffEntry.parentMeasure instanceof a.VexFlowMultiRestMeasure){var C;const t=this.parentVoiceEntry.parentStaffEntry.parentMeasure.multiRestElementSVG;if(null!==t&&void 0!==t&&null!==(C=t.children)&&void 0!==C&&C.length)for(const n of t.children){var A;if(null!==(A=n.children)&&void 0!==A&&A.length){if(T)for(const t of n.children)t.setAttribute("fill",e)}else M&&n.setAttribute("fill",e)}}if(y){const t=this.getModifierSVGs();for(const n of t)for(const t of n.children)t.setAttribute("fill",e)}if(x){const t=this.getNoteheadSVGs();for(const n of t)for(const t of n.children)t.setAttribute("fill",e)}if(S){const t=this.getSlurSVGs();for(const n of t)for(const t of n.children)t.setAttribute("fill",e)}if(w){const t=this.getStemSVG();t&&t.setAttribute("stroke",e)}if(E){const t=this.getTieSVGs();for(const n of t)for(const t of n.children)t.setAttribute("fill",e)}}}t.VexFlowGraphicalNote=o},9647:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TabNote=void 0;const i=n(1850);class s extends i.Note{constructor(e,t,n,i,s,r,a,o,l){super(e,t,n,i,s),this.stringNumberTab=r,this.fretNumber=a,this.bendArray=o,this.vibratoStroke=l}get StringNumberTab(){return this.stringNumberTab}get FretNumber(){return this.fretNumber}get BendArray(){return this.bendArray}get VibratoStroke(){return this.vibratoStroke}hasTabEffects(){var e;return(null===(e=this.bendArray)||void 0===e?void 0:e.length)>0||this.vibratoStroke}}t.TabNote=s},9713:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PageFormat=t.EngravingRules=void 0;const s=n(1888),r=i(n(3065)),a=n(7533),o=n(6362),l=n(624),c=n(4434),h=n(3263),u=n(2257),d=n(8233),f=n(9719),p=n(3430);class m{constructor(){this.NoteDistances=[1,1,1.3,1.6,2,2.5,3,4],this.NoteDistancesScalingFactors=[1,2,4,8,16,32,64,128],this.DurationDistanceDict={},this.DurationScalingDistanceDict={},this.NoteToGraphicalNoteMapObjectCount=0,this.RenderCount=0,this.loadDefaultValues()}loadDefaultValues(){this.SamplingUnit=3*m.unit,this.SheetTitleHeight=4,this.SheetSubtitleHeight=2,this.SheetMinimumDistanceBetweenTitleAndSubtitle=1,this.SheetComposerHeight=2,this.SheetAuthorHeight=2,this.SheetCopyrightHeight=1.5,this.SheetCopyrightMargin=2,this.SheetComposerSubtitleUseLegacyParsing=!1,this.CompactMode=!1,this.PagePlacementEnum=s.PagePlacementEnum.Down,this.PageHeight=100001,this.PageTopMargin=5,this.PageTopMarginNarrow=0,this.PageBottomMargin=5,this.PageLeftMargin=5,this.PageRightMargin=5,this.TitleTopDistance=5,this.TitleBottomDistance=1,this.StaffDistance=7,this.BetweenStaffDistance=5,this.MinimumStaffLineDistance=4,this.MinSkyBottomDistBetweenStaves=1,this.StaffHeight=4,this.TabStaffInterlineHeight=1.1111,this.TabStaffInterlineHeightForBboxes=1.3,this.BetweenStaffLinesDistance=m.unit,this.SystemLeftMargin=0,this.SystemRightMargin=0,this.SystemLabelsRightMargin=2,this.SystemComposerDistance=2,this.SystemLyricistDistance=2,this.InstrumentLabelTextHeight=2,this.MinimumDistanceBetweenSystems=7,this.MinSkyBottomDistBetweenSystems=5,this.LastSystemMaxScalingFactor=1.4,this.AutoBeamNotes=!1,this.AutoBeamOptions={beam_middle_rests_only:!1,beam_rests:!1,maintain_stem_directions:!1},this.AutoBeamTabs=!1,this.BeamWidth=m.unit/2,this.BeamSpaceWidth=m.unit/3,this.BeamForwardLength=1.25*m.unit,this.FlatBeams=!1,this.FlatBeamOffset=20,this.FlatBeamOffsetPerBeam=10,this.ClefLeftMargin=.5,this.ClefRightMargin=.75,this.PercussionOneLineCutoff=3,this.PercussionForceVoicesOneLineCutoff=1,this.PercussionUseXMLDisplayStep=!0,this.PercussionXMLDisplayStepNoteValueShift=0,this.PercussionOneLineXMLDisplayStepOctaveOffset=0,this.PercussionUseCajon2NoteSystem=!1,this.BetweenKeySymbolsDistance=.2,this.KeyRightMargin=.75,this.RhythmRightMargin=1.25,this.ShowRhythmAgainAfterPartEndOrFinalBarline=!0,this.NewPartAndSystemAfterFinalBarline=!1,this.InStaffClefScalingFactor=.8,this.DistanceBetweenNaturalAndSymbolWhenCancelling=.4,this.NoteHelperLinesOffset=.25,this.MeasureLeftMargin=.7,this.MeasureRightMargin=0,this.DistanceBetweenLastInstructionAndRepetitionBarline=1,this.ArpeggioDistance=.6,this.StaccatoShorteningFactor=2,this.IdealStemLength=3,this.StemNoteHeadBorderYOffset=.2,this.StemMargin=.2,this.StemMinLength=2.5,this.StemMaxLength=4.5,this.BeamSlopeMaxAngle=10,this.StemMinAllowedDistanceBetweenNoteHeadAndBeamLine=1,this.SetWantedStemDirectionByXml=!0,this.GraceNoteScalingFactor=.6,this.GraceNoteXOffset=.2,this.GraceNoteGroupXMargin=0,this.WedgeOpeningLength=1.2,this.WedgeMeasureEndOpeningLength=.75,this.WedgeMeasureBeginOpeningLength=.75,this.WedgePlacementAboveY=-1.5,this.WedgePlacementBelowY=1.5,this.WedgeHorizontalMargin=.6,this.WedgeVerticalMargin=.5,this.DistanceOffsetBetweenTwoHorizontallyCrossedWedges=.3,this.WedgeMinLength=2,this.WedgeEndDistanceBetweenTimestampsFactor=1.75,this.ArticulationAboveNoteForStemUp=!1,this.SoftAccentWedgePadding=.4,this.SoftAccentSizeFactor=.6,this.DistanceBetweenAdjacentDynamics=.75,this.TempoChangeMeasureValidity=4,this.TempoContinousFactor=.7,this.StaccatoScalingFactor=.8,this.BetweenDotsDistance=.8,this.OrnamentAccidentalScalingFactor=.65,this.ChordSymbolTextHeight=2,this.ChordSymbolTextAlignmentTop=a.TextAlignmentEnum.LeftBottom,this.ChordSymbolTextAlignmentBottom=a.TextAlignmentEnum.LeftTop,this.ChordSymbolBottomMargin=.6,this.ChordSymbolRelativeXOffset=-1,this.ChordSymbolExtraXShiftForShortChordSymbols=.3,this.ChordSymbolExtraXShiftWidthThreshold=2,this.ChordSymbolXSpacing=1,this.ChordOverlapAllowedIntoNextMeasure=0,this.ChordSymbolYOffset=.1,this.ChordSymbolYPadding=0,this.ChordSymbolYAlignment=!0,this.ChordSymbolYAlignmentScope="staffline",this.ChordSymbolWholeMeasureRestXOffset=0,this.ChordSymbolWholeMeasureRestXOffsetMeasure1=-2,this.ChordAccidentalTexts=new h.Dictionary,this.resetChordAccidentalTexts(this.ChordAccidentalTexts,!1),this.ChordSymbolLabelTexts=new h.Dictionary,this.resetChordSymbolLabelTexts(this.ChordSymbolLabelTexts),this.CustomChords=[],this.resetChordNames(),this.RepetitionSymbolsYOffset=0,this.RepetitionEndInstructionXShiftAsPercentOfStaveWidth=.4,this.RehearsalMarkXOffsetDefault=10,this.RehearsalMarkXOffset=0,this.RehearsalMarkXOffsetSystemStartMeasure=-20,this.RehearsalMarkYOffsetDefault=-15,this.RehearsalMarkYOffsetAddedForRehearsalMarks=-12,this.RehearsalMarkYOffset=0,this.RehearsalMarkFontSize=10,this.MeasureNumberLabelHeight=1.5*m.unit,this.MeasureNumberLabelOffset=2,this.MeasureNumberLabelXOffset=-.5,this.TupletsRatioed=!1,this.TupletsRatioedUseXMLValue=!0,this.TupletsBracketed=!1,this.TripletsBracketed=!1,this.TupletsBracketedUseXMLValue=!0,this.TupletNumberLabelHeight=1.5*m.unit,this.TupletNumberYOffset=.5,this.TupletNumberLimitConsecutiveRepetitions=!0,this.TupletNumberMaxConsecutiveRepetitions=2,this.TupletNumberAlwaysDisableAfterFirstMax=!0,this.TupletNumberUseShowNoneXMLValue=!0,this.LabelMarginBorderFactor=.1,this.TupletVerticalLineLength=.5,this.TupletNumbersInTabs=!0,this.TabTupletYOffsetBottom=1,this.TabTupletYOffsetTop=-3.5,this.TabTupletYOffsetEffects=1.5,this.TabTupletsBracketed=!0,this.TabBeamsRendered=!0,this.TabKeySignatureRendered=!1,this.TabKeySignatureSpacingAdded=!0,this.TabTimeSignatureRendered=!1,this.TabTimeSignatureSpacingAdded=!0,this.TabFingeringsRendered=!1,this.TabUseXNoteheadShapeForTabNote=!0,this.TabUseXNoteheadAlternativeGlyph=!0,this.TabXNoteheadScale=.9,this.SlurPlacementFromXML=!0,this.SlurPlacementAtStems=!1,this.SlurPlacementUseSkyBottomLine=!1,this.BezierCurveStepSize=1e3,this.calculateCurveParametersArrays(),this.TieGhostObjectWidth=.75,this.TieYPositionOffsetFactor=.3,this.MinimumNeededXspaceForTieGhostObject=1,this.TieHeightMinimum=.28,this.TieHeightMaximum=1.2,this.TieHeightInterpolationK=.0288,this.TieHeightInterpolationD=.136,this.SlurNoteHeadYOffset=.5,this.SlurEndArticulationYOffset=.8,this.SlurStartArticulationYOffsetOfArticulation=.5,this.SlurStemXOffset=.3,this.SlurSlopeMaxAngle=15,this.SlurTangentMinAngle=30,this.SlurTangentMaxAngle=80,this.SlurHeightFactor=1,this.SlurHeightFlattenLongSlursFactorByWidth=.24,this.SlurHeightFlattenLongSlursFactorByAngle=.36,this.SlurHeightFlattenLongSlursCutoffAngle=47,this.SlurHeightFlattenLongSlursCutoffWidth=16,this.SlursStartingAtSameStaffEntryYOffset=.8,this.SlurMaximumYControlPointDistance=void 0,this.GlissandoNoteOffset=.5,this.GlissandoStafflineStartMinimumWidth=1,this.GlissandoStafflineStartYDistanceToNote=.8,this.GlissandoStafflineEndOffset=1,this.GlissandoDefaultWidth=.1,this.RepetitionAllowFirstMeasureBeginningRepeatBarline=!0,this.RepetitionEndingLabelHeight=2,this.RepetitionEndingLabelXOffset=.5,this.RepetitionEndingLabelYOffset=.3,this.RepetitionEndingLineYLowerOffset=.5,this.RepetitionEndingLineYUpperOffset=.3,this.VoltaOffset=2.5,this.LyricsAlignmentStandard=a.TextAlignmentEnum.LeftBottom,this.LyricsHeight=2,this.LyricsYOffsetToStaffHeight=0,this.LyricsYMarginToBottomLine=.2,this.LyricsExtraXShiftForShortLyrics=.5,this.LyricsExtraXShiftForShortLyricsWidthThreshold=1.4,this.LyricsUseXPaddingForLongLyrics=!0,this.LyricsXPaddingFactorForLongLyrics=1,this.LyricsXPaddingWidthThreshold=1.7,this.LyricsXPaddingReductionForLongNotes=.7,this.LyricsXPaddingReductionForLastNoteInMeasure=1.2,this.LyricsXPaddingForLastNoteInMeasure=!0,this.VerticalBetweenLyricsDistance=.5,this.HorizontalBetweenLyricsDistance=.2,this.BetweenSyllableMaximumDistance=10,this.BetweenSyllableMinimumDistance=.5,this.LyricOverlapAllowedIntoNextMeasure=3.4,this.MinimumDistanceBetweenDashes=10,this.MaximumLyricsElongationFactor=2.5,this.TempoYSpacing=.5,this.InstantaneousTempoTextHeight=2.3,this.ContinuousDynamicTextHeight=2.3,this.UseEndOffsetForExpressions=!0,this.MoodTextHeight=2.3,this.UnknownTextHeight=2,this.ContinuousTempoTextHeight=2.3,this.DynamicExpressionMaxDistance=2,this.DynamicExpressionSpacer=.5,this.IgnoreRepeatedDynamics=!1,this.ExpressionsUseXMLColor=!0,this.VexFlowDefaultNotationFontScale=39,this.VexFlowDefaultTabFontScale=39,this.TremoloStrokeScale=1,this.TremoloYSpacingScale=1,this.TremoloBuzzRollThickness=.25,this.StemWidth=.15,this.StaffLineWidth=.1,this.StaffLineColor=void 0,this.LedgerLineWidth=1,this.LedgerLineStrokeStyle=void 0,this.LedgerLineColorDefault="#000000",this.WedgeLineWidth=.12,this.TupletLineWidth=.12,this.LyricUnderscoreLineWidth=.12,this.SystemThinLineWidth=.12,this.SystemBoldLineWidth=m.unit/2,this.SystemRepetitionEndingLineWidth=.12,this.SystemDotWidth=m.unit/2,this.DistanceBetweenVerticalSystemLines=.35,this.DistanceBetweenDotAndLine=.7,this.RepeatEndStartPadding=2,this.OctaveShiftLineWidth=.12,this.OctaveShiftVerticalLineLength=m.unit,this.OctaveShiftOnWholeMeasureNoteUntilEndOfMeasure=!1,this.GraceLineWidth=this.StaffLineWidth*this.GraceNoteScalingFactor,this.MultipleRestMeasureDefaultWidth=4,this.MultipleRestMeasureAddKeySignature=!0,this.FixedMeasureWidth=!1,this.FixedMeasureWidthFixedValue=void 0,this.FixedMeasureWidthUseForPickupMeasures=!1,this.MinimumCrossedBeamDifferenceMargin=1e-4,this.SheetMaximumWidth=32767,this.VoiceSpacingMultiplierVexflow=.85,this.VoiceSpacingAddendVexflow=3,this.PickupMeasureWidthMultiplier=1,this.PickupMeasureRepetitionSpacing=.8,this.PickupMeasureSpacingSingleNoteAddend=1.6,this.DisplacedNoteMargin=.1,this.MinNoteDistance=2,this.SubMeasureXSpacingThreshold=35,this.MeasureDynamicsMaxScalingFactor=2.5,this.WholeRestXShiftVexflow=-1.5,this.MetronomeMarksDrawn=!0,this.MetronomeMarkXShift=-6,this.MetronomeMarkYShift=-1,this.SoftmaxFactorVexFlow=15,this.StaggerSameWholeNotes=!0,this.AlignRests=l.AlignRestOption.Never,this.RestCollisionYPadding=0,this.FillEmptyMeasuresWithWholeRest=l.FillEmptyMeasuresWithWholeRests.No,this.ArpeggiosGoAcrossVoices=!1,this.RenderArpeggios=!0,this.RenderSlurs=!0,this.RenderGlissandi=!0,this.ColoringMode=c.ColoringModes.XML,this.ColoringEnabled=!0,this.ColorStemsLikeNoteheads=!1,this.ColorBeams=!0,this.ColorFlags=!0,this.applyDefaultColorMusic("#000000"),this.DefaultColorCursor="#33e02f",this.DefaultFontFamily="Times New Roman",this.DefaultFontStyle=u.FontStyles.Regular,this.DefaultVexFlowNoteFont="gonville",this.MaxMeasureToDrawIndex=Number.MAX_VALUE,this.MaxMeasureToDrawNumber=Number.MAX_VALUE,this.MinMeasureToDrawIndex=0,this.MinMeasureToDrawNumber=0,this.MaxSystemToDrawNumber=Number.MAX_VALUE,this.MaxPageToDrawNumber=Number.MAX_VALUE,this.RenderComposer=!0,this.RenderTitle=!0,this.RenderSubtitle=!0,this.RenderLyricist=!0,this.RenderCopyright=!1,this.RenderPartNames=!0,this.RenderPartAbbreviations=!0,this.RenderSystemLabelsAfterFirstPage=!0,this.RenderFingerings=!0,this.RenderMeasureNumbers=!0,this.RenderMeasureNumbersOnlyAtSystemStart=!1,this.UseXMLMeasureNumbers=!0,this.RenderLyrics=!0,this.RenderChordSymbols=!0,this.RenderMultipleRestMeasures=!0,this.AutoGenerateMultipleRestMeasuresFromRestMeasures=!0,this.RenderRehearsalMarks=!0,this.RenderClefsAtBeginningOfStaffline=!0,this.RenderKeySignatures=!0,this.RenderTimeSignatures=!0,this.RenderFirstTempoExpression=!0,this.RenderPedals=!0,this.ArticulationPlacementFromXML=!0,this.BreathMarkDistance=.8,this.FingeringPosition=o.PlacementEnum.AboveOrBelow,this.FingeringPositionFromXML=!0,this.FingeringPositionGrace=o.PlacementEnum.Left,this.FingeringInsideStafflines=!1,this.FingeringLabelFontHeight=1.7,this.FingeringOffsetX=0,this.FingeringOffsetY=0,this.FingeringPaddingY=-.2,this.FingeringTextSize=1.5,this.RenderStringNumbersClassical=!0,this.StringNumberOffsetY=0,this.NewSystemAtXMLNewSystemAttribute=!1,this.NewPageAtXMLNewPageAttribute=!1,this.NewSystemAtXMLNewPageAttribute=!1,this.RenderXMeasuresPerLineAkaSystem=0,this.RestoreCursorAfterRerender=!0,this.StretchLastSystemLine=!1,this.IgnoreBracketsWords=!0,this.PlaceWordsInsideStafflineFromXml=!1,this.PlaceWordsInsideStafflineYOffset=.9,this.PageFormat=g.UndefinedPageFormat,this.PageBackgroundColor=void 0,this.DarkModeEnabled=!1,this.UsePageBackgroundColorForTabNotes=!0,this.RenderSingleHorizontalStaffline=!1,this.SpacingBetweenTextLines=0,this.NoteToGraphicalNoteMap=new h.Dictionary,this.NoteToGraphicalNoteMapObjectCount=0,this.SkyBottomLineBatchMinMeasures=5,this.SkyBottomLineWebGLMinMeasures=80,this.AlwaysSetPreferredSkyBottomLineBackendAutomatically=!0,this.DisableWebGLInFirefox=!0,this.DisableWebGLInSafariAndIOS=!0,this.setPreferredSkyBottomLineBackendAutomatically();try{this.MaxInstructionsConstValue=this.ClefLeftMargin+this.ClefRightMargin+this.KeyRightMargin+this.RhythmRightMargin+11}catch(e){r.default.info("EngravingRules()",e)}}setPreferredSkyBottomLineBackendAutomatically(){var e,t,n,i;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r="",a="";"object"==typeof globalThis&&(r=null!==(e=null===(t=globalThis.navigator)||void 0===t?void 0:t.vendor)&&void 0!==e?e:"",a=null!==(n=null===(i=globalThis.navigator)||void 0===i?void 0:i.userAgent)&&void 0!==n?n:"");let o=!1;(this.DisableWebGLInSafariAndIOS&&/apple/i.test(r)||this.DisableWebGLInFirefox&&a.includes("Firefox"))&&(o=!0),this.PreferredSkyBottomLineBatchCalculatorBackend=l.SkyBottomLineBatchCalculatorBackendType.Plain,o||s>=this.SkyBottomLineWebGLMinMeasures&&(this.PreferredSkyBottomLineBatchCalculatorBackend=l.SkyBottomLineBatchCalculatorBackendType.WebGL)}applyDefaultColorMusic(e){this.DefaultColorMusic=e,this.DefaultColorNotehead=e,this.DefaultColorRest=e,this.DefaultColorStem=e,this.DefaultColorLabel=e,this.DefaultColorLyrics=e,this.DefaultColorTitle=e,this.LedgerLineColorDefault=e}addGraphicalNoteToNoteMap(e,t){e.NoteToGraphicalNoteObjectId=this.NoteToGraphicalNoteMapObjectCount,this.NoteToGraphicalNoteMap.setValue(e.NoteToGraphicalNoteObjectId,t),this.NoteToGraphicalNoteMapObjectCount++}GNote(e){return p.GraphicalNote.FromNote(e,this)}clearMusicSheetObjects(){this.NoteToGraphicalNoteMap=new h.Dictionary,this.NoteToGraphicalNoteMapObjectCount=0}resetChordAccidentalTexts(e,t){e.setValue(d.AccidentalEnum.SHARP,t?"\u266f":"#"),e.setValue(d.AccidentalEnum.FLAT,t?"\u266d":"b"),e.setValue(d.AccidentalEnum.DOUBLEFLAT,t?"\ud834\udd2b":"bb"),e.setValue(d.AccidentalEnum.DOUBLESHARP,t?"\ud834\udd2a":"x")}setChordSymbolLabelText(e,t){this.ChordSymbolLabelTexts.setValue(e,t)}resetChordSymbolLabelTexts(e){return e.setValue(f.ChordSymbolEnum.minor,"m"),e.setValue(f.ChordSymbolEnum.augmented,"aug"),e.setValue(f.ChordSymbolEnum.diminished,"dim"),e.setValue(f.ChordSymbolEnum.dominant,"7"),e.setValue(f.ChordSymbolEnum.majorseventh,"maj7"),e.setValue(f.ChordSymbolEnum.minorseventh,"m7"),e.setValue(f.ChordSymbolEnum.diminishedseventh,"dim7"),e.setValue(f.ChordSymbolEnum.augmentedseventh,"aug7"),e.setValue(f.ChordSymbolEnum.halfdiminished,"m7".concat(this.ChordAccidentalTexts.getValue(d.AccidentalEnum.FLAT),"5")),e.setValue(f.ChordSymbolEnum.majorminor,"m(maj7)"),e.setValue(f.ChordSymbolEnum.majorsixth,"maj6"),e.setValue(f.ChordSymbolEnum.minorsixth,"m6"),e.setValue(f.ChordSymbolEnum.dominantninth,"9"),e.setValue(f.ChordSymbolEnum.majorninth,"maj9"),e.setValue(f.ChordSymbolEnum.minorninth,"m9"),e.setValue(f.ChordSymbolEnum.dominant11th,"11"),e.setValue(f.ChordSymbolEnum.major11th,"maj11"),e.setValue(f.ChordSymbolEnum.minor11th,"m11"),e.setValue(f.ChordSymbolEnum.dominant13th,"13"),e.setValue(f.ChordSymbolEnum.major13th,"maj13"),e.setValue(f.ChordSymbolEnum.minor13th,"m13"),e.setValue(f.ChordSymbolEnum.suspendedsecond,"sus2"),e.setValue(f.ChordSymbolEnum.suspendedfourth,"sus4"),e.setValue(f.ChordSymbolEnum.power,"5"),e.setValue(f.ChordSymbolEnum.none,"N.C."),e}addChordName(e,t,n,i,s){if(void 0!==f.ChordSymbolEnum[t]){const r={adds:n,alts:i,subs:s};this.CustomChords.push(f.CustomChord.createCustomChord(e,f.ChordSymbolEnum[t],r))}}renameChord(e,t){f.CustomChord.renameCustomChord(e,t,this.CustomChords)}resetChordNames(){const e=this.ChordAccidentalTexts.getValue(d.AccidentalEnum.SHARP),t=this.ChordAccidentalTexts.getValue(d.AccidentalEnum.FLAT);this.addChordName("alt","major",["".concat(e,"5"),"".concat(t,"9"),"".concat(e,"9")],["".concat(t,"5")],[]),this.addChordName("7alt","dominant",["".concat(e,"5"),"".concat(t,"9"),"".concat(e,"9")],["".concat(t,"5")],[]),this.addChordName("7sus4","dominant",["4"],[],["3"]),this.addChordName("7sus4","suspendedfourth",["7"],[],[]),this.addChordName("9sus4","dominantninth",["4"],[],["3"]),this.addChordName("9sus4","suspendedfourth",["9"],[],[]),this.addChordName("11sus4","dominant11th",["4"],[],["3"]),this.addChordName("11sus4","suspendedfourth",["11"],[],[]),this.addChordName("13sus4","dominant13th",["4"],[],["3"]),this.addChordName("13sus4","suspendedfourth",["13"],[],[]),this.addChordName("7sus2","dominant",["2"],[],["3"]),this.addChordName("7sus2","suspendedsecond",["7"],[],[]),this.addChordName("m7".concat(t,"5"),"minorseventh",[],["".concat(t,"5")],[]),this.addChordName("9sus2","dominantninth",["2"],[],["3"]),this.addChordName("9sus2","suspendedsecond",["9"],[],[]),this.addChordName("11sus2","dominant11th",["2"],[],["3"]),this.addChordName("11sus2","suspendedsecond",["11"],[],[]),this.addChordName("13sus2","dominant13th",["2"],[],["3"]),this.addChordName("13sus2","suspendedsecond",["13"],[],[]),this.addChordName("m(maj9)","majorminor",["9"],[],[]),this.addChordName("m(maj11)","majorminor",["11"],[],[]),this.addChordName("m(maj13)","majorminor",["13"],[],[]),this.addChordName("69","majorsixth",["9"],[],[]),this.addChordName("mi69","minorsixth",["9"],[],[])}calculateCurveParametersArrays(){this.TPower3=new Array(this.BezierCurveStepSize),this.OneMinusTPower3=new Array(this.BezierCurveStepSize),this.FactorOne=new Array(this.BezierCurveStepSize),this.FactorTwo=new Array(this.BezierCurveStepSize);for(let e=0;e<this.BezierCurveStepSize;e++){const t=e/this.BezierCurveStepSize;this.TPower3[e]=Math.pow(t,3),this.OneMinusTPower3[e]=Math.pow(1-t,3),this.FactorOne[e]=3*Math.pow(1-t,2)*t,this.FactorTwo[e]=3*(1-t)*Math.pow(t,2)}}}t.EngravingRules=m,m.unit=1;class g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"noIdStringGiven";this.width=e,this.height=t,this.idString=n}get aspectRatio(){return this.IsUndefined?0:this.width/this.height}get IsUndefined(){return void 0===this.width||void 0===this.height||0===this.height||0===this.width}static get UndefinedPageFormat(){return new g(0,0)}Equals(e){return!!e&&e.width===this.width&&e.height===this.height}}t.PageFormat=g},9719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChordSymbolEnum=t.ChordDegreeText=t.CustomChord=t.Degree=t.ChordSymbolContainer=void 0;const i=n(8233),s=n(7921),r=n(8233),a=n(6362);t.ChordSymbolContainer=class{constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a.PlacementEnum.Above;this.rootPitch=e,this.chordKind=t,this.bassPitch=n,this.degrees=i,this.rules=s,this.Placement=r}get RootPitch(){return this.rootPitch}get ChordKind(){return this.chordKind}get BassPitch(){return this.bassPitch}get ChordDegrees(){return this.degrees}static calculateChordText(e,t,n){if(void 0!==e.NumeralText)return e.NumeralText;let a=e.RootPitch;if(s.MusicSheetCalculator.transposeCalculator&&(a=s.MusicSheetCalculator.transposeCalculator.transposePitch(e.RootPitch,n,t)),e.ChordKind===c.none)return e.getTextFromChordKindEnum(e.ChordKind);let o=i.Pitch.getNoteEnumString(a.FundamentalNote);a.Accidental!==r.AccidentalEnum.NONE&&(o+=e.getTextForAccidental(a.Accidental));const h={adds:[],alts:[],subs:[]};for(const i of e.ChordDegrees)if(i){let t="";switch(i.alteration!==r.AccidentalEnum.NONE&&(t+=e.getTextForAccidental(i.alteration)),t+=i.value,i.text){case l.add:h.adds.push(t);break;case l.alter:h.alts.push(t);break;case l.subtract:h.subs.push(t)}}let u=e.getTextFromChordKindEnum(e.ChordKind);const d=["adds","alts","subs"],f=e.rules.CustomChords;for(const i of f){if(i.chordKind!==e.chordKind)continue;let t=!0;for(const e of d){for(const n of i.degrees[e]||[])if(h[e].indexOf(n)<0){t=!1;break}if(!t)break}if(t){for(const e of d)for(const t of i.degrees[e]||[])h[e].splice(h[e].indexOf(t),1);u=i.alternateName}}if(o+=u,h.adds.length>0&&(o+="("+h.adds.join(",")+")"),h.alts.length>0&&(o+="(alt "+h.alts.join(",")+")"),h.subs.length>0&&(o+="(omit "+h.subs.join(",")+")"),e.BassPitch){let r=e.BassPitch;s.MusicSheetCalculator.transposeCalculator&&(r=s.MusicSheetCalculator.transposeCalculator.transposePitch(e.BassPitch,n,t)),o+="/",o+=i.Pitch.getNoteEnumString(r.FundamentalNote),o+=e.getTextForAccidental(r.Accidental)}return o}getTextForAccidental(e){const t=this.rules.ChordAccidentalTexts.getValue(e);return void 0!==t?t:""}getTextFromChordKindEnum(e){var t;return null!==(t=this.rules.ChordSymbolLabelTexts.getValue(e))&&void 0!==t?t:""}},t.Degree=class{constructor(e,t,n){this.value=e,this.alteration=t,this.text=n}};class o{constructor(e,t,n){this.alternateName=e,this.chordKind=t,this.degrees=n}static createCustomChord(e,t,n){return new o(e,t,n)}static renameCustomChord(e,t,n){for(const i of n)i.alternateName===e&&(i.alternateName=t)}}var l,c;t.CustomChord=o,function(e){e[e.add=0]="add",e[e.alter=1]="alter",e[e.subtract=2]="subtract"}(l||(t.ChordDegreeText=l={})),function(e){e[e.major=0]="major",e[e.minor=1]="minor",e[e.augmented=2]="augmented",e[e.diminished=3]="diminished",e[e.dominant=4]="dominant",e[e.majorseventh=5]="majorseventh",e[e.minorseventh=6]="minorseventh",e[e.diminishedseventh=7]="diminishedseventh",e[e.augmentedseventh=8]="augmentedseventh",e[e.halfdiminished=9]="halfdiminished",e[e.majorminor=10]="majorminor",e[e.majorsixth=11]="majorsixth",e[e.minorsixth=12]="minorsixth",e[e.dominantninth=13]="dominantninth",e[e.majorninth=14]="majorninth",e[e.minorninth=15]="minorninth",e[e.dominant11th=16]="dominant11th",e[e.major11th=17]="major11th",e[e.minor11th=18]="minor11th",e[e.dominant13th=19]="dominant13th",e[e.major13th=20]="major13th",e[e.minor13th=21]="minor13th",e[e.suspendedsecond=22]="suspendedsecond",e[e.suspendedfourth=23]="suspendedfourth",e[e.Neapolitan=24]="Neapolitan",e[e.Italian=25]="Italian",e[e.French=26]="French",e[e.German=27]="German",e[e.pedal=28]="pedal",e[e.power=29]="power",e[e.Tristan=30]="Tristan",e[e.none=31]="none"}(c||(t.ChordSymbolEnum=c={}))},9735:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,s)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||i(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),s(n(2561),t),s(n(6904),t),s(n(8786),t),s(n(8705),t),s(n(8233),t),s(n(9409),t),s(n(200),t),s(n(6864),t)},9760:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicalStaffEntryLink=void 0,t.GraphicalStaffEntryLink=class{constructor(e){this.graphicalLinkedStaffEntries=[],this.staffEntryLink=e,this.initialize()}get GetStaffEntryLink(){return this.staffEntryLink}get GraphicalLinkedStaffEntries(){return this.graphicalLinkedStaffEntries}set GraphicalLinkedStaffEntries(e){this.graphicalLinkedStaffEntries=e}isFilled(){for(let e=0;e<this.graphicalLinkedStaffEntries.length;e++)if(!this.graphicalLinkedStaffEntries[e])return!1;return!0}getLinkedStaffEntriesGraphicalNotes(e){if(-1!==this.graphicalLinkedStaffEntries.indexOf(e)){const e=[];for(let t=0,n=this.graphicalLinkedStaffEntries.length;t<n;++t){const n=this.graphicalLinkedStaffEntries[t];for(const t of n.graphicalVoiceEntries)for(const n of t.notes)n.sourceNote.ParentStaffEntry.Link&&n.sourceNote.ParentVoiceEntry===this.staffEntryLink.GetVoiceEntry&&e.push(n)}return e}}initialize(){for(let e=0,t=this.staffEntryLink.LinkStaffEntries.length;e<t;++e)this.graphicalLinkedStaffEntries.push(void 0)}}},9767:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITextTranslation=void 0,t.ITextTranslation=class{static translateText(e,t){if(!this.defaultTextTranslation)return t}}},9803:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MoodEnum=t.MoodExpression=void 0;const i=n(6362);class s extends i.AbstractExpression{constructor(e,t,n){super(t),this.label=e,this.staffNumber=n,this.setMoodType()}static isInputStringMood(e){return!!e&&(s.isStringInStringList(s.listMoodAffettuoso,e)||s.isStringInStringList(s.listMoodAgitato,e)||s.isStringInStringList(s.listMoodAnimato,e)||s.isStringInStringList(s.listMoodAppassionato,e)||s.isStringInStringList(s.listMoodBrillante,e)||s.isStringInStringList(s.listMoodCantabile,e)||s.isStringInStringList(s.listMoodDolce,e)||s.isStringInStringList(s.listMoodEnergico,e)||s.isStringInStringList(s.listMoodEroico,e)||s.isStringInStringList(s.listMoodEspressivo,e)||s.isStringInStringList(s.listMoodFurioso,e)||s.isStringInStringList(s.listMoodGiocoso,e)||s.isStringInStringList(s.listMoodGioioso,e)||s.isStringInStringList(s.listMoodGrandioso,e)||s.isStringInStringList(s.listMoodGrazioso,e)||s.isStringInStringList(s.listMoodLacrimoso,e)||s.isStringInStringList(s.listMoodLeggiero,e)||s.isStringInStringList(s.listMoodMaestoso,e)||s.isStringInStringList(s.listMoodMalinconico,e)||s.isStringInStringList(s.listMoodMarcato,e)||s.isStringInStringList(s.listMoodMarziale,e)||s.isStringInStringList(s.listMoodMesto,e)||s.isStringInStringList(s.listMoodMorendo,e)||s.isStringInStringList(s.listMoodNobilmente,e)||s.isStringInStringList(s.listMoodPatetico,e)||s.isStringInStringList(s.listMoodPesante,e)||s.isStringInStringList(s.listMoodSaltando,e)||s.isStringInStringList(s.listMoodSautille,e)||s.isStringInStringList(s.listMoodScherzando,e)||s.isStringInStringList(s.listMoodSostenuto,e)||s.isStringInStringList(s.listMoodSpiccato,e)||s.isStringInStringList(s.listMoodTenerezza,e)||s.isStringInStringList(s.listMoodTranquillamente,e)||s.isStringInStringList(s.listMoodTrionfante,e))}get Label(){return this.label}set Label(e){this.label=e}get Mood(){return this.moodType}set Mood(e){this.moodType=e}get StaffNumber(){return this.staffNumber}set StaffNumber(e){this.staffNumber=e}get Placement(){return this.placement}set Placement(e){this.placement=e}setMoodType(){s.isStringInStringList(s.listMoodAffettuoso,this.label)?this.moodType=r.Affettuoso:s.isStringInStringList(s.listMoodAgitato,this.label)?this.moodType=r.Agitato:s.isStringInStringList(s.listMoodAnimato,this.label)?this.moodType=r.Animato:s.isStringInStringList(s.listMoodAppassionato,this.label)?this.moodType=r.Appassionato:s.isStringInStringList(s.listMoodBrillante,this.label)?this.moodType=r.Brillante:s.isStringInStringList(s.listMoodCantabile,this.label)?this.moodType=r.Cantabile:s.isStringInStringList(s.listMoodDolce,this.label)?this.moodType=r.Dolce:s.isStringInStringList(s.listMoodEnergico,this.label)?this.moodType=r.Energico:s.isStringInStringList(s.listMoodEroico,this.label)?this.moodType=r.Eroico:s.isStringInStringList(s.listMoodEspressivo,this.label)?this.moodType=r.Espressivo:s.isStringInStringList(s.listMoodFurioso,this.label)?this.moodType=r.Furioso:s.isStringInStringList(s.listMoodGiocoso,this.label)?this.moodType=r.Giocoso:s.isStringInStringList(s.listMoodGioioso,this.label)?this.moodType=r.Gioioso:s.isStringInStringList(s.listMoodGrandioso,this.label)?this.moodType=r.Grandioso:s.isStringInStringList(s.listMoodGrazioso,this.label)?this.moodType=r.Grazioso:s.isStringInStringList(s.listMoodLacrimoso,this.label)?this.moodType=r.Lacrimoso:s.isStringInStringList(s.listMoodLeggiero,this.label)?this.moodType=r.Leggiero:s.isStringInStringList(s.listMoodMaestoso,this.label)?this.moodType=r.Maestoso:s.isStringInStringList(s.listMoodMalinconico,this.label)?this.moodType=r.Malinconico:s.isStringInStringList(s.listMoodMarcato,this.label)?this.moodType=r.Marcato:s.isStringInStringList(s.listMoodMarziale,this.label)?this.moodType=r.Marziale:s.isStringInStringList(s.listMoodMesto,this.label)?this.moodType=r.Mesto:s.isStringInStringList(s.listMoodMorendo,this.label)?this.moodType=r.Morendo:s.isStringInStringList(s.listMoodNobilmente,this.label)?this.moodType=r.Nobilmente:s.isStringInStringList(s.listMoodPatetico,this.label)?this.moodType=r.Patetico:s.isStringInStringList(s.listMoodPesante,this.label)?this.moodType=r.Pesante:s.isStringInStringList(s.listMoodSaltando,this.label)?this.moodType=r.Saltando:s.isStringInStringList(s.listMoodSautille,this.label)?this.moodType=r.Sautille:s.isStringInStringList(s.listMoodScherzando,this.label)?this.moodType=r.Scherzando:s.isStringInStringList(s.listMoodSostenuto,this.label)?this.moodType=r.Sostenuto:s.isStringInStringList(s.listMoodSpiccato,this.label)?this.moodType=r.Spiccato:s.isStringInStringList(s.listMoodTenerezza,this.label)?this.moodType=r.Tenerezza:s.isStringInStringList(s.listMoodTranquillamente,this.label)?this.moodType=r.Tranquillamente:s.isStringInStringList(s.listMoodTrionfante,this.label)&&(this.moodType=r.Trionfante)}}var r;t.MoodExpression=s,s.listMoodAffettuoso=["affettuoso"],s.listMoodAgitato=["agitato"],s.listMoodAppassionato=["appassionato"],s.listMoodAnimato=["animato","lively"],s.listMoodBrillante=["brillante"],s.listMoodCantabile=["cantabile"],s.listMoodDolce=["dolce"],s.listMoodEnergico=["energico"],s.listMoodEroico=["eroico"],s.listMoodEspressivo=["espressivo"],s.listMoodFurioso=["furioso"],s.listMoodGiocoso=["giocoso"],s.listMoodGioioso=["gioioso"],s.listMoodLacrimoso=["lacrimoso"],s.listMoodGrandioso=["grandioso"],s.listMoodGrazioso=["grazioso"],s.listMoodLeggiero=["leggiero"],s.listMoodMaestoso=["maestoso"],s.listMoodMalinconico=["malinconico"],s.listMoodMarcato=["marcato"],s.listMoodMarziale=["marziale"],s.listMoodMesto=["mesto"],s.listMoodMorendo=["morendo"],s.listMoodNobilmente=["nobilmente"],s.listMoodPatetico=["patetico"],s.listMoodPesante=["pesante"],s.listMoodSautille=["sautille"],s.listMoodSaltando=["saltando"],s.listMoodScherzando=["scherzando"],s.listMoodSostenuto=["sostenuto"],s.listMoodSpiccato=["spiccato"],s.listMoodTenerezza=["tenerezza"],s.listMoodTranquillamente=["tranquillamente"],s.listMoodTrionfante=["trionfante"],function(e){e[e.Affettuoso=0]="Affettuoso",e[e.Agitato=1]="Agitato",e[e.Appassionato=2]="Appassionato",e[e.Animato=3]="Animato",e[e.Brillante=4]="Brillante",e[e.Cantabile=5]="Cantabile",e[e.Dolce=6]="Dolce",e[e.Energico=7]="Energico",e[e.Eroico=8]="Eroico",e[e.Espressivo=9]="Espressivo",e[e.Furioso=10]="Furioso",e[e.Giocoso=11]="Giocoso",e[e.Gioioso=12]="Gioioso",e[e.Lacrimoso=13]="Lacrimoso",e[e.Grandioso=14]="Grandioso",e[e.Grazioso=15]="Grazioso",e[e.Leggiero=16]="Leggiero",e[e.Maestoso=17]="Maestoso",e[e.Malinconico=18]="Malinconico",e[e.Marcato=19]="Marcato",e[e.Marziale=20]="Marziale",e[e.Mesto=21]="Mesto",e[e.Morendo=22]="Morendo",e[e.Nobilmente=23]="Nobilmente",e[e.Patetico=24]="Patetico",e[e.Pesante=25]="Pesante",e[e.Sautille=26]="Sautille",e[e.Saltando=27]="Saltando",e[e.Scherzando=28]="Scherzando",e[e.Sostenuto=29]="Sostenuto",e[e.Spiccato=30]="Spiccato",e[e.Tenerezza=31]="Tenerezza",e[e.Tranquillamente=32]="Tranquillamente",e[e.Trionfante=33]="Trionfante",e[e.Vivace=34]="Vivace"}(r||(t.MoodEnum=r={}))},9834:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasVexFlowBackend=void 0;var s=i(n(3206)).default.Flow;const r=n(1902),a=n(6014),o=n(624),l=n(1888);class c extends r.VexFlowBackend{constructor(e){super(),this.rules=e}getVexflowBackendType(){return s.Renderer.Backends.CANVAS}getOSMDBackendType(){return o.BackendType.Canvas}getCanvasSize(){var e;return null===(e=document.getElementById("osmdCanvasPage"+this.graphicalMusicPage.PageNumber))||void 0===e?void 0:e.offsetHeight}initialize(e,t){this.zoom=t,this.canvas=document.createElement("canvas"),this.graphicalMusicPage||(this.graphicalMusicPage=new l.GraphicalMusicPage(void 0),this.graphicalMusicPage.PageNumber=1),this.canvas.id="osmdCanvasVexFlowBackendCanvas"+this.graphicalMusicPage.PageNumber,this.inner=document.createElement("div"),this.inner.id="osmdCanvasPage"+this.graphicalMusicPage.PageNumber,this.inner.style.position="relative",this.canvas.style.zIndex="0",this.inner.appendChild(this.canvas),e.appendChild(this.inner),this.renderer=new s.Renderer(this.canvas,this.getVexflowBackendType()),this.ctx=this.renderer.getContext()}initializeHeadless(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;this.graphicalMusicPage||(this.graphicalMusicPage=new l.GraphicalMusicPage(void 0),this.graphicalMusicPage.PageNumber=1),this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=t,this.renderer=new s.Renderer(this.canvas,this.getVexflowBackendType()),this.ctx=this.renderer.getContext()}getContext(){return this.ctx}free(){this.canvas&&(this.canvas.width=0,this.canvas.height=0,this.canvas.remove(),delete this.canvas,this.canvas=null)}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.rules.PageBackgroundColor&&(this.ctx.save(),this.ctx.setFillStyle(this.rules.PageBackgroundColor),this.zoom=1,this.ctx.fillRect(0,0,this.canvas.width/this.zoom,this.canvas.height/this.zoom),this.ctx.restore())}scale(e){this.ctx.scale(e,e)}translate(e,t){this.CanvasRenderingCtx.translate(e,t)}renderText(e,t,n,i,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;const c=this.CanvasRenderingCtx.font;this.CanvasRenderingCtx.save(),this.CanvasRenderingCtx.font=a.VexFlowConverter.font(e,t,n,this.rules,l),this.CanvasRenderingCtx.fillStyle=o,this.CanvasRenderingCtx.strokeStyle=o,this.CanvasRenderingCtx.fillText(i,r.x,r.y+s),this.CanvasRenderingCtx.restore(),this.CanvasRenderingCtx.font=c}renderRectangle(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=this.CanvasRenderingCtx.fillStyle;this.CanvasRenderingCtx.fillStyle=n||a.VexFlowConverter.style(t),this.CanvasRenderingCtx.globalAlpha=i,this.ctx.fillRect(e.x,e.y,e.width,e.height),this.CanvasRenderingCtx.fillStyle=s,this.CanvasRenderingCtx.globalAlpha=1}renderLine(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#FF0000FF";const i=this.CanvasRenderingCtx.strokeStyle;this.CanvasRenderingCtx.strokeStyle=n,this.CanvasRenderingCtx.beginPath(),this.CanvasRenderingCtx.moveTo(e.x,e.y),this.CanvasRenderingCtx.lineTo(t.x,t.y),this.CanvasRenderingCtx.stroke(),this.CanvasRenderingCtx.strokeStyle=i}renderCurve(e){this.ctx.beginPath(),this.ctx.moveTo(e[0].x,e[0].y),this.ctx.bezierCurveTo(e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y),this.ctx.lineTo(e[7].x,e[7].y),this.ctx.bezierCurveTo(e[6].x,e[6].y,e[5].x,e[5].y,e[4].x,e[4].y),this.ctx.lineTo(e[0].x,e[0].y),this.ctx.closePath(),this.ctx.fill()}renderPath(e){let t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.ctx.beginPath();for(const i of e)t?this.ctx.lineTo(i.x,i.y):(this.ctx.moveTo(i.x,i.y),t=i);this.ctx.closePath(),n?this.ctx.fill():this.ctx.stroke()}get CanvasRenderingCtx(){return this.ctx.vexFlowCanvasContext}}t.CanvasVexFlowBackend=c},9924:function(e,t,n){"use strict";var i,s=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t}(n(4041).default);t.default=r},9990:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}return n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(8156)})(),e.exports=i()},672:(e,t,n)=>{"use strict";var i=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(s(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,r="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):"script"===n&&a.d.X(e,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,i=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},693:(e,t,n)=>{var i=n(736);e.exports=function(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},715:(e,t,n)=>{var i=n(987),s=n(156),r=n(122),a=n(752);e.exports=function(e,t){return i(e)||s(e,t)||r(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,n)=>{var i=n(738).default,s=n(45);e.exports=function(e){var t=s(e,"string");return"symbol"==i(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function s(e,t,i){var s=null;if(void 0!==i&&(s=""+i),void 0!==t.key&&(s=""+t.key),"key"in t)for(var r in i={},t)"key"!==r&&(i[r]=t[r]);else i=t;return t=i.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:i}}t.Fragment=i,t.jsx=s,t.jsxs=s},817:(e,t,n)=>{"use strict";var i=n(0),s=function(e){return function(e){return null!==e&&e!==[]&&e>=0&&e<129}(e)?+e:i.midi(e)};e.exports=function(e){if(e.buffers){var t=e.opts.map,n="function"===typeof t?t:s,i=function(e){return e?n(e)||e:null};e.buffers=function(e,t){return Object.keys(e).reduce((function(n,i){return n[t(i)]=e[i],n}),{})}(e.buffers,i);var r=e.start;e.start=function(e,t,n){var s=i(e),a=s%1;return a&&(s=Math.floor(s),n=Object.assign(n||{},{cents:Math.floor(100*a)})),r(s,t,n)}}return e}},831:e=>{e.exports=function(e){return e.on=function(t,n){if(1===arguments.length&&"function"===typeof t)return e.on("event",t);var i,s,r="on"+t,a=e[r];return e[r]=a?(i=a,s=n,function(e,t,n,r){i(e,t,n,r),s(e,t,n,r)}):n,e},e}},843:e=>{"use strict";e.exports={decode:function(e,t){for(var n,i,s,r=e.replace(/[^A-Za-z0-9\+\/]/g,""),a=r.length,o=t?Math.ceil((3*a+1>>2)/t)*t:3*a+1>>2,l=new Uint8Array(o),c=0,h=0,u=0;u<a;u++)if(i=3&u,c|=((s=r.charCodeAt(u))>64&&s<91?s-65:s>96&&s<123?s-71:s>47&&s<58?s+4:43===s?62:47===s?63:0)<<18-6*i,3===i||a-u===1){for(n=0;n<3&&h<o;n++,h++)l[h]=c>>>(16>>>n&24)&255;c=0}return l}}},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,s=e[i];if(!(0<r(s,t)))break e;e[i]=t,e[n]=s,n=i}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,s=e.length,a=s>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,h=e[c];if(0>r(l,n))c<s&&0>r(h,l)?(e[i]=h,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<s&&0>r(h,n)))break e;e[i]=h,e[c]=n,i=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],h=[],u=1,d=null,f=3,p=!1,m=!1,g=!1,b="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(h);null!==t;){if(null===t.callback)s(h);else{if(!(t.startTime<=e))break;s(h),t.sortIndex=t.expirationTime,n(c,t)}t=i(h)}}function S(e){if(g=!1,x(e),!m)if(null!==i(c))m=!0,k();else{var t=i(h);null!==t&&L(S,t.startTime-e)}}var w,E=!1,_=-1,T=5,M=-1;function C(){return!(t.unstable_now()-M<T)}function A(){if(E){var e=t.unstable_now();M=e;var n=!0;try{e:{m=!1,g&&(g=!1,v(_),_=-1),p=!0;var r=f;try{t:{for(x(e),d=i(c);null!==d&&!(d.expirationTime>e&&C());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){d.callback=o,x(e),n=!0;break t}d===i(c)&&s(c),x(e)}else s(c);d=i(c)}if(null!==d)n=!0;else{var l=i(h);null!==l&&L(S,l.startTime-e),n=!1}}break e}finally{d=null,f=r,p=!1}n=void 0}}finally{n?w():E=!1}}}if("function"===typeof y)w=function(){y(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,N=P.port2;P.port1.onmessage=A,w=function(){N.postMessage(null)}}else w=function(){b(A,0)};function k(){E||(E=!0,w())}function L(e,n){_=b((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,k())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,r){var a=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?a+r:a:r=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>a?(e.sortIndex=r,n(h,e),null===i(c)&&e===i(h)&&(g?(v(_),_=-1):g=!0,L(S,r-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,k())),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},897:(e,t,n)=>{var i=n(693);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},960:(e,t,n)=>{var i=n(736);function s(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,i(s.key),s)}}e.exports=function(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},988:(e,t,n)=>{"use strict";function i(e,t){return Array(t+1).join(e)}function s(e){return"number"===typeof e}function r(e,t){return Math.pow(2,(e-69)/12)*(t||440)}n.r(t),n.d(t,{acc:()=>m,alt:()=>v,build:()=>u,chroma:()=>y,freq:()=>f,letter:()=>p,midi:()=>d,oct:()=>x,parse:()=>c,pc:()=>g,regex:()=>o,step:()=>b});var a=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function o(){return a}var l=[0,2,4,5,7,9,11];function c(e,t,n){if("string"!==typeof e)return null;var i=a.exec(e);if(!i||!t&&i[4])return null;var s={letter:i[1].toUpperCase(),acc:i[2].replace(/x/g,"##")};s.pc=s.letter+s.acc,s.step=(s.letter.charCodeAt(0)+3)%7,s.alt="b"===s.acc[0]?-s.acc.length:s.acc.length;var o=l[s.step]+s.alt;return s.chroma=o<0?12+o:o%12,i[3]&&(s.oct=+i[3],s.midi=o+12*(s.oct+1),s.freq=r(s.midi,n)),t&&(s.tonicOf=i[4]),s}var h="CDEFGAB";function u(e,t,n){return null===e||"undefined"===typeof e?null:e.step?u(e.step,e.alt,e.oct):e<0||e>6?null:h.charAt(e)+(s(r=t)?r<0?i("b",-r):i("#",r):"")+function(e){return s(e)?""+e:""}(n);var r}function d(e){if((s(e)||"string"===typeof e)&&e>=0&&e<128)return+e;var t=c(e);return t&&function(e){return"undefined"!==typeof e}(t.midi)?t.midi:null}function f(e,t){var n=d(e);return null===n?null:r(n,t)}function p(e){return(c(e)||{}).letter}function m(e){return(c(e)||{}).acc}function g(e){return(c(e)||{}).pc}function b(e){return(c(e)||{}).step}function v(e){return(c(e)||{}).alt}function y(e){return(c(e)||{}).chroma}function x(e){return(c(e)||{}).oct}},998:function(e,t,n){!function(e,t,n,i){"use strict";function s(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var r=s(t),a=s(n),o=s(i),l=function(e,t,n){return{endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}},c=function(e,t,n){return{endTime:t,insertTime:n,type:"linearRampToValue",value:e}},h=function(e,t){return{startTime:t,type:"setValue",value:e}},u=function(e,t,n){return{duration:n,startTime:t,type:"setValueCurve",values:e}},d=function(e,t,n){var i=n.startTime,s=n.target,r=n.timeConstant;return s+(t-s)*Math.exp((i-e)/r)},f=function(e){return"exponentialRampToValue"===e.type},p=function(e){return"linearRampToValue"===e.type},m=function(e){return f(e)||p(e)},g=function(e){return"setValue"===e.type},b=function(e){return"setValueCurve"===e.type},v=function e(t,n,i,s){var r=t[n];return void 0===r?s:m(r)||g(r)?r.value:b(r)?r.values[r.values.length-1]:d(i,e(t,n-1,r.startTime,s),r)},y=function(e,t,n,i,s){return void 0===n?[i.insertTime,s]:m(n)?[n.endTime,n.value]:g(n)?[n.startTime,n.value]:b(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,v(e,t-1,n.startTime,s)]},x=function(e){return"cancelAndHold"===e.type},S=function(e){return"cancelScheduledValues"===e.type},w=function(e){return x(e)||S(e)?e.cancelTime:f(e)||p(e)?e.endTime:e.startTime},E=function(e,t,n,i){var s=i.endTime,r=i.value;return n===r?r:0<n&&0<r||n<0&&r<0?n*Math.pow(r/n,(e-t)/(s-t)):0},_=function(e,t,n,i){return n+(e-t)/(i.endTime-t)*(i.value-n)},T=function(e,t){var n=Math.floor(t),i=Math.ceil(t);return n===i?e[n]:(1-(t-n))*e[n]+(1-(i-t))*e[i]},M=function(e,t){var n=t.duration,i=t.startTime,s=t.values,r=(e-i)/n*(s.length-1);return T(s,r)},C=function(e){return"setTarget"===e.type},A=function(){function e(t){a.default(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return o.default(e,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=w(e);if(x(e)||S(e)){var n=this._automationEvents.findIndex((function(e){return w(e)>=t})),i=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),x(e)){var s=this._automationEvents[this._automationEvents.length-1];if(void 0!==i&&m(i)){if(C(s))throw new Error("The internal list is malformed.");var r=b(s)?s.startTime+s.duration:w(s),a=b(s)?s.values[s.values.length-1]:s.value,o=f(i)?E(t,r,a,i):_(t,r,a,i),d=f(i)?l(o,t,this._currenTime):c(o,t,this._currenTime);this._automationEvents.push(d)}void 0!==s&&C(s)&&this._automationEvents.push(h(this.getValue(t),t)),void 0!==s&&b(s)&&s.startTime+s.duration>t&&(this._automationEvents[this._automationEvents.length-1]=u(new Float32Array([6,7]),s.startTime,t-s.startTime))}}else{var g=this._automationEvents.findIndex((function(e){return w(e)>t})),v=-1===g?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[g-1];if(void 0!==v&&b(v)&&w(v)+v.duration>t)return!1;var y=f(e)?l(e.value,e.endTime,this._currenTime):p(e)?c(e.value,t,this._currenTime):e;if(-1===g)this._automationEvents.push(y);else{if(b(e)&&t+e.duration>w(this._automationEvents[g]))return!1;this._automationEvents.splice(g,0,y)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex((function(t){return w(t)>e}));if(t>1){var n=this._automationEvents.slice(t-1),i=n[0];C(i)&&n.unshift(h(v(this._automationEvents,t-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var t=this._automationEvents[this._automationEvents.length-1],n=this._automationEvents.findIndex((function(t){return w(t)>e})),i=this._automationEvents[n],s=w(t)<=e?t:this._automationEvents[n-1];if(void 0!==s&&C(s)&&(void 0===i||!m(i)||i.insertTime>e))return d(e,v(this._automationEvents,n-2,s.startTime,this._defaultValue),s);if(void 0!==s&&g(s)&&(void 0===i||!m(i)))return s.value;if(void 0!==s&&b(s)&&(void 0===i||!m(i)||s.startTime+s.duration>e))return e<s.startTime+s.duration?M(e,s):s.values[s.values.length-1];if(void 0!==s&&m(s)&&(void 0===i||!m(i)))return s.value;if(void 0!==i&&f(i)){var a=y(this._automationEvents,n-1,s,i,this._defaultValue),o=r.default(a,2),l=o[0],c=o[1];return E(e,l,c,i)}if(void 0!==i&&p(i)){var h=y(this._automationEvents,n-1,s,i,this._defaultValue),u=r.default(h,2),x=u[0],S=u[1];return _(e,x,S,i)}return this._defaultValue}}]),e}(),P=function(e){return{cancelTime:e,type:"cancelAndHold"}},N=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},k=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},L=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},I=function(e,t,n){return{startTime:t,target:e,timeConstant:n,type:"setTarget"}};e.AutomationEventList=A,e.createCancelAndHoldAutomationEvent=P,e.createCancelScheduledValuesAutomationEvent=N,e.createExponentialRampToValueAutomationEvent=k,e.createLinearRampToValueAutomationEvent=L,e.createSetTargetAutomationEvent=I,e.createSetValueAutomationEvent=h,e.createSetValueCurveAutomationEvent=u,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(715),n(383),n(960))},999:function(e,t,n){var i;"undefined"!=typeof self&&self,e.exports=(i=n(43),function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}function s(e){return l(e)||o(e)||a(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function o(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function l(e){if(Array.isArray(e))return c(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"HighchartsReact",(function(){return p}));var u=n(1),d=n.n(u),f="undefined"!=typeof window?u.useLayoutEffect:u.useEffect,p=Object(u.memo)(Object(u.forwardRef)((function(e,t){var n=Object(u.useRef)(),r=Object(u.useRef)(),a=Object(u.useRef)(e.constructorType),o=Object(u.useRef)(e.highcharts);return f((function(){function t(){var t=e.highcharts||"object"===("undefined"==typeof window?"undefined":h(window))&&window.Highcharts,i=e.constructorType||"chart";t?t[i]?e.options?r.current=t[i](n.current,e.options,e.callback):console.warn('The "options" property was not passed.'):console.warn('The "constructorType" property is incorrect or some required module is not imported.'):console.warn('The "highcharts" property was not passed.')}if(r.current){if(!1!==e.allowChartUpdate)if(e.constructorType!==a.current||e.highcharts!==o.current)a.current=e.constructorType,o.current=e.highcharts,t();else if(!e.immutable&&r.current){var i;(i=r.current).update.apply(i,[e.options].concat(s(e.updateArgs||[!0,!0])))}else t()}else t()}),[e.options,e.allowChartUpdate,e.updateArgs,e.containerProps,e.highcharts,e.constructorType]),f((function(){return function(){r.current&&(r.current.destroy(),r.current=null)}}),[]),Object(u.useImperativeHandle)(t,(function(){return{get chart(){return r.current},container:n}}),[]),d.a.createElement("div",i({},e.containerProps,{ref:n}))})));t.default=p},function(e,t){e.exports=i}]))}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,s){if(1&s&&(i=this(i)),8&s)return i;if("object"===typeof i&&i){if(4&s&&i.__esModule)return i;if(16&s&&"function"===typeof i.then)return i}var r=Object.create(null);n.r(r);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&i;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>i[e]));return a.default=()=>i,n.d(r,a),r}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>ef,hasStandardBrowserEnv:()=>nf,hasStandardBrowserWebWorkerEnv:()=>sf,navigator:()=>tf,origin:()=>rf});var t=n(43),i=n.t(t,2),s=n(391);function r(e,t){if(null==e)return{};var n,i,s=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function l(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const u=["sri"],d=["page"],f=["page","matches"],p=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var b="popstate";function v(){return T((function(e,t){let{pathname:n,search:i,hash:s}=e.location;return w("",{pathname:n,search:i,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:E(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function y(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function x(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function S(e,t){return{usr:e.state,key:e.key,idx:t}}function w(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3?arguments[3]:void 0;return h(h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?_(t):t),{},{state:n,key:t&&t.key||i||Math.random().toString(36).substring(2,10)})}function E(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function _(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function T(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:s=document.defaultView,v5Compat:r=!1}=i,a=s.history,o="POP",l=null,c=u();function u(){return(a.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function f(e){return M(e)}null==c&&(c=0,a.replaceState(h(h({},a.state),{},{idx:c}),""));let p={get action(){return o},get location(){return e(s,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(b,d),l=e,()=>{s.removeEventListener(b,d),l=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let i=w(p.location,e,t);n&&n(i,e),c=u()+1;let h=S(i,c),d=p.createHref(i);try{a.pushState(h,"",d)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;s.location.assign(d)}r&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let i=w(p.location,e,t);n&&n(i,e),c=u();let s=S(i,c),h=p.createHref(i);a.replaceState(s,"",h),r&&l&&l({action:o,location:p.location,delta:0})},go:e=>a.go(e)};return p}function M(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),y(n,"No window.location.(origin|href) available to create URL");let i="string"===typeof e?e:E(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}new WeakMap;function C(e,t){return A(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function A(e,t,n,i){let s=z(("string"===typeof t?_(t):t).pathname||"/",n);if(null==s)return null;let r=P(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(r);let a=null;for(let o=0;null==a&&o<r.length;++o){let e=W(s);a=j(r[o],e,i)}return a}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(i)&&a)return;y(l.relativePath.startsWith(i),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(i,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(i.length)}let c=Q([i,l.relativePath]),h=n.concat(l);e.children&&e.children.length>0&&(y(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),P(e.children,t,h,c,a)),(null!=e.path||e.index)&&t.push({path:c,score:B(c,e.index),routesMeta:h})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let i of N(e.path))r(e,t,!0,i);else r(e,t)})),t}function N(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(0===i.length)return s?[r,""]:[r];let a=N(i.join("/")),o=[];return o.push(...a.map((e=>""===e?r:[r,e].join("/")))),s&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}var k=/^:[\w-]+$/,L=3,I=2,R=1,O=10,D=-2,F=e=>"*"===e;function B(e,t){let n=e.split("/"),i=n.length;return n.some(F)&&(i+=D),t&&(i+=I),n.filter((e=>!F(e))).reduce(((e,t)=>e+(k.test(t)?L:""===t?R:O)),i)}function j(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:i}=e,s={},r="/",a=[];for(let o=0;o<i.length;++o){let e=i[o],l=o===i.length-1,c="/"===r?t:t.slice(r.length)||"/",h=V({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!h&&l&&n&&!i[i.length-1].route.index&&(h=V({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:Q([r,h.pathname]),pathnameBase:J(Q([r,h.pathnameBase])),route:u}),"/"!==h.pathnameBase&&(r=Q([r,h.pathnameBase]))}return a}function V(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=G(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:i.reduce(((e,t,n)=>{let{paramName:i,isOptional:s}=t;if("*"===i){let e=o[n]||"";a=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[i]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:r,pathnameBase:a,pattern:e}}function G(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"))).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(i.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function W(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return x(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}var U=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,H=e=>U.test(e);function X(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}function Y(e,t,n,i){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(i),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function q(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function K(e){let t=q(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function Z(e,t,n){let i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?i=_(e):(i=h({},e),y(!i.pathname||!i.pathname.includes("?"),Y("?","pathname","search",i)),y(!i.pathname||!i.pathname.includes("#"),Y("#","pathname","hash",i)),y(!i.search||!i.search.includes("#"),Y("#","search","hash",i)));let r,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)r=n;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}r=e>=0?t[e]:"/"}let l=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:i,search:s="",hash:r=""}="string"===typeof e?_(e):e;if(i)if(H(i))t=i;else{if(i.includes("//")){let e=i;i=i.replace(/\/\/+/g,"/"),x(!1,"Pathnames cannot have embedded double slashes - normalizing ".concat(e," -> ").concat(i))}t=i.startsWith("/")?X(i.substring(1),"/"):X(i,n)}else t=n;return{pathname:t,search:ee(s),hash:te(r)}}(i,r),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Q=e=>e.join("/").replace(/\/\/+/g,"/"),J=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ee=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",te=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function ne(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}function ie(e){return e.map((e=>e.route.path)).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Symbol("Uninstrumented");Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var se=["POST","PUT","PATCH","DELETE"],re=(new Set(se),["GET",...se]);new Set(re),Symbol("ResetLoaderData");var ae=t.createContext(null);ae.displayName="DataRouter";var oe=t.createContext(null);oe.displayName="DataRouterState";var le=t.createContext(!1);var ce=t.createContext({isTransitioning:!1});ce.displayName="ViewTransition";var he=t.createContext(new Map);he.displayName="Fetchers";var ue=t.createContext(null);ue.displayName="Await";var de=t.createContext(null);de.displayName="Navigation";var fe=t.createContext(null);fe.displayName="Location";var pe=t.createContext({outlet:null,matches:[],isDataRoute:!1});pe.displayName="Route";var me=t.createContext(null);me.displayName="RouteError";function ge(){return null!=t.useContext(fe)}function be(){return y(ge(),"useLocation() may be used only in the context of a <Router> component."),t.useContext(fe).location}var ve="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ye(e){t.useContext(de).static||t.useLayoutEffect(e)}function xe(){let{isDataRoute:e}=t.useContext(pe);return e?function(){let{router:e}=Ne("useNavigate"),n=Le("useNavigate"),i=t.useRef(!1);ye((()=>{i.current=!0}));let s=t.useCallback((async function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(i.current,ve),i.current&&("number"===typeof t?await e.navigate(t):await e.navigate(t,h({fromRouteId:n},s)))}),[e,n]);return s}():function(){y(ge(),"useNavigate() may be used only in the context of a <Router> component.");let e=t.useContext(ae),{basename:n,navigator:i}=t.useContext(de),{matches:s}=t.useContext(pe),{pathname:r}=be(),a=JSON.stringify(K(s)),o=t.useRef(!1);ye((()=>{o.current=!0}));let l=t.useCallback((function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x(o.current,ve),!o.current)return;if("number"===typeof t)return void i.go(t);let l=Z(t,JSON.parse(a),r,"path"===s.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:Q([n,l.pathname])),(s.replace?i.replace:i.push)(l,s.state,s)}),[n,i,a,r,e]);return l}()}t.createContext(null);function Se(){let{matches:e}=t.useContext(pe),n=e[e.length-1];return n?n.params:{}}function we(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:i}=t.useContext(pe),{pathname:s}=be(),r=JSON.stringify(K(i));return t.useMemo((()=>Z(e,JSON.parse(r),s,"path"===n)),[e,r,s,n])}function Ee(e,n,i,s,r){y(ge(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=t.useContext(de),{matches:o}=t.useContext(pe),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";Oe(u,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=be();if(n){var g;let e="string"===typeof n?_(n):n;y("/"===d||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let b=p.pathname||"/",v=b;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let S=C(e,{pathname:v});x(f||null!=S,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),x(null==S||void 0!==S[S.length-1].route.element||void 0!==S[S.length-1].route.Component||void 0!==S[S.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let w=Ae(S&&S.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Q([d,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Q([d,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])}))),o,i,s,r);return n&&w?t.createElement(fe.Provider,{value:{location:h({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},w):w}function _e(){let e=Ie(),n=ne(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=t.createElement(t.Fragment,null,t.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),t.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",t.createElement("code",{style:a},"ErrorBoundary")," or"," ",t.createElement("code",{style:a},"errorElement")," prop on your route.")),t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),i?t.createElement("pre",{style:r},i):null,o)}var Te=t.createElement(_e,null),Me=class extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?t.createElement(pe.Provider,{value:this.props.routeContext},t.createElement(me.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ce(e){let{routeContext:n,match:i,children:s}=e,r=t.useContext(ae);return r&&r.static&&r.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=i.route.id),t.createElement(pe.Provider,{value:n},s)}function Ae(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!i)return null;if(i.errors)e=i.matches;else{if(0!==n.length||i.initialized||!(i.matches.length>0))return null;e=i.matches}}let r=e,a=null===i||void 0===i?void 0:i.errors;if(null!=a){let e=r.findIndex((e=>e.route.id&&void 0!==(null===a||void 0===a?void 0:a[e.route.id])));y(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(a).join(","))),r=r.slice(0,Math.min(r.length,e+1))}let o=!1,l=-1;if(i)for(let t=0;t<r.length;t++){let e=r[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=t),e.route.id){let{loaderData:t,errors:n}=i,s=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!n||void 0===n[e.route.id]);if(e.route.lazy||s){o=!0,r=l>=0?r.slice(0,l+1):[r[0]];break}}}let c=i&&s?(e,t)=>{var n,r;s(e,{location:i.location,params:null!==(n=null===(r=i.matches)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.params)&&void 0!==n?n:{},unstable_pattern:ie(i.matches),errorInfo:t})}:void 0;return r.reduceRight(((e,s,h)=>{let u,d=!1,f=null,p=null;i&&(u=a&&s.route.id?a[s.route.id]:void 0,f=s.route.errorElement||Te,o&&(l<0&&0===h?(Oe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):l===h&&(d=!0,p=s.route.hydrateFallbackElement||null)));let m=n.concat(r.slice(0,h+1)),g=()=>{let n;return n=u?f:d?p:s.route.Component?t.createElement(s.route.Component,null):s.route.element?s.route.element:e,t.createElement(Ce,{match:s,routeContext:{outlet:e,matches:m,isDataRoute:null!=i},children:n})};return i&&(s.route.ErrorBoundary||s.route.errorElement||0===h)?t.createElement(Me,{location:i.location,revalidation:i.revalidation,component:f,error:u,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:c}):g()}),null)}function Pe(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ne(e){let n=t.useContext(ae);return y(n,Pe(e)),n}function ke(e){let n=t.useContext(oe);return y(n,Pe(e)),n}function Le(e){let n=function(e){let n=t.useContext(pe);return y(n,Pe(e)),n}(e),i=n.matches[n.matches.length-1];return y(i.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),i.route.id}function Ie(){var e;let n=t.useContext(me),i=ke("useRouteError"),s=Le("useRouteError");return void 0!==n?n:null===(e=i.errors)||void 0===e?void 0:e[s]}var Re={};function Oe(e,t,n){t||Re[e]||(Re[e]=!0,x(!1,n))}var De={};function Fe(e,t){e||De[t]||(De[t]=!0,console.warn(t))}i.useOptimistic;t.memo((function(e){let{routes:t,future:n,state:i,unstable_onError:s}=e;return Ee(t,void 0,i,s,n)}));function Be(e){y(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function je(e){let{basename:n="/",children:i=null,location:s,navigationType:r="POP",navigator:a,static:o=!1,unstable_useTransitions:l}=e;y(!ge(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=t.useMemo((()=>({basename:c,navigator:a,static:o,unstable_useTransitions:l,future:{}})),[c,a,o,l]);"string"===typeof s&&(s=_(s));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:m="default"}=s,g=t.useMemo((()=>{let e=z(u,c);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:m},navigationType:r}}),[c,u,d,f,p,m,r]);return x(null!=g,'<Router basename="'.concat(c,'"> is not able to match the URL "').concat(u).concat(d).concat(f,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:t.createElement(de.Provider,{value:h},t.createElement(fe.Provider,{children:i,value:g}))}function Ve(e){let{children:t,location:n}=e;return Ee(Ge(t),n)}t.Component;function Ge(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[];return t.Children.forEach(e,((e,s)=>{if(!t.isValidElement(e))return;let r=[...n,s];if(e.type===t.Fragment)return void i.push.apply(i,Ge(e.props.children,r));y(e.type===Be,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),y(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Ge(e.props.children,r)),i.push(a)})),i}var We="get",ze="application/x-www-form-urlencoded";function Ue(e){return"undefined"!==typeof HTMLElement&&e instanceof HTMLElement}var He=null;var Xe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ye(e){return null==e||Xe.has(e)?e:(x(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(ze,'"')),null)}function qe(e,t){let n,i,s,r,a;if(Ue(o=e)&&"form"===o.tagName.toLowerCase()){let a=e.getAttribute("action");i=a?z(a,t):null,n=e.getAttribute("method")||We,s=Ye(e.getAttribute("enctype"))||ze,r=new FormData(e)}else if(function(e){return Ue(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ue(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(i=o?z(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||We,s=Ye(e.getAttribute("formenctype"))||Ye(a.getAttribute("enctype"))||ze,r=new FormData(a,e),!function(){if(null===He)try{new FormData(document.createElement("form"),0),He=!1}catch(e){He=!0}return He}()){let{name:t,type:n,value:i}=e;if("image"===n){let e=t?"".concat(t,"."):"";r.append("".concat(e,"x"),"0"),r.append("".concat(e,"y"),"0")}else t&&r.append(t,i)}}else{if(Ue(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=We,i=null,s=ze,a=e}var o;return r&&"text/plain"===s&&(a=r,r=void 0),{action:i,method:n.toLowerCase(),encType:s,formData:r,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ke(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function $e(e,t,n){let i="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===i.pathname?i.pathname="_root.".concat(n):t&&"/"===z(i.pathname,t)?i.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):i.pathname="".concat(i.pathname.replace(/\/$/,""),".").concat(n),i}async function Ze(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Qe(e){return null!=e&&"string"===typeof e.page}function Je(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function et(e,t,n,i,s,r){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var i;return n[t].pathname!==e.pathname||(null===(i=n[t].route.path)||void 0===i?void 0:i.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===r?t.filter(((e,t)=>a(e,t)||o(e,t))):"data"===r?t.filter(((t,r)=>{let l=i.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,r)||o(t,r))return!0;if(t.route.shouldRevalidate){var c;let i=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof i)return i}return!0})):[]}function tt(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i=e.map((e=>{let i=t.routes[e.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s})).flat(1),[...new Set(i)];var i}function nt(e,t){let n=new Set,i=new Set(t);return e.reduce(((e,s)=>{if(t&&!Qe(s)&&"script"===s.as&&s.href&&i.has(s.href))return e;let r=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}(s));return n.has(r)||(n.add(r),e.push({key:r,link:s})),e}),[])}function it(e,t){return"lazy"===e.mode&&!0===t}function st(){let e=t.useContext(ae);return Ke(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function rt(){let e=t.useContext(oe);return Ke(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var at=t.createContext(void 0);function ot(){let e=t.useContext(at);return Ke(e,"You must render this element inside a <HydratedRouter> element"),e}function lt(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function ct(e,t,n){if(n&&!ft)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}at.displayName="FrameworkContext";function ht(e){let{page:n}=e,i=r(e,d),{router:s}=st(),a=t.useMemo((()=>C(s.routes,n,s.basename)),[s.routes,n,s.basename]);return a?t.createElement(dt,h({page:n,matches:a},i)):null}function ut(e){let{manifest:n,routeModules:i}=ot(),[s,r]=t.useState([]);return t.useEffect((()=>{let t=!1;return async function(e,t,n){return nt((await Promise.all(e.map((async e=>{let i=t.routes[e.route.id];if(i){let e=await Ze(i,n);return e.links?e.links():[]}return[]})))).flat(1).filter(Je).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?h(h({},e),{},{rel:"prefetch",as:"style"}):h(h({},e),{},{rel:"prefetch"}))))}(e,n,i).then((e=>{t||r(e)})),()=>{t=!0}}),[e,n,i]),s}function dt(e){let{page:n,matches:i}=e,s=r(e,f),a=be(),{manifest:o,routeModules:l}=ot(),{basename:c}=st(),{loaderData:u,matches:d}=rt(),p=t.useMemo((()=>et(n,i,d,o,a,"data")),[n,i,d,o,a]),m=t.useMemo((()=>et(n,i,d,o,a,"assets")),[n,i,d,o,a]),g=t.useMemo((()=>{if(n===a.pathname+a.search+a.hash)return[];let e=new Set,t=!1;if(i.forEach((n=>{var i;let s=o.routes[n.route.id];s&&s.hasLoader&&(!p.some((e=>e.route.id===n.route.id))&&n.route.id in u&&null!==(i=l[n.route.id])&&void 0!==i&&i.shouldRevalidate||s.hasClientLoader?t=!0:e.add(n.route.id))})),0===e.size)return[];let s=$e(n,c,"data");return t&&e.size>0&&s.searchParams.set("_routes",i.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[s.pathname+s.search]}),[c,u,a,o,p,i,n,l]),b=t.useMemo((()=>tt(m,o)),[m,o]),v=ut(m);return t.createElement(t.Fragment,null,g.map((e=>t.createElement("link",h({key:e,rel:"prefetch",as:"fetch",href:e},s)))),b.map((e=>t.createElement("link",h({key:e,rel:"modulepreload",href:e},s)))),v.map((e=>{let{key:n,link:i}=e;return t.createElement("link",h({key:n,nonce:s.nonce},i))})))}var ft=!1;function pt(e){let{manifest:n,serverHandoffString:i,isSpaMode:s,renderMeta:a,routeDiscovery:o,ssr:l}=ot(),{router:c,static:d,staticContext:f}=st(),{matches:p}=rt(),m=t.useContext(le),g=it(o,l);a&&(a.didRenderScripts=!0);let b=ct(p,null,s);t.useEffect((()=>{0}),[]);let v=t.useMemo((()=>{var s;if(m)return null;let a=f?"window.__reactRouterContext = ".concat(i,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=d?"".concat(null!==n.hmr&&void 0!==s&&s.runtime?"import ".concat(JSON.stringify(n.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(n.url)),";\n").concat(b.map(((e,t)=>{let i="route".concat(t),s=n.routes[e.route.id];Ke(s,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:r,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=s,h=[...r?[{module:r,varName:"".concat(i,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(i,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(i,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(i,"_HydrateFallback")}]:[],{module:c,varName:"".concat(i,"_main")}];return 1===h.length?"import * as ".concat(i," from ").concat(JSON.stringify(c),";"):[h.map((e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";'))).join("\n"),"const ".concat(i," = {").concat(h.map((e=>"...".concat(e.varName))).join(","),"};")].join("\n")})).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,i=r(e,u),s=new Set(t.state.matches.map((e=>e.route.id))),a=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(a.pop();a.length>0;)o.push("/".concat(a.join("/"))),a.pop();o.forEach((e=>{let n=C(t.routes,e,t.basename);n&&n.forEach((e=>s.add(e.route.id)))}));let l=[...s].reduce(((e,t)=>Object.assign(e,{[t]:i.routes[t]})),{});return h(h({},i),{},{routes:l,sri:!!n||void 0})}(n,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(b.map(((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t))).join(","),"};\n\nimport(").concat(JSON.stringify(n.entry.module),");"):" ";return t.createElement(t.Fragment,null,t.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:void 0})),t.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:"module",async:!0})))}),[]),y=ft||m?[]:(n.entry.imports.concat(tt(b,n,{includeHydrateFallback:!0})),[...new Set(x)]);var x;let S="object"===typeof n.sri?n.sri:{};return Fe(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ft||m?null:t.createElement(t.Fragment,null,"object"===typeof n.sri?t.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:S})}}):null,g?null:t.createElement("link",{rel:"modulepreload",href:n.url,crossOrigin:e.crossOrigin,integrity:S[n.url],suppressHydrationWarning:!0}),t.createElement("link",{rel:"modulepreload",href:n.entry.module,crossOrigin:e.crossOrigin,integrity:S[n.entry.module],suppressHydrationWarning:!0}),y.map((n=>t.createElement("link",{key:n,rel:"modulepreload",href:n,crossOrigin:e.crossOrigin,integrity:S[n],suppressHydrationWarning:!0}))),v)}function mt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}t.Component;function gt(e){let{error:n,isOutsideRemixApp:i}=e;console.error(n);let s,r=t.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(ne(n))return t.createElement(bt,{title:"Unhandled Thrown Response!"},t.createElement("h1",{style:{fontSize:"24px"}},n.status," ",n.statusText),r);if(n instanceof Error)0;else{let e=null==n?"Unknown Error":"object"===typeof n&&"toString"in n?n.toString():JSON.stringify(n);new Error(e)}return t.createElement(bt,{title:"Application Error!",isOutsideRemixApp:i},t.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),t.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},s.stack),r)}function bt(e){var n;let{title:i,renderScripts:s,isOutsideRemixApp:r,children:a}=e,{routeModules:o}=ot();return null!==o.root&&void 0!==n&&n.Layout&&!r?a:t.createElement("html",{lang:"en"},t.createElement("head",null,t.createElement("meta",{charSet:"utf-8"}),t.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),t.createElement("title",null,i)),t.createElement("body",null,t.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,s?t.createElement(pt,null):null)))}var vt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{vt&&(window.__reactRouterVersion="7.10.1")}catch(aC){}function yt(e){let{basename:n,children:i,unstable_useTransitions:s,window:r}=e,a=t.useRef();null==a.current&&(a.current=v({window:r,v5Compat:!0}));let o=a.current,[l,c]=t.useState({action:o.action,location:o.location}),h=t.useCallback((e=>{!1===s?c(e):t.startTransition((()=>c(e)))}),[s]);return t.useLayoutEffect((()=>o.listen(h)),[o,h]),t.createElement(je,{basename:n,children:i,location:l.location,navigationType:l.action,navigator:o,unstable_useTransitions:!0===s})}var xt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,St=t.forwardRef((function(e,n){let i,{onClick:s,discover:a="render",prefetch:o="none",relative:l,reloadDocument:c,replace:u,state:d,target:f,to:m,preventScrollReset:g,viewTransition:b}=e,v=r(e,p),{basename:S,unstable_useTransitions:w}=t.useContext(de),_="string"===typeof m&&xt.test(m),T=!1;if("string"===typeof m&&_&&(i=m,vt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=z(t.pathname,S);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:T=!0}catch(aC){x(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let M=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(ge(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=t.useContext(de),{hash:r,pathname:a,search:o}=we(e,{relative:n}),l=a;return"/"!==i&&(l="/"===a?i:Q([i,a])),s.createHref({pathname:l,search:o,hash:r})}(m,{relative:l}),[C,A,P]=function(e,n){let i=t.useContext(at),[s,r]=t.useState(!1),[a,o]=t.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:h,onMouseLeave:u,onTouchStart:d}=n,f=t.useRef(null);t.useEffect((()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{o(e.isIntersecting)}))}),{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}}),[e]),t.useEffect((()=>{if(s){let e=setTimeout((()=>{o(!0)}),100);return()=>{clearTimeout(e)}}}),[s]);let p=()=>{r(!0)},m=()=>{r(!1),o(!1)};return i?"intent"!==e?[a,f,{}]:[a,f,{onFocus:lt(l,p),onBlur:lt(c,m),onMouseEnter:lt(h,p),onMouseLeave:lt(u,m),onTouchStart:lt(d,p)}]:[!1,f,{}]}(o,v),N=function(e){let{target:n,replace:i,state:s,preventScrollReset:r,relative:a,viewTransition:o,unstable_useTransitions:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=xe(),h=be(),u=we(e,{relative:a});return t.useCallback((d=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(d,n)){d.preventDefault();let n=void 0!==i?i:E(h)===E(u),f=()=>c(e,{replace:n,state:s,preventScrollReset:r,relative:a,viewTransition:o});l?t.startTransition((()=>f())):f()}}),[h,c,u,i,s,n,e,r,a,o,l])}(m,{replace:u,state:d,target:f,preventScrollReset:g,relative:l,viewTransition:b,unstable_useTransitions:w});let k=t.createElement("a",h(h(h({},v),P),{},{href:i||M,onClick:T||c?s:function(e){s&&s(e),e.defaultPrevented||N(e)},ref:mt(n,A),target:f,"data-discover":_||"render"!==a?void 0:"true"}));return C&&!_?t.createElement(t.Fragment,null,k,t.createElement(ht,{page:M})):k}));St.displayName="Link",t.forwardRef((function(e,n){let{"aria-current":i="page",caseSensitive:s=!1,className:a="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=e,f=r(e,m),p=we(c,{relative:f.relative}),g=be(),b=t.useContext(oe),{navigator:v,basename:x}=t.useContext(de),S=null!=b&&function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.useContext(ce);y(null!=i,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=_t("useViewTransitionState"),r=we(e,{relative:n});if(!i.isTransitioning)return!1;let a=z(i.currentLocation.pathname,s)||i.currentLocation.pathname,o=z(i.nextLocation.pathname,s)||i.nextLocation.pathname;return null!=V(r.pathname,o)||null!=V(r.pathname,a)}(p)&&!0===u,w=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,E=g.pathname,_=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(E=E.toLowerCase(),_=_?_.toLowerCase():null,w=w.toLowerCase()),_&&x&&(_=z(_,x)||_);const T="/"!==w&&w.endsWith("/")?w.length-1:w.length;let M,C=E===w||!o&&E.startsWith(w)&&"/"===E.charAt(T),A=null!=_&&(_===w||!o&&_.startsWith(w)&&"/"===_.charAt(w.length)),P={isActive:C,isPending:A,isTransitioning:S},N=C?i:void 0;M="function"===typeof a?a(P):[a,C?"active":null,A?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let k="function"===typeof l?l(P):l;return t.createElement(St,h(h({},f),{},{"aria-current":N,className:M,ref:n,style:k,to:c,viewTransition:u}),"function"===typeof d?d(P):d)})).displayName="NavLink";var wt=t.forwardRef(((e,n)=>{let{discover:i="render",fetcherKey:s,navigate:a,reloadDocument:o,replace:l,state:c,method:u=We,action:d,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:b}=e,v=r(e,g),{unstable_useTransitions:x}=t.useContext(de),S=Ct(),w=function(e){let{relative:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:i}=t.useContext(de),s=t.useContext(pe);y(s,"useFormAction must be used inside a RouteContext");let[r]=s.matches.slice(-1),a=h({},we(e||".",{relative:n})),o=be();if(null==e){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();a.search=n?"?".concat(n):""}}e&&"."!==e||!r.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==i&&(a.pathname="/"===a.pathname?i:Q([i,a.pathname]));return E(a)}(d,{relative:p}),_="get"===u.toLowerCase()?"get":"post",T="string"===typeof d&&xt.test(d);return t.createElement("form",h(h({ref:n,method:_,action:w,onSubmit:o?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,i=(null===n||void 0===n?void 0:n.getAttribute("formmethod"))||u,r=()=>S(n||e.currentTarget,{fetcherKey:s,method:i,navigate:a,replace:l,state:c,relative:p,preventScrollReset:m,viewTransition:b});x&&!1!==a?t.startTransition((()=>r())):r()}},v),{},{"data-discover":T||"render"!==i?void 0:"true"}))}));function Et(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function _t(e){let n=t.useContext(ae);return y(n,Et(e)),n}wt.displayName="Form";var Tt=0,Mt=()=>"__".concat(String(++Tt),"__");function Ct(){let{router:e}=_t("useSubmit"),{basename:n}=t.useContext(de),i=Le("useRouteId"),s=e.fetch,r=e.navigate;return t.useCallback((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:a,method:o,encType:l,formData:c,body:h}=qe(e,n);if(!1===t.navigate){let e=t.fetcherKey||Mt();await s(e,i,t.action||a,{preventScrollReset:t.preventScrollReset,formData:c,body:h,formMethod:t.method||o,formEncType:t.encType||l,flushSync:t.flushSync})}else await r(t.action||a,{preventScrollReset:t.preventScrollReset,formData:c,body:h,formMethod:t.method||o,formEncType:t.encType||l,replace:t.replace,state:t.state,fromRouteId:i,flushSync:t.flushSync,viewTransition:t.viewTransition})}),[s,r,n,i])}const At=[];function Pt(e){At.push(e)}function Nt(){return At}const kt="analysisHistory";function Lt(e){localStorage.setItem(kt,JSON.stringify(e))}function It(){const[e,n]=(0,t.useState)([]);(0,t.useEffect)((()=>{n(function(){const e=localStorage.getItem(kt);return e?JSON.parse(e):[]}())}),[]);return{history:e,addHistoryRecord:t=>{const i=[t,...e];n(i),Lt(i)},updateHistoryRecord:(t,i)=>{const s=e.map((e=>e.id===t?i:e));n(s),Lt(s)},removeHistoryRecord:t=>{const i=e.filter((e=>e.id!==t));n(i),Lt(i)}}}var Rt=n(579);let Ot=function(e){return e.Success="\u6210\u529f",e.Failure="\u5931\u6557",e}({});const Dt=()=>{const{history:e}=It(),t=Nt().reduce(((e,t)=>{const n=t.group||"\u4e3b\u8981\u529f\u80fd",i=e.find((e=>e.name===n));return i?i.plugins.push(t):e.push({name:n,plugins:[t]}),e}),[]),n={"\u4e3b\u8981\u529f\u80fd":{description:"\u6838\u5fc3\u5206\u6790\u7cfb\u7d71",badgeClass:"badge-primary",order:0},"\u5229\u990a\u7081":{description:"\u6b63\u5ff5\u4fee\u884c\u7cfb\u5217",badgeClass:"badge-secondary",order:1},"\u6613 Motion":{description:"\u60c5\u7dd2\u8a55\u6bd4\u7cfb\u5217",badgeClass:"badge-accent",order:2}};t.sort(((e,t)=>{var i,s,r,a;return(null!==(i=null===(s=n[e.name])||void 0===s?void 0:s.order)&&void 0!==i?i:99)-(null!==(r=null===(a=n[t.name])||void 0===a?void 0:a.order)&&void 0!==r?r:99)}));const i=e.filter((e=>e.status===Ot.Success)).length;return(0,Rt.jsxs)("div",{className:"space-y-8",children:[(0,Rt.jsxs)("div",{className:"alert alert-info",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("span",{className:"font-medium",children:"\u9019\u662f\u5c55\u793a\u7528 Demo \u7db2\u7ad9"}),(0,Rt.jsx)("span",{className:"hidden sm:inline",children:" \u2014 "}),(0,Rt.jsx)("br",{className:"sm:hidden"}),(0,Rt.jsx)("span",{children:"\u6240\u6709\u8cc7\u6599\u50c5\u5132\u5b58\u65bc\u60a8\u7684\u700f\u89bd\u5668\u4e2d\uff0c\u4e0d\u6703\u4e0a\u50b3\u81f3\u4f3a\u670d\u5668\u3002\u6e05\u9664\u700f\u89bd\u5668\u8cc7\u6599\u5c07\u6703\u907a\u5931\u6240\u6709\u5167\u5bb9\u3002"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("h1",{className:"text-2xl font-bold text-text",children:"\u5206\u6790\u529f\u80fd"}),(0,Rt.jsx)("p",{className:"text-text-muted mt-1",children:"\u9078\u64c7\u5206\u6790\u529f\u80fd\u958b\u59cb\u8166\u6ce2\u5206\u6790"})]}),e.length>0&&(0,Rt.jsxs)(St,{to:"/history",className:"btn btn-ghost gap-2",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"\u6b77\u53f2\u7d00\u9304",(0,Rt.jsx)("span",{className:"badge badge-primary badge-sm",children:i})]})]}),t.map((e=>{const t=n[e.name]||{description:"",badgeClass:"badge-ghost",order:99};return(0,Rt.jsxs)("div",{children:[(0,Rt.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,Rt.jsx)("span",{className:"badge badge-sm ".concat(t.badgeClass),children:e.name}),(0,Rt.jsx)("span",{className:"text-sm text-text-muted",children:t.description})]}),(0,Rt.jsx)("div",{className:"grid gap-3 md:grid-cols-2",children:e.plugins.map((e=>(0,Rt.jsxs)(St,{to:"/analysis/".concat(e.id),className:"block p-4 bg-base-200 rounded-lg hover:bg-base-300 transition-colors",children:[(0,Rt.jsxs)("p",{className:"font-medium",children:[e.name,e.badge&&(0,Rt.jsx)("span",{className:"badge badge-sm ".concat(e.badge.color," ml-2"),children:e.badge.text})]}),(0,Rt.jsx)("p",{className:"text-sm text-base-content/60 mt-1",children:e.shortDescription||e.description})]},e.id)))})]},e.name)}))]})};var Ft={version:"0.18.5"},Bt=1200,jt=1252,Vt=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],Gt={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},Wt=function(e){-1!=Vt.indexOf(e)&&(jt=Gt[0]=e)};var zt=function(e){Bt=e,Wt(e)};function Ut(){zt(1200),Wt(1252)}function Ht(e){for(var t=[],n=0,i=e.length;n<i;++n)t[n]=e.charCodeAt(n);return t}function Xt(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n+1)+(e.charCodeAt(2*n)<<8));return t.join("")}var Yt,qt=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);return 255==t&&254==n?function(e){for(var t=[],n=0;n<e.length>>1;++n)t[n]=String.fromCharCode(e.charCodeAt(2*n)+(e.charCodeAt(2*n+1)<<8));return t.join("")}(e.slice(2)):254==t&&255==n?Xt(e.slice(2)):65279==t?e.slice(1):e},Kt=function(e){return String.fromCharCode(e)},$t=function(e){return String.fromCharCode(e)};var Zt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Qt(e){for(var t="",n=0,i=0,s=0,r=0,a=0,o=0,l=0,c=0;c<e.length;)r=(n=e.charCodeAt(c++))>>2,a=(3&n)<<4|(i=e.charCodeAt(c++))>>4,o=(15&i)<<2|(s=e.charCodeAt(c++))>>6,l=63&s,isNaN(i)?o=l=64:isNaN(s)&&(l=64),t+=Zt.charAt(r)+Zt.charAt(a)+Zt.charAt(o)+Zt.charAt(l);return t}function Jt(e){var t="",n=0,i=0,s=0,r=0,a=0,o=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var l=0;l<e.length;)n=Zt.indexOf(e.charAt(l++))<<2|(r=Zt.indexOf(e.charAt(l++)))>>4,t+=String.fromCharCode(n),i=(15&r)<<4|(a=Zt.indexOf(e.charAt(l++)))>>2,64!==a&&(t+=String.fromCharCode(i)),s=(3&a)<<6|(o=Zt.indexOf(e.charAt(l++))),64!==o&&(t+=String.fromCharCode(s));return t}var en=function(){return"undefined"!==typeof Buffer&&"undefined"!==typeof process&&"undefined"!==typeof process.versions&&!!process.versions.node}(),tn=function(){if("undefined"!==typeof Buffer){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch(aC){e=!0}return e?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function nn(e){return en?Buffer.alloc?Buffer.alloc(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}function sn(e){return en?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):"undefined"!=typeof Uint8Array?new Uint8Array(e):new Array(e)}var rn=function(e){return en?tn(e,"binary"):e.split("").map((function(e){return 255&e.charCodeAt(0)}))};function an(e){if(Array.isArray(e))return e.map((function(e){return String.fromCharCode(e)})).join("");for(var t=[],n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function on(e){if("undefined"==typeof ArrayBuffer)throw new Error("Unsupported");if(e instanceof ArrayBuffer)return on(new Uint8Array(e));for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t}var ln=en?function(e){return Buffer.concat(e.map((function(e){return Buffer.isBuffer(e)?e:tn(e)})))}:function(e){if("undefined"!==typeof Uint8Array){var t=0,n=0;for(t=0;t<e.length;++t)n+=e[t].length;var i=new Uint8Array(n),s=0;for(t=0,n=0;t<e.length;n+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)i.set(e[t],n);else{if("string"==typeof e[t])throw"wtf";i.set(new Uint8Array(e[t]),n)}return i}return[].concat.apply([],e.map((function(e){return Array.isArray(e)?e:[].slice.call(e)})))};var cn=/\u0000/g,hn=/[\u0001-\u0006]/g;function un(e){for(var t="",n=e.length-1;n>=0;)t+=e.charAt(n--);return t}function dn(e,t){var n=""+e;return n.length>=t?n:Si("0",t-n.length)+n}function fn(e,t){var n=""+e;return n.length>=t?n:Si(" ",t-n.length)+n}function pn(e,t){var n=""+e;return n.length>=t?n:n+Si(" ",t-n.length)}var mn=Math.pow(2,32);function gn(e,t){return e>mn||e<-mn?function(e,t){var n=""+Math.round(e);return n.length>=t?n:Si("0",t-n.length)+n}(e,t):function(e,t){var n=""+e;return n.length>=t?n:Si("0",t-n.length)+n}(Math.round(e),t)}function bn(e,t){return t=t||0,e.length>=7+t&&103===(32|e.charCodeAt(t))&&101===(32|e.charCodeAt(t+1))&&110===(32|e.charCodeAt(t+2))&&101===(32|e.charCodeAt(t+3))&&114===(32|e.charCodeAt(t+4))&&97===(32|e.charCodeAt(t+5))&&108===(32|e.charCodeAt(t+6))}var vn=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],yn=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];var xn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "'},Sn={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},wn={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function En(e,t,n){for(var i=e<0?-1:1,s=e*i,r=0,a=1,o=0,l=1,c=0,h=0,u=Math.floor(s);c<t&&(o=(u=Math.floor(s))*a+r,h=u*c+l,!(s-u<5e-8));)s=1/(s-u),r=a,a=o,l=c,c=h;if(h>t&&(c>t?(h=l,o=r):(h=c,o=a)),!n)return[0,i*o,h];var d=Math.floor(i*o/h);return[d,i*o-d*h,h]}function _n(e,t,n){if(e>2958465||e<0)return null;var i=0|e,s=Math.floor(86400*(e-i)),r=0,a=[],o={D:i,T:s,u:86400*(e-i)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(i+=1462),o.u>.9999&&(o.u=0,86400==++s&&(o.T=s=0,++i,++o.D)),60===i)a=n?[1317,10,29]:[1900,2,29],r=3;else if(0===i)a=n?[1317,8,29]:[1900,1,0],r=6;else{i>60&&--i;var l=new Date(1900,0,1);l.setDate(l.getDate()+i-1),a=[l.getFullYear(),l.getMonth()+1,l.getDate()],r=l.getDay(),i<60&&(r=(r+6)%7),n&&(r=function(e,t){t[0]-=581;var n=e.getDay();e<60&&(n=(n+6)%7);return n}(l,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=r,o}var Tn=new Date(1899,11,31,0,0,0),Mn=Tn.getTime(),Cn=new Date(1900,2,1,0,0,0);function An(e,t){var n=e.getTime();return t?n-=1262304e5:e>=Cn&&(n+=864e5),(n-(Mn+6e4*(e.getTimezoneOffset()-Tn.getTimezoneOffset())))/864e5}function Pn(e){return-1==e.indexOf(".")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Nn(e){var t,n=Math.floor(Math.log(Math.abs(e))*Math.LOG10E);return t=n>=-4&&n<=-1?e.toPrecision(10+n):Math.abs(n)<=9?function(e){var t=e<0?12:11,n=Pn(e.toFixed(12));return n.length<=t||(n=e.toPrecision(10)).length<=t?n:e.toExponential(5)}(e):10===n?e.toFixed(10).substr(0,12):function(e){var t=Pn(e.toFixed(11));return t.length>(e<0?12:11)||"0"===t||"-0"===t?e.toPrecision(6):t}(e),Pn(function(e){return-1==e.indexOf("E")?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}(t.toUpperCase()))}function kn(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(0|e)===e?e.toString(10):Nn(e);case"undefined":return"";case"object":if(null==e)return"";if(e instanceof Date)return Qn(14,An(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Ln(e,t,n,i){var s,r="",a=0,o=0,l=n.y,c=0;switch(e){case 98:l=n.y+543;case 121:switch(t.length){case 1:case 2:s=l%100,c=2;break;default:s=l%1e4,c=4}break;case 109:switch(t.length){case 1:case 2:s=n.m,c=t.length;break;case 3:return yn[n.m-1][1];case 5:return yn[n.m-1][0];default:return yn[n.m-1][2]}break;case 100:switch(t.length){case 1:case 2:s=n.d,c=t.length;break;case 3:return vn[n.q][0];default:return vn[n.q][1]}break;case 104:switch(t.length){case 1:case 2:s=1+(n.H+11)%12,c=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:s=n.H,c=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:s=n.M,c=t.length;break;default:throw"bad minute format: "+t}break;case 115:if("s"!=t&&"ss"!=t&&".0"!=t&&".00"!=t&&".000"!=t)throw"bad second format: "+t;return 0!==n.u||"s"!=t&&"ss"!=t?(o=i>=2?3===i?1e3:100:1===i?10:1,(a=Math.round(o*(n.S+n.u)))>=60*o&&(a=0),"s"===t?0===a?"0":""+a/o:(r=dn(a,2+i),"ss"===t?r.substr(0,2):"."+r.substr(2,t.length-1))):dn(n.S,t.length);case 90:switch(t){case"[h]":case"[hh]":s=24*n.D+n.H;break;case"[m]":case"[mm]":s=60*(24*n.D+n.H)+n.M;break;case"[s]":case"[ss]":s=60*(60*(24*n.D+n.H)+n.M)+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+t}c=3===t.length?1:2;break;case 101:s=l,c=1}return c>0?dn(s,c):""}function In(e){if(e.length<=3)return e;for(var t=e.length%3,n=e.substr(0,t);t!=e.length;t+=3)n+=(n.length>0?",":"")+e.substr(t,3);return n}var Rn=/%/g;function On(e,t){var n,i=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+On(e,-t);var s=e.indexOf(".");-1===s&&(s=e.indexOf("E"));var r=Math.floor(Math.log(t)*Math.LOG10E)%s;if(r<0&&(r+=s),-1===(n=(t/Math.pow(10,r)).toPrecision(i+1+(s+r)%s)).indexOf("e")){var a=Math.floor(Math.log(t)*Math.LOG10E);for(-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+r):n+="E+"+(a-r);"0."===n.substr(0,2);)n=(n=n.charAt(0)+n.substr(2,s)+"."+n.substr(2+s)).replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,n,i){return t+n+i.substr(0,(s+r)%s)+"."+i.substr(r)+"E"}))}else n=t.toExponential(i);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var Dn=/# (\?+)( ?)\/( ?)(\d+)/;var Fn=/^#*0*\.([0#]+)/,Bn=/\).*[0#]/,jn=/\(###\) ###\\?-####/;function Vn(e){for(var t,n="",i=0;i!=e.length;++i)switch(t=e.charCodeAt(i)){case 35:break;case 63:n+=" ";break;case 48:n+="0";break;default:n+=String.fromCharCode(t)}return n}function Gn(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n}function Wn(e,t){var n=e-Math.floor(e),i=Math.pow(10,t);return t<(""+Math.round(n*i)).length?0:Math.round(n*i)}function zn(e,t,n){if(40===e.charCodeAt(0)&&!t.match(Bn)){var i=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?zn("n",i,n):"("+zn("n",i,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var i=t.length-1;44===t.charCodeAt(i-1);)--i;return Xn(e,t.substr(0,i),n/Math.pow(10,3*(t.length-i)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var i=t.replace(Rn,""),s=t.length-i.length;return Xn(e,i,n*Math.pow(10,2*s))+Si("%",s)}(e,t,n);if(-1!==t.indexOf("E"))return On(t,n);if(36===t.charCodeAt(0))return"$"+zn(e,t.substr(" "==t.charAt(1)?2:1),n);var s,r,a,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+gn(l,t.length);if(t.match(/^[#?]+$/))return"0"===(s=gn(n,0))&&(s=""),s.length>t.length?s:Vn(t.substr(0,t.length-s.length))+s;if(r=t.match(Dn))return function(e,t,n){var i=parseInt(e[4],10),s=Math.round(t*i),r=Math.floor(s/i),a=s-r*i,o=i;return n+(0===r?"":""+r)+" "+(0===a?Si(" ",e[1].length+1+e[4].length):fn(a,e[1].length)+e[2]+"/"+e[3]+dn(o,e[4].length))}(r,l,c);if(t.match(/^#+0+$/))return c+gn(l,t.length-t.indexOf("0"));if(r=t.match(Fn))return s=Gn(n,r[1].length).replace(/^([^\.]+)$/,"$1."+Vn(r[1])).replace(/\.$/,"."+Vn(r[1])).replace(/\.(\d*)$/,(function(e,t){return"."+t+Si("0",Vn(r[1]).length-t.length)})),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),r=t.match(/^(0*)\.(#*)$/))return c+Gn(l,r[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,r[1].length?"0.":".");if(r=t.match(/^#{1,3},##0(\.?)$/))return c+In(gn(l,0));if(r=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+zn(e,t,-n):In(""+(Math.floor(n)+function(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}(n,r[1].length)))+"."+dn(Wn(n,r[1].length),r[1].length);if(r=t.match(/^#,#*,#0/))return zn(e,t.replace(/^#,#*,/,""),n);if(r=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=un(zn(e,t.replace(/[\\-]/g,""),n)),a=0,un(un(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return a<s.length?s.charAt(a++):"0"===e?"0":""})));if(t.match(jn))return"("+(s=zn(e,"##########",n)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var h="";if(r=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(r[4].length,7),o=En(l,Math.pow(10,a)-1,!1),s=""+c," "==(h=Xn("n",r[1],o[1])).charAt(h.length-1)&&(h=h.substr(0,h.length-1)+"0"),s+=h+r[2]+"/"+r[3],(h=pn(o[2],a)).length<r[4].length&&(h=Vn(r[4].substr(r[4].length-h.length))+h),s+=h;if(r=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(r[1].length,r[4].length),7),c+((o=En(l,Math.pow(10,a)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?fn(o[1],a)+r[2]+"/"+r[3]+pn(o[2],a):Si(" ",2*a+1+r[2].length+r[3].length));if(r=t.match(/^[#0?]+$/))return s=gn(n,0),t.length<=s.length?s:Vn(t.substr(0,t.length-s.length))+s;if(r=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(r[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var u=t.indexOf(".")-a,d=t.length-s.length-u;return Vn(t.substr(0,u)+s+t.substr(t.length-d))}if(r=t.match(/^00,000\.([#0]*0)$/))return a=Wn(n,r[1].length),n<0?"-"+zn(e,t,-n):In(function(e){return e<2147483647&&e>-2147483648?""+(e>=0?0|e:e-1|0):""+Math.floor(e)}(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?dn(0,3-e.length):"")+e}))+"."+dn(a,r[1].length);switch(t){case"###,##0.00":return zn(e,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var f=In(gn(l,0));return"0"!==f?c+f:"";case"###,###.00":return zn(e,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return zn(e,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Un(e,t){var n,i=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(0==t)return"0.0E+0";if(t<0)return"-"+Un(e,-t);var s=e.indexOf(".");-1===s&&(s=e.indexOf("E"));var r=Math.floor(Math.log(t)*Math.LOG10E)%s;if(r<0&&(r+=s),!(n=(t/Math.pow(10,r)).toPrecision(i+1+(s+r)%s)).match(/[Ee]/)){var a=Math.floor(Math.log(t)*Math.LOG10E);-1===n.indexOf(".")?n=n.charAt(0)+"."+n.substr(1)+"E+"+(a-n.length+r):n+="E+"+(a-r),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,(function(e,t,n,i){return t+n+i.substr(0,(s+r)%s)+"."+i.substr(r)+"E"}))}else n=t.toExponential(i);return e.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),e.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function Hn(e,t,n){if(40===e.charCodeAt(0)&&!t.match(Bn)){var i=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?Hn("n",i,n):"("+Hn("n",i,-n)+")"}if(44===t.charCodeAt(t.length-1))return function(e,t,n){for(var i=t.length-1;44===t.charCodeAt(i-1);)--i;return Xn(e,t.substr(0,i),n/Math.pow(10,3*(t.length-i)))}(e,t,n);if(-1!==t.indexOf("%"))return function(e,t,n){var i=t.replace(Rn,""),s=t.length-i.length;return Xn(e,i,n*Math.pow(10,2*s))+Si("%",s)}(e,t,n);if(-1!==t.indexOf("E"))return Un(t,n);if(36===t.charCodeAt(0))return"$"+Hn(e,t.substr(" "==t.charAt(1)?2:1),n);var s,r,a,o,l=Math.abs(n),c=n<0?"-":"";if(t.match(/^00+$/))return c+dn(l,t.length);if(t.match(/^[#?]+$/))return s=""+n,0===n&&(s=""),s.length>t.length?s:Vn(t.substr(0,t.length-s.length))+s;if(r=t.match(Dn))return function(e,t,n){return n+(0===t?"":""+t)+Si(" ",e[1].length+2+e[4].length)}(r,l,c);if(t.match(/^#+0+$/))return c+dn(l,t.length-t.indexOf("0"));if(r=t.match(Fn))return s=(s=(""+n).replace(/^([^\.]+)$/,"$1."+Vn(r[1])).replace(/\.$/,"."+Vn(r[1]))).replace(/\.(\d*)$/,(function(e,t){return"."+t+Si("0",Vn(r[1]).length-t.length)})),-1!==t.indexOf("0.")?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),r=t.match(/^(0*)\.(#*)$/))return c+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,r[1].length?"0.":".");if(r=t.match(/^#{1,3},##0(\.?)$/))return c+In(""+l);if(r=t.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+Hn(e,t,-n):In(""+n)+"."+Si("0",r[1].length);if(r=t.match(/^#,#*,#0/))return Hn(e,t.replace(/^#,#*,/,""),n);if(r=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=un(Hn(e,t.replace(/[\\-]/g,""),n)),a=0,un(un(t.replace(/\\/g,"")).replace(/[0#]/g,(function(e){return a<s.length?s.charAt(a++):"0"===e?"0":""})));if(t.match(jn))return"("+(s=Hn(e,"##########",n)).substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var h="";if(r=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(r[4].length,7),o=En(l,Math.pow(10,a)-1,!1),s=""+c," "==(h=Xn("n",r[1],o[1])).charAt(h.length-1)&&(h=h.substr(0,h.length-1)+"0"),s+=h+r[2]+"/"+r[3],(h=pn(o[2],a)).length<r[4].length&&(h=Vn(r[4].substr(r[4].length-h.length))+h),s+=h;if(r=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(r[1].length,r[4].length),7),c+((o=En(l,Math.pow(10,a)-1,!0))[0]||(o[1]?"":"0"))+" "+(o[1]?fn(o[1],a)+r[2]+"/"+r[3]+pn(o[2],a):Si(" ",2*a+1+r[2].length+r[3].length));if(r=t.match(/^[#0?]+$/))return s=""+n,t.length<=s.length?s:Vn(t.substr(0,t.length-s.length))+s;if(r=t.match(/^([#0]+)\.([#0]+)$/)){s=""+n.toFixed(Math.min(r[2].length,10)).replace(/([^0])0+$/,"$1"),a=s.indexOf(".");var u=t.indexOf(".")-a,d=t.length-s.length-u;return Vn(t.substr(0,u)+s+t.substr(t.length-d))}if(r=t.match(/^00,000\.([#0]*0)$/))return n<0?"-"+Hn(e,t,-n):In(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,(function(e){return"00,"+(e.length<3?dn(0,3-e.length):"")+e}))+"."+dn(0,r[1].length);switch(t){case"###,###":case"##,###":case"#,###":var f=In(""+l);return"0"!==f?c+f:"";default:if(t.match(/\.[0#?]*$/))return Hn(e,t.slice(0,t.lastIndexOf(".")),n)+Vn(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Xn(e,t,n){return(0|n)===n?Hn(e,t,n):zn(e,t,n)}var Yn=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function qn(e){for(var t=0,n="",i="";t<e.length;)switch(n=e.charAt(t)){case"G":bn(e,t)&&(t+=6),t++;break;case'"':for(;34!==e.charCodeAt(++t)&&t<e.length;);++t;break;case"\\":case"_":t+=2;break;case"@":++t;break;case"B":case"b":if("1"===e.charAt(t+1)||"2"===e.charAt(t+1))return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"\u4e0a":if("A/P"===e.substr(t,3).toUpperCase())return!0;if("AM/PM"===e.substr(t,5).toUpperCase())return!0;if("\u4e0a\u5348/\u4e0b\u5348"===e.substr(t,5).toUpperCase())return!0;++t;break;case"[":for(i=n;"]"!==e.charAt(t++)&&t<e.length;)i+=e.charAt(t);if(i.match(Yn))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(n=e.charAt(++t))>-1||"\\"==n&&"-"==e.charAt(t+1)&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===n;);break;case"*":++t," "!=e.charAt(t)&&"*"!=e.charAt(t)||++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;default:++t}return!1}var Kn=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function $n(e,t){if(null==t)return!1;var n=parseFloat(t[2]);switch(t[1]){case"=":if(e==n)return!0;break;case">":if(e>n)return!0;break;case"<":if(e<n)return!0;break;case"<>":if(e!=n)return!0;break;case">=":if(e>=n)return!0;break;case"<=":if(e<=n)return!0}return!1}function Zn(e,t){var n=function(e){for(var t=[],n=!1,i=0,s=0;i<e.length;++i)switch(e.charCodeAt(i)){case 34:n=!n;break;case 95:case 42:case 92:++i;break;case 59:t[t.length]=e.substr(s,i-s),s=i+1}if(t[t.length]=e.substr(s),!0===n)throw new Error("Format |"+e+"| unterminated string ");return t}(e),i=n.length,s=n[i-1].indexOf("@");if(i<4&&s>-1&&--i,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if("number"!==typeof t)return[4,4===n.length||s>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=s>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=s>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=s>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"]}var r=t>0?n[0]:t<0?n[1]:n[2];if(-1===n[0].indexOf("[")&&-1===n[1].indexOf("["))return[i,r];if(null!=n[0].match(/\[[=<>]/)||null!=n[1].match(/\[[=<>]/)){var a=n[0].match(Kn),o=n[1].match(Kn);return $n(t,a)?[i,n[0]]:$n(t,o)?[i,n[1]]:[i,n[null!=a&&null!=o?2:1]]}return[i,r]}function Qn(e,t,n){null==n&&(n={});var i="";switch(typeof e){case"string":i="m/d/yy"==e&&n.dateNF?n.dateNF:e;break;case"number":null==(i=14==e&&n.dateNF?n.dateNF:(null!=n.table?n.table:xn)[e])&&(i=n.table&&n.table[Sn[e]]||xn[Sn[e]]),null==i&&(i=wn[e]||"General")}if(bn(i,0))return kn(t,n);t instanceof Date&&(t=An(t,n.date1904));var s=Zn(i,t);if(bn(s[1]))return kn(t,n);if(!0===t)t="TRUE";else if(!1===t)t="FALSE";else if(""===t||null==t)return"";return function(e,t,n,i){for(var s,r,a,o=[],l="",c=0,h="",u="t",d="H";c<e.length;)switch(h=e.charAt(c)){case"G":if(!bn(e,c))throw new Error("unrecognized character "+h+" in "+e);o[o.length]={t:"G",v:"General"},c+=7;break;case'"':for(l="";34!==(a=e.charCodeAt(++c))&&c<e.length;)l+=String.fromCharCode(a);o[o.length]={t:"t",v:l},++c;break;case"\\":var f=e.charAt(++c),p="("===f||")"===f?f:"t";o[o.length]={t:p,v:f},++c;break;case"_":o[o.length]={t:"t",v:" "},c+=2;break;case"@":o[o.length]={t:"T",v:t},++c;break;case"B":case"b":if("1"===e.charAt(c+1)||"2"===e.charAt(c+1)){if(null==s&&null==(s=_n(t,n,"2"===e.charAt(c+1))))return"";o[o.length]={t:"X",v:e.substr(c,2)},u=h,c+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":h=h.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0)return"";if(null==s&&null==(s=_n(t,n)))return"";for(l=h;++c<e.length&&e.charAt(c).toLowerCase()===h;)l+=h;"m"===h&&"h"===u.toLowerCase()&&(h="M"),"h"===h&&(h=d),o[o.length]={t:h,v:l},u=h;break;case"A":case"a":case"\u4e0a":var m={t:h,v:h};if(null==s&&(s=_n(t,n)),"A/P"===e.substr(c,3).toUpperCase()?(null!=s&&(m.v=s.H>=12?"P":"A"),m.t="T",d="h",c+=3):"AM/PM"===e.substr(c,5).toUpperCase()?(null!=s&&(m.v=s.H>=12?"PM":"AM"),m.t="T",c+=5,d="h"):"\u4e0a\u5348/\u4e0b\u5348"===e.substr(c,5).toUpperCase()?(null!=s&&(m.v=s.H>=12?"\u4e0b\u5348":"\u4e0a\u5348"),m.t="T",c+=5,d="h"):(m.t="t",++c),null==s&&"T"===m.t)return"";o[o.length]=m,u=h;break;case"[":for(l=h;"]"!==e.charAt(c++)&&c<e.length;)l+=e.charAt(c);if("]"!==l.slice(-1))throw'unterminated "[" block: |'+l+"|";if(l.match(Yn)){if(null==s&&null==(s=_n(t,n)))return"";o[o.length]={t:"Z",v:l.toLowerCase()},u=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",qn(e)||(o[o.length]={t:"t",v:l}));break;case".":if(null!=s){for(l=h;++c<e.length&&"0"===(h=e.charAt(c));)l+=h;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=h;++c<e.length&&"0#?.,E+-%".indexOf(h=e.charAt(c))>-1;)l+=h;o[o.length]={t:"n",v:l};break;case"?":for(l=h;e.charAt(++c)===h;)l+=h;o[o.length]={t:h,v:l},u=h;break;case"*":++c," "!=e.charAt(c)&&"*"!=e.charAt(c)||++c;break;case"(":case")":o[o.length]={t:1===i?"t":h,v:h},++c;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=h;c<e.length&&"0123456789".indexOf(e.charAt(++c))>-1;)l+=e.charAt(c);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:h,v:h},++c;break;case"$":o[o.length]={t:"t",v:"$"},++c;break;default:if(-1===",$-+/():!^&'~{}<>=\u20acacfijklopqrtuvwxzP".indexOf(h))throw new Error("unrecognized character "+h+" in "+e);o[o.length]={t:"t",v:h},++c}var g,b=0,v=0;for(c=o.length-1,u="t";c>=0;--c)switch(o[c].t){case"h":case"H":o[c].t=d,u="h",b<1&&(b=1);break;case"s":(g=o[c].v.match(/\.0+$/))&&(v=Math.max(v,g[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":u=o[c].t;break;case"m":"s"===u&&(o[c].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&o[c].v.match(/[Hh]/)&&(b=1),b<2&&o[c].v.match(/[Mm]/)&&(b=2),b<3&&o[c].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:s.u>=.5&&(s.u=0,++s.S),s.S>=60&&(s.S=0,++s.M),s.M>=60&&(s.M=0,++s.H);break;case 2:s.u>=.5&&(s.u=0,++s.S),s.S>=60&&(s.S=0,++s.M)}var y,x="";for(c=0;c<o.length;++c)switch(o[c].t){case"t":case"T":case" ":case"D":break;case"X":o[c].v="",o[c].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[c].v=Ln(o[c].t.charCodeAt(0),o[c].v,s,v),o[c].t="t";break;case"n":case"?":for(y=c+1;null!=o[y]&&("?"===(h=o[y].t)||"D"===h||(" "===h||"t"===h)&&null!=o[y+1]&&("?"===o[y+1].t||"t"===o[y+1].t&&"/"===o[y+1].v)||"("===o[c].t&&(" "===h||"n"===h||")"===h)||"t"===h&&("/"===o[y].v||" "===o[y].v&&null!=o[y+1]&&"?"==o[y+1].t));)o[c].v+=o[y].v,o[y]={v:"",t:";"},++y;x+=o[c].v,c=y-1;break;case"G":o[c].t="t",o[c].v=kn(t,n)}var S,w,E="";if(x.length>0){40==x.charCodeAt(0)?(S=t<0&&45===x.charCodeAt(0)?-t:t,w=Xn("n",x,S)):(w=Xn("n",x,S=t<0&&i>1?-t:t),S<0&&o[0]&&"t"==o[0].t&&(w=w.substr(1),o[0].v="-"+o[0].v)),y=w.length-1;var _=o.length;for(c=0;c<o.length;++c)if(null!=o[c]&&"t"!=o[c].t&&o[c].v.indexOf(".")>-1){_=c;break}var T=o.length;if(_===o.length&&-1===w.indexOf("E")){for(c=o.length-1;c>=0;--c)null!=o[c]&&-1!=="n?".indexOf(o[c].t)&&(y>=o[c].v.length-1?(y-=o[c].v.length,o[c].v=w.substr(y+1,o[c].v.length)):y<0?o[c].v="":(o[c].v=w.substr(0,y+1),y=-1),o[c].t="t",T=c);y>=0&&T<o.length&&(o[T].v=w.substr(0,y+1)+o[T].v)}else if(_!==o.length&&-1===w.indexOf("E")){for(y=w.indexOf(".")-1,c=_;c>=0;--c)if(null!=o[c]&&-1!=="n?".indexOf(o[c].t)){for(r=o[c].v.indexOf(".")>-1&&c===_?o[c].v.indexOf(".")-1:o[c].v.length-1,E=o[c].v.substr(r+1);r>=0;--r)y>=0&&("0"===o[c].v.charAt(r)||"#"===o[c].v.charAt(r))&&(E=w.charAt(y--)+E);o[c].v=E,o[c].t="t",T=c}for(y>=0&&T<o.length&&(o[T].v=w.substr(0,y+1)+o[T].v),y=w.indexOf(".")+1,c=_;c<o.length;++c)if(null!=o[c]&&(-1!=="n?(".indexOf(o[c].t)||c===_)){for(r=o[c].v.indexOf(".")>-1&&c===_?o[c].v.indexOf(".")+1:0,E=o[c].v.substr(0,r);r<o[c].v.length;++r)y<w.length&&(E+=w.charAt(y++));o[c].v=E,o[c].t="t",T=c}}}for(c=0;c<o.length;++c)null!=o[c]&&"n?".indexOf(o[c].t)>-1&&(S=i>1&&t<0&&c>0&&"-"===o[c-1].v?-t:t,o[c].v=Xn(o[c].t,o[c].v,S),o[c].t="t");var M="";for(c=0;c!==o.length;++c)null!=o[c]&&(M+=o[c].v);return M}(s[1],t,n,s[0])}function Jn(e,t){if("number"!=typeof t){t=+t||-1;for(var n=0;n<392;++n)if(void 0!=xn[n]){if(xn[n]==e){t=n;break}}else t<0&&(t=n);t<0&&(t=391)}return xn[t]=e,t}function ei(){var e;e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"\u4e0a\u5348/\u4e0b\u5348 "hh"\u6642"mm"\u5206"ss"\u79d2 "',xn=e}var ti={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},ni=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;var ii=function(){var e={};e.version="1.2.0";var t=function(){for(var e=0,t=new Array(256),n=0;256!=n;++n)e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=1&(e=n)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1)?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!==typeof Int32Array?new Int32Array(t):t}();var n=function(e){var t=0,n=0,i=0,s="undefined"!==typeof Int32Array?new Int32Array(4096):new Array(4096);for(i=0;256!=i;++i)s[i]=e[i];for(i=0;256!=i;++i)for(n=e[i],t=256+i;t<4096;t+=256)n=s[t]=n>>>8^e[255&n];var r=[];for(i=1;16!=i;++i)r[i-1]="undefined"!==typeof Int32Array?s.subarray(256*i,256*i+256):s.slice(256*i,256*i+256);return r}(t),i=n[0],s=n[1],r=n[2],a=n[3],o=n[4],l=n[5],c=n[6],h=n[7],u=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],b=n[14];return e.table=t,e.bstr=function(e,n){for(var i=~n,s=0,r=e.length;s<r;)i=i>>>8^t[255&(i^e.charCodeAt(s++))];return~i},e.buf=function(e,n){for(var v=~n,y=e.length-15,x=0;x<y;)v=b[e[x++]^255&v]^g[e[x++]^v>>8&255]^m[e[x++]^v>>16&255]^p[e[x++]^v>>>24]^f[e[x++]]^d[e[x++]]^u[e[x++]]^h[e[x++]]^c[e[x++]]^l[e[x++]]^o[e[x++]]^a[e[x++]]^r[e[x++]]^s[e[x++]]^i[e[x++]]^t[e[x++]];for(y+=15;x<y;)v=v>>>8^t[255&(v^e[x++])];return~v},e.str=function(e,n){for(var i=~n,s=0,r=e.length,a=0,o=0;s<r;)(a=e.charCodeAt(s++))<128?i=i>>>8^t[255&(i^a)]:a<2048?i=(i=i>>>8^t[255&(i^(192|a>>6&31))])>>>8^t[255&(i^(128|63&a))]:a>=55296&&a<57344?(a=64+(1023&a),o=1023&e.charCodeAt(s++),i=(i=(i=(i=i>>>8^t[255&(i^(240|a>>8&7))])>>>8^t[255&(i^(128|a>>2&63))])>>>8^t[255&(i^(128|o>>6&15|(3&a)<<4))])>>>8^t[255&(i^(128|63&o))]):i=(i=(i=i>>>8^t[255&(i^(224|a>>12&15))])>>>8^t[255&(i^(128|a>>6&63))])>>>8^t[255&(i^(128|63&a))];return~i},e}(),si=function(){var e,t={};function n(e){if("/"==e.charAt(e.length-1))return-1===e.slice(0,-1).indexOf("/")?e:n(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(0,t+1)}function i(e){if("/"==e.charAt(e.length-1))return i(e.slice(0,-1));var t=e.lastIndexOf("/");return-1===t?e:e.slice(t+1)}function s(e,t){"string"===typeof t&&(t=new Date(t));var n=t.getHours();n=(n=n<<6|t.getMinutes())<<5|t.getSeconds()>>>1,e.write_shift(2,n);var i=t.getFullYear()-1980;i=(i=i<<4|t.getMonth()+1)<<5|t.getDate(),e.write_shift(2,i)}function r(e){Qs(e,0);for(var t={},n=0;e.l<=e.length-4;){var i=e.read_shift(2),s=e.read_shift(2),r=e.l+s,a={};if(21589===i)1&(n=e.read_shift(1))&&(a.mtime=e.read_shift(4)),s>5&&(2&n&&(a.atime=e.read_shift(4)),4&n&&(a.ctime=e.read_shift(4))),a.mtime&&(a.mt=new Date(1e3*a.mtime));e.l=r,t[i]=a}return t}function a(){return e||(e={})}function o(e,t){if(80==e[0]&&75==e[1])return ie(e,t);if(109==(32|e[0])&&105==(32|e[1]))return function(e,t){if("mime-version:"!=w(e.slice(0,13)).toLowerCase())throw new Error("Unsupported MAD header");var n=t&&t.root||"",i=(en&&Buffer.isBuffer(e)?e.toString("binary"):w(e)).split("\r\n"),s=0,r="";for(s=0;s<i.length;++s)if(r=i[s],/^Content-Location:/i.test(r)&&(r=r.slice(r.indexOf("file")),n||(n=r.slice(0,r.lastIndexOf("/")+1)),r.slice(0,n.length)!=n))for(;n.length>0&&(n=(n=n.slice(0,n.length-1)).slice(0,n.lastIndexOf("/")+1),r.slice(0,n.length)!=n););var a=(i[1]||"").match(/boundary="(.*?)"/);if(!a)throw new Error("MAD cannot find boundary");var o="--"+(a[1]||""),l=[],c=[],h={FileIndex:l,FullPaths:c};d(h);var u,f=0;for(s=0;s<i.length;++s){var p=i[s];p!==o&&p!==o+"--"||(f++&&ce(h,i.slice(u,s),n),u=s)}return h}(e,t);if(e.length<512)throw new Error("CFB file size "+e.length+" < 512");var n,i,s,r,a,o,f=512,p=[],m=e.slice(0,512);Qs(m,0);var g=function(e){if(80==e[e.l]&&75==e[e.l+1])return[0,0];e.chk(v,"Header Signature: "),e.l+=16;var t=e.read_shift(2,"u");return[e.read_shift(2,"u"),t]}(m);switch(n=g[0]){case 3:f=512;break;case 4:f=4096;break;case 0:if(0==g[1])return ie(e,t);default:throw new Error("Major Version: Expected 3 or 4 saw "+n)}512!==f&&Qs(m=e.slice(0,f),28);var y=e.slice(0,f);!function(e,t){var n=9;switch(e.l+=2,n=e.read_shift(2)){case 9:if(3!=t)throw new Error("Sector Shift: Expected 9 saw "+n);break;case 12:if(4!=t)throw new Error("Sector Shift: Expected 12 saw "+n);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+n)}e.chk("0600","Mini Sector Shift: "),e.chk("000000000000","Reserved: ")}(m,n);var x=m.read_shift(4,"i");if(3===n&&0!==x)throw new Error("# Directory Sectors: Expected 0 saw "+x);m.l+=4,r=m.read_shift(4,"i"),m.l+=4,m.chk("00100000","Mini Stream Cutoff Size: "),a=m.read_shift(4,"i"),i=m.read_shift(4,"i"),o=m.read_shift(4,"i"),s=m.read_shift(4,"i");for(var S=-1,E=0;E<109&&!((S=m.read_shift(4,"i"))<0);++E)p[E]=S;var _=function(e,t){for(var n=Math.ceil(e.length/t)-1,i=[],s=1;s<n;++s)i[s-1]=e.slice(s*t,(s+1)*t);return i[n-1]=e.slice(n*t),i}(e,f);c(o,s,_,f,p);var T=function(e,t,n,i){var s=e.length,r=[],a=[],o=[],l=[],c=i-1,h=0,u=0,d=0,f=0;for(h=0;h<s;++h)if(o=[],(d=h+t)>=s&&(d-=s),!a[d]){l=[];var p=[];for(u=d;u>=0;){p[u]=!0,a[u]=!0,o[o.length]=u,l.push(e[u]);var m=n[Math.floor(4*u/i)];if(i<4+(f=4*u&c))throw new Error("FAT boundary crossed: "+u+" 4 "+i);if(!e[m])break;if(p[u=Us(e[m],f)])break}r[d]={nodes:o,data:ys([l])}}return r}(_,r,p,f);T[r].name="!Directory",i>0&&a!==b&&(T[a].name="!MiniFAT"),T[p[0]].name="!FAT",T.fat_addrs=p,T.ssz=f;var M=[],C=[],A=[];!function(e,t,n,i,s,r,a,o){for(var c,d=0,f=i.length?2:0,p=t[e].data,m=0,g=0;m<p.length;m+=128){var v=p.slice(m,m+128);Qs(v,64),g=v.read_shift(2),c=Ss(v,0,g-f),i.push(c);var y={name:c,type:v.read_shift(1),color:v.read_shift(1),L:v.read_shift(4,"i"),R:v.read_shift(4,"i"),C:v.read_shift(4,"i"),clsid:v.read_shift(16),state:v.read_shift(4,"i"),start:0,size:0};0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(y.ct=u(v,v.l-8)),0!==v.read_shift(2)+v.read_shift(2)+v.read_shift(2)+v.read_shift(2)&&(y.mt=u(v,v.l-8)),y.start=v.read_shift(4,"i"),y.size=v.read_shift(4,"i"),y.size<0&&y.start<0&&(y.size=y.type=0,y.start=b,y.name=""),5===y.type?(d=y.start,s>0&&d!==b&&(t[d].name="!StreamData")):y.size>=4096?(y.storage="fat",void 0===t[y.start]&&(t[y.start]=h(n,y.start,t.fat_addrs,t.ssz)),t[y.start].name=y.name,y.content=t[y.start].data.slice(0,y.size)):(y.storage="minifat",y.size<0?y.size=0:d!==b&&y.start!==b&&t[d]&&(y.content=l(y,t[d].data,(t[o]||{}).data))),y.content&&Qs(y.content,0),r[c]=y,a.push(y)}}(r,T,_,M,i,{},C,a),function(e,t,n){for(var i=0,s=0,r=0,a=0,o=0,l=n.length,c=[],h=[];i<l;++i)c[i]=h[i]=i,t[i]=n[i];for(;o<h.length;++o)s=e[i=h[o]].L,r=e[i].R,a=e[i].C,c[i]===i&&(-1!==s&&c[s]!==s&&(c[i]=c[s]),-1!==r&&c[r]!==r&&(c[i]=c[r])),-1!==a&&(c[a]=i),-1!==s&&i!=c[i]&&(c[s]=c[i],h.lastIndexOf(s)<o&&h.push(s)),-1!==r&&i!=c[i]&&(c[r]=c[i],h.lastIndexOf(r)<o&&h.push(r));for(i=1;i<l;++i)c[i]===i&&(-1!==r&&c[r]!==r?c[i]=c[r]:-1!==s&&c[s]!==s&&(c[i]=c[s]));for(i=1;i<l;++i)if(0!==e[i].type){if((o=i)!=c[o])do{o=c[o],t[i]=t[o]+"/"+t[i]}while(0!==o&&-1!==c[o]&&o!=c[o]);c[i]=-1}for(t[0]+="/",i=1;i<l;++i)2!==e[i].type&&(t[i]+="/")}(C,A,M),M.shift();var P={FileIndex:C,FullPaths:A};return t&&t.raw&&(P.raw={header:y,sectors:_}),P}function l(e,t,n){for(var i=e.start,s=e.size,r=[],a=i;n&&s>0&&a>=0;)r.push(t.slice(a*g,a*g+g)),s-=g,a=Us(n,4*a);return 0===r.length?er(0):ln(r).slice(0,e.size)}function c(e,t,n,i,s){var r=b;if(e===b){if(0!==t)throw new Error("DIFAT chain shorter than expected")}else if(-1!==e){var a=n[e],o=(i>>>2)-1;if(!a)return;for(var l=0;l<o&&(r=Us(a,4*l))!==b;++l)s.push(r);c(Us(a,i-4),t-1,n,i,s)}}function h(e,t,n,i,s){var r=[],a=[];s||(s=[]);var o=i-1,l=0,c=0;for(l=t;l>=0;){s[l]=!0,r[r.length]=l,a.push(e[l]);var h=n[Math.floor(4*l/i)];if(i<4+(c=4*l&o))throw new Error("FAT boundary crossed: "+l+" 4 "+i);if(!e[h])break;l=Us(e[h],c)}return{nodes:r,data:ys([a])}}function u(e,t){return new Date(1e3*(zs(e,t+4)/1e7*Math.pow(2,32)+zs(e,t)/1e7-11644473600))}function d(e,t){var n=t||{},i=n.root||"Root Entry";if(e.FullPaths||(e.FullPaths=[]),e.FileIndex||(e.FileIndex=[]),e.FullPaths.length!==e.FileIndex.length)throw new Error("inconsistent CFB structure");0===e.FullPaths.length&&(e.FullPaths[0]=i+"/",e.FileIndex[0]={name:i,type:5}),n.CLSID&&(e.FileIndex[0].clsid=n.CLSID),function(e){var t="\x01Sh33tJ5";if(si.find(e,"/"+t))return;var n=er(4);n[0]=55,n[1]=n[3]=50,n[2]=54,e.FileIndex.push({name:t,type:2,content:n,size:4,L:69,R:69,C:69}),e.FullPaths.push(e.FullPaths[0]+t),f(e)}(e)}function f(e,t){d(e);for(var s=!1,r=!1,a=e.FullPaths.length-1;a>=0;--a){var o=e.FileIndex[a];switch(o.type){case 0:r?s=!0:(e.FileIndex.pop(),e.FullPaths.pop());break;case 1:case 2:case 5:r=!0,isNaN(o.R*o.L*o.C)&&(s=!0),o.R>-1&&o.L>-1&&o.R==o.L&&(s=!0);break;default:s=!0}}if(s||t){var l=new Date(1987,1,19),c=0,h=Object.create?Object.create(null):{},u=[];for(a=0;a<e.FullPaths.length;++a)h[e.FullPaths[a]]=!0,0!==e.FileIndex[a].type&&u.push([e.FullPaths[a],e.FileIndex[a]]);for(a=0;a<u.length;++a){var f=n(u[a][0]);(r=h[f])||(u.push([f,{name:i(f).replace("/",""),type:1,clsid:x,ct:l,mt:l,content:null}]),h[f]=!0)}for(u.sort((function(e,t){return function(e,t){for(var n=e.split("/"),i=t.split("/"),s=0,r=0,a=Math.min(n.length,i.length);s<a;++s){if(r=n[s].length-i[s].length)return r;if(n[s]!=i[s])return n[s]<i[s]?-1:1}return n.length-i.length}(e[0],t[0])})),e.FullPaths=[],e.FileIndex=[],a=0;a<u.length;++a)e.FullPaths[a]=u[a][0],e.FileIndex[a]=u[a][1];for(a=0;a<u.length;++a){var p=e.FileIndex[a],m=e.FullPaths[a];if(p.name=i(m).replace("/",""),p.L=p.R=p.C=-(p.color=1),p.size=p.content?p.content.length:0,p.start=0,p.clsid=p.clsid||x,0===a)p.C=u.length>1?1:-1,p.size=0,p.type=5;else if("/"==m.slice(-1)){for(c=a+1;c<u.length&&n(e.FullPaths[c])!=m;++c);for(p.C=c>=u.length?-1:c,c=a+1;c<u.length&&n(e.FullPaths[c])!=n(m);++c);p.R=c>=u.length?-1:c,p.type=1}else n(e.FullPaths[a+1]||"")==n(m)&&(p.R=a+1),p.type=2}}}function p(e,t){var n=t||{};if("mad"==n.fileType)return function(e,t){for(var n=t||{},i=n.boundary||"SheetJS",s=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+(i="------="+i).slice(2)+'"',"","",""],r=e.FullPaths[0],a=r,o=e.FileIndex[0],l=1;l<e.FullPaths.length;++l)if(a=e.FullPaths[l].slice(r.length),(o=e.FileIndex[l]).size&&o.content&&"\x01Sh33tJ5"!=a){a=a.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,(function(e){return"_x"+e.charCodeAt(0).toString(16)+"_"})).replace(/[\u0080-\uFFFF]/g,(function(e){return"_u"+e.charCodeAt(0).toString(16)+"_"}));for(var c=o.content,h=en&&Buffer.isBuffer(c)?c.toString("binary"):w(c),u=0,d=Math.min(1024,h.length),f=0,p=0;p<=d;++p)(f=h.charCodeAt(p))>=32&&f<128&&++u;var m=u>=4*d/5;s.push(i),s.push("Content-Location: "+(n.root||"file:///C:/SheetJS/")+a),s.push("Content-Transfer-Encoding: "+(m?"quoted-printable":"base64")),s.push("Content-Type: "+ae(o,a)),s.push(""),s.push(m?le(h):oe(h))}return s.push(i+"--\r\n"),s.join("\r\n")}(e,n);if(f(e),"zip"===n.fileType)return function(e,t){var n=t||{},i=[],r=[],a=er(1),o=n.compression?8:0,l=0;0;var c=0,h=0,u=0,d=0,f=e.FullPaths[0],p=f,m=e.FileIndex[0],g=[],b=0;for(c=1;c<e.FullPaths.length;++c)if(p=e.FullPaths[c].slice(f.length),(m=e.FileIndex[c]).size&&m.content&&"\x01Sh33tJ5"!=p){var v=u,y=er(p.length);for(h=0;h<p.length;++h)y.write_shift(1,127&p.charCodeAt(h));y=y.slice(0,y.l),g[d]=ii.buf(m.content,0);var x=m.content;8==o&&(x=E(x)),(a=er(30)).write_shift(4,67324752),a.write_shift(2,20),a.write_shift(2,l),a.write_shift(2,o),m.mt?s(a,m.mt):a.write_shift(4,0),a.write_shift(-4,8&l?0:g[d]),a.write_shift(4,8&l?0:x.length),a.write_shift(4,8&l?0:m.content.length),a.write_shift(2,y.length),a.write_shift(2,0),u+=a.length,i.push(a),u+=y.length,i.push(y),u+=x.length,i.push(x),8&l&&((a=er(12)).write_shift(-4,g[d]),a.write_shift(4,x.length),a.write_shift(4,m.content.length),u+=a.l,i.push(a)),(a=er(46)).write_shift(4,33639248),a.write_shift(2,0),a.write_shift(2,20),a.write_shift(2,l),a.write_shift(2,o),a.write_shift(4,0),a.write_shift(-4,g[d]),a.write_shift(4,x.length),a.write_shift(4,m.content.length),a.write_shift(2,y.length),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(4,0),a.write_shift(4,v),b+=a.l,r.push(a),b+=y.length,r.push(y),++d}return a=er(22),a.write_shift(4,101010256),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,d),a.write_shift(2,d),a.write_shift(4,b),a.write_shift(4,u),a.write_shift(2,0),ln([ln(i),ln(r),a])}(e,n);var i=function(e){for(var t=0,n=0,i=0;i<e.FileIndex.length;++i){var s=e.FileIndex[i];if(s.content){var r=s.content.length;r>0&&(r<4096?t+=r+63>>6:n+=r+511>>9)}}for(var a=e.FullPaths.length+3>>2,o=t+127>>7,l=(t+7>>3)+n+a+o,c=l+127>>7,h=c<=109?0:Math.ceil((c-109)/127);l+c+h+127>>7>c;)h=++c<=109?0:Math.ceil((c-109)/127);var u=[1,h,c,o,a,n,t,0];return e.FileIndex[0].size=t<<6,u[7]=(e.FileIndex[0].start=u[0]+u[1]+u[2]+u[3]+u[4]+u[5])+(u[6]+7>>3),u}(e),r=er(i[7]<<9),a=0,o=0;for(a=0;a<8;++a)r.write_shift(1,y[a]);for(a=0;a<8;++a)r.write_shift(2,0);for(r.write_shift(2,62),r.write_shift(2,3),r.write_shift(2,65534),r.write_shift(2,9),r.write_shift(2,6),a=0;a<3;++a)r.write_shift(2,0);for(r.write_shift(4,0),r.write_shift(4,i[2]),r.write_shift(4,i[0]+i[1]+i[2]+i[3]-1),r.write_shift(4,0),r.write_shift(4,4096),r.write_shift(4,i[3]?i[0]+i[1]+i[2]-1:b),r.write_shift(4,i[3]),r.write_shift(-4,i[1]?i[0]-1:b),r.write_shift(4,i[1]),a=0;a<109;++a)r.write_shift(-4,a<i[2]?i[1]+a:-1);if(i[1])for(o=0;o<i[1];++o){for(;a<236+127*o;++a)r.write_shift(-4,a<i[2]?i[1]+a:-1);r.write_shift(-4,o===i[1]-1?b:o+1)}var l=function(e){for(o+=e;a<o-1;++a)r.write_shift(-4,a+1);e&&(++a,r.write_shift(-4,b))};for(o=a=0,o+=i[1];a<o;++a)r.write_shift(-4,S.DIFSECT);for(o+=i[2];a<o;++a)r.write_shift(-4,S.FATSECT);l(i[3]),l(i[4]);for(var c=0,h=0,u=e.FileIndex[0];c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&((h=u.content.length)<4096||(u.start=o,l(h+511>>9)));for(l(i[6]+7>>3);511&r.l;)r.write_shift(-4,S.ENDOFCHAIN);for(o=a=0,c=0;c<e.FileIndex.length;++c)(u=e.FileIndex[c]).content&&(!(h=u.content.length)||h>=4096||(u.start=o,l(h+63>>6)));for(;511&r.l;)r.write_shift(-4,S.ENDOFCHAIN);for(a=0;a<i[4]<<2;++a){var d=e.FullPaths[a];if(d&&0!==d.length){u=e.FileIndex[a],0===a&&(u.start=u.size?u.start-1:b);var p=0===a&&n.root||u.name;if(h=2*(p.length+1),r.write_shift(64,p,"utf16le"),r.write_shift(2,h),r.write_shift(1,u.type),r.write_shift(1,u.color),r.write_shift(-4,u.L),r.write_shift(-4,u.R),r.write_shift(-4,u.C),u.clsid)r.write_shift(16,u.clsid,"hex");else for(c=0;c<4;++c)r.write_shift(4,0);r.write_shift(4,u.state||0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,u.start),r.write_shift(4,u.size),r.write_shift(4,0)}else{for(c=0;c<17;++c)r.write_shift(4,0);for(c=0;c<3;++c)r.write_shift(4,-1);for(c=0;c<12;++c)r.write_shift(4,0)}}for(a=1;a<e.FileIndex.length;++a)if((u=e.FileIndex[a]).size>=4096)if(r.l=u.start+1<<9,en&&Buffer.isBuffer(u.content))u.content.copy(r,r.l,0,u.size),r.l+=u.size+511&-512;else{for(c=0;c<u.size;++c)r.write_shift(1,u.content[c]);for(;511&c;++c)r.write_shift(1,0)}for(a=1;a<e.FileIndex.length;++a)if((u=e.FileIndex[a]).size>0&&u.size<4096)if(en&&Buffer.isBuffer(u.content))u.content.copy(r,r.l,0,u.size),r.l+=u.size+63&-64;else{for(c=0;c<u.size;++c)r.write_shift(1,u.content[c]);for(;63&c;++c)r.write_shift(1,0)}if(en)r.l=r.length;else for(;r.l<r.length;)r.write_shift(1,0);return r}t.version="1.2.1";var m,g=64,b=-2,v="d0cf11e0a1b11ae1",y=[208,207,17,224,161,177,26,225],x="00000000000000000000000000000000",S={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:b,FREESECT:-1,HEADER_SIGNATURE:v,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:x,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function w(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=String.fromCharCode(e[n]);return t.join("")}function E(e){return m?m.deflateRawSync(e):q(e)}var _=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],M=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function C(e){var t=139536&(e<<1|e<<11)|558144&(e<<5|e<<15);return 255&(t>>16|t>>8|t)}for(var A="undefined"!==typeof Uint8Array,P=A?new Uint8Array(256):[],N=0;N<256;++N)P[N]=C(N);function k(e,t){var n=P[255&e];return t<=8?n>>>8-t:(n=n<<8|P[e>>8&255],t<=16?n>>>16-t:(n=n<<8|P[e>>16&255])>>>24-t)}function L(e,t){var n=7&t,i=t>>>3;return(e[i]|(n<=6?0:e[i+1]<<8))>>>n&3}function I(e,t){var n=7&t,i=t>>>3;return(e[i]|(n<=5?0:e[i+1]<<8))>>>n&7}function R(e,t){var n=7&t,i=t>>>3;return(e[i]|(n<=3?0:e[i+1]<<8))>>>n&31}function O(e,t){var n=7&t,i=t>>>3;return(e[i]|(n<=1?0:e[i+1]<<8))>>>n&127}function D(e,t,n){var i=7&t,s=t>>>3,r=(1<<n)-1,a=e[s]>>>i;return n<8-i?a&r:(a|=e[s+1]<<8-i,n<16-i?a&r:(a|=e[s+2]<<16-i,n<24-i?a&r:(a|=e[s+3]<<24-i)&r))}function F(e,t,n){var i=7&t,s=t>>>3;return i<=5?e[s]|=(7&n)<<i:(e[s]|=n<<i&255,e[s+1]=(7&n)>>8-i),t+3}function B(e,t,n){return n=(1&n)<<(7&t),e[t>>>3]|=n,t+1}function j(e,t,n){var i=t>>>3;return n<<=7&t,e[i]|=255&n,n>>>=8,e[i+1]=n,t+8}function V(e,t,n){var i=t>>>3;return n<<=7&t,e[i]|=255&n,n>>>=8,e[i+1]=255&n,e[i+2]=n>>>8,t+16}function G(e,t){var n=e.length,i=2*n>t?2*n:t+5,s=0;if(n>=t)return e;if(en){var r=sn(i);if(e.copy)e.copy(r);else for(;s<e.length;++s)r[s]=e[s];return r}if(A){var a=new Uint8Array(i);if(a.set)a.set(e);else for(;s<n;++s)a[s]=e[s];return a}return e.length=i,e}function W(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function z(e,t,n){var i=1,s=0,r=0,a=0,o=0,l=e.length,c=A?new Uint16Array(32):W(32);for(r=0;r<32;++r)c[r]=0;for(r=l;r<n;++r)e[r]=0;l=e.length;var h=A?new Uint16Array(l):W(l);for(r=0;r<l;++r)c[s=e[r]]++,i<s&&(i=s),h[r]=0;for(c[0]=0,r=1;r<=i;++r)c[r+16]=o=o+c[r-1]<<1;for(r=0;r<l;++r)0!=(o=e[r])&&(h[r]=c[o+16]++);var u=0;for(r=0;r<l;++r)if(0!=(u=e[r]))for(o=k(h[r],i)>>i-u,a=(1<<i+4-u)-1;a>=0;--a)t[o|a<<u]=15&u|r<<4;return i}var U=A?new Uint16Array(512):W(512),H=A?new Uint16Array(32):W(32);if(!A){for(var X=0;X<512;++X)U[X]=0;for(X=0;X<32;++X)H[X]=0}!function(){for(var e=[],t=0;t<32;t++)e.push(5);z(e,H,32);var n=[];for(t=0;t<=143;t++)n.push(8);for(;t<=255;t++)n.push(9);for(;t<=279;t++)n.push(7);for(;t<=287;t++)n.push(8);z(n,U,288)}();var Y=function(){for(var e=A?new Uint8Array(32768):[],t=0,n=0;t<M.length-1;++t)for(;n<M[t+1];++n)e[n]=t;for(;n<32768;++n)e[n]=29;var i=A?new Uint8Array(259):[];for(t=0,n=0;t<T.length-1;++t)for(;n<T[t+1];++n)i[n]=t;return function(t,n){return t.length<8?function(e,t){for(var n=0;n<e.length;){var i=Math.min(65535,e.length-n),s=n+i==e.length;for(t.write_shift(1,+s),t.write_shift(2,i),t.write_shift(2,65535&~i);i-- >0;)t[t.l++]=e[n++]}return t.l}(t,n):function(t,n){for(var s=0,r=0,a=A?new Uint16Array(32768):[];r<t.length;){var o=Math.min(65535,t.length-r);if(o<10){for(7&(s=F(n,s,+!(r+o!=t.length)))&&(s+=8-(7&s)),n.l=s/8|0,n.write_shift(2,o),n.write_shift(2,65535&~o);o-- >0;)n[n.l++]=t[r++];s=8*n.l}else{s=F(n,s,+!(r+o!=t.length)+2);for(var l=0;o-- >0;){var c=t[r],h=-1,u=0;if((h=a[l=32767&(l<<5^c)])&&((h|=-32768&r)>r&&(h-=32768),h<r))for(;t[h+u]==t[r+u]&&u<250;)++u;if(u>2){(c=i[u])<=22?s=j(n,s,P[c+1]>>1)-1:(j(n,s,3),j(n,s+=5,P[c-23]>>5),s+=3);var d=c<8?0:c-4>>2;d>0&&(V(n,s,u-T[c]),s+=d),c=e[r-h],s=j(n,s,P[c]>>3),s-=3;var f=c<4?0:c-2>>1;f>0&&(V(n,s,r-h-M[c]),s+=f);for(var p=0;p<u;++p)a[l]=32767&r,l=32767&(l<<5^t[r]),++r;o-=u-1}else c<=143?c+=48:s=B(n,s,1),s=j(n,s,P[c]),a[l]=32767&r,++r}s=j(n,s,0)-1}}return n.l=(s+7)/8|0,n.l}(t,n)}}();function q(e){var t=er(50+Math.floor(1.1*e.length)),n=Y(e,t);return t.slice(0,n)}var K=A?new Uint16Array(32768):W(32768),$=A?new Uint16Array(32768):W(32768),Z=A?new Uint16Array(128):W(128),Q=1,J=1;function ee(e,t){var n=R(e,t)+257,i=R(e,t+=5)+1,s=function(e,t){var n=7&t,i=t>>>3;return(e[i]|(n<=4?0:e[i+1]<<8))>>>n&15}(e,t+=5)+4;t+=4;for(var r=0,a=A?new Uint8Array(19):W(19),o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=1,c=A?new Uint8Array(8):W(8),h=A?new Uint8Array(8):W(8),u=a.length,d=0;d<s;++d)a[_[d]]=r=I(e,t),l<r&&(l=r),c[r]++,t+=3;var f=0;for(c[0]=0,d=1;d<=l;++d)h[d]=f=f+c[d-1]<<1;for(d=0;d<u;++d)0!=(f=a[d])&&(o[d]=h[f]++);var p=0;for(d=0;d<u;++d)if(0!=(p=a[d])){f=P[o[d]]>>8-p;for(var m=(1<<7-p)-1;m>=0;--m)Z[f|m<<p]=7&p|d<<3}var g=[];for(l=1;g.length<n+i;)switch(t+=7&(f=Z[O(e,t)]),f>>>=3){case 16:for(r=3+L(e,t),t+=2,f=g[g.length-1];r-- >0;)g.push(f);break;case 17:for(r=3+I(e,t),t+=3;r-- >0;)g.push(0);break;case 18:for(r=11+O(e,t),t+=7;r-- >0;)g.push(0);break;default:g.push(f),l<f&&(l=f)}var b=g.slice(0,n),v=g.slice(n);for(d=n;d<286;++d)b[d]=0;for(d=i;d<30;++d)v[d]=0;return Q=z(b,K,286),J=z(v,$,30),t}function te(e,t){var n=function(e,t){if(3==e[0]&&!(3&e[1]))return[nn(t),2];for(var n=0,i=0,s=sn(t||1<<18),r=0,a=s.length>>>0,o=0,l=0;0==(1&i);)if(i=I(e,n),n+=3,i>>>1!=0)for(i>>1==1?(o=9,l=5):(n=ee(e,n),o=Q,l=J);;){!t&&a<r+32767&&(a=(s=G(s,r+32767)).length);var c=D(e,n,o),h=i>>>1==1?U[c]:K[c];if(n+=15&h,0===((h>>>=4)>>>8&255))s[r++]=h;else{if(256==h)break;var u=(h-=257)<8?0:h-4>>2;u>5&&(u=0);var d=r+T[h];u>0&&(d+=D(e,n,u),n+=u),c=D(e,n,l),n+=15&(h=i>>>1==1?H[c]:$[c]);var f=(h>>>=4)<4?0:h-2>>1,p=M[h];for(f>0&&(p+=D(e,n,f),n+=f),!t&&a<d&&(a=(s=G(s,d+100)).length);r<d;)s[r]=s[r-p],++r}}else{7&n&&(n+=8-(7&n));var m=e[n>>>3]|e[1+(n>>>3)]<<8;if(n+=32,m>0)for(!t&&a<r+m&&(a=(s=G(s,r+m)).length);m-- >0;)s[r++]=e[n>>>3],n+=8}return t?[s,n+7>>>3]:[s.slice(0,r),n+7>>>3]}(e.slice(e.l||0),t);return e.l+=n[1],n[0]}function ne(e,t){if(!e)throw new Error(t);"undefined"!==typeof console&&console.error(t)}function ie(e,t){var n=e;Qs(n,0);var i={FileIndex:[],FullPaths:[]};d(i,{root:t.root});for(var s=n.length-4;(80!=n[s]||75!=n[s+1]||5!=n[s+2]||6!=n[s+3])&&s>=0;)--s;n.l=s+4,n.l+=4;var a=n.read_shift(2);n.l+=6;var o=n.read_shift(4);for(n.l=o,s=0;s<a;++s){n.l+=20;var l=n.read_shift(4),c=n.read_shift(4),h=n.read_shift(2),u=n.read_shift(2),f=n.read_shift(2);n.l+=8;var p=n.read_shift(4),m=r(n.slice(n.l+h,n.l+h+u));n.l+=h+u+f;var g=n.l;n.l=p+4,se(n,l,c,i,m),n.l=g}return i}function se(e,t,n,i,s){e.l+=2;var a=e.read_shift(2),o=e.read_shift(2),l=function(e){var t=65535&e.read_shift(2),n=65535&e.read_shift(2),i=new Date,s=31&n,r=15&(n>>>=5);n>>>=4,i.setMilliseconds(0),i.setFullYear(n+1980),i.setMonth(r-1),i.setDate(s);var a=31&t,o=63&(t>>>=5);return t>>>=6,i.setHours(t),i.setMinutes(o),i.setSeconds(a<<1),i}(e);if(8257&a)throw new Error("Unsupported ZIP encryption");e.read_shift(4);for(var c=e.read_shift(4),h=e.read_shift(4),u=e.read_shift(2),d=e.read_shift(2),f="",p=0;p<u;++p)f+=String.fromCharCode(e[e.l++]);if(d){var g=r(e.slice(e.l,e.l+d));(g[21589]||{}).mt&&(l=g[21589].mt),((s||{})[21589]||{}).mt&&(l=s[21589].mt)}e.l+=d;var b=e.slice(e.l,e.l+c);switch(o){case 8:b=function(e,t){if(!m)return te(e,t);var n=new(0,m.InflateRaw),i=n._processChunk(e.slice(e.l),n._finishFlushFlag);return e.l+=n.bytesRead,i}(e,h);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+o)}var v=!1;8&a&&(134695760==e.read_shift(4)&&(e.read_shift(4),v=!0),c=e.read_shift(4),h=e.read_shift(4)),c!=t&&ne(v,"Bad compressed size: "+t+" != "+c),h!=n&&ne(v,"Bad uncompressed size: "+n+" != "+h),he(i,f,b,{unsafe:!0,mt:l})}var re={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ae(e,t){if(e.ctype)return e.ctype;var n=e.name||"",i=n.match(/\.([^\.]+)$/);return i&&re[i[1]]||t&&(i=(n=t).match(/[\.\\]([^\.\\])+$/))&&re[i[1]]?re[i[1]]:"application/octet-stream"}function oe(e){for(var t=Qt(e),n=[],i=0;i<t.length;i+=76)n.push(t.slice(i,i+76));return n.join("\r\n")+"\r\n"}function le(e){var t=e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,(function(e){var t=e.charCodeAt(0).toString(16).toUpperCase();return"="+(1==t.length?"0"+t:t)}));"\n"==(t=t.replace(/ $/gm,"=20").replace(/\t$/gm,"=09")).charAt(0)&&(t="=0D"+t.slice(1));for(var n=[],i=(t=t.replace(/\r(?!\n)/gm,"=0D").replace(/\n\n/gm,"\n=0A").replace(/([^\r\n])\n/gm,"$1=0A")).split("\r\n"),s=0;s<i.length;++s){var r=i[s];if(0!=r.length)for(var a=0;a<r.length;){var o=76,l=r.slice(a,a+o);"="==l.charAt(o-1)?o--:"="==l.charAt(o-2)?o-=2:"="==l.charAt(o-3)&&(o-=3),l=r.slice(a,a+o),(a+=o)<r.length&&(l+="="),n.push(l)}else n.push("")}return n.join("\r\n")}function ce(e,t,n){for(var i,s="",r="",a="",o=0;o<10;++o){var l=t[o];if(!l||l.match(/^\s*$/))break;var c=l.match(/^(.*?):\s*([^\s].*)$/);if(c)switch(c[1].toLowerCase()){case"content-location":s=c[2].trim();break;case"content-type":a=c[2].trim();break;case"content-transfer-encoding":r=c[2].trim()}}switch(++o,r.toLowerCase()){case"base64":i=rn(Jt(t.slice(o).join("")));break;case"quoted-printable":i=function(e){for(var t=[],n=0;n<e.length;++n){for(var i=e[n];n<=e.length&&"="==i.charAt(i.length-1);)i=i.slice(0,i.length-1)+e[++n];t.push(i)}for(var s=0;s<t.length;++s)t[s]=t[s].replace(/[=][0-9A-Fa-f]{2}/g,(function(e){return String.fromCharCode(parseInt(e.slice(1),16))}));return rn(t.join("\r\n"))}(t.slice(o));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+r)}var h=he(e,s.slice(n.length),i,{unsafe:!0});a&&(h.ctype=a)}function he(e,t,n,s){var r=s&&s.unsafe;r||d(e);var a=!r&&si.find(e,t);if(!a){var o=e.FullPaths[0];t.slice(0,o.length)==o?o=t:("/"!=o.slice(-1)&&(o+="/"),o=(o+t).replace("//","/")),a={name:i(t),type:2},e.FileIndex.push(a),e.FullPaths.push(o),r||si.utils.cfb_gc(e)}return a.content=n,a.size=n?n.length:0,s&&(s.CLSID&&(a.clsid=s.CLSID),s.mt&&(a.mt=s.mt),s.ct&&(a.ct=s.ct)),a}return t.find=function(e,t){var n=e.FullPaths.map((function(e){return e.toUpperCase()})),i=n.map((function(e){var t=e.split("/");return t[t.length-("/"==e.slice(-1)?2:1)]})),s=!1;47===t.charCodeAt(0)?(s=!0,t=n[0].slice(0,-1)+t):s=-1!==t.indexOf("/");var r=t.toUpperCase(),a=!0===s?n.indexOf(r):i.indexOf(r);if(-1!==a)return e.FileIndex[a];var o=!r.match(hn);for(r=r.replace(cn,""),o&&(r=r.replace(hn,"!")),a=0;a<n.length;++a){if((o?n[a].replace(hn,"!"):n[a]).replace(cn,"")==r)return e.FileIndex[a];if((o?i[a].replace(hn,"!"):i[a]).replace(cn,"")==r)return e.FileIndex[a]}return null},t.read=function(t,n){var i=n&&n.type;switch(i||en&&Buffer.isBuffer(t)&&(i="buffer"),i||"base64"){case"file":return function(t,n){return a(),o(e.readFileSync(t),n)}(t,n);case"base64":return o(rn(Jt(t)),n);case"binary":return o(rn(t),n)}return o(t,n)},t.parse=o,t.write=function(t,n){var i=p(t,n);switch(n&&n.type||"buffer"){case"file":return a(),e.writeFileSync(n.filename,i),i;case"binary":return"string"==typeof i?i:w(i);case"base64":return Qt("string"==typeof i?i:w(i));case"buffer":if(en)return Buffer.isBuffer(i)?i:tn(i);case"array":return"string"==typeof i?rn(i):i}return i},t.writeFile=function(t,n,i){a();var s=p(t,i);e.writeFileSync(n,s)},t.utils={cfb_new:function(e){var t={};return d(t,e),t},cfb_add:he,cfb_del:function(e,t){d(e);var n=si.find(e,t);if(n)for(var i=0;i<e.FileIndex.length;++i)if(e.FileIndex[i]==n)return e.FileIndex.splice(i,1),e.FullPaths.splice(i,1),!0;return!1},cfb_mov:function(e,t,n){d(e);var s=si.find(e,t);if(s)for(var r=0;r<e.FileIndex.length;++r)if(e.FileIndex[r]==s)return e.FileIndex[r].name=i(n),e.FullPaths[r]=n,!0;return!1},cfb_gc:function(e){f(e,!0)},ReadShift:Xs,CheckField:Zs,prep_blob:Qs,bconcat:ln,use_zlib:function(e){try{var t=new(0,e.InflateRaw);if(t._processChunk(new Uint8Array([3,0]),t._finishFlushFlag),!t.bytesRead)throw new Error("zlib does not expose bytesRead");m=e}catch(aC){console.error("cannot use native zlib: "+(aC.message||aC))}},_deflateRaw:q,_inflateRaw:te,consts:S},t}();let ri;function ai(e){for(var t=Object.keys(e),n=[],i=0;i<t.length;++i)Object.prototype.hasOwnProperty.call(e,t[i])&&n.push(t[i]);return n}function oi(e){for(var t=[],n=ai(e),i=0;i!==n.length;++i)t[e[n[i]]]=n[i];return t}var li=new Date(1899,11,30,0,0,0);function ci(e,t){var n=e.getTime();return t&&(n-=1263168e5),(n-(li.getTime()+6e4*(e.getTimezoneOffset()-li.getTimezoneOffset())))/864e5}var hi=new Date,ui=li.getTime()+6e4*(hi.getTimezoneOffset()-li.getTimezoneOffset()),di=hi.getTimezoneOffset();function fi(e){var t=new Date;return t.setTime(24*e*60*60*1e3+ui),t.getTimezoneOffset()!==di&&t.setTime(t.getTime()+6e4*(t.getTimezoneOffset()-di)),t}function pi(e){var t=0,n=0,i=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var r=1;r!=s.length;++r)if(s[r]){switch(n=1,r>3&&(i=!0),s[r].slice(s[r].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[r].slice(s[r].length-1));case"D":n*=24;case"H":n*=60;case"M":if(!i)throw new Error("Unsupported ISO Duration Field: M");n*=60}t+=n*parseInt(s[r],10)}return t}var mi=new Date("2017-02-19T19:06:09.000Z"),gi=isNaN(mi.getFullYear())?new Date("2/19/17"):mi,bi=2017==gi.getFullYear();function vi(e,t){var n=new Date(e);if(bi)return t>0?n.setTime(n.getTime()+60*n.getTimezoneOffset()*1e3):t<0&&n.setTime(n.getTime()-60*n.getTimezoneOffset()*1e3),n;if(e instanceof Date)return e;if(1917==gi.getFullYear()&&!isNaN(n.getFullYear())){var i=n.getFullYear();return e.indexOf(""+i)>-1||n.setFullYear(n.getFullYear()+100),n}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],r=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(r=new Date(r.getTime()-60*r.getTimezoneOffset()*1e3)),r}function yi(e,t){if(en&&Buffer.isBuffer(e)){if(t){if(255==e[0]&&254==e[1])return ss(e.slice(2).toString("utf16le"));if(254==e[1]&&255==e[2])return ss(Xt(e.slice(2).toString("binary")))}return e.toString("binary")}if("undefined"!==typeof TextDecoder)try{if(t){if(255==e[0]&&254==e[1])return ss(new TextDecoder("utf-16le").decode(e.slice(2)));if(254==e[0]&&255==e[1])return ss(new TextDecoder("utf-16be").decode(e.slice(2)))}var n={"\u20ac":"\x80","\u201a":"\x82","\u0192":"\x83","\u201e":"\x84","\u2026":"\x85","\u2020":"\x86","\u2021":"\x87","\u02c6":"\x88","\u2030":"\x89","\u0160":"\x8a","\u2039":"\x8b","\u0152":"\x8c","\u017d":"\x8e","\u2018":"\x91","\u2019":"\x92","\u201c":"\x93","\u201d":"\x94","\u2022":"\x95","\u2013":"\x96","\u2014":"\x97","\u02dc":"\x98","\u2122":"\x99","\u0161":"\x9a","\u203a":"\x9b","\u0153":"\x9c","\u017e":"\x9e","\u0178":"\x9f"};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[\u20ac\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2039\u0152\u017d\u2018\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u203a\u0153\u017e\u0178]/g,(function(e){return n[e]||e}))}catch(aC){}for(var i=[],s=0;s!=e.length;++s)i.push(String.fromCharCode(e[s]));return i.join("")}function xi(e){if("undefined"!=typeof JSON&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if("object"!=typeof e||null==e)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=xi(e[n]));return t}function Si(e,t){for(var n="";n.length<t;)n+=e;return n}function wi(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var n=1,i=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,(function(){return n*=100,""}));return isNaN(t=Number(i))?(i=i.replace(/[(](.*)[)]/,(function(e,t){return n=-n,t})),isNaN(t=Number(i))?t:t/n):t/n}var Ei=["january","february","march","april","may","june","july","august","september","october","november","december"];function _i(e){var t=new Date(e),n=new Date(NaN),i=t.getYear(),s=t.getMonth(),r=t.getDate();if(isNaN(r))return n;var a=e.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if((a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"")).length>3&&-1==Ei.indexOf(a))return n}else if(a.match(/[a-z]/))return n;return i<0||i>8099?n:(s>0||r>1)&&101!=i?t:e.match(/[^-0-9:,\/\\]/)?n:t}var Ti=function(){var e=5=="abacaba".split(/(:?b)/i).length;return function(t,n,i){if(e||"string"==typeof n)return t.split(n);for(var s=t.split(n),r=[s[0]],a=1;a<s.length;++a)r.push(i),r.push(s[a]);return r}}();function Mi(e){return e?e.content&&e.type?yi(e.content,!0):e.data?qt(e.data):e.asNodeBuffer&&en?qt(e.asNodeBuffer().toString("binary")):e.asBinary?qt(e.asBinary()):e._data&&e._data.getContent?qt(yi(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function Ci(e){if(!e)return null;if(e.data)return Ht(e.data);if(e.asNodeBuffer&&en)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return"string"==typeof t?Ht(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function Ai(e,t){for(var n=e.FullPaths||ai(e.files),i=t.toLowerCase().replace(/[\/]/g,"\\"),s=i.replace(/\\/g,"/"),r=0;r<n.length;++r){var a=n[r].replace(/^Root Entry[\/]/,"").toLowerCase();if(i==a||s==a)return e.files?e.files[n[r]]:e.FileIndex[r]}return null}function Pi(e,t){var n=Ai(e,t);if(null==n)throw new Error("Cannot find file "+t+" in zip");return n}function Ni(e,t,n){if(!n)return function(e){return e&&".bin"===e.name.slice(-4)?Ci(e):Mi(e)}(Pi(e,t));if(!t)return null;try{return Ni(e,t)}catch(aC){return null}}function ki(e,t,n){if(!n)return Mi(Pi(e,t));if(!t)return null;try{return ki(e,t)}catch(aC){return null}}function Li(e,t,n){if(!n)return Ci(Pi(e,t));if(!t)return null;try{return Li(e,t)}catch(aC){return null}}function Ii(e){for(var t=e.FullPaths||ai(e.files),n=[],i=0;i<t.length;++i)"/"!=t[i].slice(-1)&&n.push(t[i].replace(/^Root Entry[\/]/,""));return n.sort()}function Ri(e,t,n){if(e.FullPaths){var i;if("string"==typeof n)return i=en?tn(n):function(e){for(var t=[],n=0,i=e.length+250,s=nn(e.length+255),r=0;r<e.length;++r){var a=e.charCodeAt(r);if(a<128)s[n++]=a;else if(a<2048)s[n++]=192|a>>6&31,s[n++]=128|63&a;else if(a>=55296&&a<57344){a=64+(1023&a);var o=1023&e.charCodeAt(++r);s[n++]=240|a>>8&7,s[n++]=128|a>>2&63,s[n++]=128|o>>6&15|(3&a)<<4,s[n++]=128|63&o}else s[n++]=224|a>>12&15,s[n++]=128|a>>6&63,s[n++]=128|63&a;n>i&&(t.push(s.slice(0,n)),n=0,s=nn(65535),i=65530)}return t.push(s.slice(0,n)),ln(t)}(n),si.utils.cfb_add(e,t,i);si.utils.cfb_add(e,t,n)}else e.file(t,n)}function Oi(e,t){switch(t.type){case"base64":return si.read(e,{type:"base64"});case"binary":return si.read(e,{type:"binary"});case"buffer":case"array":return si.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Di(e,t){if("/"==e.charAt(0))return e.slice(1);var n=t.split("/");"/"!=t.slice(-1)&&n.pop();for(var i=e.split("/");0!==i.length;){var s=i.shift();".."===s?n.pop():"."!==s&&n.push(s)}return n.join("/")}var Fi='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',Bi=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,ji=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/gm,Vi=Fi.match(ji)?ji:/<[^>]*>/g,Gi=/<\w*:/,Wi=/<(\/?)\w+:/;function zi(e,t,n){for(var i={},s=0,r=0;s!==e.length&&(32!==(r=e.charCodeAt(s))&&10!==r&&13!==r);++s);if(t||(i[0]=e.slice(0,s)),s===e.length)return i;var a=e.match(Bi),o=0,l="",c=0,h="",u="",d=1;if(a)for(c=0;c!=a.length;++c){for(u=a[c],r=0;r!=u.length&&61!==u.charCodeAt(r);++r);for(h=u.slice(0,r).trim();32==u.charCodeAt(r+1);)++r;for(d=34==(s=u.charCodeAt(r+1))||39==s?1:0,l=u.slice(r+1+d,u.length-d),o=0;o!=h.length&&58!==h.charCodeAt(o);++o);if(o===h.length)h.indexOf("_")>0&&(h=h.slice(0,h.indexOf("_"))),i[h]=l,n||(i[h.toLowerCase()]=l);else{var f=(5===o&&"xmlns"===h.slice(0,5)?"xmlns":"")+h.slice(o+1);if(i[f]&&"ext"==h.slice(o-3,o))continue;i[f]=l,n||(i[f.toLowerCase()]=l)}}return i}function Ui(e){return e.replace(Wi,"<$1")}var Hi={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Xi=oi(Hi),Yi=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/gi,t=/_x([\da-fA-F]{4})_/gi;return function n(i){var s=i+"",r=s.indexOf("<![CDATA[");if(-1==r)return s.replace(e,(function(e,t){return Hi[e]||String.fromCharCode(parseInt(t,e.indexOf("x")>-1?16:10))||e})).replace(t,(function(e,t){return String.fromCharCode(parseInt(t,16))}));var a=s.indexOf("]]>");return n(s.slice(0,r))+s.slice(r+9,a)+n(s.slice(a+3))}}(),qi=/[&<>'"]/g;var Ki=/[\u0000-\u001f]/g;function $i(e){return(e+"").replace(qi,(function(e){return Xi[e]})).replace(/\n/g,"<br/>").replace(Ki,(function(e){return"&#x"+("000"+e.charCodeAt(0).toString(16)).slice(-4)+";"}))}var Zi=function(){var e=/&#(\d+);/g;function t(e,t){return String.fromCharCode(parseInt(t,10))}return function(n){return n.replace(e,t)}}();function Qi(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Ji(e){for(var t="",n=0,i=0,s=0,r=0,a=0,o=0;n<e.length;)(i=e.charCodeAt(n++))<128?t+=String.fromCharCode(i):(s=e.charCodeAt(n++),i>191&&i<224?(a=(31&i)<<6,a|=63&s,t+=String.fromCharCode(a)):(r=e.charCodeAt(n++),i<240?t+=String.fromCharCode((15&i)<<12|(63&s)<<6|63&r):(o=((7&i)<<18|(63&s)<<12|(63&r)<<6|63&(a=e.charCodeAt(n++)))-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(1023&o)))));return t}function es(e){var t,n,i,s=nn(2*e.length),r=1,a=0,o=0;for(n=0;n<e.length;n+=r)r=1,(i=e.charCodeAt(n))<128?t=i:i<224?(t=64*(31&i)+(63&e.charCodeAt(n+1)),r=2):i<240?(t=4096*(15&i)+64*(63&e.charCodeAt(n+1))+(63&e.charCodeAt(n+2)),r=3):(r=4,t=262144*(7&i)+4096*(63&e.charCodeAt(n+1))+64*(63&e.charCodeAt(n+2))+(63&e.charCodeAt(n+3)),o=55296+((t-=65536)>>>10&1023),t=56320+(1023&t)),0!==o&&(s[a++]=255&o,s[a++]=o>>>8,o=0),s[a++]=t%256,s[a++]=t>>>8;return s.slice(0,a).toString("ucs2")}function ts(e){return tn(e,"binary").toString("utf8")}var ns="foo bar baz\xe2\x98\x83\xf0\x9f\x8d\xa3",is=en&&(ts(ns)==Ji(ns)&&ts||es(ns)==Ji(ns)&&es)||Ji,ss=en?function(e){return tn(e,"utf8").toString("binary")}:function(e){for(var t=[],n=0,i=0,s=0;n<e.length;)switch(i=e.charCodeAt(n++),!0){case i<128:t.push(String.fromCharCode(i));break;case i<2048:t.push(String.fromCharCode(192+(i>>6))),t.push(String.fromCharCode(128+(63&i)));break;case i>=55296&&i<57344:i-=55296,s=e.charCodeAt(n++)-56320+(i<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(63&s)));break;default:t.push(String.fromCharCode(224+(i>>12))),t.push(String.fromCharCode(128+(i>>6&63))),t.push(String.fromCharCode(128+(63&i)))}return t.join("")},rs=function(){var e={};return function(t,n){var i=t+"|"+(n||"");return e[i]?e[i]:e[i]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",n||"")}}(),as=function(){var e=[["nbsp"," "],["middot","\xb7"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map((function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]}));return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,"\n").replace(/<[^>]*>/g,""),i=0;i<e.length;++i)n=n.replace(e[i][0],e[i][1]);return n}}(),os=function(){var e={};return function(t){return void 0!==e[t]?e[t]:e[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}}(),ls=/<\/?(?:vt:)?variant>/g,cs=/<(?:vt:)([^>]*)>([\s\S]*)</;function hs(e,t){var n=zi(e),i=e.match(os(n.baseType))||[],s=[];if(i.length!=n.size){if(t.WTF)throw new Error("unexpected vector length "+i.length+" != "+n.size);return s}return i.forEach((function(e){var t=e.replace(ls,"").match(cs);t&&s.push({v:is(t[2]),t:t[1]})})),s}var us=/(^\s|\s$|\n)/;function ds(e){return ai(e).map((function(t){return" "+t+'="'+e[t]+'"'})).join("")}function fs(e,t,n){return"<"+e+(null!=n?ds(n):"")+(null!=t?(t.match(us)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function ps(e){if(en&&Buffer.isBuffer(e))return e.toString("utf8");if("string"===typeof e)return e;if("undefined"!==typeof Uint8Array&&e instanceof Uint8Array)return is(an(on(e)));throw new Error("Bad input format: expected Buffer or string")}var ms=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/gm,gs="http://schemas.openxmlformats.org/package/2006/content-types",bs=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];var vs=function(e){for(var t=[],n=0;n<e[0].length;++n)if(e[0][n])for(var i=0,s=e[0][n].length;i<s;i+=10240)t.push.apply(t,e[0][n].slice(i,i+10240));return t},ys=en?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map((function(e){return Buffer.isBuffer(e)?e:tn(e)}))):vs(e)}:vs,xs=function(e,t,n){for(var i=[],s=t;s<n;s+=2)i.push(String.fromCharCode(Gs(e,s)));return i.join("").replace(cn,"")},Ss=en?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf16le",t,n).replace(cn,""):xs(e,t,n)}:xs,ws=function(e,t,n){for(var i=[],s=t;s<t+n;++s)i.push(("0"+e[s].toString(16)).slice(-2));return i.join("")},Es=en?function(e,t,n){return Buffer.isBuffer(e)?e.toString("hex",t,t+n):ws(e,t,n)}:ws,_s=function(e,t,n){for(var i=[],s=t;s<n;s++)i.push(String.fromCharCode(Vs(e,s)));return i.join("")},Ts=en?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):_s(e,t,n)}:_s,Ms=function(e,t){var n=zs(e,t);return n>0?Ts(e,t+4,t+4+n-1):""},Cs=Ms,As=function(e,t){var n=zs(e,t);return n>0?Ts(e,t+4,t+4+n-1):""},Ps=As,Ns=function(e,t){var n=2*zs(e,t);return n>0?Ts(e,t+4,t+4+n-1):""},ks=Ns,Ls=function(e,t){var n=zs(e,t);return n>0?Ss(e,t+4,t+4+n):""},Is=Ls,Rs=function(e,t){var n=zs(e,t);return n>0?Ts(e,t+4,t+4+n):""},Os=Rs,Ds=function(e,t){return function(e,t){for(var n=1-2*(e[t+7]>>>7),i=((127&e[t+7])<<4)+(e[t+6]>>>4&15),s=15&e[t+6],r=5;r>=0;--r)s=256*s+e[t+r];return 2047==i?0==s?n*(1/0):NaN:(0==i?i=-1022:(i-=1023,s+=Math.pow(2,52)),n*Math.pow(2,i-52)*s)}(e,t)},Fs=Ds,Bs=function(e){return Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array};function js(){Ss=function(e,t,n){return Yt.utils.decode(1200,e.slice(t,n)).replace(cn,"")},Ts=function(e,t,n){return Yt.utils.decode(65001,e.slice(t,n))},Cs=function(e,t){var n=zs(e,t);return n>0?Yt.utils.decode(jt,e.slice(t+4,t+4+n-1)):""},Ps=function(e,t){var n=zs(e,t);return n>0?Yt.utils.decode(Bt,e.slice(t+4,t+4+n-1)):""},ks=function(e,t){var n=2*zs(e,t);return n>0?Yt.utils.decode(1200,e.slice(t+4,t+4+n-1)):""},Is=function(e,t){var n=zs(e,t);return n>0?Yt.utils.decode(1200,e.slice(t+4,t+4+n)):""},Os=function(e,t){var n=zs(e,t);return n>0?Yt.utils.decode(65001,e.slice(t+4,t+4+n)):""}}en&&(Cs=function(e,t){if(!Buffer.isBuffer(e))return Ms(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},Ps=function(e,t){if(!Buffer.isBuffer(e))return As(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},ks=function(e,t){if(!Buffer.isBuffer(e))return Ns(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},Is=function(e,t){if(!Buffer.isBuffer(e))return Ls(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},Os=function(e,t){if(!Buffer.isBuffer(e))return Rs(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},Fs=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):Ds(e,t)},Bs=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||"undefined"!==typeof Uint8Array&&e instanceof Uint8Array}),"undefined"!==typeof Yt&&js();var Vs=function(e,t){return e[t]},Gs=function(e,t){return 256*e[t+1]+e[t]},Ws=function(e,t){var n=256*e[t+1]+e[t];return n<32768?n:-1*(65535-n+1)},zs=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Us=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Hs=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Xs(e,t){var n,i,s,r,a,o,l="",c=[];switch(t){case"dbcs":if(o=this.l,en&&Buffer.isBuffer(this))l=this.slice(this.l,this.l+2*e).toString("utf16le");else for(a=0;a<e;++a)l+=String.fromCharCode(Gs(this,o)),o+=2;e*=2;break;case"utf8":l=Ts(this,this.l,this.l+e);break;case"utf16le":e*=2,l=Ss(this,this.l,this.l+e);break;case"wstr":if("undefined"===typeof Yt)return Xs.call(this,e,"dbcs");l=Yt.utils.decode(Bt,this.slice(this.l,this.l+2*e)),e*=2;break;case"lpstr-ansi":l=Cs(this,this.l),e=4+zs(this,this.l);break;case"lpstr-cp":l=Ps(this,this.l),e=4+zs(this,this.l);break;case"lpwstr":l=ks(this,this.l),e=4+2*zs(this,this.l);break;case"lpp4":e=4+zs(this,this.l),l=Is(this,this.l),2&e&&(e+=2);break;case"8lpp4":e=4+zs(this,this.l),l=Os(this,this.l),3&e&&(e+=4-(3&e));break;case"cstr":for(e=0,l="";0!==(s=Vs(this,this.l+e++));)c.push(Kt(s));l=c.join("");break;case"_wstr":for(e=0,l="";0!==(s=Gs(this,this.l+e));)c.push(Kt(s)),e+=2;e+=2,l=c.join("");break;case"dbcs-cont":for(l="",o=this.l,a=0;a<e;++a){if(this.lens&&-1!==this.lens.indexOf(o))return s=Vs(this,o),this.l=o+1,r=Xs.call(this,e-a,s?"dbcs-cont":"sbcs-cont"),c.join("")+r;c.push(Kt(Gs(this,o))),o+=2}l=c.join(""),e*=2;break;case"cpstr":if("undefined"!==typeof Yt){l=Yt.utils.decode(Bt,this.slice(this.l,this.l+e));break}case"sbcs-cont":for(l="",o=this.l,a=0;a!=e;++a){if(this.lens&&-1!==this.lens.indexOf(o))return s=Vs(this,o),this.l=o+1,r=Xs.call(this,e-a,s?"dbcs-cont":"sbcs-cont"),c.join("")+r;c.push(Kt(Vs(this,o))),o+=1}l=c.join("");break;default:switch(e){case 1:return n=Vs(this,this.l),this.l++,n;case 2:return n=("i"===t?Ws:Gs)(this,this.l),this.l+=2,n;case 4:case-4:return"i"===t||0===(128&this[this.l+3])?(n=(e>0?Us:Hs)(this,this.l),this.l+=4,n):(i=zs(this,this.l),this.l+=4,i);case 8:case-8:if("f"===t)return i=8==e?Fs(this,this.l):Fs([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;e=8;case 16:l=Es(this,this.l,e)}}return this.l+=e,l}var Ys=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24&255},qs=function(e,t,n){e[n]=255&t,e[n+1]=t>>8&255,e[n+2]=t>>16&255,e[n+3]=t>>24&255},Ks=function(e,t,n){e[n]=255&t,e[n+1]=t>>>8&255};function $s(e,t,n){var i=0,s=0;if("dbcs"===n){for(s=0;s!=t.length;++s)Ks(this,t.charCodeAt(s),this.l+2*s);i=2*t.length}else if("sbcs"===n){if("undefined"!==typeof Yt&&874==jt)for(s=0;s!=t.length;++s){var r=Yt.utils.encode(jt,t.charAt(s));this[this.l+s]=r[0]}else for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=255&t.charCodeAt(s);i=t.length}else{if("hex"===n){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}if("utf16le"===n){var a=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=255&o,this[this.l++]=o>>8}for(;this.l<a;)this[this.l++]=0;return this}switch(e){case 1:i=1,this[this.l]=255&t;break;case 2:i=2,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t;break;case 3:i=3,this[this.l]=255&t,t>>>=8,this[this.l+1]=255&t,t>>>=8,this[this.l+2]=255&t;break;case 4:i=4,Ys(this,t,this.l);break;case 8:if(i=8,"f"===n){!function(e,t,n){var i=(t<0||1/t==-1/0?1:0)<<7,s=0,r=0,a=i?-t:t;isFinite(a)?0==a?s=r=0:(s=Math.floor(Math.log(a)/Math.LN2),r=a*Math.pow(2,52-s),s<=-1023&&(!isFinite(r)||r<Math.pow(2,52))?s=-1022:(r-=Math.pow(2,52),s+=1023)):(s=2047,r=isNaN(t)?26985:0);for(var o=0;o<=5;++o,r/=256)e[n+o]=255&r;e[n+6]=(15&s)<<4|15&r,e[n+7]=s>>4|i}(this,t,this.l);break}case 16:break;case-4:i=4,qs(this,t,this.l)}}return this.l+=i,this}function Zs(e,t){var n=Es(this,this.l,e.length>>1);if(n!==e)throw new Error(t+"Expected "+e+" saw "+n);this.l+=e.length>>1}function Qs(e,t){e.l=t,e.read_shift=Xs,e.chk=Zs,e.write_shift=$s}function Js(e,t){e.l+=t}function er(e){var t=nn(e);return Qs(t,0),t}function tr(e,t,n){if(e){var i,s,r;Qs(e,e.l||0);for(var a=e.length,o=0,l=0;e.l<a;){128&(o=e.read_shift(1))&&(o=(127&o)+((127&e.read_shift(1))<<7));var c=hh[o]||hh[65535];for(r=127&(i=e.read_shift(1)),s=1;s<4&&128&i;++s)r+=(127&(i=e.read_shift(1)))<<7*s;l=e.l+r;var h=c.f&&c.f(e,r,n);if(e.l=l,t(h,c,o))return}}}function nr(){var e=[],t=en?256:2048,n=function(e){var t=er(e);return Qs(t,0),t},i=n(t),s=function(){i&&(i.length>i.l&&((i=i.slice(0,i.l)).l=i.length),i.length>0&&e.push(i),i=null)},r=function(e){return i&&e<i.length-i.l?i:(s(),i=n(Math.max(e+1,t)))};return{next:r,push:function(e){s(),null==(i=e).l&&(i.l=i.length),r(t)},end:function(){return s(),ln(e)},_bufs:e}}function ir(e,t,n){var i=xi(e);if(t.s?(i.cRel&&(i.c+=t.s.c),i.rRel&&(i.r+=t.s.r)):(i.cRel&&(i.c+=t.c),i.rRel&&(i.r+=t.r)),!n||n.biff<12){for(;i.c>=256;)i.c-=256;for(;i.r>=65536;)i.r-=65536}return i}function sr(e,t,n){var i=xi(e);return i.s=ir(i.s,t.s,n),i.e=ir(i.e,t.s,n),i}function rr(e,t){if(e.cRel&&e.c<0)for(e=xi(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=xi(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var n=dr(e);return e.cRel||null==e.cRel||(n=n.replace(/^([A-Z])/,"$$$1")),e.rRel||null==e.rRel||(n=function(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}(n)),n}function ar(e,t){return 0!=e.s.r||e.s.rRel||e.e.r!=(t.biff>=12?1048575:t.biff>=8?65536:16384)||e.e.rRel?0!=e.s.c||e.s.cRel||e.e.c!=(t.biff>=12?16383:255)||e.e.cRel?rr(e.s,t.biff)+":"+rr(e.e,t.biff):(e.s.rRel?"":"$")+lr(e.s.r)+":"+(e.e.rRel?"":"$")+lr(e.e.r):(e.s.cRel?"":"$")+hr(e.s.c)+":"+(e.e.cRel?"":"$")+hr(e.e.c)}function or(e){return parseInt(e.replace(/\$(\d+)$/,"$1"),10)-1}function lr(e){return""+(e+1)}function cr(e){for(var t=e.replace(/^\$([A-Z])/,"$1"),n=0,i=0;i!==t.length;++i)n=26*n+t.charCodeAt(i)-64;return n-1}function hr(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function ur(e){for(var t=0,n=0,i=0;i<e.length;++i){var s=e.charCodeAt(i);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(n=26*n+(s-64))}return{c:n-1,r:t-1}}function dr(e){for(var t=e.c+1,n="";t;t=(t-1)/26|0)n=String.fromCharCode((t-1)%26+65)+n;return n+(e.r+1)}function fr(e){var t=e.indexOf(":");return-1==t?{s:ur(e),e:ur(e)}:{s:ur(e.slice(0,t)),e:ur(e.slice(t+1))}}function pr(e,t){return"undefined"===typeof t||"number"===typeof t?pr(e.s,e.e):("string"!==typeof e&&(e=dr(e)),"string"!==typeof t&&(t=dr(t)),e==t?e:e+":"+t)}function mr(e){var t={s:{c:0,r:0},e:{c:0,r:0}},n=0,i=0,s=0,r=e.length;for(n=0;i<r&&!((s=e.charCodeAt(i)-64)<1||s>26);++i)n=26*n+s;for(t.s.c=--n,n=0;i<r&&!((s=e.charCodeAt(i)-48)<0||s>9);++i)n=10*n+s;if(t.s.r=--n,i===r||10!=s)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++i,n=0;i!=r&&!((s=e.charCodeAt(i)-64)<1||s>26);++i)n=26*n+s;for(t.e.c=--n,n=0;i!=r&&!((s=e.charCodeAt(i)-48)<0||s>9);++i)n=10*n+s;return t.e.r=--n,t}function gr(e,t){var n="d"==e.t&&t instanceof Date;if(null!=e.z)try{return e.w=Qn(e.z,n?ci(t):t)}catch(aC){}try{return e.w=Qn((e.XF||{}).numFmtId||(n?14:0),n?ci(t):t)}catch(aC){return""+t}}function br(e,t,n){return null==e||null==e.t||"z"==e.t?"":void 0!==e.w?e.w:("d"==e.t&&!e.z&&n&&n.dateNF&&(e.z=n.dateNF),"e"==e.t?Ur[e.v]||e.v:gr(e,void 0==t?e.v:t))}function vr(e,t){var n=t&&t.sheet?t.sheet:"Sheet1",i={};return i[n]=e,{SheetNames:[n],Sheets:i}}function yr(e,t,n){var i=n||{},s=e?Array.isArray(e):i.dense;var r=e||(s?[]:{}),a=0,o=0;if(r&&null!=i.origin){if("number"==typeof i.origin)a=i.origin;else{var l="string"==typeof i.origin?ur(i.origin):i.origin;a=l.r,o=l.c}r["!ref"]||(r["!ref"]="A1:A1")}var c={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(r["!ref"]){var h=mr(r["!ref"]);c.s.c=h.s.c,c.s.r=h.s.r,c.e.c=Math.max(c.e.c,h.e.c),c.e.r=Math.max(c.e.r,h.e.r),-1==a&&(c.e.r=a=h.e.r+1)}for(var u=0;u!=t.length;++u)if(t[u]){if(!Array.isArray(t[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var d=0;d!=t[u].length;++d)if("undefined"!==typeof t[u][d]){var f={v:t[u][d]},p=a+u,m=o+d;if(c.s.r>p&&(c.s.r=p),c.s.c>m&&(c.s.c=m),c.e.r<p&&(c.e.r=p),c.e.c<m&&(c.e.c=m),!t[u][d]||"object"!==typeof t[u][d]||Array.isArray(t[u][d])||t[u][d]instanceof Date)if(Array.isArray(f.v)&&(f.f=t[u][d][1],f.v=f.v[0]),null===f.v)if(f.f)f.t="n";else if(i.nullError)f.t="e",f.v=0;else{if(!i.sheetStubs)continue;f.t="z"}else"number"===typeof f.v?f.t="n":"boolean"===typeof f.v?f.t="b":f.v instanceof Date?(f.z=i.dateNF||xn[14],i.cellDates?(f.t="d",f.w=Qn(f.z,ci(f.v))):(f.t="n",f.v=ci(f.v),f.w=Qn(f.z,f.v))):f.t="s";else f=t[u][d];if(s)r[p]||(r[p]=[]),r[p][m]&&r[p][m].z&&(f.z=r[p][m].z),r[p][m]=f;else{var g=dr({c:m,r:p});r[g]&&r[g].z&&(f.z=r[g].z),r[g]=f}}}return c.s.c<1e7&&(r["!ref"]=pr(c)),r}function xr(e,t){return yr(null,e,t)}function Sr(e){var t=e.read_shift(4);return 0===t?"":e.read_shift(t,"dbcs")}function wr(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Er(e,t){var n=e.l,i=e.read_shift(1),s=Sr(e),r=[],a={t:s,h:s};if(0!==(1&i)){for(var o=e.read_shift(4),l=0;l!=o;++l)r.push(wr(e));a.r=r}else a.r=[{ich:0,ifnt:0}];return e.l=n+t,a}var _r=Er;function Tr(e){var t=e.read_shift(4),n=e.read_shift(2);return n+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:n}}function Mr(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}var Cr=Sr;function Ar(e){var t=e.read_shift(4);return 0===t||4294967295===t?"":e.read_shift(t,"dbcs")}var Pr=Sr,Nr=Ar;function kr(e){var t=e.slice(e.l,e.l+4),n=1&t[0],i=2&t[0];e.l+=4;var s=0===i?Fs([0,0,0,0,252&t[0],t[1],t[2],t[3]],0):Us(t,0)>>2;return n?s/100:s}function Lr(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}var Ir=Lr;function Rr(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Or(e,t){var n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return{2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"}[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,1==t?"lpstr":"lpwstr")}var Dr=80,Fr=[Dr,81],Br={1:{n:"CodePage",t:2},2:{n:"Category",t:Dr},3:{n:"PresentationFormat",t:Dr},4:{n:"ByteCount",t:3},5:{n:"LineCount",t:3},6:{n:"ParagraphCount",t:3},7:{n:"SlideCount",t:3},8:{n:"NoteCount",t:3},9:{n:"HiddenCount",t:3},10:{n:"MultimediaClipCount",t:3},11:{n:"ScaleCrop",t:11},12:{n:"HeadingPairs",t:4108},13:{n:"TitlesOfParts",t:4126},14:{n:"Manager",t:Dr},15:{n:"Company",t:Dr},16:{n:"LinksUpToDate",t:11},17:{n:"CharacterCount",t:3},19:{n:"SharedDoc",t:11},22:{n:"HyperlinksChanged",t:11},23:{n:"AppVersion",t:3,p:"version"},24:{n:"DigSig",t:65},26:{n:"ContentType",t:Dr},27:{n:"ContentStatus",t:Dr},28:{n:"Language",t:Dr},29:{n:"Version",t:Dr},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},jr={1:{n:"CodePage",t:2},2:{n:"Title",t:Dr},3:{n:"Subject",t:Dr},4:{n:"Author",t:Dr},5:{n:"Keywords",t:Dr},6:{n:"Comments",t:Dr},7:{n:"Template",t:Dr},8:{n:"LastAuthor",t:Dr},9:{n:"RevNumber",t:Dr},10:{n:"EditTime",t:64},11:{n:"LastPrinted",t:64},12:{n:"CreatedDate",t:64},13:{n:"ModifiedDate",t:64},14:{n:"PageCount",t:3},15:{n:"WordCount",t:3},16:{n:"CharCount",t:3},17:{n:"Thumbnail",t:71},18:{n:"Application",t:Dr},19:{n:"DocSecurity",t:3},255:{},2147483648:{n:"Locale",t:19},2147483651:{n:"Behavior",t:19},1919054434:{}},Vr={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Gr=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Wr(e){return e.map((function(e){return[e>>16&255,e>>8&255,255&e]}))}var zr=xi(Wr([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])),Ur={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Hr={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Xr={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};var Yr={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function qr(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Kr(e,t){var n={"!id":{}};if(!e)return n;"/"!==t.charAt(0)&&(t="/"+t);var i={};return(e.match(Vi)||[]).forEach((function(e){var s=zi(e);if("<Relationship"===s[0]){var r={};r.Type=s.Type,r.Target=s.Target,r.Id=s.Id,s.TargetMode&&(r.TargetMode=s.TargetMode);var a="External"===s.TargetMode?s.Target:Di(s.Target,t);n[a]=r,i[s.Id]=r}})),n["!id"]=i,n}var $r=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Zr=function(){for(var e=new Array($r.length),t=0;t<$r.length;++t){var n=$r[t],i="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);e[t]=new RegExp("<"+i+"[^>]*>([\\s\\S]*?)</"+i+">")}return e}();function Qr(e){var t={};e=is(e);for(var n=0;n<$r.length;++n){var i=$r[n],s=e.match(Zr[n]);null!=s&&s.length>0&&(t[i[1]]=Yi(s[1])),"date"===i[2]&&t[i[1]]&&(t[i[1]]=vi(t[i[1]]))}return t}var Jr=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function ea(e,t,n,i){var s=[];if("string"==typeof e)s=hs(e,i);else for(var r=0;r<e.length;++r)s=s.concat(e[r].map((function(e){return{v:e}})));var a="string"==typeof t?hs(t,i).map((function(e){return e.v})):t,o=0,l=0;if(a.length>0)for(var c=0;c!==s.length;c+=2){switch(l=+s[c+1].v,s[c].v){case"Worksheets":case"\u5de5\u4f5c\u8868":case"\u041b\u0438\u0441\u0442\u044b":case"\u0623\u0648\u0631\u0627\u0642 \u0627\u0644\u0639\u0645\u0644":case"\u30ef\u30fc\u30af\u30b7\u30fc\u30c8":case"\u05d2\u05dc\u05d9\u05d5\u05e0\u05d5\u05ea \u05e2\u05d1\u05d5\u05d3\u05d4":case"Arbeitsbl\xe4tter":case"\xc7al\u0131\u015fma Sayfalar\u0131":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de c\xe1lculo":case"Planilhas":case"Regneark":case"Hojas de c\xe1lculo":case"Werkbladen":n.Worksheets=l,n.SheetNames=a.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"\u540d\u524d\u4ed8\u304d\u4e00\u89a7":case"Benannte Bereiche":case"Navngivne omr\xe5der":n.NamedRanges=l,n.DefinedNames=a.slice(o,o+l);break;case"Charts":case"Diagramme":n.Chartsheets=l,n.ChartNames=a.slice(o,o+l)}o+=l}}var ta=/<[^>]+>[^<]*/g;var na,ia={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function sa(e,t,n){na||(na=oi(ia)),e[t=na[t]||t]=n}function ra(e){var t=e.read_shift(4),n=e.read_shift(4);return new Date(1e3*(n/1e7*Math.pow(2,32)+t/1e7-11644473600)).toISOString().replace(/\.000/,"")}function aa(e,t,n){var i=e.l,s=e.read_shift(0,"lpstr-cp");if(n)for(;e.l-i&3;)++e.l;return s}function oa(e,t,n){var i=e.read_shift(0,"lpwstr");return n&&(e.l+=4-(i.length+1&3)&3),i}function la(e,t,n){return 31===t?oa(e):aa(e,0,n)}function ca(e,t,n){return la(e,t,!1===n?0:4)}function ha(e){var t=e.l,n=fa(e,81);return 0==e[e.l]&&0==e[e.l+1]&&e.l-t&2&&(e.l+=2),[n,fa(e,3)]}function ua(e,t){for(var n=e.read_shift(4),i={},s=0;s!=n;++s){var r=e.read_shift(4),a=e.read_shift(4);i[r]=e.read_shift(a,1200===t?"utf16le":"utf8").replace(cn,"").replace(hn,"!"),1200===t&&a%2&&(e.l+=2)}return 3&e.l&&(e.l=e.l>>3<<2),i}function da(e){var t=e.read_shift(4),n=e.slice(e.l,e.l+t);return e.l+=t,(3&t)>0&&(e.l+=4-(3&t)&3),n}function fa(e,t,n){var i,s=e.read_shift(2),r=n||{};if(e.l+=2,12!==t&&s!==t&&-1===Fr.indexOf(t)&&(4126!=(65534&t)||4126!=(65534&s)))throw new Error("Expected type "+t+" saw "+s);switch(12===t?s:t){case 2:return i=e.read_shift(2,"i"),r.raw||(e.l+=2),i;case 3:return i=e.read_shift(4,"i");case 11:return 0!==e.read_shift(4);case 19:return i=e.read_shift(4);case 30:return aa(e,0,4).replace(cn,"");case 31:return oa(e);case 64:return ra(e);case 65:return da(e);case 71:return function(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}(e);case 80:return ca(e,s,!r.raw).replace(cn,"");case 81:return function(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return la(e,t,0)}(e,s).replace(cn,"");case 4108:return function(e){for(var t=e.read_shift(4),n=[],i=0;i<t/2;++i)n.push(ha(e));return n}(e);case 4126:case 4127:return 4127==s?function(e){for(var t=e.read_shift(4),n=[],i=0;i!=t;++i){var s=e.l;n[i]=e.read_shift(0,"lpwstr").replace(cn,""),e.l-s&2&&(e.l+=2)}return n}(e):function(e){for(var t=e.read_shift(4),n=[],i=0;i!=t;++i)n[i]=e.read_shift(0,"lpstr-cp").replace(cn,"");return n}(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+s)}}function pa(e,t){var n=e.l,i=e.read_shift(4),s=e.read_shift(4),r=[],a=0,o=0,l=-1,c={};for(a=0;a!=s;++a){var h=e.read_shift(4),u=e.read_shift(4);r[a]=[h,u+n]}r.sort((function(e,t){return e[1]-t[1]}));var d={};for(a=0;a!=s;++a){if(e.l!==r[a][1]){var f=!0;if(a>0&&t)switch(t[r[a-1][0]].t){case 2:e.l+2===r[a][1]&&(e.l+=2,f=!1);break;case 80:case 4108:e.l<=r[a][1]&&(e.l=r[a][1],f=!1)}if((!t||0==a)&&e.l<=r[a][1]&&(f=!1,e.l=r[a][1]),f)throw new Error("Read Error: Expected address "+r[a][1]+" at "+e.l+" :"+a)}if(t){var p=t[r[a][0]];if(d[p.n]=fa(e,p.t,{raw:!0}),"version"===p.p&&(d[p.n]=String(d[p.n]>>16)+"."+("0000"+String(65535&d[p.n])).slice(-4)),"CodePage"==p.n)switch(d[p.n]){case 0:d[p.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:zt(o=d[p.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+d[p.n])}}else if(1===r[a][0]){if(o=d.CodePage=fa(e,2),zt(o),-1!==l){var m=e.l;e.l=r[l][1],c=ua(e,o),e.l=m}}else if(0===r[a][0]){if(0===o){l=a,e.l=r[a+1][1];continue}c=ua(e,o)}else{var g,b=c[r[a][0]];switch(e[e.l]){case 65:e.l+=4,g=da(e);break;case 30:case 31:e.l+=4,g=ca(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,g=e.read_shift(4,"i");break;case 19:e.l+=4,g=e.read_shift(4);break;case 5:e.l+=4,g=e.read_shift(8,"f");break;case 11:e.l+=4,g=ba(e,4);break;case 64:e.l+=4,g=vi(ra(e));break;default:throw new Error("unparsed value: "+e[e.l])}d[b]=g}}return e.l=n+i,d}function ma(e,t,n){var i=e.content;if(!i)return{};Qs(i,0);var s,r,a,o,l=0;i.chk("feff","Byte Order: "),i.read_shift(2);var c=i.read_shift(4),h=i.read_shift(16);if(h!==si.utils.consts.HEADER_CLSID&&h!==n)throw new Error("Bad PropertySet CLSID "+h);if(1!==(s=i.read_shift(4))&&2!==s)throw new Error("Unrecognized #Sets: "+s);if(r=i.read_shift(16),o=i.read_shift(4),1===s&&o!==i.l)throw new Error("Length mismatch: "+o+" !== "+i.l);2===s&&(a=i.read_shift(16),l=i.read_shift(4));var u,d=pa(i,t),f={SystemIdentifier:c};for(var p in d)f[p]=d[p];if(f.FMTID=r,1===s)return f;if(l-i.l==2&&(i.l+=2),i.l!==l)throw new Error("Length mismatch 2: "+i.l+" !== "+l);try{u=pa(i,null)}catch(aC){}for(p in u)f[p]=u[p];return f.FMTID=[r,a],f}function ga(e,t){return e.read_shift(t),null}function ba(e,t){return 1===e.read_shift(t)}function va(e){return e.read_shift(2,"u")}function ya(e,t){return function(e,t,n){for(var i=[],s=e.l+t;e.l<s;)i.push(n(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return i}(e,t,va)}function xa(e,t,n){var i=e.read_shift(n&&n.biff>=12?2:1),s="sbcs-cont",r=Bt;(n&&n.biff>=8&&(Bt=1200),n&&8!=n.biff)?12==n.biff&&(s="wstr"):e.read_shift(1)&&(s="dbcs-cont");n.biff>=2&&n.biff<=5&&(s="cpstr");var a=i?e.read_shift(i,s):"";return Bt=r,a}function Sa(e){var t=Bt;Bt=1200;var n,i=e.read_shift(2),s=e.read_shift(1),r=4&s,a=8&s,o=1+(1&s),l=0,c={};a&&(l=e.read_shift(2)),r&&(n=e.read_shift(4));var h=2==o?"dbcs-cont":"sbcs-cont",u=0===i?"":e.read_shift(i,h);return a&&(e.l+=4*l),r&&(e.l+=n),c.t=u,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),Bt=t,c}function wa(e,t,n){if(n){if(n.biff>=2&&n.biff<=5)return e.read_shift(t,"cpstr");if(n.biff>=12)return e.read_shift(t,"dbcs-cont")}return 0===e.read_shift(1)?e.read_shift(t,"sbcs-cont"):e.read_shift(t,"dbcs-cont")}function Ea(e,t,n){var i=e.read_shift(n&&2==n.biff?1:2);return 0===i?(e.l++,""):wa(e,i,n)}function _a(e,t,n){if(n.biff>5)return Ea(e,0,n);var i=e.read_shift(1);return 0===i?(e.l++,""):e.read_shift(i,n.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Ta(e,t){var n=e.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return function(e){var t=e.read_shift(4),n=e.l,i=!1;t>24&&(e.l+=t-24,"795881f43b1d7f48af2c825dc4852763"===e.read_shift(16)&&(i=!0),e.l=n);var s=e.read_shift((i?t-24:t)>>1,"utf16le").replace(cn,"");return i&&(e.l+=24),s}(e);case"0303000000000000c000000000000046":return function(e){for(var t=e.read_shift(2),n="";t-- >0;)n+="../";var i=e.read_shift(0,"lpstr-ansi");if(e.l+=2,57005!=e.read_shift(2))throw new Error("Bad FileMoniker");if(0===e.read_shift(4))return n+i.replace(/\\/g,"/");var s=e.read_shift(4);if(3!=e.read_shift(2))throw new Error("Bad FileMoniker");return n+e.read_shift(s>>1,"utf16le").replace(cn,"")}(e);default:throw new Error("Unsupported Moniker "+n)}}function Ma(e){var t=e.read_shift(4);return t>0?e.read_shift(t,"utf16le").replace(cn,""):""}function Ca(e){return[e.read_shift(1),e.read_shift(1),e.read_shift(1),e.read_shift(1)]}function Aa(e,t){var n=Ca(e);return n[3]=0,n}function Pa(e){return{r:e.read_shift(2),c:e.read_shift(2),ixfe:e.read_shift(2)}}function Na(e,t,n){var i=n.biff>8?4:2;return[e.read_shift(i),e.read_shift(i,"i"),e.read_shift(i,"i")]}function ka(e){return[e.read_shift(2),kr(e)]}function La(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(2),r:t},e:{c:e.read_shift(2),r:n}}}function Ia(e){var t=e.read_shift(2),n=e.read_shift(2);return{s:{c:e.read_shift(1),r:t},e:{c:e.read_shift(1),r:n}}}var Ra=Ia;function Oa(e){e.l+=4;var t=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(2);return e.l+=12,[n,t,i]}function Da(e){e.l+=2,e.l+=e.read_shift(2)}var Fa={0:Da,4:Da,5:Da,6:Da,7:function(e){return e.l+=4,e.cf=e.read_shift(2),{}},8:Da,9:Da,10:Da,11:Da,12:Da,13:function(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t},14:Da,15:Da,16:Da,17:Da,18:Da,19:Da,20:Da,21:Oa};function Ba(e,t){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=e.read_shift(2),(t-=2)>=2&&(n.dt=e.read_shift(2),e.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return e.read_shift(t),n}function ja(e,t,n){var i=0;n&&2==n.biff||(i=e.read_shift(2));var s=e.read_shift(2);return n&&2==n.biff&&(i=1-(s>>15),s&=32767),[{Unsynced:1&i,DyZero:(2&i)>>1,ExAsc:(4&i)>>2,ExDsc:(8&i)>>3},s]}var Va=_a;function Ga(e,t,n){var i=e.l+t,s=8!=n.biff&&n.biff?2:4,r=e.read_shift(s),a=e.read_shift(s),o=e.read_shift(2),l=e.read_shift(2);return e.l=i,{s:{r:r,c:o},e:{r:a,c:l}}}function Wa(e,t,n){var i=Pa(e);2!=n.biff&&9!=t||++e.l;var s=function(e){var t=e.read_shift(1);return 1===e.read_shift(1)?t:1===t}(e);return i.val=s,i.t=!0===s||!1===s?"b":"e",i}var za=function(e,t,n){return 0===t?"":_a(e,0,n)};function Ua(e,t,n){var i,s=e.read_shift(2),r={fBuiltIn:1&s,fWantAdvise:s>>>1&1,fWantPict:s>>>2&1,fOle:s>>>3&1,fOleLink:s>>>4&1,cf:s>>>5&1023,fIcon:s>>>15&1};return 14849===n.sbcch&&(i=function(e,t,n){e.l+=4,t-=4;var i=e.l+t,s=xa(e,0,n),r=e.read_shift(2);if(r!==(i-=e.l))throw new Error("Malformed AddinUdf: padding = "+i+" != "+r);return e.l+=r,s}(e,t-2,n)),r.body=i||e.read_shift(t-2),"string"===typeof i&&(r.Name=i),r}var Ha=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Xa(e,t,n){var i=e.l+t,s=e.read_shift(2),r=e.read_shift(1),a=e.read_shift(1),o=e.read_shift(n&&2==n.biff?1:2),l=0;(!n||n.biff>=5)&&(5!=n.biff&&(e.l+=2),l=e.read_shift(2),5==n.biff&&(e.l+=2),e.l+=4);var c=wa(e,a,n);32&s&&(c=Ha[c.charCodeAt(0)]);var h=i-e.l;n&&2==n.biff&&--h;var u=i!=e.l&&0!==o&&h>0?function(e,t,n,i){var s,r=e.l+t,a=Ol(e,i,n);r!==e.l&&(s=Rl(e,r-e.l,a,n));return[a,s]}(e,h,n,o):[];return{chKey:r,Name:c,itab:l,rgce:u}}function Ya(e,t,n){if(n.biff<8)return function(e,t,n){3==e[e.l+1]&&e[e.l]++;var i=xa(e,0,n);return 3==i.charCodeAt(0)?i.slice(1):i}(e,0,n);for(var i=[],s=e.l+t,r=e.read_shift(n.biff>8?4:2);0!==r--;)i.push(Na(e,n.biff,n));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return i}function qa(e,t,n){var i=Ra(e,6);switch(n.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[i,Gl(e,t,n)]}var Ka={8:function(e,t){var n=e.l+t;e.l+=10;var i=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=n,{fmt:i}}};function $a(e,t,n){if(!n.cellStyles)return Js(e,t);var i=n&&n.biff>=12?4:2,s=e.read_shift(i),r=e.read_shift(i),a=e.read_shift(i),o=e.read_shift(i),l=e.read_shift(2);2==i&&(e.l+=2);var c={s:s,e:r,w:a,ixfe:o,flags:l};return(n.biff>=5||!n.biff)&&(c.level=l>>8&7),c}var Za=Pa,Qa=ya,Ja=Ea;var eo=[2,3,48,49,131,139,140,245],to=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=oi({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(t,n){var i=n||{};i.dateNF||(i.dateNF="yyyymmdd");var s=xr(function(t,n){var i=[],s=nn(1);switch(n.type){case"base64":s=rn(Jt(t));break;case"binary":s=rn(t);break;case"buffer":case"array":s=t}Qs(s,0);var r=s.read_shift(1),a=!!(136&r),o=!1,l=!1;switch(r){case 2:case 3:case 131:case 139:case 245:break;case 48:case 49:o=!0,a=!0;break;case 140:l=!0;break;default:throw new Error("DBF Unsupported Version: "+r.toString(16))}var c=0,h=521;2==r&&(c=s.read_shift(2)),s.l+=3,2!=r&&(c=s.read_shift(4)),c>1048576&&(c=1e6),2!=r&&(h=s.read_shift(2));var u=s.read_shift(2),d=n.codepage||1252;2!=r&&(s.l+=16,s.read_shift(1),0!==s[s.l]&&(d=e[s[s.l]]),s.l+=1,s.l+=2),l&&(s.l+=36);for(var f=[],p={},m=Math.min(s.length,2==r?521:h-10-(o?264:0)),g=l?32:11;s.l<m&&13!=s[s.l];)switch((p={}).name=Yt.utils.decode(d,s.slice(s.l,s.l+g)).replace(/[\u0000\r\n].*$/g,""),s.l+=g,p.type=String.fromCharCode(s.read_shift(1)),2==r||l||(p.offset=s.read_shift(4)),p.len=s.read_shift(1),2==r&&(p.offset=s.read_shift(2)),p.dec=s.read_shift(1),p.name.length&&f.push(p),2!=r&&(s.l+=l?13:14),p.type){case"B":o&&8==p.len||!n.WTF||console.log("Skipping "+p.name+":"+p.type);break;case"G":case"P":n.WTF&&console.log("Skipping "+p.name+":"+p.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+p.type)}if(13!==s[s.l]&&(s.l=h-1),13!==s.read_shift(1))throw new Error("DBF Terminator not found "+s.l+" "+s[s.l]);s.l=h;var b=0,v=0;for(i[0]=[],v=0;v!=f.length;++v)i[0][v]=f[v].name;for(;c-- >0;)if(42!==s[s.l])for(++s.l,i[++b]=[],v=0,v=0;v!=f.length;++v){var y=s.slice(s.l,s.l+f[v].len);s.l+=f[v].len,Qs(y,0);var x=Yt.utils.decode(d,y);switch(f[v].type){case"C":x.trim().length&&(i[b][v]=x.replace(/\s+$/,""));break;case"D":8===x.length?i[b][v]=new Date(+x.slice(0,4),+x.slice(4,6)-1,+x.slice(6,8)):i[b][v]=x;break;case"F":i[b][v]=parseFloat(x.trim());break;case"+":case"I":i[b][v]=l?2147483648^y.read_shift(-4,"i"):y.read_shift(4,"i");break;case"L":switch(x.trim().toUpperCase()){case"Y":case"T":i[b][v]=!0;break;case"N":case"F":i[b][v]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+x+"|")}break;case"M":if(!a)throw new Error("DBF Unexpected MEMO for type "+r.toString(16));i[b][v]="##MEMO##"+(l?parseInt(x.trim(),10):y.read_shift(4));break;case"N":(x=x.replace(/\u0000/g,"").trim())&&"."!=x&&(i[b][v]=+x||0);break;case"@":i[b][v]=new Date(y.read_shift(-8,"f")-621356832e5);break;case"T":i[b][v]=new Date(864e5*(y.read_shift(4)-2440588)+y.read_shift(4));break;case"Y":i[b][v]=y.read_shift(4,"i")/1e4+y.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":i[b][v]=-y.read_shift(-8,"f");break;case"B":if(o&&8==f[v].len){i[b][v]=y.read_shift(8,"f");break}case"G":case"P":y.l+=f[v].len;break;case"0":if("_NullFlags"===f[v].name)break;default:throw new Error("DBF Unsupported data type "+f[v].type)}}else s.l+=u;if(2!=r&&s.l<s.length&&26!=s[s.l++])throw new Error("DBF EOF Marker missing "+(s.l-1)+" of "+s.length+" "+s[s.l-1].toString(16));return n&&n.sheetRows&&(i=i.slice(0,n.sheetRows)),n.DBF=f,i}(t,i),i);return s["!cols"]=i.DBF.map((function(e){return{wch:e.len,DBF:e}})),delete i.DBF,s}var i={B:8,C:250,L:1,D:8,"?":0,"":0};return{to_workbook:function(e,t){try{return vr(n(e,t),t)}catch(aC){if(t&&t.WTF)throw aC}return{SheetNames:[],Sheets:{}}},to_sheet:n,from_sheet:function(e,n){var s=n||{};if(+s.codepage>=0&&zt(+s.codepage),"string"==s.type)throw new Error("Cannot write DBF to JS string");var r=nr(),a=iu(e,{header:1,raw:!0,cellDates:!0}),o=a[0],l=a.slice(1),c=e["!cols"]||[],h=0,u=0,d=0,f=1;for(h=0;h<o.length;++h)if(((c[h]||{}).DBF||{}).name)o[h]=c[h].DBF.name,++d;else if(null!=o[h]){if(++d,"number"===typeof o[h]&&(o[h]=o[h].toString(10)),"string"!==typeof o[h])throw new Error("DBF Invalid column name "+o[h]+" |"+typeof o[h]+"|");if(o.indexOf(o[h])!==h)for(u=0;u<1024;++u)if(-1==o.indexOf(o[h]+"_"+u)){o[h]+="_"+u;break}}var p=mr(e["!ref"]),m=[],g=[],b=[];for(h=0;h<=p.e.c-p.s.c;++h){var v="",y="",x=0,S=[];for(u=0;u<l.length;++u)null!=l[u][h]&&S.push(l[u][h]);if(0!=S.length&&null!=o[h]){for(u=0;u<S.length;++u){switch(typeof S[u]){case"number":y="B";break;case"string":default:y="C";break;case"boolean":y="L";break;case"object":y=S[u]instanceof Date?"D":"C"}x=Math.max(x,String(S[u]).length),v=v&&v!=y?"C":y}x>250&&(x=250),"C"==(y=((c[h]||{}).DBF||{}).type)&&c[h].DBF.len>x&&(x=c[h].DBF.len),"B"==v&&"N"==y&&(v="N",b[h]=c[h].DBF.dec,x=c[h].DBF.len),g[h]="C"==v||"N"==y?x:i[v]||0,f+=g[h],m[h]=v}else m[h]="?"}var w=r.next(32);for(w.write_shift(4,318902576),w.write_shift(4,l.length),w.write_shift(2,296+32*d),w.write_shift(2,f),h=0;h<4;++h)w.write_shift(4,0);for(w.write_shift(4,(+t[jt]||3)<<8),h=0,u=0;h<o.length;++h)if(null!=o[h]){var E=r.next(32),_=(o[h].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);E.write_shift(1,_,"sbcs"),E.write_shift(1,"?"==m[h]?"C":m[h],"sbcs"),E.write_shift(4,u),E.write_shift(1,g[h]||i[m[h]]||0),E.write_shift(1,b[h]||0),E.write_shift(1,2),E.write_shift(4,0),E.write_shift(1,0),E.write_shift(4,0),E.write_shift(4,0),u+=g[h]||i[m[h]]||0}var T=r.next(264);for(T.write_shift(4,13),h=0;h<65;++h)T.write_shift(4,0);for(h=0;h<l.length;++h){var M=r.next(f);for(M.write_shift(1,0),u=0;u<o.length;++u)if(null!=o[u])switch(m[u]){case"L":M.write_shift(1,null==l[h][u]?63:l[h][u]?84:70);break;case"B":M.write_shift(8,l[h][u]||0,"f");break;case"N":var C="0";for("number"==typeof l[h][u]&&(C=l[h][u].toFixed(b[u]||0)),d=0;d<g[u]-C.length;++d)M.write_shift(1,32);M.write_shift(1,C,"sbcs");break;case"D":l[h][u]?(M.write_shift(4,("0000"+l[h][u].getFullYear()).slice(-4),"sbcs"),M.write_shift(2,("00"+(l[h][u].getMonth()+1)).slice(-2),"sbcs"),M.write_shift(2,("00"+l[h][u].getDate()).slice(-2),"sbcs")):M.write_shift(8,"00000000","sbcs");break;case"C":var A=String(null!=l[h][u]?l[h][u]:"").slice(0,g[u]);for(M.write_shift(1,A,"sbcs"),d=0;d<g[u]-A.length;++d)M.write_shift(1,32)}}return r.next(1).write_shift(1,26),r.end()}}}(),no=function(){var e={AA:"\xc0",BA:"\xc1",CA:"\xc2",DA:195,HA:"\xc4",JA:197,AE:"\xc8",BE:"\xc9",CE:"\xca",HE:"\xcb",AI:"\xcc",BI:"\xcd",CI:"\xce",HI:"\xcf",AO:"\xd2",BO:"\xd3",CO:"\xd4",DO:213,HO:"\xd6",AU:"\xd9",BU:"\xda",CU:"\xdb",HU:"\xdc",Aa:"\xe0",Ba:"\xe1",Ca:"\xe2",Da:227,Ha:"\xe4",Ja:229,Ae:"\xe8",Be:"\xe9",Ce:"\xea",He:"\xeb",Ai:"\xec",Bi:"\xed",Ci:"\xee",Hi:"\xef",Ao:"\xf2",Bo:"\xf3",Co:"\xf4",Do:245,Ho:"\xf6",Au:"\xf9",Bu:"\xfa",Cu:"\xfb",Hu:"\xfc",KC:"\xc7",Kc:"\xe7",q:"\xe6",z:"\u0153",a:"\xc6",j:"\u0152",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1bN("+ai(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(t,n){var i=e[n];return"number"==typeof i?$t(i):i},i=function(e,t,n){var i=t.charCodeAt(0)-32<<4|n.charCodeAt(0)-48;return 59==i?e:$t(i)};function s(e,s){var r,a=e.split(/[\n\r]+/),o=-1,l=-1,c=0,h=0,u=[],d=[],f=null,p={},m=[],g=[],b=[],v=0;for(+s.codepage>=0&&zt(+s.codepage);c!==a.length;++c){v=0;var y,x=a[c].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,i).replace(t,n),S=x.replace(/;;/g,"\0").split(";").map((function(e){return e.replace(/\u0000/g,";")})),w=S[0];if(x.length>0)switch(w){case"ID":case"E":case"B":case"O":case"W":break;case"P":"P"==S[1].charAt(0)&&d.push(x.slice(3).replace(/;;/g,";"));break;case"C":var E=!1,_=!1,T=!1,M=!1,C=-1,A=-1;for(h=1;h<S.length;++h)switch(S[h].charAt(0)){case"A":case"G":break;case"X":l=parseInt(S[h].slice(1))-1,_=!0;break;case"Y":for(o=parseInt(S[h].slice(1))-1,_||(l=0),r=u.length;r<=o;++r)u[r]=[];break;case"K":'"'===(y=S[h].slice(1)).charAt(0)?y=y.slice(1,y.length-1):"TRUE"===y?y=!0:"FALSE"===y?y=!1:isNaN(wi(y))?isNaN(_i(y).getDate())||(y=vi(y)):(y=wi(y),null!==f&&qn(f)&&(y=fi(y))),"undefined"!==typeof Yt&&"string"==typeof y&&"string"!=(s||{}).type&&(s||{}).codepage&&(y=Yt.utils.decode(s.codepage,y)),E=!0;break;case"E":M=!0;var P=cl(S[h].slice(1),{r:o,c:l});u[o][l]=[u[o][l],P];break;case"S":T=!0,u[o][l]=[u[o][l],"S5S"];break;case"R":C=parseInt(S[h].slice(1))-1;break;case"C":A=parseInt(S[h].slice(1))-1;break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+x)}if(E&&(u[o][l]&&2==u[o][l].length?u[o][l][0]=y:u[o][l]=y,f=null),T){if(M)throw new Error("SYLK shared formula cannot have own formula");var N=C>-1&&u[C][A];if(!N||!N[1])throw new Error("SYLK shared formula cannot find base");u[o][l][1]=dl(N[1],{r:o-C,c:l-A})}break;case"F":var k=0;for(h=1;h<S.length;++h)switch(S[h].charAt(0)){case"X":l=parseInt(S[h].slice(1))-1,++k;break;case"Y":for(o=parseInt(S[h].slice(1))-1,r=u.length;r<=o;++r)u[r]=[];break;case"M":v=parseInt(S[h].slice(1))/20;break;case"F":case"G":case"S":case"D":case"N":break;case"P":f=d[parseInt(S[h].slice(1))];break;case"W":for(b=S[h].slice(1).split(" "),r=parseInt(b[0],10);r<=parseInt(b[1],10);++r)v=parseInt(b[2],10),g[r-1]=0===v?{hidden:!0}:{wch:v},jo(g[r-1]);break;case"C":g[l=parseInt(S[h].slice(1))-1]||(g[l]={});break;case"R":m[o=parseInt(S[h].slice(1))-1]||(m[o]={}),v>0?(m[o].hpt=v,m[o].hpx=Wo(v)):0===v&&(m[o].hidden=!0);break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+x)}k<1&&(f=null);break;default:if(s&&s.WTF)throw new Error("SYLK bad record "+x)}}return m.length>0&&(p["!rows"]=m),g.length>0&&(p["!cols"]=g),s&&s.sheetRows&&(u=u.slice(0,s.sheetRows)),[u,p]}function r(e,t){var n=function(e,t){switch(t.type){case"base64":return s(Jt(e),t);case"binary":return s(e,t);case"buffer":return s(en&&Buffer.isBuffer(e)?e.toString("binary"):an(e),t);case"array":return s(yi(e),t)}throw new Error("Unrecognized type "+t.type)}(e,t),i=n[0],r=n[1],a=xr(i,t);return ai(r).forEach((function(e){a[e]=r[e]})),a}function a(e,t,n,i){var s="C;Y"+(n+1)+";X"+(i+1)+";K";switch(e.t){case"n":s+=e.v||0,e.f&&!e.F&&(s+=";E"+ul(e.f,{r:n,c:i}));break;case"b":s+=e.v?"TRUE":"FALSE";break;case"e":s+=e.w||e.v;break;case"d":s+='"'+(e.w||e.v)+'"';break;case"s":s+='"'+e.v.replace(/"/g,"").replace(/;/g,";;")+'"'}return s}return e["|"]=254,{to_workbook:function(e,t){return vr(r(e,t),t)},to_sheet:r,from_sheet:function(e,t){var n,i,s=["ID;PWXL;N;E"],r=[],o=mr(e["!ref"]),l=Array.isArray(e),c="\r\n";s.push("P;PGeneral"),s.push("F;P0;DG0G8;M255"),e["!cols"]&&(i=s,e["!cols"].forEach((function(e,t){var n="F;W"+(t+1)+" "+(t+1)+" ";e.hidden?n+="0":("number"!=typeof e.width||e.wpx||(e.wpx=Ro(e.width)),"number"!=typeof e.wpx||e.wch||(e.wch=Oo(e.wpx)),"number"==typeof e.wch&&(n+=Math.round(e.wch)))," "!=n.charAt(n.length-1)&&i.push(n)}))),e["!rows"]&&function(e,t){t.forEach((function(t,n){var i="F;";t.hidden?i+="M0;":t.hpt?i+="M"+20*t.hpt+";":t.hpx&&(i+="M"+20*Go(t.hpx)+";"),i.length>2&&e.push(i+"R"+(n+1))}))}(s,e["!rows"]),s.push("B;Y"+(o.e.r-o.s.r+1)+";X"+(o.e.c-o.s.c+1)+";D"+[o.s.c,o.s.r,o.e.c,o.e.r].join(" "));for(var h=o.s.r;h<=o.e.r;++h)for(var u=o.s.c;u<=o.e.c;++u){var d=dr({r:h,c:u});(n=l?(e[h]||[])[u]:e[d])&&(null!=n.v||n.f&&!n.F)&&r.push(a(n,0,h,u))}return s.join(c)+c+r.join(c)+c+"E"+c}}}(),io=function(){function e(e,t){for(var n=e.split("\n"),i=-1,s=-1,r=0,a=[];r!==n.length;++r)if("BOT"!==n[r].trim()){if(!(i<0)){for(var o=n[r].trim().split(","),l=o[0],c=o[1],h=n[++r]||"";1&(h.match(/["]/g)||[]).length&&r<n.length-1;)h+="\n"+n[++r];switch(h=h.trim(),+l){case-1:if("BOT"===h){a[++i]=[],s=0;continue}if("EOD"!==h)throw new Error("Unrecognized DIF special command "+h);break;case 0:"TRUE"===h?a[i][s]=!0:"FALSE"===h?a[i][s]=!1:isNaN(wi(c))?isNaN(_i(c).getDate())?a[i][s]=c:a[i][s]=vi(c):a[i][s]=wi(c),++s;break;case 1:(h=(h=h.slice(1,h.length-1)).replace(/""/g,'"'))&&h.match(/^=".*"$/)&&(h=h.slice(2,-1)),a[i][s++]=""!==h?h:null}if("EOD"===h)break}}else a[++i]=[],s=0;return t&&t.sheetRows&&(a=a.slice(0,t.sheetRows)),a}function t(t,n){return xr(function(t,n){switch(n.type){case"base64":return e(Jt(t),n);case"binary":return e(t,n);case"buffer":return e(en&&Buffer.isBuffer(t)?t.toString("binary"):an(t),n);case"array":return e(yi(t),n)}throw new Error("Unrecognized type "+n.type)}(t,n),n)}return{to_workbook:function(e,n){return vr(t(e,n),n)},to_sheet:t,from_sheet:function(){var e=function(e,t,n,i,s){e.push(t),e.push(n+","+i),e.push('"'+s.replace(/"/g,'""')+'"')},t=function(e,t,n,i){e.push(t+","+n),e.push(1==t?'"'+i.replace(/"/g,'""')+'"':i)};return function(n){var i,s=[],r=mr(n["!ref"]),a=Array.isArray(n);e(s,"TABLE",0,1,"sheetjs"),e(s,"VECTORS",0,r.e.r-r.s.r+1,""),e(s,"TUPLES",0,r.e.c-r.s.c+1,""),e(s,"DATA",0,0,"");for(var o=r.s.r;o<=r.e.r;++o){t(s,-1,0,"BOT");for(var l=r.s.c;l<=r.e.c;++l){var c=dr({r:o,c:l});if(i=a?(n[o]||[])[l]:n[c])switch(i.t){case"n":var h=i.w;h||null==i.v||(h=i.v),null==h?i.f&&!i.F?t(s,1,0,"="+i.f):t(s,1,0,""):t(s,0,h,"V");break;case"b":t(s,0,i.v?1:0,i.v?"TRUE":"FALSE");break;case"s":t(s,1,0,isNaN(i.v)?i.v:'="'+i.v+'"');break;case"d":i.w||(i.w=Qn(i.z||xn[14],ci(vi(i.v)))),t(s,0,i.w,"V");break;default:t(s,1,0,"")}else t(s,1,0,"")}}t(s,-1,0,"EOD");return s.join("\r\n")}}()}}(),so=function(){function e(e){return e.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(e,t){return xr(function(e,t){for(var n=e.split("\n"),i=-1,s=-1,r=0,a=[];r!==n.length;++r){var o=n[r].trim().split(":");if("cell"===o[0]){var l=ur(o[1]);if(a.length<=l.r)for(i=a.length;i<=l.r;++i)a[i]||(a[i]=[]);switch(i=l.r,s=l.c,o[2]){case"t":a[i][s]=o[3].replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n");break;case"v":a[i][s]=+o[3];break;case"vtf":var c=o[o.length-1];case"vtc":"nl"===o[3]?a[i][s]=!!+o[4]:a[i][s]=+o[4],"vtf"==o[2]&&(a[i][s]=[a[i][s],c])}}}return t&&t.sheetRows&&(a=a.slice(0,t.sheetRows)),a}(e,t),t)}var n=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join("\n"),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join("\n")+"\n",s=["# SocialCalc Spreadsheet Control Save","part:sheet"].join("\n"),r="--SocialCalcSpreadsheetControlSave--";function a(t){if(!t||!t["!ref"])return"";for(var n,i=[],s=[],r="",a=fr(t["!ref"]),o=Array.isArray(t),l=a.s.r;l<=a.e.r;++l)for(var c=a.s.c;c<=a.e.c;++c)if(r=dr({r:l,c:c}),(n=o?(t[l]||[])[c]:t[r])&&null!=n.v&&"z"!==n.t){switch(s=["cell",r,"t"],n.t){case"s":case"str":s.push(e(n.v));break;case"n":n.f?(s[2]="vtf",s[3]="n",s[4]=n.v,s[5]=e(n.f)):(s[2]="v",s[3]=n.v);break;case"b":s[2]="vt"+(n.f?"f":"c"),s[3]="nl",s[4]=n.v?"1":"0",s[5]=e(n.f||(n.v?"TRUE":"FALSE"));break;case"d":var h=ci(vi(n.v));s[2]="vtc",s[3]="nd",s[4]=""+h,s[5]=n.w||Qn(n.z||xn[14],h);break;case"e":continue}i.push(s.join(":"))}return i.push("sheet:c:"+(a.e.c-a.s.c+1)+":r:"+(a.e.r-a.s.r+1)+":tvf:1"),i.push("valueformat:1:text-wiki"),i.join("\n")}return{to_workbook:function(e,n){return vr(t(e,n),n)},to_sheet:t,from_sheet:function(e){return[n,i,s,i,a(e),r].join("\n")}}}(),ro=function(){function e(e,t,n,i,s){s.raw?t[n][i]=e:""===e||("TRUE"===e?t[n][i]=!0:"FALSE"===e?t[n][i]=!1:isNaN(wi(e))?isNaN(_i(e).getDate())?t[n][i]=e:t[n][i]=vi(e):t[n][i]=wi(e))}var t={44:",",9:"\t",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(e){for(var i={},s=!1,r=0,a=0;r<e.length;++r)34==(a=e.charCodeAt(r))?s=!s:!s&&a in t&&(i[a]=(i[a]||0)+1);for(r in a=[],i)Object.prototype.hasOwnProperty.call(i,r)&&a.push([i[r],r]);if(!a.length)for(r in i=n)Object.prototype.hasOwnProperty.call(i,r)&&a.push([i[r],r]);return a.sort((function(e,t){return e[0]-t[0]||n[e[1]]-n[t[1]]})),t[a.pop()[1]]||44}function s(e,t){var n=t||{},s="";var r=n.dense?[]:{},a={s:{c:0,r:0},e:{c:0,r:0}};"sep="==e.slice(0,4)?13==e.charCodeAt(5)&&10==e.charCodeAt(6)?(s=e.charAt(4),e=e.slice(7)):13==e.charCodeAt(5)||10==e.charCodeAt(5)?(s=e.charAt(4),e=e.slice(6)):s=i(e.slice(0,1024)):s=n&&n.FS?n.FS:i(e.slice(0,1024));var o=0,l=0,c=0,h=0,u=0,d=s.charCodeAt(0),f=!1,p=0,m=e.charCodeAt(0);e=e.replace(/\r\n/gm,"\n");var g=null!=n.dateNF?function(e){var t="number"==typeof e?xn[e]:e;return t=t.replace(ni,"(\\d+)"),new RegExp("^"+t+"$")}(n.dateNF):null;function b(){var t=e.slice(h,u),i={};if('"'==t.charAt(0)&&'"'==t.charAt(t.length-1)&&(t=t.slice(1,-1).replace(/""/g,'"')),0===t.length)i.t="z";else if(n.raw)i.t="s",i.v=t;else if(0===t.trim().length)i.t="s",i.v=t;else if(61==t.charCodeAt(0))34==t.charCodeAt(1)&&34==t.charCodeAt(t.length-1)?(i.t="s",i.v=t.slice(2,-1).replace(/""/g,'"')):1!=t.length?(i.t="n",i.f=t.slice(1)):(i.t="s",i.v=t);else if("TRUE"==t)i.t="b",i.v=!0;else if("FALSE"==t)i.t="b",i.v=!1;else if(isNaN(c=wi(t)))if(!isNaN(_i(t).getDate())||g&&t.match(g)){i.z=n.dateNF||xn[14];var s=0;g&&t.match(g)&&(t=function(e,t,n){var i=-1,s=-1,r=-1,a=-1,o=-1,l=-1;(t.match(ni)||[]).forEach((function(e,t){var c=parseInt(n[t+1],10);switch(e.toLowerCase().charAt(0)){case"y":i=c;break;case"d":r=c;break;case"h":a=c;break;case"s":l=c;break;case"m":a>=0?o=c:s=c}})),l>=0&&-1==o&&s>=0&&(o=s,s=-1);var c=(""+(i>=0?i:(new Date).getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(r>=1?r:1)).slice(-2);7==c.length&&(c="0"+c),8==c.length&&(c="20"+c);var h=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return-1==a&&-1==o&&-1==l?c:-1==i&&-1==s&&-1==r?h:c+"T"+h}(0,n.dateNF,t.match(g)||[]),s=1),n.cellDates?(i.t="d",i.v=vi(t,s)):(i.t="n",i.v=ci(vi(t,s))),!1!==n.cellText&&(i.w=Qn(i.z,i.v instanceof Date?ci(i.v):i.v)),n.cellNF||delete i.z}else i.t="s",i.v=t;else i.t="n",!1!==n.cellText&&(i.w=t),i.v=c;if("z"==i.t||(n.dense?(r[o]||(r[o]=[]),r[o][l]=i):r[dr({c:l,r:o})]=i),h=u+1,m=e.charCodeAt(h),a.e.c<l&&(a.e.c=l),a.e.r<o&&(a.e.r=o),p==d)++l;else if(l=0,++o,n.sheetRows&&n.sheetRows<=o)return!0}e:for(;u<e.length;++u)switch(p=e.charCodeAt(u)){case 34:34===m&&(f=!f);break;case d:case 10:case 13:if(!f&&b())break e}return u-h>0&&b(),r["!ref"]=pr(a),r}function r(t,n){return n&&n.PRN?n.FS||"sep="==t.slice(0,4)||t.indexOf("\t")>=0||t.indexOf(",")>=0||t.indexOf(";")>=0?s(t,n):xr(function(t,n){var i=n||{},s=[];if(!t||0===t.length)return s;for(var r=t.split(/[\r\n]/),a=r.length-1;a>=0&&0===r[a].length;)--a;for(var o=10,l=0,c=0;c<=a;++c)-1==(l=r[c].indexOf(" "))?l=r[c].length:l++,o=Math.max(o,l);for(c=0;c<=a;++c){s[c]=[];var h=0;for(e(r[c].slice(0,o).trim(),s,c,h,i),h=1;h<=(r[c].length-o)/10+1;++h)e(r[c].slice(o+10*(h-1),o+10*h).trim(),s,c,h,i)}return i.sheetRows&&(s=s.slice(0,i.sheetRows)),s}(t,n),n):s(t,n)}function a(e,t){var n="",i="string"==t.type?[0,0,0,0]:Qh(e,t);switch(t.type){case"base64":n=Jt(e);break;case"binary":case"string":n=e;break;case"buffer":n=65001==t.codepage?e.toString("utf8"):t.codepage&&"undefined"!==typeof Yt?Yt.utils.decode(t.codepage,e):en&&Buffer.isBuffer(e)?e.toString("binary"):an(e);break;case"array":n=yi(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==i[0]&&187==i[1]&&191==i[2]?n=is(n.slice(3)):"string"!=t.type&&"buffer"!=t.type&&65001==t.codepage?n=is(n):"binary"==t.type&&"undefined"!==typeof Yt&&t.codepage&&(n=Yt.utils.decode(t.codepage,Yt.utils.encode(28591,n))),"socialcalc:version:"==n.slice(0,19)?so.to_sheet("string"==t.type?n:is(n),t):r(n,t)}return{to_workbook:function(e,t){return vr(a(e,t),t)},to_sheet:a,from_sheet:function(e){for(var t,n=[],i=mr(e["!ref"]),s=Array.isArray(e),r=i.s.r;r<=i.e.r;++r){for(var a=[],o=i.s.c;o<=i.e.c;++o){var l=dr({r:r,c:o});if((t=s?(e[r]||[])[o]:e[l])&&null!=t.v){for(var c=(t.w||(br(t),t.w)||"").slice(0,10);c.length<10;)c+=" ";a.push(c+(0===o?" ":""))}else a.push("          ")}n.push(a.join(""))}return n.join("\n")}}}();var ao=function(){function e(e,t,n){if(e){Qs(e,e.l||0);for(var i=n.Enum||b;e.l<e.length;){var s=e.read_shift(2),r=i[s]||i[65535],a=e.read_shift(2),o=e.l+a,l=r.f&&r.f(e,a,n);if(e.l=o,t(l,r,s))return}}}function t(t,n){if(!t)return t;var i=n||{};var s=i.dense?[]:{},r="Sheet1",a="",o=0,l={},c=[],h=[],u={s:{r:0,c:0},e:{r:0,c:0}},d=i.sheetRows||0;if(0==t[2]&&(8==t[3]||9==t[3])&&t.length>=16&&5==t[14]&&108===t[15])throw new Error("Unsupported Works 3 for Mac file");if(2==t[2])i.Enum=b,e(t,(function(e,t,n){switch(n){case 0:i.vers=e,e>=4096&&(i.qpro=!0);break;case 6:u=e;break;case 204:e&&(a=e);break;case 222:a=e;break;case 15:case 51:i.qpro||(e[1].v=e[1].v.slice(1));case 13:case 14:case 16:14==n&&112==(112&e[2])&&(15&e[2])>1&&(15&e[2])<15&&(e[1].z=i.dateNF||xn[14],i.cellDates&&(e[1].t="d",e[1].v=fi(e[1].v))),i.qpro&&e[3]>o&&(s["!ref"]=pr(u),l[r]=s,c.push(r),s=i.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],r=a||"Sheet"+(o+1),a="");var h=i.dense?(s[e[0].r]||[])[e[0].c]:s[dr(e[0])];if(h){h.t=e[1].t,h.v=e[1].v,null!=e[1].z&&(h.z=e[1].z),null!=e[1].f&&(h.f=e[1].f);break}i.dense?(s[e[0].r]||(s[e[0].r]=[]),s[e[0].r][e[0].c]=e[1]):s[dr(e[0])]=e[1]}}),i);else{if(26!=t[2]&&14!=t[2])throw new Error("Unrecognized LOTUS BOF "+t[2]);i.Enum=v,14==t[2]&&(i.qpro=!0,t.l=0),e(t,(function(e,t,n){switch(n){case 204:r=e;break;case 22:e[1].v=e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(e[3]>o&&(s["!ref"]=pr(u),l[r]=s,c.push(r),s=i.dense?[]:{},u={s:{r:0,c:0},e:{r:0,c:0}},o=e[3],r="Sheet"+(o+1)),d>0&&e[0].r>=d)break;i.dense?(s[e[0].r]||(s[e[0].r]=[]),s[e[0].r][e[0].c]=e[1]):s[dr(e[0])]=e[1],u.e.c<e[0].c&&(u.e.c=e[0].c),u.e.r<e[0].r&&(u.e.r=e[0].r);break;case 27:e[14e3]&&(h[e[14e3][0]]=e[14e3][1]);break;case 1537:h[e[0]]=e[1],e[0]==o&&(r=e[1])}}),i)}if(s["!ref"]=pr(u),l[a||r]=s,c.push(a||r),!h.length)return{SheetNames:c,Sheets:l};for(var f={},p=[],m=0;m<h.length;++m)l[c[m]]?(p.push(h[m]||c[m]),f[h[m]]=l[h[m]]||l[c[m]]):(p.push(h[m]),f[h[m]]={"!ref":"A1"});return{SheetNames:p,Sheets:f}}function n(e,t,n){var i=[{c:0,r:0},{t:"n",v:0},0,0];return n.qpro&&20768!=n.vers?(i[0].c=e.read_shift(1),i[3]=e.read_shift(1),i[0].r=e.read_shift(2),e.l+=2):(i[2]=e.read_shift(1),i[0].c=e.read_shift(2),i[0].r=e.read_shift(2)),i}function i(e,t,i){var s=e.l+t,r=n(e,0,i);if(r[1].t="s",20768==i.vers){e.l++;var a=e.read_shift(1);return r[1].v=e.read_shift(a,"utf8"),r}return i.qpro&&e.l++,r[1].v=e.read_shift(s-e.l,"cstr"),r}function s(e,t,n){var i=er(7+n.length);i.write_shift(1,255),i.write_shift(2,t),i.write_shift(2,e),i.write_shift(1,39);for(var s=0;s<i.length;++s){var r=n.charCodeAt(s);i.write_shift(1,r>=128?95:r)}return i.write_shift(1,0),i}function r(e,t,n){var i=er(7);return i.write_shift(1,255),i.write_shift(2,t),i.write_shift(2,e),i.write_shift(2,n,"i"),i}function a(e,t,n){var i=er(13);return i.write_shift(1,255),i.write_shift(2,t),i.write_shift(2,e),i.write_shift(8,n,"f"),i}function o(e,t,n){var i=32768&t;return t=(i?e:0)+((t&=-32769)>=8192?t-16384:t),(i?"":"$")+(n?hr(t):lr(t))}var l={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},c=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function h(e){var t=[{c:0,r:0},{t:"n",v:0},0];return t[0].r=e.read_shift(2),t[3]=e[e.l++],t[0].c=e[e.l++],t}function u(e,t,n,i){var s=er(6+i.length);s.write_shift(2,e),s.write_shift(1,n),s.write_shift(1,t),s.write_shift(1,39);for(var r=0;r<i.length;++r){var a=i.charCodeAt(r);s.write_shift(1,a>=128?95:a)}return s.write_shift(1,0),s}function d(e,t){var n=h(e),i=e.read_shift(4),s=e.read_shift(4),r=e.read_shift(2);if(65535==r)return 0===i&&3221225472===s?(n[1].t="e",n[1].v=15):0===i&&3489660928===s?(n[1].t="e",n[1].v=42):n[1].v=0,n;var a=32768&r;return r=(32767&r)-16446,n[1].v=(1-2*a)*(s*Math.pow(2,r+32)+i*Math.pow(2,r)),n}function f(e,t,n,i){var s=er(14);if(s.write_shift(2,e),s.write_shift(1,n),s.write_shift(1,t),0==i)return s.write_shift(4,0),s.write_shift(4,0),s.write_shift(2,65535),s;var r,a=0,o=0,l=0;return i<0&&(a=1,i=-i),o=0|Math.log2(i),0==(2147483648&(l=(i/=Math.pow(2,o-31))>>>0))&&(++o,l=(i/=2)>>>0),i-=l,l|=2147483648,l>>>=0,r=(i*=Math.pow(2,32))>>>0,s.write_shift(4,r),s.write_shift(4,l),o+=16383+(a?32768:0),s.write_shift(2,o),s}function p(e,t){var n=h(e),i=e.read_shift(8,"f");return n[1].v=i,n}function m(e,t){return 0==e[e.l+t-1]?e.read_shift(t,"cstr"):""}function g(e,t){var n=er(5+e.length);n.write_shift(2,14e3),n.write_shift(2,t);for(var i=0;i<e.length;++i){var s=e.charCodeAt(i);n[n.l++]=s>127?95:s}return n[n.l++]=0,n}var b={0:{n:"BOF",f:va},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:function(e,t,n){var i={s:{c:0,r:0},e:{c:0,r:0}};return 8==t&&n.qpro?(i.s.c=e.read_shift(1),e.l++,i.s.r=e.read_shift(2),i.e.c=e.read_shift(1),e.l++,i.e.r=e.read_shift(2),i):(i.s.c=e.read_shift(2),i.s.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),i.e.c=e.read_shift(2),i.e.r=e.read_shift(2),12==t&&n.qpro&&(e.l+=2),65535==i.s.c&&(i.s.c=i.e.c=i.s.r=i.e.r=0),i)}},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:function(e,t,i){var s=n(e,0,i);return s[1].v=e.read_shift(2,"i"),s}},14:{n:"NUMBER",f:function(e,t,i){var s=n(e,0,i);return s[1].v=e.read_shift(8,"f"),s}},15:{n:"LABEL",f:i},16:{n:"FORMULA",f:function(e,t,i){var s=e.l+t,r=n(e,0,i);if(r[1].v=e.read_shift(8,"f"),i.qpro)e.l=s;else{var a=e.read_shift(2);!function(e,t){Qs(e,0);var n=[],i=0,s="",r="",a="",h="";for(;e.l<e.length;){var u=e[e.l++];switch(u){case 0:n.push(e.read_shift(8,"f"));break;case 1:r=o(t[0].c,e.read_shift(2),!0),s=o(t[0].r,e.read_shift(2),!1),n.push(r+s);break;case 2:var d=o(t[0].c,e.read_shift(2),!0),f=o(t[0].r,e.read_shift(2),!1);r=o(t[0].c,e.read_shift(2),!0),s=o(t[0].r,e.read_shift(2),!1),n.push(d+f+":"+r+s);break;case 3:if(e.l<e.length)return void console.error("WK1 premature formula end");break;case 4:n.push("("+n.pop()+")");break;case 5:n.push(e.read_shift(2));break;case 6:for(var p="";u=e[e.l++];)p+=String.fromCharCode(u);n.push('"'+p.replace(/"/g,'""')+'"');break;case 8:n.push("-"+n.pop());break;case 23:n.push("+"+n.pop());break;case 22:n.push("NOT("+n.pop()+")");break;case 20:case 21:h=n.pop(),a=n.pop(),n.push(["AND","OR"][u-20]+"("+a+","+h+")");break;default:if(u<32&&c[u])h=n.pop(),a=n.pop(),n.push(a+c[u]+h);else{if(!l[u])return u<=7?console.error("WK1 invalid opcode "+u.toString(16)):u<=24?console.error("WK1 unsupported op "+u.toString(16)):u<=30?console.error("WK1 invalid opcode "+u.toString(16)):u<=115?console.error("WK1 unsupported function opcode "+u.toString(16)):console.error("WK1 unrecognized opcode "+u.toString(16));if(69==(i=l[u][1])&&(i=e[e.l++]),i>n.length)return void console.error("WK1 bad formula parse 0x"+u.toString(16)+":|"+n.join("|")+"|");var m=n.slice(-i);n.length-=i,n.push(l[u][0]+"("+m.join(",")+")")}}}1==n.length?t[1].f=""+n[0]:console.error("WK1 bad formula parse |"+n.join("|")+"|")}(e.slice(e.l,e.l+a),r),e.l+=a}return r}},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:i},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:m},222:{n:"SHEETNAMELP",f:function(e,t){var n=e[e.l++];n>t-1&&(n=t-1);for(var i="";i.length<n;)i+=String.fromCharCode(e[e.l++]);return i}},65535:{n:""}},v={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:function(e,t){var n=h(e);return n[1].t="s",n[1].v=e.read_shift(t-4,"cstr"),n}},23:{n:"NUMBER17",f:d},24:{n:"NUMBER18",f:function(e,t){var n=h(e);n[1].v=e.read_shift(2);var i=n[1].v>>1;if(1&n[1].v)switch(7&i){case 0:i=5e3*(i>>3);break;case 1:i=500*(i>>3);break;case 2:i=(i>>3)/20;break;case 3:i=(i>>3)/200;break;case 4:i=(i>>3)/2e3;break;case 5:i=(i>>3)/2e4;break;case 6:i=(i>>3)/16;break;case 7:i=(i>>3)/64}return n[1].v=i,n}},25:{n:"FORMULA19",f:function(e,t){var n=d(e);return e.l+=t-14,n}},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:function(e,t){for(var n={},i=e.l+t;e.l<i;){var s=e.read_shift(2);if(14e3==s){for(n[s]=[0,""],n[s][0]=e.read_shift(2);e[e.l];)n[s][1]+=String.fromCharCode(e[e.l]),e.l++;e.l++}}return n}},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:function(e,t){var n=h(e),i=e.read_shift(4);return n[1].v=i>>6,n}},38:{n:"??"},39:{n:"NUMBER27",f:p},40:{n:"FORMULA28",f:function(e,t){var n=p(e);return e.l+=t-10,n}},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:m},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:function(e,t,n){if(n.qpro&&!(t<21)){var i=e.read_shift(1);return e.l+=17,e.l+=1,e.l+=2,[i,e.read_shift(t-21,"cstr")]}}},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:function(e,t){var n=t||{};if(+n.codepage>=0&&zt(+n.codepage),"string"==n.type)throw new Error("Cannot write WK1 to JS string");var i=nr(),o=mr(e["!ref"]),l=Array.isArray(e),c=[];dh(i,0,function(e){var t=er(2);return t.write_shift(2,e),t}(1030)),dh(i,6,function(e){var t=er(8);return t.write_shift(2,e.s.c),t.write_shift(2,e.s.r),t.write_shift(2,e.e.c),t.write_shift(2,e.e.r),t}(o));for(var h=Math.min(o.e.r,8191),u=o.s.r;u<=h;++u)for(var d=lr(u),f=o.s.c;f<=o.e.c;++f){u===o.s.r&&(c[f]=hr(f));var p=c[f]+d,m=l?(e[u]||[])[f]:e[p];if(m&&"z"!=m.t)if("n"==m.t)(0|m.v)==m.v&&m.v>=-32768&&m.v<=32767?dh(i,13,r(u,f,m.v)):dh(i,14,a(u,f,m.v));else dh(i,15,s(u,f,br(m).slice(0,239)))}return dh(i,1),i.end()},book_to_wk3:function(e,t){var n=t||{};if(+n.codepage>=0&&zt(+n.codepage),"string"==n.type)throw new Error("Cannot write WK3 to JS string");var i=nr();dh(i,0,function(e){var t=er(26);t.write_shift(2,4096),t.write_shift(2,4),t.write_shift(4,0);for(var n=0,i=0,s=0,r=0;r<e.SheetNames.length;++r){var a=e.SheetNames[r],o=e.Sheets[a];if(o&&o["!ref"]){++s;var l=fr(o["!ref"]);n<l.e.r&&(n=l.e.r),i<l.e.c&&(i=l.e.c)}}n>8191&&(n=8191);return t.write_shift(2,n),t.write_shift(1,s),t.write_shift(1,i),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,1),t.write_shift(1,2),t.write_shift(4,0),t.write_shift(4,0),t}(e));for(var s=0,r=0;s<e.SheetNames.length;++s)(e.Sheets[e.SheetNames[s]]||{})["!ref"]&&dh(i,27,g(e.SheetNames[s],r++));var a=0;for(s=0;s<e.SheetNames.length;++s){var o=e.Sheets[e.SheetNames[s]];if(o&&o["!ref"]){for(var l=mr(o["!ref"]),c=Array.isArray(o),h=[],d=Math.min(l.e.r,8191),p=l.s.r;p<=d;++p)for(var m=lr(p),b=l.s.c;b<=l.e.c;++b){p===l.s.r&&(h[b]=hr(b));var v=h[b]+m,y=c?(o[p]||[])[b]:o[v];if(y&&"z"!=y.t)if("n"==y.t)dh(i,23,f(p,b,a,y.v));else dh(i,22,u(p,b,a,br(y).slice(0,239)))}++a}}return dh(i,1),i.end()},to_workbook:function(e,n){switch(n.type){case"base64":return t(rn(Jt(e)),n);case"binary":return t(rn(e),n);case"buffer":case"array":return t(e,n)}throw"Unsupported type "+n.type}}}();var oo=function(){var e=rs("t"),t=rs("rPr");function n(n){var i=n.match(e);if(!i)return{t:"s",v:""};var s={t:"s",v:Yi(i[1])},r=n.match(t);return r&&(s.s=function(e){var t={},n=e.match(Vi),i=0,s=!1;if(n)for(;i!=n.length;++i){var r=zi(n[i]);switch(r[0].replace(/\w*:/g,"")){case"<condense":case"<extend":break;case"<shadow":if(!r.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if("1"==r.val)break;t.cp=Gt[parseInt(r.val,10)];break;case"<outline":if(!r.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=r.val;break;case"<sz":t.sz=r.val;break;case"<strike":if(!r.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!r.val)break;switch(r.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting"}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if("0"==r.val)break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if("0"==r.val)break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":r.rgb&&(t.color=r.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=r.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=r.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":case"<scheme":case"<scheme>":case"<scheme/>":case"</scheme>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(47!==r[0].charCodeAt(1)&&!s)throw new Error("Unrecognized rich format "+r[0])}}return t}(r[1])),s}var i=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(e){return e.replace(i,"").split(s).map(n).filter((function(e){return e.v}))}}(),lo=function(){var e=/(\r\n|\n)/g;function t(t){var n=[[],t.v,[]];return t.v?(t.s&&function(e,t,n){var i=[];e.u&&i.push("text-decoration: underline;"),e.uval&&i.push("text-underline-style:"+e.uval+";"),e.sz&&i.push("font-size:"+e.sz+"pt;"),e.outline&&i.push("text-effect: outline;"),e.shadow&&i.push("text-shadow: auto;"),t.push('<span style="'+i.join("")+'">'),e.b&&(t.push("<b>"),n.push("</b>")),e.i&&(t.push("<i>"),n.push("</i>")),e.strike&&(t.push("<s>"),n.push("</s>"));var s=e.valign||"";"superscript"==s||"super"==s?s="sup":"subscript"==s&&(s="sub"),""!=s&&(t.push("<"+s+">"),n.push("</"+s+">")),n.push("</span>")}(t.s,n[0],n[2]),n[0].join("")+n[1].replace(e,"<br/>")+n[2].join("")):""}return function(e){return e.map(t).join("")}}(),co=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,ho=/<(?:\w+:)?r>/,uo=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function fo(e,t){var n=!t||t.cellHTML,i={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(i.t=Yi(is(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),i.r=is(e),n&&(i.h=$i(i.t))):e.match(ho)&&(i.r=is(e),i.t=Yi(is((e.replace(uo,"").match(co)||[]).join("").replace(Vi,""))),n&&(i.h=lo(oo(i.r)))),i):{t:""}}var po=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,mo=/<(?:\w+:)?(?:si|sstItem)>/g,go=/<\/(?:\w+:)?(?:si|sstItem)>/;function bo(e){if("undefined"!==typeof Yt)return Yt.utils.encode(jt,e);for(var t=[],n=e.split(""),i=0;i<n.length;++i)t[i]=n[i].charCodeAt(0);return t}function vo(e,t){var n={};return n.Major=e.read_shift(2),n.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),n}function yo(e){for(var t=e.read_shift(4),n=e.l+t-4,i={},s=e.read_shift(4),r=[];s-- >0;)r.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(i.name=e.read_shift(0,"lpp4"),i.comps=r,e.l!=n)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+n);return i}function xo(e){var t=function(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=vo(e,4),t.U=vo(e,4),t.W=vo(e,4),t}(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),4!=e.read_shift(4))throw new Error("Bad !Primary record");return t}function So(e,t){var n=e.l+t,i={};i.Flags=63&e.read_shift(4),e.l+=4,i.AlgID=e.read_shift(4);var s=!1;switch(i.AlgID){case 26126:case 26127:case 26128:s=36==i.Flags;break;case 26625:s=4==i.Flags;break;case 0:s=16==i.Flags||4==i.Flags||36==i.Flags;break;default:throw"Unrecognized encryption algorithm: "+i.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return i.AlgIDHash=e.read_shift(4),i.KeySize=e.read_shift(4),i.ProviderType=e.read_shift(4),e.l+=8,i.CSPName=e.read_shift(n-e.l>>1,"utf16le"),e.l=n,i}function wo(e,t){var n={},i=e.l+t;return e.l+=4,n.Salt=e.slice(e.l,e.l+16),e.l+=16,n.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),n.VerifierHash=e.slice(e.l,i),e.l=i,n}function Eo(e){if(36!=(63&e.read_shift(4)))throw new Error("EncryptionInfo mismatch");var t=e.read_shift(4);return{t:"Std",h:So(e,t),v:wo(e,e.length-e.l)}}function _o(){throw new Error("File is password-protected: ECMA-376 Extensible")}function To(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var n=e.read_shift(e.length-e.l,"utf8"),i={};return n.replace(Vi,(function(e){var n=zi(e);switch(Ui(n[0])){case"<?xml":case"<encryption":case"</encryption>":case"</keyEncryptors>":case"</keyEncryptor>":break;case"<keyData":t.forEach((function(e){i[e]=n[e]}));break;case"<dataIntegrity":i.encryptedHmacKey=n.encryptedHmacKey,i.encryptedHmacValue=n.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":i.encs=[];break;case"<keyEncryptor":i.uri=n.uri;break;case"<encryptedKey":i.encs.push(n);break;default:throw n[0]}})),i}function Mo(e){var t,n,i=0,s=bo(e),r=s.length+1;for((t=nn(r))[0]=s.length,n=1;n!=r;++n)t[n]=s[n-1];for(n=r-1;n>=0;--n)i=((0===(16384&i)?0:1)|i<<1&32767)^t[n];return 52811^i}var Co=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],i=function(e,t){return 255&((n=e^t)/2|128*n);var n};return function(s){for(var r,a,o,l=bo(s),c=function(e){for(var i=t[e.length-1],s=104,r=e.length-1;r>=0;--r)for(var a=e[r],o=0;7!=o;++o)64&a&&(i^=n[s]),a*=2,--s;return i}(l),h=l.length,u=nn(16),d=0;16!=d;++d)u[d]=0;for(1===(1&h)&&(r=c>>8,u[h]=i(e[0],r),--h,r=255&c,a=l[l.length-1],u[h]=i(a,r));h>0;)r=c>>8,u[--h]=i(l[h],r),r=255&c,u[--h]=i(l[h],r);for(h=15,o=15-l.length;o>0;)r=c>>8,u[h]=i(e[o],r),--o,r=255&c,u[--h]=i(l[h],r),--h,--o;return u}}(),Ao=function(e){var t=0,n=Co(e);return function(e){var i=function(e,t,n,i,s){var r,a;for(s||(s=t),i||(i=Co(e)),r=0;r!=t.length;++r)a=t[r],a=255&((a^=i[n])>>5|a<<3),s[r]=a,++n;return[s,n,i]}("",e,t,n);return t=i[1],i[0]}};function Po(e,t,n){var i=n||{};return i.Info=e.read_shift(2),e.l-=2,1===i.Info?i.Data=function(e){var t={},n=t.EncryptionVersionInfo=vo(e,4);if(1!=n.Major||1!=n.Minor)throw"unrecognized version code "+n.Major+" : "+n.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}(e):i.Data=function(e,t){var n={},i=n.EncryptionVersionInfo=vo(e,4);if(t-=4,2!=i.Minor)throw new Error("unrecognized minor version code: "+i.Minor);if(i.Major>4||i.Major<2)throw new Error("unrecognized major version code: "+i.Major);n.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,n.EncryptionHeader=So(e,s),t-=s,n.EncryptionVerifier=wo(e,t),n}(e,t),i}var No=function(){function e(e,n){switch(n.type){case"base64":return t(Jt(e),n);case"binary":return t(e,n);case"buffer":return t(en&&Buffer.isBuffer(e)?e.toString("binary"):an(e),n);case"array":return t(yi(e),n)}throw new Error("Unrecognized type "+n.type)}function t(e,t){var n=(t||{}).dense?[]:{},i=e.match(/\\trowd.*?\\row\b/g);if(!i.length)throw new Error("RTF missing table");var s={s:{c:0,r:0},e:{c:0,r:i.length-1}};return i.forEach((function(e,t){Array.isArray(n)&&(n[t]=[]);for(var i,r=/\\\w+\b/g,a=0,o=-1;i=r.exec(e);){if("\\cell"===i[0]){var l=e.slice(a,r.lastIndex-i[0].length);if(" "==l[0]&&(l=l.slice(1)),++o,l.length){var c={v:l,t:"s"};Array.isArray(n)?n[t][o]=c:n[dr({r:t,c:o})]=c}}a=r.lastIndex}o>s.e.c&&(s.e.c=o)})),n["!ref"]=pr(s),n}return{to_workbook:function(t,n){return vr(e(t,n),n)},to_sheet:e,from_sheet:function(e){for(var t,n=["{\\rtf1\\ansi"],i=mr(e["!ref"]),s=Array.isArray(e),r=i.s.r;r<=i.e.r;++r){n.push("\\trowd\\trautofit1");for(var a=i.s.c;a<=i.e.c;++a)n.push("\\cellx"+(a+1));for(n.push("\\pard\\intbl"),a=i.s.c;a<=i.e.c;++a){var o=dr({r:r,c:a});(t=s?(e[r]||[])[a]:e[o])&&(null!=t.v||t.f&&!t.F)&&(n.push(" "+(t.w||(br(t),t.w))),n.push("\\cell"))}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}}}();function ko(e){for(var t=0,n=1;3!=t;++t)n=256*n+(e[t]>255?255:e[t]<0?0:e[t]);return n.toString(16).toUpperCase().slice(1)}function Lo(e,t){if(0===t)return e;var n=function(e){var t=e[0]/255,n=e[1]/255,i=e[2]/255,s=Math.max(t,n,i),r=Math.min(t,n,i),a=s-r;if(0===a)return[0,0,t];var o,l=0,c=s+r;switch(o=a/(c>1?2-c:c),s){case t:l=((n-i)/a+6)%6;break;case n:l=(i-t)/a+2;break;case i:l=(t-n)/a+4}return[l/6,o,c/2]}(function(e){var t=e.slice("#"===e[0]?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}(e));return n[2]=t<0?n[2]*(1+t):1-(1-n[2])*(1-t),ko(function(e){var t,n=e[0],i=e[1],s=e[2],r=2*i*(s<.5?s:1-s),a=s-r/2,o=[a,a,a],l=6*n;if(0!==i)switch(0|l){case 0:case 6:t=r*l,o[0]+=r,o[1]+=t;break;case 1:t=r*(2-l),o[0]+=t,o[1]+=r;break;case 2:t=r*(l-2),o[1]+=r,o[2]+=t;break;case 3:t=r*(4-l),o[1]+=t,o[2]+=r;break;case 4:t=r*(l-4),o[2]+=r,o[0]+=t;break;case 5:t=r*(6-l),o[2]+=t,o[0]+=r}for(var c=0;3!=c;++c)o[c]=Math.round(255*o[c]);return o}(n))}var Io=6;function Ro(e){return Math.floor((e+Math.round(128/Io)/256)*Io)}function Oo(e){return Math.floor((e-5)/Io*100+.5)/100}function Do(e){return Math.round((e*Io+5)/Io*256)/256}function Fo(e){return Do(Oo(Ro(e)))}function Bo(e){var t=Math.abs(e-Fo(e)),n=Io;if(t>.005)for(Io=1;Io<15;++Io)Math.abs(e-Fo(e))<=t&&(t=Math.abs(e-Fo(e)),n=Io);Io=n}function jo(e){e.width?(e.wpx=Ro(e.width),e.wch=Oo(e.wpx),e.MDW=Io):e.wpx?(e.wch=Oo(e.wpx),e.width=Do(e.wch),e.MDW=Io):"number"==typeof e.wch&&(e.width=Do(e.wch),e.wpx=Ro(e.width),e.MDW=Io),e.customWidth&&delete e.customWidth}var Vo=96;function Go(e){return 96*e/Vo}function Wo(e){return e*Vo/96}var zo={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};var Uo=["numFmtId","fillId","fontId","borderId","xfId"],Ho=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];var Xo=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(r,a,o){var l,c={};return r?((l=(r=r.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"")).match(e))&&function(e,t,n){t.NumberFmt=[];for(var i=ai(xn),s=0;s<i.length;++s)t.NumberFmt[i[s]]=xn[i[s]];var r=e[0].match(Vi);if(r)for(s=0;s<r.length;++s){var a=zi(r[s]);switch(Ui(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":case"</numFmt>":break;case"<numFmt":var o=Yi(is(a.formatCode)),l=parseInt(a.numFmtId,10);if(t.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&null!=t.NumberFmt[l];--l);t.NumberFmt[l]=o}Jn(o,l)}break;default:if(n.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}(l,c,o),(l=r.match(i))&&function(e,t,n,i){t.Fonts=[];var s={},r=!1;(e[0].match(Vi)||[]).forEach((function(e){var a=zi(e);switch(Ui(a[0])){case"<fonts":case"<fonts>":case"</fonts>":case"<font":case"<font>":case"<name/>":case"</name>":case"<sz/>":case"</sz>":case"<vertAlign/>":case"</vertAlign>":case"<family/>":case"</family>":case"<scheme/>":case"</scheme>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":a.val&&(s.name=is(a.val));break;case"<b":s.bold=a.val?Qi(a.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=a.val?Qi(a.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(a.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=a.val?Qi(a.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=a.val?Qi(a.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=a.val?Qi(a.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=a.val?Qi(a.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=a.val?Qi(a.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":a.val&&(s.sz=+a.val);break;case"<vertAlign":a.val&&(s.vertAlign=a.val);break;case"<family":a.val&&(s.family=parseInt(a.val,10));break;case"<scheme":a.val&&(s.scheme=a.val);break;case"<charset":if("1"==a.val)break;a.codepage=Gt[parseInt(a.val,10)];break;case"<color":if(s.color||(s.color={}),a.auto&&(s.color.auto=Qi(a.auto)),a.rgb)s.color.rgb=a.rgb.slice(-6);else if(a.indexed){s.color.index=parseInt(a.indexed,10);var o=zr[s.color.index];81==s.color.index&&(o=zr[1]),o||(o=zr[1]),s.color.rgb=o[0].toString(16)+o[1].toString(16)+o[2].toString(16)}else a.theme&&(s.color.theme=parseInt(a.theme,10),a.tint&&(s.color.tint=parseFloat(a.tint)),a.theme&&n.themeElements&&n.themeElements.clrScheme&&(s.color.rgb=Lo(n.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<AlternateContent":case"<ext":r=!0;break;case"</AlternateContent>":case"</ext>":r=!1;break;default:if(i&&i.WTF&&!r)throw new Error("unrecognized "+a[0]+" in fonts")}}))}(l,c,a,o),(l=r.match(n))&&function(e,t,n,i){t.Fills=[];var s={},r=!1;(e[0].match(Vi)||[]).forEach((function(e){var n=zi(e);switch(Ui(n[0])){case"<fills":case"<fills>":case"</fills>":case"</fill>":case"<gradientFill>":case"<patternFill/>":case"</patternFill>":case"<bgColor/>":case"</bgColor>":case"<fgColor/>":case"</fgColor>":case"<stop":case"<stop/>":case"</stop>":case"<color":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":n.patternType&&(s.patternType=n.patternType);break;case"<bgColor":s.bgColor||(s.bgColor={}),n.indexed&&(s.bgColor.indexed=parseInt(n.indexed,10)),n.theme&&(s.bgColor.theme=parseInt(n.theme,10)),n.tint&&(s.bgColor.tint=parseFloat(n.tint)),n.rgb&&(s.bgColor.rgb=n.rgb.slice(-6));break;case"<fgColor":s.fgColor||(s.fgColor={}),n.theme&&(s.fgColor.theme=parseInt(n.theme,10)),n.tint&&(s.fgColor.tint=parseFloat(n.tint)),null!=n.rgb&&(s.fgColor.rgb=n.rgb.slice(-6));break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(i&&i.WTF&&!r)throw new Error("unrecognized "+n[0]+" in fills")}}))}(l,c,0,o),(l=r.match(s))&&function(e,t,n,i){t.Borders=[];var s={},r=!1;(e[0].match(Vi)||[]).forEach((function(e){var n=zi(e);switch(Ui(n[0])){case"<borders":case"<borders>":case"</borders>":case"</border>":case"<left/>":case"<left":case"<left>":case"</left>":case"<right/>":case"<right":case"<right>":case"</right>":case"<top/>":case"<top":case"<top>":case"</top>":case"<bottom/>":case"<bottom":case"<bottom>":case"</bottom>":case"<diagonal":case"<diagonal>":case"<diagonal/>":case"</diagonal>":case"<horizontal":case"<horizontal>":case"<horizontal/>":case"</horizontal>":case"<vertical":case"<vertical>":case"<vertical/>":case"</vertical>":case"<start":case"<start>":case"<start/>":case"</start>":case"<end":case"<end>":case"<end/>":case"</end>":case"<color":case"<color>":case"<color/>":case"</color>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<border":case"<border>":case"<border/>":s={},n.diagonalUp&&(s.diagonalUp=Qi(n.diagonalUp)),n.diagonalDown&&(s.diagonalDown=Qi(n.diagonalDown)),t.Borders.push(s);break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(i&&i.WTF&&!r)throw new Error("unrecognized "+n[0]+" in borders")}}))}(l,c,0,o),(l=r.match(t))&&function(e,t,n){var i;t.CellXf=[];var s=!1;(e[0].match(Vi)||[]).forEach((function(e){var r=zi(e),a=0;switch(Ui(r[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":case"</xf>":case"</alignment>":case"<protection":case"</protection>":case"<protection/>":case"<extLst":case"<extLst>":case"</extLst>":break;case"<xf":case"<xf/>":for(delete(i=r)[0],a=0;a<Uo.length;++a)i[Uo[a]]&&(i[Uo[a]]=parseInt(i[Uo[a]],10));for(a=0;a<Ho.length;++a)i[Ho[a]]&&(i[Ho[a]]=Qi(i[Ho[a]]));if(t.NumberFmt&&i.numFmtId>392)for(a=392;a>60;--a)if(t.NumberFmt[i.numFmtId]==t.NumberFmt[a]){i.numFmtId=a;break}t.CellXf.push(i);break;case"<alignment":case"<alignment/>":var o={};r.vertical&&(o.vertical=r.vertical),r.horizontal&&(o.horizontal=r.horizontal),null!=r.textRotation&&(o.textRotation=r.textRotation),r.indent&&(o.indent=r.indent),r.wrapText&&(o.wrapText=Qi(r.wrapText)),i.alignment=o;break;case"<AlternateContent":case"<ext":s=!0;break;case"</AlternateContent>":case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+r[0]+" in cellXfs")}}))}(l,c,o),c):c}}();var Yo=Js;var qo=Js;var Ko=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function $o(e,t,n){t.themeElements.clrScheme=[];var i={};(e[0].match(Vi)||[]).forEach((function(e){var s=zi(e);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":i.rgb=s.val;break;case"<a:sysClr":i.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":"/"===s[0].charAt(1)?(t.themeElements.clrScheme[Ko.indexOf(s[0])]=i,i={}):i.name=s[0].slice(3,s[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}}))}function Zo(){}function Qo(){}var Jo=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,el=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,tl=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;var nl=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function il(e,t){var n;e&&0!==e.length||(e=sl());var i={};if(!(n=e.match(nl)))throw new Error("themeElements not found in theme");return function(e,t,n){var i;t.themeElements={},[["clrScheme",Jo,$o],["fontScheme",el,Zo],["fmtScheme",tl,Qo]].forEach((function(s){if(!(i=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](i,t,n)}))}(n[0],i,t),i.raw=e,i}function sl(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&"string"==typeof e.raw)return e.raw;var n=[Fi];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="\uff2d\uff33 \uff30\u30b4\u30b7\u30c3\u30af"/>',n[n.length]='<a:font script="Hang" typeface="\ub9d1\uc740 \uace0\ub515"/>',n[n.length]='<a:font script="Hans" typeface="\u5b8b\u4f53"/>',n[n.length]='<a:font script="Hant" typeface="\u65b0\u7d30\u660e\u9ad4"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function rl(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:case 4:e.l+=4;break;case 1:t.xclrValue=function(e,t){return Js(e,t)}(e,4);break;case 2:t.xclrValue=Ca(e);break;case 3:t.xclrValue=function(e){return e.read_shift(4)}(e)}return e.l+=8,t}function al(e){var t=e.read_shift(2),n=e.read_shift(2)-4,i=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:i[1]=rl(e);break;case 6:i[1]=function(e,t){return Js(e,t)}(e,n);break;case 14:case 15:i[1]=e.read_shift(1===n?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+n)}return i}function ol(e,t,n,i){var s,r=Array.isArray(e);t.forEach((function(t){var a=ur(t.ref);if(r?(e[a.r]||(e[a.r]=[]),s=e[a.r][a.c]):s=e[t.ref],!s){s={t:"z"},r?e[a.r][a.c]=s:e[t.ref]=s;var o=mr(e["!ref"]||"BDWGO1000001:A1");o.s.r>a.r&&(o.s.r=a.r),o.e.r<a.r&&(o.e.r=a.r),o.s.c>a.c&&(o.s.c=a.c),o.e.c<a.c&&(o.e.c=a.c);var l=pr(o);l!==e["!ref"]&&(e["!ref"]=l)}s.c||(s.c=[]);var c={a:t.author,t:t.t,r:t.r,T:n};t.h&&(c.h=t.h);for(var h=s.c.length-1;h>=0;--h){if(!n&&s.c[h].T)return;n&&!s.c[h].T&&s.c.splice(h,1)}if(n&&i)for(h=0;h<i.length;++h)if(c.a==i[h].id){c.a=i[h].name||c.a;break}s.c.push(c)}))}var ll=Sr;var cl=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function n(e,n,i,s){var r=!1,a=!1;0==i.length?a=!0:"["==i.charAt(0)&&(a=!0,i=i.slice(1,-1)),0==s.length?r=!0:"["==s.charAt(0)&&(r=!0,s=s.slice(1,-1));var o=i.length>0?0|parseInt(i,10):0,l=s.length>0?0|parseInt(s,10):0;return r?l+=t.c:--l,a?o+=t.r:--o,n+(r?"":"$")+hr(l)+(a?"":"$")+lr(o)}return function(i,s){return t=s,i.replace(e,n)}}(),hl=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,ul=function(){return function(e,t){return e.replace(hl,(function(e,n,i,s,r,a){var o=cr(s)-(i?0:t.c),l=or(a)-(r?0:t.r);return n+"R"+(0==l?"":r?l+1:"["+l+"]")+"C"+(0==o?"":i?o+1:"["+o+"]")}))}}();function dl(e,t){return e.replace(hl,(function(e,n,i,s,r,a){return n+("$"==i?i+s:hr(cr(s)+t.c))+("$"==r?r+a:lr(or(a)+t.r))}))}function fl(e,t,n){var i=fr(t).s,s=ur(n);return dl(e,{r:s.r-i.r,c:s.c-i.c})}function pl(e){return e.replace(/_xlfn\./g,"")}function ml(e){e.l+=1}function gl(e,t){var n=e.read_shift(1==t?1:2);return[16383&n,n>>14&1,n>>15&1]}function bl(e,t,n){var i=2;if(n){if(n.biff>=2&&n.biff<=5)return vl(e);12==n.biff&&(i=4)}var s=e.read_shift(i),r=e.read_shift(i),a=gl(e,2),o=gl(e,2);return{s:{r:s,c:a[0],cRel:a[1],rRel:a[2]},e:{r:r,c:o[0],cRel:o[1],rRel:o[2]}}}function vl(e){var t=gl(e,2),n=gl(e,2),i=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:i,cRel:t[1],rRel:t[2]},e:{r:n[0],c:s,cRel:n[1],rRel:n[2]}}}function yl(e,t,n){if(n&&n.biff>=2&&n.biff<=5)return function(e){var t=gl(e,2),n=e.read_shift(1);return{r:t[0],c:n,cRel:t[1],rRel:t[2]}}(e);var i=e.read_shift(n&&12==n.biff?4:2),s=gl(e,2);return{r:i,c:s[0],cRel:s[1],rRel:s[2]}}function xl(e){var t=e.read_shift(2),n=e.read_shift(2);return{r:t,c:255&n,fQuoted:!!(16384&n),cRel:n>>15,rRel:n>>15}}function Sl(e){var t=1&e[e.l+1];return e.l+=4,[t,1]}function wl(e){return[e.read_shift(1),e.read_shift(1)]}function El(e,t){var n=[e.read_shift(1)];if(12==t)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2}switch(n[0]){case 4:n[1]=ba(e,1)?"TRUE":"FALSE",12!=t&&(e.l+=7);break;case 37:case 16:n[1]=Ur[e[e.l]],e.l+=12==t?4:8;break;case 0:e.l+=8;break;case 1:n[1]=Rr(e);break;case 2:n[1]=_a(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function _l(e,t,n){for(var i=e.read_shift(12==n.biff?4:2),s=[],r=0;r!=i;++r)s.push((12==n.biff?Ir:La)(e,8));return s}function Tl(e,t,n){var i=0,s=0;12==n.biff?(i=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),i=1+e.read_shift(2)),n.biff>=2&&n.biff<8&&(--i,0==--s&&(s=256));for(var r=0,a=[];r!=i&&(a[r]=[]);++r)for(var o=0;o!=s;++o)a[r][o]=El(e,n.biff);return a}function Ml(e,t,n){return e.l+=2,[xl(e)]}function Cl(e){return e.l+=6,[]}function Al(e){return e.l+=2,[va(e),1&e.read_shift(2)]}var Pl=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];var Nl={1:{n:"PtgExp",f:function(e,t,n){return e.l++,n&&12==n.biff?[e.read_shift(4,"i"),0]:[e.read_shift(2),e.read_shift(n&&2==n.biff?1:2)]}},2:{n:"PtgTbl",f:Js},3:{n:"PtgAdd",f:ml},4:{n:"PtgSub",f:ml},5:{n:"PtgMul",f:ml},6:{n:"PtgDiv",f:ml},7:{n:"PtgPower",f:ml},8:{n:"PtgConcat",f:ml},9:{n:"PtgLt",f:ml},10:{n:"PtgLe",f:ml},11:{n:"PtgEq",f:ml},12:{n:"PtgGe",f:ml},13:{n:"PtgGt",f:ml},14:{n:"PtgNe",f:ml},15:{n:"PtgIsect",f:ml},16:{n:"PtgUnion",f:ml},17:{n:"PtgRange",f:ml},18:{n:"PtgUplus",f:ml},19:{n:"PtgUminus",f:ml},20:{n:"PtgPercent",f:ml},21:{n:"PtgParen",f:ml},22:{n:"PtgMissArg",f:ml},23:{n:"PtgStr",f:function(e,t,n){return e.l++,xa(e,0,n)}},26:{n:"PtgSheet",f:function(e,t,n){return e.l+=5,e.l+=2,e.l+=2==n.biff?1:4,["PTGSHEET"]}},27:{n:"PtgEndSheet",f:function(e,t,n){return e.l+=2==n.biff?4:5,["PTGENDSHEET"]}},28:{n:"PtgErr",f:function(e){return e.l++,Ur[e.read_shift(1)]}},29:{n:"PtgBool",f:function(e){return e.l++,0!==e.read_shift(1)}},30:{n:"PtgInt",f:function(e){return e.l++,e.read_shift(2)}},31:{n:"PtgNum",f:function(e){return e.l++,Rr(e)}},32:{n:"PtgArray",f:function(e,t,n){var i=(96&e[e.l++])>>5;return e.l+=2==n.biff?6:12==n.biff?14:7,[i]}},33:{n:"PtgFunc",f:function(e,t,n){var i=(96&e[e.l])>>5;e.l+=1;var s=e.read_shift(n&&n.biff<=3?1:2);return[Zl[s],$l[s],i]}},34:{n:"PtgFuncVar",f:function(e,t,n){var i=e[e.l++],s=e.read_shift(1),r=n&&n.biff<=3?[88==i?-1:0,e.read_shift(1)]:function(e){return[e[e.l+1]>>7,32767&e.read_shift(2)]}(e);return[s,(0===r[0]?$l:Kl)[r[1]]]}},35:{n:"PtgName",f:function(e,t,n){var i=e.read_shift(1)>>>5&3,s=!n||n.biff>=8?4:2,r=e.read_shift(s);switch(n.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12}return[i,0,r]}},36:{n:"PtgRef",f:function(e,t,n){var i=(96&e[e.l])>>5;return e.l+=1,[i,yl(e,0,n)]}},37:{n:"PtgArea",f:function(e,t,n){return[(96&e[e.l++])>>5,bl(e,n.biff>=2&&n.biff,n)]}},38:{n:"PtgMemArea",f:function(e,t,n){var i=e.read_shift(1)>>>5&3;return e.l+=n&&2==n.biff?3:4,[i,e.read_shift(n&&2==n.biff?1:2)]}},39:{n:"PtgMemErr",f:Js},40:{n:"PtgMemNoMem",f:Js},41:{n:"PtgMemFunc",f:function(e,t,n){return[e.read_shift(1)>>>5&3,e.read_shift(n&&2==n.biff?1:2)]}},42:{n:"PtgRefErr",f:function(e,t,n){var i=e.read_shift(1)>>>5&3;return e.l+=4,n.biff<8&&e.l--,12==n.biff&&(e.l+=2),[i]}},43:{n:"PtgAreaErr",f:function(e,t,n){var i=(96&e[e.l++])>>5;return e.l+=n&&n.biff>8?12:n.biff<8?6:8,[i]}},44:{n:"PtgRefN",f:function(e,t,n){var i=(96&e[e.l])>>5;e.l+=1;var s=function(e,t,n){var i=n&&n.biff?n.biff:8;if(i>=2&&i<=5)return function(e){var t=e.read_shift(2),n=e.read_shift(1),i=(32768&t)>>15,s=(16384&t)>>14;return t&=16383,1==i&&t>=8192&&(t-=16384),1==s&&n>=128&&(n-=256),{r:t,c:n,cRel:s,rRel:i}}(e);var s=e.read_shift(i>=12?4:2),r=e.read_shift(2),a=(16384&r)>>14,o=(32768&r)>>15;if(r&=16383,1==o)for(;s>524287;)s-=1048576;if(1==a)for(;r>8191;)r-=16384;return{r:s,c:r,cRel:a,rRel:o}}(e,0,n);return[i,s]}},45:{n:"PtgAreaN",f:function(e,t,n){var i=(96&e[e.l++])>>5,s=function(e,t,n){if(n.biff<8)return vl(e);var i=e.read_shift(12==n.biff?4:2),s=e.read_shift(12==n.biff?4:2),r=gl(e,2),a=gl(e,2);return{s:{r:i,c:r[0],cRel:r[1],rRel:r[2]},e:{r:s,c:a[0],cRel:a[1],rRel:a[2]}}}(e,0,n);return[i,s]}},46:{n:"PtgMemAreaN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},47:{n:"PtgMemNoMemN",f:function(e){return[e.read_shift(1)>>>5&3,e.read_shift(2)]}},57:{n:"PtgNameX",f:function(e,t,n){return 5==n.biff?function(e){var t=e.read_shift(1)>>>5&3,n=e.read_shift(2,"i");e.l+=8;var i=e.read_shift(2);return e.l+=12,[t,n,i]}(e):[e.read_shift(1)>>>5&3,e.read_shift(2),e.read_shift(4)]}},58:{n:"PtgRef3d",f:function(e,t,n){var i=(96&e[e.l])>>5;e.l+=1;var s=e.read_shift(2);return n&&5==n.biff&&(e.l+=12),[i,s,yl(e,0,n)]}},59:{n:"PtgArea3d",f:function(e,t,n){var i=(96&e[e.l++])>>5,s=e.read_shift(2,"i");if(n)switch(n.biff){case 5:e.l+=12;break;case 12:0}return[i,s,bl(e,0,n)]}},60:{n:"PtgRefErr3d",f:function(e,t,n){var i=(96&e[e.l++])>>5,s=e.read_shift(2),r=4;if(n)switch(n.biff){case 5:r=15;break;case 12:r=6}return e.l+=r,[i,s]}},61:{n:"PtgAreaErr3d",f:function(e,t,n){var i=(96&e[e.l++])>>5,s=e.read_shift(2),r=8;if(n)switch(n.biff){case 5:e.l+=12,r=6;break;case 12:r=12}return e.l+=r,[i,s]}},255:{}},kl={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ll={1:{n:"PtgElfLel",f:Al},2:{n:"PtgElfRw",f:Ml},3:{n:"PtgElfCol",f:Ml},6:{n:"PtgElfRwV",f:Ml},7:{n:"PtgElfColV",f:Ml},10:{n:"PtgElfRadical",f:Ml},11:{n:"PtgElfRadicalS",f:Cl},13:{n:"PtgElfColS",f:Cl},15:{n:"PtgElfColSV",f:Cl},16:{n:"PtgElfRadicalLel",f:Al},25:{n:"PtgList",f:function(e){e.l+=2;var t=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(4),s=e.read_shift(2),r=e.read_shift(2);return{ixti:t,coltype:3&n,rt:Pl[n>>2&31],idx:i,c:s,C:r}}},29:{n:"PtgSxName",f:function(e){return e.l+=2,[e.read_shift(4)]}},255:{}},Il={0:{n:"PtgAttrNoop",f:function(e){return e.l+=4,[0,0]}},1:{n:"PtgAttrSemi",f:function(e,t,n){var i=255&e[e.l+1]?1:0;return e.l+=n&&2==n.biff?3:4,[i]}},2:{n:"PtgAttrIf",f:function(e,t,n){var i=255&e[e.l+1]?1:0;return e.l+=2,[i,e.read_shift(n&&2==n.biff?1:2)]}},4:{n:"PtgAttrChoose",f:function(e,t,n){e.l+=2;for(var i=e.read_shift(n&&2==n.biff?1:2),s=[],r=0;r<=i;++r)s.push(e.read_shift(n&&2==n.biff?1:2));return s}},8:{n:"PtgAttrGoto",f:function(e,t,n){var i=255&e[e.l+1]?1:0;return e.l+=2,[i,e.read_shift(n&&2==n.biff?1:2)]}},16:{n:"PtgAttrSum",f:function(e,t,n){e.l+=n&&2==n.biff?3:4}},32:{n:"PtgAttrBaxcel",f:Sl},33:{n:"PtgAttrBaxcel",f:Sl},64:{n:"PtgAttrSpace",f:function(e){return e.read_shift(2),wl(e)}},65:{n:"PtgAttrSpaceSemi",f:function(e){return e.read_shift(2),wl(e)}},128:{n:"PtgAttrIfError",f:function(e){var t=255&e[e.l+1]?1:0;return e.l+=2,[t,e.read_shift(2)]}},255:{}};function Rl(e,t,n,i){if(i.biff<8)return Js(e,t);for(var s=e.l+t,r=[],a=0;a!==n.length;++a)switch(n[a][0]){case"PtgArray":n[a][1]=Tl(e,0,i),r.push(n[a][1]);break;case"PtgMemArea":n[a][2]=_l(e,n[a][1],i),r.push(n[a][2]);break;case"PtgExp":i&&12==i.biff&&(n[a][1][1]=e.read_shift(4),r.push(n[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[a][0]}return 0!==(t=s-e.l)&&r.push(Js(e,t)),r}function Ol(e,t,n){for(var i,s,r=e.l+t,a=[];r!=e.l;)t=r-e.l,s=e[e.l],i=Nl[s]||Nl[kl[s]],24!==s&&25!==s||(i=(24===s?Ll:Il)[e[e.l+1]]),i&&i.f?a.push([i.n,i.f(e,t,n)]):Js(e,t);return a}function Dl(e){for(var t=[],n=0;n<e.length;++n){for(var i=e[n],s=[],r=0;r<i.length;++r){var a=i[r];if(a)if(2===a[0])s.push('"'+a[1].replace(/"/g,'""')+'"');else s.push(a[1]);else s.push("")}t.push(s.join(","))}return t.join(";")}var Fl={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Bl(e,t,n){if(!e)return"SH33TJSERR0";if(n.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var i=e.XTI[t];if(n.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),0==t?"":e.XTI[t-1];if(!i)return"SH33TJSERR1";var s="";if(n.biff>8)switch(e[i[0]][0]){case 357:return s=-1==i[1]?"#REF":e.SheetNames[i[1]],i[1]==i[2]?s:s+":"+e.SheetNames[i[2]];case 358:return null!=n.SID?e.SheetNames[n.SID]:"SH33TJSSAME"+e[i[0]][0];default:return"SH33TJSSRC"+e[i[0]][0]}switch(e[i[0]][0][0]){case 1025:return s=-1==i[1]?"#REF":e.SheetNames[i[1]]||"SH33TJSERR3",i[1]==i[2]?s:s+":"+e.SheetNames[i[2]];case 14849:return e[i[0]].slice(1).map((function(e){return e.Name})).join(";;");default:return e[i[0]][0][3]?(s=-1==i[1]?"#REF":e[i[0]][0][3][i[1]]||"SH33TJSERR4",i[1]==i[2]?s:s+":"+e[i[0]][0][3][i[2]]):"SH33TJSERR2"}}function jl(e,t,n){var i=Bl(e,t,n);return"#REF"==i?i:function(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}(i,n)}function Vl(e,t,n,i,s){var r,a,o,l,c=s&&s.biff||8,h={s:{c:0,r:0},e:{c:0,r:0}},u=[],d=0,f=0,p="";if(!e[0]||!e[0][0])return"";for(var m=-1,g="",b=0,v=e[0].length;b<v;++b){var y=e[0][b];switch(y[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(r=u.pop(),a=u.pop(),m>=0){switch(e[0][m][1][0]){case 0:g=Si(" ",e[0][m][1][1]);break;case 1:g=Si("\r",e[0][m][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}a+=g,m=-1}u.push(a+Fl[y[0]]+r);break;case"PtgIsect":r=u.pop(),a=u.pop(),u.push(a+" "+r);break;case"PtgUnion":r=u.pop(),a=u.pop(),u.push(a+","+r);break;case"PtgRange":r=u.pop(),a=u.pop(),u.push(a+":"+r);break;case"PtgAttrChoose":case"PtgAttrGoto":case"PtgAttrIf":case"PtgAttrIfError":case"PtgAttrBaxcel":case"PtgAttrSemi":case"PtgMemArea":case"PtgTbl":case"PtgMemErr":case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":case"PtgMemFunc":case"PtgMemNoMem":break;case"PtgRef":o=ir(y[1][1],h,s),u.push(rr(o,c));break;case"PtgRefN":o=n?ir(y[1][1],n,s):y[1][1],u.push(rr(o,c));break;case"PtgRef3d":d=y[1][1],o=ir(y[1][2],h,s);p=jl(i,d,s);u.push(p+"!"+rr(o,c));break;case"PtgFunc":case"PtgFuncVar":var x=y[1][0],S=y[1][1];x||(x=0);var w=0==(x&=127)?[]:u.slice(-x);u.length-=x,"User"===S&&(S=w.shift()),u.push(S+"("+w.join(",")+")");break;case"PtgBool":u.push(y[1]?"TRUE":"FALSE");break;case"PtgInt":case"PtgErr":u.push(y[1]);break;case"PtgNum":u.push(String(y[1]));break;case"PtgStr":u.push('"'+y[1].replace(/"/g,'""')+'"');break;case"PtgAreaN":l=sr(y[1][1],n?{s:n}:h,s),u.push(ar(l,s));break;case"PtgArea":l=sr(y[1][1],h,s),u.push(ar(l,s));break;case"PtgArea3d":d=y[1][1],l=y[1][2],p=jl(i,d,s),u.push(p+"!"+ar(l,s));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgName":f=y[1][2];var E=(i.names||[])[f-1]||(i[0]||[])[f],_=E?E.Name:"SH33TJSNAME"+String(f);_&&"_xlfn."==_.slice(0,6)&&!s.xlfn&&(_=_.slice(6)),u.push(_);break;case"PtgNameX":var T,M=y[1][1];if(f=y[1][2],!(s.biff<=5)){var C="";if(14849==((i[M]||[])[0]||[])[0]||(1025==((i[M]||[])[0]||[])[0]?i[M][f]&&i[M][f].itab>0&&(C=i.SheetNames[i[M][f].itab-1]+"!"):C=i.SheetNames[f-1]+"!"),i[M]&&i[M][f])C+=i[M][f].Name;else if(i[0]&&i[0][f])C+=i[0][f].Name;else{var A=(Bl(i,M,s)||"").split(";;");A[f-1]?C=A[f-1]:C+="SH33TJSERRX"}u.push(C);break}M<0&&(M=-M),i[M]&&(T=i[M][f]),T||(T={Name:"SH33TJSERRY"}),u.push(T.Name);break;case"PtgParen":var P="(",N=")";if(m>=0){switch(g="",e[0][m][1][0]){case 2:P=Si(" ",e[0][m][1][1])+P;break;case 3:P=Si("\r",e[0][m][1][1])+P;break;case 4:N=Si(" ",e[0][m][1][1])+N;break;case 5:N=Si("\r",e[0][m][1][1])+N;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][m][1][0])}m=-1}u.push(P+u.pop()+N);break;case"PtgRefErr":case"PtgRefErr3d":case"PtgAreaErr":case"PtgAreaErr3d":u.push("#REF!");break;case"PtgExp":o={c:y[1][1],r:y[1][0]};var k={c:n.c,r:n.r};if(i.sharedf[dr(o)]){var L=i.sharedf[dr(o)];u.push(Vl(L,h,k,i,s))}else{var I=!1;for(r=0;r!=i.arrayf.length;++r)if(a=i.arrayf[r],!(o.c<a[0].s.c||o.c>a[0].e.c)&&!(o.r<a[0].s.r||o.r>a[0].e.r)){u.push(Vl(a[1],h,k,i,s)),I=!0;break}I||u.push(y[1])}break;case"PtgArray":u.push("{"+Dl(y[1])+"}");break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":m=b;break;case"PtgMissArg":u.push("");break;case"PtgList":u.push("Table"+y[1].idx+"[#"+y[1].rt+"]");break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");default:throw new Error("Unrecognized Formula Token: "+String(y))}if(3!=s.biff&&m>=0&&-1==["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"].indexOf(e[0][b][0])){var R=!0;switch((y=e[0][m])[1][0]){case 4:R=!1;case 0:g=Si(" ",y[1][1]);break;case 5:R=!1;case 1:g=Si("\r",y[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+y[1][0])}u.push((R?g:"")+u.pop()+(R?"":g)),m=-1}}if(u.length>1&&s.WTF)throw new Error("bad formula stack");return u[0]}function Gl(e,t,n){var i,s=e.l+t,r=2==n.biff?1:2,a=e.read_shift(r);if(65535==a)return[[],Js(e,t-2)];var o=Ol(e,a,n);return t!==a+r&&(i=Rl(e,t-a-r,o,n)),e.l=s,[o,i]}function Wl(e,t,n){var i,s=e.l+t,r=e.read_shift(2),a=Ol(e,r,n);return 65535==r?[[],Js(e,t-2)]:(t!==r+2&&(i=Rl(e,s-r-2,a,n)),[a,i])}function zl(e,t,n){var i=e.l+t,s=Pa(e);2==n.biff&&++e.l;var r=function(e){var t;if(65535!==Gs(e,e.l+6))return[Rr(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=1===e[e.l+2],e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}(e),a=e.read_shift(1);2!=n.biff&&(e.read_shift(1),n.biff>=5&&e.read_shift(4));var o=function(e,t,n){var i,s=e.l+t,r=2==n.biff?1:2,a=e.read_shift(r);if(65535==a)return[[],Js(e,t-2)];var o=Ol(e,a,n);return t!==a+r&&(i=Rl(e,t-a-r,o,n)),e.l=s,[o,i]}(e,i-e.l,n);return{cell:s,val:r[0],formula:o,shared:a>>3&1,tt:r[1]}}function Ul(e,t,n){var i=e.read_shift(4),s=Ol(e,i,n),r=e.read_shift(4);return[s,r>0?Rl(e,r,s,n):null]}var Hl=Ul,Xl=Ul,Yl=Ul,ql=Ul,Kl={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},$l={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Zl={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Ql(e){return"of:"==e.slice(0,3)&&(e=e.slice(3)),61==e.charCodeAt(0)&&61==(e=e.slice(1)).charCodeAt(0)&&(e=e.slice(1)),(e=(e=(e=e.replace(/COM\.MICROSOFT\./g,"")).replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,(function(e,t){return t.replace(/\./g,"")}))).replace(/\[.(#[A-Z]*[?!])\]/g,"$1")).replace(/[;~]/g,",").replace(/\|/g,";")}function Jl(e){var t=e.split(":");return[t[0].split(".")[0],t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}var ec={},tc={};function nc(e,t){if(e){var n=[.7,.7,.75,.75,.3,.3];"xlml"==t&&(n=[1,1,1,1,.5,.5]),null==e.left&&(e.left=n[0]),null==e.right&&(e.right=n[1]),null==e.top&&(e.top=n[2]),null==e.bottom&&(e.bottom=n[3]),null==e.header&&(e.header=n[4]),null==e.footer&&(e.footer=n[5])}}function ic(e,t,n,i,s,r){try{i.cellNF&&(e.z=xn[t])}catch(aC){if(i.WTF)throw aC}if("z"!==e.t||i.cellStyles){if("d"===e.t&&"string"===typeof e.v&&(e.v=vi(e.v)),(!i||!1!==i.cellText)&&"z"!==e.t)try{if(null==xn[t]&&Jn(ti[t]||"General",t),"e"===e.t)e.w=e.w||Ur[e.v];else if(0===t)if("n"===e.t)(0|e.v)===e.v?e.w=e.v.toString(10):e.w=Nn(e.v);else if("d"===e.t){var a=ci(e.v);e.w=(0|a)===a?a.toString(10):Nn(a)}else{if(void 0===e.v)return"";e.w=kn(e.v,tc)}else"d"===e.t?e.w=Qn(t,ci(e.v),tc):e.w=Qn(t,e.v,tc)}catch(aC){if(i.WTF)throw aC}if(i.cellStyles&&null!=n)try{e.s=r.Fills[n],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Lo(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),i.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Lo(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),i.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(aC){if(i.WTF&&r.Fills)throw aC}}}var sc=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,rc=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,ac=/<(?:\w:)?hyperlink [^>]*>/gm,oc=/"(\w*:\w*)"/,lc=/<(?:\w:)?col\b[^>]*[\/]?>/g,cc=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,hc=/<(?:\w:)?pageMargins[^>]*\/>/g,uc=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,dc=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,fc=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function pc(e,t,n,i,s,r,a){if(!e)return e;i||(i={"!id":{}});var o=t.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},c="",h="",u=e.match(rc);u?(c=e.slice(0,u.index),h=e.slice(u.index+u[0].length)):c=h=e;var d=c.match(uc);d?mc(d[0],o,s,n):(d=c.match(dc))&&function(e,t,n,i,s){mc(e.slice(0,e.indexOf(">")),n,i,s)}(d[0],d[1],o,s,n);var f=(c.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(f>0){var p=c.slice(f,f+50).match(oc);p&&function(e,t){var n=mr(t);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(e["!ref"]=pr(n))}(o,p[1])}var m=c.match(fc);m&&m[1]&&function(e,t){t.Views||(t.Views=[{}]);(e.match(gc)||[]).forEach((function(e,n){var i=zi(e);t.Views[n]||(t.Views[n]={}),+i.zoomScale&&(t.Views[n].zoom=+i.zoomScale),Qi(i.rightToLeft)&&(t.Views[n].RTL=!0)}))}(m[1],s);var g=[];if(t.cellStyles){var b=c.match(lc);b&&function(e,t){for(var n=!1,i=0;i!=t.length;++i){var s=zi(t[i],!0);s.hidden&&(s.hidden=Qi(s.hidden));var r=parseInt(s.min,10)-1,a=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!n&&s.width&&(n=!0,Bo(s.width)),jo(s);r<=a;)e[r++]=xi(s)}}(g,b)}u&&bc(u[1],o,t,l,r,a);var v=h.match(cc);v&&(o["!autofilter"]=function(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}(v[0]));var y=[],x=h.match(sc);if(x)for(f=0;f!=x.length;++f)y[f]=mr(x[f].slice(x[f].indexOf('"')+1));var S=h.match(ac);S&&function(e,t,n){for(var i=Array.isArray(e),s=0;s!=t.length;++s){var r=zi(is(t[s]),!0);if(!r.ref)return;var a=((n||{})["!id"]||[])[r.id];a?(r.Target=a.Target,r.location&&(r.Target+="#"+Yi(r.location))):(r.Target="#"+Yi(r.location),a={Target:r.Target,TargetMode:"Internal"}),r.Rel=a,r.tooltip&&(r.Tooltip=r.tooltip,delete r.tooltip);for(var o=mr(r.ref),l=o.s.r;l<=o.e.r;++l)for(var c=o.s.c;c<=o.e.c;++c){var h=dr({c:c,r:l});i?(e[l]||(e[l]=[]),e[l][c]||(e[l][c]={t:"z",v:void 0}),e[l][c].l=r):(e[h]||(e[h]={t:"z",v:void 0}),e[h].l=r)}}}(o,S,i);var w=h.match(hc);if(w&&(o["!margins"]=function(e){var t={};return["left","right","top","bottom","header","footer"].forEach((function(n){e[n]&&(t[n]=parseFloat(e[n]))})),t}(zi(w[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=pr(l)),t.sheetRows>0&&o["!ref"]){var E=mr(o["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>l.e.r&&(E.e.r=l.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>l.e.c&&(E.e.c=l.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=pr(E))}return g.length>0&&(o["!cols"]=g),y.length>0&&(o["!merges"]=y),o}function mc(e,t,n,i){var s=zi(e);n.Sheets[i]||(n.Sheets[i]={}),s.codeName&&(n.Sheets[i].CodeName=Yi(is(s.codeName)))}var gc=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;var bc=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,i=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,r=rs("v"),a=rs("f");return function(o,l,c,h,u,d){for(var f,p,m,g,b,v=0,y="",x=[],S=[],w=0,E=0,_=0,T="",M=0,C=0,A=0,P=0,N=Array.isArray(d.CellXf),k=[],L=[],I=Array.isArray(l),R=[],O={},D=!1,F=!!c.sheetStubs,B=o.split(t),j=0,V=B.length;j!=V;++j){var G=(y=B[j].trim()).length;if(0!==G){var W=0;e:for(v=0;v<G;++v)switch(y[v]){case">":if("/"!=y[v-1]){++v;break e}if(c&&c.cellStyles){if(M=null!=(p=zi(y.slice(W,v),!0)).r?parseInt(p.r,10):M+1,C=-1,c.sheetRows&&c.sheetRows<M)continue;O={},D=!1,p.ht&&(D=!0,O.hpt=parseFloat(p.ht),O.hpx=Wo(O.hpt)),"1"==p.hidden&&(D=!0,O.hidden=!0),null!=p.outlineLevel&&(D=!0,O.level=+p.outlineLevel),D&&(R[M-1]=O)}break;case"<":W=v}if(W>=v)break;if(M=null!=(p=zi(y.slice(W,v),!0)).r?parseInt(p.r,10):M+1,C=-1,!(c.sheetRows&&c.sheetRows<M)){h.s.r>M-1&&(h.s.r=M-1),h.e.r<M-1&&(h.e.r=M-1),c&&c.cellStyles&&(O={},D=!1,p.ht&&(D=!0,O.hpt=parseFloat(p.ht),O.hpx=Wo(O.hpt)),"1"==p.hidden&&(D=!0,O.hidden=!0),null!=p.outlineLevel&&(D=!0,O.level=+p.outlineLevel),D&&(R[M-1]=O)),x=y.slice(v).split(e);for(var z=0;z!=x.length&&"<"==x[z].trim().charAt(0);++z);for(x=x.slice(z),v=0;v!=x.length;++v)if(0!==(y=x[v].trim()).length){if(S=y.match(n),w=v,E=0,_=0,y="<c "+("<"==y.slice(0,1)?">":"")+y,null!=S&&2===S.length){for(w=0,T=S[1],E=0;E!=T.length&&!((_=T.charCodeAt(E)-64)<1||_>26);++E)w=26*w+_;C=--w}else++C;for(E=0;E!=y.length&&62!==y.charCodeAt(E);++E);if(++E,(p=zi(y.slice(0,E),!0)).r||(p.r=dr({r:M-1,c:C})),f={t:""},null!=(S=(T=y.slice(E)).match(r))&&""!==S[1]&&(f.v=Yi(S[1])),c.cellFormula){if(null!=(S=T.match(a))&&""!==S[1]){if(f.f=Yi(is(S[1])).replace(/\r\n/g,"\n"),c.xlfn||(f.f=pl(f.f)),S[0].indexOf('t="array"')>-1)f.F=(T.match(s)||[])[1],f.F.indexOf(":")>-1&&k.push([mr(f.F),f.F]);else if(S[0].indexOf('t="shared"')>-1){g=zi(S[0]);var U=Yi(is(S[1]));c.xlfn||(U=pl(U)),L[parseInt(g.si,10)]=[g,U,p.r]}}else(S=T.match(/<f[^>]*\/>/))&&L[(g=zi(S[0])).si]&&(f.f=fl(L[g.si][1],L[g.si][2],p.r));var H=ur(p.r);for(E=0;E<k.length;++E)H.r>=k[E][0].s.r&&H.r<=k[E][0].e.r&&H.c>=k[E][0].s.c&&H.c<=k[E][0].e.c&&(f.F=k[E][1])}if(null==p.t&&void 0===f.v)if(f.f||f.F)f.v=0,f.t="n";else{if(!F)continue;f.t="z"}else f.t=p.t||"n";switch(h.s.c>C&&(h.s.c=C),h.e.c<C&&(h.e.c=C),f.t){case"n":if(""==f.v||null==f.v){if(!F)continue;f.t="z"}else f.v=parseFloat(f.v);break;case"s":if("undefined"==typeof f.v){if(!F)continue;f.t="z"}else m=ec[parseInt(f.v,10)],f.v=m.t,f.r=m.r,c.cellHTML&&(f.h=m.h);break;case"str":f.t="s",f.v=null!=f.v?is(f.v):"",c.cellHTML&&(f.h=$i(f.v));break;case"inlineStr":S=T.match(i),f.t="s",null!=S&&(m=fo(S[1]))?(f.v=m.t,c.cellHTML&&(f.h=m.h)):f.v="";break;case"b":f.v=Qi(f.v);break;case"d":c.cellDates?f.v=vi(f.v,1):(f.v=ci(vi(f.v,1)),f.t="n");break;case"e":c&&!1===c.cellText||(f.w=f.v),f.v=Hr[f.v]}if(A=P=0,b=null,N&&void 0!==p.s&&null!=(b=d.CellXf[p.s])&&(null!=b.numFmtId&&(A=b.numFmtId),c.cellStyles&&null!=b.fillId&&(P=b.fillId)),ic(f,A,P,c,u,d),c.cellDates&&N&&"n"==f.t&&qn(xn[A])&&(f.t="d",f.v=fi(f.v)),p.cm&&c.xlmeta){var X=(c.xlmeta.Cell||[])[+p.cm-1];X&&"XLDAPR"==X.type&&(f.D=!0)}if(I){var Y=ur(p.r);l[Y.r]||(l[Y.r]=[]),l[Y.r][Y.c]=f}else l[p.r]=f}}}}R.length>0&&(l["!rows"]=R)}}();var vc=Ir;function yc(e){return[Mr(e),Rr(e),"n"]}var xc=Ir;var Sc=["left","right","top","bottom","header","footer"];function wc(e,t,n,i,s,r){var a=r||{"!type":"chart"};if(!e)return r;var o=0,l=0,c="A",h={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach((function(e){var t=function(e){var t,n=[],i=e.match(/^<c:numCache>/);(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/gm)||[]).forEach((function(e){var t=e.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);t&&(n[+t[1]]=i?+t[2]:t[2])}));var s=Yi((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/gm)||[]).forEach((function(e){t=e.replace(/<.*?>/g,"")})),[n,s,t]}(e);h.s.r=h.s.c=0,h.e.c=o,c=hr(o),t[0].forEach((function(e,n){a[c+lr(n)]={t:"n",v:e,z:t[1]},l=n})),h.e.r<l&&(h.e.r=l),++o})),o>0&&(a["!ref"]=pr(h)),a}var Ec=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],_c=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Tc=[],Mc=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Cc(e,t){for(var n=0;n!=e.length;++n)for(var i=e[n],s=0;s!=t.length;++s){var r=t[s];if(null==i[r[0]])i[r[0]]=r[1];else switch(r[2]){case"bool":"string"==typeof i[r[0]]&&(i[r[0]]=Qi(i[r[0]]));break;case"int":"string"==typeof i[r[0]]&&(i[r[0]]=parseInt(i[r[0]],10))}}}function Ac(e,t){for(var n=0;n!=t.length;++n){var i=t[n];if(null==e[i[0]])e[i[0]]=i[1];else switch(i[2]){case"bool":"string"==typeof e[i[0]]&&(e[i[0]]=Qi(e[i[0]]));break;case"int":"string"==typeof e[i[0]]&&(e[i[0]]=parseInt(e[i[0]],10))}}}function Pc(e){Ac(e.WBProps,Ec),Ac(e.CalcPr,Mc),Cc(e.WBView,_c),Cc(e.Sheets,Tc),tc.date1904=Qi(e.WBProps.date1904)}var Nc="][*?/\\".split("");function kc(e,t){if(e.length>31){if(t)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return Nc.forEach((function(i){if(-1!=e.indexOf(i)){if(!t)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}})),n}var Lc=/<\w+:workbook/;function Ic(e,t){var n={};return e.read_shift(4),n.ArchID=e.read_shift(4),e.l+=t-8,n}function Rc(e,t,n){return".bin"===t.slice(-4)?function(e,t){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},i=[],s=!1;t||(t={}),t.biff=12;var r=[],a=[[]];return a.SheetNames=[],a.XTI=[],hh[16]={n:"BrtFRTArchID$",f:Ic},tr(e,(function(e,o,l){switch(l){case 156:a.SheetNames.push(e.name),n.Sheets.push(e);break;case 153:n.WBProps=e;break;case 39:null!=e.Sheet&&(t.SID=e.Sheet),e.Ref=Vl(e.Ptg,0,null,a,t),delete t.SID,delete e.Ptg,r.push(e);break;case 1036:case 361:case 2071:case 158:case 143:case 664:case 353:case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:case 16:break;case 357:case 358:case 355:case 667:a[0].length?a.push([l,e]):a[0]=[l,e],a[a.length-1].XTI=[];break;case 362:0===a.length&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(e),a.XTI=a.XTI.concat(e);break;case 35:case 37:i.push(l),s=!0;break;case 36:case 38:i.pop(),s=!1;break;default:if(o.T);else if(!s||t.WTF&&37!=i[i.length-1]&&35!=i[i.length-1])throw new Error("Unexpected record 0x"+l.toString(16))}}),t),Pc(n),n.Names=r,n.supbooks=a,n}(e,n):function(e,t){if(!e)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},i=!1,s="xmlns",r={},a=0;if(e.replace(Vi,(function(o,l){var c=zi(o);switch(Ui(c[0])){case"<?xml":case"</workbook>":case"<fileVersion/>":case"</fileVersion>":case"<fileSharing":case"<fileSharing/>":case"</workbookPr>":case"<workbookProtection":case"<workbookProtection/>":case"<bookViews":case"<bookViews>":case"</bookViews>":case"</workbookView>":case"<sheets":case"<sheets>":case"</sheets>":case"</sheet>":case"<functionGroups":case"<functionGroups/>":case"<functionGroup":case"<externalReferences":case"</externalReferences>":case"<externalReferences>":case"<externalReference":case"<definedNames/>":case"<definedName/>":case"</calcPr>":case"<oleSize":case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":case"<customWorkbookView":case"</customWorkbookView>":case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":case"<pivotCache":case"<smartTagPr":case"<smartTagPr/>":case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":case"<smartTagType":case"<webPublishing":case"<webPublishing/>":case"<fileRecoveryPr":case"<fileRecoveryPr/>":case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":case"<webPublishObject":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":case"<ArchID":case"<revisionPtr":break;case"<workbook":o.match(Lc)&&(s="xmlns"+o.match(/<(\w+):/)[1]),n.xmlns=c[s];break;case"<fileVersion":delete c[0],n.AppVersion=c;break;case"<workbookPr":case"<workbookPr/>":Ec.forEach((function(e){if(null!=c[e[0]])switch(e[2]){case"bool":n.WBProps[e[0]]=Qi(c[e[0]]);break;case"int":n.WBProps[e[0]]=parseInt(c[e[0]],10);break;default:n.WBProps[e[0]]=c[e[0]]}})),c.codeName&&(n.WBProps.CodeName=is(c.codeName));break;case"<workbookView":case"<workbookView/>":delete c[0],n.WBView.push(c);break;case"<sheet":switch(c.state){case"hidden":c.Hidden=1;break;case"veryHidden":c.Hidden=2;break;default:c.Hidden=0}delete c.state,c.name=Yi(is(c.name)),delete c[0],n.Sheets.push(c);break;case"<definedNames>":case"<definedNames":case"<ext":case"<AlternateContent":case"<AlternateContent>":i=!0;break;case"</definedNames>":case"</ext>":case"</AlternateContent>":i=!1;break;case"<definedName":(r={}).Name=is(c.name),c.comment&&(r.Comment=c.comment),c.localSheetId&&(r.Sheet=+c.localSheetId),Qi(c.hidden||"0")&&(r.Hidden=!0),a=l+o.length;break;case"</definedName>":r.Ref=Yi(is(e.slice(a,l))),n.Names.push(r);break;case"<calcPr":case"<calcPr/>":delete c[0],n.CalcPr=c;break;default:if(!i&&t.WTF)throw new Error("unrecognized "+c[0]+" in workbook")}return o})),-1===bs.indexOf(n.xmlns))throw new Error("Unknown Namespace: "+n.xmlns);return Pc(n),n}(e,n)}function Oc(e,t,n,i,s,r,a,o){return".bin"===t.slice(-4)?function(e,t,n,i,s,r,a){if(!e)return e;var o=t||{};i||(i={"!id":{}});var l,c,h,u,d,f,p,m,g,b,v=o.dense?[]:{},y={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=[],S=!1,w=!1,E=[];o.biff=12,o["!row"]=0;var _=0,T=!1,M=[],C={},A=o.supbooks||s.supbooks||[[]];if(A.sharedf=C,A.arrayf=M,A.SheetNames=s.SheetNames||s.Sheets.map((function(e){return e.name})),!o.supbooks&&(o.supbooks=A,s.Names))for(var P=0;P<s.Names.length;++P)A[0][P+1]=s.Names[P];var N,k,L=[],I=[],R=!1;if(hh[16]={n:"BrtShortReal",f:yc},tr(e,(function(e,t,P){if(!w)switch(P){case 148:l=e;break;case 0:c=e,o.sheetRows&&o.sheetRows<=c.r&&(w=!0),g=lr(d=c.r),o["!row"]=c.r,(e.hidden||e.hpt||null!=e.level)&&(e.hpt&&(e.hpx=Wo(e.hpt)),I[e.r]=e);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(h={t:e[2]},e[2]){case"n":h.v=e[1];break;case"s":m=ec[e[1]],h.v=m.t,h.r=m.r;break;case"b":h.v=!!e[1];break;case"e":h.v=e[1],!1!==o.cellText&&(h.w=Ur[h.v]);break;case"str":h.t="s",h.v=e[1];break;case"is":h.t="s",h.v=e[1].t}if((u=a.CellXf[e[0].iStyleRef])&&ic(h,u.numFmtId,null,o,r,a),f=-1==e[0].c?f+1:e[0].c,o.dense?(v[d]||(v[d]=[]),v[d][f]=h):v[hr(f)+g]=h,o.cellFormula){for(T=!1,_=0;_<M.length;++_){var O=M[_];c.r>=O[0].s.r&&c.r<=O[0].e.r&&f>=O[0].s.c&&f<=O[0].e.c&&(h.F=pr(O[0]),T=!0)}!T&&e.length>3&&(h.f=e[3])}if(y.s.r>c.r&&(y.s.r=c.r),y.s.c>f&&(y.s.c=f),y.e.r<c.r&&(y.e.r=c.r),y.e.c<f&&(y.e.c=f),o.cellDates&&u&&"n"==h.t&&qn(xn[u.numFmtId])){var D=_n(h.v);D&&(h.t="d",h.v=new Date(D.y,D.m-1,D.d,D.H,D.M,D.S,D.u))}N&&("XLDAPR"==N.type&&(h.D=!0),N=void 0),k&&(k=void 0);break;case 1:case 12:if(!o.sheetStubs||S)break;h={t:"z",v:void 0},f=-1==e[0].c?f+1:e[0].c,o.dense?(v[d]||(v[d]=[]),v[d][f]=h):v[hr(f)+g]=h,y.s.r>c.r&&(y.s.r=c.r),y.s.c>f&&(y.s.c=f),y.e.r<c.r&&(y.e.r=c.r),y.e.c<f&&(y.e.c=f),N&&("XLDAPR"==N.type&&(h.D=!0),N=void 0),k&&(k=void 0);break;case 176:E.push(e);break;case 49:N=((o.xlmeta||{}).Cell||[])[e-1];break;case 494:var F=i["!id"][e.relId];for(F?(e.Target=F.Target,e.loc&&(e.Target+="#"+e.loc),e.Rel=F):""==e.relId&&(e.Target="#"+e.loc),d=e.rfx.s.r;d<=e.rfx.e.r;++d)for(f=e.rfx.s.c;f<=e.rfx.e.c;++f)o.dense?(v[d]||(v[d]=[]),v[d][f]||(v[d][f]={t:"z",v:void 0}),v[d][f].l=e):(p=dr({c:f,r:d}),v[p]||(v[p]={t:"z",v:void 0}),v[p].l=e);break;case 426:if(!o.cellFormula)break;M.push(e),(b=o.dense?v[d][f]:v[hr(f)+g]).f=Vl(e[1],0,{r:c.r,c:f},A,o),b.F=pr(e[0]);break;case 427:if(!o.cellFormula)break;C[dr(e[0].s)]=e[1],(b=o.dense?v[d][f]:v[hr(f)+g]).f=Vl(e[1],0,{r:c.r,c:f},A,o);break;case 60:if(!o.cellStyles)break;for(;e.e>=e.s;)L[e.e--]={width:e.w/256,hidden:!!(1&e.flags),level:e.level},R||(R=!0,Bo(e.w/256)),jo(L[e.e+1]);break;case 161:v["!autofilter"]={ref:pr(e)};break;case 476:v["!margins"]=e;break;case 147:s.Sheets[n]||(s.Sheets[n]={}),e.name&&(s.Sheets[n].CodeName=e.name),(e.above||e.left)&&(v["!outline"]={above:e.above,left:e.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),e.RTL&&(s.Views[0].RTL=!0);break;case 485:case 64:case 1053:case 151:case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:S=!0;break;case 36:S=!1;break;case 37:x.push(P),S=!0;break;case 38:x.pop(),S=!1;break;default:if(t.T);else if(!S||o.WTF)throw new Error("Unexpected record 0x"+P.toString(16))}}),o),delete o.supbooks,delete o["!row"],!v["!ref"]&&(y.s.r<2e6||l&&(l.e.r>0||l.e.c>0||l.s.r>0||l.s.c>0))&&(v["!ref"]=pr(l||y)),o.sheetRows&&v["!ref"]){var O=mr(v["!ref"]);o.sheetRows<=+O.e.r&&(O.e.r=o.sheetRows-1,O.e.r>y.e.r&&(O.e.r=y.e.r),O.e.r<O.s.r&&(O.s.r=O.e.r),O.e.c>y.e.c&&(O.e.c=y.e.c),O.e.c<O.s.c&&(O.s.c=O.e.c),v["!fullref"]=v["!ref"],v["!ref"]=pr(O))}return E.length>0&&(v["!merges"]=E),L.length>0&&(v["!cols"]=L),I.length>0&&(v["!rows"]=I),v}(e,i,n,s,r,a,o):pc(e,i,n,s,r,a,o)}function Dc(e,t,n,i,s,r,a,o){return".bin"===t.slice(-4)?function(e,t,n,i,s){if(!e)return e;i||(i={"!id":{}});var r={"!type":"chart","!drawel":null,"!rel":""},a=[],o=!1;return tr(e,(function(e,i,l){switch(l){case 550:r["!rel"]=e;break;case 651:s.Sheets[n]||(s.Sheets[n]={}),e.name&&(s.Sheets[n].CodeName=e.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:a.push(l);break;case 38:a.pop();break;default:if(i.T>0)a.push(l);else if(i.T<0)a.pop();else if(!o||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),t),i["!id"][r["!rel"]]&&(r["!drawel"]=i["!id"][r["!rel"]]),r}(e,i,n,s,r):function(e,t,n,i,s){if(!e)return e;i||(i={"!id":{}});var r,a={"!type":"chart","!drawel":null,"!rel":""},o=e.match(uc);return o&&mc(o[0],0,s,n),(r=e.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=r[1]),i["!id"][a["!rel"]]&&(a["!drawel"]=i["!id"][a["!rel"]]),a}(e,0,n,s,r)}function Fc(e,t,n,i){return".bin"===t.slice(-4)?function(e,t,n){var i={NumberFmt:[]};for(var s in xn)i.NumberFmt[s]=xn[s];i.CellXf=[],i.Fonts=[];var r=[],a=!1;return tr(e,(function(e,s,o){switch(o){case 44:i.NumberFmt[e[0]]=e[1],Jn(e[1],e[0]);break;case 43:i.Fonts.push(e),null!=e.color.theme&&t&&t.themeElements&&t.themeElements.clrScheme&&(e.color.rgb=Lo(t.themeElements.clrScheme[e.color.theme].rgb,e.color.tint||0));break;case 1025:case 45:case 46:case 48:case 507:case 572:case 475:case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 47:617==r[r.length-1]&&i.CellXf.push(e);break;case 35:a=!0;break;case 36:a=!1;break;case 37:r.push(o),a=!0;break;case 38:r.pop(),a=!1;break;default:if(s.T>0)r.push(o);else if(s.T<0)r.pop();else if(!a||n.WTF&&37!=r[r.length-1])throw new Error("Unexpected record 0x"+o.toString(16))}})),i}(e,n,i):Xo(e,n,i)}function Bc(e,t,n){return".bin"===t.slice(-4)?function(e,t){var n=[],i=!1;return tr(e,(function(e,s,r){switch(r){case 159:n.Count=e[0],n.Unique=e[1];break;case 19:n.push(e);break;case 160:return!0;case 35:i=!0;break;case 36:i=!1;break;default:if(s.T,!i||t.WTF)throw new Error("Unexpected record 0x"+r.toString(16))}})),n}(e,n):function(e,t){var n=[],i="";if(!e)return n;var s=e.match(po);if(s){i=s[2].replace(mo,"").split(go);for(var r=0;r!=i.length;++r){var a=fo(i[r].trim(),t);null!=a&&(n[n.length]=a)}s=zi(s[1]),n.Count=s.count,n.Unique=s.uniqueCount}return n}(e,n)}function jc(e,t,n){return".bin"===t.slice(-4)?function(e,t){var n=[],i=[],s={},r=!1;return tr(e,(function(e,a,o){switch(o){case 632:i.push(e);break;case 635:s=e;break;case 637:s.t=e.t,s.h=e.h,s.r=e.r;break;case 636:if(s.author=i[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,n.push(s);break;case 3072:case 37:case 38:break;case 35:r=!0;break;case 36:r=!1;break;default:if(a.T);else if(!r||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}})),n}(e,n):function(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],i=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach((function(e){if(""!==e&&""!==e.trim()){var t=e.match(/<(?:\w+:)?author[^>]*>(.*)/);t&&n.push(t[1])}}));var r=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return r&&r[1]&&r[1].split(/<\/\w*:?comment>/).forEach((function(e){if(""!==e&&""!==e.trim()){var s=e.match(/<(?:\w+:)?comment[^>]*>/);if(s){var r=zi(s[0]),a={author:r.authorId&&n[r.authorId]||"sheetjsghost",ref:r.ref,guid:r.guid},o=ur(r.ref);if(!(t.sheetRows&&t.sheetRows<=o.r)){var l=e.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),c=!!l&&!!l[1]&&fo(l[1])||{r:"",t:"",h:""};a.r=c.r,"<t></t>"==c.r&&(c.t=c.h=""),a.t=(c.t||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n"),t.cellHTML&&(a.h=c.h),i.push(a)}}}})),i}(e,n)}function Vc(e,t,n){return".bin"===t.slice(-4)?function(e){var t=[];return tr(e,(function(e,n,i){if(63===i)t.push(e);else if(!n.T)throw new Error("Unexpected record 0x"+i.toString(16))})),t}(e):function(e){var t=[];if(!e)return t;var n=1;return(e.match(Vi)||[]).forEach((function(e){var i=zi(e);switch(i[0]){case"<?xml":case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?n=i.i:i.i=n,t.push(i)}})),t}(e)}function Gc(e,t,n,i){if(".bin"===n.slice(-4))return function(e,t,n,i){if(!e)return e;var s=i||{},r=!1;tr(e,(function(e,t,n){switch(n){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:r=!0;break;case 36:r=!1;break;default:if(t.T);else if(!r||s.WTF)throw new Error("Unexpected record 0x"+n.toString(16))}}),s)}(e,0,0,i)}function Wc(e,t,n){return".bin"===t.slice(-4)?function(e,t,n){var i={Types:[],Cell:[],Value:[]},s=n||{},r=[],a=!1,o=2;return tr(e,(function(e,t,n){switch(n){case 335:i.Types.push({name:e.name});break;case 51:e.forEach((function(e){1==o?i.Cell.push({type:i.Types[e[0]-1].name,index:e[1]}):0==o&&i.Value.push({type:i.Types[e[0]-1].name,index:e[1]})}));break;case 337:o=e?1:0;break;case 338:o=2;break;case 35:r.push(n),a=!0;break;case 36:r.pop(),a=!1;break;default:if(t.T);else if(!a||s.WTF&&35!=r[r.length-1])throw new Error("Unexpected record 0x"+n.toString(16))}})),i}(e,0,n):function(e,t,n){var i={Types:[],Cell:[],Value:[]};if(!e)return i;var s,r=!1,a=2;return e.replace(Vi,(function(e){var t=zi(e);switch(Ui(t[0])){case"<?xml":case"<metadata":case"</metadata>":case"<metadataTypes":case"</metadataTypes>":case"</metadataType>":case"</futureMetadata>":case"<bk>":case"</bk>":case"</rc>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<metadataType":i.Types.push({name:t.name});break;case"<futureMetadata":for(var o=0;o<i.Types.length;++o)i.Types[o].name==t.name&&(s=i.Types[o]);break;case"<rc":1==a?i.Cell.push({type:i.Types[t.t-1].name,index:+t.v}):0==a&&i.Value.push({type:i.Types[t.t-1].name,index:+t.v});break;case"<cellMetadata":a=1;break;case"</cellMetadata>":case"</valueMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<rvb":if(!s)break;s.offsets||(s.offsets=[]),s.offsets.push(+t.i);break;default:if(!r&&n.WTF)throw new Error("unrecognized "+t[0]+" in metadata")}return e})),i}(e,0,n)}var zc,Uc=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Hc=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Xc(e,t){var n=e.split(/\s+/),i=[];if(t||(i[0]=n[0]),1===n.length)return i;var s,r,a,o=e.match(Uc);if(o)for(a=0;a!=o.length;++a)-1===(r=(s=o[a].match(Hc))[1].indexOf(":"))?i[s[1]]=s[2].slice(1,s[2].length-1):i["xmlns:"===s[1].slice(0,6)?"xmlns"+s[1].slice(6):s[1].slice(r+1)]=s[2].slice(1,s[2].length-1);return i}function Yc(e){var t={};if(1===e.split(/\s+/).length)return t;var n,i,s,r=e.match(Uc);if(r)for(s=0;s!=r.length;++s)-1===(i=(n=r[s].match(Hc))[1].indexOf(":"))?t[n[1]]=n[2].slice(1,n[2].length-1):t["xmlns:"===n[1].slice(0,6)?"xmlns"+n[1].slice(6):n[1].slice(i+1)]=n[2].slice(1,n[2].length-1);return t}function qc(e,t,n,i){var s=i;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Qi(i);break;case"i2":case"int":s=parseInt(i,10);break;case"r4":case"float":s=parseFloat(i);break;case"date":case"dateTime.tz":s=vi(i);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}e[Yi(t)]=s}function Kc(e,t,n){if("z"!==e.t){if(!n||!1!==n.cellText)try{"e"===e.t?e.w=e.w||Ur[e.v]:"General"===t?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=Nn(e.v):e.w=kn(e.v):e.w=function(e,t){var n=zc[e]||Yi(e);return"General"===n?kn(t):Qn(n,t)}(t||"General",e.v)}catch(aC){if(n.WTF)throw aC}try{var i=zc[t]||t||"General";if(n.cellNF&&(e.z=i),n.cellDates&&"n"==e.t&&qn(i)){var s=_n(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(aC){if(n.WTF)throw aC}}}function $c(e,t,n){if(n.cellStyles&&t.Interior){var i=t.Interior;i.Pattern&&(i.patternType=zo[i.Pattern]||i.Pattern)}e[t.ID]=t}function Zc(e,t,n,i,s,r,a,o,l,c){var h="General",u=i.StyleID,d={};c=c||{};var f=[],p=0;for(void 0===u&&o&&(u=o.StyleID),void 0===u&&a&&(u=a.StyleID);void 0!==r[u]&&(r[u].nf&&(h=r[u].nf),r[u].Interior&&f.push(r[u].Interior),r[u].Parent);)u=r[u].Parent;switch(n.Type){case"Boolean":i.t="b",i.v=Qi(e);break;case"String":i.t="s",i.r=Zi(Yi(e)),i.v=e.indexOf("<")>-1?Yi(t||e).replace(/<.*?>/g,""):i.r;break;case"DateTime":"Z"!=e.slice(-1)&&(e+="Z"),i.v=(vi(e)-new Date(Date.UTC(1899,11,30)))/864e5,i.v!==i.v?i.v=Yi(e):i.v<60&&(i.v=i.v-1),h&&"General"!=h||(h="yyyy-mm-dd");case"Number":void 0===i.v&&(i.v=+e),i.t||(i.t="n");break;case"Error":i.t="e",i.v=Hr[e],!1!==c.cellText&&(i.w=e);break;default:""==e&&""==t?i.t="z":(i.t="s",i.v=Zi(t||e))}if(Kc(i,h,c),!1!==c.cellFormula)if(i.Formula){var m=Yi(i.Formula);61==m.charCodeAt(0)&&(m=m.slice(1)),i.f=cl(m,s),delete i.Formula,"RC"==i.ArrayRange?i.F=cl("RC:RC",s):i.ArrayRange&&(i.F=cl(i.ArrayRange,s),l.push([mr(i.F),i.F]))}else for(p=0;p<l.length;++p)s.r>=l[p][0].s.r&&s.r<=l[p][0].e.r&&s.c>=l[p][0].s.c&&s.c<=l[p][0].e.c&&(i.F=l[p][1]);c.cellStyles&&(f.forEach((function(e){!d.patternType&&e.patternType&&(d.patternType=e.patternType)})),i.s=d),void 0!==i.StyleID&&(i.ixfe=i.StyleID)}function Qc(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),e.v=e.w=e.ixfe=void 0}function Jc(e,t){var n=t||{};ei();var i=qt(ps(e));"binary"!=n.type&&"array"!=n.type&&"base64"!=n.type||(i="undefined"!==typeof Yt?Yt.utils.decode(65001,Ht(i)):is(i));var s,r=i.slice(0,1024).toLowerCase(),a=!1;if((1023&(r=r.replace(/".*?"/g,"")).indexOf(">"))>Math.min(1023&r.indexOf(","),1023&r.indexOf(";"))){var o=xi(n);return o.type="string",ro.to_workbook(i,o)}if(-1==r.indexOf("<?xml")&&["html","table","head","meta","script","style","div"].forEach((function(e){r.indexOf("<"+e)>=0&&(a=!0)})),a)return function(e,t){var n=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||0==n.length)throw new Error("Invalid HTML: could not find <table>");if(1==n.length)return vr(fh(n[0],t),t);var i={SheetNames:[],Sheets:{}};return n.forEach((function(e,n){uu(i,fh(e,t),"Sheet"+(n+1))})),i}(i,n);zc={"General Number":"General","General Date":xn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":xn[15],"Short Date":xn[14],"Long Time":xn[19],"Medium Time":xn[18],"Short Time":xn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:xn[2],Standard:xn[4],Percent:xn[10],Scientific:xn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[];var h,u={},d=[],f=n.dense?[]:{},p="",m={},g={},b=Xc('<Data ss:Type="String">'),v=0,y=0,x=0,S={s:{r:2e6,c:2e6},e:{r:0,c:0}},w={},E={},_="",T=0,M=[],C={},A={},P=0,N=[],k=[],L={},I=[],R=!1,O=[],D=[],F={},B=0,j=0,V={Sheets:[],WBProps:{date1904:!1}},G={};ms.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/gm,"");for(var W="";s=ms.exec(i);)switch(s[3]=(W=s[3]).toLowerCase()){case"data":if("data"==W){if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==s[0].charAt(s[0].length-2)&&c.push([s[3],!0]);break}if(c[c.length-1][1])break;"/"===s[1]?Zc(i.slice(v,s.index),_,b,"comment"==c[c.length-1][0]?L:m,{c:y,r:x},w,I[y],g,O,n):(_="",b=Xc(s[0]),v=s.index+s[0].length);break;case"cell":if("/"===s[1])if(k.length>0&&(m.c=k),(!n.sheetRows||n.sheetRows>x)&&void 0!==m.v&&(n.dense?(f[x]||(f[x]=[]),f[x][y]=m):f[hr(y)+lr(x)]=m),m.HRef&&(m.l={Target:Yi(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(B=y+(0|parseInt(m.MergeAcross,10)),j=x+(0|parseInt(m.MergeDown,10)),M.push({s:{c:y,r:x},e:{c:B,r:j}})),n.sheetStubs)if(m.MergeAcross||m.MergeDown){for(var z=y;z<=B;++z)for(var U=x;U<=j;++U)(z>y||U>x)&&(n.dense?(f[U]||(f[U]=[]),f[U][z]={t:"z"}):f[hr(z)+lr(U)]={t:"z"});y=B+1}else++y;else m.MergeAcross?y=B+1:++y;else(m=Yc(s[0])).Index&&(y=+m.Index-1),y<S.s.c&&(S.s.c=y),y>S.e.c&&(S.e.c=y),"/>"===s[0].slice(-2)&&++y,k=[];break;case"row":"/"===s[1]||"/>"===s[0].slice(-2)?(x<S.s.r&&(S.s.r=x),x>S.e.r&&(S.e.r=x),"/>"===s[0].slice(-2)&&(g=Xc(s[0])).Index&&(x=+g.Index-1),y=0,++x):((g=Xc(s[0])).Index&&(x=+g.Index-1),F={},("0"==g.AutoFitHeight||g.Height)&&(F.hpx=parseInt(g.Height,10),F.hpt=Go(F.hpx),D[x]=F),"1"==g.Hidden&&(F.hidden=!0,D[x]=F));break;case"worksheet":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"));d.push(p),S.s.r<=S.e.r&&S.s.c<=S.e.c&&(f["!ref"]=pr(S),n.sheetRows&&n.sheetRows<=S.e.r&&(f["!fullref"]=f["!ref"],S.e.r=n.sheetRows-1,f["!ref"]=pr(S))),M.length&&(f["!merges"]=M),I.length>0&&(f["!cols"]=I),D.length>0&&(f["!rows"]=D),u[p]=f}else S={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=y=0,c.push([s[3],!1]),l=Xc(s[0]),p=Yi(l.Name),f=n.dense?[]:{},M=[],O=[],D=[],G={name:p,Hidden:0},V.Sheets.push(G);break;case"table":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else{if("/>"==s[0].slice(-2))break;c.push([s[3],!1]),I=[],R=!1}break;case"style":"/"===s[1]?$c(w,E,n):E=Xc(s[0]);break;case"numberformat":E.nf=Yi(Xc(s[0]).Format||"General"),zc[E.nf]&&(E.nf=zc[E.nf]);for(var H=0;392!=H&&xn[H]!=E.nf;++H);if(392==H)for(H=57;392!=H;++H)if(null==xn[H]){Jn(E.nf,H);break}break;case"column":if("table"!==c[c.length-1][0])break;if((h=Xc(s[0])).Hidden&&(h.hidden=!0,delete h.Hidden),h.Width&&(h.wpx=parseInt(h.Width,10)),!R&&h.wpx>10){R=!0,Io=6;for(var X=0;X<I.length;++X)I[X]&&jo(I[X])}R&&jo(h),I[h.Index-1||I.length]=h;for(var Y=0;Y<+h.Span;++Y)I[I.length]=xi(h);break;case"namedrange":if("/"===s[1])break;V.Names||(V.Names=[]);var q=zi(s[0]),K={Name:q.Name,Ref:cl(q.RefersTo.slice(1),{r:0,c:0})};V.Sheets.length>0&&(K.Sheet=V.Sheets.length-1),V.Names.push(K);break;case"namedcell":case"b":case"i":case"u":case"s":case"em":case"h2":case"h3":case"sub":case"sup":case"span":case"alignment":case"borders":case"border":case"protection":case"paragraphs":case"name":case"pixelsperinch":case"null":break;case"font":if("/>"===s[0].slice(-2))break;"/"===s[1]?_+=i.slice(T,s.index):T=s.index+s[0].length;break;case"interior":if(!n.cellStyles)break;E.Interior=Xc(s[0]);break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if("/>"===s[0].slice(-2))break;"/"===s[1]?sa(C,W,i.slice(P,s.index)):P=s.index+s[0].length;break;case"styles":case"workbook":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else c.push([s[3],!1]);break;case"comment":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"));Qc(L),k.push(L)}else c.push([s[3],!1]),L={a:(l=Xc(s[0])).Author};break;case"autofilter":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else if("/"!==s[0].charAt(s[0].length-2)){var $=Xc(s[0]);f["!autofilter"]={ref:cl($.Range).replace(/\$/g,"")},c.push([s[3],!0])}break;case"datavalidation":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==s[0].charAt(s[0].length-2)&&c.push([s[3],!0]);break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if("/"===s[1]){if((l=c.pop())[0]!==s[3])throw new Error("Bad state: "+l.join("|"))}else"/"!==s[0].charAt(s[0].length-2)&&c.push([s[3],!0]);break;default:if(0==c.length&&"document"==s[3])return Mh(i,n);if(0==c.length&&"uof"==s[3])return Mh(i,n);var Z=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(s[3]){case"allowpng":case"removepersonalinformation":case"downloadcomponents":case"locationofcomponents":case"colors":case"color":case"index":case"rgb":case"targetscreensize":case"readonlyrecommended":break;default:Z=!1}break;case"componentoptions":switch(s[3]){case"toolbar":case"hideofficelogo":case"spreadsheetautofit":case"label":case"caption":case"maxheight":case"maxwidth":case"nextsheetnumber":break;default:Z=!1}break;case"excelworkbook":switch(s[3]){case"date1904":V.WBProps.date1904=!0;break;case"windowheight":case"windowwidth":case"windowtopx":case"windowtopy":case"tabratio":case"protectstructure":case"protectwindow":case"protectwindows":case"activesheet":case"displayinknotes":case"firstvisiblesheet":case"supbook":case"sheetname":case"sheetindex":case"sheetindexfirst":case"sheetindexlast":case"dll":case"acceptlabelsinformulas":case"donotsavelinkvalues":case"iteration":case"maxiterations":case"maxchange":case"path":case"xct":case"count":case"selectedsheets":case"calculation":case"uncalced":case"startupprompt":case"crn":case"externname":case"formula":case"colfirst":case"collast":case"wantadvise":case"boolean":case"error":case"text":case"ole":case"noautorecover":case"publishobjects":case"donotcalculatebeforesave":case"number":case"refmoder1c1":case"embedsavesmarttags":break;default:Z=!1}break;case"workbookoptions":switch(s[3]){case"owcversion":case"height":case"width":break;default:Z=!1}break;case"worksheetoptions":switch(s[3]){case"visible":if("/>"===s[0].slice(-2));else if("/"===s[1])switch(i.slice(P,s.index)){case"SheetHidden":G.Hidden=1;break;case"SheetVeryHidden":G.Hidden=2}else P=s.index+s[0].length;break;case"header":f["!margins"]||nc(f["!margins"]={},"xlml"),isNaN(+zi(s[0]).Margin)||(f["!margins"].header=+zi(s[0]).Margin);break;case"footer":f["!margins"]||nc(f["!margins"]={},"xlml"),isNaN(+zi(s[0]).Margin)||(f["!margins"].footer=+zi(s[0]).Margin);break;case"pagemargins":var Q=zi(s[0]);f["!margins"]||nc(f["!margins"]={},"xlml"),isNaN(+Q.Top)||(f["!margins"].top=+Q.Top),isNaN(+Q.Left)||(f["!margins"].left=+Q.Left),isNaN(+Q.Right)||(f["!margins"].right=+Q.Right),isNaN(+Q.Bottom)||(f["!margins"].bottom=+Q.Bottom);break;case"displayrighttoleft":V.Views||(V.Views=[]),V.Views[0]||(V.Views[0]={}),V.Views[0].RTL=!0;break;case"freezepanes":case"frozennosplit":case"splithorizontal":case"splitvertical":case"donotdisplaygridlines":case"activerow":case"activecol":case"toprowbottompane":case"leftcolumnrightpane":case"unsynced":case"print":case"printerrors":case"panes":case"scale":case"pane":case"number":case"layout":case"pagesetup":case"selected":case"protectobjects":case"enableselection":case"protectscenarios":case"validprinterinfo":case"horizontalresolution":case"verticalresolution":case"numberofcopies":case"activepane":case"toprowvisible":case"leftcolumnvisible":case"fittopage":case"rangeselection":case"papersizeindex":case"pagelayoutzoom":case"pagebreakzoom":case"filteron":case"fitwidth":case"fitheight":case"commentslayout":case"zoom":case"lefttoright":case"gridlines":case"allowsort":case"allowfilter":case"allowinsertrows":case"allowdeleterows":case"allowinsertcols":case"allowdeletecols":case"allowinserthyperlinks":case"allowformatcells":case"allowsizecols":case"allowsizerows":case"tabcolorindex":case"donotdisplayheadings":case"showpagelayoutzoom":case"blackandwhite":case"donotdisplayzeros":case"displaypagebreak":case"rowcolheadings":case"donotdisplayoutline":case"noorientation":case"allowusepivottables":case"zeroheight":case"viewablerange":case"selection":case"protectcontents":break;case"nosummaryrowsbelowdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].above=!0;break;case"nosummarycolumnsrightdetail":f["!outline"]||(f["!outline"]={}),f["!outline"].left=!0;break;default:Z=!1}break;case"pivottable":case"pivotcache":switch(s[3]){case"immediateitemsondrop":case"showpagemultipleitemlabel":case"compactrowindent":case"location":case"pivotfield":case"orientation":case"layoutform":case"layoutsubtotallocation":case"layoutcompactrow":case"position":case"pivotitem":case"datatype":case"datafield":case"sourcename":case"parentfield":case"ptlineitems":case"ptlineitem":case"countofsameitems":case"item":case"itemtype":case"ptsource":case"cacheindex":case"consolidationreference":case"filename":case"reference":case"nocolumngrand":case"norowgrand":case"blanklineafteritems":case"hidden":case"subtotal":case"basefield":case"mapchilditems":case"function":case"refreshonfileopen":case"printsettitles":case"mergelabels":case"defaultversion":case"refreshname":case"refreshdate":case"refreshdatecopy":case"versionlastrefresh":case"versionlastupdate":case"versionupdateablemin":case"versionrefreshablemin":case"calculation":break;default:Z=!1}break;case"pagebreaks":switch(s[3]){case"colbreaks":case"colbreak":case"rowbreaks":case"rowbreak":case"colstart":case"colend":case"rowend":break;default:Z=!1}break;case"autofilter":switch(s[3]){case"autofiltercolumn":case"autofiltercondition":case"autofilterand":case"autofilteror":break;default:Z=!1}break;case"querytable":switch(s[3]){case"id":case"autoformatfont":case"autoformatpattern":case"querysource":case"querytype":case"enableredirections":case"refreshedinxl9":case"urlstring":case"htmltables":case"connection":case"commandtext":case"refreshinfo":case"notitles":case"nextid":case"columninfo":case"overwritecells":case"donotpromptforfile":case"textwizardsettings":case"source":case"number":case"decimal":case"thousandseparator":case"trailingminusnumbers":case"formatsettings":case"fieldtype":case"delimiters":case"tab":case"comma":case"autoformatname":case"versionlastedit":case"versionlastrefresh":break;default:Z=!1}break;case"datavalidation":switch(s[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":case"cellrangelist":break;default:Z=!1}break;case"sorting":case"conditionalformatting":switch(s[3]){case"range":case"type":case"min":case"max":case"sort":case"descending":case"order":case"casesensitive":case"value":case"errorstyle":case"errormessage":case"errortitle":case"cellrangelist":case"inputmessage":case"inputtitle":case"combohide":case"inputhide":case"condition":case"qualifier":case"useblank":case"value1":case"value2":case"format":break;default:Z=!1}break;case"mapinfo":case"schema":case"data":switch(s[3]){case"map":case"entry":case"range":case"xpath":case"field":case"xsdtype":case"filteron":case"aggregate":case"elementtype":case"attributetype":case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":case"row":break;default:Z=!1}break;case"smarttags":break;default:Z=!1}if(Z)break;if(s[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+s[3]+"|"+c.join("|");if("customdocumentproperties"===c[c.length-1][0]){if("/>"===s[0].slice(-2))break;"/"===s[1]?qc(A,W,N,i.slice(P,s.index)):(N=s,P=s.index+s[0].length);break}if(n.WTF)throw"Unrecognized tag: "+s[3]+"|"+c.join("|")}var J={};return n.bookSheets||n.bookProps||(J.Sheets=u),J.SheetNames=d,J.Workbook=V,J.SSF=xi(xn),J.Props=C,J.Custprops=A,J}function eh(e,t){switch(Yh(t=t||{}),t.type||"base64"){case"base64":return Jc(Jt(e),t);case"binary":case"buffer":case"file":return Jc(e,t);case"array":return Jc(an(e),t)}}function th(e){var t={},n=e.content;if(n.l=28,t.AnsiUserType=n.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=function(e){return Or(e,1)}(n),n.length-n.l<=4)return t;var i=n.read_shift(4);return 0==i||i>40?t:(n.l-=4,t.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4||1907505652!==(i=n.read_shift(4))?t:(t.UnicodeClipboardFormat=function(e){return Or(e,2)}(n),0==(i=n.read_shift(4))||i>40?t:(n.l-=4,void(t.Reserved2=n.read_shift(0,"lpwstr")))))}var nh=[60,1084,2066,2165,2175];function ih(e,t,n,i,s){var r=i,a=[],o=n.slice(n.l,n.l+r);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:case 133:break;default:s.enc.insitu(o)}a.push(o),n.l+=r;for(var l=Gs(n,n.l),c=uh[l],h=0;null!=c&&nh.indexOf(l)>-1;)r=Gs(n,n.l+2),h=n.l+4,2066==l?h+=4:2165!=l&&2175!=l||(h+=12),o=n.slice(h,n.l+4+r),a.push(o),n.l+=4+r,c=uh[l=Gs(n,n.l)];var u=ln(a);Qs(u,0);var d=0;u.lens=[];for(var f=0;f<a.length;++f)u.lens.push(d),d+=a[f].length;if(u.length<i)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+u.length+" < "+i;return t.f(u,u.length,s)}function sh(e,t,n){if("z"!==e.t&&e.XF){var i=0;try{i=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=xn[i])}catch(aC){if(t.WTF)throw aC}if(!t||!1!==t.cellText)try{"e"===e.t?e.w=e.w||Ur[e.v]:0===i||"General"==i?"n"===e.t?(0|e.v)===e.v?e.w=e.v.toString(10):e.w=Nn(e.v):e.w=kn(e.v):e.w=Qn(i,e.v,{date1904:!!n,dateNF:t&&t.dateNF})}catch(aC){if(t.WTF)throw aC}if(t.cellDates&&i&&"n"==e.t&&qn(xn[i]||String(i))){var s=_n(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function rh(e,t,n){return{v:e,ixfe:t,t:n}}function ah(e,t){var n={opts:{}},i={};var s,r,a,o,l,c,h,u,d=t.dense?[]:{},f={},p={},m=null,g=[],b="",v={},y="",x={},S=[],w=[],E=[],_={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},M=function(e){return e<8?zr[e]:e<64&&E[e-8]||zr[e]},C=function(e,t,n){if(!(F>1)&&!(n.sheetRows&&e.r>=n.sheetRows)){if(n.cellStyles&&t.XF&&t.XF.data&&function(e,t,n){var i,s=t.XF.data;s&&s.patternType&&n&&n.cellStyles&&(t.s={},t.s.patternType=s.patternType,(i=ko(M(s.icvFore)))&&(t.s.fgColor={rgb:i}),(i=ko(M(s.icvBack)))&&(t.s.bgColor={rgb:i}))}(0,t,n),delete t.ixfe,delete t.XF,s=e,y=dr(e),p&&p.s&&p.e||(p={s:{r:0,c:0},e:{r:0,c:0}}),e.r<p.s.r&&(p.s.r=e.r),e.c<p.s.c&&(p.s.c=e.c),e.r+1>p.e.r&&(p.e.r=e.r+1),e.c+1>p.e.c&&(p.e.c=e.c+1),n.cellFormula&&t.f)for(var i=0;i<S.length;++i)if(!(S[i][0].s.c>e.c||S[i][0].s.r>e.r)&&!(S[i][0].e.c<e.c||S[i][0].e.r<e.r)){t.F=pr(S[i][0]),S[i][0].s.c==e.c&&S[i][0].s.r==e.r||delete t.f,t.f&&(t.f=""+Vl(S[i][1],0,e,R,A));break}n.dense?(d[e.r]||(d[e.r]=[]),d[e.r][e.c]=t):d[y]=t}},A={enc:!1,sbcch:0,snames:[],sharedf:x,arrayf:S,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(A.password=t.password);var P=[],N=[],k=[],L=[],I=!1,R=[];R.SheetNames=A.snames,R.sharedf=A.sharedf,R.arrayf=A.arrayf,R.names=[],R.XTI=[];var O,D=0,F=0,B=0,j=[],V=[];A.codepage=1200,zt(1200);for(var G=!1;e.l<e.length-1;){var W=e.l,z=e.read_shift(2);if(0===z&&10===D)break;var U=e.l===e.length?0:e.read_shift(2),H=uh[z];if(H&&H.f){if(t.bookSheets&&133===D&&133!==z)break;if(D=z,2===H.r||12==H.r){var X=e.read_shift(2);if(U-=2,!A.enc&&X!==z&&((255&X)<<8|X>>8)!==z)throw new Error("rt mismatch: "+X+"!="+z);12==H.r&&(e.l+=10,U-=10)}var Y={};if(Y=10===z?H.f(e,U,A):ih(z,H,e,U,A),0==F&&-1===[9,521,1033,2057].indexOf(D))continue;switch(z){case 34:n.opts.Date1904=_.WBProps.date1904=Y;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(A.enc||(e.l=0),A.enc=Y,!t.password)throw new Error("File is password-protected");if(null==Y.valid)throw new Error("Encryption scheme unsupported");if(!Y.valid)throw new Error("Password is incorrect");break;case 92:A.lastuser=Y;break;case 66:var q=Number(Y);switch(q){case 21010:q=1200;break;case 32768:q=1e4;break;case 32769:q=1252}zt(A.codepage=q),G=!0;break;case 317:A.rrtabid=Y;break;case 25:A.winlocked=Y;break;case 439:n.opts.RefreshAll=Y;break;case 12:n.opts.CalcCount=Y;break;case 16:n.opts.CalcDelta=Y;break;case 17:n.opts.CalcIter=Y;break;case 13:n.opts.CalcMode=Y;break;case 14:n.opts.CalcPrecision=Y;break;case 95:n.opts.CalcSaveRecalc=Y;break;case 15:A.CalcRefMode=Y;break;case 2211:n.opts.FullCalc=Y;break;case 129:Y.fDialog&&(d["!type"]="dialog"),Y.fBelow||((d["!outline"]||(d["!outline"]={})).above=!0),Y.fRight||((d["!outline"]||(d["!outline"]={})).left=!0);break;case 224:w.push(Y);break;case 430:R.push([Y]),R[R.length-1].XTI=[];break;case 35:case 547:R[R.length-1].push(Y);break;case 24:case 536:O={Name:Y.Name,Ref:Vl(Y.rgce,0,null,R,A)},Y.itab>0&&(O.Sheet=Y.itab-1),R.names.push(O),R[0]||(R[0]=[],R[0].XTI=[]),R[R.length-1].push(Y),"_xlnm._FilterDatabase"==Y.Name&&Y.itab>0&&Y.rgce&&Y.rgce[0]&&Y.rgce[0][0]&&"PtgArea3d"==Y.rgce[0][0][0]&&(V[Y.itab-1]={ref:pr(Y.rgce[0][0][1][2])});break;case 22:A.ExternCount=Y;break;case 23:0==R.length&&(R[0]=[],R[0].XTI=[]),R[R.length-1].XTI=R[R.length-1].XTI.concat(Y),R.XTI=R.XTI.concat(Y);break;case 2196:if(A.biff<8)break;null!=O&&(O.Comment=Y[1]);break;case 18:d["!protect"]=Y;break;case 19:0!==Y&&A.WTF&&console.error("Password verifier: "+Y);break;case 133:f[Y.pos]=Y,A.snames.push(Y.name);break;case 10:if(--F)break;if(p.e){if(p.e.r>0&&p.e.c>0){if(p.e.r--,p.e.c--,d["!ref"]=pr(p),t.sheetRows&&t.sheetRows<=p.e.r){var K=p.e.r;p.e.r=t.sheetRows-1,d["!fullref"]=d["!ref"],d["!ref"]=pr(p),p.e.r=K}p.e.r++,p.e.c++}P.length>0&&(d["!merges"]=P),N.length>0&&(d["!objects"]=N),k.length>0&&(d["!cols"]=k),L.length>0&&(d["!rows"]=L),_.Sheets.push(T)}""===b?v=d:i[b]=d,d=t.dense?[]:{};break;case 9:case 521:case 1033:case 2057:if(8===A.biff&&(A.biff={9:2,521:3,1033:4}[z]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Y.BIFFVer]||8),A.biffguess=0==Y.BIFFVer,0==Y.BIFFVer&&4096==Y.dt&&(A.biff=5,G=!0,zt(A.codepage=28591)),8==A.biff&&0==Y.BIFFVer&&16==Y.dt&&(A.biff=2),F++)break;if(d=t.dense?[]:{},A.biff<8&&!G&&(G=!0,zt(A.codepage=t.codepage||1252)),A.biff<5||0==Y.BIFFVer&&4096==Y.dt){""===b&&(b="Sheet1"),p={s:{r:0,c:0},e:{r:0,c:0}};var $={pos:e.l-U,name:b};f[$.pos]=$,A.snames.push(b)}else b=(f[W]||{name:""}).name;32==Y.dt&&(d["!type"]="chart"),64==Y.dt&&(d["!type"]="macro"),P=[],N=[],A.arrayf=S=[],k=[],L=[],I=!1,T={Hidden:(f[W]||{hs:0}).hs,name:b};break;case 515:case 3:case 2:"chart"==d["!type"]&&(t.dense?(d[Y.r]||[])[Y.c]:d[dr({c:Y.c,r:Y.r})])&&++Y.c,c={ixfe:Y.ixfe,XF:w[Y.ixfe]||{},v:Y.val,t:"n"},B>0&&(c.z=j[c.ixfe>>8&63]),sh(c,t,n.opts.Date1904),C({c:Y.c,r:Y.r},c,t);break;case 5:case 517:c={ixfe:Y.ixfe,XF:w[Y.ixfe],v:Y.val,t:Y.t},B>0&&(c.z=j[c.ixfe>>8&63]),sh(c,t,n.opts.Date1904),C({c:Y.c,r:Y.r},c,t);break;case 638:c={ixfe:Y.ixfe,XF:w[Y.ixfe],v:Y.rknum,t:"n"},B>0&&(c.z=j[c.ixfe>>8&63]),sh(c,t,n.opts.Date1904),C({c:Y.c,r:Y.r},c,t);break;case 189:for(var Z=Y.c;Z<=Y.C;++Z){var Q=Y.rkrec[Z-Y.c][0];c={ixfe:Q,XF:w[Q],v:Y.rkrec[Z-Y.c][1],t:"n"},B>0&&(c.z=j[c.ixfe>>8&63]),sh(c,t,n.opts.Date1904),C({c:Z,r:Y.r},c,t)}break;case 6:case 518:case 1030:if("String"==Y.val){m=Y;break}if((c=rh(Y.val,Y.cell.ixfe,Y.tt)).XF=w[c.ixfe],t.cellFormula){var J=Y.formula;if(J&&J[0]&&J[0][0]&&"PtgExp"==J[0][0][0]){var ee=J[0][0][1][0],te=J[0][0][1][1],ne=dr({r:ee,c:te});x[ne]?c.f=""+Vl(Y.formula,0,Y.cell,R,A):c.F=((t.dense?(d[ee]||[])[te]:d[ne])||{}).F}else c.f=""+Vl(Y.formula,0,Y.cell,R,A)}B>0&&(c.z=j[c.ixfe>>8&63]),sh(c,t,n.opts.Date1904),C(Y.cell,c,t),m=Y;break;case 7:case 519:if(!m)throw new Error("String record expects Formula");m.val=Y,(c=rh(Y,m.cell.ixfe,"s")).XF=w[c.ixfe],t.cellFormula&&(c.f=""+Vl(m.formula,0,m.cell,R,A)),B>0&&(c.z=j[c.ixfe>>8&63]),sh(c,t,n.opts.Date1904),C(m.cell,c,t),m=null;break;case 33:case 545:S.push(Y);var ie=dr(Y[0].s);if(r=t.dense?(d[Y[0].s.r]||[])[Y[0].s.c]:d[ie],t.cellFormula&&r){if(!m)break;if(!ie||!r)break;r.f=""+Vl(Y[1],0,Y[0],R,A),r.F=pr(Y[0])}break;case 1212:if(!t.cellFormula)break;if(y){if(!m)break;x[dr(m.cell)]=Y[0],((r=t.dense?(d[m.cell.r]||[])[m.cell.c]:d[dr(m.cell)])||{}).f=""+Vl(Y[0],0,s,R,A)}break;case 253:c=rh(g[Y.isst].t,Y.ixfe,"s"),g[Y.isst].h&&(c.h=g[Y.isst].h),c.XF=w[c.ixfe],B>0&&(c.z=j[c.ixfe>>8&63]),sh(c,t,n.opts.Date1904),C({c:Y.c,r:Y.r},c,t);break;case 513:t.sheetStubs&&(c={ixfe:Y.ixfe,XF:w[Y.ixfe],t:"z"},B>0&&(c.z=j[c.ixfe>>8&63]),sh(c,t,n.opts.Date1904),C({c:Y.c,r:Y.r},c,t));break;case 190:if(t.sheetStubs)for(var se=Y.c;se<=Y.C;++se){var re=Y.ixfe[se-Y.c];c={ixfe:re,XF:w[re],t:"z"},B>0&&(c.z=j[c.ixfe>>8&63]),sh(c,t,n.opts.Date1904),C({c:se,r:Y.r},c,t)}break;case 214:case 516:case 4:(c=rh(Y.val,Y.ixfe,"s")).XF=w[c.ixfe],B>0&&(c.z=j[c.ixfe>>8&63]),sh(c,t,n.opts.Date1904),C({c:Y.c,r:Y.r},c,t);break;case 0:case 512:1===F&&(p=Y);break;case 252:g=Y;break;case 1054:if(4==A.biff){j[B++]=Y[1];for(var ae=0;ae<B+163&&xn[ae]!=Y[1];++ae);ae>=163&&Jn(Y[1],B+163)}else Jn(Y[1],Y[0]);break;case 30:j[B++]=Y;for(var oe=0;oe<B+163&&xn[oe]!=Y;++oe);oe>=163&&Jn(Y,B+163);break;case 229:P=P.concat(Y);break;case 93:N[Y.cmo[0]]=A.lastobj=Y;break;case 438:A.lastobj.TxO=Y;break;case 127:A.lastobj.ImData=Y;break;case 440:for(l=Y[0].s.r;l<=Y[0].e.r;++l)for(o=Y[0].s.c;o<=Y[0].e.c;++o)(r=t.dense?(d[l]||[])[o]:d[dr({c:o,r:l})])&&(r.l=Y[1]);break;case 2048:for(l=Y[0].s.r;l<=Y[0].e.r;++l)for(o=Y[0].s.c;o<=Y[0].e.c;++o)(r=t.dense?(d[l]||[])[o]:d[dr({c:o,r:l})])&&r.l&&(r.l.Tooltip=Y[1]);break;case 28:if(A.biff<=5&&A.biff>=2)break;r=t.dense?(d[Y[0].r]||[])[Y[0].c]:d[dr(Y[0])];var le=N[Y[2]];r||(t.dense?(d[Y[0].r]||(d[Y[0].r]=[]),r=d[Y[0].r][Y[0].c]={t:"z"}):r=d[dr(Y[0])]={t:"z"},p.e.r=Math.max(p.e.r,Y[0].r),p.s.r=Math.min(p.s.r,Y[0].r),p.e.c=Math.max(p.e.c,Y[0].c),p.s.c=Math.min(p.s.c,Y[0].c)),r.c||(r.c=[]),a={a:Y[1],t:le.TxO.t},r.c.push(a);break;case 2173:w[Y.ixfe],Y.ext.forEach((function(e){e[0]}));break;case 125:if(!A.cellStyles)break;for(;Y.e>=Y.s;)k[Y.e--]={width:Y.w/256,level:Y.level||0,hidden:!!(1&Y.flags)},I||(I=!0,Bo(Y.w/256)),jo(k[Y.e+1]);break;case 520:var ce={};null!=Y.level&&(L[Y.r]=ce,ce.level=Y.level),Y.hidden&&(L[Y.r]=ce,ce.hidden=!0),Y.hpt&&(L[Y.r]=ce,ce.hpt=Y.hpt,ce.hpx=Wo(Y.hpt));break;case 38:case 39:case 40:case 41:d["!margins"]||nc(d["!margins"]={}),d["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[z]]=Y;break;case 161:d["!margins"]||nc(d["!margins"]={}),d["!margins"].header=Y.header,d["!margins"].footer=Y.footer;break;case 574:Y.RTL&&(_.Views[0].RTL=!0);break;case 146:E=Y;break;case 2198:u=Y;break;case 140:h=Y;break;case 442:b?T.CodeName=Y||T.name:_.WBProps.CodeName=Y||"ThisWorkbook"}}else H||console.error("Missing Info for XLS Record 0x"+z.toString(16)),e.l+=U}return n.SheetNames=ai(f).sort((function(e,t){return Number(e)-Number(t)})).map((function(e){return f[e].name})),t.bookSheets||(n.Sheets=i),!n.SheetNames.length&&v["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=v)):n.Preamble=v,n.Sheets&&V.forEach((function(e,t){n.Sheets[n.SheetNames[t]]["!autofilter"]=e})),n.Strings=g,n.SSF=xi(xn),A.enc&&(n.Encryption=A.enc),u&&(n.Themes=u),n.Metadata={},void 0!==h&&(n.Metadata.Country=h),R.names.length>0&&(_.Names=R.names),n.Workbook=_,n}var oh="e0859ff2f94f6810ab9108002b27b3d9",lh="02d5cdd59c2e1b10939708002b2cf9ae";function ch(e,t){var n,i,s,r;if(t||(t={}),Yh(t),Ut(),t.codepage&&Wt(t.codepage),e.FullPaths){if(si.find(e,"/encryption"))throw new Error("File is password-protected");n=si.find(e,"!CompObj"),i=si.find(e,"/Workbook")||si.find(e,"/Book")}else{switch(t.type){case"base64":e=rn(Jt(e));break;case"binary":e=rn(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e))}Qs(e,0),i={content:e}}if(n&&th(n),t.bookProps&&!t.bookSheets)s={};else{var a=en?"buffer":"array";if(i&&i.content)s=ah(i.content,t);else if((r=si.find(e,"PerfectOffice_MAIN"))&&r.content)s=ao.to_workbook(r.content,(t.type=a,t));else{if(!(r=si.find(e,"NativeContent_MAIN"))||!r.content)throw(r=si.find(e,"MN0"))&&r.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");s=ao.to_workbook(r.content,(t.type=a,t))}t.bookVBA&&e.FullPaths&&si.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=function(e){var t=si.utils.cfb_new({root:"R"});return e.FullPaths.forEach((function(n,i){if("/"!==n.slice(-1)&&n.match(/_VBA_PROJECT_CUR/)){var s=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");si.utils.cfb_add(t,s,e.FileIndex[i].content)}})),si.write(t)}(e))}var o={};return e.FullPaths&&function(e,t,n){var i=si.find(e,"/!DocumentSummaryInformation");if(i&&i.size>0)try{var s=ma(i,Br,lh);for(var r in s)t[r]=s[r]}catch(aC){if(n.WTF)throw aC}var a=si.find(e,"/!SummaryInformation");if(a&&a.size>0)try{var o=ma(a,jr,oh);for(var l in o)null==t[l]&&(t[l]=o[l])}catch(aC){if(n.WTF)throw aC}t.HeadingPairs&&t.TitlesOfParts&&(ea(t.HeadingPairs,t.TitlesOfParts,t,n),delete t.HeadingPairs,delete t.TitlesOfParts)}(e,o,t),s.Props=s.Custprops=o,t.bookFiles&&(s.cfb=e),s}var hh={0:{f:function(e,t){var n={},i=e.l+t;n.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var r=e.read_shift(1);return e.l=i,7&r&&(n.level=7&r),16&r&&(n.hidden=!0),32&r&&(n.hpt=s/20),n}},1:{f:function(e){return[Tr(e)]}},2:{f:function(e){return[Tr(e),kr(e),"n"]}},3:{f:function(e){return[Tr(e),e.read_shift(1),"e"]}},4:{f:function(e){return[Tr(e),e.read_shift(1),"b"]}},5:{f:function(e){return[Tr(e),Rr(e),"n"]}},6:{f:function(e){return[Tr(e),Sr(e),"str"]}},7:{f:function(e){return[Tr(e),e.read_shift(4),"s"]}},8:{f:function(e,t,n){var i=e.l+t,s=Tr(e);s.r=n["!row"];var r=[s,Sr(e),"str"];if(n.cellFormula){e.l+=2;var a=Xl(e,i-e.l,n);r[3]=Vl(a,0,s,n.supbooks,n)}else e.l=i;return r}},9:{f:function(e,t,n){var i=e.l+t,s=Tr(e);s.r=n["!row"];var r=[s,Rr(e),"n"];if(n.cellFormula){e.l+=2;var a=Xl(e,i-e.l,n);r[3]=Vl(a,0,s,n.supbooks,n)}else e.l=i;return r}},10:{f:function(e,t,n){var i=e.l+t,s=Tr(e);s.r=n["!row"];var r=[s,e.read_shift(1),"b"];if(n.cellFormula){e.l+=2;var a=Xl(e,i-e.l,n);r[3]=Vl(a,0,s,n.supbooks,n)}else e.l=i;return r}},11:{f:function(e,t,n){var i=e.l+t,s=Tr(e);s.r=n["!row"];var r=[s,e.read_shift(1),"e"];if(n.cellFormula){e.l+=2;var a=Xl(e,i-e.l,n);r[3]=Vl(a,0,s,n.supbooks,n)}else e.l=i;return r}},12:{f:function(e){return[Mr(e)]}},13:{f:function(e){return[Mr(e),kr(e),"n"]}},14:{f:function(e){return[Mr(e),e.read_shift(1),"e"]}},15:{f:function(e){return[Mr(e),e.read_shift(1),"b"]}},16:{f:yc},17:{f:function(e){return[Mr(e),Sr(e),"str"]}},18:{f:function(e){return[Mr(e),e.read_shift(4),"s"]}},19:{f:Er},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:function(e,t,n){var i=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),r=Pr(e),a=Yl(e,0,n),o=Ar(e);e.l=i;var l={Name:r,Ptg:a};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}},40:{},42:{},43:{f:function(e,t,n){var i={};i.sz=e.read_shift(2)/20;var s=function(e){var t=e.read_shift(1);return e.l++,{fBold:1&t,fItalic:2&t,fUnderline:4&t,fStrikeout:8&t,fOutline:16&t,fShadow:32&t,fCondense:64&t,fExtend:128&t}}(e);switch(s.fItalic&&(i.italic=1),s.fCondense&&(i.condense=1),s.fExtend&&(i.extend=1),s.fShadow&&(i.shadow=1),s.fOutline&&(i.outline=1),s.fStrikeout&&(i.strike=1),700===e.read_shift(2)&&(i.bold=1),e.read_shift(2)){case 1:i.vertAlign="superscript";break;case 2:i.vertAlign="subscript"}var r=e.read_shift(1);0!=r&&(i.underline=r);var a=e.read_shift(1);a>0&&(i.family=a);var o=e.read_shift(1);switch(o>0&&(i.charset=o),e.l++,i.color=function(e){var t={},n=e.read_shift(1)>>>1,i=e.read_shift(1),s=e.read_shift(2,"i"),r=e.read_shift(1),a=e.read_shift(1),o=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=i;var l=zr[i];l&&(t.rgb=ko(l));break;case 2:t.rgb=ko([r,a,o]);break;case 3:t.theme=i}return 0!=s&&(t.tint=s>0?s/32767:s/32768),t}(e),e.read_shift(1)){case 1:i.scheme="major";break;case 2:i.scheme="minor"}return i.name=Sr(e),i}},44:{f:function(e,t){return[e.read_shift(2),Sr(e)]}},45:{f:Yo},46:{f:qo},47:{f:function(e,t){var n=e.l+t,i=e.read_shift(2),s=e.read_shift(2);return e.l=n,{ixfe:i,numFmtId:s}}},48:{},49:{f:function(e){return e.read_shift(4,"i")}},50:{},51:{f:function(e){for(var t=[],n=e.read_shift(4);n-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:$a},62:{f:function(e){return[Tr(e),Er(e),"is"]}},63:{f:function(e){var t={};t.i=e.read_shift(4);var n={};n.r=e.read_shift(4),n.c=e.read_shift(4),t.r=dr(n);var i=e.read_shift(1);return 2&i&&(t.l="1"),8&i&&(t.a="1"),t}},64:{f:function(){}},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Js,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:function(e){var t=e.read_shift(2);return e.l+=28,{RTL:32&t}}},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:function(e,t){var n={},i=e[e.l];return++e.l,n.above=!(64&i),n.left=!(128&i),e.l+=18,n.name=Cr(e,t-19),n}},148:{f:vc,p:16},151:{f:function(){}},152:{},153:{f:function(e,t){var n={},i=e.read_shift(4);n.defaultThemeVersion=e.read_shift(4);var s=t>8?Sr(e):"";return s.length>0&&(n.CodeName=s),n.autoCompressPictures=!!(65536&i),n.backupFile=!!(64&i),n.checkCompatibility=!!(4096&i),n.date1904=!!(1&i),n.filterPrivacy=!!(8&i),n.hidePivotFieldList=!!(1024&i),n.promptedSolutions=!!(16&i),n.publishItems=!!(2048&i),n.refreshAllConnections=!!(262144&i),n.saveExternalLinkValues=!!(128&i),n.showBorderUnselectedTables=!!(4&i),n.showInkAnnotation=!!(32&i),n.showObjects=["all","placeholders","none"][i>>13&3],n.showPivotChartFilter=!!(32768&i),n.updateLinks=["userSet","never","always"][i>>8&3],n}},154:{},155:{},156:{f:function(e,t){var n={};return n.Hidden=e.read_shift(4),n.iTabID=e.read_shift(4),n.strRelID=Nr(e,t-8),n.name=Sr(e),n}},157:{},158:{},159:{T:1,f:function(e){return[e.read_shift(4),e.read_shift(4)]}},160:{T:-1},161:{T:1,f:Ir},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:xc},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:function(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Sr(e)}}},336:{T:-1},337:{f:function(e){return e.l+=4,0!=e.read_shift(4)},T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Nr},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Ya},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:function(e,t,n){var i=e.l+t,s=Lr(e),r=e.read_shift(1),a=[s];if(a[2]=r,n.cellFormula){var o=Hl(e,i-e.l,n);a[1]=o}else e.l=i;return a}},427:{f:function(e,t,n){var i=e.l+t,s=[Ir(e,16)];if(n.cellFormula){var r=ql(e,i-e.l,n);s[1]=r,e.l=i}else e.l=i;return s}},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:function(e){var t={};return Sc.forEach((function(n){t[n]=Rr(e)})),t}},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:function(){}},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:function(e,t){var n=e.l+t,i=Ir(e,16),s=Ar(e),r=Sr(e),a=Sr(e),o=Sr(e);e.l=n;var l={rfx:i,relId:s,loc:r,display:o};return a&&(l.Tooltip=a),l}},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Nr},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:ll},633:{T:1},634:{T:-1},635:{T:1,f:function(e){var t={};t.iauthor=e.read_shift(4);var n=Ir(e,16);return t.rfx=n.s,t.ref=dr(n.s),e.l+=16,t}},636:{T:-1},637:{f:_r},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:function(e,t){return e.l+=10,{name:Sr(e)}}},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:function(){}},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},uh={6:{f:zl},10:{f:ga},12:{f:va},13:{f:va},14:{f:ba},15:{f:ba},16:{f:Rr},17:{f:ba},18:{f:ba},19:{f:va},20:{f:za},21:{f:za},23:{f:Ya},24:{f:Xa},25:{f:ba},26:{},27:{},28:{f:function(e,t,n){return function(e,t,n){if(!(n.biff<8)){var i=e.read_shift(2),s=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),o=_a(e,0,n);return n.biff<8&&e.read_shift(1),[{r:i,c:s},o,a,r]}}(e,0,n)}},29:{},34:{f:ba},35:{f:Ua},38:{f:Rr},39:{f:Rr},40:{f:Rr},41:{f:Rr},42:{f:ba},43:{f:ba},47:{f:function(e,t,n){var i={Type:n.biff>=8?e.read_shift(2):0};return i.Type?Po(e,t-2,i):function(e,t,n,i){var s={key:va(e),verificationBytes:va(e)};n.password&&(s.verifier=Mo(n.password)),i.valid=s.verificationBytes===s.verifier,i.valid&&(i.insitu=Ao(n.password))}(e,n.biff,n,i),i}},49:{f:function(e,t,n){var i={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10}return i.name=xa(e,0,n),i}},51:{f:va},60:{},61:{f:function(e){return{Pos:[e.read_shift(2),e.read_shift(2)],Dim:[e.read_shift(2),e.read_shift(2)],Flags:e.read_shift(2),CurTab:e.read_shift(2),FirstTab:e.read_shift(2),Selected:e.read_shift(2),TabRatio:e.read_shift(2)}}},64:{f:ba},65:{f:function(){}},66:{f:va},77:{},80:{},81:{},82:{},85:{f:va},89:{},90:{},91:{},92:{f:function(e,t,n){if(n.enc)return e.l+=t,"";var i=e.l,s=_a(e,0,n);return e.read_shift(t+i-e.l),s}},93:{f:function(e,t,n){if(n&&n.biff<8)return function(e,t,n){e.l+=4;var i=e.read_shift(2),s=e.read_shift(2),r=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var a=[];return a.push((Ka[i]||Js)(e,t,n)),{cmo:[s,i,r],ft:a}}(e,t,n);var i=Oa(e),s=function(e,t){for(var n=e.l+t,i=[];e.l<n;){var s=e.read_shift(2);e.l-=2;try{i.push(Fa[s](e,n-e.l))}catch(aC){return e.l=n,i}}return e.l!=n&&(e.l=n),i}(e,t-22,i[1]);return{cmo:i,ft:s}}},94:{},95:{f:ba},96:{},97:{},99:{f:ba},125:{f:$a},128:{f:function(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(0!==t[0]&&t[0]--,0!==t[1]&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}},129:{f:function(e,t,n){var i=n&&8==n.biff||2==t?e.read_shift(2):(e.l+=t,0);return{fDialog:16&i,fBelow:64&i,fRight:128&i}}},130:{f:va},131:{f:ba},132:{f:ba},133:{f:function(e,t,n){var i=e.read_shift(4),s=3&e.read_shift(1),r=e.read_shift(1);switch(r){case 0:r="Worksheet";break;case 1:r="Macrosheet";break;case 2:r="Chartsheet";break;case 6:r="VBAModule"}var a=xa(e,0,n);return 0===a.length&&(a="Sheet1"),{pos:i,hs:s,dt:r,name:a}}},134:{},140:{f:function(e){var t,n=[0,0];return t=e.read_shift(2),n[0]=Vr[t]||t,t=e.read_shift(2),n[1]=Vr[t]||t,n}},141:{f:va},144:{},146:{f:function(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(Aa(e));return n}},151:{},152:{},153:{},154:{},155:{},156:{f:va},157:{},158:{},160:{f:Qa},161:{f:function(e,t){var n={};return t<32||(e.l+=16,n.header=Rr(e),n.footer=Rr(e),e.l+=2),n}},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:function(e,t){for(var n=e.l+t-2,i=e.read_shift(2),s=e.read_shift(2),r=[];e.l<n;)r.push(ka(e));if(e.l!==n)throw new Error("MulRK read error");var a=e.read_shift(2);if(r.length!=a-s+1)throw new Error("MulRK length mismatch");return{r:i,c:s,C:a,rkrec:r}}},190:{f:function(e,t){for(var n=e.l+t-2,i=e.read_shift(2),s=e.read_shift(2),r=[];e.l<n;)r.push(e.read_shift(2));if(e.l!==n)throw new Error("MulBlank read error");var a=e.read_shift(2);if(r.length!=a-s+1)throw new Error("MulBlank length mismatch");return{r:i,c:s,C:a,ixfe:r}}},193:{f:ga},197:{},198:{},199:{},200:{},201:{},202:{f:ba},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:va},220:{},221:{f:ba},222:{},224:{f:function(e,t,n){var i={};return i.ifnt=e.read_shift(2),i.numFmtId=e.read_shift(2),i.flags=e.read_shift(2),i.fStyle=i.flags>>2&1,i.data=function(e,t,n,i){var s={},r=e.read_shift(4),a=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(2);return s.patternType=Gr[o>>26],i.cellStyles?(s.alc=7&r,s.fWrap=r>>3&1,s.alcV=r>>4&7,s.fJustLast=r>>7&1,s.trot=r>>8&255,s.cIndent=r>>16&15,s.fShrinkToFit=r>>20&1,s.iReadOrder=r>>22&2,s.fAtrNum=r>>26&1,s.fAtrFnt=r>>27&1,s.fAtrAlc=r>>28&1,s.fAtrBdr=r>>29&1,s.fAtrPat=r>>30&1,s.fAtrProt=r>>31&1,s.dgLeft=15&a,s.dgRight=a>>4&15,s.dgTop=a>>8&15,s.dgBottom=a>>12&15,s.icvLeft=a>>16&127,s.icvRight=a>>23&127,s.grbitDiag=a>>30&3,s.icvTop=127&o,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=127&l,s.icvBack=l>>7&127,s.fsxButton=l>>14&1,s):s}(e,0,i.fStyle,n),i}},225:{f:function(e,t){return 0===t||e.read_shift(2),1200}},226:{f:ga},227:{},229:{f:function(e,t){for(var n=[],i=e.read_shift(2);i--;)n.push(La(e));return n}},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:function(e,t){for(var n=e.l+t,i=e.read_shift(4),s=e.read_shift(4),r=[],a=0;a!=s&&e.l<n;++a)r.push(Sa(e));return r.Count=i,r.Unique=s,r}},253:{f:function(e){var t=Pa(e);return t.isst=e.read_shift(4),t}},255:{f:function(e,t){var n={};return n.dsst=e.read_shift(2),e.l+=t-2,n}},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:ya},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ba},353:{f:ga},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:function(e,t,n){var i=e.l+t,s=e.read_shift(2),r=e.read_shift(2);if(n.sbcch=r,1025==r||14849==r)return[r,s];if(r<1||r>255)throw new Error("Unexpected SupBook type: "+r);for(var a=wa(e,r),o=[];i>e.l;)o.push(Ea(e));return[r,s,a,o]}},431:{f:ba},432:{},433:{},434:{},437:{},438:{f:function(e,t,n){var i=e.l,s="";try{e.l+=4;var r=(n.lastobj||{cmo:[0,0]}).cmo[1];-1==[0,5,7,11,12,14].indexOf(r)?e.l+=6:function(e){var t=e.read_shift(1);e.l++;var n=e.read_shift(2);return e.l+=2,[t,n]}(e);var a=e.read_shift(2);e.read_shift(2),va(e);var o=e.read_shift(2);e.l+=o;for(var l=1;l<e.lens.length-1;++l){if(e.l-i!=e.lens[l])throw new Error("TxO: bad continue record");var c=e[e.l];if((s+=wa(e,e.lens[l+1]-e.lens[l]-1)).length>=(c?a:2*a))break}if(s.length!==a&&s.length!==2*a)throw new Error("cchText: "+a+" != "+s.length);return e.l=i+t,{t:s}}catch(aC){return e.l=i+t,{t:s}}}},439:{f:ba},440:{f:function(e,t){var n=La(e);e.l+=16;var i=function(e,t){var n=e.l+t,i=e.read_shift(4);if(2!==i)throw new Error("Unrecognized streamVersion: "+i);var s=e.read_shift(2);e.l+=2;var r,a,o,l,c,h,u="";16&s&&(r=Ma(e,e.l)),128&s&&(a=Ma(e,e.l)),257===(257&s)&&(o=Ma(e,e.l)),1===(257&s)&&(l=Ta(e,e.l)),8&s&&(u=Ma(e,e.l)),32&s&&(c=e.read_shift(16)),64&s&&(h=ra(e)),e.l=n;var d=a||o||l||"";d&&u&&(d+="#"+u),d||(d="#"+u),2&s&&"/"==d.charAt(0)&&"/"!=d.charAt(1)&&(d="file://"+d);var f={Target:d};return c&&(f.guid=c),h&&(f.time=h),r&&(f.Tooltip=r),f}(e,t-24);return[n,i]}},441:{},442:{f:Ea},443:{},444:{f:va},445:{},446:{},448:{f:ga},449:{f:function(e){return e.read_shift(2),e.read_shift(4)},r:2},450:{f:ga},512:{f:Ga},513:{f:Za},515:{f:function(e,t,n){n.biffguess&&2==n.biff&&(n.biff=5);var i=Pa(e),s=Rr(e);return i.val=s,i}},516:{f:function(e,t,n){n.biffguess&&2==n.biff&&(n.biff=5),e.l;var i=Pa(e);2==n.biff&&e.l++;var s=Ea(e,e.l,n);return i.val=s,i}},517:{f:Wa},519:{f:Ja},520:{f:function(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var n=e.read_shift(2);e.l+=4;var i=e.read_shift(1);return e.l+=3,7&i&&(t.level=7&i),32&i&&(t.hidden=!0),64&i&&(t.hpt=n/20),t}},523:{},545:{f:qa},549:{f:ja},566:{},574:{f:function(e,t,n){return n&&n.biff>=2&&n.biff<5?{}:{RTL:64&e.read_shift(2)}}},638:{f:function(e){var t=e.read_shift(2),n=e.read_shift(2),i=ka(e);return{r:t,c:n,ixfe:i[0],rknum:i[1]}}},659:{},1048:{},1054:{f:function(e,t,n){return[e.read_shift(2),_a(e,0,n)]}},1084:{},1212:{f:function(e,t,n){var i=Ia(e);e.l++;var s=e.read_shift(1);return[Wl(e,t-=8,n),s,i]}},2048:{f:function(e,t){e.read_shift(2);var n=La(e),i=e.read_shift((t-10)/2,"dbcs-cont");return[n,i=i.replace(cn,"")]}},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Ba},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:ga},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:function(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t},r:12},2173:{f:function(e,t){e.l,e.l+=2;var n=e.read_shift(2);e.l+=2;for(var i=e.read_shift(2),s=[];i-- >0;)s.push(al(e,e.l));return{ixfe:n,ext:s}},r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ba,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:function(e,t,n){if(!(n.biff<8)){var i=e.read_shift(2),s=e.read_shift(2);return[wa(e,i,n),wa(e,s,n)]}e.l+=t},r:12},2197:{},2198:{f:function(e,t,n){var i=e.l+t;if(124226!==e.read_shift(4))if(n.cellStyles){var s,r=e.slice(e.l);e.l=i;try{s=Oi(r,{type:"array"})}catch(aC){return}var a=ki(s,"theme/theme/theme1.xml",!0);if(a)return il(a,n)}else e.l=i},r:12},2199:{},2200:{},2201:{},2202:{f:function(e){return[0!==e.read_shift(4),0!==e.read_shift(4),e.read_shift(4)]},r:12},2203:{f:ga},2204:{},2205:{},2206:{},2207:{},2211:{f:function(e){var t=function(e){var t=e.read_shift(2),n=e.read_shift(2);return e.l+=8,{type:t,flags:n}}(e);if(2211!=t.type)throw new Error("Invalid Future Record "+t.type);return 0!==e.read_shift(4)}},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:va},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:function(e,t,n){var i={area:!1};if(5!=n.biff)return e.l+=t,i;var s=e.read_shift(1);return e.l+=3,16&s&&(i.area=!0),i}},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:function(e){for(var t=e.read_shift(2),n=[];t-- >0;)n.push(Aa(e));return n}},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:Ga},1:{},2:{f:function(e){var t=Pa(e);++e.l;var n=e.read_shift(2);return t.t="n",t.val=n,t}},3:{f:function(e){var t=Pa(e);++e.l;var n=Rr(e);return t.t="n",t.val=n,t}},4:{f:function(e,t,n){n.biffguess&&5==n.biff&&(n.biff=2);var i=Pa(e);++e.l;var s=_a(e,0,n);return i.t="str",i.val=s,i}},5:{f:Wa},7:{f:function(e){var t=e.read_shift(1);return 0===t?(e.l++,""):e.read_shift(t,"sbcs-cont")}},8:{},9:{f:Ba},11:{},22:{f:va},30:{f:Va},31:{},32:{},33:{f:qa},36:{},37:{f:ja},50:{f:function(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}},62:{},52:{},67:{},68:{f:va},69:{},86:{},126:{},127:{f:function(e){var t=e.read_shift(2),n=e.read_shift(2),i=e.read_shift(4),s={fmt:t,env:n,len:i,data:e.slice(e.l,e.l+i)};return e.l+=i,s}},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:function(e,t,n){var i=e.l+t,s=Pa(e),r=e.read_shift(2),a=wa(e,r,n);return e.l=i,s.t="str",s.val=a,s}},223:{},234:{},354:{},421:{},518:{f:zl},521:{f:Ba},536:{f:Xa},547:{f:Ua},561:{},579:{},1030:{f:zl},1033:{f:Ba},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function dh(e,t,n,i){var s=t;if(!isNaN(s)){var r=i||(n||[]).length||0,a=e.next(4);a.write_shift(2,s),a.write_shift(2,r),r>0&&Bs(n)&&e.push(n)}}function fh(e,t){var n=t||{};var i=n.dense?[]:{},s=(e=e.replace(/<!--.*?-->/g,"")).match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var r=e.match(/<\/table/i),a=s.index,o=r&&r.index||e.length,l=Ti(e.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),c=-1,h=0,u=0,d=0,f={s:{r:1e7,c:1e7},e:{r:0,c:0}},p=[];for(a=0;a<l.length;++a){var m=l[a].trim(),g=m.slice(0,3).toLowerCase();if("<tr"!=g){if("<td"==g||"<th"==g){var b=m.split(/<\/t[dh]>/i);for(o=0;o<b.length;++o){var v=b[o].trim();if(v.match(/<t[dh]/i)){for(var y=v,x=0;"<"==y.charAt(0)&&(x=y.indexOf(">"))>-1;)y=y.slice(x+1);for(var S=0;S<p.length;++S){var w=p[S];w.s.c==h&&w.s.r<c&&c<=w.e.r&&(h=w.e.c+1,S=-1)}var E=zi(v.slice(0,v.indexOf(">")));d=E.colspan?+E.colspan:1,((u=+E.rowspan)>1||d>1)&&p.push({s:{r:c,c:h},e:{r:c+(u||1)-1,c:h+d-1}});var _=E.t||E["data-t"]||"";if(y.length)if(y=as(y),f.s.r>c&&(f.s.r=c),f.e.r<c&&(f.e.r=c),f.s.c>h&&(f.s.c=h),f.e.c<h&&(f.e.c=h),y.length){var T={t:"s",v:y};n.raw||!y.trim().length||"s"==_||("TRUE"===y?T={t:"b",v:!0}:"FALSE"===y?T={t:"b",v:!1}:isNaN(wi(y))?isNaN(_i(y).getDate())||(T={t:"d",v:vi(y)},n.cellDates||(T={t:"n",v:ci(T.v)}),T.z=n.dateNF||xn[14]):T={t:"n",v:wi(y)}),n.dense?(i[c]||(i[c]=[]),i[c][h]=T):i[dr({r:c,c:h})]=T,h+=d}else h+=d;else h+=d}}}}else{if(++c,n.sheetRows&&n.sheetRows<=c){--c;break}h=0}}return i["!ref"]=pr(f),p.length&&(i["!merges"]=p),i}function ph(e,t,n,i){for(var s=e["!merges"]||[],r=[],a=t.s.c;a<=t.e.c;++a){for(var o=0,l=0,c=0;c<s.length;++c)if(!(s[c].s.r>n||s[c].s.c>a)&&!(s[c].e.r<n||s[c].e.c<a)){if(s[c].s.r<n||s[c].s.c<a){o=-1;break}o=s[c].e.r-s[c].s.r+1,l=s[c].e.c-s[c].s.c+1;break}if(!(o<0)){var h=dr({r:n,c:a}),u=i.dense?(e[n]||[])[a]:e[h],d=u&&null!=u.v&&(u.h||$i(u.w||(br(u),u.w)||""))||"",f={};o>1&&(f.rowspan=o),l>1&&(f.colspan=l),i.editable?d='<span contenteditable="true">'+d+"</span>":u&&(f["data-t"]=u&&u.t||"z",null!=u.v&&(f["data-v"]=u.v),null!=u.z&&(f["data-z"]=u.z),u.l&&"#"!=(u.l.Target||"#").charAt(0)&&(d='<a href="'+u.l.Target+'">'+d+"</a>")),f.id=(i.id||"sjs")+"-"+h,r.push(fs("td",d,f))}}return"<tr>"+r.join("")+"</tr>"}var mh='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',gh="</body></html>";function bh(e,t,n){return[].join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function vh(e,t){var n=t||{},i=null!=n.header?n.header:mh,s=null!=n.footer?n.footer:gh,r=[i],a=fr(e["!ref"]);n.dense=Array.isArray(e),r.push(bh(0,0,n));for(var o=a.s.r;o<=a.e.r;++o)r.push(ph(e,a,o,n));return r.push("</table>"+s),r.join("")}function yh(e,t,n){var i=n||{};var s=0,r=0;if(null!=i.origin)if("number"==typeof i.origin)s=i.origin;else{var a="string"==typeof i.origin?ur(i.origin):i.origin;s=a.r,r=a.c}var o=t.getElementsByTagName("tr"),l=Math.min(i.sheetRows||1e7,o.length),c={s:{r:0,c:0},e:{r:s,c:r}};if(e["!ref"]){var h=fr(e["!ref"]);c.s.r=Math.min(c.s.r,h.s.r),c.s.c=Math.min(c.s.c,h.s.c),c.e.r=Math.max(c.e.r,h.e.r),c.e.c=Math.max(c.e.c,h.e.c),-1==s&&(c.e.r=s=h.e.r+1)}var u=[],d=0,f=e["!rows"]||(e["!rows"]=[]),p=0,m=0,g=0,b=0,v=0,y=0;for(e["!cols"]||(e["!cols"]=[]);p<o.length&&m<l;++p){var x=o[p];if(Sh(x)){if(i.display)continue;f[m]={hidden:!0}}var S=x.children;for(g=b=0;g<S.length;++g){var w=S[g];if(!i.display||!Sh(w)){var E=w.hasAttribute("data-v")?w.getAttribute("data-v"):w.hasAttribute("v")?w.getAttribute("v"):as(w.innerHTML),_=w.getAttribute("data-z")||w.getAttribute("z");for(d=0;d<u.length;++d){var T=u[d];T.s.c==b+r&&T.s.r<m+s&&m+s<=T.e.r&&(b=T.e.c+1-r,d=-1)}y=+w.getAttribute("colspan")||1,((v=+w.getAttribute("rowspan")||1)>1||y>1)&&u.push({s:{r:m+s,c:b+r},e:{r:m+s+(v||1)-1,c:b+r+(y||1)-1}});var M={t:"s",v:E},C=w.getAttribute("data-t")||w.getAttribute("t")||"";null!=E&&(0==E.length?M.t=C||"z":i.raw||0==E.trim().length||"s"==C||("TRUE"===E?M={t:"b",v:!0}:"FALSE"===E?M={t:"b",v:!1}:isNaN(wi(E))?isNaN(_i(E).getDate())||(M={t:"d",v:vi(E)},i.cellDates||(M={t:"n",v:ci(M.v)}),M.z=i.dateNF||xn[14]):M={t:"n",v:wi(E)})),void 0===M.z&&null!=_&&(M.z=_);var A="",P=w.getElementsByTagName("A");if(P&&P.length)for(var N=0;N<P.length&&(!P[N].hasAttribute("href")||"#"==(A=P[N].getAttribute("href")).charAt(0));++N);A&&"#"!=A.charAt(0)&&(M.l={Target:A}),i.dense?(e[m+s]||(e[m+s]=[]),e[m+s][b+r]=M):e[dr({c:b+r,r:m+s})]=M,c.e.c<b+r&&(c.e.c=b+r),b+=y}}++m}return u.length&&(e["!merges"]=(e["!merges"]||[]).concat(u)),c.e.r=Math.max(c.e.r,m-1+s),e["!ref"]=pr(c),m>=l&&(e["!fullref"]=pr((c.e.r=o.length-p+m-1+s,c))),e}function xh(e,t){return yh((t||{}).dense?[]:{},e,t)}function Sh(e){var t="",n=function(e){return e.ownerDocument.defaultView&&"function"===typeof e.ownerDocument.defaultView.getComputedStyle?e.ownerDocument.defaultView.getComputedStyle:"function"===typeof getComputedStyle?getComputedStyle:null}(e);return n&&(t=n(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),"none"===t}function wh(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,(function(e,t){return Array(parseInt(t,10)+1).join(" ")})).replace(/<text:tab[^>]*\/>/g,"\t").replace(/<text:line-break\/>/g,"\n");return[Yi(t.replace(/<[^>]*>/g,""))]}var Eh={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function _h(e,t){var n=t||{};var i,s,r,a,o,l,c=ps(e),h=[],u={name:""},d="",f=0,p={},m=[],g=n.dense?[]:{},b={value:""},v="",y=0,x=[],S=-1,w=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,T={},M=[],C={},A=[],P=1,N=1,k=[],L={Names:[]},I={},R=["",""],O=[],D={},F="",B=0,j=!1,V=!1,G=0;for(ms.lastIndex=0,c=c.replace(/<!--([\s\S]*?)-->/gm,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");o=ms.exec(c);)switch(o[3]=o[3].replace(/_.*$/,"")){case"table":case"\u5de5\u4f5c\u8868":"/"===o[1]?(E.e.c>=E.s.c&&E.e.r>=E.s.r?g["!ref"]=pr(E):g["!ref"]="A1:A1",n.sheetRows>0&&n.sheetRows<=E.e.r&&(g["!fullref"]=g["!ref"],E.e.r=n.sheetRows-1,g["!ref"]=pr(E)),M.length&&(g["!merges"]=M),A.length&&(g["!rows"]=A),r.name=r["\u540d\u79f0"]||r.name,"undefined"!==typeof JSON&&JSON.stringify(r),m.push(r.name),p[r.name]=g,V=!1):"/"!==o[0].charAt(o[0].length-2)&&(r=zi(o[0],!1),S=w=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,g=n.dense?[]:{},M=[],A=[],V=!0);break;case"table-row-group":"/"===o[1]?--_:++_;break;case"table-row":case"\u884c":if("/"===o[1]){S+=P,P=1;break}if((a=zi(o[0],!1))["\u884c\u53f7"]?S=a["\u884c\u53f7"]-1:-1==S&&(S=0),(P=+a["number-rows-repeated"]||1)<10)for(G=0;G<P;++G)_>0&&(A[S+G]={level:_});w=-1;break;case"covered-table-cell":"/"!==o[1]&&++w,n.sheetStubs&&(n.dense?(g[S]||(g[S]=[]),g[S][w]={t:"z"}):g[dr({r:S,c:w})]={t:"z"}),v="",x=[];break;case"table-cell":case"\u6570\u636e":if("/"===o[0].charAt(o[0].length-2))++w,b=zi(o[0],!1),N=parseInt(b["number-columns-repeated"]||"1",10),l={t:"z",v:null},b.formula&&0!=n.cellFormula&&(l.f=Ql(Yi(b.formula))),"string"==(b["\u6570\u636e\u7c7b\u578b"]||b["value-type"])&&(l.t="s",l.v=Yi(b["string-value"]||""),n.dense?(g[S]||(g[S]=[]),g[S][w]=l):g[dr({r:S,c:w})]=l),w+=N-1;else if("/"!==o[1]){v="",y=0,x=[],N=1;var W=P?S+P-1:S;if(++w>E.e.c&&(E.e.c=w),w<E.s.c&&(E.s.c=w),S<E.s.r&&(E.s.r=S),W>E.e.r&&(E.e.r=W),O=[],D={},l={t:(b=zi(o[0],!1))["\u6570\u636e\u7c7b\u578b"]||b["value-type"],v:null},n.cellFormula)if(b.formula&&(b.formula=Yi(b.formula)),b["number-matrix-columns-spanned"]&&b["number-matrix-rows-spanned"]&&(C={s:{r:S,c:w},e:{r:S+(parseInt(b["number-matrix-rows-spanned"],10)||0)-1,c:w+(parseInt(b["number-matrix-columns-spanned"],10)||0)-1}},l.F=pr(C),k.push([C,l.F])),b.formula)l.f=Ql(b.formula);else for(G=0;G<k.length;++G)S>=k[G][0].s.r&&S<=k[G][0].e.r&&w>=k[G][0].s.c&&w<=k[G][0].e.c&&(l.F=k[G][1]);switch((b["number-columns-spanned"]||b["number-rows-spanned"])&&(C={s:{r:S,c:w},e:{r:S+(parseInt(b["number-rows-spanned"],10)||0)-1,c:w+(parseInt(b["number-columns-spanned"],10)||0)-1}},M.push(C)),b["number-columns-repeated"]&&(N=parseInt(b["number-columns-repeated"],10)),l.t){case"boolean":l.t="b",l.v=Qi(b["boolean-value"]);break;case"float":case"percentage":case"currency":l.t="n",l.v=parseFloat(b.value);break;case"date":l.t="d",l.v=vi(b["date-value"]),n.cellDates||(l.t="n",l.v=ci(l.v)),l.z="m/d/yy";break;case"time":l.t="n",l.v=pi(b["time-value"])/86400,n.cellDates&&(l.t="d",l.v=fi(l.v)),l.z="HH:MM:SS";break;case"number":l.t="n",l.v=parseFloat(b["\u6570\u636e\u6570\u503c"]);break;default:if("string"!==l.t&&"text"!==l.t&&l.t)throw new Error("Unsupported value type "+l.t);l.t="s",null!=b["string-value"]&&(v=Yi(b["string-value"]),x=[])}}else{if(j=!1,"s"===l.t&&(l.v=v||"",x.length&&(l.R=x),j=0==y),I.Target&&(l.l=I),O.length>0&&(l.c=O,O=[]),v&&!1!==n.cellText&&(l.w=v),j&&(l.t="z",delete l.v),(!j||n.sheetStubs)&&!(n.sheetRows&&n.sheetRows<=S))for(var z=0;z<P;++z){if(N=parseInt(b["number-columns-repeated"]||"1",10),n.dense)for(g[S+z]||(g[S+z]=[]),g[S+z][w]=0==z?l:xi(l);--N>0;)g[S+z][w+N]=xi(l);else for(g[dr({r:S+z,c:w})]=l;--N>0;)g[dr({r:S+z,c:w+N})]=xi(l);E.e.c<=w&&(E.e.c=w)}w+=(N=parseInt(b["number-columns-repeated"]||"1",10))-1,N=0,l={},v="",x=[]}I={};break;case"document":case"document-content":case"\u7535\u5b50\u8868\u683c\u6587\u6863":case"spreadsheet":case"\u4e3b\u4f53":case"scripts":case"styles":case"font-face-decls":case"master-styles":if("/"===o[1]){if((i=h.pop())[0]!==o[3])throw"Bad state: "+i}else"/"!==o[0].charAt(o[0].length-2)&&h.push([o[3],!0]);break;case"annotation":if("/"===o[1]){if((i=h.pop())[0]!==o[3])throw"Bad state: "+i;D.t=v,x.length&&(D.R=x),D.a=F,O.push(D)}else"/"!==o[0].charAt(o[0].length-2)&&h.push([o[3],!1]);F="",B=0,v="",y=0,x=[];break;case"creator":"/"===o[1]?F=c.slice(B,o.index):B=o.index+o[0].length;break;case"meta":case"\u5143\u6570\u636e":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if("/"===o[1]){if((i=h.pop())[0]!==o[3])throw"Bad state: "+i}else"/"!==o[0].charAt(o[0].length-2)&&h.push([o[3],!1]);v="",y=0,x=[];break;case"scientific-number":case"currency-symbol":case"currency-style":case"script":case"libraries":case"automatic-styles":case"default-style":case"page-layout":case"style":case"map":case"font-face":case"paragraph-properties":case"table-properties":case"table-column-properties":case"table-row-properties":case"table-cell-properties":case"fraction":case"boolean-style":case"boolean":case"text-style":case"text-content":case"text-properties":case"embedded-text":case"body":case"\u7535\u5b50\u8868\u683c":case"forms":case"table-column":case"table-header-rows":case"table-rows":case"table-column-group":case"table-header-columns":case"table-columns":case"null-date":case"graphic-properties":case"calculation-settings":case"named-expressions":case"label-range":case"label-ranges":case"named-expression":case"sort":case"sort-by":case"sort-groups":case"tab":case"line-break":case"span":case"s":case"date":case"object":case"title":case"\u6807\u9898":case"desc":case"binary-data":case"table-source":case"scenario":case"iteration":case"content-validations":case"content-validation":case"help-message":case"error-message":case"database-ranges":case"filter":case"filter-and":case"filter-or":case"filter-condition":case"list-level-style-bullet":case"list-level-style-number":case"list-level-properties":case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":case"event-listener":case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":case"config-item":case"page-number":case"page-count":case"time":case"cell-range-source":case"detective":case"operation":case"highlighted-range":case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":case"rect":case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":case"properties":case"property":case"table-protection":case"data-pilot-grand-total":case"office-document-common-attrs":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if("/"===o[1]){if(T[u.name]=d,(i=h.pop())[0]!==o[3])throw"Bad state: "+i}else"/"!==o[0].charAt(o[0].length-2)&&(d="",u=zi(o[0],!1),h.push([o[3],!0]));break;case"number":case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(h[h.length-1][0]){case"time-style":case"date-style":s=zi(o[0],!1),d+=Eh[o[3]]["long"===s.style?1:0]}break;case"text":if("/>"===o[0].slice(-2))break;if("/"===o[1])switch(h[h.length-1][0]){case"number-style":case"date-style":case"time-style":d+=c.slice(f,o.index)}else f=o.index+o[0].length;break;case"named-range":R=Jl((s=zi(o[0],!1))["cell-range-address"]);var U={Name:s.name,Ref:R[0]+"!"+R[1]};V&&(U.Sheet=m.length),L.Names.push(U);break;case"p":case"\u6587\u672c\u4e32":if(["master-styles"].indexOf(h[h.length-1][0])>-1)break;if("/"!==o[1]||b&&b["string-value"])zi(o[0],!1),y=o.index+o[0].length;else{var H=wh(c.slice(y,o.index));v=(v.length>0?v+"\n":"")+H[0]}break;case"database-range":if("/"===o[1])break;try{p[(R=Jl(zi(o[0])["target-range-address"]))[0]]["!autofilter"]={ref:R[1]}}catch(aC){}break;case"a":if("/"!==o[1]){if(!(I=zi(o[0],!1)).href)break;I.Target=Yi(I.href),delete I.href,"#"==I.Target.charAt(0)&&I.Target.indexOf(".")>-1?(R=Jl(I.Target.slice(1)),I.Target="#"+R[0]+"!"+R[1]):I.Target.match(/^\.\.[\\\/]/)&&(I.Target=I.Target.slice(3))}break;default:switch(o[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"\u8868:":case"\u5b57:":break;default:if(n.WTF)throw new Error(o)}}var X={Sheets:p,SheetNames:m,Workbook:L};return n.bookSheets&&delete X.Sheets,X}function Th(e,t){t=t||{},Ai(e,"META-INF/manifest.xml")&&function(e,t){for(var n,i,s=ps(e);n=ms.exec(s);)switch(n[3]){case"manifest":break;case"file-entry":if("/"==(i=zi(n[0],!1)).path&&"application/vnd.oasis.opendocument.spreadsheet"!==i.type)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}(Ni(e,"META-INF/manifest.xml"),t);var n=ki(e,"content.xml");if(!n)throw new Error("Missing content.xml in ODS / UOF file");var i=_h(is(n),t);return Ai(e,"meta.xml")&&(i.Props=Qr(Ni(e,"meta.xml"))),i}function Mh(e,t){return _h(e,t)}function Ch(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Ah(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):is(an(e))}function Ph(e){var t=e.reduce((function(e,t){return e+t.length}),0),n=new Uint8Array(t),i=0;return e.forEach((function(e){n.set(e,i),i+=e.length})),n}function Nh(e){return 16843009*((e=(858993459&(e-=e>>1&1431655765))+(e>>2&858993459))+(e>>4)&252645135)>>>24}function kh(e,t){var n=t?t[0]:0,i=127&e[n];e:if(e[n++]>=128){if(i|=(127&e[n])<<7,e[n++]<128)break e;if(i|=(127&e[n])<<14,e[n++]<128)break e;if(i|=(127&e[n])<<21,e[n++]<128)break e;if(i+=(127&e[n])*Math.pow(2,28),++n,e[n++]<128)break e;if(i+=(127&e[n])*Math.pow(2,35),++n,e[n++]<128)break e;if(i+=(127&e[n])*Math.pow(2,42),++n,e[n++]<128)break e}return t&&(t[0]=n),i}function Lh(e){var t=0,n=127&e[t];e:if(e[t++]>=128){if(n|=(127&e[t])<<7,e[t++]<128)break e;if(n|=(127&e[t])<<14,e[t++]<128)break e;if(n|=(127&e[t])<<21,e[t++]<128)break e;n|=(127&e[t])<<28}return n}function Ih(e){for(var t=[],n=[0];n[0]<e.length;){var i,s=n[0],r=kh(e,n),a=7&r,o=0;if(0==(r=Math.floor(r/8)))break;switch(a){case 0:for(var l=n[0];e[n[0]++]>=128;);i=e.slice(l,n[0]);break;case 5:o=4,i=e.slice(n[0],n[0]+o),n[0]+=o;break;case 1:o=8,i=e.slice(n[0],n[0]+o),n[0]+=o;break;case 2:o=kh(e,n),i=e.slice(n[0],n[0]+o),n[0]+=o;break;default:throw new Error("PB Type ".concat(a," for Field ").concat(r," at offset ").concat(s))}var c={data:i,type:a};null==t[r]?t[r]=[c]:t[r].push(c)}return t}function Rh(e,t){return(null==e?void 0:e.map((function(e){return t(e.data)})))||[]}function Oh(e){for(var t,n=[],i=[0];i[0]<e.length;){var s=kh(e,i),r=Ih(e.slice(i[0],i[0]+s));i[0]+=s;var a={id:Lh(r[1][0].data),messages:[]};r[2].forEach((function(t){var n=Ih(t.data),s=Lh(n[3][0].data);a.messages.push({meta:n,data:e.slice(i[0],i[0]+s)}),i[0]+=s})),(null==(t=r[3])?void 0:t[0])&&(a.merge=Lh(r[3][0].data)>>>0>0),n.push(a)}return n}function Dh(e,t){if(0!=e)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var n=[0],i=kh(t,n),s=[];n[0]<t.length;){var r=3&t[n[0]];if(0!=r){var a=0,o=0;if(1==r?(o=4+(t[n[0]]>>2&7),a=(224&t[n[0]++])<<3,a|=t[n[0]++]):(o=1+(t[n[0]++]>>2),2==r?(a=t[n[0]]|t[n[0]+1]<<8,n[0]+=2):(a=(t[n[0]]|t[n[0]+1]<<8|t[n[0]+2]<<16|t[n[0]+3]<<24)>>>0,n[0]+=4)),s=[Ph(s)],0==a)throw new Error("Invalid offset 0");if(a>s[0].length)throw new Error("Invalid offset beyond length");if(o>=a)for(s.push(s[0].slice(-a)),o-=a;o>=s[s.length-1].length;)s.push(s[s.length-1]),o-=s[s.length-1].length;s.push(s[0].slice(-a,-a+o))}else{var l=t[n[0]++]>>2;if(l<60)++l;else{var c=l-59;l=t[n[0]],c>1&&(l|=t[n[0]+1]<<8),c>2&&(l|=t[n[0]+2]<<16),c>3&&(l|=t[n[0]+3]<<24),l>>>=0,l++,n[0]+=c}s.push(t.slice(n[0],n[0]+l)),n[0]+=l}}var h=Ph(s);if(h.length!=i)throw new Error("Unexpected length: ".concat(h.length," != ").concat(i));return h}function Fh(e){for(var t=[],n=0;n<e.length;){var i=e[n++],s=e[n]|e[n+1]<<8|e[n+2]<<16;n+=3,t.push(Dh(i,e.slice(n,n+s))),n+=s}if(n!==e.length)throw new Error("data is not a valid framed stream!");return Ph(t)}function Bh(e,t,n){var i,s=Ch(e),r=s.getUint32(8,!0),a=12,o=-1,l=-1,c=NaN,h=NaN,u=new Date(2001,0,1);switch(1&r&&(c=function(e,t){for(var n=(127&e[t+15])<<7|e[t+14]>>1,i=1&e[t+14],s=t+13;s>=t;--s)i=256*i+e[s];return(128&e[t+15]?-i:i)*Math.pow(10,n-6176)}(e,a),a+=16),2&r&&(h=s.getFloat64(a,!0),a+=8),4&r&&(u.setTime(u.getTime()+1e3*s.getFloat64(a,!0)),a+=8),8&r&&(l=s.getUint32(a,!0),a+=4),16&r&&(o=s.getUint32(a,!0),a+=4),e[1]){case 0:break;case 2:case 10:i={t:"n",v:c};break;case 3:i={t:"s",v:t[l]};break;case 5:i={t:"d",v:u};break;case 6:i={t:"b",v:h>0};break;case 7:i={t:"n",v:h/86400};break;case 8:i={t:"e",v:0};break;case 9:if(!(o>-1))throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&r," : ").concat(e.slice(0,4)));i={t:"s",v:n[o]};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(31&r," : ").concat(e.slice(0,4)))}return i}function jh(e,t,n){switch(e[0]){case 0:case 1:case 2:case 3:return function(e,t,n,i){var s,r=Ch(e),a=r.getUint32(4,!0),o=(i>1?12:8)+4*Nh(a&(i>1?3470:398)),l=-1,c=-1,h=NaN,u=new Date(2001,0,1);switch(512&a&&(l=r.getUint32(o,!0),o+=4),o+=4*Nh(a&(i>1?12288:4096)),16&a&&(c=r.getUint32(o,!0),o+=4),32&a&&(h=r.getFloat64(o,!0),o+=8),64&a&&(u.setTime(u.getTime()+1e3*r.getFloat64(o,!0)),o+=8),e[2]){case 0:break;case 2:s={t:"n",v:h};break;case 3:s={t:"s",v:t[c]};break;case 5:s={t:"d",v:u};break;case 6:s={t:"b",v:h>0};break;case 7:s={t:"n",v:h/86400};break;case 8:s={t:"e",v:0};break;case 9:if(l>-1)s={t:"s",v:n[l]};else if(c>-1)s={t:"s",v:t[c]};else{if(isNaN(h))throw new Error("Unsupported cell type ".concat(e.slice(0,4)));s={t:"n",v:h}}break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return s}(e,t,n,e[0]);case 5:return Bh(e,t,n);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Vh(e){return kh(Ih(e)[1][0].data)}function Gh(e,t){var n=Ih(t.data),i=Lh(n[1][0].data),s=n[3],r=[];return(s||[]).forEach((function(t){var n=Ih(t.data),s=Lh(n[1][0].data)>>>0;switch(i){case 1:r[s]=Ah(n[3][0].data);break;case 8:var a=Ih(e[Vh(n[9][0].data)][0].data),o=e[Vh(a[1][0].data)][0],l=Lh(o.meta[1][0].data);if(2001!=l)throw new Error("2000 unexpected reference to ".concat(l));var c=Ih(o.data);r[s]=c[3].map((function(e){return Ah(e.data)})).join("")}})),r}function Wh(e,t){var n,i=Ih(t.data),s=(null==(n=null==i?void 0:i[7])?void 0:n[0])?Lh(i[7][0].data)>>>0>0?1:0:-1,r=Rh(i[5],(function(e){return function(e,t){var n,i,s,r,a,o,l,c,h,u,d,f,p,m,g,b,v=Ih(e),y=Lh(v[1][0].data)>>>0,x=Lh(v[2][0].data)>>>0,S=(null==(i=null==(n=v[8])?void 0:n[0])?void 0:i.data)&&Lh(v[8][0].data)>0||!1;if((null==(r=null==(s=v[7])?void 0:s[0])?void 0:r.data)&&0!=t)g=null==(o=null==(a=v[7])?void 0:a[0])?void 0:o.data,b=null==(c=null==(l=v[6])?void 0:l[0])?void 0:c.data;else{if(!(null==(u=null==(h=v[4])?void 0:h[0])?void 0:u.data)||1==t)throw"NUMBERS Tile missing ".concat(t," cell storage");g=null==(f=null==(d=v[4])?void 0:d[0])?void 0:f.data,b=null==(m=null==(p=v[3])?void 0:p[0])?void 0:m.data}for(var w=S?4:1,E=Ch(g),_=[],T=0;T<g.length/2;++T){var M=E.getUint16(2*T,!0);M<65535&&_.push([T,M])}if(_.length!=x)throw"Expected ".concat(x," cells, found ").concat(_.length);var C=[];for(T=0;T<_.length-1;++T)C[_[T][0]]=b.subarray(_[T][1]*w,_[T+1][1]*w);return _.length>=1&&(C[_[_.length-1][0]]=b.subarray(_[_.length-1][1]*w)),{R:y,cells:C}}(e,s)}));return{nrows:Lh(i[4][0].data)>>>0,data:r.reduce((function(e,t){return e[t.R]||(e[t.R]=[]),t.cells.forEach((function(n,i){if(e[t.R][i])throw new Error("Duplicate cell r=".concat(t.R," c=").concat(i));e[t.R][i]=n})),e}),[])}}function zh(e,t){var n={"!ref":"A1"},i=e[Vh(Ih(t.data)[2][0].data)],s=Lh(i[0].meta[1][0].data);if(6001!=s)throw new Error("6000 unexpected reference to ".concat(s));return function(e,t,n){var i,s=Ih(t.data),r={s:{r:0,c:0},e:{r:0,c:0}};if(r.e.r=(Lh(s[6][0].data)>>>0)-1,r.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(r.e.c=(Lh(s[7][0].data)>>>0)-1,r.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));n["!ref"]=pr(r);var a=Ih(s[4][0].data),o=Gh(e,e[Vh(a[4][0].data)][0]),l=(null==(i=a[17])?void 0:i[0])?Gh(e,e[Vh(a[17][0].data)][0]):[],c=Ih(a[3][0].data),h=0;c[1].forEach((function(t){var i=Ih(t.data),s=e[Vh(i[2][0].data)][0],r=Lh(s.meta[1][0].data);if(6002!=r)throw new Error("6001 unexpected reference to ".concat(r));var a=Wh(0,s);a.data.forEach((function(e,t){e.forEach((function(e,i){var s=dr({r:h+t,c:i}),r=jh(e,o,l);r&&(n[s]=r)}))})),h+=a.nrows}))}(e,i[0],n),n}function Uh(e,t){var n={SheetNames:[],Sheets:{}};if(Rh(Ih(t.data)[1],Vh).forEach((function(t){e[t].forEach((function(t){if(2==Lh(t.meta[1][0].data)){var i=function(e,t){var n,i=Ih(t.data),s={name:(null==(n=i[1])?void 0:n[0])?Ah(i[1][0].data):"",sheets:[]};return Rh(i[2],Vh).forEach((function(t){e[t].forEach((function(t){6e3==Lh(t.meta[1][0].data)&&s.sheets.push(zh(e,t))}))})),s}(e,t);i.sheets.forEach((function(e,t){uu(n,e,0==t?i.name:i.name+"_"+t,!0)}))}}))})),0==n.SheetNames.length)throw new Error("Empty NUMBERS file");return n}function Hh(e){var t,n,i,s,r={},a=[];if(e.FullPaths.forEach((function(e){if(e.match(/\.iwpv2/))throw new Error("Unsupported password protection")})),e.FileIndex.forEach((function(e){if(e.name.match(/\.iwa$/)){var t,n;try{t=Fh(e.content)}catch(aC){return console.log("?? "+e.content.length+" "+(aC.message||aC))}try{n=Oh(t)}catch(aC){return console.log("## "+(aC.message||aC))}n.forEach((function(e){r[e.id]=e.messages,a.push(e.id)}))}})),!a.length)throw new Error("File has no messages");var o=(null==(s=null==(i=null==(n=null==(t=null==r?void 0:r[1])?void 0:t[0])?void 0:n.meta)?void 0:i[1])?void 0:s[0].data)&&1==Lh(r[1][0].meta[1][0].data)&&r[1][0];if(o||a.forEach((function(e){r[e].forEach((function(e){if(1==Lh(e.meta[1][0].data)>>>0){if(o)throw new Error("Document has multiple roots");o=e}}))})),!o)throw new Error("Cannot find Document root");return Uh(r,o)}function Xh(e){return function(t){for(var n=0;n!=e.length;++n){var i=e[n];void 0===t[i[0]]&&(t[i[0]]=i[1]),"n"===i[2]&&(t[i[0]]=Number(t[i[0]]))}}}function Yh(e){Xh([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function qh(e,t,n,i,s,r,a,o,l,c,h,u){try{r[i]=Kr(ki(e,n,!0),t);var d,f=Ni(e,t);switch(o){case"sheet":d=Oc(f,t,s,l,r[i],c,h,u);break;case"chart":if(!(d=Dc(f,t,s,l,r[i],c))||!d["!drawel"])break;var p=Di(d["!drawel"].Target,t),m=qr(p),g=function(e,t){if(!e)return"??";var n=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][n].Target}(ki(e,p,!0),Kr(ki(e,m,!0),p)),b=Di(g,p),v=qr(b);d=wc(ki(e,b,!0),0,0,Kr(ki(e,v,!0),b),0,d);break;case"macro":x=t,r[i],x.slice(-4),d={"!type":"macro"};break;case"dialog":d=function(e,t){return t.slice(-4),{"!type":"dialog"}}(0,t,0,0,r[i]);break;default:throw new Error("Unrecognized sheet type "+o)}a[i]=d;var y=[];r&&r[i]&&ai(r[i]).forEach((function(n){var s="";if(r[i][n].Type==Yr.CMNT){s=Di(r[i][n].Target,t);var a=jc(Ni(e,s,!0),s,l);if(!a||!a.length)return;ol(d,a,!1)}r[i][n].Type==Yr.TCMNT&&(s=Di(r[i][n].Target,t),y=y.concat(function(e,t){var n=[],i=!1,s={},r=0;return e.replace(Vi,(function(a,o){var l=zi(a);switch(Ui(l[0])){case"<?xml":case"<ThreadedComments":case"</ThreadedComments>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<threadedComment":s={author:l.personId,guid:l.id,ref:l.ref,T:1};break;case"</threadedComment>":null!=s.t&&n.push(s);break;case"<text>":case"<text":r=o+a.length;break;case"</text>":s.t=e.slice(r,o).replace(/\r\n/g,"\n").replace(/\r/g,"\n");break;case"<mentions":case"<mentions>":case"<ext":i=!0;break;case"</mentions>":case"</ext>":i=!1;break;default:if(!i&&t.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return a})),n}(Ni(e,s,!0),l)))})),y&&y.length&&ol(d,y,!0,l.people||[])}catch(aC){if(l.WTF)throw aC}var x}function Kh(e){return"/"==e.charAt(0)?e.slice(1):e}function $h(e,t){if(ei(),Yh(t=t||{}),Ai(e,"META-INF/manifest.xml"))return Th(e,t);if(Ai(e,"objectdata.xml"))return Th(e,t);if(Ai(e,"Index/Document.iwa")){if("undefined"==typeof Uint8Array)throw new Error("NUMBERS file parsing requires Uint8Array support");if(e.FileIndex)return Hh(e);var n=si.utils.cfb_new();return Ii(e).forEach((function(t){Ri(n,t,Li(e,t))})),Hh(n)}if(!Ai(e,"[Content_Types].xml")){if(Ai(e,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(Ai(e,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");throw new Error("Unsupported ZIP file")}var i,s,r=Ii(e),a=function(e){var t={workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""};if(!e||!e.match)return t;var n={};if((e.match(Vi)||[]).forEach((function(e){var i=zi(e);switch(i[0].replace(Gi,"<")){case"<?xml":break;case"<Types":t.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[i.Extension]=i.ContentType;break;case"<Override":void 0!==t[Xr[i.ContentType]]&&t[Xr[i.ContentType]].push(i.PartName)}})),t.xmlns!==gs)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=n,delete t.calcchains,t}(ki(e,"[Content_Types].xml")),o=!1;if(0===a.workbooks.length&&Ni(e,s="xl/workbook.xml",!0)&&a.workbooks.push(s),0===a.workbooks.length){if(!Ni(e,s="xl/workbook.bin",!0))throw new Error("Could not find workbook");a.workbooks.push(s),o=!0}"bin"==a.workbooks[0].slice(-3)&&(o=!0);var l={},c={};if(!t.bookSheets&&!t.bookProps){if(ec=[],a.sst)try{ec=Bc(Ni(e,Kh(a.sst)),a.sst,t)}catch(aC){if(t.WTF)throw aC}t.cellStyles&&a.themes.length&&(l=function(e,t,n){return il(e,n)}(ki(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(c=Fc(Ni(e,Kh(a.style)),a.style,l,t))}a.links.map((function(n){try{Kr(ki(e,qr(Kh(n))),n);return Gc(Ni(e,Kh(n)),0,n,t)}catch(aC){}}));var h=Rc(Ni(e,Kh(a.workbooks[0])),a.workbooks[0],t),u={},d="";a.coreprops.length&&((d=Ni(e,Kh(a.coreprops[0]),!0))&&(u=Qr(d)),0!==a.extprops.length&&(d=Ni(e,Kh(a.extprops[0]),!0))&&function(e,t,n){var i={};t||(t={}),e=is(e),Jr.forEach((function(n){var s=(e.match(rs(n[0]))||[])[1];switch(n[2]){case"string":s&&(t[n[1]]=Yi(s));break;case"bool":t[n[1]]="true"===s;break;case"raw":var r=e.match(new RegExp("<"+n[0]+"[^>]*>([\\s\\S]*?)</"+n[0]+">"));r&&r.length>0&&(i[n[1]]=r[1])}})),i.HeadingPairs&&i.TitlesOfParts&&ea(i.HeadingPairs,i.TitlesOfParts,t,n)}(d,u,t));var f={};t.bookSheets&&!t.bookProps||0!==a.custprops.length&&(d=ki(e,Kh(a.custprops[0]),!0))&&(f=function(e,t){var n={},i="",s=e.match(ta);if(s)for(var r=0;r!=s.length;++r){var a=s[r],o=zi(a);switch(o[0]){case"<?xml":case"<Properties":break;case"<property":i=Yi(o.name);break;case"</property>":i=null;break;default:if(0===a.indexOf("<vt:")){var l=a.split(">"),c=l[0].slice(4),h=l[1];switch(c){case"lpstr":case"bstr":case"lpwstr":case"cy":case"error":n[i]=Yi(h);break;case"bool":n[i]=Qi(h);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[i]=parseInt(h,10);break;case"r4":case"r8":case"decimal":n[i]=parseFloat(h);break;case"filetime":case"date":n[i]=vi(h);break;default:if("/"==c.slice(-1))break;t.WTF&&"undefined"!==typeof console&&console.warn("Unexpected",a,c,l)}}else if("</"===a.slice(0,2));else if(t.WTF)throw new Error(a)}}return n}(d,t));var p={};if((t.bookSheets||t.bookProps)&&(h.Sheets?i=h.Sheets.map((function(e){return e.name})):u.Worksheets&&u.SheetNames.length>0&&(i=u.SheetNames),t.bookProps&&(p.Props=u,p.Custprops=f),t.bookSheets&&"undefined"!==typeof i&&(p.SheetNames=i),t.bookSheets?p.SheetNames:t.bookProps))return p;i={};var m={};t.bookDeps&&a.calcchain&&(m=Vc(Ni(e,Kh(a.calcchain)),a.calcchain));var g,b,v=0,y={},x=h.Sheets;u.Worksheets=x.length,u.SheetNames=[];for(var S=0;S!=x.length;++S)u.SheetNames[S]=x[S].name;var w=o?"bin":"xml",E=a.workbooks[0].lastIndexOf("/"),_=(a.workbooks[0].slice(0,E+1)+"_rels/"+a.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Ai(e,_)||(_="xl/_rels/workbook."+w+".rels");var T=Kr(ki(e,_,!0),_.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=Wc(Ni(e,Kh(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=function(e,t){var n=[],i=!1;return e.replace(Vi,(function(e){var s=zi(e);switch(Ui(s[0])){case"<?xml":case"<personList":case"</personList>":case"</person>":case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<person":n.push({name:s.displayname,id:s.id});break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&t.WTF)throw new Error("unrecognized "+s[0]+" in threaded comments")}return e})),n}(Ni(e,Kh(a.people[0])),t)),T&&(T=function(e,t){if(!e)return 0;try{e=t.map((function(t){return t.id||(t.id=t.strRelID),[t.name,e["!id"][t.id].Target,(n=e["!id"][t.id].Type,Yr.WS.indexOf(n)>-1?"sheet":Yr.CS&&n==Yr.CS?"chart":Yr.DS&&n==Yr.DS?"dialog":Yr.MS&&n==Yr.MS?"macro":n&&n.length?n:"sheet")];var n}))}catch(aC){return null}return e&&0!==e.length?e:null}(T,h.Sheets));var M=Ni(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(v=0;v!=u.Worksheets;++v){var C="sheet";if(T&&T[v]?(g="xl/"+T[v][1].replace(/[\/]?xl\//,""),Ai(e,g)||(g=T[v][1]),Ai(e,g)||(g=_.replace(/_rels\/.*$/,"")+T[v][1]),C=T[v][2]):g=(g="xl/worksheets/sheet"+(v+1-M)+"."+w).replace(/sheet0\./,"sheet."),b=g.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&null!=t.sheets)switch(typeof t.sheets){case"number":if(v!=t.sheets)continue e;break;case"string":if(u.SheetNames[v].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var A=!1,P=0;P!=t.sheets.length;++P)"number"==typeof t.sheets[P]&&t.sheets[P]==v&&(A=1),"string"==typeof t.sheets[P]&&t.sheets[P].toLowerCase()==u.SheetNames[v].toLowerCase()&&(A=1);if(!A)continue e}}qh(e,g,b,u.SheetNames[v],v,y,i,C,t,h,l,c)}return p={Directory:a,Workbook:h,Props:u,Custprops:f,Deps:m,Sheets:i,SheetNames:u.SheetNames,Strings:ec,Styles:c,Themes:l,SSF:xi(xn)},t&&t.bookFiles&&(e.files?(p.keys=r,p.files=e.files):(p.keys=[],p.files={},e.FullPaths.forEach((function(t,n){t=t.replace(/^Root Entry[\/]/,""),p.keys.push(t),p.files[t]=e.FileIndex[n]})))),t&&t.bookVBA&&(a.vba.length>0?p.vbaraw=Ni(e,Kh(a.vba[0]),!0):a.defaults&&"application/vnd.ms-office.vbaProject"===a.defaults.bin&&(p.vbaraw=Ni(e,"xl/vbaProject.bin",!0))),p}function Zh(e,t){var n=t||{},i="Workbook",s=si.find(e,i);try{if(i="/!DataSpaces/Version",!(s=si.find(e,i))||!s.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(function(e){var t={};t.id=e.read_shift(0,"lpp4"),t.R=vo(e,4),t.U=vo(e,4),t.W=vo(e,4)}(s.content),i="/!DataSpaces/DataSpaceMap",!(s=si.find(e,i))||!s.content)throw new Error("ECMA-376 Encrypted file missing "+i);var r=function(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(yo(e));return t}(s.content);if(1!==r.length||1!==r[0].comps.length||0!==r[0].comps[0].t||"StrongEncryptionDataSpace"!==r[0].name||"EncryptedPackage"!==r[0].comps[0].v)throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",!(s=si.find(e,i))||!s.content)throw new Error("ECMA-376 Encrypted file missing "+i);var a=function(e){var t=[];e.l+=4;for(var n=e.read_shift(4);n-- >0;)t.push(e.read_shift(0,"lpp4"));return t}(s.content);if(1!=a.length||"StrongEncryptionTransform"!=a[0])throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",!(s=si.find(e,i))||!s.content)throw new Error("ECMA-376 Encrypted file missing "+i);xo(s.content)}catch(aC){}if(i="/EncryptionInfo",!(s=si.find(e,i))||!s.content)throw new Error("ECMA-376 Encrypted file missing "+i);var o=function(e){var t=vo(e);switch(t.Minor){case 2:return[t.Minor,Eo(e)];case 3:return[t.Minor,_o()];case 4:return[t.Minor,To(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}(s.content);if(i="/EncryptedPackage",!(s=si.find(e,i))||!s.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(4==o[0]&&"undefined"!==typeof decrypt_agile)return decrypt_agile(o[1],s.content,n.password||"",n);if(2==o[0]&&"undefined"!==typeof decrypt_std76)return decrypt_std76(o[1],s.content,n.password||"",n);throw new Error("File is password-protected")}function Qh(e,t){var n="";switch((t||{}).type||"base64"){case"buffer":case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":n=Jt(e.slice(0,12));break;case"binary":n=e;break;default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function Jh(e,t){var n=0;e:for(;n<e.length;)switch(e.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return eh(e.slice(n),t);default:break e}return ro.to_workbook(e,t)}function eu(e,t,n,i){return i?(n.type="string",ro.to_workbook(e,n)):ro.to_workbook(t,n)}function tu(e,t){Ut();var n=t||{};if("undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer)return tu(new Uint8Array(e),((n=xi(n)).type="array",n));"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&!n.type&&(n.type="undefined"!==typeof Deno?"buffer":"array");var i,s=e,r=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),tc={},n.dateNF&&(tc.dateNF=n.dateNF),n.type||(n.type=en&&Buffer.isBuffer(e)?"buffer":"base64"),"file"==n.type&&(n.type=en?"buffer":"binary",s=function(e){if("undefined"!==typeof ri)return ri.readFileSync(e);if("undefined"!==typeof Deno)return Deno.readFileSync(e);if("undefined"!==typeof $&&"undefined"!==typeof File&&"undefined"!==typeof Folder)try{var t=File(e);t.open("r"),t.encoding="binary";var n=t.read();return t.close(),n}catch(aC){if(!aC.message||!aC.message.match(/onstruct/))throw aC}throw new Error("Cannot access file "+e)}(e),"undefined"===typeof Uint8Array||en||(n.type="array")),"string"==n.type&&(r=!0,n.type="binary",n.codepage=65001,s=function(e){return e.match(/[^\x00-\x7F]/)?ss(e):e}(e)),"array"==n.type&&"undefined"!==typeof Uint8Array&&e instanceof Uint8Array&&"undefined"!==typeof ArrayBuffer){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return(n=xi(n)).type="array",tu(on(s),n)}switch((i=Qh(s,n))[0]){case 208:if(207===i[1]&&17===i[2]&&224===i[3]&&161===i[4]&&177===i[5]&&26===i[6]&&225===i[7])return function(e,t){return si.find(e,"EncryptedPackage")?Zh(e,t):ch(e,t)}(si.read(s,n),n);break;case 9:if(i[1]<=8)return ch(s,n);break;case 60:return eh(s,n);case 73:if(73===i[1]&&42===i[2]&&0===i[3])throw new Error("TIFF Image File is not a spreadsheet");if(68===i[1])return function(e,t){var n=t||{},i=!!n.WTF;n.WTF=!0;try{var s=no.to_workbook(e,n);return n.WTF=i,s}catch(aC){if(n.WTF=i,!aC.message.match(/SYLK bad record ID/)&&i)throw aC;return ro.to_workbook(e,t)}}(s,n);break;case 84:if(65===i[1]&&66===i[2]&&76===i[3])return io.to_workbook(s,n);break;case 80:return 75===i[1]&&i[2]<9&&i[3]<9?function(e,t){var n=e,i=t||{};return i.type||(i.type=en&&Buffer.isBuffer(e)?"buffer":"base64"),$h(Oi(n,i),i)}(s,n):eu(e,s,n,r);case 239:return 60===i[3]?eh(s,n):eu(e,s,n,r);case 255:if(254===i[1])return function(e,t){var n=e;return"base64"==t.type&&(n=Jt(n)),n=Yt.utils.decode(1200,n.slice(2),"str"),t.type="binary",Jh(n,t)}(s,n);if(0===i[1]&&2===i[2]&&0===i[3])return ao.to_workbook(s,n);break;case 0:if(0===i[1]){if(i[2]>=2&&0===i[3])return ao.to_workbook(s,n);if(0===i[2]&&(8===i[3]||9===i[3]))return ao.to_workbook(s,n)}break;case 3:case 131:case 139:case 140:return to.to_workbook(s,n);case 123:if(92===i[1]&&114===i[2]&&116===i[3])return No.to_workbook(s,n);break;case 10:case 13:case 32:return function(e,t){var n="",i=Qh(e,t);switch(t.type){case"base64":n=Jt(e);break;case"binary":n=e;break;case"buffer":n=e.toString("binary");break;case"array":n=yi(e);break;default:throw new Error("Unrecognized type "+t.type)}return 239==i[0]&&187==i[1]&&191==i[2]&&(n=is(n)),t.type="binary",Jh(n,t)}(s,n);case 137:if(80===i[1]&&78===i[2]&&71===i[3])throw new Error("PNG Image File is not a spreadsheet")}return eo.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?to.to_workbook(s,n):eu(e,s,n,r)}function nu(e,t,n,i,s,r,a,o){var l=lr(n),c=o.defval,h=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),u=!0,d=1===s?[]:{};if(1!==s)if(Object.defineProperty)try{Object.defineProperty(d,"__rowNum__",{value:n,enumerable:!1})}catch(aC){d.__rowNum__=n}else d.__rowNum__=n;if(!a||e[n])for(var f=t.s.c;f<=t.e.c;++f){var p=a?e[n][f]:e[i[f]+l];if(void 0!==p&&void 0!==p.t){var m=p.v;switch(p.t){case"z":if(null==m)break;continue;case"e":m=0==m?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+p.t)}if(null!=r[f]){if(null==m)if("e"==p.t&&null===m)d[r[f]]=null;else if(void 0!==c)d[r[f]]=c;else{if(!h||null!==m)continue;d[r[f]]=null}else d[r[f]]=h&&("n"!==p.t||"n"===p.t&&!1!==o.rawNumbers)?m:br(p,m,o);null!=m&&(u=!1)}}else{if(void 0===c)continue;null!=r[f]&&(d[r[f]]=c)}}return{row:d,isempty:u}}function iu(e,t){if(null==e||null==e["!ref"])return[];var n={t:"n",v:0},i=0,s=1,r=[],a=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},c=t||{},h=null!=c.range?c.range:e["!ref"];switch(1===c.header?i=1:"A"===c.header?i=2:Array.isArray(c.header)?i=3:null==c.header&&(i=0),typeof h){case"string":l=mr(h);break;case"number":(l=mr(e["!ref"])).s.r=h;break;default:l=h}i>0&&(s=0);var u=lr(l.s.r),d=[],f=[],p=0,m=0,g=Array.isArray(e),b=l.s.r,v=0,y={};g&&!e[b]&&(e[b]=[]);var x=c.skipHidden&&e["!cols"]||[],S=c.skipHidden&&e["!rows"]||[];for(v=l.s.c;v<=l.e.c;++v)if(!(x[v]||{}).hidden)switch(d[v]=hr(v),n=g?e[b][v]:e[d[v]+u],i){case 1:r[v]=v-l.s.c;break;case 2:r[v]=d[v];break;case 3:r[v]=c.header[v-l.s.c];break;default:if(null==n&&(n={w:"__EMPTY",t:"s"}),o=a=br(n,null,c),m=y[a]||0){do{o=a+"_"+m++}while(y[o]);y[a]=m,y[o]=1}else y[a]=1;r[v]=o}for(b=l.s.r+s;b<=l.e.r;++b)if(!(S[b]||{}).hidden){var w=nu(e,l,b,d,i,r,g,c);(!1===w.isempty||(1===i?!1!==c.blankrows:c.blankrows))&&(f[p++]=w.row)}return f.length=p,f}var su=/"/g;function ru(e,t,n,i,s,r,a,o){for(var l=!0,c=[],h="",u=lr(n),d=t.s.c;d<=t.e.c;++d)if(i[d]){var f=o.dense?(e[n]||[])[d]:e[i[d]+u];if(null==f)h="";else if(null!=f.v){l=!1,h=""+(o.rawNumbers&&"n"==f.t?f.v:br(f,null,o));for(var p=0,m=0;p!==h.length;++p)if((m=h.charCodeAt(p))===s||m===r||34===m||o.forceQuotes){h='"'+h.replace(su,'""')+'"';break}"ID"==h&&(h='"ID"')}else null==f.f||f.F?h="":(l=!1,(h="="+f.f).indexOf(",")>=0&&(h='"'+h.replace(su,'""')+'"'));c.push(h)}return!1===o.blankrows&&l?null:c.join(a)}function au(e,t){var n=[],i=null==t?{}:t;if(null==e||null==e["!ref"])return"";var s=mr(e["!ref"]),r=void 0!==i.FS?i.FS:",",a=r.charCodeAt(0),o=void 0!==i.RS?i.RS:"\n",l=o.charCodeAt(0),c=new RegExp(("|"==r?"\\|":r)+"+$"),h="",u=[];i.dense=Array.isArray(e);for(var d=i.skipHidden&&e["!cols"]||[],f=i.skipHidden&&e["!rows"]||[],p=s.s.c;p<=s.e.c;++p)(d[p]||{}).hidden||(u[p]=hr(p));for(var m=0,g=s.s.r;g<=s.e.r;++g)(f[g]||{}).hidden||null!=(h=ru(e,s,g,u,a,l,r,i))&&(i.strip&&(h=h.replace(c,"")),(h||!1!==i.blankrows)&&n.push((m++?o:"")+h));return delete i.dense,n.join("")}function ou(e,t){t||(t={}),t.FS="\t",t.RS="\n";var n=au(e,t);if("undefined"==typeof Yt||"string"==t.type)return n;var i=Yt.utils.encode(1200,n,"str");return String.fromCharCode(255)+String.fromCharCode(254)+i}function lu(e,t,n){var i,s=n||{},r=+!s.skipHeader,a=e||{},o=0,l=0;if(a&&null!=s.origin)if("number"==typeof s.origin)o=s.origin;else{var c="string"==typeof s.origin?ur(s.origin):s.origin;o=c.r,l=c.c}var h={s:{c:0,r:0},e:{c:l,r:o+t.length-1+r}};if(a["!ref"]){var u=mr(a["!ref"]);h.e.c=Math.max(h.e.c,u.e.c),h.e.r=Math.max(h.e.r,u.e.r),-1==o&&(o=u.e.r+1,h.e.r=o+t.length-1+r)}else-1==o&&(o=0,h.e.r=t.length-1+r);var d=s.header||[],f=0;t.forEach((function(e,t){ai(e).forEach((function(n){-1==(f=d.indexOf(n))&&(d[f=d.length]=n);var c=e[n],h="z",u="",p=dr({c:l+f,r:o+t+r});i=cu(a,p),!c||"object"!==typeof c||c instanceof Date?("number"==typeof c?h="n":"boolean"==typeof c?h="b":"string"==typeof c?h="s":c instanceof Date?(h="d",s.cellDates||(h="n",c=ci(c)),u=s.dateNF||xn[14]):null===c&&s.nullError&&(h="e",c=0),i?(i.t=h,i.v=c,delete i.w,delete i.R,u&&(i.z=u)):a[p]=i={t:h,v:c},u&&(i.z=u)):a[p]=c}))})),h.e.c=Math.max(h.e.c,l+d.length-1);var p=lr(o);if(r)for(f=0;f<d.length;++f)a[hr(f+l)+p]={t:"s",v:d[f]};return a["!ref"]=pr(h),a}function cu(e,t,n){if("string"==typeof t){if(Array.isArray(e)){var i=ur(t);return e[i.r]||(e[i.r]=[]),e[i.r][i.c]||(e[i.r][i.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return cu(e,dr("number"!=typeof t?t:{r:t,c:n||0}))}function hu(){return{SheetNames:[],Sheets:{}}}function uu(e,t,n,i){var s=1;if(!n)for(;s<=65535&&-1!=e.SheetNames.indexOf(n="Sheet"+s);++s,n=void 0);if(!n||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(i&&e.SheetNames.indexOf(n)>=0){var r=n.match(/(^.*?)(\d+)$/);s=r&&+r[2]||0;var a=r&&r[1]||n;for(++s;s<=65535&&-1!=e.SheetNames.indexOf(n=a+s);++s);}if(kc(n),e.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return e.SheetNames.push(n),e.Sheets[n]=t,n}function du(e,t,n){return t?(e.l={Target:t},n&&(e.l.Tooltip=n)):delete e.l,e}var fu={encode_col:hr,encode_row:lr,encode_cell:dr,encode_range:pr,decode_col:cr,decode_row:or,split_cell:function(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")},decode_cell:ur,decode_range:fr,format_cell:br,sheet_add_aoa:yr,sheet_add_json:lu,sheet_add_dom:yh,aoa_to_sheet:xr,json_to_sheet:function(e,t){return lu(null,e,t)},table_to_sheet:xh,table_to_book:function(e,t){return vr(xh(e,t),t)},sheet_to_csv:au,sheet_to_txt:ou,sheet_to_json:iu,sheet_to_html:vh,sheet_to_formulae:function(e){var t,n="",i="";if(null==e||null==e["!ref"])return[];var s,r=mr(e["!ref"]),a="",o=[],l=[],c=Array.isArray(e);for(s=r.s.c;s<=r.e.c;++s)o[s]=hr(s);for(var h=r.s.r;h<=r.e.r;++h)for(a=lr(h),s=r.s.c;s<=r.e.c;++s)if(n=o[s]+a,i="",void 0!==(t=c?(e[h]||[])[s]:e[n])){if(null!=t.F){if(n=t.F,!t.f)continue;i=t.f,-1==n.indexOf(":")&&(n=n+":"+n)}if(null!=t.f)i=t.f;else{if("z"==t.t)continue;if("n"==t.t&&null!=t.v)i=""+t.v;else if("b"==t.t)i=t.v?"TRUE":"FALSE";else if(void 0!==t.w)i="'"+t.w;else{if(void 0===t.v)continue;i="s"==t.t?"'"+t.v:""+t.v}}l[l.length]=n+"="+i}return l},sheet_to_row_object_array:iu,sheet_get_cell:cu,book_new:hu,book_append_sheet:uu,book_set_sheet_visibility:function(e,t,n){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var i=function(e,t){if("number"==typeof t){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}if("string"==typeof t){var n=e.SheetNames.indexOf(t);if(n>-1)return n;throw new Error("Cannot find sheet name |"+t+"|")}throw new Error("Cannot find sheet |"+t+"|")}(e,t);switch(e.Workbook.Sheets[i]||(e.Workbook.Sheets[i]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}e.Workbook.Sheets[i].Hidden=n},cell_set_number_format:function(e,t){return e.z=t,e},cell_set_hyperlink:du,cell_set_internal_link:function(e,t,n){return du(e,"#"+t,n)},cell_add_comment:function(e,t,n){e.c||(e.c=[]),e.c.push({t:t,a:n||"SheetJS"})},sheet_set_array_formula:function(e,t,n,i){for(var s="string"!=typeof t?t:mr(t),r="string"==typeof t?t:pr(t),a=s.s.r;a<=s.e.r;++a)for(var o=s.s.c;o<=s.e.c;++o){var l=cu(e,a,o);l.t="n",l.F=r,delete l.v,a==s.s.r&&o==s.s.c&&(l.f=n,i&&(l.D=!0))}return e},consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};Ft.version;const pu="uploadedFiles",mu="fileGroups",gu=()=>{try{const e=localStorage.getItem(pu);return e?JSON.parse(e):[]}catch(e){return[]}},bu=e=>{localStorage.setItem(pu,JSON.stringify(e))},vu=()=>{try{const e=localStorage.getItem(mu);return e?JSON.parse(e):[]}catch(e){return[]}},yu=e=>{localStorage.setItem(mu,JSON.stringify(e))},xu=async e=>{const t=e.name.toLowerCase();if(t.endsWith(".csv")){return function(e){const t=["Good Signal Quality(0-100)","Mark","Attention","Meditation","Delta","Theta","Low Alpha","High Alpha","Low Beta","High Beta","Low Gamma","High Gamma"],n=e.split(/\r?\n/).filter((e=>""!==e.trim()));if(n.length<2){const e={};return t.forEach((t=>e[t]=[null])),e}const i=n[0].split(",").map((e=>e.trim())),s={};t.forEach((e=>{const t=i.findIndex((t=>t===e));s[e]=-1!==t?t:null}));const r={};t.forEach((e=>{r[e]=[]}));for(let a=1;a<n.length;a++){const e=n[a].split(",").map((e=>e.trim()));e.length<i.length||t.forEach((t=>{const n=s[t];if(null===n||n>=e.length)r[t].push(null);else{const i=e[n],s=parseFloat(i);r[t].push(isNaN(s)?i:s)}}))}return r}(await e.text())}if(t.endsWith(".xlsx")){return function(e){const t=tu(e,{type:"array"}),n=t.SheetNames[0],i=t.Sheets[n],s=fu.sheet_to_json(i,{header:1}),r=["Good Signal Quality(0-100)","Mark","Attention","Meditation","Delta","Theta","Low Alpha","High Alpha","Low Beta","High Beta","Low Gamma","High Gamma"];if(!s||s.length<2){const e={};return r.forEach((t=>e[t]=[null])),e}const a=s[0].map(String).map((e=>e.trim())),o={};r.forEach((e=>{const t=a.findIndex((t=>t===e));o[e]=-1!==t?t:null}));const l={};r.forEach((e=>{l[e]=[]}));for(let c=1;c<s.length;c++){const e=s[c];e.length<a.length||r.forEach((t=>{const n=o[t];if(null===n||n>=e.length)l[t].push(null);else{const i=e[n],s=parseFloat(i);l[t].push(isNaN(s)?i:s)}}))}return l}(await e.arrayBuffer())}throw new Error("\u4e0d\u652f\u63f4\u7684\u6a94\u6848\u683c\u5f0f\uff0c\u50c5\u652f\u63f4 CSV")};let Su=0;const wu=()=>(Su+=1,1e3*Date.now()+Su);function Eu(){const[e,n]=(0,t.useState)((()=>gu())),[i,s]=(0,t.useState)((()=>vu())),r=(0,t.useCallback)((()=>{n(gu()),s(vu())}),[]);(0,t.useEffect)((()=>{const e=e=>{e.key!==pu&&e.key!==mu||r()};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[r]);const a=(0,t.useCallback)((async(e,t)=>{const i=[];for(const n of e){const e=await xu(n),s={id:wu(),fileName:n.name,alias:n.name,uploadedAt:(new Date).toISOString(),data:e,userId:t};i.push(s)}const s=[...gu(),...i];return bu(s),n(s),i}),[]),o=(0,t.useCallback)((async(e,t,i)=>{const r=wu().toString(),a=[];for(const n of e){const e=await xu(n),t={id:wu(),fileName:n.name,alias:n.name,uploadedAt:(new Date).toISOString(),data:e,userId:i,groupId:r};a.push(t)}const o={id:r,name:t,createdAt:(new Date).toISOString(),userId:i,fileIds:a.map((e=>e.id))},l=gu(),c=vu(),h=[...l,...a],u=[...c,o];return bu(h),yu(u),n(h),s(u),o}),[]),l=(0,t.useCallback)(((e,t)=>{const i=gu().map((n=>n.id===e?h(h({},n),{},{alias:t}):n));bu(i),n(i)}),[]),c=(0,t.useCallback)((e=>{const t=gu(),i=vu(),r=t.filter((t=>t.id!==e)),a=i.map((t=>h(h({},t),{},{fileIds:t.fileIds.filter((t=>t!==e))}))).filter((e=>e.fileIds.length>0));bu(r),yu(a),n(r),s(a)}),[]),u=(0,t.useCallback)(((e,t,i)=>{const r={id:wu().toString(),name:e,createdAt:(new Date).toISOString(),userId:i,fileIds:t},a=gu(),o=vu(),l=a.map((e=>t.includes(e.id)?h(h({},e),{},{groupId:r.id}):e)),c=[...o,r];return bu(l),yu(c),n(l),s(c),r}),[]),d=(0,t.useCallback)(((e,t)=>{const i=gu(),r=vu().map((n=>n.id===e?h(h({},n),t):n));let a=i;t.fileIds&&(a=i.map((n=>t.fileIds.includes(n.id)?h(h({},n),{},{groupId:e}):n.groupId===e?h(h({},n),{},{groupId:void 0}):n)),bu(a),n(a)),yu(r),s(r)}),[]),f=(0,t.useCallback)((e=>{const t=gu(),i=vu(),r=t.map((t=>t.groupId===e?h(h({},t),{},{groupId:void 0}):t)),a=i.filter((t=>t.id!==e));bu(r),yu(a),n(r),s(a)}),[]),p=(0,t.useCallback)((t=>e.filter((e=>e.groupId===t))),[e]),m=(0,t.useCallback)((e=>i.find((t=>t.id===e))),[i]);return{files:e,groups:i,addFiles:a,addFilesAsGroup:o,updateFileAlias:l,deleteFile:c,createGroup:u,updateGroup:d,deleteGroup:f,getFilesByGroup:p,getGroupById:m,reload:r}}let _u=function(e){return e.Admin="\u7ba1\u7406\u8005",e.Basic="\u4e00\u822c\u4f7f\u7528\u8005",e}({});const Tu="userList",Mu="currentUser",Cu={id:"default-user",name:"\u9810\u8a2d\u53d7\u6e2c\u8005",phone:"",email:"",role:_u.Basic,company:{name:"",address:"",id:"",phone:"",fax:""}};function Au(){const e=function(){const e=localStorage.getItem(Tu);if(e){const t=JSON.parse(e);return t.length>0?t:[Cu]}return[Cu]}(),n=function(e){const t=localStorage.getItem(Mu);return t?JSON.parse(t):e.length>0?e[0]:null}(e),[i,s]=(0,t.useState)(e),[r,a]=(0,t.useState)(n);(0,t.useEffect)((()=>{localStorage.setItem(Tu,JSON.stringify(i))}),[i]),(0,t.useEffect)((()=>{r?localStorage.setItem(Mu,JSON.stringify(r)):localStorage.removeItem(Mu)}),[r]);return{users:i,currentUser:r,setCurrentUser:a,addUser:e=>{const t=[...i,e];s(t),a(e)},updateUser:e=>{const t=i.map((t=>t.id===e.id?e:t));s(t),r&&r.id===e.id&&a(e)},removeUser:e=>{const t=i.filter((t=>t.id!==e));s(t),r&&r.id===e&&a(t[0]||null)}}}const Pu=(0,t.createContext)(void 0),Nu=e=>{let{children:t}=e;const n=Au();return(0,Rt.jsx)(Pu.Provider,{value:n,children:t})},ku=()=>{const e=(0,t.useContext)(Pu);if(!e)throw new Error("useUserContext \u5fc5\u9808\u5728 UserProvider \u5167\u4f7f\u7528");return e},Lu=e=>{let{requiredFileCount:n,requiredFileLabels:i,selectedFileIds:s,onFileSelect:r,onGroupSelect:a,userId:o}=e;const{files:l,groups:c,addFilesAsGroup:h}=Eu(),[u,d]=(0,t.useState)("individual"),[f,p]=(0,t.useState)(!1),[m,g]=(0,t.useState)(""),[b,v]=(0,t.useState)([]),[y,x]=(0,t.useState)(!1),S=c.filter((e=>e.userId===o)),w=()=>{p(!1),g(""),v([])};return(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsxs)("div",{className:"flex gap-2",children:[(0,Rt.jsx)("button",{type:"button",className:"btn btn-sm ".concat("individual"===u?"btn-primary":"btn-ghost"),onClick:()=>d("individual"),children:"\u500b\u5225\u9078\u64c7"}),(0,Rt.jsx)("button",{type:"button",className:"btn btn-sm ".concat("group"===u?"btn-primary":"btn-ghost"),onClick:()=>d("group"),children:"\u7fa4\u7d44\u9078\u64c7"}),(0,Rt.jsx)("button",{type:"button",className:"btn btn-sm btn-ghost",onClick:()=>p(!0),children:"\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"})]}),"individual"===u?(0,Rt.jsx)("div",{className:"space-y-4",children:i.map(((e,t)=>(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:e})}),(0,Rt.jsxs)("select",{className:"select select-underline w-full",value:s[t]||"",onChange:e=>r(t,Number(e.target.value)),children:[(0,Rt.jsx)("option",{value:"",children:"\u8acb\u9078\u64c7 ".concat(e)}),l.map((e=>(0,Rt.jsxs)("option",{value:e.id,children:[e.alias||e.fileName,e.groupId&&" (\u7fa4\u7d44)"]},e.id)))]})]},t)))}):(0,Rt.jsxs)("div",{className:"space-y-4",children:[0===S.length?(0,Rt.jsx)("div",{className:"alert alert-info",children:(0,Rt.jsx)("span",{children:"\u5c1a\u7121\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\uff0c\u8acb\u9ede\u64ca\u300c\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\u300d\u5efa\u7acb"})}):(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u9078\u64c7\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"})}),(0,Rt.jsxs)("select",{className:"select select-underline w-full",onChange:e=>(e=>{if(c.find((t=>t.id===e))){const t=l.filter((t=>t.groupId===e)).slice(0,n).map((e=>e.id));a(t)}})(e.target.value),defaultValue:"",children:[(0,Rt.jsx)("option",{value:"",disabled:!0,children:"\u8acb\u9078\u64c7\u7fa4\u7d44"}),S.map((e=>(0,Rt.jsxs)("option",{value:e.id,children:[e.name," (",e.fileIds.length," \u500b\u6a94\u6848)"]},e.id)))]})]}),s.some((e=>null!==e))&&(0,Rt.jsxs)("div",{className:"bg-base-200 rounded-lg p-4",children:[(0,Rt.jsx)("p",{className:"text-sm font-medium mb-2",children:"\u5df2\u9078\u64c7\u7684\u6a94\u6848\uff1a"}),(0,Rt.jsx)("ul",{className:"list-disc list-inside text-sm",children:s.map(((e,t)=>{const n=l.find((t=>t.id===e));return(0,Rt.jsxs)("li",{children:[(0,Rt.jsxs)("span",{className:"text-base-content/60",children:[i[t],"\uff1a"]})," ",(null===n||void 0===n?void 0:n.alias)||(null===n||void 0===n?void 0:n.fileName)||"\u672a\u9078\u64c7"]},t)}))})]})]}),0===l.length&&"individual"===u&&(0,Rt.jsx)("div",{className:"alert alert-warning",children:(0,Rt.jsx)("span",{children:"\u5c1a\u672a\u4e0a\u50b3\u4efb\u4f55\u6a94\u6848\uff0c\u8acb\u9ede\u64ca\u300c\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\u300d\u4e0a\u50b3\u6a94\u6848"})}),f&&(0,Rt.jsxs)("div",{className:"modal modal-open",children:[(0,Rt.jsxs)("div",{className:"modal-box relative",children:[(0,Rt.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:w,children:"\u2715"}),(0,Rt.jsx)("h3",{className:"text-lg font-bold mb-6",children:"\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u7fa4\u7d44\u540d\u7a31"})}),(0,Rt.jsx)("input",{type:"text",className:"input input-underline w-full",placeholder:"\u4f8b\uff1a2024/01/01 \u6e2c\u8a66\u8cc7\u6599",value:m,onChange:e=>g(e.target.value)})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsxs)("span",{className:"label-text",children:["\u9078\u64c7\u8166\u6ce2\u6a94\u6848\uff08\u9700\u8981 ",n," \u500b\u6a94\u6848\uff09"]})}),(0,Rt.jsx)("input",{type:"file",accept:".csv",multiple:!0,className:"file-input file-input-underline w-full",onChange:e=>{e.target.files&&v(Array.from(e.target.files))}}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/50 mt-2",children:"\u50c5\u652f\u63f4 CSV \u683c\u5f0f"})]}),b.length>0&&(0,Rt.jsxs)("div",{className:"bg-base-200 rounded-lg p-3 mb-4",children:[(0,Rt.jsxs)("p",{className:"text-sm font-medium mb-2",children:["\u5df2\u9078\u64c7 ",b.length," \u500b\u6a94\u6848\uff1a"]}),(0,Rt.jsx)("ul",{className:"list-disc list-inside text-sm",children:b.map(((e,t)=>(0,Rt.jsx)("li",{children:e.name},t)))})]}),(0,Rt.jsxs)("div",{className:"modal-action",children:[(0,Rt.jsx)("button",{className:"btn btn-ghost",onClick:w,children:"\u53d6\u6d88"}),(0,Rt.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(0!==b.length)if(m.trim())if(b.length===n){x(!0);try{const e=await h(b,m.trim(),o);a(e.fileIds),p(!1),g(""),v([])}catch(e){const t=e instanceof Error?e.message:"\u4e0a\u50b3\u5931\u6557";alert(t)}finally{x(!1)}}else alert("\u8acb\u9078\u64c7 ".concat(n," \u500b\u6a94\u6848"));else alert("\u8acb\u8f38\u5165\u7fa4\u7d44\u540d\u7a31");else alert("\u8acb\u9078\u64c7\u6a94\u6848")},disabled:y,children:y?(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)("span",{className:"loading loading-spinner loading-sm"}),"\u4e0a\u50b3\u4e2d..."]}):"\u4e0a\u50b3\u4e26\u5efa\u7acb\u7fa4\u7d44"})]})]}),(0,Rt.jsx)("div",{className:"modal-backdrop",onClick:w})]})]})},Iu=()=>{var e,n;const{id:i}=Se(),s=xe(),{files:r}=Eu(),{currentUser:a,users:o}=ku(),{history:l,addHistoryRecord:c,removeHistoryRecord:h}=It(),[u,d]=(0,t.useState)(null),[f,p]=(0,t.useState)([]),[m,g]=(0,t.useState)({}),[b,v]=(0,t.useState)(""),[y,x]=(0,t.useState)(!1),[S,w]=(0,t.useState)(null),[E,_]=(0,t.useState)(!1),T=l.filter((e=>e.analysisId===i)),M={"\u4e3b\u8981\u529f\u80fd":{badgeClass:"badge-primary",description:"\u6838\u5fc3\u5206\u6790\u7cfb\u7d71"},"\u5229\u990a\u7081":{badgeClass:"badge-secondary",description:"\u6b63\u5ff5\u4fee\u884c\u7cfb\u5217"},"\u6613 Motion":{badgeClass:"badge-accent",description:"\u60c5\u7dd2\u8a55\u6bd4\u7cfb\u5217"}};(0,t.useEffect)((()=>{const e=Nt().find((e=>e.id===i));if(e)if(d(e),p(Array(e.requiredFiles.length).fill(null)),e.customFields){const t={};e.customFields.forEach((e=>{t[e.fieldName]=e.defaultValue})),g(t)}else g({});else d(null)}),[i]);return u?(0,Rt.jsxs)("div",{className:"container mx-auto max-w-3xl",children:[(0,Rt.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,Rt.jsxs)("ul",{children:[(0,Rt.jsx)("li",{children:(0,Rt.jsx)(St,{to:"/",children:"\u9996\u9801"})}),u.group&&(0,Rt.jsx)("li",{children:u.group}),(0,Rt.jsx)("li",{children:u.name})]})}),(0,Rt.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,Rt.jsxs)("div",{children:[u.group&&(0,Rt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Rt.jsx)("span",{className:"badge badge-sm ".concat((null===(e=M[u.group])||void 0===e?void 0:e.badgeClass)||"badge-ghost"),children:u.group}),(0,Rt.jsx)("span",{className:"text-sm text-base-content/60",children:(null===(n=M[u.group])||void 0===n?void 0:n.description)||""})]}),(0,Rt.jsxs)("h1",{className:"text-2xl font-bold mb-2",children:[u.name,u.badge&&(0,Rt.jsx)("span",{className:"badge badge-sm ".concat(u.badge.color," ml-2 align-middle"),children:u.badge.text})]}),(0,Rt.jsx)("p",{className:"text-base-content/70",children:u.description})]}),(0,Rt.jsxs)("button",{onClick:()=>_(!0),className:"btn btn-ghost gap-2",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"\u6b77\u53f2\u7d00\u9304",(0,Rt.jsx)("span",{className:"badge badge-primary badge-sm",children:T.filter((e=>e.status===Ot.Success)).length})]})]}),(0,Rt.jsx)("div",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h2",{className:"card-title mb-4",children:"\u5206\u6790\u8a2d\u5b9a"}),(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsx)("h3",{className:"font-semibold",children:"\u9078\u64c7\u6a94\u6848"}),a?(0,Rt.jsx)(Lu,{requiredFileCount:u.requiredFiles.length,requiredFileLabels:u.requiredFiles.map((e=>e.verbose_name)),selectedFileIds:f,onFileSelect:(e,t)=>{const n=[...f];n[e]=t,p(n)},onGroupSelect:e=>{p(e)},userId:a.id}):(0,Rt.jsx)("div",{className:"alert alert-warning",children:(0,Rt.jsxs)("span",{children:["\u8acb\u5148\u9078\u64c7\u53d7\u6e2c\u8005\u3002",(0,Rt.jsx)(St,{to:"/users",className:"link link-primary ml-1",children:"\u524d\u5f80\u53d7\u6e2c\u8005\u7ba1\u7406"})]})})]}),u.editComponent&&(0,Rt.jsxs)("div",{className:"mt-6",children:[(0,Rt.jsx)("h3",{className:"font-semibold mb-2",children:"\u81ea\u8a02\u53c3\u6578"}),(0,Rt.jsx)(u.editComponent,{customParams:m,onChange:g})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal mt-6",children:[(0,Rt.jsxs)("label",{className:"label label-minimal",children:[(0,Rt.jsx)("span",{className:"label-text",children:"\u5206\u6790\u63cf\u8ff0"}),(0,Rt.jsx)("span",{className:"label-text-alt",children:"\u9078\u586b"})]}),(0,Rt.jsx)("textarea",{className:"textarea textarea-underline w-full",placeholder:"\u8f38\u5165\u6b64\u6b21\u5206\u6790\u7684\u63cf\u8ff0\u6216\u5099\u8a3b",value:b,onChange:e=>v(e.target.value)})]}),S&&(0,Rt.jsx)("div",{className:"alert alert-error mt-4",children:(0,Rt.jsx)("span",{children:S})}),(0,Rt.jsxs)("div",{className:"card-actions justify-end mt-6",children:[(0,Rt.jsx)(St,{to:"/",className:"btn btn-ghost",children:"\u53d6\u6d88"}),(0,Rt.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(w(null),!u)return void alert("\u627e\u4e0d\u5230\u5206\u6790\u529f\u80fd");if(!a)return void alert("\u8acb\u5148\u9078\u64c7\u53d7\u6e2c\u8005");if(f.some((e=>null===e)))return void alert("\u8acb\u9078\u64c7\u6240\u6709\u6a94\u6848\uff1a\u9700\u8981 ".concat(u.requiredFiles.length," \u500b\u6a94\u6848"));const e=[];for(const i of f){const t=r.find((e=>e.id===i));if(!t)return void alert("\u9078\u64c7\u7684\u6a94\u6848\u4e0d\u5b58\u5728\uff0c\u8acb\u91cd\u65b0\u9078\u64c7");e.push(t)}const t=e.map((e=>e.data));x(!0);try{const e=await u.execute(t,m),n={id:Date.now(),analysisId:u.id,analysisName:u.name,selectedFileIds:f,result:e,timestamp:(new Date).toISOString(),userId:a.id,status:Ot.Success,customParams:m,description:b};c(n),s("/analysis/report/".concat(n.id))}catch(n){const e=n instanceof Error?n.message:"\u5206\u6790\u5931\u6557";w(e);const t={id:Date.now(),analysisId:u.id,analysisName:u.name,selectedFileIds:f,result:e,timestamp:(new Date).toISOString(),userId:a.id,status:Ot.Failure,customParams:m,description:b};c(t)}finally{x(!1)}},disabled:y||!a,children:y?(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)("span",{className:"loading loading-spinner loading-sm"}),"\u5206\u6790\u4e2d..."]}):"\u958b\u59cb\u5206\u6790"})]})]})}),E&&(0,Rt.jsxs)("div",{className:"modal modal-open",children:[(0,Rt.jsxs)("div",{className:"modal-box max-w-2xl",children:[(0,Rt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Rt.jsx)("h3",{className:"font-bold text-lg",children:"\u6b77\u53f2\u7d00\u9304"}),(0,Rt.jsx)("button",{onClick:()=>_(!1),className:"btn btn-sm btn-circle btn-ghost",children:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Rt.jsx)("div",{className:"divide-y divide-base-200 max-h-96 overflow-y-auto",children:0===T.length?(0,Rt.jsxs)("div",{className:"py-8 text-center",children:[(0,Rt.jsx)("div",{className:"w-12 h-12 rounded-full bg-base-200 flex items-center justify-center mx-auto mb-3",children:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-base-content/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Rt.jsx)("p",{className:"font-medium",children:"\u5c1a\u7121\u5206\u6790\u7d00\u9304"}),(0,Rt.jsx)("p",{className:"text-sm text-base-content/60 mt-1",children:"\u5b8c\u6210\u5206\u6790\u5f8c\u7d00\u9304\u5c07\u986f\u793a\u65bc\u6b64"})]}):T.map((e=>{const t=o.find((t=>t.id===e.userId));return(0,Rt.jsx)("div",{className:"py-4 first:pt-0",children:(0,Rt.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,Rt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Rt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Rt.jsx)("span",{className:"font-medium",children:e.description||"\u7121\u63cf\u8ff0"}),e.status===Ot.Success?(0,Rt.jsx)("span",{className:"badge badge-success badge-sm",children:"\u5b8c\u6210"}):(0,Rt.jsx)("span",{className:"badge badge-error badge-sm",children:"\u5931\u6557"})]}),(0,Rt.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-xs text-base-content/60 mb-2",children:[(0,Rt.jsx)("span",{children:(null===t||void 0===t?void 0:t.name)||"\u672a\u77e5\u53d7\u6e2c\u8005"}),(0,Rt.jsx)("span",{children:"\xb7"}),(0,Rt.jsx)("span",{children:new Date(e.timestamp).toLocaleString()})]}),(0,Rt.jsx)("div",{className:"flex flex-wrap gap-1.5",children:e.selectedFileIds.map(((e,t)=>{const n=r.find((t=>t.id===e));return(0,Rt.jsx)("span",{className:"badge badge-ghost badge-sm",children:(null===n||void 0===n?void 0:n.alias)||(null===n||void 0===n?void 0:n.fileName)||"\u672a\u77e5"},t)}))})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-1",children:[e.status===Ot.Success?(0,Rt.jsx)(St,{to:"/analysis/report/".concat(e.id),className:"btn btn-primary btn-sm",onClick:()=>_(!1),children:"\u6aa2\u8996"}):(0,Rt.jsx)("span",{className:"btn btn-ghost btn-sm btn-disabled",children:"\u5931\u6557"}),(0,Rt.jsx)("button",{onClick:()=>{window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7d00\u9304\u55ce\uff1f")&&h(e.id)},className:"btn btn-ghost btn-sm text-error",title:"\u522a\u9664\u7d00\u9304",children:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id)}))}),(0,Rt.jsx)("div",{className:"modal-action",children:(0,Rt.jsx)("button",{onClick:()=>_(!1),className:"btn",children:"\u95dc\u9589"})})]}),(0,Rt.jsx)("div",{className:"modal-backdrop",onClick:()=>_(!1)})]})]}):(0,Rt.jsxs)("div",{className:"container mx-auto",children:[(0,Rt.jsx)("div",{className:"alert alert-error",children:(0,Rt.jsx)("span",{children:"\u627e\u4e0d\u5230\u6b64\u5206\u6790\u529f\u80fd"})}),(0,Rt.jsx)(St,{to:"/",className:"btn btn-ghost mt-4",children:"\u8fd4\u56de\u9996\u9801"})]})},Ru={"\u4e3b\u8981\u529f\u80fd":{badgeClass:"badge-primary"},"\u5229\u990a\u7081":{badgeClass:"badge-secondary"},"\u6613 Motion":{badgeClass:"badge-accent"}},Ou=()=>{const{files:e}=Eu(),{users:n}=ku(),{history:i,removeHistoryRecord:s,updateHistoryRecord:r}=It(),[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)("all"),[u,d]=(0,t.useState)("all"),[f,p]=(0,t.useState)("all"),[m,g]=(0,t.useState)(1),b=Nt();(0,t.useEffect)((()=>{g(1)}),[a,l,u,f,i]);const v=i.filter((t=>{if("all"!==l&&t.analysisId!==l)return!1;if("all"!==u&&t.userId!==u)return!1;if("all"!==f){if("success"===f&&t.status!==Ot.Success)return!1;if("failure"===f&&t.status!==Ot.Failure)return!1}if(!a)return!0;const i=n.find((e=>e.id===t.userId)),s=t.selectedFileIds.map((t=>{const n=e.find((e=>e.id===t));return(null===n||void 0===n?void 0:n.alias)||(null===n||void 0===n?void 0:n.fileName)||""})).join(" ");return"".concat(t.analysisName," ").concat((null===i||void 0===i?void 0:i.name)||""," ").concat(s," ").concat(t.description||"").toLowerCase().includes(a.toLowerCase())})),y=Math.ceil(v.length/15),x=v.slice(15*(m-1),15*m),S=i.length,w=i.filter((e=>e.status===Ot.Success)).length,E=i.filter((e=>e.status===Ot.Failure)).length,_=()=>{o(""),c("all"),d("all"),p("all")},T=a||"all"!==l||"all"!==u;return(0,Rt.jsxs)("div",{className:"container mx-auto max-w-5xl",children:[(0,Rt.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,Rt.jsxs)("ul",{children:[(0,Rt.jsx)("li",{children:(0,Rt.jsx)(St,{to:"/",children:"\u9996\u9801"})}),(0,Rt.jsx)("li",{children:"\u5206\u6790\u6b77\u53f2"})]})}),(0,Rt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Rt.jsx)("h1",{className:"text-2xl font-bold text-text",children:"\u5206\u6790\u6b77\u53f2\u7d00\u9304"}),(0,Rt.jsxs)(St,{to:"/",className:"btn btn-primary btn-sm",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"\u65b0\u589e\u5206\u6790"]})]}),(0,Rt.jsxs)("div",{className:"card bg-base-100 shadow-md overflow-hidden",children:[(0,Rt.jsxs)("div",{className:"flex border-b border-base-200",children:[(0,Rt.jsxs)("button",{onClick:()=>p("all"),className:"flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors ".concat("all"===f?"border-primary text-primary":"border-transparent text-base-content/60 hover:text-base-content hover:border-base-300"),children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),"\u5168\u90e8",(0,Rt.jsx)("span",{className:"badge badge-sm",children:S})]}),(0,Rt.jsxs)("button",{onClick:()=>p("success"),className:"flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors ".concat("success"===f?"border-success text-success":"border-transparent text-base-content/60 hover:text-base-content hover:border-base-300"),children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"\u6210\u529f",(0,Rt.jsx)("span",{className:"badge badge-success badge-sm",children:w})]}),(0,Rt.jsxs)("button",{onClick:()=>p("failure"),className:"flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors ".concat("failure"===f?"border-error text-error":"border-transparent text-base-content/60 hover:text-base-content hover:border-base-300"),children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"\u5931\u6557",(0,Rt.jsx)("span",{className:"badge badge-error badge-sm",children:E})]})]}),(0,Rt.jsxs)("div",{className:"p-4 bg-base-200/30 border-b border-base-200",children:[(0,Rt.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,Rt.jsx)("div",{className:"flex-1",children:(0,Rt.jsx)("input",{type:"text",className:"input input-underline w-full",placeholder:"\u641c\u5c0b\u5206\u6790\u540d\u7a31\u3001\u63cf\u8ff0\u3001\u6a94\u6848...",value:a,onChange:e=>o(e.target.value)})}),(0,Rt.jsxs)("div",{className:"flex gap-3",children:[(0,Rt.jsxs)("select",{className:"select select-underline min-w-[120px]",value:l,onChange:e=>c(e.target.value),children:[(0,Rt.jsx)("option",{value:"all",children:"\u6240\u6709\u529f\u80fd"}),b.map((e=>(0,Rt.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,Rt.jsxs)("select",{className:"select select-underline min-w-[120px]",value:u,onChange:e=>d(e.target.value),children:[(0,Rt.jsx)("option",{value:"all",children:"\u6240\u6709\u53d7\u6e2c\u8005"}),n.map((e=>(0,Rt.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]}),T&&(0,Rt.jsxs)("div",{className:"flex items-center gap-2 mt-3 text-sm",children:[(0,Rt.jsxs)("span",{className:"text-base-content/60",children:["\u627e\u5230 ",v.length," \u7b46\u7d50\u679c"]}),(0,Rt.jsx)("button",{onClick:_,className:"link link-primary",children:"\u6e05\u9664\u7be9\u9078"})]})]}),0===v.length?(0,Rt.jsxs)("div",{className:"p-12 text-center",children:[(0,Rt.jsx)("div",{className:"w-16 h-16 rounded-full bg-base-200 flex items-center justify-center mx-auto mb-4",children:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-base-content/40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Rt.jsx)("p",{className:"text-lg font-medium",children:T?"\u6c92\u6709\u7b26\u5408\u689d\u4ef6\u7684\u7d00\u9304":"\u5c1a\u7121\u5206\u6790\u7d00\u9304"}),(0,Rt.jsx)("p",{className:"text-sm text-base-content/60 mt-1",children:T?"\u5617\u8a66\u8abf\u6574\u7be9\u9078\u689d\u4ef6":"\u958b\u59cb\u57f7\u884c\u5206\u6790\u4ee5\u5efa\u7acb\u7d00\u9304"}),T?(0,Rt.jsx)("button",{onClick:_,className:"btn btn-ghost btn-sm mt-4",children:"\u6e05\u9664\u7be9\u9078"}):(0,Rt.jsx)(St,{to:"/",className:"btn btn-primary btn-sm mt-4",children:"\u524d\u5f80\u5206\u6790"})]}):(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)("div",{className:"divide-y divide-base-200",children:x.map((t=>{var i;const a=n.find((e=>e.id===t.userId)),o=b.find((e=>e.id===t.analysisId)),l=(null===o||void 0===o?void 0:o.group)||"\u4e3b\u8981\u529f\u80fd";return(0,Rt.jsx)("div",{className:"p-4 hover:bg-base-200/50 transition-colors",children:(0,Rt.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Rt.jsx)("div",{className:"mt-0.5 w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 ".concat(t.status===Ot.Success?"bg-success/20":"bg-error/20"),children:t.status===Ot.Success?(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-success",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}):(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-error",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),(0,Rt.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Rt.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,Rt.jsx)("span",{className:"badge badge-sm ".concat((null===(i=Ru[l])||void 0===i?void 0:i.badgeClass)||"badge-ghost"),children:l}),(0,Rt.jsx)(St,{to:"/analysis/".concat(t.analysisId),className:"font-medium hover:text-primary transition-colors",children:t.analysisName}),(0,Rt.jsx)("span",{className:"text-base-content/40",children:"\xb7"}),(0,Rt.jsx)("span",{className:"text-sm text-base-content/60",children:t.description||"\u7121\u63cf\u8ff0"})]}),(0,Rt.jsxs)("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1 mt-1.5 text-xs text-base-content/60",children:[(0,Rt.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(null===a||void 0===a?void 0:a.name)||"\u672a\u77e5"]}),(0,Rt.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),new Date(t.timestamp).toLocaleString()]})]}),(0,Rt.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-2",children:t.selectedFileIds.map(((t,n)=>{const i=e.find((e=>e.id===t));return(0,Rt.jsx)(St,{to:"/files/".concat(null===i||void 0===i?void 0:i.id),className:"badge badge-ghost badge-sm",children:(null===i||void 0===i?void 0:i.alias)||(null===i||void 0===i?void 0:i.fileName)||"\u672a\u77e5"},n)}))})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[t.status===Ot.Success?(0,Rt.jsx)(St,{to:"/analysis/report/".concat(t.id),className:"btn btn-primary btn-sm",children:"\u6aa2\u8996"}):(0,Rt.jsx)(St,{to:"/analysis/".concat(t.analysisId),className:"btn btn-ghost btn-sm",children:"\u91cd\u8a66"}),(0,Rt.jsx)("button",{onClick:()=>{const e=window.prompt("\u66f4\u65b0\u63cf\u8ff0",t.description||"");null!==e&&r(t.id,h(h({},t),{},{description:e}))},className:"btn btn-ghost btn-sm btn-square",title:"\u7de8\u8f2f\u63cf\u8ff0",children:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,Rt.jsx)("button",{onClick:()=>{window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7d00\u9304\u55ce\uff1f")&&s(t.id)},className:"btn btn-ghost btn-sm btn-square text-error",title:"\u522a\u9664\u7d00\u9304",children:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},t.id)}))}),y>1&&(0,Rt.jsxs)("div",{className:"flex items-center justify-between p-4 border-t border-base-200 bg-base-200/30",children:[(0,Rt.jsxs)("span",{className:"text-sm text-base-content/60",children:["\u7b2c ",15*(m-1)+1,"-",Math.min(15*m,v.length)," \u7b46\uff0c\u5171 ",v.length," \u7b46"]}),(0,Rt.jsxs)("div",{className:"join",children:[(0,Rt.jsx)("button",{onClick:()=>g((e=>Math.max(1,e-1))),disabled:1===m,className:"btn btn-sm join-item",children:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),(0,Rt.jsxs)("span",{className:"btn btn-sm join-item btn-disabled",children:[m," / ",y]}),(0,Rt.jsx)("button",{onClick:()=>g((e=>Math.min(y,e+1))),disabled:m===y,className:"btn btn-sm join-item",children:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]})]})]})]})]})},Du=()=>{const e=xe(),{files:n,groups:i,addFiles:s,addFilesAsGroup:r,updateFileAlias:a,deleteFile:o,deleteGroup:l,updateGroup:c,createGroup:h}=Eu(),{users:u,currentUser:d}=ku(),[f,p]=(0,t.useState)([]),[m,g]=(0,t.useState)("files"),[b,v]=(0,t.useState)(!1),[y,x]=(0,t.useState)(null),[S,w]=(0,t.useState)(""),[E,_]=(0,t.useState)(!1),[T,M]=(0,t.useState)(""),[C,A]=(0,t.useState)([]),[P,N]=(0,t.useState)(!1),[k,L]=(0,t.useState)(!1),[I,R]=(0,t.useState)(null),[O,D]=(0,t.useState)(""),[F,B]=(0,t.useState)([]),[j,V]=(0,t.useState)(!1),[G,W]=(0,t.useState)(""),[z,U]=(0,t.useState)([]),H=()=>{v(!1),x(null),w("")},X=()=>{_(!1),M(""),A([])},Y=()=>{L(!1),R(null),D(""),B([])},q=()=>{V(!1),W(""),U([])},[K,$]=(0,t.useState)(!1),[Z,Q]=(0,t.useState)(null),[J,ee]=(0,t.useState)(""),te=()=>{$(!1),Q(null),ee("")};return(0,Rt.jsxs)("div",{className:"container mx-auto",children:[(0,Rt.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,Rt.jsxs)("ul",{children:[(0,Rt.jsx)("li",{children:(0,Rt.jsx)(St,{to:"/",children:"\u9996\u9801"})}),(0,Rt.jsx)("li",{children:"\u8166\u6ce2\u6a94\u6848\u7ba1\u7406"})]})}),(0,Rt.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\u8166\u6ce2\u6a94\u6848\u7ba1\u7406"}),(0,Rt.jsx)("div",{className:"card bg-base-100 shadow-md mb-6",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4",children:[(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("h2",{className:"card-title",children:"\u4e0a\u50b3\u8166\u6ce2\u6a94\u6848"}),(0,Rt.jsx)("p",{className:"text-sm text-base-content/60",children:"\u50c5\u652f\u63f4 CSV \u683c\u5f0f\uff0c\u53ef\u540c\u6642\u9078\u64c7\u591a\u500b\u6a94\u6848"})]}),(0,Rt.jsx)("button",{className:"btn btn-ghost mt-2 sm:mt-0",onClick:()=>_(!0),disabled:!d,children:"\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"})]}),(0,Rt.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end",children:[(0,Rt.jsxs)("div",{className:"w-full max-w-xs",children:[(0,Rt.jsx)("input",{id:"single-file-input",type:"file",accept:".csv",multiple:!0,className:"file-input file-input-bordered w-full",onChange:e=>{e.target.files&&e.target.files.length>0&&p(Array.from(e.target.files))}}),f.length>0&&(0,Rt.jsxs)("p",{className:"text-sm text-base-content/60 mt-1",children:["\u5df2\u9078\u64c7 ",f.length," \u500b\u6a94\u6848"]})]}),(0,Rt.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(0!==f.length)if(d)try{const e=f.length;await s(f,d.id),p([]);const t=document.querySelector('input[type="file"]#single-file-input');t&&(t.value=""),alert("\u6210\u529f\u4e0a\u50b3 ".concat(e," \u500b\u6a94\u6848"))}catch(e){const t=e instanceof Error?e.message:"\u672a\u77e5\u932f\u8aa4";alert("\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff1a"+t)}else alert("\u8acb\u5148\u9078\u64c7\u53d7\u6e2c\u8005");else alert("\u8acb\u9078\u64c7\u6a94\u6848")},disabled:0===f.length||!d,children:"\u4e0a\u50b3\u6a94\u6848"})]}),!d&&(0,Rt.jsx)("div",{className:"alert alert-warning mt-4",children:(0,Rt.jsxs)("span",{children:["\u8acb\u5148\u9078\u64c7\u53d7\u6e2c\u8005\u3002",(0,Rt.jsx)(St,{to:"/users",className:"link link-primary ml-1",children:"\u524d\u5f80\u53d7\u6e2c\u8005\u7ba1\u7406"})]})})]})}),(0,Rt.jsxs)("div",{className:"tabs tabs-boxed mb-4",children:[(0,Rt.jsxs)("button",{className:"tab ".concat("files"===m?"tab-active":""),onClick:()=>g("files"),children:["\u6240\u6709\u6a94\u6848 (",n.length,")"]}),(0,Rt.jsxs)("button",{className:"tab ".concat("groups"===m?"tab-active":""),onClick:()=>g("groups"),children:["\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44 (",i.length,")"]})]}),"files"===m&&(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\u5df2\u4e0a\u50b3\u6a94\u6848"}),0===n.length?(0,Rt.jsxs)("div",{className:"text-center py-8 text-base-content/60",children:[(0,Rt.jsx)("p",{children:"\u5c1a\u7121\u6a94\u6848\u4e0a\u50b3"}),(0,Rt.jsx)("p",{className:"text-sm mt-2",children:"\u8acb\u4f7f\u7528\u4e0a\u65b9\u5340\u584a\u4e0a\u50b3\u6a94\u6848"})]}):(0,Rt.jsx)("div",{className:"overflow-x-auto bg-base-100 rounded-lg shadow",children:(0,Rt.jsxs)("table",{className:"table w-full",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("th",{children:"\u6a94\u6848\u540d\u7a31"}),(0,Rt.jsx)("th",{children:"\u7fa4\u7d44"}),(0,Rt.jsx)("th",{children:"\u4e0a\u50b3\u6642\u9593"}),(0,Rt.jsx)("th",{children:"\u53d7\u6e2c\u8005"}),(0,Rt.jsx)("th",{children:"\u64cd\u4f5c"})]})}),(0,Rt.jsx)("tbody",{children:n.map((t=>{var n;const s=t.groupId?i.find((e=>e.id===t.groupId)):null;return(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("td",{children:(0,Rt.jsxs)(St,{to:"/files/".concat(t.id),className:"hover:text-primary transition-colors",children:[(0,Rt.jsx)("div",{className:"font-medium",children:t.alias}),(0,Rt.jsx)("div",{className:"text-xs text-base-content/50",children:t.fileName})]})}),(0,Rt.jsx)("td",{children:s?(0,Rt.jsx)("span",{className:"badge badge-outline badge-sm",children:s.name}):(0,Rt.jsx)("span",{className:"text-base-content/40",children:"-"})}),(0,Rt.jsx)("td",{children:new Date(t.uploadedAt).toLocaleString()}),(0,Rt.jsx)("td",{children:(null===(n=u.find((e=>e.id===t.userId)))||void 0===n?void 0:n.name)||"\u672a\u77e5"}),(0,Rt.jsx)("td",{children:(0,Rt.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,Rt.jsx)("label",{tabIndex:0,className:"btn btn-sm btn-ghost btn-circle",children:(0,Rt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-5 h-5 stroke-current",children:[(0,Rt.jsx)("circle",{cx:"12",cy:"5",r:"1.5",fill:"currentColor"}),(0,Rt.jsx)("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"}),(0,Rt.jsx)("circle",{cx:"12",cy:"19",r:"1.5",fill:"currentColor"})]})}),(0,Rt.jsxs)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow-lg bg-base-100 rounded-box w-40 border border-base-200",children:[(0,Rt.jsx)("li",{children:(0,Rt.jsxs)("button",{onClick:()=>{var n;null===(n=document.activeElement)||void 0===n||n.blur(),e("/files/".concat(t.id))},children:[(0,Rt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:[(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.64 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.64 0-8.573-3.007-9.963-7.178Z"}),(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),"\u6aa2\u8996"]})}),(0,Rt.jsx)("li",{children:(0,Rt.jsxs)("button",{onClick:()=>(e=>{x(e),w(e.alias),v(!0)})(t),children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125"})}),"\u4fee\u6539\u5225\u7a31"]})}),(0,Rt.jsx)("li",{children:(0,Rt.jsxs)("button",{onClick:()=>(e=>{Q(e),ee(e.groupId||""),$(!0)})(t),children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"})}),"\u7de8\u8f2f\u7fa4\u7d44"]})}),(0,Rt.jsx)("li",{className:"border-t border-base-200 mt-1 pt-1",children:(0,Rt.jsxs)("button",{className:"text-error hover:bg-error hover:text-white",onClick:()=>{window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u6a94\u6848\uff1f")&&o(t.id)},children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"\u522a\u9664"]})})]})]})})]},t.id)}))})]})})]}),"groups"===m&&(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Rt.jsx)("h2",{className:"text-2xl font-bold",children:"\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"}),(0,Rt.jsx)("button",{className:"btn btn-primary btn-sm",onClick:()=>{W(""),U([]),V(!0)},disabled:!d||0===n.length,children:"\u5efa\u7acb\u65b0\u7fa4\u7d44"})]}),0===i.length?(0,Rt.jsxs)("div",{className:"text-center py-8 text-base-content/60",children:[(0,Rt.jsx)("p",{children:"\u5c1a\u7121\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"}),(0,Rt.jsx)("p",{className:"text-sm mt-2",children:"\u8acb\u9ede\u64ca\u300c\u5efa\u7acb\u65b0\u7fa4\u7d44\u300d\u6216\u300c\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\u300d\u5efa\u7acb\u65b0\u7fa4\u7d44"})]}):(0,Rt.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map((e=>{const t=(e=>n.filter((t=>t.groupId===e.id)))(e),i=u.find((t=>t.id===e.userId));return(0,Rt.jsx)("div",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Rt.jsx)("h3",{className:"card-title text-lg",children:e.name}),(0,Rt.jsxs)("span",{className:"badge badge-primary badge-sm",children:[t.length," \u500b\u6a94\u6848"]})]}),(0,Rt.jsxs)("div",{className:"text-sm text-base-content/60 mt-2",children:[(0,Rt.jsxs)("p",{children:["\u5efa\u7acb\u6642\u9593\uff1a",new Date(e.createdAt).toLocaleString()]}),(0,Rt.jsxs)("p",{children:["\u6240\u5c6c\u53d7\u6e2c\u8005\uff1a",(null===i||void 0===i?void 0:i.name)||"\u672a\u77e5"]})]}),(0,Rt.jsxs)("div",{className:"mt-3",children:[(0,Rt.jsx)("p",{className:"text-sm font-medium mb-1",children:"\u5305\u542b\u6a94\u6848\uff1a"}),(0,Rt.jsx)("ul",{className:"list-disc list-inside text-sm text-base-content/70",children:t.map((e=>(0,Rt.jsx)("li",{children:e.alias||e.fileName},e.id)))})]}),(0,Rt.jsx)("div",{className:"card-actions justify-end mt-4",children:(0,Rt.jsxs)("div",{className:"dropdown dropdown-end",children:[(0,Rt.jsx)("label",{tabIndex:0,className:"btn btn-sm btn-ghost btn-circle",children:(0,Rt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-5 h-5 stroke-current",children:[(0,Rt.jsx)("circle",{cx:"12",cy:"5",r:"1.5",fill:"currentColor"}),(0,Rt.jsx)("circle",{cx:"12",cy:"12",r:"1.5",fill:"currentColor"}),(0,Rt.jsx)("circle",{cx:"12",cy:"19",r:"1.5",fill:"currentColor"})]})}),(0,Rt.jsxs)("ul",{tabIndex:0,className:"dropdown-content z-[1] menu p-2 shadow-lg bg-base-100 rounded-box w-40 border border-base-200",children:[(0,Rt.jsx)("li",{children:(0,Rt.jsxs)("button",{onClick:()=>(e=>{R(e),D(e.name),B(e.fileIds),L(!0)})(e),children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125"})}),"\u7de8\u8f2f\u7fa4\u7d44"]})}),(0,Rt.jsx)("li",{className:"border-t border-base-200 mt-1 pt-1",children:(0,Rt.jsxs)("button",{className:"text-error hover:bg-error hover:text-white",onClick:()=>{window.confirm("\u78ba\u5b9a\u8981\u522a\u9664\u6b64\u7fa4\u7d44\uff1f\uff08\u6a94\u6848\u4e0d\u6703\u88ab\u522a\u9664\uff09")&&l(e.id)},children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),"\u522a\u9664\u7fa4\u7d44"]})})]})]})})]})},e.id)}))})]}),b&&(0,Rt.jsxs)("div",{className:"modal modal-open",children:[(0,Rt.jsxs)("div",{className:"modal-box relative",children:[(0,Rt.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:H,children:"\u2715"}),(0,Rt.jsx)("h3",{className:"text-lg font-bold mb-6",children:"\u4fee\u6539\u6a94\u6848\u5225\u7a31"}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u5225\u7a31"})}),(0,Rt.jsx)("input",{type:"text",value:S,onChange:e=>w(e.target.value),className:"input input-underline w-full",placeholder:"\u8acb\u8f38\u5165\u65b0\u5225\u7a31"})]}),(0,Rt.jsxs)("div",{className:"modal-action",children:[(0,Rt.jsx)("button",{className:"btn btn-ghost",onClick:H,children:"\u53d6\u6d88"}),(0,Rt.jsx)("button",{className:"btn btn-primary",onClick:()=>{y&&(a(y.id,S),v(!1),x(null),w(""))},children:"\u5132\u5b58"})]})]}),(0,Rt.jsx)("div",{className:"modal-backdrop",onClick:H})]}),E&&(0,Rt.jsxs)("div",{className:"modal modal-open",children:[(0,Rt.jsxs)("div",{className:"modal-box relative",children:[(0,Rt.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:X,children:"\u2715"}),(0,Rt.jsx)("h3",{className:"text-lg font-bold mb-6",children:"\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u7fa4\u7d44\u540d\u7a31"})}),(0,Rt.jsx)("input",{type:"text",className:"input input-underline w-full",placeholder:"\u4f8b\uff1a2024/01/01 \u6e2c\u8a66\u8cc7\u6599",value:T,onChange:e=>M(e.target.value)})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u9078\u64c7\u8166\u6ce2\u6a94\u6848\uff08\u53ef\u591a\u9078\uff09"})}),(0,Rt.jsx)("input",{type:"file",accept:".csv",multiple:!0,className:"file-input file-input-underline w-full",onChange:e=>{e.target.files&&A(Array.from(e.target.files))}}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/50 mt-2",children:"\u50c5\u652f\u63f4 CSV \u683c\u5f0f"})]}),C.length>0&&(0,Rt.jsxs)("div",{className:"bg-base-200 rounded-lg p-3 mb-4",children:[(0,Rt.jsxs)("p",{className:"text-sm font-medium mb-2",children:["\u5df2\u9078\u64c7 ",C.length," \u500b\u6a94\u6848\uff1a"]}),(0,Rt.jsx)("ul",{className:"list-disc list-inside text-sm",children:C.map(((e,t)=>(0,Rt.jsx)("li",{children:e.name},t)))})]}),(0,Rt.jsxs)("div",{className:"modal-action",children:[(0,Rt.jsx)("button",{className:"btn btn-ghost",onClick:X,children:"\u53d6\u6d88"}),(0,Rt.jsx)("button",{className:"btn btn-primary",onClick:async()=>{if(0!==C.length)if(T.trim())if(d){N(!0);try{await r(C,T.trim(),d.id),_(!1),M(""),A([]),alert("\u7fa4\u7d44\u4e0a\u50b3\u6210\u529f")}catch(e){const t=e instanceof Error?e.message:"\u672a\u77e5\u932f\u8aa4";alert("\u7fa4\u7d44\u4e0a\u50b3\u5931\u6557\uff1a"+t)}finally{N(!1)}}else alert("\u8acb\u5148\u9078\u64c7\u53d7\u6e2c\u8005");else alert("\u8acb\u8f38\u5165\u7fa4\u7d44\u540d\u7a31");else alert("\u8acb\u9078\u64c7\u6a94\u6848")},disabled:P,children:P?(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)("span",{className:"loading loading-spinner loading-sm"}),"\u4e0a\u50b3\u4e2d..."]}):"\u4e0a\u50b3\u4e26\u5efa\u7acb\u7fa4\u7d44"})]})]}),(0,Rt.jsx)("div",{className:"modal-backdrop",onClick:X})]}),k&&I&&(0,Rt.jsxs)("div",{className:"modal modal-open",children:[(0,Rt.jsxs)("div",{className:"modal-box relative max-w-2xl",children:[(0,Rt.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:Y,children:"\u2715"}),(0,Rt.jsx)("h3",{className:"text-lg font-bold mb-6",children:"\u7de8\u8f2f\u7fa4\u7d44"}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u7fa4\u7d44\u540d\u7a31"})}),(0,Rt.jsx)("input",{type:"text",className:"input input-underline w-full",value:O,onChange:e=>D(e.target.value)})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsxs)("label",{className:"label label-minimal",children:[(0,Rt.jsx)("span",{className:"label-text",children:"\u7fa4\u7d44\u6a94\u6848"}),(0,Rt.jsxs)("span",{className:"label-text-alt",children:["\u5df2\u9078 ",F.length," \u500b\u6a94\u6848"]})]}),(0,Rt.jsx)("div",{className:"bg-base-200 rounded-lg p-3 max-h-60 overflow-y-auto",children:0===n.length?(0,Rt.jsx)("p",{className:"text-sm text-base-content/60",children:"\u5c1a\u7121\u6a94\u6848"}):(0,Rt.jsx)("div",{className:"space-y-2",children:n.map((e=>{var t;return(0,Rt.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-base-300 p-2 rounded",children:[(0,Rt.jsx)("input",{type:"checkbox",className:"checkbox checkbox-sm",checked:F.includes(e.id),onChange:()=>{return t=e.id,void B((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}}),(0,Rt.jsx)("span",{className:"flex-1",children:e.alias||e.fileName}),e.groupId&&e.groupId!==I.id&&(0,Rt.jsx)("span",{className:"badge badge-outline badge-sm",children:null===(t=i.find((t=>t.id===e.groupId)))||void 0===t?void 0:t.name})]},e.id)}))})})]}),(0,Rt.jsxs)("div",{className:"modal-action",children:[(0,Rt.jsx)("button",{className:"btn btn-ghost",onClick:Y,children:"\u53d6\u6d88"}),(0,Rt.jsx)("button",{className:"btn btn-primary",onClick:()=>{I&&(c(I.id,{name:O,fileIds:F}),L(!1),R(null),D(""),B([]))},children:"\u5132\u5b58"})]})]}),(0,Rt.jsx)("div",{className:"modal-backdrop",onClick:Y})]}),j&&(0,Rt.jsxs)("div",{className:"modal modal-open",children:[(0,Rt.jsxs)("div",{className:"modal-box relative max-w-2xl",children:[(0,Rt.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:q,children:"\u2715"}),(0,Rt.jsx)("h3",{className:"text-lg font-bold mb-6",children:"\u5efa\u7acb\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u7fa4\u7d44\u540d\u7a31"})}),(0,Rt.jsx)("input",{type:"text",className:"input input-underline w-full",placeholder:"\u8acb\u8f38\u5165\u7fa4\u7d44\u540d\u7a31",value:G,onChange:e=>W(e.target.value)})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsxs)("label",{className:"label label-minimal",children:[(0,Rt.jsx)("span",{className:"label-text",children:"\u9078\u64c7\u6a94\u6848"}),(0,Rt.jsxs)("span",{className:"label-text-alt",children:["\u5df2\u9078 ",z.length," \u500b\u6a94\u6848"]})]}),(0,Rt.jsx)("div",{className:"bg-base-200 rounded-lg p-3 max-h-60 overflow-y-auto",children:0===n.length?(0,Rt.jsx)("p",{className:"text-sm text-base-content/60",children:"\u5c1a\u7121\u6a94\u6848\u53ef\u9078\u64c7"}):(0,Rt.jsx)("div",{className:"space-y-2",children:n.map((e=>{var t;return(0,Rt.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-base-300 p-2 rounded",children:[(0,Rt.jsx)("input",{type:"checkbox",className:"checkbox checkbox-sm",checked:z.includes(e.id),onChange:()=>{return t=e.id,void U((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t}}),(0,Rt.jsx)("span",{className:"flex-1",children:e.alias||e.fileName}),e.groupId&&(0,Rt.jsx)("span",{className:"badge badge-outline badge-sm",children:null===(t=i.find((t=>t.id===e.groupId)))||void 0===t?void 0:t.name})]},e.id)}))})}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/50 mt-2",children:"\u6a94\u6848\u53ef\u540c\u6642\u5c6c\u65bc\u591a\u500b\u7fa4\u7d44"})]}),(0,Rt.jsxs)("div",{className:"modal-action",children:[(0,Rt.jsx)("button",{className:"btn btn-ghost",onClick:q,children:"\u53d6\u6d88"}),(0,Rt.jsx)("button",{className:"btn btn-primary",onClick:()=>{G.trim()?0!==z.length?d?(h(G.trim(),z,d.id),V(!1),W(""),U([]),g("groups")):alert("\u8acb\u5148\u9078\u64c7\u53d7\u6e2c\u8005"):alert("\u8acb\u81f3\u5c11\u9078\u64c7\u4e00\u500b\u6a94\u6848"):alert("\u8acb\u8f38\u5165\u7fa4\u7d44\u540d\u7a31")},children:"\u5efa\u7acb\u7fa4\u7d44"})]})]}),(0,Rt.jsx)("div",{className:"modal-backdrop",onClick:q})]}),K&&Z&&(0,Rt.jsxs)("div",{className:"modal modal-open",children:[(0,Rt.jsxs)("div",{className:"modal-box relative",children:[(0,Rt.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:te,children:"\u2715"}),(0,Rt.jsx)("h3",{className:"text-lg font-bold mb-6",children:"\u7de8\u8f2f\u6a94\u6848\u7fa4\u7d44"}),(0,Rt.jsxs)("div",{className:"mb-6",children:[(0,Rt.jsx)("p",{className:"text-xs font-medium text-base-content/50 uppercase tracking-wide mb-1",children:"\u6a94\u6848"}),(0,Rt.jsx)("p",{className:"font-medium",children:Z.alias||Z.fileName})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u6240\u5c6c\u7fa4\u7d44"})}),(0,Rt.jsxs)("select",{className:"select select-underline w-full",value:J,onChange:e=>ee(e.target.value),children:[(0,Rt.jsx)("option",{value:"",children:"\u7121\u7fa4\u7d44"}),i.map((e=>(0,Rt.jsxs)("option",{value:e.id,children:[e.name," (",e.fileIds.length," \u500b\u6a94\u6848)"]},e.id)))]})]}),(0,Rt.jsxs)("div",{className:"modal-action",children:[(0,Rt.jsx)("button",{className:"btn btn-ghost",onClick:te,children:"\u53d6\u6d88"}),(0,Rt.jsx)("button",{className:"btn btn-primary",onClick:()=>{if(Z){const e=Z.groupId,t=J||void 0;if(e&&e!==t){const t=i.find((t=>t.id===e));t&&c(e,{fileIds:t.fileIds.filter((e=>e!==Z.id))})}if(t&&t!==e){const e=i.find((e=>e.id===t));e&&c(t,{fileIds:[...e.fileIds,Z.id]})}$(!1),Q(null),ee("")}},children:"\u5132\u5b58"})]})]}),(0,Rt.jsx)("div",{className:"modal-backdrop",onClick:te})]})]})},Fu=(e,t,n)=>{if(null===e||void 0===e||isNaN(e))return"rgba(200, 200, 200, 0.3)";const i=n-t;if(0===i)return"rgba(100, 150, 100, 0.5)";const s=Math.max(0,Math.min(1,(e-t)/i));if(s<.5){const e=2*s,t=Math.round(50+50*e),n=Math.round(100+100*e),i=Math.round(180-80*e);return"rgb(".concat(t,", ").concat(n,", ").concat(i,")")}{const e=2*(s-.5),t=Math.round(100+155*e),n=Math.round(200-120*e),i=Math.round(100-60*e);return"rgb(".concat(t,", ").concat(n,", ").concat(i,")")}},Bu={quality:["Good Signal Quality(0-100)"],mental:["Attention","Meditation"],waves:["Delta","Theta","Low Alpha","High Alpha","Low Beta","High Beta","Low Gamma","High Gamma"],other:["Mark"]},ju=e=>{let{band:t}=e;const n=t.values.slice(0,200),i=t.values.length>200;return(0,Rt.jsxs)("div",{children:[(0,Rt.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Rt.jsx)("span",{className:"text-sm font-medium",children:t.name}),(0,Rt.jsxs)("div",{className:"flex items-center gap-4 text-xs text-base-content/60",children:[(0,Rt.jsxs)("span",{children:["\u6700\u5c0f: ",t.min.toFixed(1)]}),(0,Rt.jsxs)("span",{children:["\u5e73\u5747: ",t.avg.toFixed(1)]}),(0,Rt.jsxs)("span",{children:["\u6700\u5927: ",t.max.toFixed(1)]})]})]}),(0,Rt.jsxs)("div",{className:"relative",children:[(0,Rt.jsx)("div",{className:"flex h-6 rounded overflow-hidden bg-base-200",style:{gap:"1px"},children:n.map(((e,n)=>{var i;return(0,Rt.jsx)("div",{className:"flex-1 min-w-[2px] transition-opacity hover:opacity-80",style:{backgroundColor:Fu(e,t.min,t.max)},title:"".concat(n+1,": ").concat(null!==(i=null===e||void 0===e?void 0:e.toFixed(2))&&void 0!==i?i:"N/A")},n)}))}),i&&(0,Rt.jsx)("div",{className:"absolute right-0 top-0 bottom-0 w-8 bg-gradient-to-l from-base-100 to-transparent flex items-center justify-end pr-1",children:(0,Rt.jsx)("span",{className:"text-xs text-base-content/60",children:"..."})})]})]})},Vu=()=>{var e;const{id:n}=Se(),{files:i}=Eu(),{users:s}=ku(),r=Number(n),a=i.find((e=>e.id===r)),[o,l]=(0,t.useState)("heatmap"),c=s.find((e=>e.id===(null===a||void 0===a?void 0:a.userId))),h=(0,t.useMemo)((()=>{if(null===a||void 0===a||!a.data||"object"!==typeof a.data||Array.isArray(a.data))return null;const e=a.data,t=[];return Object.entries(e).forEach((e=>{let[n,i]=e;if(!Array.isArray(i))return;const s=i.filter((e=>"number"===typeof e&&!isNaN(e)));if(0===s.length)return;const r=Math.min(...s),a=Math.max(...s),o=s.reduce(((e,t)=>e+t),0)/s.length;let l="other";Bu.quality.includes(n)?l="quality":Bu.mental.includes(n)?l="mental":Bu.waves.includes(n)&&(l="waves"),t.push({name:n,values:i,min:r,max:a,avg:o,category:l})})),t}),[a]);if(!a)return(0,Rt.jsxs)("div",{className:"container mx-auto",children:[(0,Rt.jsx)("div",{className:"alert alert-error",children:(0,Rt.jsx)("span",{children:"\u627e\u4e0d\u5230\u8a72\u6a94\u6848"})}),(0,Rt.jsx)(St,{to:"/files",className:"btn btn-ghost mt-4",children:"\u8fd4\u56de\u6a94\u6848\u5217\u8868"})]});const u=(null===h||void 0===h||null===(e=h[0])||void 0===e?void 0:e.values.length)||0;return(0,Rt.jsxs)("div",{className:"container mx-auto max-w-5xl",children:[(0,Rt.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,Rt.jsxs)("ul",{children:[(0,Rt.jsx)("li",{children:(0,Rt.jsx)(St,{to:"/",children:"\u9996\u9801"})}),(0,Rt.jsx)("li",{children:(0,Rt.jsx)(St,{to:"/files",children:"\u8166\u6ce2\u6a94\u6848\u7ba1\u7406"})}),(0,Rt.jsx)("li",{children:a.alias||a.fileName})]})}),(0,Rt.jsx)("h1",{className:"text-2xl font-bold mb-6",children:a.alias||a.fileName}),(0,Rt.jsx)("div",{className:"card bg-base-100 shadow-md mb-6",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h2",{className:"card-title text-base mb-2",children:"\u6a94\u6848\u8cc7\u8a0a"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"text-base-content/60",children:"\u539f\u6a94\u540d"}),(0,Rt.jsx)("p",{className:"font-medium",children:a.fileName})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"text-base-content/60",children:"\u5225\u540d"}),(0,Rt.jsx)("p",{className:"font-medium",children:a.alias})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"text-base-content/60",children:"\u4e0a\u50b3\u6642\u9593"}),(0,Rt.jsx)("p",{className:"font-medium",children:new Date(a.uploadedAt).toLocaleString()})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"text-base-content/60",children:"\u6240\u5c6c\u53d7\u6e2c\u8005"}),(0,Rt.jsx)("p",{className:"font-medium",children:(null===c||void 0===c?void 0:c.name)||a.userId})]})]})]})}),(0,Rt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Rt.jsxs)("h2",{className:"font-medium",children:["\u8166\u6ce2\u8cc7\u6599\u9810\u89bd",(0,Rt.jsxs)("span",{className:"text-sm text-base-content/60 font-normal ml-2",children:[u," \u500b\u6642\u9593\u9ede"]})]}),(0,Rt.jsxs)("div",{className:"join",children:[(0,Rt.jsx)("button",{onClick:()=>l("heatmap"),className:"btn btn-sm join-item ".concat("heatmap"===o?"btn-active":""),children:"\u71b1\u529b\u5716"}),(0,Rt.jsx)("button",{onClick:()=>l("table"),className:"btn btn-sm join-item ".concat("table"===o?"btn-active":""),children:"\u8868\u683c"})]})]}),h&&0!==h.length?"heatmap"===o?(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsx)("div",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsx)("div",{className:"card-body py-3",children:(0,Rt.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Rt.jsx)("span",{className:"text-base-content/60",children:"\u6578\u503c\u5f37\u5ea6"}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rt.jsx)("span",{className:"text-base-content/60",children:"\u4f4e"}),(0,Rt.jsx)("div",{className:"flex h-4 w-32 rounded overflow-hidden",children:Array.from({length:20}).map(((e,t)=>(0,Rt.jsx)("div",{className:"flex-1",style:{backgroundColor:Fu(t,0,19)}},t)))}),(0,Rt.jsx)("span",{className:"text-base-content/60",children:"\u9ad8"})]})]})})}),h.filter((e=>"quality"===e.category)).length>0&&(0,Rt.jsx)("div",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h3",{className:"text-sm font-medium text-base-content/60 mb-3",children:"\u8a0a\u865f\u54c1\u8cea"}),h.filter((e=>"quality"===e.category)).map((e=>(0,Rt.jsx)(ju,{band:e},e.name)))]})}),h.filter((e=>"mental"===e.category)).length>0&&(0,Rt.jsx)("div",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h3",{className:"text-sm font-medium text-base-content/60 mb-3",children:"\u5fc3\u667a\u72c0\u614b"}),(0,Rt.jsx)("div",{className:"space-y-4",children:h.filter((e=>"mental"===e.category)).map((e=>(0,Rt.jsx)(ju,{band:e},e.name)))})]})}),h.filter((e=>"waves"===e.category)).length>0&&(0,Rt.jsx)("div",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h3",{className:"text-sm font-medium text-base-content/60 mb-3",children:"\u8166\u6ce2\u983b\u6bb5"}),(0,Rt.jsx)("div",{className:"space-y-4",children:h.filter((e=>"waves"===e.category)).map((e=>(0,Rt.jsx)(ju,{band:e},e.name)))})]})})]}):(0,Rt.jsx)("div",{className:"card bg-base-100 shadow-md overflow-hidden",children:(0,Rt.jsxs)("div",{className:"overflow-x-auto max-h-96 overflow-y-auto",children:[(0,Rt.jsxs)("table",{className:"table table-xs table-pin-rows w-full",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{className:"bg-base-200",children:[(0,Rt.jsx)("th",{className:"text-base-content/60",children:"#"}),h.map((e=>(0,Rt.jsx)("th",{className:"text-base-content/60 whitespace-nowrap",children:e.name},e.name)))]})}),(0,Rt.jsx)("tbody",{children:Array.from({length:Math.min(100,u)}).map(((e,t)=>(0,Rt.jsxs)("tr",{className:"hover:bg-base-200/50",children:[(0,Rt.jsx)("td",{className:"text-base-content/60",children:t+1}),h.map((e=>{var n;return(0,Rt.jsx)("td",{children:null!==(n=e.values[t])&&void 0!==n?n:"-"},e.name)}))]},t)))})]}),u>100&&(0,Rt.jsxs)("div",{className:"text-center py-2 text-base-content/60 text-sm border-t border-base-200",children:["\u50c5\u986f\u793a\u524d 100 \u5217\uff0c\u5171 ",u," \u5217"]})]})}):(0,Rt.jsx)("div",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsx)("div",{className:"card-body items-center text-center",children:(0,Rt.jsx)("p",{className:"text-base-content/60",children:"\u7121\u6cd5\u986f\u793a\u6a94\u6848\u5167\u5bb9"})})}),(0,Rt.jsx)("div",{className:"mt-6",children:(0,Rt.jsx)(St,{to:"/files",className:"btn btn-ghost",children:"\u8fd4\u56de\u6a94\u6848\u5217\u8868"})})]})},Gu=e=>{var t;let{company:n,user:i,test:s,explanation:r,resultContent:a}=e;const o=null!==(t=n.logoUrl)&&void 0!==t?t:"".concat("/demo-site","/hylove-logo.jpg");return(0,Rt.jsxs)("div",{className:"card w-full bg-base-100 shadow-xl p-6",children:[(0,Rt.jsxs)("h2",{className:"text-2xl font-bold mb-4",children:["\u300c",s.testName,"\u300d\u6e2c\u8a66\u7e3d\u7d50\u5831\u544a"]}),(0,Rt.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row items-start space-x-4",children:[(0,Rt.jsx)("div",{className:"flex-shrink-0 w-20",children:(0,Rt.jsx)("img",{src:o,alt:"\u516c\u53f8Logo",className:"w-full object-contain"})}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("h3",{className:"text-xl font-semibold",children:n.name}),(0,Rt.jsx)("p",{className:"mt-1",children:n.address}),(0,Rt.jsxs)("p",{children:["\u7d71\u4e00\u7de8\u865f: ",n.id]}),(0,Rt.jsxs)("p",{children:["Phone: ",n.phone," | Fax: ",n.fax]})]})]}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-base-200 p-4 rounded",children:[(0,Rt.jsxs)("div",{children:[(0,Rt.jsxs)("p",{children:[(0,Rt.jsx)("strong",{children:"\u53d7\u6e2c\u8005ID\uff1a"})," ",i.id]}),(0,Rt.jsxs)("p",{children:[(0,Rt.jsx)("strong",{children:"\u59d3\u540d\uff1a"})," ",i.name]}),(0,Rt.jsxs)("p",{children:[(0,Rt.jsx)("strong",{children:"\u624b\u6a5f\u865f\u78bc\uff1a"})," ",i.phone]})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsxs)("p",{children:[(0,Rt.jsx)("strong",{children:"E-Mail\uff1a"})," ",i.email]}),(0,Rt.jsxs)("p",{children:[(0,Rt.jsx)("strong",{children:"\u6e2c\u8a66\u6642\u9593\uff1a"})," ",s.testTime]}),s.bluetoothSerial&&(0,Rt.jsxs)("p",{children:[(0,Rt.jsx)("strong",{children:"\u85cd\u7259\u5e8f\u865f\uff1a"})," ",s.bluetoothSerial]}),s.availableBase&&(0,Rt.jsxs)("p",{children:[(0,Rt.jsx)("strong",{children:"\u53ef\u7528\u57fa\u6578\uff1a"})," ",s.availableBase]})]})]}),a&&(0,Rt.jsx)("div",{className:"mt-6",children:a}),r&&(0,Rt.jsx)("div",{className:"mt-4",children:(0,Rt.jsx)("p",{className:"italic text-sm text-gray-600",children:r})})]})},Wu={"\u4e3b\u8981\u529f\u80fd":{badgeClass:"badge-primary",description:"\u6838\u5fc3\u5206\u6790\u7cfb\u7d71"},"\u5229\u990a\u7081":{badgeClass:"badge-secondary",description:"\u6b63\u5ff5\u4fee\u884c\u7cfb\u5217"},"\u6613 Motion":{badgeClass:"badge-accent",description:"\u60c5\u7dd2\u8a55\u6bd4\u7cfb\u5217"}},zu=()=>{var e,n;const{reportId:i}=Se(),{history:s}=It(),{users:r}=ku(),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(null);if((0,t.useEffect)((()=>{if(i){const e=Number(i),t=s.find((t=>t.id===e))||null;if(o(t),t){const e=Nt().find((e=>e.id===t.analysisId))||null;c(e)}}}),[i,s]),!a)return(0,Rt.jsxs)("div",{className:"container mx-auto",children:[(0,Rt.jsx)("div",{className:"alert alert-error",children:(0,Rt.jsx)("span",{children:"\u627e\u4e0d\u5230\u5831\u544a"})}),(0,Rt.jsx)(St,{to:"/",className:"btn btn-ghost mt-4",children:"\u8fd4\u56de\u9996\u9801"})]});const u=r.find((e=>e.id===a.userId)),d={id:(null===u||void 0===u?void 0:u.id)||"unknown",name:(null===u||void 0===u?void 0:u.name)||"\u672a\u77e5\u53d7\u6e2c\u8005",phone:(null===u||void 0===u?void 0:u.phone)||"\u672a\u8a2d\u5b9a",email:(null===u||void 0===u?void 0:u.email)||"\u672a\u8a2d\u5b9a"},f={testName:a.analysisName,testTime:new Date(a.timestamp).toLocaleString(),bluetoothSerial:"BT-001",availableBase:"100"},p={name:(null===u||void 0===u?void 0:u.company.name)||"\u672a\u8a2d\u5b9a",address:(null===u||void 0===u?void 0:u.company.address)||"\u672a\u8a2d\u5b9a",id:(null===u||void 0===u?void 0:u.company.id)||"\u672a\u8a2d\u5b9a",phone:(null===u||void 0===u?void 0:u.company.phone)||"\u672a\u8a2d\u5b9a",fax:(null===u||void 0===u?void 0:u.company.fax)||"\u672a\u8a2d\u5b9a"},m=l&&l.renderReport?l.renderReport(a.result,a.customParams||{}):(0,Rt.jsx)("p",{children:"\u627e\u4e0d\u5230\u5c0d\u61c9\u7684\u5206\u6790\u914d\u7f6e"}),g={company:p,user:d,test:f,explanation:(null===l||void 0===l?void 0:l.description)||"",resultContent:m};return(0,Rt.jsxs)("div",{className:"container mx-auto",children:[(0,Rt.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,Rt.jsxs)("ul",{children:[(0,Rt.jsx)("li",{children:(0,Rt.jsx)(St,{to:"/",children:"\u9996\u9801"})}),(0,Rt.jsx)("li",{children:(0,Rt.jsx)(St,{to:"/analysis/".concat(a.analysisId),children:a.analysisName})}),(0,Rt.jsx)("li",{children:"\u5206\u6790\u5831\u544a"})]})}),(0,Rt.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-6",children:[(0,Rt.jsxs)("div",{children:[(null===l||void 0===l?void 0:l.group)&&(0,Rt.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Rt.jsx)("span",{className:"badge badge-sm ".concat((null===(e=Wu[l.group])||void 0===e?void 0:e.badgeClass)||"badge-ghost"),children:l.group}),(0,Rt.jsx)("span",{className:"text-sm text-base-content/60",children:(null===(n=Wu[l.group])||void 0===n?void 0:n.description)||""})]}),(0,Rt.jsx)("h1",{className:"text-2xl font-bold mb-2",children:a.analysisName}),(0,Rt.jsx)("p",{className:"text-base-content/60",children:"\u5206\u6790\u5831\u544a"})]}),(0,Rt.jsxs)("div",{className:"flex gap-2 mt-4 sm:mt-0",children:[(0,Rt.jsxs)("button",{onClick:()=>window.print(),className:"btn btn-outline btn-secondary",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0110.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0l.229 2.523a1.125 1.125 0 01-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 00-1.913-.247M6.34 18H5.25A2.25 2.25 0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 011.913-.247m10.5 0a48.536 48.536 0 00-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z"})}),"\u5217\u5370\u5831\u544a"]}),(0,Rt.jsx)(St,{to:"/",className:"btn btn-ghost",children:"\u8fd4\u56de\u9996\u9801"}),(0,Rt.jsx)(St,{to:"/analysis/".concat(a.analysisId),className:"btn btn-primary",children:"\u518d\u6b21\u5206\u6790"})]})]}),(0,Rt.jsx)(Gu,h({},g))]})},Uu=e=>{let{initialInfo:n,onSave:i,onCancel:s}=e;const[r,a]=(0,t.useState)(n||{id:"",name:"",phone:"",email:"",role:_u.Basic,company:{name:"",address:"",id:"",phone:"",fax:""}}),o=e=>{const{name:t,value:n}=e.target;if(t.startsWith("company.")){const e=t.split(".")[1];a(h(h({},r),{},{company:h(h({},r.company),{},{[e]:n})}))}else a(h(h({},r),{},"role"===t?{role:n}:{[t]:n}))};return(0,Rt.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(h({},r))},className:"space-y-6",children:[(0,Rt.jsx)("h2",{className:"text-xl font-semibold",children:r.id?"\u7de8\u8f2f\u53d7\u6e2c\u8005":"\u65b0\u589e\u53d7\u6e2c\u8005"}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u8eab\u5206"})}),(0,Rt.jsx)("select",{name:"role",value:r.role,onChange:o,className:"select select-underline w-full",children:Object.values(_u).map((e=>(0,Rt.jsx)("option",{value:e,children:e},e)))})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u59d3\u540d"})}),(0,Rt.jsx)("input",{type:"text",name:"name",value:r.name,onChange:o,placeholder:"\u8acb\u8f38\u5165\u59d3\u540d",className:"input input-underline w-full",required:!0})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u96fb\u8a71"})}),(0,Rt.jsx)("input",{type:"text",name:"phone",value:r.phone,onChange:o,placeholder:"\u8acb\u8f38\u5165\u96fb\u8a71",className:"input input-underline w-full",required:!0})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"Email"})}),(0,Rt.jsx)("input",{type:"email",name:"email",value:r.email,onChange:o,placeholder:"\u8acb\u8f38\u5165 Email",className:"input input-underline w-full",required:!0})]}),(0,Rt.jsx)("div",{className:"divider-minimal",children:"\u516c\u53f8\u8cc7\u8a0a"}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u516c\u53f8\u540d\u7a31"})}),(0,Rt.jsx)("input",{type:"text",name:"company.name",value:r.company.name,onChange:o,placeholder:"\u8acb\u8f38\u5165\u516c\u53f8\u540d\u7a31",className:"input input-underline w-full",required:!0})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u5730\u5740"})}),(0,Rt.jsx)("input",{type:"text",name:"company.address",value:r.company.address,onChange:o,placeholder:"\u8acb\u8f38\u5165\u516c\u53f8\u5730\u5740",className:"input input-underline w-full",required:!0})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u7d71\u4e00\u7de8\u865f"})}),(0,Rt.jsx)("input",{type:"text",name:"company.id",value:r.company.id,onChange:o,placeholder:"\u8acb\u8f38\u5165\u7d71\u4e00\u7de8\u865f",className:"input input-underline w-full",required:!0})]}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsxs)("label",{className:"label label-minimal",children:[(0,Rt.jsx)("span",{className:"label-text",children:"\u516c\u53f8\u96fb\u8a71"}),(0,Rt.jsx)("span",{className:"label-text-alt",children:"\u9078\u586b"})]}),(0,Rt.jsx)("input",{type:"text",name:"company.phone",value:r.company.phone,onChange:o,placeholder:"\u8acb\u8f38\u5165\u516c\u53f8\u96fb\u8a71",className:"input input-underline w-full"})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsxs)("label",{className:"label label-minimal",children:[(0,Rt.jsx)("span",{className:"label-text",children:"\u516c\u53f8\u50b3\u771f"}),(0,Rt.jsx)("span",{className:"label-text-alt",children:"\u9078\u586b"})]}),(0,Rt.jsx)("input",{type:"text",name:"company.fax",value:r.company.fax,onChange:o,placeholder:"\u8acb\u8f38\u5165\u516c\u53f8\u50b3\u771f",className:"input input-underline w-full"})]})]}),(0,Rt.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,Rt.jsx)("button",{type:"button",onClick:s,className:"btn btn-ghost",children:"\u53d6\u6d88"}),(0,Rt.jsx)("button",{type:"submit",className:"btn btn-primary",children:"\u5132\u5b58"})]})]})},Hu=()=>{const{users:e,currentUser:n,setCurrentUser:i,addUser:s,updateUser:r,removeUser:a}=ku(),[o,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,f]=(0,t.useState)(null),p=e=>{u(e),l(!0)},m=e=>{f(e)},g=()=>{l(!1)};return(0,Rt.jsxs)("div",{className:"container mx-auto",children:[(0,Rt.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,Rt.jsxs)("ul",{children:[(0,Rt.jsx)("li",{children:(0,Rt.jsx)(St,{to:"/",children:"\u9996\u9801"})}),(0,Rt.jsx)("li",{children:"\u53d7\u6e2c\u8005\u7ba1\u7406"})]})}),(0,Rt.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6",children:[(0,Rt.jsx)("h1",{className:"text-2xl font-bold",children:"\u53d7\u6e2c\u8005\u7ba1\u7406"}),(0,Rt.jsx)("button",{className:"btn btn-primary mt-4 sm:mt-0",onClick:()=>{u({id:"",name:"",phone:"",email:"",role:_u.Basic,company:{name:"",address:"",id:"",phone:"",fax:""}}),l(!0)},children:"\u65b0\u589e\u53d7\u6e2c\u8005"})]}),n&&(0,Rt.jsx)("div",{className:"card bg-base-100 shadow-md mb-6",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rt.jsx)("h2",{className:"card-title",children:"\u76ee\u524d\u53d7\u6e2c\u8005"}),(0,Rt.jsx)("span",{className:"badge badge-primary badge-sm",children:n.role})]}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4",children:[(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"text-sm text-base-content/60",children:"\u59d3\u540d"}),(0,Rt.jsx)("p",{className:"font-medium",children:n.name})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"text-sm text-base-content/60",children:"\u96fb\u8a71"}),(0,Rt.jsx)("p",{className:"font-medium",children:n.phone||"\u672a\u8a2d\u5b9a"})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"text-sm text-base-content/60",children:"Email"}),(0,Rt.jsx)("p",{className:"font-medium",children:n.email||"\u672a\u8a2d\u5b9a"})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"text-sm text-base-content/60",children:"\u516c\u53f8"}),(0,Rt.jsx)("p",{className:"font-medium",children:n.company.name||"\u672a\u8a2d\u5b9a"})]})]})]})}),(0,Rt.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"\u6240\u6709\u53d7\u6e2c\u8005"}),0===e.length?(0,Rt.jsxs)("div",{className:"text-center py-8 text-base-content/60",children:[(0,Rt.jsx)("p",{children:"\u5c1a\u7121\u53d7\u6e2c\u8005"}),(0,Rt.jsx)("p",{className:"text-sm mt-2",children:"\u8acb\u9ede\u64ca\u4e0a\u65b9\u6309\u9215\u65b0\u589e\u53d7\u6e2c\u8005"})]}):(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsx)("div",{className:"hidden md:block overflow-x-auto bg-base-100 rounded-lg shadow",children:(0,Rt.jsxs)("table",{className:"table w-full",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("th",{children:"\u8eab\u5206"}),(0,Rt.jsx)("th",{children:"\u59d3\u540d"}),(0,Rt.jsx)("th",{children:"\u96fb\u8a71"}),(0,Rt.jsx)("th",{children:"Email"}),(0,Rt.jsx)("th",{children:"\u516c\u53f8"}),(0,Rt.jsx)("th",{children:"\u64cd\u4f5c"})]})}),(0,Rt.jsx)("tbody",{children:e.map((e=>(0,Rt.jsxs)("tr",{className:(null===n||void 0===n?void 0:n.id)===e.id?"bg-base-200":"",children:[(0,Rt.jsx)("td",{children:(0,Rt.jsx)("span",{className:"badge badge-outline badge-sm",children:e.role})}),(0,Rt.jsx)("td",{className:"font-medium",children:e.name}),(0,Rt.jsx)("td",{children:e.phone||"-"}),(0,Rt.jsx)("td",{children:e.email||"-"}),(0,Rt.jsx)("td",{children:e.company.name||"-"}),(0,Rt.jsx)("td",{children:(0,Rt.jsxs)("div",{className:"flex space-x-2",children:[(null===n||void 0===n?void 0:n.id)!==e.id&&(0,Rt.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>i(e),children:"\u5207\u63db"}),(null===n||void 0===n?void 0:n.id)===e.id&&(0,Rt.jsx)("span",{className:"badge badge-success badge-sm",children:"\u4f7f\u7528\u4e2d"}),(0,Rt.jsx)("button",{className:"btn btn-sm btn-ghost",onClick:()=>p(e),children:"\u7de8\u8f2f"}),(0,Rt.jsx)("button",{className:"btn btn-sm btn-error btn-outline",onClick:()=>m(e),children:"\u522a\u9664"})]})})]},e.id)))})]})}),(0,Rt.jsx)("div",{className:"md:hidden space-y-4",children:e.map((e=>(0,Rt.jsx)("div",{className:"card bg-base-100 shadow ".concat((null===n||void 0===n?void 0:n.id)===e.id?"ring-2 ring-primary":""),children:(0,Rt.jsxs)("div",{className:"card-body p-4",children:[(0,Rt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Rt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rt.jsx)("h3",{className:"font-bold text-lg",children:e.name}),(0,Rt.jsx)("span",{className:"badge badge-outline badge-sm",children:e.role})]}),(null===n||void 0===n?void 0:n.id)===e.id&&(0,Rt.jsx)("span",{className:"badge badge-success",children:"\u4f7f\u7528\u4e2d"})]}),(0,Rt.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-2 text-sm",children:[(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"text-base-content/60",children:"\u96fb\u8a71"}),(0,Rt.jsx)("p",{children:e.phone||"-"})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"text-base-content/60",children:"\u516c\u53f8"}),(0,Rt.jsx)("p",{children:e.company.name||"-"})]})]}),(0,Rt.jsxs)("div",{className:"card-actions justify-end mt-3",children:[(null===n||void 0===n?void 0:n.id)!==e.id&&(0,Rt.jsx)("button",{className:"btn btn-sm btn-primary",onClick:()=>i(e),children:"\u5207\u63db"}),(0,Rt.jsx)("button",{className:"btn btn-sm btn-ghost",onClick:()=>p(e),children:"\u7de8\u8f2f"}),(0,Rt.jsx)("button",{className:"btn btn-sm btn-error btn-outline",onClick:()=>m(e),children:"\u522a\u9664"})]})]})},e.id)))})]}),o&&(0,Rt.jsxs)("div",{className:"modal modal-open",children:[(0,Rt.jsxs)("div",{className:"modal-box relative max-w-2xl",children:[(0,Rt.jsx)("button",{className:"btn btn-sm btn-circle absolute right-2 top-2",onClick:g,children:"\u2715"}),(0,Rt.jsx)(Uu,{initialInfo:c||void 0,onSave:e=>{e.id?r(e):s(h(h({},e),{},{id:Date.now().toString()})),l(!1)},onCancel:g})]}),(0,Rt.jsx)("div",{className:"modal-backdrop",onClick:g})]}),d&&(0,Rt.jsxs)("div",{className:"modal modal-open",children:[(0,Rt.jsxs)("div",{className:"modal-box",children:[(0,Rt.jsx)("h3",{className:"font-bold text-lg",children:"\u78ba\u8a8d\u522a\u9664"}),(0,Rt.jsxs)("p",{className:"py-4",children:["\u78ba\u5b9a\u8981\u522a\u9664\u53d7\u6e2c\u8005\u300c",(0,Rt.jsx)("span",{className:"font-semibold",children:d.name}),"\u300d\u55ce\uff1f",(0,Rt.jsx)("br",{}),(0,Rt.jsx)("span",{className:"text-sm text-base-content/60",children:"\u6b64\u64cd\u4f5c\u7121\u6cd5\u5fa9\u539f\u3002"})]}),(0,Rt.jsxs)("div",{className:"modal-action",children:[(0,Rt.jsx)("button",{className:"btn btn-ghost",onClick:()=>f(null),children:"\u53d6\u6d88"}),(0,Rt.jsx)("button",{className:"btn btn-error",onClick:()=>{d&&(a(d.id),f(null))},children:"\u78ba\u8a8d\u522a\u9664"})]})]}),(0,Rt.jsx)("div",{className:"modal-backdrop",onClick:()=>f(null)})]})]})},Xu=()=>{const[e,n]=(0,t.useState)("getting-started"),i=[{id:"getting-started",title:"\u958b\u59cb\u4f7f\u7528"},{id:"user-management",title:"\u53d7\u6e2c\u8005\u7ba1\u7406"},{id:"file-upload",title:"\u4e0a\u50b3\u8166\u6ce2\u6a94\u6848"},{id:"file-view",title:"\u6aa2\u8996\u8166\u6ce2\u8cc7\u6599"},{id:"file-group",title:"\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"},{id:"analysis",title:"\u57f7\u884c\u5206\u6790"},{id:"report",title:"\u67e5\u770b\u5831\u544a"},{id:"history",title:"\u6b77\u53f2\u7d00\u9304"},{id:"faq",title:"\u5e38\u898b\u554f\u984c"}];return(0,Rt.jsxs)("div",{className:"container mx-auto",children:[(0,Rt.jsx)("div",{className:"text-sm breadcrumbs mb-4",children:(0,Rt.jsxs)("ul",{children:[(0,Rt.jsx)("li",{children:(0,Rt.jsx)(St,{to:"/",children:"\u9996\u9801"})}),(0,Rt.jsx)("li",{children:"\u4f7f\u7528\u6559\u5b78"})]})}),(0,Rt.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\u4f7f\u7528\u6559\u5b78"}),(0,Rt.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,Rt.jsxs)("div",{className:"flex-1 order-2 lg:order-1 space-y-8",children:["getting-started"===e&&(0,Rt.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u958b\u59cb\u4f7f\u7528"}),(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsx)("p",{children:"\u6b61\u8fce\u4f7f\u7528 HyLove \u8166\u6ce2\u5206\u6790\u7cfb\u7d71\uff01\u672c\u7cfb\u7d71\u53ef\u5e6b\u52a9\u60a8\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u6a94\u6848\uff0c \u4e26\u900f\u904e\u591a\u7a2e\u5206\u6790\u529f\u80fd\u7522\u751f\u5c08\u696d\u5831\u544a\u3002"}),(0,Rt.jsxs)("div",{className:"alert alert-info",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Rt.jsx)("span",{children:"\u9996\u6b21\u4f7f\u7528\u6642\uff0c\u7cfb\u7d71\u6703\u81ea\u52d5\u5efa\u7acb\u4e00\u500b\u300c\u9810\u8a2d\u53d7\u6e2c\u8005\u300d\u4f9b\u60a8\u4f7f\u7528\u3002"})]}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u5feb\u901f\u958b\u59cb\u6b65\u9a5f"}),(0,Rt.jsxs)("ul",{className:"steps steps-vertical",children:[(0,Rt.jsx)("li",{className:"step step-primary",children:(0,Rt.jsxs)("div",{className:"text-left ml-4",children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u78ba\u8a8d\u53d7\u6e2c\u8005"}),(0,Rt.jsx)("p",{className:"text-sm text-base-content/60",children:"\u7cfb\u7d71\u53f3\u4e0a\u89d2\u6703\u986f\u793a\u76ee\u524d\u53d7\u6e2c\u8005\uff0c\u53ef\u524d\u5f80\u300c\u53d7\u6e2c\u8005\u7ba1\u7406\u300d\u65b0\u589e\u6216\u5207\u63db"})]})}),(0,Rt.jsx)("li",{className:"step step-primary",children:(0,Rt.jsxs)("div",{className:"text-left ml-4",children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u4e0a\u50b3\u8166\u6ce2\u6a94\u6848"}),(0,Rt.jsx)("p",{className:"text-sm text-base-content/60",children:"\u524d\u5f80\u300c\u8166\u6ce2\u6a94\u6848\u7ba1\u7406\u300d\u4e0a\u50b3 CSV \u683c\u5f0f\u7684\u8166\u6ce2\u8cc7\u6599"})]})}),(0,Rt.jsx)("li",{className:"step step-primary",children:(0,Rt.jsxs)("div",{className:"text-left ml-4",children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u9078\u64c7\u5206\u6790\u529f\u80fd"}),(0,Rt.jsx)("p",{className:"text-sm text-base-content/60",children:"\u5f9e\u9996\u9801\u9078\u64c7\u8981\u4f7f\u7528\u7684\u5206\u6790\u529f\u80fd"})]})}),(0,Rt.jsx)("li",{className:"step step-primary",children:(0,Rt.jsxs)("div",{className:"text-left ml-4",children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u57f7\u884c\u5206\u6790\u4e26\u67e5\u770b\u5831\u544a"}),(0,Rt.jsx)("p",{className:"text-sm text-base-content/60",children:"\u9078\u64c7\u524d\u6e2c/\u5f8c\u6e2c\u8cc7\u6599\uff0c\u9ede\u64ca\u300c\u958b\u59cb\u5206\u6790\u300d"})]})})]})]})]})}),"user-management"===e&&(0,Rt.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u53d7\u6e2c\u8005\u7ba1\u7406"}),(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsx)("p",{children:"\u53d7\u6e2c\u8005\u7ba1\u7406\u529f\u80fd\u8b93\u60a8\u53ef\u4ee5\u5efa\u7acb\u591a\u500b\u53d7\u6e2c\u8005\u8cc7\u6599\uff0c\u65b9\u4fbf\u7ba1\u7406\u4e0d\u540c\u5ba2\u6236\u6216\u500b\u6848\u7684\u8166\u6ce2\u5206\u6790\u7d00\u9304\u3002"}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u65b0\u589e\u53d7\u6e2c\u8005"}),(0,Rt.jsxs)("ol",{className:"list-decimal list-inside space-y-2 ml-4",children:[(0,Rt.jsx)("li",{children:"\u9ede\u64ca\u5de6\u5074\u9078\u55ae\u7684\u300c\u53d7\u6e2c\u8005\u7ba1\u7406\u300d"}),(0,Rt.jsx)("li",{children:"\u9ede\u64ca\u53f3\u4e0a\u89d2\u300c\u65b0\u589e\u53d7\u6e2c\u8005\u300d\u6309\u9215"}),(0,Rt.jsxs)("li",{children:["\u586b\u5beb\u53d7\u6e2c\u8005\u8cc7\u8a0a\uff1a",(0,Rt.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-2 text-base-content/70",children:[(0,Rt.jsx)("li",{children:"\u59d3\u540d\uff08\u5fc5\u586b\uff09"}),(0,Rt.jsx)("li",{children:"\u96fb\u8a71\uff08\u5fc5\u586b\uff09"}),(0,Rt.jsx)("li",{children:"Email\uff08\u5fc5\u586b\uff09"}),(0,Rt.jsx)("li",{children:"\u516c\u53f8\u8cc7\u8a0a"})]})]}),(0,Rt.jsx)("li",{children:"\u9ede\u64ca\u300c\u5132\u5b58\u300d\u5b8c\u6210\u5efa\u7acb"})]}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u5207\u63db\u53d7\u6e2c\u8005"}),(0,Rt.jsx)("p",{children:"\u5728\u53d7\u6e2c\u8005\u5217\u8868\u4e2d\uff0c\u9ede\u64ca\u300c\u5207\u63db\u300d\u6309\u9215\u5373\u53ef\u5207\u63db\u81f3\u8a72\u53d7\u6e2c\u8005\u3002 \u76ee\u524d\u9078\u53d6\u7684\u53d7\u6e2c\u8005\u6703\u4ee5\u7da0\u8272\u6a19\u7c64\u6a19\u793a\u3002"}),(0,Rt.jsxs)("div",{className:"alert alert-warning mt-4",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,Rt.jsx)("span",{children:"\u522a\u9664\u53d7\u6e2c\u8005\u6642\uff0c\u8a72\u53d7\u6e2c\u8005\u7684\u6a94\u6848\u548c\u5206\u6790\u8a18\u9304\u4e0d\u6703\u88ab\u522a\u9664\u3002"})]})]})]})}),"file-upload"===e&&(0,Rt.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u4e0a\u50b3\u8166\u6ce2\u6a94\u6848"}),(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold",children:"\u652f\u63f4\u7684\u6a94\u6848\u683c\u5f0f"}),(0,Rt.jsxs)("div",{className:"flex gap-2",children:[(0,Rt.jsx)("span",{className:"badge badge-primary badge-sm",children:"CSV"}),(0,Rt.jsx)("span",{className:"badge badge-primary badge-sm",children:"XLSX"})]}),(0,Rt.jsx)("p",{className:"text-base-content/70",children:"\u652f\u63f4 CSV \u8207 Excel (XLSX) \u683c\u5f0f\u7684\u8166\u6ce2\u8cc7\u6599\u6a94\u6848\u3002"}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u4e0a\u50b3\u6b65\u9a5f"}),(0,Rt.jsxs)("ol",{className:"list-decimal list-inside space-y-2 ml-4",children:[(0,Rt.jsx)("li",{children:"\u9ede\u64ca\u5de6\u5074\u9078\u55ae\u7684\u300c\u8166\u6ce2\u6a94\u6848\u7ba1\u7406\u300d"}),(0,Rt.jsx)("li",{children:"\u9ede\u64ca\u300c\u9078\u64c7\u6a94\u6848\u300d\u6309\u9215"}),(0,Rt.jsx)("li",{children:"\u53ef\u540c\u6642\u9078\u64c7\u591a\u500b CSV \u6216 XLSX \u6a94\u6848"}),(0,Rt.jsx)("li",{children:"\u78ba\u8a8d\u5df2\u9078\u64c7\u7684\u6a94\u6848\u6578\u91cf"}),(0,Rt.jsx)("li",{children:"\u9ede\u64ca\u300c\u4e0a\u50b3\u6a94\u6848\u300d\u6309\u9215"})]}),(0,Rt.jsxs)("div",{className:"mockup-browser border bg-base-300 mt-6",children:[(0,Rt.jsx)("div",{className:"mockup-browser-toolbar",children:(0,Rt.jsx)("div",{className:"input",children:"\u8166\u6ce2\u6a94\u6848\u7ba1\u7406"})}),(0,Rt.jsxs)("div",{className:"px-4 py-8 bg-base-200 text-center",children:[(0,Rt.jsx)("p",{className:"text-base-content/60",children:"\u9078\u64c7 CSV \u6216 XLSX \u6a94\u6848\u5f8c\u9ede\u64ca\u4e0a\u50b3"}),(0,Rt.jsx)("p",{className:"text-sm text-base-content/40 mt-2",children:"\u652f\u63f4\u591a\u6a94\u6848\u540c\u6642\u4e0a\u50b3"})]})]}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u7ba1\u7406\u5df2\u4e0a\u50b3\u6a94\u6848"}),(0,Rt.jsxs)("ul",{className:"list-disc list-inside space-y-2 ml-4",children:[(0,Rt.jsxs)("li",{children:[(0,Rt.jsx)("strong",{children:"\u6aa2\u8996"}),"\uff1a\u67e5\u770b\u6a94\u6848\u5167\u5bb9\u548c\u8a73\u7d30\u8cc7\u8a0a"]}),(0,Rt.jsxs)("li",{children:[(0,Rt.jsx)("strong",{children:"\u5225\u7a31"}),"\uff1a\u4fee\u6539\u6a94\u6848\u986f\u793a\u540d\u7a31\uff0c\u65b9\u4fbf\u8fa8\u8b58"]}),(0,Rt.jsxs)("li",{children:[(0,Rt.jsx)("strong",{children:"\u7fa4\u7d44"}),"\uff1a\u5c07\u6a94\u6848\u52a0\u5165\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"]}),(0,Rt.jsxs)("li",{children:[(0,Rt.jsx)("strong",{children:"\u522a\u9664"}),"\uff1a\u79fb\u9664\u4e0d\u9700\u8981\u7684\u6a94\u6848"]})]})]})]})}),"file-view"===e&&(0,Rt.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u6aa2\u8996\u8166\u6ce2\u8cc7\u6599"}),(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsx)("p",{children:"\u4e0a\u50b3\u6a94\u6848\u5f8c\uff0c\u60a8\u53ef\u4ee5\u5728\u300c\u8166\u6ce2\u6a94\u6848\u7ba1\u7406\u300d\u9801\u9762\u6aa2\u8996\u6bcf\u500b\u6a94\u6848\u7684\u8a73\u7d30\u5167\u5bb9\u3002 \u7cfb\u7d71\u63d0\u4f9b\u5169\u7a2e\u6aa2\u8996\u6a21\u5f0f\uff1a\u71b1\u529b\u5716\u548c\u8868\u683c\u3002"}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u958b\u555f\u6a94\u6848\u8a73\u60c5"}),(0,Rt.jsxs)("ol",{className:"list-decimal list-inside space-y-2 ml-4",children:[(0,Rt.jsx)("li",{children:"\u524d\u5f80\u300c\u8166\u6ce2\u6a94\u6848\u7ba1\u7406\u300d\u9801\u9762"}),(0,Rt.jsx)("li",{children:"\u9ede\u64ca\u6a94\u6848\u5217\u8868\u4e2d\u7684\u300c\u22ef\u300d\u9078\u55ae"}),(0,Rt.jsx)("li",{children:"\u9078\u64c7\u300c\u6aa2\u8996\u300d"})]}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u71b1\u529b\u5716\u6a21\u5f0f"}),(0,Rt.jsx)("p",{children:"\u71b1\u529b\u5716\u4ee5\u8272\u5f69\u5448\u73fe\u8166\u6ce2\u6578\u503c\u7684\u8b8a\u5316\uff0c\u8b93\u60a8\u5feb\u901f\u638c\u63e1\u6574\u9ad4\u8da8\u52e2\uff1a"}),(0,Rt.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4 text-base-content/70",children:[(0,Rt.jsxs)("li",{children:[(0,Rt.jsx)("span",{className:"text-blue-500",children:"\u85cd\u8272"}),"\uff1a\u8f03\u4f4e\u6578\u503c"]}),(0,Rt.jsxs)("li",{children:[(0,Rt.jsx)("span",{className:"text-green-500",children:"\u7da0\u8272"}),"\uff1a\u4e2d\u7b49\u6578\u503c"]}),(0,Rt.jsxs)("li",{children:[(0,Rt.jsx)("span",{className:"text-red-500",children:"\u7d05\u8272"}),"\uff1a\u8f03\u9ad8\u6578\u503c"]})]}),(0,Rt.jsxs)("div",{className:"bg-base-200 rounded-lg p-4 mt-4",children:[(0,Rt.jsx)("p",{className:"text-sm font-medium mb-2",children:"\u8166\u6ce2\u983b\u6bb5\u5206\u985e"}),(0,Rt.jsxs)("div",{className:"grid gap-2 text-sm",children:[(0,Rt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rt.jsx)("span",{className:"badge badge-sm",children:"\u8a0a\u865f\u54c1\u8cea"}),(0,Rt.jsx)("span",{className:"text-base-content/70",children:"Good Signal Quality"})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rt.jsx)("span",{className:"badge badge-sm badge-primary",children:"\u5fc3\u667a\u72c0\u614b"}),(0,Rt.jsx)("span",{className:"text-base-content/70",children:"Attention\u3001Meditation"})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rt.jsx)("span",{className:"badge badge-sm badge-secondary",children:"\u8166\u6ce2\u983b\u6bb5"}),(0,Rt.jsx)("span",{className:"text-base-content/70",children:"Delta\u3001Theta\u3001Alpha\u3001Beta\u3001Gamma"})]})]})]}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u8868\u683c\u6a21\u5f0f"}),(0,Rt.jsx)("p",{children:"\u8868\u683c\u6a21\u5f0f\u986f\u793a\u539f\u59cb\u6578\u64da\uff0c\u9069\u5408\u9700\u8981\u67e5\u770b\u7cbe\u78ba\u6578\u503c\u7684\u60c5\u6cc1\u3002 \u70ba\u907f\u514d\u8f09\u5165\u904e\u6162\uff0c\u8868\u683c\u6700\u591a\u986f\u793a\u524d 100 \u5217\u8cc7\u6599\u3002"}),(0,Rt.jsxs)("div",{className:"alert alert-info mt-4",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Rt.jsx)("span",{children:"\u5c07\u6ed1\u9f20\u79fb\u5230\u71b1\u529b\u5716\u7684\u8272\u584a\u4e0a\uff0c\u53ef\u4ee5\u67e5\u770b\u8a72\u6642\u9593\u9ede\u7684\u7cbe\u78ba\u6578\u503c\u3002"})]})]})]})}),"file-group"===e&&(0,Rt.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44"}),(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsx)("p",{children:"\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\u53ef\u4ee5\u5e6b\u52a9\u60a8\u7d44\u7e54\u76f8\u95dc\u7684\u6a94\u6848\uff0c\u4f8b\u5982\u540c\u4e00\u6b21\u6e2c\u8a66\u7684\u524d\u6e2c\u548c\u5f8c\u6e2c\u8cc7\u6599\u3002 \u5728\u57f7\u884c\u5206\u6790\u6642\uff0c\u53ef\u4ee5\u76f4\u63a5\u9078\u64c7\u7fa4\u7d44\u4f86\u5feb\u901f\u586b\u5165\u6a94\u6848\u3002"}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u5efa\u7acb\u7fa4\u7d44\u7684\u65b9\u5f0f"}),(0,Rt.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 mt-4",children:[(0,Rt.jsx)("div",{className:"card bg-base-200",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h4",{className:"card-title text-base",children:"\u65b9\u5f0f\u4e00\uff1a\u4e0a\u50b3\u6642\u5efa\u7acb"}),(0,Rt.jsx)("p",{className:"text-sm",children:"\u9ede\u64ca\u300c\u4e0a\u50b3\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\u300d\uff0c\u540c\u6642\u4e0a\u50b3\u591a\u500b\u6a94\u6848\u4e26\u547d\u540d\u7fa4\u7d44\u3002"})]})}),(0,Rt.jsx)("div",{className:"card bg-base-200",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h4",{className:"card-title text-base",children:"\u65b9\u5f0f\u4e8c\uff1a\u5f9e\u73fe\u6709\u6a94\u6848\u5efa\u7acb"}),(0,Rt.jsx)("p",{className:"text-sm",children:"\u5728\u300c\u8166\u6ce2\u8cc7\u6599\u7fa4\u7d44\u300d\u5206\u9801\u9ede\u64ca\u300c\u5efa\u7acb\u65b0\u7fa4\u7d44\u300d\uff0c\u9078\u64c7\u8981\u52a0\u5165\u7684\u6a94\u6848\u3002"})]})})]}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u7fa4\u7d44\u547d\u540d\u5efa\u8b70"}),(0,Rt.jsx)("p",{children:"\u5efa\u8b70\u4f7f\u7528\u6e05\u695a\u7684\u547d\u540d\u65b9\u5f0f\uff0c\u4f8b\u5982\uff1a"}),(0,Rt.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4 text-base-content/70",children:[(0,Rt.jsx)("li",{children:"2024/01/15 \u738b\u5c0f\u660e \u6e2c\u8a66"}),(0,Rt.jsx)("li",{children:"A001 \u5f35\u5148\u751f \u521d\u6b21\u6aa2\u6e2c"}),(0,Rt.jsx)("li",{children:"\u7814\u7a76\u6848\u4f8b #15"})]})]})]})}),"analysis"===e&&(0,Rt.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u57f7\u884c\u5206\u6790"}),(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold",children:"\u53ef\u7528\u7684\u5206\u6790\u529f\u80fd"}),(0,Rt.jsx)("p",{children:"\u7cfb\u7d71\u63d0\u4f9b 15 \u7a2e\u5206\u6790\u529f\u80fd\uff0c\u5206\u70ba\u56db\u5927\u985e\u5225\uff1a"}),(0,Rt.jsx)("h4",{className:"font-medium mt-4 mb-2",children:"\u4e3b\u8981\u529f\u80fd"}),(0,Rt.jsxs)("div",{className:"grid gap-2 md:grid-cols-2",children:[(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-primary badge-sm",children:"\u4e3b\u8981"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u5143\u795e\u97f3"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u8166\u6ce2\u5f71\u97f3\u7de8\u78bc\uff0c\u8f49\u63db\u70ba\u5fc3\u9748\u97f3\u6a02"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-primary badge-sm",children:"\u4e3b\u8981"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u4ea8\u904b\u4f86"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"H.R \u4eba\u529b\u8cc7\u6e90\u516b\u5927\u8077\u80fd\u8a55\u4f30"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-primary badge-sm",children:"\u4e3b\u8981"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u8c9e\u5929\u8ce6"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u516b\u9805\u4eba\u683c\u7279\u8cea\u6f5b\u80fd\u5206\u6790"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-primary badge-sm",children:"\u4e3b\u8981"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u73cd\u5bf6\u7081"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u7926\u7269\u7d50\u6676\u9ad4\u7081\u5834\u6e2c\u8a66\uff08\u53f0\u7063\u5c08\u5229\uff09"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-primary badge-sm",children:"\u4e3b\u8981"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u60c5\u9999\u610f"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u9999\u6c1b\u7081\u5834\u6e2c\u8a66\u8207\u82b3\u7642\u5efa\u8b70"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-primary badge-sm",children:"\u4e3b\u8981"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u7434\u745f\u5408"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u96d9\u4eba\u8166\u6ce2\u516d\u8072\u90e8\u5408\u594f\u97f3\u6a02"})]})]})]}),(0,Rt.jsx)("h4",{className:"font-medium mt-4 mb-2",children:"\u5229\u990a\u7081\uff08\u6b63\u5ff5\u4fee\u884c\u7cfb\u5217\uff09"}),(0,Rt.jsxs)("div",{className:"grid gap-2 md:grid-cols-3",children:[(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-secondary badge-sm",children:"\u5229\u990a\u7081"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u6b63\u5ff5\u4fee\u884c"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u8eab\u5fc3\u6307\u6578\u8a55\u4f30"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-secondary badge-sm",children:"\u5229\u990a\u7081"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u7df4\u7081\u4fee\u884c"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u80fd\u91cf\u904b\u884c\u5206\u6790"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-secondary badge-sm",children:"\u5229\u990a\u7081"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u7df4\u7081\u54c1\u968e"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u4fee\u884c\u5883\u754c\u8a55\u4f30"})]})]})]}),(0,Rt.jsx)("h4",{className:"font-medium mt-4 mb-2",children:"\u6613 Motion\uff08\u60c5\u7dd2\u8a55\u6bd4\u7cfb\u5217\uff09"}),(0,Rt.jsxs)("div",{className:"grid gap-2 md:grid-cols-2",children:[(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-accent badge-sm",children:"\u6613"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u60c5\u7dd2\u7ba1\u7406\u7cfb\u7d71"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u54e1\u5de5\u60c5\u7dd2\u8ffd\u8e64\u8207\u9810\u6e2c"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-accent badge-sm",children:"\u6613"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u5bf5\u7269\u8a55\u6bd4\u6e2c\u8a66"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u8996\u89ba+\u89f8\u89ba\u60c5\u7dd2\u5206\u6790"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-accent badge-sm",children:"\u6613"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u54c1\u8336/\u54c1\u9152/\u54c1\u5496\u5561"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u55c5\u89ba+\u5473\u89ba\u60c5\u7dd2\u5206\u6790"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-accent badge-sm",children:"\u6613"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u9999\u6c34\u8a55\u6bd4\u6e2c\u8a66"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u55c5\u89ba\u60c5\u7dd2\u5206\u6790"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-accent badge-sm",children:"\u6613"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u97f3\u6a02\u6f14\u594f/\u6b4c\u66f2\u6f14\u5531"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u807d\u89ba\u60c5\u7dd2\u5206\u6790"})]})]}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-base-200 rounded",children:[(0,Rt.jsx)("span",{className:"badge badge-accent badge-sm",children:"\u6613"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("p",{className:"font-medium",children:"\u77ed\u8996\u983b\u5ee3\u544a\u8a55\u6bd4"}),(0,Rt.jsx)("p",{className:"text-xs text-base-content/60",children:"\u8996\u807d\u89ba\u60c5\u7dd2\u5206\u6790"})]})]})]}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u57f7\u884c\u5206\u6790\u6b65\u9a5f"}),(0,Rt.jsxs)("ol",{className:"list-decimal list-inside space-y-2 ml-4",children:[(0,Rt.jsx)("li",{children:"\u5f9e\u9996\u9801\u9078\u64c7\u8981\u4f7f\u7528\u7684\u5206\u6790\u529f\u80fd"}),(0,Rt.jsxs)("li",{children:["\u9078\u64c7\u6a94\u6848\u9078\u53d6\u65b9\u5f0f\uff1a",(0,Rt.jsxs)("ul",{className:"list-disc list-inside ml-6 mt-2 text-base-content/70",children:[(0,Rt.jsxs)("li",{children:[(0,Rt.jsx)("strong",{children:"\u500b\u5225\u9078\u64c7"}),"\uff1a\u5206\u5225\u9078\u64c7\u524d\u6e2c\u548c\u5f8c\u6e2c\u8cc7\u6599"]}),(0,Rt.jsxs)("li",{children:[(0,Rt.jsx)("strong",{children:"\u7fa4\u7d44\u9078\u64c7"}),"\uff1a\u5f9e\u5df2\u5efa\u7acb\u7684\u7fa4\u7d44\u4e2d\u9078\u64c7"]})]})]}),(0,Rt.jsx)("li",{children:"\u9078\u64c7\u524d\u6e2c\u8cc7\u6599\uff08\u5206\u6790\u524d\u7684\u8166\u6ce2\u6a94\u6848\uff09"}),(0,Rt.jsx)("li",{children:"\u9078\u64c7\u5f8c\u6e2c\u8cc7\u6599\uff08\u5206\u6790\u5f8c\u7684\u8166\u6ce2\u6a94\u6848\uff09"}),(0,Rt.jsx)("li",{children:"\u586b\u5beb\u5176\u4ed6\u5fc5\u8981\u53c3\u6578\uff08\u5982\u6709\uff09"}),(0,Rt.jsx)("li",{children:"\u9ede\u64ca\u300c\u958b\u59cb\u5206\u6790\u300d\u6309\u9215"}),(0,Rt.jsx)("li",{children:"\u7b49\u5f85\u5206\u6790\u5b8c\u6210\uff0c\u7cfb\u7d71\u6703\u81ea\u52d5\u8df3\u8f49\u81f3\u5831\u544a\u9801\u9762"})]}),(0,Rt.jsxs)("div",{className:"alert alert-info mt-4",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Rt.jsx)("span",{children:"\u5206\u6790\u904e\u7a0b\u9700\u8981\u9023\u63a5\u5f8c\u7aef API\uff0c\u8acb\u78ba\u4fdd\u7db2\u8def\u9023\u7dda\u6b63\u5e38\u3002"})]})]})]})}),"report"===e&&(0,Rt.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u67e5\u770b\u5831\u544a"}),(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsx)("p",{children:"\u5206\u6790\u5b8c\u6210\u5f8c\uff0c\u7cfb\u7d71\u6703\u81ea\u52d5\u7522\u751f\u8a73\u7d30\u7684\u5206\u6790\u5831\u544a\u3002 \u5831\u544a\u5167\u5bb9\u6703\u6839\u64da\u4e0d\u540c\u7684\u5206\u6790\u529f\u80fd\u800c\u6709\u6240\u4e0d\u540c\u3002"}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u5831\u544a\u5167\u5bb9"}),(0,Rt.jsx)("p",{children:"\u4e00\u822c\u5831\u544a\u6703\u5305\u542b\u4ee5\u4e0b\u8cc7\u8a0a\uff1a"}),(0,Rt.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[(0,Rt.jsx)("li",{children:"\u5206\u6790\u6458\u8981"}),(0,Rt.jsx)("li",{children:"\u6578\u64da\u5716\u8868"}),(0,Rt.jsx)("li",{children:"\u8a73\u7d30\u5206\u6790\u7d50\u679c"}),(0,Rt.jsx)("li",{children:"\u5efa\u8b70\u8aaa\u660e"})]}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u5831\u544a\u64cd\u4f5c"}),(0,Rt.jsx)("p",{children:"\u5831\u544a\u9801\u9762\u63d0\u4f9b\u4ee5\u4e0b\u64cd\u4f5c\u6309\u9215\uff1a"}),(0,Rt.jsxs)("ul",{className:"list-disc list-inside space-y-2 ml-4 mt-2",children:[(0,Rt.jsxs)("li",{children:[(0,Rt.jsx)("strong",{children:"\u5217\u5370\u5831\u544a"}),"\uff1a\u5c07\u5831\u544a\u5217\u5370\u6216\u5132\u5b58\u70ba PDF \u6a94\u6848"]}),(0,Rt.jsxs)("li",{children:[(0,Rt.jsx)("strong",{children:"\u8fd4\u56de\u9996\u9801"}),"\uff1a\u56de\u5230\u7cfb\u7d71\u9996\u9801"]}),(0,Rt.jsxs)("li",{children:[(0,Rt.jsx)("strong",{children:"\u518d\u6b21\u5206\u6790"}),"\uff1a\u4f7f\u7528\u76f8\u540c\u7684\u5206\u6790\u529f\u80fd\u9032\u884c\u65b0\u7684\u5206\u6790"]})]}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u5217\u5370\u5831\u544a"}),(0,Rt.jsx)("p",{children:"\u9ede\u64ca\u300c\u5217\u5370\u5831\u544a\u300d\u6309\u9215\u5f8c\uff0c\u7cfb\u7d71\u6703\u958b\u555f\u700f\u89bd\u5668\u7684\u5217\u5370\u5c0d\u8a71\u6846\u3002 \u60a8\u53ef\u4ee5\u9078\u64c7\uff1a"}),(0,Rt.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4 mt-2",children:[(0,Rt.jsx)("li",{children:"\u76f4\u63a5\u5217\u5370\u5230\u5370\u8868\u6a5f"}),(0,Rt.jsx)("li",{children:"\u5132\u5b58\u70ba PDF \u6a94\u6848\uff08\u9078\u64c7\u300c\u53e6\u5b58\u70ba PDF\u300d\u4f5c\u70ba\u76ee\u7684\u5730\uff09"})]}),(0,Rt.jsxs)("div",{className:"alert alert-info mt-4",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Rt.jsx)("span",{children:"\u5217\u5370\u6642\u6703\u81ea\u52d5\u96b1\u85cf\u5c0e\u822a\u5217\u548c\u6309\u9215\uff0c\u53ea\u4fdd\u7559\u5831\u544a\u5167\u5bb9\u3002"})]}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u81ea\u52d5\u5132\u5b58"}),(0,Rt.jsx)("p",{children:"\u6bcf\u6b21\u5206\u6790\u5b8c\u6210\u5f8c\uff0c\u5831\u544a\u6703\u81ea\u52d5\u5132\u5b58\u5230\u300c\u6b77\u53f2\u7d00\u9304\u300d\u4e2d\u3002 \u60a8\u53ef\u4ee5\u96a8\u6642\u5f9e\u6b77\u53f2\u7d00\u9304\u9801\u9762\u91cd\u65b0\u67e5\u770b\u904e\u5f80\u7684\u5206\u6790\u5831\u544a\u3002"}),(0,Rt.jsxs)("div",{className:"alert mt-4",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-info shrink-0 w-6 h-6",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Rt.jsx)("span",{children:"\u5831\u544a\u8cc7\u6599\u6703\u5132\u5b58\u5728\u700f\u89bd\u5668\u4e2d\uff0c\u6e05\u9664\u700f\u89bd\u5668\u8cc7\u6599\u6703\u5c0e\u81f4\u5831\u544a\u907a\u5931\u3002"})]})]})]})}),"history"===e&&(0,Rt.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u6b77\u53f2\u7d00\u9304"}),(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsx)("p",{children:"\u6240\u6709\u5206\u6790\u7d50\u679c\u90fd\u6703\u81ea\u52d5\u5132\u5b58\u5728\u6b77\u53f2\u7d00\u9304\u4e2d\uff0c\u65b9\u4fbf\u60a8\u96a8\u6642\u67e5\u95b1\u904e\u5f80\u7684\u5206\u6790\u5831\u544a\u3002"}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u9032\u5165\u6b77\u53f2\u7d00\u9304"}),(0,Rt.jsx)("p",{children:"\u60a8\u53ef\u4ee5\u900f\u904e\u4ee5\u4e0b\u65b9\u5f0f\u67e5\u770b\u6b77\u53f2\u7d00\u9304\uff1a"}),(0,Rt.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[(0,Rt.jsx)("li",{children:"\u9ede\u64ca\u5de6\u5074\u9078\u55ae\u7684\u300c\u6b77\u53f2\u7d00\u9304\u300d"}),(0,Rt.jsx)("li",{children:"\u5728\u5206\u6790\u529f\u80fd\u9801\u9762\u9ede\u64ca\u53f3\u4e0a\u89d2\u7684\u300c\u6b77\u53f2\u7d00\u9304\u300d\u6309\u9215"})]}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u7be9\u9078\u8207\u641c\u5c0b"}),(0,Rt.jsx)("p",{children:"\u6b77\u53f2\u7d00\u9304\u9801\u9762\u63d0\u4f9b\u591a\u7a2e\u7be9\u9078\u65b9\u5f0f\uff1a"}),(0,Rt.jsxs)("div",{className:"grid gap-3 mt-3",children:[(0,Rt.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-base-200 rounded-lg",children:[(0,Rt.jsx)("span",{className:"badge badge-primary badge-sm mt-0.5",children:"\u72c0\u614b"}),(0,Rt.jsx)("span",{className:"text-sm",children:"\u7be9\u9078\u6210\u529f\u6216\u5931\u6557\u7684\u5206\u6790\u7d00\u9304"})]}),(0,Rt.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-base-200 rounded-lg",children:[(0,Rt.jsx)("span",{className:"badge badge-secondary badge-sm mt-0.5",children:"\u641c\u5c0b"}),(0,Rt.jsx)("span",{className:"text-sm",children:"\u8f38\u5165\u95dc\u9375\u5b57\u641c\u5c0b\u5206\u6790\u540d\u7a31"})]}),(0,Rt.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-base-200 rounded-lg",children:[(0,Rt.jsx)("span",{className:"badge badge-accent badge-sm mt-0.5",children:"\u5206\u6790\u985e\u578b"}),(0,Rt.jsx)("span",{className:"text-sm",children:"\u4f9d\u5206\u6790\u529f\u80fd\u985e\u578b\u7be9\u9078"})]}),(0,Rt.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-base-200 rounded-lg",children:[(0,Rt.jsx)("span",{className:"badge badge-sm mt-0.5",children:"\u53d7\u6e2c\u8005"}),(0,Rt.jsx)("span",{className:"text-sm",children:"\u4f9d\u53d7\u6e2c\u8005\u7be9\u9078\u7d00\u9304"})]})]}),(0,Rt.jsx)("h3",{className:"text-lg font-semibold mt-6",children:"\u67e5\u770b\u5831\u544a"}),(0,Rt.jsx)("p",{children:"\u5728\u6b77\u53f2\u7d00\u9304\u5217\u8868\u4e2d\uff0c\u9ede\u64ca\u4efb\u4e00\u7b46\u7d00\u9304\u5373\u53ef\u958b\u555f\u8a72\u6b21\u5206\u6790\u7684\u5b8c\u6574\u5831\u544a\u3002"}),(0,Rt.jsxs)("div",{className:"alert alert-info mt-4",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Rt.jsx)("span",{children:"\u6bcf\u500b\u5206\u6790\u529f\u80fd\u9801\u9762\u5e95\u90e8\u4e5f\u6703\u986f\u793a\u8a72\u529f\u80fd\u7684\u6b77\u53f2\u5206\u6790\u7d00\u9304\u3002"})]})]})]})}),"faq"===e&&(0,Rt.jsx)("section",{className:"card bg-base-100 shadow-md",children:(0,Rt.jsxs)("div",{className:"card-body",children:[(0,Rt.jsx)("h2",{className:"card-title text-2xl mb-4",children:"\u5e38\u898b\u554f\u984c"}),(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsxs)("div",{className:"collapse collapse-plus bg-base-200",children:[(0,Rt.jsx)("input",{type:"radio",name:"faq-accordion",defaultChecked:!0}),(0,Rt.jsx)("div",{className:"collapse-title font-medium",children:"\u70ba\u4ec0\u9ebc\u6211\u7684\u6a94\u6848\u4e0a\u50b3\u5931\u6557\uff1f"}),(0,Rt.jsxs)("div",{className:"collapse-content",children:[(0,Rt.jsx)("p",{children:"\u8acb\u78ba\u8a8d\uff1a"}),(0,Rt.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-2",children:[(0,Rt.jsx)("li",{children:"\u6a94\u6848\u683c\u5f0f\u70ba CSV \u6216 XLSX"}),(0,Rt.jsx)("li",{children:"\u6a94\u6848\u6c92\u6709\u640d\u58de"}),(0,Rt.jsx)("li",{children:"\u5df2\u9078\u64c7\u53d7\u6e2c\u8005"})]})]})]}),(0,Rt.jsxs)("div",{className:"collapse collapse-plus bg-base-200",children:[(0,Rt.jsx)("input",{type:"radio",name:"faq-accordion"}),(0,Rt.jsx)("div",{className:"collapse-title font-medium",children:"\u5206\u6790\u7d50\u679c\u986f\u793a\u932f\u8aa4\u600e\u9ebc\u8fa6\uff1f"}),(0,Rt.jsxs)("div",{className:"collapse-content",children:[(0,Rt.jsx)("p",{children:"\u5982\u679c\u770b\u5230\u300cRequest failed with status code 422\u300d\u4e4b\u985e\u7684\u932f\u8aa4\uff0c \u53ef\u80fd\u662f\u56e0\u70ba\uff1a"}),(0,Rt.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-2",children:[(0,Rt.jsx)("li",{children:"\u6a94\u6848\u683c\u5f0f\u4e0d\u7b26\u5408\u5206\u6790\u8981\u6c42"}),(0,Rt.jsx)("li",{children:"\u5f8c\u7aef API \u670d\u52d9\u66ab\u6642\u7121\u6cd5\u4f7f\u7528"}),(0,Rt.jsx)("li",{children:"\u7db2\u8def\u9023\u7dda\u554f\u984c"})]}),(0,Rt.jsx)("p",{className:"mt-2",children:"\u8acb\u78ba\u8a8d\u6a94\u6848\u5167\u5bb9\u6b63\u78ba\uff0c\u4e26\u7a0d\u5f8c\u518d\u8a66\u3002"})]})]}),(0,Rt.jsxs)("div",{className:"collapse collapse-plus bg-base-200",children:[(0,Rt.jsx)("input",{type:"radio",name:"faq-accordion"}),(0,Rt.jsx)("div",{className:"collapse-title font-medium",children:"\u8cc7\u6599\u5132\u5b58\u5728\u54ea\u88e1\uff1f"}),(0,Rt.jsxs)("div",{className:"collapse-content",children:[(0,Rt.jsx)("p",{children:"\u6240\u6709\u8cc7\u6599\u90fd\u5132\u5b58\u5728\u700f\u89bd\u5668\u7684 localStorage \u4e2d\u3002 \u9019\u4ee3\u8868\uff1a"}),(0,Rt.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-2",children:[(0,Rt.jsx)("li",{children:"\u8cc7\u6599\u53ea\u5b58\u5728\u65bc\u60a8\u76ee\u524d\u4f7f\u7528\u7684\u700f\u89bd\u5668"}),(0,Rt.jsx)("li",{children:"\u6e05\u9664\u700f\u89bd\u5668\u8cc7\u6599\u6703\u5c0e\u81f4\u6240\u6709\u8cc7\u6599\u907a\u5931"}),(0,Rt.jsx)("li",{children:"\u4e0d\u540c\u88dd\u7f6e\u6216\u700f\u89bd\u5668\u7121\u6cd5\u5171\u4eab\u8cc7\u6599"})]})]})]}),(0,Rt.jsxs)("div",{className:"collapse collapse-plus bg-base-200",children:[(0,Rt.jsx)("input",{type:"radio",name:"faq-accordion"}),(0,Rt.jsx)("div",{className:"collapse-title font-medium",children:"\u5982\u4f55\u5099\u4efd\u6211\u7684\u8cc7\u6599\uff1f"}),(0,Rt.jsx)("div",{className:"collapse-content",children:(0,Rt.jsx)("p",{children:"\u76ee\u524d\u7cfb\u7d71\u66ab\u4e0d\u652f\u63f4\u532f\u51fa/\u5099\u4efd\u529f\u80fd\u3002 \u5efa\u8b70\u5b9a\u671f\u5c07\u91cd\u8981\u7684\u5206\u6790\u5831\u544a\u622a\u5716\u4fdd\u5b58\u3002"})})]}),(0,Rt.jsxs)("div",{className:"collapse collapse-plus bg-base-200",children:[(0,Rt.jsx)("input",{type:"radio",name:"faq-accordion"}),(0,Rt.jsx)("div",{className:"collapse-title font-medium",children:"\u524d\u6e2c\u548c\u5f8c\u6e2c\u8cc7\u6599\u6709\u4ec0\u9ebc\u5dee\u5225\uff1f"}),(0,Rt.jsx)("div",{className:"collapse-content",children:(0,Rt.jsx)("p",{children:"\u524d\u6e2c\u8cc7\u6599\u662f\u9032\u884c\u67d0\u9805\u6d3b\u52d5\u300c\u4e4b\u524d\u300d\u6536\u96c6\u7684\u8166\u6ce2\u8cc7\u6599\uff0c \u5f8c\u6e2c\u8cc7\u6599\u662f\u9032\u884c\u8a72\u6d3b\u52d5\u300c\u4e4b\u5f8c\u300d\u6536\u96c6\u7684\u8cc7\u6599\u3002 \u7cfb\u7d71\u6703\u6bd4\u8f03\u5169\u8005\u7684\u5dee\u7570\u4f86\u7522\u751f\u5206\u6790\u7d50\u679c\u3002"})})]})]})]})}),(0,Rt.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,Rt.jsx)("button",{className:"btn btn-outline",onClick:()=>{const t=i.findIndex((t=>t.id===e));t>0&&n(i[t-1].id)},disabled:e===i[0].id,children:"\u4e0a\u4e00\u7ae0"}),(0,Rt.jsx)("button",{className:"btn btn-primary",onClick:()=>{const t=i.findIndex((t=>t.id===e));t<i.length-1&&n(i[t+1].id)},disabled:e===i[i.length-1].id,children:"\u4e0b\u4e00\u7ae0"})]})]}),(0,Rt.jsx)("div",{className:"lg:w-64 flex-shrink-0 order-1 lg:order-2",children:(0,Rt.jsx)("div",{className:"sticky top-4",children:(0,Rt.jsxs)("ul",{className:"menu bg-base-200 rounded-lg w-full",children:[(0,Rt.jsx)("li",{className:"menu-title",children:"\u76ee\u9304"}),i.map((t=>(0,Rt.jsx)("li",{children:(0,Rt.jsx)("button",{type:"button",className:e===t.id?"active":"",onClick:()=>n(t.id),children:t.title})},t.id)))]})})})]})]})},Yu=e=>{let{children:n}=e;const{currentUser:i,users:s,setCurrentUser:r}=ku(),a=be(),[o,l]=(0,t.useState)(!1),c=Nt().reduce(((e,t)=>{const n=t.group||"\u4e3b\u8981\u529f\u80fd",i=e.find((e=>e.name===n));return i?i.plugins.push(t):e.push({name:n,plugins:[t]}),e}),[]),h={"\u4e3b\u8981\u529f\u80fd":{description:"\u6838\u5fc3\u5206\u6790\u7cfb\u7d71",badgeClass:"badge-primary",order:0},"\u5229\u990a\u7081":{description:"\u6b63\u5ff5\u4fee\u884c\u7cfb\u5217",badgeClass:"badge-secondary",order:1},"\u6613 Motion":{description:"\u60c5\u7dd2\u8a55\u6bd4\u7cfb\u5217",badgeClass:"badge-accent",order:2}};c.sort(((e,t)=>{var n,i,s,r;return(null!==(n=null===(i=h[e.name])||void 0===i?void 0:i.order)&&void 0!==n?n:99)-(null!==(s=null===(r=h[t.name])||void 0===r?void 0:r.order)&&void 0!==s?s:99)}));const u=e=>{const t=e.target.value,n=s.find((e=>e.id===t))||null;r(n)},d=e=>a.pathname===e,f=e=>a.pathname==="/analysis/".concat(e),p=[{path:"/",label:"\u9996\u9801",icon:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{path:"/history",label:"\u6b77\u53f2\u7d00\u9304",icon:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{path:"/files",label:"\u6a94\u6848",icon:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})})},{path:"/users",label:"\u53d7\u6e2c\u8005",icon:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{path:"/tutorial",label:"\u6559\u5b78",icon:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}];return(0,Rt.jsxs)("div",{className:"flex h-screen bg-bg",children:[(0,Rt.jsxs)("aside",{className:"hidden lg:flex flex-col w-60 bg-bg-sidebar border-r border-border",children:[(0,Rt.jsx)("div",{className:"p-5 border-b border-border-light",children:(0,Rt.jsxs)(St,{to:"/",className:"flex items-center gap-3",children:[(0,Rt.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center",children:(0,Rt.jsx)("span",{className:"text-white font-medium text-sm",children:"H"})}),(0,Rt.jsx)("span",{className:"text-lg font-medium text-text tracking-wide",children:"Hylove"})]})}),(0,Rt.jsx)("div",{className:"px-4 py-3 border-b border-border-light",children:(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsx)("label",{className:"label label-minimal py-0 mb-1",children:(0,Rt.jsx)("span",{className:"label-text text-[10px]",children:"\u53d7\u6e2c\u8005"})}),(0,Rt.jsx)("select",{className:"select select-underline w-full text-sm",value:(null===i||void 0===i?void 0:i.id)||"",onChange:u,children:s.map((e=>(0,Rt.jsx)("option",{value:e.id,children:e.name},e.id)))})]})}),(0,Rt.jsxs)("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:[(0,Rt.jsx)("ul",{className:"space-y-1",children:p.map((e=>(0,Rt.jsx)("li",{children:(0,Rt.jsxs)(St,{to:e.path,className:"flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm transition-all duration-200 ".concat(d(e.path)?"bg-bg-active text-text font-medium":"text-text-muted hover:text-text hover:bg-bg-hover"),children:[e.icon,(0,Rt.jsx)("span",{children:e.label})]})},e.path)))}),(0,Rt.jsxs)("div",{className:"mt-8",children:[(0,Rt.jsx)("div",{className:"px-3 mb-3",children:(0,Rt.jsx)("span",{className:"text-xs font-medium text-text-muted uppercase tracking-wider",children:"\u5206\u6790\u529f\u80fd"})}),c.map((e=>{const t=h[e.name]||{description:"",badgeClass:"badge-ghost",order:99};return(0,Rt.jsxs)("div",{className:"mb-5",children:[(0,Rt.jsxs)("div",{className:"px-3 mb-2 flex items-center gap-2",children:[(0,Rt.jsx)("span",{className:"badge badge-sm ".concat(t.badgeClass),children:e.name}),(0,Rt.jsx)("span",{className:"text-[10px] text-text-light",children:t.description})]}),(0,Rt.jsx)("ul",{className:"space-y-0.5",children:e.plugins.map((e=>(0,Rt.jsx)("li",{children:(0,Rt.jsxs)(St,{to:"/analysis/".concat(e.id),className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all duration-200 ".concat(f(e.id)?"bg-bg-active text-text font-medium":"text-text-muted hover:text-text hover:bg-bg-hover"),children:[(0,Rt.jsx)("span",{className:"w-1.5 h-1.5 rounded-full flex-shrink-0 ".concat(f(e.id)?"bg-primary":"bg-text-light")}),(0,Rt.jsx)("span",{className:"truncate",children:e.name}),e.badge&&(0,Rt.jsx)("span",{className:"badge badge-xs ".concat(e.badge.color," ml-1 flex-shrink-0"),children:e.badge.text})]})},e.id)))})]},e.name)}))]})]}),(0,Rt.jsx)("div",{className:"p-4 border-t border-border-light",children:(0,Rt.jsxs)("div",{className:"text-xs text-text-light text-center",children:["\xa9 ",(new Date).getFullYear()," Hylove"]})})]}),o&&(0,Rt.jsxs)("div",{className:"lg:hidden fixed inset-0 z-50 flex",children:[(0,Rt.jsx)("div",{className:"fixed inset-0 bg-text/20 backdrop-blur-sm",onClick:()=>l(!1)}),(0,Rt.jsxs)("aside",{className:"relative flex flex-col w-72 max-w-[85vw] bg-bg-sidebar shadow-xl",children:[(0,Rt.jsxs)("div",{className:"p-5 border-b border-border-light flex items-center justify-between",children:[(0,Rt.jsxs)(St,{to:"/",className:"flex items-center gap-3",onClick:()=>l(!1),children:[(0,Rt.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary flex items-center justify-center",children:(0,Rt.jsx)("span",{className:"text-white font-medium text-sm",children:"H"})}),(0,Rt.jsx)("span",{className:"text-lg font-medium text-text tracking-wide",children:"Hylove"})]}),(0,Rt.jsx)("button",{onClick:()=>l(!1),className:"p-2 hover:bg-bg-hover rounded-lg transition-colors text-text-muted",children:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Rt.jsx)("div",{className:"px-4 py-3 border-b border-border-light",children:(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsx)("label",{className:"label label-minimal py-0 mb-1",children:(0,Rt.jsx)("span",{className:"label-text text-[10px]",children:"\u53d7\u6e2c\u8005"})}),(0,Rt.jsx)("select",{className:"select select-underline w-full text-sm",value:(null===i||void 0===i?void 0:i.id)||"",onChange:u,children:s.map((e=>(0,Rt.jsx)("option",{value:e.id,children:e.name},e.id)))})]})}),(0,Rt.jsxs)("nav",{className:"flex-1 overflow-y-auto px-3 py-4",children:[(0,Rt.jsx)("ul",{className:"space-y-1",children:p.map((e=>(0,Rt.jsx)("li",{children:(0,Rt.jsxs)(St,{to:e.path,onClick:()=>l(!1),className:"flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm transition-all ".concat(d(e.path)?"bg-bg-active text-text font-medium":"text-text-muted hover:text-text hover:bg-bg-hover"),children:[e.icon,(0,Rt.jsx)("span",{children:e.label})]})},e.path)))}),(0,Rt.jsxs)("div",{className:"mt-8",children:[(0,Rt.jsx)("div",{className:"px-3 mb-3",children:(0,Rt.jsx)("span",{className:"text-xs font-medium text-text-muted uppercase tracking-wider",children:"\u5206\u6790\u529f\u80fd"})}),c.map((e=>{const t=h[e.name]||{description:"",badgeClass:"badge-ghost",order:99};return(0,Rt.jsxs)("div",{className:"mb-5",children:[(0,Rt.jsxs)("div",{className:"px-3 mb-2 flex items-center gap-2",children:[(0,Rt.jsx)("span",{className:"badge badge-sm ".concat(t.badgeClass),children:e.name}),(0,Rt.jsx)("span",{className:"text-[10px] text-text-light",children:t.description})]}),(0,Rt.jsx)("ul",{className:"space-y-0.5",children:e.plugins.map((e=>(0,Rt.jsx)("li",{children:(0,Rt.jsxs)(St,{to:"/analysis/".concat(e.id),onClick:()=>l(!1),className:"flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-all ".concat(f(e.id)?"bg-bg-active text-text font-medium":"text-text-muted hover:text-text hover:bg-bg-hover"),children:[(0,Rt.jsx)("span",{className:"w-1.5 h-1.5 rounded-full flex-shrink-0 ".concat(f(e.id)?"bg-primary":"bg-text-light")}),(0,Rt.jsx)("span",{className:"truncate",children:e.name}),e.badge&&(0,Rt.jsx)("span",{className:"badge badge-xs ".concat(e.badge.color," ml-1 flex-shrink-0"),children:e.badge.text})]})},e.id)))})]},e.name)}))]})]})]})]}),(0,Rt.jsxs)("div",{className:"flex-1 flex flex-col min-h-screen overflow-hidden",children:[(0,Rt.jsxs)("header",{className:"lg:hidden flex items-center justify-between px-4 py-3 bg-bg-card border-b border-border",children:[(0,Rt.jsx)("button",{onClick:()=>l(!0),className:"p-2 hover:bg-bg-hover rounded-lg transition-colors",children:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-text-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,Rt.jsxs)(St,{to:"/",className:"flex items-center gap-2",children:[(0,Rt.jsx)("div",{className:"w-7 h-7 rounded-full bg-primary flex items-center justify-center",children:(0,Rt.jsx)("span",{className:"text-white font-medium text-xs",children:"H"})}),(0,Rt.jsx)("span",{className:"font-medium text-text",children:"Hylove"})]}),(0,Rt.jsx)("div",{className:"w-9"})]}),(0,Rt.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,Rt.jsx)("div",{className:"max-w-5xl mx-auto px-4 py-8 lg:px-8 lg:py-12",children:n})})]})]})},qu=()=>(0,Rt.jsx)(Nu,{children:(0,Rt.jsx)(yt,{basename:"/demo-site",children:(0,Rt.jsx)(Yu,{children:(0,Rt.jsxs)(Ve,{children:[(0,Rt.jsx)(Be,{path:"/",element:(0,Rt.jsx)(Dt,{})}),(0,Rt.jsx)(Be,{path:"/analysis/:id",element:(0,Rt.jsx)(Iu,{})}),(0,Rt.jsx)(Be,{path:"/history",element:(0,Rt.jsx)(Ou,{})}),(0,Rt.jsx)(Be,{path:"/files",element:(0,Rt.jsx)(Du,{})}),(0,Rt.jsx)(Be,{path:"/files/:id",element:(0,Rt.jsx)(Vu,{})}),(0,Rt.jsx)(Be,{path:"/analysis/report/:reportId",element:(0,Rt.jsx)(zu,{})}),(0,Rt.jsx)(Be,{path:"/users",element:(0,Rt.jsx)(Hu,{})}),(0,Rt.jsx)(Be,{path:"/tutorial",element:(0,Rt.jsx)(Xu,{})})]})})})});function Ku(e,t){return function(){return e.apply(t,arguments)}}const{toString:$u}=Object.prototype,{getPrototypeOf:Zu}=Object,{iterator:Qu,toStringTag:Ju}=Symbol,ed=(td=Object.create(null),e=>{const t=$u.call(e);return td[t]||(td[t]=t.slice(8,-1).toLowerCase())});var td;const nd=e=>(e=e.toLowerCase(),t=>ed(t)===e),id=e=>t=>typeof t===e,{isArray:sd}=Array,rd=id("undefined");function ad(e){return null!==e&&!rd(e)&&null!==e.constructor&&!rd(e.constructor)&&cd(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const od=nd("ArrayBuffer");const ld=id("string"),cd=id("function"),hd=id("number"),ud=e=>null!==e&&"object"===typeof e,dd=e=>{if("object"!==ed(e))return!1;const t=Zu(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Ju in e)&&!(Qu in e)},fd=nd("Date"),pd=nd("File"),md=nd("Blob"),gd=nd("FileList"),bd=nd("URLSearchParams"),[vd,yd,xd,Sd]=["ReadableStream","Request","Response","Headers"].map(nd);function wd(e,t){let n,i,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),sd(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{if(ad(e))return;const i=s?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let a;for(n=0;n<r;n++)a=i[n],t.call(null,e[a],a,e)}}function Ed(e,t){if(ad(e))return null;t=t.toLowerCase();const n=Object.keys(e);let i,s=n.length;for(;s-- >0;)if(i=n[s],t===i.toLowerCase())return i;return null}const _d="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Td=e=>!rd(e)&&e!==_d;const Md=(Cd="undefined"!==typeof Uint8Array&&Zu(Uint8Array),e=>Cd&&e instanceof Cd);var Cd;const Ad=nd("HTMLFormElement"),Pd=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Nd=nd("RegExp"),kd=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};wd(n,((n,s)=>{let r;!1!==(r=t(n,s,e))&&(i[s]=r||n)})),Object.defineProperties(e,i)};const Ld=nd("AsyncFunction"),Id=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),i=[],_d.addEventListener("message",(e=>{let{source:t,data:s}=e;t===_d&&s===n&&i.length&&i.shift()()}),!1),e=>{i.push(e),_d.postMessage(n,"*")}):e=>setTimeout(e);var n,i})("function"===typeof setImmediate,cd(_d.postMessage)),Rd="undefined"!==typeof queueMicrotask?queueMicrotask.bind(_d):"undefined"!==typeof process&&process.nextTick||Id,Od={isArray:sd,isArrayBuffer:od,isBuffer:ad,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||cd(e.append)&&("formdata"===(t=ed(e))||"object"===t&&cd(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&od(e.buffer),t},isString:ld,isNumber:hd,isBoolean:e=>!0===e||!1===e,isObject:ud,isPlainObject:dd,isEmptyObject:e=>{if(!ud(e)||ad(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(aC){return!1}},isReadableStream:vd,isRequest:yd,isResponse:xd,isHeaders:Sd,isUndefined:rd,isDate:fd,isFile:pd,isBlob:md,isRegExp:Nd,isFunction:cd,isStream:e=>ud(e)&&cd(e.pipe),isURLSearchParams:bd,isTypedArray:Md,isFileList:gd,forEach:wd,merge:function e(){const{caseless:t,skipUndefined:n}=Td(this)&&this||{},i={},s=(s,r)=>{const a=t&&Ed(i,r)||r;dd(i[a])&&dd(s)?i[a]=e(i[a],s):dd(s)?i[a]=e({},s):sd(s)?i[a]=s.slice():n&&rd(s)||(i[a]=s)};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&wd(arguments[r],s);return i},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return wd(t,((t,i)=>{n&&cd(t)?e[i]=Ku(t,n):e[i]=t}),{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let s,r,a;const o={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),r=s.length;r-- >0;)a=s[r],i&&!i(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&Zu(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:ed,kindOfTest:nd,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(sd(e))return e;let t=e.length;if(!hd(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Qu]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:Ad,hasOwnProperty:Pd,hasOwnProp:Pd,reduceDescriptors:kd,freezeMethods:e=>{kd(e,((t,n)=>{if(cd(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];cd(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return sd(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Ed,global:_d,isContextDefined:Td,isSpecCompliantForm:function(e){return!!(e&&cd(e.append)&&"FormData"===e[Ju]&&e[Qu])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(ud(e)){if(t.indexOf(e)>=0)return;if(ad(e))return e;if(!("toJSON"in e)){t[i]=e;const s=sd(e)?[]:{};return wd(e,((e,t)=>{const r=n(e,i+1);!rd(r)&&(s[t]=r)})),t[i]=void 0,s}}return e};return n(e,0)},isAsyncFn:Ld,isThenable:e=>e&&(ud(e)||cd(e))&&cd(e.then)&&cd(e.catch),setImmediate:Id,asap:Rd,isIterable:e=>null!=e&&cd(e[Qu])};function Dd(e,t,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}Od.inherits(Dd,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Od.toJSONObject(this.config),code:this.code,status:this.status}}});const Fd=Dd.prototype,Bd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Bd[e]={value:e}})),Object.defineProperties(Dd,Bd),Object.defineProperty(Fd,"isAxiosError",{value:!0}),Dd.from=(e,t,n,i,s,r)=>{const a=Object.create(Fd);Od.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e));const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return Dd.call(a,o,l,n,i,s),e&&null==a.cause&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",r&&Object.assign(a,r),a};const jd=Dd;function Vd(e){return Od.isPlainObject(e)||Od.isArray(e)}function Gd(e){return Od.endsWith(e,"[]")?e.slice(0,-2):e}function Wd(e,t,n){return e?e.concat(t).map((function(e,t){return e=Gd(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const zd=Od.toFlatObject(Od,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Ud=function(e,t,n){if(!Od.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=Od.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Od.isUndefined(t[e])}))).metaTokens,s=n.visitor||c,r=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Od.isSpecCompliantForm(t);if(!Od.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Od.isDate(e))return e.toISOString();if(Od.isBoolean(e))return e.toString();if(!o&&Od.isBlob(e))throw new jd("Blob is not supported. Use a Buffer instead.");return Od.isArrayBuffer(e)||Od.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let o=e;if(e&&!s&&"object"===typeof e)if(Od.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(Od.isArray(e)&&function(e){return Od.isArray(e)&&!e.some(Vd)}(e)||(Od.isFileList(e)||Od.endsWith(n,"[]"))&&(o=Od.toArray(e)))return n=Gd(n),o.forEach((function(e,i){!Od.isUndefined(e)&&null!==e&&t.append(!0===a?Wd([n],i,r):null===a?n:n+"[]",l(e))})),!1;return!!Vd(e)||(t.append(Wd(s,n,r),l(e)),!1)}const h=[],u=Object.assign(zd,{defaultVisitor:c,convertValue:l,isVisitable:Vd});if(!Od.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!Od.isUndefined(n)){if(-1!==h.indexOf(n))throw Error("Circular reference detected in "+i.join("."));h.push(n),Od.forEach(n,(function(n,r){!0===(!(Od.isUndefined(n)||null===n)&&s.call(t,n,Od.isString(r)?r.trim():r,i,u))&&e(n,i?i.concat(r):[r])})),h.pop()}}(e),t};function Hd(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Xd(e,t){this._pairs=[],e&&Ud(e,this,t)}const Yd=Xd.prototype;Yd.append=function(e,t){this._pairs.push([e,t])},Yd.toString=function(e){const t=e?function(t){return e.call(this,t,Hd)}:Hd;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const qd=Xd;function Kd(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function $d(e,t,n){if(!t)return e;const i=n&&n.encode||Kd;Od.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let r;if(r=s?s(t,n):Od.isURLSearchParams(t)?t.toString():new qd(t,n).toString(i),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const Zd=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Od.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Qd={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Jd={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:qd,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ef="undefined"!==typeof window&&"undefined"!==typeof document,tf="object"===typeof navigator&&navigator||void 0,nf=ef&&(!tf||["ReactNative","NativeScript","NS"].indexOf(tf.product)<0),sf="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,rf=ef&&window.location.href||"http://localhost",af=h(h({},e),Jd);const of=function(e){function t(e,n,i,s){let r=e[s++];if("__proto__"===r)return!0;const a=Number.isFinite(+r),o=s>=e.length;if(r=!r&&Od.isArray(i)?i.length:r,o)return Od.hasOwnProp(i,r)?i[r]=[i[r],n]:i[r]=n,!a;i[r]&&Od.isObject(i[r])||(i[r]=[]);return t(e,n,i[r],s)&&Od.isArray(i[r])&&(i[r]=function(e){const t={},n=Object.keys(e);let i;const s=n.length;let r;for(i=0;i<s;i++)r=n[i],t[r]=e[r];return t}(i[r])),!a}if(Od.isFormData(e)&&Od.isFunction(e.entries)){const n={};return Od.forEachEntry(e,((e,i)=>{t(function(e){return Od.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,n,0)})),n}return null};const lf={transitional:Qd,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=Od.isObject(e);s&&Od.isHTMLForm(e)&&(e=new FormData(e));if(Od.isFormData(e))return i?JSON.stringify(of(e)):e;if(Od.isArrayBuffer(e)||Od.isBuffer(e)||Od.isStream(e)||Od.isFile(e)||Od.isBlob(e)||Od.isReadableStream(e))return e;if(Od.isArrayBufferView(e))return e.buffer;if(Od.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ud(e,new af.classes.URLSearchParams,h({visitor:function(e,t,n,i){return af.isNode&&Od.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=Od.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ud(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),function(e,t,n){if(Od.isString(e))try{return(t||JSON.parse)(e),Od.trim(e)}catch(aC){if("SyntaxError"!==aC.name)throw aC}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||lf.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(Od.isResponse(e)||Od.isReadableStream(e))return e;if(e&&Od.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(aC){if(n){if("SyntaxError"===aC.name)throw jd.from(aC,jd.ERR_BAD_RESPONSE,this,null,this.response);throw aC}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:af.classes.FormData,Blob:af.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Od.forEach(["delete","get","head","post","put","patch"],(e=>{lf.headers[e]={}}));const cf=lf,hf=Od.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),uf=Symbol("internals");function df(e){return e&&String(e).trim().toLowerCase()}function ff(e){return!1===e||null==e?e:Od.isArray(e)?e.map(ff):String(e)}function pf(e,t,n,i,s){return Od.isFunction(i)?i.call(this,t,n):(s&&(t=n),Od.isString(t)?Od.isString(i)?-1!==t.indexOf(i):Od.isRegExp(i)?i.test(t):void 0:void 0)}class mf{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function s(e,t,n){const s=df(t);if(!s)throw new Error("header name must be a non-empty string");const r=Od.findKey(i,s);(!r||void 0===i[r]||!0===n||void 0===n&&!1!==i[r])&&(i[r||t]=ff(e))}const r=(e,t)=>Od.forEach(e,((e,n)=>s(e,n,t)));if(Od.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(Od.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let n,i,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),i=e.substring(s+1).trim(),!n||t[n]&&hf[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t})(e),t);else if(Od.isObject(e)&&Od.isIterable(e)){let n,i,s={};for(const t of e){if(!Od.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[i=t[0]]=(n=s[i])?Od.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}r(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=df(e)){const n=Od.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(Od.isFunction(t))return t.call(this,e,n);if(Od.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=df(e)){const n=Od.findKey(this,e);return!(!n||void 0===this[n]||t&&!pf(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function s(e){if(e=df(e)){const s=Od.findKey(n,e);!s||t&&!pf(0,n[s],s,t)||(delete n[s],i=!0)}}return Od.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const s=t[n];e&&!pf(0,this[s],s,e,!0)||(delete this[s],i=!0)}return i}normalize(e){const t=this,n={};return Od.forEach(this,((i,s)=>{const r=Od.findKey(n,s);if(r)return t[r]=ff(i),void delete t[s];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(s):String(s).trim();a!==s&&delete t[s],t[a]=ff(i),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Od.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&Od.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return i.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[uf]=this[uf]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=df(e);t[i]||(!function(e,t){const n=Od.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,s){return this[i].call(this,t,e,n,s)},configurable:!0})}))}(n,e),t[i]=!0)}return Od.isArray(e)?e.forEach(i):i(e),this}}mf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Od.reduceDescriptors(mf.prototype,((e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}})),Od.freezeMethods(mf);const gf=mf;function bf(e,t){const n=this||cf,i=t||n,s=gf.from(i.headers);let r=i.data;return Od.forEach(e,(function(e){r=e.call(n,r,s.normalize(),t?t.status:void 0)})),s.normalize(),r}function vf(e){return!(!e||!e.__CANCEL__)}function yf(e,t,n){jd.call(this,null==e?"canceled":e,jd.ERR_CANCELED,t,n),this.name="CanceledError"}Od.inherits(yf,jd,{__CANCEL__:!0});const xf=yf;function Sf(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new jd("Request failed with status code "+n.status,[jd.ERR_BAD_REQUEST,jd.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const wf=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let s,r=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=i[a];s||(s=l),n[r]=o,i[r]=l;let h=a,u=0;for(;h!==r;)u+=n[h++],h%=e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),l-s<t)return;const d=c&&l-c;return d?Math.round(1e3*u/d):void 0}};const Ef=function(e,t){let n,i,s=0,r=1e3/t;const a=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=r,n=null,i&&(clearTimeout(i),i=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=r?a(l,e):(n=l,i||(i=setTimeout((()=>{i=null,a(n)}),r-t)))},()=>n&&a(n)]},_f=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,i=0;const s=wf(50,250);return Ef((n=>{const r=n.loaded,a=n.lengthComputable?n.total:void 0,o=r-i,l=s(o);i=r;e({loaded:r,total:a,progress:a?r/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&r<=a?(a-r)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},Tf=(e,t)=>{const n=null!=e;return[i=>t[0]({lengthComputable:n,total:e,loaded:i}),t[1]]},Mf=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Od.asap((()=>e(...n)))},Cf=af.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,af.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(af.origin),af.navigator&&/(msie|trident)/i.test(af.navigator.userAgent)):()=>!0,Af=af.hasStandardBrowserEnv?{write(e,t,n,i,s,r,a){if("undefined"===typeof document)return;const o=["".concat(e,"=").concat(encodeURIComponent(t))];Od.isNumber(n)&&o.push("expires=".concat(new Date(n).toUTCString())),Od.isString(i)&&o.push("path=".concat(i)),Od.isString(s)&&o.push("domain=".concat(s)),!0===r&&o.push("secure"),Od.isString(a)&&o.push("SameSite=".concat(a)),document.cookie=o.join("; ")},read(e){if("undefined"===typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function Pf(e,t,n){let i=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(i||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Nf=e=>e instanceof gf?h({},e):e;function kf(e,t){t=t||{};const n={};function i(e,t,n,i){return Od.isPlainObject(e)&&Od.isPlainObject(t)?Od.merge.call({caseless:i},e,t):Od.isPlainObject(t)?Od.merge({},t):Od.isArray(t)?t.slice():t}function s(e,t,n,s){return Od.isUndefined(t)?Od.isUndefined(e)?void 0:i(void 0,e,0,s):i(e,t,0,s)}function r(e,t){if(!Od.isUndefined(t))return i(void 0,t)}function a(e,t){return Od.isUndefined(t)?Od.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function o(n,s,r){return r in t?i(n,s):r in e?i(void 0,n):void 0}const l={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>s(Nf(e),Nf(t),0,!0)};return Od.forEach(Object.keys(h(h({},e),t)),(function(i){const r=l[i]||s,a=r(e[i],t[i],i);Od.isUndefined(a)&&r!==o||(n[i]=a)})),n}const Lf=e=>{const t=kf({},e);let{data:n,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:r,headers:a,auth:o}=t;if(t.headers=a=gf.from(a),t.url=$d(Pf(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Od.isFormData(n))if(af.hasStandardBrowserEnv||af.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(Od.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach((e=>{let[n,i]=e;t.includes(n.toLowerCase())&&a.set(n,i)}))}if(af.hasStandardBrowserEnv&&(i&&Od.isFunction(i)&&(i=i(t)),i||!1!==i&&Cf(t.url))){const e=s&&r&&Af.read(r);e&&a.set(s,e)}return t},If="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const i=Lf(e);let s=i.data;const r=gf.from(i.headers).normalize();let a,o,l,c,h,{responseType:u,onUploadProgress:d,onDownloadProgress:f}=i;function p(){c&&c(),h&&h(),i.cancelToken&&i.cancelToken.unsubscribe(a),i.signal&&i.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const i=gf.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Sf((function(e){t(e),p()}),(function(e){n(e),p()}),{data:u&&"text"!==u&&"json"!==u?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:i,config:e,request:m}),m=null}m.open(i.method.toUpperCase(),i.url,!0),m.timeout=i.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new jd("Request aborted",jd.ECONNABORTED,e,m)),m=null)},m.onerror=function(t){const i=t&&t.message?t.message:"Network Error",s=new jd(i,jd.ERR_NETWORK,e,m);s.event=t||null,n(s),m=null},m.ontimeout=function(){let t=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const s=i.transitional||Qd;i.timeoutErrorMessage&&(t=i.timeoutErrorMessage),n(new jd(t,s.clarifyTimeoutError?jd.ETIMEDOUT:jd.ECONNABORTED,e,m)),m=null},void 0===s&&r.setContentType(null),"setRequestHeader"in m&&Od.forEach(r.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Od.isUndefined(i.withCredentials)||(m.withCredentials=!!i.withCredentials),u&&"json"!==u&&(m.responseType=i.responseType),f&&([l,h]=_f(f,!0),m.addEventListener("progress",l)),d&&m.upload&&([o,c]=_f(d),m.upload.addEventListener("progress",o),m.upload.addEventListener("loadend",c)),(i.cancelToken||i.signal)&&(a=t=>{m&&(n(!t||t.type?new xf(null,e,m):t),m.abort(),m=null)},i.cancelToken&&i.cancelToken.subscribe(a),i.signal&&(i.signal.aborted?a():i.signal.addEventListener("abort",a)));const b=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(i.url);b&&-1===af.protocols.indexOf(b)?n(new jd("Unsupported protocol "+b+":",jd.ERR_BAD_REQUEST,e)):m.send(s||null)}))},Rf=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,i=new AbortController;const s=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;i.abort(t instanceof jd?t:new xf(t instanceof Error?t.message:t))}};let r=t&&setTimeout((()=>{r=null,s(new jd("timeout ".concat(t," of ms exceeded"),jd.ETIMEDOUT))}),t);const a=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)})),e=null)};e.forEach((e=>e.addEventListener("abort",s)));const{signal:o}=i;return o.unsubscribe=()=>Od.asap(a),o}};function Of(e,t){this.v=e,this.k=t}function Df(e){return function(){return new Ff(e.apply(this,arguments))}}function Ff(e){var t,n;function i(t,n){try{var r=e[t](n),a=r.value,o=a instanceof Of;Promise.resolve(o?a.v:a).then((function(n){if(o){var l="return"===t?"return":"next";if(!a.k||n.done)return i(l,n);n=e[l](n).value}s(r.done?"return":"normal",n)}),(function(e){i("throw",e)}))}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,s){return new Promise((function(r,a){var o={key:e,arg:s,resolve:r,reject:a,next:null};n?n=n.next=o:(t=n=o,i(e,s))}))},"function"!=typeof e.return&&(this.return=void 0)}function Bf(e){return new Of(e,0)}function jf(e){var t={},n=!1;function i(t,i){return n=!0,i=new Promise((function(n){n(e[t](i))})),{done:!1,value:new Of(i,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):i("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):i("return",e)}),t}function Vf(e){var t,n,i,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);s--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new Gf(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function Gf(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Gf=function(e){this.s=e,this.n=e.next},Gf.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Gf(e)}Ff.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ff.prototype.next=function(e){return this._invoke("next",e)},Ff.prototype.throw=function(e){return this._invoke("throw",e)},Ff.prototype.return=function(e){return this._invoke("return",e)};const Wf=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let i,s=0;for(;s<n;)i=s+t,yield e.slice(s,i),s=i},zf=function(){var e=Df((function*(e,t){var n,i=!1,s=!1;try{for(var r,a=Vf(Uf(e));i=!(r=yield Bf(a.next())).done;i=!1){const e=r.value;yield*jf(Vf(Wf(e,t)))}}catch(o){s=!0,n=o}finally{try{i&&null!=a.return&&(yield Bf(a.return()))}finally{if(s)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),Uf=function(){var e=Df((function*(e){if(e[Symbol.asyncIterator])return void(yield*jf(Vf(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Bf(t.read());if(e)break;yield n}}finally{yield Bf(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),Hf=(e,t,n,i)=>{const s=zf(e,t);let r,a=0,o=e=>{r||(r=!0,i&&i(e))};return new ReadableStream({async pull(e){try{const{done:t,value:i}=await s.next();if(t)return o(),void e.close();let r=i.byteLength;if(n){let e=a+=r;n(e)}e.enqueue(new Uint8Array(i))}catch(t){throw o(t),t}},cancel:e=>(o(e),s.return())},{highWaterMark:2})},{isFunction:Xf}=Od,Yf=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(Od.global),{ReadableStream:qf,TextEncoder:Kf}=Od.global,$f=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return!!e(...n)}catch(aC){return!1}},Zf=e=>{e=Od.merge.call({skipUndefined:!0},Yf,e);const{fetch:t,Request:n,Response:i}=e,s=t?Xf(t):"function"===typeof fetch,r=Xf(n),a=Xf(i);if(!s)return!1;const o=s&&Xf(qf),l=s&&("function"===typeof Kf?(c=new Kf,e=>c.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var c;const u=r&&o&&$f((()=>{let e=!1;const t=new n(af.origin,{body:new qf,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),d=a&&o&&$f((()=>Od.isReadableStream(new i("").body))),f={stream:d&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!f[e]&&(f[e]=(t,n)=>{let i=t&&t[e];if(i)return i.call(t);throw new jd("Response type '".concat(e,"' is not supported"),jd.ERR_NOT_SUPPORT,n)})}));const p=async(e,t)=>{const i=Od.toFiniteNumber(e.getContentLength());return null==i?(async e=>{if(null==e)return 0;if(Od.isBlob(e))return e.size;if(Od.isSpecCompliantForm(e)){const t=new n(af.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Od.isArrayBufferView(e)||Od.isArrayBuffer(e)?e.byteLength:(Od.isURLSearchParams(e)&&(e+=""),Od.isString(e)?(await l(e)).byteLength:void 0)})(t):i};return async e=>{let{url:s,method:a,data:o,signal:l,cancelToken:c,timeout:m,onDownloadProgress:g,onUploadProgress:b,responseType:v,headers:y,withCredentials:x="same-origin",fetchOptions:S}=Lf(e),w=t||fetch;v=v?(v+"").toLowerCase():"text";let E=Rf([l,c&&c.toAbortSignal()],m),_=null;const T=E&&E.unsubscribe&&(()=>{E.unsubscribe()});let M;try{if(b&&u&&"get"!==a&&"head"!==a&&0!==(M=await p(y,o))){let e,t=new n(s,{method:"POST",body:o,duplex:"half"});if(Od.isFormData(o)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,n]=Tf(M,_f(Mf(b)));o=Hf(t.body,65536,e,n)}}Od.isString(x)||(x=x?"include":"omit");const t=r&&"credentials"in n.prototype,l=h(h({},S),{},{signal:E,method:a.toUpperCase(),headers:y.normalize().toJSON(),body:o,duplex:"half",credentials:t?x:void 0});_=r&&new n(s,l);let c=await(r?w(_,S):w(s,l));const m=d&&("stream"===v||"response"===v);if(d&&(g||m&&T)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=c[t]}));const t=Od.toFiniteNumber(c.headers.get("content-length")),[n,s]=g&&Tf(t,_f(Mf(g),!0))||[];c=new i(Hf(c.body,65536,n,(()=>{s&&s(),T&&T()})),e)}v=v||"text";let C=await f[Od.findKey(f,v)||"text"](c,e);return!m&&T&&T(),await new Promise(((t,n)=>{Sf(t,n,{data:C,headers:gf.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:_})}))}catch(C){if(T&&T(),C&&"TypeError"===C.name&&/Load failed|fetch/i.test(C.message))throw Object.assign(new jd("Network Error",jd.ERR_NETWORK,e,_),{cause:C.cause||C});throw jd.from(C,C&&C.code,e,_)}}},Qf=new Map,Jf=e=>{let t=e&&e.env||{};const{fetch:n,Request:i,Response:s}=t,r=[i,s,n];let a,o,l=r.length,c=Qf;for(;l--;)a=r[l],o=c.get(a),void 0===o&&c.set(a,o=l?new Map:Zf(t)),c=o;return o},ep=(Jf(),{http:null,xhr:If,fetch:{get:Jf}});Od.forEach(ep,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(aC){}Object.defineProperty(e,"adapterName",{value:t})}}));const tp=e=>"- ".concat(e),np=e=>Od.isFunction(e)||null===e||!1===e;const ip={getAdapter:function(e,t){e=Od.isArray(e)?e:[e];const{length:n}=e;let i,s;const r={};for(let a=0;a<n;a++){let n;if(i=e[a],s=i,!np(i)&&(s=ep[(n=String(i)).toLowerCase()],void 0===s))throw new jd("Unknown adapter '".concat(n,"'"));if(s&&(Od.isFunction(s)||(s=s.get(t))))break;r[n||"#"+a]=s}if(!s){const e=Object.entries(r).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let t=n?e.length>1?"since :\n"+e.map(tp).join("\n"):" "+tp(e[0]):"as no adapter specified";throw new jd("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s},adapters:ep};function sp(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new xf(null,e)}function rp(e){sp(e),e.headers=gf.from(e.headers),e.data=bf.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ip.getAdapter(e.adapter||cf.adapter,e)(e).then((function(t){return sp(e),t.data=bf.call(e,e.transformResponse,t),t.headers=gf.from(t.headers),t}),(function(t){return vf(t)||(sp(e),t&&t.response&&(t.response.data=bf.call(e,e.transformResponse,t.response),t.response.headers=gf.from(t.response.headers))),Promise.reject(t)}))}const ap="1.13.2",op={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{op[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const lp={};op.transitional=function(e,t,n){function i(e,t){return"[Axios v"+ap+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,r)=>{if(!1===e)throw new jd(i(s," has been removed"+(t?" in "+t:"")),jd.ERR_DEPRECATED);return t&&!lp[s]&&(lp[s]=!0,console.warn(i(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,r)}},op.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const cp={assertOptions:function(e,t,n){if("object"!==typeof e)throw new jd("options must be an object",jd.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let s=i.length;for(;s-- >0;){const r=i[s],a=t[r];if(a){const t=e[r],n=void 0===t||a(t,r,e);if(!0!==n)throw new jd("option "+r+" must be "+n,jd.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new jd("Unknown option "+r,jd.ERR_BAD_OPTION)}},validators:op},hp=cp.validators;class up{constructor(e){this.defaults=e||{},this.interceptors={request:new Zd,response:new Zd}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(aC){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=kf(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:s}=t;void 0!==n&&cp.assertOptions(n,{silentJSONParsing:hp.transitional(hp.boolean),forcedJSONParsing:hp.transitional(hp.boolean),clarifyTimeoutError:hp.transitional(hp.boolean)},!1),null!=i&&(Od.isFunction(i)?t.paramsSerializer={serialize:i}:cp.assertOptions(i,{encode:hp.function,serialize:hp.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),cp.assertOptions(t,{baseUrl:hp.spelling("baseURL"),withXsrfToken:hp.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=s&&Od.merge(s.common,s[t.method]);s&&Od.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=gf.concat(r,s);const a=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let h,u=0;if(!o){const e=[rp.bind(this),void 0];for(e.unshift(...a),e.push(...l),h=e.length,c=Promise.resolve(t);u<h;)c=c.then(e[u++],e[u++]);return c}h=a.length;let d=t;for(;u<h;){const e=a[u++],t=a[u++];try{d=e(d)}catch(f){t.call(this,f);break}}try{c=rp.call(this,d)}catch(f){return Promise.reject(f)}for(u=0,h=l.length;u<h;)c=c.then(l[u++],l[u++]);return c}getUri(e){return $d(Pf((e=kf(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Od.forEach(["delete","get","head","options"],(function(e){up.prototype[e]=function(t,n){return this.request(kf(n||{},{method:e,url:t,data:(n||{}).data}))}})),Od.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,s){return this.request(kf(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}up.prototype[e]=t(),up.prototype[e+"Form"]=t(!0)}));const dp=up;class fp{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,s){n.reason||(n.reason=new xf(e,i,s),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new fp((function(t){e=t})),cancel:e}}}const pp=fp;const mp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(mp).forEach((e=>{let[t,n]=e;mp[n]=t}));const gp=mp;const bp=function e(t){const n=new dp(t),i=Ku(dp.prototype.request,n);return Od.extend(i,dp.prototype,n,{allOwnKeys:!0}),Od.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(kf(t,n))},i}(cf);bp.Axios=dp,bp.CanceledError=xf,bp.CancelToken=pp,bp.isCancel=vf,bp.VERSION=ap,bp.toFormData=Ud,bp.AxiosError=jd,bp.Cancel=bp.CanceledError,bp.all=function(e){return Promise.all(e)},bp.spread=function(e){return function(t){return e.apply(null,t)}},bp.isAxiosError=function(e){return Od.isObject(e)&&!0===e.isAxiosError},bp.mergeConfig=kf,bp.AxiosHeaders=gf,bp.formToJSON=e=>of(Od.isHTMLForm(e)?new FormData(e):e),bp.getAdapter=ip.getAdapter,bp.HttpStatusCode=gp,bp.default=bp;const vp=bp;class yp extends Error{constructor(e,t,n){super(e),this.statusCode=t,this.originalError=n,this.name="ApiError"}}async function xp(e,t){const n="".concat("https://hylove-demo.good-nas.cc").concat(e);try{return(await vp.post(n,t,{headers:{"Content-Type":"application/json"},timeout:6e4})).data}catch(i){throw function(e){if(vp.isAxiosError(e)){var t,n,i,s,r;const a=e,o=null===(t=a.response)||void 0===t?void 0:t.status,l=(null===(n=a.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||(null===(s=a.response)||void 0===s||null===(r=s.data)||void 0===r?void 0:r.error);if("ECONNABORTED"===a.code)return new yp("\u8acb\u6c42\u8d85\u6642\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66",o,e);if(!a.response)return new yp("\u7121\u6cd5\u9023\u63a5\u5230\u4f3a\u670d\u5668\uff0c\u8acb\u6aa2\u67e5\u7db2\u8def\u9023\u7dda",void 0,e);const c=l||"\u8acb\u6c42\u5931\u6557 (".concat(o,")");return new yp(c,o,e)}return e instanceof Error?new yp(e.message,void 0,e):new yp("\u767c\u751f\u672a\u77e5\u932f\u8aa4")}(i)}}var Sp,wp=n(488),Ep=n.n(wp),_p=n(999),Tp=n.n(_p),Mp=n(613);class Cp{constructor(){this.steps=[]}[Symbol.iterator](){return this.steps.values()}createStep(e){let t=this.steps.find((t=>t.tick===e));return t||(t={tick:e,notes:[]},this.steps.push(t)),t}addNote(e,t){var n;(null!==(n=this.steps.find((t=>t.tick===e)))&&void 0!==n?n:this.createStep(e)).notes.push(t)}delete(e){const t=this.steps.findIndex((t=>t.tick===e.tick));null!=t&&this.steps.splice(t,1)}sort(){return this.steps.sort(((e,t)=>e.tick-t.tick)),this}getFirstEmptyTick(){return this.sort().steps.filter((e=>!e.notes.length))[0].tick}}class Ap{constructor(e,t,n){this.stepQueue=new Cp,this.stepQueueIndex=0,this.scheduledTicks=new Set,this.currentTick=0,this.currentTickTimestamp=0,this.audioContextStartTime=0,this.schedulerIntervalHandle=null,this.scheduleInterval=200,this.schedulePeriod=500,this.tickDenominator=1024,this.lastTickOffset=300,this.playing=!1,this.noteSchedulingCallback=n,this.wholeNoteLength=e,this.audioContext=t}get schedulePeriodTicks(){return this.schedulePeriod/this.tickDuration}get audioContextTime(){return this.audioContext?1e3*(this.audioContext.currentTime-this.audioContextStartTime):0}get tickDuration(){return this.wholeNoteLength/this.tickDenominator}get calculatedTick(){return this.currentTick+Math.round((this.audioContextTime-this.currentTickTimestamp)/this.tickDuration)}start(){this.playing=!0,this.stepQueue.sort(),this.audioContextStartTime=this.audioContext.currentTime,this.currentTickTimestamp=this.audioContextTime,this.schedulerIntervalHandle||(this.schedulerIntervalHandle=window.setInterval((()=>this.scheduleIterationStep()),this.scheduleInterval))}setIterationStep(e){e=Math.min(this.stepQueue.steps.length-1,e),this.stepQueueIndex=e,this.currentTick=this.stepQueue.steps[this.stepQueueIndex].tick}pause(){this.playing=!1}resume(){this.playing=!0,this.currentTickTimestamp=this.audioContextTime}reset(){this.playing=!1,this.currentTick=0,this.currentTickTimestamp=0,this.stepQueueIndex=0,clearInterval(this.scheduleInterval),this.schedulerIntervalHandle=null}loadNotes(e){let t=this.lastTickOffset;this.stepQueue.steps.length>0&&(t=this.stepQueue.getFirstEmptyTick());for(let n of e)if(!n.IsGrace)for(let e of n.Notes)this.stepQueue.addNote(t,e),this.stepQueue.createStep(t+e.Length.RealValue*this.tickDenominator)}scheduleIterationStep(){var e,t;if(!this.playing)return;this.currentTick=this.calculatedTick,this.currentTickTimestamp=this.audioContextTime;let n=null===(e=this.stepQueue.steps[this.stepQueueIndex])||void 0===e?void 0:e.tick;for(;this.nextTickAvailableAndWithinSchedulePeriod(n);){let e=this.stepQueue.steps[this.stepQueueIndex],i=(e.tick-this.currentTick)*this.tickDuration;i<0&&(i=0),this.scheduledTicks.add(e.tick),this.noteSchedulingCallback(i/1e3,e.notes),this.stepQueueIndex++,n=null===(t=this.stepQueue.steps[this.stepQueueIndex])||void 0===t?void 0:t.tick}for(let i of this.scheduledTicks)i<=this.currentTick&&this.scheduledTicks.delete(i)}nextTickAvailableAndWithinSchedulePeriod(e){return e&&this.currentTickTimestamp+(e-this.currentTick)*this.tickDuration<=this.currentTickTimestamp+this.schedulePeriod}}!function(e){e[e.None=0]="None",e[e.Staccato=1]="Staccato",e[e.Legato=2]="Legato"}(Sp||(Sp={}));const Pp=[[0,"Acoustic Grand Piano"],[1,"Bright Acoustic Piano"],[2,"Electric Grand Piano"],[3,"Honky-tonk Piano"],[4,"Electric Piano 1"],[5,"Electric Piano 2"],[6,"Harpsichord"],[7,"Clavi"],[8,"Celesta"],[9,"Glockenspiel"],[10,"Music Box"],[11,"Vibraphone"],[12,"Marimba"],[13,"Xylophone"],[14,"Tubular Bells"],[15,"Dulcimer"],[16,"Drawbar Organ"],[17,"Percussive Organ"],[18,"Rock Organ"],[19,"Church Organ"],[20,"Reed Organ"],[21,"Accordion"],[22,"Harmonica"],[23,"Tango Accordion"],[24,"Acoustic Guitar (nylon)"],[25,"Acoustic Guitar (steel)"],[26,"Electric Guitar (jazz)"],[27,"Electric Guitar (clean)"],[28,"Electric Guitar (muted)"],[29,"Overdriven Guitar"],[30,"Distortion Guitar"],[31,"Guitar harmonics"],[32,"Acoustic Bass"],[33,"Electric Bass (finger)"],[34,"Electric Bass (pick)"],[35,"Fretless Bass"],[36,"Slap Bass 1"],[37,"Slap Bass 2"],[38,"Synth Bass 1"],[39,"Synth Bass 2"],[40,"Violin"],[41,"Viola"],[42,"Cello"],[43,"Contrabass"],[44,"Tremolo Strings"],[45,"Pizzicato Strings"],[46,"Orchestral Harp"],[47,"Timpani"],[48,"String Ensemble 1"],[49,"String Ensemble 2"],[50,"SynthStrings 1"],[51,"SynthStrings 2"],[52,"Choir Aahs"],[53,"Voice Oohs"],[54,"Synth Choir"],[55,"Orchestra Hit"],[56,"Trumpet"],[57,"Trombone"],[58,"Tuba"],[59,"Muted Trumpet"],[60,"French Horn"],[61,"Brass Section"],[62,"SynthBrass 1"],[63,"SynthBrass 2"],[64,"Soprano Sax"],[65,"Alto Sax"],[66,"Tenor Sax"],[67,"Baritone Sax"],[68,"Oboe"],[69,"English Horn"],[70,"Bassoon"],[71,"Clarinet"],[72,"Piccolo"],[73,"Flute"],[74,"Recorder"],[75,"Pan Flute"],[76,"Blown Bottle"],[77,"Shakuhachi"],[78,"Whistle"],[79,"Ocarina"],[80,"Lead 1 (square)"],[81,"Lead 2 (sawtooth)"],[82,"Lead 3 (calliope)"],[83,"Lead 4 (chiff)"],[84,"Lead 5 (charang)"],[85,"Lead 6 (voice)"],[86,"Lead 7 (fifths)"],[87,"Lead 8 (bass + lead)"],[88,"Pad 1 (new age)"],[89,"Pad 2 (warm)"],[90,"Pad 3 (polysynth)"],[91,"Pad 4 (choir)"],[92,"Pad 5 (bowed)"],[93,"Pad 6 (metallic)"],[94,"Pad 7 (halo)"],[95,"Pad 8 (sweep)"],[96,"FX 1 (rain)"],[97,"FX 2 (soundtrack)"],[98,"FX 3 (crystal)"],[99,"FX 4 (atmosphere)"],[100,"FX 5 (brightness)"],[101,"FX 6 (goblins)"],[102,"FX 7 (echoes)"],[103,"FX 8 (sci-fi)"],[104,"Sitar"],[105,"Banjo"],[106,"Shamisen"],[107,"Koto"],[108,"Kalimba"],[109,"Bag pipe"],[110,"Fiddle"],[111,"Shanai"],[112,"Tinkle Bell"],[113,"Agogo"],[114,"Steel Drums"],[115,"Woodblock"],[116,"Taiko Drum"],[117,"Melodic Tom"],[118,"Synth Drum"],[119,"Reverse Cymbal"],[120,"Guitar Fret Noise"],[121,"Breath Noise"],[122,"Seashore"],[123,"Bird Tweet"],[124,"Telephone Ring"],[125,"Helicopter"],[126,"Applause"],[127,"Gunshot"]],Np=["accordion","acoustic_bass","acoustic_grand_piano","acoustic_guitar_nylon","acoustic_guitar_steel","agogo","alto_sax","applause","bagpipe","banjo","baritone_sax","bassoon","bird_tweet","blown_bottle","brass_section","breath_noise","bright_acoustic_piano","celesta","cello","choir_aahs","church_organ","clarinet","clavinet","contrabass","distortion_guitar","drawbar_organ","dulcimer","electric_bass_finger","electric_bass_pick","electric_grand_piano","electric_guitar_clean","electric_guitar_jazz","electric_guitar_muted","electric_piano_1","electric_piano_2","english_horn","fiddle","flute","french_horn","fretless_bass","fx_1_rain","fx_2_soundtrack","fx_3_crystal","fx_4_atmosphere","fx_5_brightness","fx_6_goblins","fx_7_echoes","fx_8_scifi","glockenspiel","guitar_fret_noise","guitar_harmonics","gunshot","harmonica","harpsichord","helicopter","honkytonk_piano","kalimba","koto","lead_1_square","lead_2_sawtooth","lead_3_calliope","lead_4_chiff","lead_5_charang","lead_6_voice","lead_7_fifths","lead_8_bass__lead","marimba","melodic_tom","music_box","muted_trumpet","oboe","ocarina","orchestra_hit","orchestral_harp","overdriven_guitar","pad_1_new_age","pad_2_warm","pad_3_polysynth","pad_4_choir","pad_5_bowed","pad_6_metallic","pad_7_halo","pad_8_sweep","pan_flute","percussive_organ","piccolo","pizzicato_strings","recorder","reed_organ","reverse_cymbal","rock_organ","seashore","shakuhachi","shamisen","shanai","sitar","slap_bass_1","slap_bass_2","soprano_sax","steel_drums","string_ensemble_1","string_ensemble_2","synth_bass_1","synth_bass_2","synth_brass_1","synth_brass_2","synth_choir","synth_drum","synth_strings_1","synth_strings_2","taiko_drum","tango_accordion","telephone_ring","tenor_sax","timpani","tinkle_bell","tremolo_strings","trombone","trumpet","tuba","tubular_bells","vibraphone","viola","violin","voice_oohs","whistle","woodblock","xylophone"];var kp=n(200),Lp=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{l(i.next(e))}catch(aC){r(aC)}}function o(e){try{l(i.throw(e))}catch(aC){r(aC)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};class Ip{constructor(){this.players=new Map,this.instruments=Pp.filter((e=>Np.includes(this.getSoundfontInstrumentName(e[1])))).map((e=>({midiId:e[0],name:e[1],loaded:!1})))}init(e){this.audioContext=e}load(e){return Lp(this,void 0,void 0,(function*(){const t=this.instruments.find((t=>t.midiId===e));if(!t)throw new Error("SoundfontPlayer does not support midi instrument ID "+e);if(this.players.has(e))return;const n=yield kp.instrument(this.audioContext,this.getSoundfontInstrumentName(t.name));this.players.set(e,n)}))}stop(e){this.players.has(e)&&this.players.get(e).stop()}schedule(e,t,n){this.verifyPlayerLoaded(e),this.applyDynamics(n),this.players.get(e).schedule(t,n)}applyDynamics(e){for(const t of e)t.articulation===Sp.Staccato&&(t.gain=Math.max(t.gain+.3,1.3*t.gain),t.duration=Math.min(.4*t.duration,.4))}verifyPlayerLoaded(e){if(!this.players.has(e))throw new Error("No soundfont player loaded for midi instrument "+e)}getSoundfontInstrumentName(e){return e.toLowerCase().replace(/\s+/g,"_")}}function Rp(e){return e.ParentVoiceEntry.isStaccato()?Sp.Staccato:Sp.None}function Op(e,t){let n=e.Length.RealValue*t;return e.NoteTie&&(Object.is(e.NoteTie.StartNote,e)&&e.NoteTie.Notes[1]?n+=e.NoteTie.Notes[1].Length.RealValue*t:n=0),n}function Dp(e){return e.ParentVoiceEntry.ParentVoice.Volume}class Fp{constructor(){this.subscribers=new Map}on(e,t){this.subscribers.get(e)||this.subscribers.set(e,[]),this.subscribers.get(e).push(t)}emit(e){const t=this.subscribers.get(e)||[];for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];for(const r of t)r(...i)}}var Bp=n(998);const jp=new WeakSet,Vp=new WeakMap,Gp=new WeakMap,Wp=new WeakMap,zp=new WeakMap,Up=new WeakMap,Hp=new WeakMap,Xp=new WeakMap,Yp=new WeakMap,qp=new WeakMap,Kp=new WeakMap,$p={construct:()=>$p},Zp=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Qp=(e,t)=>{const n=[];let i=e.replace(/^[\s]+/,""),s=i.match(Zp);for(;null!==s;){const e=s[1].slice(1,-1),r=s[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(r),i=i.slice(s[0].length).replace(/^[\s]+/,""),s=i.match(Zp)}return[n.join(";"),i]},Jp=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},em=e=>{if(!(e=>{try{new new Proxy(e,$p)}catch(t){return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!==typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},tm={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},nm=(e,t)=>e.context===t,im=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch(t){return!1}return!0},sm=()=>{try{return new DOMException("","IndexSizeError")}catch(e){return e.code=1,e.name="IndexSizeError",e}},rm=e=>{var t;e.getChannelData=(t=e.getChannelData,n=>{try{return t.call(e,n)}catch(i){if(12===i.code)throw sm();throw i}})},am={numberOfChannels:1},om=-34028234663852886e22,lm=-om,cm=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},hm=e=>cm(Xp,e),um=e=>{if(jp.has(e))throw new Error("The AudioNode is already stored.");jp.add(e),hm(e).forEach((e=>e(!0)))},dm=e=>{if(!jp.has(e))throw new Error("The AudioNode is not stored.");jp.delete(e),hm(e).forEach((e=>e(!1)))},fm={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},pm=e=>void 0===e||"number"===typeof e||"string"===typeof e&&("balanced"===e||"interactive"===e||"playback"===e),mm=e=>"context"in e,gm=e=>mm(e[0]),bm=e=>"port"in e,vm=e=>"inputs"in e,ym=(e,t,n,i)=>{if(vm(t)){const s=t.inputs[i];return e.connect(s,n,0),[s,n,0]}return e.connect(t,n,i),[t,n,i]},xm=(e,t)=>{if(!hm(e).delete(t))throw new Error("Missing the expected event listener.")},Sm=(e,t,n,i)=>{vm(t)?e.disconnect(t.inputs[i],n,0):e.disconnect(t,n,i)},wm=e=>cm(Vp,e),Em=e=>cm(Wp,e),_m=e=>cm(Gp,e),Tm=e=>cm(zp,e),Mm=(e,t,n,i)=>{for(const s of e)if(n(s)){if(i)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},Cm=e=>jp.has(e),Am=e=>Yp.has(e),Pm=e=>!jp.has(e),Nm=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[i]=n;return e.delete(i),i},km=(e,t)=>{!bm(e)&&t.every((e=>0===e.size))&&dm(e)},Lm=e=>new Promise((t=>{const n=e.createScriptProcessor(256,1,1),i=e.createGain(),s=e.createBuffer(1,2,44100),r=s.getChannelData(0);r[0]=1,r[1]=1;const a=e.createBufferSource();a.buffer=s,a.loop=!0,a.connect(n).connect(e.destination),a.connect(i),a.disconnect(i),n.onaudioprocess=i=>{const s=i.inputBuffer.getChannelData(0);Array.prototype.some.call(s,(e=>1===e))?t(!0):t(!1),a.stop(),n.onaudioprocess=null,a.disconnect(n),n.disconnect(e.destination)},a.start()})),Im=(e,t)=>{const n=new Map;for(const i of e)for(const e of i){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach(((e,n)=>t(n,e)))},Rm=e=>"context"in e,Om=e=>{const t=new Map;e.connect=(e=>function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Rm(n)?e(n,i,s):e(n,i),a=t.get(n);return void 0===a?t.set(n,[{input:s,output:i}]):a.every((e=>e.input!==s||e.output!==i))&&a.push({input:s,output:i}),r})(e.connect.bind(e)),e.disconnect=(n=>(i,s,r)=>{if(n.apply(e),void 0===i)t.clear();else if("number"===typeof i)for(const[e,n]of t){const s=n.filter((e=>e.output!==i));0===s.length?t.delete(e):t.set(e,s)}else if(t.has(i))if(void 0===s)t.delete(i);else{const e=t.get(i);if(void 0!==e){const n=e.filter((e=>e.output!==s&&(e.input!==r||void 0===r)));0===n.length?t.delete(i):t.set(i,n)}}for(const[n,a]of t)a.forEach((t=>{Rm(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)}))})(e.disconnect)},Dm=(e,t,n,i)=>{let[s,r,a]=n;Mm(e[r],[t,s,a],(e=>e[0]===t&&e[1]===s),i)},Fm=(e,t,n,i)=>{let[s,r]=n;Mm(e,[t,s,r],(e=>e[0]===t&&e[1]===s),i)},Bm=(e,t,n,i)=>{let[s,r,a]=n;const o=e.get(s);void 0===o?e.set(s,new Set([[r,t,a]])):Mm(o,[r,t,a],(e=>e[0]===r&&e[1]===t),i)},jm=(e,t,n)=>{let[i,s,r]=t;const a=e.get(i);void 0===a?e.set(i,new Set([[s,r]])):Mm(a,[s,r],(e=>e[0]===s),n)},Vm=(e,t,n,i)=>{const s=cm(e,t),r=Nm(s,(e=>e[0]===n&&e[1]===i));return 0===s.size&&e.delete(t),r},Gm=(e,t,n)=>{const i=cm(e,t),s=Nm(i,(e=>e[0]===n));return 0===i.size&&e.delete(t),s},Wm=(e,t,n,i)=>{const{activeInputs:s,passiveInputs:r}=wm(t),{outputs:a}=wm(e),o=hm(e),l=a=>{const o=_m(t),l=_m(e);if(a){const a=Vm(r,e,n,i);Dm(s,e,a,!1),Am(e)||ym(l,o,n,i),Pm(t)&&um(t)}else{const a=((e,t,n,i)=>Nm(e[i],(e=>e[0]===t&&e[1]===n)))(s,e,n,i);Bm(r,i,a,!1),Am(e)||Sm(l,o,n,i),Cm(t)&&km(t,s)}};return!!Mm(a,[t,n,i],(e=>e[0]===t&&e[1]===n&&e[2]===i),!0)&&(o.add(l),Cm(e)?Dm(s,e,[n,i,l],!0):Bm(r,i,[e,n,l],!0),!0)},zm=(e,t,n)=>{const{activeInputs:i,passiveInputs:s}=Em(t),{outputs:r}=wm(e),a=hm(e),o=r=>{const a=_m(e),o=Tm(t);if(r){const t=Gm(s,e,n);Fm(i,e,t,!1),Am(e)||a.connect(o,n)}else{const t=((e,t,n)=>Nm(e,(e=>e[0]===t&&e[1]===n)))(i,e,n);jm(s,t,!1),Am(e)||a.disconnect(o,n)}};return!!Mm(r,[t,n],(e=>e[0]===t&&e[1]===n),!0)&&(a.add(o),Cm(e)?Fm(i,e,[n,o],!0):jm(s,[e,n,o],!0),!0)},Um=(e,t,n)=>{for(const i of e)if(i[0]===t&&i[1]===n)return e.delete(i),i;return null},Hm=(e,t,n,i)=>{const[s,r]=((e,t,n,i)=>{const{activeInputs:s,passiveInputs:r}=wm(t),a=Um(s[i],e,n);if(null===a)return[Vm(r,e,n,i)[2],!1];return[a[2],!0]})(e,t,n,i);if(null!==s&&(xm(e,s),r&&!Am(e)&&Sm(_m(e),_m(t),n,i)),Cm(t)){const{activeInputs:e}=wm(t);km(t,e)}},Xm=(e,t,n)=>{const[i,s]=((e,t,n)=>{const{activeInputs:i,passiveInputs:s}=Em(t),r=Um(i,e,n);if(null===r)return[Gm(s,e,n)[1],!1];return[r[2],!0]})(e,t,n);null!==i&&(xm(e,i),s&&!Am(e)&&_m(e).disconnect(Tm(t),n))};class Ym{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._map.forEach(((n,i)=>e.call(t,n,i,this)))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const qm={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,outputChannelCount:void 0,parameterData:{},processorOptions:{}},Km=e=>{const t=[];for(let n=0;n<e;n+=1)t.push(1);return t};function $m(e,t,n,i,s){if("function"===typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],i,s);else{const r=e.getChannelData(i);if(0===t[n].byteLength)t[n]=r.slice(s,s+128);else{const e=new Float32Array(r.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}const Zm=(e,t,n,i,s)=>{"function"===typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],i,s):0!==t[n].byteLength&&e.getChannelData(i).set(t[n],s)},Qm=(e,t)=>{const n=[];for(let i=0;i<e;i+=1){const e=[],s="number"===typeof t?t:t[i];for(let t=0;t<s;t+=1)e.push(new Float32Array(128));n.push(e)}return n},Jm=async(e,t,n,i,s,r)=>{const a=null===t?128*Math.ceil(e.context.length/128):t.length,o=i.channelCount*i.numberOfInputs,l=i.outputChannelCount.reduce(((e,t)=>e+t),0),c=0===l?null:n.createBuffer(l,a,n.sampleRate);if(void 0===s)throw new Error("Missing the processor constructor.");const u=wm(e),d=await((e,t)=>{const n=cm(Kp,e),i=_m(t);return cm(n,i)})(n,e),f=Qm(i.numberOfInputs,i.channelCount),p=Qm(i.numberOfOutputs,i.outputChannelCount),m=Array.from(e.parameters.keys()).reduce(((e,t)=>h(h({},e),{},{[t]:new Float32Array(128)})),{});for(let h=0;h<a;h+=128){if(i.numberOfInputs>0&&null!==t)for(let e=0;e<i.numberOfInputs;e+=1)for(let n=0;n<i.channelCount;n+=1)$m(t,f[e],n,n,h);void 0!==s.parameterDescriptors&&null!==t&&s.parameterDescriptors.forEach(((e,n)=>{let{name:i}=e;$m(t,m,i,o+n,h)}));for(let e=0;e<i.numberOfInputs;e+=1)for(let t=0;t<i.outputChannelCount[e];t+=1)0===p[e][t].byteLength&&(p[e][t]=new Float32Array(128));try{const e=f.map(((e,t)=>0===u.activeInputs[t].size?[]:e)),t=r(h/n.sampleRate,n.sampleRate,(()=>d.process(e,p,m)));if(null!==c)for(let n=0,s=0;n<i.numberOfOutputs;n+=1){for(let e=0;e<i.outputChannelCount[n];e+=1)Zm(c,p[n],e,s+e,h);s+=i.outputChannelCount[n]}if(!t)break}catch(g){e.dispatchEvent(new ErrorEvent("processorerror",{error:g}));break}}return c},eg={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},tg={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},ng={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},ig={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},sg={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},rg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},ag=(e,t,n)=>{const i=t[n];if(void 0===i)throw e();return i},og={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},lg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},cg=()=>{try{return new DOMException("","InvalidStateError")}catch(e){return e.code=11,e.name="InvalidStateError",e}},hg=()=>{try{return new DOMException("","InvalidAccessError")}catch(e){return e.code=15,e.name="InvalidAccessError",e}},ug={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},dg=(e,t,n,i,s,r,a,o,l,c,h)=>{const u=c.length;let d=o;for(let f=0;f<u;f+=1){let o=n[0]*c[f];for(let t=1;t<s;t+=1){const i=d-t&l-1;o+=n[t]*r[i],o-=e[t]*a[i]}for(let e=s;e<i;e+=1)o+=n[e]*r[d-e&l-1];for(let n=s;n<t;n+=1)o-=e[n]*a[d-n&l-1];r[d]=c[f],a[d]=o,d=d+1&l-1,h[f]=o}return d},fg={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},pg=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch(n){}return!1},mg={numberOfChannels:1},gg=(e,t,n)=>{const i=t[n];void 0!==i&&i!==e[n]&&(e[n]=i)},bg=(e,t)=>{gg(e,t,"channelCount"),gg(e,t,"channelCountMode"),gg(e,t,"channelInterpretation")},vg=e=>"function"===typeof e.getFloatTimeDomainData,yg=(e,t,n)=>{const i=t[n];void 0!==i&&i!==e[n].value&&(e[n].value=i)},xg=e=>{e.start=(t=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2?arguments[2]:void 0;if("number"===typeof s&&s<0||i<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,i,s)})(e.start)},Sg=e=>{var t;e.stop=(t=e.stop,function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})},wg=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),Eg=async(e,t)=>{const n=await(e=>new Promise(((t,n)=>{const{port1:i,port2:s}=new MessageChannel;i.onmessage=e=>{let{data:n}=e;i.close(),s.close(),t(n)},i.onmessageerror=e=>{let{data:t}=e;i.close(),s.close(),n(t)},s.postMessage(e)})))(t);return new e(n)},_g=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),Tg=["offset"];function Mg(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function Cg(e,t){let n=[0,0];for(let r=e.length-1;r>=0;r-=1)s=t,n=[(i=n)[0]*s[0]-i[1]*s[1],i[0]*s[1]+i[1]*s[0]],n[0]+=e[r];var i,s;return n}const Ag=["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"],Pg=["channelCount","channelCountMode","pan"],Ng=["curve","oversample"],kg=()=>{try{return new DOMException("","NotSupportedError")}catch(e){return e.code=9,e.name="NotSupportedError",e}},Lg={numberOfChannels:1},Ig={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,type:"sine"},Rg={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Og={disableNormalization:!1},Dg={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Fg=()=>{try{return new DOMException("","UnknownError")}catch(e){return e.name="UnknownError",e}},Bg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},jg=e=>{if(null===e)return!1;const t=e.length;return t%2!==0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},Vg=(e,t,n,i)=>{let s=Object.getPrototypeOf(e);for(;!s.hasOwnProperty(t);)s=Object.getPrototypeOf(s);const{get:r,set:a}=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,{get:n(r),set:i(a)})},Gg=(e,t)=>n=>{const i={value:e};return Object.defineProperties(n,{currentTarget:i,target:i}),"function"===typeof t?t.call(e,n):t.handleEvent.call(e,n)},Wg=(zg=new Map,Ug=new WeakMap,(e,t)=>{const n=Ug.get(e);if(void 0!==n)return n;const i=zg.get(e);if(void 0!==i)return i;try{const n=t();return n instanceof Promise?(zg.set(e,n),n.catch((()=>!1)).then((t=>(zg.delete(e),Ug.set(e,t),t)))):(Ug.set(e,n),n)}catch(s){return Ug.set(e,!1),!1}});var zg,Ug;const Hg="undefined"===typeof window?null:window,Xg=(e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null)(Hg),Yg=(e=>t=>null!==e&&t instanceof e)(Xg),qg=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(Hg),Kg=((e,t,n)=>i=>{if("closed"===i.state&&null!==t&&"webkitAudioContext"!==t.name){if(!e(i)){const e=Up.get(i);if(void 0!==e)return e;const n=new t;return Up.set(i,n),n}{const e=Up.get(i);if(void 0!==e)return e;if(null!==n){const e=new n(1,1,44100);return Up.set(i,e),e}}}return null})(Yg,qg,Xg),$g=(e=>(t,n)=>{const i=e(t);return n(null!==i?i:t)})(Kg),Zg=((e,t,n)=>(i,s)=>{const r=n(i,(e=>e.createAnalyser()));if(bg(r,s),!(s.maxDecibels>s.minDecibels))throw t();return gg(r,s,"fftSize"),gg(r,s,"maxDecibels"),gg(r,s,"minDecibels"),gg(r,s,"smoothingTimeConstant"),e(vg,(()=>vg(r)))||(e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const i=Math.max(n.length,e.fftSize);for(let e=0;e<i;e+=1)t[e]=.0078125*(n[e]-128);return t}})(r),r})(Wg,sm,$g),Qg=(e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(wm),Jg=((e,t,n)=>async(i,s,r,a)=>{const o=e(i),l=[...a,i];await Promise.all(o.activeInputs.map(((e,a)=>Array.from(e).filter((e=>{let[t]=e;return!l.includes(t)})).map((async e=>{let[o,c]=e;const h=t(o),u=await h.render(o,s,l),d=i.context.destination;n(o)||i===d&&n(i)||u.connect(r,c,a)})))).reduce(((e,t)=>[...e,...t]),[]))})(wm,Qg,Am),eb=((e,t,n)=>()=>{const i=new WeakMap;return{render(s,r,a){const o=i.get(r);return void 0!==o?Promise.resolve(o):(async(s,r,a)=>{let o=t(s);if(!nm(o,r)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=e(r,t)}return i.set(r,o),await n(s,r,o,a),o})(s,r,a)}}})(Zg,_m,Jg),tb=new WeakMap,nb=(ib=Hp,e=>{const t=ib.get(e);if(void 0===t)throw cg();return t});var ib;const sb=new WeakMap,rb=(e=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,i){if(null!==n){let s=this._listeners.get(n);void 0===s&&(s=e(this,n),"function"===typeof n&&this._listeners.set(n,s)),this._nativeEventTarget.addEventListener(t,s,i)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const i=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===i?null:i,n)}})(Gg),ab=(e=>t=>null!==e&&t instanceof e)(qg),ob=(e=>t=>null!==e&&"function"===typeof e.AudioNode&&t instanceof e.AudioNode)(Hg),lb=(e=>t=>null!==e&&"function"===typeof e.AudioParam&&t instanceof e.AudioParam)(Hg),cb=((e,t,n,i,s,r,a,o,l,c,h,u,d,f,p)=>class extends c{constructor(t,i,s,r){super(s),this._context=t,this._nativeAudioNode=s;const a=h(t);u(a)&&!0!==n(Lm,(()=>Lm(a)))&&Om(s),Gp.set(this,s),Xp.set(this,new Set),i&&um(this),e(this,r,s)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw s();const c=h(this._context),u=p(c);if(d(e)||f(e))throw r();if(mm(e)){const s=_m(e);try{const i=ym(this._nativeAudioNode,s,n,o);if(u||Pm(this)?this._nativeAudioNode.disconnect(...i):Pm(e)&&um(e),bm(e)){const e=t.get(s);if(void 0===e){const e=c.createGain();e.connect(i[0],0,i[2]),t.set(s,new Map([[o,e]]))}else if(void 0===e.get(o)){const t=c.createGain();t.connect(i[0],0,i[2]),e.set(o,t)}}}catch(g){if(12===g.code)throw r();throw g}if(u?((e,t,n,i)=>{const{outputs:s}=wm(e);if(Mm(s,[t,n,i],(e=>e[0]===t&&e[1]===n&&e[2]===i),!0)){const{activeInputs:s}=wm(t);return Dm(s,e,[n,i,null],!0),!0}return!1})(this,e,n,o):Wm(this,e,n,o)){const t=l([this],e);Im(t,i(u))}return e}const m=Tm(e);if("playbackRate"===m.name)throw a();try{this._nativeAudioNode.connect(m,n),(u||Pm(this))&&this._nativeAudioNode.disconnect(m,n)}catch(g){if(12===g.code)throw r();throw g}if(u?((e,t,n)=>{const{outputs:i}=wm(e);if(Mm(i,[t,n],(e=>e[0]===t&&e[1]===n),!0)){const{activeInputs:i}=Em(t);return Fm(i,e,[n,null],!0),!0}return!1})(this,e,n):zm(this,e,n)){const t=l([this],e);Im(t,i(u))}}disconnect(e,t,n){let i;if(void 0===e)i=(e=>{const t=wm(e),n=[];for(const i of t.outputs)gm(i)?Hm(e,...i):Xm(e,...i),n.push(i[0]);return t.outputs.clear(),n})(this);else if("number"===typeof e){if(e<0||e>=this.numberOfOutputs)throw s();i=((e,t)=>{const n=wm(e),i=[];for(const s of n.outputs)s[1]===t&&(gm(s)?Hm(e,...s):Xm(e,...s),i.push(s[0]),n.outputs.delete(s));return i})(this,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw s();if(mm(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw s();if(i=((e,t,n,i)=>{const s=wm(e);return Array.from(s.outputs).filter((e=>e[0]===t&&(void 0===n||e[1]===n)&&(void 0===i||e[2]===i))).map((t=>(gm(t)?Hm(e,...t):Xm(e,...t),s.outputs.delete(t),t[0])))})(this,e,t,n),0===i.length)throw r()}for(const s of i){const e=l([this],s);Im(e,o)}}})((hb=Vp,(e,t,n)=>{const i=[];for(let s=0;s<n.numberOfInputs;s+=1)i.push(new Set);hb.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),tb,Wg,((e,t,n,i,s,r)=>a=>(o,l)=>{const c=e.get(o);if(void 0===c){if(!a&&r(o)){const e=i(o),{outputs:r}=n(o);for(const n of r)if(gm(n)){const s=i(n[0]);t(e,s,n[1],n[2])}else{const t=s(n[0]);e.disconnect(t,n[1])}}e.set(o,l)}else e.set(o,c+l)})(Yp,Sm,wm,_m,Tm,Cm),sm,hg,kg,((e,t,n,i,s,r,a,o)=>(l,c)=>{const h=t.get(l);if(void 0===h)throw new Error("Missing the expected cycle count.");const u=r(l.context),d=o(u);if(h===c){if(t.delete(l),!d&&a(l)){const t=i(l),{outputs:r}=n(l);for(const n of r)if(gm(n)){const s=i(n[0]);e(t,s,n[1],n[2])}else{const e=s(n[0]);t.connect(e,n[1])}}}else t.set(l,h-c)})(ym,Yp,wm,_m,Tm,nb,Cm,Yg),((e,t,n)=>function i(s,r){const a=mm(r)?r:n(e,r);if((e=>"delayTime"in e)(a))return[];if(s[0]===a)return[s];if(s.includes(a))return[];const{outputs:o}=t(a);return Array.from(o).map((e=>i([...s,a],e[0]))).reduce(((e,t)=>e.concat(t)),[])})(sb,wm,cm),rb,nb,ab,ob,lb,Yg);var hb;const ub=((e,t,n,i,s,r)=>class extends e{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tm;const a=s(e),o=h(h({},tm),n),l=i(a,o);super(e,!1,l,r(a)?t():null),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(cb,eb,sm,Zg,nb,Yg),db=new WeakSet,fb=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(Hg),pb=(mb=new Uint32Array(1),e=>(mb[0]=e,mb[0]));var mb;const gb=((e,t)=>n=>{n.copyFromChannel=function(i,s){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),a=e(s);if(a>=n.numberOfChannels)throw t();const o=n.length,l=n.getChannelData(a),c=i.length;for(let e=r<0?-r:0;e+r<o&&e<c;e+=1)i[e]=l[e+r]},n.copyToChannel=function(i,s){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),a=e(s);if(a>=n.numberOfChannels)throw t();const o=n.length,l=n.getChannelData(a),c=i.length;for(let e=r<0?-r:0;e+r<o&&e<c;e+=1)l[e+r]=i[e]}})(pb,sm),bb=(e=>t=>{t.copyFromChannel=(n=>function(i,s){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),a=e(s);if(r<t.length)return n.call(t,i,a,r)})(t.copyFromChannel),t.copyToChannel=(n=>function(i,s){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),a=e(s);if(r<t.length)return n.call(t,i,a,r)})(t.copyToChannel)})(pb),vb=((e,t,n,i,s,r,a,o)=>{let l=null;return class c{constructor(c){if(null===s)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:d,sampleRate:f}=h(h({},am),c);null===l&&(l=new s(1,1,44100));const p=null!==i&&t(r,r)?new i({length:u,numberOfChannels:d,sampleRate:f}):l.createBuffer(d,u,f);if(0===p.numberOfChannels)throw n();return"function"!==typeof p.copyFromChannel?(a(p),rm(p)):t(im,(()=>im(p)))||o(p),e.add(p),p}static[Symbol.hasInstance](t){return null!==t&&"object"===typeof t&&Object.getPrototypeOf(t)===c.prototype||e.has(t)}}})(db,Wg,kg,fb,Xg,(e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch(t){return!1}return!0})(fb),gb,bb),yb=(e=>(t,n)=>{const i=e(t,(e=>e.createGain()));return bg(i,n),yg(i,n,"gain"),i})($g),xb=(e=>(t,n)=>{const i=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(i).connect(i.context.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(i),i.disconnect()};n.addEventListener("ended",s)})(yb),Sb=(e=>t=>{const n=e(t,(e=>e.createOscillator()));try{n.start(-1)}catch(i){return i instanceof RangeError}return!1})($g),wb=(e=>t=>{const n=t.createBuffer(1,1,44100),i=e(t,(e=>e.createBufferSource()));i.buffer=n,i.start(),i.stop();try{return i.stop(),!0}catch(s){return!1}})($g),Eb=(e=>t=>{const n=e(t,(e=>e.createOscillator()));try{n.stop(-1)}catch(i){return i instanceof RangeError}return!1})($g),_b=(e=>(t,n)=>{const i=e(n,(e=>e.createGain()));t.connect(i);const s=(e=>()=>{e.call(t,i),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),_g(t,i),t.stop=(e=>{let n=!1;return function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n)try{e.call(t,s)}catch(r){i.gain.setValueAtTime(0,s)}else e.call(t,s),n=!0}})(t.stop)})($g),Tb=((e,t,n)=>async(i,s,r,a)=>{const o=t(i);await Promise.all(Array.from(o.activeInputs).map((async t=>{let[i,o]=t;const l=e(i),c=await l.render(i,s,a);n(i)||c.connect(r,o)})))})(Qg,Em,Am),Mb=(e=>(t,n,i,s)=>e(n,t,i,s))(Tb),Cb=((e,t,n,i,s,r,a,o,l,c,h,u,d)=>(f,p)=>{const m=n(f,(e=>e.createBufferSource()));return bg(m,p),yg(m,p,"playbackRate"),gg(m,p,"buffer"),gg(m,p,"loop"),gg(m,p,"loopEnd"),gg(m,p,"loopStart"),t(i,(()=>i(f)))||(e=>{e.start=(t=>{let n=!1;return function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(n)throw cg();t.call(e,i,s,r),n=!0}})(e.start)})(m),t(s,s)||((e,t)=>{let n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY;var s;e.start=((s,r)=>function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;if(s.call(e,a,o),l>=0&&l<Number.POSITIVE_INFINITY){const s=Math.max(a,t.currentTime),o=l/e.playbackRate.value;n=s+o,r.call(e,Math.min(n,i))}})(e.start,e.stop),e.stop=(s=e.stop,function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i=Math.max(r,t.currentTime),s.call(e,Math.min(n,i))})})(m,f),t(r,(()=>r(f)))||h(m),t(a,(()=>a(f)))||u(m,f),t(o,(()=>o(f)))||xg(m),t(l,(()=>l(f)))||d(m,f),t(c,(()=>c(f)))||Sg(m),e(f,m),m})(xb,Wg,$g,(e=>t=>{const n=e(t,(e=>e.createBufferSource()));n.start();try{n.start()}catch(i){return!0}return!1})($g),(e=>()=>{if(null===e)return Promise.resolve(!1);const t=new e(1,1,44100),n=t.createBuffer(1,1,t.sampleRate),i=t.createBufferSource();return n.getChannelData(0)[0]=1,i.buffer=n,i.start(0,0,0),i.connect(t.destination),new Promise((e=>{t.oncomplete=t=>{let{renderedBuffer:n}=t;e(0===n.getChannelData(0)[0])},t.startRendering()}))})(Xg),(e=>t=>{const n=e(t,(e=>e.createBufferSource())),i=t.createBuffer(1,1,44100);n.buffer=i;try{n.start(0,1)}catch(s){return!1}return!0})($g),(e=>t=>{const n=e(t,(e=>e.createBufferSource()));n.start();try{n.stop()}catch(i){return!1}return!0})($g),Sb,wb,Eb,(e=>{e.start=(t=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2?arguments[2]:void 0;const r=e.buffer,a=null===r?i:Math.min(r.duration,i);null!==r&&a>r.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,a,s)})(e.start)}),(e=>(t,n)=>{const i=n.createBuffer(1,1,n.sampleRate);null===t.buffer&&(t.buffer=i),e(t,"buffer",(e=>()=>{const n=e.call(t);return n===i?null:n}),(e=>n=>e.call(t,null===n?i:n)))})(Vg),_b),Ab=((e,t)=>(n,i,s,r)=>(e(i).replay(s),t(i,n,s,r)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(Em),Tb),Pb=((e,t,n,i,s)=>()=>{const r=new WeakMap;let a=null,o=null;return{set start(e){a=e},set stop(e){o=e},render(l,c,h){const u=r.get(c);return void 0!==u?Promise.resolve(u):(async(l,c,h)=>{let u=n(l);const d=nm(u,c);if(!d){const e={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=t(c,e),null!==a&&u.start(...a),null!==o&&u.stop(o)}return r.set(c,u),d?await e(c,l.playbackRate,u.playbackRate,h):await i(c,l.playbackRate,u.playbackRate,h),await s(l,c,u,h),u})(l,c,h)}}})(Mb,Cb,_m,Ab,Jg),Nb=((e,t,n,i,s,r,a,o,l,c,h,u)=>function(d,f,p){let m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const b=new Bp.AutomationEventList(p.defaultValue),v=f?i(b):null,y={get defaultValue(){return p.defaultValue},get maxValue(){return null===m?p.maxValue:m},get minValue(){return null===g?p.minValue:g},get value(){return p.value},set value(e){p.value=e,y.setValueAtTime(e,d.context.currentTime)},cancelAndHoldAtTime(e){if("function"===typeof p.cancelAndHoldAtTime)null===v&&b.flush(d.context.currentTime),b.add(s(e)),p.cancelAndHoldAtTime(e);else{const t=Array.from(b).pop();null===v&&b.flush(d.context.currentTime),b.add(s(e));const n=Array.from(b).pop();p.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?p.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?p.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?p.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&p.setValueCurveAtTime(n.values,n.startTime,n.duration))}return y},cancelScheduledValues:e=>(null===v&&b.flush(d.context.currentTime),b.add(r(e)),p.cancelScheduledValues(e),y),exponentialRampToValueAtTime:(e,t)=>(null===v&&b.flush(d.context.currentTime),b.add(a(e,t)),p.exponentialRampToValueAtTime(e,t),y),linearRampToValueAtTime:(e,t)=>(null===v&&b.flush(d.context.currentTime),b.add(o(e,t)),p.linearRampToValueAtTime(e,t),y),setTargetAtTime:(e,t,n)=>(null===v&&b.flush(d.context.currentTime),b.add(l(e,t,n)),p.setTargetAtTime(e,t,n),y),setValueAtTime:(e,t)=>(null===v&&b.flush(d.context.currentTime),b.add(c(e,t)),p.setValueAtTime(e,t),y),setValueCurveAtTime(e,t,n){if(null!==u&&"webkitAudioContext"===u.name){const i=t+n,s=d.context.sampleRate,r=Math.ceil(t*s),a=Math.floor(i*s),o=a-r,l=new Float32Array(o);for(let h=0;h<o;h+=1){const i=(e.length-1)/n*((r+h)/s-t),a=Math.floor(i),o=Math.ceil(i);l[h]=a===o?e[a]:(1-(i-a))*e[a]+(1-(o-i))*e[o]}null===v&&b.flush(d.context.currentTime),b.add(h(l,t,n)),p.setValueCurveAtTime(l,t,n);const c=a/s;c<i&&y.setValueAtTime(l[l.length-1],c),y.setValueAtTime(e[e.length-1],i)}else null===v&&b.flush(d.context.currentTime),b.add(h(e,t,n)),p.setValueCurveAtTime(e,t,n);return y}};return n.set(y,p),t.set(y,d),e(y,v),y})((kb=Wp,(e,t)=>{kb.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),sb,zp,(e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:i}=n;t.exponentialRampToValueAtTime(i,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:i}=n;t.linearRampToValueAtTime(i,e)}else if("setTarget"===n.type){const{startTime:e,target:i,timeConstant:s}=n;t.setTargetAtTime(i,e,s)}else if("setValue"===n.type){const{startTime:e,value:i}=n;t.setValueAtTime(i,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:i,values:s}=n;t.setValueCurveAtTime(s,i,e)}}}})),Bp.createCancelAndHoldAutomationEvent,Bp.createCancelScheduledValuesAutomationEvent,Bp.createExponentialRampToValueAutomationEvent,Bp.createLinearRampToValueAutomationEvent,Bp.createSetTargetAutomationEvent,Bp.createSetValueAutomationEvent,Bp.createSetValueCurveAutomationEvent,qg);var kb;const Lb=((e,t,n,i,s,r,a,o)=>class extends e{constructor(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fm;const o=r(e),l=h(h({},fm),i),c=s(o,l),u=a(o),d=u?t():null;super(e,!1,c,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==i.buffer&&void 0!==i.buffer,this._nativeAudioBufferSourceNode=c,this._onended=null,this._playbackRate=n(this,u,c.playbackRate,lm,om)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){try{this._nativeAudioBufferSourceNode.buffer=e}catch(t){if(null!==e||17!==t.code)throw t;if(null!==this._nativeAudioBufferSourceNode.buffer){const e=this._nativeAudioBufferSourceNode.buffer,t=e.numberOfChannels;for(let n=0;n<t;n+=1)e.getChannelData(n).fill(0);this._isBufferNullified=!0}}if(null!==e){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"===typeof e?o(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}get playbackRate(){return this._playbackRate}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(e,t,n),null!==this._audioBufferSourceNodeRenderer)this._audioBufferSourceNodeRenderer.start=void 0===n?[e,t]:[e,t,n];else{um(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),setTimeout((()=>dm(this)),1e3)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(cb,Pb,Nb,cg,Cb,nb,Yg,Gg),Ib=((e,t,n,i,s,r,a,o)=>class extends e{constructor(e,n){const i=r(e),l=a(i),c=s(i,n,l);super(e,!1,c,l?t(o):null),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(cb,(e=>{let t=null;return{render:(n,i,s)=>(null===t&&(t=(async(t,n,i)=>{const s=n.destination;return await e(t,n,s,i),s})(n,i,s)),t)}}),sm,cg,((e,t)=>(n,i,s)=>{const r=n.destination;if(r.channelCount!==i)try{r.channelCount=i}catch(o){}s&&"explicit"!==r.channelCountMode&&(r.channelCountMode="explicit"),0===r.maxChannelCount&&Object.defineProperty(r,"maxChannelCount",{value:i});const a=e(n,{channelCount:i,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return t(a,"channelCount",(e=>()=>e.call(a)),(e=>t=>{e.call(a,t);try{r.channelCount=t}catch(n){if(t>r.maxChannelCount)throw n}})),t(a,"channelCountMode",(e=>()=>e.call(a)),(e=>t=>{e.call(a,t),r.channelCountMode=t})),t(a,"channelInterpretation",(e=>()=>e.call(a)),(e=>t=>{e.call(a,t),r.channelInterpretation=t})),Object.defineProperty(a,"maxChannelCount",{get:()=>r.maxChannelCount}),a.connect(r),a})(yb,Vg),nb,Yg,Jg),Rb=(e=>(t,n)=>{const i=e(t,(e=>e.createBiquadFilter()));return bg(i,n),yg(i,n,"Q"),yg(i,n,"detune"),yg(i,n,"frequency"),yg(i,n,"gain"),gg(i,n,"type"),i})($g),Ob=((e,t,n,i,s)=>()=>{const r=new WeakMap;return{render(a,o,l){const c=r.get(o);return void 0!==c?Promise.resolve(c):(async(a,o,l)=>{let c=n(a);const h=nm(c,o);if(!h){const e={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=t(o,e)}return r.set(o,c),h?(await e(o,a.Q,c.Q,l),await e(o,a.detune,c.detune,l),await e(o,a.frequency,c.frequency,l),await e(o,a.gain,c.gain,l)):(await i(o,a.Q,c.Q,l),await i(o,a.detune,c.detune,l),await i(o,a.frequency,c.frequency,l),await i(o,a.gain,c.gain,l)),await s(a,o,c,l),c})(a,o,l)}}})(Mb,Rb,_m,Ab,Jg),Db=((e,t,n,i,s,r,a)=>class extends e{constructor(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eg;const o=r(e),l=h(h({},eg),i),c=s(o,l),u=a(o);super(e,!1,c,u?n():null),this._Q=t(this,u,c.Q,lm,om),this._detune=t(this,u,c.detune,1200*Math.log2(lm),-1200*Math.log2(lm)),this._frequency=t(this,u,c.frequency,e.sampleRate/2,0),this._gain=t(this,u,c.gain,40*Math.log10(lm),om),this._nativeBiquadFilterNode=c}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){if(this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n),e.length!==t.length||t.length!==n.length)throw i()}})(cb,Nb,Ob,hg,Rb,nb,Yg),Fb=((e,t)=>(n,i,s)=>{const r=new Set;return n.connect=(s=>function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const c=0===r.size;if(t(a))return s.call(n,a,o,l),e(r,[a,o,l],(e=>e[0]===a&&e[1]===o&&e[2]===l),!0),c&&i(),a;s.call(n,a,o),e(r,[a,o],(e=>e[0]===a&&e[1]===o),!0),c&&i()})(n.connect),n.disconnect=(e=>(i,a,o)=>{const l=r.size>0;if(void 0===i)e.apply(n),r.clear();else if("number"===typeof i){e.call(n,i);for(const e of r)e[1]===i&&r.delete(e)}else{t(i)?e.call(n,i,a,o):e.call(n,i,a);for(const e of r)e[0]!==i||void 0!==a&&e[1]!==a||void 0!==o&&e[2]!==o||r.delete(e)}const c=0===r.size;l&&c&&s()})(n.disconnect),n})(Mm,ob),Bb=((e,t,n)=>(i,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const r=t(i,(e=>e.createBufferSource()));n(s,(()=>{const e=s.numberOfInputs;for(let t=0;t<e;t+=1)r.connect(s,0,t)}),(()=>r.disconnect(s)))})(cg,$g,Fb),jb=((e,t)=>(n,i)=>{const s=e(n,(e=>e.createChannelMerger(i.numberOfInputs)));return 1!==s.channelCount&&"explicit"!==s.channelCountMode&&t(n,s),bg(s,i),s})($g,Bb),Vb=((e,t,n)=>()=>{const i=new WeakMap;return{render(s,r,a){const o=i.get(r);return void 0!==o?Promise.resolve(o):(async(s,r,a)=>{let o=t(s);if(!nm(o,r)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=e(r,t)}return i.set(r,o),await n(s,r,o,a),o})(s,r,a)}}})(jb,_m,Jg),Gb=((e,t,n,i,s)=>class extends e{constructor(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tg;const a=i(e),o=h(h({},tg),r);super(e,!1,n(a,o),s(a)?t():null)}})(cb,Vb,jb,nb,Yg),Wb=(e=>(t,n)=>{const i=e(t,(e=>e.createChannelSplitter(n.numberOfOutputs)));return bg(i,n),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw cg()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw cg()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw cg()}})})(i),i})($g),zb=((e,t,n)=>()=>{const i=new WeakMap;return{render(s,r,a){const o=i.get(r);return void 0!==o?Promise.resolve(o):(async(s,r,a)=>{let o=t(s);if(!nm(o,r)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=e(r,t)}return i.set(r,o),await n(s,r,o,a),o})(s,r,a)}}})(Wb,_m,Jg),Ub=((e,t,n,i,s)=>class extends e{constructor(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ng;const a=i(e),o=(e=>h(h({},e),{},{channelCount:e.numberOfOutputs}))(h(h({},ng),r));super(e,!1,n(a,o),s(a)?t():null)}})(cb,zb,Wb,nb,Yg),Hb=((e,t,n,i)=>(s,a)=>{let{offset:o}=a,l=r(a,Tg);const c=s.createBuffer(1,2,s.sampleRate),u=t(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=n(s,h(h({},l),{},{gain:o})),f=c.getChannelData(0);f[0]=1,f[1]=1,u.buffer=c,u.loop=!0;const p={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(e){d.channelCount=e},get channelCountMode(){return d.channelCountMode},set channelCountMode(e){d.channelCountMode=e},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return u.onended},set onended(e){u.onended=e},addEventListener(){return u.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return u.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return u.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.start.call(u,e)},stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.stop.call(u,e)}};return e(s,u),i(_g(p,d),(()=>u.connect(d)),(()=>u.disconnect(d)))})(xb,Cb,yb,Fb),Xb=((e,t,n,i,s,r)=>(a,o)=>{if(void 0===a.createConstantSource)return i(a,o);const l=n(a,(e=>e.createConstantSource()));return bg(l,o),yg(l,o,"offset"),t(s,(()=>s(a)))||xg(l),t(r,(()=>r(a)))||Sg(l),e(a,l),l})(xb,Wg,$g,Hb,Sb,Eb),Yb=((e,t,n,i,s)=>()=>{const r=new WeakMap;let a=null,o=null;return{set start(e){a=e},set stop(e){o=e},render(l,c,h){const u=r.get(c);return void 0!==u?Promise.resolve(u):(async(l,c,h)=>{let u=n(l);const d=nm(u,c);if(!d){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=t(c,e),null!==a&&u.start(a),null!==o&&u.stop(o)}return r.set(c,u),d?await e(c,l.offset,u.offset,h):await i(c,l.offset,u.offset,h),await s(l,c,u,h),u})(l,c,h)}}})(Mb,Xb,_m,Ab,Jg),qb=((e,t,n,i,s,r,a)=>class extends e{constructor(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ig;const o=s(e),l=h(h({},ig),a),c=i(o,l),u=r(o),d=u?n():null;super(e,!1,c,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=c,this._offset=t(this,u,c.offset,lm,om),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"===typeof e?a(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer)this._constantSourceNodeRenderer.start=e;else{um(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),setTimeout((()=>dm(this)),1e3)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}})(cb,Nb,Yb,Xb,nb,Yg,Gg),Kb=((e,t,n)=>(i,s)=>{let{buffer:r,channelCount:a,channelCountMode:o,channelInterpretation:l,disableNormalization:c}=s;const h=e(i,(e=>e.createConvolver()));bg(h,{channelCount:Math.max(a,2),channelCountMode:"max"===o?o:"clamped-max",channelInterpretation:l});const u=t(i,{channelCount:a,channelCountMode:o,channelInterpretation:l,gain:1}),d={get buffer(){return h.buffer},set buffer(e){h.buffer=e},get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){e>2&&(h.channelCount=e),u.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){"max"===e&&(h.channelCountMode=e),u.channelCountMode=e},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(e){h.channelInterpretation=e,u.channelInterpretation=e},get context(){return h.context},get inputs(){return[h]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get normalize(){return h.normalize},set normalize(e){h.normalize=e},addEventListener(){return h.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return h.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return h.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};c===d.normalize&&(d.normalize=!c),r!==d.buffer&&(d.buffer=r);return n(_g(d,u),(()=>h.connect(u)),(()=>h.disconnect(u)))})($g,yb,Fb),$b=((e,t,n,i)=>(s,r)=>{const a=e(s,(e=>e.createConvolver()));try{a.channelCount=1}catch(o){return t(s,r)}if(bg(a,r),r.disableNormalization===a.normalize&&(a.normalize=!r.disableNormalization),gg(a,r,"buffer"),r.channelCount>2)throw n();if(i(a,"channelCount",(e=>()=>e.call(a)),(e=>t=>{if(t>2)throw n();return e.call(a,t)})),"max"===r.channelCountMode)throw n();return i(a,"channelCountMode",(e=>()=>e.call(a)),(e=>t=>{if("max"===t)throw n();return e.call(a,t)})),a})($g,Kb,kg,Vg),Zb=((e,t,n)=>()=>{const i=new WeakMap;return{render(s,r,a){const o=i.get(r);return void 0!==o?Promise.resolve(o):(async(s,r,a)=>{let o=t(s);if(!nm(o,r)){const t={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=e(r,t)}return i.set(r,o),vm(o)?await n(s,r,o.inputs[0],a):await n(s,r,o,a),o})(s,r,a)}}})($b,_m,Jg),Qb=((e,t,n,i,s)=>class extends e{constructor(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sg;const a=i(e),o=h(h({},sg),r),l=n(a,o);super(e,!1,l,s(a)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=l}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0}else this._isBufferNullified=!1}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(cb,Zb,$b,nb,Yg),Jb=(e=>(t,n)=>{const i=e(t,(e=>e.createDelay(n.maxDelayTime)));return bg(i,n),yg(i,n,"delayTime"),i})($g),ev=((e,t,n,i,s)=>r=>{const a=new WeakMap;return{render(o,l,c){const h=a.get(l);return void 0!==h?Promise.resolve(h):(async(o,l,c)=>{let h=n(o);const u=nm(h,l);if(!u){const e={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,delayTime:h.delayTime.value,maxDelayTime:r};h=t(l,e)}return a.set(l,h),u?await e(l,o.delayTime,h.delayTime,c):await i(l,o.delayTime,h.delayTime,c),await s(o,l,h,c),h})(o,l,c)}}})(Mb,Jb,_m,Ab,Jg),tv=((e,t,n,i,s,r)=>class extends e{constructor(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rg;const o=s(e),l=h(h({},rg),a),c=i(o,l),u=r(o);super(e,!1,c,u?n(l.maxDelayTime):null),this._delayTime=t(this,u,c.delayTime,l.maxDelayTime,0)}get delayTime(){return this._delayTime}})(cb,Nb,ev,Jb,nb,Yg),nv=((e,t)=>(n,i)=>{const s=e(n,(e=>e.createDynamicsCompressor()));if(bg(s,i),i.channelCount>2)throw t();if("max"===i.channelCountMode)throw t();return yg(s,i,"attack"),yg(s,i,"knee"),yg(s,i,"ratio"),yg(s,i,"release"),yg(s,i,"threshold"),s})($g,kg),iv=((e,t,n,i,s)=>()=>{const r=new WeakMap;return{render(a,o,l){const c=r.get(o);return void 0!==c?Promise.resolve(c):(async(a,o,l)=>{let c=n(a);const h=nm(c,o);if(!h){const e={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=t(o,e)}return r.set(o,c),h?(await e(o,a.attack,c.attack,l),await e(o,a.knee,c.knee,l),await e(o,a.ratio,c.ratio,l),await e(o,a.release,c.release,l),await e(o,a.threshold,c.threshold,l)):(await i(o,a.attack,c.attack,l),await i(o,a.knee,c.knee,l),await i(o,a.ratio,c.ratio,l),await i(o,a.release,c.release,l),await i(o,a.threshold,c.threshold,l)),await s(a,o,c,l),c})(a,o,l)}}})(Mb,nv,_m,Ab,Jg),sv=((e,t,n,i,s,r,a)=>class extends e{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:og;const o=r(e),l=h(h({},og),s),c=i(o,l),u=a(o);super(e,!1,c,u?n():null),this._attack=t(this,u,c.attack,1,0),this._knee=t(this,u,c.knee,40,0),this._nativeDynamicsCompressorNode=c,this._ratio=t(this,u,c.ratio,20,1),this._release=t(this,u,c.release,1,0),this._threshold=t(this,u,c.threshold,0,-100)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"===typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(cb,Nb,iv,nv,kg,nb,Yg),rv=((e,t,n,i,s)=>()=>{const r=new WeakMap;return{render(a,o,l){const c=r.get(o);return void 0!==c?Promise.resolve(c):(async(a,o,l)=>{let c=n(a);const h=nm(c,o);if(!h){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=t(o,e)}return r.set(o,c),h?await e(o,a.gain,c.gain,l):await i(o,a.gain,c.gain,l),await s(a,o,c,l),c})(a,o,l)}}})(Mb,yb,_m,Ab,Jg),av=((e,t,n,i,s,r)=>class extends e{constructor(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lg;const o=s(e),l=h(h({},lg),a),c=i(o,l),u=r(o);super(e,!1,c,u?n():null),this._gain=t(this,u,c.gain,lm,om)}get gain(){return this._gain}})(cb,Nb,rv,yb,nb,Yg),ov=(e=>(t,n,i,s)=>e(t,(e=>e.createScriptProcessor(n,i,s))))($g),lv=((e,t,n,i)=>(s,r,a)=>{let{channelCount:o,channelCountMode:l,channelInterpretation:c,feedback:h,feedforward:u}=a;const d=wg(r,s.sampleRate),f=h.length,p=u.length,m=Math.min(f,p);if(0===h.length||h.length>20)throw i();if(0===h[0])throw t();if(0===u.length||u.length>20)throw i();if(0===u[0])throw t();if(1!==h[0]){for(let e=0;e<p;e+=1)u[e]/=h[0];for(let e=1;e<f;e+=1)h[e]/=h[0]}const g=n(s,d,o,o);g.channelCount=o,g.channelCountMode=l,g.channelInterpretation=c;const b=[],v=[],y=[];for(let e=0;e<o;e+=1){b.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),v.push(e),y.push(t)}g.onaudioprocess=e=>{const t=e.inputBuffer,n=e.outputBuffer,i=t.numberOfChannels;for(let s=0;s<i;s+=1){const e=t.getChannelData(s),i=n.getChannelData(s);b[s]=dg(h,f,u,p,m,v[s],y[s],b[s],32,e,i)}};const x=s.sampleRate/2;return _g({get bufferSize(){return d},get channelCount(){return g.channelCount},set channelCount(e){g.channelCount=e},get channelCountMode(){return g.channelCountMode},set channelCountMode(e){g.channelCountMode=e},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(e){g.channelInterpretation=e},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener(){return g.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return g.dispatchEvent(arguments.length<=0?void 0:arguments[0])},getFrequencyResponse(t,n,i){if(t.length!==n.length||n.length!==i.length)throw e();const s=t.length;for(let e=0;e<s;e+=1){const s=-Math.PI*(t[e]/x),r=[Math.cos(s),Math.sin(s)],a=Mg(Cg(u,r),Cg(h,r));n[e]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),i[e]=Math.atan2(a[1],a[0])}},removeEventListener(){return g.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},g)})(hg,cg,ov,kg),cv=((e,t,n,i)=>s=>e(pg,(()=>pg(s)))?Promise.resolve(e(i,i)).then((e=>{if(!e){const e=n(s,512,0,1);s.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>s.currentTime,e.connect(s.destination)}return s.startRendering()})):new Promise((e=>{const n=t(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(s.destination),s.startRendering()})))(Wg,yb,ov,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),i=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((e=>{n.oncomplete=()=>{i.disconnect(),e(0!==n.currentTime)},n.startRendering()}))})(yb,Xg)),hv=((e,t,n,i,s,r)=>(a,o)=>{const l=new WeakMap;let c=null;const h=async(h,u,d)=>{let f=null,p=n(h);const m=nm(p,u);if(void 0===u.createIIRFilter?f=e(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):m||(p=t(u,(e=>e.createIIRFilter(o,a)))),l.set(u,null===f?p:f),null!==f){if(null===c){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new i(h.context.destination.channelCount,h.context.length,u.sampleRate);c=(async()=>{await s(h,e,e.destination,d);return((e,t,n,i)=>{const s=n.length,r=i.length,a=Math.min(s,r);if(1!==n[0]){for(let e=0;e<s;e+=1)i[e]/=n[0];for(let e=1;e<r;e+=1)n[e]/=n[0]}const o=new Float32Array(32),l=new Float32Array(32),c=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),h=e.numberOfChannels;for(let u=0;u<h;u+=1){const t=e.getChannelData(u),h=c.getChannelData(u);o.fill(0),l.fill(0),dg(n,s,i,r,a,o,l,0,32,t,h)}return c})(await r(e),u,a,o)})()}const e=await c;return f.buffer=e,f.start(0),f}return await s(h,u,p,d),p};return{render(e,t,n){const i=l.get(t);return void 0!==i?Promise.resolve(i):h(e,t,n)}}})(Cb,$g,_m,Xg,Jg,cv),uv=((e,t)=>(n,i,s)=>{if(void 0===n.createIIRFilter)return t(n,i,s);const r=e(n,(e=>e.createIIRFilter(s.feedforward,s.feedback)));return bg(r,s),r})($g,lv),dv=((e,t,n,i,s)=>class extends e{constructor(e,r){const a=i(e),o=s(a),l=h(h({},ug),r),c=t(a,o?null:e.baseLatency,l);super(e,!1,c,o?n(l.feedback,l.feedforward):null),(e=>{var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(n,i,s)=>{if(n.length!==i.length||i.length!==s.length)throw hg();return t.call(e,n,i,s)})})(c),this._nativeIIRFilterNode=c}getFrequencyResponse(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}})(cb,uv,hv,nb,Yg),fv=((e,t,n,i,s)=>(r,a)=>{const o=a.listener,{forwardX:l,forwardY:c,forwardZ:h,positionX:u,positionY:d,positionZ:f,upX:p,upY:m,upZ:g}=void 0===o.forwardX?(()=>{const l=t(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),c=s(a),h=i(a,256,9,0),u=(t,i)=>{const s=n(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:i});return s.connect(l,0,t),s.start(),Object.defineProperty(s.offset,"defaultValue",{get:()=>i}),e({context:r},c,s.offset,lm,om)};let d=[0,0,-1,0,1,0],f=[0,0,0];return h.onaudioprocess=e=>{let{inputBuffer:t}=e;const n=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0],t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];n.some(((e,t)=>e!==d[t]))&&(o.setOrientation(...n),d=n);const i=[t.getChannelData(6)[0],t.getChannelData(7)[0],t.getChannelData(8)[0]];i.some(((e,t)=>e!==f[t]))&&(o.setPosition(...i),f=i)},l.connect(h),{forwardX:u(0,0),forwardY:u(1,0),forwardZ:u(2,-1),positionX:u(6,0),positionY:u(7,0),positionZ:u(8,0),upX:u(3,0),upY:u(4,1),upZ:u(5,0)}})():o;return{get forwardX(){return l},get forwardY(){return c},get forwardZ(){return h},get positionX(){return u},get positionY(){return d},get positionZ(){return f},get upX(){return p},get upY(){return m},get upZ(){return g}}})(Nb,jb,Xb,ov,Yg),pv=new WeakMap,mv=((e,t,n,i,s,r)=>class extends n{constructor(n,r){super(n),this._nativeContext=n,Hp.set(this,n);const a=n.sampleRate;Object.defineProperty(n,"sampleRate",{get:()=>a}),i(n)&&s.set(n,new Set),this._destination=new e(this,r),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"===typeof e?r(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(Ib,fv,rb,Yg,pv,Gg),gv=((e,t,n,i,s,r,a)=>(o,l)=>{const c=n(o,(e=>e.createOscillator()));return bg(c,l),yg(c,l,"detune"),yg(c,l,"frequency"),void 0!==l.periodicWave?c.setPeriodicWave(l.periodicWave):gg(c,l,"type"),t(i,(()=>i(o)))||xg(c),t(s,(()=>s(o)))||a(c,o),t(r,(()=>r(o)))||Sg(c),e(o,c),c})(xb,Wg,$g,Sb,wb,Eb,_b),bv=((e,t,n,i,s)=>()=>{const r=new WeakMap;let a=null,o=null,l=null;return{set periodicWave(e){a=e},set start(e){o=e},set stop(e){l=e},render(c,h,u){const d=r.get(h);return void 0!==d?Promise.resolve(d):(async(c,h,u)=>{let d=n(c);const f=nm(d,h);if(!f){const e={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,detune:d.detune.value,frequency:d.frequency.value,periodicWave:null===a?void 0:a,type:d.type};d=t(h,e),null!==o&&d.start(o),null!==l&&d.stop(l)}return r.set(h,d),f?(await e(h,c.detune,d.detune,u),await e(h,c.frequency,d.frequency,u)):(await i(h,c.detune,d.detune,u),await i(h,c.frequency,d.frequency,u)),await s(c,h,d,u),d})(c,h,u)}}})(Mb,gv,_m,Ab,Jg),vv=((e,t,n,i,s,r,a,o)=>class extends e{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ig;const o=r(e),l=h(h({},Ig),n),c=i(o,l),u=a(o),d=u?s():null,f=e.sampleRate/2;super(e,!1,c,d),this._detune=t(this,u,c.detune,153600,-153600),this._frequency=t(this,u,c.frequency,f,-f),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=d,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"===typeof e?o(this,e):null;this._nativeOscillatorNode.onended=t;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}get type(){return this._nativeOscillatorNode.type}set type(e){if(this._nativeOscillatorNode.type=e,"custom"===e)throw n();null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer)this._oscillatorNodeRenderer.start=e;else{um(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),setTimeout((()=>dm(this)),1e3)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(cb,Nb,cg,gv,bv,nb,Yg,Gg),yv=(e=>(t,n)=>{const i=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=t.createBuffer(1,2,t.sampleRate);return i.buffer=s,i.loop=!0,i.connect(n),i.start(),()=>{i.stop(),i.disconnect(n)}})(Cb),xv=((e,t,n,i,s,a)=>(o,l)=>{let{curve:c,oversample:u}=l,d=r(l,Ng);const f=n(o,(e=>e.createWaveShaper())),p=n(o,(e=>e.createWaveShaper()));bg(f,d),bg(p,d);const m=i(o,h(h({},d),{},{gain:1})),g=i(o,h(h({},d),{},{gain:-1})),b=i(o,h(h({},d),{},{gain:1})),v=i(o,h(h({},d),{},{gain:-1}));let y=null,x=!1,S=null;const w={get bufferSize(){},get channelCount(){return f.channelCount},set channelCount(e){m.channelCount=e,g.channelCount=e,f.channelCount=e,b.channelCount=e,p.channelCount=e,v.channelCount=e},get channelCountMode(){return f.channelCountMode},set channelCountMode(e){m.channelCountMode=e,g.channelCountMode=e,f.channelCountMode=e,b.channelCountMode=e,p.channelCountMode=e,v.channelCountMode=e},get channelInterpretation(){return f.channelInterpretation},set channelInterpretation(e){m.channelInterpretation=e,g.channelInterpretation=e,f.channelInterpretation=e,b.channelInterpretation=e,p.channelInterpretation=e,v.channelInterpretation=e},get context(){return f.context},get curve(){return S},set curve(n){if(null!==c&&c.length<2)throw t();if(null===n)f.curve=n,p.curve=n;else{const e=n.length,t=new Float32Array(e+2-e%2),i=new Float32Array(e+2-e%2);t[0]=n[0],i[0]=-n[e-1];const s=Math.ceil((e+1)/2),r=(e+1)/2-1;for(let a=1;a<s;a+=1){const o=a/s*r,l=Math.floor(o),c=Math.ceil(o);t[a]=l===c?n[l]:(1-(o-l))*n[l]+(1-(c-o))*n[c],i[a]=l===c?-n[e-1-l]:-(1-(o-l))*n[e-1-l]-(1-(c-o))*n[e-1-c]}t[s]=e%2===1?n[s-1]:(n[s-2]+n[s-1])/2,f.curve=t,p.curve=i}S=n,x&&(s(S)&&null===y?y=e(o,m):null!==y&&(y(),y=null))},get inputs(){return[m]},get numberOfInputs(){return f.numberOfInputs},get numberOfOutputs(){return f.numberOfOutputs},get oversample(){return f.oversample},set oversample(e){f.oversample=e,p.oversample=e},addEventListener(){return m.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return m.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return m.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};c!==w.curve&&(w.curve=c),u!==w.oversample&&(w.oversample=u);return a(_g(w,b),(()=>{m.connect(f).connect(b),m.connect(g).connect(p).connect(v).connect(b),x=!0,s(S)&&(y=e(o,m))}),(()=>{m.disconnect(f),f.disconnect(b),m.disconnect(g),g.disconnect(p),p.disconnect(v),v.disconnect(b),x=!1,null!==y&&(y(),y=null)}))})(yv,cg,$g,yb,jg,Fb),Sv=((e,t,n,i,s,r,a)=>(o,l)=>{const c=n(o,(e=>e.createWaveShaper()));try{return c.curve=new Float32Array([1]),i(o,l)}catch(f){}bg(c,l);const h=l.curve;if(null!==h&&h.length<2)throw t();gg(c,l,"curve"),gg(c,l,"oversample");let u=null,d=!1;a(c,"curve",(e=>()=>e.call(c)),(t=>n=>(t.call(c,n),d&&(s(n)&&null===u?u=e(o,c):s(n)||null===u||(u(),u=null)),n)));return r(c,(()=>{d=!0,s(c.curve)&&(u=e(o,c))}),(()=>{d=!1,null!==u&&(u(),u=null)}))})(yv,cg,$g,xv,jg,Fb,Vg),wv=((e,t,n,i,s,a,o,l,c,u)=>(d,f)=>{let{coneInnerAngle:p,coneOuterAngle:m,coneOuterGain:g,distanceModel:b,maxDistance:v,orientationX:y,orientationY:x,orientationZ:S,panningModel:w,positionX:E,positionY:_,positionZ:T,refDistance:M,rolloffFactor:C}=f,A=r(f,Ag);const P=n(d,(e=>e.createPanner()));if(A.channelCount>2)throw l();if("max"===A.channelCountMode)throw l();bg(P,A);const N={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},k=i(d,h(h({},N),{},{channelInterpretation:"speakers",numberOfInputs:6})),L=s(d,h(h({},A),{},{gain:1})),I=s(d,h(h({},N),{},{gain:1})),R=s(d,h(h({},N),{},{gain:0})),O=s(d,h(h({},N),{},{gain:0})),D=s(d,h(h({},N),{},{gain:0})),F=s(d,h(h({},N),{},{gain:0})),B=s(d,h(h({},N),{},{gain:0})),j=a(d,256,6,1),V=o(d,h(h({},N),{},{curve:new Float32Array([1,1]),oversample:"none"}));let G=[y,x,S],W=[E,_,T];j.onaudioprocess=e=>{let{inputBuffer:t}=e;const n=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0]];n.some(((e,t)=>e!==G[t]))&&(P.setOrientation(...n),G=n);const i=[t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];i.some(((e,t)=>e!==W[t]))&&(P.setPosition(...i),W=i)},Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0});const z={get bufferSize(){},get channelCount(){return P.channelCount},set channelCount(e){if(e>2)throw l();L.channelCount=e,P.channelCount=e},get channelCountMode(){return P.channelCountMode},set channelCountMode(e){if("max"===e)throw l();L.channelCountMode=e,P.channelCountMode=e},get channelInterpretation(){return P.channelInterpretation},set channelInterpretation(e){L.channelInterpretation=e,P.channelInterpretation=e},get coneInnerAngle(){return P.coneInnerAngle},set coneInnerAngle(e){P.coneInnerAngle=e},get coneOuterAngle(){return P.coneOuterAngle},set coneOuterAngle(e){P.coneOuterAngle=e},get coneOuterGain(){return P.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();P.coneOuterGain=e},get context(){return P.context},get distanceModel(){return P.distanceModel},set distanceModel(e){P.distanceModel=e},get inputs(){return[L]},get maxDistance(){return P.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;P.maxDistance=e},get numberOfInputs(){return P.numberOfInputs},get numberOfOutputs(){return P.numberOfOutputs},get orientationX(){return I.gain},get orientationY(){return R.gain},get orientationZ(){return O.gain},get panningModel(){return P.panningModel},set panningModel(e){if(P.panningModel=e,P.panningModel!==e&&"HRTF"===e)throw l()},get positionX(){return D.gain},get positionY(){return F.gain},get positionZ(){return B.gain},get refDistance(){return P.refDistance},set refDistance(e){if(e<0)throw new RangeError;P.refDistance=e},get rolloffFactor(){return P.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;P.rolloffFactor=e},addEventListener(){return L.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return L.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return L.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};p!==z.coneInnerAngle&&(z.coneInnerAngle=p),m!==z.coneOuterAngle&&(z.coneOuterAngle=m),g!==z.coneOuterGain&&(z.coneOuterGain=g),b!==z.distanceModel&&(z.distanceModel=b),v!==z.maxDistance&&(z.maxDistance=v),y!==z.orientationX.value&&(z.orientationX.value=y),x!==z.orientationY.value&&(z.orientationY.value=x),S!==z.orientationZ.value&&(z.orientationZ.value=S),w!==z.panningModel&&(z.panningModel=w),E!==z.positionX.value&&(z.positionX.value=E),_!==z.positionY.value&&(z.positionY.value=_),T!==z.positionZ.value&&(z.positionZ.value=T),M!==z.refDistance&&(z.refDistance=M),C!==z.rolloffFactor&&(z.rolloffFactor=C),1===G[0]&&0===G[1]&&0===G[2]||P.setOrientation(...G),0===W[0]&&0===W[1]&&0===W[2]||P.setPosition(...W);return u(_g(z,P),(()=>{L.connect(P),e(L,V,0,0),V.connect(I).connect(k,0,0),V.connect(R).connect(k,0,1),V.connect(O).connect(k,0,2),V.connect(D).connect(k,0,3),V.connect(F).connect(k,0,4),V.connect(B).connect(k,0,5),k.connect(j).connect(d.destination)}),(()=>{L.disconnect(P),c(L,V,0,0),V.disconnect(I),I.disconnect(k),V.disconnect(R),R.disconnect(k),V.disconnect(O),O.disconnect(k),V.disconnect(D),D.disconnect(k),V.disconnect(F),F.disconnect(k),V.disconnect(B),B.disconnect(k),k.disconnect(j),j.disconnect(d.destination)}))})(ym,cg,$g,jb,yb,ov,Sv,kg,Sm,Fb),Ev=((e,t)=>(n,i)=>{const s=e(n,(e=>e.createPanner()));return void 0===s.orientationX?t(n,i):(bg(s,i),yg(s,i,"orientationX"),yg(s,i,"orientationY"),yg(s,i,"orientationZ"),yg(s,i,"positionX"),yg(s,i,"positionY"),yg(s,i,"positionZ"),gg(s,i,"coneInnerAngle"),gg(s,i,"coneOuterAngle"),gg(s,i,"coneOuterGain"),gg(s,i,"distanceModel"),gg(s,i,"maxDistance"),gg(s,i,"panningModel"),gg(s,i,"refDistance"),gg(s,i,"rolloffFactor"),s)})($g,wv),_v=((e,t,n,i,s,r,a,o,l,c)=>()=>{const u=new WeakMap;let d=null;return{render(f,p,m){const g=u.get(p);return void 0!==g?Promise.resolve(g):(async(f,p,m)=>{let g=null,b=r(f);const v={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation},y=h(h({},v),{},{coneInnerAngle:b.coneInnerAngle,coneOuterAngle:b.coneOuterAngle,coneOuterGain:b.coneOuterGain,distanceModel:b.distanceModel,maxDistance:b.maxDistance,panningModel:b.panningModel,refDistance:b.refDistance,rolloffFactor:b.rolloffFactor}),x=nm(b,p);if("bufferSize"in b)g=i(p,h(h({},v),{},{gain:1}));else if(!x){const e=h(h({},y),{},{orientationX:b.orientationX.value,orientationY:b.orientationY.value,orientationZ:b.orientationZ.value,positionX:b.positionX.value,positionY:b.positionY.value,positionZ:b.positionZ.value});b=s(p,e)}if(u.set(p,null===g?b:g),null!==g){if(null===d){if(null===a)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new a(6,f.context.length,p.sampleRate),i=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});i.connect(e.destination),d=(async()=>{const t=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map((async(t,i)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===i?1:0});return await o(e,t,s.offset,m),s})));for(let e=0;e<6;e+=1)t[e].connect(i,0,e),t[e].start(0);return c(e)})()}const e=await d,r=i(p,h(h({},v),{},{gain:1}));await l(f,p,r,m);const u=[];for(let t=0;t<e.numberOfChannels;t+=1)u.push(e.getChannelData(t));let b=[u[0][0],u[1][0],u[2][0]],x=[u[3][0],u[4][0],u[5][0]],S=i(p,h(h({},v),{},{gain:1})),w=s(p,h(h({},y),{},{orientationX:b[0],orientationY:b[1],orientationZ:b[2],positionX:x[0],positionY:x[1],positionZ:x[2]}));r.connect(S).connect(w.inputs[0]),w.connect(g);for(let t=128;t<e.length;t+=128){const e=[u[0][t],u[1][t],u[2][t]],n=[u[3][t],u[4][t],u[5][t]];if(e.some(((e,t)=>e!==b[t]))||n.some(((e,t)=>e!==x[t]))){b=e,x=n;const a=t/p.sampleRate;S.gain.setValueAtTime(0,a),S=i(p,h(h({},v),{},{gain:0})),w=s(p,h(h({},y),{},{orientationX:b[0],orientationY:b[1],orientationZ:b[2],positionX:x[0],positionY:x[1],positionZ:x[2]})),S.gain.setValueAtTime(1,a),r.connect(S).connect(w.inputs[0]),w.connect(g)}}return g}return x?(await e(p,f.orientationX,b.orientationX,m),await e(p,f.orientationY,b.orientationY,m),await e(p,f.orientationZ,b.orientationZ,m),await e(p,f.positionX,b.positionX,m),await e(p,f.positionY,b.positionY,m),await e(p,f.positionZ,b.positionZ,m)):(await o(p,f.orientationX,b.orientationX,m),await o(p,f.orientationY,b.orientationY,m),await o(p,f.orientationZ,b.orientationZ,m),await o(p,f.positionX,b.positionX,m),await o(p,f.positionY,b.positionY,m),await o(p,f.positionZ,b.positionZ,m)),vm(b)?await l(f,p,b.inputs[0],m):await l(f,p,b,m),b})(f,p,m)}}})(Mb,jb,Xb,yb,Ev,_m,Xg,Ab,Jg,cv),Tv=((e,t,n,i,s,r)=>class extends e{constructor(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rg;const o=s(e),l=h(h({},Rg),a),c=n(o,l),u=r(o);super(e,!1,c,u?i():null),this._nativePannerNode=c,this._orientationX=t(this,u,c.orientationX,lm,om),this._orientationY=t(this,u,c.orientationY,lm,om),this._orientationZ=t(this,u,c.orientationZ,lm,om),this._positionX=t(this,u,c.positionX,lm,om),this._positionY=t(this,u,c.positionY,lm,om),this._positionZ=t(this,u,c.positionZ,lm,om)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(cb,Nb,Ev,_v,nb,Yg),Mv=(e=>(t,n)=>{let{disableNormalization:i,imag:s,real:r}=n;const a=e(t),o=new Float32Array(s),l=new Float32Array(r);return null!==a?a.createPeriodicWave(l,o,{disableNormalization:i}):t.createPeriodicWave(l,o,{disableNormalization:i})})(Kg),Cv=((e,t,n)=>class i{constructor(i,s){const r=t(i),a=h(h({},Og),s),o=e(r,a);return n.add(o),o}static[Symbol.hasInstance](e){return null!==e&&"object"===typeof e&&Object.getPrototypeOf(e)===i.prototype||n.has(e)}})(Mv,nb,new WeakSet),Av=((e,t,n,i,s,a)=>{const o=16385,l=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},d=h(h({},u),{},{oversample:"none"}),f=(e,r,a,f,p)=>{if(1===r)return((e,t,s,r)=>{const a=new Float32Array(o),f=new Float32Array(o);for(let n=0;n<o;n+=1){const e=n/16384*c;a[n]=Math.cos(e),f[n]=Math.sin(e)}const p=n(e,h(h({},u),{},{gain:0})),m=i(e,h(h({},d),{},{curve:a})),g=i(e,h(h({},d),{},{curve:l})),b=n(e,h(h({},u),{},{gain:0})),v=i(e,h(h({},d),{},{curve:f}));return{connectGraph(){t.connect(p),t.connect(g.inputs[0]),t.connect(b),g.connect(s),s.connect(m.inputs[0]),s.connect(v.inputs[0]),m.connect(p.gain),v.connect(b.gain),p.connect(r,0,0),b.connect(r,0,1)},disconnectGraph(){t.disconnect(p),t.disconnect(g.inputs[0]),t.disconnect(b),g.disconnect(s),s.disconnect(m.inputs[0]),s.disconnect(v.inputs[0]),m.disconnect(p.gain),v.disconnect(b.gain),p.disconnect(r,0,0),b.disconnect(r,0,1)}}})(e,a,f,p);if(2===r)return((e,s,r,a)=>{const f=new Float32Array(o),p=new Float32Array(o),m=new Float32Array(o),g=new Float32Array(o),b=Math.floor(8192.5);for(let t=0;t<o;t+=1)if(t>b){const e=(t-b)/(16384-b)*c;f[t]=Math.cos(e),p[t]=Math.sin(e),m[t]=0,g[t]=1}else{const e=t/(16384-b)*c;f[t]=1,p[t]=0,m[t]=Math.cos(e),g[t]=Math.sin(e)}const v=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=n(e,h(h({},u),{},{gain:0})),x=i(e,h(h({},d),{},{curve:f})),S=n(e,h(h({},u),{},{gain:0})),w=i(e,h(h({},d),{},{curve:p})),E=i(e,h(h({},d),{},{curve:l})),_=n(e,h(h({},u),{},{gain:0})),T=i(e,h(h({},d),{},{curve:m})),M=n(e,h(h({},u),{},{gain:0})),C=i(e,h(h({},d),{},{curve:g}));return{connectGraph(){s.connect(v),s.connect(E.inputs[0]),v.connect(y,1),v.connect(S,1),v.connect(_,1),v.connect(M,1),E.connect(r),r.connect(x.inputs[0]),r.connect(w.inputs[0]),r.connect(T.inputs[0]),r.connect(C.inputs[0]),x.connect(y.gain),w.connect(S.gain),T.connect(_.gain),C.connect(M.gain),y.connect(a,0,0),_.connect(a,0,0),S.connect(a,0,1),M.connect(a,0,1)},disconnectGraph(){s.disconnect(v),s.disconnect(E.inputs[0]),v.disconnect(y,1),v.disconnect(S,1),v.disconnect(_,1),v.disconnect(M,1),E.disconnect(r),r.disconnect(x.inputs[0]),r.disconnect(w.inputs[0]),r.disconnect(T.inputs[0]),r.disconnect(C.inputs[0]),x.disconnect(y.gain),w.disconnect(S.gain),T.disconnect(_.gain),C.disconnect(M.gain),y.disconnect(a,0,0),_.disconnect(a,0,0),S.disconnect(a,0,1),M.disconnect(a,0,1)}}})(e,a,f,p);throw s()};return(t,i)=>{let{channelCount:o,channelCountMode:l,pan:c}=i,u=r(i,Pg);if("max"===l)throw s();const d=e(t,h(h({},u),{},{channelCount:1,channelCountMode:l,numberOfInputs:2})),p=n(t,h(h({},u),{},{channelCount:o,channelCountMode:l,gain:1})),m=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:c});let{connectGraph:g,disconnectGraph:b}=f(t,o,p,m,d);Object.defineProperty(m.gain,"defaultValue",{get:()=>0});const v={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(e){p.channelCount!==e&&(y&&b(),({connectGraph:g,disconnectGraph:b}=f(t,e,p,m,d)),y&&g()),p.channelCount=e},get channelCountMode(){return p.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw s();p.channelCountMode=e},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(e){p.channelInterpretation=e},get context(){return p.context},get inputs(){return[p]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get pan(){return m.gain},addEventListener(){return p.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return p.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return p.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};let y=!1;return a(_g(v,d),(()=>{g(),y=!0}),(()=>{b(),y=!1}))}})(jb,Wb,yb,Sv,kg,Fb),Pv=((e,t,n)=>(i,s)=>e(i,(e=>{const r=s.channelCountMode;if("clamped-max"===r)throw n();if(void 0===i.createStereoPanner)return t(i,s);const a=e.createStereoPanner();return bg(a,s),yg(a,s,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>r,set:e=>{if(e!==r)throw n()}}),a})))($g,Av,kg),Nv=((e,t,n,i,s)=>()=>{const r=new WeakMap;return{render(a,o,l){const c=r.get(o);return void 0!==c?Promise.resolve(c):(async(a,o,l)=>{let c=n(a);const h=nm(c,o);if(!h){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=t(o,e)}return r.set(o,c),h?await e(o,a.pan,c.pan,l):await i(o,a.pan,c.pan,l),vm(c)?await s(a,o,c.inputs[0],l):await s(a,o,c,l),c})(a,o,l)}}})(Mb,Pv,_m,Ab,Jg),kv=((e,t,n,i,s,r)=>class extends e{constructor(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dg;const o=s(e),l=h(h({},Dg),a),c=n(o,l),u=r(o);super(e,!1,c,u?i():null),this._pan=t(this,u,c.pan,1,-1)}get pan(){return this._pan}})(cb,Nb,Pv,Nv,nb,Yg),Lv=((e,t,n)=>()=>{const i=new WeakMap;return{render(s,r,a){const o=i.get(r);return void 0!==o?Promise.resolve(o):(async(s,r,a)=>{let o=t(s);if(!nm(o,r)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=e(r,t)}return i.set(r,o),vm(o)?await n(s,r,o.inputs[0],a):await n(s,r,o,a),o})(s,r,a)}}})(Sv,_m,Jg),Iv=((e,t,n,i,s,r)=>class extends e{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bg;const a=s(e),o=h(h({},Bg),t),l=n(a,o);super(e,!0,l,r(a)?i():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=l}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(cb,cg,Sv,Lv,nb,Yg),Rv=(e=>null!==e&&e.isSecureContext)(Hg),Ov=(e=>(t,n,i)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return i()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(Hg),Dv=Rv?((e,t,n,i,s,r,a,o,l)=>function(c,h){let u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"};const d=r(c),f=new URL(h,l.location.href).toString();if(void 0!==d.audioWorklet)return i(h).then((e=>{const[t,n]=Qp(e,f),i="".concat(t,";(registerProcessor=>{").concat(n,"\n})((n,p)=>registerProcessor(n,class extends p{process(i,o,p){return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}))"),r=new Blob([i],{type:"application/javascript; charset=utf-8"}),a=URL.createObjectURL(r),o=s(d);return(null!==o?o:d).audioWorklet.addModule(a,u).then((()=>URL.revokeObjectURL(a))).catch((e=>{throw URL.revokeObjectURL(a),void 0!==e.code&&"SyntaxError"!==e.name||(e.code=12),e}))}));const p=o.get(c);if(void 0!==p&&p.has(h))return Promise.resolve();const m=a.get(c);if(void 0!==m){const e=m.get(h);if(void 0!==e)return e}const g=i(h).then((e=>{const[n,i]=Qp(e,f),s="".concat(n,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(i,"\n})})(window,'_AWGS')");return t(s)})).then((()=>{const t=l._AWGS.pop();if(void 0===t)throw new SyntaxError;n(d.currentTime,d.sampleRate,(()=>t(class{},void 0,((t,n)=>{if(""===t.trim())throw e();const i=qp.get(d);if(void 0!==i){if(i.has(t))throw e();em(n),Jp(n.parameterDescriptors),i.set(t,n)}else em(n),Jp(n.parameterDescriptors),qp.set(d,new Map([[t,n]]))}),d.sampleRate,void 0,void 0)))})).catch((e=>{throw void 0!==e.code&&"SyntaxError"!==e.name||(e.code=12),e}));return void 0===m?a.set(c,new Map([[h,g]])):m.set(h,g),g.then((()=>{const e=o.get(c);void 0===e?o.set(c,new Set([h])):e.add(h)})).catch((()=>{})).then((()=>{const e=a.get(c);void 0!==e&&e.delete(h)})),g})(kg,(e=>t=>new Promise(((n,i)=>{if(null===e)return void i(new SyntaxError);const s=e.document.head;if(null===s)i(new SyntaxError);else{const r=e.document.createElement("script"),a=new Blob([t],{type:"application/javascript"}),o=URL.createObjectURL(a),l=e.onerror,c=()=>{e.onerror=l,URL.revokeObjectURL(o)};e.onerror=(t,n,s,r,a)=>n===o||n===e.location.href&&1===s&&1===r?(c(),i(a),!1):null!==l?l(t,n,s,r,a):void 0,r.onerror=()=>{c(),i(new SyntaxError)},r.onload=()=>{c(),n()},r.src=o,r.type="module",s.appendChild(r)}})))(Hg),Ov,(e=>async t=>{try{const e=await fetch(t);if(e.ok)return e.text()}catch(n){}throw e()})((()=>{try{return new DOMException("","AbortError")}catch(e){return e.code=20,e.name="AbortError",e}})),Kg,nb,new WeakMap,new WeakMap,Hg):void 0,Fv=((e,t)=>n=>e(n)||t(n))(ab,Yg),Bv=((e,t,n,i,s,r,a,o,l,c,h,u,d)=>(f,p)=>{const m=a(f)?f:r(f);if(s.has(p)){const e=n();return Promise.reject(e)}try{s.add(p)}catch(g){}if(t(h,(()=>h(m)))){return("closed"===m.state&&null!==l&&o(m)?new l(1,1,m.sampleRate):m).decodeAudioData(p).catch((e=>{if(e instanceof DOMException&&"NotSupportedError"===e.name)throw new TypeError;throw e})).then((n=>(t(c,(()=>c(n)))||d(n),e.add(n),n)))}return new Promise(((t,n)=>{const s=()=>{try{(e=>{const{port1:t}=new MessageChannel;t.postMessage(e,[e])})(p)}catch(e){}},r=e=>{n(e),s()};try{m.decodeAudioData(p,(n=>{"function"!==typeof n.copyFromChannel&&(u(n),rm(n)),e.add(n),s(),t(n)}),(e=>{r(null===e?i():e)}))}catch(a){r(a)}}))})(db,Wg,(()=>{try{return new DOMException("","DataCloneError")}catch(e){return e.code=25,e.name="DataCloneError",e}}),(()=>{try{return new DOMException("","EncodingError")}catch(e){return e.code=0,e.name="EncodingError",e}}),new WeakSet,nb,Fv,Yg,Xg,im,pg,gb,bb),jv=((e,t,n,i,s,r,a,o,l,c,u,d,f,p,m,g,b,v,y,x)=>class extends m{constructor(t,n){super(t,n),this._nativeContext=t,this._audioWorklet=void 0===e?void 0:{addModule:(t,n)=>e(this,t,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new s(this)}createBuffer(e,t,i){return new n({length:t,numberOfChannels:e,sampleRate:i})}createBufferSource(){return new i(this)}createChannelMerger(){return new r(this,{numberOfInputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createChannelSplitter(){return new a(this,{numberOfOutputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createConstantSource(){return new o(this)}createConvolver(){return new l(this)}createDelay(){return new u(this,{maxDelayTime:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1})}createDynamicsCompressor(){return new d(this)}createGain(){return new f(this)}createIIRFilter(e,t){return new p(this,{feedback:t,feedforward:e})}createOscillator(){return new g(this)}createPanner(){return new b(this)}createPeriodicWave(e,t){return new v(this,h(h({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1}),{},{imag:t,real:e}))}createStereoPanner(){return new y(this)}createWaveShaper(){return new x(this)}decodeAudioData(e,t,n){return c(this._nativeContext,e).then((e=>("function"===typeof t&&t(e),e))).catch((e=>{throw"function"===typeof n&&n(e),e}))}})(Dv,ub,vb,Lb,Db,Gb,Ub,qb,Qb,Bv,tv,sv,av,dv,mv,vv,Tv,Cv,kv,Iv),Vv=(e=>(t,n)=>e(t,(e=>e.createMediaElementSource(n.mediaElement))))($g),Gv=((e,t,n,i)=>class extends e{constructor(e,s){const r=n(e),a=t(r,s);if(i(r))throw TypeError();super(e,!0,a,null),this._mediaElement=s.mediaElement,this._nativeMediaElementAudioSourceNode=a}get mediaElement(){return void 0===this._nativeMediaElementAudioSourceNode.mediaElement?this._mediaElement:this._nativeMediaElementAudioSourceNode.mediaElement}})(cb,Vv,nb,Yg),Wv=((e,t)=>(n,i)=>{if(void 0===n.createMediaStreamDestination)throw t();const s=e(n,(e=>e.createMediaStreamDestination()));return bg(s,i),1===s.numberOfOutputs&&Object.defineProperty(s,"numberOfOutputs",{get:()=>0}),s})($g,kg),zv=((e,t,n,i)=>class extends e{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fg;const r=n(e);if(i(r))throw new TypeError;const a=h(h({},fg),s),o=t(r,a);super(e,!1,o,null),this._nativeMediaStreamAudioDestinationNode=o}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(cb,Wv,nb,Yg),Uv=(e=>(t,n)=>{let{mediaStream:i}=n;const s=i.getAudioTracks(),r=e(t,(e=>{s.sort(((e,t)=>e.id<t.id?-1:e.id>t.id?1:0));const t=s.slice(0,1);return e.createMediaStreamSource(new MediaStream(t))}));return Object.defineProperty(r,"mediaStream",{value:i}),r})($g),Hv=((e,t,n,i)=>class extends e{constructor(e,s){const r=n(e),a=t(r,s);if(i(r))throw new TypeError;super(e,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(cb,Uv,nb,Yg),Xv=((e,t,n)=>(i,s)=>{let{mediaStreamTrack:r}=s;return"function"===typeof i.createMediaStreamTrackSource?t(i,(e=>e.createMediaStreamTrackSource(r))):t(i,(t=>{const i=new MediaStream([r]),s=t.createMediaStreamSource(i);if("audio"!==r.kind)throw e();if(n(t))throw new TypeError;return s}))})(cg,$g,Yg),Yv=((e,t,n)=>class extends e{constructor(e,i){const s=n(e);super(e,!0,t(s,i),null)}})(cb,Xv,nb),qv=((e,t,n,i,s,r,a,o,l)=>class extends e{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null===l)throw new Error("Missing the native AudioContext constructor.");const t=new l(e);if(null===t)throw i();if(!pm(e.latencyHint))throw new TypeError("The provided value '".concat(e.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==e.sampleRate&&t.sampleRate!==e.sampleRate)throw n();super(t,2);const{latencyHint:s}=e,{sampleRate:r}=t;if(this._baseLatency="number"===typeof t.baseLatency?t.baseLatency:"balanced"===s?512/r:"interactive"===s||void 0===s?256/r:"playback"===s?1024/r:128*Math.max(2,Math.min(128,Math.round(s*r/128)))/r,this._nativeAudioContext=t,this._state=null,"running"===t.state){this._state="suspended";const e=()=>{"suspended"===this._state&&(this._state=null),t.removeEventListener("statechange",e)};t.addEventListener("statechange",e)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw t()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close())}createMediaElementSource(e){return new s(this,{mediaElement:e})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(e){return new a(this,{mediaStream:e})}createMediaStreamTrackSource(e){return new o(this,{mediaStreamTrack:e})}resume(){return"suspended"===this._state?new Promise(((e,t)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((e=>{if(void 0===e||15===e.code)throw t();throw e}))}suspend(){return this._nativeAudioContext.suspend().catch((e=>{if(void 0===e)throw t();throw e}))}})(jv,cg,kg,Fg,Gv,zv,Hv,Yv,qg),Kv=(e=>t=>{const n=e.get(t);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(pv),$v=(e=>(t,n)=>{e(t).add(n)})(Kv),Zv=(e=>function(t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=t[arguments.length>2&&void 0!==arguments[2]?arguments[2]:0];if(void 0===s)throw e();return Rm(n)?s.connect(n,0,i):s.connect(n,0)})(sm),Qv=(e=>(t,n)=>{e(t).delete(n)})(Kv),Jv=(e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===n?t.forEach((e=>e.disconnect())):"number"===typeof n?ag(e,t,n).disconnect():Rm(n)?void 0===i?t.forEach((e=>e.disconnect(n))):void 0===s?ag(e,t,i).disconnect(n,0):ag(e,t,i).disconnect(n,0,s):void 0===i?t.forEach((e=>e.disconnect(n))):ag(e,t,i).disconnect(n,0)})(sm),ey=((e,t,n,i,s,r,a,o,l,c,u,d,f)=>(p,m,g,b)=>{if(0===b.numberOfInputs&&0===b.numberOfOutputs)throw c();if(void 0!==b.outputChannelCount){if(b.outputChannelCount.some((e=>e<1)))throw c();if(b.outputChannelCount.length!==b.numberOfOutputs)throw n()}if("explicit"!==b.channelCountMode)throw c();const v=b.channelCount*b.numberOfInputs,y=b.outputChannelCount.reduce(((e,t)=>e+t),0),x=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length;if(v+x>6||y>6)throw c();const S=new MessageChannel,w=[],E=[];for(let e=0;e<b.numberOfInputs;e+=1)w.push(o(p,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),E.push(r(p,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));const _=[];if(void 0!==g.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:n,name:i}of g.parameterDescriptors){const s=a(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==b.parameterData[i]?b.parameterData[i]:void 0===e?0:e});Object.defineProperties(s.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?lm:t},minValue:{get:()=>void 0===n?om:n}}),_.push(s)}const T=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+x)}),M=wg(m,p.sampleRate),C=l(p,M,v+x,Math.max(1,y)),A=r(p,{channelCount:Math.max(1,y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,y)}),P=[];for(let e=0;e<b.numberOfOutputs;e+=1)P.push(s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:b.outputChannelCount[e]}));for(let e=0;e<b.numberOfInputs;e+=1){w[e].connect(E[e]);for(let t=0;t<b.channelCount;t+=1)E[e].connect(T,t,e*b.channelCount+t)}const N=new Ym(void 0===g.parameterDescriptors?[]:g.parameterDescriptors.map(((e,t)=>{let{name:n}=e;const i=_[t];return i.connect(T,0,v+t),i.start(0),[n,i.offset]})));T.connect(C);let k=b.channelInterpretation,L=null;const I=0===b.numberOfOutputs?[C]:P,R={get bufferSize(){return M},get channelCount(){return b.channelCount},set channelCount(e){throw i()},get channelCountMode(){return b.channelCountMode},set channelCountMode(e){throw i()},get channelInterpretation(){return k},set channelInterpretation(e){for(const t of w)t.channelInterpretation=e;k=e},get context(){return C.context},get inputs(){return w},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get onprocessorerror(){return L},set onprocessorerror(e){"function"===typeof L&&R.removeEventListener("processorerror",L),L="function"===typeof e?e:null,"function"===typeof L&&R.addEventListener("processorerror",L)},get parameters(){return N},get port(){return S.port2},addEventListener(){return C.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},connect:t.bind(null,I),disconnect:u.bind(null,I),dispatchEvent(){return C.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return C.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},O=new Map;var D,F;S.port1.addEventListener=(D=S.port1.addEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){const e="function"===typeof t[1]?t[1]:"object"===typeof t[1]&&null!==t[1]&&"function"===typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=O.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{d(p.currentTime,p.sampleRate,(()=>e(t)))},O.set(e,t[1]))}}return D.call(S.port1,t[0],t[1],t[2])}),S.port1.removeEventListener=(F=S.port1.removeEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){const e=O.get(t[1]);void 0!==e&&(O.delete(t[1]),t[1]=e)}return F.call(S.port1,t[0],t[1],t[2])});let B=null;Object.defineProperty(S.port1,"onmessage",{get:()=>B,set:e=>{"function"===typeof B&&S.port1.removeEventListener("message",B),B="function"===typeof e?e:null,"function"===typeof B&&(S.port1.addEventListener("message",B),S.port1.start())}}),g.prototype.port=S.port1;let j=null;const V=((e,t,n,i)=>{let s=Kp.get(e);void 0===s&&(s=new WeakMap,Kp.set(e,s));const r=Eg(n,i);return s.set(t,r),r})(p,R,g,b);V.then((e=>j=e));const G=Qm(b.numberOfInputs,b.channelCount),W=Qm(b.numberOfOutputs,b.outputChannelCount),z=void 0===g.parameterDescriptors?[]:g.parameterDescriptors.reduce(((e,t)=>{let{name:n}=t;return h(h({},e),{},{[n]:new Float32Array(128)})}),{});let U=!0;const H=()=>{b.numberOfOutputs>0&&C.disconnect(A);for(let e=0,t=0;e<b.numberOfOutputs;e+=1){const n=P[e];for(let i=0;i<b.outputChannelCount[e];i+=1)A.disconnect(n,t+i,i);t+=b.outputChannelCount[e]}};C.onaudioprocess=t=>{let{inputBuffer:n,outputBuffer:i}=t;if(null!==j)for(let r=0;r<M;r+=128){for(let e=0;e<b.numberOfInputs;e+=1)for(let t=0;t<b.channelCount;t+=1)$m(n,G[e],t,t,r);void 0!==g.parameterDescriptors&&g.parameterDescriptors.forEach(((e,t)=>{let{name:i}=e;$m(n,z,i,v+t,r)}));for(let e=0;e<b.numberOfInputs;e+=1)for(let t=0;t<b.outputChannelCount[e];t+=1)0===W[e][t].byteLength&&(W[e][t]=new Float32Array(128));try{const t=G.map(((t,n)=>{const i=e.get(R);return void 0===i||void 0===i.get(n)?[]:t})),n=d(p.currentTime+r/p.sampleRate,p.sampleRate,(()=>j.process(t,W,z)));U=n;for(let e=0,s=0;e<b.numberOfOutputs;e+=1){for(let t=0;t<b.outputChannelCount[e];t+=1)Zm(i,W[e],t,s+t,r);s+=b.outputChannelCount[e]}}catch(s){U=!1,R.dispatchEvent(new ErrorEvent("processorerror",{error:s}))}if(!U){for(let e=0;e<b.numberOfInputs;e+=1){w[e].disconnect(E[e]);for(let t=0;t<b.channelCount;t+=1)E[r].disconnect(T,t,e*b.channelCount+t)}if(void 0!==g.parameterDescriptors){const e=g.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=_[t];e.disconnect(T,0,v+t),e.stop()}}T.disconnect(C),C.onaudioprocess=null,X?H():K();break}}};let X=!1;const Y=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),q=()=>C.connect(Y).connect(Y.context.destination),K=()=>{C.disconnect(Y),Y.disconnect()};return q(),f(R,(()=>{if(U){K(),b.numberOfOutputs>0&&C.connect(A);for(let e=0,t=0;e<b.numberOfOutputs;e+=1){const n=P[e];for(let i=0;i<b.outputChannelCount[e];i+=1)A.connect(n,t+i,i);t+=b.outputChannelCount[e]}}X=!0}),(()=>{U&&(q(),H()),X=!1}))})(tb,Zv,sm,cg,jb,Wb,Xb,yb,ov,kg,Jv,Ov,Fb),ty=((e,t,n,i,s,r)=>(a,o,l,c,u,d)=>{if(null!==l)try{const n=t(a,(e=>new l(e,c,d))),s=new Map;let o=null;if(Object.defineProperties(n,{channelCount:{get:()=>d.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>o,set:e=>{"function"===typeof o&&n.removeEventListener("processorerror",o),o="function"===typeof e?e:null,"function"===typeof o&&n.addEventListener("processorerror",o)}}}),n.addEventListener=(p=n.addEventListener,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if("processorerror"===t[0]){const e="function"===typeof t[1]?t[1]:"object"===typeof t[1]&&null!==t[1]&&"function"===typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=s.get(t[1]);void 0!==n?t[1]=n:(t[1]=n=>{e(new ErrorEvent(t[0],h(h({},n),{},{error:new Error})))},s.set(e,t[1]))}}return p.call(n,t[0],t[1],t[2])}),n.removeEventListener=(f=n.removeEventListener,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if("processorerror"===t[0]){const e=s.get(t[1]);void 0!==e&&(s.delete(t[1]),t[1]=e)}return f.call(n,t[0],t[1],t[2])}),0!==d.numberOfOutputs){const e=i(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(e).connect(e.context.destination);return r(n,(()=>e.disconnect()),(()=>e.connect(e.context.destination)))}return n}catch(m){if(11===m.code)throw s();throw m}var f,p;if(void 0===u)throw s();return(e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}})(d),n(a,o,u,d)})(cg,$g,ey,yb,kg,Fb),ny=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(Hg),iy=((e,t,n,i,s,r,a,o,l,c,h,u,d,f,p,m)=>(g,b,v)=>{const y=new WeakMap;let x=null;return{render(S,w,E){o(w,S);const _=y.get(w);return void 0!==_?Promise.resolve(_):(async(o,S,w)=>{let E=h(o),_=null;const T=nm(E,S);if(null===u){const e=b.outputChannelCount.reduce(((e,t)=>e+t),0),n=s(S,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),r=[];for(let t=0;t<o.numberOfOutputs;t+=1)r.push(i(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:b.outputChannelCount[t]}));const c=a(S,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1});c.connect=t.bind(null,r),c.disconnect=l.bind(null,r),_=[n,r,c]}else T||(E=new u(S,g));if(y.set(S,null===_?E:_[2]),null!==_){if(null===x){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const e=o.channelCount*o.numberOfInputs,t=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,n=e+t,l=async()=>{const l=new d(n,128*Math.ceil(o.context.length/128),S.sampleRate),c=[],h=[];for(let e=0;e<b.numberOfInputs;e+=1)c.push(a(l,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),h.push(s(l,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));const u=await Promise.all(Array.from(o.parameters.values()).map((async e=>{const t=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await f(l,e,t.offset,w),t}))),g=i(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+t)});for(let e=0;e<b.numberOfInputs;e+=1){c[e].connect(h[e]);for(let t=0;t<b.channelCount;t+=1)h[e].connect(g,t,e*b.channelCount+t)}for(const[t,n]of u.entries())n.connect(g,0,e+t),n.start(0);return g.connect(l.destination),await Promise.all(c.map((e=>p(o,l,e,w)))),m(l)};x=Jm(o,0===n?null:await l(),S,b,v,c)}const e=await x,t=n(S,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,h,u]=_;null!==e&&(t.buffer=e,t.start(0)),t.connect(l);for(let n=0,i=0;n<o.numberOfOutputs;n+=1){const e=h[n];for(let t=0;t<b.outputChannelCount[n];t+=1)l.connect(e,i+t,t);i+=b.outputChannelCount[n]}return u}if(T)for(const[t,n]of o.parameters.entries())await e(S,n,E.parameters.get(t),w);else for(const[e,t]of o.parameters.entries())await f(S,t,E.parameters.get(e),w);return await p(o,S,E,w),E})(S,w,E)}}})(Mb,Zv,Cb,jb,Wb,Xb,yb,Qv,Jv,Ov,_m,ny,Xg,Ab,Jg,cv),sy=(Rv&&((e,t,n,i,s,r,a,o,l)=>{})($v,cb,Nb,iy,ty,nb,Yg,ny,Gg),((e,t,n,i,s)=>{})(cg,kg,Fg,mv,qg),((e,t)=>(n,i,s)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,i,s)}catch(r){if("IndexSizeError"===r.name||"SyntaxError"===r.name)throw e();throw r}})(kg,Xg)),ry=((e,t,n,i,s,r,a,o)=>{const l=[];return(c,h)=>n(c).render(c,h,l).then((()=>Promise.all(Array.from(i(h)).map((e=>n(e).render(e,h,l)))))).then((()=>s(h))).then((n=>("function"!==typeof n.copyFromChannel?(a(n),rm(n)):t(r,(()=>r(n)))||o(n),e.add(n),n)))})(db,Wg,Qg,Kv,cv,im,gb,bb);var ay,oy,ly=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{l(i.next(e))}catch(aC){r(aC)}}function o(e){try{l(i.throw(e))}catch(aC){r(aC)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))};!function(e){e.INIT="INIT",e.PLAYING="PLAYING",e.STOPPED="STOPPED",e.PAUSED="PAUSED"}(ay||(ay={})),function(e){e.STATE_CHANGE="state-change",e.ITERATION="iteration"}(oy||(oy={}));const cy=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qv,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ip;this.defaultBpm=100,this.scoreInstruments=[],this.ready=!1,this.ac=e,this.ac.suspend(),this.instrumentPlayer=t,this.instrumentPlayer.init(this.ac),this.availableInstruments=this.instrumentPlayer.instruments,this.events=new Fp,this.cursor=null,this.sheet=null,this.scheduler=null,this.iterationSteps=0,this.currentIterationStep=0,this.timeoutHandles=[],this.playbackSettings={bpm:this.defaultBpm,masterVolume:1},this.setState(ay.INIT)}get wholeNoteLength(){return Math.round(60/this.playbackSettings.bpm*4e3)}getPlaybackInstrument(e){if(!this.sheet)return null;const t=this.sheet.Instruments.flatMap((e=>e.Voices)).find((t=>t.VoiceId===e));return this.availableInstruments.find((e=>e.midiId===t.midiInstrumentId))}setInstrument(e,t){return ly(this,void 0,void 0,(function*(){yield this.instrumentPlayer.load(t),e.midiInstrumentId=t}))}loadScore(e){return ly(this,void 0,void 0,(function*(){this.ready=!1,this.sheet=e.Sheet,this.scoreInstruments=this.sheet.Instruments,this.cursor=e.cursor,this.sheet.HasBPMInfo&&this.setBpm(this.sheet.DefaultStartTempoInBpm),yield this.loadInstruments(),this.initInstruments(),this.scheduler=new Ap(this.wholeNoteLength,this.ac,((e,t)=>this.notePlaybackCallback(e,t))),this.countAndSetIterationSteps(),this.ready=!0,this.setState(ay.STOPPED)}))}initInstruments(){for(const e of this.sheet.Instruments)for(const t of e.Voices)t.midiInstrumentId=e.MidiInstrumentId}loadInstruments(){return ly(this,void 0,void 0,(function*(){let e=[];for(const t of this.sheet.Instruments){null==this.availableInstruments.find((e=>e.midiId===t.MidiInstrumentId))&&this.fallbackToPiano(t),e.push(this.instrumentPlayer.load(t.MidiInstrumentId))}yield Promise.all(e)}))}fallbackToPiano(e){if(console.warn("Can't find playback instrument for midiInstrumentId ".concat(e.MidiInstrumentId,". Falling back to piano")),e.MidiInstrumentId=0,null==this.availableInstruments.find((e=>0===e.midiId)))throw new Error("Piano fallback failed, grand piano not supported")}play(){return ly(this,void 0,void 0,(function*(){yield this.ac.resume(),this.state!==ay.INIT&&this.state!==ay.STOPPED||this.cursor.show(),this.setState(ay.PLAYING),this.scheduler.start()}))}stop(){return ly(this,void 0,void 0,(function*(){this.setState(ay.STOPPED),this.stopPlayers(),this.clearTimeouts(),this.scheduler.reset(),this.cursor.reset(),this.currentIterationStep=0,this.cursor.hide()}))}pause(){this.setState(ay.PAUSED),this.ac.suspend(),this.stopPlayers(),this.scheduler.setIterationStep(this.currentIterationStep),this.scheduler.pause(),this.clearTimeouts()}jumpToStep(e){for(this.pause(),this.currentIterationStep>e&&(this.cursor.reset(),this.currentIterationStep=0);this.currentIterationStep<e;)this.cursor.next(),++this.currentIterationStep;let t=this.currentIterationStep;this.currentIterationStep>0&&this.currentIterationStep<this.iterationSteps&&++t,this.scheduler.setIterationStep(t)}setBpm(e){this.playbackSettings.bpm=e,this.scheduler&&(this.scheduler.wholeNoteLength=this.wholeNoteLength)}on(e,t){this.events.on(e,t)}countAndSetIterationSteps(){this.cursor.reset();let e=0;for(;!this.cursor.Iterator.EndReached;)this.cursor.Iterator.CurrentVoiceEntries&&this.scheduler.loadNotes(this.cursor.Iterator.CurrentVoiceEntries),this.cursor.next(),++e;this.iterationSteps=e,this.cursor.reset()}notePlaybackCallback(e,t){if(this.state!==ay.PLAYING)return;let n=new Map;for(let i of t){if(i.isRest())continue;const e=Op(i,this.wholeNoteLength);if(0===e)continue;const t=Dp(i),s=Rp(i),r=i.ParentVoiceEntry.ParentVoice.midiInstrumentId,a=i.ParentVoiceEntry.ParentVoice.Parent.SubInstruments[0].fixedKey||0;n.has(r)||n.set(r,[]),n.get(r).push({note:i.halfTone-12*a,duration:e/1e3,gain:t,articulation:s})}for(const[i,s]of n)this.instrumentPlayer.schedule(i,this.ac.currentTime+e,s);this.timeoutHandles.push(window.setTimeout((()=>this.iterationCallback()),Math.max(0,1e3*e-35)),window.setTimeout((()=>this.events.emit(oy.ITERATION,t)),1e3*e))}setState(e){this.state=e,this.events.emit(oy.STATE_CHANGE,e)}stopPlayers(){for(const e of this.sheet.Instruments)for(const t of e.Voices)this.instrumentPlayer.stop(t.midiInstrumentId)}clearTimeouts(){for(let e of this.timeoutHandles)clearTimeout(e);this.timeoutHandles=[]}iterationCallback(){this.state===ay.PLAYING&&(this.currentIterationStep>0&&this.cursor.next(),++this.currentIterationStep)}},hy="15.1.22";var uy=n(418);const dy=new WeakSet,fy=new WeakMap,py=new WeakMap,my=new WeakMap,gy=new WeakMap,by=new WeakMap,vy=new WeakMap,yy=new WeakMap,xy=new WeakMap,Sy=new WeakMap,wy={construct:()=>wy},Ey=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,_y=(e,t)=>{const n=[];let i=e.replace(/^[\s]+/,""),s=i.match(Ey);for(;null!==s;){const e=s[1].slice(1,-1),r=s[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(r),i=i.slice(s[0].length).replace(/^[\s]+/,""),s=i.match(Ey)}return[n.join(";"),i]},Ty=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},My=e=>{if(!(e=>{try{new new Proxy(e,wy)}catch(t){return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!==typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},Cy=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},Ay=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[i]=n;return e.delete(i),i},Py=(e,t,n,i)=>{const s=Cy(e,t),r=Ay(s,(e=>e[0]===n&&e[1]===i));return 0===s.size&&e.delete(t),r},Ny=e=>Cy(vy,e),ky=e=>{if(dy.has(e))throw new Error("The AudioNode is already stored.");dy.add(e),Ny(e).forEach((e=>e(!0)))},Ly=e=>"port"in e,Iy=e=>{if(!dy.has(e))throw new Error("The AudioNode is not stored.");dy.delete(e),Ny(e).forEach((e=>e(!1)))},Ry=(e,t)=>{!Ly(e)&&t.every((e=>0===e.size))&&Iy(e)},Oy={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Dy=(e,t)=>e.context===t,Fy=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch(t){return!1}return!0},By=()=>new DOMException("","IndexSizeError"),jy=e=>{var t;e.getChannelData=(t=e.getChannelData,n=>{try{return t.call(e,n)}catch(i){if(12===i.code)throw By();throw i}})},Vy={numberOfChannels:1},Gy=-34028234663852886e22,Wy=-Gy,zy=e=>dy.has(e),Uy={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},Hy=e=>Cy(fy,e),Xy=e=>Cy(my,e),Yy=(e,t)=>{const{activeInputs:n}=Hy(e);n.forEach((n=>n.forEach((n=>{let[i]=n;t.includes(e)||Yy(i,[...t,e])}))));const i=(e=>"playbackRate"in e)(e)?[e.playbackRate]:Ly(e)?Array.from(e.parameters.values()):(e=>"frequency"in e&&"gain"in e)(e)?[e.Q,e.detune,e.frequency,e.gain]:(e=>"offset"in e)(e)?[e.offset]:(e=>!("frequency"in e)&&"gain"in e)(e)?[e.gain]:(e=>"detune"in e&&"frequency"in e&&!("gain"in e))(e)?[e.detune,e.frequency]:(e=>"pan"in e)(e)?[e.pan]:[];for(const s of i){const e=Xy(s);void 0!==e&&e.activeInputs.forEach((e=>{let[n]=e;return Yy(n,t)}))}zy(e)&&Iy(e)},qy=e=>{Yy(e.destination,[])},Ky=e=>void 0===e||"number"===typeof e||"string"===typeof e&&("balanced"===e||"interactive"===e||"playback"===e),$y=e=>"context"in e,Zy=e=>$y(e[0]),Qy=(e,t,n,i)=>{for(const s of e)if(n(s)){if(i)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},Jy=(e,t,n,i)=>{let[s,r]=n;Qy(e,[t,s,r],(e=>e[0]===t&&e[1]===s),i)},ex=(e,t,n)=>{let[i,s,r]=t;const a=e.get(i);void 0===a?e.set(i,new Set([[s,r]])):Qy(a,[s,r],(e=>e[0]===s),n)},tx=e=>"inputs"in e,nx=(e,t,n,i)=>{if(tx(t)){const s=t.inputs[i];return e.connect(s,n,0),[s,n,0]}return e.connect(t,n,i),[t,n,i]},ix=(e,t,n)=>{for(const i of e)if(i[0]===t&&i[1]===n)return e.delete(i),i;return null},sx=(e,t)=>{if(!Ny(e).delete(t))throw new Error("Missing the expected event listener.")},rx=(e,t,n)=>{const i=Cy(e,t),s=Ay(i,(e=>e[0]===n));return 0===i.size&&e.delete(t),s},ax=(e,t,n,i)=>{tx(t)?e.disconnect(t.inputs[i],n,0):e.disconnect(t,n,i)},ox=e=>Cy(py,e),lx=e=>Cy(gy,e),cx=e=>yy.has(e),hx=e=>!dy.has(e),ux=(e,t)=>new Promise((n=>{if(null!==t)n(!0);else{const t=e.createScriptProcessor(256,1,1),i=e.createGain(),s=e.createBuffer(1,2,44100),r=s.getChannelData(0);r[0]=1,r[1]=1;const a=e.createBufferSource();a.buffer=s,a.loop=!0,a.connect(t).connect(e.destination),a.connect(i),a.disconnect(i),t.onaudioprocess=i=>{const s=i.inputBuffer.getChannelData(0);Array.prototype.some.call(s,(e=>1===e))?n(!0):n(!1),a.stop(),t.onaudioprocess=null,a.disconnect(t),t.disconnect(e.destination)},a.start()}})),dx=(e,t)=>{const n=new Map;for(const i of e)for(const e of i){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach(((e,n)=>t(n,e)))},fx=e=>"context"in e,px=(e,t,n,i)=>{const{activeInputs:s,passiveInputs:r}=Xy(t),{outputs:a}=Hy(e),o=Ny(e),l=a=>{const o=ox(e),l=lx(t);if(a){const t=rx(r,e,n);Jy(s,e,t,!1),i||cx(e)||o.connect(l,n)}else{const t=((e,t,n)=>Ay(e,(e=>e[0]===t&&e[1]===n)))(s,e,n);ex(r,t,!1),i||cx(e)||o.disconnect(l,n)}};return!!Qy(a,[t,n],(e=>e[0]===t&&e[1]===n),!0)&&(o.add(l),zy(e)?Jy(s,e,[n,l],!0):ex(r,[e,n,l],!0),!0)},mx=(e,t,n,i,s)=>{const[r,a]=((e,t,n,i)=>{const{activeInputs:s,passiveInputs:r}=Hy(t),a=ix(s[i],e,n);if(null===a)return[Py(r,e,n,i)[2],!1];return[a[2],!0]})(e,n,i,s);if(null!==r&&(sx(e,r),!a||t||cx(e)||ax(ox(e),ox(n),i,s)),zy(n)){const{activeInputs:e}=Hy(n);Ry(n,e)}},gx=(e,t,n,i)=>{const[s,r]=((e,t,n)=>{const{activeInputs:i,passiveInputs:s}=Xy(t),r=ix(i,e,n);if(null===r)return[rx(s,e,n)[1],!1];return[r[2],!0]})(e,n,i);null!==s&&(sx(e,s),!r||t||cx(e)||ox(e).disconnect(lx(n),i))};class bx{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._map.forEach(((n,i)=>e.call(t,n,i,this)))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const vx={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function yx(e,t,n,i,s){if("function"===typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],i,s);else{const r=e.getChannelData(i);if(0===t[n].byteLength)t[n]=r.slice(s,s+128);else{const e=new Float32Array(r.buffer,s*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}const xx=(e,t,n,i,s)=>{"function"===typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],i,s):0!==t[n].byteLength&&e.getChannelData(i).set(t[n],s)},Sx=(e,t)=>{const n=[];for(let i=0;i<e;i+=1){const e=[],s="number"===typeof t?t:t[i];for(let t=0;t<s;t+=1)e.push(new Float32Array(128));n.push(e)}return n},wx=async(e,t,n,i,s,r,a)=>{const o=null===t?128*Math.ceil(e.context.length/128):t.length,l=i.channelCount*i.numberOfInputs,c=s.reduce(((e,t)=>e+t),0),u=0===c?null:n.createBuffer(c,o,n.sampleRate);if(void 0===r)throw new Error("Missing the processor constructor.");const d=Hy(e),f=await((e,t)=>{const n=Cy(Sy,e),i=ox(t);return Cy(n,i)})(n,e),p=Sx(i.numberOfInputs,i.channelCount),m=Sx(i.numberOfOutputs,s),g=Array.from(e.parameters.keys()).reduce(((e,t)=>h(h({},e),{},{[t]:new Float32Array(128)})),{});for(let h=0;h<o;h+=128){if(i.numberOfInputs>0&&null!==t)for(let e=0;e<i.numberOfInputs;e+=1)for(let n=0;n<i.channelCount;n+=1)yx(t,p[e],n,n,h);void 0!==r.parameterDescriptors&&null!==t&&r.parameterDescriptors.forEach(((e,n)=>{let{name:i}=e;yx(t,g,i,l+n,h)}));for(let e=0;e<i.numberOfInputs;e+=1)for(let t=0;t<s[e];t+=1)0===m[e][t].byteLength&&(m[e][t]=new Float32Array(128));try{const e=p.map(((e,t)=>0===d.activeInputs[t].size?[]:e)),t=a(h/n.sampleRate,n.sampleRate,(()=>f.process(e,m,g)));if(null!==u)for(let n=0,r=0;n<i.numberOfOutputs;n+=1){for(let e=0;e<s[n];e+=1)xx(u,m[n],e,r+e,h);r+=s[n]}if(!t)break}catch(b){e.dispatchEvent(new ErrorEvent("processorerror",{colno:b.colno,filename:b.filename,lineno:b.lineno,message:b.message}));break}}return u},Ex={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},_x={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Tx={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Mx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Cx={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Ax=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise((i=>{const s=()=>{n.onmessage=null,t.close(),n.close(),i()};n.onmessage=()=>s();try{t.postMessage(e,[e])}catch(r){}finally{s()}}))},Px={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Nx=(e,t,n)=>{const i=t[n];if(void 0===i)throw e();return i},kx={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Lx={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Ix=()=>new DOMException("","InvalidStateError"),Rx=()=>new DOMException("","InvalidAccessError"),Ox={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},Dx=(e,t,n,i,s,r,a,o,l,c,h)=>{const u=c.length;let d=o;for(let f=0;f<u;f+=1){let o=n[0]*c[f];for(let t=1;t<s;t+=1){const i=d-t&l-1;o+=n[t]*r[i],o-=e[t]*a[i]}for(let e=s;e<i;e+=1)o+=n[e]*r[d-e&l-1];for(let n=s;n<t;n+=1)o-=e[n]*a[d-n&l-1];r[d]=c[f],a[d]=o,d=d+1&l-1,h[f]=o}return d},Fx={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Bx=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch(n){}return!1},jx={numberOfChannels:1},Vx=(e,t,n)=>{const i=t[n];void 0!==i&&i!==e[n]&&(e[n]=i)},Gx=(e,t)=>{Vx(e,t,"channelCount"),Vx(e,t,"channelCountMode"),Vx(e,t,"channelInterpretation")},Wx=e=>"function"===typeof e.getFloatTimeDomainData,zx=(e,t,n)=>{const i=t[n];void 0!==i&&i!==e[n].value&&(e[n].value=i)},Ux=e=>{e.start=(t=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2?arguments[2]:void 0;if("number"===typeof s&&s<0||i<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,i,s)})(e.start)},Hx=e=>{var t;e.stop=(t=e.stop,function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})},Xx=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),Yx=async(e,t)=>{const n=await(e=>new Promise(((t,n)=>{const{port1:i,port2:s}=new MessageChannel;i.onmessage=e=>{let{data:n}=e;i.close(),s.close(),t(n)},i.onmessageerror=e=>{let{data:t}=e;i.close(),s.close(),n(t)},s.postMessage(e)})))(t);return new e(n)},qx=(e,t)=>{const n=e.createBiquadFilter();return Gx(n,t),zx(n,t,"Q"),zx(n,t,"detune"),zx(n,t,"frequency"),zx(n,t,"gain"),Vx(n,t,"type"),n},Kx=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return Gx(n,t),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Ix()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw Ix()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw Ix()}})})(n),n},$x=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),Zx=["offset"],Qx=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return Gx(n,t),zx(n,t,"delayTime"),n},Jx=(e,t)=>{const n=e.createGain();return Gx(n,t),zx(n,t,"gain"),n};function eS(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function tS(e,t){let n=[0,0];for(let r=e.length-1;r>=0;r-=1)s=t,n=[(i=n)[0]*s[0]-i[1]*s[1],i[0]*s[1]+i[1]*s[0]],n[0]+=e[r];var i,s;return n}const nS=["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"],iS=(e,t,n,i)=>e.createScriptProcessor(t,n,i),sS=["channelCount","channelCountMode","pan"],rS=["curve","oversample"],aS=()=>new DOMException("","NotSupportedError"),oS={numberOfChannels:1},lS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},cS={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},hS={disableNormalization:!1},uS={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},dS=()=>new DOMException("","UnknownError"),fS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},pS=(e,t,n)=>void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),mS=e=>{if(null===e)return!1;const t=e.length;return t%2!==0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},gS=(e,t,n,i)=>{let s=e;for(;!s.hasOwnProperty(t);)s=Object.getPrototypeOf(s);const{get:r,set:a}=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,{get:n(r),set:i(a)})},bS=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(i){if(9!==i.code)throw i;bS(e,t,n+1e-7)}},vS=e=>{const t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},yS=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch(i){return!1}},xS=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},SS=(e,t)=>{const n=t.createGain();e.connect(n);const i=(t=>()=>{t.call(e,n),e.removeEventListener("ended",i)})(e.disconnect);e.addEventListener("ended",i),$x(e,n),e.stop=(t=>{let i=!1;return function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(i)try{t.call(e,s)}catch(r){n.gain.setValueAtTime(0,s)}else t.call(e,s),i=!0}})(e.stop)},wS=(e,t)=>n=>{const i={value:e};return Object.defineProperties(n,{currentTarget:i,target:i}),"function"===typeof t?t.call(e,n):t.handleEvent.call(e,n)},ES=(e=>(t,n,i,s)=>{let[r,a,o]=i;e(t[a],[n,r,o],(e=>e[0]===n&&e[1]===r),s)})(Qy),_S=(e=>(t,n,i,s)=>{let[r,a,o]=i;const l=t.get(r);void 0===l?t.set(r,new Set([[a,n,o]])):e(l,[a,n,o],(e=>e[0]===a&&e[1]===n),s)})(Qy),TS=(e=>(t,n,i,s)=>e(t[s],(e=>e[0]===n&&e[1]===i)))(Ay),MS=new WeakMap,CS=(e=>t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:0})(MS),AS=((e,t)=>(n,i)=>{const s=t.get(n);if(void 0!==s)return s;const r=e.get(n);if(void 0!==r)return r;try{const s=i();return s instanceof Promise?(e.set(n,s),s.catch((()=>!1)).then((i=>(e.delete(n),t.set(n,i),i)))):(t.set(n,s),s)}catch(a){return t.set(n,!1),!1}})(new Map,new WeakMap),PS="undefined"===typeof window?null:window,NS=((e,t)=>(n,i)=>{const s=n.createAnalyser();if(Gx(s,i),!(i.maxDecibels>i.minDecibels))throw t();return Vx(s,i,"fftSize"),Vx(s,i,"maxDecibels"),Vx(s,i,"minDecibels"),Vx(s,i,"smoothingTimeConstant"),e(Wx,(()=>Wx(s)))||(e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const i=Math.max(n.length,e.fftSize);for(let e=0;e<i;e+=1)t[e]=.0078125*(n[e]-128);return t}})(s),s})(AS,By),kS=(e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(Hy),LS=((e,t,n)=>async(i,s,r)=>{const a=e(i);await Promise.all(a.activeInputs.map(((e,a)=>Array.from(e).map((async e=>{let[o,l]=e;const c=t(o),h=await c.render(o,s),u=i.context.destination;n(o)||i===u&&n(i)||h.connect(r,l,a)})))).reduce(((e,t)=>[...e,...t]),[]))})(Hy,kS,cx),IS=((e,t,n)=>()=>{const i=new WeakMap;return{render(s,r){const a=i.get(r);return void 0!==a?Promise.resolve(a):(async(s,r)=>{let a=t(s);if(!Dy(a,r)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=e(r,t)}return i.set(r,a),await n(s,r,a),a})(s,r)}}})(NS,ox,LS),RS=(e=>t=>{const n=e.get(t);if(void 0===n)throw Ix();return n})(by),OS=(e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null)(PS),DS=(e=>t=>null!==e&&t instanceof e)(OS),FS=new WeakMap,BS=(e=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,i){if(null!==n){let s=this._listeners.get(n);void 0===s&&(s=e(this,n),"function"===typeof n&&this._listeners.set(n,s)),this._nativeEventTarget.addEventListener(t,s,i)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const i=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===i?null:i,n)}})(wS),jS=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(PS),VS=(e=>t=>null!==e&&t instanceof e)(jS),GS=(e=>t=>null!==e&&"function"===typeof e.AudioNode&&t instanceof e.AudioNode)(PS),WS=(e=>t=>null!==e&&"function"===typeof e.AudioParam&&t instanceof e.AudioParam)(PS),zS=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(PS),US=((e,t,n,i,s,r,a,o,l,c,h,u,d,f,p,m)=>class extends c{constructor(t,i,s,r){super(s),this._context=t,this._nativeAudioNode=s;const a=h(t);u(a)&&!0!==n(ux,(()=>ux(a,m)))&&(e=>{const t=new Map;e.connect=(e=>function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=fx(n)?e(n,i,s):e(n,i),a=t.get(n);return void 0===a?t.set(n,[{input:s,output:i}]):a.every((e=>e.input!==s||e.output!==i))&&a.push({input:s,output:i}),r})(e.connect.bind(e)),e.disconnect=(n=>(i,s,r)=>{if(n.apply(e),void 0===i)t.clear();else if("number"===typeof i)for(const[e,n]of t){const s=n.filter((e=>e.output!==i));0===s.length?t.delete(e):t.set(e,s)}else if(t.has(i))if(void 0===s)t.delete(i);else{const e=t.get(i);if(void 0!==e){const n=e.filter((e=>e.output!==s&&(e.input!==r||void 0===r)));0===n.length?t.delete(i):t.set(i,n)}}for(const[n,a]of t)a.forEach((t=>{fx(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)}))})(e.disconnect)})(s),py.set(this,s),vy.set(this,new Set),"closed"!==t.state&&i&&ky(this),e(this,r,s)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw s();const c=h(this._context),u=p(c);if(d(e)||f(e))throw r();if($y(e)){const s=ox(e);try{const t=nx(this._nativeAudioNode,s,n,o),i=hx(this);(u||i)&&this._nativeAudioNode.disconnect(...t),"closed"!==this.context.state&&!i&&hx(e)&&ky(e)}catch(g){if(12===g.code)throw r();throw g}if(t(this,e,n,o,u)){const t=l([this],e);dx(t,i(u))}return e}const m=lx(e);if("playbackRate"===m.name&&1024===m.maxValue)throw a();try{this._nativeAudioNode.connect(m,n),(u||hx(this))&&this._nativeAudioNode.disconnect(m,n)}catch(g){if(12===g.code)throw r();throw g}if(px(this,e,n,u)){const t=l([this],e);dx(t,i(u))}}disconnect(e,t,n){let i;const a=h(this._context),c=p(a);if(void 0===e)i=((e,t)=>{const n=Hy(e),i=[];for(const s of n.outputs)Zy(s)?mx(e,t,...s):gx(e,t,...s),i.push(s[0]);return n.outputs.clear(),i})(this,c);else if("number"===typeof e){if(e<0||e>=this.numberOfOutputs)throw s();i=((e,t,n)=>{const i=Hy(e),s=[];for(const r of i.outputs)r[1]===n&&(Zy(r)?mx(e,t,...r):gx(e,t,...r),s.push(r[0]),i.outputs.delete(r));return s})(this,c,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw s();if($y(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw s();if(i=((e,t,n,i,s)=>{const r=Hy(e);return Array.from(r.outputs).filter((e=>e[0]===n&&(void 0===i||e[1]===i)&&(void 0===s||e[2]===s))).map((n=>(Zy(n)?mx(e,t,...n):gx(e,t,...n),r.outputs.delete(n),n[0])))})(this,c,e,t,n),0===i.length)throw r()}for(const s of i){const e=l([this],s);dx(e,o)}}})((e=>(t,n,i)=>{const s=[];for(let e=0;e<i.numberOfInputs;e+=1)s.push(new Set);e.set(t,{activeInputs:s,outputs:new Set,passiveInputs:new WeakMap,renderer:n})})(fy),((e,t,n,i,s,r,a,o,l,c,h,u,d)=>{const f=new WeakMap;return(p,m,g,b,v)=>{const{activeInputs:y,passiveInputs:x}=r(m),{outputs:S}=r(p),w=o(p),E=r=>{const o=l(m),c=l(p);if(r){const t=Py(x,p,g,b);e(y,p,t,!1),v||u(p)||n(c,o,g,b),d(m)&&ky(m)}else{const e=i(y,p,g,b);t(x,b,e,!1),v||u(p)||s(c,o,g,b);const n=a(m);if(0===n)h(m)&&Ry(m,y);else{const e=f.get(m);void 0!==e&&clearTimeout(e),f.set(m,setTimeout((()=>{h(m)&&Ry(m,y)}),1e3*n))}}};return!!c(S,[m,g,b],(e=>e[0]===m&&e[1]===g&&e[2]===b),!0)&&(w.add(E),h(p)?e(y,p,[g,b,E],!0):t(x,b,[p,g,E],!0),!0)}})(ES,_S,nx,TS,ax,Hy,CS,Ny,ox,Qy,zy,cx,hx),AS,((e,t,n,i,s,r)=>a=>(o,l)=>{const c=e.get(o);if(void 0===c){if(!a&&r(o)){const e=i(o),{outputs:r}=n(o);for(const n of r)if(Zy(n)){const s=i(n[0]);t(e,s,n[1],n[2])}else{const t=s(n[0]);e.disconnect(t,n[1])}}e.set(o,l)}else e.set(o,c+l)})(yy,ax,Hy,ox,lx,zy),By,Rx,aS,((e,t,n,i,s,r,a,o)=>(l,c)=>{const h=t.get(l);if(void 0===h)throw new Error("Missing the expected cycle count.");const u=r(l.context),d=o(u);if(h===c){if(t.delete(l),!d&&a(l)){const t=i(l),{outputs:r}=n(l);for(const n of r)if(Zy(n)){const s=i(n[0]);e(t,s,n[1],n[2])}else{const e=s(n[0]);t.connect(e,n[1])}}}else t.set(l,h-c)})(nx,yy,Hy,ox,lx,RS,zy,DS),((e,t,n)=>function i(s,r){const a=$y(r)?r:n(e,r);if((e=>"delayTime"in e)(a))return[];if(s[0]===a)return[s];if(s.includes(a))return[];const{outputs:o}=t(a);return Array.from(o).map((e=>i([...s,a],e[0]))).reduce(((e,t)=>e.concat(t)),[])})(FS,Hy,Cy),BS,RS,VS,GS,WS,DS,zS),HS=((e,t,n,i,s,r)=>class extends e{constructor(e,n){const a=s(e),o=h(h({},Oy),n),l=i(a,o);super(e,!1,l,r(a)?t():null),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(US,IS,By,NS,RS,DS),XS=new WeakSet,YS=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(PS),qS=(e=>t=>(e[0]=t,e[0]))(new Uint32Array(1)),KS=((e,t)=>n=>{n.copyFromChannel=function(i,s){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),a=e(s);if(a>=n.numberOfChannels)throw t();const o=n.length,l=n.getChannelData(a),c=i.length;for(let e=r<0?-r:0;e+r<o&&e<c;e+=1)i[e]=l[e+r]},n.copyToChannel=function(i,s){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),a=e(s);if(a>=n.numberOfChannels)throw t();const o=n.length,l=n.getChannelData(a),c=i.length;for(let e=r<0?-r:0;e+r<o&&e<c;e+=1)l[e+r]=i[e]}})(qS,By),$S=(e=>t=>{t.copyFromChannel=(n=>function(i,s){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),a=e(s);if(r<t.length)return n.call(t,i,a,r)})(t.copyFromChannel),t.copyToChannel=(n=>function(i,s){const r=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),a=e(s);if(r<t.length)return n.call(t,i,a,r)})(t.copyToChannel)})(qS),ZS=((e,t,n,i,s,r,a,o)=>{let l=null;return class c{constructor(c){if(null===s)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:d,sampleRate:f}=h(h({},Vy),c);null===l&&(l=new s(1,1,44100));const p=null!==i&&t(r,r)?new i({length:u,numberOfChannels:d,sampleRate:f}):l.createBuffer(d,u,f);if(0===p.numberOfChannels)throw n();return"function"!==typeof p.copyFromChannel?(a(p),jy(p)):t(Fy,(()=>Fy(p)))||o(p),e.add(p),p}static[Symbol.hasInstance](t){return null!==t&&"object"===typeof t&&Object.getPrototypeOf(t)===c.prototype||e.has(t)}}})(XS,AS,aS,YS,OS,(e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch(t){return!1}return!0})(YS),KS,$S),QS=(e=>(t,n)=>{const i=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(i).connect(t.destination);const s=()=>{n.removeEventListener("ended",s),n.disconnect(i),i.disconnect()};n.addEventListener("ended",s)})(Jx),JS=((e,t,n)=>async(i,s,r)=>{const a=t(i);await Promise.all(Array.from(a.activeInputs).map((async t=>{let[i,a]=t;const o=e(i),l=await o.render(i,s);n(i)||l.connect(r,a)})))})(kS,Xy,cx),ew=(e=>(t,n,i)=>e(n,t,i))(JS),tw=((e,t,n,i,s,r,a,o,l,c,h)=>(u,d)=>{const f=u.createBufferSource();return Gx(f,d),zx(f,d,"playbackRate"),Vx(f,d,"buffer"),Vx(f,d,"loop"),Vx(f,d,"loopEnd"),Vx(f,d,"loopStart"),t(n,(()=>n(u)))||(e=>{e.start=(t=>{let n=!1;return function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(n)throw Ix();t.call(e,i,s,r),n=!0}})(e.start)})(f),t(i,(()=>i(u)))||l(f),t(s,(()=>s(u)))||c(f,u),t(r,(()=>r(u)))||Ux(f),t(a,(()=>a(u)))||h(f,u),t(o,(()=>o(u)))||Hx(f),e(u,f),f})(QS,AS,(e=>{const t=e.createBufferSource();t.start();try{t.start()}catch(n){return!0}return!1}),(e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch(i){return!1}return!0}),(e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch(n){return!1}return!0}),vS,yS,xS,(e=>{e.start=(t=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2?arguments[2]:void 0;const r=e.buffer,a=null===r?i:Math.min(r.duration,i);null!==r&&a>r.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,a,s)})(e.start)}),(e=>(t,n)=>{const i=n.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=i),e(t,"buffer",(e=>()=>{const n=e.call(t);return n===i?null:n}),(e=>n=>e.call(t,null===n?i:n)))})(gS),SS),nw=((e,t)=>(n,i,s)=>(e(i).replay(s),t(i,n,s)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(Xy),JS),iw=((e,t,n,i,s)=>()=>{const r=new WeakMap;let a=null,o=null;return{set start(e){a=e},set stop(e){o=e},render(l,c){const h=r.get(c);return void 0!==h?Promise.resolve(h):(async(l,c)=>{let h=n(l);const u=Dy(h,c);if(!u){const e={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=t(c,e),null!==a&&h.start(...a),null!==o&&h.stop(o)}return r.set(c,h),u?await e(c,l.playbackRate,h.playbackRate):await i(c,l.playbackRate,h.playbackRate),await s(l,c,h),h})(l,c)}}})(ew,tw,ox,nw,LS),sw=((e,t,n,i,s,r,a,o,l,c,h,u,d)=>function(f,p,m){let g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,b=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const v=m.value,y=new uy.AutomationEventList(v),x=p?i(y):null,S={get defaultValue(){return v},get maxValue(){return null===g?m.maxValue:g},get minValue(){return null===b?m.minValue:b},get value(){return m.value},set value(e){m.value=e,S.setValueAtTime(e,f.context.currentTime)},cancelAndHoldAtTime(e){if("function"===typeof m.cancelAndHoldAtTime)null===x&&y.flush(f.context.currentTime),y.add(s(e)),m.cancelAndHoldAtTime(e);else{const t=Array.from(y).pop();null===x&&y.flush(f.context.currentTime),y.add(s(e));const n=Array.from(y).pop();m.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return S},cancelScheduledValues:e=>(null===x&&y.flush(f.context.currentTime),y.add(r(e)),m.cancelScheduledValues(e),S),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;const n=f.context.currentTime;return null===x&&y.flush(n),0===Array.from(y).length&&(y.add(c(v,n)),m.setValueAtTime(v,n)),y.add(a(e,t)),m.exponentialRampToValueAtTime(e,t),S},linearRampToValueAtTime(e,t){const n=f.context.currentTime;return null===x&&y.flush(n),0===Array.from(y).length&&(y.add(c(v,n)),m.setValueAtTime(v,n)),y.add(o(e,t)),m.linearRampToValueAtTime(e,t),S},setTargetAtTime:(e,t,n)=>(null===x&&y.flush(f.context.currentTime),y.add(l(e,t,n)),m.setTargetAtTime(e,t,n),S),setValueAtTime:(e,t)=>(null===x&&y.flush(f.context.currentTime),y.add(c(e,t)),m.setValueAtTime(e,t),S),setValueCurveAtTime(e,t,n){const i=e instanceof Float32Array?e:new Float32Array(e);if(null!==u&&"webkitAudioContext"===u.name){const e=t+n,s=f.context.sampleRate,r=Math.ceil(t*s),a=Math.floor(e*s),o=a-r,l=new Float32Array(o);for(let h=0;h<o;h+=1){const e=(i.length-1)/n*((r+h)/s-t),a=Math.floor(e),o=Math.ceil(e);l[h]=a===o?i[a]:(1-(e-a))*i[a]+(1-(o-e))*i[o]}null===x&&y.flush(f.context.currentTime),y.add(h(l,t,n)),m.setValueCurveAtTime(l,t,n);const c=a/s;c<e&&d(S,l[l.length-1],c),d(S,i[i.length-1],e)}else null===x&&y.flush(f.context.currentTime),y.add(h(i,t,n)),m.setValueCurveAtTime(i,t,n);return S}};return n.set(S,m),t.set(S,f),e(S,x),S})((e=>(t,n)=>{e.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})})(my),FS,gy,(e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:i}=n;t.exponentialRampToValueAtTime(i,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:i}=n;t.linearRampToValueAtTime(i,e)}else if("setTarget"===n.type){const{startTime:e,target:i,timeConstant:s}=n;t.setTargetAtTime(i,e,s)}else if("setValue"===n.type){const{startTime:e,value:i}=n;t.setValueAtTime(i,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:i,values:s}=n;t.setValueCurveAtTime(s,i,e)}}}})),uy.createCancelAndHoldAutomationEvent,uy.createCancelScheduledValuesAutomationEvent,uy.createExponentialRampToValueAutomationEvent,uy.createLinearRampToValueAutomationEvent,uy.createSetTargetAutomationEvent,uy.createSetValueAutomationEvent,uy.createSetValueCurveAutomationEvent,jS,bS),rw=((e,t,n,i,s,r,a,o)=>class extends e{constructor(e,i){const o=r(e),l=h(h({},Uy),i),c=s(o,l),u=a(o),d=u?t():null;super(e,!1,c,d),this._audioBufferSourceNodeRenderer=d,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=c,this._onended=null,this._playbackRate=n(this,u,c.playbackRate,Wy,Gy)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw i();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"===typeof e?o(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}get playbackRate(){return this._playbackRate}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(e,t,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[e,t]:[e,t,n]),"closed"!==this.context.state){ky(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),zy(this)&&Iy(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(US,iw,sw,Ix,tw,RS,DS,wS),aw=((e,t,n,i,s,r,a,o)=>class extends e{constructor(e,n){const i=r(e),l=a(i),c=s(i,n,l);super(e,!1,c,l?t(o):null),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw i();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw i();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(US,(e=>{const t=new WeakMap;return{render(n,i){const s=t.get(i);return void 0!==s?Promise.resolve(s):(async(n,i)=>{const s=i.destination;return t.set(i,s),await e(n,i,s),s})(n,i)}}}),By,Ix,((e,t)=>(n,i,s)=>{const r=n.destination;if(r.channelCount!==i)try{r.channelCount=i}catch(o){}s&&"explicit"!==r.channelCountMode&&(r.channelCountMode="explicit"),0===r.maxChannelCount&&Object.defineProperty(r,"maxChannelCount",{value:i});const a=e(n,{channelCount:i,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return t(a,"channelCount",(e=>()=>e.call(a)),(e=>t=>{e.call(a,t);try{r.channelCount=t}catch(n){if(t>r.maxChannelCount)throw n}})),t(a,"channelCountMode",(e=>()=>e.call(a)),(e=>t=>{e.call(a,t),r.channelCountMode=t})),t(a,"channelInterpretation",(e=>()=>e.call(a)),(e=>t=>{e.call(a,t),r.channelInterpretation=t})),Object.defineProperty(a,"maxChannelCount",{get:()=>r.maxChannelCount}),a.connect(r),a})(Jx,gS),RS,DS,LS),ow=((e,t,n,i,s)=>()=>{const r=new WeakMap;return{render(a,o){const l=r.get(o);return void 0!==l?Promise.resolve(l):(async(a,o)=>{let l=n(a);const c=Dy(l,o);if(!c){const e={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=t(o,e)}return r.set(o,l),c?(await e(o,a.Q,l.Q),await e(o,a.detune,l.detune),await e(o,a.frequency,l.frequency),await e(o,a.gain,l.gain)):(await i(o,a.Q,l.Q),await i(o,a.detune,l.detune),await i(o,a.frequency,l.frequency),await i(o,a.gain,l.gain)),await s(a,o,l),l})(a,o)}}})(ew,qx,ox,nw,LS),lw=(e=>(t,n)=>e.set(t,n))(MS),cw=((e,t,n,i,s,r,a,o)=>class extends e{constructor(e,i){const l=r(e),c=h(h({},Ex),i),u=s(l,c),d=a(l);super(e,!1,u,d?n():null),this._Q=t(this,d,u.Q,Wy,Gy),this._detune=t(this,d,u.detune,1200*Math.log2(Wy),-1200*Math.log2(Wy)),this._frequency=t(this,d,u.frequency,e.sampleRate/2,0),this._gain=t(this,d,u.gain,40*Math.log10(Wy),Gy),this._nativeBiquadFilterNode=u,o(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(s){if(11===s.code)throw i();throw s}if(e.length!==t.length||t.length!==n.length)throw i()}})(US,sw,ow,Rx,qx,RS,DS,lw),hw=((e,t)=>(n,i,s)=>{const r=new Set;return n.connect=(s=>function(a){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const c=0===r.size;if(t(a))return s.call(n,a,o,l),e(r,[a,o,l],(e=>e[0]===a&&e[1]===o&&e[2]===l),!0),c&&i(),a;s.call(n,a,o),e(r,[a,o],(e=>e[0]===a&&e[1]===o),!0),c&&i()})(n.connect),n.disconnect=(e=>(i,a,o)=>{const l=r.size>0;if(void 0===i)e.apply(n),r.clear();else if("number"===typeof i){e.call(n,i);for(const e of r)e[1]===i&&r.delete(e)}else{t(i)?e.call(n,i,a,o):e.call(n,i,a);for(const e of r)e[0]!==i||void 0!==a&&e[1]!==a||void 0!==o&&e[2]!==o||r.delete(e)}const c=0===r.size;l&&c&&s()})(n.disconnect),n})(Qy,GS),uw=((e,t)=>(n,i)=>{i.channelCount=1,i.channelCountMode="explicit",Object.defineProperty(i,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(i,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const s=n.createBufferSource();t(i,(()=>{const e=i.numberOfInputs;for(let t=0;t<e;t+=1)s.connect(i,0,t)}),(()=>s.disconnect(i)))})(Ix,hw),dw=((e,t)=>(n,i)=>{const s=n.createChannelMerger(i.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,s),Gx(s,i),s})(jS,uw),fw=((e,t,n)=>()=>{const i=new WeakMap;return{render(s,r){const a=i.get(r);return void 0!==a?Promise.resolve(a):(async(s,r)=>{let a=t(s);if(!Dy(a,r)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=e(r,t)}return i.set(r,a),await n(s,r,a),a})(s,r)}}})(dw,ox,LS),pw=((e,t,n,i,s)=>class extends e{constructor(e,r){const a=i(e),o=h(h({},_x),r);super(e,!1,n(a,o),s(a)?t():null)}})(US,fw,dw,RS,DS),mw=((e,t,n)=>()=>{const i=new WeakMap;return{render(s,r){const a=i.get(r);return void 0!==a?Promise.resolve(a):(async(s,r)=>{let a=t(s);if(!Dy(a,r)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=e(r,t)}return i.set(r,a),await n(s,r,a),a})(s,r)}}})(Kx,ox,LS),gw=((e,t,n,i,s,r)=>class extends e{constructor(e,a){const o=i(e),l=r(h(h({},Tx),a));super(e,!1,n(o,l),s(o)?t():null)}})(US,mw,Kx,RS,DS,(e=>h(h({},e),{},{channelCount:e.numberOfOutputs}))),bw=((e,t,n,i)=>(s,a)=>{let{offset:o}=a,l=r(a,Zx);const c=s.createBuffer(1,2,44100),u=t(s,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=n(s,h(h({},l),{},{gain:o})),f=c.getChannelData(0);f[0]=1,f[1]=1,u.buffer=c,u.loop=!0;const p={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(e){d.channelCount=e},get channelCountMode(){return d.channelCountMode},set channelCountMode(e){d.channelCountMode=e},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return u.onended},set onended(e){u.onended=e},addEventListener(){return u.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return u.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return u.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.start.call(u,e)},stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.stop.call(u,e)}};return e(s,u),i($x(p,d),(()=>u.connect(d)),(()=>u.disconnect(d)))})(QS,tw,Jx,hw),vw=((e,t,n,i,s)=>(r,a)=>{if(void 0===r.createConstantSource)return n(r,a);const o=r.createConstantSource();return Gx(o,a),zx(o,a,"offset"),t(i,(()=>i(r)))||Ux(o),t(s,(()=>s(r)))||Hx(o),e(r,o),o})(QS,AS,bw,vS,xS),yw=((e,t,n,i,s)=>()=>{const r=new WeakMap;let a=null,o=null;return{set start(e){a=e},set stop(e){o=e},render(l,c){const h=r.get(c);return void 0!==h?Promise.resolve(h):(async(l,c)=>{let h=n(l);const u=Dy(h,c);if(!u){const e={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=t(c,e),null!==a&&h.start(a),null!==o&&h.stop(o)}return r.set(c,h),u?await e(c,l.offset,h.offset):await i(c,l.offset,h.offset),await s(l,c,h),h})(l,c)}}})(ew,vw,ox,nw,LS),xw=((e,t,n,i,s,r,a)=>class extends e{constructor(e,a){const o=s(e),l=h(h({},Mx),a),c=i(o,l),u=r(o),d=u?n():null;super(e,!1,c,d),this._constantSourceNodeRenderer=d,this._nativeConstantSourceNode=c,this._offset=t(this,u,c.offset,Wy,Gy),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"===typeof e?a(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){ky(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),zy(this)&&Iy(this)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}})(US,sw,yw,vw,RS,DS,wS),Sw=((e,t)=>(n,i)=>{const s=n.createConvolver();if(Gx(s,i),i.disableNormalization===s.normalize&&(s.normalize=!i.disableNormalization),Vx(s,i,"buffer"),i.channelCount>2)throw e();if(t(s,"channelCount",(e=>()=>e.call(s)),(t=>n=>{if(n>2)throw e();return t.call(s,n)})),"max"===i.channelCountMode)throw e();return t(s,"channelCountMode",(e=>()=>e.call(s)),(t=>n=>{if("max"===n)throw e();return t.call(s,n)})),s})(aS,gS),ww=((e,t,n)=>()=>{const i=new WeakMap;return{render(s,r){const a=i.get(r);return void 0!==a?Promise.resolve(a):(async(s,r)=>{let a=t(s);if(!Dy(a,r)){const t={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=e(r,t)}return i.set(r,a),tx(a)?await n(s,r,a.inputs[0]):await n(s,r,a),a})(s,r)}}})(Sw,ox,LS),Ew=((e,t,n,i,s,r)=>class extends e{constructor(e,a){const o=i(e),l=h(h({},Cx),a),c=n(o,l);super(e,!1,c,s(o)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=c,null!==l.buffer&&r(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,r(this,0)}else this._isBufferNullified=!1,r(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(US,ww,Sw,RS,DS,lw),_w=((e,t,n,i,s)=>r=>{const a=new WeakMap;return{render(o,l){const c=a.get(l);return void 0!==c?Promise.resolve(c):(async(o,l)=>{let c=n(o);const h=Dy(c,l);if(!h){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:r};c=t(l,e)}return a.set(l,c),h?await e(l,o.delayTime,c.delayTime):await i(l,o.delayTime,c.delayTime),await s(o,l,c),c})(o,l)}}})(ew,Qx,ox,nw,LS),Tw=((e,t,n,i,s,r,a)=>class extends e{constructor(e,o){const l=s(e),c=h(h({},Px),o),u=i(l,c),d=r(l);super(e,!1,u,d?n(c.maxDelayTime):null),this._delayTime=t(this,d,u.delayTime),a(this,c.maxDelayTime)}get delayTime(){return this._delayTime}})(US,sw,_w,Qx,RS,DS,lw),Mw=(e=>(t,n)=>{const i=t.createDynamicsCompressor();if(Gx(i,n),n.channelCount>2)throw e();if("max"===n.channelCountMode)throw e();return zx(i,n,"attack"),zx(i,n,"knee"),zx(i,n,"ratio"),zx(i,n,"release"),zx(i,n,"threshold"),i})(aS),Cw=((e,t,n,i,s)=>()=>{const r=new WeakMap;return{render(a,o){const l=r.get(o);return void 0!==l?Promise.resolve(l):(async(a,o)=>{let l=n(a);const c=Dy(l,o);if(!c){const e={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=t(o,e)}return r.set(o,l),c?(await e(o,a.attack,l.attack),await e(o,a.knee,l.knee),await e(o,a.ratio,l.ratio),await e(o,a.release,l.release),await e(o,a.threshold,l.threshold)):(await i(o,a.attack,l.attack),await i(o,a.knee,l.knee),await i(o,a.ratio,l.ratio),await i(o,a.release,l.release),await i(o,a.threshold,l.threshold)),await s(a,o,l),l})(a,o)}}})(ew,Mw,ox,nw,LS),Aw=((e,t,n,i,s,r,a,o)=>class extends e{constructor(e,s){const l=r(e),c=h(h({},kx),s),u=i(l,c),d=a(l);super(e,!1,u,d?n():null),this._attack=t(this,d,u.attack),this._knee=t(this,d,u.knee),this._nativeDynamicsCompressorNode=u,this._ratio=t(this,d,u.ratio),this._release=t(this,d,u.release),this._threshold=t(this,d,u.threshold),o(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,s()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,s()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"===typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(US,sw,Cw,Mw,aS,RS,DS,lw),Pw=((e,t,n,i,s)=>()=>{const r=new WeakMap;return{render(a,o){const l=r.get(o);return void 0!==l?Promise.resolve(l):(async(a,o)=>{let l=n(a);const c=Dy(l,o);if(!c){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(o,e)}return r.set(o,l),c?await e(o,a.gain,l.gain):await i(o,a.gain,l.gain),await s(a,o,l),l})(a,o)}}})(ew,Jx,ox,nw,LS),Nw=((e,t,n,i,s,r)=>class extends e{constructor(e,a){const o=s(e),l=h(h({},Lx),a),c=i(o,l),u=r(o);super(e,!1,c,u?n():null),this._gain=t(this,u,c.gain,Wy,Gy)}get gain(){return this._gain}})(US,sw,Pw,Jx,RS,DS),kw=((e,t,n,i)=>(s,r,a)=>{let{channelCount:o,channelCountMode:l,channelInterpretation:c,feedback:h,feedforward:u}=a;const d=Xx(r,s.sampleRate),f=h instanceof Float64Array?h:new Float64Array(h),p=u instanceof Float64Array?u:new Float64Array(u),m=f.length,g=p.length,b=Math.min(m,g);if(0===m||m>20)throw i();if(0===f[0])throw t();if(0===g||g>20)throw i();if(0===p[0])throw t();if(1!==f[0]){for(let e=0;e<g;e+=1)p[e]/=f[0];for(let e=1;e<m;e+=1)f[e]/=f[0]}const v=n(s,d,o,o);v.channelCount=o,v.channelCountMode=l,v.channelInterpretation=c;const y=[],x=[],S=[];for(let e=0;e<o;e+=1){y.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),x.push(e),S.push(t)}v.onaudioprocess=e=>{const t=e.inputBuffer,n=e.outputBuffer,i=t.numberOfChannels;for(let s=0;s<i;s+=1){const e=t.getChannelData(s),i=n.getChannelData(s);y[s]=Dx(f,m,p,g,b,x[s],S[s],y[s],32,e,i)}};const w=s.sampleRate/2;return $x({get bufferSize(){return d},get channelCount(){return v.channelCount},set channelCount(e){v.channelCount=e},get channelCountMode(){return v.channelCountMode},set channelCountMode(e){v.channelCountMode=e},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(e){v.channelInterpretation=e},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(){return v.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return v.dispatchEvent(arguments.length<=0?void 0:arguments[0])},getFrequencyResponse(t,n,i){if(t.length!==n.length||n.length!==i.length)throw e();const s=t.length;for(let e=0;e<s;e+=1){const s=-Math.PI*(t[e]/w),r=[Math.cos(s),Math.sin(s)],a=eS(tS(p,r),tS(f,r));n[e]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),i[e]=Math.atan2(a[1],a[0])}},removeEventListener(){return v.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},v)})(Rx,Ix,iS,aS),Lw=((e,t,n,i)=>s=>e(Bx,(()=>Bx(s)))?Promise.resolve(e(i,i)).then((e=>{if(!e){const e=n(s,512,0,1);s.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>s.currentTime,e.connect(s.destination)}return s.startRendering()})):new Promise((e=>{const n=t(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});s.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(s.destination),s.startRendering()})))(AS,Jx,iS,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),i=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((e=>{n.oncomplete=()=>{i.disconnect(),e(0!==n.currentTime)},n.startRendering()}))})(Jx,OS)),Iw=((e,t,n,i,s)=>(r,a)=>{const o=new WeakMap;let l=null;const c=async(c,h)=>{let u=null,d=t(c);const f=Dy(d,h);if(void 0===h.createIIRFilter?u=e(h,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(d=h.createIIRFilter(a,r)),o.set(h,null===u?d:u),null!==u){if(null===l){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new n(c.context.destination.channelCount,c.context.length,h.sampleRate);l=(async()=>{await i(c,e,e.destination);return((e,t,n,i)=>{const s=n instanceof Float64Array?n:new Float64Array(n),r=i instanceof Float64Array?i:new Float64Array(i),a=s.length,o=r.length,l=Math.min(a,o);if(1!==s[0]){for(let e=0;e<a;e+=1)r[e]/=s[0];for(let e=1;e<o;e+=1)s[e]/=s[0]}const c=new Float32Array(32),h=new Float32Array(32),u=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),d=e.numberOfChannels;for(let f=0;f<d;f+=1){const t=e.getChannelData(f),n=u.getChannelData(f);c.fill(0),h.fill(0),Dx(s,a,r,o,l,c,h,0,32,t,n)}return u})(await s(e),h,r,a)})()}const e=await l;return u.buffer=e,u.start(0),u}return await i(c,h,d),d};return{render(e,t){const n=o.get(t);return void 0!==n?Promise.resolve(n):c(e,t)}}})(tw,ox,OS,LS,Lw),Rw=(e=>(t,n,i)=>{if(void 0===t.createIIRFilter)return e(t,n,i);const s=t.createIIRFilter(i.feedforward,i.feedback);return Gx(s,i),s})(kw),Ow=((e,t,n,i,s,r)=>class extends e{constructor(e,a){const o=i(e),l=s(o),c=h(h({},Ox),a),u=t(o,l?null:e.baseLatency,c);super(e,!1,u,l?n(c.feedback,c.feedforward):null),(e=>{var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(n,i,s)=>{if(n.length!==i.length||i.length!==s.length)throw Rx();return t.call(e,n,i,s)})})(u),this._nativeIIRFilterNode=u,r(this,1)}getFrequencyResponse(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}})(US,Rw,Iw,RS,DS,lw),Dw=((e,t,n,i,s,r,a,o)=>(l,c)=>{const h=c.listener,{forwardX:u,forwardY:d,forwardZ:f,positionX:p,positionY:m,positionZ:g,upX:b,upY:v,upZ:y}=void 0===h.forwardX?(()=>{const u=new Float32Array(1),d=t(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),f=a(c);let p=!1,m=[0,0,-1,0,1,0],g=[0,0,0];const b=()=>{if(p)return;p=!0;const e=i(c,256,9,0);e.onaudioprocess=e=>{let{inputBuffer:t}=e;const n=[r(t,u,0),r(t,u,1),r(t,u,2),r(t,u,3),r(t,u,4),r(t,u,5)];n.some(((e,t)=>e!==m[t]))&&(h.setOrientation(...n),m=n);const i=[r(t,u,6),r(t,u,7),r(t,u,8)];i.some(((e,t)=>e!==g[t]))&&(h.setPosition(...i),g=i)},d.connect(e)},v=e=>t=>{t!==m[e]&&(m[e]=t,h.setOrientation(...m))},y=e=>t=>{t!==g[e]&&(g[e]=t,h.setPosition(...g))},x=(t,i,r)=>{const a=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:i});a.connect(d,0,t),a.start(),Object.defineProperty(a.offset,"defaultValue",{get:()=>i});const h=e({context:l},f,a.offset,Wy,Gy);var u,p,m,g,v,y,x;return o(h,"value",(e=>()=>e.call(h)),(e=>t=>{try{e.call(h,t)}catch(n){if(9!==n.code)throw n}b(),f&&r(t)})),h.cancelAndHoldAtTime=(u=h.cancelAndHoldAtTime,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=u.apply(h,t);return b(),i}),h.cancelScheduledValues=(p=h.cancelScheduledValues,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=p.apply(h,t);return b(),i}),h.exponentialRampToValueAtTime=(m=h.exponentialRampToValueAtTime,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=m.apply(h,t);return b(),i}),h.linearRampToValueAtTime=(g=h.linearRampToValueAtTime,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=g.apply(h,t);return b(),i}),h.setTargetAtTime=(v=h.setTargetAtTime,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=v.apply(h,t);return b(),i}),h.setValueAtTime=(y=h.setValueAtTime,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=y.apply(h,t);return b(),i}),h.setValueCurveAtTime=(x=h.setValueCurveAtTime,f?()=>{throw s()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=x.apply(h,t);return b(),i}),h};return{forwardX:x(0,0,v(0)),forwardY:x(1,0,v(1)),forwardZ:x(2,-1,v(2)),positionX:x(6,0,y(0)),positionY:x(7,0,y(1)),positionZ:x(8,0,y(2)),upX:x(3,0,v(3)),upY:x(4,1,v(4)),upZ:x(5,0,v(5))}})():h;return{get forwardX(){return u},get forwardY(){return d},get forwardZ(){return f},get positionX(){return p},get positionY(){return m},get positionZ(){return g},get upX(){return b},get upY(){return v},get upZ(){return y}}})(sw,dw,vw,iS,aS,pS,DS,gS),Fw=new WeakMap,Bw=((e,t,n,i,s,r)=>class extends n{constructor(n,r){super(n),this._nativeContext=n,by.set(this,n),i(n)&&s.set(n,new Set),this._destination=new e(this,r),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"===typeof e?r(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(aw,Dw,BS,DS,Fw,wS),jw=((e,t,n,i,s,r)=>(a,o)=>{const l=a.createOscillator();return Gx(l,o),zx(l,o,"detune"),zx(l,o,"frequency"),void 0!==o.periodicWave?l.setPeriodicWave(o.periodicWave):Vx(l,o,"type"),t(n,(()=>n(a)))||Ux(l),t(i,(()=>i(a)))||r(l,a),t(s,(()=>s(a)))||Hx(l),e(a,l),l})(QS,AS,vS,yS,xS,SS),Vw=((e,t,n,i,s)=>()=>{const r=new WeakMap;let a=null,o=null,l=null;return{set periodicWave(e){a=e},set start(e){o=e},set stop(e){l=e},render(c,h){const u=r.get(h);return void 0!==u?Promise.resolve(u):(async(c,h)=>{let u=n(c);const d=Dy(u,h);if(!d){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,detune:u.detune.value,frequency:u.frequency.value,periodicWave:null===a?void 0:a,type:u.type};u=t(h,e),null!==o&&u.start(o),null!==l&&u.stop(l)}return r.set(h,u),d?(await e(h,c.detune,u.detune),await e(h,c.frequency,u.frequency)):(await i(h,c.detune,u.detune),await i(h,c.frequency,u.frequency)),await s(c,h,u),u})(c,h)}}})(ew,jw,ox,nw,LS),Gw=((e,t,n,i,s,r,a)=>class extends e{constructor(e,a){const o=s(e),l=h(h({},lS),a),c=n(o,l),u=r(o),d=u?i():null,f=e.sampleRate/2;super(e,!1,c,d),this._detune=t(this,u,c.detune,153600,-153600),this._frequency=t(this,u,c.frequency,f,-f),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=d,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"===typeof e?a(this,e):null;this._nativeOscillatorNode.onended=t;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){ky(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),zy(this)&&Iy(this)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(US,sw,jw,Vw,RS,DS,wS),Ww=(e=>(t,n)=>{const i=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),s=t.createBuffer(1,2,44100);return i.buffer=s,i.loop=!0,i.connect(n),i.start(),()=>{i.stop(),i.disconnect(n)}})(tw),zw=((e,t,n,i,s)=>(a,o)=>{let{curve:l,oversample:c}=o,u=r(o,rS);const d=a.createWaveShaper(),f=a.createWaveShaper();Gx(d,u),Gx(f,u);const p=n(a,h(h({},u),{},{gain:1})),m=n(a,h(h({},u),{},{gain:-1})),g=n(a,h(h({},u),{},{gain:1})),b=n(a,h(h({},u),{},{gain:-1}));let v=null,y=!1,x=null;const S={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(e){p.channelCount=e,m.channelCount=e,d.channelCount=e,g.channelCount=e,f.channelCount=e,b.channelCount=e},get channelCountMode(){return d.channelCountMode},set channelCountMode(e){p.channelCountMode=e,m.channelCountMode=e,d.channelCountMode=e,g.channelCountMode=e,f.channelCountMode=e,b.channelCountMode=e},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(e){p.channelInterpretation=e,m.channelInterpretation=e,d.channelInterpretation=e,g.channelInterpretation=e,f.channelInterpretation=e,b.channelInterpretation=e},get context(){return d.context},get curve(){return x},set curve(n){if(null!==n&&n.length<2)throw t();if(null===n)d.curve=n,f.curve=n;else{const e=n.length,t=new Float32Array(e+2-e%2),i=new Float32Array(e+2-e%2);t[0]=n[0],i[0]=-n[e-1];const s=Math.ceil((e+1)/2),r=(e+1)/2-1;for(let a=1;a<s;a+=1){const o=a/s*r,l=Math.floor(o),c=Math.ceil(o);t[a]=l===c?n[l]:(1-(o-l))*n[l]+(1-(c-o))*n[c],i[a]=l===c?-n[e-1-l]:-(1-(o-l))*n[e-1-l]-(1-(c-o))*n[e-1-c]}t[s]=e%2===1?n[s-1]:(n[s-2]+n[s-1])/2,d.curve=t,f.curve=i}x=n,y&&(i(x)&&null===v?v=e(a,p):null!==v&&(v(),v=null))},get inputs(){return[p]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(e){d.oversample=e,f.oversample=e},addEventListener(){return p.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return p.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return p.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};null!==l&&(S.curve=l instanceof Float32Array?l:new Float32Array(l)),c!==S.oversample&&(S.oversample=c);return s($x(S,g),(()=>{p.connect(d).connect(g),p.connect(m).connect(f).connect(b).connect(g),y=!0,i(x)&&(v=e(a,p))}),(()=>{p.disconnect(d),d.disconnect(g),p.disconnect(m),m.disconnect(f),f.disconnect(b),b.disconnect(g),y=!1,null!==v&&(v(),v=null)}))})(Ww,Ix,Jx,mS,hw),Uw=((e,t,n,i,s,r,a)=>(o,l)=>{const c=o.createWaveShaper();if(null!==r&&"webkitAudioContext"===r.name&&void 0===o.createGain().gain.automationRate)return n(o,l);Gx(c,l);const h=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==h&&h.length<2)throw t();Vx(c,{curve:h},"curve"),Vx(c,l,"oversample");let u=null,d=!1;a(c,"curve",(e=>()=>e.call(c)),(t=>n=>(t.call(c,n),d&&(i(n)&&null===u?u=e(o,c):i(n)||null===u||(u(),u=null)),n)));return s(c,(()=>{d=!0,i(c.curve)&&(u=e(o,c))}),(()=>{d=!1,null!==u&&(u(),u=null)}))})(Ww,Ix,zw,mS,hw,jS,gS),Hw=((e,t,n,i,s,a,o,l,c,u)=>(d,f)=>{let{coneInnerAngle:p,coneOuterAngle:m,coneOuterGain:g,distanceModel:b,maxDistance:v,orientationX:y,orientationY:x,orientationZ:S,panningModel:w,positionX:E,positionY:_,positionZ:T,refDistance:M,rolloffFactor:C}=f,A=r(f,nS);const P=d.createPanner();if(A.channelCount>2)throw o();if("max"===A.channelCountMode)throw o();Gx(P,A);const N={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},k=n(d,h(h({},N),{},{channelInterpretation:"speakers",numberOfInputs:6})),L=i(d,h(h({},A),{},{gain:1})),I=i(d,h(h({},N),{},{gain:1})),R=i(d,h(h({},N),{},{gain:0})),O=i(d,h(h({},N),{},{gain:0})),D=i(d,h(h({},N),{},{gain:0})),F=i(d,h(h({},N),{},{gain:0})),B=i(d,h(h({},N),{},{gain:0})),j=s(d,256,6,1),V=a(d,h(h({},N),{},{curve:new Float32Array([1,1]),oversample:"none"}));let G=[y,x,S],W=[E,_,T];const z=new Float32Array(1);j.onaudioprocess=e=>{let{inputBuffer:t}=e;const n=[c(t,z,0),c(t,z,1),c(t,z,2)];n.some(((e,t)=>e!==G[t]))&&(P.setOrientation(...n),G=n);const i=[c(t,z,3),c(t,z,4),c(t,z,5)];i.some(((e,t)=>e!==W[t]))&&(P.setPosition(...i),W=i)},Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(F.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0});const U={get bufferSize(){},get channelCount(){return P.channelCount},set channelCount(e){if(e>2)throw o();L.channelCount=e,P.channelCount=e},get channelCountMode(){return P.channelCountMode},set channelCountMode(e){if("max"===e)throw o();L.channelCountMode=e,P.channelCountMode=e},get channelInterpretation(){return P.channelInterpretation},set channelInterpretation(e){L.channelInterpretation=e,P.channelInterpretation=e},get coneInnerAngle(){return P.coneInnerAngle},set coneInnerAngle(e){P.coneInnerAngle=e},get coneOuterAngle(){return P.coneOuterAngle},set coneOuterAngle(e){P.coneOuterAngle=e},get coneOuterGain(){return P.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();P.coneOuterGain=e},get context(){return P.context},get distanceModel(){return P.distanceModel},set distanceModel(e){P.distanceModel=e},get inputs(){return[L]},get maxDistance(){return P.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;P.maxDistance=e},get numberOfInputs(){return P.numberOfInputs},get numberOfOutputs(){return P.numberOfOutputs},get orientationX(){return I.gain},get orientationY(){return R.gain},get orientationZ(){return O.gain},get panningModel(){return P.panningModel},set panningModel(e){P.panningModel=e},get positionX(){return D.gain},get positionY(){return F.gain},get positionZ(){return B.gain},get refDistance(){return P.refDistance},set refDistance(e){if(e<0)throw new RangeError;P.refDistance=e},get rolloffFactor(){return P.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;P.rolloffFactor=e},addEventListener(){return L.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return L.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return L.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};p!==U.coneInnerAngle&&(U.coneInnerAngle=p),m!==U.coneOuterAngle&&(U.coneOuterAngle=m),g!==U.coneOuterGain&&(U.coneOuterGain=g),b!==U.distanceModel&&(U.distanceModel=b),v!==U.maxDistance&&(U.maxDistance=v),y!==U.orientationX.value&&(U.orientationX.value=y),x!==U.orientationY.value&&(U.orientationY.value=x),S!==U.orientationZ.value&&(U.orientationZ.value=S),w!==U.panningModel&&(U.panningModel=w),E!==U.positionX.value&&(U.positionX.value=E),_!==U.positionY.value&&(U.positionY.value=_),T!==U.positionZ.value&&(U.positionZ.value=T),M!==U.refDistance&&(U.refDistance=M),C!==U.rolloffFactor&&(U.rolloffFactor=C),1===G[0]&&0===G[1]&&0===G[2]||P.setOrientation(...G),0===W[0]&&0===W[1]&&0===W[2]||P.setPosition(...W);return u($x(U,P),(()=>{L.connect(P),e(L,V,0,0),V.connect(I).connect(k,0,0),V.connect(R).connect(k,0,1),V.connect(O).connect(k,0,2),V.connect(D).connect(k,0,3),V.connect(F).connect(k,0,4),V.connect(B).connect(k,0,5),k.connect(j).connect(d.destination)}),(()=>{L.disconnect(P),l(L,V,0,0),V.disconnect(I),I.disconnect(k),V.disconnect(R),R.disconnect(k),V.disconnect(O),O.disconnect(k),V.disconnect(D),D.disconnect(k),V.disconnect(F),F.disconnect(k),V.disconnect(B),B.disconnect(k),k.disconnect(j),j.disconnect(d.destination)}))})(nx,Ix,dw,Jx,iS,Uw,aS,ax,pS,hw),Xw=(e=>(t,n)=>{const i=t.createPanner();return void 0===i.orientationX?e(t,n):(Gx(i,n),zx(i,n,"orientationX"),zx(i,n,"orientationY"),zx(i,n,"orientationZ"),zx(i,n,"positionX"),zx(i,n,"positionY"),zx(i,n,"positionZ"),Vx(i,n,"coneInnerAngle"),Vx(i,n,"coneOuterAngle"),Vx(i,n,"coneOuterGain"),Vx(i,n,"distanceModel"),Vx(i,n,"maxDistance"),Vx(i,n,"panningModel"),Vx(i,n,"refDistance"),Vx(i,n,"rolloffFactor"),i)})(Hw),Yw=((e,t,n,i,s,r,a,o,l,c)=>()=>{const u=new WeakMap;let d=null;return{render(f,p){const m=u.get(p);return void 0!==m?Promise.resolve(m):(async(f,p)=>{let m=null,g=r(f);const b={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},v=h(h({},b),{},{coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor}),y=Dy(g,p);if("bufferSize"in g)m=i(p,h(h({},b),{},{gain:1}));else if(!y){const e=h(h({},v),{},{orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value});g=s(p,e)}if(u.set(p,null===m?g:m),null!==m){if(null===d){if(null===a)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new a(6,f.context.length,p.sampleRate),i=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});i.connect(e.destination),d=(async()=>{const t=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map((async(t,i)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===i?1:0});return await o(e,t,s.offset),s})));for(let e=0;e<6;e+=1)t[e].connect(i,0,e),t[e].start(0);return c(e)})()}const e=await d,r=i(p,h(h({},b),{},{gain:1}));await l(f,p,r);const u=[];for(let t=0;t<e.numberOfChannels;t+=1)u.push(e.getChannelData(t));let g=[u[0][0],u[1][0],u[2][0]],y=[u[3][0],u[4][0],u[5][0]],x=i(p,h(h({},b),{},{gain:1})),S=s(p,h(h({},v),{},{orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:y[0],positionY:y[1],positionZ:y[2]}));r.connect(x).connect(S.inputs[0]),S.connect(m);for(let t=128;t<e.length;t+=128){const e=[u[0][t],u[1][t],u[2][t]],n=[u[3][t],u[4][t],u[5][t]];if(e.some(((e,t)=>e!==g[t]))||n.some(((e,t)=>e!==y[t]))){g=e,y=n;const a=t/p.sampleRate;x.gain.setValueAtTime(0,a),x=i(p,h(h({},b),{},{gain:0})),S=s(p,h(h({},v),{},{orientationX:g[0],orientationY:g[1],orientationZ:g[2],positionX:y[0],positionY:y[1],positionZ:y[2]})),x.gain.setValueAtTime(1,a),r.connect(x).connect(S.inputs[0]),S.connect(m)}}return m}return y?(await e(p,f.orientationX,g.orientationX),await e(p,f.orientationY,g.orientationY),await e(p,f.orientationZ,g.orientationZ),await e(p,f.positionX,g.positionX),await e(p,f.positionY,g.positionY),await e(p,f.positionZ,g.positionZ)):(await o(p,f.orientationX,g.orientationX),await o(p,f.orientationY,g.orientationY),await o(p,f.orientationZ,g.orientationZ),await o(p,f.positionX,g.positionX),await o(p,f.positionY,g.positionY),await o(p,f.positionZ,g.positionZ)),tx(g)?await l(f,p,g.inputs[0]):await l(f,p,g),g})(f,p)}}})(ew,dw,vw,Jx,Xw,ox,OS,nw,LS,Lw),qw=((e,t,n,i,s,r,a)=>class extends e{constructor(e,o){const l=s(e),c=h(h({},cS),o),u=n(l,c),d=r(l);super(e,!1,u,d?i():null),this._nativePannerNode=u,this._orientationX=t(this,d,u.orientationX,Wy,Gy),this._orientationY=t(this,d,u.orientationY,Wy,Gy),this._orientationZ=t(this,d,u.orientationZ,Wy,Gy),this._positionX=t(this,d,u.positionX,Wy,Gy),this._positionY=t(this,d,u.positionY,Wy,Gy),this._positionZ=t(this,d,u.positionZ,Wy,Gy),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(US,sw,Xw,Yw,RS,DS,lw),Kw=(e=>(t,n)=>{let{disableNormalization:i,imag:s,real:r}=n;const a=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),l=t.createPeriodicWave(o,a,{disableNormalization:i});if(Array.from(s).length<2)throw e();return l})(By),$w=((e,t,n,i)=>class s{constructor(s,r){const a=t(s),o=i(h(h({},hS),r)),l=e(a,o);return n.add(l),l}static[Symbol.hasInstance](e){return null!==e&&"object"===typeof e&&Object.getPrototypeOf(e)===s.prototype||n.has(e)}})(Kw,RS,new WeakSet,(e=>{const{imag:t,real:n}=e;return h(h({},e),{},void 0===t?void 0===n?{imag:[0,0],real:[0,0]}:{imag:Array.from(n,(()=>0)),real:n}:void 0===n?{imag:t,real:Array.from(t,(()=>0))}:{imag:t,real:n})})),Zw=((e,t,n,i,s,a)=>{const o=16385,l=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},d=h(h({},u),{},{oversample:"none"}),f=(e,r,a,f,p)=>{if(1===r)return((e,t,s,r)=>{const a=new Float32Array(o),f=new Float32Array(o);for(let n=0;n<o;n+=1){const e=n/16384*c;a[n]=Math.cos(e),f[n]=Math.sin(e)}const p=n(e,h(h({},u),{},{gain:0})),m=i(e,h(h({},d),{},{curve:a})),g=i(e,h(h({},d),{},{curve:l})),b=n(e,h(h({},u),{},{gain:0})),v=i(e,h(h({},d),{},{curve:f}));return{connectGraph(){t.connect(p),t.connect(void 0===g.inputs?g:g.inputs[0]),t.connect(b),g.connect(s),s.connect(void 0===m.inputs?m:m.inputs[0]),s.connect(void 0===v.inputs?v:v.inputs[0]),m.connect(p.gain),v.connect(b.gain),p.connect(r,0,0),b.connect(r,0,1)},disconnectGraph(){t.disconnect(p),t.disconnect(void 0===g.inputs?g:g.inputs[0]),t.disconnect(b),g.disconnect(s),s.disconnect(void 0===m.inputs?m:m.inputs[0]),s.disconnect(void 0===v.inputs?v:v.inputs[0]),m.disconnect(p.gain),v.disconnect(b.gain),p.disconnect(r,0,0),b.disconnect(r,0,1)}}})(e,a,f,p);if(2===r)return((e,s,r,a)=>{const f=new Float32Array(o),p=new Float32Array(o),m=new Float32Array(o),g=new Float32Array(o),b=Math.floor(8192.5);for(let t=0;t<o;t+=1)if(t>b){const e=(t-b)/(16384-b)*c;f[t]=Math.cos(e),p[t]=Math.sin(e),m[t]=0,g[t]=1}else{const e=t/(16384-b)*c;f[t]=1,p[t]=0,m[t]=Math.cos(e),g[t]=Math.sin(e)}const v=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=n(e,h(h({},u),{},{gain:0})),x=i(e,h(h({},d),{},{curve:f})),S=n(e,h(h({},u),{},{gain:0})),w=i(e,h(h({},d),{},{curve:p})),E=i(e,h(h({},d),{},{curve:l})),_=n(e,h(h({},u),{},{gain:0})),T=i(e,h(h({},d),{},{curve:m})),M=n(e,h(h({},u),{},{gain:0})),C=i(e,h(h({},d),{},{curve:g}));return{connectGraph(){s.connect(v),s.connect(void 0===E.inputs?E:E.inputs[0]),v.connect(y,0),v.connect(S,0),v.connect(_,1),v.connect(M,1),E.connect(r),r.connect(void 0===x.inputs?x:x.inputs[0]),r.connect(void 0===w.inputs?w:w.inputs[0]),r.connect(void 0===T.inputs?T:T.inputs[0]),r.connect(void 0===C.inputs?C:C.inputs[0]),x.connect(y.gain),w.connect(S.gain),T.connect(_.gain),C.connect(M.gain),y.connect(a,0,0),_.connect(a,0,0),S.connect(a,0,1),M.connect(a,0,1)},disconnectGraph(){s.disconnect(v),s.disconnect(void 0===E.inputs?E:E.inputs[0]),v.disconnect(y,0),v.disconnect(S,0),v.disconnect(_,1),v.disconnect(M,1),E.disconnect(r),r.disconnect(void 0===x.inputs?x:x.inputs[0]),r.disconnect(void 0===w.inputs?w:w.inputs[0]),r.disconnect(void 0===T.inputs?T:T.inputs[0]),r.disconnect(void 0===C.inputs?C:C.inputs[0]),x.disconnect(y.gain),w.disconnect(S.gain),T.disconnect(_.gain),C.disconnect(M.gain),y.disconnect(a,0,0),_.disconnect(a,0,0),S.disconnect(a,0,1),M.disconnect(a,0,1)}}})(e,a,f,p);throw s()};return(t,i)=>{let{channelCount:o,channelCountMode:l,pan:c}=i,u=r(i,sS);if("max"===l)throw s();const d=e(t,h(h({},u),{},{channelCount:1,channelCountMode:l,numberOfInputs:2})),p=n(t,h(h({},u),{},{channelCount:o,channelCountMode:l,gain:1})),m=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:c});let{connectGraph:g,disconnectGraph:b}=f(t,o,p,m,d);Object.defineProperty(m.gain,"defaultValue",{get:()=>0}),Object.defineProperty(m.gain,"maxValue",{get:()=>1}),Object.defineProperty(m.gain,"minValue",{get:()=>-1});const v={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(e){p.channelCount!==e&&(y&&b(),({connectGraph:g,disconnectGraph:b}=f(t,e,p,m,d)),y&&g()),p.channelCount=e},get channelCountMode(){return p.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw s();p.channelCountMode=e},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(e){p.channelInterpretation=e},get context(){return p.context},get inputs(){return[p]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get pan(){return m.gain},addEventListener(){return p.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return p.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return p.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};let y=!1;return a($x(v,d),(()=>{g(),y=!0}),(()=>{b(),y=!1}))}})(dw,Kx,Jx,Uw,aS,hw),Qw=((e,t)=>(n,i)=>{const s=i.channelCountMode;if("clamped-max"===s)throw t();if(void 0===n.createStereoPanner)return e(n,i);const r=n.createStereoPanner();return Gx(r,i),zx(r,i,"pan"),Object.defineProperty(r,"channelCountMode",{get:()=>s,set:e=>{if(e!==s)throw t()}}),r})(Zw,aS),Jw=((e,t,n,i,s)=>()=>{const r=new WeakMap;return{render(a,o){const l=r.get(o);return void 0!==l?Promise.resolve(l):(async(a,o)=>{let l=n(a);const c=Dy(l,o);if(!c){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=t(o,e)}return r.set(o,l),c?await e(o,a.pan,l.pan):await i(o,a.pan,l.pan),tx(l)?await s(a,o,l.inputs[0]):await s(a,o,l),l})(a,o)}}})(ew,Qw,ox,nw,LS),eE=((e,t,n,i,s,r)=>class extends e{constructor(e,a){const o=s(e),l=h(h({},uS),a),c=n(o,l),u=r(o);super(e,!1,c,u?i():null),this._pan=t(this,u,c.pan)}get pan(){return this._pan}})(US,sw,Qw,Jw,RS,DS),tE=((e,t,n)=>()=>{const i=new WeakMap;return{render(s,r){const a=i.get(r);return void 0!==a?Promise.resolve(a):(async(s,r)=>{let a=t(s);if(!Dy(a,r)){const t={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=e(r,t)}return i.set(r,a),tx(a)?await n(s,r,a.inputs[0]):await n(s,r,a),a})(s,r)}}})(Uw,ox,LS),nE=((e,t,n,i,s,r,a)=>class extends e{constructor(e,t){const o=s(e),l=h(h({},fS),t),c=n(o,l);super(e,!0,c,r(o)?i():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(US,Ix,Uw,tE,RS,DS,lw),iE=(e=>null!==e&&e.isSecureContext)(PS),sE=(e=>(t,n,i)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return i()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(PS),rE=new WeakMap,aE=((e,t)=>n=>{let i=e.get(n);if(void 0!==i)return i;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return i=new t(1,1,44100),e.set(n,i),i})(rE,OS),oE=iE?((e,t,n,i,s,r,a,o,l,c,h,u,d)=>{let f=0;return function(p,m){let g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"};const b=h.get(p);if(void 0!==b&&b.has(m))return Promise.resolve();const v=c.get(p);if(void 0!==v){const e=v.get(m);if(void 0!==e)return e}const y=r(p),x=void 0===y.audioWorklet?s(m).then((e=>{let[t,i]=e;const[s,r]=_y(t,i),a="".concat(s,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(r,"\n})})(window,'_AWGS')");return n(a)})).then((()=>{const e=d._AWGS.pop();if(void 0===e)throw new SyntaxError;i(y.currentTime,y.sampleRate,(()=>e(class{},void 0,((e,n)=>{if(""===e.trim())throw t();const i=xy.get(y);if(void 0!==i){if(i.has(e))throw t();My(n),Ty(n.parameterDescriptors),i.set(e,n)}else My(n),Ty(n.parameterDescriptors),xy.set(y,new Map([[e,n]]))}),y.sampleRate,void 0,void 0)))})):Promise.all([s(m),Promise.resolve(e(u,u))]).then((e=>{let[[t,n],i]=e;const s=f+1;f=s;const[r,c]=_y(t,n),h=i?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}",u=i?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));",d=i?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));",p="".concat(r,";((AudioWorkletProcessor,registerProcessor)=>{").concat(c,"\n})(").concat(h,",(n,p)=>registerProcessor(n,class extends p{").concat(u,"process(i,o,p){").concat(d,"return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac").concat(s,"',class extends AudioWorkletProcessor{process(){return !1}})"),m=new Blob([p],{type:"application/javascript; charset=utf-8"}),b=URL.createObjectURL(m);return y.audioWorklet.addModule(b,g).then((()=>{if(o(y))return y;const e=a(y);return e.audioWorklet.addModule(b,g).then((()=>e))})).then((e=>{if(null===l)throw new SyntaxError;try{new l(e,"__sac".concat(s))}catch(t){throw new SyntaxError}})).finally((()=>URL.revokeObjectURL(b)))}));return void 0===v?c.set(p,new Map([[m,x]])):v.set(m,x),x.then((()=>{const e=h.get(p);void 0===e?h.set(p,new Set([m])):e.add(m)})).finally((()=>{const e=c.get(p);void 0!==e&&e.delete(m)})),x}})(AS,aS,(e=>t=>new Promise(((n,i)=>{if(null===e)return void i(new SyntaxError);const s=e.document.head;if(null===s)i(new SyntaxError);else{const r=e.document.createElement("script"),a=new Blob([t],{type:"application/javascript"}),o=URL.createObjectURL(a),l=e.onerror,c=()=>{e.onerror=l,URL.revokeObjectURL(o)};e.onerror=(t,n,s,r,a)=>n===o||n===e.location.href&&1===s&&1===r?(c(),i(a),!1):null!==l?l(t,n,s,r,a):void 0,r.onerror=()=>{c(),i(new SyntaxError)},r.onload=()=>{c(),n()},r.src=o,r.type="module",s.appendChild(r)}})))(PS),sE,(e=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch(n){}throw e()})((()=>new DOMException("","AbortError"))),RS,aE,DS,zS,new WeakMap,new WeakMap,((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),i=new t(1,128,44100),s=URL.createObjectURL(n);let r=!1,a=!1;try{await i.audioWorklet.addModule(s);const t=new e(i,"a",{numberOfOutputs:0}),n=i.createOscillator();t.port.onmessage=()=>r=!0,t.onprocessorerror=()=>a=!0,n.connect(t),n.start(0),await i.startRendering(),await new Promise((e=>setTimeout(e)))}catch(o){}finally{URL.revokeObjectURL(s)}return r&&!a})(zS,OS),PS):void 0,lE=((e,t)=>n=>e(n)||t(n))(VS,DS),cE=((e,t,n,i,s,r,a,o,l,c,h)=>(u,d)=>{const f=a(u)?u:r(u);if(s.has(d)){const e=n();return Promise.reject(e)}try{s.add(d)}catch(p){}return t(l,(()=>l(f)))?f.decodeAudioData(d).then((n=>(Ax(d).catch((()=>{})),t(o,(()=>o(n)))||h(n),e.add(n),n))):new Promise(((t,n)=>{const s=async()=>{try{await Ax(d)}catch(e){}},r=e=>{n(e),s()};try{f.decodeAudioData(d,(n=>{"function"!==typeof n.copyFromChannel&&(c(n),jy(n)),e.add(n),s().then((()=>t(n)))}),(e=>{r(null===e?i():e)}))}catch(a){r(a)}}))})(XS,AS,(()=>new DOMException("","DataCloneError")),(()=>new DOMException("","EncodingError")),new WeakSet,RS,lE,Fy,Bx,KS,$S),hE=((e,t,n,i,s,r,a,o,l,c,u,d,f,p,m,g,b,v,y,x)=>class extends m{constructor(t,n){super(t,n),this._nativeContext=t,this._audioWorklet=void 0===e?void 0:{addModule:(t,n)=>e(this,t,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new s(this)}createBuffer(e,t,i){return new n({length:t,numberOfChannels:e,sampleRate:i})}createBufferSource(){return new i(this)}createChannelMerger(){return new r(this,{numberOfInputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createChannelSplitter(){return new a(this,{numberOfOutputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createConstantSource(){return new o(this)}createConvolver(){return new l(this)}createDelay(){return new u(this,{maxDelayTime:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1})}createDynamicsCompressor(){return new d(this)}createGain(){return new f(this)}createIIRFilter(e,t){return new p(this,{feedback:t,feedforward:e})}createOscillator(){return new g(this)}createPanner(){return new b(this)}createPeriodicWave(e,t){return new v(this,h(h({},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1}),{},{imag:t,real:e}))}createStereoPanner(){return new y(this)}createWaveShaper(){return new x(this)}decodeAudioData(e,t,n){return c(this._nativeContext,e).then((e=>("function"===typeof t&&t(e),e)),(e=>{throw"function"===typeof n&&n(e),e}))}})(oE,HS,ZS,rw,cw,pw,gw,xw,Ew,cE,Tw,Aw,Nw,Ow,Bw,Gw,qw,$w,eE,nE),uE=((e,t,n,i)=>class extends e{constructor(e,s){const r=n(e),a=t(r,s);if(i(r))throw TypeError();super(e,!0,a,null),this._nativeMediaElementAudioSourceNode=a}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(US,((e,t)=>e.createMediaElementSource(t.mediaElement)),RS,DS),dE=((e,t,n,i)=>class extends e{constructor(e,s){const r=n(e);if(i(r))throw new TypeError;const a=h(h({},Fx),s),o=t(r,a);super(e,!1,o,null),this._nativeMediaStreamAudioDestinationNode=o}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(US,((e,t)=>{const n=e.createMediaStreamDestination();return Gx(n,t),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n}),RS,DS),fE=((e,t,n,i)=>class extends e{constructor(e,s){const r=n(e),a=t(r,s);if(i(r))throw new TypeError;super(e,!0,a,null),this._nativeMediaStreamAudioSourceNode=a}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(US,((e,t)=>{let{mediaStream:n}=t;const i=n.getAudioTracks();i.sort(((e,t)=>e.id<t.id?-1:e.id>t.id?1:0));const s=i.slice(0,1),r=e.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:n}),r}),RS,DS),pE=((e,t)=>(n,i)=>{let{mediaStreamTrack:s}=i;if("function"===typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(s);const r=new MediaStream([s]),a=n.createMediaStreamSource(r);if("audio"!==s.kind)throw e();if(t(n))throw new TypeError;return a})(Ix,DS),mE=((e,t,n)=>class extends e{constructor(e,i){const s=n(e);super(e,!0,t(s,i),null)}})(US,pE,RS),gE=((e,t,n,i,s,r,a,o,l)=>class extends e{constructor(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null===l)throw new Error("Missing the native AudioContext constructor.");try{e=new l(t)}catch(a){if(12===a.code&&"sampleRate is not in range"===a.message)throw n();throw a}if(null===e)throw i();if(!Ky(t.latencyHint))throw new TypeError("The provided value '".concat(t.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:s}=t,{sampleRate:r}=e;if(this._baseLatency="number"===typeof e.baseLatency?e.baseLatency:"balanced"===s?512/r:"interactive"===s||void 0===s?256/r:"playback"===s?1024/r:128*Math.max(2,Math.min(128,Math.round(s*r/128)))/r,this._nativeAudioContext=e,"webkitAudioContext"===l.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw t()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),qy(this)})))}createMediaElementSource(e){return new s(this,{mediaElement:e})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(e){return new a(this,{mediaStream:e})}createMediaStreamTrackSource(e){return new o(this,{mediaStreamTrack:e})}resume(){return"suspended"===this._state?new Promise(((e,t)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((e=>{if(void 0===e||15===e.code)throw t();throw e}))}suspend(){return this._nativeAudioContext.suspend().catch((e=>{if(void 0===e)throw t();throw e}))}})(hE,Ix,aS,dS,uE,dE,fE,mE,jS),bE=(e=>t=>{const n=e.get(t);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(Fw),vE=(e=>(t,n)=>{e(t).add(n)})(bE),yE=(e=>function(t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=t[arguments.length>2&&void 0!==arguments[2]?arguments[2]:0];if(void 0===s)throw e();return fx(n)?s.connect(n,0,i):s.connect(n,0)})(By),xE=(e=>(t,n)=>{e(t).delete(n)})(bE),SE=(e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===n?t.forEach((e=>e.disconnect())):"number"===typeof n?Nx(e,t,n).disconnect():fx(n)?void 0===i?t.forEach((e=>e.disconnect(n))):void 0===s?Nx(e,t,i).disconnect(n,0):Nx(e,t,i).disconnect(n,0,s):void 0===i?t.forEach((e=>e.disconnect(n))):Nx(e,t,i).disconnect(n,0)})(By),wE=new WeakMap,EE=((e,t)=>n=>t(e,n))(wE,Cy),_E=((e,t,n,i,s,r,a,o,l,c,u,d,f)=>(p,m,g,b)=>{if(0===b.numberOfInputs&&0===b.numberOfOutputs)throw l();const v=Array.isArray(b.outputChannelCount)?b.outputChannelCount:Array.from(b.outputChannelCount);if(v.some((e=>e<1)))throw l();if(v.length!==b.numberOfOutputs)throw t();if("explicit"!==b.channelCountMode)throw l();const y=b.channelCount*b.numberOfInputs,x=v.reduce(((e,t)=>e+t),0),S=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length;if(y+S>6||x>6)throw l();const w=new MessageChannel,E=[],_=[];for(let e=0;e<b.numberOfInputs;e+=1)E.push(a(p,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),_.push(s(p,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));const T=[];if(void 0!==g.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:n,name:i}of g.parameterDescriptors){const s=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==b.parameterData[i]?b.parameterData[i]:void 0===e?0:e});Object.defineProperties(s.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?Wy:t},minValue:{get:()=>void 0===n?Gy:n}}),T.push(s)}const M=i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+S)}),C=Xx(m,p.sampleRate),A=o(p,C,y+S,Math.max(1,x)),P=s(p,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),N=[];for(let e=0;e<b.numberOfOutputs;e+=1)N.push(i(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[e]}));for(let e=0;e<b.numberOfInputs;e+=1){E[e].connect(_[e]);for(let t=0;t<b.channelCount;t+=1)_[e].connect(M,t,e*b.channelCount+t)}const k=new bx(void 0===g.parameterDescriptors?[]:g.parameterDescriptors.map(((e,t)=>{let{name:n}=e;const i=T[t];return i.connect(M,0,y+t),i.start(0),[n,i.offset]})));M.connect(A);let L=b.channelInterpretation,I=null;const R=0===b.numberOfOutputs?[A]:N,O={get bufferSize(){return C},get channelCount(){return b.channelCount},set channelCount(e){throw n()},get channelCountMode(){return b.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return L},set channelInterpretation(e){for(const t of E)t.channelInterpretation=e;L=e},get context(){return A.context},get inputs(){return E},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get onprocessorerror(){return I},set onprocessorerror(e){"function"===typeof I&&O.removeEventListener("processorerror",I),I="function"===typeof e?e:null,"function"===typeof I&&O.addEventListener("processorerror",I)},get parameters(){return k},get port(){return w.port2},addEventListener(){return A.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},connect:e.bind(null,R),disconnect:c.bind(null,R),dispatchEvent(){return A.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return A.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},D=new Map;var F,B;w.port1.addEventListener=(F=w.port1.addEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){const e="function"===typeof t[1]?t[1]:"object"===typeof t[1]&&null!==t[1]&&"function"===typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=D.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{u(p.currentTime,p.sampleRate,(()=>e(t)))},D.set(e,t[1]))}}return F.call(w.port1,t[0],t[1],t[2])}),w.port1.removeEventListener=(B=w.port1.removeEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){const e=D.get(t[1]);void 0!==e&&(D.delete(t[1]),t[1]=e)}return B.call(w.port1,t[0],t[1],t[2])});let j=null;Object.defineProperty(w.port1,"onmessage",{get:()=>j,set:e=>{"function"===typeof j&&w.port1.removeEventListener("message",j),j="function"===typeof e?e:null,"function"===typeof j&&(w.port1.addEventListener("message",j),w.port1.start())}}),g.prototype.port=w.port1;let V=null;const G=((e,t,n,i)=>{let s=Sy.get(e);void 0===s&&(s=new WeakMap,Sy.set(e,s));const r=Yx(n,i);return s.set(t,r),r})(p,O,g,b);G.then((e=>V=e));const W=Sx(b.numberOfInputs,b.channelCount),z=Sx(b.numberOfOutputs,v),U=void 0===g.parameterDescriptors?[]:g.parameterDescriptors.reduce(((e,t)=>{let{name:n}=t;return h(h({},e),{},{[n]:new Float32Array(128)})}),{});let H=!0;const X=()=>{b.numberOfOutputs>0&&A.disconnect(P);for(let e=0,t=0;e<b.numberOfOutputs;e+=1){const n=N[e];for(let i=0;i<v[e];i+=1)P.disconnect(n,t+i,i);t+=v[e]}},Y=new Map;A.onaudioprocess=e=>{let{inputBuffer:t,outputBuffer:n}=e;if(null!==V){const e=d(O);for(let s=0;s<C;s+=128){for(let e=0;e<b.numberOfInputs;e+=1)for(let n=0;n<b.channelCount;n+=1)yx(t,W[e],n,n,s);void 0!==g.parameterDescriptors&&g.parameterDescriptors.forEach(((e,n)=>{let{name:i}=e;yx(t,U,i,y+n,s)}));for(let e=0;e<b.numberOfInputs;e+=1)for(let t=0;t<v[e];t+=1)0===z[e][t].byteLength&&(z[e][t]=new Float32Array(128));try{const t=W.map(((t,n)=>{if(e[n].size>0)return Y.set(n,C/128),t;const i=Y.get(n);return void 0===i?[]:(t.every((e=>e.every((e=>0===e))))&&(1===i?Y.delete(n):Y.set(n,i-1)),t)})),i=u(p.currentTime+s/p.sampleRate,p.sampleRate,(()=>V.process(t,z,U)));H=i;for(let e=0,r=0;e<b.numberOfOutputs;e+=1){for(let t=0;t<v[e];t+=1)xx(n,z[e],t,r+t,s);r+=v[e]}}catch(i){H=!1,O.dispatchEvent(new ErrorEvent("processorerror",{colno:i.colno,filename:i.filename,lineno:i.lineno,message:i.message}))}if(!H){for(let e=0;e<b.numberOfInputs;e+=1){E[e].disconnect(_[e]);for(let t=0;t<b.channelCount;t+=1)_[s].disconnect(M,t,e*b.channelCount+t)}if(void 0!==g.parameterDescriptors){const e=g.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=T[t];e.disconnect(M,0,y+t),e.stop()}}M.disconnect(A),A.onaudioprocess=null,q?X():Z();break}}}};let q=!1;const K=a(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),$=()=>A.connect(K).connect(p.destination),Z=()=>{A.disconnect(K),K.disconnect()};return $(),f(O,(()=>{if(H){Z(),b.numberOfOutputs>0&&A.connect(P);for(let e=0,t=0;e<b.numberOfOutputs;e+=1){const n=N[e];for(let i=0;i<v[e];i+=1)P.connect(n,t+i,i);t+=v[e]}}q=!0}),(()=>{H&&($(),X()),q=!1}))})(yE,By,Ix,dw,Kx,vw,Jx,iS,aS,SE,sE,EE,hw),TE=((e,t,n,i,s)=>(r,a,o,l,c,u)=>{if(null!==o)try{const t=new o(r,l,u),i=new Map;let a=null;if(Object.defineProperties(t,{channelCount:{get:()=>u.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>a,set:e=>{"function"===typeof a&&t.removeEventListener("processorerror",a),a="function"===typeof e?e:null,"function"===typeof a&&t.addEventListener("processorerror",a)}}}),t.addEventListener=(f=t.addEventListener,function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];if("processorerror"===n[0]){const e="function"===typeof n[1]?n[1]:"object"===typeof n[1]&&null!==n[1]&&"function"===typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==e){const t=i.get(n[1]);void 0!==t?n[1]=t:(n[1]=t=>{"error"===t.type?(Object.defineProperties(t,{type:{value:"processorerror"}}),e(t)):e(new ErrorEvent(n[0],h({},t)))},i.set(e,n[1]))}}return f.call(t,"error",n[1],n[2]),f.call(t,...n)}),t.removeEventListener=(d=t.removeEventListener,function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];if("processorerror"===n[0]){const e=i.get(n[1]);void 0!==e&&(i.delete(n[1]),n[1]=e)}return d.call(t,"error",n[1],n[2]),d.call(t,n[0],n[1],n[2])}),0!==u.numberOfOutputs){const e=n(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(e).connect(r.destination);return s(t,(()=>e.disconnect()),(()=>e.connect(r.destination)))}return t}catch(p){if(11===p.code)throw i();throw p}var d,f;if(void 0===c)throw i();return(e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}})(u),t(r,a,c,u)})(Ix,_E,Jx,aS,hw),ME=((e,t,n,i,s,r,a,o,l,c,h,u,d,f,p,m)=>(g,b,v)=>{const y=new WeakMap;let x=null;return{render(S,w){o(w,S);const E=y.get(w);return void 0!==E?Promise.resolve(E):(async(o,S)=>{let w=h(o),E=null;const _=Dy(w,S),T=Array.isArray(b.outputChannelCount)?b.outputChannelCount:Array.from(b.outputChannelCount);if(null===u){const e=T.reduce(((e,t)=>e+t),0),n=s(S,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),r=[];for(let t=0;t<o.numberOfOutputs;t+=1)r.push(i(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[t]}));const c=a(S,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1});c.connect=t.bind(null,r),c.disconnect=l.bind(null,r),E=[n,r,c]}else _||(w=new u(S,g));if(y.set(S,null===E?w:E[2]),null!==E){if(null===x){if(void 0===v)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const e=o.channelCount*o.numberOfInputs,t=void 0===v.parameterDescriptors?0:v.parameterDescriptors.length,n=e+t,l=async()=>{const l=new d(n,128*Math.ceil(o.context.length/128),S.sampleRate),c=[],h=[];for(let e=0;e<b.numberOfInputs;e+=1)c.push(a(l,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),h.push(s(l,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));const u=await Promise.all(Array.from(o.parameters.values()).map((async e=>{const t=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await f(l,e,t.offset),t}))),g=i(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+t)});for(let e=0;e<b.numberOfInputs;e+=1){c[e].connect(h[e]);for(let t=0;t<b.channelCount;t+=1)h[e].connect(g,t,e*b.channelCount+t)}for(const[t,n]of u.entries())n.connect(g,0,e+t),n.start(0);return g.connect(l.destination),await Promise.all(c.map((e=>p(o,l,e)))),m(l)};x=wx(o,0===n?null:await l(),S,b,T,v,c)}const e=await x,t=n(S,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,h,u]=E;null!==e&&(t.buffer=e,t.start(0)),t.connect(l);for(let n=0,i=0;n<o.numberOfOutputs;n+=1){const e=h[n];for(let t=0;t<T[n];t+=1)l.connect(e,i+t,t);i+=T[n]}return u}if(_)for(const[t,n]of o.parameters.entries())await e(S,n,w.parameters.get(t));else for(const[e,t]of o.parameters.entries())await f(S,t,w.parameters.get(e));return await p(o,S,w),w})(S,w)}}})(ew,yE,tw,dw,Kx,vw,Jx,xE,SE,sE,ox,zS,OS,nw,LS,Lw),CE=(e=>t=>e.get(t))(rE),AE=(e=>(t,n)=>{e.set(t,n)})(wE),PE=iE?((e,t,n,i,s,r,a,o,l,c,u,d,f,p)=>class extends t{constructor(t,p,m){var g;const b=o(t),v=l(b),y=u(h(h({},vx),m));f(y);const x=xy.get(b),S=null===x||void 0===x?void 0:x.get(p),w=v||"closed"!==b.state?b:null!==(g=a(b))&&void 0!==g?g:b,E=s(w,v?null:t.baseLatency,c,p,S,y);super(t,!0,E,v?i(p,y,S):null);const _=[];E.parameters.forEach(((e,t)=>{const i=n(this,v,e);_.push([t,i])})),this._nativeAudioWorkletNode=E,this._onprocessorerror=null,this._parameters=new bx(_),v&&e(b,this);const{activeInputs:T}=r(this);d(E,T)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(e){const t="function"===typeof e?p(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=t;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===t?e:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(vE,US,sw,ME,TE,Hy,CE,RS,DS,zS,(e=>h(h({},e),{},{outputChannelCount:void 0!==e.outputChannelCount?e.outputChannelCount:1===e.numberOfInputs&&1===e.numberOfOutputs?[e.channelCount]:Array.from({length:e.numberOfOutputs},(()=>1))})),AE,(e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}}),wS):void 0,NE=(((e,t,n,i,s)=>{})(Ix,aS,dS,Bw,jS),((e,t)=>(n,i,s)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,i,s)}catch(r){if("SyntaxError"===r.name)throw e();throw r}})(aS,OS)),kE=((e,t,n,i,s,r,a,o)=>(l,c)=>n(l).render(l,c).then((()=>Promise.all(Array.from(i(c)).map((e=>n(e).render(e,c)))))).then((()=>s(c))).then((n=>("function"!==typeof n.copyFromChannel?(a(n),jy(n)):t(r,(()=>r(n)))||o(n),e.add(n),n))))(XS,AS,kS,bE,Lw,Fy,KS,$S),LE=(((e,t,n,i,s)=>{})(AS,Ix,NE,Bw,kE),((e,t,n,i,s)=>class extends e{constructor(e,n,s){let r;if("number"===typeof e&&void 0!==n&&void 0!==s)r={length:n,numberOfChannels:e,sampleRate:s};else{if("object"!==typeof e)throw new Error("The given parameters are not valid.");r=e}const{length:a,numberOfChannels:o,sampleRate:l}=h(h({},oS),r),c=i(o,a,l);t(Bx,(()=>Bx(c)))||c.addEventListener("statechange",(()=>{let e=0;const t=n=>{"running"===this._state&&(e>0?(c.removeEventListener("statechange",t),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):e+=1)};return t})()),super(c,o),this._length=a,this._nativeOfflineAudioContext=c,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",s(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,qy(this)})))}_waitForThePromiseToSettle(e){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(e):setTimeout((()=>this._waitForThePromiseToSettle(e)))}})(hE,AS,Ix,NE,kE)),IE=((e,t)=>n=>{const i=e.get(n);return t(i)||t(n)})(by,VS),RE=((e,t)=>n=>e.has(n)||t(n))(py,GS),OE=((e,t)=>n=>e.has(n)||t(n))(gy,WS),DE=((e,t)=>n=>{const i=e.get(n);return t(i)||t(n)})(by,DS);function FE(e){return void 0===e}function BE(e){return void 0!==e}function jE(e){return"number"===typeof e}function VE(e){return"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object}function GE(e){return"boolean"===typeof e}function WE(e){return Array.isArray(e)}function zE(e){return"string"===typeof e}function UE(e){return zE(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)}function HE(e,t){if(!e)throw new Error(t)}function XE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!(t<=e&&e<=n))throw new RangeError("Value must be within [".concat(t,", ").concat(n,"], got: ").concat(e))}function YE(e){e.isOffline||"running"===e.state||QE('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let qE=!1,KE=!1;function $E(e){qE=e}let ZE=console;function QE(){ZE.warn(...arguments)}const JE="object"===typeof self?self:null,e_=JE&&(JE.hasOwnProperty("AudioContext")||JE.hasOwnProperty("webkitAudioContext"));function t_(e,t,n,i){var s,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(r<3?s(a):r>3?s(t,n,a):s(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}function n_(e,t,n,i){return new(n||(n=Promise))((function(s,r){function a(e){try{l(i.next(e))}catch(aC){r(aC)}}function o(e){try{l(i.throw(e))}catch(aC){r(aC)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,o)}l((i=i.apply(e,t||[])).next())}))}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;class i_{constructor(e,t,n,i){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(i||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){const e=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ".concat((1e3*this._updateInterval).toFixed(1),";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t")],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout((()=>{this._createTimeout(),this._callback()}),1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(aC){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),"worker"===this._type&&(null===(t=this._worker)||void 0===t||t.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function s_(e){return OE(e)}function r_(e){return RE(e)}function a_(e){return DE(e)}function o_(e){return IE(e)}function l_(e,t){return"value"===e||s_(t)||r_(t)||function(e){return e instanceof ZS}(t)}function c_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!n.length)return e;const s=n.shift();if(VE(e)&&VE(s))for(const r in s)l_(r,s[r])?e[r]=s[r]:VE(s[r])?(e[r]||Object.assign(e,{[r]:{}}),c_(e[r],s[r])):Object.assign(e,{[r]:s[r]});return c_(e,...n)}function h_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0;const s={},r=Array.from(t);if(VE(r[0])&&i&&!Reflect.has(r[0],i)){Object.keys(r[0]).some((t=>Reflect.has(e,t)))||(c_(s,{[i]:r[0]}),n.splice(n.indexOf(i),1),r.shift())}if(1===r.length&&VE(r[0]))c_(s,r[0]);else for(let a=0;a<n.length;a++)BE(r[a])&&(s[n[a]]=r[a]);return c_(e,s)}function u_(e,t){return FE(e)?t:e}function d_(e,t){return t.forEach((t=>{Reflect.has(e,t)&&delete e[t]})),e}class f_{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(){if(this.debug||JE&&this.toString()===JE.TONE_DEBUG_CLASS){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];!function(){ZE.log(...arguments)}(this,...t)}}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}f_.version=hy;const p_=1e-6;function m_(e,t){return e>t+p_}function g_(e,t){return m_(e,t)||v_(e,t)}function b_(e,t){return e+p_<t}function v_(e,t){return Math.abs(e-t)<p_}function y_(e,t,n){return Math.max(Math.min(e,n),t)}class x_ extends f_{constructor(){super(),this.name="Timeline",this._timeline=[];const e=h_(x_.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(HE(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];HE(g_(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(e){const t=this._timeline.indexOf(e);return-1!==t&&this._timeline.splice(t,1),this}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";const n=this._search(e,t);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";const n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(v_(this._timeline[t].time,e)){for(let n=t;n>=0&&v_(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else 1===this._timeline.length&&g_(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";if(0===this._timeline.length)return-1;let n=0;const i=this._timeline.length;let s=i;if(i>0&&this._timeline[i-1][t]<=e)return i-1;for(;n<s;){let i=Math.floor(n+(s-n)/2);const r=this._timeline[i],a=this._timeline[i+1];if(v_(r[t],e)){for(let n=i;n<this._timeline.length;n++){if(!v_(this._timeline[n][t],e))break;i=n}return i}if(b_(r[t],e)&&m_(a[t],e))return i;m_(r[t],e)?s=i:n=i+1}return-1}_iterate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._timeline.length-1;this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const n=this._search(e);return-1!==n&&this._iterate(t,0,n),this}forEachAfter(e,t){const n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let i=this._search(e),s=this._search(t);return-1!==i&&-1!==s?(this._timeline[i].time!==e&&(i+=1),this._timeline[s].time===t&&(s-=1),this._iterate(n,i,s)):-1===i&&this._iterate(n,0,s),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){const n=this._search(e);if(-1!==n&&v_(this._timeline[n].time,e)){let i=n;for(let t=n;t>=0&&v_(this._timeline[t].time,e);t--)i=t;this._iterate((e=>{t(e)}),i,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const S_=[];function w_(e){S_.push(e)}const E_=[];function __(e){E_.push(e)}class T_ extends f_{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach((e=>{FE(this._events)&&(this._events={}),this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push(t)})),this}once(e,t){var n=this;const i=function(){t(...arguments),n.off(e,i)};return this.on(e,i),this}off(e,t){return e.split(/\W+/).forEach((e=>{if(FE(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(FE(t))this._events[e]=[];else{const n=this._events[e];for(let e=n.length-1;e>=0;e--)n[e]===t&&n.splice(e,1)}})),this}emit(e){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let e=0,t=s.length;e<t;e++)s[e].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach((t=>{const n=Object.getOwnPropertyDescriptor(T_.prototype,t);Object.defineProperty(e.prototype,t,n)}))}dispose(){return super.dispose(),this._events=void 0,this}}class M_ extends T_{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class C_ extends M_{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new x_,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const n=h_(C_.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=(null===(e=arguments[0])||void 0===e?void 0:e.latencyHint)||""):(this._context=function(e){return new gE(e)}({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new i_(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null===(t=arguments[0])||void 0===t?void 0:t.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var e;return this._initialized||(e=this,S_.forEach((t=>t(e))),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){HE(o_(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamSource(e)}createMediaElementSource(e){HE(o_(this._context),"Not available if OfflineAudioContext");return this._context.createMediaElementSource(e)}createMediaStreamDestination(){HE(o_(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){HE(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){HE(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){HE(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){HE(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return function(e,t,n){return HE(BE(PE),"AudioWorkletNode only works in a secure context (https or localhost)"),new(e instanceof(null===JE||void 0===JE?void 0:JE.BaseAudioContext)?null===JE||void 0===JE?void 0:JE.AudioWorkletNode:PE)(e,t,n)}(this.rawContext,e,t)}addAudioWorkletModule(e){return n_(this,void 0,void 0,(function*(){HE(BE(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise}))}workletsAreReady(){return n_(this,void 0,void 0,(function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return o_(this._context)?this._context.resume():Promise.resolve()}close(){return n_(this,void 0,void 0,(function*(){var e;o_(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&(e=this,E_.forEach((t=>t(e))))}))}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let s=0;s<n.length;s++)n[s]=e;const i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=t,i.loop=!0,i.start(0),this._constants.set(e,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((e=>this._constants[e].disconnect())),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,(e=>{e.callback(),this._timeouts.remove(e)}))}setTimeout(e,t){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach((t=>{t.id===e&&this._timeouts.remove(t)})),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const n=++this._timeoutIds,i=()=>{const s=this.now();this._timeouts.add({callback:()=>{e(),i()},id:n,time:s+t})};return i(),n}}function A_(e,t){WE(t)?t.forEach((t=>A_(e,t))):Object.defineProperty(e,t,{enumerable:!0,writable:!1})}function P_(e,t){WE(t)?t.forEach((t=>P_(e,t))):Object.defineProperty(e,t,{writable:!0})}const N_=()=>{};class k_ extends f_{constructor(){super(),this.name="ToneAudioBuffer",this.onload=N_;const e=h_(k_.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,zE(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:N_,onload:N_,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:O_().sampleRate}set(e){return e instanceof k_?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return n_(this,void 0,void 0,(function*(){const t=k_.load(e).then((e=>{this.set(e),this.onload(this)}));k_.downloads.push(t);try{yield t}finally{const e=k_.downloads.indexOf(t);k_.downloads.splice(e,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=WE(e)&&e[0].length>0,n=t?e.length:1,i=t?e[0].length:e.length,s=O_(),r=s.createBuffer(n,i,s.sampleRate),a=t||1!==n?e:[e];for(let o=0;o<n;o++)r.copyToChannel(a[o],o);return this._buffer=r,this}toMono(e){if(jE(e))this.fromArray(this.toArray(e));else{let e=new Float32Array(this.length);const t=this.numberOfChannels;for(let n=0;n<t;n++){const t=this.toArray(n);for(let n=0;n<t.length;n++)e[n]+=t[n]}e=e.map((e=>e/t)),this.fromArray(e)}return this}toArray(e){if(jE(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);{const e=[];for(let t=0;t<this.numberOfChannels;t++)e[t]=this.getChannelData(t);return e}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration;HE(this.loaded,"Buffer is not loaded");const n=Math.floor(e*this.sampleRate),i=Math.floor(t*this.sampleRate);HE(n<i,"The start time must be less than the end time");const s=i-n,r=O_().createBuffer(this.numberOfChannels,s,this.sampleRate);for(let a=0;a<this.numberOfChannels;a++)r.copyToChannel(this.getChannelData(a).subarray(n,i),a);return new k_(r)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return(new k_).fromArray(e)}static fromUrl(e){return n_(this,void 0,void 0,(function*(){const t=new k_;return yield t.load(e)}))}static load(e){return n_(this,void 0,void 0,(function*(){const t=""===k_.baseUrl||k_.baseUrl.endsWith("/")?k_.baseUrl:k_.baseUrl+"/",n=yield fetch(t+e);if(!n.ok)throw new Error("could not load url: ".concat(e));const i=yield n.arrayBuffer();return yield O_().decodeAudioData(i)}))}static supportsType(e){const t=e.split("."),n=t[t.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return n_(this,void 0,void 0,(function*(){for(yield Promise.resolve();k_.downloads.length;)yield k_.downloads[0]}))}}k_.baseUrl="",k_.downloads=[];class L_ extends C_{constructor(){var e,t,n;super({clockSource:"offline",context:a_(arguments[0])?arguments[0]:(e=arguments[0],t=arguments[1]*arguments[2],n=arguments[2],new LE(e,t,n)),lookAhead:0,updateInterval:a_(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=a_(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return n_(this,void 0,void 0,(function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const n=Math.floor(this.sampleRate/128);e&&t%n===0&&(yield new Promise((e=>setTimeout(e,1))))}}))}render(){return n_(this,arguments,void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){yield e.workletsAreReady(),yield e._renderClock(t);const n=yield e._context.startRendering();return new k_(n)}()}))}close(){return Promise.resolve()}}const I_=new class extends M_{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return n_(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};let R_=I_;function O_(){return R_===I_&&e_&&function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&R_.dispose();R_=o_(e)?new C_(e):a_(e)?new L_(e):e}(new C_),R_}function D_(){return R_.resume()}if(JE&&!JE.TONE_SILENCE_LOGGING){let e="v";0;const t=" * Tone.js ".concat(e).concat(hy," * ");console.log("%c".concat(t),"background: #000; color: #fff")}function F_(e){return Math.pow(10,e/20)}function B_(e){return Math.log(e)/Math.LN10*20}function j_(e){return Math.pow(2,e/12)}let V_=440;function G_(e){return Math.round(W_(e))}function W_(e){return 69+12*Math.log2(e/V_)}function z_(e){return V_*Math.pow(2,(e-69)/12)}class U_ extends f_{constructor(e,t,n){super(),this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const n=parseInt(e,10),i="."===t?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/n)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(3*Math.floor(t)))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let i=0;return e&&"0"!==e&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(i+=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(i+=this._beatsToUnits(parseFloat(n)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof U_&&this.fromType(this._val),FE(this._val))return this._noArg();if(zE(this._val)&&FE(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(VE(this._val)){let e=0;for(const t in this._val)if(BE(this._val[t])){const n=this._val[t];e+=new this.constructor(this.context,t).valueOf()*n}return e}if(BE(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}return zE(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class H_ extends U_{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new H_(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=new this.constructor(this.context,e).valueOf(),i=this.valueOf();return i+(Math.round(i/n)*n-i)*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let s=1;s<9;s++){const e=Math.pow(2,s);t.push(e+"n."),t.push(e+"n"),t.push(e+"t")}t.push("0");let n=t[0],i=new H_(this.context,t[0]).toSeconds();return t.forEach((t=>{const s=new H_(this.context,t).toSeconds();Math.abs(s-e)<Math.abs(i-e)&&(n=t,i=s)})),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const n=Math.floor(t/this._getTimeSignature());let i=t%1*4;t=Math.floor(t)%this._getTimeSignature();const s=i.toString();s.length>3&&(i=parseFloat(parseFloat(s).toFixed(3)));return[n,t,i].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return G_(this.toFrequency())}_now(){return this.context.now()}}class X_ extends H_{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return V_}static set A4(e){!function(e){V_=e}(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return"midi"===this.defaultUnits?e:X_.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const n=Y_[e.toLowerCase()]+12*(parseInt(t,10)+1);return"midi"===this.defaultUnits?n:X_.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let i=1;return e&&"0"!==e&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(i*=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(i*=this._beatsToUnits(parseFloat(n)/4)),i}}})}transpose(e){return new X_(this.context,this.valueOf()*j_(e))}harmonize(e){return e.map((e=>this.transpose(e)))}toMidi(){return G_(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/X_.A4);let n=Math.round(12*t)+57;const i=Math.floor(n/12);i<0&&(n+=-12*i);return q_[n%12]+i.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(60*e/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return z_(e)}static ftom(e){return G_(e)}}const Y_={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},q_=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class K_ extends H_{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class $_ extends f_{constructor(){super();const e=h_($_.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:O_()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return function(e){FE(e)&&qE&&!KE&&(KE=!0,QE("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}(e),new H_(this.context,e).toSeconds()}toFrequency(e){return new X_(this.context,e).toFrequency()}toTicks(e){return new K_(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach((n=>{FE(e[n])&&delete t[n]})),t}get(){const e=this.constructor.getDefaults();return Object.keys(e).forEach((t=>{if(Reflect.has(this,t)){const n=this[t];BE(n)&&BE(n.value)&&BE(n.setValueAtTime)?e[t]=n.value:n instanceof $_?e[t]=n._getPartialProperties(e[t]):WE(n)||jE(n)||zE(n)||GE(n)?e[t]=n:delete e[t]}})),e}set(e){return Object.keys(e).forEach((t=>{Reflect.has(this,t)&&BE(this[t])&&(this[t]&&BE(this[t].value)&&BE(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof $_?this[t].set(e[t]):this[t]=e[t])})),this}}class Z_ extends x_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stopped";super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return null!==t?t.state:this._initial}setStateAtTime(e,t,n){return XE(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){for(let n=this._search(t);n>=0;n--){const t=this._timeline[n];if(t.state===e)return t}}getNextState(e,t){const n=this._search(t);if(-1!==n)for(let i=n;i<this._timeline.length;i++){const t=this._timeline[i];if(t.state===e)return t}}}class Q_ extends $_{constructor(){const e=h_(Q_.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,HE(BE(e.param)&&(s_(e.param)||e.param instanceof Q_),"param must be an AudioParam");!s_(e.param);)e.param=e.param._param;this._swappable=!!BE(e.swappable)&&e.swappable,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new x_(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,BE(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign($_.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return BE(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return BE(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return BE(this.maxValue)&&BE(this.minValue)&&XE(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?F_(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&"decibels"===this.units?B_(e):e}setValueAtTime(e,t){const n=this.toSeconds(t),i=this._fromType(e);return HE(isFinite(i)&&isFinite(n),"Invalid argument(s) to setValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._assertRange(i),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,n),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),i=this._events.get(t);let s=this._initialValue;if(null===i)s=this._initialValue;else if("setTargetAtTime"!==i.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)s=i.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let e=i.value;if("setTargetAtTime"===i.type){const t=this._events.getBefore(i.time);e=null===t?this._initialValue:t.value}s="linearRampToValueAtTime"===n.type?this._linearInterpolate(i.time,e,n.time,n.value,t):this._exponentialInterpolate(i.time,e,n.time,n.value,t)}else s=i.value;else{const e=this._events.getBefore(i.time);let n;n=null===e?this._initialValue:e.value,"setTargetAtTime"===i.type&&(s=this._exponentialApproach(i.time,n,i.value,i.constant,t))}return this._toType(s)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),0===this._fromType(t)&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const n=this._fromType(e),i=this.toSeconds(t);return HE(isFinite(n)&&isFinite(i),"Invalid argument(s) to linearRampToValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._assertRange(n),this._events.add({time:i,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,i),this._param.linearRampToValueAtTime(n,i),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=v_(n,0)?this._minOutput:n,this._assertRange(n);const i=this.toSeconds(t);return HE(isFinite(n)&&isFinite(i),"Invalid argument(s) to exponentialRampToValueAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,i),this._param.exponentialRampToValueAtTime(n,i),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);const i=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,i),this.cancelAndHoldAtTime(t+.9*n),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){const i=this._fromType(e);HE(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const s=this.toSeconds(t);return this._assertRange(i),HE(isFinite(i)&&isFinite(s),"Invalid argument(s) to setTargetAtTime: ".concat(JSON.stringify(e),", ").concat(JSON.stringify(t))),this._events.add({constant:n,time:s,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",e,s,n),this._param.setTargetAtTime(i,s,n),this}setValueCurveAtTime(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n=this.toSeconds(n),t=this.toSeconds(t);const s=this._fromType(e[0])*i;this.setValueAtTime(this._toType(s),t);const r=n/(e.length-1);for(let a=1;a<e.length;a++){const n=this._fromType(e[a])*i;this.linearRampToValueAtTime(this._toType(n),t+a*r)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return HE(isFinite(t),"Invalid argument to cancelScheduledValues: ".concat(JSON.stringify(e))),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));HE(isFinite(t),"Invalid argument to cancelAndHoldAtTime: ".concat(JSON.stringify(e))),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);const i=this._events.get(t),s=this._events.getAfter(t);return i&&v_(i.time,t)?s?(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):s&&(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time),"linearRampToValueAtTime"===s.type?this.linearRampToValueAtTime(this._toType(n),t):"exponentialRampToValueAtTime"===s.type&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2?arguments[2]:void 0;return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const n=this._events.get(t);if(n&&"setTargetAtTime"===n.type){const i=this._events.getAfter(n.time),s=i?i.time:t+2,r=(s-t)/10;for(let n=t;n<s;n+=r)e.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,(t=>{"cancelScheduledValues"===t.type?e.cancelScheduledValues(t.time):"setTargetAtTime"===t.type?e.setTargetAtTime(t.value,t.time,t.constant):e[t.type](t.value,t.time)})),this}setParam(e){HE(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,i,s){return n+(t-n)*Math.exp(-(s-e)/i)}_linearInterpolate(e,t,n,i,s){return t+(s-e)/(n-e)*(i-t)}_exponentialInterpolate(e,t,n,i,s){return t*Math.pow(i/t,(s-e)/(n-e))}}class J_ extends $_{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return BE(this.input)?s_(this.input)||this.input instanceof Q_?1:this.input.numberOfInputs:0}get numberOfOutputs(){return BE(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return BE(e)&&(e instanceof J_||r_(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach((t=>{t.channelCount=e.channelCount,t.channelCountMode=e.channelCountMode,t.channelInterpretation=e.channelInterpretation}))}_getChannelProperties(){const e=this._getInternalNodes();HE(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e){return tT(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return QE("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e){return nT(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}chain(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return eT(this,...t),this}fan(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>this.connect(e))),this}dispose(){return super.dispose(),BE(this.input)&&(this.input instanceof J_?this.input.dispose():r_(this.input)&&this.input.disconnect()),BE(this.output)&&(this.output instanceof J_?this.output.dispose():r_(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function eT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.shift();t.reduce(((e,t)=>(e instanceof J_?e.connect(t):r_(e)&&tT(e,t),t)),i)}function tT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(HE(BE(e),"Cannot connect from undefined node"),HE(BE(t),"Cannot connect to undefined node"),(t instanceof J_||r_(t))&&HE(t.numberOfInputs>0,"Cannot connect to node with no inputs"),HE(e.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof J_||t instanceof Q_;)BE(t.input)&&(t=t.input);for(;e instanceof J_;)BE(e.output)&&(e=e.output);s_(t)?e.connect(t,n):e.connect(t,n,i)}function nT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(BE(t))for(;t instanceof J_;)t=t.input;for(;!r_(e);)BE(e.output)&&(e=e.output);s_(t)?e.disconnect(t,n):r_(t)?e.disconnect(t,n,i):e.disconnect()}class iT extends J_{constructor(){const e=h_(iT.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Q_({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),A_(this,"gain")}static getDefaults(){return Object.assign(J_.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class sT extends J_{constructor(e){super(e),this.onended=N_,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new iT({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const t=this.toSeconds(e);return-1!==this._startTime&&t>=this._startTime&&(-1===this._stopTime||t<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(J_.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:N_})}_startGain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;HE(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){HE(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((()=>{const e="exponential"===this._curve?2*t:0;this._stopSource(this.now()+e),this._onended()}),this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==N_&&(this.onended(this),this.onended=N_,!this.context.isOffline)){const e=()=>this.dispose();"undefined"!==typeof requestIdleCallback?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),HE(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=N_,this}}class rT extends sT{constructor(){const e=h_(rT.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),tT(this._source,this._gainNode),this.offset=new Q_({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(sT.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class aT extends J_{constructor(){const e=h_(aT.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new rT({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(J_.getDefaults(),{convert:!0,units:"number",value:0})}connect(e){return oT(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,i){return this._param.setValueCurveAtTime(e,t,n,i),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function oT(e,t,n,i){(t instanceof Q_||s_(t)||t instanceof aT&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof aT&&(t.overridden=!0)),tT(e,t,n,i)}class lT extends Q_{constructor(){const e=h_(lT.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new x_(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Q_.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);const i=this._fromType(e),s=this._events.get(t),r=Math.round(Math.max(1/n,1));for(let a=0;a<=r;a++){const e=n*a+t,r=this._exponentialApproach(s.time,s.value,i,n,e);this.linearRampToValueAtTime(this._toType(r),e)}return this}setValueAtTime(e,t){const n=this.toSeconds(t);super.setValueAtTime(e,t);const i=this._events.get(n),s=this._events.previousEvent(i),r=this._getTicksUntilEvent(s,n);return i.ticks=Math.max(r,0),this}linearRampToValueAtTime(e,t){const n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const i=this._events.get(n),s=this._events.previousEvent(i),r=this._getTicksUntilEvent(s,n);return i.ticks=Math.max(r,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const n=this._fromType(e),i=this._events.get(t),s=Math.round(Math.max(10*(t-i.time),1)),r=(t-i.time)/s;for(let a=0;a<=s;a++){const e=r*a+i.time,s=this._exponentialInterpolate(i.time,i.value,t,n,e);this.linearRampToValueAtTime(this._toType(s),e)}return this}_getTicksUntilEvent(e,t){if(null===e)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(FE(e.ticks)){const t=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(t,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let i=this._fromType(this.getValueAtTime(t));const s=this._events.get(t);return s&&s.time===t&&"setValueAtTime"===s.type&&(i=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+i)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){const n=this.toSeconds(t),i=this.getTicksAtTime(t);return this.getTimeOfTick(i+e)-n}getTimeOfTick(e){const t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&"linearRampToValueAtTime"===n.type&&t.value!==n.value){const i=this._fromType(this.getValueAtTime(t.time)),s=(this._fromType(this.getValueAtTime(n.time))-i)/(n.time-t.time),r=Math.sqrt(Math.pow(i,2)-2*s*(t.ticks-e)),a=(-i+r)/s;return(a>0?a:(-i-r)/s)+t.time}return t?0===t.value?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const n=this.toSeconds(t),i=this.toSeconds(e),s=this.getTicksAtTime(n);return this.getTicksAtTime(n+i)-s}_fromType(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class cT extends aT{constructor(){const e=h_(cT.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new lT({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(aT.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class hT extends $_{constructor(){const e=h_(hT.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Z_,this._tickOffset=new x_,this._ticksAtTime=new x_,this._secondsAtTime=new x_,this.frequency=new cT({context:this.context,units:e.units,value:e.frequency}),A_(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},$_.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const n=this.toSeconds(e);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),BE(t)&&this.setTicksAtTime(t,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(e){const t=this.toSeconds(e);if("stopped"===this._state.getValueAtTime(t)){const e=this._state.get(t);e&&e.time>0&&(this._tickOffset.cancel(e.time),this._state.cancel(e.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),n=this._state.getLastState("stopped",t),i=this._ticksAtTime.get(t),s={state:"paused",time:t};this._state.add(s);let r=i||n,a=i?i.ticks:0,o=null;return this._state.forEachBetween(r.time,t+this.sampleTime,(e=>{let t=r.time;const n=this._tickOffset.get(e.time);n&&n.time>=r.time&&(a=n.ticks,t=n.time),"started"===r.state&&"started"!==e.state&&(a+=this.frequency.getTicksAtTime(e.time)-this.frequency.getTicksAtTime(t),e.time!==s.time&&(o={state:e.state,time:e.time,ticks:a})),r=e})),this._state.remove(s),o&&this._ticksAtTime.add(o),a}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);const i=this._secondsAtTime.get(e);let s=i||t,r=i?i.seconds:0,a=null;return this._state.forEachBetween(s.time,e+this.sampleTime,(e=>{let t=s.time;const i=this._tickOffset.get(e.time);i&&i.time>=s.time&&(r=i.seconds,t=i.time),"started"===s.state&&"started"!==e.state&&(r+=e.time-t,e.time!==n.time&&(a={state:e.state,time:e.time,seconds:r})),s=e})),this._state.remove(n),a&&this._secondsAtTime.add(a),r}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();const n=this._tickOffset.get(t),i=this._state.get(t),s=Math.max(n.time,i.time),r=this.frequency.getTicksAtTime(s)+e-n.ticks;return this.frequency.getTimeOfTick(r)}forEachTickBetween(e,t,n){let i=this._state.get(e);this._state.forEachBetween(e,t,(t=>{i&&"started"===i.state&&"started"!==t.state&&this.forEachTickBetween(Math.max(i.time,e),t.time-this.sampleTime,n),i=t}));let s=null;if(i&&"started"===i.state){const r=Math.max(i.time,e),a=this.frequency.getTicksAtTime(r),o=a-this.frequency.getTicksAtTime(i.time);let l=Math.ceil(o)-o;l=v_(l,1)?0:l;let c=this.frequency.getTimeOfTick(a+l);for(;c<t;){try{n(c,Math.round(this.getTicksAtTime(c)))}catch(aC){s=aC;break}c+=this.frequency.getDurationOfTicks(1,c)}}if(s)throw s;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class uT extends $_{constructor(){const e=h_(uT.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=N_,this._lastUpdate=0,this._state=new Z_("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new hT({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,A_(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign($_.getDefaults(),{callback:N_,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){YE(this.context);const n=this.toSeconds(e);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const n=this.toSeconds(t),i=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(i+e,n)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,(e=>{switch(e.state){case"started":const t=this._tickSource.getTicksAtTime(e.time);this.emit("start",e.time,t);break;case"stopped":0!==e.time&&this.emit("stop",e.time);break;case"paused":this.emit("pause",e.time)}})),this._tickSource.forEachTickBetween(e,t,((e,t)=>{this.callback(e,t)})))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}T_.mixin(uT);class dT extends J_{constructor(){const e=h_(dT.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new iT({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,A_(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(J_.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class fT extends J_{constructor(){const e=h_(fT.getDefaults(),arguments);super(e),this.name="Destination",this.input=new dT({context:this.context}),this.output=new iT({context:this.context}),this.volume=this.input.volume,eT(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(J_.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(){this.input.disconnect();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift(this.input),t.push(this.output),eT(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}w_((e=>{e.destination=new fT({context:e})})),__((e=>{e.destination.dispose()}));class pT extends J_{constructor(){super(...arguments),this.name="Listener",this.positionX=new Q_({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Q_({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Q_({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Q_({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Q_({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Q_({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Q_({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Q_({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Q_({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(J_.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}w_((e=>{e.listener=new pT({context:e})})),__((e=>{e.listener.dispose()}));class mT extends f_{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=h_(mT.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach((t=>{this._loadingCount++;const n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)}))}static getDefaults(){return{baseUrl:"",onerror:N_,onload:N_,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return HE(this.has(e),"ToneAudioBuffers has no buffer named: ".concat(e)),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,0===this._loadingCount&&e&&e()}get loaded(){return Array.from(this._buffers).every((e=>{let[t,n]=e;return n.loaded}))}add(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N_,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N_;return zE(t)?(this.baseUrl&&"data:audio/"===t.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(e.toString(),new k_(this.baseUrl+t,n,i))):this._buffers.set(e.toString(),new k_(t,n,i)),this}dispose(){return super.dispose(),this._buffers.forEach((e=>e.dispose())),this._buffers.clear(),this}}class gT extends K_{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class bT extends $_{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new x_,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,(t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)})),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}w_((e=>{e.draw=new bT({context:e})})),__((e=>{e.draw.dispose()}));class vT extends f_{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){HE(BE(e.time),"Events must have a time property"),HE(BE(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new yT(e.time,e.time+e.duration,e);for(null===this._root?this._root=t:this._root.insert(t),this._length++;null!==t;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(null!==this._root){const t=[];this._root.search(e.time,t);for(const n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,(e=>this.remove(e))),this}_setRoot(e){this._root=e,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(e,t){null!==e.parent?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(null===e.left&&null===e.right)this._replaceNodeInParent(e,null);else if(null===e.right)this._replaceNodeInParent(e,e.left);else if(null===e.left)this._replaceNodeInParent(e,e.right);else{let t,n=null;if(e.getBalance()>0)if(null===e.left.right)t=e.left,t.right=e.right,n=t;else{for(t=e.left.right;null!==t.right;)t=t.right;t.parent&&(t.parent.right=t.left,n=t.parent,t.left=e.left,t.right=e.right)}else if(null===e.right.left)t=e.right,t.left=e.left,n=t;else{for(t=e.right.left;null!==t.left;)t=t.left;t.parent&&(t.parent.left=t.right,n=t.parent,t.left=e.left,t.right=e.right)}null!==e.parent?e.isLeftChild()?e.parent.left=t:e.parent.right=t:this._setRoot(t),n&&this._rebalance(n)}e.dispose()}_rotateLeft(e){const t=e.parent,n=e.isLeftChild(),i=e.right;i&&(e.right=i.left,i.left=e),null!==t?n?t.left=i:t.right=i:this._setRoot(i)}_rotateRight(e){const t=e.parent,n=e.isLeftChild(),i=e.left;i&&(e.left=i.right,i.right=e),null!==t?n?t.left=i:t.right=i:this._setRoot(i)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(null!==this._root){const t=[];if(this._root.search(e,t),t.length>0){let e=t[0];for(let n=1;n<t.length;n++)t[n].low>e.low&&(e=t[n]);return e.event}}return null}forEach(e){if(null!==this._root){const t=[];this._root.traverse((e=>t.push(e))),t.forEach((t=>{t.event&&e(t.event)}))}return this}forEachAtTime(e,t){if(null!==this._root){const n=[];this._root.search(e,n),n.forEach((e=>{e.event&&t(e.event)}))}return this}forEachFrom(e,t){if(null!==this._root){const n=[];this._root.searchAfter(e,n),n.forEach((e=>{e.event&&t(e.event)}))}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse((e=>e.dispose())),this._root=null,this}}class yT{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?null===this.left?this.left=e:this.left.insert(e):null===this.right?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(null!==this.left&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),this.low>e||null!==this.right&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),null!==this.left&&this.left.searchAfter(e,t)),null!==this.right&&this.right.searchAfter(e,t)}traverse(e){e(this),null!==this.left&&this.left.traverse(e),null!==this.right&&this.right.traverse(e)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return null!==this.left&&null!==this.right?e=this.left.height-this.right.height:null!==this.left?e=this.left.height+1:null!==this.right&&(e=-(this.right.height+1)),e}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class xT extends f_{constructor(e){super(),this.name="TimelineValue",this._timeline=new x_({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class ST extends J_{constructor(){super(h_(ST.getDefaults(),arguments,["context"]))}connect(e){return oT(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}}class wT extends ST{constructor(){const e=h_(wT.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,WE(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):"function"===typeof e.mapping&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(aT.getDefaults(),{length:1024})}setMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=new Float32Array(t);for(let i=0,s=t;i<s;i++){const t=i/(s-1)*2-1;n[i]=e(t,i)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){HE(["none","2x","4x"].some((t=>t.includes(e))),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class ET extends ST{constructor(){const e=h_(ET.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new wT({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(ST.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class _T{constructor(e,t){this.id=_T._eventId++,this._remainderTime=0;const n=Object.assign(_T.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:N_,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}_T._eventId=0;class TT extends _T{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(TT.getDefaults(),t);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},_T.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return b_(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new gT(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){b_(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new gT(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);m_(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class MT extends $_{constructor(){const e=h_(MT.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new xT(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new x_,this._repeatedEvents=new vT,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new uT({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),A_(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign($_.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(2*this._swingTicks)!==0){const n=t%(2*this._swingTicks)/(2*this._swingTicks),i=Math.sin(n*Math.PI)*this._swingAmount;e+=new gT(this.context,2*this._swingTicks/3).toSeconds()*i}$E(!0),this._timeline.forEachAtTime(t,(t=>t.invoke(e))),$E(!1)}schedule(e,t){const n=new _T(this,{callback:e,time:new K_(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const s=new TT(this,{callback:e,duration:new H_(this.context,i).toTicks(),interval:new H_(this.context,t).toTicks(),time:new K_(this.context,n).toTicks()});return this._addEvent(s,this._repeatedEvents)}scheduleOnce(e,t){const n=new _T(this,{callback:e,once:!0,time:new K_(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=this.toTicks(e);return this._timeline.forEachFrom(t,(e=>this.clear(e.id))),this._repeatedEvents.forEachFrom(t,(e=>this.clear(e.id))),this}_bindClockEvents(){this._clock.on("start",((e,t)=>{t=new gT(this.context,t).toSeconds(),this.emit("start",e,t)})),this._clock.on("stop",(e=>{this.emit("stop",e)})),this._clock.on("pause",(e=>{this.emit("pause",e)}))}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let n;return this.context.resume(),BE(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),"started"!==this._clock.getStateAtTime(e)?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){WE(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new H_(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new H_(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new gT(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new gT(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(t),i=t+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t);this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),"started"!==this.state)return 0;{const t=this.now(),n=e-this.getTicksAtTime(t)%e;return this._clock.nextTickTime(n,t)}}syncSignal(e,t){const n=this.now();let i=this.bpm,s=1/(60/i.getValueAtTime(n)/this.PPQ),r=[];if("time"===e.units){const e=1/64/s,t=new iT(e),n=new ET(-1),a=new iT(e);i.chain(t,n,a),i=a,s=1/s,r=[t,n,a]}t||(t=0!==e.getValueAtTime(n)?e.getValueAtTime(n)/s:0);const a=new iT(t);return i.connect(a),a.connect(e._param),r.push(a),this._syncedSignals.push({initial:e.value,nodes:r,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const n=this._syncedSignals[t];n.signal===e&&(n.nodes.forEach((e=>e.dispose())),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),P_(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}T_.mixin(MT),w_((e=>{e.transport=new MT({context:e})})),__((e=>{e.transport.dispose()}));class CT extends J_{constructor(e){super(e),this.input=void 0,this._state=new Z_("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=N_,this._syncedStop=N_,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new dT({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,A_(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(J_.getDefaults(),{mute:!1,onstop:N_,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let i=FE(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(i=this._clampToCurrentTime(i),this._synced||"started"!==this._state.getValueAtTime(i))if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){const e=this._state.get(i);e&&(e.offset=this.toSeconds(u_(t,0)),e.duration=n?this.toSeconds(n):void 0);const s=this.context.transport.schedule((e=>{this._start(e,t,n)}),i);this._scheduled.push(s),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else YE(this.context),this._start(i,t,n);else HE(m_(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,t,n);return this}stop(e){let t=FE(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),"started"===this._state.getValueAtTime(t)||BE(this._state.getNextState("started",t))){if(this.log("stop",t),this._synced){const e=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(e)}else this._stop(t);this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),"started"===this._state.getValueAtTime(e)&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(m_(t,0)){const n=this._state.get(t);if(n&&"started"===n.state&&n.time!==t){const i=t-this.toSeconds(n.time);let s;n.duration&&(s=this.toSeconds(n.duration)-i),this._start(e,this.toSeconds(n.offset)+i,s)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));"started"===this._state.getValueAtTime(t)&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((e=>this.context.transport.clear(e))),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=N_,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class AT extends sT{constructor(){const e=h_(AT.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,tT(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Q_({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new k_(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(sT.getDefaults(),{url:new k_,loop:!1,loopEnd:0,loopStart:0,onload:N_,onerror:N_,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;HE(this.buffer.loaded,"buffer is either not set or not loaded");const s=this.toSeconds(e);this._startGain(s,i),t=this.loop?u_(t,this.loopStart):u_(t,0);let r=Math.max(this.toSeconds(t),0);if(this.loop){const e=this.toSeconds(this.loopEnd)||this.buffer.duration,t=this.toSeconds(this.loopStart),n=e-t;g_(r,e)&&(r=(r-t)%n+t),v_(r,this.buffer.duration)&&(r=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,b_(r,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(s,r)),BE(n)){let e=this.toSeconds(n);e=Math.max(e,0),this.stop(s+e)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class PT extends CT{constructor(){const e=h_(PT.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(CT.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(HE(e in LT,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,"started"===this.state)){const e=this.now();this._stop(e),this._start(e)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const t=LT[this._type];this._source=new AT({url:t,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(t.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const NT=220500,kT={brown:null,pink:null,white:null},LT={get brown(){if(!kT.brown){const e=[];for(let t=0;t<2;t++){const n=new Float32Array(NT);e[t]=n;let i=0;for(let e=0;e<NT;e++){const t=2*Math.random()-1;n[e]=(i+.02*t)/1.02,i=n[e],n[e]*=3.5}}kT.brown=(new k_).fromArray(e)}return kT.brown},get pink(){if(!kT.pink){const e=[];for(let t=0;t<2;t++){const n=new Float32Array(NT);let i,s,r,a,o,l,c;e[t]=n,i=s=r=a=o=l=c=0;for(let e=0;e<NT;e++){const t=2*Math.random()-1;i=.99886*i+.0555179*t,s=.99332*s+.0750759*t,r=.969*r+.153852*t,a=.8665*a+.3104856*t,o=.55*o+.5329522*t,l=-.7616*l-.016898*t,n[e]=i+s+r+a+o+l+c+.5362*t,n[e]*=.11,c=.115926*t}}kT.pink=(new k_).fromArray(e)}return kT.pink},get white(){if(!kT.white){const e=[];for(let t=0;t<2;t++){const n=new Float32Array(NT);e[t]=n;for(let e=0;e<NT;e++)n[e]=2*Math.random()-1}kT.white=(new k_).fromArray(e)}return kT.white}};function IT(e,t){return n_(this,void 0,void 0,(function*(){const n=t/e.context.sampleRate,i=new L_(1,n,e.context.sampleRate);new e.constructor(Object.assign(e.get(),{frequency:2/n,detune:0,context:i})).toDestination().start(0);return(yield i.render()).getChannelData(0)}))}class RT extends sT{constructor(){const e=h_(RT.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],tT(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Q_({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Q_({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),A_(this,["frequency","detune"])}static getDefaults(){return Object.assign(sT.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class OT extends CT{constructor(){const e=h_(OT.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new aT({context:this.context,units:"frequency",value:e.frequency}),A_(this,"frequency"),this.detune=new aT({context:this.context,units:"cents",value:e.detune}),A_(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&"custom"!==e.type&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(CT.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),n=new RT({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type){return OT._periodicWaveCache.find((e=>{return e.phase===this._phase&&(t=e.partials,n=this._partials,t.length===n.length&&t.every(((e,t)=>n[t]===e)));var t,n}))}{const e=OT._periodicWaveCache.find((e=>e.type===this._type&&e.phase===this._phase));return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&t)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{const t=this._getCachedPeriodicWave();if(BE(t)){const{partials:e,wave:n}=t;this._wave=n,this._partials=e,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[t,n]=this._getRealImaginary(e,this._phase),i=this.context.createPeriodicWave(t,n);this._wave=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),OT._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:t,type:this._type,wave:this._wave}),OT._periodicWaveCache.length>100&&OT._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&"custom"!==this._type&&"custom"!==e?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){XE(e,0);let t=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),"custom"!==this._type)this.type=0===e?t:t+e.toString();else{const t=new Float32Array(e);this._partials.forEach(((e,n)=>t[n]=e)),this._partials=Array.from(t),this.type=this._type}}_getRealImaginary(e,t){let n=2048;const i=new Float32Array(n),s=new Float32Array(n);let r=1;if("custom"===e){if(r=this._partials.length+1,this._partialCount=this._partials.length,n=r,0===this._partials.length)return[i,s]}else{const t=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);t?(r=parseInt(t[2],10)+1,this._partialCount=parseInt(t[2],10),e=t[1],r=Math.max(r,2),n=r):this._partialCount=0,this._partials=[]}for(let a=1;a<n;++a){const n=2/(a*Math.PI);let o;switch(e){case"sine":o=a<=r?1:0,this._partials[a-1]=o;break;case"square":o=1&a?2*n:0,this._partials[a-1]=o;break;case"sawtooth":o=n*(1&a?1:-1),this._partials[a-1]=o;break;case"triangle":o=1&a?n*n*2*(a-1>>1&1?-1:1):0,this._partials[a-1]=o;break;case"custom":o=this._partials[a-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}0!==o?(i[a]=-o*Math.sin(t*a),s[a]=o*Math.cos(t*a)):(i[a]=0,s[a]=0)}return[i,s]}_inverseFFT(e,t,n){let i=0;const s=e.length;for(let r=0;r<s;r++)i+=e[r]*Math.cos(r*n)+t[r]*Math.sin(r*n);return i}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let n=0;const i=2*Math.PI;for(let s=0;s<32;s++)n=Math.max(this._inverseFFT(e,t,s/32*i),n);return y_(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return n_(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return IT(e,t)}()}))}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}OT._periodicWaveCache=[];class DT extends ST{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new wT({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class FT extends aT{constructor(){const e=h_(FT.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new iT({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(aT.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class BT extends CT{constructor(){const e=h_(BT.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new DT({context:this.context}),this._modulationNode=new iT({context:this.context}),this._carrier=new OT({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new OT({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new FT({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),A_(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(OT.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return n_(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return IT(e,t)}()}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class jT extends CT{constructor(){const e=h_(jT.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new iT({context:this.context,gain:0}),this._carrier=new OT({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new aT({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new OT({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new FT({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new FT({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),A_(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(OT.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return n_(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return IT(e,t)}()}))}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class VT extends CT{constructor(){const e=h_(VT.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new iT({context:this.context,gain:0}),this._thresh=new wT({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new aT({context:this.context,units:"audioRange",value:e.width}),this._triangle=new OT({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),A_(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(CT.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return n_(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return IT(e,t)}()}))}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class GT extends CT{constructor(){const e=h_(GT.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new aT({context:this.context,units:"frequency",value:e.frequency}),this.detune=new aT({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,A_(this,["frequency","detune"])}static getDefaults(){return Object.assign(OT.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach((t=>t.start(e)))}_stop(e){e=this.toSeconds(e),this._forEach((t=>t.stop(e)))}_restart(e){this._forEach((t=>t.restart(e)))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach((t=>t.type=e))}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,n=e/(this._oscillators.length-1);this._forEach(((e,i)=>e.detune.value=t+n*i))}}get count(){return this._oscillators.length}set count(e){if(XE(e,1),this._oscillators.length!==e){this._forEach((e=>e.dispose())),this._oscillators=[];for(let t=0;t<e;t++){const n=new OT({context:this.context,volume:-6-1.1*e,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:0===t?()=>this.onstop(this):N_});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,"started"===this.state&&this._forEach((e=>e.start()))}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach(((e,t)=>e.phase=this._phase+t/this.count*360))}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach((t=>t.baseType=e)),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach((t=>t.partials=e)))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach((t=>t.partialCount=e)),this._type=this._oscillators[0].type}asArray(){return n_(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return IT(e,t)}()}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach((e=>e.dispose())),this}}class WT extends CT{constructor(){const e=h_(WT.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new FT({context:this.context,value:2}),this._pulse=new VT({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new OT({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),A_(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(CT.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return n_(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return IT(e,t)}()}))}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const zT={am:BT,fat:GT,fm:jT,oscillator:OT,pulse:VT,pwm:WT};class UT extends CT{constructor(){const e=h_(UT.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new aT({context:this.context,units:"frequency",value:e.frequency}),this.detune=new aT({context:this.context,units:"cents",value:e.detune}),A_(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(OT.getDefaults(),jT.getDefaults(),BT.getDefaults(),GT.getDefaults(),VT.getDefaults(),WT.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some((e=>this._sourceType===e))&&(e=this._sourceType),e+this._oscillator.type}set type(e){"fm"===e.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"am"===e.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"fat"===e.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):"pwm"===e?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===e?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=zT[e],n=this.now();if(this._oscillator){const e=this._oscillator;e.stop(n),this.context.setTimeout((()=>e.dispose()),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(t=this._oscillator.type),"fm"===e?this.type="fm"+t:"am"===e?this.type="am"+t:"fat"===e?this.type="fat"+t:"oscillator"===e?this.type=t:"pulse"===e?this.type="pulse":"pwm"===e&&(this.type="pwm")}_getOscType(e,t){return e instanceof zT[t]}get baseType(){return this._oscillator.baseType}set baseType(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===e||"pwm"===e||(this._oscillator.baseType=e)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(e){this._getOscType(this._oscillator,"fat")&&jE(e)&&(this._oscillator.count=e)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(e){this._getOscType(this._oscillator,"fat")&&jE(e)&&(this._oscillator.spread=e)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&zE(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(){return n_(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return IT(e,t)}()}))}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class HT extends aT{constructor(){super(h_(HT.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new iT({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,eT(this._constantSource,this._sum)}static getDefaults(){return Object.assign(aT.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class XT extends ST{constructor(){const e=h_(XT.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new FT({context:this.context,value:e.max-e.min}),this._add=this.output=new HT({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(ST.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function YT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=new WeakMap;return function(i,s){Reflect.defineProperty(i,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){XE(i,e,t),n.set(this,i)}})}}function qT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=new WeakMap;return function(i,s){Reflect.defineProperty(i,s,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(i){XE(this.toSeconds(i),e,t),n.set(this,i)}})}}class KT extends CT{constructor(){const e=h_(KT.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new k_({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(CT.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:N_,onerror:N_,playbackRate:1,reverse:!1})}load(e){return n_(this,void 0,void 0,(function*(){return yield this._buffer.load(e),this._onload(),this}))}_onload(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:N_)(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){t=this._loop?u_(t,this._loopStart):u_(t,0);const i=this.toSeconds(t),s=n;n=u_(n,Math.max(this._buffer.duration-i,0));let r=this.toSeconds(n);r/=this._playbackRate,e=this.toSeconds(e);const a=new AT({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(e+r),this._state.setStateAtTime("stopped",e+r,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&FE(s)?a.start(e,i):a.start(e,i,r-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach((e=>e.stop(t)))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){var i;null===(i=[...this._activeSources].pop())||void 0===i||i.stop(e),this._start(e,t,n)}seek(e,t){const n=this.toSeconds(t);if("started"===this._state.getValueAtTime(n)){const t=this.toSeconds(e);this._stop(n),this._start(n,t)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&XE(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach((t=>{t.loopStart=e}))}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&XE(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach((t=>{t.loopEnd=e}))}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach((t=>{t.loop=e})),e)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((e=>e.cancelStop()))),this._activeSources.forEach((n=>{n.playbackRate.setValueAtTime(e,t)}))}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach((e=>e.dispose())),this._activeSources.clear(),this._buffer.dispose(),this}}t_([qT(0)],KT.prototype,"fadeIn",void 0),t_([qT(0)],KT.prototype,"fadeOut",void 0);class $T extends J_{constructor(){const e=h_($T.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new aT({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(J_.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(zE(e))return e;{let n;for(n in ZT)if(ZT[n][t]===e)return n;return e}}_setCurve(e,t,n){if(zE(n)&&Reflect.has(ZT,n)){const i=ZT[n];VE(i)?"_decayCurve"!==e&&(this[e]=i[t]):this[e]=i}else{if(!WE(n)||"_decayCurve"===e)throw new Error("Envelope: invalid curve: "+n);this[e]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.log("triggerAttack",e,t),e=this.toSeconds(e);let n=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),s=this.getValueAtTime(e);if(s>0){n=(1-s)/(1/n)}if(n<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if("linear"===this._attackCurve)this._sig.linearRampTo(t,n,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(t,n,e);else{this._sig.cancelAndHoldAtTime(e);let i=this._attackCurve;for(let e=1;e<i.length;e++)if(i[e-1]<=s&&s<=i[e]){i=this._attackCurve.slice(e),i[0]=s;break}this._sig.setValueCurveAtTime(i,e,n,t)}if(i&&this.sustain<1){const s=t*this.sustain,r=e+n;this.log("decay",r),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(s,i+r):this._sig.exponentialApproachValueAtTime(s,r,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,e):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,e):(HE(WE(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e){return oT(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}asArray(){return n_(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){const n=t/e.context.sampleRate,i=new L_(1,n,e.context.sampleRate),s=e.toSeconds(e.attack)+e.toSeconds(e.decay),r=s+e.toSeconds(e.release),a=.1*r,o=r+a,l=new e.constructor(Object.assign(e.get(),{attack:n*e.toSeconds(e.attack)/o,decay:n*e.toSeconds(e.decay)/o,release:n*e.toSeconds(e.release)/o,context:i}));l._sig.toDestination(),l.triggerAttackRelease(n*(s+a)/o,0);return(yield i.render()).getChannelData(0)}()}))}dispose(){return super.dispose(),this._sig.dispose(),this}}t_([qT(0)],$T.prototype,"attack",void 0),t_([qT(0)],$T.prototype,"decay",void 0),t_([YT(0,1)],$T.prototype,"sustain",void 0),t_([qT(0)],$T.prototype,"release",void 0);const ZT=(()=>{const e=128;let t,n;const i=[];for(t=0;t<e;t++)i[t]=Math.sin(t/127*(Math.PI/2));const s=[];for(t=0;t<127;t++){n=t/127;const e=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;s[t]=e/10+.83*n}s[127]=1;const r=[];for(t=0;t<e;t++)r[t]=Math.ceil(t/127*5)/5;const a=[];for(t=0;t<e;t++)n=t/127,a[t]=.5*(1-Math.cos(Math.PI*n));const o=[];for(t=0;t<e;t++){n=t/127;const e=4*Math.pow(n,3)+.2,i=Math.cos(e*Math.PI*2*n);o[t]=Math.abs(i*(1-n))}function l(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=1-e[n];return t}return{bounce:{In:l(o),Out:o},cosine:{In:i,Out:(c=i,c.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:s,Out:l(s)},sine:{In:a,Out:l(a)},step:{In:r,Out:l(r)}};var c})();class QT extends J_{constructor(){const e=h_(QT.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new dT({context:this.context,volume:e.volume}),this.volume=this._volume.volume,A_(this,"volume")}static getDefaults(){return Object.assign(J_.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){var n=this;const i=this["_original_"+e]=this[e];this[e]=function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];const a=s[t],o=n.context.transport.schedule((e=>{s[t]=e,i.apply(n,s)}),a);n._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach((e=>this.context.transport.clear(e))),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,n,i){const s=this.toSeconds(n),r=this.toSeconds(t);return this.triggerAttack(e,s,i),this.triggerRelease(s+r),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class JT extends QT{constructor(){const e=h_(JT.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(QT.getDefaults(),{detune:0,onsilence:N_,portamento:0})}triggerAttack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.log("triggerAttack",e,t,n);const i=this.toSeconds(t);return this._triggerEnvelopeAttack(i,n),this.setNote(e,i),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const n=this.toSeconds(t),i=e instanceof X_?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const e=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,e,n)}else this.frequency.setValueAtTime(i,n);return this}}t_([qT(0)],JT.prototype,"portamento",void 0);class eM extends $T{constructor(){super(h_(eM.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new iT({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class tM extends JT{constructor(){const e=h_(tM.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new UT(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new eM(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),A_(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(JT.getDefaults(),{envelope:Object.assign(d_($T.getDefaults(),Object.keys(J_.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(d_(UT.getDefaults(),[...Object.keys(CT.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),0===this.envelope.sustain){const t=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+t+n)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class nM extends J_{constructor(){const e=h_(nM.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Q_({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Q_({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Q_({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Q_({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(J_.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){HE(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),"Invalid filter type: ".concat(e)),this._filter.type=e}getFrequencyResponse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const t=new Float32Array(e);for(let r=0;r<e;r++){const n=19980*Math.pow(r/e,2)+20;t[r]=n}const n=new Float32Array(e),i=new Float32Array(e),s=this.context.createBiquadFilter();return s.type=this.type,s.Q.value=this.Q.value,s.frequency.value=this.frequency.value,s.gain.value=this.gain.value,s.getFrequencyResponse(t,n,i),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class iM extends J_{constructor(){const e=h_(iM.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new iT({context:this.context}),this.output=new iT({context:this.context}),this._filters=[],this._filters=[],this.Q=new aT({context:this.context,units:"positive",value:e.Q}),this.frequency=new aT({context:this.context,units:"frequency",value:e.frequency}),this.detune=new aT({context:this.context,units:"cents",value:e.detune}),this.gain=new aT({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,A_(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(J_.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){HE(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),"Invalid filter type: ".concat(e)),this._type=e,this._filters.forEach((t=>t.type=e))}get rolloff(){return this._rolloff}set rolloff(e){const t=jE(e)?e:parseInt(e,10),n=[-12,-24,-48,-96];let i=n.indexOf(t);HE(-1!==i,"rolloff can only be ".concat(n.join(", "))),i+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach((e=>e.disconnect())),this._filters=new Array(i);for(let s=0;s<i;s++){const e=new nM({context:this.context});e.type=this._type,this.frequency.connect(e.frequency),this.detune.connect(e.detune),this.Q.connect(e.Q),this.gain.connect(e.gain),this._filters[s]=e}this._internalChannels=this._filters,eT(this.input,...this._internalChannels,this.output)}getFrequencyResponse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;const t=new nM({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(e).map((()=>1));return this._filters.forEach((()=>{t.getFrequencyResponse(e).forEach(((e,t)=>n[t]*=e))})),t.dispose(),n}dispose(){return super.dispose(),this._filters.forEach((e=>{e.dispose()})),P_(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}const sM=[1,1.483,1.932,2.546,2.63,3.897];class rM extends JT{constructor(){const e=h_(rM.getDefaults(),arguments);super(e),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new aT({context:this.context,units:"cents",value:e.detune}),this.frequency=new aT({context:this.context,units:"frequency"}),this._amplitude=new iT({context:this.context,gain:0}).connect(this.output),this._highpass=new iM({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let t=0;t<sM.length;t++){const n=new jT({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:0===t?()=>this.onsilence(this):N_,type:"square"});n.connect(this._highpass),this._oscillators[t]=n;const i=new FT({context:this.context,value:sM[t]});this._freqMultipliers[t]=i,this.frequency.chain(i,n.frequency),this.detune.connect(n.detune)}this._filterFreqScaler=new XT({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new $T({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return c_(JT.getDefaults(),{envelope:Object.assign(d_($T.getDefaults(),Object.keys(J_.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.envelope.triggerAttack(e,t),this._oscillators.forEach((t=>t.start(e))),0===this.envelope.sustain&&this._oscillators.forEach((t=>{t.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))})),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach((t=>t.stop(e+this.toSeconds(this.envelope.release)))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach((t=>t.modulationIndex.value=e))}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach((t=>t.harmonicity.value=e))}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach((e=>e.dispose())),this._freqMultipliers.forEach((e=>e.dispose())),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class aM extends tM{constructor(){const e=h_(aM.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,A_(this,["oscillator","envelope"])}static getDefaults(){return c_(JT.getDefaults(),tM.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const n=this.toSeconds(t),i=this.toFrequency(e instanceof X_?e.toFrequency():e),s=i*this.octaves;return this.oscillator.frequency.setValueAtTime(s,n),this.oscillator.frequency.exponentialRampToValueAtTime(i,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}t_([YT(0)],aM.prototype,"octaves",void 0),t_([qT(0)],aM.prototype,"pitchDecay",void 0);class oM extends QT{constructor(){const e=h_(oM.getDefaults(),arguments);super(e),this.name="NoiseSynth",this.noise=new PT(Object.assign({context:this.context},e.noise)),this.envelope=new eM(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(QT.getDefaults(),{envelope:Object.assign(d_($T.getDefaults(),Object.keys(J_.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(d_(PT.getDefaults(),Object.keys(CT.getDefaults())),{type:"white"})})}triggerAttack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e=this.toSeconds(e),this.envelope.triggerAttack(e,t),this.noise.start(e),0===this.envelope.sustain&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t=this.toSeconds(t),e=this.toSeconds(e),this.triggerAttack(t,n),this.triggerRelease(t+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const lM=new Set;function cM(e){lM.add(e)}function hM(e,t){const n='registerProcessor("'.concat(e,'", ').concat(t,")");lM.add(n)}cM('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');cM("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n");cM("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");const uM="feedback-comb-filter";hM(uM,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class dM extends QT{constructor(){const e=h_(dM.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach((n=>{const i=parseInt(n,10);if(HE(UE(n)||jE(i)&&isFinite(i),"url key is neither a note or midi pitch: ".concat(n)),UE(n)){const i=new X_(this.context,n).toMidi();t[i]=e.urls[n]}else jE(i)&&isFinite(i)&&(t[i]=e.urls[i])})),this._buffers=new mT({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(QT.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:N_,onerror:N_,release:.1,urls:{}})}_findClosest(e){let t=0;for(;t<96;){if(this._buffers.has(e+t))return-t;if(this._buffers.has(e-t))return t;t++}throw new Error("No available buffers for note: ".concat(e))}triggerAttack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach((e=>{const i=W_(new X_(this.context,e).toFrequency()),s=Math.round(i),r=i-s,a=this._findClosest(s),o=s-a,l=this._buffers.get(o),c=j_(a+r),h=new AT({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:c}).connect(this.output);h.start(t,0,l.duration/c,n),WE(this._activeSources.get(s))||this._activeSources.set(s,[]),this._activeSources.get(s).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(s)){const e=this._activeSources.get(s),t=e.indexOf(h);-1!==t&&e.splice(t,1)}}})),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach((e=>{const n=new X_(this.context,e).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const e=this._activeSources.get(n);t=this.toSeconds(t),e.forEach((e=>{e.stop(t)})),this._activeSources.set(n,[])}})),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach((e=>{for(;e.length;){e.shift().stop(t)}})),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const s=this.toSeconds(n);return this.triggerAttack(e,s,i),WE(t)?(HE(WE(e),"notes must be an array when duration is array"),e.forEach(((e,n)=>{const i=t[Math.min(n,t.length-1)];this.triggerRelease(e,s+this.toSeconds(i))}))):this.triggerRelease(e,s+this.toSeconds(t)),this}add(e,t,n){if(HE(UE(e)||isFinite(e),"note must be a pitch or midi: ".concat(e)),UE(e)){const i=new X_(this.context,e).toMidi();this._buffers.add(i,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach((e=>{e.forEach((e=>e.dispose()))})),this._activeSources.clear(),this}}t_([qT(0)],dM.prototype,"attack",void 0),t_([qT(0)],dM.prototype,"release",void 0);class fM extends J_{constructor(){const e=h_(fM.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Q_({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",A_(this,"pan")}static getDefaults(){return Object.assign(J_.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const pM="bit-crusher";hM(pM,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class mM extends J_{constructor(){const e=h_(mM.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new iT({context:this.context}),mM._allSolos.has(this.context)||mM._allSolos.set(this.context,new Set),mM._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(J_.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),mM._allSolos.get(this.context).forEach((e=>e._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){mM._soloed.has(this.context)||mM._soloed.set(this.context,new Set),mM._soloed.get(this.context).add(this)}_removeSolo(){mM._soloed.has(this.context)&&mM._soloed.get(this.context).delete(this)}_isSoloed(){return mM._soloed.has(this.context)&&mM._soloed.get(this.context).has(this)}_noSolos(){return!mM._soloed.has(this.context)||mM._soloed.has(this.context)&&0===mM._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),mM._allSolos.get(this.context).delete(this),this._removeSolo(),this}}mM._allSolos=new Map,mM._soloed=new Map;class gM extends J_{constructor(){const e=h_(gM.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new fM({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new dT({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,A_(this,["pan","volume"])}static getDefaults(){return Object.assign(J_.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class bM extends J_{constructor(){const e=h_(bM.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new mM({solo:e.solo,context:this.context}),this._panVol=this.output=new gM({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),A_(this,["pan","volume"])}static getDefaults(){return Object.assign(J_.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return bM.buses.has(e)||bM.buses.set(e,new iT({context:this.context})),bM.buses.get(e)}send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this._getBus(e),i=new iT({context:this.context,units:"decibels",gain:t});return this.connect(i),i.connect(n),i}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}bM.buses=new Map;function vM(){return O_().now()}const yM=O_().transport;O_().destination,O_().destination;O_().listener;O_().draw;O_();class xM{constructor(){this.drumSynths=new Map,this.scheduledEvents=[],this.isPlaying=!1,this.startTime=0,this.pauseTime=0,this.events=[],this.duration=0}async loadScore(e){const t=function(e){const t=(new DOMParser).parseFromString(e,"text/xml");let n=120;const i=t.getElementsByTagName("per-minute")[0];i&&(n=parseFloat(i.textContent||"120"));const s=t.getElementsByTagName("sound")[0];s&&s.getAttribute("tempo")&&(n=parseFloat(s.getAttribute("tempo")||"120"));const r=[],a=t.getElementsByTagName("part");let o=0;for(let u=0;u<a.length;u++){const e=a[u],i=e.getAttribute("id")||"";let s=i.toLowerCase().includes("drum");const d=t.getElementsByTagName("score-part");for(let t=0;t<d.length;t++)if(d[t].getAttribute("id")===i){var l;const e=d[t].getElementsByTagName("midi-channel")[0];e&&"10"===e.textContent&&(s=!0);const n=d[t].getElementsByTagName("part-name")[0];n&&null!==(l=n.textContent)&&void 0!==l&&l.toLowerCase().includes("drum")&&(s=!0);break}if(!s)continue;const f=e.getElementsByTagName("measure");let p=0,m=1;for(let t=0;t<f.length;t++){const e=f[t],i=e.getElementsByTagName("divisions")[0];i&&(m=parseInt(i.textContent||"1"));const s=e.children;for(let t=0;t<s.length;t++){const e=s[t];if("note"===e.tagName){const t=e.getElementsByTagName("chord").length>0,i=e.getElementsByTagName("duration")[0],s=(i?parseInt(i.textContent||"1"):m)/m,a=s/n*60,l=p/n*60,u=e.getElementsByTagName("unpitched")[0];if(u){var c,h;const e=(null===(c=u.getElementsByTagName("display-step")[0])||void 0===c?void 0:c.textContent)||"C",t=parseInt((null===(h=u.getElementsByTagName("display-octave")[0])||void 0===h?void 0:h.textContent)||"4");let n=38;"F"===e&&4===t?n=36:"C"===e&&5===t?n=38:"G"===e&&5===t?n=42:"F"===e&&5===t?n=51:"E"===e&&5===t?n=39:"A"===e&&4===t&&(n=63),r.push({time:l,duration:Math.min(a,.5),midi:n,velocity:.8})}t||(p+=s),l+a>o&&(o=l+a)}else if("forward"===e.tagName){const t=e.getElementsByTagName("duration")[0];t&&(p+=parseInt(t.textContent||"0")/m)}else if("backup"===e.tagName){const t=e.getElementsByTagName("duration")[0];t&&(p-=parseInt(t.textContent||"0")/m,p<0&&(p=0))}}}}return{events:r,bpm:n,duration:o}}(e);this.events=t.events,this.duration=t.duration,this.dispose(),0!==this.events.length&&await D_()}getDrumSynth(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80;if(this.drumSynths.has(e))return this.drumSynths.get(e);const n=B_(t/100);let i;switch(e){case 36:i=new aM({pitchDecay:.05,octaves:4,oscillator:{type:"sine"},envelope:{attack:.001,decay:.4,sustain:.01,release:.4}}).toDestination(),i.volume.value=n-6;break;case 38:case 39:i=new oM({noise:{type:"white"},envelope:{attack:.001,decay:.2,sustain:0,release:.2}}).toDestination(),i.volume.value=n-10;break;case 42:case 46:i=new rM({envelope:{attack:.001,decay:.1,release:.1},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5}).toDestination(),i.volume.value=n-15;break;case 51:i=new rM({envelope:{attack:.001,decay:.3,release:.3},harmonicity:3.1,modulationIndex:16,resonance:3e3,octaves:1}).toDestination(),i.volume.value=n-12;break;case 63:i=new aM({pitchDecay:.02,octaves:2,oscillator:{type:"sine"},envelope:{attack:.001,decay:.3,sustain:0,release:.3}}).toDestination(),i.volume.value=n-8;break;default:i=(new aM).toDestination(),i.volume.value=n-10}return this.drumSynths.set(e,i),i}play(){if(this.isPlaying||0===this.events.length)return;D_(),this.isPlaying=!0;const e=vM(),t=this.pauseTime;this.startTime=e-t;for(const n of this.events){if(n.time<t)continue;const i=e+(n.time-t),s=this.getDrumSynth(n.midi),r=yM.schedule((()=>{s.triggerAttackRelease(n.duration,vM(),n.velocity)}),i);this.scheduledEvents.push(r)}yM.start()}pause(){if(this.isPlaying){this.pauseTime=vM()-this.startTime,this.isPlaying=!1;for(const e of this.scheduledEvents)yM.clear(e);this.scheduledEvents=[],yM.stop()}}stop(){this.pause(),this.pauseTime=0}getIsPlaying(){return this.isPlaying}dispose(){this.stop(),Array.from(this.drumSynths.values()).forEach((e=>{e.dispose()})),this.drumSynths.clear()}}const SM=[{value:.3,label:"30%"},{value:.4,label:"40%"},{value:.5,label:"50%"},{value:.6,label:"60%"},{value:.7,label:"70%"},{value:.8,label:"80%"},{value:1,label:"100%"}],wM=e=>{let{musicXML:n,height:i="500px"}=e;const s=(0,t.useRef)(null),r=(0,t.useRef)(null),a=(0,t.useRef)(null),o=(0,t.useRef)(null),[l,c]=(0,t.useState)(!0),[h,u]=(0,t.useState)(null),[d,f]=(0,t.useState)("music"),[p,m]=(0,t.useState)(!1),[g,b]=(0,t.useState)(!1),[v,y]=(0,t.useState)(!1),[x,S]=(0,t.useState)(.7),[w,E]=(0,t.useState)(!1),[_,T]=(0,t.useState)(0),M=(0,t.useRef)(null),C=(0,t.useRef)([]),A=(0,t.useRef)(null);(0,t.useEffect)((()=>{const e=s.current;if(!e||!n)return;return(async()=>{c(!0),u(null);try{const i=(new DOMParser).parseFromString(n,"text/xml"),s=i.getElementsByTagName("movement-title"),l=i.getElementsByTagName("work-title"),h=(s.length>0?s[0].textContent:null)||(l.length>0?l[0].textContent:null)||"music";f(h);!r.current||null===A.current?(e.innerHTML="",a.current&&(a.current.stop(),a.current=null),y(!1),r.current=new Mp.OpenSheetMusicDisplay(e,{autoResize:!0,drawTitle:!0,drawSubtitle:!0,drawComposer:!0,drawCredits:!0,drawPartNames:!0,followCursor:!0,drawingParameters:"compact"})):(a.current&&a.current.stop(),y(!1));const u=r.current;await u.load(n),A.current=n,u.zoom=x,u.render();try{a.current=new cy,await a.current.loadScore(r.current),o.current=new xM,await o.current.loadScore(n),y(!0)}catch(t){console.warn("Audio player initialization failed:",t)}c(!1)}catch(i){console.error("Error loading musicXML:",i),u(i instanceof Error?i.message:"\u8f09\u5165\u6a02\u8b5c\u5931\u6557"),c(!1)}})(),()=>{if(a.current){try{a.current.stop()}catch(aC){}a.current=null}if(o.current){try{o.current.dispose()}catch(aC){}o.current=null}r.current=null,A.current=null}}),[n]),(0,t.useEffect)((()=>{r.current&&A.current&&(r.current.zoom=x,r.current.render())}),[x]);const P=(0,t.useCallback)((e=>{S(e)}),[]),N=(0,t.useCallback)((async()=>{if(a.current&&v)try{a.current.play(),o.current&&o.current.play(),m(!0),b(!1)}catch(e){console.error("Play error:",e)}}),[v]),k=(0,t.useCallback)((()=>{a.current&&(a.current.pause(),o.current&&o.current.pause(),m(!1),b(!0))}),[]),L=(0,t.useCallback)((()=>{a.current&&(a.current.stop(),o.current&&o.current.stop(),m(!1),b(!1))}),[]),I=(0,t.useCallback)((()=>{const e=new Blob([n],{type:"application/xml"}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download="".concat(d,".xml"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t)}),[n,d]),R=(0,t.useCallback)((async()=>{if(a.current&&v&&!w)try{const e=a.current,t=e.ac;if(!t)return void alert("\u7121\u6cd5\u5b58\u53d6\u97f3\u6a02\u4e0a\u4e0b\u6587");const n=t.createMediaStreamDestination(),i=e.gainNode||e.masterGain;i&&i.connect(n);const s=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":"audio/webm";M.current=new MediaRecorder(n.stream,{mimeType:s}),C.current=[],M.current.ondataavailable=e=>{e.data.size>0&&C.current.push(e.data)},M.current.onstop=()=>{const e=new Blob(C.current,{type:s}),t=URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download="".concat(d,".webm"),document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(t),E(!1),T(0);const r=a.current,o=(null===r||void 0===r?void 0:r.gainNode)||(null===r||void 0===r?void 0:r.masterGain);if(o)try{o.disconnect(n)}catch(aC){}},E(!0),M.current.start(100),a.current.stop(),o.current&&o.current.stop();const r=setInterval((()=>{const e=a.current;if(e){const t=e.currentIterationStep||0,n=e.iterationSteps||1;T(Math.min(t/n*100,100)),"STOPPED"!==e.state&&"PAUSED"!==e.state||M.current&&"recording"===M.current.state&&(setTimeout((()=>{M.current&&"recording"===M.current.state&&M.current.stop()}),500),clearInterval(r))}}),200);a.current.play(),o.current&&o.current.play(),m(!0),b(!1)}catch(e){console.error("\u9304\u88fd\u932f\u8aa4:",e),alert("\u9304\u88fd\u5931\u6557\uff1a"+(e instanceof Error?e.message:"\u672a\u77e5\u932f\u8aa4")),E(!1)}}),[v,w,d]),O=(0,t.useCallback)((()=>{M.current&&"recording"===M.current.state&&M.current.stop(),a.current&&a.current.stop(),m(!1),b(!1)}),[]),D=(0,t.useCallback)((()=>{if(!s.current)return;const e=s.current.querySelectorAll("svg");if(0===e.length)return void alert("\u627e\u4e0d\u5230\u6a02\u8b5c\u5167\u5bb9");const t=window.open("","_blank","width=800,height=600");if(!t)return void alert("\u7121\u6cd5\u958b\u555f\u5217\u5370\u8996\u7a97\uff0c\u8acb\u6aa2\u67e5\u5f48\u51fa\u8996\u7a97\u8a2d\u5b9a");let n="";e.forEach((e=>{const t=e.cloneNode(!0);t.setAttribute("width","100%"),t.removeAttribute("height"),t.style.maxWidth="100%",t.style.height="auto",n+=t.outerHTML})),t.document.write('\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <meta charset="UTF-8">\n                <title>'.concat(d," - \u6a02\u8b5c\u5217\u5370</title>\n                <style>\n                    @page {\n                        size: A4;\n                        margin: 15mm;\n                    }\n                    * {\n                        margin: 0;\n                        padding: 0;\n                        box-sizing: border-box;\n                    }\n                    body {\n                        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n                        background: white;\n                        padding: 10mm;\n                    }\n                    h1 {\n                        text-align: center;\n                        font-size: 18pt;\n                        margin-bottom: 10mm;\n                        color: #333;\n                    }\n                    .score-container {\n                        width: 100%;\n                    }\n                    .score-container svg {\n                        width: 100% !important;\n                        height: auto !important;\n                        max-width: 100%;\n                        display: block;\n                        margin: 0 auto;\n                        page-break-inside: avoid;\n                    }\n                    @media print {\n                        body {\n                            padding: 0;\n                        }\n                        .no-print {\n                            display: none !important;\n                        }\n                    }\n                </style>\n            </head>\n            <body>\n                <h1>").concat(d,'</h1>\n                <div class="score-container">\n                    ').concat(n,"\n                </div>\n                <script>\n                    window.onload = function() {\n                        setTimeout(function() {\n                            window.print();\n                            window.close();\n                        }, 500);\n                    };\n                <\/script>\n            </body>\n            </html>\n        ")),t.document.close()}),[d]);return(0,Rt.jsxs)("div",{className:"music-embed-container",children:[(0,Rt.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mb-4 p-3 bg-base-200 rounded-lg",children:[(0,Rt.jsxs)("div",{className:"flex items-center gap-1",children:[p?(0,Rt.jsxs)("button",{onClick:k,className:"btn btn-secondary btn-sm",title:"\u66ab\u505c",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,Rt.jsx)("path",{fillRule:"evenodd",d:"M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z",clipRule:"evenodd"})}),"\u66ab\u505c"]}):(0,Rt.jsxs)("button",{onClick:N,disabled:l||!v,className:"btn btn-primary btn-sm",title:"\u64ad\u653e",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,Rt.jsx)("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"})}),"\u64ad\u653e"]}),(0,Rt.jsx)("button",{onClick:L,disabled:l||!p&&!g,className:"btn btn-ghost btn-sm",title:"\u505c\u6b62",children:(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,Rt.jsx)("path",{fillRule:"evenodd",d:"M4.5 7.5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9Z",clipRule:"evenodd"})})})]}),(0,Rt.jsx)("div",{className:"divider divider-horizontal mx-1"}),(0,Rt.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Rt.jsx)("span",{className:"text-xs text-text-muted",children:"\u7e2e\u653e:"}),(0,Rt.jsx)("select",{value:x,onChange:e=>P(parseFloat(e.target.value)),disabled:l,className:"select select-bordered select-xs",children:SM.map((e=>(0,Rt.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,Rt.jsx)("div",{className:"divider divider-horizontal mx-1"}),(0,Rt.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Rt.jsxs)("button",{onClick:I,disabled:l,className:"btn btn-outline btn-sm",title:"\u4e0b\u8f09 MusicXML\uff08\u53ef\u532f\u5165 MuseScore\uff09",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"})}),"XML"]}),w?(0,Rt.jsxs)("button",{onClick:O,className:"btn btn-error btn-sm",title:"\u505c\u6b62\u9304\u88fd",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,Rt.jsx)("path",{fillRule:"evenodd",d:"M4.5 7.5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-9Z",clipRule:"evenodd"})}),_>0?"".concat(Math.round(_),"%"):"\u505c\u6b62"]}):(0,Rt.jsxs)("button",{onClick:R,disabled:l||!v,className:"btn btn-outline btn-sm",title:"\u9304\u88fd\u4e26\u4e0b\u8f09\u97f3\u6a02",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9l10.5-3m0 6.553v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 11-.99-3.467l2.31-.66a2.25 2.25 0 001.632-2.163zm0 0V2.25L9 5.25v10.303m0 0v3.75a2.25 2.25 0 01-1.632 2.163l-1.32.377a1.803 1.803 0 01-.99-3.467l2.31-.66A2.25 2.25 0 009 15.553z"})}),"\u97f3\u6a02\u4e0b\u8f09"]}),(0,Rt.jsxs)("button",{onClick:D,disabled:l,className:"btn btn-outline btn-sm",title:"\u5217\u5370\u6a02\u8b5c",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415 0 0 1 10.56 0m-10.56 0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125 0 0 1-1.12 1.227H7.231c-.662 0-1.18-.568-1.12-1.227L6.34 18m11.318 0h1.091A2.25 2.25 0 0 0 21 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055 0 0 0-1.913-.247M6.34 18H5.25A2.25 2.25 0 0 1 3 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041 0 0 1 1.913-.247m10.5 0a48.536 48.536 0 0 0-10.5 0m10.5 0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621 0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5Zm-3 0h.008v.008H15V10.5Z"})}),"\u5217\u5370"]})]}),(0,Rt.jsx)("span",{className:"text-xs text-text-muted ml-auto",children:l?"\u8f09\u5165\u4e2d...":v?"":"(\u97f3\u6a02\u8f09\u5165\u4e2d...)"})]}),h&&(0,Rt.jsxs)("div",{className:"alert alert-error mb-4",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Rt.jsxs)("span",{children:["\u6a02\u8b5c\u8f09\u5165\u5931\u6557\uff1a",h]})]}),(0,Rt.jsxs)("div",{className:"relative",style:{minHeight:i,maxHeight:"800px"},children:[l&&(0,Rt.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 z-10 rounded-lg",children:(0,Rt.jsx)("span",{className:"loading loading-spinner loading-lg text-primary"})}),(0,Rt.jsx)("div",{ref:s,className:"overflow-auto bg-white rounded-lg p-4",style:{minHeight:i,maxHeight:"800px"}})]})]})},EM=[{id:"none",name:"\u7121\u7bc0\u594f",nameEn:"None",description:"\u4e0d\u6dfb\u52a0\u7bc0\u594f\u8072\u90e8",timeSignature:"4/4",pattern:{kick:[],snare:[],hihat:[]},subdivisions:4},{id:"pop",name:"\u6d41\u884c",nameEn:"Pop",description:"\u7d93\u5178\u6d41\u884c\u97f3\u6a02\u7bc0\u594f",timeSignature:"4/4",pattern:{kick:[3,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0],snare:[0,0,0,0,3,0,0,0,0,0,0,0,3,0,0,0],hihat:[2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0]},subdivisions:4},{id:"rock",name:"\u6416\u6efe",nameEn:"Rock",description:"\u5f37\u52c1\u7684\u6416\u6efe\u7bc0\u594f",timeSignature:"4/4",pattern:{kick:[3,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0],snare:[0,0,0,0,3,0,0,0,0,0,0,0,3,0,0,0],hihat:[3,0,3,0,3,0,3,0,3,0,3,0,3,0,3,0]},subdivisions:4},{id:"rumba",name:"\u502b\u5df4",nameEn:"Rumba",description:"\u6d6a\u6f2b\u62c9\u4e01\u7bc0\u594f",timeSignature:"4/4",pattern:{kick:[3,0,0,2,0,0,3,0,0,0,2,0,0,0,0,0],snare:[0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0],conga:[2,0,0,2,0,2,0,0,2,0,0,2,0,2,0,0],hihat:[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0]},subdivisions:4},{id:"tango",name:"\u63a2\u6208",nameEn:"Tango",description:"\u71b1\u60c5\u963f\u6839\u5ef7\u63a2\u6208",timeSignature:"4/4",pattern:{kick:[3,0,0,0,3,0,0,0,3,0,0,0,3,0,2,0],snare:[0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,2],hihat:[2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0]},subdivisions:4},{id:"bossanova",name:"\u4e4d\u53e4\u82ad",nameEn:"Bossa Nova",description:"\u8f15\u67d4\u5df4\u897f\u7bc0\u594f",timeSignature:"4/4",pattern:{kick:[3,0,0,0,0,0,2,0,0,0,3,0,0,0,0,0],snare:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],hihat:[2,0,2,0,2,0,2,0,2,0,2,0,2,0,2,0],ride:[0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2]},subdivisions:4},{id:"waltz",name:"\u83ef\u723e\u6ecb",nameEn:"Waltz",description:"\u512a\u96c5\u4e09\u62cd\u5b50\u821e\u66f2",timeSignature:"3/4",pattern:{kick:[3,0,0,0,0,0],snare:[0,0,0,0,0,0],hihat:[2,0,2,0,2,0]},subdivisions:2},{id:"country",name:"\u9109\u6751",nameEn:"Country",description:"\u7f8e\u570b\u9109\u6751\u97f3\u6a02\u98a8\u683c",timeSignature:"4/4",pattern:{kick:[3,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0],snare:[0,0,0,0,3,0,0,0,0,0,0,0,3,0,0,0],hihat:[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]},subdivisions:4},{id:"jazz",name:"\u7235\u58eb",nameEn:"Jazz Swing",description:"\u6416\u64fa\u7235\u58eb\u7bc0\u594f",timeSignature:"4/4",pattern:{kick:[3,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0],snare:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0],ride:[3,0,0,2,0,0,3,0,0,2,0,0,3,0,0,2],hihat:[0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0]},subdivisions:4},{id:"reggae",name:"\u96f7\u9b3c",nameEn:"Reggae",description:"\u7259\u8cb7\u52a0\u96f7\u9b3c\u7bc0\u594f",timeSignature:"4/4",pattern:{kick:[3,0,0,0,0,0,2,0,3,0,0,0,0,0,2,0],snare:[0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0],hihat:[0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0]},subdivisions:4}],_M={kick:{midi:36,step:"F",octave:4},snare:{midi:38,step:"C",octave:5},hihat:{midi:42,step:"G",octave:5,notehead:"x"},ride:{midi:51,step:"F",octave:5,notehead:"x"},clap:{midi:39,step:"E",octave:5},conga:{midi:63,step:"A",octave:4}};function TM(e,t,n){if("none"===e.id||!e.pattern.kick.length){const[i,s]=e.timeSignature.split("/").map(Number);return'\n      <measure number="'.concat(t,'">\n        <note>\n          <rest/>\n          <duration>').concat(n*i,"</duration>\n          <voice>1</voice>\n          <type>whole</type>\n        </note>\n      </measure>")}const[i]=e.timeSignature.split("/").map(Number),s=i*e.subdivisions,r=n/e.subdivisions;let a="";for(let o=0;o<s;o++){const t=[];Object.entries(e.pattern).forEach((e=>{let[n,i]=e;i&&i[o]&&i[o]>0&&t.push(n)})),0===t.length?a+="\n        <note>\n          <rest/>\n          <duration>".concat(r,"</duration>\n          <voice>1</voice>\n          <type>").concat(4===e.subdivisions?"16th":"eighth","</type>\n        </note>"):t.forEach(((t,n)=>{const i=_M[t];i&&(a+="\n        <note".concat(n>0?"><chord/":"",">\n          <unpitched>\n            <display-step>").concat(i.step,"</display-step>\n            <display-octave>").concat(i.octave,"</display-octave>\n          </unpitched>\n          <duration>").concat(r,"</duration>\n          <voice>1</voice>\n          <type>").concat(4===e.subdivisions?"16th":"eighth","</type>\n          ").concat(i.notehead?"<notehead>".concat(i.notehead,"</notehead>"):"","\n        </note>"))}))}return'\n      <measure number="'.concat(t,'">\n        ').concat(1===t?"\n        <attributes>\n          <divisions>".concat(n,"</divisions>\n          <clef>\n            <sign>percussion</sign>\n          </clef>\n        </attributes>"):"","\n        ").concat(a,"\n      </measure>")}function MM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:80;if("none"===t.id)return e;const i=new DOMParser,s=new XMLSerializer,r=i.parseFromString(e,"text/xml"),a=r.getElementsByTagName("part");if(0===a.length)return e;const o=a[0].getElementsByTagName("measure"),l=o.length;if(0===l)return e;const c=o[0].getElementsByTagName("divisions")[0],h=c?parseInt(c.textContent||"4"):4,u=r.getElementsByTagName("score-part");for(let b=0;b<u.length;b++){const e=u[b].getElementsByTagName("part-name")[0];if(e&&"Drums"===e.textContent){var d;const e=u[b].getAttribute("id");null===(d=u[b].parentNode)||void 0===d||d.removeChild(u[b]);for(let t=0;t<a.length;t++)if(a[t].getAttribute("id")===e){var f;null===(f=a[t].parentNode)||void 0===f||f.removeChild(a[t]);break}break}}const p="P-Drums",m=r.getElementsByTagName("part-list")[0];if(m){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"P-Drums",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80;const n=Math.round(t/100*127);return'\n    <score-part id="'.concat(e,'">\n      <part-name>Drums</part-name>\n      <part-abbreviation>Dr.</part-abbreviation>\n      <score-instrument id="').concat(e,'-I1">\n        <instrument-name>Drumset</instrument-name>\n      </score-instrument>\n      <midi-instrument id="').concat(e,'-I1">\n        <midi-channel>10</midi-channel>\n        <midi-program>1</midi-program>\n        <volume>').concat(n,"</volume>\n      </midi-instrument>\n    </score-part>")}(p,n),t=i.parseFromString("<temp>".concat(e,"</temp>"),"text/xml").getElementsByTagName("score-part")[0];t&&m.appendChild(r.importNode(t,!0))}const g=r.getElementsByTagName("score-partwise")[0];if(g){const e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"P-Drums",s="";for(let r=1;r<=t;r++)s+=TM(e,r,n);return'\n    <part id="'.concat(i,'">\n      ').concat(s,"\n    </part>")}(t,l,h,p),n=i.parseFromString("<temp>".concat(e,"</temp>"),"text/xml").getElementsByTagName("part")[0];n&&g.appendChild(r.importNode(n,!0))}return s.serializeToString(r)}function CM(e){return EM.filter((t=>"none"===t.id||t.timeSignature===e))}const AM=[{value:"piano",label:"\u92fc\u7434",midiProgram:1},{value:"guitar",label:"\u5409\u4ed6",midiProgram:25},{value:"bass",label:"\u8c9d\u65af",midiProgram:33},{value:"violin",label:"\u5c0f\u63d0\u7434",midiProgram:41},{value:"flute",label:"\u9577\u7b1b",midiProgram:74},{value:"saxophone",label:"\u85a9\u514b\u65af\u98a8",midiProgram:66},{value:"cello",label:"\u5927\u63d0\u7434",midiProgram:43},{value:"electric guitar",label:"\u96fb\u5409\u4ed6",midiProgram:28},{value:"vocals",label:"\u4eba\u8072",midiProgram:53}],PM=e=>{const t=AM.find((t=>t.value===e));return(null===t||void 0===t?void 0:t.label)||e},NM=e=>{const t=AM.find((t=>t.value===e));return(null===t||void 0===t?void 0:t.midiProgram)||1};const kM=e=>{var n,i,s,r,a,o,l,c,u,d,f,p,m;let{musicXML:g,initialParams:b,onParamsChange:v}=e;const[y,x]=(0,t.useState)(b),[S,w]=(0,t.useState)(b),[E,_]=(0,t.useState)(!1),T=(0,t.useMemo)((()=>{let e=function(e,t){var n,i,s;const r=new DOMParser,a=new XMLSerializer,o=r.parseFromString(e,"text/xml");if(t.title){const e=o.getElementsByTagName("movement-title");e.length>0&&(e[0].textContent=t.title)}if(t.bpm&&t.bpm>0){const e=o.getElementsByTagName("per-minute");e.length>0&&(e[0].textContent=t.bpm.toString());const n=o.getElementsByTagName("sound");n.length>0&&n[0].setAttribute("tempo",t.bpm.toString())}if(t.time_signature){const[e,n]=t.time_signature.split("/"),i=o.getElementsByTagName("beats"),s=o.getElementsByTagName("beat-type");i.length>0&&e&&(i[0].textContent=e),s.length>0&&n&&(s[0].textContent=n)}const l=[t.p1,t.p2,t.p3],c=[null!==(n=t.p1_volume)&&void 0!==n?n:80,null!==(i=t.p2_volume)&&void 0!==i?i:80,null!==(s=t.p3_volume)&&void 0!==s?s:80],h=o.getElementsByTagName("score-part");for(let u=0;u<h.length&&u<l.length;u++){const e=l[u],t=c[u],n=h[u];if(e){const t=n.getElementsByTagName("midi-program");t.length>0&&(t[0].textContent=NM(e).toString());const i=n.getElementsByTagName("part-name");i.length>0&&(i[0].textContent=PM(e));const s=n.getElementsByTagName("part-abbreviation");s.length>0&&(s[0].textContent=PM(e));const r=n.getElementsByTagName("instrument-name");r.length>0&&(r[0].textContent=PM(e))}const i=Math.round(t/100*127),s=n.getElementsByTagName("midi-instrument");if(s.length>0){const e=s[0];let t=e.getElementsByTagName("volume")[0];t||(t=o.createElement("volume"),e.appendChild(t)),t.textContent=i.toString()}}return a.serializeToString(o)}(g,y);if(y.beat&&"none"!==y.beat){const n=EM.find((e=>e.id===y.beat));if(n){var t;e=MM(e,n,null!==(t=y.drum_volume)&&void 0!==t?t:80)}}return e}),[g,y]),M=(0,t.useMemo)((()=>CM(S.time_signature||"4/4")),[S.time_signature]),C=(0,t.useCallback)(((e,t)=>{w((n=>h(h({},n),{},{[e]:t})))}),[]),A=(0,t.useCallback)((()=>{x(S),_(!1),null===v||void 0===v||v(S)}),[S,v]),P=(0,t.useCallback)((()=>{w(y),_(!1)}),[y]),N=(0,t.useCallback)((()=>{w(y),_(!0)}),[y]),k=(e,t)=>{var n;return(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsx)("label",{className:"label py-1",children:(0,Rt.jsx)("span",{className:"label-text text-xs",children:t})}),(0,Rt.jsx)("select",{className:"select select-bordered select-sm w-full",value:null!==(n=S[e])&&void 0!==n?n:"p1"===e?"flute":"p2"===e?"piano":"cello",onChange:t=>C(e,t.target.value),children:AM.map((e=>(0,Rt.jsx)("option",{value:e.value,children:e.label},e.value)))})]})};return(0,Rt.jsxs)("div",{className:"p-4",children:[(0,Rt.jsxs)("div",{className:"mb-6 p-4 bg-base-200 rounded-lg",children:[(0,Rt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Rt.jsx)("h3",{className:"font-semibold",children:"\u6a02\u8b5c\u8a2d\u5b9a"}),!E&&(0,Rt.jsxs)("button",{onClick:N,className:"btn btn-ghost btn-sm gap-1",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),"\u7de8\u8f2f\u8a2d\u5b9a"]})]}),E?(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsx)("label",{className:"label py-1",children:(0,Rt.jsx)("span",{className:"label-text text-xs",children:"\u6a02\u8b5c\u6a19\u984c"})}),(0,Rt.jsx)("input",{type:"text",className:"input input-bordered input-sm w-full",placeholder:"\u672a\u547d\u540d\u7684\u6a02\u8b5c",value:null!==(n=S.title)&&void 0!==n?n:"",onChange:e=>C("title",e.target.value)})]}),(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsx)("label",{className:"label py-1",children:(0,Rt.jsx)("span",{className:"label-text text-xs",children:"\u901f\u5ea6 (BPM)"})}),(0,Rt.jsx)("input",{type:"number",className:"input input-bordered input-sm w-full",placeholder:"60",min:40,max:200,value:null!==(i=S.bpm)&&void 0!==i?i:60,onChange:e=>C("bpm",parseInt(e.target.value)||60)})]}),(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsx)("label",{className:"label py-1",children:(0,Rt.jsx)("span",{className:"label-text text-xs",children:"\u62cd\u865f"})}),(0,Rt.jsxs)("select",{className:"select select-bordered select-sm w-full",value:null!==(s=S.time_signature)&&void 0!==s?s:"4/4",onChange:e=>C("time_signature",e.target.value),children:[(0,Rt.jsx)("option",{value:"4/4",children:"4/4"}),(0,Rt.jsx)("option",{value:"6/8",children:"6/8"})]})]})]}),(0,Rt.jsx)("div",{className:"divider my-2 text-xs text-base-content/50",children:"\u6a02\u5668\u8a2d\u5b9a"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[k("p1","\u9ad8\u97f3\u57df\u6a02\u5668 (P1)"),k("p2","\u4e2d\u97f3\u57df\u6a02\u5668 (P2)"),k("p3","\u4f4e\u97f3\u57df\u6a02\u5668 (P3)")]}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-2",children:[(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsxs)("label",{className:"label py-0",children:[(0,Rt.jsx)("span",{className:"label-text text-xs",children:"P1 \u97f3\u91cf"}),(0,Rt.jsxs)("span",{className:"label-text-alt text-xs",children:[null!==(r=S.p1_volume)&&void 0!==r?r:80,"%"]})]}),(0,Rt.jsx)("input",{type:"range",min:0,max:100,value:null!==(a=S.p1_volume)&&void 0!==a?a:80,onChange:e=>C("p1_volume",parseInt(e.target.value)),className:"range range-xs range-primary"})]}),(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsxs)("label",{className:"label py-0",children:[(0,Rt.jsx)("span",{className:"label-text text-xs",children:"P2 \u97f3\u91cf"}),(0,Rt.jsxs)("span",{className:"label-text-alt text-xs",children:[null!==(o=S.p2_volume)&&void 0!==o?o:80,"%"]})]}),(0,Rt.jsx)("input",{type:"range",min:0,max:100,value:null!==(l=S.p2_volume)&&void 0!==l?l:80,onChange:e=>C("p2_volume",parseInt(e.target.value)),className:"range range-xs range-primary"})]}),(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsxs)("label",{className:"label py-0",children:[(0,Rt.jsx)("span",{className:"label-text text-xs",children:"P3 \u97f3\u91cf"}),(0,Rt.jsxs)("span",{className:"label-text-alt text-xs",children:[null!==(c=S.p3_volume)&&void 0!==c?c:80,"%"]})]}),(0,Rt.jsx)("input",{type:"range",min:0,max:100,value:null!==(u=S.p3_volume)&&void 0!==u?u:80,onChange:e=>C("p3_volume",parseInt(e.target.value)),className:"range range-xs range-primary"})]}),(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsxs)("label",{className:"label py-0",children:[(0,Rt.jsx)("span",{className:"label-text text-xs",children:"\u9f13\u8072\u97f3\u91cf"}),(0,Rt.jsxs)("span",{className:"label-text-alt text-xs",children:[null!==(d=S.drum_volume)&&void 0!==d?d:80,"%"]})]}),(0,Rt.jsx)("input",{type:"range",min:0,max:100,value:null!==(f=S.drum_volume)&&void 0!==f?f:80,onChange:e=>C("drum_volume",parseInt(e.target.value)),className:"range range-xs range-secondary"})]})]}),(0,Rt.jsx)("div",{className:"divider my-2 text-xs text-base-content/50",children:"\u7bc0\u594f\u8a2d\u5b9a"}),(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsx)("label",{className:"label py-1",children:(0,Rt.jsx)("span",{className:"label-text text-xs",children:"\u7bc0\u594f\u98a8\u683c"})}),(0,Rt.jsx)("select",{className:"select select-bordered select-sm w-full md:w-1/3",value:null!==(p=S.beat)&&void 0!==p?p:"none",onChange:e=>C("beat",e.target.value),children:M.map((e=>(0,Rt.jsxs)("option",{value:e.id,children:[e.name," ","none"!==e.id&&"(".concat(e.nameEn,")")]},e.id)))}),S.beat&&"none"!==S.beat&&(0,Rt.jsx)("label",{className:"label py-1",children:(0,Rt.jsx)("span",{className:"label-text-alt text-base-content/50",children:null===(m=EM.find((e=>e.id===S.beat)))||void 0===m?void 0:m.description})})]}),(0,Rt.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,Rt.jsx)("button",{onClick:P,className:"btn btn-ghost btn-sm",children:"\u53d6\u6d88"}),(0,Rt.jsx)("button",{onClick:A,className:"btn btn-primary btn-sm",children:"\u78ba\u8a8d\u5957\u7528"})]})]}):(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("span",{className:"text-base-content/60",children:"\u6a19\u984c\uff1a"}),(0,Rt.jsx)("span",{className:"font-medium",children:y.title||"\u672a\u547d\u540d\u7684\u6a02\u8b5c"})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("span",{className:"text-base-content/60",children:"\u901f\u5ea6\uff1a"}),(0,Rt.jsxs)("span",{className:"font-medium",children:[y.bpm||60," BPM"]})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("span",{className:"text-base-content/60",children:"\u62cd\u865f\uff1a"}),(0,Rt.jsx)("span",{className:"font-medium",children:y.time_signature||"4/4"})]})]}),(0,Rt.jsx)("div",{className:"divider my-3"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("span",{className:"text-base-content/60",children:"\u6a02\u5668\uff1a"}),(0,Rt.jsxs)("span",{className:"font-medium ml-2",children:[PM(y.p1||"flute")," / ",PM(y.p2||"piano")," / ",PM(y.p3||"cello")]})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("span",{className:"text-base-content/60",children:"\u7bc0\u594f\uff1a"}),(0,Rt.jsx)("span",{className:"font-medium ml-2",children:(e=>{if(!e||"none"===e)return"\u7121";const t=EM.find((t=>t.id===e));return t?t.name:"\u7121"})(y.beat)})]})]})]})]}),(0,Rt.jsx)(wM,{musicXML:T,height:"500px"}),(0,Rt.jsx)("div",{className:"mt-4 p-3 bg-base-200 rounded-lg text-sm text-text-secondary",children:(0,Rt.jsxs)("p",{children:[(0,Rt.jsx)("strong",{children:"\u63d0\u793a\uff1a"}),"\u5982\u9700\u5b8c\u6574\u7684\u64ad\u653e\u9ad4\u9a57\uff0c\u5efa\u8b70\u4e0b\u8f09"," ",(0,Rt.jsx)("a",{href:"https://musescore.org/",target:"_blank",rel:"noopener noreferrer",className:"link link-primary",children:"MuseScore"})," ","\u7b49\u6a02\u8b5c\u8edf\u9ad4\uff0c\u532f\u5165\u4e0a\u65b9\u4e0b\u8f09\u7684 MusicXML \u6a94\u6848\uff0c\u5373\u53ef\u7372\u5f97\u66f4\u4f73\u7684\u6a02\u8b5c\u7de8\u8f2f\u8207\u64ad\u653e\u529f\u80fd\u3002"]})})]})},LM=[{value:"piano",label:"\u92fc\u7434",midiProgram:1},{value:"guitar",label:"\u5409\u4ed6",midiProgram:25},{value:"bass",label:"\u8c9d\u65af",midiProgram:33},{value:"violin",label:"\u5c0f\u63d0\u7434",midiProgram:41},{value:"flute",label:"\u9577\u7b1b",midiProgram:74},{value:"saxophone",label:"\u85a9\u514b\u65af\u98a8",midiProgram:66},{value:"cello",label:"\u5927\u63d0\u7434",midiProgram:43},{value:"electric guitar",label:"\u96fb\u5409\u4ed6",midiProgram:28},{value:"vocals",label:"\u4eba\u8072",midiProgram:53}],IM=e=>{const t=LM.find((t=>t.value===e));return(null===t||void 0===t?void 0:t.label)||e},RM={first_p1:"flute",first_p2:"piano",first_p3:"cello",second_p1:"violin",second_p2:"guitar",second_p3:"bass"},OM=e=>RM[e]||"piano",DM=e=>{const t=LM.find((t=>t.value===e));return(null===t||void 0===t?void 0:t.midiProgram)||1};const FM=e=>{var n,i,s,r,a,o,l,c,u,d,f;let{musicXML:p,initialParams:m,onParamsChange:g}=e;const[b,v]=(0,t.useState)(m),[y,x]=(0,t.useState)(m),[S,w]=(0,t.useState)(!1),E=(0,t.useMemo)((()=>{let e=function(e,t){var n,i;const s=new DOMParser,r=new XMLSerializer,a=s.parseFromString(e,"text/xml");if(t.title){const e=a.getElementsByTagName("movement-title");e.length>0&&(e[0].textContent=t.title)}if(t.bpm&&t.bpm>0){const e=a.getElementsByTagName("per-minute");e.length>0&&(e[0].textContent=t.bpm.toString());const n=a.getElementsByTagName("sound");n.length>0&&n[0].setAttribute("tempo",t.bpm.toString())}if(t.time_signature){const[e,n]=t.time_signature.split("/"),i=a.getElementsByTagName("beats"),s=a.getElementsByTagName("beat-type");i.length>0&&e&&(i[0].textContent=e),s.length>0&&n&&(s[0].textContent=n)}const o=[t.first_p1,t.first_p2,t.first_p3,t.second_p1,t.second_p2,t.second_p3],l=null!==(n=t.first_volume)&&void 0!==n?n:80,c=null!==(i=t.second_volume)&&void 0!==i?i:80,h=[l,l,l,c,c,c],u=a.getElementsByTagName("score-part");for(let d=0;d<u.length&&d<o.length;d++){const e=o[d],t=h[d],n=u[d];if(e){const t=n.getElementsByTagName("midi-program");t.length>0&&(t[0].textContent=DM(e).toString());const i=n.getElementsByTagName("part-name");i.length>0&&(i[0].textContent=IM(e));const s=n.getElementsByTagName("part-abbreviation");s.length>0&&(s[0].textContent=IM(e));const r=n.getElementsByTagName("instrument-name");r.length>0&&(r[0].textContent=IM(e))}const i=Math.round(t/100*127),s=n.getElementsByTagName("midi-instrument");if(s.length>0){const e=s[0];let t=e.getElementsByTagName("volume")[0];t||(t=a.createElement("volume"),e.appendChild(t)),t.textContent=i.toString()}}return r.serializeToString(a)}(p,b);if(b.beat&&"none"!==b.beat){const n=EM.find((e=>e.id===b.beat));if(n){var t;e=MM(e,n,null!==(t=b.drum_volume)&&void 0!==t?t:80)}}return e}),[p,b]),_=(0,t.useMemo)((()=>CM(y.time_signature||"4/4")),[y.time_signature]),T=(0,t.useCallback)(((e,t)=>{x((n=>h(h({},n),{},{[e]:t})))}),[]),M=(0,t.useCallback)((()=>{v(y),w(!1),null===g||void 0===g||g(y)}),[y,g]),C=(0,t.useCallback)((()=>{x(b),w(!1)}),[b]),A=(0,t.useCallback)((()=>{x(b),w(!0)}),[b]),P=(e,t)=>{var n;return(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsx)("label",{className:"label py-1",children:(0,Rt.jsx)("span",{className:"label-text text-xs",children:t})}),(0,Rt.jsx)("select",{className:"select select-bordered select-sm w-full",value:null!==(n=y[e])&&void 0!==n?n:OM(e),onChange:t=>T(e,t.target.value),children:LM.map((e=>(0,Rt.jsx)("option",{value:e.value,children:e.label},e.value)))})]})};return(0,Rt.jsxs)("div",{className:"p-4",children:[(0,Rt.jsxs)("div",{className:"mb-6 p-4 bg-base-200 rounded-lg",children:[(0,Rt.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Rt.jsx)("h3",{className:"font-semibold",children:"\u6a02\u8b5c\u8a2d\u5b9a"}),!S&&(0,Rt.jsxs)("button",{onClick:A,className:"btn btn-ghost btn-sm gap-1",children:[(0,Rt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,Rt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})}),"\u7de8\u8f2f\u8a2d\u5b9a"]})]}),S?(0,Rt.jsxs)("div",{className:"space-y-4",children:[(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsx)("label",{className:"label py-1",children:(0,Rt.jsx)("span",{className:"label-text text-xs",children:"\u6a02\u8b5c\u6a19\u984c"})}),(0,Rt.jsx)("input",{type:"text",className:"input input-bordered input-sm w-full",placeholder:"\u672a\u547d\u540d\u7684\u6a02\u8b5c",value:null!==(n=y.title)&&void 0!==n?n:"",onChange:e=>T("title",e.target.value)})]}),(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsx)("label",{className:"label py-1",children:(0,Rt.jsx)("span",{className:"label-text text-xs",children:"\u901f\u5ea6 (BPM)"})}),(0,Rt.jsx)("input",{type:"number",className:"input input-bordered input-sm w-full",placeholder:"60",min:40,max:200,value:null!==(i=y.bpm)&&void 0!==i?i:60,onChange:e=>T("bpm",parseInt(e.target.value)||60)})]}),(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsx)("label",{className:"label py-1",children:(0,Rt.jsx)("span",{className:"label-text text-xs",children:"\u62cd\u865f"})}),(0,Rt.jsxs)("select",{className:"select select-bordered select-sm w-full",value:null!==(s=y.time_signature)&&void 0!==s?s:"4/4",onChange:e=>T("time_signature",e.target.value),children:[(0,Rt.jsx)("option",{value:"4/4",children:"4/4"}),(0,Rt.jsx)("option",{value:"6/8",children:"6/8"})]})]})]}),(0,Rt.jsx)("div",{className:"divider my-2 text-xs text-base-content/50",children:"\u6a02\u5668\u8a2d\u5b9a"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("h4",{className:"text-sm font-medium text-primary mb-2",children:"\u7b2c\u4e00\u6f14\u594f\u8005"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P("first_p1","\u9ad8\u97f3\u57df\u6a02\u5668 (P1)"),P("first_p2","\u4e2d\u97f3\u57df\u6a02\u5668 (P2)"),P("first_p3","\u4f4e\u97f3\u57df\u6a02\u5668 (P3)")]})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("h4",{className:"text-sm font-medium text-secondary mb-2",children:"\u7b2c\u4e8c\u6f14\u594f\u8005"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[P("second_p1","\u9ad8\u97f3\u57df\u6a02\u5668 (P1)"),P("second_p2","\u4e2d\u97f3\u57df\u6a02\u5668 (P2)"),P("second_p3","\u4f4e\u97f3\u57df\u6a02\u5668 (P3)")]})]}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsxs)("label",{className:"label py-0",children:[(0,Rt.jsx)("span",{className:"label-text text-xs text-primary",children:"\u7b2c\u4e00\u6f14\u594f\u8005\u97f3\u91cf"}),(0,Rt.jsxs)("span",{className:"label-text-alt text-xs",children:[null!==(r=y.first_volume)&&void 0!==r?r:80,"%"]})]}),(0,Rt.jsx)("input",{type:"range",min:0,max:100,value:null!==(a=y.first_volume)&&void 0!==a?a:80,onChange:e=>T("first_volume",parseInt(e.target.value)),className:"range range-xs range-primary"})]}),(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsxs)("label",{className:"label py-0",children:[(0,Rt.jsx)("span",{className:"label-text text-xs text-secondary",children:"\u7b2c\u4e8c\u6f14\u594f\u8005\u97f3\u91cf"}),(0,Rt.jsxs)("span",{className:"label-text-alt text-xs",children:[null!==(o=y.second_volume)&&void 0!==o?o:80,"%"]})]}),(0,Rt.jsx)("input",{type:"range",min:0,max:100,value:null!==(l=y.second_volume)&&void 0!==l?l:80,onChange:e=>T("second_volume",parseInt(e.target.value)),className:"range range-xs range-secondary"})]}),(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsxs)("label",{className:"label py-0",children:[(0,Rt.jsx)("span",{className:"label-text text-xs",children:"\u9f13\u8072\u97f3\u91cf"}),(0,Rt.jsxs)("span",{className:"label-text-alt text-xs",children:[null!==(c=y.drum_volume)&&void 0!==c?c:80,"%"]})]}),(0,Rt.jsx)("input",{type:"range",min:0,max:100,value:null!==(u=y.drum_volume)&&void 0!==u?u:80,onChange:e=>T("drum_volume",parseInt(e.target.value)),className:"range range-xs range-accent"})]})]}),(0,Rt.jsx)("div",{className:"divider my-2 text-xs text-base-content/50",children:"\u7bc0\u594f\u8a2d\u5b9a"}),(0,Rt.jsxs)("div",{className:"form-control",children:[(0,Rt.jsx)("label",{className:"label py-1",children:(0,Rt.jsx)("span",{className:"label-text text-xs",children:"\u7bc0\u594f\u98a8\u683c"})}),(0,Rt.jsx)("select",{className:"select select-bordered select-sm w-full md:w-1/3",value:null!==(d=y.beat)&&void 0!==d?d:"none",onChange:e=>T("beat",e.target.value),children:_.map((e=>(0,Rt.jsxs)("option",{value:e.id,children:[e.name," ","none"!==e.id&&"(".concat(e.nameEn,")")]},e.id)))}),y.beat&&"none"!==y.beat&&(0,Rt.jsx)("label",{className:"label py-1",children:(0,Rt.jsx)("span",{className:"label-text-alt text-base-content/50",children:null===(f=EM.find((e=>e.id===y.beat)))||void 0===f?void 0:f.description})})]}),(0,Rt.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,Rt.jsx)("button",{onClick:C,className:"btn btn-ghost btn-sm",children:"\u53d6\u6d88"}),(0,Rt.jsx)("button",{onClick:M,className:"btn btn-primary btn-sm",children:"\u78ba\u8a8d\u5957\u7528"})]})]}):(0,Rt.jsxs)(Rt.Fragment,{children:[(0,Rt.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("span",{className:"text-base-content/60",children:"\u6a19\u984c\uff1a"}),(0,Rt.jsx)("span",{className:"font-medium",children:b.title||"\u672a\u547d\u540d\u7684\u6a02\u8b5c"})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("span",{className:"text-base-content/60",children:"\u901f\u5ea6\uff1a"}),(0,Rt.jsxs)("span",{className:"font-medium",children:[b.bpm||60," BPM"]})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("span",{className:"text-base-content/60",children:"\u62cd\u865f\uff1a"}),(0,Rt.jsx)("span",{className:"font-medium",children:b.time_signature||"4/4"})]})]}),(0,Rt.jsx)("div",{className:"divider my-3"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("span",{className:"font-medium text-primary",children:"\u7b2c\u4e00\u6f14\u594f\u8005\uff1a"}),(0,Rt.jsxs)("span",{className:"ml-2",children:[IM(b.first_p1||"flute")," / ",IM(b.first_p2||"piano")," / ",IM(b.first_p3||"cello")]})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("span",{className:"font-medium text-secondary",children:"\u7b2c\u4e8c\u6f14\u594f\u8005\uff1a"}),(0,Rt.jsxs)("span",{className:"ml-2",children:[IM(b.second_p1||"violin")," / ",IM(b.second_p2||"guitar")," / ",IM(b.second_p3||"bass")]})]})]}),(0,Rt.jsxs)("div",{className:"mt-3 text-sm",children:[(0,Rt.jsx)("span",{className:"text-base-content/60",children:"\u7bc0\u594f\uff1a"}),(0,Rt.jsx)("span",{className:"font-medium ml-2",children:(e=>{if(!e||"none"===e)return"\u7121";const t=EM.find((t=>t.id===e));return t?t.name:"\u7121"})(b.beat)})]})]})]}),(0,Rt.jsx)(wM,{musicXML:E,height:"600px"}),(0,Rt.jsx)("div",{className:"mt-4 p-3 bg-base-200 rounded-lg text-sm text-text-secondary",children:(0,Rt.jsxs)("p",{children:[(0,Rt.jsx)("strong",{children:"\u63d0\u793a\uff1a"}),"\u5982\u9700\u5b8c\u6574\u7684\u64ad\u653e\u9ad4\u9a57\uff0c\u5efa\u8b70\u4e0b\u8f09"," ",(0,Rt.jsx)("a",{href:"https://musescore.org/",target:"_blank",rel:"noopener noreferrer",className:"link link-primary",children:"MuseScore"})," ","\u7b49\u6a02\u8b5c\u8edf\u9ad4\uff0c\u532f\u5165\u4e0a\u65b9\u4e0b\u8f09\u7684 MusicXML \u6a94\u6848\uff0c\u5373\u53ef\u7372\u5f97\u66f4\u4f73\u7684\u6a02\u8b5c\u7de8\u8f2f\u8207\u64ad\u653e\u529f\u80fd\u3002"]})})]})},BM=(e,t)=>{const n={title:(null===t||void 0===t?void 0:t.title)||"\u672a\u547d\u540d\u7684\u6a02\u8b5c",bpm:(null===t||void 0===t?void 0:t.bpm)||60,time_signature:(null===t||void 0===t?void 0:t.time_signature)||"4/4",p1:(null===t||void 0===t?void 0:t.p1)||"piano",p2:(null===t||void 0===t?void 0:t.p2)||"piano",p3:(null===t||void 0===t?void 0:t.p3)||"piano"};return(0,Rt.jsx)(kM,{musicXML:e,initialParams:n})},jM=e=>{const t=[["\u8eab\u5fc3\u72c0\u614b",e.bodyMind],["\u5143\u6c23\u72c0\u614b",e.vitality],["Delta \u983b\u6bb5",e.delta],["Theta \u983b\u6bb5",e.theta],["\u4f4e Alpha \u983b\u6bb5",e.lowAlpha],["\u9ad8 Alpha \u983b\u6bb5",e.highAlpha],["\u4f4e Beta \u983b\u6bb5",e.lowBeta],["\u9ad8 Beta \u983b\u6bb5",e.highBeta],["\u4f4e Gamma \u983b\u6bb5",e.lowGamma],["\u9ad8 Gamma \u983b\u6bb5",e.highGamma]];return(0,Rt.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Rt.jsx)("h2",{className:"text-3xl font-bold",children:"\u5229\u990a\u7081\u5831\u544a"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,Rt.jsxs)("div",{className:"card bg-base-100 shadow p-4",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold",children:"\u4fee\u884c\u985e\u578b"}),(0,Rt.jsx)("p",{className:"mt-2",children:e.practiceType})]}),(0,Rt.jsxs)("div",{className:"card bg-base-100 shadow p-4",children:[(0,Rt.jsx)("h3",{className:"text-lg font-semibold",children:"\u4fee\u884c\u7b49\u7d1a"}),(0,Rt.jsx)("p",{className:"mt-2",children:e.practiceLevel})]})]}),(0,Rt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map((e=>{let[t,n]=e;return(0,Rt.jsxs)("div",{className:"card bg-base-100 shadow p-4",children:[(0,Rt.jsx)("h4",{className:"text-md font-medium mb-2",children:t}),(0,Rt.jsx)("p",{className:"text-sm mb-1",children:n.comment}),(0,Rt.jsx)("p",{className:"text-xs text-gray-500",children:n.type})]},t)}))})]})},VM=e=>{const t=e.sentimentBefore.data.map((e=>e.score)),n=e.sentimentAfter.data.map((e=>e.score)),i={chart:{type:"column"},title:{text:"\u6613 Motion \u60c5\u7dd2\u6307\u6578\u524d\u5f8c\u6e2c\u6bd4\u8f03\u5716"},xAxis:{categories:e.sentimentBefore.data.map(((e,t)=>"T ".concat(t+1))),title:{text:"\u6e2c\u8a66\u6a23\u672c"}},yAxis:{min:-5,max:5,title:{text:"\u60c5\u7dd2\u6307\u6578"},plotLines:[{value:e.sentimentBefore.sentimentAvg,color:"#f87171",width:1,dashStyle:"ShortDash",label:{text:"\u524d\u6e2c\u5e73\u5747: ".concat(e.sentimentBefore.sentimentAvg),align:"right",style:{color:"#f87171"}}},{value:e.sentimentAfter.sentimentAvg,color:"#60a5fa",width:1,dashStyle:"ShortDash",label:{text:"\u5f8c\u6e2c\u5e73\u5747: ".concat(e.sentimentAfter.sentimentAvg),align:"right",style:{color:"#60a5fa"}}}]},tooltip:{shared:!0,valueSuffix:""},plotOptions:{column:{grouping:!0,shadow:!1}},series:[{name:e.sentimentBefore.name,data:t,type:"column",color:"#f87171"},{name:e.sentimentAfter.name,data:n,type:"column",color:"#60a5fa"}]};return(0,Rt.jsxs)("div",{className:"p-4",children:[(0,Rt.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"\u6613 Motion \u5831\u544a"}),(0,Rt.jsx)(Tp(),{highcharts:Ep(),options:i})]})},GM=[{value:"piano",label:"\u92fc\u7434"},{value:"guitar",label:"\u5409\u4ed6"},{value:"bass",label:"\u8c9d\u65af"},{value:"violin",label:"\u5c0f\u63d0\u7434"},{value:"flute",label:"\u9577\u7b1b"},{value:"saxophone",label:"\u85a9\u514b\u65af\u98a8"},{value:"cello",label:"\u5927\u63d0\u7434"},{value:"electric guitar",label:"\u96fb\u5409\u4ed6"},{value:"vocals",label:"\u4eba\u8072"}],WM={id:"yuanshenyin",group:"\u4e3b\u8981\u529f\u80fd",name:"\u5143\u795e\u97f3",shortDescription:"\u8166\u6ce2\u5f71\u97f3\u7de8\u78bc\u7cfb\u7d71\uff0c\u5c07\u500b\u4eba\u8166\u6ce2\u8f49\u63db\u70ba\u7368\u7279\u7684\u5fc3\u9748\u97f3\u6a02\u4e94\u7dda\u8b5c",description:"\u8166\u6ce2\u5f71\u97f3\u7de8\u78bc\u53ca\u64ad\u653e\u7cfb\u7d71\uff0c\u5c07\u500b\u4eba\u8166\u6ce2\u6578\u64da\u8f49\u63db\u70ba\u7368\u7279\u7684\u97f3\u6a02\u65cb\u5f8b\uff0c\u900f\u904e\u524d\u6e2c\uff08\u6b63\u5e38\u775c\u773c\uff09\u8207\u5f8c\u6e2c\uff08\u6b63\u5ff5\u9589\u773c\uff09\u7684\u8166\u6ce2\u7279\u5fb5\uff0c\u7de8\u78bc\u751f\u6210\u5c08\u5c6c\u7684\u5fc3\u9748\u97f3\u6a02\u4e94\u7dda\u8b5c\u4e26\u64ad\u653e\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e,t){return xp("/api/v1/music",{title:(null===t||void 0===t?void 0:t.title)||"\u672a\u547d\u540d\u7684\u6a02\u8b5c",bpm:(null===t||void 0===t?void 0:t.bpm)||60,time_signature:(null===t||void 0===t?void 0:t.time_signature)||"4/4",p1:(null===t||void 0===t?void 0:t.p1)||"piano",p2:(null===t||void 0===t?void 0:t.p2)||"piano",p3:(null===t||void 0===t?void 0:t.p3)||"piano",beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:BM,customFields:[{label:"\u6a02\u8b5c\u6a19\u984c",fieldName:"title",type:"string",defaultValue:"\u672a\u547d\u540d\u7684\u6a02\u8b5c"},{label:"\u901f\u5ea6 (BPM)",fieldName:"bpm",type:"number",defaultValue:60},{label:"\u62cd\u865f",fieldName:"time_signature",type:"string",defaultValue:"4/4"},{label:"\u9ad8\u97f3\u57df\u6a02\u5668",fieldName:"p1",type:"string",defaultValue:"flute"},{label:"\u4e2d\u97f3\u57df\u6a02\u5668",fieldName:"p2",type:"string",defaultValue:"piano"},{label:"\u4f4e\u97f3\u57df\u6a02\u5668",fieldName:"p3",type:"string",defaultValue:"cello"}],editComponent:e=>{var t,n,i;let{customParams:s,onChange:r}=e;const a=(e,t)=>{r(h(h({},s),{},{[e]:t}))},o=e=>({p1:"flute",p2:"piano",p3:"cello"}[e]||"piano"),l=(e,t)=>{var n;return(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:t})}),(0,Rt.jsx)("select",{className:"select select-underline w-full",value:null!==(n=s[e])&&void 0!==n?n:o(e),onChange:t=>a(e,t.target.value),children:GM.map((e=>(0,Rt.jsx)("option",{value:e.value,children:e.label},e.value)))})]})};return(0,Rt.jsxs)("div",{className:"space-y-6 p-4 border border-base-300 rounded-lg",children:[(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u6a02\u8b5c\u6a19\u984c"})}),(0,Rt.jsx)("input",{type:"text",className:"input input-underline w-full",placeholder:"\u672a\u547d\u540d\u7684\u6a02\u8b5c",value:null!==(t=s.title)&&void 0!==t?t:"",onChange:e=>a("title",e.target.value)})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u901f\u5ea6 (BPM)"})}),(0,Rt.jsx)("input",{type:"number",className:"input input-underline w-full",placeholder:"60",min:40,max:200,value:null!==(n=s.bpm)&&void 0!==n?n:60,onChange:e=>a("bpm",parseInt(e.target.value)||60)})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u62cd\u865f"})}),(0,Rt.jsxs)("select",{className:"select select-underline w-full",value:null!==(i=s.time_signature)&&void 0!==i?i:"4/4",onChange:e=>a("time_signature",e.target.value),children:[(0,Rt.jsx)("option",{value:"4/4",children:"4/4"}),(0,Rt.jsx)("option",{value:"6/8",children:"6/8"})]})]})]}),(0,Rt.jsx)("div",{className:"divider-minimal",children:"\u6a02\u5668\u8a2d\u5b9a"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l("p1","\u9ad8\u97f3\u57df\u6a02\u5668 (P1)"),l("p2","\u4e2d\u97f3\u57df\u6a02\u5668 (P2)"),l("p3","\u4f4e\u97f3\u57df\u6a02\u5668 (P3)")]})]})}};Pt(WM);const zM=[{value:"piano",label:"\u92fc\u7434"},{value:"guitar",label:"\u5409\u4ed6"},{value:"bass",label:"\u8c9d\u65af"},{value:"violin",label:"\u5c0f\u63d0\u7434"},{value:"flute",label:"\u9577\u7b1b"},{value:"saxophone",label:"\u85a9\u514b\u65af\u98a8"},{value:"cello",label:"\u5927\u63d0\u7434"},{value:"electric guitar",label:"\u96fb\u5409\u4ed6"},{value:"vocals",label:"\u4eba\u8072"}],UM={id:"yuanshenyin-v2",group:"\u4e3b\u8981\u529f\u80fd",name:"\u5143\u795e\u97f3 (v2)",badge:{text:"Beta",color:"badge-warning"},shortDescription:"\u65b0\u7248\u8166\u6ce2\u5f71\u97f3\u7de8\u78bc\u7cfb\u7d71\uff0c\u5c07\u500b\u4eba\u8166\u6ce2\u8f49\u63db\u70ba\u7368\u7279\u7684\u5fc3\u9748\u97f3\u6a02\u4e94\u7dda\u8b5c",description:"\u65b0\u7248\u8166\u6ce2\u5f71\u97f3\u7de8\u78bc\u53ca\u64ad\u653e\u7cfb\u7d71\uff0c\u5c07\u500b\u4eba\u8166\u6ce2\u6578\u64da\u8f49\u63db\u70ba\u7368\u7279\u7684\u97f3\u6a02\u65cb\u5f8b\uff0c\u900f\u904e\u524d\u6e2c\uff08\u6b63\u5e38\u775c\u773c\uff09\u8207\u5f8c\u6e2c\uff08\u6b63\u5ff5\u9589\u773c\uff09\u7684\u8166\u6ce2\u7279\u5fb5\uff0c\u7de8\u78bc\u751f\u6210\u5c08\u5c6c\u7684\u5fc3\u9748\u97f3\u6a02\u4e94\u7dda\u8b5c\u4e26\u64ad\u653e\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e,t){return xp("/api/v2/music",{title:(null===t||void 0===t?void 0:t.title)||"\u672a\u547d\u540d\u7684\u6a02\u8b5c",bpm:(null===t||void 0===t?void 0:t.bpm)||60,time_signature:(null===t||void 0===t?void 0:t.time_signature)||"4/4",p1:(null===t||void 0===t?void 0:t.p1)||"piano",p2:(null===t||void 0===t?void 0:t.p2)||"piano",p3:(null===t||void 0===t?void 0:t.p3)||"piano",beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:BM,customFields:[{label:"\u6a02\u8b5c\u6a19\u984c",fieldName:"title",type:"string",defaultValue:"\u672a\u547d\u540d\u7684\u6a02\u8b5c"},{label:"\u901f\u5ea6 (BPM)",fieldName:"bpm",type:"number",defaultValue:60},{label:"\u62cd\u865f",fieldName:"time_signature",type:"string",defaultValue:"4/4"},{label:"\u9ad8\u97f3\u57df\u6a02\u5668",fieldName:"p1",type:"string",defaultValue:"flute"},{label:"\u4e2d\u97f3\u57df\u6a02\u5668",fieldName:"p2",type:"string",defaultValue:"piano"},{label:"\u4f4e\u97f3\u57df\u6a02\u5668",fieldName:"p3",type:"string",defaultValue:"cello"}],editComponent:e=>{var t,n,i;let{customParams:s,onChange:r}=e;const a=(e,t)=>{r(h(h({},s),{},{[e]:t}))},o=e=>({p1:"flute",p2:"piano",p3:"cello"}[e]||"piano"),l=(e,t)=>{var n;return(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:t})}),(0,Rt.jsx)("select",{className:"select select-underline w-full",value:null!==(n=s[e])&&void 0!==n?n:o(e),onChange:t=>a(e,t.target.value),children:zM.map((e=>(0,Rt.jsx)("option",{value:e.value,children:e.label},e.value)))})]})};return(0,Rt.jsxs)("div",{className:"space-y-6 p-4 border border-base-300 rounded-lg",children:[(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u6a02\u8b5c\u6a19\u984c"})}),(0,Rt.jsx)("input",{type:"text",className:"input input-underline w-full",placeholder:"\u672a\u547d\u540d\u7684\u6a02\u8b5c",value:null!==(t=s.title)&&void 0!==t?t:"",onChange:e=>a("title",e.target.value)})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u901f\u5ea6 (BPM)"})}),(0,Rt.jsx)("input",{type:"number",className:"input input-underline w-full",placeholder:"60",min:40,max:200,value:null!==(n=s.bpm)&&void 0!==n?n:60,onChange:e=>a("bpm",parseInt(e.target.value)||60)})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u62cd\u865f"})}),(0,Rt.jsxs)("select",{className:"select select-underline w-full",value:null!==(i=s.time_signature)&&void 0!==i?i:"4/4",onChange:e=>a("time_signature",e.target.value),children:[(0,Rt.jsx)("option",{value:"4/4",children:"4/4"}),(0,Rt.jsx)("option",{value:"6/8",children:"6/8"})]})]})]}),(0,Rt.jsx)("div",{className:"divider-minimal",children:"\u6a02\u5668\u8a2d\u5b9a"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l("p1","\u9ad8\u97f3\u57df\u6a02\u5668 (P1)"),l("p2","\u4e2d\u97f3\u57df\u6a02\u5668 (P2)"),l("p3","\u4f4e\u97f3\u57df\u6a02\u5668 (P3)")]})]})}};Pt(UM);const HM=[{value:"piano",label:"\u92fc\u7434"},{value:"guitar",label:"\u5409\u4ed6"},{value:"bass",label:"\u8c9d\u65af"},{value:"violin",label:"\u5c0f\u63d0\u7434"},{value:"flute",label:"\u9577\u7b1b"},{value:"saxophone",label:"\u85a9\u514b\u65af\u98a8"},{value:"cello",label:"\u5927\u63d0\u7434"},{value:"electric guitar",label:"\u96fb\u5409\u4ed6"},{value:"vocals",label:"\u4eba\u8072"}],XM={id:"dualmusic",group:"\u4e3b\u8981\u529f\u80fd",name:"\u7434\u745f\u5408",shortDescription:"\u96d9\u4eba\u8166\u6ce2\u5f71\u97f3\u7de8\u78bc\uff0c\u5c07\u5169\u4eba\u8166\u6ce2\u8f49\u5316\u70ba\u516d\u8072\u90e8\u5fc3\u9748\u5408\u594f\u97f3\u6a02",description:"\u7434\u745f\u5408\u96d9\u4eba\u8166\u6ce2\u5f71\u97f3\u7de8\u78bc\u7cfb\u7d71\uff0c\u5c07\u5169\u4eba\u7684\u8166\u6ce2\u6578\u64da\u8f49\u5316\u70ba\u7368\u7279\u7684\u5408\u594f\u6a02\u8b5c\u3002\u900f\u904e\u5206\u6790\u96d9\u65b9\u8166\u6ce2\u7279\u5fb5\uff0c\u7de8\u78bc\u751f\u6210\u516d\u8072\u90e8\u7684\u5fc3\u9748\u5408\u594f\u97f3\u6a02\uff08\u6bcf\u4eba\u9ad8\u3001\u4e2d\u3001\u4f4e\u4e09\u8072\u90e8\uff09\uff0c\u5448\u73fe\u5169\u4eba\u60c5\u611f\u4ea4\u6d41\u8207\u9ed8\u5951\u7684\u97f3\u6a02\u5316\u8868\u73fe\u3002",requiredFiles:[{verbose_name:"\u7b2c\u4e00\u4eba\u8166\u6ce2\u8cc7\u6599",name:"first_player"},{verbose_name:"\u7b2c\u4e8c\u4eba\u8166\u6ce2\u8cc7\u6599",name:"second_player"}],execute:async function(e,t){return xp("/api/v1/dualmusic",{title:(null===t||void 0===t?void 0:t.title)||"\u672a\u547d\u540d\u7684\u6a02\u8b5c",bpm:(null===t||void 0===t?void 0:t.bpm)||60,time_signature:(null===t||void 0===t?void 0:t.time_signature)||"4/4",first_player:h({instrument:{p1:(null===t||void 0===t?void 0:t.first_p1)||"piano",p2:(null===t||void 0===t?void 0:t.first_p2)||"piano",p3:(null===t||void 0===t?void 0:t.first_p3)||"piano"}},e[0]),second_player:h({instrument:{p1:(null===t||void 0===t?void 0:t.second_p1)||"piano",p2:(null===t||void 0===t?void 0:t.second_p2)||"piano",p3:(null===t||void 0===t?void 0:t.second_p3)||"piano"}},e[1])})},renderReport:(e,t)=>{const n={title:(null===t||void 0===t?void 0:t.title)||"\u672a\u547d\u540d\u7684\u6a02\u8b5c",bpm:(null===t||void 0===t?void 0:t.bpm)||60,time_signature:(null===t||void 0===t?void 0:t.time_signature)||"4/4",first_p1:(null===t||void 0===t?void 0:t.first_p1)||"piano",first_p2:(null===t||void 0===t?void 0:t.first_p2)||"piano",first_p3:(null===t||void 0===t?void 0:t.first_p3)||"piano",second_p1:(null===t||void 0===t?void 0:t.second_p1)||"piano",second_p2:(null===t||void 0===t?void 0:t.second_p2)||"piano",second_p3:(null===t||void 0===t?void 0:t.second_p3)||"piano"};return(0,Rt.jsx)(FM,{musicXML:e,initialParams:n})},customFields:[{label:"\u6a02\u8b5c\u6a19\u984c",fieldName:"title",type:"string",defaultValue:"\u672a\u547d\u540d\u7684\u6a02\u8b5c"},{label:"\u901f\u5ea6 (BPM)",fieldName:"bpm",type:"number",defaultValue:60},{label:"\u62cd\u865f",fieldName:"time_signature",type:"string",defaultValue:"4/4"},{label:"\u7b2c\u4e00\u4eba\u6a02\u5668 P1",fieldName:"first_p1",type:"string",defaultValue:"flute"},{label:"\u7b2c\u4e00\u4eba\u6a02\u5668 P2",fieldName:"first_p2",type:"string",defaultValue:"piano"},{label:"\u7b2c\u4e00\u4eba\u6a02\u5668 P3",fieldName:"first_p3",type:"string",defaultValue:"cello"},{label:"\u7b2c\u4e8c\u4eba\u6a02\u5668 P1",fieldName:"second_p1",type:"string",defaultValue:"violin"},{label:"\u7b2c\u4e8c\u4eba\u6a02\u5668 P2",fieldName:"second_p2",type:"string",defaultValue:"guitar"},{label:"\u7b2c\u4e8c\u4eba\u6a02\u5668 P3",fieldName:"second_p3",type:"string",defaultValue:"bass"}],editComponent:e=>{var t,n,i;let{customParams:s,onChange:r}=e;const a=(e,t)=>{r(h(h({},s),{},{[e]:t}))},o=e=>({first_p1:"flute",first_p2:"piano",first_p3:"cello",second_p1:"violin",second_p2:"guitar",second_p3:"bass"}[e]||"piano"),l=(e,t)=>{var n;return(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:t})}),(0,Rt.jsx)("select",{className:"select select-underline w-full",value:null!==(n=s[e])&&void 0!==n?n:o(e),onChange:t=>a(e,t.target.value),children:HM.map((e=>(0,Rt.jsx)("option",{value:e.value,children:e.label},e.value)))})]})};return(0,Rt.jsxs)("div",{className:"space-y-6 p-4 border border-base-300 rounded-lg",children:[(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u6a02\u8b5c\u6a19\u984c"})}),(0,Rt.jsx)("input",{type:"text",className:"input input-underline w-full",placeholder:"\u672a\u547d\u540d\u7684\u6a02\u8b5c",value:null!==(t=s.title)&&void 0!==t?t:"",onChange:e=>a("title",e.target.value)})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u901f\u5ea6 (BPM)"})}),(0,Rt.jsx)("input",{type:"number",className:"input input-underline w-full",placeholder:"60",min:40,max:200,value:null!==(n=s.bpm)&&void 0!==n?n:60,onChange:e=>a("bpm",parseInt(e.target.value)||60)})]}),(0,Rt.jsxs)("div",{className:"form-control form-control-minimal",children:[(0,Rt.jsx)("label",{className:"label label-minimal",children:(0,Rt.jsx)("span",{className:"label-text",children:"\u62cd\u865f"})}),(0,Rt.jsxs)("select",{className:"select select-underline w-full",value:null!==(i=s.time_signature)&&void 0!==i?i:"4/4",onChange:e=>a("time_signature",e.target.value),children:[(0,Rt.jsx)("option",{value:"4/4",children:"4/4"}),(0,Rt.jsx)("option",{value:"6/8",children:"6/8"})]})]})]}),(0,Rt.jsx)("div",{className:"divider-minimal",children:"\u6a02\u5668\u8a2d\u5b9a"}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("h4",{className:"text-sm font-medium text-primary mb-3",children:"\u7b2c\u4e00\u6f14\u594f\u8005"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l("first_p1","\u9ad8\u97f3\u57df\u6a02\u5668 (P1)"),l("first_p2","\u4e2d\u97f3\u57df\u6a02\u5668 (P2)"),l("first_p3","\u4f4e\u97f3\u57df\u6a02\u5668 (P3)")]})]}),(0,Rt.jsxs)("div",{children:[(0,Rt.jsx)("h4",{className:"text-sm font-medium text-secondary mb-3",children:"\u7b2c\u4e8c\u6f14\u594f\u8005"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l("second_p1","\u9ad8\u97f3\u57df\u6a02\u5668 (P1)"),l("second_p2","\u4e2d\u97f3\u57df\u6a02\u5668 (P2)"),l("second_p3","\u4f4e\u97f3\u57df\u6a02\u5668 (P3)")]})]})]})}};Pt(XM);const YM={id:"hengyunlai",group:"\u4e3b\u8981\u529f\u80fd",name:"\u4ea8\u904b\u4f86",shortDescription:"H.R \u4eba\u529b\u8cc7\u6e90\u8a55\u4f30\uff0c\u7d50\u5408\u6613\u7d93\u516b\u5366\u7406\u8ad6\u5206\u6790\u516b\u5927\u8077\u80fd\u6f5b\u80fd",description:"H.R (Human Resource) \u8a55\u4f30\u7cfb\u7d71\uff0c\u900f\u904e\u8166\u6ce2\u5206\u6790\u8a55\u4f30\u500b\u4eba\u7684\u4eba\u529b\u8cc7\u6e90\u6f5b\u80fd\uff0c\u7d50\u5408\u6613\u7d93\u516b\u5366\u7406\u8ad6\u5c0d\u61c9\u9818\u5c0e\u7d71\u5fa1\u3001\u5275\u65b0\u767c\u5c55\u3001\u7814\u767c\u6574\u5408\u3001\u4eba\u4e8b\u884c\u653f\u3001\u696d\u52d9\u62d3\u5c55\u3001\u516c\u95dc\u884c\u92b7\u3001\u751f\u7522\u7ba1\u7406\u3001\u4efb\u52d9\u57f7\u884c\u516b\u5927\u8077\u80fd\u9762\u5411\uff0c\u63d0\u4f9b\u8077\u6daf\u767c\u5c55\u8207\u5de5\u4f5c\u9069\u914d\u5ea6\u53c3\u8003\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){return xp("/api/v1/human_resource_data",{beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:e=>{const{TEScore:t,TEScore_report:n,EM_report:i,sentimentBeforeAvg:s,sentimentAfterAvg:r,delta:a,theta:o,lowAlpha:l,highAlpha:c,lowBeta:h,highBeta:u,lowGamma:d,highGamma:f,ranking_report:p=[]}=e;return(0,Rt.jsxs)("div",{className:"p-4",children:[(0,Rt.jsxs)("div",{className:"mb-4",children:[(0,Rt.jsx)("h3",{className:"text-xl font-semibold",children:"\u7e3d\u9ad4\u8077\u80fd\u8a55\u4f30 TE"}),(0,Rt.jsxs)("p",{className:"mt-2",children:["\u5206\u6578\uff1a",(0,Rt.jsx)("strong",{children:t})]}),(0,Rt.jsx)("p",{children:null===n||void 0===n?void 0:n.te_score_remark_tw})]}),(0,Rt.jsxs)("div",{className:"mb-4",children:[(0,Rt.jsx)("h3",{className:"text-xl font-semibold",children:"\u60c5\u7dd2\u8a55\u4f30"}),(0,Rt.jsxs)("p",{children:["\u524d\u6e2c\u5e73\u5747\uff1a",(0,Rt.jsx)("strong",{children:s}),"\uff0c\u5f8c\u6e2c\u5e73\u5747\uff1a",(0,Rt.jsx)("strong",{children:r})]}),(0,Rt.jsxs)("p",{children:["\u5206\u6578\uff1a",(0,Rt.jsx)("strong",{children:null===i||void 0===i?void 0:i.score})]}),(0,Rt.jsx)("p",{children:null===i||void 0===i?void 0:i.em_remark_tw})]}),(0,Rt.jsxs)("div",{className:"mb-4",children:[(0,Rt.jsx)("h3",{className:"text-xl font-semibold",children:"\u5404\u7dad\u5ea6\u7c21\u8981"}),(0,Rt.jsxs)("table",{className:"table w-full",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("th",{children:"\u7dad\u5ea6"}),(0,Rt.jsx)("th",{children:"\u8a55\u5206"}),(0,Rt.jsx)("th",{children:"\u5099\u8a3b"}),(0,Rt.jsx)("th",{children:"\u9810\u6e2c"})]})}),(0,Rt.jsxs)("tbody",{children:[(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("td",{children:null===a||void 0===a?void 0:a.title}),(0,Rt.jsx)("td",{children:null===a||void 0===a?void 0:a.comment}),(0,Rt.jsx)("td",{children:null===a||void 0===a?void 0:a.comment_remark_tw}),(0,Rt.jsx)("td",{children:null===a||void 0===a?void 0:a.predict})]}),(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("td",{children:null===o||void 0===o?void 0:o.title}),(0,Rt.jsx)("td",{children:null===o||void 0===o?void 0:o.comment}),(0,Rt.jsx)("td",{children:null===o||void 0===o?void 0:o.comment_remark_tw}),(0,Rt.jsx)("td",{children:null===o||void 0===o?void 0:o.predict})]}),(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("td",{children:null===l||void 0===l?void 0:l.title}),(0,Rt.jsx)("td",{children:null===l||void 0===l?void 0:l.comment}),(0,Rt.jsx)("td",{children:null===l||void 0===l?void 0:l.comment_remark_tw}),(0,Rt.jsx)("td",{children:null===l||void 0===l?void 0:l.predict})]}),(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("td",{children:null===c||void 0===c?void 0:c.title}),(0,Rt.jsx)("td",{children:null===c||void 0===c?void 0:c.comment}),(0,Rt.jsx)("td",{children:null===c||void 0===c?void 0:c.comment_remark_tw}),(0,Rt.jsx)("td",{children:null===c||void 0===c?void 0:c.predict})]}),(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("td",{children:null===h||void 0===h?void 0:h.title}),(0,Rt.jsx)("td",{children:null===h||void 0===h?void 0:h.comment}),(0,Rt.jsx)("td",{children:null===h||void 0===h?void 0:h.comment_remark_tw}),(0,Rt.jsx)("td",{children:null===h||void 0===h?void 0:h.predict})]}),(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("td",{children:null===u||void 0===u?void 0:u.title}),(0,Rt.jsx)("td",{children:null===u||void 0===u?void 0:u.comment}),(0,Rt.jsx)("td",{children:null===u||void 0===u?void 0:u.comment_remark_tw}),(0,Rt.jsx)("td",{children:null===u||void 0===u?void 0:u.predict})]}),(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("td",{children:null===d||void 0===d?void 0:d.title}),(0,Rt.jsx)("td",{children:null===d||void 0===d?void 0:d.comment}),(0,Rt.jsx)("td",{children:null===d||void 0===d?void 0:d.comment_remark_tw}),(0,Rt.jsx)("td",{children:null===d||void 0===d?void 0:d.predict})]}),(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("td",{children:null===f||void 0===f?void 0:f.title}),(0,Rt.jsx)("td",{children:null===f||void 0===f?void 0:f.comment}),(0,Rt.jsx)("td",{children:null===f||void 0===f?void 0:f.comment_remark_tw}),(0,Rt.jsx)("td",{children:null===f||void 0===f?void 0:f.predict})]})]})]})]}),(0,Rt.jsxs)("div",{className:"mb-4",children:[(0,Rt.jsx)("h3",{className:"text-xl font-semibold",children:"\u6392\u540d\u5831\u544a\uff08\u7531\u9ad8\u5230\u4f4e\uff09"}),(0,Rt.jsxs)("table",{className:"table w-full",children:[(0,Rt.jsx)("thead",{children:(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("th",{children:"\u7dad\u5ea6"}),(0,Rt.jsx)("th",{children:"\u8a55\u5206"}),(0,Rt.jsx)("th",{children:"\u5099\u8a3b"}),(0,Rt.jsx)("th",{children:"\u9810\u6e2c"})]})}),(0,Rt.jsx)("tbody",{children:p.map(((e,t)=>(0,Rt.jsxs)("tr",{children:[(0,Rt.jsx)("td",{children:e.title}),(0,Rt.jsx)("td",{children:e.comment}),(0,Rt.jsx)("td",{children:e.comment_remark_tw}),(0,Rt.jsx)("td",{children:e.predict})]},t)))})]})]}),(0,Rt.jsxs)("details",{className:"collapse border border-base-300 bg-base-100 rounded-box",children:[(0,Rt.jsx)("summary",{className:"collapse-title text-sm font-medium",children:"\u986f\u793a\u539f\u59cb\u8cc7\u6599\uff08\u9664\u932f\u7528\uff09"}),(0,Rt.jsx)("div",{className:"collapse-content",children:(0,Rt.jsx)("pre",{className:"whitespace-pre-wrap text-xs",children:JSON.stringify(e,null,2)})})]})]})}};Pt(YM);const qM={id:"mindei_normal",group:"\u5229\u990a\u7081",name:"\u6b63\u5ff5\u4fee\u884c",shortDescription:"\u6b63\u5ff5\u4fee\u884c\u8207\u8eab\u5fc3\u6307\u6578\u7cfb\u7d71\uff0c\u524d\u5f8c\u6e2c\u5404\u4e00\u5206\u9418\u8a55\u4f30\u8eab\u5fc3\u5e73\u8861",description:"\u6b63\u5ff5\u4fee\u884c (Mindfulness) \u8207\u8eab\u5fc3\u6307\u6578\u7cfb\u7d71\u3002\u524d\u6e2c\u70ba\u6b63\u5e38\u775c\u773c\u72c0\u614b\uff0c\u5f8c\u6e2c\u70ba\u6b63\u5ff5\u9589\u773c\u72c0\u614b\uff0c\u5404\u4e00\u5206\u9418\u3002\u900f\u904e\u60c5\u7dd2\u5224\u5225\u5f0f\u8a08\u7b97\u8207\u6642\u5e8f\u5206\u6790\uff0c\u8a55\u4f30\u6b63\u5ff5\u4fee\u884c\u6307\u6578\u8207\u8eab\u5fc3\u5e73\u8861\u72c0\u614b\uff0c\u60c5\u7dd2\u503c\u6700\u4f73\u72c0\u614b\u70ba\u6301\u7e8c\u4fdd\u6301\u5728 1\uff0c\u4ee3\u8868\u5fc3\u7121\u7f63\u7919\u3001\u5fc3\u5982\u6b62\u6c34\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){return xp("/api/v1/mindfulness",{type:"normal",beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:jM};Pt(qM);const KM={id:"mindei_movement",group:"\u5229\u990a\u7081",name:"\u7df4\u7081\u4fee\u884c",shortDescription:"\u7df4\u7081\u4fee\u884c\u6a21\u5f0f\uff0c\u5206\u6790\u904b\u884c\u7df4\u7081\u6642\u7684\u80fd\u91cf\u72c0\u614b\u8207\u8eab\u5fc3\u5354\u8abf",description:"\u7df4\u7081\u4fee\u884c\u6a21\u5f0f\uff0c\u524d\u6e2c\u70ba\u6b63\u5e38\u775c\u773c\u72c0\u614b\uff0c\u5f8c\u6e2c\u70ba\u904b\u884c\u7df4\u7081\u72c0\u614b\uff0c\u5404\u4e00\u5206\u9418\u3002\u900f\u904e\u8166\u6ce2\u6578\u64da\u5206\u6790\u8a55\u4f30\u7df4\u7081\u904e\u7a0b\u4e2d\u7684\u80fd\u91cf\u904b\u884c\u72c0\u614b\u8207\u8eab\u5fc3\u5354\u8abf\u7a0b\u5ea6\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){return xp("/api/v1/mindfulness",{type:"movement",beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:jM};Pt(KM);const $M={id:"mindei_level",group:"\u5229\u990a\u7081",name:"\u7df4\u7081\u54c1\u968e",shortDescription:"\u7df4\u7081\u54c1\u968e\u8a55\u4f30\uff0c\u5c0d\u6bd4\u6b63\u5ff5\u57fa\u6e96\u8207\u7df4\u7081\u72c0\u614b\u5224\u5b9a\u4fee\u884c\u5883\u754c",description:"\u7df4\u7081\u54c1\u968e\u6a21\u5f0f\uff0c\u524d\u6e2c\u70ba\u6b63\u5ff5\u9589\u773c\u72c0\u614b\uff0c\u5f8c\u6e2c\u70ba\u904b\u884c\u7df4\u7081\u72c0\u614b\uff0c\u5404\u4e00\u5206\u9418\u3002\u7528\u65bc\u8a55\u4f30\u4fee\u884c\u8005\u7684\u7df4\u7081\u5c64\u7d1a\u8207\u54c1\u8cea\uff0c\u900f\u904e\u5c0d\u6bd4\u6b63\u5ff5\u57fa\u6e96\u8207\u7df4\u7081\u72c0\u614b\u7684\u8166\u6ce2\u5dee\u7570\uff0c\u5224\u5b9a\u4fee\u884c\u5883\u754c\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){return xp("/api/v1/mindfulness",{type:"level",beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:jM};Pt($M);const ZM={id:"zhentianfu",group:"\u4e3b\u8981\u529f\u80fd",name:"\u8c9e\u5929\u8ce6",shortDescription:"\u6f5b\u80fd\u8a55\u4f30\u7cfb\u7d71\uff0c\u5206\u6790\u81ea\u7136\u79d1\u5b78\u3001\u5275\u65b0\u85dd\u8853\u7b49\u516b\u9805\u5929\u8ce6\u4eba\u683c\u7279\u8cea",description:"\u6f5b\u80fd (Potential) \u8a55\u4f30\u7cfb\u7d71\uff0c\u5206\u6790\u8207\u751f\u4ff1\u4f86\u7684\u516b\u9805\u4eba\u683c\u7279\u8cea\uff1a\u81ea\u7136\u79d1\u5b78\u3001\u5275\u65b0\u85dd\u8853\u3001\u908f\u8f2f\u5224\u65b7\u3001\u8a18\u61b6\u8a08\u7b97\u3001\u6d3b\u6f51\u5408\u7fa4\u3001\u793e\u4ea4\u516c\u95dc\u3001\u6a5f\u667a\u53cd\u61c9\u3001\u5805\u6bc5\u5fcd\u8010\uff0c\u7d50\u5408\u6613\u7d93\u516b\u5366\u7406\u8ad6\u63d0\u4f9b\u5929\u8ce6\u80fd\u91cf\u5206\u5e03\u8207\u6f5b\u80fd\u767c\u5c55\u5efa\u8b70\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){return xp("/api/v1/talent",{beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:e=>{const t=[e.delta,e.theta,e.lowAlpha,e.highAlpha,e.lowBeta,e.highBeta,e.lowGamma,e.highGamma];return(0,Rt.jsxs)("div",{className:"p-4 space-y-6",children:[(0,Rt.jsx)("h3",{className:"text-2xl font-bold mb-4",children:"\u8c9e\u5929\u8ce6\u5831\u544a"}),(0,Rt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Rt.jsxs)("div",{className:"card bg-base-100 shadow-md p-4",children:[(0,Rt.jsx)("h4",{className:"text-lg font-semibold",children:"\u60c5\u7dd2\u5206\u6790"}),(0,Rt.jsxs)("p",{className:"text-sm",children:["\u60c5\u7dd2\u524d\u5e73\u5747\uff1a",e.sentimentBeforeAvg]}),(0,Rt.jsxs)("p",{className:"text-sm",children:["\u60c5\u7dd2\u5f8c\u5e73\u5747\uff1a",e.sentimentAfterAvg]}),(0,Rt.jsxs)("p",{className:"text-sm font-medium",children:["\u60c5\u7dd2\u8a55\u8a9e\uff1a",e.EM_report.em_remark_tw]})]}),(0,Rt.jsxs)("div",{className:"card bg-base-100 shadow-md p-4",children:[(0,Rt.jsx)("h4",{className:"text-lg font-semibold",children:"\u7e3d\u80fd\u91cf TE"}),(0,Rt.jsxs)("p",{className:"text-sm",children:["\u5206\u6578\uff1a",e.TEScore]}),(0,Rt.jsxs)("p",{className:"text-sm font-medium",children:["\u8a55\u8a9e\uff1a",e.TEScore_report.te_score_remark_tw]})]})]}),(0,Rt.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(((e,t)=>(0,Rt.jsxs)("div",{className:"card bg-base-100 shadow p-4",children:[(0,Rt.jsxs)("h5",{className:"font-bold text-lg",children:[e.title," (",e.comment,")"]}),(0,Rt.jsx)("p",{className:"text-sm",children:e.comment_remark_tw}),(0,Rt.jsxs)("p",{className:"text-xs text-gray-500",children:["\u6f5b\u80fd\u9810\u6e2c\uff1a",e.predict," - ",e.predit_remark_tw]})]},t)))}),(0,Rt.jsxs)("div",{className:"card bg-base-100 shadow-md p-4 mt-6",children:[(0,Rt.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"\u80fd\u529b\u6392\u540d\uff08\u5f37\u5230\u5f31\uff09"}),(0,Rt.jsx)("ol",{className:"list-decimal list-inside space-y-1",children:e.ranking_report.map(((e,t)=>(0,Rt.jsxs)("li",{children:[(0,Rt.jsxs)("span",{className:"font-semibold",children:[e.title," (",e.comment,")\uff1a"]}),e.comment_remark_tw]},t)))})]})]})}};Pt(ZM);const QM={id:"emotion_management",group:"\u6613 Motion",name:"\u60c5\u7dd2\u7ba1\u7406\u7cfb\u7d71",shortDescription:"\u54e1\u5de5\u60c5\u7dd2\u7ba1\u7406\uff0c\u5b9a\u671f\u91cf\u6e2c\u8166\u6ce2\u60c5\u7dd2\u7d00\u9304\u4e26\u9810\u6e2c\u6182\u9b31\u50be\u5411",description:"\u54e1\u5de5\u60c5\u7dd2\u7ba1\u7406\u7cfb\u7d71\uff0c\u5b9a\u671f\u91cf\u6e2c\u8166\u6ce2\u60c5\u7dd2\u4e26\u7d00\u9304\uff0c\u85c9\u4ee5\u9810\u6e2c\u662f\u5426\u6709\u6182\u9b31\u50be\u5411\u3002\u6e2c\u8a66\u6642\u9593 1 \u5206\u9418\uff0c\u6e2c\u8a66\u8005\u5168\u7a0b\u775c\u773c\u4fdd\u6301\u5e73\u5e38\u72c0\u614b\uff0c\u5831\u544a\u986f\u793a\u60c5\u7dd2\u503c\u6642\u5e8f\u5716\u8207\u60c5\u7dd2\u5e73\u5747\u503c\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){return xp("/api/v1/analysis/sentiment",{beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:VM};Pt(QM);const JM={id:"pet_test",group:"\u6613 Motion",name:"\u5bf5\u7269\u8a55\u6bd4\u6e2c\u8a66",shortDescription:"\u5bf5\u7269\u8a55\u6bd4\uff0c\u900f\u904e\u8996\u89ba\u8207\u89f8\u89ba\u968e\u6bb5\u7684\u8166\u6ce2\u60c5\u7dd2\u5206\u6790\u9078\u64c7\u6700\u4f73\u5bf5\u7269",description:"\u5bf5\u7269\u8a55\u6bd4\u6e2c\u8a66\uff08\u8996\u89ba\u3001\u89f8\u89ba\uff09\uff0c\u5229\u7528\u8166\u6ce2\u60c5\u7dd2\u5206\u6790\u9078\u64c7\u5c0d\u4e3b\u4eba\u8eab\u5fc3\u6700\u6709\u5229\u7684\u5bf5\u7269\u3002\u6e2c\u8a66\u5171 2 \u5206\u9418\uff1a\u524d 30 \u79d2\u7121\u5bf5\u7269\u300130-60 \u79d2\u89c0\u770b\u5bf5\u7269\u300160-120 \u79d2\u89aa\u5bc6\u63a5\u89f8\u5bf5\u7269\uff0c\u8a08\u7b97\u5404\u968e\u6bb5\u60c5\u7dd2\u5e73\u5747\u503c\u9032\u884c\u8a55\u6bd4\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){return xp("/api/v1/analysis/ore",{type:"pet",beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:VM};Pt(JM);const eC={id:"beverage_test",group:"\u6613 Motion",name:"\u54c1\u8336/\u54c1\u9152/\u54c1\u5496\u5561\u8a55\u6bd4\u6e2c\u8a66",shortDescription:"\u98f2\u54c1\u8a55\u6bd4\uff0c\u900f\u904e\u55c5\u89ba\u8207\u5473\u89ba\u7684\u8166\u6ce2\u60c5\u7dd2\u5206\u6790\u9078\u64c7\u6700\u4f73\u98f2\u54c1",description:"\u54c1\u8336\u3001\u54c1\u9152\u3001\u54c1\u5496\u5561\u8a55\u6bd4\u6e2c\u8a66\uff08\u55c5\u89ba\u3001\u5473\u89ba\uff09\uff0c\u5229\u7528\u8166\u6ce2\u60c5\u7dd2\u5206\u6790\u9078\u64c7\u5c0d\u8eab\u5fc3\u6700\u6709\u5229\u7684\u7522\u54c1\u3002\u6e2c\u8a66\u5171 2 \u5206\u9418\uff1a\u524d 30 \u79d2\u4e0d\u63a5\u89f8\u300130-60 \u79d2\u805e\u9999\u300160-120 \u79d2\u54c1\u5690\uff0c\u8a08\u7b97\u5404\u968e\u6bb5\u60c5\u7dd2\u5e73\u5747\u503c\u9032\u884c\u8a55\u6bd4\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){return xp("/api/v1/analysis/ore",{type:"beverage",beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:VM};Pt(eC);const tC={id:"perfume_test",group:"\u6613 Motion",name:"\u9999\u6c34\u8a55\u6bd4\u6e2c\u8a66",shortDescription:"\u9999\u6c34\u8a55\u6bd4\uff0c\u900f\u904e\u55c5\u89ba\u7684\u8166\u6ce2\u60c5\u7dd2\u5206\u6790\u9078\u64c7\u6700\u9069\u5408\u7684\u9999\u6c34\u7522\u54c1",description:"\u9999\u6c34\u8a55\u6bd4\u6e2c\u8a66\uff08\u55c5\u89ba\uff09\uff0c\u5229\u7528\u8166\u6ce2\u60c5\u7dd2\u5206\u6790\u9078\u64c7\u5c0d\u8eab\u5fc3\u6700\u6709\u5229\u7684\u9999\u6c34\u7522\u54c1\u3002\u6e2c\u8a66\u5171 2 \u5206\u9418\uff1a\u524d 30 \u79d2\u7121\u9999\u6c34\u300130-60 \u79d2\u805e\u9999\u300160-120 \u79d2\u518d\u6b21\u805e\u9999\u78ba\u8a8d\uff0c\u8a08\u7b97\u5404\u968e\u6bb5\u60c5\u7dd2\u5e73\u5747\u503c\u9032\u884c\u8a55\u6bd4\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){return xp("/api/v1/analysis/ore",{type:"perfume",beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:VM};Pt(tC);const nC={id:"music_test",group:"\u6613 Motion",name:"\u97f3\u6a02\u6f14\u594f/\u6b4c\u66f2\u6f14\u5531\u8a55\u6bd4\u6e2c\u8a66",shortDescription:"\u97f3\u6a02\u8a55\u6bd4\uff0c\u900f\u904e\u807d\u89ba\u7684\u8166\u6ce2\u60c5\u7dd2\u5206\u6790\u8a55\u6bd4\u4e0d\u540c\u97f3\u6a02\u4f5c\u54c1",description:"\u97f3\u6a02\u6f14\u594f/\u6b4c\u66f2\u6f14\u5531\u8a55\u6bd4\u6e2c\u8a66\uff08\u807d\u89ba\uff09\uff0c\u5229\u7528\u8166\u6ce2\u60c5\u7dd2\u5206\u6790\u9078\u64c7\u5c0d\u8eab\u5fc3\u6700\u6709\u5229\u7684\u97f3\u6a02\u4f5c\u54c1\u3002\u6e2c\u8a66\u6642\u9593\u6839\u64da\u97f3\u6a02\u9577\u5ea6\u800c\u5b9a\uff0c\u53ef\u7528\u65bc\u8a55\u6bd4\u4e0d\u540c\u6f14\u594f\u7248\u672c\u3001\u6b4c\u624b\u8a6e\u91cb\u6216\u97f3\u6a02\u985e\u578b\u5c0d\u807d\u773e\u7684\u60c5\u7dd2\u5f71\u97ff\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){return xp("/api/v1/analysis/ore",{type:"music",beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:VM};Pt(nC);const iC={id:"video_test",group:"\u6613 Motion",name:"\u77ed\u8996\u983b\u5ee3\u544a\u8a55\u6bd4\u6e2c\u8a66",shortDescription:"\u8996\u983b\u5ee3\u544a\u8a55\u6bd4\uff0c\u900f\u904e\u8996\u807d\u89ba\u7684\u8166\u6ce2\u60c5\u7dd2\u5206\u6790\u8a55\u4f30\u5ee3\u544a\u6548\u679c",description:"\u77ed\u8996\u983b\u5ee3\u544a\u8a55\u6bd4\u6e2c\u8a66\uff08\u8996\u89ba+\u807d\u89ba\uff09\uff0c\u5229\u7528\u8166\u6ce2\u60c5\u7dd2\u5206\u6790\u8a55\u4f30\u5ee3\u544a\u5c0d\u89c0\u773e\u7684\u5f71\u97ff\u7a0b\u5ea6\uff0c\u70ba\u5ee3\u544a\u4e3b\u63d0\u4f9b\u5ba2\u89c0\u7684\u8166\u6ce2\u6578\u64da\u53c3\u8003\u3002\u6e2c\u8a66\u6642\u9593\u6839\u64da\u5f71\u7247\u9577\u5ea6\u800c\u5b9a\uff0c\u8a08\u7b97\u89c0\u770b\u904e\u7a0b\u4e2d\u7684\u60c5\u7dd2\u5e73\u5747\u503c\u9032\u884c\u8a55\u6bd4\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){return xp("/api/v1/analysis/ore",{type:"video",beforeBrainData:e[0],afterBrainData:e[1]})},renderReport:VM};Pt(iC);const sC={id:"zhenbaoqi",group:"\u4e3b\u8981\u529f\u80fd",name:"\u73cd\u5bf6\u7081",shortDescription:"\u73cd\u5bf6\u7081\u5834\u7926\u7269\u7d50\u6676\u9ad4\u6e2c\u8a66\uff08\u53f0\u7063\u5c08\u5229\uff09\uff0c\u63a8\u85a6\u6700\u5408\u9069\u7684\u6c34\u6676\u5bf6\u77f3",description:"\u73cd\u5bf6\u7081\u5834\u4e4b\u7926\u7269\u7d50\u6676\u9ad4\u6e2c\u8a66\u7cfb\u7d71\uff08\u53f0\u7063\u5c08\u5229\uff09\uff0c\u900f\u904e\u8166\u6ce2\u60c5\u7dd2\u5206\u6790\u8a55\u4f30\u4e0d\u540c\u6c34\u6676\u3001\u5bf6\u77f3\u7b49\u7d50\u6676\u9ad4\u5c0d\u4eba\u9ad4\u80fd\u91cf\u5834\u7684\u5f71\u97ff\uff0c\u63a8\u85a6\u8207\u4f7f\u7528\u8005\u6c23\u5834\u6700\u76f8\u5408\u7684\u7d50\u6676\u9ad4\u7522\u54c1\uff0c\u9054\u5230\u8eab\u5fc3\u5e73\u8861\u8207\u80fd\u91cf\u8abf\u548c\u7684\u6548\u679c\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){const t={beforeBrainData:e[0],afterBrainData:e[1]},n=await xp("/api/v1/treasure/stage1",t);if(!n.ea0_timing_diagram||!n.ea1_timing_diagram)throw new yp("\u7b2c\u4e00\u968e\u6bb5\u5206\u6790\u56de\u50b3\u8cc7\u6599\u4e0d\u5b8c\u6574",void 0);const i={ea_before_timing_diagram:n.ea0_timing_diagram,ea_after_timing_diagram:n.ea1_timing_diagram,wear_ea:n.wear_ea,pillow_ea:n.pillow_ea},s=await xp("/api/v1/treasure/stage2",i),r=s.stage2||s;return h(h({},n),r)},renderReport:e=>{const{te_scores:t,te_comments:n,ea0:i,ea1:s,me_score:r,ea_before_timing_diagram:a,ea_after_timing_diagram:o}=e;return(0,Rt.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Rt.jsx)("h2",{className:"text-3xl font-bold",children:"\u73cd\u5bf6\u7081\u5831\u544a"}),(0,Rt.jsx)("div",{className:"grid grid-cols-2 gap-4",children:["te1","te2","te3","te4"].map(((e,i)=>(0,Rt.jsxs)("div",{className:"card bg-base-100 shadow p-4",children:[(0,Rt.jsxs)("h4",{className:"font-semibold",children:["TE",i+1," \u5206\u6578"]}),(0,Rt.jsx)("p",{children:t[e]}),(0,Rt.jsx)("p",{className:"text-sm text-gray-500",children:n[e]})]},e)))}),(0,Rt.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,Rt.jsxs)("div",{className:"card p-4",children:["EA0: ",i]}),(0,Rt.jsxs)("div",{className:"card p-4",children:["EA1: ",s]}),(0,Rt.jsxs)("div",{className:"card p-4",children:["ME: ",r]})]}),(0,Rt.jsxs)("div",{className:"card p-4",children:[(0,Rt.jsx)("h4",{className:"mb-2",children:"\u60c5\u7dd2\u524d\u5f8c\u6e2c\u6642\u5e8f\u5716"}),(0,Rt.jsx)(Tp(),{highcharts:Ep(),options:{chart:{type:"line"},title:{text:""},xAxis:{categories:a.map(((e,t)=>"T".concat(t+1)))},series:[{name:"\u524d\u6e2c",data:a,type:"line"},{name:"\u5f8c\u6e2c",data:o,type:"line"}]}})]}),(0,Rt.jsxs)("div",{className:"card p-4",children:[(0,Rt.jsx)("h4",{className:"font-semibold",children:"A.\u6700\u4f73\u7081\u5834\u4e4b\u7926\u7269\u7d50\u6676\u9ad4"}),(0,Rt.jsx)("p",{children:"\uff08\u898b PDF \u8868\u4e8c\uff1a\u7c89\u8272\u85cd\u5bf6\u77f3\u3001\u2026\uff09"})]}),(0,Rt.jsxs)("div",{className:"card p-4",children:[(0,Rt.jsx)("h4",{className:"font-semibold",children:"B.\u63a8\u85a6\u5e02\u5834\u8457\u540d\u7d50\u6676\u9ad4"}),(0,Rt.jsxs)("ul",{className:"list-disc list-inside",children:[(0,Rt.jsx)("li",{children:"Jo Malone \u2026"}),(0,Rt.jsx)("li",{children:"TOM FORD \u2026"})]})]})]})}};Pt(sC);const rC={id:"qingxiangyi",group:"\u4e3b\u8981\u529f\u80fd",name:"\u60c5\u9999\u610f",shortDescription:"\u60c5\u9999\u610f\u7081\u5834\u9999\u6c1b\u6e2c\u8a66\uff0c\u900f\u904e\u8166\u6ce2\u5206\u6790\u63a8\u85a6\u500b\u4eba\u5316\u82b3\u9999\u7642\u7652\u7522\u54c1",description:"\u60c5\u9999\u610f\u7081\u5834\u4e4b\u9999\u6c1b\u6e2c\u8a66\u7cfb\u7d71\uff0c\u900f\u904e\u8166\u6ce2\u60c5\u7dd2\u5206\u6790\u8a55\u4f30\u4e0d\u540c\u9999\u6c1b\u3001\u7cbe\u6cb9\u5c0d\u4eba\u9ad4\u60c5\u7dd2\u8207\u80fd\u91cf\u5834\u7684\u5f71\u97ff\uff0c\u63a8\u85a6\u8207\u4f7f\u7528\u8005\u8eab\u5fc3\u72c0\u614b\u6700\u76f8\u5408\u7684\u9999\u6c1b\u7522\u54c1\uff0c\u63d0\u4f9b\u500b\u4eba\u5316\u7684\u82b3\u9999\u7642\u7652\u5efa\u8b70\u8207\u8a73\u7d30\u5c0d\u7167\u5831\u544a\u3002",requiredFiles:[{verbose_name:"\u524d\u6e2c\u8cc7\u6599",name:"beforeBrainData"},{verbose_name:"\u5f8c\u6e2c\u8cc7\u6599",name:"afterBrainData"}],execute:async function(e){var t,n,i,s;const r={beforeBrainData:e[0],afterBrainData:e[1]},a=await xp("/api/v1/perfume/stage1",r);if(!a.ea0_timing_diagram||!a.ea1_timing_diagram)throw new yp("\u7b2c\u4e00\u968e\u6bb5\u5206\u6790\u56de\u50b3\u8cc7\u6599\u4e0d\u5b8c\u6574",void 0);if(null===(t=a.te_comment)||void 0===t||null===(n=t.te1)||void 0===n||!n.fragrances||null===(i=a.te_comment)||void 0===i||null===(s=i.te1)||void 0===s||!s.brands)throw new yp("\u7b2c\u4e00\u968e\u6bb5\u5206\u6790\u7f3a\u5c11\u9999\u6c1b\u8cc7\u6599",void 0);const o={ea_before_timing_diagram:a.ea0_timing_diagram,ea_after_timing_diagram:a.ea1_timing_diagram,fragrances:a.te_comment.te1.fragrances,brands:a.te_comment.te1.brands},l=await xp("/api/v1/perfume/stage2",o),c=l.stage2||l;return h(h({},a),c)},renderReport:e=>{const{te_scores:t,te_comments:n,ea0:i,ea1:s,me_score:r,ea_before_timing_diagram:a,ea_after_timing_diagram:o,fragrances:l,brands:c}=e;return(0,Rt.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Rt.jsx)("h2",{className:"text-3xl font-bold",children:"\u60c5\u9999\u610f\u5831\u544a"}),(0,Rt.jsxs)("div",{className:"card p-4",children:[(0,Rt.jsx)("h4",{className:"font-semibold",children:"A.\u6700\u4f73\u7081\u5834\u4e4b\u4e2d\u8abf\u9999\u6c1b"}),(0,Rt.jsx)("p",{children:l.join("\u3001")})]}),(0,Rt.jsxs)("div",{className:"card p-4",children:[(0,Rt.jsx)("h4",{className:"font-semibold",children:"B.\u63a8\u85a6\u5e02\u5834\u8457\u540d\u9999\u6c1b"}),(0,Rt.jsx)("p",{children:c.join("\u3001")})]})]})}};Pt(rC);s.createRoot(document.getElementById("root")).render((0,Rt.jsx)(t.StrictMode,{children:(0,Rt.jsx)(qu,{})}))})()})();
//# sourceMappingURL=main.24ef1bf4.js.map